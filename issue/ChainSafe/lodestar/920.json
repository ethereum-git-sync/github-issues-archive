{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/920",
  "id": 619131442,
  "node_id": "MDU6SXNzdWU2MTkxMzE0NDI=",
  "number": 920,
  "title": "OOM killed syncing schlesi",
  "user": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-05-15T17:31:42Z",
  "updated_at": "2020-05-16T16:34:58Z",
  "closed_at": "2020-05-16T16:34:58Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nSyncing schlesi, got an OOM crash.\r\n\r\n**Steps to Reproduce**\r\n<!--Steps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n-->\r\n\r\n**Screenshots**\r\nerror logs: note, the two lines ` info: Fetching blocks for 20919...20983 slot range` `info: Imported blocks for slots:` were repeated as far back as my console history showed\r\n```\r\n2020-05-15 11:51:08  []                 info: Fetching blocks for 20919...20983 slot range\r\n2020-05-15 11:51:08  []                 info: Imported blocks for slots:                                                                                                                 \r\n2020-05-15 11:51:08  []                 info: Fetching blocks for 20919...20983 slot range\r\n2020-05-15 11:51:08  []                 info: Imported blocks for slots:               \r\n2020-05-15 11:51:08  []                 info: Fetching blocks for 20919...20983 slot range                                                                                               \r\n                                                                                                                                                                                         \r\n<--- Last few GCs --->                                                                      \r\n                                                                                            \r\n[1194148:0x3b360a0]  3821808 ms: Scavenge 2031.5 (2059.1) -> 2023.2 (2059.6) MB, 8.9 / 0.0 ms  (average mu = 0.182, current mu = 0.118) allocation failure \r\n[1194148:0x3b360a0]  3821849 ms: Scavenge 2032.0 (2059.6) -> 2023.9 (2060.1) MB, 9.5 / 0.0 ms  (average mu = 0.182, current mu = 0.118) allocation failure \r\n[1194148:0x3b360a0]  3823606 ms: Mark-sweep 2032.7 (2060.1) -> 2023.9 (2073.1) MB, 1725.8 / 0.0 ms  (average mu = 0.130, current mu = 0.080) allocation failure scavenge might not succee\r\nd                                                                                           \r\n\r\n\r\n<--- JS stacktrace --->\r\n\r\n==== JS stack trace =========================================\r\n\r\n    0: ExitFrame [pc: 0x1374fd9]\r\nSecurity context: 0x16c11c3408a1 <JSObject>\r\n    1: _write [0x82bc08b4f71] [/home/cayman/Code/lodestar/node_modules/winston-transport/index.js:~68] [pc=0x142897e65dee](this=0x0d382e7702e9 <TransportStream map = 0x1a0a03bdf921>,0x2\r\n966115ee279 <Object map = 0x2d32541a7581>,0x126f3889e1b1 <String[#4]: utf8>,0x018539a5b369 <JSFunction WritableState.onwrite (sfi = 0x270eab58c9f1)>)\r\n    2: ondata [0xd382e770679] ...\r\n\r\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\r\n 1: 0x9da7c0 node::Abort() [node]\r\n 2: 0x9db976 node::OnFatalError(char const*, char const*) [node]\r\n 3: 0xb39f1e v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]\r\n 4: 0xb3a299 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]\r\n 5: 0xce5635  [node]\r\n 6: 0xce5cc6 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [node]\r\n 7: 0xcf1b5a v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]\r\n 8: 0xcf2a65 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]\r\n 9: 0xcf410f v8::internal::Heap::HandleGCRequest() [node]\r\n10: 0xca30f4 v8::internal::StackGuard::HandleInterrupts() [node]\r\n11: 0xff1af7 v8::internal::Runtime_StackGuard(int, unsigned long*, v8::internal::Isolate*) [node]\r\n12: 0x1374fd9  [node]\r\nAborted (core dumped)\r\n\r\n```\r\nsome graphs:\r\n[lodecli-0515.pdf](https://github.com/ChainSafe/lodestar/files/4636044/lodecli-0515.pdf)\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/629391827",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/920#issuecomment-629391827",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920",
    "id": 629391827,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyOTM5MTgyNw==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-15T17:43:10Z",
    "updated_at": "2020-05-15T17:43:46Z",
    "author_association": "MEMBER",
    "body": "Think this is resolved using #916\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/629391827/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/629672014",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/920#issuecomment-629672014",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/920",
    "id": 629672014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyOTY3MjAxNA==",
    "user": {
      "login": "wemeetagain",
      "id": 1348242,
      "node_id": "MDQ6VXNlcjEzNDgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wemeetagain",
      "html_url": "https://github.com/wemeetagain",
      "followers_url": "https://api.github.com/users/wemeetagain/followers",
      "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
      "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
      "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
      "repos_url": "https://api.github.com/users/wemeetagain/repos",
      "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-16T16:34:58Z",
    "updated_at": "2020-05-16T16:34:58Z",
    "author_association": "MEMBER",
    "body": "seemingly resolved",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/629672014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1928",
  "id": 778817514,
  "node_id": "MDU6SXNzdWU3Nzg4MTc1MTQ=",
  "number": 1928,
  "title": "Implement Altair fork transition",
  "user": {
    "login": "mpetrunic",
    "id": 8836210,
    "node_id": "MDQ6VXNlcjg4MzYyMTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mpetrunic",
    "html_url": "https://github.com/mpetrunic",
    "followers_url": "https://api.github.com/users/mpetrunic/followers",
    "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
    "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
    "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
    "repos_url": "https://api.github.com/users/mpetrunic/repos",
    "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2829611743,
      "node_id": "MDU6TGFiZWwyODI5NjExNzQz",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/spec-altair",
      "name": "spec-altair",
      "color": "6baed6",
      "default": false,
      "description": "Issues targeting the Altair spec version."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-01-05T09:46:10Z",
  "updated_at": "2021-06-11T10:05:30Z",
  "closed_at": "2021-06-11T10:05:29Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "We should extract running state transition to separate method witch should decide from what fork should state transition be ran.\r\nSince lightclient state transition doesn't have fast implementation for now, we should create stubbed one like:\r\n```ts\r\nfastStateTransition(epochCtx: EpochCtx, state: LightClient.BeaconState): {epochCtx: EpochCtx, state: LightClient.BeaconState} {\r\n   state = runStateTransition();\r\n   epochCtx.loadState(state);\r\n   return {state, epochCtx}\r\n}\r\n``` ",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756520133",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1928#issuecomment-756520133",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928",
    "id": 756520133,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjUyMDEzMw==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-08T03:14:04Z",
    "updated_at": "2021-01-08T03:14:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mpetrunic are there any obstacles to use fast state transition for lightclient? If it's just a matter of time, I can look into it.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756520133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756574017",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1928#issuecomment-756574017",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928",
    "id": 756574017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjU3NDAxNw==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-08T06:23:05Z",
    "updated_at": "2021-01-08T06:23:05Z",
    "author_association": "MEMBER",
    "body": "> @mpetrunic are there any obstacles to use fast state transition for lightclient? If it's just a matter of time, I can look into it.\n\nYou would have to update epochctx balance on couple of places and it would make it harder to follow changes in spec. It really makes no sense to do that as there is no benefit (speed on <100 validator is irrelevant).\n\nAt some point (once lightclient spec is solid) there will be updated fast spec we can follow (imo)",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756574017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756592574",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1928#issuecomment-756592574",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928",
    "id": 756592574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjU5MjU3NA==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-08T07:12:37Z",
    "updated_at": "2021-01-08T07:27:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't see EpochContext manages balance and if we go with the fast state transition, it'd be mostly a 1-1 mapping to the spec. I think there are some benefit:\r\n+ we don't have to call `getActiveValidatorIndices()` which is slow as it's available in the EpochContext/IEpochShuffling\r\n+ when `processSyncCommittee()`, we don't have to call `getSyncCommitteeIndices()` again as we can use `pubkey2index` inside EpochContext and `state.currentSyncCommittee.pubkeys`, and this is per block processing\r\n\r\n> At some point (once lightclient spec is solid) there will be updated fast spec we can follow (imo)\r\n\r\nwe can wait for it but I guess to go with the fast state transition, mainly we keep the same flow and query available data inside EpochContext whenever possible \r\n\r\n@wemeetagain should know better than me, could you also have a look?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756592574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756609589",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1928#issuecomment-756609589",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928",
    "id": 756609589,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjYwOTU4OQ==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-08T07:58:24Z",
    "updated_at": "2021-01-08T07:58:24Z",
    "author_association": "MEMBER",
    "body": "Spec will probably change rapidly in coming weeks, I really don't see a benefit in maintaining both slow and fast state transition when speed is not relevant factor until there is spec freeze",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/756609589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/859467287",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1928#issuecomment-859467287",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1928",
    "id": 859467287,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1OTQ2NzI4Nw==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-11T10:05:29Z",
    "updated_at": "2021-06-11T10:05:29Z",
    "author_association": "MEMBER",
    "body": "Altair code fully implemented",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/859467287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

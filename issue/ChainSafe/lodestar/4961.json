{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4961",
  "id": 1514582693,
  "node_id": "I_kwDOCD5_Gc5aRrKl",
  "number": 4961,
  "title": "Unclear about checkpointSyncUrl post infura endpoint deprecation",
  "user": {
    "login": "hasjack",
    "id": 4430250,
    "node_id": "MDQ6VXNlcjQ0MzAyNTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4430250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hasjack",
    "html_url": "https://github.com/hasjack",
    "followers_url": "https://api.github.com/users/hasjack/followers",
    "following_url": "https://api.github.com/users/hasjack/following{/other_user}",
    "gists_url": "https://api.github.com/users/hasjack/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hasjack/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hasjack/subscriptions",
    "organizations_url": "https://api.github.com/users/hasjack/orgs",
    "repos_url": "https://api.github.com/users/hasjack/repos",
    "events_url": "https://api.github.com/users/hasjack/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hasjack/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-12-30T15:06:49Z",
  "updated_at": "2023-05-29T07:37:01Z",
  "closed_at": "2023-05-29T07:37:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello!\r\n\r\nAfter the ethereum merge I followed these instructions: https://hackmd.io/@philknows/rJegZyH9q to run an eth node.\r\n\r\nMy particular issue recently has been around the --checkpointSyncUrl flag as infura has deprecated the endpoint as specified in the above article. I have attempted replacing it with one of the alternatives provided on this page: https://eth-clients.github.io/checkpoint-sync-endpoints/\r\n\r\nHowever this results in these errors:\r\n\r\n```\r\ngeth_docker    | WARN [12-30|13:21:43.615] Post-merge network, but no beacon client seen. Please launch one to follow the chain! \r\nbeacon_node_1  | Dec-30 13:21:48.300[ETH1]            error: Error updating eth1 chain cache  request to http://127.0.0.1:8551/ failed, reason: connect ECONNREFUSED 127.0.0.1:8551\r\nbeacon_node_1  | FetchError: request to http://127.0.0.1:8551/ failed, reason: connect ECONNREFUSED 127.0.0.1:8551\r\nbeacon_node_1  |     at ClientRequest.<anonymous> (/usr/app/node_modules/node-fetch/lib/index.js:1461:11)\r\nbeacon_node_1  |     at ClientRequest.emit (node:events:513:28)\r\nbeacon_node_1  |     at Socket.socketErrorListener (node:_http_client:481:9)\r\nbeacon_node_1  |     at Socket.emit (node:events:513:28)\r\nbeacon_node_1  |     at emitErrorNT (node:internal/streams/destroy:157:8)\r\nbeacon_node_1  |     at emitErrorCloseNT (node:internal/streams/destroy:122:3)\r\nbeacon_node_1  |     at processTicksAndRejections (node:internal/process/task_queues:83:21)\r\nbeacon_node_1  | Dec-30 13:21:48.349[METRICS]          info: Starting metrics HTTP server port=8008, address=127.0.0.1\r\n\r\n```\r\nI used a few of the different options but always saw the above error and not clear how to fix e.g. `--checkpointSyncUrl https://beaconstate.ethstaker.cc` - I also tried to use the lodestar endpoint but to no avail.\r\n\r\nApologies in advance for this \"issue\" not really being an issue as such - more a lack of understanding on my part. I am mainly a FE developer with some devops / BE experience running a few sites that report on CryptoKitties. Any help would be greatly appreciated.",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1368138386",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4961#issuecomment-1368138386",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961",
    "id": 1368138386,
    "node_id": "IC_kwDOCD5_Gc5RjCKS",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-31T01:02:53Z",
    "updated_at": "2022-12-31T01:02:53Z",
    "author_association": "MEMBER",
    "body": "Hey @hasjack :wave: By seeing those logs I can confirm that the Lodestar node initialized, so `--checkpointSyncUrl` work correctly. However the issue here appears that your execution node is not reachable at `http://127.0.0.1:8551` which is the default. If you are running dockerized with a bridge network you probably need to do\r\n\r\n```\r\n--execution.urls http://geth_docker:8551\r\n```\r\n\r\nlet me know if that helps",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1368138386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1368262758",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4961#issuecomment-1368262758",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961",
    "id": 1368262758,
    "node_id": "IC_kwDOCD5_Gc5Rjghm",
    "user": {
      "login": "hasjack",
      "id": 4430250,
      "node_id": "MDQ6VXNlcjQ0MzAyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4430250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hasjack",
      "html_url": "https://github.com/hasjack",
      "followers_url": "https://api.github.com/users/hasjack/followers",
      "following_url": "https://api.github.com/users/hasjack/following{/other_user}",
      "gists_url": "https://api.github.com/users/hasjack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hasjack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hasjack/subscriptions",
      "organizations_url": "https://api.github.com/users/hasjack/orgs",
      "repos_url": "https://api.github.com/users/hasjack/repos",
      "events_url": "https://api.github.com/users/hasjack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hasjack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-31T18:29:09Z",
    "updated_at": "2022-12-31T18:32:09Z",
    "author_association": "NONE",
    "body": "Many thanks for your response. It hasn't resolved the issue however. I am confused as to why I didn't see this issue using the infura endpoint and surprised changing the endpoint has caused this. Below are the logs using `--execution.urls http://geth_docker:8551` - incidentally node appears to have synced by removing the `--checkpointSyncUrl` but am concerned this may cause issues ongoing?\r\n\r\n```geth_docker    | WARN [12-31|18:24:42.214] Post-merge network, but no beacon client seen. Please launch one to follow the chain! \r\nbeacon_node_1  | Dec-31 18:24:44.871[ETH1]            error: Error updating eth1 chain cache  request to http://geth_docker:8551/ failed, reason: getaddrinfo EAI_AGAIN geth_docker\r\nbeacon_node_1  | FetchError: request to http://geth_docker:8551/ failed, reason: getaddrinfo EAI_AGAIN geth_docker\r\nbeacon_node_1  |     at ClientRequest.<anonymous> (/usr/app/node_modules/node-fetch/lib/index.js:1461:11)\r\nbeacon_node_1  |     at ClientRequest.emit (node:events:513:28)\r\nbeacon_node_1  |     at Socket.socketErrorListener (node:_http_client:481:9)\r\nbeacon_node_1  |     at Socket.emit (node:events:513:28)\r\nbeacon_node_1  |     at emitErrorNT (node:internal/streams/destroy:157:8)\r\nbeacon_node_1  |     at emitErrorCloseNT (node:internal/streams/destroy:122:3)\r\nbeacon_node_1  |     at processTicksAndRejections (node:internal/process/task_queues:83:21)\r\nbeacon_node_1  | Dec-31 18:24:44.926[METRICS]          info: Starting metrics HTTP server port=8008, address=127.0.0.1```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1368262758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1368565835",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4961#issuecomment-1368565835",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961",
    "id": 1368565835,
    "node_id": "IC_kwDOCD5_Gc5RkqhL",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-01T23:30:27Z",
    "updated_at": "2023-01-01T23:30:27Z",
    "author_association": "MEMBER",
    "body": "To continue debugging your setup, please join our discord (Chainsafe invite https://discord.gg/MFYFN2d3) and share your error + the full docker-compose in the **:star:-lodestar-general** channel. Will be able to iterate faster there",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1368565835/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1369112603",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4961#issuecomment-1369112603",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961",
    "id": 1369112603,
    "node_id": "IC_kwDOCD5_Gc5RmwAb",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-02T17:35:59Z",
    "updated_at": "2023-01-02T17:35:59Z",
    "author_association": "MEMBER",
    "body": "I've also updated that guide with updated steps to use `--checkpointSyncUrl` under the \"Add your weak subjectivity (checkpoint sync) provider\" section. Though for your issue, it seems like it's related to not being able to connect to your execution node on 8551.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1369112603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1566694882",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4961#issuecomment-1566694882",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4961",
    "id": 1566694882,
    "node_id": "IC_kwDOCD5_Gc5dYd3i",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-29T07:37:01Z",
    "updated_at": "2023-05-29T07:37:01Z",
    "author_association": "MEMBER",
    "body": "Closing issues for specific incidents on old versions of Lodestar, please re-open if it happens with latest stable\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1566694882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

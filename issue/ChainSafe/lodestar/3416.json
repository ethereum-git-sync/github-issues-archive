{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3416",
  "id": 1045667047,
  "node_id": "I_kwDOCD5_Gc4-U5zn",
  "number": 3416,
  "title": "Performance issue with subscribeAllSubnets flag",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2963898184,
      "node_id": "MDU6TGFiZWwyOTYzODk4MTg0",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-performance",
      "name": "scope-performance",
      "color": "980043",
      "default": false,
      "description": "Performance issue and ideas to improve performance."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2021-11-05T10:22:55Z",
  "updated_at": "2022-04-13T10:30:43Z",
  "closed_at": "2022-04-13T10:30:43Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\n\r\nIf we start a node with `--network.subscribeAllSubnets` flag, it may take up to 40s to process a gossip block\r\n\r\n<img width=\"1614\" alt=\"Screen Shot 2021-11-05 at 17 20 57\" src=\"https://user-images.githubusercontent.com/10568965/140495988-0d371776-3fd5-4128-b545-818f66547caf.png\">\r\n\r\n\r\n**Expected behavior**\r\nNo performance issue with  `--network.subscribeAllSubnets` flag",
  "closed_by": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/961797877",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-961797877",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 961797877,
    "node_id": "IC_kwDOCD5_Gc45U971",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-05T10:54:38Z",
    "updated_at": "2021-11-05T10:54:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "[1105_contabo_1_subscribeAllSubnets.cpuprofile.zip](https://github.com/ChainSafe/lodestar/files/7482539/1105_contabo_1_subscribeAllSubnets.cpuprofile.zip)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/961797877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/962908978",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-962908978",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 962908978,
    "node_id": "IC_kwDOCD5_Gc45ZNMy",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T08:14:45Z",
    "updated_at": "2021-11-08T08:14:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like it's a memory issue that cause the node pause more frequently due to gc\r\n\r\n<img width=\"1587\" alt=\"Screen Shot 2021-11-08 at 15 06 31\" src=\"https://user-images.githubusercontent.com/10568965/140705791-234e56d9-30f2-4fe8-a651-69df703ce0c9.png\">\r\n\r\ngc pause time is almost 15% while it's 8.5% on normal node\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/962908978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/962960293",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-962960293",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 962960293,
    "node_id": "IC_kwDOCD5_Gc45ZZul",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T09:22:46Z",
    "updated_at": "2021-11-08T09:22:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "one other issue was with throwing GossipActionError as noted in #3402, it took > 4% just to throw that\r\n\r\n<img width=\"1481\" alt=\"Screen Shot 2021-11-08 at 16 21 20\" src=\"https://user-images.githubusercontent.com/10568965/140716138-f0452e38-43b4-42de-9699-7402a4ed2703.png\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/962960293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/963173728",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-963173728",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 963173728,
    "node_id": "IC_kwDOCD5_Gc45aN1g",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T13:57:19Z",
    "updated_at": "2021-11-08T13:57:28Z",
    "author_association": "MEMBER",
    "body": "@tuyennhv In the profile that you posted there's an insane amount of CPU time spent with async hook\r\n- `registerDestroyHook`\r\n- `promiseInitHookWithDestroyTrackinginternal`\r\n\r\n![Screenshot from 2021-11-08 14-56-15](https://user-images.githubusercontent.com/35266934/140754439-079f034c-513f-449d-9561-d7df55b81780.png)\r\n\r\n\r\nCould you investigate what's going on there?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/963173728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/964044976",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-964044976",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 964044976,
    "node_id": "IC_kwDOCD5_Gc45diiw",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-09T11:06:19Z",
    "updated_at": "2021-11-09T11:06:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @tuyennhv In the profile that you posted there's an insane amount of CPU time spent with async hook\r\n> registerDestroyHook\r\n> promiseInitHookWithDestroyTrackinginternal\r\n\r\n@dapplion  this is internal code of nodejs https://github.com/nodejs/node/blob/8d6a02583f51368a76f4244584351b2e5d061e2a/lib/internal/async_hooks.js#L328, I really don't see them in a healthy node. In the `subscribeAllSubnets()` node, there are a lot of rejected promises in the call of `validateGossipAttestation()` and `validateGossipAggregateAndProof()` that may cause this, could be linked to #3402 too\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/964044976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/964978573",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-964978573",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 964978573,
    "node_id": "IC_kwDOCD5_Gc45hGeN",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T10:07:04Z",
    "updated_at": "2021-11-10T10:07:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "in the last 12h, the performance is back to normal, most of gossip blocks are processed within 4s \r\n<img width=\"1593\" alt=\"Screen Shot 2021-11-10 at 16 47 16\" src=\"https://user-images.githubusercontent.com/10568965/141090230-1ea9cfe8-c240-4df2-a4ef-5bcf6c847708.png\">\r\n\r\nActive requests metric shows that \"TCPConnectWrap\" drops significantly. What I read is \"TCPConnectWrap\" is the number of tcp connections wrapped between javascript and C layer\r\n<img width=\"801\" alt=\"Screen Shot 2021-11-10 at 16 49 32\" src=\"https://user-images.githubusercontent.com/10568965/141090473-7ffdc693-1419-42aa-886a-1ae1b404db78.png\">\r\n\r\nPrometherus duration was very high during the busy time\r\n<img width=\"793\" alt=\"Screen Shot 2021-11-10 at 17 05 38\" src=\"https://user-images.githubusercontent.com/10568965/141093125-fba52b6a-e290-43d8-8284-8eb10d48baca.png\">\r\n\r\n\r\n\"Requested peers to connect\" is high during the time\r\n<img width=\"790\" alt=\"Screen Shot 2021-11-10 at 16 55 18\" src=\"https://user-images.githubusercontent.com/10568965/141091530-17dfbca3-a339-448e-8130-c993dc88d4de.png\">\r\n\r\nFINDNODES requests tend to high during that time too\r\n<img width=\"797\" alt=\"Screen Shot 2021-11-10 at 16 56 55\" src=\"https://user-images.githubusercontent.com/10568965/141091723-289f56f2-1833-43f2-8003-9e6d282581ec.png\">\r\n\r\n\r\nThere are a lot of Ping requests & Goodbye requests and Dial Errors\r\n<img width=\"804\" alt=\"Screen Shot 2021-11-10 at 16 58 18\" src=\"https://user-images.githubusercontent.com/10568965/141091984-07d4acf0-d4bc-4035-856c-30954d71373b.png\">\r\n\r\nPeer Stats panel shows the busy time too\r\n<img width=\"1573\" alt=\"Screen Shot 2021-11-10 at 17 00 23\" src=\"https://user-images.githubusercontent.com/10568965/141092301-e8c22198-8842-400b-925e-9e011dfaeeec.png\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/964978573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/965025825",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-965025825",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 965025825,
    "node_id": "IC_kwDOCD5_Gc45hSAh",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T11:09:11Z",
    "updated_at": "2021-11-10T11:09:11Z",
    "author_association": "MEMBER",
    "body": "Thanks for looking into it. Maybe worth to go more in depth on that NodeJS code to understand when that can be a problem, it's really bad!\r\n\r\nMeanwhile I'll prioritize #3402",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/965025825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/974625073",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-974625073",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 974625073,
    "node_id": "IC_kwDOCD5_Gc46F5kx",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-20T09:54:17Z",
    "updated_at": "2021-11-20T09:54:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "[1120_subscribeAllSubnets_prater.cpuprofile.zip](https://github.com/ChainSafe/lodestar/files/7574296/1120_subscribeAllSubnets_prater.cpuprofile.zip)\r\n\r\npart of the issue is `AttestationError` was thrown a lot, it takes 4% of the cpu time, see #3448",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/974625073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/989706157",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-989706157",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 989706157,
    "node_id": "IC_kwDOCD5_Gc46_bet",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-09T10:10:38Z",
    "updated_at": "2021-12-09T10:41:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "was able to catch a profile where we run ~~8~~ 6 epoch transitions within more than 2 minutes, we should work on this issue #3276 first\r\n\r\n[1209_subscribeAllSubnets_Too_Many_Epoch_Transition.cpuprofile.zip](https://github.com/ChainSafe/lodestar/files/7684130/1209_subscribeAllSubnets_Too_Many_Epoch_Transition.cpuprofile.zip)\r\n\r\n<img width=\"786\" alt=\"Screen Shot 2021-12-09 at 17 41 11\" src=\"https://user-images.githubusercontent.com/10568965/145381641-fb7160bd-3b12-4d45-ad4d-42b712cd5a18.png\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/989706157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1097885903",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3416#issuecomment-1097885903",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3416",
    "id": 1097885903,
    "node_id": "IC_kwDOCD5_Gc5BcGjP",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-13T10:30:43Z",
    "updated_at": "2022-04-13T10:30:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "not an issue anymore with new gossipsub + ssz + a lot of improvements",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1097885903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

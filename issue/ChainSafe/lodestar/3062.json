{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3062",
  "id": 986671661,
  "node_id": "MDU6SXNzdWU5ODY2NzE2NjE=",
  "number": 3062,
  "title": "Chain logs \"expected\" errors",
  "user": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 4062928826,
      "node_id": "LA_kwDOCD5_Gc7yK1-6",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-logging",
      "name": "scope-logging",
      "color": "980043",
      "default": false,
      "description": "Issue about logs: hygiene, format issues, improvements."
    },
    {
      "id": 4116885308,
      "node_id": "LA_kwDOCD5_Gc71Yq88",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-ux",
      "name": "scope-ux",
      "color": "980043",
      "default": false,
      "description": "Issues for CLI UX or general consumer UX."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "nazarhussain",
    "id": 112468,
    "node_id": "MDQ6VXNlcjExMjQ2OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/112468?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nazarhussain",
    "html_url": "https://github.com/nazarhussain",
    "followers_url": "https://api.github.com/users/nazarhussain/followers",
    "following_url": "https://api.github.com/users/nazarhussain/following{/other_user}",
    "gists_url": "https://api.github.com/users/nazarhussain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nazarhussain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nazarhussain/subscriptions",
    "organizations_url": "https://api.github.com/users/nazarhussain/orgs",
    "repos_url": "https://api.github.com/users/nazarhussain/repos",
    "events_url": "https://api.github.com/users/nazarhussain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nazarhussain/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "nazarhussain",
      "id": 112468,
      "node_id": "MDQ6VXNlcjExMjQ2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/112468?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nazarhussain",
      "html_url": "https://github.com/nazarhussain",
      "followers_url": "https://api.github.com/users/nazarhussain/followers",
      "following_url": "https://api.github.com/users/nazarhussain/following{/other_user}",
      "gists_url": "https://api.github.com/users/nazarhussain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nazarhussain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nazarhussain/subscriptions",
      "organizations_url": "https://api.github.com/users/nazarhussain/orgs",
      "repos_url": "https://api.github.com/users/nazarhussain/repos",
      "events_url": "https://api.github.com/users/nazarhussain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nazarhussain/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-09-02T12:43:09Z",
  "updated_at": "2023-09-06T07:59:47Z",
  "closed_at": "2023-09-06T07:59:47Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n\r\nIn Prater fork many blocks were missed, causing many errors for the chain processor. However this errors are expected in such network conditions and should not be logged as full errors, maybe warning or just info.\r\n\r\n```\r\nbeacon_node_1  | Sep-02 12:40:40.494 [CHAIN]           error: Block error slot=1173203 code=BLOCK_ERROR_PARENT_UNKNOWN, parentRoot=0x520990c851ba76fec4bfdbe08a06ade7da6cce87d233c72a237be4cec0da7c05\r\nbeacon_node_1  | Error: BLOCK_ERROR_PARENT_UNKNOWN\r\nbeacon_node_1  |     at Object.processBlock (/usr/app/packages/lodestar/src/chain/blocks/process.ts:36:11)\r\nbeacon_node_1  |     at processBlockJob (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:66:11)\r\nbeacon_node_1  |     at JobItemQueue.BlockProcessor.jobQueue.queue_1.JobItemQueue.maxLength.maxLength [as itemProcessor] (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:34:18)\r\nbeacon_node_1  |     at Timeout.JobItemQueue.runJob [as _onTimeout] (/usr/app/packages/lodestar/src/util/queue/itemQueue.ts:85:33)\r\nbeacon_node_1  |     at listOnTimeout (internal/timers.js:554:17)\r\nbeacon_node_1  |     at processTimers (internal/timers.js:497:7)\r\nbeacon_node_1  | Sep-02 12:40:40.854 [CHAIN]           error: Block error slot=1173202 code=BLOCK_ERROR_PARENT_UNKNOWN, parentRoot=0x9c583b08f4f000776b74934ddf8ab4e11c0e17e933f0f6133844c35b97115f52\r\nbeacon_node_1  | Error: BLOCK_ERROR_PARENT_UNKNOWN\r\nbeacon_node_1  |     at Object.processBlock (/usr/app/packages/lodestar/src/chain/blocks/process.ts:36:11)\r\nbeacon_node_1  |     at processBlockJob (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:66:11)\r\nbeacon_node_1  |     at JobItemQueue.BlockProcessor.jobQueue.queue_1.JobItemQueue.maxLength.maxLength [as itemProcessor] (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:34:18)\r\nbeacon_node_1  |     at Timeout.JobItemQueue.runJob [as _onTimeout] (/usr/app/packages/lodestar/src/util/queue/itemQueue.ts:85:33)\r\nbeacon_node_1  |     at listOnTimeout (internal/timers.js:554:17)\r\nbeacon_node_1  |     at processTimers (internal/timers.js:497:7)\r\nbeacon_node_1  | Sep-02 12:40:41.295 [CHAIN]           error: Block error slot=1173200 code=BLOCK_ERROR_PARENT_UNKNOWN, parentRoot=0x33ffd09b9a984de9301c9a910b5194b5b2eed7a0ce0de7ac8dd26493f6d6f58d\r\nbeacon_node_1  | Error: BLOCK_ERROR_PARENT_UNKNOWN\r\nbeacon_node_1  |     at Object.processBlock (/usr/app/packages/lodestar/src/chain/blocks/process.ts:36:11)\r\nbeacon_node_1  |     at processBlockJob (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:66:11)\r\nbeacon_node_1  |     at JobItemQueue.BlockProcessor.jobQueue.queue_1.JobItemQueue.maxLength.maxLength [as itemProcessor] (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:34:18)\r\nbeacon_node_1  |     at Timeout.JobItemQueue.runJob [as _onTimeout] (/usr/app/packages/lodestar/src/util/queue/itemQueue.ts:85:33)\r\nbeacon_node_1  |     at listOnTimeout (internal/timers.js:554:17)\r\nbeacon_node_1  |     at processTimers (internal/timers.js:497:7)\r\nbeacon_node_1  | Sep-02 12:40:41.536 [CHAIN]           error: Block error slot=1173197 code=BLOCK_ERROR_PARENT_UNKNOWN, parentRoot=0xbb2f42559ec348347e1e83bd52caa5765768ecb5a99654c7cc6d6ea53bd2e78b\r\nbeacon_node_1  | Error: BLOCK_ERROR_PARENT_UNKNOWN\r\nbeacon_node_1  |     at Object.processBlock (/usr/app/packages/lodestar/src/chain/blocks/process.ts:36:11)\r\nbeacon_node_1  |     at processBlockJob (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:66:11)\r\nbeacon_node_1  |     at JobItemQueue.BlockProcessor.jobQueue.queue_1.JobItemQueue.maxLength.maxLength [as itemProcessor] (/usr/app/packages/lodestar/src/chain/blocks/processor.ts:34:18)\r\nbeacon_node_1  |     at Timeout.JobItemQueue.runJob [as _onTimeout] (/usr/app/packages/lodestar/src/util/queue/itemQueue.ts:85:33)\r\nbeacon_node_1  |     at listOnTimeout (internal/timers.js:554:17)\r\nbeacon_node_1  |     at processTimers (internal/timers.js:497:7)\r\n```\r\n\r\n**Expected behavior**\r\n\r\nLog as errors bad unexpected things",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1211457758",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3062#issuecomment-1211457758",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062",
    "id": 1211457758,
    "node_id": "IC_kwDOCD5_Gc5INWDe",
    "user": {
      "login": "come-maiz",
      "id": 617831,
      "node_id": "MDQ6VXNlcjYxNzgzMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/617831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/come-maiz",
      "html_url": "https://github.com/come-maiz",
      "followers_url": "https://api.github.com/users/come-maiz/followers",
      "following_url": "https://api.github.com/users/come-maiz/following{/other_user}",
      "gists_url": "https://api.github.com/users/come-maiz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/come-maiz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/come-maiz/subscriptions",
      "organizations_url": "https://api.github.com/users/come-maiz/orgs",
      "repos_url": "https://api.github.com/users/come-maiz/repos",
      "events_url": "https://api.github.com/users/come-maiz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/come-maiz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-11T01:16:39Z",
    "updated_at": "2022-08-11T01:16:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm testing in kiln with nethermind, and I got:\r\n\r\n```\r\nAug-11 01:02:08.901[CHAIN]           error: Block error slot=5760, errCode=BLOCK_ERROR_PARENT_UNKNOWN BLOCK_ERROR_PARENT_UNKNOWN\r\nError: BLOCK_ERROR_PARENT_UNKNOWN\r\n    at verifyBlocksSanityChecks (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/chain/blocks/verifyBlocksSanityChecks.ts:68:15)\r\n    at BeaconChain.processBlocks (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/chain/blocks/index.ts:61:56)\r\n    at JobItemQueue.BlockProcessor.jobQueue.JobItemQueue.maxLength [as itemProcessor] (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/chain/blocks/index.ts:27\r\n:30)\r\n    at Timeout.JobItemQueue.runJob [as _onTimeout] (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/util/queue/itemQueue.ts:92:33)\r\n    at listOnTimeout (node:internal/timers:559:17)\r\n    at processTimers (node:internal/timers:502:7)\r\n```\r\n\r\nSame for slots 5824, 5857, 5952, 6080, 6305.\r\n\r\nIs this the same problem reported here?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1211457758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1212270308",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3062#issuecomment-1212270308",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062",
    "id": 1212270308,
    "node_id": "IC_kwDOCD5_Gc5IQcbk",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-11T17:20:45Z",
    "updated_at": "2022-08-11T17:20:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I'm testing in kiln with nethermind, and I got:\r\n> \r\n> ```\r\n> Aug-11 01:02:08.901[CHAIN]           error: Block error slot=5760, errCode=BLOCK_ERROR_PARENT_UNKNOWN BLOCK_ERROR_PARENT_UNKNOWN\r\n> Error: BLOCK_ERROR_PARENT_UNKNOWN\r\n>     at verifyBlocksSanityChecks (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/chain/blocks/verifyBlocksSanityChecks.ts:68:15)\r\n>     at BeaconChain.processBlocks (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/chain/blocks/index.ts:61:56)\r\n>     at JobItemQueue.BlockProcessor.jobQueue.JobItemQueue.maxLength [as itemProcessor] (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/chain/blocks/index.ts:27\r\n> :30)\r\n>     at Timeout.JobItemQueue.runJob [as _onTimeout] (file:///mnt/data/workspace/lodestar/packages/beacon-node/src/util/queue/itemQueue.ts:92:33)\r\n>     at listOnTimeout (node:internal/timers:559:17)\r\n>     at processTimers (node:internal/timers:502:7)\r\n> ```\r\n> \r\n> Same for slots 5824, 5857, 5952, 6080, 6305.\r\n> \r\n> Is this the same problem reported here?\r\n\r\nits possible for lodestar to receive block segments from peers such that there are few missing blocks in front and can't connect to the chain. this is when such an error throw happens and is self recoverable. It becomes serious if its not recoverable and sync doesn't proceed, so the main issue here now is to modify the lodestar error UX. ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1212270308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1706356450",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3062#issuecomment-1706356450",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3062",
    "id": 1706356450,
    "node_id": "IC_kwDOCD5_Gc5ltO7i",
    "user": {
      "login": "nazarhussain",
      "id": 112468,
      "node_id": "MDQ6VXNlcjExMjQ2OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/112468?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nazarhussain",
      "html_url": "https://github.com/nazarhussain",
      "followers_url": "https://api.github.com/users/nazarhussain/followers",
      "following_url": "https://api.github.com/users/nazarhussain/following{/other_user}",
      "gists_url": "https://api.github.com/users/nazarhussain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nazarhussain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nazarhussain/subscriptions",
      "organizations_url": "https://api.github.com/users/nazarhussain/orgs",
      "repos_url": "https://api.github.com/users/nazarhussain/repos",
      "events_url": "https://api.github.com/users/nazarhussain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nazarhussain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T10:28:00Z",
    "updated_at": "2023-09-05T10:28:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dapplion Currently we are logging such block processing errors at `DEBUG` level. I think that's fine to do so and we can close this issue. What do you suggest? \r\n\r\nhttps://github.com/ChainSafe/lodestar/blob/6ac8c07023bc72c7ef54a6ea66884790793eda21/packages/beacon-node/src/chain/blocks/index.ts#L126\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1706356450/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

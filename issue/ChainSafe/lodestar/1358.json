{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1358",
  "id": 674494688,
  "node_id": "MDU6SXNzdWU2NzQ0OTQ2ODg=",
  "number": 1358,
  "title": "Cannot convert null to bigint",
  "user": {
    "login": "GregTheGreek",
    "id": 16929357,
    "node_id": "MDQ6VXNlcjE2OTI5MzU3",
    "avatar_url": "https://avatars.githubusercontent.com/u/16929357?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GregTheGreek",
    "html_url": "https://github.com/GregTheGreek",
    "followers_url": "https://api.github.com/users/GregTheGreek/followers",
    "following_url": "https://api.github.com/users/GregTheGreek/following{/other_user}",
    "gists_url": "https://api.github.com/users/GregTheGreek/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GregTheGreek/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GregTheGreek/subscriptions",
    "organizations_url": "https://api.github.com/users/GregTheGreek/orgs",
    "repos_url": "https://api.github.com/users/GregTheGreek/repos",
    "events_url": "https://api.github.com/users/GregTheGreek/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GregTheGreek/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mpetrunic",
    "id": 8836210,
    "node_id": "MDQ6VXNlcjg4MzYyMTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mpetrunic",
    "html_url": "https://github.com/mpetrunic",
    "followers_url": "https://api.github.com/users/mpetrunic/followers",
    "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
    "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
    "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
    "repos_url": "https://api.github.com/users/mpetrunic/repos",
    "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-08-06T17:50:05Z",
  "updated_at": "2020-08-30T21:55:12Z",
  "closed_at": "2020-08-30T21:55:12Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\nYou'll notice a line break, the top half is the beacon node, and the bottom half is the validator.\r\n\r\n```\r\n2020-08-06 17:38:42  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x6f9306ab79b6cd008bd1a80bf7893db762b3f9fa1fecbf19b4e6b5a583d4819e, slot=9002, epoch=281\r\n2020-08-06 17:38:42  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x98469686182406ff2c73628c98f15fe305d113822dc984f76d42dd3cf61ea554, slot=9003, epoch=281\r\n2020-08-06 17:38:42  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x9fcd7909be9f854c0661df77ce325a40a03d737eb5fb8a56349a20d2464cd8e8, slot=9005, epoch=281\r\n2020-08-06 17:38:42  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x0b8f3c93446a9216b50af658ac56ec36713c6101461a5b07e1ed43982072cc93, slot=9006, epoch=281\r\n2020-08-06 17:38:43  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x3fd198bfe846f5df6d1c8664e5c409b7e2ce1635b87b981e6f85e51462c5fae2, slot=9008, epoch=281\r\n2020-08-06 17:38:43  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x5b36f378aecf2b304640ba4a8e3995518e531651ca187cc0ad29bc5c3997d969, slot=9009, epoch=281\r\n2020-08-06 17:38:43  [CHAIN]            info: Processed new chain head newChainHeadRoot=0xb2c56adcb7a7147773762e48711f5490b7464c01ee4d04324d7a65091e6a1249, slot=9010, epoch=281\r\n2020-08-06 17:38:43  [CHAIN]            info: Processed new chain head newChainHeadRoot=0xee0a5c287da88838a36125af062fdfa9cc0e4123ff1b06abc26dbfd4600d5fd3, slot=9011, epoch=281\r\n2020-08-06 17:38:43  [CHAIN]            info: Processed new chain head newChainHeadRoot=0xf82b135b41b760fd218defe99ca43fb4dc49a15e8bd12e6c945e4ad7e8642c8a, slot=9012, epoch=281\r\n2020-08-06 17:38:44  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x5fea52a2f1d30ad067ba68d51079ee404cdfd61ab968b87325df7f507d5ffe01, slot=9013, epoch=281\r\n2020-08-06 17:38:44  [CHAIN]            info: Processed new chain head newChainHeadRoot=0xe8f3543e539704f54260e409e7c446eb7ce696595e5f8b9292a8a2eff48bc84c, slot=9014, epoch=281\r\n2020-08-06 17:38:44  [API]             error: Request 3 failed with unexpected error:  Cannot get duties for epoch more than two ahead: 493 <= 283 Error: Cannot get duties for epoch more than two ahead: 493 <= 283\r\n    at Object.lte (/root/lodestar/packages/lodestar-utils/lib/assert.js:40:13)\r\n    at ValidatorApi.getProposerDuties (/root/lodestar/packages/lodestar/lib/api/impl/validator/validator.js:99:27)\r\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n    at async Object.<anonymous> (/root/lodestar/packages/lodestar/lib/api/rest/routes/validator/duties/proposer.js:27:27)\r\n2020-08-06 17:42:28  [NETWORK]          warn: failed to send request d56f23ec68847a2c to peer 16Uiu2HAmAyvvREyrXPS9sSmNarrFodhPju6iyEDFRDhgZeK7UAQN reason=Failed to dial peer (ERR_UNSUPPORTED_PROTOCOL)\r\n2020-08-06 17:42:28  [NETWORK]          warn: failed to send request 07f3f4c2b52edf6e to peer 16Uiu2HAm2YYCyEb5Y8s2sBNMYBn7Ys8B6dWreSRiN6uJ9SYrRkcG reason=Failed to dial peer (ERR_UNSUPPORTED_PROTOCOL)\r\n2020-08-06 17:42:28  [NETWORK]          warn: failed to send request 9ed11d4c7bcc06a1 to peer 16Uiu2HAkyaZ3HU3raRP3j5G8CQR7wFvxGp7FHZEx7Ya3iv98H3aT reason=Failed to dial peer (ERR_UNSUPPORTED_PROTOCOL)\r\n2020-08-06 17:42:28  [NETWORK]          warn: failed to send request 02efa879dfb256b3 to peer 16Uiu2HAmLPDjXtPnXzaPUv9LPTvaypV7f3PGduRCmReGCtwVPTXN reason=Failed to dial peer (ERR_UNSUPPORTED_PROTOCOL)\r\n2020-08-06 17:42:28  [API]             error: Request 5 failed with unexpected error:  Cannot get duties for epoch more than two ahead: 494 <= 283 Error: Cannot get duties for epoch more than two ahead: 494 <= 283\r\n    at Object.lte (/root/lodestar/packages/lodestar-utils/lib/assert.js:40:13)\r\n    at ValidatorApi.getProposerDuties (/root/lodestar/packages/lodestar/lib/api/impl/validator/validator.js:99:27)\r\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n    at async Object.<anonymous> (/root/lodestar/packages/lodestar/lib/api/rest/routes/validator/duties/proposer.js:27:27)\r\n\r\n────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\r\n2020-08-06 17:41:44  [VALIDATOR 0X9967166C] info: on new block epoch epoch=494, validator=0x9967166cce5fda95392bf8e65b4da7126c2120b0f2105cdc11e0d6bbc8a4f0343fa2c0778bc0c9ec2e741a3229894b98\r\n2020-08-06 17:42:27  [VALIDATOR 0X9967166C] error: Failed to obtain attester duty for epoch 493 Error: Cannot convert null to a BigInt\r\nSyntaxError: Cannot convert null to a BigInt\r\n    at BigInt (<anonymous>)\r\n    at NumberUintType.fromJson (/root/lodestar/node_modules/@chainsafe/ssz/lib/types/basic/uint.js:113:18)\r\n    at /root/lodestar/node_modules/@chainsafe/ssz/lib/backings/structural/container.js:216:36\r\n    at Array.forEach (<anonymous>)\r\n    at ContainerStructuralHandler.fromJson (/root/lodestar/node_modules/@chainsafe/ssz/lib/backings/structural/container.js:208:39)\r\n    at ContainerType.fromJson (/root/lodestar/node_modules/@chainsafe/ssz/lib/types/composite/abstract.js:183:28)\r\n    at /root/lodestar/packages/lodestar-validator/lib/api/impl/rest/validator/validator.js:42:69\r\n    at Array.map (<anonymous>)\r\n    at RestValidatorApi.getAttesterDuties (/root/lodestar/packages/lodestar-validator/lib/api/impl/rest/validator/validator.js:42:25)\r\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n2020-08-06 17:42:28  [VALIDATOR 0X9967166C] error: Failed to obtain proposer duties Error: Cannot get duties for epoch more than two ahead: 494 <= 283\r\n\r\n2020-08-06 17:46:14  [VALIDATOR 0X9967166C] error: Failed to obtain attester duty for epoch 495 Error: Cannot convert null to a BigInt\r\nSyntaxError: Cannot convert null to a BigInt\r\n    at BigInt (<anonymous>)\r\n    at NumberUintType.fromJson (/root/lodestar/node_modules/@chainsafe/ssz/lib/types/basic/uint.js:113:18)\r\n    at /root/lodestar/node_modules/@chainsafe/ssz/lib/backings/structural/container.js:216:36\r\n    at Array.forEach (<anonymous>)\r\n    at ContainerStructuralHandler.fromJson (/root/lodestar/node_modules/@chainsafe/ssz/lib/backings/structural/container.js:208:39)\r\n    at ContainerType.fromJson (/root/lodestar/node_modules/@chainsafe/ssz/lib/types/composite/abstract.js:183:28)\r\n    at /root/lodestar/packages/lodestar-validator/lib/api/impl/rest/validator/validator.js:42:69\r\n    at Array.map (<anonymous>)\r\n    at RestValidatorApi.getAttesterDuties (/root/lodestar/packages/lodestar-validator/lib/api/impl/rest/validator/validator.js:42:25)\r\n    at processTicksAndRejections (internal/process/task_queues.js:97:5)\r\n\r\n```\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: <!--[e.g. ubuntu, OSX High Siera]--> ubuntu18\r\n - Version: <!--[e.g. 22]-->\r\n - Branch: <!--[Master]--> master\r\n - Commit hash: <!--[e8232]--> bac8e4cbf5d1572c0082d5505ffd30e2b611c848\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/670082712",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1358#issuecomment-670082712",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358",
    "id": 670082712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDA4MjcxMg==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-06T17:51:26Z",
    "updated_at": "2020-08-06T17:51:26Z",
    "author_association": "MEMBER",
    "body": "Huh, looks like when received bad attester duties request we return 200 instead of 400^^",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/670082712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/671035075",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1358#issuecomment-671035075",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358",
    "id": 671035075,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTAzNTA3NQ==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-09T10:32:47Z",
    "updated_at": "2020-08-09T10:32:47Z",
    "author_association": "MEMBER",
    "body": "This means that the lodestar API is returning `null[]` instead of `AttesterDuty[]` from the `getAttesterDuties()` endpoint `/duties/$epoch/attester`?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/671035075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/671048472",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1358#issuecomment-671048472",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1358",
    "id": 671048472,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTA0ODQ3Mg==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-09T12:52:21Z",
    "updated_at": "2020-08-09T12:52:21Z",
    "author_association": "MEMBER",
    "body": "Same as https://github.com/ChainSafe/lodestar/issues/1040 ?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/671048472/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5769",
  "id": 1808155578,
  "node_id": "I_kwDOCD5_Gc5rxkO6",
  "number": 5769,
  "title": "\"ExecutionEngine went offline\" log when shutting down process",
  "user": {
    "login": "nflaig",
    "id": 38436224,
    "node_id": "MDQ6VXNlcjM4NDM2MjI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nflaig",
    "html_url": "https://github.com/nflaig",
    "followers_url": "https://api.github.com/users/nflaig/followers",
    "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
    "organizations_url": "https://api.github.com/users/nflaig/orgs",
    "repos_url": "https://api.github.com/users/nflaig/repos",
    "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nflaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5670219610,
      "node_id": "LA_kwDOCD5_Gc8AAAABUfivWg",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-bug",
      "name": "meta-bug",
      "color": "E79553",
      "default": false,
      "description": "Issues that identify a bug and require a fix."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-17T16:40:01Z",
  "updated_at": "2023-12-01T16:04:10Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nIn some cases when shutting down beacon node process it will print out the following log\r\n\r\n```\r\nJul-17 18:28:42.463[]                 info: Syncing - 1.9 hours left - 2.67 slots/s - slot: 6091943 - head: 6073759 0xfd22…0bc1 - exec-block: valid(9347841 0xb848…) - finalized: 0x71e4…4afd:189803 - peers: 11\r\n^CJul-17 18:28:45.061[]                 info: Stopping gracefully, use Ctrl+C again to force process exit\r\nJul-17 18:28:46.792[execution]       error: ExecutionEngine went offline\r\n```\n\n### Expected behavior\n\nNo error log indicating that EL went of offline.\r\n\r\nPossible fix might be to just check if process is aborted and not print out any execution client state changes.\n\n### Steps to reproduce\n\nStart and then shutdown beacon node once it start syncing\r\n\r\n```sh\r\n./lodestar beacon \\\r\n    --dataDir /home/devops/goerli/data/beacon \\\r\n    --metrics \\\r\n    --execution.urls http://localhost:8551 \\\r\n    --jwt-secret /home/devops/goerli/data/jwtsecret \\\r\n    --logLevel info \\\r\n    --network goerli \\\r\n    --checkpointSyncUrl \"https://beaconstate-goerli.chainsafe.io/\"\r\n```\r\n\r\nThis does not happen all the time, multiple tries are required. I guess it just depends on timing.\n\n### Additional context\n\nRelated PR that introduced change\r\n- https://github.com/ChainSafe/lodestar/pull/5723\r\n\r\n**Further considerations**\r\n\r\nWe might also not wanna print out \"ExecutionEngine\" as this is quite technical term, would be better in terms of UX to just print out \"Execution client\" as users should be more familiar with this term.\n\n### Operating system\n\nLinux\n\n### Lodestar version or commit hash\n\n22d7cc88bf1b64a8cb4d726e57c5c313fafecd98",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769/timeline",
  "performed_via_github_app": null,
  "state_reason": "reopened"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1836363119",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5769#issuecomment-1836363119",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5769",
    "id": 1836363119,
    "node_id": "IC_kwDOCD5_Gc5tdK1v",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-01T16:04:09Z",
    "updated_at": "2023-12-01T16:04:09Z",
    "author_association": "MEMBER",
    "body": "- Reopening as issue is not resolved by https://github.com/ChainSafe/lodestar/pull/5797\r\n\r\n```\r\n^CDec-01 16:48:48.925[]                 info: Stopping gracefully, use Ctrl+C again to force process exit\r\nDec-01 16:48:50.981[execution]       error: Execution client went offline oldState=SYNCED, newState=OFFLINE\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1836363119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/2005",
  "id": 796301201,
  "node_id": "MDU6SXNzdWU3OTYzMDEyMDE=",
  "number": 2005,
  "title": "JS heap blows up when running beacon node",
  "user": {
    "login": "3xtr4t3rr3str14l",
    "id": 32028745,
    "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/3xtr4t3rr3str14l",
    "html_url": "https://github.com/3xtr4t3rr3str14l",
    "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
    "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
    "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
    "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
    "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
    "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
    "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 25,
  "created_at": "2021-01-28T19:47:08Z",
  "updated_at": "2021-08-12T09:34:04Z",
  "closed_at": "2021-04-22T07:25:10Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n<!--A clear and concise description of what the bug is and steps to reproduce it.-->\r\nWhen running a synced lodestar beacon node (cmd: `/lodestar beacon --network pyrmont --rootDir .pyrmont/ --eth1.providerUrl https://goerli.infura.io/v3/3ee38f4a9c4447dfbd050e5afbb4b9c6`) and the validator (cmd: `./lodestar validator --network pyrmont --rootDir .pyrmont/ --graffiti \"lodestar wuz here\"`) with an activated pyrmont validator, on pyrmont, everything runs smoothly for about 16-18 hours (beacon node is stable, validator is attesting, etc.), and then I got an OOM issue.  I'm not sure if it's connected to the fact that both the validator and the beacon node were ran together, but the fact that other people have ran the beacon node without an OOM issue for quite some time (and that no one has really been running an active testnet validator alongside the beacon nod in lodestar, to my knowledge) gives me a hunch that it's connected to the validator.\r\n\r\nEDIT: this issue happens when running just the beacon node by itself and does not require the validator to be ran to replicate the issue.\r\n\r\nThis is what my heap space looked like in grafana (the big empty space is between when the crash happened and when I noticed the crash)\r\n![image](https://user-images.githubusercontent.com/32028745/106190791-c1770900-616f-11eb-8d06-3fb91c296766.png)\r\n\r\n\r\nhere is my crash report:\r\nhttps://pastebin.com/WJCEe6R6\r\n\r\n",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/769333973",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-769333973",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 769333973,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2OTMzMzk3Mw==",
    "user": {
      "login": "3xtr4t3rr3str14l",
      "id": 32028745,
      "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3xtr4t3rr3str14l",
      "html_url": "https://github.com/3xtr4t3rr3str14l",
      "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
      "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
      "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
      "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
      "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
      "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-28T19:49:24Z",
    "updated_at": "2021-01-28T19:49:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "External memory was slightly increasing over time as well:\r\n\r\n![image](https://user-images.githubusercontent.com/32028745/106190697-a0161d00-616f-11eb-9787-6720c0ddb724.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/769333973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/769335968",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-769335968",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 769335968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2OTMzNTk2OA==",
    "user": {
      "login": "3xtr4t3rr3str14l",
      "id": 32028745,
      "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3xtr4t3rr3str14l",
      "html_url": "https://github.com/3xtr4t3rr3str14l",
      "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
      "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
      "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
      "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
      "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
      "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-28T19:52:01Z",
    "updated_at": "2021-01-28T19:52:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "here is my crash report (tried pastebin, but they didn't like the JSON I guess):\r\n\r\n[report.20210128.061107.19505.0.001.json.txt](https://github.com/ChainSafe/lodestar/files/5889674/report.20210128.061107.19505.0.001.json.txt)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/769335968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/769816730",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-769816730",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 769816730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2OTgxNjczMA==",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-29T13:51:19Z",
    "updated_at": "2021-01-29T13:51:19Z",
    "author_association": "MEMBER",
    "body": "I have the same issue without running a validator (beacon node only)\r\n\r\n```\r\n2021-01-28 23:31:00 [SYNC]             info: Imported blocks for slots blocks=357503,357504,357506,357507,357508,357509,357510,357511,357512,357513,357514,357516,357517,357518,357519,357520,357521,357522,357523,357524,357525,357526,357527,357528,357529,357530,357531,357532,357533,357535,357536,357537,357538,357539,357540,357542,357543,357544,357545,357546,357547,357548,357549,357550,357551,357552,357553,357555,357556,357557,357558,357559,357560,357561,357562,357563,357565,357566\r\n2021-01-28 23:31:00 [CHAIN]            info: Block processed slot=357503, root=0x2b084f567f44a0c158fda41f6e32a3b694fc5f9eadfdb1ba6fefb1a34a7435b4\r\n\r\n<--- Last few GCs --->\r\n\r\n[81004:0x30f7230] 24156899 ms: Mark-sweep 2023.8 (2079.1) -> 2021.7 (2052.6) MB, 1199.8 / 0.9 ms  (+ 0.0 ms in 29 steps since start of marking, biggest step 0.0 ms, walltime since start of marking 1210 ms) (average mu = 0.109, current mu = 0.009) finalize[81004:0x30f7230] 24158437 ms: Mark-sweep 2023.1 (2052.6) -> 2022.0 (2058.1) MB, 1529.9 / 0.8 ms  (average mu = 0.052, current mu = 0.005) allocation failure scavenge might not succeed\r\n\r\n\r\n<--- JS stacktrace --->\r\n\r\n==== JS stack trace =========================================\r\n\r\n    0: ExitFrame [pc: 0x140a8f9]\r\nSecurity context: 0x2cc1aa9008d1 <JSObject>\r\n    1: /* anonymous */(aka /* anonymous */) [0x31043e746e89] [/home/user/lodestar/packages/lodestar-beacon-state-transition/lib/fast/util/epochProcess.js:~60] [pc=0x2d03f8603781](this=0x1510846804b1 <undefined>,0x2d9c88a08c89 <Object map = 0x14d1e318e809>,7303)\r\n    2: iterNode(aka iterNode) [0x31043e746f11] [/home/user/lodestar/packages/persistent-ts/lib/Vector.j...\r\n\r\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\r\n 1: 0xa18150 node::Abort() [node]\r\n 2: 0xa1855c node::OnFatalError(char const*, char const*) [node]\r\n 3: 0xb9715e v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]\r\n 4: 0xb974d9 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]\r\n 5: 0xd54755  [node]\r\n 6: 0xd54de6 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [node]\r\n 7: 0xd616a5 v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]\r\n 8: 0xd62555 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]\r\n 9: 0xd6500c v8::internal::Heap::AllocateRawWithRetryOrFail(int, v8::internal::AllocationType, v8::internal::AllocationOrigin, v8::internal::AllocationAlignment) [node]\r\n10: 0xd2ba2b v8::internal::Factory::NewFillerObject(int, bool, v8::internal::AllocationType, v8::internal::AllocationOrigin) [node]\r\n11: 0x106e15c v8::internal::Runtime_AllocateInOldGeneration(int, unsigned long*, v8::internal::Isolate*) [node]\r\n12: 0x140a8f9  [node]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/769816730/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/770611519",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-770611519",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 770611519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MDYxMTUxOQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T06:40:12Z",
    "updated_at": "2021-02-01T06:40:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "I found some promises retained in the memory along with its data (CachedValidatorsBeaconState + EpochContext) and it keeps accumulated.\r\n<img width=\"1205\" alt=\"Screen Shot 2021-02-01 at 10 19 43\" src=\"https://user-images.githubusercontent.com/10568965/106422899-fcd84700-6491-11eb-894d-139f28950e9e.png\">\r\n\r\nI tried to add `myId` to all suspected promises during epoch transition to find out which promises were retained and it's https://github.com/ChainSafe/lodestar/blob/master/packages/lodestar/src/chain/blocks/process.ts#L148\r\n\r\nthe strange thing is it only happens to some blocks randomly and they stayed in the memory even we processed them 10mins - 20mins ago, i.e. archived blocks passed those slots. @ChainSafe/eth2-0 do any of us have any ideas?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/770611519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/770661197",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-770661197",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 770661197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MDY2MTE5Nw==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T08:12:48Z",
    "updated_at": "2021-02-01T08:12:48Z",
    "author_association": "MEMBER",
    "body": "I've never seen anything like this, to narrow down the possibilities I would suggest\r\n- Making runStateTransition function sync and confirming if the leak persists\r\n- Using a vanilla version of sleep(0) and confirming if the leak persists\r\n- Reaching out to Chromium or NodeJS with this heap and see if they have some advice on what to do next",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/770661197/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771109863",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-771109863",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 771109863,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTEwOTg2Mw==",
    "user": {
      "login": "3xtr4t3rr3str14l",
      "id": 32028745,
      "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3xtr4t3rr3str14l",
      "html_url": "https://github.com/3xtr4t3rr3str14l",
      "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
      "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
      "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
      "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
      "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
      "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T19:43:47Z",
    "updated_at": "2021-02-01T19:43:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "I wonder when the last time we ran the beacon node without getting an OOM was?  I hadn't ran the beacon node into regular sync in quite some time before I ran it and found this issue.  So, maybe one thing that could help is if we retrace our steps and look at the history of what was modified in the code section that Tuyen linked above (and/or the runStateTransition function itself) between the time were last able to run beacon node without OOM and now.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771109863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771237004",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-771237004",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 771237004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTIzNzAwNA==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T23:37:23Z",
    "updated_at": "2021-02-01T23:37:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I wonder when the last time we ran the beacon node without getting an OOM was? I hadn't ran the beacon node into regular sync in quite some time before I ran it and found this issue. So, maybe one thing that could help is if we retrace our steps and look at the history of what was modified in the code section that Tuyen linked above (and/or the runStateTransition function itself) between the time were last able to run beacon node without OOM and now.\r\n\r\nI've tried version 0.13.0 in 1h and still saw the memory increased significantly, we should sync our node more frequently from now on since we have contavo servers now. Initially we couldn't test Pyrmont sync in our old server due to 2GB RAM limitation, the other thing is blockchain in Pyrmont is not as long as the current.\r\n\r\nIn my local environment, I used to increase heap size option for Pyrmont in order to sync and restarted 1-2 times.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771237004/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771238841",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-771238841",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 771238841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTIzODg0MQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T23:42:20Z",
    "updated_at": "2021-02-01T23:42:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I've never seen anything like this, to narrow down the possibilities I would suggest\r\n> \r\n> * Making runStateTransition function sync and confirming if the leak persists\r\n> * Using a vanilla version of sleep(0) and confirming if the leak persists\r\n> * Reaching out to Chromium or NodeJS with this heap and see if they have some advice on what to do next\r\n\r\nthanks for the suggestion. I tested the vanilla `sleep(0)` and still saw the issue. I'm testing a sync `runStateTransition` now and let's see how it works on server 01.\r\n\r\nTo make a sync `runStateTransition()`, I have to move `sleep(0)` to the outer for loop so it's kind of similar to my previous try. A debug in my local environment, after 2h test, is good - there is no `CachedValidatorsBeaconState` instances leaked and of course no Promise instances keeping them. I still see the memory slowly increased, not sure if it's because of my `--inspect` flag.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771238841/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771471321",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-771471321",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 771471321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTQ3MTMyMQ==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-02T08:46:42Z",
    "updated_at": "2021-02-02T08:46:42Z",
    "author_association": "MEMBER",
    "body": ">  I still see the memory slowly increased, not sure if it's because of my --inspect flag.\r\n\r\nIs the rate of memory increase much lower than on the current master?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771471321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771489581",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-771489581",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 771489581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTQ4OTU4MQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-02T09:16:06Z",
    "updated_at": "2021-02-02T09:16:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > I still see the memory slowly increased, not sure if it's because of my --inspect flag.\r\n> \r\n> Is the rate of memory increase much lower than on the current master?\r\n\r\nyeah just to give you an idea after I synced Pyrmont in 2h:\r\n+ master should be >3GB or even 4GB at taht time, normally I stopped after 1h\r\n+ this branch consume only 2GB at that time and it increased at a much slower speed, the increasement maybe due to my debug (--inspect) but at least I don't see CachedValidatorsBeaconState being leaked like in master\r\n\r\nunfortunately I couldn't test on contavo-01 due to #1990 and lost all peers, it stopped at epoch 12468 so I have to switch back to that issue atm.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771489581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771628053",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-771628053",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 771628053,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MTYyODA1Mw==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-02T13:17:58Z",
    "updated_at": "2021-02-02T13:17:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "the other time I run a sync `stateTransition` in 2.5h, the heap ranges from 1.1GB to 1.7GB stably",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/771628053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772109781",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-772109781",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 772109781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjEwOTc4MQ==",
    "user": {
      "login": "wemeetagain",
      "id": 1348242,
      "node_id": "MDQ6VXNlcjEzNDgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wemeetagain",
      "html_url": "https://github.com/wemeetagain",
      "followers_url": "https://api.github.com/users/wemeetagain/followers",
      "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
      "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
      "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
      "repos_url": "https://api.github.com/users/wemeetagain/repos",
      "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-03T00:24:23Z",
    "updated_at": "2021-02-03T00:24:23Z",
    "author_association": "MEMBER",
    "body": "One thing I noticed is the heap issue only seems to happen during regular sync.\r\nThe initial sync has a low and steady heap usage. \r\n\r\n\r\n![pyrmont](https://user-images.githubusercontent.com/1348242/106680208-ce3a9900-6583-11eb-830a-bbaeea5cb618.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772109781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772208651",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-772208651",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 772208651,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjIwODY1MQ==",
    "user": {
      "login": "3xtr4t3rr3str14l",
      "id": 32028745,
      "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3xtr4t3rr3str14l",
      "html_url": "https://github.com/3xtr4t3rr3str14l",
      "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
      "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
      "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
      "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
      "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
      "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-03T04:06:26Z",
    "updated_at": "2021-02-03T04:09:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@tuyennhv , currently running the beacon node on the `tuyen/experiment-sync-runStateTransition` branch.  i'm still waiting to see what happens with regard to the heap space usage, but i'm noticing that when i try to run the validator on the same branch alongside the beacon node (once the beacon node is in regular sync), then the validator consistently does not publish it's attestations (according to beaconcha.in: https://pyrmont.beaconcha.in/validator/adb60c447b8b59bfa0df75b88bd9ee4bd393258f917ab54eee6520787f3346b6b36fab203cd45baf7d308576a067cb3e#attestations), even though I see in the attestations being made in the validator logs.  This has happened consistently for multiple epochs in a row, and actually, I haven't seen any published attestations on beaconcha.in since running on this branch.\r\n\r\nFor example here's some of the logs I see:\r\n```\r\n2021-02-02 21:53:43 []                 info: on new block epoch epoch=17249, validator=0xadb60c447b8b59bfa0df75b88bd9ee4bd393258f917ab54eee6520787f3346b6b36fab203cd45baf7d308576a067cb3e\r\n2021-02-02 21:57:07 []                 info: Handling attestation duty slot=551985, committee=27, validator=0xadb60c447b8b59bfa0df75b88bd9ee4bd393258f917ab54eee6520787f3346b6b36fab203cd45baf7d308576a067cb3e\r\n2021-02-02 21:57:11 []                 info: Signed new attestation block=0x18c153f031843f3e364de5a000927c93fe44ccc72b692ebe0ec5dfc4fd5a28d5, committeeIndex=27, slot=551985\r\n2021-02-02 21:57:11 []                 info: Published new attestation slot=551985, committee=27, attestation=0x26d09431e78cf7e0fedd9fa0adec32d430987f333bb94e7c323a28e651a8e90b, block=0x18c153f031843f3e364de5a000927c93fe44ccc72b692ebe0ec5dfc4fd5a28d5, validator=0xadb60c447b8b59bfa0df75b88bd9ee4bd393258f917ab54eee6520787f3346b6b36fab203cd45baf7d308576a067cb3e\r\n2021-02-02 21:57:15 []                 info: Aggregating attestations committeeIndex=27, slot=551985\r\n2021-02-02 21:57:16 []                 info: Published signed aggregate and proof committeeIndex=27, slot=551985\r\n```\r\n\r\nand yet, if you look at the beaconcha.in link I provided above, the validator apparently missed that epoch (17249).\r\n\r\nI tried to replicate this behavior on master and was not able to.  The validator is able to consistently attest and have said attestations show up in beaconcha.in on master.  So, something in that branch is making the validator (or perhaps the validator's interactions with the beacon node) act funny, it seems.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772208651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772223059",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-772223059",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 772223059,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjIyMzA1OQ==",
    "user": {
      "login": "3xtr4t3rr3str14l",
      "id": 32028745,
      "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3xtr4t3rr3str14l",
      "html_url": "https://github.com/3xtr4t3rr3str14l",
      "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
      "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
      "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
      "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
      "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
      "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-03T04:43:43Z",
    "updated_at": "2021-02-03T04:47:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "to follow up on the above comment, sometimes the failed attestation publish will show up in validator logs, but not always.  like this:\r\n```\r\n2021-02-02 22:07:47 []                error: Failed to publish attestation message=ATTESTATION_ERROR_ATTESTATION_ALREADY_KNOWN\r\n2021-02-02 22:07:51 []                 info: Aggregating attestations committeeIndex=4, slot=552038\r\n2021-02-02 22:07:51 []                error: Failed to produce aggregate and proof message=No matching attestations found for attestationData\r\n```\r\n\r\nbut still, even if the error doesn't show up in validator logs, it never shows up in beaconcha.in (for example, in the last hour, every epoch (epochs 17245 - 17256) are shown as missed in beaconcha.in",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772223059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772283467",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-772283467",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 772283467,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjI4MzQ2Nw==",
    "user": {
      "login": "3xtr4t3rr3str14l",
      "id": 32028745,
      "node_id": "MDQ6VXNlcjMyMDI4NzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/32028745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/3xtr4t3rr3str14l",
      "html_url": "https://github.com/3xtr4t3rr3str14l",
      "followers_url": "https://api.github.com/users/3xtr4t3rr3str14l/followers",
      "following_url": "https://api.github.com/users/3xtr4t3rr3str14l/following{/other_user}",
      "gists_url": "https://api.github.com/users/3xtr4t3rr3str14l/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/3xtr4t3rr3str14l/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/3xtr4t3rr3str14l/subscriptions",
      "organizations_url": "https://api.github.com/users/3xtr4t3rr3str14l/orgs",
      "repos_url": "https://api.github.com/users/3xtr4t3rr3str14l/repos",
      "events_url": "https://api.github.com/users/3xtr4t3rr3str14l/events{/privacy}",
      "received_events_url": "https://api.github.com/users/3xtr4t3rr3str14l/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-03T06:59:58Z",
    "updated_at": "2021-02-03T07:00:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "so, the heap blew earlier for me this time (on `tuyen/experiment-sync-runStateTransition`) than on `master`.  looks like it may have plugged one memory issue but then introduced another (notice the pink line going up)\r\n\r\n![Screenshot from 2021-02-03 00-58-41](https://user-images.githubusercontent.com/32028745/106710173-20e37780-65bb-11eb-9d7d-9e5464458f9f.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/772283467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779198735",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-779198735",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 779198735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTE5ODczNQ==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-15T12:41:38Z",
    "updated_at": "2021-02-15T12:41:38Z",
    "author_association": "MEMBER",
    "body": "I got an out of memory crash today running on Mainnet on Digital ocean nodes\r\n\r\n![Screenshot from 2021-02-14 08-42-34](https://user-images.githubusercontent.com/35266934/107947871-544adc80-6f93-11eb-8255-a884aa5e8138.png)\r\n\r\n```\r\n==== JS stack trace =========================================\r\n\r\nSecurity context: 0x179d4cdc08a1 <JSObject>\r\n    0: builtin exit frame: BigInt(aka BigInt)(this=0x1b5ec21004a9 <undefined>,40,0x1b5ec21004a9 <undefined>)\r\n\r\n    1: readOnlyMap [0x3dd077e32789] [/usr/app/node_modules/@chainsafe/ssz/lib/backings/tree/array.js:~211] [pc=0x1c31e130bcdf](this=0x16c3a3cd2b01 <TreeHandler map = 0xc0f0df1f81>,0x174a8ddbf0c1 <Tree map = 0xd54264f1491>,0x174a8ddbf089 <JSFunction (sfi = 0x2ecf077fbfd1)>)\r\n    2: process...\r\n\r\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memo\r\n```\r\n\r\n--- \r\n\r\n**UPDATE**: After some hours from the Out Of Memory crash, memory is climbing again. The worrying part is that the added memory directly affects performance, reducing the sync speed by half. Why do you think the machine slows so much when memory is high? It can be due to frequent swaps or garbage collection runs?\r\n\r\n![Screenshot from 2021-02-14 11-31-41](https://user-images.githubusercontent.com/35266934/107947883-57de6380-6f93-11eb-8fb8-0bf5e4fa4e74.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779198735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779312804",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-779312804",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 779312804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTMxMjgwNA==",
    "user": {
      "login": "wemeetagain",
      "id": 1348242,
      "node_id": "MDQ6VXNlcjEzNDgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wemeetagain",
      "html_url": "https://github.com/wemeetagain",
      "followers_url": "https://api.github.com/users/wemeetagain/followers",
      "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
      "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
      "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
      "repos_url": "https://api.github.com/users/wemeetagain/repos",
      "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-15T15:58:05Z",
    "updated_at": "2021-02-15T15:58:05Z",
    "author_association": "MEMBER",
    "body": "One somewhat easy fix would be to reduce the state caches sizes while we're initial-syncing. Right now we're storing a BUNCH of states that we really don't need to keep around, which accounts for most of that memory.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779312804/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779854581",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-779854581",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 779854581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTg1NDU4MQ==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T14:00:02Z",
    "updated_at": "2021-02-16T14:00:13Z",
    "author_association": "MEMBER",
    "body": "> One somewhat easy fix would be to reduce the state caches sizes while we're initial-syncing. Right now we're storing a BUNCH of states that we really don't need to keep around, which accounts for most of that memory.\r\n\r\n@wemeetagain  Can you spec a proposal in a new issue to implement this? Sounds very important and urgent.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779854581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/780418205",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-780418205",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 780418205,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDQxODIwNQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-17T09:18:25Z",
    "updated_at": "2021-02-17T09:18:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "here's a proposal I have #2051 ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/780418205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/782144151",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-782144151",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 782144151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjE0NDE1MQ==",
    "user": {
      "login": "wemeetagain",
      "id": 1348242,
      "node_id": "MDQ6VXNlcjEzNDgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wemeetagain",
      "html_url": "https://github.com/wemeetagain",
      "followers_url": "https://api.github.com/users/wemeetagain/followers",
      "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
      "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
      "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
      "repos_url": "https://api.github.com/users/wemeetagain/repos",
      "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-19T15:22:12Z",
    "updated_at": "2021-02-19T15:22:12Z",
    "author_association": "MEMBER",
    "body": "To debug the stairstepping memory, lets take a heap snapshot when the stairstep is low, then another when the stairstep is higher. And compare the snapshots.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/782144151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/788958660",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-788958660",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 788958660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4ODk1ODY2MA==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-02T14:44:08Z",
    "updated_at": "2021-03-02T14:45:55Z",
    "author_association": "MEMBER",
    "body": "I managed to capture a heapdump before the stair step and after the stair step (see the last two blue lines). They are 1 hour apart but relatively close to the step, given that it takes 3-5min to capture a heapdump.\r\n\r\n![Screenshot from 2021-03-02 15-12-12](https://user-images.githubusercontent.com/35266934/109664677-ab44da00-7b6d-11eb-903a-73e74e675538.png)\r\n\r\n**Note:** All heapsnapshots are available in our cloud node Contabo01 in `/root/`. Please feel free to `scp` the files to your local environment and investigate what's going on.\r\n```\r\n-rw-r--r--  1 root root 1367036296 Mar  2 12:52 lodestar-master-06dab5-2021-03-02T12:52:00.000Z.heapsnapshot\r\n-rw-r--r--  1 root root 1343952846 Mar  2 13:43 lodestar-master-06dab5-2021-03-02T13:43:00.000Z.heapsnapshot\r\n-rw-r--r--  1 root root 1334864890 Mar  2 14:55 lodestar-master-06dab5-2021-03-02T14:55:00.000Z.heapsnapshot\r\n```\r\n\r\nI've loaded add compared the heapsnapshots and the only big diff is `(system)`. Any clue what's this?\r\n\r\n![Screenshot from 2021-03-02 15-39-06](https://user-images.githubusercontent.com/35266934/109664659-a6802600-7b6d-11eb-853f-57b43aebc731.png)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/788958660/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/824607776",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-824607776",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 824607776,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNDYwNzc3Ng==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-22T07:25:10Z",
    "updated_at": "2021-04-22T07:25:10Z",
    "author_association": "MEMBER",
    "body": "Some nodes I've been running for +7 days show no memory leak\r\n\r\n**Node A**\r\n\r\nNote the 7 day scale in this chart\r\n\r\n![Screenshot from 2021-04-22 09-23-01](https://user-images.githubusercontent.com/35266934/115672961-5db64380-a34c-11eb-91bb-d5ec5ddadd3b.png)\r\n![Screenshot from 2021-04-22 09-20-19](https://user-images.githubusercontent.com/35266934/115672702-1cbe2f00-a34c-11eb-8ceb-2a7f9081508c.png)\r\n\r\n\r\n**Node B** Note the 30 day scale in this chart\r\n\r\n![Screenshot from 2021-04-22 09-23-25](https://user-images.githubusercontent.com/35266934/115673022-6f97e680-a34c-11eb-8b34-3dc3b469bafe.png)\r\n![Screenshot from 2021-04-22 09-22-27](https://user-images.githubusercontent.com/35266934/115673010-6dce2300-a34c-11eb-8853-87a768125e72.png)\r\n\r\n---\r\n\r\nSome or many of the improvements that we introduced in the last few months fixed all major leaks. I'll close the issue for now. Let's open a new one if new leaks appear when stressing the node in new situations\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/824607776/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/896806573",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-896806573",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 896806573,
    "node_id": "IC_kwDOCD5_Gc41dC6t",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T13:01:06Z",
    "updated_at": "2021-08-11T13:01:06Z",
    "author_association": "MEMBER",
    "body": "This happens again to my node after upgrading from 0.18.0 to 0.27.0\r\n\r\n```\r\nAug-11 14:44:15.595 []                 info: Lodestar version=0.27.0 master 2c010b25, network=mainnet\r\nAug-11 14:44:15.680 [DB]               info: Connected to LevelDB database name=/srv/chain/lodestar/chain-db\r\nAug-11 14:44:20.333 []                 info: Initializing beacon state from anchor state slot=1217312, epoch=38041, stateRoot=0x677f9dcaf9e0cfa49586a020259c06480082988f5409472dd6c68127d8f43f80\r\nAug-11 14:44:32.248 [METRICS]          info: Starting metrics HTTP server port=8008\r\n(node:1717966) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. Use emitter.setMaxListeners() to increase limit\r\nAug-11 14:44:32.335 [API]              info: Started REST api server address=http://127.0.0.1:9596, namespaces=[\"beacon\",\"config\",\"events\",\"node\",\"validator\"]\r\nAug-11 14:44:43.342 [NETWORK]          info: PeerId 16Uiu2HAkxpvEzCjLDCEKK4sxGH8TzjAr3j3H135brtQghsqo6Re9, Multiaddrs /ip4/127.0.0.1/tcp/9000,/ip4/135.181.182.54/tcp/9000\r\nAug-11 14:44:43.343 []                 warn: Low peer count peers=1\r\nAug-11 14:44:43.344 []                 info: Searching for peers - peers: 1 - finalized: 38039 0xbf67e44c - head: 1217312 0xf5c719cd - clockSlot: 1821821\r\nAug-11 14:44:54.492 []                 info: Syncing - 1.2 days left - 5.74 slots/s - finalized: 38041 0xf5c719cd - head: 1217376 0x7be4ee3b - clockSlot: 1821822 - peers: 2\r\nAug-11 14:45:15.248 []                 info: Syncing - 1.8 days left - 3.89 slots/s - finalized: 38043 0x7be4ee3b - head: 1217440 0xfb972967 - clockSlot: 1821824 - peers: 4\r\nAug-11 14:45:17.465 []                 info: Syncing - 1.9 days left - 3.68 slots/s - finalized: 38043 0x7be4ee3b - head: 1217441 0x8d03ce63 - clockSlot: 1821824 - peers: 4\r\nAug-11 14:45:29.142 []                 info: Syncing - 1.8 days left - 3.88 slots/s - finalized: 38044 0x13cce6de - head: 1217503 0x010a83d0 - clockSlot: 1821825 - peers: 5\r\nAug-11 14:45:45.344 []                 info: Syncing - 1.9 days left - 3.60 slots/s - finalized: 38046 0xd1ba1503 - head: 1217537 0x8cf6f5cf - clockSlot: 1821826 - peers: 5\r\nAug-11 14:45:53.848 []                 info: Syncing - 2 days left - 3.53 slots/s - finalized: 38047 0x584cb199 - head: 1217569 0x37781bc7 - clockSlot: 1821827 - peers: 5\r\nAug-11 14:46:05.112 []                 info: Syncing - 2 days left - 3.56 slots/s - finalized: 38048 0x56f1c00e - head: 1217618 0xf0157905 - clockSlot: 1821828 - peers: 8\r\nAug-11 14:46:17.310 []                 info: Syncing - 2 days left - 3.43 slots/s - finalized: 38049 0x6fd4fecb - head: 1217636 0x94a0138f - clockSlot: 1821829 - peers: 10\r\n\r\n<--- Last few GCs --->\r\n\r\n[1717966:0x362f180]   122575 ms: Scavenge 2028.8 (2040.6) -> 2027.9 (2040.6) MB, 10.2 / 3.8 ms  (average mu = 0.107, current mu = 0.016) allocation failure \r\n[1717966:0x362f180]   122656 ms: Scavenge 2028.8 (2040.6) -> 2028.0 (2040.6) MB, 10.1 / 3.7 ms  (average mu = 0.107, current mu = 0.016) allocation failure \r\n[1717966:0x362f180]   122729 ms: Scavenge 2028.9 (2040.6) -> 2028.0 (2040.6) MB, 10.0 / 3.7 ms  (average mu = 0.107, current mu = 0.016) allocation failure \r\n\r\n\r\n<--- JS stacktrace --->\r\n\r\n==== JS stack trace =========================================\r\n\r\n    0: ExitFrame [pc: 0x140a7f9]\r\nSecurity context: 0x1829873c08d1 <JSObject>\r\n    1: new constructor(aka Tree) [0x1879803bbb89] [/home/user/lodestar/node_modules/@chainsafe/persistent-merkle-tree/lib/tree.js:~13] [pc=0x3ab22a5e1dba](this=0x0dfa9e31b5a9 <Tree map = 0x2372219894e9>,0x0ad8d4252111 <Node map = 0x237221989499>,0x0dfa9e31b571 <JSFunction (sfi = 0x1ad02c97d7b9)>)\r\n    2: ConstructFrame [pc: 0x138b8c0]\r\n    3: getProperty [0x70c51b8...\r\n\r\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\r\n 1: 0xa18150 node::Abort() [node]\r\n 2: 0xa1855c node::OnFatalError(char const*, char const*) [node]\r\n 3: 0xb9705e v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]\r\n 4: 0xb973d9 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]\r\n 5: 0xd54655  [node]\r\n 6: 0xd54ce6 v8::internal::Heap::RecomputeLimits(v8::internal::GarbageCollector) [node]\r\n 7: 0xd615a5 v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]\r\n 8: 0xd62455 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]\r\n 9: 0xd63aff v8::internal::Heap::HandleGCRequest() [node]\r\n10: 0xd12565 v8::internal::StackGuard::HandleInterrupts() [node]\r\n11: 0x106dba6 v8::internal::Runtime_StackGuard(int, unsigned long*, v8::internal::Isolate*) [node]\r\n12: 0x140a7f9  [node]\r\n```\r\n\r\n\r\nShall I open a new ticket or shall we stick to this one?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/896806573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/897257672",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-897257672",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 897257672,
    "node_id": "IC_kwDOCD5_Gc41exDI",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-12T00:36:44Z",
    "updated_at": "2021-08-12T00:36:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@q9f recently we run the nodes with 6GB heap memory https://github.com/ChainSafe/lodestar/blob/0add9d11d619e8f096d5dbf54ec40a6cf7b14f8f/docker-compose.yml#L18\r\n\r\nthere's an ongoing effort to reduce memory now at https://github.com/ChainSafe/lodestar/issues/2885",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/897257672/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/897491141",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2005#issuecomment-897491141",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2005",
    "id": 897491141,
    "node_id": "IC_kwDOCD5_Gc41fqDF",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-12T09:34:04Z",
    "updated_at": "2021-08-12T09:34:04Z",
    "author_association": "MEMBER",
    "body": "Thanks, that works well! (for now)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/897491141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1337",
  "id": 672880752,
  "node_id": "MDU6SXNzdWU2NzI4ODA3NTI=",
  "number": 1337,
  "title": "Cannot read property 'message' of null",
  "user": {
    "login": "protolambda",
    "id": 19571989,
    "node_id": "MDQ6VXNlcjE5NTcxOTg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/protolambda",
    "html_url": "https://github.com/protolambda",
    "followers_url": "https://api.github.com/users/protolambda/followers",
    "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
    "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
    "organizations_url": "https://api.github.com/users/protolambda/orgs",
    "repos_url": "https://api.github.com/users/protolambda/repos",
    "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/protolambda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1420822243,
      "node_id": "MDU6TGFiZWwxNDIwODIyMjQz",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-stale",
      "name": "meta-stale",
      "color": "d0d1e6",
      "default": false,
      "description": "Label for stale issues applied by the stale bot."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-08-04T15:27:01Z",
  "updated_at": "2020-11-13T02:00:29Z",
  "closed_at": "2020-11-13T02:00:29Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n<!--A clear and concise description of what the bug is and steps to reproduce it.-->\r\n```\r\n2020-08-04 15:23:02  [CHAIN]         verbose: Starting chain \r\n2020-08-04 15:23:14  [CHAIN]            info: Chain started, waiting blocks and attestations \r\n2020-08-04 15:23:14  [CHAIN]            info: Found last known finalized state at epoch #0 root 0x0000000000000000000000000000000000000000000000000000000000000000 \r\n2020-08-04 15:23:15  [CHAIN]            info: Found 79 nonfinalized blocks in database from slot 192 to 303 \r\n2020-08-04 15:23:15  [CHAIN]            info: Found finalized block at slot 192,\r\n        root=0x5ce25fca09469f8473c31213a213b8ebbd76eebc41b47c19f984c5dabee6fe3a \r\n âœ– TypeError: Cannot read property 'message' of null\r\n    at BeaconChain.initForkChoice (/usr/app/packages/lodestar/lib/chain/chain.js:336:31)\r\n    at async BeaconChain.restoreHeadState (/usr/app/packages/lodestar/lib/chain/chain.js:308:5)\r\n    at async BeaconChain.start (/usr/app/packages/lodestar/lib/chain/chain.js:162:5)\r\n    at async BeaconNode.start (/usr/app/packages/lodestar/lib/node/nodejs.js:157:5)\r\n    at async Object.run [as handler] (/usr/app/packages/lodestar-cli/lib/cmds/beacon/run.js:87:3)\r\n\r\n```\r\n\r\nThis error popped up after restarting and crashes the client shortly after starting.\r\n\r\n**Expected behavior**\r\n<!--A clear and concise description of what you expected to happen.-->\r\n\r\nLoad forkchoice data and/or blocks correctly during start.\r\n\r\n**Steps to Reproduce**\r\n<!--Steps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n-->\r\nNot sure.\r\n\r\n**Screenshots**\r\n<!--If applicable, add screenshots to help explain your problem.-->\r\nx\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: ubuntu, running docker image\r\n - Version: `sha256:6680b25b46c5f8f1c951cb567242f50cf53055fda58ffcf98dbbae1874b969de` docker image (master branch ~10 hours ago)\r\n - Branch: master\r\n - Commit hash: Not sure which commit exactly, see docker image hash\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/669590654",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1337#issuecomment-669590654",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
    "id": 669590654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTU5MDY1NA==",
    "user": {
      "login": "wemeetagain",
      "id": 1348242,
      "node_id": "MDQ6VXNlcjEzNDgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wemeetagain",
      "html_url": "https://github.com/wemeetagain",
      "followers_url": "https://api.github.com/users/wemeetagain/followers",
      "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
      "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
      "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
      "repos_url": "https://api.github.com/users/wemeetagain/repos",
      "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-05T23:09:31Z",
    "updated_at": "2020-08-05T23:09:31Z",
    "author_association": "MEMBER",
    "body": "```\r\n2020-08-05 13:29:14  [CHAIN]            info: Finish restoring chain head from 7 blocks\r\n2020-08-05 13:29:14  [CHAIN]            info: restoreHeadState - duration=803ms\r\n2020-08-05 13:29:16  [SYNC]            error: Can't find new peers, stopping sync\r\n2020-08-05 13:29:16  [SYNC]             warn: Didn't receive any valid block in given range\r\n2020-08-05 13:29:16  [SYNC]             info: Fetching blocks for 3335...3398 slot range\r\n(node:37484) UnhandledPromiseRejectionWarning: TypeError: Cannot read property 'message' of null\r\n    at BeaconSync.start (/Users/gary/dev/lodestar/packages/lodestar/lib/sync/sync.js:107:60)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n(Use `node --trace-warnings ...` to show where the warning was created)\r\n(node:37484) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 1)\r\n(node:37484) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\r\n    at emitDeprecationWarning (internal/process/promises.js:180:11)\r\n    at processPromiseRejections (internal/process/promises.js:249:13)\r\n    at processTicksAndRejections (internal/process/task_queues.js:94:32)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/669590654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/669590760",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1337#issuecomment-669590760",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
    "id": 669590760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTU5MDc2MA==",
    "user": {
      "login": "wemeetagain",
      "id": 1348242,
      "node_id": "MDQ6VXNlcjEzNDgyNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wemeetagain",
      "html_url": "https://github.com/wemeetagain",
      "followers_url": "https://api.github.com/users/wemeetagain/followers",
      "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
      "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
      "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
      "repos_url": "https://api.github.com/users/wemeetagain/repos",
      "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-05T23:09:52Z",
    "updated_at": "2020-08-05T23:09:52Z",
    "author_association": "MEMBER",
    "body": "Iikely fetching a block from db that doesn't exist",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/669590760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/671053063",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1337#issuecomment-671053063",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
    "id": 671053063,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTA1MzA2Mw==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-09T13:36:28Z",
    "updated_at": "2020-08-09T13:36:28Z",
    "author_association": "MEMBER",
    "body": "Should we add a check for variable `x` before calling `x.message`?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/671053063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/682743893",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1337#issuecomment-682743893",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
    "id": 682743893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4Mjc0Mzg5Mw==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T15:46:53Z",
    "updated_at": "2020-08-28T15:46:53Z",
    "author_association": "MEMBER",
    "body": "Issue might be fixed, unclear. Chain will be refactored soon too,",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/682743893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/718244303",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1337#issuecomment-718244303",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
    "id": 718244303,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxODI0NDMwMw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-10-28T22:26:42Z",
    "updated_at": "2020-10-28T22:26:42Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/718244303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/726458301",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1337#issuecomment-726458301",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1337",
    "id": 726458301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjQ1ODMwMQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-11-13T02:00:28Z",
    "updated_at": "2020-11-13T02:00:28Z",
    "author_association": "NONE",
    "body": "This issue or pull request has been automatically been closed due to inactivity.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/726458301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

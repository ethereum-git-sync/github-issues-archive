{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1427",
  "id": 683228785,
  "node_id": "MDU6SXNzdWU2ODMyMjg3ODU=",
  "number": 1427,
  "title": "WebAssembly.Instance(): Out of memory: wasm memory",
  "user": {
    "login": "mgcrea",
    "id": 108273,
    "node_id": "MDQ6VXNlcjEwODI3Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/108273?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mgcrea",
    "html_url": "https://github.com/mgcrea",
    "followers_url": "https://api.github.com/users/mgcrea/followers",
    "following_url": "https://api.github.com/users/mgcrea/following{/other_user}",
    "gists_url": "https://api.github.com/users/mgcrea/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mgcrea/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mgcrea/subscriptions",
    "organizations_url": "https://api.github.com/users/mgcrea/orgs",
    "repos_url": "https://api.github.com/users/mgcrea/repos",
    "events_url": "https://api.github.com/users/mgcrea/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mgcrea/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1420822243,
      "node_id": "MDU6TGFiZWwxNDIwODIyMjQz",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-stale",
      "name": "meta-stale",
      "color": "d0d1e6",
      "default": false,
      "description": "Label for stale issues applied by the stale bot."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-08-21T03:18:42Z",
  "updated_at": "2021-01-09T23:16:17Z",
  "closed_at": "2021-01-09T23:16:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n\r\nRunning via docker-compose with 10G ulimits triggers an OOM error on startup\r\n\r\n**Expected behavior**\r\n\r\nSupport ulimits\r\n\r\n**Steps to Reproduce**\r\n\r\n```yml\r\nversion: \"3.2\"\r\nservices:\r\n  beacon:\r\n    image: chainsafe/lodestar:latest\r\n    restart: always\r\n    container_name: lodestar_beacon\r\n    hostname: lodestar_beacon\r\n    environment:\r\n      - TZ=${TZ}\r\n    ports:\r\n      - \"9000:9000\"\r\n    volumes:\r\n      - \"./volumes/beacon:/data\"\r\n    command:\r\n      - beacon\r\n      - --rootDir=/data\r\n      - --eth1.enabled\r\n      - --eth1.provider.url=http://geth_goerli.geth_default:8545\r\n      - --metrics.enabled\r\n      - --testnet=medalla\r\n    networks:\r\n      - default\r\n      - geth\r\n    ulimits:\r\n      as:\r\n        hard: 10000000000\r\n        soft: 10000000000\r\n\r\nnetworks:\r\n  geth:\r\n    external:\r\n      name: geth_default\r\n```\r\n\r\n**Screenshots**\r\n\r\n```\r\nbeacon_1     | /usr/app/node_modules/@assemblyscript/loader/index.js:303\r\nbeacon_1     |     new WebAssembly.Instance(\r\nbeacon_1     |     ^\r\nbeacon_1     | RangeError: WebAssembly.Instance(): Out of memory: wasm memory\r\nbeacon_1     |     at Object.instantiateSync (/usr/app/node_modules/@assemblyscript/loader/index.js:303:5)\r\nbeacon_1     |     at newInstance (/usr/app/node_modules/@chainsafe/as-sha256/lib/wasm.js:20:26)\r\nbeacon_1     |     at new SHA256 (/usr/app/node_modules/@chainsafe/as-sha256/lib/index.js:12:38)\r\nbeacon_1     |     at Object.<anonymous> (/usr/app/node_modules/@chainsafe/as-sha256/lib/index.js:61:14)\r\nbeacon_1     |     at Module._compile (internal/modules/cjs/loader.js:959:30)\r\nbeacon_1     |     at Object.Module._extensions..js (internal/modules/cjs/loader.js:995:10)\r\nbeacon_1     |     at Module.load (internal/modules/cjs/loader.js:815:32)\r\nbeacon_1     |     at Function.Module._load (internal/modules/cjs/loader.js:727:14)\r\nbeacon_1     |     at Module.require (internal/modules/cjs/loader.js:852:19)\r\nbeacon_1     |     at require (internal/modules/cjs/helpers.js:74:18)\r\n```\r\n\r\n**Desktop (please complete the following information):**\r\n\r\n```\r\ndocker run -it --rm chainsafe/lodestar:latest --version\r\n0.11.0\r\n```",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/712623552",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1427#issuecomment-712623552",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427",
    "id": 712623552,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjYyMzU1Mg==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-10-20T06:24:32Z",
    "updated_at": "2020-10-20T06:24:32Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/712623552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/714290282",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1427#issuecomment-714290282",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427",
    "id": 714290282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDI5MDI4Mg==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-22T07:25:01Z",
    "updated_at": "2020-10-22T07:25:01Z",
    "author_association": "MEMBER",
    "body": "Is this error still happening? Many memory issues have been fixed recently",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/714290282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/750844343",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1427#issuecomment-750844343",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427",
    "id": 750844343,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDg0NDM0Mw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2020-12-24T10:47:38Z",
    "updated_at": "2020-12-24T10:47:38Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed in 15 days if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/750844343/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/757382179",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1427#issuecomment-757382179",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1427",
    "id": 757382179,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzM4MjE3OQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2021-01-09T23:16:15Z",
    "updated_at": "2021-01-09T23:16:15Z",
    "author_association": "NONE",
    "body": "This issue or pull request has been automatically been closed due to inactivity.\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/757382179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

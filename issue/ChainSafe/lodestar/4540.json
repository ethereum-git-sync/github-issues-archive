{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4540",
  "id": 1370420064,
  "node_id": "I_kwDOCD5_Gc5RrvNg",
  "number": 4540,
  "title": "Better logging for exit-validator if key is not yet activated on beacon chain",
  "user": {
    "login": "philknows",
    "id": 58080811,
    "node_id": "MDQ6VXNlcjU4MDgwODEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/philknows",
    "html_url": "https://github.com/philknows",
    "followers_url": "https://api.github.com/users/philknows/followers",
    "following_url": "https://api.github.com/users/philknows/following{/other_user}",
    "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
    "organizations_url": "https://api.github.com/users/philknows/orgs",
    "repos_url": "https://api.github.com/users/philknows/repos",
    "events_url": "https://api.github.com/users/philknows/events{/privacy}",
    "received_events_url": "https://api.github.com/users/philknows/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 4116885308,
      "node_id": "LA_kwDOCD5_Gc71Yq88",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-ux",
      "name": "scope-ux",
      "color": "980043",
      "default": false,
      "description": "Issues for CLI UX or general consumer UX."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-09-12T19:33:46Z",
  "updated_at": "2023-07-13T15:19:44Z",
  "closed_at": "2023-07-13T15:19:44Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nAs described by Somer, when trying to `voluntary-exit` a validator that is not yet activated on the beacon chain, Lodestar responds with an error such as:\r\n\r\n```\r\nethstaker@ETH-STAKER-001:/usr/local/bin/lodestar$ ./lodestar validator voluntary-exit --network goerli --dataDir /var/lib/lodestar/validators --pubkeys 0x874aef47324f0d1af666c25607f01f2f02e1c5297be17ade9f35205d3ef8e5d511ae1054f8876a33af67e6c329e5d18e\r\n ✖ Error: beacon node did not return status for pubkey 0x874aef47324f0d1af666c25607f01f2f02e1c5297be17ade9f35205d3ef8e5d511ae1054f8876a33af67e6c329e5d18e\r\n    at file:///usr/local/bin/lodestar/packages/cli/src/cmds/validator/voluntaryExit.ts:153:13\r\n    at Array.map (<anonymous>)\r\n    at resolveValidatorIndexes (file:///usr/local/bin/lodestar/packages/cli/src/cmds/validator/voluntaryExit.ts:150:24)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at Object.handler (file:///usr/local/bin/lodestar/packages/cli/src/cmds/validator/voluntaryExit.ts:82:30)\r\n```\r\n\r\n**Describe the solution you'd like**\r\n\r\nA better log response from Lodestar to the user. Something along the lines of: `Validator is not yet active and cannot be exited` is more understandable to a user.\r\n\r\n\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1245023215",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4540#issuecomment-1245023215",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540",
    "id": 1245023215,
    "node_id": "IC_kwDOCD5_Gc5KNYvv",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T07:41:48Z",
    "updated_at": "2022-09-13T07:41:48Z",
    "author_association": "MEMBER",
    "body": "Note that if the key has a typo it will also get the same respond, even if the key is already active. What's really happening is that the key is not known in current beacon chain state. But that's not that a helpful message",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1245023215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1245041286",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4540#issuecomment-1245041286",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540",
    "id": 1245041286,
    "node_id": "IC_kwDOCD5_Gc5KNdKG",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T07:59:12Z",
    "updated_at": "2022-09-13T07:59:12Z",
    "author_association": "MEMBER",
    "body": "Maybe something at least that encompasses the fact that the `Validator pubkey is unknown: Re-check the pubkey submitted or wait until activated on the beacon chain to voluntary-exit`",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1245041286/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1588580003",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4540#issuecomment-1588580003",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4540",
    "id": 1588580003,
    "node_id": "IC_kwDOCD5_Gc5er86j",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-13T05:40:18Z",
    "updated_at": "2023-06-13T05:40:18Z",
    "author_association": "MEMBER",
    "body": "> ./lodestar validator voluntary-exit and it said:\r\n100% of local key stores imported. current=0 total=0 rate=0.00keys/m Loaded keystores via keystore cache\r\n“? Confirm to exit pub keys at epoch 207748 from network main net?”\r\n\r\nThe voluntary exit command might also be confusing ☝️  if there are no pub keys to exit because no keys are imported. Ideally,\r\nwe don't want to print out `Confirm to exit pub keys at epoch 207748 from network main net` at all if `validatorsToExit=0`.\r\nhttps://github.com/ChainSafe/lodestar/blob/739febbd658b2eee0f7c4508431e274797a202a8/packages/cli/src/cmds/validator/voluntaryExit.ts#L83\r\n\r\nThere must be a more explicit message that tells the user that there are 0 validators to exit which should be considered an error condition for this command.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1588580003/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

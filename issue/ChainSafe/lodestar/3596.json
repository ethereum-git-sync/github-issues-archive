{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3596",
  "id": 1097263867,
  "node_id": "I_kwDOCD5_Gc5BZur7",
  "number": 3596,
  "title": "Safer installation with npm of lodestar-cli",
  "user": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 4116819988,
      "node_id": "LA_kwDOCD5_Gc71YbAU",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-security",
      "name": "scope-security",
      "color": "980043",
      "default": false,
      "description": "Issues that fix security issues: DOS, key leak, CVEs."
    },
    {
      "id": 5670208842,
      "node_id": "LA_kwDOCD5_Gc8AAAABUfiFSg",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-investigate",
      "name": "meta-investigate",
      "color": "A64CF6",
      "default": false,
      "description": "Issues found that require further investigation and may not have a specific resolution/fix"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-01-09T18:09:17Z",
  "updated_at": "2023-11-05T14:57:49Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n\r\nDoing\r\n```\r\nnpm lodestar-cli\r\n```\r\nis unsafe to dependency attacks, since the yarn.lock is not considered for dependency resolution.\r\n\r\n**Expected behavior**\r\n\r\nFor npm installations, generate a package-lock.json (with https://github.com/imsnif/synp for example) and then generate a shrinkwrap file (see https://docs.npmjs.com/cli/v8/commands/npm-shrinkwrap). The shrinkwrap should take precedence on installation. This generation should happen in CI when publishing.\r\n\r\nFor yarn installations: investigate\r\n\r\n- Related: https://github.com/ChainSafe/lodestar/issues/3470\r\n\r\n**TODO**\r\n\r\nTo reduce the attack surface we should count who many individual authors we rely on and minimize that number and / or ensure we have a sufficient level of confidence towards them.",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596/timeline",
  "performed_via_github_app": null,
  "state_reason": "reopened"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1149126209",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3596#issuecomment-1149126209",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596",
    "id": 1149126209,
    "node_id": "IC_kwDOCD5_Gc5EfkZB",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-07T20:20:37Z",
    "updated_at": "2022-06-07T20:20:37Z",
    "author_association": "MEMBER",
    "body": "This issue should only be closed if we implement something related to the shrinkwrap strategy or if that's abandoned",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1149126209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1149898873",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3596#issuecomment-1149898873",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596",
    "id": 1149898873,
    "node_id": "IC_kwDOCD5_Gc5EihB5",
    "user": {
      "login": "dadepo",
      "id": 272535,
      "node_id": "MDQ6VXNlcjI3MjUzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/272535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dadepo",
      "html_url": "https://github.com/dadepo",
      "followers_url": "https://api.github.com/users/dadepo/followers",
      "following_url": "https://api.github.com/users/dadepo/following{/other_user}",
      "gists_url": "https://api.github.com/users/dadepo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dadepo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dadepo/subscriptions",
      "organizations_url": "https://api.github.com/users/dadepo/orgs",
      "repos_url": "https://api.github.com/users/dadepo/repos",
      "events_url": "https://api.github.com/users/dadepo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dadepo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-08T13:13:07Z",
    "updated_at": "2022-06-08T13:13:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Update on looking into this. \r\n\r\nTrying to create a shrinkwrap file in `lodestar-cli` fails with an error similar to this. \r\n```\r\nnpm shrinkwrap\r\nnpm ERR! code ENOWORKSPACES\r\nnpm ERR! This command does not support workspaces.\r\n\r\nnpm ERR! A complete log of this run can be found in:\r\n```\r\n\r\nWhich is not surprising., given the documentation [here](https://docs.npmjs.com/cli/v8/commands/npm-shrinkwrap) mentioned:\r\n\r\n> Note: This command is unaware of workspaces.\r\n\r\nThe shrinkwrap can only be generated is from the root of the monorepo, but then the structure is different to what would have been generated if the command was ran specifically for `lodestar-cli`. What I will be doing next is to confirm and/or see if the generated shrinkwrap can be modified and moved to `lodestar-cli` during ci.\r\n\r\nIn the meantime, I have a [question](https://stackoverflow.com/questions/72265540/how-to-use-npm-shrinkwrap-with-workspaces) on StackOverflow about this...but no solution/answer yet...",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1149898873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1479901813",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3596#issuecomment-1479901813",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596",
    "id": 1479901813,
    "node_id": "IC_kwDOCD5_Gc5YNYJ1",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T16:35:09Z",
    "updated_at": "2023-03-22T16:35:09Z",
    "author_association": "MEMBER",
    "body": "It would be hard to estimate if your PR for this would be able to make it for the v1.7.0 release. Please consider providing a potential draft PR/solution for review so it's easier to identify whether or not we can include this. ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1479901813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1793760531",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3596#issuecomment-1793760531",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3596",
    "id": 1793760531,
    "node_id": "IC_kwDOCD5_Gc5q6p0T",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-05T14:57:49Z",
    "updated_at": "2023-11-05T14:57:49Z",
    "author_association": "MEMBER",
    "body": "Not a high priority as we've mitigated by documenting to users how they should install Lodestar (not via npm). We should continue investigating a solution here.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1793760531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

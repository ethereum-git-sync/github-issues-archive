{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4661",
  "id": 1411032234,
  "node_id": "I_kwDOCD5_Gc5UGqSq",
  "number": 4661,
  "title": "Outgoing request error rate",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 2155825090,
      "node_id": "MDU6TGFiZWwyMTU1ODI1MDkw",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-networking",
      "name": "scope-networking",
      "color": "980043",
      "default": false,
      "description": "All issues related to networking, gossip, and libp2p."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/milestones/25",
    "html_url": "https://github.com/ChainSafe/lodestar/milestone/25",
    "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/milestones/25/labels",
    "id": 8986906,
    "node_id": "MI_kwDOCD5_Gc4AiSEa",
    "number": 25,
    "title": "v1.5.0",
    "description": "",
    "creator": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 10,
    "state": "closed",
    "created_at": "2023-01-31T14:31:43Z",
    "updated_at": "2023-04-05T14:15:50Z",
    "due_on": null,
    "closed_at": "2023-04-05T14:15:50Z"
  },
  "comments": 11,
  "created_at": "2022-10-17T07:12:31Z",
  "updated_at": "2023-02-15T04:18:43Z",
  "closed_at": "2023-02-15T04:18:43Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\n\r\nStarting from Oct 14, the \"Outgoing request error rate\" metric spiked on `unstable`\r\n\r\n<img width=\"1238\" alt=\"Screen Shot 2022-10-17 at 14 10 38\" src=\"https://user-images.githubusercontent.com/10568965/196111601-9c27fb74-7851-4e14-b0f9-b3d65f38a074.png\">\r\n\r\nThere are logs like:\r\n\r\n```\r\nct-16 00:00:03.150[network]       ^[[36mverbose^[[39m: Req  error method=ping, encoding=ssz_snappy, client=Unknown, peer=16...1fmVye, requestId=33248 code=REQUEST_ERROR_DIAL_ERROR, error=The dial request has no valid addresses\r\nError: The dial request has no valid addresses\r\n    at DefaultDialer.dial (file:///usr/app/node_modules/libp2p/src/connection-manager/dialer/index.ts:182:21)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at runNextTicks (node:internal/process/task_queues:65:3)\r\n    at processTimers (node:internal/timers:499:9)\r\n    at EventTarget.openConnection (file:///usr/app/node_modules/libp2p/src/connection-manager/index.ts:521:26)\r\n    at EventTarget.dial (file:///usr/app/node_modules/libp2p/src/libp2p.ts:382:12)\r\n    at EventTarget.dialProtocol (file:///usr/app/node_modules/libp2p/src/libp2p.ts:396:24)\r\n    at file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:91:22\r\n    at withTimeout (file:///usr/app/packages/utils/src/timeout.ts:19:12)\r\nError: REQUEST_ERROR_DIAL_ERROR\r\n    at file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:102:15\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at runNextTicks (node:internal/process/task_queues:65:3)\r\n    at processTimers (node:internal/timers:499:9)\r\n    at sendRequest (file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:88:20)\r\n    at ReqResp.sendRequest (file:///usr/app/packages/beacon-node/src/network/reqresp/reqResp.ts:157:22)\r\n    at ReqResp.ping (file:///usr/app/packages/beacon-node/src/network/reqresp/reqResp.ts:103:12)\r\n    at PeerManager.requestPing (file:///usr/app/packages/beacon-node/src/network/peers/peerManager.ts:348:25)\r\nOct-16 00:00:03.150[network]       ^[[36mverbose^[[39m: Req  error method=status, encoding=ssz_snappy, client=Unknown, peer=16...1fmVye, requestId=33249 code=REQUEST_ERROR_DIAL_ERROR, error=The dial request has no valid addresses\r\n```\r\n\r\n@g11tech this could be related to #4658 as I don't see other commits around this time\r\n\r\n**Expected behavior**\r\n\r\nNo error",
  "closed_by": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280412464",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1280412464",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1280412464,
    "node_id": "IC_kwDOCD5_Gc5MUYsw",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T07:29:45Z",
    "updated_at": "2022-10-17T07:29:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "checking",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280412464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280500490",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1280500490",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1280500490,
    "node_id": "IC_kwDOCD5_Gc5MUuMK",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T08:43:57Z",
    "updated_at": "2022-10-17T08:46:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Documenting the investigation so far:\r\n\r\nlog of a peer id where this error was thrown\r\n```typescript\r\n  id: Secp256k1PeerIdImpl [PeerId(16Uiu2HAmVPLt1XZLrafBnTK3i1sKf8qQ5zYTokQyNEm4R581Bbnq)] {\r\n    type: 'secp256k1',\r\n    multihash: Digest {\r\n      code: 0,\r\n      size: 37,\r\n      digest: <Buffer 08 02 12 21 03 f8 94 99 06 b1 3b b6 3c 15 b8 01 7b 25 b5 10 ea d5 43 1b 8a 9d 11 c2 de 6a 7b 76 de 66 21 b2 1a>,\r\n      bytes: [Uint8Array]\r\n    },\r\n    privateKey: undefined,\r\n    publicKey: <Buffer 08 02 12 21 03 f8 94 99 06 b1 3b b6 3c 15 b8 01 7b 25 b5 10 ea d5 43 1b 8a 9d 11 c2 de 6a 7b 76 de 66 21 b2 1a>\r\n  },\r\n  multiaddrs: [],\r\n  dialTarget: {\r\n    id: '16Uiu2HAmVPLt1XZLrafBnTK3i1sKf8qQ5zYTokQyNEm4R581Bbnq',\r\n    addrs: []\r\n  }\r\n}\r\n```\r\nclearly this peerId didn't have gave any multiaddrs and hence there were no addrs to dail,\r\n\r\nbut on a fetch of the info of the peer via api:\r\n ```\r\n{\"data\":{\"peer_id\":\"16Uiu2HAmVPLt1XZLrafBnTK3i1sKf8qQ5zYTokQyNEm4R581Bbnq\",\"enr\":\"\",\"last_seen_p2p_address\":\"/ip4/34.221.99.113/tcp/9000/p2p/16Uiu2HAmVPLt1XZLrafBnTK3i1sKf8qQ5zYTokQyNEm4R581Bbnq\",\"direction\":\"outbound\",\"state\":\"connected\"}}\r\n```\r\n\r\nThe IP doesn't seem to belong to any of lodestar deployments, so unlikely that #4658 is the cause.\r\n\r\nBut will observe and see if there is any coherent pattern that can be observed on this error.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280500490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280731698",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1280731698",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1280731698,
    "node_id": "IC_kwDOCD5_Gc5MVmoy",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T11:47:27Z",
    "updated_at": "2022-10-17T11:47:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "UPDATE:\r\nfor *unstable lg1* this error rate has come drastically down to previous normals  on container restart it seems \r\n\r\n![image](https://user-images.githubusercontent.com/76567250/196169192-b9098c82-f859-4a37-a990-44abaeee1e73.png)\r\n\r\nwhile feat1 errors on new deployment have since gone up\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280731698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280757716",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1280757716",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1280757716,
    "node_id": "IC_kwDOCD5_Gc5MVs_U",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T12:09:57Z",
    "updated_at": "2022-10-17T12:09:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "on *feat 1 lg1* since deployment of unstable, errors seemed to have increased however, but not the dail errors so much (so `no valid addresses` are really the concern for e,g. on 3 instances of such errors like like 4-5 hours)\r\n\r\nHowever status and ping errors really have seemed to increase:\r\n![image](https://user-images.githubusercontent.com/76567250/196173017-4285e793-e667-4042-8e17-5b2f1fd54c62.png)\r\n\r\nand looking at the debug log there seems to be some issue\r\n\r\n![image](https://user-images.githubusercontent.com/76567250/196173515-721fdb53-e38c-4f0e-bfb6-27b4809c87db.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280757716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280938614",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1280938614",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1280938614,
    "node_id": "IC_kwDOCD5_Gc5MWZJ2",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T14:20:24Z",
    "updated_at": "2022-10-17T14:20:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "also w.r.t. `no valid addresses error\"... it seems that there is a recurring dial out of a single peer which is having this bad data, shouldn't libp2p ban this peer automatically?\r\n\r\n![image](https://user-images.githubusercontent.com/76567250/196201044-e38029da-785c-4146-ac4c-d57eed8bbe69.png)\r\n\r\nalso node doesnt seem to have any data for this particular peer\r\n![image](https://user-images.githubusercontent.com/76567250/196201835-7eb02885-5fa9-4aef-a389-137f8c6554a9.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1280938614/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1281311568",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1281311568",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1281311568,
    "node_id": "IC_kwDOCD5_Gc5MX0NQ",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T18:37:36Z",
    "updated_at": "2022-10-17T18:37:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "looking at the dial errors (which could also be reason behind status and ping errors) on `feat1 lg1`, just a single peer seems to be the reason of all the trouble (added peerId  console log before throwing)\r\n\r\n![image](https://user-images.githubusercontent.com/76567250/196255974-d10793d4-2331-41c5-b59f-623aaaf9b76c.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1281311568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1281716032",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1281716032",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1281716032,
    "node_id": "IC_kwDOCD5_Gc5MZW9A",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-18T02:05:54Z",
    "updated_at": "2022-10-18T02:05:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeah this is the common issue since we upgrade libp2p, same to v1.2.0-rc.1 https://github.com/ChainSafe/lodestar/issues/4660#issuecomment-1280411436",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1281716032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1311162293",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1311162293",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1311162293,
    "node_id": "IC_kwDOCD5_Gc5OJr-1",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-11T02:45:29Z",
    "updated_at": "2022-11-11T02:45:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "this still happens in v1.2.0\r\n\r\n<img width=\"812\" alt=\"Screen Shot 2022-11-11 at 09 38 48\" src=\"https://user-images.githubusercontent.com/10568965/201250712-8287527d-60aa-4c7a-bd25-b4b626f84a8d.png\">\r\n\r\nI think the reason is we received many goodbye requests, we also sent out many goodbye requests\r\n\r\n<img width=\"817\" alt=\"Screen Shot 2022-11-11 at 09 39 44\" src=\"https://user-images.githubusercontent.com/10568965/201250829-04b47d44-41f7-47ed-944e-03c24e1d25dd.png\">\r\n\r\nwhich lead to 20% Dial error rate\r\n\r\n<img width=\"823\" alt=\"Screen Shot 2022-11-11 at 09 40 16\" src=\"https://user-images.githubusercontent.com/10568965/201250893-69b0b947-713b-4db7-9f1a-f1430c8d557b.png\">\r\n\r\n- v1.1.0\r\n```\r\ngrep -e \"REQUEST_ERROR_DIAL_ERROR\" -rn beacon-2022-11-08.log | wc -l\r\n2304\r\n```\r\n\r\n- v1.2.0\r\n```\r\ngrep -e \"REQUEST_ERROR_DIAL_ERROR\" -rn beacon-2022-11-10.log | wc -l\r\n36534\r\n```\r\n\r\nsample log\r\n\r\n```\r\nNov-10 00:00:01.871[network]       ^[[36mverbose^[[39m: Req  error method=ping, encoding=ssz_snappy, client=Teku, peer=16...iK3cxw, requestId=33174 code=REQUEST_ERROR_DIAL_ERROR, error=All promises were rejected\r\nAggregateError: All promises were rejected\r\nError: REQUEST_ERROR_DIAL_ERROR\r\n    at file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:102:15\r\n    at sendRequest (file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:88:20)\r\n    at ReqResp.sendRequest (file:///usr/app/packages/beacon-node/src/network/reqresp/reqResp.ts:198:22)\r\n    at ReqResp.ping (file:///usr/app/packages/beacon-node/src/network/reqresp/reqResp.ts:104:12)\r\n    at PeerManager.requestPing (file:///usr/app/packages/beacon-node/src/network/peers/peerManager.ts:348:25)\r\nNov-10 00:00:01.871[network]       ^[[36mverbose^[[39m: Req  error method=status, encoding=ssz_snappy, client=Teku, peer=16...iK3cxw, requestId=33176 code=REQUEST_ERROR_DIAL_ERROR, error=All promises were rejected\r\nAggregateError: All promises were rejected\r\nError: REQUEST_ERROR_DIAL_ERROR\r\n    at file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:102:15\r\n    at sendRequest (file:///usr/app/packages/beacon-node/src/network/reqresp/request/index.ts:88:20)\r\n    at ReqResp.sendRequest (file:///usr/app/packages/beacon-node/src/network/reqresp/reqResp.ts:198:22)\r\n    at ReqResp.status (file:///usr/app/packages/beacon-node/src/network/reqresp/reqResp.ts:96:12)\r\n    at PeerManager.requestStatus (file:///usr/app/packages/beacon-node/src/network/peers/peerManager.ts:360:27)\r\n    at async Promise.all (index 0)\r\n    at PeerManager.requestStatusMany (file:///usr/app/packages/beacon-node/src/network/peers/peerManager.ts:369:7)\r\nNov-10 00:00:02.191[network]       ^[[36mverbose^[[39m: Req  done method=status, encoding=ssz_snappy, client=Prysm, peer=16...5TozdR, requestId=33177, numResponse=1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1311162293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1328176592",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1328176592",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1328176592,
    "node_id": "IC_kwDOCD5_Gc5PKl3Q",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-27T05:45:23Z",
    "updated_at": "2022-11-27T05:45:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "This happens with v1.2.1 in mainnet nodes. It happens to a single peer really have no multiaddr somehow, every 10 seconds we got 2 \"REQUEST_ERROR_DIAL_ERROR\" errors with status request and ping request, the metrics say that's low tolerance error so we should disconnect the peer due to low score but somehow we did not.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1328176592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1410475105",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1410475105",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1410475105,
    "node_id": "IC_kwDOCD5_Gc5UEiRh",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T14:38:26Z",
    "updated_at": "2023-01-31T14:38:26Z",
    "author_association": "MEMBER",
    "body": "As of `v1.4.0` some samples from mainnet nodes:\r\n\r\ncip-canary-bn\r\n<img width=\"812\" alt=\"Screenshot 2023-01-31 at 9 35 31 AM\" src=\"https://user-images.githubusercontent.com/58080811/215789792-23884694-f55b-4ed6-acd8-f2c18779194a.png\">\r\n\r\nbeta-mainnet-hzax41\r\n<img width=\"810\" alt=\"Screenshot 2023-01-31 at 9 34 47 AM\" src=\"https://user-images.githubusercontent.com/58080811/215789992-c7fee7be-faa7-446d-8008-2c08cd06c22b.png\">\r\n\r\nMoving to v1.5.0 milestone if still required.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1410475105/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1430736274",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4661#issuecomment-1430736274",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4661",
    "id": 1430736274,
    "node_id": "IC_kwDOCD5_Gc5VR02S",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-15T04:18:43Z",
    "updated_at": "2023-02-15T04:18:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "this issue was original caused when we keeps dialing to a single peer, does not happen anymore in v1.4.2 (there are a lot of libp2p/network upgrade since we found the issue). Caught some metrics from some nodes:\r\n\r\n- Node 7\r\n\r\n<img width=\"1306\" alt=\"Screen Shot 2023-02-15 at 11 17 01\" src=\"https://user-images.githubusercontent.com/10568965/218928607-0c83d234-891e-444f-ac50-241c423f4a0a.png\">\r\n\r\n- Node 8\r\n\r\n<img width=\"1285\" alt=\"Screen Shot 2023-02-15 at 11 17 28\" src=\"https://user-images.githubusercontent.com/10568965/218928710-d7eaada2-4f8f-45b6-afc9-7798799eb2e8.png\">\r\n\r\n- Node 9\r\n\r\n<img width=\"1283\" alt=\"Screen Shot 2023-02-15 at 11 17 49\" src=\"https://user-images.githubusercontent.com/10568965/218928762-62bd325e-d923-41bc-ac9c-ccf436f56f19.png\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1430736274/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

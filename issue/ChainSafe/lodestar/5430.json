{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5430",
  "id": 1688046122,
  "node_id": "I_kwDOCD5_Gc5knYoq",
  "number": 5430,
  "title": "Publish all attestations on the Beacon API Event stream",
  "user": {
    "login": "Savid",
    "id": 1709934,
    "node_id": "MDQ6VXNlcjE3MDk5MzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1709934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Savid",
    "html_url": "https://github.com/Savid",
    "followers_url": "https://api.github.com/users/Savid/followers",
    "following_url": "https://api.github.com/users/Savid/following{/other_user}",
    "gists_url": "https://api.github.com/users/Savid/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Savid/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Savid/subscriptions",
    "organizations_url": "https://api.github.com/users/Savid/orgs",
    "repos_url": "https://api.github.com/users/Savid/repos",
    "events_url": "https://api.github.com/users/Savid/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Savid/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090447,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ3",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-high",
      "name": "prio-high",
      "color": "fd9579",
      "default": false,
      "description": "Resolve issues as soon as possible."
    },
    {
      "id": 4116812272,
      "node_id": "LA_kwDOCD5_Gc71YZHw",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-interop",
      "name": "scope-interop",
      "color": "980043",
      "default": false,
      "description": "Issues that fix interop issues between Lodestar and CL, EL or tooling."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-28T07:27:15Z",
  "updated_at": "2023-06-26T16:59:02Z",
  "closed_at": "2023-06-26T16:59:02Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--NOTE:\r\n- General questions should go to the discord chat instead of the issue tracker.\r\n-->\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\n\r\nIt looks like only aggregated attestations from [block imports](https://github.com/ChainSafe/lodestar/blob/7af22d77957214a19481be18011f51c349e585d7/packages/beacon-node/src/chain/blocks/importBlock.ts#L155) are published on the [`/eth/v1/events`](https://ethereum.github.io/beacon-APIs/?urls.primaryName=dev#/Events/eventstream) `attestation` topic. \r\n\r\n**Describe the solution you'd like**\r\n\r\nPublish all attestations received from currently subscribed subnets on the [`/eth/v1/events`](https://ethereum.github.io/beacon-APIs/?urls.primaryName=dev#/Events/eventstream) `attestation` topic.\r\n\r\n**Additional context**\r\n\r\nCurrently we run multiple CL clients and collect attestation data. Would love to also include Lodestar as one of the sources! Apologies if I've missed a CLI flag somewhere and this is already implemented. I also understand there could potential performance issues in implementing this. Thanks\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1528929040",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5430#issuecomment-1528929040",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430",
    "id": 1528929040,
    "node_id": "IC_kwDOCD5_Gc5bIZsQ",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-30T03:21:34Z",
    "updated_at": "2023-04-30T03:21:34Z",
    "author_association": "MEMBER",
    "body": "Hey @Savid happy to align Lodestar to other CL implementations. From your experience, do other clients emit attestation events for attestations received either via:\r\n- block import\r\n- gossip aggregated topic\r\n- gossip unaggregated topic\r\n- API post aggregated\r\n- API post unaggregated",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1528929040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1529428426",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5430#issuecomment-1529428426",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5430",
    "id": 1529428426,
    "node_id": "IC_kwDOCD5_Gc5bKTnK",
    "user": {
      "login": "Savid",
      "id": 1709934,
      "node_id": "MDQ6VXNlcjE3MDk5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1709934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Savid",
      "html_url": "https://github.com/Savid",
      "followers_url": "https://api.github.com/users/Savid/followers",
      "following_url": "https://api.github.com/users/Savid/following{/other_user}",
      "gists_url": "https://api.github.com/users/Savid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Savid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Savid/subscriptions",
      "organizations_url": "https://api.github.com/users/Savid/orgs",
      "repos_url": "https://api.github.com/users/Savid/repos",
      "events_url": "https://api.github.com/users/Savid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Savid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-01T07:14:20Z",
    "updated_at": "2023-05-01T07:18:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Awesome @dapplion! I only have experience from gossip/block imports as I haven't tested API. All other CL implementations are at least publishing gossip/block import attestations. \r\nNaively I would say all of the items you listed are applicable; [`The node has received a valid attestation (from P2P or API)`](https://github.com/ethereum/beacon-APIs/blob/f087fbf2764e657578a6c29bdf0261b36ee8db1e/apis/eventstream/index.yaml#L56), but selfishly I only require gossip/block import. ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1529428426/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

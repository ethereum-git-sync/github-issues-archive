{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5809",
  "id": 1823800876,
  "node_id": "I_kwDOCD5_Gc5stP4s",
  "number": 5809,
  "title": "Broken `trace` logging",
  "user": {
    "login": "matthewkeil",
    "id": 18608739,
    "node_id": "MDQ6VXNlcjE4NjA4NzM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/18608739?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matthewkeil",
    "html_url": "https://github.com/matthewkeil",
    "followers_url": "https://api.github.com/users/matthewkeil/followers",
    "following_url": "https://api.github.com/users/matthewkeil/following{/other_user}",
    "gists_url": "https://api.github.com/users/matthewkeil/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matthewkeil/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matthewkeil/subscriptions",
    "organizations_url": "https://api.github.com/users/matthewkeil/orgs",
    "repos_url": "https://api.github.com/users/matthewkeil/repos",
    "events_url": "https://api.github.com/users/matthewkeil/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matthewkeil/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5670219610,
      "node_id": "LA_kwDOCD5_Gc8AAAABUfivWg",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-bug",
      "name": "meta-bug",
      "color": "E79553",
      "default": false,
      "description": "Issues that identify a bug and require a fix."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-27T07:41:20Z",
  "updated_at": "2023-07-27T08:07:21Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nIt appears that trace logging is broken.  Attempted to add a `logger.trace()` call and e2e tests and the node broke when deployed.\r\n\r\nI removed the call and the error went away.  I changed the error to `debug` and the error also went away.  It looks like the name was changed from `silly` to `trace` in #4539 and winston expects the string `silly` to be passed.\r\n\r\nWe are [setting](https://github.com/ChainSafe/lodestar/blob/2c3d7e14f0082cfe70156e55a9213db952f815c4/packages/logger/src/winston.ts#L56) the [`logLevelNum`](https://github.com/ChainSafe/lodestar/blob/2c3d7e14f0082cfe70156e55a9213db952f815c4/packages/logger/src/interface.ts#L4) which the [docs say](https://github.com/winstonjs/winston#using-custom-logging-levels) should work but it may not be set correctly.\r\n\r\n```sh\r\nTypeError: colors[Colorizer.allColors[lookup]] is not a function\r\n    at Colorizer.colorize (/usr/src/lodestar/node_modules/logform/colorize.js:73:49)\r\n    at Colorizer.transform (/usr/src/lodestar/node_modules/logform/colorize.js:98:25)\r\n    at Format.transform (/usr/src/lodestar/node_modules/logform/combine.js:20:24)\r\n    at DerivedLogger._transform (/usr/src/lodestar/node_modules/winston/lib/winston/logger.js:313:29)\r\n    at DerivedLogger.Transform._read (/usr/src/lodestar/node_modules/readable-stream/lib/_stream_transform.js:177:10)\r\n    at DerivedLogger.Transform._write (/usr/src/lodestar/node_modules/readable-stream/lib/_stream_transform.js:164:83)\r\n    at doWrite (/usr/src/lodestar/node_modules/readable-stream/lib/_stream_writable.js:409:139)\r\n    at writeOrBuffer (/usr/src/lodestar/node_modules/readable-stream/lib/_stream_writable.js:398:5)\r\n    at DerivedLogger.Writable.write (/usr/src/lodestar/node_modules/readable-stream/lib/_stream_writable.js:307:11)\r\n    at DerivedLogger.log (/usr/src/lodestar/node_modules/winston/lib/winston/logger.js:225:14) colors[Colorizer.allColors[lookup]] is not a function\r\n```\n\n### Expected behavior\n\nA trace log should work and not break the other log levels\n\n### Steps to reproduce\n\n1. Create a `logger.trace`\r\n2. Run e2e tests and should work correctly \n\n### Additional context\n\n_No response_\n\n### Operating system\n\nLinux\n\n### Lodestar version or commit hash\n\nunstable",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1653108720",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5809#issuecomment-1653108720",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5809",
    "id": 1653108720,
    "node_id": "IC_kwDOCD5_Gc5iiG_w",
    "user": {
      "login": "matthewkeil",
      "id": 18608739,
      "node_id": "MDQ6VXNlcjE4NjA4NzM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/18608739?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewkeil",
      "html_url": "https://github.com/matthewkeil",
      "followers_url": "https://api.github.com/users/matthewkeil/followers",
      "following_url": "https://api.github.com/users/matthewkeil/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewkeil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewkeil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewkeil/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewkeil/orgs",
      "repos_url": "https://api.github.com/users/matthewkeil/repos",
      "events_url": "https://api.github.com/users/matthewkeil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewkeil/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-27T08:07:20Z",
    "updated_at": "2023-07-27T08:07:20Z",
    "author_association": "MEMBER",
    "body": "It looks like the ColorizeOptions expect a map with matching levels for color lookup",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1653108720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

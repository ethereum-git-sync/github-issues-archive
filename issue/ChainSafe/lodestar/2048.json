{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/2048",
  "id": 809319466,
  "node_id": "MDU6SXNzdWU4MDkzMTk0NjY=",
  "number": 2048,
  "title": "Sudden crash cause synced progress lost",
  "user": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-02-16T13:37:17Z",
  "updated_at": "2021-03-16T14:51:24Z",
  "closed_at": "2021-03-16T14:51:24Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Testing mainnet in Digital Ocean the node suddenly crashed without any cause.\r\n\r\nThe node was synced to the head when the crash happened, and the node started syncing from many epochs behind indicating that sync progress was lost. What can cause this?\r\n\r\n![Screenshot from 2021-02-16 14-38-10](https://user-images.githubusercontent.com/35266934/108070412-c8a18080-7064-11eb-939a-7dbae2cb8349.png)\r\n\r\n\r\n```\r\n2021-02-16 02:04:29 [NETWORK]         debug: Req  request sent method=ping, encoding=ssz_snappy, peer=16Uiu2HAmEspe2SSFjyK9pum6wh2H4gU6bouFTRKoGva9SnQWBmvi, requestId=127810\r\n2021-02-16 02:04:29 [NETWORK]       verbose: Received valid gossip aggregate and proof attestationSlot=551419, aggregatorIndex=55255, aggregateRoot=0xe0f2f4dca976ec5a17e39cf7c7d0b43b7aacbcfe76e94b371566f1d519b9f42a, attestationRoot=0xb2850050c7eef652bf7d602a899942232b05b57726109780a990d23848bee239, targetEpoch=17231\r\n2021-02-16 02:04:29 [GOSSIP]        verbose: Received AggregateAndProof validator=55255, target=0x451b77e8bdcd07f14657a3ce29ed677c61611e3e07e0978241c1d7ff8a7e73c6\r\n  <<< Crashed here >>>\r\n2021-02-16 02:04:35 [DB]               info: Connected to LevelDB database name=/root/.local/share/lodestar/mainnet/chain-db\r\n2021-02-16 02:04:44 []                 info: Initializing beacon state from db slot=524800, epoch=16400, stateRoot=0x10f35611f49959671cea4ecaf31d4e66afaa60762dbe5e463b1d64a545ff6d16\r\n2021-02-16 02:04:44 [DB]               info: Connected to LevelDB database name=/root/.local/share/lodestar/mainnet/chain-db\r\n2021-02-16 02:04:55 [API]              warn: Server listening at http://127.0.0.1:9596\r\n2021-02-16 02:04:55 [API]              info: Started rest api server address=http://127.0.0.1:9596\r\n2021-02-16 02:04:55 [METRICS]          info: Starting metrics HTTP server port=8008\r\n2021-02-16 02:04:59 [GOSSIP]        verbose: Gossip is started\r\n2021-02-16 02:04:59 [NETWORK]          info: PeerId 16Uiu2HAm8ysp1GJzop1D5L6XkBTdVnwcvnGwdN2iaGn8D1wFo2Kn, Multiaddrs /ip4/127.0.0.1/tcp/9000,/ip4/172.23.0.2/tcp/9000\r\n2021-02-16 02:04:59 []                 warn: Low peer count peers=0\r\n2021-02-16 02:04:59 []                 info: Searching for peers - peers: 0 - finalized: 16398 0x7e4a…e149 - head: 524800 0xb076…3ed4 - currentSlot: 551423\r\n2021-02-16 02:05:05 []                 info: Searching for peers - peers: 0 - finalized: 16398 0x7e4a…e149 - head: 524800 0xb076…3ed4 - currentSlot: 551423\r\n2021-02-16 02:05:17 []                 info: Searching for peers - peers: 0 - finalized: 16398 0x7e4a…e149 - head: 524800 0xb076…3ed4 - currentSlot: 551424\r\n2021-02-16 02:05:25 [NETWORK]         debug: Dialing discovered peer peer=16Uiu2HAmMyUXQ2rfCwu4zpUNW9Ax6gkkn75K2GitnxAFnXvdCFgU\r\n2021-02-16 02:05:25 [NETWORK]         debug: Dialing discovered peer peer=16Uiu2HAmKaba5hmtcqXcVPjFD6sUyqyQuQbygRCa6bRoT9M8KHX5\r\n2021-02-16 02:05:25 [NETWORK]         debug: Dialing discovered peer peer=16Uiu2HAm2Pn9chFUBG3MbkFf6oK3Rf5GpVq1e7FvNnCeutfjVUfL\r\n2021-02-16 02:05:25 [NETWORK]         debug: Dialing discovered peer peer=16Uiu2HAmNVLJ18CZsMJGFVhPpBhZgeL6rNiXQmyWtVy1FmWCQpkN\r\n2021-02-16 02:05:25 [NETWORK]         debug: Dialing discovered peer peer=16Uiu2HAkzd9Fi5tLiCCf6CbuxNNzMDxACKG1EQY3u6vC6cHHmRNw\r\n```\r\n\r\n\r\n\r\n---\r\n\r\n### Extra \r\n\r\nMost external memory gets wiped out on reset, memory leak still?\r\n\r\n![Screenshot from 2021-02-16 14-33-46](https://user-images.githubusercontent.com/35266934/108069999-4f099280-7064-11eb-80f8-55eb55265fb8.png)\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779857585",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/2048#issuecomment-779857585",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2048",
    "id": 779857585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTg1NzU4NQ==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T14:04:56Z",
    "updated_at": "2021-02-16T14:05:51Z",
    "author_association": "MEMBER",
    "body": "The exact same thing happened in a different machine. Sudden crash + head slot dropped\r\n- Node A: 551400 -> 525120 (26280 slots, 821 epochs)\r\n- Node B: 547960 -> 524980 (22980 slots, 718 epochs)",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/779857585/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

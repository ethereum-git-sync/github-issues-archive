{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3567",
  "id": 1093618704,
  "node_id": "I_kwDOCD5_Gc5BL0wQ",
  "number": 3567,
  "title": "Add retry mechanism in executionEngine for executePayload",
  "user": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3352623099,
      "node_id": "MDU6TGFiZWwzMzUyNjIzMDk5",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/spec-bellatrix%20%F0%9F%90%BC",
      "name": "spec-bellatrix üêº",
      "color": "6baed6",
      "default": false,
      "description": "Issues targeting the merge spec version."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "dadepo",
    "id": 272535,
    "node_id": "MDQ6VXNlcjI3MjUzNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/272535?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dadepo",
    "html_url": "https://github.com/dadepo",
    "followers_url": "https://api.github.com/users/dadepo/followers",
    "following_url": "https://api.github.com/users/dadepo/following{/other_user}",
    "gists_url": "https://api.github.com/users/dadepo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dadepo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dadepo/subscriptions",
    "organizations_url": "https://api.github.com/users/dadepo/orgs",
    "repos_url": "https://api.github.com/users/dadepo/repos",
    "events_url": "https://api.github.com/users/dadepo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dadepo/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "dadepo",
      "id": 272535,
      "node_id": "MDQ6VXNlcjI3MjUzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/272535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dadepo",
      "html_url": "https://github.com/dadepo",
      "followers_url": "https://api.github.com/users/dadepo/followers",
      "following_url": "https://api.github.com/users/dadepo/following{/other_user}",
      "gists_url": "https://api.github.com/users/dadepo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dadepo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dadepo/subscriptions",
      "organizations_url": "https://api.github.com/users/dadepo/orgs",
      "repos_url": "https://api.github.com/users/dadepo/repos",
      "events_url": "https://api.github.com/users/dadepo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dadepo/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-01-04T17:53:23Z",
  "updated_at": "2022-07-25T15:53:19Z",
  "closed_at": "2022-07-25T15:53:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Add retry for following scenarios\r\n\r\n- Execution Engine is unavailable\r\n  -  Explore all unavailability scenarios and the behavior of the json rpc client we are using\r\n - Execution Engine errors: Sometimes EL can give internal errors because of the software issues for e.g. nethermind sometimes give internal errors on some concurrency race conditions. Without explicit handling the error basis the error message, a basic retry (like 3 retires) could be done to see if EL can recover.\r\n\r\n\r\nBasically there are 3 fundamental apis: new payload (retry needed), forkchoice updated (no retry needed without payloadattributes as it tells the EL where out head is, so in 12 seconds it will be called again so no worries, but with payload attributes max tries 3 within 1-2 second interval), and engine_getPayloadV1 again 3 tries with 2 sec interval.\r\n\r\nConclusion: In other to keep things simple, have _3 retries within 1-2 second interval_ for all the endpoints that needs to be retried.\r\n\r\nAlso add metrics for:\r\n\r\n- histogram of retry attempts per call\r\n- histogram of overall requests times to EL",
  "closed_by": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1045968704",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3567#issuecomment-1045968704",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3567",
    "id": 1045968704,
    "node_id": "IC_kwDOCD5_Gc4-WDdA",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-19T08:39:40Z",
    "updated_at": "2022-02-19T08:39:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "@dadepo want to try your hands on this?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1045968704/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 2
    },
    "performed_via_github_app": null
  }
]

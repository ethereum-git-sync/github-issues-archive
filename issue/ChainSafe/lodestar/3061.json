{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3061",
  "id": 986669590,
  "node_id": "MDU6SXNzdWU5ODY2Njk1OTA=",
  "number": 3061,
  "title": "Beacon node notifier says (empty) but head is progressing",
  "user": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2159934357,
      "node_id": "MDU6TGFiZWwyMTU5OTM0MzU3",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-testnet-debugging",
      "name": "scope-testnet-debugging",
      "color": "980043",
      "default": false,
      "description": "Issues uncovered through running a node on a public testnet."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-09-02T12:41:26Z",
  "updated_at": "2023-05-24T07:52:33Z",
  "closed_at": "2023-05-24T07:52:33Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n\r\nIn Prater fork, with many missing blocks this print happened\r\n\r\n```\r\nbeacon_node_1  | Sep-02 12:37:18.011 []                 info: Synced - block: 1173186 0x99e0…6711 - head: 1173186 0x99e0…6711 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 2\r\nbeacon_node_1  | Sep-02 12:37:30.000 []                 info: Synced - block: 1173187 0x9cd8…e232 - head: 1173187 0x9cd8…e232 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 2\r\nbeacon_node_1  | Sep-02 12:37:42.001 []                 info: Synced - block: 1173188   … (empty) - head: 1173187 0x9cd8…e232 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 3\r\nbeacon_node_1  | Sep-02 12:37:54.012 []                 info: Synced - block: 1173189   … (empty) - head: 1173188 0xf3a3…c8a3 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 3\r\nbeacon_node_1  | Sep-02 12:38:06.001 []                 info: Synced - block: 1173190   … (empty) - head: 1173189 0x8790…cef6 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 4\r\nbeacon_node_1  | Sep-02 12:38:18.001 []                 info: Synced - block: 1173191   … (empty) - head: 1173189 0x8790…cef6 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 4\r\nbeacon_node_1  | Sep-02 12:38:30.000 []                 info: Synced - block: 1173192 0xb2a5…1163 - head: 1173192 0xb2a5…1163 - finalized: 1173120 0x24ad…eb79 (36660) - peers: 4\r\nbeacon_node_1  | Sep-02 12:38:42.001 []                 info: Synced - block: 1173193 0xdf9f…da7f - head: 1173193 0xdf9f…da7f - finalized: 1173120 0x24ad…eb79 (36660) - peers: 4\r\nbeacon_node_1  | Sep-02 12:38:54.002 []                 info: Synced - block: 1173194   … (empty) - head: 1173193 0xdf9f…da7f - finalized: 1173120 0x24ad…eb79 (36660) - peers: 4\r\n```\r\n\r\n**Expected behavior**\r\n\r\nReview (empty) tag logic\r\n\r\nCC: @q9f ",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/912430688",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3061#issuecomment-912430688",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
    "id": 912430688,
    "node_id": "IC_kwDOCD5_Gc42YpZg",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-03T10:21:06Z",
    "updated_at": "2021-09-03T10:21:06Z",
    "author_association": "MEMBER",
    "body": "That's because it assumes that blocks are arriving at clock slots. Reasons can be manifold: local clock out of sync, block processing internally takes longer than expected, block propagation in the network takes longer than expected.\r\n\r\nI know we just print out the `synced` logger message right on the clock slot (right on the second) where as it might be better to couple it with some internal events that eventually are more close to actual block processing (and only print \"empty\" if there is nothing happening for `1/2 * SECONDS_PER_SLOT`)... Let me know if you have any ideas or preferences and I can try to revise this.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/912430688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/912456619",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3061#issuecomment-912456619",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
    "id": 912456619,
    "node_id": "IC_kwDOCD5_Gc42Yvur",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-03T11:08:20Z",
    "updated_at": "2021-09-03T11:08:20Z",
    "author_association": "MEMBER",
    "body": "> it might be better to couple it with some internal events that eventually are more close to actual block processing (and only print \"empty\" if there is nothing happening for `1/2 * SECONDS_PER_SLOT`)... Let me know if you have any ideas or preferences and I can try to revise this.\r\n\r\nJust checked, we are already waiting for half a slot:\r\n\r\n```\r\n      // Log halfway through each slot\r\n      await sleep(timeToNextHalfSlot(config, chain), signal);\r\n```\r\n\r\nSo, basically this means this is not a logger issue but rather something else, why would it take more than 6 seconds to receive and process a block?\r\n\r\nUnless it's a clock issue?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/912456619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/912531538",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3061#issuecomment-912531538",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
    "id": 912531538,
    "node_id": "IC_kwDOCD5_Gc42ZCBS",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-03T13:15:34Z",
    "updated_at": "2021-09-03T13:15:34Z",
    "author_association": "MEMBER",
    "body": "That was taken in very bad network conditions so blocks were arriving at random times + had to trigger a backwards search of previous blocks before being able to insert them. Definitely not the norm, but wondering if (empty) communicates what's actually going on",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/912531538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/914890027",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3061#issuecomment-914890027",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
    "id": 914890027,
    "node_id": "IC_kwDOCD5_Gc42iB0r",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-08T03:52:26Z",
    "updated_at": "2021-09-08T03:52:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "right now we have a weird behavior that gossip block does not come on time, I think this is the root cause https://github.com/ChainSafe/lodestar/issues/3084#issuecomment-914876394",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/914890027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/918105964",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3061#issuecomment-918105964",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
    "id": 918105964,
    "node_id": "IC_kwDOCD5_Gc42uS9s",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-13T11:37:38Z",
    "updated_at": "2021-09-13T11:37:38Z",
    "author_association": "MEMBER",
    "body": "> Definitely not the norm, but wondering if (empty) communicates what's actually going on\r\n\r\nNo, it's an assumption that there should be a block available in less than half a slot time. I lack a deeper understanding of the internal block processing routes to propose an alternative here. But maybe it's just fine for the notifier for now.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/918105964/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1560623773",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3061#issuecomment-1560623773",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3061",
    "id": 1560623773,
    "node_id": "IC_kwDOCD5_Gc5dBTqd",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-24T07:52:33Z",
    "updated_at": "2023-05-24T07:52:33Z",
    "author_association": "MEMBER",
    "body": "No recent complains on the UX of this log",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1560623773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2322",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2322/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2322/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2322/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/2322",
  "id": 849006313,
  "node_id": "MDU6SXNzdWU4NDkwMDYzMTM=",
  "number": 2322,
  "title": "Failed performance tests",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-04-02T06:42:48Z",
  "updated_at": "2021-04-16T03:01:58Z",
  "closed_at": "2021-04-16T03:01:58Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\n\r\n```\r\n\r\n  Process Blocks Performance Test\r\nApr-02 11:52:57.235 []                 info: Loaded state slot=756416, numValidators=114038\r\nApr-02 11:53:10.376 []                 info: Loaded block slot=756417\r\nApr-02 11:53:10.392 []                 info: Process block 756417  - duration=15ms\r\n    ✓ should process block (678ms)\r\n    1) should process multiple validator exits in same block\r\n\r\n  Epoch Processing Performance Tests\r\nApr-02 11:53:20.596 []                 info: prepareEpochProcessState\r\n    ✓ prepareEpochProcessState\r\nApr-02 11:53:20.599 []                 info: processJustificationAndFinalization  - duration=1ms\r\n    ✓ processJustificationAndFinalization\r\nApr-02 11:53:20.876 []                 info: processRewardsAndPenalties  - duration=277ms\r\n    2) processRewardsAndPenalties\r\nApr-02 11:53:20.882 []                 info: processRegistryUpdates\r\n    ✓ processRegistryUpdates\r\nApr-02 11:53:20.890 []                 info: processSlashings  - duration=7ms\r\n    ✓ processSlashings\r\nApr-02 11:53:20.913 []                 info: processFinalUpdates  - duration=22ms\r\n    ✓ processFinalUpdates\r\n\r\n  getAttestationDeltas\r\nApr-02 12:14:24.839 []                 info: getAttestationDeltas in ms minTime=107, maxTime=188, average=125, maxTry=10000\r\n    3) should getAttestationDeltas\r\n\r\n  processRewardsAndPenalties\r\nApr-02 12:57:48.981 []                 info: processRewardsAndPenalties in ms minTime=219, maxTime=654, average=259, maxTry=10000\r\n    4) should processRewardsAndPenalties\r\n\r\n  Process Slots Performance Test\r\nApr-02 12:58:01.853 []                 info: Process 32 slots  - duration=582ms\r\n    5) process 1 empty epoch\r\nApr-02 12:58:14.624 []                 info: Process 64 slots  - duration=1183ms\r\n    ✓ process double empty epochs (1183ms)\r\nApr-02 12:58:29.437 []                 info: Process 128 slots  - duration=2468ms\r\n    6) process 4 empty epochs\r\n\r\n\r\n  7 passing (1h)\r\n  6 failing\r\n\r\n  1) Process Blocks Performance Test\r\n       should process multiple validator exits in same block:\r\n\r\n      AssertionError: expected 280 to be below 200\r\n      + expected - actual\r\n\r\n      -280\r\n      +200\r\n      \r\n      at Context.<anonymous> (test/perf/phase0/fast/block/block.test.ts:51:32)\r\n\r\n  2) Epoch Processing Performance Tests\r\n       processRewardsAndPenalties:\r\n\r\n      AssertionError: expected 277 to be below 250\r\n      + expected - actual\r\n\r\n      -277\r\n      +250\r\n      \r\n      at Context.<anonymous> (test/perf/phase0/fast/epoch/epoch.test.ts:60:34)\r\n      at processImmediate (internal/timers.js:461:21)\r\n\r\n  3) getAttestationDeltas\r\n       should getAttestationDeltas:\r\n\r\n      Minimal getAttestationDeltas is not less than 67ms\r\n      + expected - actual\r\n\r\n      -107\r\n      +64\r\n      \r\n      at Context.<anonymous> (test/perf/phase0/fast/epoch/getAttestationDeltas.test.ts:38:27)\r\n      at processImmediate (internal/timers.js:461:21)\r\n\r\n  4) processRewardsAndPenalties\r\n       should processRewardsAndPenalties:\r\n\r\n      Minimal processRewardsAndPenalties is not less than 170ms\r\n      + expected - actual\r\n\r\n      -219\r\n      +170\r\n      \r\n      at Context.<anonymous> (test/perf/phase0/fast/epoch/processRewardsAndPenalties.test.ts:38:27)\r\n      at processImmediate (internal/timers.js:461:21)\r\n\r\n  5) Process Slots Performance Test\r\n       process 1 empty epoch:\r\n\r\n      AssertionError: expected 585 to be below 570\r\n      + expected - actual\r\n\r\n      -585\r\n      +570\r\n      \r\n      at processEpochTest (test/perf/phase0/fast/slot/slots.test.ts:18:32)\r\n      at Context.<anonymous> (test/perf/phase0/fast/slot/slots.test.ts:38:7)\r\n\r\n  6) Process Slots Performance Test\r\n       process 4 empty epochs:\r\n\r\n      AssertionError: expected 2472 to be below 2000\r\n      + expected - actual\r\n\r\n      -2472\r\n      +2000\r\n      \r\n      at processEpochTest (test/perf/phase0/fast/slot/slots.test.ts:18:32)\r\n      at Context.<anonymous> (test/perf/phase0/fast/slot/slots.test.ts:38:7)\r\n\r\n\r\n\r\nerror Command failed with exit code 6.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n```\r\n\r\n**Expected behavior**\r\n\r\nAll performance tests should pass, or at least be close to the expected duration.\r\n\r\n**Steps to Reproduce**\r\n\r\n+ yarn test:perf\r\n",
  "closed_by": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2322/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/2322/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

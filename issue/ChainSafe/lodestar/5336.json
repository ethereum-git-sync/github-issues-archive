{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5336",
  "id": 1653429600,
  "node_id": "I_kwDOCD5_Gc5ijVVg",
  "number": 5336,
  "title": "Expose validator monitor via logs",
  "user": {
    "login": "nflaig",
    "id": 38436224,
    "node_id": "MDQ6VXNlcjM4NDM2MjI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nflaig",
    "html_url": "https://github.com/nflaig",
    "followers_url": "https://api.github.com/users/nflaig/followers",
    "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
    "organizations_url": "https://api.github.com/users/nflaig/orgs",
    "repos_url": "https://api.github.com/users/nflaig/repos",
    "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nflaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1478328632,
      "node_id": "MDU6TGFiZWwxNDc4MzI4NjMy",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/help-wanted",
      "name": "help-wanted",
      "color": "016c59",
      "default": false,
      "description": "The author indicates that additional help is wanted."
    },
    {
      "id": 4754137758,
      "node_id": "LA_kwDOCD5_Gc8AAAABG15ing",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-feature-request",
      "name": "meta-feature-request",
      "color": "B5CF5F",
      "default": false,
      "description": "Issues to track feature requests."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-04-04T08:29:33Z",
  "updated_at": "2023-07-13T13:44:33Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Description**\r\n\r\nCurrently, we just expose validator monitor via metrics but it would be desired to also expose this information via logs.\r\nPotentially opt-in behind a feature flag such as `--validator-monitor-log`.\r\n\r\n**Example**\r\n\r\nLighthouse validator monitor logs example (when adding `--validator-monitor-auto` flag):\r\n\r\n`INFO Previous epoch attestation(s) success   validators: [\"xxx\"], epoch: 192112, service: val_mon`\r\n\r\n`INFO Previous epoch attestation(s) failed to match head, validators: [\"xxx\"], epoch: 192096, service: val_mon`\r\n(same for source, target and suboptimal inclusion distance) or if missing entirely. Happens at the start of each epoch.\r\n\r\n`INFO Unaggregated attestation                validator: xxxx, src: api, slot: 6147625, epoch: 192113, delay_ms: 39, index: 42, head: 0x9eecb3839976ccf00c8635ed77302077ae858e39cba5cc8d8ba48aefd35baba3, service: val_mon`\r\nWhen attestation is submitted and then afterwards:\r\n\r\n`INFO Attestation included in aggregate       validator: xxxx, src: gossip, slot: 6147625, epoch: 192113, delay_ms: 207, index: 42, head: 0x9eecb3839976ccf00c8635ed77302077ae858e39cba5cc8d8ba48aefd35baba3, service: val_mon`\r\n\r\n` INFO Attestation included in block           validator: xxxx, slot: 6147625, epoch: 192113, inclusion_lag: 0 slot(s), index: 42, head: 0x9eecb3839976ccf00c8635ed77302077ae858e39cba5cc8d8ba48aefd35baba3, service: val_mon`\r\n\r\n**Related**\r\n\r\n- https://discord.com/channels/593655374469660673/593655641445367808/1092417950092378122\r\n- https://discord.com/channels/593655374469660673/593655641445367808/1092724003879272458\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1559568173",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5336#issuecomment-1559568173",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336",
    "id": 1559568173,
    "node_id": "IC_kwDOCD5_Gc5c9R8t",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-23T14:42:50Z",
    "updated_at": "2023-05-23T15:03:24Z",
    "author_association": "MEMBER",
    "body": "Based on [discussion in discord](https://discord.com/channels/593655374469660673/1105347927548907600/1110574619292872765), the validator monitor logs should be disabled if node is still syncing (to be considered) or if no validators are attached.\r\n\r\nIt also needs to be further discussed if we want validator monitor logs by default or opt-in via feature flag.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1559568173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1559686200",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5336#issuecomment-1559686200",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5336",
    "id": 1559686200,
    "node_id": "IC_kwDOCD5_Gc5c9uw4",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-23T15:37:26Z",
    "updated_at": "2023-05-23T15:37:26Z",
    "author_association": "MEMBER",
    "body": "Lighthouse documentation on [validator monitoring](https://lighthouse-book.sigmaprime.io/validator-monitoring.html) can serve as a guide on how we want to implement this. Their reasoning and implementation seems to be really well defined and thought through.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1559686200/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

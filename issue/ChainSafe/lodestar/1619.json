{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1619",
  "id": 713248857,
  "node_id": "MDU6SXNzdWU3MTMyNDg4NTc=",
  "number": 1619,
  "title": "Regular Sync: not enough connected peers",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2020-10-01T23:30:55Z",
  "updated_at": "2020-10-19T15:31:28Z",
  "closed_at": "2020-10-19T15:31:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nThis happens with my libp2p branch. I notice during initial sync, I can see ~20 connected peers but at regular sync, it reduced gradually (mostly with 129 goodbye code) and in worse case, we have no sync peers.\r\n\r\n**Expected behavior**\r\nShould maintain ~20 connected peers like in initial sync",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/704090854",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-704090854",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 704090854,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDA5MDg1NA==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-06T07:38:42Z",
    "updated_at": "2020-10-06T07:38:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "close in favor of #1637 ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/704090854/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/705398489",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-705398489",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 705398489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTM5ODQ4OQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-08T07:54:44Z",
    "updated_at": "2020-10-08T07:54:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "This still happens even after the `removeIncluded` fix in my local branch. The profiler shows that we don't have any long running functions (2.5s for runStateTransition), however number of peers still reduced gradually from the regular sync time (I was able to sync for 1h and connected peers reduced too).",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/705398489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706058256",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706058256",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706058256,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjA1ODI1Ng==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-09T08:53:19Z",
    "updated_at": "2020-10-09T08:53:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "So I below is the reasons why our peers are disconnected:\r\n+ 129: too many peers. Note that lighthouse sorts peers by score, it means our peers don't have a good score\r\n+ 250: bad score\r\n+ 251: banned. There is a discussion to follow up here https://discordapp.com/channels/605577013327167508/618981555985186827/763040947164282921\r\n\r\nSo we have to improve our performance/score first. Currently from regular sync, it takes 1.5s - 2s to process a block/slot and even 4s-5s to process an epoch in my environment, this is due to the performance of bls as it takes only 15ms-20ms in the case of initial sync.\r\n\r\nWe have to stay with this for a while (~3 sync peers in my case) until we optimize our bls.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706058256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706165935",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706165935",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706165935,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjE2NTkzNQ==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-09T12:58:58Z",
    "updated_at": "2020-10-09T12:58:58Z",
    "author_association": "MEMBER",
    "body": "we are subscribe to gossip during our regular sync? Maybe we have bad gossip score since we are basically censoring messages?\r\nMight be also because of our old gossip?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706165935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706676480",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706676480",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706676480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjY3NjQ4MA==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-11T09:27:51Z",
    "updated_at": "2020-10-11T09:27:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Today it happened with initial sync too and I had 0 peers.So maybe it's not related to gossip.\r\n\r\nI noticed that discv5 still sent \"peer\" event to libp2p frequently so there's something inside libp2p to debug.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706676480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706913832",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706913832",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706913832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjkxMzgzMg==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-12T06:56:21Z",
    "updated_at": "2020-10-12T06:56:21Z",
    "author_association": "MEMBER",
    "body": "hmm you could try deleting peerstore, and see if you will get some peers",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706913832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706915083",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706915083",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706915083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjkxNTA4Mw==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-12T06:58:28Z",
    "updated_at": "2020-10-12T06:58:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "yeah that would help before we start the node but during the sync we don't want to have only 0-5 peers",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706915083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706967062",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706967062",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706967062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjk2NzA2Mg==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-12T08:28:44Z",
    "updated_at": "2020-10-12T08:28:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "although discv5 sends `peers` event to libp2p regularly, lodestar doesn't receive `peer:connect` event due to https://github.com/libp2p/js-libp2p/blob/master/src/upgrader.js#L179\r\nThe errors happen regularly, specifically:\r\n+ ERR_ENCRYPTION_FAILED. Messages maybe \"Error occurred during XX handshake: Error occurred while verifying signed payload: Peer ID doesn't match libp2p public key.\" or \"Error occurred during XX handshake: read ECONNRESET\"\r\n+ ERR_MUXER_UNAVAILABLE. Messages maybe \"stream ended before 1 bytes became available\" or \"read ECONNRESET\" or \"the operation was aborted\"\r\n\r\nthe error \"Error occurred during XX handshake: Error occurred while verifying signed payload: Peer ID doesn't match libp2p public key.\" happens the most, it comes from libp2p-noise.\r\n\r\n@mpetrunic  need your ideas",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706967062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706986865",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-706986865",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 706986865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjk4Njg2NQ==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-12T09:04:02Z",
    "updated_at": "2020-10-12T09:04:02Z",
    "author_association": "MEMBER",
    "body": "is you isp blocking your traffic? lol\r\nyou have a lot of disconnection.\r\n\r\n> Error occurred during XX handshake: Error occurred while verifying signed payload: Peer ID doesn't match libp2p public key.\r\n\r\nCould be because of incomplete public key protobuf, not sure.\r\nhttps://github.com/NodeFactoryIo/js-libp2p-noise/blob/f9d56d8c87635ec03b6d7aa50e594b57923f41df/src/utils.ts#L72",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/706986865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/708896849",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-708896849",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 708896849,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODg5Njg0OQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-15T04:56:14Z",
    "updated_at": "2020-10-15T04:56:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think this is the root cause: right now when we process a range of blocks without allowing anything in the middle:\r\n```\r\n2020-10-15 11:09:20 [SYNC]             ^[[32minfo^[[39m: Imported blocks for slots: 499649,499650,499651,499653,499654,499655,499659,499660,499661,499664,499665,499666,499668,499669,499671,499673,499674,499676,499678,499679,499680,499681,499682,499684,499685,499688,499690,499691,499693,499695,499696,499701,499703,499705,499706,499708,499709,499710\r\n2020-10-15 11:09:23 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499649, root=0xfecc488ced9363529cefbb987d2f350161b01f0f90f914aab41980e4e12fb6a2\r\n2020-10-15 11:09:25 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499650, root=0xda714c761377c88a49a0dedbe68f022a9c29f294c0b5ca26c2cbb8a6d0dbbb20\r\n2020-10-15 11:09:28 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499651, root=0x01c27d976796bd5d32ad82ba644dafbc2a75aab2454ac524841129b62e144653\r\n2020-10-15 11:09:30 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499653, root=0x5a0704b0f6f5aba42daf28c0cb031091f8a3bb9b70e5438379eaf3d7d0c549c9\r\n2020-10-15 11:09:32 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499654, root=0x9cad9e48a33c157eaf9cea230da269eea23c5f6e89cbec0f4162c6d625b8ddb3\r\n...\r\n2020-10-15 11:10:44 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499709, root=0x1fc4da0e195ecae29bc6c15da83d8e7c92a61220fc009722d708a2c06091906c\r\n2020-10-15 11:10:47 [CHAIN]           ^[[34mdebug^[[39m: Block processed slot=499710, root=0xd87ede970eff574ace1d86907e2d4d1de444720b32e9331480b899fcb198723b\r\n2020-10-15 11:10:47 [SYNC]             ^[[32minfo^[[39m: Regular Sync: Requesting blocks from slot 499711 to slot 499774\r\n2020-10-15 11:10:47 [SYNC]             ^[[32minfo^[[39m: Regular Sync: Synced up to slot 499710  currentSlot=515753, gossipParentBlockRoot=undefined\r\n```\r\nthe log above shows that there is nothing happened in the middle, and it took 1m27s to process a block range, we should do some tricks to allow other events to be executed in the nodejs event loop.\r\nIn initial sync, we do everything so fast so we didn't see the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/708896849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/708943008",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-708943008",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 708943008,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODk0MzAwOA==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-15T06:57:26Z",
    "updated_at": "2020-10-15T06:57:26Z",
    "author_association": "MEMBER",
    "body": "Dunno, maybe try putting `await sleep(1)` after block is processed? :smile: ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/708943008/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/708970078",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1619#issuecomment-708970078",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1619",
    "id": 708970078,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODk3MDA3OA==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-15T07:52:57Z",
    "updated_at": "2020-10-15T07:52:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "I did `await sleep(0);`. It works just fine :D",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/708970078/reactions",
      "total_count": 3,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 2,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

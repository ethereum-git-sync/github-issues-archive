{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5496",
  "id": 1711108083,
  "node_id": "I_kwDOCD5_Gc5l_W_z",
  "number": 5496,
  "title": "Nimbus VC to Lodestar v1.8.0 BN attestation errors",
  "user": {
    "login": "philknows",
    "id": 58080811,
    "node_id": "MDQ6VXNlcjU4MDgwODEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/philknows",
    "html_url": "https://github.com/philknows",
    "followers_url": "https://api.github.com/users/philknows/followers",
    "following_url": "https://api.github.com/users/philknows/following{/other_user}",
    "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
    "organizations_url": "https://api.github.com/users/philknows/orgs",
    "repos_url": "https://api.github.com/users/philknows/repos",
    "events_url": "https://api.github.com/users/philknows/events{/privacy}",
    "received_events_url": "https://api.github.com/users/philknows/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4116812272,
      "node_id": "LA_kwDOCD5_Gc71YZHw",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-interop",
      "name": "scope-interop",
      "color": "980043",
      "default": false,
      "description": "Issues that fix interop issues between Lodestar and CL, EL or tooling."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-05-16T02:26:19Z",
  "updated_at": "2023-06-26T03:44:02Z",
  "closed_at": "2023-06-26T03:44:02Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\n\r\nAs mentioned by RockLogic in Discord: https://discord.com/channels/593655374469660673/1077978309775863900/1107299213634711552\r\n\r\nconnecting a Nimbus VC to a Lodestar BN creates attestation issues.\r\n\r\n```ts\r\n#150:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:23)\r\n#149:     at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n#148:     at Object.getAggregatedAttestation (file:///usr/app/packages/beacon-node/src/api/impl/validator/index.ts:509:37)\r\n#147:     at AttestationPool.getAggregate (file:///usr/app/packages/beacon-node/src/chain/opPools/attestationPool.ts:136:13)\r\n#146: Error: No attestation for slot=6437249 dataRoot=0x02449b5da7b01ab911dfcfb8deffe08348be29f12f170763897de5c9d23b760c\r\n#145: May-14 13:30:27.504[rest]            \u001B[31merror\u001B[39m: Req req-2nvf getAggregatedAttestation error  No attestation for slot=6437249 dataRoot=0x02449b5da7b01ab911dfcfb8deffe08348be29f12f170763897de5c9d23b760c\r\n#144:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:23)\r\n#143:     at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n#142:     at Object.getAggregatedAttestation (file:///usr/app/packages/beacon-node/src/api/impl/validator/index.ts:509:37)\r\n#141:     at AttestationPool.getAggregate (file:///usr/app/packages/beacon-node/src/chain/opPools/attestationPool.ts:136:13)\r\n#140: Error: No attestation for slot=6437249 dataRoot=0x795ed69cdc12896e4c20047445d7a76239fe8612b14f5a7179702edd619c23bc\r\n#139: May-14 13:30:27.503[rest]            \u001B[31merror\u001B[39m: Req req-2nve getAggregatedAttestation error  No attestation for slot=6437249 dataRoot=0x795ed69cdc12896e4c20047445d7a76239fe8612b14f5a7179702edd619c23bc\r\n#138:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#137:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#136:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#135:     at Array.map (<anonymous>)\r\n#134:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#133:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#132:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#131:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#130:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#129:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#128: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#127: May-14 13:30:26.359[rest]            \u001B[31merror\u001B[39m: Req req-2nva submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xb6cfa4b0130a3c99be1129938a250e9ed050f78b09c901ac67bb9bd61f3a4fb6\r\n#126:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#125:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#124:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#123:     at Array.map (<anonymous>)\r\n#122:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#121:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#120:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#119:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#118:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#117:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#116: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#115: May-14 13:30:26.359[rest]            \u001B[31merror\u001B[39m: Req req-2nv9 submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xb6cfa4b0130a3c99be1129938a250e9ed050f78b09c901ac67bb9bd61f3a4fb6\r\n#114:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#113:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#112:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#111:     at Array.map (<anonymous>)\r\n#110:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#109:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#108:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#107:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#106:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#105:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#104: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#103: May-14 13:30:26.358[api]             \u001B[31merror\u001B[39m: Error on submitPoolAttestations [0] slot=6437249, index=41 code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xb6cfa4b0130a3c99be1129938a250e9ed050f78b09c901ac67bb9bd61f3a4fb6\r\n#102:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#101:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#100:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#99:     at Array.map (<anonymous>)\r\n#98:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#97:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#96:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#95:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#94:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#93:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#92: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#91: May-14 13:30:26.357[api]             \u001B[31merror\u001B[39m: Error on submitPoolAttestations [0] slot=6437249, index=41 code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xb6cfa4b0130a3c99be1129938a250e9ed050f78b09c901ac67bb9bd61f3a4fb6\r\n#90: May-14 13:30:18.816[]                 \u001B[32minfo\u001B[39m: Synced - slot: 6437249 - head: (slot -19) 0xf27e…2c4a - exec-block: valid(17258382 0x5cd8…) - finalized: 0xe6e2…7140:201161 - peers: 41\r\n#89:     at processTicksAndRejections (node:internal/process/task_queues:82:21)\r\n#88:     at emitErrorCloseNT (node:internal/streams/destroy:116:3)\r\n#87:     at emitErrorNT (node:internal/streams/destroy:151:8)\r\n#86:     at Socket.emit (node:events:513:28)\r\n#85:     at Socket.socketErrorListener (node:_http_client:502:9)\r\n#84:     at ClientRequest.emit (node:events:513:28)\r\n#83:     at ClientRequest.<anonymous> (/usr/app/node_modules/node-fetch/lib/index.js:1461:11)\r\n#82: FetchError: request to http://stereum-42014ab4-219d-1630-a12a-cd0c4276b443:18550/eth/v1/builder/validators failed, reason: write EPIPE\r\n#81: May-14 13:30:18.418[rest]            \u001B[31merror\u001B[39m: Req req-2nte registerValidator error  request to http://stereum-42014ab4-219d-1630-a12a-cd0c4276b443:18550/eth/v1/builder/validators failed, reason: write EPIPE\r\n#80:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:23)\r\n#79:     at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n#78:     at Object.getAggregatedAttestation (file:///usr/app/packages/beacon-node/src/api/impl/validator/index.ts:509:37)\r\n#77:     at AttestationPool.getAggregate (file:///usr/app/packages/beacon-node/src/chain/opPools/attestationPool.ts:136:13)\r\n#76: Error: No attestation for slot=6437248 dataRoot=0x5270d03d0d5d95f021821893fc997a6bce9d2d98ae605ea6d348f1ec100766a3\r\n#75: May-14 13:30:13.706[rest]            \u001B[31merror\u001B[39m: Req req-2nui getAggregatedAttestation error  No attestation for slot=6437248 dataRoot=0x5270d03d0d5d95f021821893fc997a6bce9d2d98ae605ea6d348f1ec100766a3\r\n#74:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:23)\r\n#73:     at processTicksAndRejections (node:internal/process/task_queues:95:5)\r\n#72:     at Object.getAggregatedAttestation (file:///usr/app/packages/beacon-node/src/api/impl/validator/index.ts:509:37)\r\n#71:     at AttestationPool.getAggregate (file:///usr/app/packages/beacon-node/src/chain/opPools/attestationPool.ts:136:13)\r\n#70: Error: No attestation for slot=6437248 dataRoot=0xf38866ffae4d65dc801cb97de9910055639bd059d29e80a48736e8e74d9d8e5e\r\n#69: May-14 13:30:13.706[rest]            \u001B[31merror\u001B[39m: Req req-2nuh getAggregatedAttestation error  No attestation for slot=6437248 dataRoot=0xf38866ffae4d65dc801cb97de9910055639bd059d29e80a48736e8e74d9d8e5e\r\n#68:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#67:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#66:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#65:     at Array.map (<anonymous>)\r\n#64:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#63:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#62:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#61:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#60:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#59:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#58: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#57: May-14 13:30:12.955[rest]            \u001B[31merror\u001B[39m: Req req-2nuc submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xa5a40ac90a9ca56e1b49523437c3c00ddb0863d6020efb3567f6ccc682851332\r\n#56:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#55:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#54:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#53:     at Array.map (<anonymous>)\r\n#52:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#51:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#50:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#49:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#48:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#47:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#46: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#45: May-14 13:30:12.955[rest]            \u001B[31merror\u001B[39m: Req req-2nub submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xa5a40ac90a9ca56e1b49523437c3c00ddb0863d6020efb3567f6ccc682851332\r\n#44:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#43:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#42:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#41:     at Array.map (<anonymous>)\r\n#40:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#39:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#38:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#37:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#36:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#35:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#34: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#33: May-14 13:30:12.955[rest]            \u001B[31merror\u001B[39m: Req req-2nua submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xa5a40ac90a9ca56e1b49523437c3c00ddb0863d6020efb3567f6ccc682851332\r\n#32:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#31:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#30:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#29:     at Array.map (<anonymous>)\r\n#28:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#27:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#26:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#25:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#24:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#23:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#22: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#21: May-14 13:30:12.955[rest]            \u001B[31merror\u001B[39m: Req req-2nu9 submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xa5a40ac90a9ca56e1b49523437c3c00ddb0863d6020efb3567f6ccc682851332\r\n#20:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#19:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#18:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#17:     at Array.map (<anonymous>)\r\n#16:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#15:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#14:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#13:     at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n#12:     at verifyHeadBlockAndTargetRoot (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:343:21)\r\n#11:     at verifyHeadBlockIsKnown (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:376:11)\r\n#10: Error: ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT\r\n#9: May-14 13:30:12.955[rest]            \u001B[31merror\u001B[39m: Req req-2nu8 submitPoolAttestations error  code=ATTESTATION_ERROR_UNKNOWN_OR_PREFINALIZED_BEACON_BLOCK_ROOT, root=0xa5a40ac90a9ca56e1b49523437c3c00ddb0863d6020efb3567f6ccc682851332\r\n#8:     at preHandlerCallback (/usr/app/node_modules/fastify/lib/handleRequest.js:128:37)\r\n#7:     at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:45:41)\r\n#6:     at Object.submitPoolAttestations (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:53:22)\r\n#5:     at Array.map (<anonymous>)\r\n#4:     at file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:61:72\r\n#3:     at validateGossipFnRetryUnknownRoot (file:///usr/app/packages/beacon-node/src/network/processor/gossipHandlers.ts:403:20)\r\n#2:     at validateFn (file:///usr/app/packages/beacon-node/src/api/impl/beacon/pool/index.ts:56:38)\r\n#1: at validateGossipAttestation (file:///usr/app/packages/beacon-node/src/chain/validation/attestation.ts:143:26)\r\n```\r\n\r\n**Expected behavior**\r\n\r\nShould be able to properly interop with the Nimbus VC.\r\n",
  "closed_by": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1560411182",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5496#issuecomment-1560411182",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496",
    "id": 1560411182,
    "node_id": "IC_kwDOCD5_Gc5dAfwu",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-24T03:33:23Z",
    "updated_at": "2023-06-26T03:43:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Lodestar v1.8 already handle unknown root attestation by waiting for the block to come. However it only waits for max 1 slot, if block comes after that it still throw the error. Two things could fix this issue:\r\n- [x] network thread which help block to be processed faster consistently, to be released in v1.9\r\n- [x] trigger block search when we receive unknown root attestation, PR in progress: https://github.com/ChainSafe/lodestar/pull/5485",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1560411182/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1606546086",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5496#issuecomment-1606546086",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5496",
    "id": 1606546086,
    "node_id": "IC_kwDOCD5_Gc5fwfKm",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-26T03:44:02Z",
    "updated_at": "2023-06-26T03:44:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "this should be fixed with v1.9.0",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1606546086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4245",
  "id": 1295682579,
  "node_id": "I_kwDOCD5_Gc5NOowT",
  "number": 4245,
  "title": "Light client missing finalized checkpoint snapshot data on kiln testnet",
  "user": {
    "login": "hujw77",
    "id": 6929585,
    "node_id": "MDQ6VXNlcjY5Mjk1ODU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6929585?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hujw77",
    "html_url": "https://github.com/hujw77",
    "followers_url": "https://api.github.com/users/hujw77/followers",
    "following_url": "https://api.github.com/users/hujw77/following{/other_user}",
    "gists_url": "https://api.github.com/users/hujw77/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hujw77/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hujw77/subscriptions",
    "organizations_url": "https://api.github.com/users/hujw77/orgs",
    "repos_url": "https://api.github.com/users/hujw77/repos",
    "events_url": "https://api.github.com/users/hujw77/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hujw77/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090447,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ3",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-high",
      "name": "prio-high",
      "color": "fd9579",
      "default": false,
      "description": "Resolve issues as soon as possible."
    },
    {
      "id": 4115551418,
      "node_id": "LA_kwDOCD5_Gc71TlS6",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-light-clients",
      "name": "scope-light-clients",
      "color": "980043",
      "default": false,
      "description": "All issues regarding light client development."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-07-06T11:19:26Z",
  "updated_at": "2023-02-14T05:15:57Z",
  "closed_at": "2023-02-14T05:15:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\n```\r\ncurl -X GET https://lodestar-kiln.chainsafe.io/eth/v1/beacon/headers/651583 | jq .data.root\r\n0x1d7c3b1e5a07e1d68fee047759d2ce5a3d6a618fe467a2fbada3f17dc7e34197\r\n\r\ncurl -X GET https://lodestar-kiln.chainsafe.io/eth/v1/beacon/headers/651585 | jq .data.root\r\n0x2ed5461e48e1edb4e0bae810017d20d888bf11e5d5b6d60c48ee48050181b3c0\r\n\r\nslot 651583 root: 0x1d7c3b1e5a07e1d68fee047759d2ce5a3d6a618fe467a2fbada3f17dc7e34197\r\nslot 651584 missing\r\nslot 651585 root: 0x2ed5461e48e1edb4e0bae810017d20d888bf11e5d5b6d60c48ee48050181b3c0\r\n```\r\nOn kiln testnet, beacause of the slot 651584 is missing, the checkpoint of epoch 20362 is slot 651583, but I get the snapshot in slot 651583  of finalized epoch 20362 using light client api :\r\n```\r\ncurl -X GET https://lodestar-kiln.chainsafe.io/eth/v1/lightclient/snapshot/0x1d7c3b1e5a07e1d68fee047759d2ce5a3d6a618fe467a2fbada3f17dc7e34197 | jq\r\n\r\n{\r\n  \"statusCode\": 500,\r\n  \"error\": \"Internal Server Error\",\r\n  \"message\": \"syncCommitteeWitness not available 0x1d7c3b1e5a07e1d68fee047759d2ce5a3d6a618fe467a2fbada3f17dc7e34197\"\r\n}\r\n```\r\nAnd I get the snapshot at slot 651585, it returns the snapshot.\r\n```\r\ncurl -X GET https://lodestar-kiln.chainsafe.io/eth/v1/lightclient/snapshot/0x2ed5461e48e1edb4e0bae810017d20d888bf11e5d5b6d60c48ee48050181b3c0 | jq\r\n\r\n{\r\n  \"data\": ...\r\n}\r\n```\r\n\r\n<!--A clear and concise description of what the bug is and steps to reproduce it.-->\r\n\r\n**Expected behavior**\r\nWhy did the light client store the snapshot at slot 651585 instead of the slot 651583 at epoch 20362 ?\r\n\r\n**Desktop (please complete the following information):**\r\n\r\n- OS: <!--[e.g. ubuntu, OSX High Siera]--> ubuntu\r\n- Version: <!--[e.g. 22]-->   v0.37.0\r\n- Branch: <!--[unstable]--> \r\n- Commit hash: <!--[e8232]-->\r\n",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1183275240",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4245#issuecomment-1183275240",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245",
    "id": 1183275240,
    "node_id": "IC_kwDOCD5_Gc5Gh1jo",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T14:09:35Z",
    "updated_at": "2022-07-13T14:09:35Z",
    "author_association": "MEMBER",
    "body": "Thanks for reporting @hujw77 will look into it asap",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1183275240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1185580681",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4245#issuecomment-1185580681",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245",
    "id": 1185580681,
    "node_id": "IC_kwDOCD5_Gc5GqoaJ",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-15T14:05:35Z",
    "updated_at": "2022-07-15T14:05:35Z",
    "author_association": "MEMBER",
    "body": "Hey @hujw77 , we will look into this for you. However, we will be deprecating this endpoint and recommend moving to Ropsten for your needs. ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1185580681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1241878371",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4245#issuecomment-1241878371",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245",
    "id": 1241878371,
    "node_id": "IC_kwDOCD5_Gc5KBY9j",
    "user": {
      "login": "dadepo",
      "id": 272535,
      "node_id": "MDQ6VXNlcjI3MjUzNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/272535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dadepo",
      "html_url": "https://github.com/dadepo",
      "followers_url": "https://api.github.com/users/dadepo/followers",
      "following_url": "https://api.github.com/users/dadepo/following{/other_user}",
      "gists_url": "https://api.github.com/users/dadepo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dadepo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dadepo/subscriptions",
      "organizations_url": "https://api.github.com/users/dadepo/orgs",
      "repos_url": "https://api.github.com/users/dadepo/repos",
      "events_url": "https://api.github.com/users/dadepo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dadepo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T11:46:45Z",
    "updated_at": "2022-09-09T11:46:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was able to confirm this behaviour on Goerli for slot 119920, which has the block for its checkpoint slot 3837440 missing. And requesting the light client bootstrap object using object hash of 3837440 and 3837439 fails but 3837441 works",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1241878371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1429134663",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4245#issuecomment-1429134663",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4245",
    "id": 1429134663,
    "node_id": "IC_kwDOCD5_Gc5VLt1H",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-14T05:15:57Z",
    "updated_at": "2023-02-14T05:15:57Z",
    "author_association": "MEMBER",
    "body": "Closing since it's related to an old incident. Re-open with details of newer incident if it happens again",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1429134663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

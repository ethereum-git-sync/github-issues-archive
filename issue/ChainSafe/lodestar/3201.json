{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/3201",
  "id": 1000012037,
  "node_id": "I_kwDOCD5_Gc47mvkF",
  "number": 3201,
  "title": "getAttesterDuties is being called multiple times in an epoch by 1 validator process",
  "user": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2021-09-18T11:34:02Z",
  "updated_at": "2021-09-24T17:15:26Z",
  "closed_at": "2021-09-23T18:22:15Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\n\r\n**Describe the bug**\r\nIn each epoch the validator calls for getAttesterDuties, which are supposed to be called once an epoch unless the reorg happens, but lodestar is consistently making 3-4 requests doesn't matter if the 1, 16 or 975 validators are attached (but through ONE VALIDATOR PROCESS) , and it seems to be doing calculation in all of the calls (may be in parallel)\r\n\r\n<!--A clear and concise description of what the bug is and steps to reproduce it.-->\r\n\r\n**Expected behavior**\r\nShould be called just once (per validator)  or wait till previous request is completed.\r\n\r\n\r\n<!--A clear and concise description of what you expected to happen.-->\r\n\r\n**Steps to Reproduce**\r\nRun beacon node on prater, attached validator(s) and observe the metrics dashboard.\r\n<!--Steps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n-->\r\n\r\n**Screenshots**\r\nfor 1 validator:\r\n![image](https://user-images.githubusercontent.com/76567250/133887253-2fa8f4ab-9039-4427-8df9-849e77025d20.png)\r\nfor 16 validators:\r\n![image](https://user-images.githubusercontent.com/76567250/133887286-72b7684f-05be-4635-856e-a75ff15228ef.png)\r\n for 975 validators:\r\n![image](https://user-images.githubusercontent.com/76567250/133887318-7f4cf666-6d8e-4002-9fe6-767127760685.png)\r\n\r\n<!--If applicable, add screenshots to help explain your problem.-->\r\n\r\n**Desktop (please complete the following information):**\r\n\r\n- OS: <!--[e.g. ubuntu, OSX High Siera]-->\r\n- Version: <!--[e.g. 22]-->\r\n- Branch: <!--[Master]-->\r\n- Commit hash: <!--[e8232]-->\r\n\r\nv0.30.0/master/+23/6cf7c2c3 (git)",
  "closed_by": {
    "login": "g11tech",
    "id": 76567250,
    "node_id": "MDQ6VXNlcjc2NTY3MjUw",
    "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/g11tech",
    "html_url": "https://github.com/g11tech",
    "followers_url": "https://api.github.com/users/g11tech/followers",
    "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
    "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
    "organizations_url": "https://api.github.com/users/g11tech/orgs",
    "repos_url": "https://api.github.com/users/g11tech/repos",
    "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
    "received_events_url": "https://api.github.com/users/g11tech/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922268680",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-922268680",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 922268680,
    "node_id": "IC_kwDOCD5_Gc42-LQI",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-18T12:22:10Z",
    "updated_at": "2021-09-18T12:22:10Z",
    "author_association": "MEMBER",
    "body": "@g11tech Note that this chart can be very misleading. A single dot does not mean 1 call. A single dot means that the average value in prometheus db for that metric was X, so it could mean 100, 1000 requests that average to that value. Similarly 3 dots may just represent a single call but because of interval polling between grafana and prometheus it renders as three reads for the same scraped value",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922268680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922269067",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-922269067",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 922269067,
    "node_id": "IC_kwDOCD5_Gc42-LWL",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-18T12:25:08Z",
    "updated_at": "2021-09-18T12:25:27Z",
    "author_association": "MEMBER",
    "body": "@g11tech You can review the validator attester duties flow here https://github.com/ChainSafe/lodestar/blob/6cf7c2c3f3df6012bd4ce773ab3b5310c347e884/packages/validator/src/services/attestationDuties.ts#L53\r\n\r\nduties are requested twice per epoch\r\n- 1 req for current epoch\r\n- 1 req for next epoch\r\n- (maybe) again if new indices are discovered during calls",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922269067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922274255",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-922274255",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 922274255,
    "node_id": "IC_kwDOCD5_Gc42-MnP",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-18T13:08:17Z",
    "updated_at": "2021-09-18T19:03:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "fair point, let me look at the counter of the metric:\r\nin 15 second interval (the grafana interval for fetching data) it has gone up by 8-10 (in multiple times/epochs).\r\nas per my understanding of histogram metric, counter for a metric goes each time one observes ( +1 for each observe/startTimer command).\r\n\r\n![image](https://user-images.githubusercontent.com/76567250/133889763-f3c6fdfb-2c39-49ef-8ec5-5d7004787089.png)\r\n\r\nso going up by 2 would make sense (as in the last observation in the above graph)\r\n\r\nlet me figure out the new indices scenario.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922274255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922469637",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-922469637",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 922469637,
    "node_id": "IC_kwDOCD5_Gc42-8UF",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-19T12:56:38Z",
    "updated_at": "2021-09-19T12:56:38Z",
    "author_association": "MEMBER",
    "body": "> fair point, let me look at the counter of the metric:\r\n> in 15 second interval (the grafana interval for fetching data) it has gone up by 8-10 (in multiple times/epochs).\r\n> as per my understanding of histogram metric, counter for a metric goes each time one observes ( +1 for each observe/startTimer command).\r\n> \r\n> ![image](https://user-images.githubusercontent.com/76567250/133889763-f3c6fdfb-2c39-49ef-8ec5-5d7004787089.png)\r\n> \r\n> so going up by 2 would make sense (as in the last observation in the above graph)\r\n> \r\n> let me figure out the new indices scenario.\r\n\r\nThis chart is much better, clearly the validator is calling getAttesterDuties ~8 times during the first 3 epochs or your screen capture",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922469637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922483938",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-922483938",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 922483938,
    "node_id": "IC_kwDOCD5_Gc42-_zi",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-19T14:36:46Z",
    "updated_at": "2021-09-19T14:36:46Z",
    "author_association": "CONTRIBUTOR",
    "body": ":+1: will investigate further, may be can help us with our memory problem!",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/922483938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926046555",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-926046555",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 926046555,
    "node_id": "IC_kwDOCD5_Gc43Mllb",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-23T18:17:02Z",
    "updated_at": "2021-09-23T18:17:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "tried to investigate it on a local test setup, nothing went awry so then investigated this across 16vc and 975 vc, \r\non 16vc each slot there were two calls only, and the `delta(lodestar_api_rest_response_time_seconds_count{operationId=\"getAttesterDuties\"}[1m])` was also 3 eevrywhere (grafana shows delta of 3 for 2 api calls registered)\r\n\r\nalso picked a point \"Sep-23 08:01\" where api_rest_response was spiking for manual inspection, in both beacon logs and validator logs there were only two calls as expected.\r\n\r\nthen inspected this on 975vc node, picked the same point, there it was spiking on the same point as expected, but registering a delta of 12.\r\n![image](https://user-images.githubusercontent.com/76567250/134561905-9dc89647-b329-4c19-9f42-49098efd8690.png)\r\n\r\nso moved to manually inspect the log at same point \"Sep-23 08:01\":\r\n \r\n![image](https://user-images.githubusercontent.com/76567250/134560668-b0974adf-cfac-4d7f-ade5-7eec1d6b3c46.png)\r\n\r\nthen realized that this is showing multiple requests but from four different validator ips, inspected docker containers and confirmed the same.\r\n![image](https://user-images.githubusercontent.com/76567250/134560838-2c5befd7-2529-4e10-b77f-4245f4c7ed99.png)\r\n4 validator processes with 12 delta i.e. 3 per validator process, so it squares off. hence closing this as FALSE POSITIVE.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926046555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926050161",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-926050161",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 926050161,
    "node_id": "IC_kwDOCD5_Gc43Mmdx",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-23T18:22:08Z",
    "updated_at": "2021-09-23T18:22:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "RECOMMENDATION: \r\n1. may be we can also track in metrics dashboard how many validator processes are connected on the beacon node. this will keep things straightforward and prevent any confusion.\r\n2. a security check can be done when there are two calls (by different processes) asking for validator duties on some common index on the same epoch. may be there is, I am not sure of this.\r\n3. further investigation of how these parallel calls may be affecting the performance of the beacon node, some of the call timings show 8 seconds in  grafana dashboard, but might need deeper inspection.\r\n\r\nBut closing this issue, as investigation has concluded this to be of false positive.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926050161/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926784089",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-926784089",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 926784089,
    "node_id": "IC_kwDOCD5_Gc43PZpZ",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-24T17:01:12Z",
    "updated_at": "2021-09-24T17:01:12Z",
    "author_association": "MEMBER",
    "body": "What would be an issue here is how much regen the calls are causing compounded. If the validator clients call getAttesterDuties multiple times but always result in 1 epoch transition run, then it's okay. The problem would be if multiple epoch transitions are run due to those calls",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926784089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926792973",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/3201#issuecomment-926792973",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/3201",
    "id": 926792973,
    "node_id": "IC_kwDOCD5_Gc43Pb0N",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-24T17:15:26Z",
    "updated_at": "2021-09-24T17:15:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, this looks a good point to be investigated. i will create an issue for this and carry forward the investigation :+1: ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/926792973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

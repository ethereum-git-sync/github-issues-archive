{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5061",
  "id": 1558253325,
  "node_id": "I_kwDOCD5_Gc5c4Q8N",
  "number": 5061,
  "title": "Endpoint for VC to show status/connection to currently connected beacon node",
  "user": {
    "login": "philknows",
    "id": 58080811,
    "node_id": "MDQ6VXNlcjU4MDgwODEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/philknows",
    "html_url": "https://github.com/philknows",
    "followers_url": "https://api.github.com/users/philknows/followers",
    "following_url": "https://api.github.com/users/philknows/following{/other_user}",
    "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
    "organizations_url": "https://api.github.com/users/philknows/orgs",
    "repos_url": "https://api.github.com/users/philknows/repos",
    "events_url": "https://api.github.com/users/philknows/events{/privacy}",
    "received_events_url": "https://api.github.com/users/philknows/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1200090446,
      "node_id": "MDU6TGFiZWwxMjAwMDkwNDQ2",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/prio-medium",
      "name": "prio-medium",
      "color": "fdc09f",
      "default": false,
      "description": "Resolve this some time soon (tm)."
    },
    {
      "id": 1394319944,
      "node_id": "MDU6TGFiZWwxMzk0MzE5OTQ0",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "014636",
      "default": true,
      "description": "Issues that are suitable for first-time contributors."
    },
    {
      "id": 4116885308,
      "node_id": "LA_kwDOCD5_Gc71Yq88",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-ux",
      "name": "scope-ux",
      "color": "980043",
      "default": false,
      "description": "Issues for CLI UX or general consumer UX."
    },
    {
      "id": 4754137758,
      "node_id": "LA_kwDOCD5_Gc8AAAABG15ing",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/meta-feature-request",
      "name": "meta-feature-request",
      "color": "B5CF5F",
      "default": false,
      "description": "Issues to track feature requests."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-01-26T14:43:15Z",
  "updated_at": "2023-10-20T21:28:51Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nCurrently, if you run a setup with multiple beacon nodes, there isn't an easy way for monitoring tools like Grafana to know exactly which beacon node the validator client is connected to. This would be useful for more sophisticated setups where it isn't a local environment with a 1:1 beacon node <> validator setup, or using remote beacon nodes. This is especially useful if we setup multiple fallback nodes in the `beaconNodes` array.\r\n\r\n**Describe the solution you'd like**\r\n\r\nA validator endpoint which tells us which beacon node it is currently connected to. Whether that is IP address or if we had a configurable parameter to name beacon-nodes that it would pull the name and/or IP address of what it's connected to so Grafana and other monitoring tools can see the current connection status.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1769129127",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5061#issuecomment-1769129127",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
    "id": 1769129127,
    "node_id": "IC_kwDOCD5_Gc5pcsSn",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-18T18:48:57Z",
    "updated_at": "2023-10-18T18:48:57Z",
    "author_association": "MEMBER",
    "body": "Is this still a requirement? I feel like this should be easy to implement by adding a metric",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1769129127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1769201371",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5061#issuecomment-1769201371",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
    "id": 1769201371,
    "node_id": "IC_kwDOCD5_Gc5pc97b",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-18T19:38:41Z",
    "updated_at": "2023-10-18T19:38:41Z",
    "author_association": "MEMBER",
    "body": "From Lodestar incentive program user feedback\r\n> Validators use a fallback node, but not sure if they were needed during this period.\r\n\r\nI also feel like metrics should be able to answer such questions, maybe also highlight in logs if a fallback is used\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1769201371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1770113347",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5061#issuecomment-1770113347",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
    "id": 1770113347,
    "node_id": "IC_kwDOCD5_Gc5pgclD",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-19T05:57:36Z",
    "updated_at": "2023-10-19T05:57:36Z",
    "author_association": "MEMBER",
    "body": "There are metrics for it, please check if this provide enough info\r\n\r\nhttps://github.com/ChainSafe/lodestar/blob/724c79a181e4ad53c8faa609147e681ec3ee04e7/packages/validator/src/metrics.ts#L364-L368",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1770113347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1770359623",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5061#issuecomment-1770359623",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
    "id": 1770359623,
    "node_id": "IC_kwDOCD5_Gc5phYtH",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-19T08:53:37Z",
    "updated_at": "2023-10-19T08:53:37Z",
    "author_association": "MEMBER",
    "body": "> There are metrics for it, please check if this provide enough info\r\n\r\nYes, those will work to answer the question if there were any requests to fallbacks. The [URL score metric](https://github.com/ChainSafe/lodestar/blob/c50db8f7ae47198c76070487a6cfd0009d9bfd39/packages/validator/src/metrics.ts#L371) could be used to figure out which is the currently connected bn  but a simpler solution would be to add a new metric which uses a label to track the URL of the currently connected bn.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1770359623/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1773403609",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5061#issuecomment-1773403609",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
    "id": 1773403609,
    "node_id": "IC_kwDOCD5_Gc5ps_3Z",
    "user": {
      "login": "philknows",
      "id": 58080811,
      "node_id": "MDQ6VXNlcjU4MDgwODEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/philknows",
      "html_url": "https://github.com/philknows",
      "followers_url": "https://api.github.com/users/philknows/followers",
      "following_url": "https://api.github.com/users/philknows/following{/other_user}",
      "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
      "organizations_url": "https://api.github.com/users/philknows/orgs",
      "repos_url": "https://api.github.com/users/philknows/repos",
      "events_url": "https://api.github.com/users/philknows/events{/privacy}",
      "received_events_url": "https://api.github.com/users/philknows/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-20T21:14:39Z",
    "updated_at": "2023-10-20T21:14:39Z",
    "author_association": "MEMBER",
    "body": "Right now, for larger setups like ours, I just look at the `rcconfig.yml` to correlate their primary + secondary beacon node. It narrows it down to 2 options really but some calls will go through primary `beaconNodes` and some to secondary and it's not instantly known which of the two paths a call took. Will be even worse if someone had >1 fallbacks.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1773403609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1773417348",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5061#issuecomment-1773417348",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5061",
    "id": 1773417348,
    "node_id": "IC_kwDOCD5_Gc5ptDOE",
    "user": {
      "login": "nflaig",
      "id": 38436224,
      "node_id": "MDQ6VXNlcjM4NDM2MjI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/38436224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nflaig",
      "html_url": "https://github.com/nflaig",
      "followers_url": "https://api.github.com/users/nflaig/followers",
      "following_url": "https://api.github.com/users/nflaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/nflaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nflaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nflaig/subscriptions",
      "organizations_url": "https://api.github.com/users/nflaig/orgs",
      "repos_url": "https://api.github.com/users/nflaig/repos",
      "events_url": "https://api.github.com/users/nflaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nflaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-20T21:28:51Z",
    "updated_at": "2023-10-20T21:28:51Z",
    "author_association": "MEMBER",
    "body": ">  it's not instantly known which of the two paths a call took\r\n\r\nIf we want that information on a per request basis, I think would be best to include the URL in the logs (per request). Or could also add another label with the URL to `vc_rest_api_client_request_to_fallbacks_total`.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1773417348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

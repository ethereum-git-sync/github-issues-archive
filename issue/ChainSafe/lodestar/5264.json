{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5264",
  "id": 1621792740,
  "node_id": "I_kwDOCD5_Gc5gqpfk",
  "number": 5264,
  "title": "Error: JSON RPC error: invalid terminal block hash, engine_exchangeTransitionConfigurationV1",
  "user": {
    "login": "avenbreaks",
    "id": 93043826,
    "node_id": "U_kgDOBYu8cg",
    "avatar_url": "https://avatars.githubusercontent.com/u/93043826?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avenbreaks",
    "html_url": "https://github.com/avenbreaks",
    "followers_url": "https://api.github.com/users/avenbreaks/followers",
    "following_url": "https://api.github.com/users/avenbreaks/following{/other_user}",
    "gists_url": "https://api.github.com/users/avenbreaks/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avenbreaks/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avenbreaks/subscriptions",
    "organizations_url": "https://api.github.com/users/avenbreaks/orgs",
    "repos_url": "https://api.github.com/users/avenbreaks/repos",
    "events_url": "https://api.github.com/users/avenbreaks/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avenbreaks/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-03-13T16:02:29Z",
  "updated_at": "2023-05-29T08:31:14Z",
  "closed_at": "2023-05-29T08:31:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\n\r\ngood day, I've run my custom blockchain with 2 node el (geth) and 2 node cl (lodestar) and it's running already got 1k blocks, but I got an error like this :\r\n\r\nlogs beacon : \r\n```\r\nMar-13 02:55:38.402[api] \u001B[31merror\u001B[39m: Error on submitPoolSyncCommitteeSignatures [0] slot=25, validatorIndex=0 PublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nPublishError.InsufficientPeers\r\nError: Multiple errors on publishAggregateAndProofs\r\nMar-13 02:55:41.376[api] \u001B[31merror\u001B[39m: Error on submitPoolSyncCommitteeSignatures [0] slot=26, validatorIndex=0 PublishError.InsufficientPeers\r\n```\r\n\r\nwhat i see on lodestar's official github is an unobtrusive error and i can ignore this error, but i don't see this problem is solved or not. and henceforth I want to be a validator on this custom network using another machine by utilizing bootnodes and enr but getting an error like this :\r\n\r\nLogs Beacon 2nd Server : \r\n```\r\nMar-13 14:47:18.501[] \u001B[32minfo\u001B[39m: Searching peers - peers: 0 - slot: 14258 (skipped 14258) - head: 0 0x92b4…923c - execution: valid(0x0beb…c0c5) - finalized: 0x0000…0000:0\r\nMar-13 14:47:21.501[] \u001B[32minfo\u001B[39m: Searching peers - peers: 0 - slot: 14259 (skipped 14259) - head: 0 0x92b4…923c - execution: valid(0x0beb…c0c5) - finalized: 0x0000…0000:0\r\nMar-13 14:47:23.004[chain] \u001B[33mwarn\u001B[39m: Could not validate transition configuration with execution client  JSON RPC error: invalid terminal block hash, engine_exchangeTransitionConfigurationV1\r\nError: JSON RPC error: invalid terminal block hash, engine_exchangeTransitionConfigurationV1\r\n```\r\n`curl http://localhost:9596/eth/v1/node/identity\r\n`\r\n```\r\n{\r\n    \"data\": {\r\n        \"peer_id\": \"16Uiu2HAm3YVZ3cah2ntVfSSLxH3a63q6cdrvLQAFG2a2hE8Wxoq6\",\r\n        \"enr\": \"enr:-MS4QDxojmA0qTMzQTkefSYoesqLxt4x6TP5qMYcB6URVXi1IXW7CnlIMqTswKPElkz07bMzb-wVg7ajMhP10P_LWREHh2F0dG5ldHOIAAAAAAAAAACEZXRoMpBrsEGqAiAhkf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQJ4nMWGpQ7EaTc4X-sHfVEg0fiMZCIaEMkyfe6CTi_kZYhzeW5jbmV0c4gAAAAAAAAAAIN0Y3CCIyiDdWRwgiMo\",\r\n        \"p2p_addresses\": [\r\n            \"/ip4/127.0.0.1/tcp/9000/p2p/16Uiu2HAm3YVZ3cah2ntVfSSLxH3a63q6cdrvLQAFG2a2hE8Wxoq6\",\r\n            \"/ip4/172.31.78.113/tcp/9000/p2p/16Uiu2HAm3YVZ3cah2ntVfSSLxH3a63q6cdrvLQAFG2a2hE8Wxoq6\"\r\n        ],\r\n        \"discovery_addresses\": [\r\n            \"/ip4/127.0.0.1/tcp/9000\",\r\n            \"/ip4/127.0.0.1/udp/9000\"\r\n        ],\r\n        \"metadata\": {\r\n            \"seq_number\": \"0\",\r\n            \"attnets\": \"0x0000000000000000\",\r\n            \"syncnets\": \"0x00\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nRunning And Connect to first Nodes. \r\n\r\n**Steps to Reproduce**\r\nConfiguration Eth1 : \r\n\r\n```\r\nnohup geth \\\r\n--http \\\r\n--http.port 8545  \\\r\n--http.api=eth,net,web3,personal,miner \\\r\n--http.addr=0.0.0.0 \\\r\n--http.vhosts=* \\\r\n--http.corsdomain=* \\\r\n--networkid 1881 \\\r\n--datadir \"/home/ubuntu/server/testnet-list/gethdata\" \\\r\n--authrpc.port 8551 \\\r\n--port 30303 \\\r\n--syncmode full \\ \r\n--bootnodes \"enode://0b537a418dd47cea703c3b66bb03b64611f03c9e2ec3b0634946c67b0e6e7d5917ef29f1ffa680fe8b98989ced936787c4b33d1139b3a3aa29dd730ff0b03ec0@139.178.94.227:30303\" > ./logs/geth.log 2>&1 &\r\n```\r\nConfiguration Eth2 Lodestar : \r\n\r\n```\r\nnohup lodestar beacon \\\r\n--suggestedFeeRecipient \"0xa71f4093002155457da565acc2598b975306bd21\" \\\r\n--execution.urls \"http://127.0.0.1:8551\" \\\r\n--jwt-secret \"/home/ubuntu/server/testnet-list/gethdata/geth/jwtsecret\" \\\r\n--dataDir \"/home/ubuntu/server/testnet-list/lodestardata\" \\\r\n--paramsFile \"/home/ubuntu/server/testnet-list/eth-network/cartenz/consensus/config.yaml\" \\\r\n--genesisStateFile \"/home/ubuntu/server/testnet-list/eth-network/cartenz/consensus/genesis.ssz\" \\\r\n--enr.ip 127.0.0.1 \\\r\n--rest.port 9596 \\\r\n--port 9000 \\\r\n--network.connectToDiscv5Bootnodes true \\\r\n--logLevel=info \\\r\n--bootnodes=\"enr:-MS4QHlsTrznMo6CNlgjbqev4xwanbfocKYG_trfGYqOfxSMRykba13eohXRXRkjT-ulmP8tACzYhY9afNYVYGS5l0EHh2F0dG5ldHOIAAAAAAAAAACEZXRoMpBrsEGqAiAhkf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQLJgx8M7rL_WFWdzbN0PeKq16cLw_-VfJI2YtLJHrJFt4hzeW5jbmV0c4gAAAAAAAAAAIN0Y3CCIyiDdWRwgiMo\r\n\",\"enr:-MS4QDrE4FryBl8Mv0Ms_qGXJZFmG0fglb1LT5VD9dCplGdjFQfdByXiXQJ1T90nqU218pntCcHA4Dz8x256I4bificHh2F0dG5ldHOIAAAAAAAAAACEZXRoMpBrsEGqAiAhkf__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQOtfKRyp8AYzC0cKxUiWANcfo3KxasbJDI1xIjhUtU50IhzeW5jbmV0c4gAAAAAAAAAAIN0Y3CCIymDdWRwgiMp\r\n\" \\ > ./logs/beacon.log &\r\n```\r\n\r\n**Screenshots**\r\n**LODESTAR FIRST SERVER**\r\n![image](https://user-images.githubusercontent.com/93043826/224756638-bdf939de-19ce-42ad-a280-a16cc5f20cd2.png)\r\n![image](https://user-images.githubusercontent.com/93043826/224756873-0b5014d2-b9b5-4a50-81a5-e5fd24e02bbf.png)\r\n\r\n**GETH FIRST SERVER**\r\n![image](https://user-images.githubusercontent.com/93043826/224758034-4774d632-947e-4e4c-a1a1-04925b3a88e1.png)\r\n![image](https://user-images.githubusercontent.com/93043826/224758214-3cf372ec-7012-4b75-918c-193acb89dc0c.png)\r\n\r\n\r\n\r\n**GETH TO CONNECT FIRST SERVER**\r\n![image](https://user-images.githubusercontent.com/93043826/224754446-cd22a8ad-b01a-432e-828a-29040d0661b2.png)\r\n**LODESTAR TO CONNECT FIRST SERVER**\r\n![image](https://user-images.githubusercontent.com/93043826/224754533-d57f618d-2285-4581-8f5e-86600df0bb7e.png)\r\n**VALIDATOR TO CONNECT FIRST SERVER**\r\n![image](https://user-images.githubusercontent.com/93043826/224755050-8fb48670-d791-4ad8-8c85-0c7f94565022.png)\r\n\r\n\r\n<!--If applicable, add screenshots to help explain your problem.-->\r\n\r\n**Desktop (please complete the following information):**\r\n\r\n- OS: **AWS Ubuntu c6a.2xlarge**\r\n- Version: **Version: v1.5.0**\r\n- Branch:  **master**\r\n- Commit hash: **6ac7d30**\r\n",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1475150890",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5264#issuecomment-1475150890",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264",
    "id": 1475150890,
    "node_id": "IC_kwDOCD5_Gc5X7QQq",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-19T08:33:00Z",
    "updated_at": "2023-03-19T08:33:00Z",
    "author_association": "MEMBER",
    "body": "Hey @avenbreaks :wave: \r\n\r\nI see two different issues there:\r\n1. InsufficientPeers: If you are running in a local devnet configuration it's likely to see those. The second node may appear as peer but not in any of the subnets the first node is publishing to. We are looking into tuning the verbosity of that error.\r\n2. `invalid terminal block hash, engine_exchangeTransitionConfigurationV1` Error: @g11tech can you take a look?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1475150890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1475618046",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5264#issuecomment-1475618046",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264",
    "id": 1475618046,
    "node_id": "IC_kwDOCD5_Gc5X9CT-",
    "user": {
      "login": "avenbreaks",
      "id": 93043826,
      "node_id": "U_kgDOBYu8cg",
      "avatar_url": "https://avatars.githubusercontent.com/u/93043826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/avenbreaks",
      "html_url": "https://github.com/avenbreaks",
      "followers_url": "https://api.github.com/users/avenbreaks/followers",
      "following_url": "https://api.github.com/users/avenbreaks/following{/other_user}",
      "gists_url": "https://api.github.com/users/avenbreaks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/avenbreaks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/avenbreaks/subscriptions",
      "organizations_url": "https://api.github.com/users/avenbreaks/orgs",
      "repos_url": "https://api.github.com/users/avenbreaks/repos",
      "events_url": "https://api.github.com/users/avenbreaks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/avenbreaks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-20T04:55:02Z",
    "updated_at": "2023-03-20T04:55:02Z",
    "author_association": "NONE",
    "body": "> Hai@avenbreaks melambai\r\n> \r\n> Saya melihat dua masalah berbeda di sana:\r\n> \r\n> 1. InsufficientPeers: Jika Anda menjalankan konfigurasi devnet lokal, kemungkinan akan melihatnya. Node kedua mungkin muncul sebagai rekan tetapi tidak di salah satu subnet yang diterbitkan oleh node pertama. Kami sedang mencari penyetelan verbositas kesalahan itu.\r\n> 2. `invalid terminal block hash, engine_exchangeTransitionConfigurationV1`Kesalahan:@g11techbisakah kamu melihatnya?\r\n\r\ni took the bootnode from the main server then i tried to connect using the second server but it was all the same, unable to connect, i tried the addPeer and addTrustedPeer methods then tried to fund my validator keystore with some faucets then import keystore running 2 beacon nodes and 1 validator node , the peer is always not found. is it because my main server is not opening firewall ports ? or from my own server ?\r\n\r\n![image](https://user-images.githubusercontent.com/93043826/226249814-48132f03-7d3b-4c2b-b679-80ec19e5c39f.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1475618046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1479954307",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5264#issuecomment-1479954307",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264",
    "id": 1479954307,
    "node_id": "IC_kwDOCD5_Gc5YNk-D",
    "user": {
      "login": "g11tech",
      "id": 76567250,
      "node_id": "MDQ6VXNlcjc2NTY3MjUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/76567250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g11tech",
      "html_url": "https://github.com/g11tech",
      "followers_url": "https://api.github.com/users/g11tech/followers",
      "following_url": "https://api.github.com/users/g11tech/following{/other_user}",
      "gists_url": "https://api.github.com/users/g11tech/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g11tech/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g11tech/subscriptions",
      "organizations_url": "https://api.github.com/users/g11tech/orgs",
      "repos_url": "https://api.github.com/users/g11tech/repos",
      "events_url": "https://api.github.com/users/g11tech/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g11tech/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T17:10:17Z",
    "updated_at": "2023-03-22T17:11:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "for `invalid terminal block hash, engine_exchangeTransitionConfigurationV1`  seems like your config.yaml has some TERMINAL_BLOCK_HASH set which mismatches with geth genesis.json, only try setting TOTAL_TERMINAL_DIFFICULTY\r\n\r\nfor making sure your peer2 connects peer1, have you also provided `--enr.udp` port on peer1?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1479954307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1566757532",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/5264#issuecomment-1566757532",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5264",
    "id": 1566757532,
    "node_id": "IC_kwDOCD5_Gc5dYtKc",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-29T08:31:14Z",
    "updated_at": "2023-05-29T08:31:14Z",
    "author_association": "MEMBER",
    "body": "Closing issues for specific incidents on old versions of Lodestar, please re-open if it happens with latest stable\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1566757532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5905",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5905/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5905/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5905/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/5905",
  "id": 1862749177,
  "node_id": "I_kwDOCD5_Gc5vB0v5",
  "number": 5905,
  "title": "## Performance Report RAULMC signature",
  "user": {
    "login": "raulmc123",
    "id": 142560991,
    "node_id": "U_kgDOCH9O3w",
    "avatar_url": "https://avatars.githubusercontent.com/u/142560991?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/raulmc123",
    "html_url": "https://github.com/raulmc123",
    "followers_url": "https://api.github.com/users/raulmc123/followers",
    "following_url": "https://api.github.com/users/raulmc123/following{/other_user}",
    "gists_url": "https://api.github.com/users/raulmc123/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/raulmc123/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/raulmc123/subscriptions",
    "organizations_url": "https://api.github.com/users/raulmc123/orgs",
    "repos_url": "https://api.github.com/users/raulmc123/repos",
    "events_url": "https://api.github.com/users/raulmc123/events{/privacy}",
    "received_events_url": "https://api.github.com/users/raulmc123/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-08-23T07:37:14Z",
  "updated_at": "2023-08-23T07:37:14Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Performance Report\n\n✔️ no performance regression detected      \n\n\n\n<details><summary>Full benchmark results</summary>\n\n| Benchmark suite | Current: 8d145f25764cd7e5a8dc3767f1b0a8f47300d2a5 | Previous: - | Ratio |\n|-|-|-|-|\n| getPubkeys - index2pubkey - req 1000 vs - 250000 vc | 666.89 us/op |\n| getPubkeys - validatorsArr - req 1000 vs - 250000 vc | 130.93 us/op |\n| BLS verify - blst-native | 1.3099 ms/op |\n| BLS verifyMultipleSignatures 3 - blst-native | 2.6913 ms/op |\n| BLS verifyMultipleSignatures 8 - blst-native | 5.8440 ms/op |\n| BLS verifyMultipleSignatures 32 - blst-native | 23.884 ms/op |\n| BLS aggregatePubkeys 32 - blst-native | 29.477 us/op |\n| BLS aggregatePubkeys 128 - blst-native | 111.69 us/op |\n| getAttestationsForBlock | 74.979 ms/op |\n| isKnown best case - 1 super set check | 613.00 ns/op |\n| isKnown normal case - 2 super set checks | 646.00 ns/op |\n| isKnown worse case - 16 super set checks | 676.00 ns/op |\n| CheckpointStateCache - add get delete | 7.5810 us/op |\n| validate api signedAggregateAndProof - struct | 3.1435 ms/op |\n| validate gossip signedAggregateAndProof - struct | 3.2131 ms/op |\n| validate api attestation - struct | 1.4756 ms/op |\n| validate gossip attestation - struct | 1.5707 ms/op |\n| pickEth1Vote - no votes | 1.5266 ms/op |\n| pickEth1Vote - max votes | 14.644 ms/op |\n| pickEth1Vote - Eth1Data hashTreeRoot value x2048 | 13.383 ms/op |\n| pickEth1Vote - Eth1Data hashTreeRoot tree x2048 | 22.581 ms/op |\n| pickEth1Vote - Eth1Data fastSerialize value x2048 | 855.12 us/op |\n| pickEth1Vote - Eth1Data fastSerialize tree x2048 | 6.4646 ms/op |\n| bytes32 toHexString | 904.00 ns/op |\n| bytes32 Buffer.toString(hex) | 349.00 ns/op |\n| bytes32 Buffer.toString(hex) from Uint8Array | 703.00 ns/op |\n| bytes32 Buffer.toString(hex) + 0x | 411.00 ns/op |\n| Object access 1 prop | 0.24300 ns/op |\n| Map access 1 prop | 0.16500 ns/op |\n| Object get x1000 | 10.439 ns/op |\n| Map get x1000 | 0.94000 ns/op |\n| Object set x1000 | 84.426 ns/op |\n| Map set x1000 | 64.881 ns/op |\n| Return object 10000 times | 0.34420 ns/op |\n| Throw Error 10000 times | 5.3894 us/op |\n| fastMsgIdFn sha256 / 200 bytes | 3.8460 us/op |\n| fastMsgIdFn h32 xxhash / 200 bytes | 392.00 ns/op |\n| fastMsgIdFn h64 xxhash / 200 bytes | 411.00 ns/op |\n| fastMsgIdFn sha256 / 1000 bytes | 12.388 us/op |\n| fastMsgIdFn h32 xxhash / 1000 bytes | 535.00 ns/op |\n| fastMsgIdFn h64 xxhash / 1000 bytes | 540.00 ns/op |\n| fastMsgIdFn sha256 / 10000 bytes | 111.78 us/op |\n| fastMsgIdFn h32 xxhash / 10000 bytes | 2.1900 us/op |\n| fastMsgIdFn h64 xxhash / 10000 bytes | 1.5600 us/op |\n| enrSubnets - fastDeserialize 64 bits | 1.8010 us/op |\n| enrSubnets - ssz BitVector 64 bits | 611.00 ns/op |\n| enrSubnets - fastDeserialize 4 bits | 256.00 ns/op |\n| enrSubnets - ssz BitVector 4 bits | 599.00 ns/op |\n| prioritizePeers score -10:0 att 32-0.1 sync 2-0 | 160.54 us/op |\n| prioritizePeers score 0:0 att 32-0.25 sync 2-0.25 | 165.84 us/op |\n| prioritizePeers score 0:0 att 32-0.5 sync 2-0.5 | 221.06 us/op |\n| prioritizePeers score 0:0 att 64-0.75 sync 4-0.75 | 363.25 us/op |\n| prioritizePeers score 0:0 att 64-1 sync 4-1 | 420.47 us/op |\n| array of 16000 items push then shift | 1.7770 us/op |\n| LinkedList of 16000 items push then shift | 11.298 ns/op |\n| array of 16000 items push then pop | 71.188 ns/op |\n| LinkedList of 16000 items push then pop | 11.818 ns/op |\n| array of 24000 items push then shift | 2.9172 us/op |\n| LinkedList of 24000 items push then shift | 12.469 ns/op |\n| array of 24000 items push then pop | 135.48 ns/op |\n| LinkedList of 24000 items push then pop | 9.6720 ns/op |\n| intersect bitArray bitLen 8 | 7.2830 ns/op |\n| intersect array and set length 8 | 75.877 ns/op |\n| intersect bitArray bitLen 128 | 38.269 ns/op |\n| intersect array and set length 128 | 1.1257 us/op |\n| bitArray.getTrueBitIndexes() bitLen 128 | 2.0860 us/op |\n| bitArray.getTrueBitIndexes() bitLen 248 | 2.9780 us/op |\n| bitArray.getTrueBitIndexes() bitLen 512 | 7.4870 us/op |\n| Buffer.concat 32 items | 1.4690 us/op |\n| Uint8Array.set 32 items | 2.6970 us/op |\n| transfer serialized Status (84 B) | 3.2280 us/op |\n| copy serialized Status (84 B) | 2.0770 us/op |\n| transfer serialized SignedVoluntaryExit (112 B) | 3.1900 us/op |\n| copy serialized SignedVoluntaryExit (112 B) | 2.4180 us/op |\n| transfer serialized ProposerSlashing (416 B) | 3.5340 us/op |\n| copy serialized ProposerSlashing (416 B) | 2.6120 us/op |\n| transfer serialized Attestation (485 B) | 2.9230 us/op |\n| copy serialized Attestation (485 B) | 2.6560 us/op |\n| transfer serialized AttesterSlashing (33232 B) | 2.4660 us/op |\n| copy serialized AttesterSlashing (33232 B) | 8.8220 us/op |\n| transfer serialized Small SignedBeaconBlock (128000 B) | 3.5890 us/op |\n| copy serialized Small SignedBeaconBlock (128000 B) | 23.291 us/op |\n| transfer serialized Avg SignedBeaconBlock (200000 B) | 4.4880 us/op |\n| copy serialized Avg SignedBeaconBlock (200000 B) | 38.259 us/op |\n| transfer serialized BlobsSidecar (524380 B) | 4.9750 us/op |\n| copy serialized BlobsSidecar (524380 B) | 111.47 us/op |\n| transfer serialized Big SignedBeaconBlock (1000000 B) | 5.0090 us/op |\n| copy serialized Big SignedBeaconBlock (1000000 B) | 385.77 us/op |\n| pass gossip attestations to forkchoice per slot | 2.3952 ms/op |\n| forkChoice updateHead vc 100000 bc 64 eq 0 | 2.8598 ms/op |\n| forkChoice updateHead vc 600000 bc 64 eq 0 | 14.010 ms/op |\n| forkChoice updateHead vc 1000000 bc 64 eq 0 | 19.027 ms/op |\n| forkChoice updateHead vc 600000 bc 320 eq 0 | 17.911 ms/op |\n| forkChoice updateHead vc 600000 bc 1200 eq 0 | 92.025 ms/op |\n| forkChoice updateHead vc 600000 bc 64 eq 1000 | 19.921 ms/op |\n| forkChoice updateHead vc 600000 bc 64 eq 10000 | 21.819 ms/op |\n| forkChoice updateHead vc 600000 bc 64 eq 300000 | 39.704 ms/op |\n| computeDeltas | 3.4181 ms/op |\n| computeProposerBoostScoreFromBalances | 408.44 us/op |\n| altair processAttestation - 250000 vs - 7PWei normalcase | 3.5164 ms/op |\n| altair processAttestation - 250000 vs - 7PWei worstcase | 4.1520 ms/op |\n| altair processAttestation - setStatus - 1/6 committees join | 199.80 us/op |\n| altair processAttestation - setStatus - 1/3 committees join | 378.54 us/op |\n| altair processAttestation - setStatus - 1/2 committees join | 487.73 us/op |\n| altair processAttestation - setStatus - 2/3 committees join | 623.83 us/op |\n| altair processAttestation - setStatus - 4/5 committees join | 831.89 us/op |\n| altair processAttestation - setStatus - 100% committees join | 977.83 us/op |\n| altair processBlock - 250000 vs - 7PWei normalcase | 9.9961 ms/op |\n| altair processBlock - 250000 vs - 7PWei normalcase hashState | 18.045 ms/op |\n| altair processBlock - 250000 vs - 7PWei worstcase | 39.699 ms/op |\n| altair processBlock - 250000 vs - 7PWei worstcase hashState | 60.785 ms/op |\n| phase0 processBlock - 250000 vs - 7PWei normalcase | 2.8041 ms/op |\n| phase0 processBlock - 250000 vs - 7PWei worstcase | 33.898 ms/op |\n| altair processEth1Data - 250000 vs - 7PWei normalcase | 500.86 us/op |\n| getExpectedWithdrawals 250000 eb:1,eth1:1,we:0,wn:0,smpl:15 | 22.322 us/op |\n| getExpectedWithdrawals 250000 eb:0.95,eth1:0.1,we:0.05,wn:0,smpl:219 | 48.205 us/op |\n| getExpectedWithdrawals 250000 eb:0.95,eth1:0.3,we:0.05,wn:0,smpl:42 | 25.645 us/op |\n| getExpectedWithdrawals 250000 eb:0.95,eth1:0.7,we:0.05,wn:0,smpl:18 | 15.657 us/op |\n| getExpectedWithdrawals 250000 eb:0.1,eth1:0.1,we:0,wn:0,smpl:1020 | 218.10 us/op |\n| getExpectedWithdrawals 250000 eb:0.03,eth1:0.03,we:0,wn:0,smpl:11777 | 1.1658 ms/op |\n| getExpectedWithdrawals 250000 eb:0.01,eth1:0.01,we:0,wn:0,smpl:16384 | 1.7422 ms/op |\n| getExpectedWithdrawals 250000 eb:0,eth1:0,we:0,wn:0,smpl:16384 | 1.6793 ms/op |\n| getExpectedWithdrawals 250000 eb:0,eth1:0,we:0,wn:0,nocache,smpl:16384 | 3.7963 ms/op |\n| getExpectedWithdrawals 250000 eb:0,eth1:1,we:0,wn:0,smpl:16384 | 2.7950 ms/op |\n| getExpectedWithdrawals 250000 eb:0,eth1:1,we:0,wn:0,nocache,smpl:16384 | 7.9553 ms/op |\n| Tree 40 250000 create | 450.72 ms/op |\n| Tree 40 250000 get(125000) | 205.66 ns/op |\n| Tree 40 250000 set(125000) | 1.0364 us/op |\n| Tree 40 250000 toArray() | 23.736 ms/op |\n| Tree 40 250000 iterate all - toArray() + loop | 26.427 ms/op |\n| Tree 40 250000 iterate all - get(i) | 76.322 ms/op |\n| MutableVector 250000 create | 14.538 ms/op |\n| MutableVector 250000 get(125000) | 7.0050 ns/op |\n| MutableVector 250000 set(125000) | 271.15 ns/op |\n| MutableVector 250000 toArray() | 3.3786 ms/op |\n| MutableVector 250000 iterate all - toArray() + loop | 3.9219 ms/op |\n| MutableVector 250000 iterate all - get(i) | 1.5705 ms/op |\n| Array 250000 create | 3.2262 ms/op |\n| Array 250000 clone - spread | 1.2037 ms/op |\n| Array 250000 get(125000) | 0.59800 ns/op |\n| Array 250000 set(125000) | 0.70000 ns/op |\n| Array 250000 iterate all - loop | 92.140 us/op |\n| effectiveBalanceIncrements clone Uint8Array 300000 | 53.454 us/op |\n| effectiveBalanceIncrements clone MutableVector 300000 | 367.00 ns/op |\n| effectiveBalanceIncrements rw all Uint8Array 300000 | 190.80 us/op |\n| effectiveBalanceIncrements rw all MutableVector 300000 | 149.36 ms/op |\n| phase0 afterProcessEpoch - 250000 vs - 7PWei | 134.22 ms/op |\n| phase0 beforeProcessEpoch - 250000 vs - 7PWei | 40.438 ms/op |\n| altair processEpoch - mainnet_e81889 | 334.48 ms/op |\n| mainnet_e81889 - altair beforeProcessEpoch | 65.204 ms/op |\n| mainnet_e81889 - altair processJustificationAndFinalization | 20.991 us/op |\n| mainnet_e81889 - altair processInactivityUpdates | 6.3063 ms/op |\n| mainnet_e81889 - altair processRewardsAndPenalties | 59.204 ms/op |\n| mainnet_e81889 - altair processRegistryUpdates | 4.3680 us/op |\n| mainnet_e81889 - altair processSlashings | 927.00 ns/op |\n| mainnet_e81889 - altair processEth1DataReset | 803.00 ns/op |\n| mainnet_e81889 - altair processEffectiveBalanceUpdates | 1.4495 ms/op |\n| mainnet_e81889 - altair processSlashingsReset | 5.3810 us/op |\n| mainnet_e81889 - altair processRandaoMixesReset | 7.0310 us/op |\n| mainnet_e81889 - altair processHistoricalRootsUpdate | 1.2250 us/op |\n| mainnet_e81889 - altair processParticipationFlagUpdates | 2.4230 us/op |\n| mainnet_e81889 - altair processSyncCommitteeUpdates | 594.00 ns/op |\n| mainnet_e81889 - altair afterProcessEpoch | 130.28 ms/op |\n| capella processEpoch - mainnet_e217614 | 1.0626  s/op |\n| mainnet_e217614 - capella beforeProcessEpoch | 250.08 ms/op |\n| mainnet_e217614 - capella processJustificationAndFinalization | 15.861 us/op |\n| mainnet_e217614 - capella processInactivityUpdates | 16.362 ms/op |\n| mainnet_e217614 - capella processRewardsAndPenalties | 286.04 ms/op |\n| mainnet_e217614 - capella processRegistryUpdates | 20.287 us/op |\n| mainnet_e217614 - capella processSlashings | 475.00 ns/op |\n| mainnet_e217614 - capella processEth1DataReset | 415.00 ns/op |\n| mainnet_e217614 - capella processEffectiveBalanceUpdates | 4.0528 ms/op |\n| mainnet_e217614 - capella processSlashingsReset | 1.9920 us/op |\n| mainnet_e217614 - capella processRandaoMixesReset | 3.8180 us/op |\n| mainnet_e217614 - capella processHistoricalRootsUpdate | 586.00 ns/op |\n| mainnet_e217614 - capella processParticipationFlagUpdates | 1.3940 us/op |\n| mainnet_e217614 - capella afterProcessEpoch | 287.02 ms/op |\n| phase0 processEpoch - mainnet_e58758 | 323.78 ms/op |\n| mainnet_e58758 - phase0 beforeProcessEpoch | 115.44 ms/op |\n| mainnet_e58758 - phase0 processJustificationAndFinalization | 14.906 us/op |\n| mainnet_e58758 - phase0 processRewardsAndPenalties | 51.937 ms/op |\n| mainnet_e58758 - phase0 processRegistryUpdates | 9.5940 us/op |\n| mainnet_e58758 - phase0 processSlashings | 484.00 ns/op |\n| mainnet_e58758 - phase0 processEth1DataReset | 431.00 ns/op |\n| mainnet_e58758 - phase0 processEffectiveBalanceUpdates | 992.83 us/op |\n| mainnet_e58758 - phase0 processSlashingsReset | 2.3240 us/op |\n| mainnet_e58758 - phase0 processRandaoMixesReset | 7.9820 us/op |\n| mainnet_e58758 - phase0 processHistoricalRootsUpdate | 618.00 ns/op |\n| mainnet_e58758 - phase0 processParticipationRecordUpdates | 4.5530 us/op |\n| mainnet_e58758 - phase0 afterProcessEpoch | 100.80 ms/op |\n| phase0 processEffectiveBalanceUpdates - 250000 normalcase | 1.2973 ms/op |\n| phase0 processEffectiveBalanceUpdates - 250000 worstcase 0.5 | 1.4406 ms/op |\n| altair processInactivityUpdates - 250000 normalcase | 25.050 ms/op |\n| altair processInactivityUpdates - 250000 worstcase | 24.144 ms/op |\n| phase0 processRegistryUpdates - 250000 normalcase | 9.7900 us/op |\n| phase0 processRegistryUpdates - 250000 badcase_full_deposits | 357.23 us/op |\n| phase0 processRegistryUpdates - 250000 worstcase 0.5 | 136.61 ms/op |\n| altair processRewardsAndPenalties - 250000 normalcase | 68.748 ms/op |\n| altair processRewardsAndPenalties - 250000 worstcase | 71.470 ms/op |\n| phase0 getAttestationDeltas - 250000 normalcase | 8.1844 ms/op |\n| phase0 getAttestationDeltas - 250000 worstcase | 7.8717 ms/op |\n| phase0 processSlashings - 250000 worstcase | 2.3313 ms/op |\n| altair processSyncCommitteeUpdates - 250000 | 149.80 ms/op |\n| BeaconState.hashTreeRoot - No change | 271.00 ns/op |\n| BeaconState.hashTreeRoot - 1 full validator | 50.776 us/op |\n| BeaconState.hashTreeRoot - 32 full validator | 520.99 us/op |\n| BeaconState.hashTreeRoot - 512 full validator | 5.1811 ms/op |\n| BeaconState.hashTreeRoot - 1 validator.effectiveBalance | 66.404 us/op |\n| BeaconState.hashTreeRoot - 32 validator.effectiveBalance | 884.55 us/op |\n| BeaconState.hashTreeRoot - 512 validator.effectiveBalance | 11.222 ms/op |\n| BeaconState.hashTreeRoot - 1 balances | 50.527 us/op |\n| BeaconState.hashTreeRoot - 32 balances | 474.73 us/op |\n| BeaconState.hashTreeRoot - 512 balances | 4.4424 ms/op |\n| BeaconState.hashTreeRoot - 250000 balances | 74.559 ms/op |\n| aggregationBits - 2048 els - zipIndexesInBitList | 15.531 us/op |\n| regular array get 100000 times | 33.323 us/op |\n| wrappedArray get 100000 times | 33.228 us/op |\n| arrayWithProxy get 100000 times | 15.192 ms/op |\n| ssz.Root.equals | 224.00 ns/op |\n| byteArrayEquals | 208.00 ns/op |\n| shuffle list - 16384 els | 7.0090 ms/op |\n| shuffle list - 250000 els | 103.88 ms/op |\n| processSlot - 1 slots | 8.4880 us/op |\n| processSlot - 32 slots | 1.3894 ms/op |\n| getEffectiveBalanceIncrementsZeroInactive - 250000 vs - 7PWei | 55.673 ms/op |\n| getCommitteeAssignments - req 1 vs - 250000 vc | 2.4736 ms/op |\n| getCommitteeAssignments - req 100 vs - 250000 vc | 3.6219 ms/op |\n| getCommitteeAssignments - req 1000 vs - 250000 vc | 3.9873 ms/op |\n| RootCache.getBlockRootAtSlot - 250000 vs - 7PWei | 4.3000 ns/op |\n| state getBlockRootAtSlot - 250000 vs - 7PWei | 762.99 ns/op |\n| computeProposers - vc 250000 | 8.4769 ms/op |\n| computeEpochShuffling - vc 250000 | 101.70 ms/op |\n| getNextSyncCommittee - vc 250000 | 146.61 ms/op |\n| computeSigningRoot for AttestationData | 12.940 us/op |\n| hash AttestationData serialized data then Buffer.toString(base64) | 2.2584 us/op |\n| toHexString serialized data | 1.0370 us/op |\n| Buffer.toString(base64) | 196.15 ns/op |\n\n\n</details>\n\n\n\n> by benchmarkbot/action\n\n_Originally posted by @github-actions in https://github.com/ChainSafe/lodestar/pull/5836#issuecomment-1660778806_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5905/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/5905/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

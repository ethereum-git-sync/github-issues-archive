{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1599",
  "id": 710660233,
  "node_id": "MDU6SXNzdWU3MTA2NjAyMzM=",
  "number": 1599,
  "title": "Eth1 errors during initial sync",
  "user": {
    "login": "ec2",
    "id": 6364934,
    "node_id": "MDQ6VXNlcjYzNjQ5MzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6364934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ec2",
    "html_url": "https://github.com/ec2",
    "followers_url": "https://api.github.com/users/ec2/followers",
    "following_url": "https://api.github.com/users/ec2/following{/other_user}",
    "gists_url": "https://api.github.com/users/ec2/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ec2/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ec2/subscriptions",
    "organizations_url": "https://api.github.com/users/ec2/orgs",
    "repos_url": "https://api.github.com/users/ec2/repos",
    "events_url": "https://api.github.com/users/ec2/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ec2/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-09-29T00:24:20Z",
  "updated_at": "2021-07-23T14:34:27Z",
  "closed_at": "2021-07-23T14:34:26Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "<!--NOTE: -->\r\n<!--- General questions should go to the discord chat instead of the issue tracker.-->\r\nI'm trying to sync with Medalla and my node seems to be throwing some errors. It is worth noting that it still continues to sync fine despite these errors. \r\n**Describe the bug**\r\n<!--A clear and concise description of what the bug is and steps to reproduce it.-->\r\nI start up a node by running `yarn run cli beacon --testnet medalla --weakSubjectivityStateFile state-11185.ssz`. Then  I get errors that look like this \r\n```\r\n2020-09-28 20:10:46  [SYNC]             info: Received goodbye request from 16Uiu2HAmKz9RsaA48TkM6Y4FMUpGa733DBcQiJTU8zcsvfG1DB4z, reason=129 \r\n2020-09-28 20:10:47  [SYNC]             info: Fetching blocks for 358641...358704 slot range \r\n2020-09-28 20:10:47  [SYNC]             info: Received goodbye request from 16Uiu2HAmKAGHQpBgav3pyyPkN4kS819cbhTyj95fTbqKibw1m2XX, reason=2 \r\n2020-09-28 20:10:47  [CHORES]           info: Archive Blocks - duration=3039ms\r\n2020-09-28 20:10:47  [CHORES]           info: Archiving of finalized blocks complete. totalArchived=22, finalizedEpoch=11205\r\n2020-09-28 20:10:47  [CHORES]           info: Started archiving states (finalized epoch #11205)... \r\n2020-09-28 20:10:48  [ETH1]            error: Error updating eth1 chain cache Error: Error parsing JSON: Unexpected end of JSON input\r\n[{\"jsonrpc\":\"2.0\",\"id\":0,\"result\":{\"difficulty\":\"0x1\",\"extraData\":\"0x696e667572612d696f00000000000000000000000000000000000000000000005c5e7065135cbcd8410d00129ef26962ab7aeb66a465198a217397cf8109cde4421e8595f69fbc4a74056e02dd4568ae4d2d30438d5cebf45be2497d0e5dbc3301\",\"gasLimit\":\"0x7a1200\",\"gasUsed\":\"0x13c10b\",\"hash\":\"0x13f10a6aa198da21b4a42ff5ad901692f507712c4f5d4fa6fe54aac642f58428\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\r\nError: Error parsing JSON: Unexpected end of JSON input\r\n[{\"jsonrpc\":\"2.0\",\"id\":0,\"result\":{\"difficulty\":\"0x1\",\"extraData\":\"0x696e667572612d696f00000000000000000000000000000000000000000000005c5e7065135cbcd8410d00129ef26962ab7aeb66a465198a217397cf8109cde4421e8595f69fbc4a74056e02dd4568ae4d2d30438d5cebf45be2497d0e5dbc3301\",\"gasLimit\":\"0x7a1200\",\"gasUsed\":\"0x13c10b\",\"hash\":\"0x13f10a6aa198da21b4a42ff5ad901692f507712c4f5d4fa6fe54aac642f58428\",\"logsBloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\r\n    at parseJson (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/jsonRpcHttpClient.js:104:11)\r\n    at fetchJson (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/jsonRpcHttpClient.js:91:10)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n    at async JsonRpcHttpClient.fetchBatch (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/jsonRpcHttpClient.js:51:20)\r\n    at async Eth1Provider.getBlocksByNumber (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/eth1JsonRpcClient.js:33:23)\r\n    at async Eth1ForBlockProduction.updateBlockCache (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/eth1ForBlockProduction.js:184:24)\r\n    at async Eth1ForBlockProduction.update (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/eth1ForBlockProduction.js:137:29)\r\n    at async Eth1ForBlockProduction.runAutoUpdate (/Users/erictu/git-repos/chainsafe/lodestar/packages/lodestar/lib/eth1/eth1ForBlockProduction.js:117:28)\r\n2020-09-28 20:10:48  [CHORES]           info: Archiving of finalized states completed (finalized epoch #11205) \r\n2020-09-28 20:10:48  [CHORES]           info: Archive States - duration=1187ms\r\n```\r\n\r\nAlso potentially related are these types of errors:\r\n```\r\n359155,359164,359168,359169,359170,359171,359172,359173,359175,359176,359178,359179,359182,359183,359184,359186,359187 \r\n2020-09-28 20:16:13  [SYNC]             info: Sync progress currentEpoch=11223, targetEpoch=12475, speed=2.1 slots/s, estimatedTillComplete=5.3 hours\r\n2020-09-28 20:16:14  [SYNC]             info: Peer status activePeers=23, syncPeers=22\r\n2020-09-28 20:16:15  [ETH1]            error: Error updating eth1 chain cache Error: request to https://goerli.prylabs.net/ failed, reason: read ECONNRESET\r\nFetchError: request to https://goerli.prylabs.net/ failed, reason: read ECONNRESET\r\n    at ClientRequest.<anonymous> (/Users/erictu/git-repos/chainsafe/lodestar/node_modules/cross-fetch/node_modules/node-fetch/lib/index.js:1461:11)\r\n    at ClientRequest.emit (events.js:210:5)\r\n    at ClientRequest.EventEmitter.emit (domain.js:476:20)\r\n    at TLSSocket.socketErrorListener (_http_client.js:406:9)\r\n    at TLSSocket.emit (events.js:210:5)\r\n    at TLSSocket.EventEmitter.emit (domain.js:476:20)\r\n    at emitErrorNT (internal/streams/destroy.js:91:8)\r\n    at emitErrorAndCloseNT (internal/streams/destroy.js:59:3)\r\n    at processTicksAndRejections (internal/process/task_queues.js:80:21)\r\n2020-09-28 20:16:15  [CHAIN]            info: Epoch 11222 is justified at root     0xf75a1b3a0df5b9057efdbba97482392ceb18b4f70505040a79ccc6cc3027a9ce! \r\n2020-09-28 20:16:15  [CHAIN]            info: Epoch 11221 is finalized at root     0x05f6699c423833e5f41c5d37ea6d6bc0c2c253d88844fa54e9aff0c9ccdefb7a! \r\n2020-09-28 20:16:18  [SYNC]             info: Received goodbye request from 16Uiu2HAm6eyBvfAueyvmg9UFomAk6eMkDAkmvPcavEN62BJ3RonW, reason=251 \r\n```\r\n**Expected behavior**\r\n<!--A clear and concise description of what you expected to happen.-->\r\n\r\n**Steps to Reproduce**\r\n<!--Steps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n-->\r\n\r\n**Screenshots**\r\n<!--If applicable, add screenshots to help explain your problem.-->\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: OSX Catalina<!--[e.g. ubuntu, OSX High Siera]-->\r\n - Version: <!--[e.g. 22]-->\r\n - Branch: Master <!--[Master]-->\r\n - Commit hash: 422140d6e4f96a765001ae5eeae91ee246dc3440 <!--[e8232]-->\r\n",
  "closed_by": {
    "login": "dapplion",
    "id": 35266934,
    "node_id": "MDQ6VXNlcjM1MjY2OTM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dapplion",
    "html_url": "https://github.com/dapplion",
    "followers_url": "https://api.github.com/users/dapplion/followers",
    "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
    "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
    "organizations_url": "https://api.github.com/users/dapplion/orgs",
    "repos_url": "https://api.github.com/users/dapplion/repos",
    "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dapplion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/700665733",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1599#issuecomment-700665733",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599",
    "id": 700665733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDY2NTczMw==",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-29T12:21:27Z",
    "updated_at": "2020-09-29T12:21:27Z",
    "author_association": "MEMBER",
    "body": "I'm getting the same error building genesis for Spadina\r\n```\r\n âœ– Error: Error parsing JSON: Unexpected end of JSON input\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":[{\"address\":\"0x48b597f4b53c21b48ad95c7256b49d1779bd5890\",\"topics\":[\"0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5\"],\"data\":\"0x00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200\r\n    at parseJson (/home/lion/Code/eth2.0/lodestar/packages/lodestar/lib/eth1/jsonRpcHttpClient.js:104:11)\r\n    at fetchJson (/home/lion/Code/eth2.0/lodestar/packages/lodestar/lib/eth1/jsonRpcHttpClient.js:91:10)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (internal/process/task_queues.js:94:5)\r\n    at async JsonRpcHttpClient.fetch (/home/lion/Code/eth2.0/lodestar/packages/lodestar/lib/eth1/jsonRpcHttpClient.js:37:17)\r\n    at async Eth1Provider.getLogs (/home/lion/Code/eth2.0/lodestar/packages/lodestar/lib/eth1/eth1JsonRpcClient.js:74:21)\r\n    at async Eth1Provider.getDepositEvents (/home/lion/Code/eth2.0/lodestar/packages/lodestar/lib/eth1/eth1Provider.js:40:18)\r\n    at async Promise.all (index 0)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/700665733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/885683191",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1599#issuecomment-885683191",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1599",
    "id": 885683191,
    "node_id": "IC_kwDOCD5_Gc40ynP3",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-23T14:34:26Z",
    "updated_at": "2021-07-23T14:34:26Z",
    "author_association": "MEMBER",
    "body": "Should be handled by current code, retrying a smaller request if it gets truncated",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/885683191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/1244",
  "id": 666828601,
  "node_id": "MDU6SXNzdWU2NjY4Mjg2MDE=",
  "number": 1244,
  "title": "Initial Sync: out-of-sync peers",
  "user": {
    "login": "tuyennhv",
    "id": 10568965,
    "node_id": "MDQ6VXNlcjEwNTY4OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tuyennhv",
    "html_url": "https://github.com/tuyennhv",
    "followers_url": "https://api.github.com/users/tuyennhv/followers",
    "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
    "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
    "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
    "repos_url": "https://api.github.com/users/tuyennhv/repos",
    "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-07-28T07:16:57Z",
  "updated_at": "2020-07-29T05:37:40Z",
  "closed_at": "2020-07-29T05:37:40Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Describe the bug**\r\nAt initial sync time, at some point peers return no block and we keep increasing range up until the future:\r\n```\r\n2020-07-28 14:09:54  [SYNC]             info: Starting initial syncing\r\n2020-07-28 14:09:54  [SYNC]             info: Fetching blocks for 206425...206488 slot range\r\n2020-07-28 14:09:59  [SYNC]             info: Imported blocks for slots: 206425,206426,206427,206428,206430,206431,206432,206433,206434,206436,206437,206438,206439,206441,206442,206443,206444,206445,206446,206447,206448,206449,206450,206451,206452,206453,206454,206456,206457\r\n```\r\n```\r\n2020-07-28 14:10:01  [CHAIN]            info: Processed new chain head newChainHeadRoot=0xc934dd8c0bc87b8d4a2efa136ca93c57a7dfc8d2cdad581cd9a9d1e4342cceb7, slot=206456, epoch=6451\r\n2020-07-28 14:10:01  [CHAIN]            info: Processed new chain head newChainHeadRoot=0x0cd5954bc4bd26be4eba2ad3ba2589622020a6896edea33e7d48728088687a87, slot=206457, epoch=6451\r\n```\r\n```\r\n2020-07-28 14:10:01  [SYNC]             info: Fetching blocks for 206458...206521 slot range\r\n2020-07-28 14:10:01  [SYNC]             info: Imported blocks for slots:\r\n2020-07-28 14:10:01  [SYNC]             warn: Didn't receive any valid block in given range\r\n2020-07-28 14:10:01  [SYNC]             info: Fetching blocks for 206522...206585 slot range\r\n2020-07-28 14:10:02  [SYNC]             info: Imported blocks for slots:\r\n2020-07-28 14:10:02  [SYNC]             warn: Didn't receive any valid block in given range\r\n2020-07-28 14:10:02  [SYNC]             info: Fetching blocks for 206586...206649 slot range\r\n2020-07-28 14:10:02  [SYNC]             info: Imported blocks for slots:\r\n2020-07-28 14:10:02  [SYNC]             warn: Didn't receive any valid block in given range\r\n2020-07-28 14:10:02  [SYNC]             info: Fetching blocks for 206650...206713 slot range\r\n...\r\n2020-07-28 14:10:24  [SYNC]             info: Imported blocks for slots:\r\n2020-07-28 14:10:24  [SYNC]             warn: Didn't receive any valid block in given range\r\n2020-07-28 14:10:24  [SYNC]             info: Fetching blocks for 207930...207961 slot range\r\n2020-07-28 14:10:25  [SYNC]             info: Imported blocks for slots:\r\n2020-07-28 14:10:25  [SYNC]             warn: Didn't receive any valid block in given range\r\n2020-07-28 14:10:25  [SYNC]             info: Fetching blocks for 207962...207993 slot range\r\n...\r\n```\r\nI have to stop my node or it'll just continue like that. Current slot in https://altona.beaconcha.in/ is 207228\r\n\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/664829789",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1244#issuecomment-664829789",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244",
    "id": 664829789,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDgyOTc4OQ==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-28T07:31:16Z",
    "updated_at": "2020-07-28T07:31:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Maybe it has the same root cause like in #1243. In this test I have all `info` log levels so `verbose` messages are not logged.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/664829789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/664946877",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1244#issuecomment-664946877",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244",
    "id": 664946877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDk0Njg3Nw==",
    "user": {
      "login": "tuyennhv",
      "id": 10568965,
      "node_id": "MDQ6VXNlcjEwNTY4OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/10568965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tuyennhv",
      "html_url": "https://github.com/tuyennhv",
      "followers_url": "https://api.github.com/users/tuyennhv/followers",
      "following_url": "https://api.github.com/users/tuyennhv/following{/other_user}",
      "gists_url": "https://api.github.com/users/tuyennhv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tuyennhv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tuyennhv/subscriptions",
      "organizations_url": "https://api.github.com/users/tuyennhv/orgs",
      "repos_url": "https://api.github.com/users/tuyennhv/repos",
      "events_url": "https://api.github.com/users/tuyennhv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tuyennhv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-28T09:58:53Z",
    "updated_at": "2020-07-28T09:58:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "we get empty blocks returned because we queried out-of-sync peers at initial sync.\r\n\r\nwe can base on headslot of Status message but I'm afraid our latestStatus of a peer is not up-to-date while querying Status message every time we get a range is too expensive.\r\n\r\n@mpetrunic do you have any ideas?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/664946877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/665024224",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/1244#issuecomment-665024224",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/1244",
    "id": 665024224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTAyNDIyNA==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-28T12:59:09Z",
    "updated_at": "2020-07-28T12:59:09Z",
    "author_association": "MEMBER",
    "body": "Not sure, we should filter out out-of-sync peers (more than 100 slots behind head)?",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/665024224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

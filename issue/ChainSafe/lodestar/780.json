{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/780",
  "id": 596788927,
  "node_id": "MDU6SXNzdWU1OTY3ODg5Mjc=",
  "number": 780,
  "title": "CLI test error",
  "user": {
    "login": "jbrady42",
    "id": 3029160,
    "node_id": "MDQ6VXNlcjMwMjkxNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3029160?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbrady42",
    "html_url": "https://github.com/jbrady42",
    "followers_url": "https://api.github.com/users/jbrady42/followers",
    "following_url": "https://api.github.com/users/jbrady42/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbrady42/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbrady42/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbrady42/subscriptions",
    "organizations_url": "https://api.github.com/users/jbrady42/orgs",
    "repos_url": "https://api.github.com/users/jbrady42/repos",
    "events_url": "https://api.github.com/users/jbrady42/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbrady42/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-04-08T18:57:47Z",
  "updated_at": "2020-04-09T05:00:20Z",
  "closed_at": "2020-04-09T05:00:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n**Describe the bug**\r\n\r\n\r\nMain tests fail on lodestar-cli\r\n```\r\n error Command \"test:spec\" not found.\r\n```\r\n\r\n**Expected behavior**\r\n\r\nTests run to completion and do not exit uncleanly.\r\n\r\n**Steps to Reproduce**\r\n\r\n\r\n1. Fresh clone\r\n1. `yarn install`\r\n1. `lerna bootstrap`\r\n1. `lerna run test`\r\n\r\n**Screenshots**\r\n\r\n```\r\n@chainsafe/lodestar-cli: yarn run v1.22.4\r\n@chainsafe/lodestar-cli: $ yarn run check-types\r\n@chainsafe/lodestar-cli: $ tsc --noEmit\r\n@chainsafe/lodestar-cli: $ yarn test:unit && yarn test:spec && yarn test:e2e\r\n@chainsafe/lodestar-cli: $ TS_NODE_PROJECT=tsconfig.test.json nyc --cache-dir .nyc_output/.cache -e .ts mocha --file ./test/setup.ts --colors -r ts-node/register 'test/unit/**/*.test.ts'\r\n@chainsafe/lodestar-cli: \r\n@chainsafe/lodestar-cli:   [CLI] beacon\r\n@chainsafe/lodestar-cli:     ✓ Should be able to register\r\n@chainsafe/lodestar-cli:   [CLI] create-config\r\n@chainsafe/lodestar-cli:     ✓ Should be able to register\r\n@chainsafe/lodestar-cli:     ✓ Should throw error if output file exists\r\n@chainsafe/lodestar-cli:   [CLI] deposit\r\n@chainsafe/lodestar-cli:     ✓ Should be able to register\r\n@chainsafe/lodestar-cli:     ✓ Should throw error if unable to connect to eth1 network\r\n@chainsafe/lodestar-cli:     ✓ Should throw error if bot private key and mnemonic are not submitted\r\n@chainsafe/lodestar-cli:     ✓ Should throw error if mnemonic is invalid\r\n@chainsafe/lodestar-cli:   [CLI] interop\r\n@chainsafe/lodestar-cli:     ✓ should be able to register\r\n@chainsafe/lodestar-cli:     ✓ should throw error if missing quickstart and genesisTime and validatorCount (296ms)\r\n@chainsafe/lodestar-cli:   [CLI] eth1:dev\r\n@chainsafe/lodestar-cli:     ✓ Should be able to register\r\n@chainsafe/lodestar-cli:     ✓ Should start private network (912ms)\r\n@chainsafe/lodestar-cli:   [CLI] validator\r\n@chainsafe/lodestar-cli: (node:12924) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added to [process]. Use emitter.setMaxListeners() to increase limit\r\n@chainsafe/lodestar-cli:     ✓ Should be able to register\r\n@chainsafe/lodestar-cli:     - Should be able to run\r\n@chainsafe/lodestar-cli:   [CLI] wallet\r\n@chainsafe/lodestar-cli:     ✓ Should be able to register\r\n@chainsafe/lodestar-cli:     ✓ Should throw error if output file exists\r\n@chainsafe/lodestar-cli:   configuration\r\n@chainsafe/lodestar-cli:     ✓ should validate given toml config\r\n@chainsafe/lodestar-cli:   beacon node options\r\n@chainsafe/lodestar-cli:     ✓ should not have duplicate flags\r\n@chainsafe/lodestar-cli:   util/file\r\n@chainsafe/lodestar-cli:     ✓ @chainsafe/lodestar-config\r\n@chainsafe/lodestar-cli:     ✓ should generate config from toml file\r\n@chainsafe/lodestar-cli:   toml configuration\r\n@chainsafe/lodestar-cli:     ✓ should generate toml config from configurable fields\r\n@chainsafe/lodestar-cli:   cli option generation\r\n@chainsafe/lodestar-cli:     ✓ should generate commander options\r\n@chainsafe/lodestar-cli:     ✓ should convert cli options to config\r\n@chainsafe/lodestar-cli:   21 passing (7s)\r\n@chainsafe/lodestar-cli:   1 pending\r\n@chainsafe/lodestar-cli: --------------------------|----------|----------|----------|----------|-------------------|\r\n@chainsafe/lodestar-cli: File                      |  % Stmts | % Branch |  % Funcs |  % Lines | Uncovered Line #s |\r\n@chainsafe/lodestar-cli: --------------------------|----------|----------|----------|----------|-------------------|\r\n@chainsafe/lodestar-cli: All files                 |     62.9 |    54.63 |    48.68 |    63.45 |                   |\r\n@chainsafe/lodestar-cli:  src                      |    93.94 |       90 |    85.71 |    96.88 |                   |\r\n@chainsafe/lodestar-cli:   error.ts                |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   util.ts                 |    93.75 |       90 |    85.71 |    96.77 |                25 |\r\n@chainsafe/lodestar-cli:  src/commands             |     48.7 |       25 |    40.74 |    49.34 |                   |\r\n@chainsafe/lodestar-cli:   beacon.ts               |       48 |        0 |    33.33 |       48 |... 61,64,66,68,69 |\r\n@chainsafe/lodestar-cli:   create-config.ts        |    57.14 |       25 |    66.67 |    57.14 | 28,34,35,37,47,49 |\r\n@chainsafe/lodestar-cli:   deposit.ts              |    36.92 |    31.25 |       25 |     38.1 |... 96,197,205,206 |\r\n@chainsafe/lodestar-cli:   eth1-private-network.ts |    63.64 |      100 |    66.67 |    63.64 |       35,39,40,42 |\r\n@chainsafe/lodestar-cli:   index.ts                |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   validator.ts            |    57.14 |      100 |    33.33 |    57.14 | 27,28,30,37,38,39 |\r\n@chainsafe/lodestar-cli:   wallet.ts               |       50 |       50 |    66.67 |       50 |... 49,50,51,53,54 |\r\n@chainsafe/lodestar-cli:  src/commands/dev         |    61.76 |       28 |    66.67 |    62.38 |                   |\r\n@chainsafe/lodestar-cli:   command.ts              |    50.79 |    14.29 |       40 |    51.61 |... 51,152,154,165 |\r\n@chainsafe/lodestar-cli:   index.ts                |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   utils.ts                |    78.95 |    45.45 |      100 |    78.95 |... 47,48,61,68,72 |\r\n@chainsafe/lodestar-cli:  src/lodestar/api         |    42.86 |        0 |        0 |    42.86 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   utils.ts                |       20 |        0 |        0 |       20 |          4,7,8,10 |\r\n@chainsafe/lodestar-cli:  src/lodestar/api/rest    |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/chain       |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/db          |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/eth1        |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/interop     |    47.73 |        0 |        0 |    47.73 |                   |\r\n@chainsafe/lodestar-cli:   cli.ts                  |    33.33 |        0 |        0 |    33.33 | 15,16,17,19,20,21 |\r\n@chainsafe/lodestar-cli:   deposits.ts             |    42.86 |      100 |        0 |    42.86 |... 26,27,28,33,34 |\r\n@chainsafe/lodestar-cli:   keypairs.ts             |    58.33 |      100 |        0 |    58.33 |    14,15,21,22,23 |\r\n@chainsafe/lodestar-cli:   state.ts                |    55.56 |      100 |        0 |    55.56 |       17,18,24,25 |\r\n@chainsafe/lodestar-cli:  src/lodestar/metrics     |       50 |      100 |        0 |       50 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |       50 |      100 |        0 |       50 |                10 |\r\n@chainsafe/lodestar-cli:  src/lodestar/network     |       50 |      100 |       40 |       50 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |       50 |      100 |       40 |       50 |             11,22 |\r\n@chainsafe/lodestar-cli:  src/lodestar/node        |       60 |      100 |        0 |       60 |                   |\r\n@chainsafe/lodestar-cli:   loggerOptions.ts        |       20 |      100 |        0 |       20 |... 18,19,21,23,24 |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/opPool      |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/sync        |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |      100 |      100 |      100 |      100 |                   |\r\n@chainsafe/lodestar-cli:  src/lodestar/util        |    96.61 |    92.59 |      100 |    96.55 |                   |\r\n@chainsafe/lodestar-cli:   config.ts               |      100 |    94.12 |      100 |      100 |                47 |\r\n@chainsafe/lodestar-cli:   file.ts                 |    88.89 |      100 |      100 |    88.89 |             20,35 |\r\n@chainsafe/lodestar-cli:   toml.ts                 |      100 |       90 |      100 |      100 |                20 |\r\n@chainsafe/lodestar-cli:  src/lodestar/validator   |       50 |        0 |        0 |       50 |                   |\r\n@chainsafe/lodestar-cli:   options.ts              |       50 |        0 |        0 |       50 |          45,46,48 |\r\n@chainsafe/lodestar-cli: --------------------------|----------|----------|----------|----------|-------------------|\r\n@chainsafe/lodestar-cli: error Command \"test:spec\" not found.\r\n@chainsafe/lodestar-cli: info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n@chainsafe/lodestar-cli: error Command failed with exit code 1.\r\n@chainsafe/lodestar-cli: info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\nlerna ERR! yarn run test exited 1 in '@chainsafe/lodestar-cli'\r\n\r\n\r\n```\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Ubuntu Linux 19.10\r\n - Branch: Master\r\n - Commit hash: cef50a\r\n - Node: \r\n```\r\n{\r\n  npm: '6.12.1',\r\n  node: '12.13.1',\r\n}\r\n\r\n```\r\n",
  "closed_by": {
    "login": "wemeetagain",
    "id": 1348242,
    "node_id": "MDQ6VXNlcjEzNDgyNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1348242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wemeetagain",
    "html_url": "https://github.com/wemeetagain",
    "followers_url": "https://api.github.com/users/wemeetagain/followers",
    "following_url": "https://api.github.com/users/wemeetagain/following{/other_user}",
    "gists_url": "https://api.github.com/users/wemeetagain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wemeetagain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wemeetagain/subscriptions",
    "organizations_url": "https://api.github.com/users/wemeetagain/orgs",
    "repos_url": "https://api.github.com/users/wemeetagain/repos",
    "events_url": "https://api.github.com/users/wemeetagain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wemeetagain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/611171893",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/780#issuecomment-611171893",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/780",
    "id": 611171893,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTE3MTg5Mw==",
    "user": {
      "login": "mpetrunic",
      "id": 8836210,
      "node_id": "MDQ6VXNlcjg4MzYyMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8836210?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mpetrunic",
      "html_url": "https://github.com/mpetrunic",
      "followers_url": "https://api.github.com/users/mpetrunic/followers",
      "following_url": "https://api.github.com/users/mpetrunic/following{/other_user}",
      "gists_url": "https://api.github.com/users/mpetrunic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mpetrunic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mpetrunic/subscriptions",
      "organizations_url": "https://api.github.com/users/mpetrunic/orgs",
      "repos_url": "https://api.github.com/users/mpetrunic/repos",
      "events_url": "https://api.github.com/users/mpetrunic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mpetrunic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-08T20:18:20Z",
    "updated_at": "2020-04-08T20:18:20Z",
    "author_association": "MEMBER",
    "body": "Spec tests are in spec-test-runner package. You can run it with `lerna run test:spec` or with yarn from within that package. ",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/611171893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

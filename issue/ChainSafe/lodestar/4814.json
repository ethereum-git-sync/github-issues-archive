{
  "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814",
  "repository_url": "https://api.github.com/repos/ChainSafe/lodestar",
  "labels_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814/labels{/name}",
  "comments_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814/comments",
  "events_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814/events",
  "html_url": "https://github.com/ChainSafe/lodestar/issues/4814",
  "id": 1465187877,
  "node_id": "I_kwDOCD5_Gc5XVP4l",
  "number": 4814,
  "title": "Don't log API errors for 'expected' errors",
  "user": {
    "login": "philknows",
    "id": 58080811,
    "node_id": "MDQ6VXNlcjU4MDgwODEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/58080811?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/philknows",
    "html_url": "https://github.com/philknows",
    "followers_url": "https://api.github.com/users/philknows/followers",
    "following_url": "https://api.github.com/users/philknows/following{/other_user}",
    "gists_url": "https://api.github.com/users/philknows/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/philknows/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/philknows/subscriptions",
    "organizations_url": "https://api.github.com/users/philknows/orgs",
    "repos_url": "https://api.github.com/users/philknows/repos",
    "events_url": "https://api.github.com/users/philknows/events{/privacy}",
    "received_events_url": "https://api.github.com/users/philknows/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4116885308,
      "node_id": "LA_kwDOCD5_Gc71Yq88",
      "url": "https://api.github.com/repos/ChainSafe/lodestar/labels/scope-ux",
      "name": "scope-ux",
      "color": "980043",
      "default": false,
      "description": "Issues for CLI UX or general consumer UX."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-11-26T15:46:14Z",
  "updated_at": "2022-12-04T14:06:25Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Currently, we are logging errors for light client partial updates that we cannot serve because the node is still syncing. \r\n\r\n```\r\nNov-26 15:10:34.905[rest]            error: Req req-1tgi getUpdates error  No partialUpdate available for period XXX\r\nError: No partialUpdate available for period XXX\r\n    at LightClientServer.getUpdate (file:///usr/app/packages/beacon-node/src/chain/lightClient/index.ts:289:13)\r\n    at async Promise.all (index 0)\r\n    at Object.getUpdates (file:///usr/app/packages/beacon-node/src/api/impl/lightclient/index.ts:49:23)\r\n    at Object.handler (file:///usr/app/packages/api/src/utils/server/genericJsonServer.ts:41:23)\r\n```\r\n\r\nGenerally, our REST APIs are hit by the validator for things like getting duties. Knowing errors are important, however, using our node as a public endpoint for things like serving partialUpdate for light clients should ideally not log this, especially during sync. \r\n\r\nSolution:\r\nWhen syncing, these types of errors should not be displayed as an error. Because it's not a user config error or requires action on the part of the user. These errors are triggered from external requests and just requires more syncing time for the error to go away. ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1336420568",
    "html_url": "https://github.com/ChainSafe/lodestar/issues/4814#issuecomment-1336420568",
    "issue_url": "https://api.github.com/repos/ChainSafe/lodestar/issues/4814",
    "id": 1336420568,
    "node_id": "IC_kwDOCD5_Gc5PqCjY",
    "user": {
      "login": "dapplion",
      "id": 35266934,
      "node_id": "MDQ6VXNlcjM1MjY2OTM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/35266934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dapplion",
      "html_url": "https://github.com/dapplion",
      "followers_url": "https://api.github.com/users/dapplion/followers",
      "following_url": "https://api.github.com/users/dapplion/following{/other_user}",
      "gists_url": "https://api.github.com/users/dapplion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dapplion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dapplion/subscriptions",
      "organizations_url": "https://api.github.com/users/dapplion/orgs",
      "repos_url": "https://api.github.com/users/dapplion/repos",
      "events_url": "https://api.github.com/users/dapplion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dapplion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-04T14:06:25Z",
    "updated_at": "2022-12-04T14:06:25Z",
    "author_association": "MEMBER",
    "body": "A proper solution would be:\r\n- Add flag to enable Beacon node in \"public API server mode\"\r\n- If that option is true, then API logger should filter errors by their code. The API handlers should type 'expected' errors such as update not available with a dedicated HTTP status error code.",
    "reactions": {
      "url": "https://api.github.com/repos/ChainSafe/lodestar/issues/comments/1336420568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

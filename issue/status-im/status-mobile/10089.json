{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/10089",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/10089/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/10089/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/10089/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/10089",
  "id": 571496014,
  "node_id": "MDU6SXNzdWU1NzE0OTYwMTQ=",
  "number": 10089,
  "title": "Override the behaviour of public chat' unread messages indicator",
  "user": {
    "login": "errorists",
    "id": 4932774,
    "node_id": "MDQ6VXNlcjQ5MzI3NzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4932774?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/errorists",
    "html_url": "https://github.com/errorists",
    "followers_url": "https://api.github.com/users/errorists/followers",
    "following_url": "https://api.github.com/users/errorists/following{/other_user}",
    "gists_url": "https://api.github.com/users/errorists/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/errorists/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/errorists/subscriptions",
    "organizations_url": "https://api.github.com/users/errorists/orgs",
    "repos_url": "https://api.github.com/users/errorists/repos",
    "events_url": "https://api.github.com/users/errorists/events{/privacy}",
    "received_events_url": "https://api.github.com/users/errorists/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 795655580,
      "node_id": "MDU6TGFiZWw3OTU2NTU1ODA=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/chat",
      "name": "chat",
      "color": "f70cb0",
      "default": false,
      "description": null
    },
    {
      "id": 1121047610,
      "node_id": "MDU6TGFiZWwxMTIxMDQ3NjEw",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/UI/UX%20improvements",
      "name": "UI/UX improvements",
      "color": "2f01c4",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-02-26T16:10:40Z",
  "updated_at": "2020-04-29T20:29:49Z",
  "closed_at": "2020-03-03T13:28:20Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Problem\n\nPublic chats count all new messages for the purpose of incrementing the unread counter. That doesn't perform well in actual use since not all messages are created equal and it's impossible to tell how much of those you should really care about. Often that leaves you with spiralling numbers that you stop caring about, that are hard to keep track of. Instead, public chats should differentiate between any unread message and messages that are directed at you like mentions or direct replies.\n\n## Implementation\n\n<img width=\"548\" alt=\"Screenshot 2020-02-26 at 16 55 48\" src=\"https://user-images.githubusercontent.com/4932774/75362372-ea847f00-58b8-11ea-80b8-a00985482c05.png\">\n\nFor public chats, instead of counting each unread message against the counter, we place a binary 'yes/no' indicator that shows if this chat received any new messages. If any of those messages mention you or are replies to your message, we increase the counter by their total number. \n\nOpening the chat clears the indicator, at least until we have better way of controlling unread messages, see #6375 \n\nThe unread messages indicator is a 12px high and wide blue circle that's placed directly at the center of where an unread counter appears (so if the unread counter is positioned 16px from the right screen edge, and is 22px in size, this means that the smaller indicator is placed 21px from the edge - (22-12) / 2 + 16\n\nThe same rules apply for the total counter placed in the Tab Bar, public chat messages which aren't mentions or replies, don't increase the total count. If you only have unread messages in public chats, we similarly place a 12px indicator instead of unread badge. \n\n<img width=\"927\" alt=\"Screenshot 2020-02-26 at 17 03 44\" src=\"https://user-images.githubusercontent.com/4932774/75363146-0177a100-58ba-11ea-982f-29d25377aa45.png\">\n\nIt's placed 12px from the bottom and 18px from the left edge of the chat icon and includes a 2px white border to separate it from the icon. When in doubt check[ Figma](https://www.figma.com/file/aS1ct66VQ6V0cio7vSqS8UoG/Chat?node-id=8499%3A177).\n\n## Acceptance Criteria\n\nMessages in public chats that aren't mentions or direct replies, don't count against the total unread message count, only mention and direct replies. The unread indicator is implemented according to spec.\n\n## Notes\n\n[Designs in Figma](https://www.figma.com/file/aS1ct66VQ6V0cio7vSqS8UoG/Chat?node-id=8499%3A140)\n\nThanks!",
  "closed_by": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/10089/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/10089/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/592379228",
    "html_url": "https://github.com/status-im/status-mobile/issues/10089#issuecomment-592379228",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/10089",
    "id": 592379228,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MjM3OTIyOA==",
    "user": {
      "login": "rachelhamlin",
      "id": 15470435,
      "node_id": "MDQ6VXNlcjE1NDcwNDM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15470435?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rachelhamlin",
      "html_url": "https://github.com/rachelhamlin",
      "followers_url": "https://api.github.com/users/rachelhamlin/followers",
      "following_url": "https://api.github.com/users/rachelhamlin/following{/other_user}",
      "gists_url": "https://api.github.com/users/rachelhamlin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rachelhamlin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rachelhamlin/subscriptions",
      "organizations_url": "https://api.github.com/users/rachelhamlin/orgs",
      "repos_url": "https://api.github.com/users/rachelhamlin/repos",
      "events_url": "https://api.github.com/users/rachelhamlin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rachelhamlin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-28T07:08:41Z",
    "updated_at": "2020-02-28T07:08:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is an awesome idea Maciej. I like it simply because it will fix the fact that the count is often wrong/sticky for messages I've already read. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/592379228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6410",
  "id": 371880460,
  "node_id": "MDU6SXNzdWUzNzE4ODA0NjA=",
  "number": 6410,
  "title": "Message history is not fetched for desktop (reproducible on some accounts)",
  "user": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 956251551,
      "node_id": "MDU6TGFiZWw5NTYyNTE1NTE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/high-severity",
      "name": "high-severity",
      "color": "c91a34",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-10-19T09:37:22Z",
  "updated_at": "2018-10-22T17:11:09Z",
  "closed_at": "2018-10-22T17:11:09Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: when you join to channel, history for last 24h is not fetched for desktop. For example, if you join to channel #a from mobile, send several messages here and then join to #a in desktop - you cannot see these messages.\r\nReproducible for my account only on desktop. \r\n\r\nCannot reproduce it on fresh or restored account, only on existing installation (using it from nightly to nightly, so every day after unlocking screen I'm losing all history when I was AFK).\r\n\r\n\r\n#### Expected behavior\r\nhistory for last 24h is fetched, can see \"From IOS\" message\r\n\r\n#### Actual behavior\r\nno history is fetched; channel is empty\r\n\r\n### Reproduction\r\n*Prerequisites:* account `User A` on desktop app, `User B` on mobile app\r\n\r\n- as user B: open Status, join any public channel (i.e. #chuone), send message (i.e. \"From IOS\")\r\n- as user A: log in, join #chuone, check history.\r\n\r\nYou can check that channel is not empty by any other new user (works on both mobile and desktop)\r\n\r\n### Additional Information\r\n\r\n* Status version: nigthly 19/10/218\r\n* Operating System: Mac OSx\r\n\r\n#### Logs\r\n\r\n* Video: http://take.ms/bFXQj\r\n* Geth.log: [geth_messages.log](https://github.com/status-im/status-react/files/2495228/geth_messages.log)\r\n* StatusIm.log: \r\n[status_messages.log](https://github.com/status-im/status-react/files/2495233/status_messages.log)\r\n\r\nFeel free to ping me for mnemonic phrase or any other data that can help to debug an issue.\n\n<blockquote><img src=\"https://api.monosnap.com/rpc/file/download?id=XwVppwjR86Lh2hiOq2I1CGQuYppWRo&type=preview\" width=\"48\" align=\"right\"><div>Monosnap screenshot tool</div><div><strong><a href=\"https://monosnap.com/file/XwVppwjR86Lh2hiOq2I1CGQuYppWRo\">File \"screencast 2018-10-19 12-17-36.mp4\"</a></strong></div><div>Monosnap â€” the best tool to take & share your screenshots.</div></blockquote>",
  "closed_by": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6410/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431346496",
    "html_url": "https://github.com/status-im/status-mobile/issues/6410#issuecomment-431346496",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
    "id": 431346496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM0NjQ5Ng==",
    "user": {
      "login": "yenda",
      "id": 1181225,
      "node_id": "MDQ6VXNlcjExODEyMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yenda",
      "html_url": "https://github.com/yenda",
      "followers_url": "https://api.github.com/users/yenda/followers",
      "following_url": "https://api.github.com/users/yenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
      "organizations_url": "https://api.github.com/users/yenda/orgs",
      "repos_url": "https://api.github.com/users/yenda/repos",
      "events_url": "https://api.github.com/users/yenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yenda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-19T12:28:54Z",
    "updated_at": "2018-10-19T12:28:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@churik could you check that this problem isn't caused by hongkong mailserver ?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431346496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431347126",
    "html_url": "https://github.com/status-im/status-mobile/issues/6410#issuecomment-431347126",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
    "id": 431347126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM0NzEyNg==",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-19T12:31:16Z",
    "updated_at": "2018-10-19T12:31:16Z",
    "author_association": "MEMBER",
    "body": "@yenda \r\nused  mail-02.do-ams3.eth.beta mailservers",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431347126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431353566",
    "html_url": "https://github.com/status-im/status-mobile/issues/6410#issuecomment-431353566",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
    "id": 431353566,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM1MzU2Ng==",
    "user": {
      "login": "yenda",
      "id": 1181225,
      "node_id": "MDQ6VXNlcjExODEyMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yenda",
      "html_url": "https://github.com/yenda",
      "followers_url": "https://api.github.com/users/yenda/followers",
      "following_url": "https://api.github.com/users/yenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
      "organizations_url": "https://api.github.com/users/yenda/orgs",
      "repos_url": "https://api.github.com/users/yenda/repos",
      "events_url": "https://api.github.com/users/yenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yenda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-19T12:55:27Z",
    "updated_at": "2018-10-19T12:55:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "This error in the log is definitely the reason why no history is being fetched, but there isn't enough information for me to figure out how your account got to that state.\r\nCould you try to find a reproducible way to get an account that gets into that state ?\r\n\r\n ``` \"ERROR [status-im.utils.async:19] - failed to run task Error: transport-inbox-topic.topic must be of type 'string', got 'null' (null)\"```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431353566/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431355004",
    "html_url": "https://github.com/status-im/status-mobile/issues/6410#issuecomment-431355004",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
    "id": 431355004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTM1NTAwNA==",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-19T13:00:11Z",
    "updated_at": "2018-10-19T13:00:11Z",
    "author_association": "MEMBER",
    "body": "@yenda \r\ncan I have any clue on what it can be related?\r\nChat or message amount, contact requests, or reasons can be the same as here: https://github.com/status-im/status-react/issues/6114?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431355004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431763419",
    "html_url": "https://github.com/status-im/status-mobile/issues/6410#issuecomment-431763419",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
    "id": 431763419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTc2MzQxOQ==",
    "user": {
      "login": "0xc1c4da",
      "id": 2714786,
      "node_id": "MDQ6VXNlcjI3MTQ3ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2714786?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xc1c4da",
      "html_url": "https://github.com/0xc1c4da",
      "followers_url": "https://api.github.com/users/0xc1c4da/followers",
      "following_url": "https://api.github.com/users/0xc1c4da/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xc1c4da/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xc1c4da/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xc1c4da/subscriptions",
      "organizations_url": "https://api.github.com/users/0xc1c4da/orgs",
      "repos_url": "https://api.github.com/users/0xc1c4da/repos",
      "events_url": "https://api.github.com/users/0xc1c4da/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xc1c4da/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-22T07:46:38Z",
    "updated_at": "2018-10-22T07:46:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "I haven't received any private messages or any public chat history on mobile or desktop unless i'm online ( I know because i still receive push notifications). If it's public chat history I seem to get only 24 hours at most but I have rather dramatic inconsistencies in public chat history when comparing desktop and mobile ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431763419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431769053",
    "html_url": "https://github.com/status-im/status-mobile/issues/6410#issuecomment-431769053",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6410",
    "id": 431769053,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTc2OTA1Mw==",
    "user": {
      "login": "oskarth",
      "id": 1552237,
      "node_id": "MDQ6VXNlcjE1NTIyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1552237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oskarth",
      "html_url": "https://github.com/oskarth",
      "followers_url": "https://api.github.com/users/oskarth/followers",
      "following_url": "https://api.github.com/users/oskarth/following{/other_user}",
      "gists_url": "https://api.github.com/users/oskarth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oskarth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oskarth/subscriptions",
      "organizations_url": "https://api.github.com/users/oskarth/orgs",
      "repos_url": "https://api.github.com/users/oskarth/repos",
      "events_url": "https://api.github.com/users/oskarth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oskarth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-22T08:15:39Z",
    "updated_at": "2018-10-22T08:19:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is just a feeling, but it seems to me like we've had a few incidents last few weeks that have lead to less reliability, both \"perceived\" and real. This leads to a loss of trust for users, including core contributors.\r\n\r\nPerhaps we can get to the root of the problem, and see what we can do to stop it in the future? For example, changes to mailserver logic could probably be inspected under more conditions before merging, as well as testing upgrade paths rather than dumping that responsibility on users (breaking changes in a Discuss thread, rather than dealing at it at install script level).\r\n\r\nAside from the HK node, I haven't seen any indications of problems on the cluster level last month or so. That could of course be completely wrong, but it seems to me like it's mostly client side issues.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431769053/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

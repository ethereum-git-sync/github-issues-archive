{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/16254",
  "id": 1753212509,
  "node_id": "I_kwDOAx4p2c5of-Zd",
  "number": 16254,
  "title": "Add new system messages in chat history when accepting a contact request",
  "user": {
    "login": "qoqobolo",
    "id": 67952253,
    "node_id": "MDQ6VXNlcjY3OTUyMjUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qoqobolo",
    "html_url": "https://github.com/qoqobolo",
    "followers_url": "https://api.github.com/users/qoqobolo/followers",
    "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
    "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
    "repos_url": "https://api.github.com/users/qoqobolo/repos",
    "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 933023569,
      "node_id": "MDU6TGFiZWw5MzMwMjM1Njk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/feature",
      "name": "feature",
      "color": "172b9e",
      "default": false,
      "description": "feature requests"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/65",
    "html_url": "https://github.com/status-im/status-mobile/milestone/65",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/65/labels",
    "id": 9283773,
    "node_id": "MI_kwDOAx4p2c4Ajai9",
    "number": 65,
    "title": "1.24.0 - Alpha",
    "description": "- Sharing:\r\n  Allow users to share status content on different platforms\r\n\r\n- Polishing and completing:\r\n  messaging/communities/onboarding/shell",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 44,
    "closed_issues": 45,
    "state": "open",
    "created_at": "2023-04-14T11:58:10Z",
    "updated_at": "2023-06-14T18:07:48Z",
    "due_on": "2023-07-13T07:00:00Z",
    "closed_at": null
  },
  "comments": 7,
  "created_at": "2023-06-12T17:21:50Z",
  "updated_at": "2023-06-14T17:46:27Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## UPDATE\r\n\r\nFor now, we only should show the `[Alicia] is now a contact` message both for sender and receiver of CR after the CR approval. \r\n\r\nDesign: https://www.figma.com/file/7KIYbhoqNGAIFonE0w9TDz/Messages-for-Mobile?type=design&node-id=1694%3A380446&t=53g6tG6gOO7nUzqh-1\r\n\r\n<img width=\"366\" alt=\"Screenshot 2023-06-13 at 12 56 52\" src=\"https://github.com/status-im/status-mobile/assets/67952253/acaf9d62-7604-41d5-b410-d336d44e1339\">\r\n\r\nAdditional requirement:\r\n\r\n> Contact request card and \"You sent a contact request to...\" message should not appear in the conversation, only in notification center, so we can hide/delete from here\r\n\r\n---\r\n\r\n## Problem \r\n\r\nOn the first opening of the chat immediately after the contact request approval, messages with chat keys and some deleted messages appear in the history.\r\n\r\nJudging by the e2e tests, this behavior was first introduced in this PR https://github.com/status-im/status-mobile/pull/16244 \r\n\r\n#### Expected behavior\r\nOnly the `Contact request` message in the chat history \r\n\r\n#### Actual behavior\r\n**Sender** \r\n\r\n<img width=\"396\" alt=\"Screenshot 2023-06-12 at 19 05 49\" src=\"https://github.com/status-im/status-mobile/assets/67952253/87a08a7e-abb2-4e56-a92e-51c0966c0192\">\r\n\r\n\r\n**Receiver** \r\n\r\nhttps://github.com/status-im/status-mobile/assets/67952253/2f61a255-aa23-4d54-b4ed-9ab104aa599e\r\n\r\n### Reproduction\r\n\r\n1. UserA sends CR to UserB\r\n2. UserB accepts CR\r\n3. Both users check the chat\r\n\r\n### Additional Information\r\n\r\n- Status version: develop 12/06 \r\n- Operating System: Android, iOS\r\n\r\n\r\n[comment]: # (Please, add logs/notes if necessary)\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1587763814",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1587763814",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1587763814,
    "node_id": "IC_kwDOAx4p2c5eo1pm",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-12T17:31:10Z",
    "updated_at": "2023-06-12T17:31:10Z",
    "author_association": "MEMBER",
    "body": "This is a feature added by desktop, they are system messages indicating your status.\r\n\r\nThere are some designs for system messages here, but I don't see anything for contact requests https://www.figma.com/file/PPWkgOYlZZDxZv5SDGsZVV/Posts-%26-Attachments-for-Mobile?type=design&node-id=6538-427715&t=jmOhurtEKZ6AWcnN-4 \r\n\r\n@pedro-et @John-44 are there any designs ready to be implemented? otherwise we can hide those for the time being\r\n\r\n\r\nthanks",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1587763814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590801082",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1590801082",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1590801082,
    "node_id": "IC_kwDOAx4p2c5e0bK6",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T09:07:36Z",
    "updated_at": "2023-06-14T09:15:14Z",
    "author_association": "MEMBER",
    "body": "SENDER:\r\n1)\r\n```clojure\r\n:text \"@0x040d1b8935ef46b7f5befeeb0ef067a17a4c04a245571cb8bccd9f3f3d028c4a345a5e7d32c444e87eb51edea3916ee2d5a07e16cacdfe233fe1cf862f71298eb5 added you as a contact\"\r\n:content-type 15\r\n```\r\n2) \r\n```clojure\r\n:text \"You sent a contact request to @0x040d1b8935ef46b7f5befeeb0ef067a17a4c04a245571cb8bccd9f3f3d028c4a345a5e7d32c444e87eb51edea3916ee2d5a07e16cacdfe233fe1cf862f71298eb5\r\n:content-type 15\r\n```\r\n3)\r\n```clojure\r\n:text \"Please add me to your contacts\"\r\n:content-type 11\r\n```\r\nRECEIVER:\r\n1)\r\n```clojure\r\n:text\" You added @0x04c2881b4d283d8eedc08373e8bc5ec4022205ae4d133cc05c51909988574e858a34ece63996c79896f5db44bb1f688af83d582c893239bf81994ab623996f1d1d as a contact\"\r\n:content-type 15\r\n```\r\n2)\r\n```clojure\r\n:text \"@0x04c2881b4d283d8eedc08373e8bc5ec4022205ae4d133cc05c51909988574e858a34ece63996c79896f5db44bb1f688af83d582c893239bf81994ab623996f1d1d added you as a contact\"\r\n:content-type 15\r\n:deleted? true\r\n```\r\n3)\r\n```clojure\r\n:text \"@0x04c2881b4d283d8eedc08373e8bc5ec4022205ae4d133cc05c51909988574e858a34ece63996c79896f5db44bb1f688af83d582c893239bf81994ab623996f1d1d sent you a contact request\"\r\n:content-type 15\r\n:deleted? true\r\n```\r\n4)\r\n```clojure\r\n:text \"Please add me to your contacts\"\r\n:content-type 11\r\n```\r\n\r\n\r\nSYSTEM_MESSAGE_MUTUAL_STATE_UPDATE = 15; is not implemented on mobile",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590801082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590805624",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1590805624",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1590805624,
    "node_id": "IC_kwDOAx4p2c5e0cR4",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T09:10:37Z",
    "updated_at": "2023-06-14T09:10:37Z",
    "author_association": "MEMBER",
    "body": "lots of questions ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590805624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590810884",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1590810884",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1590810884,
    "node_id": "IC_kwDOAx4p2c5e0dkE",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T09:13:39Z",
    "updated_at": "2023-06-14T09:13:39Z",
    "author_association": "MEMBER",
    "body": "@cammellos any thoughts on how this should be implemented? i would say we should just show these messages, but for some reason for the receiver they are deleted, and the description in this task has only one message instead of two in the current implementation, should we refactor status-go or ? cc @MishkaRogachev ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590810884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590817989",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1590817989",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1590817989,
    "node_id": "IC_kwDOAx4p2c5e0fTF",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T09:17:48Z",
    "updated_at": "2023-06-14T09:17:48Z",
    "author_association": "MEMBER",
    "body": "status-go: https://github.com/status-im/status-go/pull/3519\r\ndesktop: https://github.com/status-im/status-desktop/issues/10395",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590817989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590830258",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1590830258",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1590830258,
    "node_id": "IC_kwDOAx4p2c5e0iSy",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T09:24:59Z",
    "updated_at": "2023-06-14T09:24:59Z",
    "author_association": "MEMBER",
    "body": "@MishkaRogachev might know why they are deleted, it's not a behavior I would expect",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1590830258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1591730029",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1591730029",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1591730029,
    "node_id": "IC_kwDOAx4p2c5e399t",
    "user": {
      "login": "MishkaRogachev",
      "id": 2522130,
      "node_id": "MDQ6VXNlcjI1MjIxMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2522130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MishkaRogachev",
      "html_url": "https://github.com/MishkaRogachev",
      "followers_url": "https://api.github.com/users/MishkaRogachev/followers",
      "following_url": "https://api.github.com/users/MishkaRogachev/following{/other_user}",
      "gists_url": "https://api.github.com/users/MishkaRogachev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MishkaRogachev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MishkaRogachev/subscriptions",
      "organizations_url": "https://api.github.com/users/MishkaRogachev/orgs",
      "repos_url": "https://api.github.com/users/MishkaRogachev/repos",
      "events_url": "https://api.github.com/users/MishkaRogachev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MishkaRogachev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-14T17:46:26Z",
    "updated_at": "2023-06-14T17:46:26Z",
    "author_association": "NONE",
    "body": "Hi! @flexsurfer we can set up a meeting in which I could explain how it was implemented and what the problems might be.  Here is the short summary: \r\n\r\nThere are 3 kinds of new messages. These are all local system message type  `ChatMessage_SYSTEM_MESSAGE_MUTUAL_STATE_UPDATE`. Messages are generated locally, both on the sender and receiver sides. And there are six conditions when we use this message:\r\n  1) When we send a CR to a contact, we add a `MutualStateUpdateTypeSent` message.\r\n  2) When we receive a CR from a contact, we add a `MutualStateUpdateTypeSent` message.\r\n  3) When we accept the CR from a contact, we *delete* previously created `MutualStateUpdateTypeSent`and add a `MutualStateUpdateTypeAdded` message \r\n  4) When we handle an accepted CR previously sent to a contact, we also  *delete* the previously created `MutualStateUpdateTypeSent` and add a `MutualStateUpdateTypeAdded` message.\r\n  5) When we remove a contact, we add `MutualStateUpdateTypeRemoved`.\r\n  6) When we get removed by a contact, we add `MutualStateUpdateTypeRemoved`.\r\n  \r\n  That can probably cause som problems mentioned before:\r\n  - Response from add/remove contact endpoints can contain more than 1 message\r\n  - As i can see mobile client shows `Message deleted for everyone` for soft deleted messages. Here we can switch to hard delete or update existing `MutualStateUpdateTypeSent` instead of delete/add",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1591730029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

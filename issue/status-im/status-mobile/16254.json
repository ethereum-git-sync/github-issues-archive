{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/16254",
  "id": 1753212509,
  "node_id": "I_kwDOAx4p2c5of-Zd",
  "number": 16254,
  "title": "Extra messages in chat history when accepting a contact request",
  "user": {
    "login": "qoqobolo",
    "id": 67952253,
    "node_id": "MDQ6VXNlcjY3OTUyMjUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qoqobolo",
    "html_url": "https://github.com/qoqobolo",
    "followers_url": "https://api.github.com/users/qoqobolo/followers",
    "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
    "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
    "repos_url": "https://api.github.com/users/qoqobolo/repos",
    "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/65",
    "html_url": "https://github.com/status-im/status-mobile/milestone/65",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/65/labels",
    "id": 9283773,
    "node_id": "MI_kwDOAx4p2c4Ajai9",
    "number": 65,
    "title": "1.24.0 - Alpha",
    "description": "- Sharing:\r\n  Allow users to share status content on different platforms\r\n\r\n- Polishing and completing:\r\n  messaging/communities/onboarding/shell",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 46,
    "closed_issues": 39,
    "state": "open",
    "created_at": "2023-04-14T11:58:10Z",
    "updated_at": "2023-06-13T10:59:24Z",
    "due_on": "2023-07-13T07:00:00Z",
    "closed_at": null
  },
  "comments": 1,
  "created_at": "2023-06-12T17:21:50Z",
  "updated_at": "2023-06-13T10:59:45Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## UPDATE\r\n\r\nFor now, we only should show the `[Alicia] is now a contact` message both for sender and receiver of CR after the CR approval. \r\n\r\nDesign: https://www.figma.com/file/7KIYbhoqNGAIFonE0w9TDz/Messages-for-Mobile?type=design&node-id=1694%3A380446&t=53g6tG6gOO7nUzqh-1\r\n\r\n<img width=\"366\" alt=\"Screenshot 2023-06-13 at 12 56 52\" src=\"https://github.com/status-im/status-mobile/assets/67952253/acaf9d62-7604-41d5-b410-d336d44e1339\">\r\n\r\nAdditional requirement:\r\n\r\n> Contact request card and \"You sent a contact request to...\" message should not appear in the conversation, only in notification center, so we can hide/delete from here\r\n\r\n---\r\n\r\n## Problem \r\n\r\nOn the first opening of the chat immediately after the contact request approval, messages with chat keys and some deleted messages appear in the history.\r\n\r\nJudging by the e2e tests, this behavior was first introduced in this PR https://github.com/status-im/status-mobile/pull/16244 \r\n\r\n#### Expected behavior\r\nOnly the `Contact request` message in the chat history \r\n\r\n#### Actual behavior\r\n**Sender** \r\n\r\n<img width=\"396\" alt=\"Screenshot 2023-06-12 at 19 05 49\" src=\"https://github.com/status-im/status-mobile/assets/67952253/87a08a7e-abb2-4e56-a92e-51c0966c0192\">\r\n\r\n\r\n**Receiver** \r\n\r\nhttps://github.com/status-im/status-mobile/assets/67952253/2f61a255-aa23-4d54-b4ed-9ab104aa599e\r\n\r\n### Reproduction\r\n\r\n1. UserA sends CR to UserB\r\n2. UserB accepts CR\r\n3. Both users check the chat\r\n\r\n### Additional Information\r\n\r\n- Status version: develop 12/06 \r\n- Operating System: Android, iOS\r\n\r\n\r\n[comment]: # (Please, add logs/notes if necessary)\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1587763814",
    "html_url": "https://github.com/status-im/status-mobile/issues/16254#issuecomment-1587763814",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16254",
    "id": 1587763814,
    "node_id": "IC_kwDOAx4p2c5eo1pm",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-12T17:31:10Z",
    "updated_at": "2023-06-12T17:31:10Z",
    "author_association": "MEMBER",
    "body": "This is a feature added by desktop, they are system messages indicating your status.\r\n\r\nThere are some designs for system messages here, but I don't see anything for contact requests https://www.figma.com/file/PPWkgOYlZZDxZv5SDGsZVV/Posts-%26-Attachments-for-Mobile?type=design&node-id=6538-427715&t=jmOhurtEKZ6AWcnN-4 \r\n\r\n@pedro-et @John-44 are there any designs ready to be implemented? otherwise we can hide those for the time being\r\n\r\n\r\nthanks",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1587763814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

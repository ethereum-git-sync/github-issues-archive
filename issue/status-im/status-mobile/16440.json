{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/16440",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/16440/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/16440/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/16440/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/16440",
  "id": 1780658612,
  "node_id": "I_kwDOAx4p2c5qIrG0",
  "number": 16440,
  "title": "Solve issue with Nightly E2E tests ignoring Sauce Labs limits",
  "user": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 916015974,
      "node_id": "MDU6TGFiZWw5MTYwMTU5NzQ=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/e2e%20test%20blocker",
      "name": "e2e test blocker",
      "color": "bc0753",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-06-29T11:44:01Z",
  "updated_at": "2023-06-29T11:50:59Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Currently we have only 1 build session with 8 devices(which is silly slow), and this limit is enforced simply by Jenkins job config:\r\n\r\n![image](https://github.com/status-im/status-mobile/assets/2212681/a55fd181-1511-4783-b62d-aafbeb4bd635)\r\n\r\nhttps://ci.status.im/job/status-mobile/job/e2e/job/status-app-prs/configure\r\n\r\nThis works well enough for our development instance of Jenkins at https://ci.status.im/, but it does not take into account our separate release instance which runs [mobile nightly builds](https://ci.infra.status.im/job/status-mobile/job/nightly/) which also trigger end-to-end tests, except no limit is enforced due to it being a separate Jenkins instance.\r\n\r\nThis result is that the E2E job fails with:\r\n```\r\nERROR medium/test_activity_center.py::TestActivityMultipleDevicePR::test_navigation_jump_to@new_one_3\r\n  - AttributeError: '_asyncio.Future' object has no attribute 'session_id'\r\n```\r\nhttps://ci.status.im/job/status-mobile/job/e2e/job/status-app-prs-rerun/2750/console\r\n\r\nThere are at least two possible solutions:\r\n\r\n1. Run E2E for nightly on the devel CI by fetching nightly artifacts directly from DigitalOcean bucket.\r\n2. Run E2E for nightly on the release CI but implement some kind of global session locking mechanism.\r\n\r\nThe former is simpler, but does require extra logic to find the latest nightly build.\r\nThe latter is the more correct solution, but would require finding or developing some kind of locking API to use in both jobs.\r\nOne possibility would be to use [Consul API locking mechanism](https://developer.hashicorp.com/consul/docs/dynamic-app-config/sessions) in some kind of script.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/16440/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/16440/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

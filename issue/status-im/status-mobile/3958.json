{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/3958",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/3958",
  "id": 316586083,
  "node_id": "MDU6SXNzdWUzMTY1ODYwODM=",
  "number": 3958,
  "title": "Convert tokens fails in Bancor DApp because only 1 transaction out of 2 is signed in Status",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-04-22T15:00:18Z",
  "updated_at": "2018-05-07T17:56:22Z",
  "closed_at": "2018-05-07T17:56:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: `Convert tokens` fails in Bancor DApp because it creates 2 transactions but only 1 can be signed by Status. \r\n\r\nTried 10 times to convert SNT to BNT and other tokens, all attempts failed. In the same time if buy same token for ETH then it works fine (probably, because only one signing request is created when purchasing with ETH)\r\n\r\ngeth.log if search by `request` (2 signing requests created, only 1 of them is completed):\r\n```\r\nt=2018-04-22T14:20:35+0000 lvl=info msg=\"signing request is created\" package=status-go/sign.PendingRequests   ID=c46b3c4a-aa61-4080-a705-9a88d4c43eb9\r\nt=2018-04-22T14:20:35+0000 lvl=info msg=\"signing request is created\" package=status-go/sign.PendingRequests   ID=67ad4b67-489c-4277-9c40-232ac98a8061\r\nt=2018-04-22T14:20:42+0000 lvl=info msg=\"complete sign request\"  package=status-go/sign.PendingRequests   id=67ad4b67-489c-4277-9c40-232ac98a8061\r\nt=2018-04-22T14:20:43+0000 lvl=info msg=\"completed sign request \" package=status-go/sign.PendingRequests      id=67ad4b67-489c-4277-9c40-232ac98a8061   response=\"[88 236 132 251 17 172 249 75 129 101 190 135 112 211 171 191 51 166 228 78 28 206 244 68 236 147 50 12 205 187 86 195]\" err=nil\r\n\r\n\r\n```\r\n\r\n\r\n#### Expected behavior\r\nBoth transaction requests can be signed, so user can convert tokens in Bancor DApp\r\n\r\n#### Actual behavior\r\n\"Oh no\" error is shown in the DApp, user lost some ETH on 1 failed transaction, second transaction was never done\r\n\r\n### Reproduction\r\nPrerequisite: you need to have about 30 SNT and 0.01 ETH in your Wallet in Status app\r\n\r\n- Open Status\r\n- In Home tab tap on \"+\" and select Open DApp\r\n- Tap on Bancor, tap Open\r\n- When Bancor DApp is loaded: on Tokens tab tap on BNT token\r\n- On Token Summary page tap on Buy button\r\n- select Localhost and tap Next button\r\n- In \"Pay with\" field tap on dropdown with ETH. As a result, there is a list of tokens shown, select SNT there. As a result, there is SNT instead of ETH next to PAY WITH field\r\n- In Enter Amount type \"30\" (so 30 SNT)\r\n- Receive field will be automatically filled in with BNT amount that can be purchased\r\n- Tap Next button\r\n- \"You are almost there\" screen is shown with SNT -> BNT amount and Transaction fee. In my case, fee was about 0.005 ETH\r\n- tap Proceed button\r\n- Send Transaction screen from Status Wallet will be shown. Tap on Sign Transaction, enter password and tap Sign Transaction. As a result, Transaction sent screen is shown. Tap Got it\r\n- Proceed button becomes inactive and there is spinning indicator shown for quite some time. \r\n- Check if it ends successfully (there is confirmation in Bancor Dapp shown, Transaction id shown that you can watch, eventually BNT sent to your account). In my case it wasn't: Oh, no Error is shown\r\n\r\n\r\n### Logs\r\nGeth log: [geth (10).log.zip](https://github.com/status-im/status-react/files/1935720/geth.10.log.zip)\r\nTestFairy session (start from 4:11) https://app.testfairy.com/projects/4803622-status/builds/8149726/sessions/31/?accessToken=4H5yLZvP7OEKASMBtpUm6Y2CLWc\r\n \r\n\r\n\r\n### Additional Information\r\n* Status version: nightly build Apr 22\r\n* Operating System: Android and iOS\r\n",
  "closed_by": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/3958/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/383540332",
    "html_url": "https://github.com/status-im/status-mobile/issues/3958#issuecomment-383540332",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958",
    "id": 383540332,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzU0MDMzMg==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-23T11:16:39Z",
    "updated_at": "2018-04-23T11:16:40Z",
    "author_association": "NONE",
    "body": "we `must` sign 2 transactions in proper order (1st and then 2nd) otherwise  converting will fail. https://support.bancor.network/hc/en-us/articles/360001679911--Oh-no-error-message-debug-option-1\n\n<blockquote><img src=\"https://theme.zdassets.com/theme_assets/2207736/15da6e069859e96d5a0d6bcf7164c6c76122c674.png\" width=\"48\" align=\"right\"><div>Bancor Help Center</div><div><strong><a href=\"http://support.bancor.network/hc/en-us/articles/360001679911--Oh-no-error-message-debug-option-1\">\"Oh no\" error message - debug option #1</a></strong></div><div>If you are seeing the \"Oh no\" error screen when trying to convert tokens it may be because you are sending transactions in the wrong order. \nIf you are using MetaMask, consider the below ...</div></blockquote>",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/383540332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/385369436",
    "html_url": "https://github.com/status-im/status-mobile/issues/3958#issuecomment-385369436",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958",
    "id": 385369436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTM2OTQzNg==",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T11:12:34Z",
    "updated_at": "2018-04-30T11:12:34Z",
    "author_association": "MEMBER",
    "body": "@annadanchenko i think this two transactions flow is not good from UX pov, what if i accidentally reject the second transaction. But for status there is one more problem, we have 5 min timeout for transactions, what if i sign first one but second will timeout?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/385369436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/385649282",
    "html_url": "https://github.com/status-im/status-mobile/issues/3958#issuecomment-385649282",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958",
    "id": 385649282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTY0OTI4Mg==",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-01T11:17:47Z",
    "updated_at": "2018-05-01T11:17:47Z",
    "author_association": "MEMBER",
    "body": "@annadanchenko you can use simple dapp to test this issue \r\n![image](https://user-images.githubusercontent.com/11790366/39471191-6a2ac2e0-4d4a-11e8-9457-da52154c5913.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/385649282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/387057725",
    "html_url": "https://github.com/status-im/status-mobile/issues/3958#issuecomment-387057725",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958",
    "id": 387057725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzA1NzcyNQ==",
    "user": {
      "login": "asemiankevich",
      "id": 28752642,
      "node_id": "MDQ6VXNlcjI4NzUyNjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28752642?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asemiankevich",
      "html_url": "https://github.com/asemiankevich",
      "followers_url": "https://api.github.com/users/asemiankevich/followers",
      "following_url": "https://api.github.com/users/asemiankevich/following{/other_user}",
      "gists_url": "https://api.github.com/users/asemiankevich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asemiankevich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asemiankevich/subscriptions",
      "organizations_url": "https://api.github.com/users/asemiankevich/orgs",
      "repos_url": "https://api.github.com/users/asemiankevich/repos",
      "events_url": "https://api.github.com/users/asemiankevich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asemiankevich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-07T13:04:13Z",
    "updated_at": "2018-05-07T13:04:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "works fine with Simple Dapp - can sign 2 txns in a row without any issues. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/387057725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/387058460",
    "html_url": "https://github.com/status-im/status-mobile/issues/3958#issuecomment-387058460",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/3958",
    "id": 387058460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzA1ODQ2MA==",
    "user": {
      "login": "asemiankevich",
      "id": 28752642,
      "node_id": "MDQ6VXNlcjI4NzUyNjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28752642?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asemiankevich",
      "html_url": "https://github.com/asemiankevich",
      "followers_url": "https://api.github.com/users/asemiankevich/followers",
      "following_url": "https://api.github.com/users/asemiankevich/following{/other_user}",
      "gists_url": "https://api.github.com/users/asemiankevich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asemiankevich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asemiankevich/subscriptions",
      "organizations_url": "https://api.github.com/users/asemiankevich/orgs",
      "repos_url": "https://api.github.com/users/asemiankevich/repos",
      "events_url": "https://api.github.com/users/asemiankevich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asemiankevich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-07T13:07:10Z",
    "updated_at": "2018-05-07T13:07:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@annadanchenko i am waiting for some snt/eth on mainnet to test it, if you have some - would you mind to take a look?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/387058460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

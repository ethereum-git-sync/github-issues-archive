{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/2520",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/2520",
  "id": 276680683,
  "node_id": "MDU6SXNzdWUyNzY2ODA2ODM=",
  "number": 2520,
  "title": "New messages in the group chat are shown not at the end of the chat but in the middle (e.g 17th message is shown after 8th)",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 517247009,
      "node_id": "MDU6TGFiZWw1MTcyNDcwMDk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/high-priority",
      "name": "high-priority",
      "color": "000000",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "janherich",
    "id": 1910609,
    "node_id": "MDQ6VXNlcjE5MTA2MDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janherich",
    "html_url": "https://github.com/janherich",
    "followers_url": "https://api.github.com/users/janherich/followers",
    "following_url": "https://api.github.com/users/janherich/following{/other_user}",
    "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
    "organizations_url": "https://api.github.com/users/janherich/orgs",
    "repos_url": "https://api.github.com/users/janherich/repos",
    "events_url": "https://api.github.com/users/janherich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janherich/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-11-24T18:30:35Z",
  "updated_at": "2017-11-28T16:12:16Z",
  "closed_at": "2017-11-28T16:12:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n[comment]: # (Feature or Bug? i.e Type: Bug)\r\n*Type*: Bug\r\n\r\n[comment]: # (Describe the feature you would like, or briefly summarise the bug and what you did, what you expected to happen, and what actually happens. Sections below)\r\n*Summary*: In the group chat user sends 17 messages \"1\", \"2\" .... \"17\". Message \"17\" is shown not at the end of the list but after message \"8\". Next messages \"18\", \"19\" are also shown in the mid of the chat.\r\n\r\nNote that same scenario works fine on the released 0.9.12 on the same devices for the same steps.\r\n![screenshot_20171124-191845](https://user-images.githubusercontent.com/6584810/33221151-d2e77c7a-d14d-11e7-9dae-e1a5eccaaecd.png)\r\n\r\n\r\n#### Expected behavior\r\n[comment]: # (Describe what you expected to happen.)\r\nmessage 17 is shown at the end of the chat.\r\n#### Actual behavior\r\n[comment]: # (Describe what actually happened.)\r\nMessage \"17\" is shown not at the end of the list but after message \"8\". \r\n### Reproduction\r\n[comment]: # (Describe how we can replicate the bug step by step.)\r\nFrom 01:35 https://app.testfairy.com/projects/4803622-status/builds/7146204/sessions/19/?accessToken=lsi84O/7/NuAHSU797z2/AiyY2Y \r\n- Open Status\r\n- Create new Group chat, add Jarrad to the chat\r\n- Send to the chat \"1\".\r\n- Send to the chat \"2\". Increase a number and send  it one by one, so you see the sequence of numbers 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16\r\n- send to the chat \"17\" - check where message is shown\r\n- send to the chat 18 and after it 19 - check their position in the chat\r\n\r\n### Additional Information\r\n[comment]: # (Please do your best to fill this out.)\r\n* Status version: nightly build  0.9.10-388-g3933ded3+ \r\n[comment]: # (Android or iOS.)\r\n* Operating System: Android and iOS\r\n\r\n",
  "closed_by": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/2520/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/346889555",
    "html_url": "https://github.com/status-im/status-mobile/issues/2520#issuecomment-346889555",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520",
    "id": 346889555,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njg4OTU1NQ==",
    "user": {
      "login": "oskarth",
      "id": 1552237,
      "node_id": "MDQ6VXNlcjE1NTIyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1552237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oskarth",
      "html_url": "https://github.com/oskarth",
      "followers_url": "https://api.github.com/users/oskarth/followers",
      "following_url": "https://api.github.com/users/oskarth/following{/other_user}",
      "gists_url": "https://api.github.com/users/oskarth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oskarth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oskarth/subscriptions",
      "organizations_url": "https://api.github.com/users/oskarth/orgs",
      "repos_url": "https://api.github.com/users/oskarth/repos",
      "events_url": "https://api.github.com/users/oskarth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oskarth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-24T19:56:28Z",
    "updated_at": "2017-11-24T19:56:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Grepping through log file for `clock-value` it's clear message 17 isn't received properly. According to the contract it should always increment it when receiving a message: https://github.com/status-im/status-react/blob/develop/src/status_im/utils/clocks.cljs#L31-L32\r\n\r\nSo it seems likely something has changed the way messages are received. This assumes this used to work, which IIRC you said it did @annadanchenko? That area of the code, receive-messages.cljs, has been touched a lot and it is hard to tell what has changed, but that would be a good starting point IMO @janherich.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/346889555/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/346934725",
    "html_url": "https://github.com/status-im/status-mobile/issues/2520#issuecomment-346934725",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520",
    "id": 346934725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjkzNDcyNQ==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-25T11:25:36Z",
    "updated_at": "2017-11-25T11:26:03Z",
    "author_association": "NONE",
    "body": "Updated the description: yes it used to work, at least on the latest released 0.9.12 version. \r\nOn the same devices with the same steps messages are shown in the expected order, so 17 goes after 16",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/346934725/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/347574483",
    "html_url": "https://github.com/status-im/status-mobile/issues/2520#issuecomment-347574483",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2520",
    "id": 347574483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzU3NDQ4Mw==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T16:12:16Z",
    "updated_at": "2017-11-28T16:12:16Z",
    "author_association": "NONE",
    "body": "verified ok in PR build and merged to develop. should be fixed in 0.9.13 release",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/347574483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

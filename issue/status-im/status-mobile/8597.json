{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/8597",
  "id": 470028816,
  "node_id": "MDU6SXNzdWU0NzAwMjg4MTY=",
  "number": 8597,
  "title": "/run/usr/1001 running out of space due to growing metro-cache",
  "user": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2019-07-18T22:51:40Z",
  "updated_at": "2020-04-29T19:25:42Z",
  "closed_at": "2019-07-24T23:51:21Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Recently builds have been failing due to errors like this:\n```\nerror An unexpected error occurred: \"SOME/PATH: ENOSPC: no space left on device, write\".\n```\nBut it's not an issue of lack of disk space, but rather lack of space on a virtual filesystem mounted at `/run/usr/1001`, where `1001` is the UID of `jenkins` user on CI hosts.",
  "closed_by": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/8597/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513022132",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513022132",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513022132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzAyMjEzMg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-18T22:52:42Z",
    "updated_at": "2019-07-18T22:52:42Z",
    "author_association": "MEMBER",
    "body": "At first I thought this was due to something that Nix does, but then after clearing the `metro-cache` folders on all hosts and running the `nightly` build I realized that this happens only for Linux and Windows builds.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513022132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513022480",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513022480",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513022480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzAyMjQ4MA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-18T22:53:36Z",
    "updated_at": "2019-07-18T22:53:36Z",
    "author_association": "MEMBER",
    "body": "I also found this issue: https://github.com/facebook/metro/issues/331\r\nWhich indicated to me that `metro-cache` normally resides at `/tmp/metro-cache`, not in `/usr/run/*`.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513022480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513023839",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513023839",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513023839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzAyMzgzOQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-18T22:57:36Z",
    "updated_at": "2019-07-18T22:57:36Z",
    "author_association": "MEMBER",
    "body": "Then I realized that mobile and desktop builds use different `metro` versions:\r\nhttps://github.com/status-im/status-react/blob/4d8891e35f05e759b82e6e0fd5c5792ad941a387/mobile_files/yarn.lock#L1044\r\nhttps://github.com/status-im/status-react/blob/4d8891e35f05e759b82e6e0fd5c5792ad941a387/desktop_files/yarn.lock#L5524\r\n\r\nNow, those are NOT that far apart, roughly 2:\r\n* [`v0.51.0`](https://github.com/facebook/metro/releases/tag/v0.51.0) - 2018/12/17\r\n* [`v0.48.1`](https://github.com/facebook/metro/releases/tag/v0.48.1) - 2018/09/25",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513023839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513026643",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513026643",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513026643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzAyNjY0Mw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-18T23:08:36Z",
    "updated_at": "2019-07-18T23:08:36Z",
    "author_association": "MEMBER",
    "body": "I attempted to upgrade `metro` for desktop to `0.51.0` but apparently there are some patches applied:\r\nhttps://github.com/status-im/status-react/blob/4d8891e35f05e759b82e6e0fd5c5792ad941a387/patches/metro%2B0.48.5.patch#L1-L11\r\nand:\r\nhttps://github.com/status-im/status-react/blob/4d8891e35f05e759b82e6e0fd5c5792ad941a387/patches/metro-config%2B0.48.5.patch#L1-L12\r\n\r\nApparently those were applied by @vkjr in 75af3883b816abe9b3dffe7b92c8d393119e1c86.\r\n\r\nNot sure about the second one, but it appears the first one would not be necessary for `0.51.0`:\r\nhttps://github.com/facebook/metro/issues/146\r\n\r\nNot sure though.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513026643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513027283",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513027283",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513027283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzAyNzI4Mw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-18T23:11:13Z",
    "updated_at": "2019-07-18T23:11:13Z",
    "author_association": "MEMBER",
    "body": "I assume the lack of in my branch(`upgrade-desktop-metro`) `patches/metro-config+0.48.5.patch` is the cause of this error:\r\n```log\r\nGenerating /home/jenkins/workspace/tests/linux-build-branch-test/StatusImPackage/index.desktop.bundle and assets folder...\r\n\r\njest-haste-map: @providesModule naming collision:\r\n  Duplicate module name: NetInfo\r\n  Paths: /home/jenkins/workspace/tests/linux-build-branch-test/node_modules/react-native/Libraries/Network/NetInfo.desktop.js collides with /home/jenkins/workspace/tests/linux-build-branch-test/node_modules/react-native/Libraries/Network/NetInfo.js\r\n\r\nThis error is caused by a @providesModule declaration with the same name across two different files.\r\n\r\nError: jest-haste-map: @providesModule naming collision:\r\n  Duplicate module name: NetInfo\r\n  Paths: /home/jenkins/workspace/tests/linux-build-branch-test/node_modules/react-native/Libraries/Network/NetInfo.desktop.js collides with /home/jenkins/workspace/tests/linux-build-branch-test/node_modules/react-native/Libraries/Network/NetInfo.js\r\n\r\nThis error is caused by a @providesModule declaration with the same name across two different files.\r\n    at setModule (/home/jenkins/workspace/tests/linux-build-branch-test/node_modules/jest-haste-map/build/index.js:462:17)\r\n    at workerReply (/home/jenkins/workspace/tests/linux-build-branch-test/node_modules/jest-haste-map/build/index.js:512:9)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n```\r\nhttps://ci.status.im/job/tests/job/linux-build-branch-test/1/console\r\n\r\nSpecifically the part about:\r\n```\r\nDuplicate module name: NetInfo\r\nPaths:\r\n  ${WORK}/node_modules/react-native/Libraries/Network/NetInfo.desktop.js\r\ncollides with\r\n  ${WORK}/node_modules/react-native/Libraries/Network/NetInfo.js\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513027283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513039516",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513039516",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513039516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzAzOTUxNg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T00:07:40Z",
    "updated_at": "2019-07-19T00:07:40Z",
    "author_association": "MEMBER",
    "body": "I attempted to update the patch for `0.51.1` but that didn't fix the issue:\r\n```patch\r\npatch-package\r\n--- a/node_modules/metro-config/src/defaults/defaults.js\r\n+++ b/node_modules/metro-config/src/defaults/defaults.js\r\n@@ -41,7 +41,7 @@ exports.assetExts = [\r\n ];\r\n exports.sourceExts = [\"js\", \"json\", \"ts\", \"tsx\"];\r\n exports.moduleSystem = require.resolve(\"metro/src/lib/polyfills/require.js\");\r\n-exports.platforms = [\"ios\", \"android\", \"windows\", \"web\"];\r\n+exports.platforms = [\"ios\", \"android\", \"windows\", \"web\", \"desktop\"];\r\n exports.providesModuleNodeModules = [\"react-native\", \"react-native-windows\"];\r\n exports.DEFAULT_METRO_MINIFIER_PATH = \"metro-minify-uglify\";\r\n exports.defaultCreateModuleIdFactory = defaultCreateModuleIdFactory;\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513039516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513059084",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-513059084",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 513059084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzA1OTA4NA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-19T01:56:28Z",
    "updated_at": "2019-07-19T01:56:28Z",
    "author_association": "MEMBER",
    "body": "I mean, I could just add an `rm -fr /run/user/${UID}/metro-cache` to the `Jenkinsfile`s and call it a day, but that's hardly a solution, just a hack.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/513059084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514420762",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-514420762",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 514420762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDQyMDc2Mg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-23T23:32:21Z",
    "updated_at": "2019-07-23T23:32:21Z",
    "author_association": "MEMBER",
    "body": "As far as I can tell it is this stage that actually generates the `/run/user/${UID}/metro-cache` directory:\r\nhttps://github.com/status-im/status-react/blob/d8645e285929a5d6b18c6e39e0279c590542e83e/scripts/build-desktop.sh#L131-L144\r\nSpecifically:\r\nhttps://github.com/status-im/status-react/blob/d8645e285929a5d6b18c6e39e0279c590542e83e/scripts/build-desktop.sh#L140-L141\r\nMaybe there are some `react-native` flags I could use to change the cache path.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514420762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514422847",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-514422847",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 514422847,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDQyMjg0Nw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-23T23:42:38Z",
    "updated_at": "2019-07-23T23:42:38Z",
    "author_association": "MEMBER",
    "body": "According to this:\r\nhttps://gist.github.com/jarretmoses/c2e4786fd342b3444f3bc6beff32098d\r\nThis command should clear the cache:\r\n```bash\r\nreact-native start --reset-cache\r\n```\r\nBut my tests do not show that to be correct.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514422847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514466384",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-514466384",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 514466384,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDQ2NjM4NA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-24T03:37:24Z",
    "updated_at": "2019-07-24T03:37:24Z",
    "author_association": "MEMBER",
    "body": "Adding `--reset-cache` to `eact-native bundle` in [`scripts/build-desktop.sh`](/scripts/build-desktop.sh) might help, lets see.\r\nhttps://github.com/status-im/status-react/blob/d8645e285929a5d6b18c6e39e0279c590542e83e/scripts/build-desktop.sh#L140-L141",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514466384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514840832",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-514840832",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 514840832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDg0MDgzMg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-24T23:51:21Z",
    "updated_at": "2019-07-24T23:51:21Z",
    "author_association": "MEMBER",
    "body": "I've merged #8621 in the morning and after a while day of builds running the `metro-cache` folders are all the same size:\r\n```\r\n $ ansible ci-slave-linux -m shell -o -a 'du -hsc /run/user/1001/metro-cache | head -n1'\r\nlinux-05.do-ams3.ci.misc | CHANGED | rc=0 | (stdout) 56M      /run/user/1001/metro-cache\r\nlinux-04.do-ams3.ci.misc | CHANGED | rc=0 | (stdout) 56M      /run/user/1001/metro-cache\r\nlinux-01.do-ams3.ci.misc | CHANGED | rc=0 | (stdout) 56M      /run/user/1001/metro-cache\r\nlinux-02.do-ams3.ci.misc | CHANGED | rc=0 | (stdout) 56M      /run/user/1001/metro-cache\r\nlinux-03.do-ams3.ci.misc | CHANGED | rc=0 | (stdout) 56M      /run/user/1001/metro-cache\r\n```\r\nWhich indicates to me that the addition of `--reset-cache` has worked, and this issue is resolved.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514840832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514840923",
    "html_url": "https://github.com/status-im/status-mobile/issues/8597#issuecomment-514840923",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8597",
    "id": 514840923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDg0MDkyMw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-24T23:51:52Z",
    "updated_at": "2019-07-24T23:51:52Z",
    "author_association": "MEMBER",
    "body": "Though I still would like to upgrade `metro` to the same version as for Mobile...",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/514840923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

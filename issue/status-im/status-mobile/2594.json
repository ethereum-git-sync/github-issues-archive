{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/2594",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/2594",
  "id": 278977595,
  "node_id": "MDU6SXNzdWUyNzg5Nzc1OTU=",
  "number": 2594,
  "title": "java.lang.SecurityException on /location request with denied access of the device location",
  "user": {
    "login": "Serhy",
    "id": 8749671,
    "node_id": "MDQ6VXNlcjg3NDk2NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Serhy",
    "html_url": "https://github.com/Serhy",
    "followers_url": "https://api.github.com/users/Serhy/followers",
    "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
    "organizations_url": "https://api.github.com/users/Serhy/orgs",
    "repos_url": "https://api.github.com/users/Serhy/repos",
    "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Serhy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2017-12-04T12:23:45Z",
  "updated_at": "2018-09-01T10:04:55Z",
  "closed_at": "2018-01-30T12:33:58Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "***Type***: Bug\r\n\r\n***Summary***: There is an exception happens \r\n*java.lang.SecurityException: Looks like the app doesn't have the permission to access location. Add the following line to your app's AndroidManifest.xml: <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />*\r\nwhen /location is requested while user denied Status app to access device location: \r\n![screenshot_20171207-213415](https://user-images.githubusercontent.com/6584810/33737578-f2df8434-db96-11e7-9700-0479a6cef7ef.png)\r\n\r\n\r\n**Expected behavior:**\r\n/location feature is available for further usage and user is able to type location details\r\n**Actual behavior:**\r\njava.lang.SecurityException exception and 'Unfortunately, Status has stopped' upon hit 'Exit' on the error popup. \r\n\r\n**Reproduction**\r\nVideo: https://drive.google.com/file/d/1JPjW80ADj2YicY9b8Q5MnD5NTq6xPPbw/view?usp=sharing\r\n\r\n*Precondition:* Clear all data previously used by app\r\n1) Open Status\r\n2) Submit valid password for the new account\r\n3) Navigate to the list of contacts\r\n4) Find 'Jarrad' and start 1-1 chat with this contact\r\n5) Tap /location option\r\n6) On the 'Allow Status to access this device location' pop up tap 'Deny' (note: on emulator it requires to deny three times)\r\n7) Clear /location from the message box and tap on /location again to request 'Send location' feature\r\n8) 'Allow Status to access this device location' pop up appears again. Set checkmark on 'Don't ask again' checkbox and 'Deny' (if on emulator then Deny 3 times)\r\n\r\n**Additional Information:**\r\n* Status version: 0.9.12+\r\n* Operating System: Samsung Galaxy S6, Android 6.0.0 (API 23)\r\n\r\n**Note:** It's all OK on Samsung Galaxy S6 Android 5.1.0 (API 22) and real device LG D325 with Android 4.4.2. I haven't been requested to 'Allow Status to access this device location' (the 6th and 8th steps above) on the this two android versions. \r\n",
  "closed_by": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/2594/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/350089174",
    "html_url": "https://github.com/status-im/status-mobile/issues/2594#issuecomment-350089174",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594",
    "id": 350089174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MDA4OTE3NA==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-07T20:46:12Z",
    "updated_at": "2017-12-07T20:46:12Z",
    "author_association": "NONE",
    "body": "Can reproduce it if Location setting is set to ON.\r\n- real Samsung Galaxy S6, Android 6.0.1 on a nightly build, Status version 0.9.10-427-ga68f0652+ Video and log: https://app.testfairy.com/projects/4803622-status/builds/7234321/sessions/49/?accessToken=WvFC/nuC-4m3NzirEozrIq6uQOo\r\n- real Google Pixel XL, Android 8.0 on a nightly build, Status version 0.9.10-427-ga68f0652+ \r\nVideo and log: https://app.testfairy.com/projects/4803622-status/builds/7234321/sessions/48/?accessToken=uJeVu2AV7E/mhVSAPq/ictQd6oQ\r\n\r\nSettings for Location in Galaxy S6:\r\n![screenshot_20171207-213441](https://user-images.githubusercontent.com/6584810/33737804-acab8eb2-db97-11e7-86fe-ca453bbae866.png)\r\n\r\n\r\n![screenshot_20171207-213444](https://user-images.githubusercontent.com/6584810/33737772-98868d2e-db97-11e7-944c-d9f7667f5092.png)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/350089174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/356120252",
    "html_url": "https://github.com/status-im/status-mobile/issues/2594#issuecomment-356120252",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594",
    "id": 356120252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjEyMDI1Mg==",
    "user": {
      "login": "Chumalaka",
      "id": 26075126,
      "node_id": "MDQ6VXNlcjI2MDc1MTI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/26075126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Chumalaka",
      "html_url": "https://github.com/Chumalaka",
      "followers_url": "https://api.github.com/users/Chumalaka/followers",
      "following_url": "https://api.github.com/users/Chumalaka/following{/other_user}",
      "gists_url": "https://api.github.com/users/Chumalaka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Chumalaka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Chumalaka/subscriptions",
      "organizations_url": "https://api.github.com/users/Chumalaka/orgs",
      "repos_url": "https://api.github.com/users/Chumalaka/repos",
      "events_url": "https://api.github.com/users/Chumalaka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Chumalaka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T22:42:55Z",
    "updated_at": "2018-01-08T22:42:55Z",
    "author_association": "NONE",
    "body": "Hi @andytudhope, is this still an issue? I would like to check it out.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/356120252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/356195911",
    "html_url": "https://github.com/status-im/status-mobile/issues/2594#issuecomment-356195911",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594",
    "id": 356195911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjE5NTkxMQ==",
    "user": {
      "login": "andytudhope",
      "id": 13001517,
      "node_id": "MDQ6VXNlcjEzMDAxNTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/13001517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/andytudhope",
      "html_url": "https://github.com/andytudhope",
      "followers_url": "https://api.github.com/users/andytudhope/followers",
      "following_url": "https://api.github.com/users/andytudhope/following{/other_user}",
      "gists_url": "https://api.github.com/users/andytudhope/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/andytudhope/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/andytudhope/subscriptions",
      "organizations_url": "https://api.github.com/users/andytudhope/orgs",
      "repos_url": "https://api.github.com/users/andytudhope/repos",
      "events_url": "https://api.github.com/users/andytudhope/events{/privacy}",
      "received_events_url": "https://api.github.com/users/andytudhope/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-09T06:51:29Z",
    "updated_at": "2018-01-09T06:51:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @Chumalaka, you can be sure that if the issue is still open and there is a bounty on it, then it is still an issue. Please do go ahead - no need to comment on issues really - PRs are always better proof than comments anyway 😉 Looking forward to seeing you skillz!",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/356195911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/361501104",
    "html_url": "https://github.com/status-im/status-mobile/issues/2594#issuecomment-361501104",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594",
    "id": 361501104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTUwMTEwNA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T07:32:44Z",
    "updated_at": "2018-01-30T08:39:11Z",
    "author_association": "NONE",
    "body": "is this deprecated by #3164 of #3007 ?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/361501104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/361580007",
    "html_url": "https://github.com/status-im/status-mobile/issues/2594#issuecomment-361580007",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2594",
    "id": 361580007,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTU4MDAwNw==",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T12:33:58Z",
    "updated_at": "2018-01-30T12:33:58Z",
    "author_association": "MEMBER",
    "body": "@audriu yes, we decided to remove this functionality and review it later",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/361580007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/9394",
  "id": 517239013,
  "node_id": "MDU6SXNzdWU1MTcyMzkwMTM=",
  "number": 9394,
  "title": "Select mailservers based on ping",
  "user": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 783781483,
      "node_id": "MDU6TGFiZWw3ODM3ODE0ODM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/performance",
      "name": "performance",
      "color": "dd3bd8",
      "default": false,
      "description": null
    },
    {
      "id": 933023569,
      "node_id": "MDU6TGFiZWw5MzMwMjM1Njk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/feature",
      "name": "feature",
      "color": "172b9e",
      "default": false,
      "description": "feature requests"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 54,
  "created_at": "2019-11-04T15:48:14Z",
  "updated_at": "2020-04-29T20:10:10Z",
  "closed_at": "2019-11-28T22:31:57Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### User Story\n\nCurrently the mailservers from the fleet are selected randomly, which results in me getting connected to the Hong Kong mailservers almost every time when I'm in Europe and should be getting the european ones.\n\n### Description\n\nThis results in a really bad experience for users with slow sync times and bad latency.\n\n### Acceptance Criteria\n\nThe simplest solution would be to just do an ICMP ping to a few mailserver, group them into response time buckets, and pick a random one from the fastest bucket.\n\n### Notes\n\nExample ping output:\n```\n $ for DC in \"do-ams3\" \"gc-us-central1-a\" \"ac-cn-hongkong-c\"; do \\\n     ping -c1 mail-01.${DC}.eth.beta.statusim.net | grep 'time='; \\\n   done \n64 bytes from 206.189.243.162 (206.189.243.162): icmp_seq=1 ttl=55 time=29.1 ms\n64 bytes from 210.19.188.35.bc.googleusercontent.com (35.188.19.210): icmp_seq=1 ttl=50 time=127 ms\n64 bytes from 47.91.156.93 (47.91.156.93): icmp_seq=1 ttl=47 time=279 ms\n```\nAs you can see for me from Poland the ranking of access time is simple:\n\n1. Amsterdam - `29.1 ms`\n2. United States - `127 ms`\n3. Hong Kong - `279 ms`",
  "closed_by": {
    "login": "yenda",
    "id": 1181225,
    "node_id": "MDQ6VXNlcjExODEyMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yenda",
    "html_url": "https://github.com/yenda",
    "followers_url": "https://api.github.com/users/yenda/followers",
    "following_url": "https://api.github.com/users/yenda/following{/other_user}",
    "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
    "organizations_url": "https://api.github.com/users/yenda/orgs",
    "repos_url": "https://api.github.com/users/yenda/repos",
    "events_url": "https://api.github.com/users/yenda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yenda/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/9394/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 3,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/549418686",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-549418686",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 549418686,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQxODY4Ng==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T15:55:27Z",
    "updated_at": "2019-11-04T15:55:27Z",
    "author_association": "MEMBER",
    "body": "I'm not sure where this should be implemented though, `status-go`, or `status-react`. My first guess would be `status-go`, but I'm actually not sure where the code that selects the mailserver lives.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/549418686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/549425174",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-549425174",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 549425174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQyNTE3NA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T16:09:30Z",
    "updated_at": "2019-11-04T16:09:30Z",
    "author_association": "MEMBER",
    "body": "Thanks to Eric I know where currently the selection code lives:\r\nhttps://github.com/status-im/status-react/blob/02ce0782b1fc773a4ad2a18749426ee2863d17cc/src/status_im/mailserver/core.cljs#L70-L83",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/549425174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/549483106",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-549483106",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 549483106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTQ4MzEwNg==",
    "user": {
      "login": "adambabik",
      "id": 277870,
      "node_id": "MDQ6VXNlcjI3Nzg3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/277870?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adambabik",
      "html_url": "https://github.com/adambabik",
      "followers_url": "https://api.github.com/users/adambabik/followers",
      "following_url": "https://api.github.com/users/adambabik/following{/other_user}",
      "gists_url": "https://api.github.com/users/adambabik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adambabik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adambabik/subscriptions",
      "organizations_url": "https://api.github.com/users/adambabik/orgs",
      "repos_url": "https://api.github.com/users/adambabik/repos",
      "events_url": "https://api.github.com/users/adambabik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adambabik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-04T18:21:52Z",
    "updated_at": "2019-11-04T18:21:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "This would even leave in status-protocol-go, in a separate package probably. We have two issues there:\r\n- https://github.com/status-im/status-protocol-go/issues/99\r\n- https://github.com/status-im/status-protocol-go/issues/98",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/549483106/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550347001",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-550347001",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 550347001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDM0NzAwMQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T14:57:18Z",
    "updated_at": "2019-11-06T14:57:18Z",
    "author_association": "MEMBER",
    "body": "This must be the method that actually tells the node to connect to the mailserver:\r\nhttps://github.com/status-im/status-react/blob/2e8e1a35add435c044d6f61f208da80386fa0d24/src/status_im/mailserver/core.cljs#L214-L233",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550347001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550348062",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-550348062",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 550348062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDM0ODA2Mg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T14:59:27Z",
    "updated_at": "2019-11-06T14:59:27Z",
    "author_association": "MEMBER",
    "body": "According to Adam the call to get fastest mailservers should be an RCP call.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550348062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550350159",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-550350159",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 550350159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDM1MDE1OQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T15:03:42Z",
    "updated_at": "2019-11-06T19:10:24Z",
    "author_association": "MEMBER",
    "body": "A request should send a list of mailservers to check, and possibly a timeout for the check, and return a list of objects with round trip time:\r\n```javascript\r\n[\r\n   { addr: \"A\", rtt: 123 },  // milliseconds\r\n   { addr: \"B\", rtt: null }, // timeout\r\n   { addr: \"C\", rtt: 554 },  // milliseconds\r\n]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550350159/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550351369",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-550351369",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 550351369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDM1MTM2OQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T15:06:24Z",
    "updated_at": "2019-11-06T15:06:24Z",
    "author_association": "MEMBER",
    "body": "New RPC calls are exposed by adding methods here:\r\nhttps://github.com/status-im/status-go/blob/develop/services/mailservers/api.go\r\nFor more details read:\r\nhttps://github.com/status-im/status-go/blob/develop/services/mailservers/README.md",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550351369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550457123",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-550457123",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 550457123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ1NzEyMw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T19:10:59Z",
    "updated_at": "2019-11-06T19:10:59Z",
    "author_association": "MEMBER",
    "body": "Example interface for ICMP probing from Adam:\r\n```golang\r\npackage mailserver\r\n\r\ntype Prober interface {\r\n    Probe() ([]node.ID, error)\r\n}\r\n\r\ntype ICMPProber struct {\r\n    items []node.ID\r\n}\r\n\r\nfunc NewICMPProber(addresses []string) *ICMPProber {\r\n    return &ICMPProber{items: parseAddresses(addresses)}\r\n}\r\n\r\ntype ProtocolProber struct { \r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/550457123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551072720",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551072720",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551072720,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTA3MjcyMA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T13:11:32Z",
    "updated_at": "2019-11-07T16:50:56Z",
    "author_association": "MEMBER",
    "body": "At first I thought ICMP will be simplest, but it appears it is not because sending ICMP packets requires creating a [raw socket](http://man7.org/linux/man-pages/man7/raw.7.html) which require special permissions:\r\n```\r\n       EPERM  The user doesn't have permission to open raw sockets.  Only\r\n              processes with an effective user ID of 0 or the CAP_NET_RAW\r\n              attribute may do that.\r\n```\r\nAnd fails on Linux without `sudo` with:\r\n```\r\n $ ./icmp_ping \r\nProber {mail-01.do-ams3.eth.beta.statusim.net}\r\nErr: listen ip4:icmp 0.0.0.0: socket: operation not permitted\r\n```\r\n__NOTE:__ This is true for Darwin as well.\r\n\r\nSo the most sensible thing to do will be to do a TCP `SYN` > `SYN-ACK` > `RST` handshake and time that.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551072720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551075341",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551075341",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551075341,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTA3NTM0MQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T13:18:54Z",
    "updated_at": "2019-11-07T13:18:54Z",
    "author_association": "MEMBER",
    "body": "This package could be used as a template to write such a TCP handshake ping:\r\nhttps://github.com/tevino/tcp-shaker\r\nExample command line tool test:\r\n```\r\n~/go/src/github.com/tevino/tcp-shaker/app/tcp-checker master*\r\n caspair > ./tcp-checker -c 3 -a mail-01.do-ams3.eth.beta.statusim.net:443\r\n\r\nChecking mail-01.do-ams3.eth.beta.statusim.net:443 with the following configurations:\r\n    Timeout: 1s\r\n   Requests: 1\r\nConcurrency: 3\r\n\r\nFinished 1/1 checks in 31.271279ms\r\n  Succeed: 1\r\n  Errors: connect 0, timeout 0, other 0\r\n```\r\nOne thing that worries me though is that it's only for Linux, and their non-Linux code is a dummy:\r\nhttps://github.com/tevino/tcp-shaker/blob/master/checker_nonlinux.go\r\nBut I think the linux code should work fine on Android.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551075341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551156460",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551156460",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551156460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTE1NjQ2MA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T16:29:14Z",
    "updated_at": "2019-11-07T16:29:14Z",
    "author_association": "MEMBER",
    "body": "I tried reading the code of https://github.com/tevino/tcp-shaker but it's really obtuse. Syscalls verywhere, weird use of `sync.Map` and `sync.Poll` as well as a Linux `epoll`. Really hard to follow.\r\n\r\nI could just use it, but `epoll` doesn't exist on Mac, so I don't know if that's gonna fly in Apple devices, I'd have to implement the same code but for `darwin` using probably something like `kqueue` to wait for the opened connection to close.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551156460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551175420",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551175420",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551175420,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTE3NTQyMA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T17:13:27Z",
    "updated_at": "2019-11-07T17:13:27Z",
    "author_association": "MEMBER",
    "body": "MacOS lacks [`syscall.SOL_TCP`](https://linux.die.net/man/7/tcp) but its equivalent is `syscall.IPPROTO_TCP`.\r\n\r\nThere's also no `TCP_QUICKACK`. We could use `TCP_NODELAY` instead, but:\r\n>Turning on TCP_NODELAY has similar effects, but can make throughput worse for small writes. If you write a loop which sends just a few bytes (worst case, one byte) to a socket with \"write()\", and the Nagle algorithm is disabled with TCP_NODELAY, each write becomes one IP packet. This increases traffic by a factor of 40, with IP and TCP headers for each payload.\r\n>https://stackoverflow.com/questions/7286592/set-tcp-quickack-and-tcp-nodelay\r\n\r\nBut we don't intend to send any bytes, just close immediately, so it shouldn't have any effect.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551175420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551176263",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551176263",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551176263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTE3NjI2Mw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T17:15:28Z",
    "updated_at": "2019-11-07T17:15:28Z",
    "author_association": "MEMBER",
    "body": "When I do those two changes listed above the only build errors appear to be related to lack of `epoll`:\r\n```\r\n../../socket.go:63:12: undefined: syscall.EpollCreate1\r\n../../socket.go:63:33: undefined: syscall.EPOLL_CLOEXEC\r\n../../socket.go:74:12: undefined: syscall.EpollEvent\r\n../../socket.go:75:17: undefined: syscall.EPOLLOUT\r\n../../socket.go:75:36: undefined: syscall.EPOLLIN\r\n../../socket.go:77:12: undefined: syscall.EpollCtl\r\n../../socket.go:77:39: undefined: syscall.EPOLL_CTL_ADD\r\n../../socket.go:85:34: undefined: syscall.EpollEvent\r\n```\r\nSo in theory I could port this code to use [`kqueue`](https://www.freebsd.org/cgi/man.cgi?kqueue) and it might work.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551176263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551180167",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551180167",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551180167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTE4MDE2Nw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T17:24:57Z",
    "updated_at": "2019-11-07T17:26:53Z",
    "author_association": "MEMBER",
    "body": "This is a nice example of how `Kqueue` is used in Go:\r\nhttps://gist.github.com/nbari/386af0fa667ae03daf3fbc80e3838ab0\r\nHere's the Go's implementation:\r\nhttps://golang.org/src/syscall/syscall_darwin.go\r\nAnd a nice example of `kqueue` usage in C:\r\nhttps://jmmv.dev/2004/10/example-of-kqueue.html",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551180167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551201350",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551201350",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551201350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTIwMTM1MA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T18:19:33Z",
    "updated_at": "2019-11-07T18:24:11Z",
    "author_association": "MEMBER",
    "body": "This might help me build a standalone binary for Android using Gomobile:\r\n>Apps written entirely in Go have a main function, and can be built with `gomobile build`, which directly produces runnable output for Android and iOS.\r\n>https://godoc.org/golang.org/x/mobile/app\r\n\r\nThis way I could verify if this TCP knocking will even work.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551201350/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551212514",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551212514",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551212514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTIxMjUxNA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T18:48:57Z",
    "updated_at": "2019-11-07T18:48:57Z",
    "author_association": "MEMBER",
    "body": "I made an example App using the [`x/mobile/app`](https://godoc.org/golang.org/x/mobile/app) module:\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\"context\"\r\n\t\"log\"\r\n\t\"time\"\r\n\r\n\t\"github.com/tevino/tcp-shaker\"\r\n\t\"golang.org/x/mobile/app\"\r\n)\r\n\r\nvar addresses = []string{\r\n\t\"206.189.243.162:443\",\r\n\t\"35.188.19.210:443\",\r\n\t\"47.91.156.93:443\",\r\n}\r\n\r\nfunc Ping(address string, timeout time.Duration) error {\r\n\tc := tcp.NewChecker()\r\n\r\n\tctx, stopChecker := context.WithCancel(context.Background())\r\n\tdefer stopChecker()\r\n\tgo func() {\r\n\t\tif err := c.CheckingLoop(ctx); err != nil {\r\n\t\t\tlog.Print(\"checking loop stopped due to fatal error: \", err)\r\n\t\t}\r\n\t}()\r\n\r\n\tlog.Print(\"Pinging:\", address)\r\n\t<-c.WaitReady()\r\n\terr := c.CheckAddr(address, timeout)\r\n\tswitch err {\r\n\tcase tcp.ErrTimeout:\r\n\t\tlog.Print(\"Connect timed out\")\r\n\tcase nil:\r\n\t\tlog.Print(\"Connect succeeded\")\r\n\tdefault:\r\n\t\tlog.Print(\"Error while connecting: \", err)\r\n\t}\r\n\treturn nil\r\n}\r\n\r\nfunc main() {\r\n\tapp.Main(appMain)\r\n}\r\n\r\nfunc appMain(a app.App) {\r\n\tlog.SetPrefix(\"TCP_PING: \")\r\n\tvar timeout time.Duration = 1000 * time.Millisecond\r\n\tvar i int\r\n\tfor i = 0; i < len(addresses); i++ {\r\n\t\terr := Ping(addresses[i], timeout)\r\n\t\tif err != nil {\r\n\t\t\tlog.Print(\"Err:\", err)\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nAnd it fails on Android with this:\r\n```\r\nGoLog   : TCP_PING: Pinging:206.189.243.162:443\r\nGoLog   : TCP_PING: Error while connecting: permission denied\r\nGoLog   : TCP_PING: Pinging:35.188.19.210:443\r\nGoLog   : TCP_PING: Error while connecting: permission denied\r\nGoLog   : TCP_PING: Pinging:47.91.156.93:443\r\nGoLog   : TCP_PING: Error while connecting: permission denied\r\n```\r\nWhich I guess suggests that Android blocks use of some of the socket flags that `tcp-shaker` uses.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551212514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551213138",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551213138",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551213138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTIxMzEzOA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T18:50:28Z",
    "updated_at": "2019-11-07T18:50:28Z",
    "author_association": "MEMBER",
    "body": "If you look at the `SocketOptions` documentation for Android:\r\nhttps://developer.android.com/reference/java/net/SocketOptions\r\nThere is no `TCP_QUICKACK` available, only `TCP_NODELAY`.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551213138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551443381",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551443381",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551443381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTQ0MzM4MQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T08:57:10Z",
    "updated_at": "2019-11-08T09:03:42Z",
    "author_association": "MEMBER",
    "body": "I tested the ICMP ping using `golang.org/x/net/icmp` in a [simple app](https://gist.github.com/jakubgs/f12e395ee97357c45a3a5408445dd393) and got back:\r\n```\r\nGoLog   : ICMP_PING: Err:listen ip4:icmp 0.0.0.0: socket: permission denied\r\n```\r\nSimilar thing if I try to use an UDP ping:\r\n```\r\nGoLog   : ICMP_PING: Err:socket: permission denied\r\n```\r\nBoth fail on the `icmp.ListenPacket()` call, first with `ip4:icmp` and second with `udp`.\r\n\r\nSo it doesn't look like ICMP ping is something that can be done on Android without extra permissions.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551443381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551450102",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551450102",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551450102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTQ1MDEwMg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T09:17:33Z",
    "updated_at": "2019-11-08T09:17:42Z",
    "author_association": "MEMBER",
    "body": "I narrowed down the `permission denied` error on the TCP pinger to this call:\r\n```go\r\nsyscall.Socket(syscall.AF_INET, syscall.SOCK_STREAM, 0)\r\n```\r\nIt seems like one of those flags is not allowed. But which one?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551450102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551458498",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551458498",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551458498,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTQ1ODQ5OA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T09:35:15Z",
    "updated_at": "2019-11-08T09:35:30Z",
    "author_association": "MEMBER",
    "body": "GLORIOUS SUCCESS!\r\nI managed to make the `permission denied` error to go away by specifying a custom `AndroidManifst.xml` which contained the following permission:\r\n```xml\r\n<uses-permission android:name=\"android.permission.INTERNET\" />\r\n```\r\nLooks like the default is not to give network access to an app.\r\nBut now it fails with `tcp.ErrTimeout`, but that's an improvement.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551458498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551475879",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551475879",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551475879,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTQ3NTg3OQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T09:47:09Z",
    "updated_at": "2019-11-08T10:51:46Z",
    "author_association": "MEMBER",
    "body": "It doesn't seem like the adding of `INTERNET` permissions helps the ICMP test app:\r\n```\r\nGoLog   : ICMP_PING: Err:bind: permission denied\r\nicmp_ping_test: type=1400 audit(0.0:916061): avc: \\\r\n    denied { node_bind } for scontext=u:r:untrusted_app_25:s0:c512,c768 \\\r\n    tcontext=u:object_r:node:s0 tclass=rawip_socket permissive=0\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551475879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551604267",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551604267",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551604267,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTYwNDI2Nw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T11:14:58Z",
    "updated_at": "2019-11-08T11:14:58Z",
    "author_association": "MEMBER",
    "body": "Interestingly enough `TCP_QUICKACK` is not listed in the Android socket docs:\r\nhttps://developer.android.com/reference/java/net/SocketOptions\r\nBut it doesn't throw any errors when I set it so maybe it's just undocumented:\r\n```go\r\nsyscall.SetsockoptInt(fd, syscall.SOL_TCP, syscall.TCP_QUICKACK, 0)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551604267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551627564",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551627564",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551627564,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTYyNzU2NA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T11:31:02Z",
    "updated_at": "2019-11-08T11:31:02Z",
    "author_association": "MEMBER",
    "body": "The timeout happens even through the `epoll` that listens for the `fd` events has quite the range:\r\n```go\r\nevent.Events = syscall.EPOLLOUT | syscall.EPOLLIN | epollET\r\n```\r\nWhere `epollET` is:\r\n```go\r\nconst epollET = 1 << 31 // 2147483648\r\n```\r\nWhich shifts first bit 31 places left, and gives us `2147483648`, which I assume is supposed to represent the [`EPOLLET`](https://golang.org/pkg/syscall/#pkg-constants) flag, which is weird because it is available in the `syscall` package:\r\n```\r\nEPOLLET = -0x80000000 // -2147483648\r\n```\r\nWhich is the negative of `epollET`, but I think the value of `EPOLLET` is dependent on architecture.\r\n\r\nThe `EPOLLET` flag means:\r\n```\r\nIf the rfd file descriptor has been added to the epoll  interface  using  the  EPOLLET\r\n(edge-triggered) flag, the call to epoll_wait(2) done in step 5 will probably hang de\r\nspite the available data still present in the file input buffer; meanwhile the  remote\r\npeer  might be expecting a response based on the data it already sent.  The reason for\r\nthis is that edge-triggered mode delivers events only when changes occur on the\tmoni\r\ntored  file  descriptor.   So, in step 5 the caller might end up waiting for some data\r\nthat is already present inside the input buffer.  In the above example,\tan  event  on\r\nrfd  will  be generated because of the write done in 2 and the event is consumed in 3.\r\nSince the read operation done in 4 does not consume the whole buffer data, the call to\r\nepoll_wait(2) done in step 5 might block indefinitely.\r\n\r\nAn  application\tthat employs the EPOLLET flag should use nonblocking file descriptors\r\nto avoid having a blocking read or write starve a task that is handling multiple  file\r\ndescriptors.   The suggested way to use epoll as an edge-triggered (EPOLLET) interface\r\nis as follows:\r\n\r\n      i   with nonblocking file descriptors; and\r\n\r\n      ii  by waiting for an event only after read(2) or write(2) return EAGAIN.\r\n\r\nBy contrast, when used as a level-triggered interface (the default,  when  EPOLLET  is\r\nnot  specified), epoll is simply a faster poll(2), and can be used wherever the latter\r\nis used since it shares the same semantics.\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551627564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551630058",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551630058",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551630058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTYzMDA1OA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T11:32:47Z",
    "updated_at": "2019-11-08T11:32:47Z",
    "author_association": "MEMBER",
    "body": "I tried using `syscall.EPOLLET` but I get this during build:\r\n```\r\nsocket_linux.go:85:52: constant -2147483643 overflows uint32\r\n```\r\nSo I assume the local definition of `epollET` is some kind of workaround for that.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551630058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551838049",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551838049",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551838049,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTgzODA0OQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T13:59:45Z",
    "updated_at": "2019-11-08T14:00:03Z",
    "author_association": "MEMBER",
    "body": "I don't get why the value of `syscall.EPOLLET` in Go is a negative number when the `EpollEvent` structure uses an unsigned `uint32` for its flags:\r\n```go\r\ntype EpollEvent struct {\r\n    Events uint32\r\n    Fd     int32\r\n    Pad    int32\r\n}\r\n```\r\nhttps://golang.org/pkg/syscall/#EpollEvent\r\nAs if they wanted it to be unusable? Or is it simply a mistake?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551838049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551844435",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551844435",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551844435,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTg0NDQzNQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T14:17:51Z",
    "updated_at": "2019-11-08T14:17:51Z",
    "author_association": "MEMBER",
    "body": "Interestingly the `syscall.EPOLL_NONBLOCK` flag is not available:\r\n```\r\nsocket_linux.go:90:62: undefined: syscall.EPOLL_NONBLOCK\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551844435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551857405",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551857405",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551857405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTg1NzQwNQ==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T14:51:37Z",
    "updated_at": "2019-11-08T14:51:37Z",
    "author_association": "MEMBER",
    "body": "Instead of relying on the pipe that the default `tcp-shaker` code uses I tried calling the `syscall.EpollWait` method myself:\r\n```go\r\nevents := make([]syscall.EpollEvent, 1)\r\nnc, err := syscall.EpollWait(c.PollerFd(), events, int(timeout.Milliseconds()))\r\n```\r\nAnd what I get back is an event with `Events` attribute set to `4` which is `EPOLLOUT`, which means that the connection is ready for writing. Which means that this method can work, but for some reason doesn't trigger through reading of the pipe in the `waitPipeTimeout()` method:\r\nhttps://github.com/tevino/tcp-shaker/blob/9f5b7a96d888d963841cdd52c87c72bef159dc91/checker_linux.go#L187-L194",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551857405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551898192",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551898192",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551898192,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTg5ODE5Mg==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T16:35:04Z",
    "updated_at": "2019-11-08T16:35:04Z",
    "author_association": "MEMBER",
    "body": "Turns out that `tcp-shaker` uses `EpollWait()` itself:\r\n```go\r\nfunc pollEvents(pollerFd int, timeout time.Duration) ([]event, error) {\r\n\tvar timeoutMS = int(timeout.Nanoseconds() / 1000000)\r\n\tvar epollEvents [maxEpollEvents]syscall.EpollEvent\r\n\tnEvents, err := syscall.EpollWait(pollerFd, epollEvents[:], timeoutMS)\r\n\tif err != nil {\r\n\t\tif err == syscall.EINTR {\r\n\t\t\treturn nil, nil\r\n\t\t}\r\n\t\treturn nil, os.NewSyscallError(\"epoll_wait\", err)\r\n\t}\r\n\r\n\tvar events = make([]event, 0, nEvents)\r\n\r\n\tfor i := 0; i < nEvents; i++ {\r\n\t\tvar fd = int(epollEvents[i].Fd)\r\n\t\tvar evt = event{Fd: fd, Err: nil}\r\n\r\n\t\terrCode, err := syscall.GetsockoptInt(fd, syscall.SOL_SOCKET, syscall.SO_ERROR)\r\n\t\tif err != nil {\r\n\t\t\tevt.Err = os.NewSyscallError(\"getsockopt\", err)\r\n\t\t}\r\n\t\tif errCode != 0 {\r\n\t\t\tevt.Err = newErrConnect(errCode)\r\n\t\t}\r\n\t\tevents = append(events, evt)\r\n\t}\r\n\treturn events, nil\r\n}\r\n```\r\nhttps://github.com/tevino/tcp-shaker/blob/9f5b7a96d888d963841cdd52c87c72bef159dc91/socket_linux.go#L83-L110\r\n\r\nI need to debug why this call doesn't catch the socket being ready.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551898192/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551908333",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551908333",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551908333,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTkwODMzMw==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T17:00:47Z",
    "updated_at": "2019-11-08T17:01:13Z",
    "author_association": "MEMBER",
    "body": "Okay, I can see what is failing on Android, and that's this call:\r\n```go\r\nerrCode, err := syscall.GetsockoptInt(fd, syscall.SOL_SOCKET, syscall.SO_ERROR)\r\n```\r\nhttps://github.com/tevino/tcp-shaker/blob/9f5b7a96/socket_linux.go#L100\r\nWhich results in an error:\r\n```\r\ngetsockopt: socket operation on non-socket\r\n```\r\nThis seems to be caused by the fact that the file descriptor has the value of `0`, which doesn't exist.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551908333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551921068",
    "html_url": "https://github.com/status-im/status-mobile/issues/9394#issuecomment-551921068",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/9394",
    "id": 551921068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTkyMTA2OA==",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-08T17:35:47Z",
    "updated_at": "2019-11-08T17:35:47Z",
    "author_association": "MEMBER",
    "body": "This wouldn't be an issue if the implementation just listened for one `fd` at a time, but `tcp-shaker` seem to use a `sync.Map` and a `sync.Poll` to juggle multiple pipes in the [`CheckingLoop()`](https://github.com/tevino/tcp-shaker/blob/9f5b7a96d888d963841cdd52c87c72bef159dc91/checker_linux.go#L41-L52), since then I could assume the file descriptor number.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/551921068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

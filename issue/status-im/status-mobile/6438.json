{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6438",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6438/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6438/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6438/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6438",
  "id": 372420897,
  "node_id": "MDU6SXNzdWUzNzI0MjA4OTc=",
  "number": 6438,
  "title": "Duplicate request messages in 1:1 chat after upgrade from 0.9.29",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 794860412,
      "node_id": "MDU6TGFiZWw3OTQ4NjA0MTI=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/release",
      "name": "release",
      "color": "30dcff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "janherich",
    "id": 1910609,
    "node_id": "MDQ6VXNlcjE5MTA2MDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janherich",
    "html_url": "https://github.com/janherich",
    "followers_url": "https://api.github.com/users/janherich/followers",
    "following_url": "https://api.github.com/users/janherich/following{/other_user}",
    "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
    "organizations_url": "https://api.github.com/users/janherich/orgs",
    "repos_url": "https://api.github.com/users/janherich/repos",
    "events_url": "https://api.github.com/users/janherich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janherich/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-10-22T07:36:20Z",
  "updated_at": "2018-10-24T07:49:24Z",
  "closed_at": "2018-10-24T07:49:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n### Description\r\n\r\n[comment]: # (Feature or Bug? i.e Type: Bug)\r\n*Type*: Bug\r\n\r\n[comment]: # (Describe the feature you would like, or briefly summarise the bug and what you did, what you expected to happen, and what actually happens. Sections below)\r\n*Summary*: \r\nBefore upgrade there is one request for ETH and one for SNT. After upgrade both requests are shown twice. Before upgrade user switched from mainnet (where requests are sent) to ropsten.\r\n\r\nAfter upgrade:\r\n![after](https://user-images.githubusercontent.com/6584810/47281973-123d4600-d5e6-11e8-91e7-ebc6d7fc2a58.png)\r\n\r\n\r\n\r\n#### Expected behavior\r\n[comment]: # (Describe what you expected to happen.)\r\nAfter upgrade same messages are shown. There are no extra messages\r\n#### Actual behavior\r\n[comment]: # (Describe what actually happened.)\r\neach received request message is shown twice \r\n### Reproduction\r\n[comment]: # (Describe how we can replicate the bug step by step.)\r\n\r\n- On Android: install 0.9.29 from PlayStore or from apk https://drive.google.com/open?id=1PHnITeXCp3DZGhmhq0SMhjTgcOoUDBe8 (it's same apk as on PlayStore)\r\n- On iOS install 0.9.29 from TestFlight\r\n- both are on mainnet\r\n- iOS: add Android to contacts by scanning QR code and send message \"hi from ios\"\r\n- Android: open 1:1 chat with iOS, add it to the contacts and send message \"hi from android\"\r\n- android: send request of 1 ETH in 1:1 chat\r\n- iOs: send request of 2 ETH in 1:1 chat\r\n- iOS: send request of 333 SNT in 1:1 chat\r\n- iOs: send text message and emoji in the same line\r\n- Android: send text message \"Thanks\"\r\n- Android: switch to Ropsten\r\n- Android: check that you can login and messages look ok (no duplicates)\r\n- Android: upgrade to release build \r\n- Android: login, wait for messages to be fetched and check messages in 1:1 chat. In my case there are 2 new messages shown for chat, if open chat then each of request messages from iOS is shown twice\r\n\r\n\r\n\r\n### Additional Information\r\n[comment]: # (Please do your best to fill this out.)\r\n* Status version: upgrade from 0.9.29 to release build 15\r\n* Operating System: Android\r\n\r\n#### Logs\r\n\r\n[logcat.txt](https://github.com/status-im/status-react/files/2500485/logcat.txt)\r\n",
  "closed_by": {
    "login": "chadyj",
    "id": 116099,
    "node_id": "MDQ6VXNlcjExNjA5OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/116099?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chadyj",
    "html_url": "https://github.com/chadyj",
    "followers_url": "https://api.github.com/users/chadyj/followers",
    "following_url": "https://api.github.com/users/chadyj/following{/other_user}",
    "gists_url": "https://api.github.com/users/chadyj/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chadyj/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chadyj/subscriptions",
    "organizations_url": "https://api.github.com/users/chadyj/orgs",
    "repos_url": "https://api.github.com/users/chadyj/repos",
    "events_url": "https://api.github.com/users/chadyj/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chadyj/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6438/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6438/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431771525",
    "html_url": "https://github.com/status-im/status-mobile/issues/6438#issuecomment-431771525",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6438",
    "id": 431771525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTc3MTUyNQ==",
    "user": {
      "login": "lukaszfryc",
      "id": 7532782,
      "node_id": "MDQ6VXNlcjc1MzI3ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaszfryc",
      "html_url": "https://github.com/lukaszfryc",
      "followers_url": "https://api.github.com/users/lukaszfryc/followers",
      "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
      "repos_url": "https://api.github.com/users/lukaszfryc/repos",
      "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-22T08:27:13Z",
    "updated_at": "2018-10-22T08:27:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can replicate this issue using the same steps (with switching to Ropsten). But, I could not replicate it without switching to Ropsten first (tried 1 test so far).\r\n\r\ncc @annadanchenko ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/431771525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/432550001",
    "html_url": "https://github.com/status-im/status-mobile/issues/6438#issuecomment-432550001",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6438",
    "id": 432550001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjU1MDAwMQ==",
    "user": {
      "login": "chadyj",
      "id": 116099,
      "node_id": "MDQ6VXNlcjExNjA5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116099?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chadyj",
      "html_url": "https://github.com/chadyj",
      "followers_url": "https://api.github.com/users/chadyj/followers",
      "following_url": "https://api.github.com/users/chadyj/following{/other_user}",
      "gists_url": "https://api.github.com/users/chadyj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chadyj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chadyj/subscriptions",
      "organizations_url": "https://api.github.com/users/chadyj/orgs",
      "repos_url": "https://api.github.com/users/chadyj/repos",
      "events_url": "https://api.github.com/users/chadyj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chadyj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T07:49:24Z",
    "updated_at": "2018-10-24T07:49:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fixed in https://github.com/status-im/status-react/pull/6488",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/432550001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

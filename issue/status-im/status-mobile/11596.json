{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/11596",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/11596",
  "id": 775812449,
  "node_id": "MDU6SXNzdWU3NzU4MTI0NDk=",
  "number": 11596,
  "title": "Improve sql storage",
  "user": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 783781483,
      "node_id": "MDU6TGFiZWw3ODM3ODE0ODM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/performance",
      "name": "performance",
      "color": "dd3bd8",
      "default": false,
      "description": null
    },
    {
      "id": 3990913364,
      "node_id": "LA_kwDOAx4p2c7t4IFU",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:PerformanceImprovements",
      "name": "E:PerformanceImprovements",
      "color": "3F3E45",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-12-29T10:14:03Z",
  "updated_at": "2022-12-05T15:38:02Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "| Table                                       | Rows  | \r\n|---------------------------------------------|-------| \r\n| user_messages                               | 90,439 | \r\n| blocks_ranges                               | 23,307 | \r\n| contacts                                    | 17,074 | \r\n| bundles                                     | 14,999 | \r\n| push_notification_client_queries            | 13,549 | \r\n| installations                               | 10,165 | \r\n| emoji_reactions                             | 9,240  | \r\n| mailserver_request_gaps                     | 3,850  | \r\n| keys                                        | 1,573  | \r\n| raw_messages                                | 1,445  | \r\n| mvds_messages                               | 897   | \r\n| sessions                                    | 414   | \r\n| ratchet_info_v2                             | 414   | \r\n| waku_keys                                   | 393   | \r\n| mailserver_topics                           | 363   | \r\n| mailserver_chat_request_ranges              | 324   | \r\n| chats                                       | 310   | \r\n| secret_installation_ids                     | 273   | \r\n| blocks                                      | 239   | \r\n| transfers                                   | 235   | \r\n| push_notification_client_tracked_messages   | 211   | \r\n| secrets                                     | 117   | \r\n| push_notification_client_sent_notifications | 80    | \r\n| mvds_states                                 | 77    | \r\n| browsers_history                            | 72    | \r\n| push_notification_client_info               | 69    | \r\n| whisper_keys                                | 67    | \r\n| mvds_peers                                  | 62    | \r\n| browsers                                    | 26    | \r\n| accounts                                    | 8     | \r\n| permissions                                 | 8     | \r\n| dapps                                       | 7     | \r\n| tokens                                      | 3     | \r\n| status_go_schema_migrations                 | 1     | \r\n| settings                                    | 1     | \r\n| mvds_schema_migrations                      | 1     | \r\n| mvds_epoch                                  | 1     | \r\n| status_protocol_go_schema_migrations        | 1     | \r\n| contact_code_config                         | 1     | \r\n| installation_metadata                       | 1     | \r\n| group_chat_invitations                      | 1     | \r\n| mailservers                                 | 0     | \r\n| messenger_transactions_to_validate          | 0     | \r\n| push_notification_server_registrations      | 0     | \r\n| push_notification_server_identity           | 0     | \r\n| push_notification_client_servers            | 0     | \r\n| push_notification_client_registrations      | 0     | \r\n| push_notification_server_notifications      | 0     | \r\n| pending_transactions                        | 0     | \r\n| favourites                                  | 0     | \r\n| local_notifications_preferences             | 0     | \r\n| bookmarks                                   | 0     | \r\n| chat_identity_last_published                | 0     | \r\n| chat_identity_contacts                      | 0     | \r\n\r\n```\r\n*** Page counts for all tables with their indices *****************************\r\n\r\nUSER_MESSAGES..................................... 107178      90.9% \r\nCONTACTS.......................................... 3465         2.9% \r\nRAW_MESSAGES...................................... 1293         1.1% \r\nEMOJI_REACTIONS................................... 1140         0.97% \r\nMVDS_MESSAGES..................................... 916          0.78% \r\nTRANSFERS......................................... 741          0.63% \r\nCHATS............................................. 735          0.62% \r\nBUNDLES........................................... 613          0.52% \r\nPUSH_NOTIFICATION_CLIENT_QUERIES.................. 541          0.46% \r\nINSTALLATIONS..................................... 419          0.36% \r\nMAILSERVER_REQUEST_GAPS........................... 305          0.26% \r\nBLOCKS_RANGES..................................... 206          0.17% \r\nKEYS.............................................. 77           0.065% \r\nSESSIONS.......................................... 40           0.034% \r\nRATCHET_INFO_V2................................... 31           0.026% \r\nMAILSERVER_TOPICS................................. 15           0.013% \r\nSECRET_INSTALLATION_IDS........................... 14           0.012% \r\nWAKU_KEYS......................................... 14           0.012% \r\nPUSH_NOTIFICATION_CLIENT_SENT_NOTIFICATIONS....... 12           0.010% \r\nMAILSERVER_CHAT_REQUEST_RANGES.................... 11           0.009% \r\nPUSH_NOTIFICATION_CLIENT_TRACKED_MESSAGES......... 11           0.009% \r\nBLOCKS............................................ 10           0.008% \r\nPUSH_NOTIFICATION_CLIENT_INFO..................... 10           0.008% \r\nSETTINGS.......................................... 10           0.008% \r\n```\r\n\r\ndb file is ~500Mb",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/11596/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/800060901",
    "html_url": "https://github.com/status-im/status-mobile/issues/11596#issuecomment-800060901",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596",
    "id": 800060901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMDA2MDkwMQ==",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-16T08:29:12Z",
    "updated_at": "2021-04-20T08:09:16Z",
    "author_association": "MEMBER",
    "body": "| Table                                       | Rows  | Delta |\r\n|---------------------------------------------|-------| -------|\r\n| user_messages                               | 105,900 | +15,461\r\n| blocks_ranges                               | **7** |\r\n| contacts                                    | 20,500 | +3,426\r\n| bundles                                     | 21,175 | +6,175\r\n| push_notification_client_queries            | 16,101 | +2,552 \r\n| installations                               | 14,150 | +4,000\r\n| emoji_reactions                             | 12,000  | +3,000\r\n| mailserver_request_gaps                     | 3,980  | +140\r\n\r\n\r\ndb file is ~520Mb",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/800060901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/823074446",
    "html_url": "https://github.com/status-im/status-mobile/issues/11596#issuecomment-823074446",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596",
    "id": 823074446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzA3NDQ0Ng==",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T08:11:47Z",
    "updated_at": "2021-04-20T08:12:21Z",
    "author_association": "MEMBER",
    "body": "after group chats spam\r\n\r\n| Table                                       | Rows  | Delta |\r\n|---------------------------------------------|-------| -------|\r\n| user_messages                               | 122,200 | +17,000\r\n| blocks_ranges                               | **7** |\r\n| contacts                                    | 23,500 | +3,000\r\n| bundles                                     | 26,175 | +5,175\r\n| push_notification_client_queries            | 18,101 | +2,552 \r\n| installations                               | 17,150 | +3,000\r\n| emoji_reactions                             | 12,700  | +700\r\n| mailserver_request_gaps                     | 4,380  | +540\r\n| chats                     | 963  | -\r\n\r\n\r\ndb file is ~566Mb",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/823074446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1337516543",
    "html_url": "https://github.com/status-im/status-mobile/issues/11596#issuecomment-1337516543",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596",
    "id": 1337516543,
    "node_id": "IC_kwDOAx4p2c5PuOH_",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-05T14:51:10Z",
    "updated_at": "2022-12-05T14:51:10Z",
    "author_association": "MEMBER",
    "body": "@flexsurfer still relevant?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1337516543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1337590258",
    "html_url": "https://github.com/status-im/status-mobile/issues/11596#issuecomment-1337590258",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11596",
    "id": 1337590258,
    "node_id": "IC_kwDOAx4p2c5PugHy",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-05T15:38:02Z",
    "updated_at": "2022-12-05T15:38:02Z",
    "author_association": "MEMBER",
    "body": "yes",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1337590258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

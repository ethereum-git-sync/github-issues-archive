{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/15369",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/15369",
  "id": 1626181769,
  "node_id": "I_kwDOAx4p2c5g7ZCJ",
  "number": 15369,
  "title": "Clunky animation to open AC",
  "user": {
    "login": "ilmotta",
    "id": 46027,
    "node_id": "MDQ6VXNlcjQ2MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilmotta",
    "html_url": "https://github.com/ilmotta",
    "followers_url": "https://api.github.com/users/ilmotta/followers",
    "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
    "organizations_url": "https://api.github.com/users/ilmotta/orgs",
    "repos_url": "https://api.github.com/users/ilmotta/repos",
    "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilmotta/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 783781483,
      "node_id": "MDU6TGFiZWw3ODM3ODE0ODM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/performance",
      "name": "performance",
      "color": "dd3bd8",
      "default": false,
      "description": null
    },
    {
      "id": 2948932638,
      "node_id": "MDU6TGFiZWwyOTQ4OTMyNjM4",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:MActivityCenter",
      "name": "E:MActivityCenter",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    },
    {
      "id": 4968525080,
      "node_id": "LA_kwDOAx4p2c8AAAABKCWtGA",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/Animations",
      "name": "Animations",
      "color": "07F2E6",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-03-15T19:46:49Z",
  "updated_at": "2023-07-14T12:21:10Z",
  "closed_at": "2023-07-14T12:21:10Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Problem\r\n\r\nWhen the Activity Center has more than a handful notifications (e.g. 10), opening it can sometimes cause the modal animation to not be displayed to the user. This behavior can be observed in real devices, as well as in emulators, both in iOS and Android.\r\n\r\n### Solution\r\n\r\n1. The theory goes that we should reduce the weight of rendering notifications when the AC first opens, which would allow re-frame to do the more important work of rendering the AC modal, with all the tabs, etc. So one of the simplest ideas is to just reduce the time to render each individual notification and see if it solves the animation problem.\r\n\r\n2. Another approach or even a complementary approach to point `1)` could be to animate the layout *entering* state of notifications. I've experimented with this in the past, and we can get interesting results, but keep in mind there's a known bug in layout animations for Reanimated FlatList. See my comment for more details https://github.com/status-im/status-mobile/issues/14683#issuecomment-1371515070.\r\n\r\n3. Yet another complimentary option is to only pay the cost of mounting the AC once, and reuse it when the bell icon is pressed a second time. By itself, this idea won't solve the clumsy animation when first opening an AC full of notifications, but if implemented correctly it can lead to nice improvements. But **this solution should probably be avoided** because it puts more pressure on Reagent and re-frame to keep the UI in sync with the app state, even if the AC is hidden. There are ways to circumvent this problem of course.\r\n\r\n4. We can or even should consider rendering less notifications when first opening the AC. Due to the way pagination is currently implemented, when the AC is opened, at most 8 notifications are fetched for the first page, and if the FlatList bottom threshold is reached `onEndReachedThreshold`, the second page is fetched and at most 16 (8 + 8) notifications are rendered. Ideally, we should render only the bare minimum when opening the AC. This problem is not exclusive of the AC. In theory, we could come up with a more general solution for paginating a FlatList that doesn't blindly fetch the full second page.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/15369/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1471268110",
    "html_url": "https://github.com/status-im/status-mobile/issues/15369#issuecomment-1471268110",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369",
    "id": 1471268110,
    "node_id": "IC_kwDOAx4p2c5XscUO",
    "user": {
      "login": "OmarBasem",
      "id": 29354102,
      "node_id": "MDQ6VXNlcjI5MzU0MTAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/29354102?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/OmarBasem",
      "html_url": "https://github.com/OmarBasem",
      "followers_url": "https://api.github.com/users/OmarBasem/followers",
      "following_url": "https://api.github.com/users/OmarBasem/following{/other_user}",
      "gists_url": "https://api.github.com/users/OmarBasem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/OmarBasem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/OmarBasem/subscriptions",
      "organizations_url": "https://api.github.com/users/OmarBasem/orgs",
      "repos_url": "https://api.github.com/users/OmarBasem/repos",
      "events_url": "https://api.github.com/users/OmarBasem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/OmarBasem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T04:01:59Z",
    "updated_at": "2023-03-16T04:01:59Z",
    "author_association": "MEMBER",
    "body": "@ilmotta I have noticed that the AC opening animation does not execute on Android in debug mode (at least on my device), but it does in release mode. So check in release mode if it is showing the same behaviour described above.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1471268110/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1471623936",
    "html_url": "https://github.com/status-im/status-mobile/issues/15369#issuecomment-1471623936",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369",
    "id": 1471623936,
    "node_id": "IC_kwDOAx4p2c5XtzMA",
    "user": {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T09:46:44Z",
    "updated_at": "2023-03-16T09:46:44Z",
    "author_association": "MEMBER",
    "body": "its not only AC, the problem is global, we have more heavy screens, probably we should find some general solution, most of the time it will be screens with flat list or scroll view ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1471623936/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1471961686",
    "html_url": "https://github.com/status-im/status-mobile/issues/15369#issuecomment-1471961686",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15369",
    "id": 1471961686,
    "node_id": "IC_kwDOAx4p2c5XvFpW",
    "user": {
      "login": "ilmotta",
      "id": 46027,
      "node_id": "MDQ6VXNlcjQ2MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilmotta",
      "html_url": "https://github.com/ilmotta",
      "followers_url": "https://api.github.com/users/ilmotta/followers",
      "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
      "organizations_url": "https://api.github.com/users/ilmotta/orgs",
      "repos_url": "https://api.github.com/users/ilmotta/repos",
      "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilmotta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T13:32:27Z",
    "updated_at": "2023-03-16T13:32:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "@OmarBasem, yes, unfortunately it does happen in release mode in a real device. As @flexsurfer said, we'll need to find better solutions to optimize lists of heavy components. I felt like raising this issue just for future reference, I don't intend to attack this problem now.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1471961686/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

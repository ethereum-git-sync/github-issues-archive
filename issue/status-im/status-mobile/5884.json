{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/5884",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/5884",
  "id": 361240474,
  "node_id": "MDU6SXNzdWUzNjEyNDA0NzQ=",
  "number": 5884,
  "title": "App crash with \"Could not invoke Status.callPrivateRPC\" error for accounts with 1000+ transactions",
  "user": {
    "login": "Serhy",
    "id": 8749671,
    "node_id": "MDQ6VXNlcjg3NDk2NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Serhy",
    "html_url": "https://github.com/Serhy",
    "followers_url": "https://api.github.com/users/Serhy/followers",
    "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
    "organizations_url": "https://api.github.com/users/Serhy/orgs",
    "repos_url": "https://api.github.com/users/Serhy/repos",
    "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Serhy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 783781483,
      "node_id": "MDU6TGFiZWw3ODM3ODE0ODM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/performance",
      "name": "performance",
      "color": "dd3bd8",
      "default": false,
      "description": null
    },
    {
      "id": 946691481,
      "node_id": "MDU6TGFiZWw5NDY2OTE0ODE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/mobile-app",
      "name": "mobile-app",
      "color": "f4e949",
      "default": false,
      "description": ""
    },
    {
      "id": 1067655928,
      "node_id": "MDU6TGFiZWwxMDY3NjU1OTI4",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/stale",
      "name": "stale",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-09-18T10:34:27Z",
  "updated_at": "2018-12-24T15:19:16Z",
  "closed_at": "2018-12-24T15:19:16Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "***Type***: Bug\r\n\r\n***Summary***: Depending on the number of transactions contact has, - navigation between screens becomes too laggy which eventually ends up with the `Could not invoke Status.callPrivateRPC` error followed by app crash. \r\nLags (app freezes) especially seen for such accounts after any tranaction has sent (e.g. in Dapp), or when navigating to/back Transaction history screen. \r\n\r\n#### Expected behavior\r\nNo app crashes for accounts with address having 1000+ transactions.\r\n\r\n#### Actual behavior\r\nApp crash with \"Could not invoke Status.callPrivateRPC\" error for accounts with 1000+ transactions\r\n<img width=\"369\" alt=\"screen shot 2018-09-18 at 15 40 02\" src=\"https://user-images.githubusercontent.com/8749671/45688094-24e0dd00-bb59-11e8-8f7d-2c445eaf273c.png\">\r\n\r\n### Reproduction\r\n\r\n- Open Status\r\n- Recover an account (you can use this one: `shrug dring breeze marcy install net reopen uniform atom guilt sadness elite` - it has 1200+ txs)\r\n- Change network to `Ropsten RPC`\r\n- Navigate to Wallet and complete Wallet set up\r\n- Navigate to Simple Test Dapp. Request STT.\r\n- Once transaction signed in Dapp successfully, navigate between different screens (Home <-> Wallet <-> Profile). Note how much time it takes for respective screen to appear after tap (in my case Samsung Galaxy J7 (Android 7) it's up to 10 seconds (sometimes more) \r\n- Join any public chat (e.g. `#status`)\r\n- Navigate between Wallet modal and transaction history screen\r\n\r\n### Additional Information\r\n* Status version: Develop (8468); node 0.14.1\r\n* Operating System: Android, iOS\r\n### Additional Information 2\r\nThis error did not appear in `Release 0.9.27 (node 0.13)`, however the app crached in this version for me as well (crahses not so often as on current develop and just **without errors** on crash)\r\n. \r\n#### Logs\r\n\r\nHere is three TF session where this issue occurred: \r\nhttps://app.testfairy.com/projects/4803622-status/builds/8594431/sessions/4401694838/?accessToken=wcQYg5VqXQlXjwZlZea-I0qZB7c\r\nhttps://app.testfairy.com/projects/4803622-status/builds/8594431/sessions/4401693728/?accessToken=9Ab4zN95dqtpQH5auyGN5s4Bubo\r\nhttps://app.testfairy.com/projects/4803622-status/builds/8596291/sessions/4401743483/?accessToken=QGLfkD0obW0EUZoLdfsoA6gllVQ\r\n\r\n```java.lang.RuntimeException: Could not invoke Status.callPrivateRPC\r\n\tat com.facebook.react.bridge.JavaMethodWrapper.invoke(JavaMethodWrapper.java:383)\r\n\tat com.facebook.react.bridge.JavaModuleWrapper.invoke(JavaModuleWrapper.java:160)\r\n\tat com.facebook.react.bridge.queue.NativeRunnable.run(Native Method)\r\n\tat android.os.Handler.handleCallback(Handler.java:751)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:95)\r\n\tat com.facebook.react.bridge.queue.MessageQueueThreadHandler.dispatchMessage(MessageQueueThreadHandler.java:29)\r\n\tat android.os.Looper.loop(Looper.java:154)\r\n\tat com.facebook.react.bridge.queue.MessageQueueThreadImpl$3.run(MessageQueueThreadImpl.java:192)\r\n\tat java.lang.Thread.run(Thread.java:762)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.facebook.react.bridge.JavaMethodWrapper.invoke(JavaMethodWrapper.java:372)\r\n\t... 8 more\r\nCaused by: java.lang.OutOfMemoryError: pthread_create (1040KB stack) failed: Try again\r\n\tat java.lang.Thread.nativeCreate(Native Method)\r\n\tat java.lang.Thread.start(Thread.java:731)\r\n\tat java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:941)\r\n\tat java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1348)\r\n\tat im.status.ethereum.module.StatusThreadPoolExecutor.execute(StatusThreadPoolExecutor.java:42)\r\n\tat im.status.ethereum.module.StatusModule.callPrivateRPC(StatusModule.java:689)\r\n\t... 10 more```\r\n\r\n<blockquote><div><strong><a href=\"https://app.testfairy.com/projects/4803622-status/builds/8594431/sessions/4401694838/?accessToken=wcQYg5VqXQlXjwZlZea-I0qZB7c\">TestFairy: Status 0.9.28 (8352) @2018</a></strong></div></blockquote>\r\n<blockquote><div><strong><a href=\"https://app.testfairy.com/projects/4803622-status/builds/8594431/sessions/4401693728/?accessToken=9Ab4zN95dqtpQH5auyGN5s4Bubo\">TestFairy: Status 0.9.28 (8352) @2018</a></strong></div></blockquote>\r\n<blockquote><div><strong><a href=\"https://app.testfairy.com/projects/4803622-status/builds/8596291/sessions/4401743483/?accessToken=QGLfkD0obW0EUZoLdfsoA6gllVQ\">TestFairy: Status 0.9.28 (8468) @2018</a></strong></div></blockquote>",
  "closed_by": {
    "login": "status-github-bot[bot]",
    "id": 35452227,
    "node_id": "MDM6Qm90MzU0NTIyMjc=",
    "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
    "html_url": "https://github.com/apps/status-github-bot",
    "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/5884/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/422434059",
    "html_url": "https://github.com/status-im/status-mobile/issues/5884#issuecomment-422434059",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884",
    "id": 422434059,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjQzNDA1OQ==",
    "user": {
      "login": "Serhy",
      "id": 8749671,
      "node_id": "MDQ6VXNlcjg3NDk2NzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Serhy",
      "html_url": "https://github.com/Serhy",
      "followers_url": "https://api.github.com/users/Serhy/followers",
      "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
      "organizations_url": "https://api.github.com/users/Serhy/orgs",
      "repos_url": "https://api.github.com/users/Serhy/repos",
      "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Serhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-18T15:12:37Z",
    "updated_at": "2018-09-18T15:12:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here is a geth.log (with log level = `trace`) for this TF session: https://app.testfairy.com/projects/4803622-status/builds/8596291/sessions/4401766018/?accessToken=91sqiZW9F6eDzIPA3hizLRlLOCQ when `Could not invoke Status.callPrivateRPC` crashed the app. I didn't have a pop-up with error like in description but app just become completly unresponsive for 1m so I had to stop it. \r\n\r\n[gethlog_when_app_become_completly_unresponsive.log](https://github.com/status-im/status-react/files/2393268/gethlog.log)\r\n\r\nAbove log is ~8MB. But when I was trying to reproduce the issue, I had the cases when geth log were up to 500MB for 6-7 minute of nevigation between screens, pull-to-refresh on wallet transaction history, etc.\r\n\n\n<blockquote><div><strong><a href=\"https://app.testfairy.com/projects/4803622-status/builds/8596291/sessions/4401766018/?accessToken=91sqiZW9F6eDzIPA3hizLRlLOCQ\">TestFairy: Status 0.9.28 (8468) @2018</a></strong></div></blockquote>",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/422434059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/447879941",
    "html_url": "https://github.com/status-im/status-mobile/issues/5884#issuecomment-447879941",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884",
    "id": 447879941,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzg3OTk0MQ==",
    "user": {
      "login": "status-github-bot[bot]",
      "id": 35452227,
      "node_id": "MDM6Qm90MzU0NTIyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
      "html_url": "https://github.com/apps/status-github-bot",
      "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-17T15:14:09Z",
    "updated_at": "2018-12-17T15:14:09Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/447879941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/449745643",
    "html_url": "https://github.com/status-im/status-mobile/issues/5884#issuecomment-449745643",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/5884",
    "id": 449745643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0OTc0NTY0Mw==",
    "user": {
      "login": "status-github-bot[bot]",
      "id": 35452227,
      "node_id": "MDM6Qm90MzU0NTIyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
      "html_url": "https://github.com/apps/status-github-bot",
      "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-24T15:19:15Z",
    "updated_at": "2018-12-24T15:19:15Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed. Please re-open if this issue is important to you.\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/449745643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/13240",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/13240/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/13240/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/13240/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/13240",
  "id": 1188178239,
  "node_id": "I_kwDOAx4p2c5G0ik_",
  "number": 13240,
  "title": "Part of messages are not fetched in public chat on Android device for 1 month sync history period",
  "user": {
    "login": "pavloburykh",
    "id": 97245802,
    "node_id": "U_kgDOBcvaag",
    "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pavloburykh",
    "html_url": "https://github.com/pavloburykh",
    "followers_url": "https://api.github.com/users/pavloburykh/followers",
    "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
    "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
    "repos_url": "https://api.github.com/users/pavloburykh/repos",
    "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-03-31T14:30:06Z",
  "updated_at": "2022-03-31T15:30:27Z",
  "closed_at": "2022-03-31T15:30:27Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\nFetching history in public chat for one month period results in loading not all messages that exist for the fetched time period. \r\nI was able to reproduce this bug on Android device. For comparison I use IOS as second device, where all messages seem to be fetched. \r\n\r\nI should admit, that possible cause of the problem might be my slow internet. I connect my Android device to personal hotspot provided by IOS device, that is connected to mobile internet. \r\n\r\nBut another probable cause of the problem might be some issues connected to mailserver. \r\n\r\n\r\n### Reproduction\r\n\r\n1. Open Status on Device 1 (Android) and Device 2 (IOS) for comparison\r\n2. Join public chat with history for long period (at least 1 month) on both devices. You can use #status chat for this purpose. \r\n3. Observe chat history automatically fetched for default 1 day period on both devices\r\n4. Set Sync history period to \"One month\" (Profile => Sync settings => Sync history for)\r\n5. Go back to public chat\r\n6. Tap \"Fetch more messages\"\r\n7. Scroll chat to the very first message in fetched month history\r\n8. Compare the date of first message that is displayed in Device 1 and Device 2\r\n9. Scroll down the chat history and compare some of fetched messages on both devices\r\n\r\n\r\n#### Actual behavior\r\nDate of first message on IOS - Mat 1, 2022, on Android - Mar 23, 2022. The date of first message on Android might be different, but in my case it has never been Mar 1 as it should be. \r\n\r\nAmount of fetched messages on Android differ from IOS. On attached video you can observe comparison of fetched messages on Android (left) and IOS (right). Android misses lot of messages that have been fetched on IOS. \r\n\r\n#### Expected behavior\r\nAll messages for the period starting from Mar 1, 2022 should be fetched. \r\n\r\n\r\n### Additional Information\r\n\r\n- Status version: nightly \r\n- Operating System: Android\r\n\r\n\r\n[comment]: # (Please, add logs/notes if necessary)\r\n\r\n\r\nhttps://user-images.githubusercontent.com/97245802/161077907-7188ff05-36ed-4892-94db-f9f5d858d8cb.mp4\r\n\r\n[geth.log](https://drive.google.com/file/d/1pFNUw3q0aYdscsZIdmbJG0Q1wwzHAngM/view?usp=sharing)",
  "closed_by": {
    "login": "pavloburykh",
    "id": 97245802,
    "node_id": "U_kgDOBcvaag",
    "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pavloburykh",
    "html_url": "https://github.com/pavloburykh",
    "followers_url": "https://api.github.com/users/pavloburykh/followers",
    "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
    "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
    "repos_url": "https://api.github.com/users/pavloburykh/repos",
    "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/13240/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/13240/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1084750300",
    "html_url": "https://github.com/status-im/status-mobile/issues/13240#issuecomment-1084750300",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13240",
    "id": 1084750300,
    "node_id": "IC_kwDOAx4p2c5Ap_nc",
    "user": {
      "login": "pavloburykh",
      "id": 97245802,
      "node_id": "U_kgDOBcvaag",
      "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavloburykh",
      "html_url": "https://github.com/pavloburykh",
      "followers_url": "https://api.github.com/users/pavloburykh/followers",
      "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
      "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
      "repos_url": "https://api.github.com/users/pavloburykh/repos",
      "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-31T15:30:22Z",
    "updated_at": "2022-03-31T15:30:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "According to @cammellos the rootcause of the problem is that different mailservers might contain different amount of messages, thats why some messages might be missing depending on what mailserver is currently being used. \r\n\r\n\"basically there's no synchronization between mailservers, so if a mailserver goes offline for say 5 minutes, it will have a gap\r\nit should be improved when the community history nodes are going to be implemented\"\r\n\r\nSo, for now such behaviour is expected. Closing the issue. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1084750300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

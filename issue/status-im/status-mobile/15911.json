{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/15911",
  "id": 1711157862,
  "node_id": "I_kwDOAx4p2c5l_jJm",
  "number": 15911,
  "title": "`iOS` build fails after upgrading `react-native` version to `0.69.9`",
  "user": {
    "login": "siddarthkay",
    "id": 64726664,
    "node_id": "MDQ6VXNlcjY0NzI2NjY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siddarthkay",
    "html_url": "https://github.com/siddarthkay",
    "followers_url": "https://api.github.com/users/siddarthkay/followers",
    "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
    "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
    "repos_url": "https://api.github.com/users/siddarthkay/repos",
    "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 448876597,
      "node_id": "MDU6TGFiZWw0NDg4NzY1OTc=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/ios",
      "name": "ios",
      "color": "1d76db",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "siddarthkay",
    "id": 64726664,
    "node_id": "MDQ6VXNlcjY0NzI2NjY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siddarthkay",
    "html_url": "https://github.com/siddarthkay",
    "followers_url": "https://api.github.com/users/siddarthkay/followers",
    "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
    "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
    "repos_url": "https://api.github.com/users/siddarthkay/repos",
    "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-05-16T03:22:06Z",
  "updated_at": "2023-05-17T09:38:04Z",
  "closed_at": "2023-05-17T09:38:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Errors seen locally and on CI are below\r\n\r\n```log\r\n[React-RCTAnimation] Compiling RCTNativeAnimatedTurboModule.mm\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:18:44: cannot find protocol declaration for \r\n'NativeAnimatedModuleSpec'\r\n@interface RCTNativeAnimatedTurboModule() <NativeAnimatedModuleSpec, RCTInitializing>\r\n                                           ^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:243:33: use of undeclared identifier 'JS'\r\n                  eventMapping:(JS::NativeAnimatedModule::EventMapping &)eventMapping)\r\n                                ^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:243:33: expected a type\r\n/Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:360:37: error: no member \r\nnamed 'TurboModule' in namespace 'facebook::react'\r\n- (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:\r\n(const facebook::react::ObjCTurboModule::InitParams &)params\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:360:89: no member named \r\n'ObjCTurboModule' in namespace 'facebook::react'\r\n- (std::shared_ptr<facebook::react::TurboModule>)getTurboModule:\r\n(const facebook::react::ObjCTurboModule::InitParams &)params\r\n                                                                       ~~~~~~~~~~~~~~~~~^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:246:76: property 'nativeEventPath' not found \r\non object of type '__strong id'\r\n  eventMappingDict[@\"nativeEventPath\"] = RCTConvertVecToArray(eventMapping.nativeEventPath());\r\n                                                                           ^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:248:20: property 'animatedValueTag' not found \r\non object of type '__strong id'\r\n  if (eventMapping.animatedValueTag()) {\r\n                   ^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedTurboModule.mm:249:61: property 'animatedValueTag' not found on \r\nobject of type '__strong id'\r\n    eventMappingDict[@\"animatedValueTag\"] = @(*eventMapping.animatedValueTag());\r\n                                                            ^\r\n[React-RCTAnimation] Compiling RCTNativeAnimatedNodesManager.m\r\n[React-RCTAnimation] Compiling RCTNativeAnimatedModule.mm\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedModule.mm:232:33: use of undeclared identifier 'JS'\r\n                  eventMapping:(JS::NativeAnimatedModule::EventMapping &)eventMapping)\r\n                                ^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedModule.mm:232:33: expected a type\r\n/Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedModule.mm:235:76: error: property 'nativeEventPath' not found \r\non object of type '__strong id'\r\n  eventMappingDict[@\"nativeEventPath\"] = RCTConvertVecToArray(eventMapping.nativeEventPath());\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedModule.mm:237:20: property 'animatedValueTag' not found on \r\nobject of type '__strong id'\r\n  if (eventMapping.animatedValueTag()) {\r\n                   ^\r\n‚ùå /Users/siddarthkumar/code/experiments/status-mobile/node_modules/react-native/Libraries/\r\nNativeAnimation/RCTNativeAnimatedModule.mm:238:61: property 'animatedValueTag' not found on \r\nobject of type '__strong id'\r\n    eventMappingDict[@\"animatedValueTag\"] = @(*eventMapping.animatedValueTag());\r\n```\r\n\r\nErrors are automagically fixed when i open Xcode and do a rebuild from it. Unfortunately this is not an option on our Jenkins CI.\r\nWe need to figure out a deterministic way of making this build work. Perhaps Xcode does something that `xcodebuild` from CI does not do.\r\n\r\nI have created this issue to log my findings and to figure our a solution.\r\n\r\n#blocks : https://github.com/status-im/status-mobile/pull/15645\r\n\r\n### Additional Information\r\n- Operating System: iOS\r\n\r\n\r\n",
  "closed_by": {
    "login": "siddarthkay",
    "id": 64726664,
    "node_id": "MDQ6VXNlcjY0NzI2NjY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siddarthkay",
    "html_url": "https://github.com/siddarthkay",
    "followers_url": "https://api.github.com/users/siddarthkay/followers",
    "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
    "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
    "repos_url": "https://api.github.com/users/siddarthkay/repos",
    "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/15911/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1548922129",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1548922129",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1548922129,
    "node_id": "IC_kwDOAx4p2c5cUq0R",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T03:25:37Z",
    "updated_at": "2023-05-16T03:25:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "We're not the only ones that face this issue : https://github.com/nrwl/nx/issues/15620#issuecomment-1508475633",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1548922129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1549518802",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1549518802",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1549518802,
    "node_id": "IC_kwDOAx4p2c5cW8fS",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T11:53:55Z",
    "updated_at": "2023-05-16T11:54:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "So i do a little experiment \r\n\r\n```log\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % \r\nfind node_modules -type f -exec md5 {} \\; | sort | md5 > before_checksum.txt\r\n\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % \r\nfind node_modules -type f -exec md5 {} \\; | sort | md5 > after_checksum.txt\r\n\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % \r\ndiff before_checksum.txt after_checksum.txt\r\n\r\n1c1\r\n< 78725f020c21a097906ede1f8a7b57a0\r\n---\r\n> e82e00386dca8e4ca6e91624a69c1dfd\r\n\r\n```\r\n\r\nI make a checksum of `node_modules` before I build via `Xcode` and I repeat the same process after building from `Xcode` (the build succeeds via `Xcode`)\r\nAnd obviously `node_modules` has changed.\r\n**Xcode is the culprit.**\r\n\r\nTime to figure out why..",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1549518802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1549537754",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1549537754",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1549537754,
    "node_id": "IC_kwDOAx4p2c5cXBHa",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T12:06:40Z",
    "updated_at": "2023-05-16T12:30:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Wow this is probably nothing: this is an auto generated file which changes on each build. so the change here is harmless. \r\n\r\n```log\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % \r\nfind node_modules -type f -exec md5 {} \\; | sort > before_files.txt\r\n\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % \r\nfind node_modules -type f -exec md5 {} \\; | sort > after_files.txt \r\n\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % \r\ndiff before_files.txt after_files.txt\r\n50025c50025\r\n< MD5 (node_modules/react-native-config/ios/ReactNativeConfig/GeneratedDotEnv.m) \r\n= 1ab7753c34e3c88a4987ee30fe8308fb\r\n---\r\n> MD5 (node_modules/react-native-config/ios/ReactNativeConfig/GeneratedDotEnv.m) \r\n= b5c74a5d3eaa68b93343879c2c6a0ab9\r\n\r\n```\r\n\r\nI will investigate changes to `ios/build/generated` next.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1549537754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1549689514",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1549689514",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1549689514,
    "node_id": "IC_kwDOAx4p2c5cXmKq",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T13:35:58Z",
    "updated_at": "2023-05-16T13:55:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Some interesting findings : \r\n\r\n```log\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % find ios/build -type f -exec md5 {} \\; | sort > before_files.txt\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % find ios/build -type f -exec md5 {} \\; | sort > after_files.txt\r\nsiddarthkumar@Siddarths-MacBook-Pro status-mobile % diff before_files.txt after_files.txt\r\n1,2c1,2\r\n< MD5 (ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec-generated.mm) = d41d8cd98f00b204e9800998ecf8427e\r\n< MD5 (ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec.h) = d41d8cd98f00b204e9800998ecf8427e\r\n---\r\n> MD5 (ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec-generated.mm) = 2e330c2f56d29e87f8b9affe419b44a5\r\n> MD5 (ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec.h) = a053a3f7791da5883faeb869b1c6195e\r\n```\r\nAlso `FBReactNativeSpec.h` contains this code after we ran a build from Xcode : \r\n`@protocol NativeAnimatedModuleSpec <RCTBridgeModule, RCTTurboModule>`\r\n`NativeAnimatedModuleSpec` is the protocol declaration that the error was originally complaining about ü§î\r\n\r\nAlso before I run build from Xcode both these files are empty : \r\n- `ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec-generated.mm`\r\n- `ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec.h` \r\n\r\nWhich is likely the issue, nothing a nix patch can't fix :) \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1549689514/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1550092491",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1550092491",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1550092491,
    "node_id": "IC_kwDOAx4p2c5cZIjL",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T17:34:34Z",
    "updated_at": "2023-05-16T17:34:34Z",
    "author_association": "MEMBER",
    "body": "This is a great catch. Using checksums to identify what changes was a good idea.\r\n\r\nHopefully we can find a script in `react-native` module that we can patch to fix this behavior.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1550092491/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1550915667",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1550915667",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1550915667,
    "node_id": "IC_kwDOAx4p2c5ccRhT",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T07:46:40Z",
    "updated_at": "2023-05-17T07:52:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Okay so this code below in `Podfile` leads to `use_react_native!` in `node_modules/react-native/\r\nscripts/react_native_pods.rb`\r\n\r\n```ruby\r\nuse_react_native!(:path => config[:reactNativePath],\r\n                    # to enable hermes on iOS, change `false` to `true` and then install pods\r\n                    :production => production,\r\n                    :hermes_enabled => flags[:hermes_enabled],\r\n                    :fabric_enabled => flags[:fabric_enabled],\r\n                    # :flipper_configuration => FlipperConfiguration.enabled,\r\n                    # An absolute path to your application root.\r\n                    :app_path => \"#{Pod::Config.instance.installation_root}/..\"\r\n  )\r\n```\r\n\r\nWhich further leads to `node_modules/react-native/scripts/generate-artifacts.js` where the generation of these files exist\r\n\r\n```javascript\r\n // ...then generate native code artifacts.\r\n      const libraryTypeArg = library.config.type\r\n        ? `--libraryType ${library.config.type}`\r\n        : '';\r\n      fs.mkdirSync(pathToTempOutputDir, {recursive: true});\r\n      executeNodeScript(\r\n        `${path.join(\r\n          RN_ROOT,\r\n          'scripts',\r\n          'generate-specs-cli.js',\r\n        )} --platform ios --schemaPath ${pathToSchema} --outputDir ${pathToTempOutputDir} --libraryName ${\r\n          library.config.name\r\n        } ${libraryTypeArg}`,\r\n      );\r\n\r\n      // Finally, copy artifacts to the final output directory.\r\n      fs.mkdirSync(pathToOutputDirIOS, {recursive: true});\r\n      execSync(`cp -R ${pathToTempOutputDir}/* ${pathToOutputDirIOS}`);\r\n      console.log(`[Codegen] Generated artifacts: ${pathToOutputDirIOS}`);\r\n```\r\n\r\nits funny that this code below gets executed as expected : \r\n```javascript\r\n const iosOutputDir = path.join(\r\n      outputPath ? outputPath : appRootDir,\r\n      'build/generated/ios',\r\n    );\r\nconst tmpDir = fs.mkdtempSync(\r\n        path.join(os.tmpdir(), library.config.name),\r\n      );\r\n const pathToTempOutputDir = path.join(tmpDir, 'out');\r\n \r\n  const pathToOutputDirIOS = path.join(\r\n        iosOutputDir,\r\n        library.config.type === 'components'\r\n          ? 'react/renderer/components'\r\n          : './',\r\n        library.config.name,\r\n      );\r\n```\r\n\r\nBut this code below does not do its job ü§î\r\n\r\n```javascript\r\n // Finally, copy artifacts to the final output directory.\r\n      fs.mkdirSync(pathToOutputDirIOS, {recursive: true});\r\n      execSync(`cp -R ${pathToTempOutputDir}/* ${pathToOutputDirIOS}`);\r\n      console.log(`[Codegen] Generated artifacts: ${pathToOutputDirIOS}`);\r\n```\r\nInvestigating further....",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1550915667/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1550945986",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1550945986",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1550945986,
    "node_id": "IC_kwDOAx4p2c5ccY7C",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T08:07:34Z",
    "updated_at": "2023-05-17T08:07:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "To get `node_modules/react-native/scripts/generate-artifacts.js` to do its job I have to make sure this flag is set while doing pod install `ENV['USE_CODEGEN_DISCOVERY'] =1`\r\nand when i do that the codegen does its job and I get the files i need in :\r\n- `ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec-generated.mm`\r\n- `ios/build/generated/ios/FBReactNativeSpec/FBReactNativeSpec.h`\r\n\r\nSo this is a much better solution than making a patch ü•≥üòÅ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1550945986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1551073554",
    "html_url": "https://github.com/status-im/status-mobile/issues/15911#issuecomment-1551073554",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15911",
    "id": 1551073554,
    "node_id": "IC_kwDOAx4p2c5cc4ES",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T09:38:04Z",
    "updated_at": "2023-05-17T09:38:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "fixed by adding `ENV['USE_CODEGEN_DISCOVERY'] = \"1\"` to `Podfile`",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1551073554/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

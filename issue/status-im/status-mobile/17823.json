{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/17823",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/17823",
  "id": 1978707449,
  "node_id": "I_kwDOAx4p2c518K35",
  "number": 17823,
  "title": "Refactor wallet tokens data in app-db",
  "user": {
    "login": "smohamedjavid",
    "id": 19339952,
    "node_id": "MDQ6VXNlcjE5MzM5OTUy",
    "avatar_url": "https://avatars.githubusercontent.com/u/19339952?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/smohamedjavid",
    "html_url": "https://github.com/smohamedjavid",
    "followers_url": "https://api.github.com/users/smohamedjavid/followers",
    "following_url": "https://api.github.com/users/smohamedjavid/following{/other_user}",
    "gists_url": "https://api.github.com/users/smohamedjavid/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/smohamedjavid/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/smohamedjavid/subscriptions",
    "organizations_url": "https://api.github.com/users/smohamedjavid/orgs",
    "repos_url": "https://api.github.com/users/smohamedjavid/repos",
    "events_url": "https://api.github.com/users/smohamedjavid/events{/privacy}",
    "received_events_url": "https://api.github.com/users/smohamedjavid/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 933023569,
      "node_id": "MDU6TGFiZWw5MzMwMjM1Njk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/feature",
      "name": "feature",
      "color": "172b9e",
      "default": false,
      "description": "feature requests"
    },
    {
      "id": 4052407486,
      "node_id": "LA_kwDOAx4p2c7xitS-",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Wallet%20MVP",
      "name": "E:Mobile Wallet MVP",
      "color": "69E609",
      "default": false,
      "description": "Design system components, initial research and page wireframes"
    },
    {
      "id": 6133100738,
      "node_id": "LA_kwDOAx4p2c8AAAABbY-wwg",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Wallet%20Release%201.27",
      "name": "E:Mobile Wallet Release 1.27",
      "color": "D57677",
      "default": false,
      "description": "all tasks for 1.27 related to wallet"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ulisesmac",
    "id": 90291778,
    "node_id": "MDQ6VXNlcjkwMjkxNzc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/90291778?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ulisesmac",
    "html_url": "https://github.com/ulisesmac",
    "followers_url": "https://api.github.com/users/ulisesmac/followers",
    "following_url": "https://api.github.com/users/ulisesmac/following{/other_user}",
    "gists_url": "https://api.github.com/users/ulisesmac/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ulisesmac/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ulisesmac/subscriptions",
    "organizations_url": "https://api.github.com/users/ulisesmac/orgs",
    "repos_url": "https://api.github.com/users/ulisesmac/repos",
    "events_url": "https://api.github.com/users/ulisesmac/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ulisesmac/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ulisesmac",
      "id": 90291778,
      "node_id": "MDQ6VXNlcjkwMjkxNzc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/90291778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ulisesmac",
      "html_url": "https://github.com/ulisesmac",
      "followers_url": "https://api.github.com/users/ulisesmac/followers",
      "following_url": "https://api.github.com/users/ulisesmac/following{/other_user}",
      "gists_url": "https://api.github.com/users/ulisesmac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ulisesmac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ulisesmac/subscriptions",
      "organizations_url": "https://api.github.com/users/ulisesmac/orgs",
      "repos_url": "https://api.github.com/users/ulisesmac/repos",
      "events_url": "https://api.github.com/users/ulisesmac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ulisesmac/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-11-06T09:41:03Z",
  "updated_at": "2023-11-14T16:54:28Z",
  "closed_at": "2023-11-14T16:54:28Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Depends on #17798\r\n\r\n\r\n- The tokens data are currently stored in the (root) key `:wallet/tokens` and it needs to be moved under the `:wallet` key (along with the accounts and other data). The `:token` key (under `wallet`) will be a map which will contain the `data` and `loading?` keys.\r\n- The keys inside the token data need to be renamed (kebab-case) and the helper methods should be placed in `status-im2.common.data-store.wallet ` ns.\r\n- The subscriptions need to be updated to attach the token data for each account along with the account data.\r\n- The helper methods for the calculation of balances should be moved to `status-im2.contexts.wallet.common.utils` ns.\r\n- The usage should be updated across the wallet.\r\n\r\n### Acceptance Criteria\r\n\r\nThe app should work as before\r\n\r\n\r\n",
  "closed_by": {
    "login": "ulisesmac",
    "id": 90291778,
    "node_id": "MDQ6VXNlcjkwMjkxNzc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/90291778?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ulisesmac",
    "html_url": "https://github.com/ulisesmac",
    "followers_url": "https://api.github.com/users/ulisesmac/followers",
    "following_url": "https://api.github.com/users/ulisesmac/following{/other_user}",
    "gists_url": "https://api.github.com/users/ulisesmac/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ulisesmac/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ulisesmac/subscriptions",
    "organizations_url": "https://api.github.com/users/ulisesmac/orgs",
    "repos_url": "https://api.github.com/users/ulisesmac/repos",
    "events_url": "https://api.github.com/users/ulisesmac/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ulisesmac/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/17823/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1806354760",
    "html_url": "https://github.com/status-im/status-mobile/issues/17823#issuecomment-1806354760",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823",
    "id": 1806354760,
    "node_id": "IC_kwDOAx4p2c5rqslI",
    "user": {
      "login": "ulisesmac",
      "id": 90291778,
      "node_id": "MDQ6VXNlcjkwMjkxNzc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/90291778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ulisesmac",
      "html_url": "https://github.com/ulisesmac",
      "followers_url": "https://api.github.com/users/ulisesmac/followers",
      "following_url": "https://api.github.com/users/ulisesmac/following{/other_user}",
      "gists_url": "https://api.github.com/users/ulisesmac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ulisesmac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ulisesmac/subscriptions",
      "organizations_url": "https://api.github.com/users/ulisesmac/orgs",
      "repos_url": "https://api.github.com/users/ulisesmac/repos",
      "events_url": "https://api.github.com/users/ulisesmac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ulisesmac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-10T19:54:37Z",
    "updated_at": "2023-11-10T19:54:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@smohamedjavid \r\n\r\nThere are more root key subs, we need to investigate what's the app-db structure being used for these keys and check if they need to be refactored.\r\n\r\nThe current subs are:\r\n`:wallet/scanned-address`\r\n`:wallet/create-account`\r\n`:wallet/networks`\r\n`:wallet/scanned-address`\r\n`:wallet/local-suggestions`\r\n`:wallet/valid-ens-or-address?`\r\n`:wallet/send-address`",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1806354760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1806362250",
    "html_url": "https://github.com/status-im/status-mobile/issues/17823#issuecomment-1806362250",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823",
    "id": 1806362250,
    "node_id": "IC_kwDOAx4p2c5rquaK",
    "user": {
      "login": "smohamedjavid",
      "id": 19339952,
      "node_id": "MDQ6VXNlcjE5MzM5OTUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/19339952?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/smohamedjavid",
      "html_url": "https://github.com/smohamedjavid",
      "followers_url": "https://api.github.com/users/smohamedjavid/followers",
      "following_url": "https://api.github.com/users/smohamedjavid/following{/other_user}",
      "gists_url": "https://api.github.com/users/smohamedjavid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/smohamedjavid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/smohamedjavid/subscriptions",
      "organizations_url": "https://api.github.com/users/smohamedjavid/orgs",
      "repos_url": "https://api.github.com/users/smohamedjavid/repos",
      "events_url": "https://api.github.com/users/smohamedjavid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/smohamedjavid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-10T20:01:04Z",
    "updated_at": "2023-11-10T20:01:04Z",
    "author_association": "MEMBER",
    "body": "@ulisesmac - Yes, we have a bunch of `:wallet/*` keys in app-db and subs. \r\n\r\nThe motive of this issue is to tackle one problem (tokens) at a time. Additionally, the token data is not dependent on other subs. It would be safe to refactor.\r\n\r\nWe will eventually create more issues to handle the rest of the keys as we progress. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1806362250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1806413032",
    "html_url": "https://github.com/status-im/status-mobile/issues/17823#issuecomment-1806413032",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17823",
    "id": 1806413032,
    "node_id": "IC_kwDOAx4p2c5rq6zo",
    "user": {
      "login": "ulisesmac",
      "id": 90291778,
      "node_id": "MDQ6VXNlcjkwMjkxNzc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/90291778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ulisesmac",
      "html_url": "https://github.com/ulisesmac",
      "followers_url": "https://api.github.com/users/ulisesmac/followers",
      "following_url": "https://api.github.com/users/ulisesmac/following{/other_user}",
      "gists_url": "https://api.github.com/users/ulisesmac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ulisesmac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ulisesmac/subscriptions",
      "organizations_url": "https://api.github.com/users/ulisesmac/orgs",
      "repos_url": "https://api.github.com/users/ulisesmac/repos",
      "events_url": "https://api.github.com/users/ulisesmac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ulisesmac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-10T20:50:16Z",
    "updated_at": "2023-11-10T20:50:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @ulisesmac - Yes, we have a bunch of `:wallet/*` keys in app-db and subs.\r\n> \r\n> The motive of this issue is to tackle one problem (tokens) at a time. Additionally, the token data is not dependent on other subs. It would be safe to refactor.\r\n> \r\n> We will eventually create more issues to handle the rest of the keys as we progress.\r\n\r\nGot it! Just wanted to spot them.\r\nAlso It'd be good to have an event to clearly initialize `:wallet/initialize` the new wallet :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1806413032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

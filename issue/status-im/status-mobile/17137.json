{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/17137",
  "id": 1871628207,
  "node_id": "I_kwDOAx4p2c5vjsev",
  "number": 17137,
  "title": "App stucks on QR scanning during sync with Desktop",
  "user": {
    "login": "pavloburykh",
    "id": 97245802,
    "node_id": "U_kgDOBcvaag",
    "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pavloburykh",
    "html_url": "https://github.com/pavloburykh",
    "followers_url": "https://api.github.com/users/pavloburykh/followers",
    "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
    "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
    "repos_url": "https://api.github.com/users/pavloburykh/repos",
    "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3990911030,
      "node_id": "LA_kwDOAx4p2c7t4Hg2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Bug%20MVP",
      "name": "E:Mobile Bug MVP",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 3990919470,
      "node_id": "LA_kwDOAx4p2c7t4Jku",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Syncing%20MVP",
      "name": "E:Mobile Syncing MVP",
      "color": "303365",
      "default": false,
      "description": ""
    },
    {
      "id": 5734790420,
      "node_id": "LA_kwDOAx4p2c8AAAABVdH1FA",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Release%201.25",
      "name": "E:Mobile Release 1.25",
      "color": "8AA749",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/66",
    "html_url": "https://github.com/status-im/status-mobile/milestone/66",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/66/labels",
    "id": 9293484,
    "node_id": "MI_kwDOAx4p2c4Ajc6s",
    "number": 66,
    "title": "1.25.0 - Alpha",
    "description": "This release should feature:\r\n\r\n- General polish:\r\n  further polish of messaging/communities/onboarding/profile\"\r\n  Finish resolving all the issues identified during the Porto Sprint\r\n  Fix the UI polish issues that Pedro and Francesca are going to report against 1.24\r\n  Ensure that joining a community where the \"Request to join required\" setting is OFF works\r\n  Fix syncing with Desktop bugs\r\n\r\n- Get the old wallet operational and initial work related to the new wallet\r\n\r\n- Security and privacy\r\n  Allow user to change their password\r\n\r\n\r\n",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 52,
    "closed_issues": 65,
    "state": "open",
    "created_at": "2023-04-17T16:09:18Z",
    "updated_at": "2023-08-29T15:55:13Z",
    "due_on": "2023-08-30T07:00:00Z",
    "closed_at": null
  },
  "comments": 6,
  "created_at": "2023-08-29T13:01:19Z",
  "updated_at": "2023-08-29T18:38:22Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Preconditions:** User A - desktop user, User B - mobile user\r\n\r\n**Steps:** \r\n\r\n1. User A generates scan QR code\r\n2. User B scans QR\r\n3. Observe the result\r\n\r\n**Actual result:** User A stucks on QR scanning. Unable to sync mobile - desktop. \r\n\r\n[logcat_sync.log.zip](https://github.com/status-im/status-mobile/files/12464757/logcat_sync.log.zip)\r\n[Status-debug-logs_sync.zip](https://github.com/status-im/status-mobile/files/12464758/Status-debug-logs_sync.zip)\r\n\r\nhttps://github.com/status-im/status-mobile/assets/97245802/e2213a82-11d0-4b19-9344-5cc641c072de\r\n\r\n### Additional Information\r\n\r\n- Desktop version: Desktop release version 0.14.0-rc.2 or master Aug 25, 2023 (aarch64)  \r\n- Status version: nightly \r\n- Operating System: Android, iOS\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/17137/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697633618",
    "html_url": "https://github.com/status-im/status-mobile/issues/17137#issuecomment-1697633618",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
    "id": 1697633618,
    "node_id": "IC_kwDOAx4p2c5lL9VS",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T15:09:20Z",
    "updated_at": "2023-08-29T15:09:20Z",
    "author_association": "MEMBER",
    "body": "```\r\nt=2023-08-29T09:32:15+0000 lvl=eror msg=\"handleAccountImagesImpl: failed to write image\" error=\"write tcp 127.0.0.1:41995->127.0.0.1:36080: write: connection reset by peer\"\r\n```\r\n\r\n```\r\nt=2023-08-29T07:46:05+0000 lvl=eror msg=\"handleAccountImagesImpl: failed to write image\" error=\"write tcp 127.0.0.1:42849->127.0.0.1:50464: write: broken pipe\"\r\n```\r\n\r\nseems like the receiver crashed/is not responding\r\n\r\n```\r\n08-29 15:13:02.875  6465  6590 I ReactNativeJS: INFO [status-im2.contexts.syncing.events:70] - Initiated local pairing {:response \"{\\\"error\\\":\\\"unsupported version '2'\\\"}\", :event :syncing/input-connection-string-for-bootstrapping}\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697633618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697636575",
    "html_url": "https://github.com/status-im/status-mobile/issues/17137#issuecomment-1697636575",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
    "id": 1697636575,
    "node_id": "IC_kwDOAx4p2c5lL-Df",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T15:10:55Z",
    "updated_at": "2023-08-29T15:10:55Z",
    "author_association": "MEMBER",
    "body": "@igor-sirotin is having a look",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697636575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697661847",
    "html_url": "https://github.com/status-im/status-mobile/issues/17137#issuecomment-1697661847",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
    "id": 1697661847,
    "node_id": "IC_kwDOAx4p2c5lMEOX",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T15:23:27Z",
    "updated_at": "2023-08-29T15:23:27Z",
    "author_association": "MEMBER",
    "body": "should be fixed with status go upgrade, thanks @igor-sirotin for taking a look",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697661847/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697670658",
    "html_url": "https://github.com/status-im/status-mobile/issues/17137#issuecomment-1697670658",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
    "id": 1697670658,
    "node_id": "IC_kwDOAx4p2c5lMGYC",
    "user": {
      "login": "igor-sirotin",
      "id": 25482501,
      "node_id": "MDQ6VXNlcjI1NDgyNTAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25482501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igor-sirotin",
      "html_url": "https://github.com/igor-sirotin",
      "followers_url": "https://api.github.com/users/igor-sirotin/followers",
      "following_url": "https://api.github.com/users/igor-sirotin/following{/other_user}",
      "gists_url": "https://api.github.com/users/igor-sirotin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igor-sirotin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igor-sirotin/subscriptions",
      "organizations_url": "https://api.github.com/users/igor-sirotin/orgs",
      "repos_url": "https://api.github.com/users/igor-sirotin/repos",
      "events_url": "https://api.github.com/users/igor-sirotin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igor-sirotin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T15:28:18Z",
    "updated_at": "2023-08-29T15:28:18Z",
    "author_association": "NONE",
    "body": "Yep, there was a breaking change I introduced in https://github.com/status-im/status-go/pull/3909. \r\nThe issue should fix with upgrading to status-go `v0.164.0`. Sorry for not opening an issue in mobile repo about upgrading status-go ðŸ˜ž ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697670658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697708849",
    "html_url": "https://github.com/status-im/status-mobile/issues/17137#issuecomment-1697708849",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
    "id": 1697708849,
    "node_id": "IC_kwDOAx4p2c5lMPsx",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T15:45:39Z",
    "updated_at": "2023-08-29T15:45:39Z",
    "author_association": "MEMBER",
    "body": "No worries, as discussed in chat, this should have been probably a non-breaking change, the policy is to avoid breaking if possible, in order to avoid unexpected issues. \r\nFor example in this case, we could have appended the new parameter at the end, we should try to treat the connection string in the same way we use protobuf, and we could break after a period of interop (3/4 months).\r\n\r\ni.e \r\n```\r\nreturn fmt.Sprintf(\"%s%s:%s:%s:%s:%s:%s\", connectionStringID, v, ips[0], p, k, ek, ips)\r\n```\r\n\r\nAlso seems like versioning can only be used for signify a breaking change, as client will refuse to connect to previous versions:\r\n\r\n```\r\nfunc (cp *ConnectionParams) validateVersion() error {\r\n\tif cp.version <= versioning.LatestConnectionParamVer {\r\n\t\treturn nil\r\n\t}\r\n\treturn fmt.Errorf(\"unsupported version '%d'\", cp.version)\r\n}\r\n```\r\n\r\nThat probably limits any backward compatibility, since if we want to keep compatibility we can't bump it, and we'd have to accept multiple version ad interim, until we finally bump it, that needs to be taken care when changing this value.\r\n\r\ncc @Samyoul @qfrank @saledjenic ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697708849/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697947795",
    "html_url": "https://github.com/status-im/status-mobile/issues/17137#issuecomment-1697947795",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17137",
    "id": 1697947795,
    "node_id": "IC_kwDOAx4p2c5lNKCT",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T18:38:22Z",
    "updated_at": "2023-08-29T18:38:22Z",
    "author_association": "MEMBER",
    "body": "Hmmm, thank you for this issue. ðŸ¤¦ I advocated for this @cammellos and I also implemented connection string versioning.\n\nPerhaps we can keep versioning to describe what to do with data at specific positions in the string. Connection strings only have a single type so versioning is the only method we currently have to discriminate between them. With protobufs we marshal and unmarshal according to message type.\n\nGranted this specific change is not a type change, it is an extension change. So maybe the concept of version in connection strings is wrong, perhaps \"connection string type\"?\n\nWe need to make a few changes to the current ConnectionString validation process, first what you've identified don't return an error if the string version isn't handleable( or even remove the concept of a version?) . Second remove validation on the string parameter count, to allow for extended strings to be parsable.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1697947795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/10404",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/10404/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/10404/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/10404/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/10404",
  "id": 604716291,
  "node_id": "MDU6SXNzdWU2MDQ3MTYyOTE=",
  "number": 10404,
  "title": "Message marked as sent but it's not (when bad network connection)",
  "user": {
    "login": "Serhy",
    "id": 8749671,
    "node_id": "MDQ6VXNlcjg3NDk2NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Serhy",
    "html_url": "https://github.com/Serhy",
    "followers_url": "https://api.github.com/users/Serhy/followers",
    "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
    "organizations_url": "https://api.github.com/users/Serhy/orgs",
    "repos_url": "https://api.github.com/users/Serhy/repos",
    "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Serhy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-04-22T12:25:31Z",
  "updated_at": "2020-08-06T07:46:31Z",
  "closed_at": "2020-08-06T07:46:31Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Problem\r\n\r\nIt was noticed and reproduced cases when message is sent and visible on sender side and sent but in fact it's not reached mailserver.\r\nThat easy to reproduce on iOS when WiFi enabled (and no mobile network) -> you disable WiFi and there is 5-7 seconds till device (or Status) recognise WiFi is OFF. And sending messages in this range - they are marked and 'Sent' (no message status spinner). After enabling WiFi back - nothing is re-sent thus message sender thinks messages are sent while it's not. \r\n\r\nNot all messages are marked as 'Sent'. There are messages with \"status spinner\". \r\nBut with that issue, i.e. messaging while in poor network connection (and often switch between WiFi and MobileNetwork) may end up in \"lost messages issues\" but reason was that message even \r\n\r\nWith Android it's reproducible as well. See Reproduction valid for both platforms.\r\n#### Expected behavior\r\n\r\nMessage sent in 5-7 seconds after WiFi disabled gets status spinner on sender side\r\n\r\n#### Actual behavior\r\n\r\nMessage sent in 5-7 seconds after WiFi disabled marked as sent on message sender side\r\nVideo: https://drive.google.com/file/d/1_U6_ZUpqcwaHPW1mfMj47MBq2aj1KI9O/view?usp=sharing\r\n\r\n<img width=\"364\" alt=\"Screenshot 2020-04-22 at 15 21 09\" src=\"https://user-images.githubusercontent.com/8749671/79981298-200aaa80-84ad-11ea-87a1-b17391dc11df.png\">\r\n\r\n### Reproduction\r\n\r\n- Open Status and create new account\r\n- Join public chat\r\n- Plug out WiFi router (if you are with iPhone then just simply turn off WiFi on device)\r\n- Send messages right after you plugged out WiFi (in the next 5-7 seconds you have 'Send' button available)\r\n- Keep attention on whether messages are sent, but check with different Device in the same public chat if they sent indeed.\r\n\r\n\r\n### Additional Information\r\n- Status version: develop/release1.3\r\n- Operating System: Android and iOS\r\n\r\n#### Logs\r\n\r\n\r\n```\r\nTBD...\r\n\r\n```\r\n",
  "closed_by": {
    "login": "Serhy",
    "id": 8749671,
    "node_id": "MDQ6VXNlcjg3NDk2NzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Serhy",
    "html_url": "https://github.com/Serhy",
    "followers_url": "https://api.github.com/users/Serhy/followers",
    "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
    "organizations_url": "https://api.github.com/users/Serhy/orgs",
    "repos_url": "https://api.github.com/users/Serhy/repos",
    "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Serhy/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/10404/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/10404/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/669221031",
    "html_url": "https://github.com/status-im/status-mobile/issues/10404#issuecomment-669221031",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/10404",
    "id": 669221031,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTIyMTAzMQ==",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-05T14:19:09Z",
    "updated_at": "2020-08-05T14:19:09Z",
    "author_association": "MEMBER",
    "body": "@Serhy not relevant I believe?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/669221031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/669768535",
    "html_url": "https://github.com/status-im/status-mobile/issues/10404#issuecomment-669768535",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/10404",
    "id": 669768535,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTc2ODUzNQ==",
    "user": {
      "login": "Serhy",
      "id": 8749671,
      "node_id": "MDQ6VXNlcjg3NDk2NzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Serhy",
      "html_url": "https://github.com/Serhy",
      "followers_url": "https://api.github.com/users/Serhy/followers",
      "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
      "organizations_url": "https://api.github.com/users/Serhy/orgs",
      "repos_url": "https://api.github.com/users/Serhy/repos",
      "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Serhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-06T07:46:27Z",
    "updated_at": "2020-08-06T07:46:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Correct. We don't have 'Sent' indication now. Closing the issue",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/669768535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/4323",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/4323/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/4323/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/4323/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/4323",
  "id": 324056331,
  "node_id": "MDU6SXNzdWUzMjQwNTYzMzE=",
  "number": 4323,
  "title": "Preview notifications using background app refresh",
  "user": {
    "login": "pedropombeiro",
    "id": 138074,
    "node_id": "MDQ6VXNlcjEzODA3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/138074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pedropombeiro",
    "html_url": "https://github.com/pedropombeiro",
    "followers_url": "https://api.github.com/users/pedropombeiro/followers",
    "following_url": "https://api.github.com/users/pedropombeiro/following{/other_user}",
    "gists_url": "https://api.github.com/users/pedropombeiro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pedropombeiro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pedropombeiro/subscriptions",
    "organizations_url": "https://api.github.com/users/pedropombeiro/orgs",
    "repos_url": "https://api.github.com/users/pedropombeiro/repos",
    "events_url": "https://api.github.com/users/pedropombeiro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pedropombeiro/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 795655580,
      "node_id": "MDU6TGFiZWw3OTU2NTU1ODA=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/chat",
      "name": "chat",
      "color": "f70cb0",
      "default": false,
      "description": null
    },
    {
      "id": 872160691,
      "node_id": "MDU6TGFiZWw4NzIxNjA2OTE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/push-notifications",
      "name": "push-notifications",
      "color": "36b2b5",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-05-17T14:46:32Z",
  "updated_at": "2018-08-09T13:54:37Z",
  "closed_at": "2018-08-09T13:54:37Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "[comment]: # (Please replace ... with your information. Remove < and >)\r\n\r\n### User Story\r\n\r\nAs a user, I want to see a preview of my messages in the notifications. We should leverage the work from https://github.com/status-im/status-react/issues/3451 to create a local PN with the additional context. \r\n\r\n### Description\r\n\r\n[comment]: # (Feature or Bug? i.e Type: Bug)\r\n*Type*: Features\r\n\r\n[comment]: # (Describe the feature you would like, or briefly summarise the bug and what you did, what you expected to happen, and what actually happens. Sections below)\r\n*Summary*:\r\n\r\nThe application could run in the background upon reception of a notification to fetch recent messages, decrypt them and show and update the notification to show a preview of the message without having to actually send the message body to the notification service.\r\n\r\n#### Expected behavior\r\n[comment]: # (Describe what you expected to happen.)\r\nNotification says who sent a message and shows a preview of the message\r\n\r\n#### Actual behavior\r\n[comment]: # (Describe what actually happened.)\r\nNotification says a message has been received\r\n\r\n### Reproduction\r\n[comment]: # (Describe how we can replicate the bug step by step.)\r\n\r\n- Open Status\r\n- Connect to an account and put Status in background\r\n- Send message from another device\r\n- Should receive notification\r\n\r\n### Solution\r\n[comment]: # (Please summarise the solution and provide a task list on what needs to be fixed.)\r\n*Summary*: \r\nIt could be done using `background app refresh` feature on iOS which allows an app to wake up for 30 sec in the background upon reception of a notification\r\n\r\n> When a background update notification is delivered to the user's device, iOS wakes up your app in the background and gives it up to 30 seconds to run. In iOS, the system delivers background update notifications by calling the application:didReceiveRemoteNotification:fetchCompletionHandler: method of your app delegate. Use that method to initiate any download operations needed to fetch new data. Processing remote notifications in the background requires that you add the appropriate background modes to your app.\r\n\r\nSimilar feature should exist on Android.\r\n",
  "closed_by": {
    "login": "pedropombeiro",
    "id": 138074,
    "node_id": "MDQ6VXNlcjEzODA3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/138074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pedropombeiro",
    "html_url": "https://github.com/pedropombeiro",
    "followers_url": "https://api.github.com/users/pedropombeiro/followers",
    "following_url": "https://api.github.com/users/pedropombeiro/following{/other_user}",
    "gists_url": "https://api.github.com/users/pedropombeiro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pedropombeiro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pedropombeiro/subscriptions",
    "organizations_url": "https://api.github.com/users/pedropombeiro/orgs",
    "repos_url": "https://api.github.com/users/pedropombeiro/repos",
    "events_url": "https://api.github.com/users/pedropombeiro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pedropombeiro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/4323/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/4323/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/411765772",
    "html_url": "https://github.com/status-im/status-mobile/issues/4323#issuecomment-411765772",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/4323",
    "id": 411765772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMTc2NTc3Mg==",
    "user": {
      "login": "pedropombeiro",
      "id": 138074,
      "node_id": "MDQ6VXNlcjEzODA3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/138074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pedropombeiro",
      "html_url": "https://github.com/pedropombeiro",
      "followers_url": "https://api.github.com/users/pedropombeiro/followers",
      "following_url": "https://api.github.com/users/pedropombeiro/following{/other_user}",
      "gists_url": "https://api.github.com/users/pedropombeiro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pedropombeiro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pedropombeiro/subscriptions",
      "organizations_url": "https://api.github.com/users/pedropombeiro/orgs",
      "repos_url": "https://api.github.com/users/pedropombeiro/repos",
      "events_url": "https://api.github.com/users/pedropombeiro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pedropombeiro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-09T13:54:37Z",
    "updated_at": "2018-08-09T13:54:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing as a dupe of https://github.com/status-im/status-react/issues/3451",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/411765772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/11889",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/11889",
  "id": 833495238,
  "node_id": "MDU6SXNzdWU4MzM0OTUyMzg=",
  "number": 11889,
  "title": "Allow sending messages offline",
  "user": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 933023569,
      "node_id": "MDU6TGFiZWw5MzMwMjM1Njk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/feature",
      "name": "feature",
      "color": "172b9e",
      "default": false,
      "description": "feature requests"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/57",
    "html_url": "https://github.com/status-im/status-mobile/milestone/57",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/57/labels",
    "id": 7215978,
    "node_id": "MI_kwDOAx4p2c4Abhtq",
    "number": 57,
    "title": "Release 1.18",
    "description": "",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 24,
    "state": "closed",
    "created_at": "2021-10-04T06:58:17Z",
    "updated_at": "2022-02-15T13:00:36Z",
    "due_on": null,
    "closed_at": "2022-02-15T13:00:36Z"
  },
  "comments": 5,
  "created_at": "2021-03-17T07:44:05Z",
  "updated_at": "2021-12-07T10:25:52Z",
  "closed_at": "2021-12-07T10:25:52Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "```\r\nAs a user\r\nI want to be able to send messages while I am offline\r\nSo that I don't have to wait for the app to be online again to send a message\r\n```\r\n\r\n### Description\r\n\r\nCurrently the input is disabled if the user is offline.\r\nWe should allow the user to send messages when offline and make sure that they are sent once it goes back online.\r\n\r\n### Technical implemnentation\r\n\r\nFor 1-to-1 & private group chat messages one way to do this is to \"pause\" datasync when offline, and restart it when the user is online, that should just work.\r\n\r\nFor public chat/community messages or any other message type that does not use datasync, we should re-use the emoji resending code instead, and resend (or send) once they are online.",
  "closed_by": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/11889/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950802233",
    "html_url": "https://github.com/status-im/status-mobile/issues/11889#issuecomment-950802233",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889",
    "id": 950802233,
    "node_id": "IC_kwDOAx4p2c44rBc5",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-25T11:03:11Z",
    "updated_at": "2021-10-25T11:03:11Z",
    "author_association": "MEMBER",
    "body": "@cammellos @churik \r\na have a few questions:\r\n1. 1-1/private groups case: If I just enabled sending messages when offline on client side (without changes on status-go) and after being offline for a short period of time (like 1m or so) the message is successfully sent when connection is restored. But if that offline time is longer (over 5m or something) I see an option to manually resend the message. So question is: is that an expected behaviour? Do we want to make some changes here?\r\n2. pubchats/communities do we expect the same behaviour for those messages? Or should it be sent automatically regardless of how long the app was offline? Also if app wasn't offline but closed, does it mean we still resend messages automatically or this should be done manually? ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950802233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950835806",
    "html_url": "https://github.com/status-im/status-mobile/issues/11889#issuecomment-950835806",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889",
    "id": 950835806,
    "node_id": "IC_kwDOAx4p2c44rJpe",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-25T11:40:58Z",
    "updated_at": "2021-10-25T11:40:58Z",
    "author_association": "MEMBER",
    "body": "@rasom \r\n\r\nI think for 1 we should not show the \"resend\" option after 5 minutes, we should only show it once it's clear that it won't be send in a timely fashion.\r\nIt's a bit hard to say exactly when you should be sending it, as there's a few edge cases, but in theory we should try to only show it as a last resort (say after a day has passed an no retries are going to be sent for a while).\r\n\r\n\r\n2\r\nSame behavior I'd say, and no difference between going offline or closing the app, so messages should be re-sent if the user closed the app\r\n\r\n@churik what do you think?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950835806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950946291",
    "html_url": "https://github.com/status-im/status-mobile/issues/11889#issuecomment-950946291",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889",
    "id": 950946291,
    "node_id": "IC_kwDOAx4p2c44rknz",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-25T13:46:39Z",
    "updated_at": "2021-10-25T13:46:39Z",
    "author_association": "MEMBER",
    "body": " I'm OK with that.\r\n But currently, we still have situations the messages are marked as sent, but they actually weren't.\r\n Easy steps to reproduce (from IOS):\r\n - turn on Airplane mode\r\n - send any message while button is visible\r\n \r\n  When I got back to online, message is marked as sent, so user thinks that everybody sees that, but in fact, it wasn't sent.\r\n  I'm concerned that with visible button in offline mode this issue may get worse.\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950946291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950953199",
    "html_url": "https://github.com/status-im/status-mobile/issues/11889#issuecomment-950953199",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889",
    "id": 950953199,
    "node_id": "IC_kwDOAx4p2c44rmTv",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-25T13:54:06Z",
    "updated_at": "2021-10-25T13:54:06Z",
    "author_association": "MEMBER",
    "body": "So from my POV better not to delete `Resend` functionality, but make it more robust and also resolve issue like described in the previous comment\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950953199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950974272",
    "html_url": "https://github.com/status-im/status-mobile/issues/11889#issuecomment-950974272",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/11889",
    "id": 950974272,
    "node_id": "IC_kwDOAx4p2c44rrdA",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-25T14:15:21Z",
    "updated_at": "2021-10-25T14:15:21Z",
    "author_association": "MEMBER",
    "body": ">  I'm OK with that.  But currently, we still have situations the messages are marked as sent, but they actually weren't.  Easy steps to reproduce (from IOS):  - turn on Airplane mode  - send any message while button is visible     When I got back to online, message is marked as sent, so user thinks that everybody sees that, but in fact, it wasn't sent.   I'm concerned that with visible button in offline mode this issue may get worse.\r\n\r\nThat's something we have the fix for, I'll make sure it's prioritized ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/950974272/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

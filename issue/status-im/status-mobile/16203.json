{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/16203",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/16203",
  "id": 1744051246,
  "node_id": "I_kwDOAx4p2c5n9Bwu",
  "number": 16203,
  "title": "Image in reply disappears for user who deleted the quoted message until chat is reopened after the quoted message is removed",
  "user": {
    "login": "VladimrLitvinenko",
    "id": 52490791,
    "node_id": "MDQ6VXNlcjUyNDkwNzkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/VladimrLitvinenko",
    "html_url": "https://github.com/VladimrLitvinenko",
    "followers_url": "https://api.github.com/users/VladimrLitvinenko/followers",
    "following_url": "https://api.github.com/users/VladimrLitvinenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/VladimrLitvinenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/VladimrLitvinenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/VladimrLitvinenko/subscriptions",
    "organizations_url": "https://api.github.com/users/VladimrLitvinenko/orgs",
    "repos_url": "https://api.github.com/users/VladimrLitvinenko/repos",
    "events_url": "https://api.github.com/users/VladimrLitvinenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/VladimrLitvinenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/65",
    "html_url": "https://github.com/status-im/status-mobile/milestone/65",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/65/labels",
    "id": 9283773,
    "node_id": "MI_kwDOAx4p2c4Ajai9",
    "number": 65,
    "title": "1.24.0 - Alpha",
    "description": "- Sharing:\r\n  Allow users to share status content on different platforms\r\n\r\n- Polishing and completing:\r\n  messaging/communities/onboarding/shell",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 29,
    "closed_issues": 66,
    "state": "open",
    "created_at": "2023-04-14T11:58:10Z",
    "updated_at": "2023-06-26T13:19:56Z",
    "due_on": "2023-07-13T07:00:00Z",
    "closed_at": null
  },
  "comments": 5,
  "created_at": "2023-06-06T14:58:36Z",
  "updated_at": "2023-06-26T16:21:48Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Steps to Reproduce:\r\n1. User A and User B are in a chat conversation.\r\n2. User A sends a message with an image.\r\n3. User B replies to the message, including the image in the reply.\r\n4. User B removes the quoted message (original message with the image).\r\n5. User B observes the reply section.\r\n\r\n### Actual Result:\r\nThe image in the reply section disappears for User_B after the quoted message is removed, leaving an empty reply section.\r\n\r\n\r\nhttps://github.com/status-im/status-mobile/assets/52490791/22b51ac7-3424-412c-84bf-dfc01fd96584\r\n\r\n\r\n### Expected Result:\r\nThe image in the reply section should remain visible even after the quoted message is removed.\r\n\r\n### ENV: \r\n- nightly [6 Jun 2023]\r\n\r\n### Device:\r\n[Status.log](https://github.com/status-im/status-mobile/files/11666092/Status.log)\r\nhttps://www.dropbox.com/s/hlt862peoreoa9o/geth.log?dl=0",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/16203/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1580178548",
    "html_url": "https://github.com/status-im/status-mobile/issues/16203#issuecomment-1580178548",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203",
    "id": 1580178548,
    "node_id": "IC_kwDOAx4p2c5eL5x0",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-07T08:18:59Z",
    "updated_at": "2023-06-07T08:18:59Z",
    "author_association": "MEMBER",
    "body": "@VladimrLitvinenko was this behaviour previously discussed/documented somewhere? IMO it makes sense to show that reply was written for a removed message instead of keeping the image there. I suppose it might be deleted for a reason :) ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1580178548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1580283403",
    "html_url": "https://github.com/status-im/status-mobile/issues/16203#issuecomment-1580283403",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203",
    "id": 1580283403,
    "node_id": "IC_kwDOAx4p2c5eMTYL",
    "user": {
      "login": "VladimrLitvinenko",
      "id": 52490791,
      "node_id": "MDQ6VXNlcjUyNDkwNzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VladimrLitvinenko",
      "html_url": "https://github.com/VladimrLitvinenko",
      "followers_url": "https://api.github.com/users/VladimrLitvinenko/followers",
      "following_url": "https://api.github.com/users/VladimrLitvinenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/VladimrLitvinenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VladimrLitvinenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VladimrLitvinenko/subscriptions",
      "organizations_url": "https://api.github.com/users/VladimrLitvinenko/orgs",
      "repos_url": "https://api.github.com/users/VladimrLitvinenko/repos",
      "events_url": "https://api.github.com/users/VladimrLitvinenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VladimrLitvinenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-07T09:21:29Z",
    "updated_at": "2023-06-07T09:21:29Z",
    "author_association": "NONE",
    "body": "> @VladimrLitvinenko was this behaviour previously discussed/documented somewhere? IMO it makes sense to show that reply was written for a removed message instead of keeping the image there. I suppose it might be deleted for a reason :)\r\n\r\n@rasom I haven't seen a discussion about this. Looks like this is an edge case that probably was missed during image testing\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1580283403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1580290377",
    "html_url": "https://github.com/status-im/status-mobile/issues/16203#issuecomment-1580290377",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203",
    "id": 1580290377,
    "node_id": "IC_kwDOAx4p2c5eMVFJ",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-07T09:24:54Z",
    "updated_at": "2023-06-07T09:24:54Z",
    "author_association": "MEMBER",
    "body": "so then, I suppose, it has to be discussed before making changes, as I'm not sure that this is actually the expectation:\r\n> The image in the reply section should remain visible even after the quoted message is removed.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1580290377/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1607388343",
    "html_url": "https://github.com/status-im/status-mobile/issues/16203#issuecomment-1607388343",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203",
    "id": 1607388343,
    "node_id": "IC_kwDOAx4p2c5fzsy3",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-26T12:41:14Z",
    "updated_at": "2023-06-26T12:41:14Z",
    "author_association": "MEMBER",
    "body": "@VladimrLitvinenko this should be fixed in develop, would you mind checking please? \r\nThank you",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1607388343/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1607816874",
    "html_url": "https://github.com/status-im/status-mobile/issues/16203#issuecomment-1607816874",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16203",
    "id": 1607816874,
    "node_id": "IC_kwDOAx4p2c5f1Vaq",
    "user": {
      "login": "VladimrLitvinenko",
      "id": 52490791,
      "node_id": "MDQ6VXNlcjUyNDkwNzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VladimrLitvinenko",
      "html_url": "https://github.com/VladimrLitvinenko",
      "followers_url": "https://api.github.com/users/VladimrLitvinenko/followers",
      "following_url": "https://api.github.com/users/VladimrLitvinenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/VladimrLitvinenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VladimrLitvinenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VladimrLitvinenko/subscriptions",
      "organizations_url": "https://api.github.com/users/VladimrLitvinenko/orgs",
      "repos_url": "https://api.github.com/users/VladimrLitvinenko/repos",
      "events_url": "https://api.github.com/users/VladimrLitvinenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VladimrLitvinenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-26T16:21:48Z",
    "updated_at": "2023-06-26T16:21:48Z",
    "author_association": "NONE",
    "body": "Hi @cammellos the issue is fixed in cases when 'delete for everyone' option is used. \r\nOne issue is still reproducible:\r\n## ISSUE 1: [Android] Image/album in reply disappears for user who deleted the quoted message by 'delete for me' option\r\n1. User sends a message with an image or album.\r\n2. User replies to the message, including the image in the reply.\r\n3. User  removes the quoted message  (original message with the image) by \"delete for me\" option.\r\n4. User observes the reply section.\r\n\r\n### Actual result:\r\nThe image in the reply section disappears after the quoted message is removed, leaving an empty reply section.\r\n\r\nhttps://github.com/status-im/status-mobile/assets/52490791/79bab1d1-ab49-475c-81f0-c561c1b2f29c\r\n\r\n\r\n### Expected result:\r\nThe image in the reply section should remain visible even after the quoted message is removed.\r\n\r\n### Additional info:\r\nin 50% of cases the same issue reproduces for IOS devices\r\n\r\n### logs:\r\n[logs.zip](https://github.com/status-im/status-mobile/files/11871473/logs.zip)\r\n[[Status.log](https://github.com/status-im/status-mobile/files/11871474/Status.log)](https://www.dropbox.com/s/hlt862peoreoa9o/geth.log?dl=0)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1607816874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

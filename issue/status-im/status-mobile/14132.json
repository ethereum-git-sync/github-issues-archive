{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/14132",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/14132/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/14132/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/14132/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/14132",
  "id": 1402946050,
  "node_id": "I_kwDOAx4p2c5Tn0IC",
  "number": 14132,
  "title": "Fix very slow rendering times for activities",
  "user": {
    "login": "ilmotta",
    "id": 46027,
    "node_id": "MDQ6VXNlcjQ2MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilmotta",
    "html_url": "https://github.com/ilmotta",
    "followers_url": "https://api.github.com/users/ilmotta/followers",
    "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
    "organizations_url": "https://api.github.com/users/ilmotta/orgs",
    "repos_url": "https://api.github.com/users/ilmotta/repos",
    "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilmotta/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 783781483,
      "node_id": "MDU6TGFiZWw3ODM3ODE0ODM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/performance",
      "name": "performance",
      "color": "dd3bd8",
      "default": false,
      "description": null
    },
    {
      "id": 2948932638,
      "node_id": "MDU6TGFiZWwyOTQ4OTMyNjM4",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/Activity%20center",
      "name": "Activity center",
      "color": "d4c5f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-10-10T10:28:18Z",
  "updated_at": "2022-12-05T13:46:48Z",
  "closed_at": "2022-12-05T13:46:48Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Problem\r\n\r\nRecently, when testing lots of contact request flows in the new Activity Center, I noticed a linear performance degradation when switching to tabs with activities.\r\n\r\nEvery activity takes, on average, 70ms to render, so even with just 10 on screen, the user can see a noticeable delay when switching tabs.\r\n\r\n### Acceptance criteria\r\n\r\nRendering activities should be cheap and fast because there's going to be lots of them. Therefore, this issue should be closed only once we're satisfied with the final performance.\r\n\r\nAlso update this issue or mention in the PR the root cause of the problem.\r\n\r\n### Notes\r\n\r\n- It's not related to data processing on the client side, these are very fast.\r\n- Components are not inadvertently rendering multiple times, so this seems correct.\r\n- Activities are paged on the backend and arrive 10-20 at a time as the user scrolls.\r\n- Keep in mind I only tested this on the Android emulator.\r\n",
  "closed_by": {
    "login": "ilmotta",
    "id": 46027,
    "node_id": "MDQ6VXNlcjQ2MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilmotta",
    "html_url": "https://github.com/ilmotta",
    "followers_url": "https://api.github.com/users/ilmotta/followers",
    "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
    "organizations_url": "https://api.github.com/users/ilmotta/orgs",
    "repos_url": "https://api.github.com/users/ilmotta/repos",
    "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilmotta/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/14132/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/14132/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1282196244",
    "html_url": "https://github.com/status-im/status-mobile/issues/14132#issuecomment-1282196244",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14132",
    "id": 1282196244,
    "node_id": "IC_kwDOAx4p2c5MbMMU",
    "user": {
      "login": "ilmotta",
      "id": 46027,
      "node_id": "MDQ6VXNlcjQ2MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilmotta",
      "html_url": "https://github.com/ilmotta",
      "followers_url": "https://api.github.com/users/ilmotta/followers",
      "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
      "organizations_url": "https://api.github.com/users/ilmotta/orgs",
      "repos_url": "https://api.github.com/users/ilmotta/repos",
      "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilmotta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-18T10:51:39Z",
    "updated_at": "2022-11-14T15:06:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Update 2022-11-14: There were internal discussions about the app's performance. Given the current priorities, it's better to leave this issue open because there might be performance improvements to be made before the new Status app is released.\r\n\r\nUpdate 2022-10-18: I did investigate at length, findings were somewhat inconclusive, and I'm not satisfied yet. The short explanation is that rendering is performed in batches, and if Component A that should be quick to render is batched with Component B (slow or slower), then Component A will be at least as slow as the slowest component in the batch.\r\n\r\nThis all makes sense and is actually expected, but the problem is that it's very easy to end up in a situation where simple UI changes get batched with slow stuff. I'm not yet sure if it's something specific of status-mobile tech stack or if it's more general of React Native apps.\r\n\r\nFrom here, I'll try to at the very least:\r\n\r\n- Profile in a simpler project, but still using ClojureScript and RN.\r\n- Rerun checks in compiler optimized code. Up until this point I only verified in emulators and mobile devices with non-optimized code.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1282196244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

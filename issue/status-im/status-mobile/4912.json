{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/4912",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/4912",
  "id": 334892486,
  "node_id": "MDU6SXNzdWUzMzQ4OTI0ODY=",
  "number": 4912,
  "title": "Instabug message reliability survey is not triggering correctly in app",
  "user": {
    "login": "jpbowen",
    "id": 1865110,
    "node_id": "MDQ6VXNlcjE4NjUxMTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1865110?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jpbowen",
    "html_url": "https://github.com/jpbowen",
    "followers_url": "https://api.github.com/users/jpbowen/followers",
    "following_url": "https://api.github.com/users/jpbowen/following{/other_user}",
    "gists_url": "https://api.github.com/users/jpbowen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jpbowen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jpbowen/subscriptions",
    "organizations_url": "https://api.github.com/users/jpbowen/orgs",
    "repos_url": "https://api.github.com/users/jpbowen/repos",
    "events_url": "https://api.github.com/users/jpbowen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jpbowen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 1067655928,
      "node_id": "MDU6TGFiZWwxMDY3NjU1OTI4",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/stale",
      "name": "stale",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "dmitryn",
    "id": 23836,
    "node_id": "MDQ6VXNlcjIzODM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dmitryn",
    "html_url": "https://github.com/dmitryn",
    "followers_url": "https://api.github.com/users/dmitryn/followers",
    "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
    "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
    "organizations_url": "https://api.github.com/users/dmitryn/orgs",
    "repos_url": "https://api.github.com/users/dmitryn/repos",
    "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dmitryn/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "dmitryn",
      "id": 23836,
      "node_id": "MDQ6VXNlcjIzODM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmitryn",
      "html_url": "https://github.com/dmitryn",
      "followers_url": "https://api.github.com/users/dmitryn/followers",
      "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
      "organizations_url": "https://api.github.com/users/dmitryn/orgs",
      "repos_url": "https://api.github.com/users/dmitryn/repos",
      "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmitryn/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "jpbowen",
      "id": 1865110,
      "node_id": "MDQ6VXNlcjE4NjUxMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1865110?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jpbowen",
      "html_url": "https://github.com/jpbowen",
      "followers_url": "https://api.github.com/users/jpbowen/followers",
      "following_url": "https://api.github.com/users/jpbowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/jpbowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jpbowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jpbowen/subscriptions",
      "organizations_url": "https://api.github.com/users/jpbowen/orgs",
      "repos_url": "https://api.github.com/users/jpbowen/repos",
      "events_url": "https://api.github.com/users/jpbowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jpbowen/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "antdanchenko",
      "id": 12611990,
      "node_id": "MDQ6VXNlcjEyNjExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/12611990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antdanchenko",
      "html_url": "https://github.com/antdanchenko",
      "followers_url": "https://api.github.com/users/antdanchenko/followers",
      "following_url": "https://api.github.com/users/antdanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/antdanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antdanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antdanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/antdanchenko/orgs",
      "repos_url": "https://api.github.com/users/antdanchenko/repos",
      "events_url": "https://api.github.com/users/antdanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antdanchenko/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-06-22T14:11:02Z",
  "updated_at": "2018-10-07T12:07:19Z",
  "closed_at": "2018-10-07T12:07:19Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### User Story\r\nAs a user, I want to give feedback on message reliability to Status by seeing the survey trigger at the correct time - i.e. after I've sent > 5 messages in chat.\r\n\r\n### Description\r\n*Type*: Bug\r\n*Summary*: Currently surveys are configured in Instabug dashboard using conditions which are app version, build number [e.g. 9.9.20(6074)] and a user event of # of messages sent in chat > 5 messages. The surveys are not respecting these parameters when they are triggered.  \r\n\r\n#### Expected behavior\r\nSurvey is shown after conditions are met while user is using chat.\r\n\r\n#### Actual behavior\r\nSurvey is showing after app is restarted and at other random points - e.g. on home screen \r\n\r\n### Reproduction\r\n- Open Status (with survey enabled in Instabug)\r\n- Start to interact by entering password\r\n- See survey triggered at the wrong time  \r\n\r\n### Additional Information\r\n[comment]: # (Please do your best to fill this out.)\r\n* Status version: 0.9.20 (will effect future versions)\r\n[comment]: # (Android or iOS.)\r\n* Operating System: Android & iOS\r\n* Instabug dashboard: https://dashboard.instabug.com/applications/status-6b2838c6-8064-445d-ae12-3c35e96f3a69/beta/surveys\r\n\r\n#### Logs\r\nCurrent conversation with Instabug support (as of June 21): \r\n```\r\n\r\nKamel\r\nAway\r\nJune 14\r\nHi. I have an issue with my survey now (Chat Confidence 0.9.20) that is not respecting the condition I've set. It is just triggering for any user coming in to our app\r\nInstabug typically replies in under 10m.\r\nGive them a way to reach you:\r\nOperator avatar\r\nYou'll be notified here and by email\r\n\r\npatrick@status.im\r\n\r\nZiad avatar\r\nHey Patrick, can you share with me the condition you added that triggers your surveys?\r\nYes, App Version is 0.9.20 and tap :send-current-message > 5 messages\r\n\r\nZiad avatar\r\nPerfect. Do you allow me please to access your dashboard and check this further from my side?\r\nsure, do you need me to send you anything?\r\nor can you access?\r\n\r\nZiad avatar\r\nNot at all. No credentials needed, your confirmation is more than enough :)\r\n\r\nZiad avatar\r\nHey Patrick, can you tell me which application you are facing the survey problem on?\r\nThe app is called Status. It's our mobile app, version 0.9.20 which is a test build that we would like to push to production soon.\r\n\r\nRami avatar\r\nThank you so much for this. Allow me to update my colleague Ziad with this so we can investigate it further 😊\r\n\r\nRami avatar\r\nHey, I was just checking your dashboard, it's seems like the survey that has the issue is paused at the meantime, did you pause it until the issue is fixed? Also, it seems like you're on version 7.13 iOS and the latest version is 7.14.3, so I might suggest updating your native SDK for now, if the problem is still persisting, please let me know so we can investigate this further with our cross platform team 😊 \r\n\r\nJune 15\r\nHi Rami. Sorry for the delay. Yes, I paused because of this issue. When you say we have to upgrade our native SDK, is this react native SDK? Or something else? Apparently, we have already upgraded to the latest version\r\n\r\nRami avatar\r\nIt's no problem at all Patrick. Both React Native SDK and its Natives, in React Native the latest version is 2.13.2 and for the native iOS it's 7.14.3. yeah, sorry, they just double checked and we're on 2.12.0 seeing if we can get our dev to upgrade now\r\n\r\nRami avatar\r\nIt's absolutely no problem my friend, I'll be looking forward to being updated by your side 😊 \r\n\r\nJune 19\r\nHi Rami. I'm following up on this issue, we temporarily upgraded to 2.12.2 this past Friday and we still had issues where our survey parameters (TAP: SEND-CURRENT-MESSAGE > 5) was not being respected.\r\n\r\nKamel avatar\r\nHey Patrick 👋\r\nThis is Kamel again. Thanks for updating the app. \r\nI'm checking that from my side and I will get back to you.\r\n\r\nAlso, how does the React Native version affect Instabug surveys? What specifically does Instabug SDK need from newer React Native dependency?\r\n\r\nKamel avatar\r\nAndroid and iOS SDK versions get updated, and that requires a new version from React Native to push these updates.\r\n\r\nFrom Rami, June 25\r\nPlease accept my sincere apologies for taking so much time on this case, as I would really like to thank you for your patience. Please try updating you SDK version to latest:\r\n\r\nIn React-Native the latest version is: v2.13.2\r\nIn Android the latest version is: v4.15.2\r\nIn iOS the latest version is: v7.14.5\r\nUpdating the SDK should help you getting the problem fixed, please let us know if the problem still persists\r\n\r\n```\r\n\r\n<blockquote><img src=\"/favicon.ico?v=eE5LjeB9Od\" width=\"48\" align=\"right\"><div><strong><a href=\"https://dashboard.instabug.com/applications/status-6b2838c6-8064-445d-ae12-3c35e96f3a69/beta/surveys\">Login | Instabug</a></strong></div></blockquote>",
  "closed_by": {
    "login": "status-github-bot[bot]",
    "id": 35452227,
    "node_id": "MDM6Qm90MzU0NTIyMjc=",
    "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
    "html_url": "https://github.com/apps/status-github-bot",
    "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/4912/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/401727531",
    "html_url": "https://github.com/status-im/status-mobile/issues/4912#issuecomment-401727531",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912",
    "id": 401727531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTcyNzUzMQ==",
    "user": {
      "login": "jpbowen",
      "id": 1865110,
      "node_id": "MDQ6VXNlcjE4NjUxMTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1865110?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jpbowen",
      "html_url": "https://github.com/jpbowen",
      "followers_url": "https://api.github.com/users/jpbowen/followers",
      "following_url": "https://api.github.com/users/jpbowen/following{/other_user}",
      "gists_url": "https://api.github.com/users/jpbowen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jpbowen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jpbowen/subscriptions",
      "organizations_url": "https://api.github.com/users/jpbowen/orgs",
      "repos_url": "https://api.github.com/users/jpbowen/repos",
      "events_url": "https://api.github.com/users/jpbowen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jpbowen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-02T09:16:01Z",
    "updated_at": "2018-07-02T09:16:01Z",
    "author_association": "NONE",
    "body": "@dmitryn would like to understand if any of these upgrades are possible post-beta? \r\n\r\nUpgrade Instabug SDK the latest is: v2.13.2\r\nIn Android the latest version is: v4.15.2\r\nIn iOS the latest version is: v7.14.5\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/401727531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/401780725",
    "html_url": "https://github.com/status-im/status-mobile/issues/4912#issuecomment-401780725",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912",
    "id": 401780725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTc4MDcyNQ==",
    "user": {
      "login": "dmitryn",
      "id": 23836,
      "node_id": "MDQ6VXNlcjIzODM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmitryn",
      "html_url": "https://github.com/dmitryn",
      "followers_url": "https://api.github.com/users/dmitryn/followers",
      "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
      "organizations_url": "https://api.github.com/users/dmitryn/orgs",
      "repos_url": "https://api.github.com/users/dmitryn/repos",
      "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmitryn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-02T11:57:53Z",
    "updated_at": "2018-07-02T11:57:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jpbowen yes, we already have PR for that upgrade https://github.com/status-im/status-react/pull/4788",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/401780725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/425715753",
    "html_url": "https://github.com/status-im/status-mobile/issues/4912#issuecomment-425715753",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912",
    "id": 425715753,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNTcxNTc1Mw==",
    "user": {
      "login": "status-github-bot[bot]",
      "id": 35452227,
      "node_id": "MDM6Qm90MzU0NTIyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
      "html_url": "https://github.com/apps/status-github-bot",
      "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-09-30T11:58:18Z",
    "updated_at": "2018-09-30T11:58:18Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/425715753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/427648283",
    "html_url": "https://github.com/status-im/status-mobile/issues/4912#issuecomment-427648283",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/4912",
    "id": 427648283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzY0ODI4Mw==",
    "user": {
      "login": "status-github-bot[bot]",
      "id": 35452227,
      "node_id": "MDM6Qm90MzU0NTIyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
      "html_url": "https://github.com/apps/status-github-bot",
      "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-10-07T12:07:18Z",
    "updated_at": "2018-10-07T12:07:18Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed. Please re-open if this issue is important to you.\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/427648283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

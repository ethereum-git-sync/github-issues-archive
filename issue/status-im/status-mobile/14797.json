{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/14797",
  "id": 1535080053,
  "node_id": "I_kwDOAx4p2c5bf3Z1",
  "number": 14797,
  "title": "Community messaging issues",
  "user": {
    "login": "pavloburykh",
    "id": 97245802,
    "node_id": "U_kgDOBcvaag",
    "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pavloburykh",
    "html_url": "https://github.com/pavloburykh",
    "followers_url": "https://api.github.com/users/pavloburykh/followers",
    "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
    "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
    "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
    "repos_url": "https://api.github.com/users/pavloburykh/repos",
    "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 916015974,
      "node_id": "MDU6TGFiZWw5MTYwMTU5NzQ=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/e2e%20test%20blocker",
      "name": "e2e test blocker",
      "color": "bc0753",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/64",
    "html_url": "https://github.com/status-im/status-mobile/milestone/64",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/64/labels",
    "id": 9196002,
    "node_id": "MI_kwDOAx4p2c4AjFHi",
    "number": 64,
    "title": "1.23.0 - Alpha",
    "description": "\"This release should feature:\r\n\r\n- Onboarding:\r\n  Allow a user to restore their account using a seedphrase\r\n\r\n- Syncing\r\n  Allow a user to syncing/pair two unpaired devices\r\n\r\n- Communities\r\n  User facing token gating functionality\r\n\r\n- General polish:\r\n  further polish of messaging/communities/onboarding\"",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 49,
    "closed_issues": 23,
    "state": "open",
    "created_at": "2023-03-23T10:11:43Z",
    "updated_at": "2023-04-28T15:22:36Z",
    "due_on": "2023-05-22T07:00:00Z",
    "closed_at": null
  },
  "comments": 38,
  "created_at": "2023-01-16T15:01:37Z",
  "updated_at": "2023-04-25T14:40:07Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### ISSUE 1 Community channel appears with delay for newly joined member\r\n\r\n**Preconditions**: User A and User B are mutual contacts\r\n\r\nBug is not reproducible every time. Sometimes up to 4 tries are needed for reproduction\r\n\r\n**Steps:**\r\n\r\n1. Create community by User A (I've been testing on open communities)\r\n2. Send invite to User B\r\n3. Create new community channel by User A \r\n5. Generate some message history in channel\r\n6. By User B open 1-1 chat with User A (link from User A should be displayed but keep in mind about ISSUE ???)\r\n7. Open community link by User B\r\n8. Tap Join community by User B\r\n9. See if community channel is displayed for User B\r\n\r\n**Actual result:** channel appears with delay up to 2-5 minutes.\r\n\r\n**Expected result:** channel is displayed right after community join.\r\n\r\n\r\nhttps://user-images.githubusercontent.com/97245802/212356668-59fcfb20-6b98-416f-832e-f8b75dc2cf18.mp4\r\n\r\n[community_owner_logs.zip](https://github.com/status-im/status-mobile/files/10412861/community_owner_logs.zip)\r\n\r\n[new_member_logs.zip](https://github.com/status-im/status-mobile/files/10412863/new_member_logs.zip)\r\n\r\n### Additional Information\r\n\r\n- Status version: nightly \r\n- Operating System: Android, iOS\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/14797/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1384190446",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1384190446",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1384190446,
    "node_id": "IC_kwDOAx4p2c5SgRHu",
    "user": {
      "login": "pavloburykh",
      "id": 97245802,
      "node_id": "U_kgDOBcvaag",
      "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavloburykh",
      "html_url": "https://github.com/pavloburykh",
      "followers_url": "https://api.github.com/users/pavloburykh/followers",
      "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
      "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
      "repos_url": "https://api.github.com/users/pavloburykh/repos",
      "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T15:06:49Z",
    "updated_at": "2023-01-16T15:06:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "### ISSUE 2 Sometimes channel history for newly joined user  is lost and never delivered later.\r\n\r\nBelow is an example that has been caught by e2e tests. Bug also can be reproduced manually following steps from ISSUE 1\r\n\r\nSender:\r\nhttps://app.eu-central-1.saucelabs.com/tests/36d61a3f4d43449aa10fecb2035dab74?auth=54daa51c492ae6ee8c38d8d3b615c65f#139\r\nReceiver: https://app.eu-central-1.saucelabs.com/tests/84e9a0e2e8ad4ff7a50b1d3bf372ce5b?auth=cf617cb29e0b5a3a99467c67ca9a9961#88\r\nLog: \r\n[test_community_message_edit_geth2.log](https://github.com/status-im/status-mobile/files/10414063/test_community_message_edit_geth2.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1384190446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1384190688",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1384190688",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1384190688,
    "node_id": "IC_kwDOAx4p2c5SgRLg",
    "user": {
      "login": "pavloburykh",
      "id": 97245802,
      "node_id": "U_kgDOBcvaag",
      "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavloburykh",
      "html_url": "https://github.com/pavloburykh",
      "followers_url": "https://api.github.com/users/pavloburykh/followers",
      "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
      "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
      "repos_url": "https://api.github.com/users/pavloburykh/repos",
      "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T15:07:03Z",
    "updated_at": "2023-01-16T15:07:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "### ISSUE 3 Messages sent in channel while being offline are not sent after coming back online. They stuck in sending status.\r\n\r\nSeems that bug has been introduced by https://github.com/status-im/status-mobile/pull/14779 as I was not able to reproduce in develop. \r\n\r\n**Steps:**\r\n\r\n1. Enable flight mode\r\n2. Send some messages in community channel while being offline\r\n3. Disable flight mode\r\n4. See if messages are delivered after returning online\r\n\r\n**Actual result:** messages stuck in \"sending\" status and never sent later. \r\n\r\n**Expected result:** messages should be sent and delivered after returning online\r\n\r\nbelow video and logs are from PR build as it has not been yet merged into develop at the moment of testing. \r\n\r\nhttps://user-images.githubusercontent.com/97245802/212707655-f0ec0fe3-35ef-4b4c-9ad9-c408d060534c.mp4\r\n\r\n[receiver.zip](https://github.com/status-im/status-mobile/files/10426872/receiver.zip)\r\n[sender.zip](https://github.com/status-im/status-mobile/files/10426873/sender.zip)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1384190688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1387160201",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1387160201",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1387160201,
    "node_id": "IC_kwDOAx4p2c5SrmKJ",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-18T14:26:11Z",
    "updated_at": "2023-01-18T14:26:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "ISSUE 3 is also relevant for deleting messages:\r\nIf UserA deletes messages while UserB is offline, some messages will remain in the chat for UserB when returning online.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1387160201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425573624",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425573624",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425573624,
    "node_id": "IC_kwDOAx4p2c5U-Ib4",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T10:21:24Z",
    "updated_at": "2023-02-10T10:23:00Z",
    "author_association": "MEMBER",
    "body": "re: issue 3\r\n\r\nOne observation: if you turn connection off and send the message right away, wait 3-4 mins, turn it back on - then message will not be re-sent. But If you turn connection off and wait 3-4 mins, then send the message while offline, wait another 3-4 mins and turn connection back on - the message will be eventually re-sent.\r\n\r\nSteps to repro:\r\n1. Enable flight mode\r\n2. Send messages A in community channel while being offline right away\r\n3. wait 3-4 mins\r\n4. Send messages B in community channel while being offline\r\n5. wait 3-4 mins\r\n6. Disable flight mode\r\n7. wait 3-4 mins\r\n8. see that message B is delivered, message A is not\r\n\r\nSo resending is in place, it just doesn't pick messages which are sent right after loosing connection (1-2 mins or so)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425573624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425827176",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425827176",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425827176,
    "node_id": "IC_kwDOAx4p2c5U_GVo",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T13:40:43Z",
    "updated_at": "2023-02-10T13:40:43Z",
    "author_association": "MEMBER",
    "body": "@cammellos @richard-ramos \r\nIt looks like it takes some time on waku side to \"realise\" that connection is lost, and this causes issue 3 when messages are sent in public chats and unencrypted communities (because waku still dispatches `EventEnvelopeSent` although there is no connection).",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425827176/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425835706",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425835706",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425835706,
    "node_id": "IC_kwDOAx4p2c5U_Ia6",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T13:47:55Z",
    "updated_at": "2023-02-10T13:47:55Z",
    "author_association": "MEMBER",
    "body": "cc @siphiuel as he was looking into something similar",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425835706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425847485",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425847485",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425847485,
    "node_id": "IC_kwDOAx4p2c5U_LS9",
    "user": {
      "login": "siphiuel",
      "id": 1019573,
      "node_id": "MDQ6VXNlcjEwMTk1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1019573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siphiuel",
      "html_url": "https://github.com/siphiuel",
      "followers_url": "https://api.github.com/users/siphiuel/followers",
      "following_url": "https://api.github.com/users/siphiuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/siphiuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siphiuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siphiuel/subscriptions",
      "organizations_url": "https://api.github.com/users/siphiuel/orgs",
      "repos_url": "https://api.github.com/users/siphiuel/repos",
      "events_url": "https://api.github.com/users/siphiuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siphiuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T13:58:03Z",
    "updated_at": "2023-02-10T13:58:29Z",
    "author_association": "MEMBER",
    "body": "Interesting. Taking a wild guess, could be related to this code https://github.com/waku-org/go-waku/blob/57d707ff506819c0c20623883fcf73e84ef13ccd/waku/v2/node/keepalive.go#L32 ? Keep-alive needing some time to disconnect peers.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425847485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425891785",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425891785",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425891785,
    "node_id": "IC_kwDOAx4p2c5U_WHJ",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T14:32:55Z",
    "updated_at": "2023-02-10T14:32:55Z",
    "author_association": "MEMBER",
    "body": "@siphiuel, I commented out `go w.startKeepAlive(ctx, w.opts.keepAliveInterval)` and it still took about 2 mins on waku side to notice that connection is lost. \r\nIf that's a proper way to verify that `startKeepAlive` is unrelated to the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425891785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425924577",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425924577",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425924577,
    "node_id": "IC_kwDOAx4p2c5U_eHh",
    "user": {
      "login": "siphiuel",
      "id": 1019573,
      "node_id": "MDQ6VXNlcjEwMTk1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1019573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siphiuel",
      "html_url": "https://github.com/siphiuel",
      "followers_url": "https://api.github.com/users/siphiuel/followers",
      "following_url": "https://api.github.com/users/siphiuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/siphiuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siphiuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siphiuel/subscriptions",
      "organizations_url": "https://api.github.com/users/siphiuel/orgs",
      "repos_url": "https://api.github.com/users/siphiuel/repos",
      "events_url": "https://api.github.com/users/siphiuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siphiuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T14:58:59Z",
    "updated_at": "2023-02-10T15:00:09Z",
    "author_association": "MEMBER",
    "body": "I see. Right, that code is there in the first place to prevent inactive peer disconnects.\r\n\r\nCould be that keepAlive is a sort of early-warning mechanism that fails because we have a 10 sec default keepAlive interval (if i read that correctly in status-go), plus we multiply by 3 to get `sleepDetectionInterval`.\r\n\r\nIf you comment it away, then it makes things worse (it'll never be able to close peer itself), and in that case it's something that libp2p does on a lower level (peer disconnects in 2 mins). Maybe decreasing the `keepAliveInterval` can help.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425924577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425944254",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425944254",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425944254,
    "node_id": "IC_kwDOAx4p2c5U_i6-",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:10:32Z",
    "updated_at": "2023-02-10T15:10:32Z",
    "author_association": "MEMBER",
    "body": "@siphiuel I think the issue here is that we don't have acknowledgements from other peers, as we did in waku-1, so messages are marked as sent if the *leave* the node, but it could be that we are writing on a dead connection that we haven't realized is dead (i.e an half open socket).\r\n\r\nIt would be nice to get acknowledgements from other peers if possible, did we look into it @richard-ramos ?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425944254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425953426",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425953426",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425953426,
    "node_id": "IC_kwDOAx4p2c5U_lKS",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:16:45Z",
    "updated_at": "2023-02-10T15:16:45Z",
    "author_association": "MEMBER",
    "body": "@siphiuel,\r\n> If you comment it away, then it makes things worse\r\n\r\nI would say it did not make any difference at all, it was around same 2 mins time. As default `keepAliveInterval` is 2 secs (much less than 2 mins already) I doubt that descreasing it would help here.\r\n\r\n@cammellos, \r\n> as we did in waku-1\r\n\r\nyep the issue is not reproducible in pub chats on the old release version which uses waku-1 as far as I understand.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425953426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425969540",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425969540",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425969540,
    "node_id": "IC_kwDOAx4p2c5U_pGE",
    "user": {
      "login": "siphiuel",
      "id": 1019573,
      "node_id": "MDQ6VXNlcjEwMTk1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1019573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siphiuel",
      "html_url": "https://github.com/siphiuel",
      "followers_url": "https://api.github.com/users/siphiuel/followers",
      "following_url": "https://api.github.com/users/siphiuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/siphiuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siphiuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siphiuel/subscriptions",
      "organizations_url": "https://api.github.com/users/siphiuel/orgs",
      "repos_url": "https://api.github.com/users/siphiuel/repos",
      "events_url": "https://api.github.com/users/siphiuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siphiuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:28:55Z",
    "updated_at": "2023-02-10T15:28:55Z",
    "author_association": "MEMBER",
    "body": "> @siphiuel I think the issue here is that we don't have acknowledgements from other peers, as we did in waku-1, so messages are marked as sent if the _leave_ the node, but it could be that we are writing on a dead connection that we haven't realized is dead (i.e an half open socket).\r\n\r\nRight. That is why in `startKeepAlive` we're doing the pinging via libp2p's Ping protocol, as this seems to be the good way to find out if the peer is responding and the connection is still alive.\r\n\r\n@rasom so after going to flight mode there's a ~2min interval when all messages being sent are lost, disregarding whatever keepAliveInterval we have or if we even have it running? And after 2 mins elapse message can be resent once the connection is back?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425969540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425977864",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425977864",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425977864,
    "node_id": "IC_kwDOAx4p2c5U_rII",
    "user": {
      "login": "siphiuel",
      "id": 1019573,
      "node_id": "MDQ6VXNlcjEwMTk1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1019573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siphiuel",
      "html_url": "https://github.com/siphiuel",
      "followers_url": "https://api.github.com/users/siphiuel/followers",
      "following_url": "https://api.github.com/users/siphiuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/siphiuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siphiuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siphiuel/subscriptions",
      "organizations_url": "https://api.github.com/users/siphiuel/orgs",
      "repos_url": "https://api.github.com/users/siphiuel/repos",
      "events_url": "https://api.github.com/users/siphiuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siphiuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:34:28Z",
    "updated_at": "2023-02-10T15:34:28Z",
    "author_association": "MEMBER",
    "body": "Meaning - strange, then it seems like `Network().ClosePeer()` is not enough.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425977864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425982152",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425982152",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425982152,
    "node_id": "IC_kwDOAx4p2c5U_sLI",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:36:42Z",
    "updated_at": "2023-02-10T15:36:42Z",
    "author_association": "MEMBER",
    "body": "@siphiuel \r\n\r\n> so after going to flight mode there's a ~2min interval when all messages being sent are lost, disregarding whatever keepAliveInterval we have or if we even have it running? And after 2 mins elapse message can be resent once the connection is back?\r\n\r\nThat is correct. It also can be observer on \"Peers stats\" screen (on mobile) as \"Peers count\" slowly decreases to zero during those ~2 mins. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425982152/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425989036",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1425989036",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1425989036,
    "node_id": "IC_kwDOAx4p2c5U_t2s",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:40:48Z",
    "updated_at": "2023-02-10T15:40:48Z",
    "author_association": "MEMBER",
    "body": "@siphiuel well, regarding 2 mins: it seems that this time is around that time or even longer on iOS simulator when on real iOS device it might be under 1 minute. So it depends ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1425989036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426000843",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1426000843",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1426000843,
    "node_id": "IC_kwDOAx4p2c5U_wvL",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:49:11Z",
    "updated_at": "2023-02-10T15:49:11Z",
    "author_association": "MEMBER",
    "body": "@siphiuel just double-checked: if there are zero peers after loosing connection then messages is resent later, otherwise it is lost. So this is a bit more precise way to determine what happens than just waiting for 2 mins :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426000843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426007810",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1426007810",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1426007810,
    "node_id": "IC_kwDOAx4p2c5U_ycC",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T15:53:49Z",
    "updated_at": "2023-02-10T15:53:49Z",
    "author_association": "MEMBER",
    "body": "> @cammellos It would be nice to get acknowledgements from other peers if possible, did we look into it?\r\n\r\nAFAIK with current implementation, this is only possible with lightpush, since you get a response indicating that the node you chose to broadcast a message received your request. I'll take a look at go-libp2p-pubsub to see how the Publish function works in case of disconnection.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426007810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426032820",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1426032820",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1426032820,
    "node_id": "IC_kwDOAx4p2c5U_4i0",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-10T16:13:01Z",
    "updated_at": "2023-02-10T16:18:14Z",
    "author_association": "MEMBER",
    "body": "Seems to me like if go-libp2p-pubsub cannot send a message, nothing happens?\r\nhttps://github.com/libp2p/go-libp2p-pubsub/blob/master/comm.go#L181-L186\r\n\r\nEDIT:\r\nSo, `stream.Reset()` and `stream.Close()` are executed. I guess this does not remove the peers from the list of connected peers. I'll continue investigating...",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426032820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426665875",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1426665875",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1426665875,
    "node_id": "IC_kwDOAx4p2c5VCTGT",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-11T08:57:04Z",
    "updated_at": "2023-02-11T08:57:04Z",
    "author_association": "MEMBER",
    "body": "@siphiuel \r\n1. I was wrong and `keepAliveInterval` was 10s, not 2s. \r\n2. Decreasing it to 2s shortens the gap when message is sent and lost but doesn't remove the gap completely. Idk if that is actually desirable to make this interval much shorter or even shorter than 10s.\r\n\r\n@richard-ramos @cammellos \r\nWhat if on reaching zero peers we mark all messages which were sent in last 1-2mins as not sent so that those are resent on reconnection. This sounds dumb and is not 100% reliable but likely will fix some of issues here.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1426665875/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1430545855",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1430545855",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1430545855,
    "node_id": "IC_kwDOAx4p2c5VRGW_",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-14T23:54:36Z",
    "updated_at": "2023-02-14T23:54:36Z",
    "author_association": "MEMBER",
    "body": "So i followed the code from https://github.com/status-im/status-go/blob/develop/vendor/github.com/libp2p/go-libp2p-pubsub/comm.go#L170-L175 and saw that if the node has an active tcp connection, and then the machine is disconnected, it will still attempt to send data via the connection and not fail, so it's getting buffered somewhere...(perhaps at OS level).  The peer only gets disconnected when we try to read data from it (which happens with the keep-alive loop).\r\n\r\nI see in go-libp2p-pubsub that `s network.Stream` has a [`SetWriteDeadline`](https://pkg.go.dev/net#TCPConn.SetWriteDeadline) function available. Perhaps we can try to force a small timeout there and see how it behaves? \r\n\r\n\r\n> @cammellos: I think the issue here is that we don't have acknowledgements from other peers, as we did in waku-1\r\n> It would be nice to get acknowledgements from other peers if possible, did we look into it @richard-ramos ?\r\n\r\nI guess that would involve doing a fork of go-libp2p-pubsub and making changes in the protocol? looking at https://github.com/libp2p/specs/blob/master/pubsub/README.md#stream-management I don't see guidance in the pubsub RFC on how replying to RPC messages is handling.\r\n\r\ncc: @Tanguy and @jm-clius for ideas!",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1430545855/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1463652422",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1463652422",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1463652422,
    "node_id": "IC_kwDOAx4p2c5XPZBG",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-10T11:13:19Z",
    "updated_at": "2023-03-10T13:47:21Z",
    "author_association": "MEMBER",
    "body": "09/03 and 10/03 I'm facing a delay in delivering community messages.\r\nSometimes message state is just is not changed to \"Sent\", sometimes it is changed, but messages actually are not delivered.\r\n\r\n**Data for sender**:\r\nVideo: https://app.saucelabs.com/tests/ab45c52418bc45cc87d8185ca27f2462#141 (sent at 5:25)\r\nFull logcat for sender: [logcat (6).log](https://github.com/status-im/status-mobile/files/10941356/logcat.6.log)\r\n\r\n**Data for receiver**: \r\nVideo: https://app.saucelabs.com/tests/ef295b053b674875b558c5fc128a56f7#92 (came to chat at 5:45 and waited for almost 2 mins - no message arrived)\r\nFull logcat for receiver:  [logcat (7).log](https://github.com/status-im/status-mobile/files/10941386/logcat.7.log)\r\n\r\nNot sure they are useful though, if not - tell me what is the acceptable time to wait for a message in e2e (IMO it should be max 60 sec) and we can measure what the percentage of e2e will fail with a timeout.\r\n\r\n\r\nсс @cammellos \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1463652422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1463848541",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1463848541",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1463848541,
    "node_id": "IC_kwDOAx4p2c5XQI5d",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-10T14:03:04Z",
    "updated_at": "2023-03-10T14:03:46Z",
    "author_association": "MEMBER",
    "body": "More logs from now: \r\nhttps://app.saucelabs.com/tests/5525b07ca63444fe924d0932747fe328#106 - the message hasn't changed a state to \"Sent\" during 120 sec.\r\nLogcat: [logcat (8).log](https://github.com/status-im/status-mobile/files/10942724/logcat.8.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1463848541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1465788783",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1465788783",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1465788783,
    "node_id": "IC_kwDOAx4p2c5XXilv",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-13T09:27:25Z",
    "updated_at": "2023-03-13T09:27:25Z",
    "author_association": "MEMBER",
    "body": "@jo-mut reported a similar issue:\r\n\r\nsome relevant logs\r\n```\r\nt=2023-03-13T08:43:03+0000 lvl=eror msg=\"failed to resolve local interface addresses\" error=\"route ip+net: netlinkrib: permission denied\"\r\n```\r\n\r\nhttps://github.com/golang/go/issues/40569#issuecomment-1050381441",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1465788783/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1465811406",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1465811406",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1465811406,
    "node_id": "IC_kwDOAx4p2c5XXoHO",
    "user": {
      "login": "jo-mut",
      "id": 28704507,
      "node_id": "MDQ6VXNlcjI4NzA0NTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/28704507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jo-mut",
      "html_url": "https://github.com/jo-mut",
      "followers_url": "https://api.github.com/users/jo-mut/followers",
      "following_url": "https://api.github.com/users/jo-mut/following{/other_user}",
      "gists_url": "https://api.github.com/users/jo-mut/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jo-mut/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jo-mut/subscriptions",
      "organizations_url": "https://api.github.com/users/jo-mut/orgs",
      "repos_url": "https://api.github.com/users/jo-mut/repos",
      "events_url": "https://api.github.com/users/jo-mut/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jo-mut/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-13T09:43:22Z",
    "updated_at": "2023-03-13T10:10:55Z",
    "author_association": "MEMBER",
    "body": "I also noticed after a long while the messages are delivered but its like the delivery process is choosy. Some are never delivered at all. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1465811406/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1469849247",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1469849247",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1469849247,
    "node_id": "IC_kwDOAx4p2c5XnB6f",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T11:39:53Z",
    "updated_at": "2023-03-15T11:39:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Adding logs from the mobile app for two of my cases when I didn't receive messages on 14/03 and 15/03.\r\nIn both cases, I received messages on the mobile app but not on the desktop, although that could be a coincidence.\r\nAn attempt to reproduce the issue by just returning from offline failed.\r\n\r\n14/03 [logs (56).zip](https://github.com/status-im/status-mobile/files/10978828/logs.56.zip) (messages were not received  on desktop in the #mobile channel)\r\n\r\n15/03 [logs (57).zip](https://github.com/status-im/status-mobile/files/10978830/logs.57.zip) (messages were not received  on desktop in the #mobile channel and in one 1-1 chat)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1469849247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1473766560",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1473766560",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1473766560,
    "node_id": "IC_kwDOAx4p2c5X1-Sg",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T12:36:16Z",
    "updated_at": "2023-03-17T12:36:16Z",
    "author_association": "MEMBER",
    "body": "More logs when mobile device completely stopped receiving messages, but it can send messages:\r\n[logs (29).zip](https://github.com/status-im/status-mobile/files/11001363/logs.29.zip)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1473766560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1481459290",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1481459290",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1481459290,
    "node_id": "IC_kwDOAx4p2c5YTUZa",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T16:01:34Z",
    "updated_at": "2023-03-23T16:01:34Z",
    "author_association": "MEMBER",
    "body": "> Adding logs from the mobile app for two of my cases when I didn't receive messages on 14/03 and 15/03. In both cases, I received messages on the mobile app but not on the desktop, although that could be a coincidence. An attempt to reproduce the issue by just returning from offline failed.\r\n> \r\n> 14/03 [logs (56).zip](https://github.com/status-im/status-mobile/files/10978828/logs.56.zip) (messages were not received on desktop in the #mobile channel)\r\n> \r\n> 15/03 [logs (57).zip](https://github.com/status-im/status-mobile/files/10978830/logs.57.zip) (messages were not received on desktop in the #mobile channel and in one 1-1 chat)\r\n\r\nThe issue in this logs is due to the nameserver timing out:\r\n\r\n\r\n```\r\nt=2023-03-15T10:31:09+0000 lvl=warn msg=\"dns discovery error \" error=\"lookup prod.nodes.status.im on [::1]:53: dial udp 1.1.1.1:53: i/o timeout\"\r\n```\r\n@qoqobolo where are you connecting from? mobile data/wifi etc",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1481459290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1481466880",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1481466880",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1481466880,
    "node_id": "IC_kwDOAx4p2c5YTWQA",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T16:05:51Z",
    "updated_at": "2023-03-23T16:05:51Z",
    "author_association": "MEMBER",
    "body": "> More logs when mobile device completely stopped receiving messages, but it can send messages: [logs (29).zip](https://github.com/status-im/status-mobile/files/11001363/logs.29.zip)\r\n\r\nthis is different, \r\n\r\n```\r\nt=2023-03-17T12:24:14+0000 lvl=warn msg=\"failed to validate message\" site=handleChatMessage error=\"clock value too high\"\r\n```\r\n\r\nThis happens when clock of sender/receiver drifts too much in the future (with waku-1 they would not be propagated, but with waku 2 they are, so maybe that's why we see them), though is a bit odd since both clocks should be ntp synced, but the cases are two:\r\n\r\neither the sender has a time in the future\r\nor the received has time in the past (or both ;)) \r\n\r\ninvestigating, but in case you have the logs of the sender, that would be helpful (geth.log)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1481466880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1481503220",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1481503220",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1481503220,
    "node_id": "IC_kwDOAx4p2c5YTfH0",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T16:26:12Z",
    "updated_at": "2023-03-23T16:26:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "> where are you connecting from? mobile data/wifi etc\r\n\r\nFrom wifi",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1481503220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1482582760",
    "html_url": "https://github.com/status-im/status-mobile/issues/14797#issuecomment-1482582760",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/14797",
    "id": 1482582760,
    "node_id": "IC_kwDOAx4p2c5YXmro",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-24T10:31:42Z",
    "updated_at": "2023-03-24T10:31:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cammellos regarding this issue:\r\n\r\n> This happens when clock of sender/receiver drifts too much in the future (with waku-1 they would not be propagated, but with waku 2 they are, so maybe that's why we see them), though is a bit odd since both clocks should be ntp synced, but the cases are two:\r\neither the sender has a time in the future\r\nor the received has time in the past (or both ;))\r\ninvestigating, but in case you have the logs of the sender, that would be helpful (geth.log)\r\n\r\nI ran into a problem with creating group chats.\r\nI tried to create group chats on one of my devices - Huawei, inviting to those groups two other devices - Pixel and iPhone.\r\n\r\nGroups were created on the admin side (Huawei), but the invited members never received them.\r\n\r\nI checked the Huawei date&time settings and found that the date and time were set **manually** there, and the time was indeed a little behind the other two devices (~30 seconds).\r\n\r\nI changed the setting to `set automatically` and that fixed the problem - groups created on Huawei started showing up on other devices.\r\n\r\nLogs before changing the settings \r\n[Group admin (Huawei) geth.log](https://github.com/status-im/status-mobile/files/11061038/geth.log)\r\n[Member (Pixel) geth.log](https://github.com/status-im/status-mobile/files/11061047/geth.log)\r\n\r\n\r\n\r\nQuestion: should we (and can we) somehow handle this behavior if the time is set manually on a device? Do we need a separate issue for this?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1482582760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/17682",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/17682/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/17682/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/17682/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/17682",
  "id": 1951129554,
  "node_id": "I_kwDOAx4p2c50S9_S",
  "number": 17682,
  "title": "`make pod-install` command fails for MacOS with local ruby version 3.0 ",
  "user": {
    "login": "siddarthkay",
    "id": 64726664,
    "node_id": "MDQ6VXNlcjY0NzI2NjY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siddarthkay",
    "html_url": "https://github.com/siddarthkay",
    "followers_url": "https://api.github.com/users/siddarthkay/followers",
    "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
    "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
    "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
    "repos_url": "https://api.github.com/users/siddarthkay/repos",
    "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-10-19T03:32:07Z",
  "updated_at": "2023-10-19T03:36:09Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Problem\r\n\r\nAs reported by @mohsen-ghafouri \r\n\r\nOn latest develop branch\r\n`make pod-install`\r\nwould fail with \r\n`Could not find ffi-1.15.5 in locally installed gems (Bundler::GemNotFound)`\r\n\r\nwhen running `make nix-update-gems`\r\nthe key error message was \r\n`<internal:/nix/store/wsb2l0f892jfry6inik9kj8swn2bpz00-ruby-3.1.4/lib/ruby/3.1.0/rubygems/core_ext/kernel_require.rb>:85:in `require': incompatible library version - /Users/maxghafori/.rvm/gems/ruby-3.0.0/gems/pathname-0.2.1/lib/pathname.bundle `\r\n\r\n## Screenshots\r\n![pod-failure](https://github.com/status-im/status-mobile/assets/64726664/31b8d829-0708-463b-8674-9f978a454424)\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/17682/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/17682/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1769838398",
    "html_url": "https://github.com/status-im/status-mobile/issues/17682#issuecomment-1769838398",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17682",
    "id": 1769838398,
    "node_id": "IC_kwDOAx4p2c5pfZc-",
    "user": {
      "login": "siddarthkay",
      "id": 64726664,
      "node_id": "MDQ6VXNlcjY0NzI2NjY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/64726664?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siddarthkay",
      "html_url": "https://github.com/siddarthkay",
      "followers_url": "https://api.github.com/users/siddarthkay/followers",
      "following_url": "https://api.github.com/users/siddarthkay/following{/other_user}",
      "gists_url": "https://api.github.com/users/siddarthkay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siddarthkay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siddarthkay/subscriptions",
      "organizations_url": "https://api.github.com/users/siddarthkay/orgs",
      "repos_url": "https://api.github.com/users/siddarthkay/repos",
      "events_url": "https://api.github.com/users/siddarthkay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siddarthkay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-19T03:36:09Z",
    "updated_at": "2023-10-19T03:36:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "After updating local ruby version, @mohsen-ghafouri also saw this : \r\n\r\n```\r\n# Prepare exported header include\r\nEXPORTED_INCLUDE_DIR=\"exported/glog\"\r\nmkdir -p exported/glog\r\ncp -f src/glog/log_severity.h \"$EXPORTED_INCLUDE_DIR/\"\r\ncp -f src/glog/logging.h \"$EXPORTED_INCLUDE_DIR/\"\r\ncp -f src/glog/raw_logging.h \"$EXPORTED_INCLUDE_DIR/\"\r\ncp -f src/glog/stl_logging.h \"$EXPORTED_INCLUDE_DIR/\"\r\ncp -f src/glog/vlog_is_on.h \"$EXPORTED_INCLUDE_DIR/\"\r\n\r\npatching file config.sub\r\nchecking for a BSD-compatible install... /nix/store/a50l7xr6jrx5jlm8ys5jyi3nvlycq748-coreutils-9.1/bin/install -c\r\nchecking whether build environment is sane... yes\r\nchecking for arm-apple-darwin-strip... no\r\nchecking for strip... strip\r\nchecking for a thread-safe mkdir -p... /nix/store/a50l7xr6jrx5jlm8ys5jyi3nvlycq748-coreutils-9.1/bin/mkdir -p\r\nchecking for gawk... gawk\r\nchecking whether make sets $(MAKE)... yes\r\nchecking whether make supports nested variables... yes\r\nchecking for arm-apple-darwin-gcc... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -arch arm64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS17.0.sdk\r\nchecking whether the C compiler works... no\r\nsed: can't read s/\\@ac_cv_have_libgflags\\@/0/: No such file or directory\r\nsed: can't read s/HAVE_LIB_GFLAGS/HAVE_LIB_GFLAGS_DISABLED/: No such file or directory\r\n/Users/maxghafori/Library/Caches/CocoaPods/Pods/External/glog/2263bd123499e5b93b5efe24871be317-166d1/missing: Unknown `--is-lightweight' option\r\nTry `/Users/maxghafori/Library/Caches/CocoaPods/Pods/External/glog/2263bd123499e5b93b5efe24871be317-166d1/missing --help' for more information\r\nconfigure: WARNING: 'missing' script is too old or missing\r\nconfigure: error: in `/Users/maxghafori/Library/Caches/CocoaPods/Pods/External/glog/2263bd123499e5b93b5efe24871be317-166d1':\r\nconfigure: error: C compiler cannot create executables\r\nSee `config.log' for more details\r\n```\r\n\r\nIt seems like he is using Xcode 15 and that could be the root cause of this issue.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1769838398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/18624",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/18624",
  "id": 2100356502,
  "node_id": "I_kwDOAx4p2c59MOWW",
  "number": 18624,
  "title": "Empty community screen is opened when following an \"old\" community link",
  "user": {
    "login": "qoqobolo",
    "id": 67952253,
    "node_id": "MDQ6VXNlcjY3OTUyMjUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qoqobolo",
    "html_url": "https://github.com/qoqobolo",
    "followers_url": "https://api.github.com/users/qoqobolo/followers",
    "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
    "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
    "repos_url": "https://api.github.com/users/qoqobolo/repos",
    "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3990911030,
      "node_id": "LA_kwDOAx4p2c7t4Hg2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Bug%20MVP",
      "name": "E:Mobile Bug MVP",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 6013456086,
      "node_id": "LA_kwDOAx4p2c8AAAABZm4O1g",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Deep%20links%20MVP",
      "name": "E:Mobile Deep links MVP",
      "color": "553E78",
      "default": false,
      "description": ""
    },
    {
      "id": 6104979722,
      "node_id": "LA_kwDOAx4p2c8AAAABa-KZCg",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Release%201.27",
      "name": "E:Mobile Release 1.27",
      "color": "140C7F",
      "default": false,
      "description": ""
    },
    {
      "id": 6176042441,
      "node_id": "LA_kwDOAx4p2c8AAAABcB7tyQ",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Universal%20Links%20MVP",
      "name": "E:Mobile Universal Links MVP",
      "color": "B18F7F",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/70",
    "html_url": "https://github.com/status-im/status-mobile/milestone/70",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/70/labels",
    "id": 9699572,
    "node_id": "MI_kwDOAx4p2c4AlAD0",
    "number": 70,
    "title": "1.27.0 - Alpha",
    "description": "### This release will be used for internal dogfooding\r\n\r\nMobile dev team priorities In priority order:\r\n\r\n**1. Finish anything that wasn't completed in the previous 1.26 cycle**\r\n\r\n**2. Select which accounts to share with each Community's control node**\r\n- Designs should be ready for review and dev feedback by 18th September\r\n\r\n**3. Settings home screen**\r\n- the settings home screen only\r\n\r\n**4. Fix bugs, both functional and UX fit-and-finish defects.**  \r\n\r\n- specifically focus on bugs related to the Communities functionality, when a community is utilizing all the community admin functionality available in Status Desktop\r\n\r\n- any remaining UX quality defects\r\n\r\n- ensure all community token gating related functionality is working\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 74,
    "closed_issues": 103,
    "state": "open",
    "created_at": "2023-07-26T12:50:42Z",
    "updated_at": "2024-01-25T14:01:09Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 3,
  "created_at": "2024-01-25T13:01:07Z",
  "updated_at": "2024-01-25T14:01:09Z",
  "closed_at": "2024-01-25T14:01:08Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n\r\n## Problem \r\n\r\nWe encountered an issue in e2e tests when clicking on certain links, a blank community screen opens.\r\n\r\n<img width=\"484\" alt=\"Screenshot 2024-01-25 at 13 59 09\" src=\"https://github.com/status-im/status-mobile/assets/67952253/1e4a35fb-c052-4f1f-8350-a70afe0d522d\">\r\n\r\n\r\n\r\n**Test example with video:** https://app.eu-central-1.saucelabs.com/tests/bd486b79f980443fbc5c7127d2194dd9?auth=78eb25acecf48b024d251656d3ee2ac7#121\r\n\r\nTried to reproduce this manually and found that it seems that only links to ‚Äúold‚Äù communities work this way, i.e. communities that were created once, but then for some period of time (~30 days?) the admin of these communities did not recover their account on any device. This assumption is based on the fact that in the tests, communities for these links were created once, and then only links were used without recovering the admin-user themself.\r\n\r\n\r\n\r\n**Link examples:**\r\n\r\n1. https://status.app/c#zQ3shbmfT3hvh4mKa1v6uAjjyztQEroh8Mfn6Ckegjd7LT3XK\r\n\r\n2. https://status.app/c/G8EAAGTiXKuwNbVVAu0GNLD-XzX4oz_E8oC1-7qSLikaTnCuG9Ag13ZgQKrMd8En9Qcpuaj3Qx3mfZ1atZzH8Zw-x_sFJ_MDv0P_7YfqoV-pNr3V4dsza-jVk41GaCGWasJb92Oer8qggaoNWf0tYCgSH19VonXciKPUz3ITdgke#zQ3shbmfT3hvh4mKa1v6uAjjyztQEroh8Mfn6Ckegjd7LT3XK\r\n\r\n3. https://status.app/c/ixiACjAKCHRlc3RDb21tEhZkemZ4Z2Nodmpra2xra2xrbCAgbGxsGAYiByM4OEIwRkYqARQD#zQ3shuK3RAMBGtNWJ5QAKtuGeyEhiwko5gXhyGg6T89Q2xrHq \r\n\r\n4. https://status.app/c/CxWACikKElQtZyBjb21tdW5pdHkgbWludBIFZmZmZmYYASIHIzIxNjI2NioBMwM=#zQ3shfxPTZ1dUZTXpjEwYHc2TMSeVjAA6JJ5SD46EVKM2Wtcb\r\n\r\n5. https://status.app/c/Ow==#zQ3shbmfT3hvh4mKa1v6uAjjyztQEroh8Mfn6Ckegjd7LT3XK\r\n\r\nNone of these links open on mobile or desktop (empty screen on mobile and the link is not clickable on desktop).\r\n\r\nIf you follow link 1 (without encoded data) the website also does not open if you open it in Chrome on your computer.\r\n\r\n<img width=\"366\" alt=\"Screenshot 2024-01-25 at 13 44 50\" src=\"https://github.com/status-im/status-mobile/assets/67952253/bd847655-9c54-4f7b-ba6e-cc5dfa1cffda\">\r\n\r\nLinks in the format like link 5 don't work at all, even for new communities/users, if you follow them from outside the app. \r\nSo maybe this is a separate issue. \r\n\r\nThe main guess atm, and the question associated with it: is the data stored on Waku for communities supposed to expire after some time?\r\nIf so, is this period equal to the storage period for backed-up data - 30 days?\r\n**And the main question is: is this an issue or expected behavior?**\r\n\r\ncc'ing @igor-sirotin and @yqrashawn, maybe you have some info/idea on this matter? \r\n\r\n\r\n### Reproduction (hypothetical steps):\r\n\r\n1. Create a community, save the community invite link\r\n2. Don't recover the admin user for ~30 days\r\n3. Share the with another user in a Status chat\r\n4. Follow the link\r\n\r\n### Additional Information\r\n\r\n- Status version: nightly 25/01\r\n- Operating System: Android, iOS\r\n\r\n\r\n[comment]: # (Please, add logs/notes if necessary)\r\n\r\n",
  "closed_by": {
    "login": "qoqobolo",
    "id": 67952253,
    "node_id": "MDQ6VXNlcjY3OTUyMjUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qoqobolo",
    "html_url": "https://github.com/qoqobolo",
    "followers_url": "https://api.github.com/users/qoqobolo/followers",
    "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
    "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
    "repos_url": "https://api.github.com/users/qoqobolo/repos",
    "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/18624/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910219090",
    "html_url": "https://github.com/status-im/status-mobile/issues/18624#issuecomment-1910219090",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624",
    "id": 1910219090,
    "node_id": "IC_kwDOAx4p2c5x26FS",
    "user": {
      "login": "igor-sirotin",
      "id": 25482501,
      "node_id": "MDQ6VXNlcjI1NDgyNTAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25482501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igor-sirotin",
      "html_url": "https://github.com/igor-sirotin",
      "followers_url": "https://api.github.com/users/igor-sirotin/followers",
      "following_url": "https://api.github.com/users/igor-sirotin/following{/other_user}",
      "gists_url": "https://api.github.com/users/igor-sirotin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igor-sirotin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igor-sirotin/subscriptions",
      "organizations_url": "https://api.github.com/users/igor-sirotin/orgs",
      "repos_url": "https://api.github.com/users/igor-sirotin/repos",
      "events_url": "https://api.github.com/users/igor-sirotin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igor-sirotin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-25T13:26:07Z",
    "updated_at": "2024-01-25T13:26:07Z",
    "author_association": "NONE",
    "body": "> is the data stored on Waku for communities supposed to expire after some time?\r\n\r\nYes\r\n\r\n> is this period equal to the storage period for backed-up data - 30 days?\r\n\r\nYes, 30 dyys\r\n\r\n> And the main question is: is this an issue or expected behaviour?\r\n\r\nYes, it's expected üôÇ \r\n\r\n----- \r\n\r\nWaku store nodes keep the data for 30 days. It's the community control node responsibility to stay online, the app will automatically push the community description to the network each 5 minutes (not sure of this period).\r\n\r\nSwitching to an empty screen doesn't look like a good solution to me. Probably we should come up with some UI design for such case. \r\n\r\nSame thing about profile links btw. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910219090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910252572",
    "html_url": "https://github.com/status-im/status-mobile/issues/18624#issuecomment-1910252572",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624",
    "id": 1910252572,
    "node_id": "IC_kwDOAx4p2c5x3CQc",
    "user": {
      "login": "igor-sirotin",
      "id": 25482501,
      "node_id": "MDQ6VXNlcjI1NDgyNTAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25482501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igor-sirotin",
      "html_url": "https://github.com/igor-sirotin",
      "followers_url": "https://api.github.com/users/igor-sirotin/followers",
      "following_url": "https://api.github.com/users/igor-sirotin/following{/other_user}",
      "gists_url": "https://api.github.com/users/igor-sirotin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igor-sirotin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igor-sirotin/subscriptions",
      "organizations_url": "https://api.github.com/users/igor-sirotin/orgs",
      "repos_url": "https://api.github.com/users/igor-sirotin/repos",
      "events_url": "https://api.github.com/users/igor-sirotin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igor-sirotin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-25T13:46:30Z",
    "updated_at": "2024-01-25T13:46:30Z",
    "author_association": "NONE",
    "body": "> 1. https://status.app/c#zQ3shbmfT3hvh4mKa1v6uAjjyztQEroh8Mfn6Ckegjd7LT3XK\r\n\r\n> If you follow link 1 (without encoded data) the website also does not open if you open it in Chrome on your computer.\r\n\r\nNot sure what's wrong with this one. Parses fine for me:\r\n```json\r\n{\r\n  \"r\": {\r\n    \"community\": {\r\n      \"displayName\": \"\",\r\n      \"description\": \"\",\r\n      \"membersCount\": 0,\r\n      \"color\": \"\",\r\n      \"tagIndices\": [],\r\n      \"communityId\": \"0x02d55c8d59f0193c44fb0f7e72dd2efd6f998434e9109017ed4282300c12595a26\"\r\n    },\r\n    \"channel\": null,\r\n    \"contact\": null\r\n  }\r\n}\r\n```\r\n\r\nI think this is just the same thing as other links. For links 2-3-4 this message appears in the bottom-right corner in status-web:\r\n<img width=\"381\" alt=\"image\" src=\"https://github.com/status-im/status-mobile/assets/25482501/42fd8724-5a7f-4b28-9201-2b39c4aa309a\">\r\n\r\nWhich means no data was found in waku. But I wonder why this request is so fast, usually it takes a few seconds to make the request to the storenodes.\r\n\r\n------\r\n\r\n> Links in the format like link 5 don't work at all, even for new communities/users, if you follow them from outside the app.\r\nSo maybe this is a separate issue.\r\n\r\nI can confirm that this link doesn't open in status-web.\r\nhttps://status.app/c/Ow==#zQ3shbmfT3hvh4mKa1v6uAjjyztQEroh8Mfn6Ckegjd7LT3XK\r\n\r\n<img width=\"922\" alt=\"image\" src=\"https://github.com/status-im/status-mobile/assets/25482501/8a6be6e8-356e-412a-992e-6ba3e5c92e84\">\r\n\r\nBut the link parses just fine in status-go. This is either wrong implementation of url parse in status-go or status-web bug.\r\nBetter to ping @MishkaRogachev and @felicio \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910252572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910276696",
    "html_url": "https://github.com/status-im/status-mobile/issues/18624#issuecomment-1910276696",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18624",
    "id": 1910276696,
    "node_id": "IC_kwDOAx4p2c5x3IJY",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-25T14:01:08Z",
    "updated_at": "2024-01-25T14:01:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@igor-sirotin thanks for the answer and explanation!\r\n\r\n> Yes, it's expected üôÇ\r\n\r\nThe puzzle is solved now! üëç\r\n\r\n> Switching to an empty screen doesn't look like a good solution to me. Probably we should come up with some UI design for such case.\r\n\r\nI'll communicate this to design and John. \r\n\r\n> Not sure what's wrong with this one. Parses fine for me\r\n\r\nYes, it looks like the only difference is the presence of encoded data in the link itself. But the reason is the same.\r\n\r\n---\r\n\r\nI'll close this issue for now. If necessary, will open a separate one for `https://status.app/c/Ow==` links when get an answer. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910276696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

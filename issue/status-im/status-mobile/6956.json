{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6956",
  "id": 386091442,
  "node_id": "MDU6SXNzdWUzODYwOTE0NDI=",
  "number": 6956,
  "title": "Upgradable message-ids",
  "user": {
    "login": "yenda",
    "id": 1181225,
    "node_id": "MDQ6VXNlcjExODEyMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yenda",
    "html_url": "https://github.com/yenda",
    "followers_url": "https://api.github.com/users/yenda/followers",
    "following_url": "https://api.github.com/users/yenda/following{/other_user}",
    "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
    "organizations_url": "https://api.github.com/users/yenda/orgs",
    "repos_url": "https://api.github.com/users/yenda/repos",
    "events_url": "https://api.github.com/users/yenda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yenda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1143032367,
      "node_id": "MDU6TGFiZWwxMTQzMDMyMzY3",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/core",
      "name": "core",
      "color": "8befdd",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 28,
  "created_at": "2018-11-30T08:48:30Z",
  "updated_at": "2018-12-05T09:24:08Z",
  "closed_at": "2018-12-05T09:24:08Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Problem\r\n\r\nWhenever we make changes to the way message-ids are generated it creates upgradability issues. It happens again in latest release with message responses https://github.com/status-im/status-react/issues/6903#issuecomment-443127013\r\n\r\n# Implementation\r\n\r\nWe need to pass the message-ids with the message to avoid that in the future. These are the problems I think should be taken into consideration:\r\n- pk of the sender and chat-id might be prefixed to the message-id locally to avoid forged message-id overwriting previous messages\r\n- chat-id needs to be consistent so the previous point might just move the problem there\r\n\r\n# Acceptance Criteria\r\n\r\n- message-id is speced and easily reproducible in other implementations of the communication protocol\r\n- message-id is passed in messages with reasonable guarantees that it cannot be used to overwrite previous messages (ignoring existing ids can be considered but this will open up to MIT attacks if we don't prefix pk, an attacker could silent someone in a public chat by overwritting all their messages for a broad part of the network if they have better connectivity)\r\n\r\n",
  "closed_by": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6956/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443139898",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443139898",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443139898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzEzOTg5OA==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:12:26Z",
    "updated_at": "2018-11-30T09:12:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yenda \r\n\r\n> pk of the sender and chat-id might be prefixed to the message-id locally to avoid forged message-id overwriting previous messages\r\n\r\nI don't see how it helps if I myself want to overwrite my own messages, which can be of use for a malicious actor.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443139898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443143756",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443143756",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443143756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0Mzc1Ng==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:26:39Z",
    "updated_at": "2018-11-30T09:26:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't know how bad this idea is, but we can just denormalize and include the whole source message in a reply. Then, we can assign IDs to messages client-side on receiving, so no one will be able to tamper with them.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443143756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443144100",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443144100",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443144100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NDEwMA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:27:51Z",
    "updated_at": "2018-11-30T09:27:51Z",
    "author_association": "MEMBER",
    "body": "@yenda @mandrigin we should not overwrite messages (messages should be immutable), it prevents a different scenario, namely a malicious user sending a message with identical `id` as soon as they see it, in which case a race condition is trigger where first-one (not last one) wins.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443144100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443145013",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443145013",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443145013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NTAxMw==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:31:08Z",
    "updated_at": "2018-11-30T09:31:16Z",
    "author_association": "MEMBER",
    "body": "> we can just denormalize and include the whole source message in a reply\r\n\r\n\r\nWould need to be signed though, otherwise how can we make sure is not being tampered? \r\nIf we use ids we are back to square one (a user who does not have the original message can't verify that is not tampered), or I am missing something?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443145013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443145124",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443145124",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443145124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NTEyNA==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:31:35Z",
    "updated_at": "2018-11-30T09:31:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cammellos in a distributed system you can't really guarantee which message comes first though.\r\nthat is why I think that the root of the all issues is allowing ID generation on the sender side, because then it opens the whole can of worms of tampering/races/etc.\r\n\r\nactually, the only place where we use these IDs externally is in replies. there, we need to guarantee that the user replied on what he has seen and that everyone will see it. hence, the idea to include the whole message content in the reply.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443145124/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443145899",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443145899",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443145899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NTg5OQ==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:34:15Z",
    "updated_at": "2018-11-30T09:34:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "one thing that we absolutely have to guarantee about replies is that:\r\n- if I see your message \"do you like the first season of Stranger Things\" and reply \"Yes\" to it, then\r\n- everyone in the chatroom should see that I replied to that particular message\r\n\r\nbut that original message should be signed by the original author and the signature should be checked, of course",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443145899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443146270",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443146270",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443146270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NjI3MA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:35:40Z",
    "updated_at": "2018-11-30T09:35:40Z",
    "author_association": "MEMBER",
    "body": "> @cammellos in a distributed system you can't really guarantee which message comes first though.\r\n\r\nThanks, that I know :), it is exactly what appending the `pk` locally is preventing. it allow us to keep `id` generation flexible (we can change schema across version, new fields added are irrelevant, which is the main pain point), but still make sure order does not matter",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443146270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443146609",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443146609",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443146609,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NjYwOQ==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:36:53Z",
    "updated_at": "2018-11-30T09:36:53Z",
    "author_association": "MEMBER",
    "body": "> but that original message should be signed by the original author and the signature should be checked, of course\r\n\r\nIf we sign the message content, then denormalizing the message in the reply just works yes",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443146609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443146744",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443146744",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443146744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0Njc0NA==",
    "user": {
      "login": "yenda",
      "id": 1181225,
      "node_id": "MDQ6VXNlcjExODEyMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yenda",
      "html_url": "https://github.com/yenda",
      "followers_url": "https://api.github.com/users/yenda/followers",
      "following_url": "https://api.github.com/users/yenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
      "organizations_url": "https://api.github.com/users/yenda/orgs",
      "repos_url": "https://api.github.com/users/yenda/repos",
      "events_url": "https://api.github.com/users/yenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yenda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:37:25Z",
    "updated_at": "2018-11-30T09:37:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "> actually, the only place where we use these IDs externally is in replies\r\n\r\nwe also use it in seen messages, and it will also be used for threads, reactions, and other kind of incoming features",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443146744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443147014",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443147014",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443147014,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0NzAxNA==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:38:32Z",
    "updated_at": "2018-11-30T09:38:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> we also use it in seen messages, and it will also be used for threads, reactions, and other kind of incoming features\r\n\r\nthen we need to be bloody sure that we have a way to mention another message that is secure and compatible :-)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443147014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443149120",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443149120",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443149120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE0OTEyMA==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:46:07Z",
    "updated_at": "2018-11-30T09:46:07Z",
    "author_association": "MEMBER",
    "body": "> If we sign the message content, then denormalizing the message in the reply just works yes\r\n\r\nin this case, we will be able to reference messages from other chats btw. I mean even if a recipient  is not a member of that chat. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443149120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443150924",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443150924",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443150924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE1MDkyNA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T09:52:48Z",
    "updated_at": "2018-11-30T09:52:48Z",
    "author_association": "MEMBER",
    "body": "@rasom that's just a matter of deciding what to include in the signature, you can include `chat-id` as well",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443150924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443165289",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443165289",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443165289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzE2NTI4OQ==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T10:46:16Z",
    "updated_at": "2018-11-30T10:58:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Juat to document it there:\r\nKeeping sha3 IDs might work just well if:\r\n- on a sender we get sha3 of a messageafter it was serialized (raw payload bytes)\r\n- on a receiver we get sha3 of a message before attempting to deserialize it (on raw payload bytes)\r\n\r\nWhisper guarantees that the bytes we send are the bytes we receive. Hence, these hashes wonâ€™t depend on our interpretation/formats/etc.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443165289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443515878",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443515878",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443515878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzUxNTg3OA==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-02T15:26:07Z",
    "updated_at": "2018-12-02T15:26:07Z",
    "author_association": "MEMBER",
    "body": "We receive `hash` from `status-go` side, why can't we use it? I suppose that was discussed, but i don't remember the exact reason. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443515878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443515974",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443515974",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443515974,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzUxNTk3NA==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-02T15:27:30Z",
    "updated_at": "2018-12-02T15:27:30Z",
    "author_association": "MEMBER",
    "body": "Probably because we can't calculate it before the message is sent or something. Well, we can calculate payload's hash. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443515974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443593901",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443593901",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443593901,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzU5MzkwMQ==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T05:33:05Z",
    "updated_at": "2018-12-03T05:33:05Z",
    "author_association": "MEMBER",
    "body": "In group chats we do not receive payload for the message specifically as it is wrapped via `GroupMembershipUpdate`. So the question is whether it's fine to use `GroupMembershipUpdate`'s payload for calculating id. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443593901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443612040",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443612040",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443612040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYxMjA0MA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T07:20:49Z",
    "updated_at": "2018-12-03T07:20:59Z",
    "author_association": "MEMBER",
    "body": "@rasom for group chats  the payload of  actual chat message seems to be the safest choice, it means the message needs to be serialize just to calculate the id, but I feel is more consistent and allows us to recalculate ids for each message separately (comes in handy once/if we start syncing messages across devices etc)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443612040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443622618",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443622618",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443622618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYyMjYxOA==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T08:08:20Z",
    "updated_at": "2018-12-03T08:08:20Z",
    "author_association": "MEMBER",
    "body": "ok, this means that we \r\n1) we need to lock down `Message` record and agree that its interface (specifically number and order of fields) can't be changed \r\n2) make sure that if we want to change these fields `v2.Message` record (or something like this) is created instead of changing existing one\r\n3) make sure that `Message` can be handled by all next versions of the app since now\r\n\r\nOtherwise, we will have compatibility issues again. Like we had when `Message`'s namespace was changed. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443622618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443623579",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443623579",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443623579,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYyMzU3OQ==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T08:12:34Z",
    "updated_at": "2018-12-03T08:13:22Z",
    "author_association": "MEMBER",
    "body": "Not sure, wait a second,\r\nwe want to take the hash of the serialized transit, not of the `Message` record (i.e. the bytes transmitted on the wire). If we add a field, the ID of that will change on the sender side, but the receiver will not parse it before creating the id, so the id will be the same. Because we use the non-parsed (the bytes received) object, so it should be fine to add/remove fields, or there's something I am not considering?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443623579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443632129",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443632129",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443632129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzMjEyOQ==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T08:46:03Z",
    "updated_at": "2018-12-03T08:46:03Z",
    "author_association": "MEMBER",
    "body": "> @rasom for group chats the payload of actual chat message seems to be the safest choice\r\n\r\n@cammellos do you mean the payload of `GroupMembershipUpdate` or it's `message` filed? ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443632129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443632608",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443632608",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443632608,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzMjYwOA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T08:47:55Z",
    "updated_at": "2018-12-03T08:47:55Z",
    "author_association": "MEMBER",
    "body": "the `message` inside, not `GroupMembershipUpdate`",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443632608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443633668",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443633668",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443633668,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzMzY2OA==",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T08:51:48Z",
    "updated_at": "2018-12-03T08:51:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "I added this topic as a discussion point for the dev meeting today. Maybe we can just talk through all the edge cases that are left.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443633668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443634542",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443634542",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443634542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzNDU0Mg==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T08:55:09Z",
    "updated_at": "2018-12-03T08:55:09Z",
    "author_association": "MEMBER",
    "body": "> we want to take the hash of the serialized transit, not of the Message record\r\n\r\ncorrect, and right now we don't have serialized transit of the Message which is wrapped via `GroupMembershipUpdate `, or i'm wrong? The recipient will need to calculate it. Then we either need to send serialized transit of the message in `GroupMembershipUpdate`'s `message` field or guaranty that it can be calculated properly on the recepeint's side.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443634542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443636610",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443636610",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443636610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzNjYxMA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T09:02:32Z",
    "updated_at": "2018-12-03T09:02:32Z",
    "author_association": "MEMBER",
    "body": "> and right now we don't have serialized transit of the Message which is wrapped via GroupMembershipUpdate \r\n\r\n@rasom that's correct so just that we are on the same page, for a group membership update:\r\n\r\nOn sender size:\r\n\r\n1) Create message payload\r\n2) Serialize, calculate message-id, add to the database\r\n3) Wrap in `GroupMembershipUpdate` and send\r\n\r\nOn receiver:\r\n\r\n1) Extract inner message\r\n2) Serialize\r\n3) calculate message-id, Deserialize, add to the database\r\n\r\nAs opposed to for normal messages:\r\n\r\nSender flow:\r\n\r\n1) Create message payload\r\n2) Serialize, calculate message-id, add to the database\r\n3) Send\r\n\r\nReceiver flow:\r\n\r\n1) calculate message-id, Deserialize, add to the database\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443636610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443636915",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443636915",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443636915,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzNjkxNQ==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T09:03:40Z",
    "updated_at": "2018-12-03T09:03:40Z",
    "author_association": "MEMBER",
    "body": "But yes, I see your point now :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443636915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443637257",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443637257",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443637257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzYzNzI1Nw==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T09:05:05Z",
    "updated_at": "2018-12-03T09:05:05Z",
    "author_association": "MEMBER",
    "body": "Ok, probably best to stick to `message-id` calculate over `GroupMembershipUpdate`, as as you said new fields might pose the same problem.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443637257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443696481",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443696481",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443696481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzY5NjQ4MQ==",
    "user": {
      "login": "yenda",
      "id": 1181225,
      "node_id": "MDQ6VXNlcjExODEyMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yenda",
      "html_url": "https://github.com/yenda",
      "followers_url": "https://api.github.com/users/yenda/followers",
      "following_url": "https://api.github.com/users/yenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
      "organizations_url": "https://api.github.com/users/yenda/orgs",
      "repos_url": "https://api.github.com/users/yenda/repos",
      "events_url": "https://api.github.com/users/yenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yenda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T12:40:05Z",
    "updated_at": "2018-12-03T12:40:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Locking down the message format and having versioning is exactly what we had before and it was abandonned because it breaks forward compatibility for old clients",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443696481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443697439",
    "html_url": "https://github.com/status-im/status-mobile/issues/6956#issuecomment-443697439",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6956",
    "id": 443697439,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzY5NzQzOQ==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-03T12:43:49Z",
    "updated_at": "2018-12-03T12:43:49Z",
    "author_association": "MEMBER",
    "body": "> Locking down the message format and having versioning is exactly what we had before and it was abandonned because it breaks forward compatibility for old clients\r\n\r\n\r\nYes, if we use `GroupMembershipUpdate` we won't be locking down message format, while we would if we calculated the id using the inner message (as it needs to be deserialized, so new fields might not be available), it comes at some costs and wanted to avoid this, but for now seems to be the safest choice",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443697439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

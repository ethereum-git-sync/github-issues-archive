{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/13067",
  "id": 1119686527,
  "node_id": "I_kwDOAx4p2c5CvQ9_",
  "number": 13067,
  "title": "Can't receive messages after returning online until relogin",
  "user": {
    "login": "qoqobolo",
    "id": 67952253,
    "node_id": "MDQ6VXNlcjY3OTUyMjUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qoqobolo",
    "html_url": "https://github.com/qoqobolo",
    "followers_url": "https://api.github.com/users/qoqobolo/followers",
    "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
    "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
    "repos_url": "https://api.github.com/users/qoqobolo/repos",
    "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 1126212882,
      "node_id": "MDU6TGFiZWwxMTI2MjEyODgy",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/chat-reliability",
      "name": "chat-reliability",
      "color": "9df2dd",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/58",
    "html_url": "https://github.com/status-im/status-mobile/milestone/58",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/58/labels",
    "id": 7422301,
    "node_id": "MI_kwDOAx4p2c4AcUFd",
    "number": 58,
    "title": "Release 1.19",
    "description": "",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 36,
    "state": "closed",
    "created_at": "2021-11-23T12:59:25Z",
    "updated_at": "2022-05-24T10:10:47Z",
    "due_on": null,
    "closed_at": "2022-05-24T10:10:47Z"
  },
  "comments": 6,
  "created_at": "2022-01-31T17:00:21Z",
  "updated_at": "2022-03-19T09:05:05Z",
  "closed_at": "2022-03-19T09:05:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n\r\n## Problem \r\n\r\nIf the user enables airplane mode, closes the app, receives messages while offline from another user (that goes offline/closes the app after sending messages), re-opens the app, and disables airplane mode, they won't receive the messages until reopening Status.\r\nThe issue is reproducible with these steps in ~70% of cases. \r\n\r\n#### Expected behavior\r\nCan receive messages right after returning online\r\n\r\n#### Actual behavior\r\nMessages are only received after reopening\r\n\r\n\r\nhttps://user-images.githubusercontent.com/67952253/151838253-58c33c07-cf48-4029-a90a-8d0c2be7b14b.mp4\r\n\r\n\r\n\r\n### Reproduction\r\n\r\n1. Start a 1-1 chat between UserA and UserB\r\n2. UserA: close the app\r\n3. UserB: turn on airplane mode and close the app\r\n4. UserA: open the app > send several messages to UserB > close the app\r\n5. UserB: open the app > turn off airplane mode (no messages) > reopen the app\r\n\r\n### Additional Information\r\n\r\n- Status version: nightly 31/01\r\n- Operating System: Android, iOS\r\n\r\n### Logs\r\nUserA: [geth.log](https://github.com/status-im/status-react/files/7972517/geth.log)\r\n\r\n",
  "closed_by": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/13067/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1027911933",
    "html_url": "https://github.com/status-im/status-mobile/issues/13067#issuecomment-1027911933",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
    "id": 1027911933,
    "node_id": "IC_kwDOAx4p2c49RLD9",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T12:53:22Z",
    "updated_at": "2022-02-02T12:53:22Z",
    "author_association": "MEMBER",
    "body": "@qoqobolo \r\nI can't reproduce it using iOS simulator as A and iOS real device as B. Is it reproducible only on Android devices?\r\n\r\nAlso regarding steps 3 and 5: what if you don't close the app but just toggle airplane mode, do you have the same result? ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1027911933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1027954721",
    "html_url": "https://github.com/status-im/status-mobile/issues/13067#issuecomment-1027954721",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
    "id": 1027954721,
    "node_id": "IC_kwDOAx4p2c49RVgh",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T13:43:58Z",
    "updated_at": "2022-02-02T13:43:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rasom it's reproducible for me both on iOS and Android real devices (just double-checked with UserA - Android and UserB - iOS).\r\nLogs for iOS [geth.log](https://github.com/status-im/status-react/files/7986850/geth.log)\r\n\r\nRegarding steps 3 and 5: hm yeah, I tried to reproduce without them but it was not successful last time.\r\nNow I tried about 5 times on Android and iOS, and the result is:\r\n- can't reproduce it on Android without steps 3 and 5 at all\r\n- can reproduce it on iOS without steps 3 and 5 in 80% of cases",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1027954721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1028754311",
    "html_url": "https://github.com/status-im/status-mobile/issues/13067#issuecomment-1028754311",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
    "id": 1028754311,
    "node_id": "IC_kwDOAx4p2c49UYuH",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-03T08:58:38Z",
    "updated_at": "2022-02-03T08:58:46Z",
    "author_association": "MEMBER",
    "body": "> Start a 1-1 chat between UserA and UserB\r\n\r\n@qoqobolo do I have to create a new 1-1 pair for each test or I can skip the first step on the next iteration? ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1028754311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1028833880",
    "html_url": "https://github.com/status-im/status-mobile/issues/13067#issuecomment-1028833880",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
    "id": 1028833880,
    "node_id": "IC_kwDOAx4p2c49UsJY",
    "user": {
      "login": "pavloburykh",
      "id": 97245802,
      "node_id": "U_kgDOBcvaag",
      "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavloburykh",
      "html_url": "https://github.com/pavloburykh",
      "followers_url": "https://api.github.com/users/pavloburykh/followers",
      "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
      "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
      "repos_url": "https://api.github.com/users/pavloburykh/repos",
      "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-03T10:19:47Z",
    "updated_at": "2022-02-03T10:19:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @qoqobolo @rasom I'm reproducing the bug following given steps when using Android as device A (receiver) and IOS as device B (sender). Attaching video and logs. \r\n\r\nhttps://user-images.githubusercontent.com/97245802/152323466-1c66f959-ce37-4cae-8d17-b91670bd0d50.mp4\r\n\r\n[geth.log](https://github.com/status-im/status-react/files/7993608/geth.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1028833880/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1064846008",
    "html_url": "https://github.com/status-im/status-mobile/issues/13067#issuecomment-1064846008",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
    "id": 1064846008,
    "node_id": "IC_kwDOAx4p2c4_eEK4",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-11T07:26:13Z",
    "updated_at": "2022-03-11T07:26:13Z",
    "author_association": "MEMBER",
    "body": "This is due to the slots in the p2p server being full and therefore not re-dialling the server.\r\nLooking into a fix",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1064846008/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1072973271",
    "html_url": "https://github.com/status-im/status-mobile/issues/13067#issuecomment-1072973271",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13067",
    "id": 1072973271,
    "node_id": "IC_kwDOAx4p2c4_9EXX",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-19T09:05:04Z",
    "updated_at": "2022-03-19T09:05:04Z",
    "author_association": "MEMBER",
    "body": "Should be fixed  in #13065 feel free to reopen if necessary",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1072973271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/1342",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/1342/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/1342/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/1342/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/1342",
  "id": 236452292,
  "node_id": "MDU6SXNzdWUyMzY0NTIyOTI=",
  "number": 1342,
  "title": "Invalid phone number error is shown for valid Mexican phone number",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-06-16T11:08:07Z",
  "updated_at": "2018-02-06T23:32:22Z",
  "closed_at": "2018-02-06T23:32:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\nEntering valid Mexican phone number returns Invalid phone number error\r\nPhone format: +526641xxxxxx and +526611xxxxxx\r\nI've checked the number in Twillo and it looks like a valid (country code MX is returned and no errors)\r\n![lookup2](https://user-images.githubusercontent.com/6584810/27224246-bf543624-529c-11e7-87d3-7034bf72c6e9.png)\r\n\r\n\r\nTeam members can use Instabug report to see full number: \r\n* https://dashboard.instabug.com/applications/status-10bb8cbc-15f6-44f0-8c7a-db478dc34d7d/beta/chats/398\r\n* https://dashboard.instabug.com/applications/status/beta/bugs/273\r\n\r\n\r\n*Summary*: \r\n\r\n#### Expected behavior\r\nPhone number can be entered \r\n#### Actual behavior\r\n\r\nInvalid phone number error is shown if enter valid Mexican number\r\n### Reproduction\r\n\r\n- Open Status\r\n- Open Console\r\n- send /phone command with Mexican phone number\r\n\r\n### Additional Information\r\n* Status version: 0.9.9\r\n* Operating System:  \r\nAndroid  OS Level 23 \r\nDevice: samsung SM-A720F\r\n",
  "closed_by": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/1342/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/1342/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/309135518",
    "html_url": "https://github.com/status-im/status-mobile/issues/1342#issuecomment-309135518",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/1342",
    "id": 309135518,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTEzNTUxOA==",
    "user": {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-16T21:13:08Z",
    "updated_at": "2017-06-16T21:13:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@annadanchenko I debugged the functionality and found the cause of the bug. \r\nWhen the function `status-im.utils.phone-number/valid-phone-number?` is called with `\"+526641xxxxxx\"` string (replace x with decimal digits), it's correctly identified as an valid Mexican phone number, but of the `:fixed-line` type, and the functions treats only phone numbers of type `:mobile`, `:fixed-line-or-mobile` and `:pager` as valid. \r\n\r\nThat actually makes sense, as only those devices can display the confirmation code sent from the app, but the message is still very confusing (the number is certainly not invalid per se) and it would be nice to actually provide some more descriptive error message to the user, something like `\"the number you entered is fixed-line, only mobile and pager phone numbers are supported\"`.\r\n\r\nI can implement it, if we agree on it. \r\n\r\nThe second thing which is quite strange is that twillo API identified the number as `:mobile`, while the library used by the project (`awesome-phonenumber`, which is just wrapping google's `libphonenumber`) identified the number as `:fixed-line`, I need to dig deeper to find out why that's the case.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/309135518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/363602623",
    "html_url": "https://github.com/status-im/status-mobile/issues/1342#issuecomment-363602623",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/1342",
    "id": 363602623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzYwMjYyMw==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-06T23:32:17Z",
    "updated_at": "2018-02-06T23:32:17Z",
    "author_association": "NONE",
    "body": "Phone feature is removed",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/363602623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

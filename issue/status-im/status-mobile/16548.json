{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/16548",
  "id": 1796951029,
  "node_id": "I_kwDOAx4p2c5rG0v1",
  "number": 16548,
  "title": "Error is not displayed when scanning previously used Sync QR code",
  "user": {
    "login": "VolodLytvynenko",
    "id": 52490791,
    "node_id": "MDQ6VXNlcjUyNDkwNzkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/VolodLytvynenko",
    "html_url": "https://github.com/VolodLytvynenko",
    "followers_url": "https://api.github.com/users/VolodLytvynenko/followers",
    "following_url": "https://api.github.com/users/VolodLytvynenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/VolodLytvynenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/VolodLytvynenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/VolodLytvynenko/subscriptions",
    "organizations_url": "https://api.github.com/users/VolodLytvynenko/orgs",
    "repos_url": "https://api.github.com/users/VolodLytvynenko/repos",
    "events_url": "https://api.github.com/users/VolodLytvynenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/VolodLytvynenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3990911030,
      "node_id": "LA_kwDOAx4p2c7t4Hg2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Bug%20MVP",
      "name": "E:Mobile Bug MVP",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 3990919470,
      "node_id": "LA_kwDOAx4p2c7t4Jku",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Syncing%20MVP",
      "name": "E:Mobile Syncing MVP",
      "color": "303365",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "Samyoul",
    "id": 5702426,
    "node_id": "MDQ6VXNlcjU3MDI0MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Samyoul",
    "html_url": "https://github.com/Samyoul",
    "followers_url": "https://api.github.com/users/Samyoul/followers",
    "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
    "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
    "organizations_url": "https://api.github.com/users/Samyoul/orgs",
    "repos_url": "https://api.github.com/users/Samyoul/repos",
    "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Samyoul/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2023-07-10T14:51:45Z",
  "updated_at": "2023-09-14T12:22:11Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Steps to reproduce:\r\n1. `User_A` Generate a valid sync QR code.\r\n2. `User_B` Scan the sync QR code\r\n3. `User_C` Scan the same sync QR code\r\n\r\n### Actual result:\r\n- When scanning a previously used sync QR code, no error message is displayed. \r\n- The `User_C` app is stacked on the 'Syncing devices...' page\r\n![image](https://github.com/status-im/status-mobile/assets/52490791/a9cf8137-cca5-450f-a144-371ded288988)\r\n\r\n### Expected result:\r\nWhen scanning a previously used sync QR code, an error message should be displayed\r\nhttps://www.figma.com/file/o4qG1bnFyuyFOvHQVGgeFY/Onboarding-for-Mobile?type=design&node-id=4477-328513&mode=design&t=qEoB2LPz5HkB3QXX-0\r\n\r\n### Logs:\r\n[geth.log](https://github.com/status-im/status-mobile/files/12003329/geth.log)\r\n[Status.log](https://github.com/status-im/status-mobile/files/12003330/Status.log)\r\n\r\n\r\n### ENV:\r\n[Nightly 10 Jul 2023]",
  "closed_by": {
    "login": "Samyoul",
    "id": 5702426,
    "node_id": "MDQ6VXNlcjU3MDI0MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Samyoul",
    "html_url": "https://github.com/Samyoul",
    "followers_url": "https://api.github.com/users/Samyoul/followers",
    "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
    "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
    "organizations_url": "https://api.github.com/users/Samyoul/orgs",
    "repos_url": "https://api.github.com/users/Samyoul/repos",
    "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Samyoul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/16548/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548/timeline",
  "performed_via_github_app": null,
  "state_reason": "reopened"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1632708369",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1632708369",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1632708369,
    "node_id": "IC_kwDOAx4p2c5hUScR",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-12T15:02:18Z",
    "updated_at": "2023-07-14T15:17:31Z",
    "author_association": "MEMBER",
    "body": "I'd like to query the errors in the designs:\r\n\r\n![](https://cdn.discordapp.com/attachments/978950099910676480/1128687447212036096/Screenshot_2023-07-12_at_15.00.49.png)\r\n\r\nThe designs show the following errors:\r\n\r\n- `Oops! This is not a sync QR code`\r\n- `Oops! This sync QR code has expired`\r\n- `Oops! This sync QR code has been used before`\r\n- `Oops! Devices are not in the same network`\r\n\r\n---\r\n\r\nThe errors need a little tweaking to be feasible.\r\n\r\n- `Oops! This is not a sync QR code` > `Oops! This is not a VALID sync QR code`\r\n  - This distinction is important because the application only has a concept of validity, the underlying data in the QR either validates or it doesn't validate. The distinction between something that **IS** a sync / pairing QR code or not, is a much harder thing for a computer to do.\r\n- `Oops! Devices are not in the same network` > `Oops! Cannot find your other device, are you sure you are on the same network?`\r\n  - This is something that we can't know, because the OS network interface will not allow us access to the network ID in many mobile phone contexts.\r\n- `Oops! This sync QR code has expired`\r\n  - A pairing session has a concept of expiry, but the connection parameters and `ConnectionString` do not. This is something that could be introduced but it requires additional work. At the moment an attempt to access an expired connection is the same as attempting to access a device that is not available on the network.\r\n  - This functionality will need to be introduced at the start of a mobile and desktop release cycle because it will introduce a breaking change with older versions.\r\n  - See https://github.com/status-im/status-go/issues/3759\r\n- `Oops! This sync QR code has been used before`\r\n  - This is not something that we can know currently.\r\n  - I'd argue that the long term concept of `Used before` shouldn't be known. We don't need to be stateful here, the QR code either works or doesn't work. The focus should be on idempotence of the pairing function. So multiple concurrent calls with the same QR will only execute once\r\n  - See https://github.com/status-im/status-go/pull/3750\r\n  \r\n`Oops! This sync QR code has been used before` is something that we can know in the context of the current application session. So while the app is running but not after the application has closed. We can / should have temporary knowledge of the QR codes scanned. But this needs to be rolled into making local pairing functions idempotent, which they aren't strictly at the moment, but can be, though will require additional work.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1632708369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1633302077",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1633302077",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1633302077,
    "node_id": "IC_kwDOAx4p2c5hWjY9",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-12T22:45:54Z",
    "updated_at": "2023-07-12T22:45:54Z",
    "author_association": "MEMBER",
    "body": "This PR https://github.com/status-im/status-go/pull/3750 will give session based feedback that can tell the user `Oops! This sync QR code has been used before`.\r\n\r\nBut as discussed here https://github.com/status-im/status-mobile/issues/16548#issuecomment-1632708369 I don't think that persisting this data after the application has been closed is appropriate.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1633302077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1633769175",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1633769175",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1633769175,
    "node_id": "IC_kwDOAx4p2c5hYVbX",
    "user": {
      "login": "igor-sirotin",
      "id": 25482501,
      "node_id": "MDQ6VXNlcjI1NDgyNTAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25482501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igor-sirotin",
      "html_url": "https://github.com/igor-sirotin",
      "followers_url": "https://api.github.com/users/igor-sirotin/followers",
      "following_url": "https://api.github.com/users/igor-sirotin/following{/other_user}",
      "gists_url": "https://api.github.com/users/igor-sirotin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igor-sirotin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igor-sirotin/subscriptions",
      "organizations_url": "https://api.github.com/users/igor-sirotin/orgs",
      "repos_url": "https://api.github.com/users/igor-sirotin/repos",
      "events_url": "https://api.github.com/users/igor-sirotin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igor-sirotin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-13T08:08:23Z",
    "updated_at": "2023-07-13T08:08:23Z",
    "author_association": "NONE",
    "body": "> The designs show the following errors: ...\r\n\r\nJust want to mention that we have a bit different error messages in [desktop design](https://www.figma.com/file/17fc13UBFvInrLgNUKJJg5/Kuba%E2%8E%9CDesktop?type=design&node-id=22455-509587).\r\n\r\n- This does not look like a sync QR code (@Samyoul, this one I think satisfies your comment)\r\n- This sync QR code has expired\r\n- This sync QR code has been used before\r\n- Device failed to sync\r\n\r\n(and for inputing the code as text, `sync QR code` is replaced with `sync code`).\r\n\r\nNot a big issue, but would be good to make it consistent everywhere ðŸ™‚ \r\n\r\ncc @benjthayer ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1633769175/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1636009496",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1636009496",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1636009496,
    "node_id": "IC_kwDOAx4p2c5hg4YY",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T15:15:40Z",
    "updated_at": "2023-07-14T15:19:38Z",
    "author_association": "MEMBER",
    "body": "With regards to `Oops! This sync QR code has expired` https://github.com/status-im/status-go/issues/3759 proposes a solution that will allow QR codes to be scanned and give immediate expiry validation. It also allows for better session timeframe synchronicity between Sender and Receiver local pairing devices.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1636009496/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1686478425",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1686478425",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1686478425,
    "node_id": "IC_kwDOAx4p2c5khZ5Z",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-21T14:49:29Z",
    "updated_at": "2023-08-21T14:49:29Z",
    "author_association": "MEMBER",
    "body": "I'm reopening this issue, because although I am confident that the issue is partially resolved, the functionality hasn't been confirmed by QA. I've merged https://github.com/status-im/status-go/pull/3750",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1686478425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1689779805",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1689779805",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1689779805,
    "node_id": "IC_kwDOAx4p2c5kt_5d",
    "user": {
      "login": "VolodLytvynenko",
      "id": 52490791,
      "node_id": "MDQ6VXNlcjUyNDkwNzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VolodLytvynenko",
      "html_url": "https://github.com/VolodLytvynenko",
      "followers_url": "https://api.github.com/users/VolodLytvynenko/followers",
      "following_url": "https://api.github.com/users/VolodLytvynenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/VolodLytvynenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VolodLytvynenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VolodLytvynenko/subscriptions",
      "organizations_url": "https://api.github.com/users/VolodLytvynenko/orgs",
      "repos_url": "https://api.github.com/users/VolodLytvynenko/repos",
      "events_url": "https://api.github.com/users/VolodLytvynenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VolodLytvynenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-23T11:18:53Z",
    "updated_at": "2023-08-23T11:18:53Z",
    "author_association": "NONE",
    "body": "> I'm reopening this issue, because although I am confident that the issue is partially resolved, the functionality hasn't been confirmed by QA. I've merged [status-im/status-go#3750](https://github.com/status-im/status-go/pull/3750)\r\n\r\nHi @Samyoul . Thank you for the update. The issue is still reproducible for me for both IOS and Android. Steps are the same https://github.com/status-im/status-mobile/issues/16548#issue-1796951029\r\n\r\n### Logs:\r\n[geth.log](https://github.com/status-im/status-mobile/files/12418539/geth.log)\r\n[Status.log](https://github.com/status-im/status-mobile/files/12418540/Status.log)\r\n\r\n### Env:\r\n- Nightly [23 Aug 2023]",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1689779805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1690350738",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1690350738",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1690350738,
    "node_id": "IC_kwDOAx4p2c5kwLSS",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-23T17:22:41Z",
    "updated_at": "2023-08-23T17:22:41Z",
    "author_association": "MEMBER",
    "body": "Thank you @VolodLytvynenko hmm that is interesting, do you log out between step 2 and step 3?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1690350738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1691308456",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1691308456",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1691308456,
    "node_id": "IC_kwDOAx4p2c5kz1Go",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T09:11:00Z",
    "updated_at": "2023-08-24T09:11:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @Samyoul!\r\n\r\n> do you log out between step 2 and step 3?\r\n\r\nDo you mean logging out by User_A? \r\nNo, this issue can be reproduced if User_A generates a QR only once (without logging out, User_A just keeps the QR open) and User_B and User_C scan this code (it's the same for them, _not_ expired).\r\n\r\nAlthough, if I understand correctly, one QR code can only be used once, that is, only by one user (by User_B in this particular case).\r\nAnd the problem is that User_C \"can\" use this code, i.e. User_C scans the code but does not see the `Oops! This sync QR code has been used before` error, but sync does not actually happen (and the user gets stuck on the `Syncing devices...` screen). \r\n\r\nPlease correct me if I misunderstood the logic behind this scenario (when two users scan the same QR code) or missed something in the discussions.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1691308456/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1717554371",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1717554371",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1717554371,
    "node_id": "IC_kwDOAx4p2c5mX8zD",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-13T12:41:16Z",
    "updated_at": "2023-09-13T12:41:16Z",
    "author_association": "MEMBER",
    "body": "@Samyoul could you give an update please?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1717554371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1719291684",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1719291684",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1719291684,
    "node_id": "IC_kwDOAx4p2c5mek8k",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T11:43:09Z",
    "updated_at": "2023-09-14T12:22:11Z",
    "author_association": "MEMBER",
    "body": "OH!\r\n\r\n> `User_C` Scan the same sync QR code\r\n\r\nI'm such an idiot! ðŸ™ˆ Ok, so I've implemented a fix for the following scenario:\r\n\r\n- `Device A` creates a QR code\r\n- `Device B` scans the QR code\r\n- `Device B` scans the same QR code again\r\n- `Device B` shows error that the QR code has already been used.\r\n\r\nI don't know why I thought that would fix this issue. So, I can implement a fix for when `Device C`, `Device D` etc scan a QR code that has been previously used.\r\n\r\nWe do have code that prevents the access of a QR code after it has been used previously by returning an https error, but I need to investigate why that error causes the application to hang.\r\n\r\n---\r\n\r\nThe `status-go` `geth.log` is normal.\r\nThe error below, from `Status.log`, is interesting. Looks like the UI is not handling the error returned by `status-go`: \r\n\r\n```\r\nINFO [status-im.signals.core:32] - local pairing signal received {:event {:type \"connection-success\", :action 1}}\r\nINFO [status-im2.contexts.syncing.events:70] - Initiated local pairing {:response \"{\\\"error\\\":\\\"[client] status not ok when getting challenge, received '403 Forbidden'\\\"}\", :event :syncing/input-connection-string-for-bootstrapping}\r\n```\r\n\r\n`[client] status not ok when getting challenge, received '403 Forbidden'` this error means that `Device A` refused to accept the connection from `Device C`. If another device receives a `403` when getting a challenge, this means that `Device A` has locked the QR code session.\r\n\r\nFYI, the reason we don't give more informative errors from `Device A` is because `Device A` is hosting a local but publicly local server. This means that attackers and legitimate actors both have access to the local paring endpoints, meaning that any error we return from these endpoints should be addressed to an attacker. Meaning we need to be as vague as possible while at the same time giving legitimate actors some level of information (which is achieved via context).",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1719291684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1719313034",
    "html_url": "https://github.com/status-im/status-mobile/issues/16548#issuecomment-1719313034",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/16548",
    "id": 1719313034,
    "node_id": "IC_kwDOAx4p2c5meqKK",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-14T11:59:23Z",
    "updated_at": "2023-09-14T11:59:23Z",
    "author_association": "MEMBER",
    "body": "@cammellos Sorry for the late reply I only just spotted your comment. I don't think that this issue is related to `status-go`, I believe that the `status-mobile` implementation is not correctly handling errors returned from the `:syncing/input-connection-string-for-bootstrapping` method.\r\n\r\n@siddarthkay @smohamedjavid do you know if there are certain errors that aren't handled when local pairing?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1719313034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

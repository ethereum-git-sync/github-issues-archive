{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6691",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6691",
  "id": 380116433,
  "node_id": "MDU6SXNzdWUzODAxMTY0MzM=",
  "number": 6691,
  "title": "Allow commands to add events before parameters filling",
  "user": {
    "login": "jeluard",
    "id": 359723,
    "node_id": "MDQ6VXNlcjM1OTcyMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/359723?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jeluard",
    "html_url": "https://github.com/jeluard",
    "followers_url": "https://api.github.com/users/jeluard/followers",
    "following_url": "https://api.github.com/users/jeluard/following{/other_user}",
    "gists_url": "https://api.github.com/users/jeluard/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jeluard/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jeluard/subscriptions",
    "organizations_url": "https://api.github.com/users/jeluard/orgs",
    "repos_url": "https://api.github.com/users/jeluard/repos",
    "events_url": "https://api.github.com/users/jeluard/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jeluard/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971221468,
      "node_id": "MDU6TGFiZWw5NzEyMjE0Njg=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/extensions",
      "name": "extensions",
      "color": "5b1587",
      "default": false,
      "description": ""
    },
    {
      "id": 1039165187,
      "node_id": "MDU6TGFiZWwxMDM5MTY1MTg3",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/commands",
      "name": "commands",
      "color": "c2d7f9",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-11-13T08:46:58Z",
  "updated_at": "2018-11-30T17:28:42Z",
  "closed_at": "2018-11-30T17:28:41Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### User Story\r\n\r\nAs a developer, I want to trigger extra events before and after a command parameter is filled.\r\nThis allows the retrieval of external data that would then be used to display better parameter suggestion.\r\n\r\n```clojure\r\n:parameters [{:id                     :some-id\r\n             :placeholder             \"Some placeholder\"\r\n             :on-before-user-input    [some-event]}]\r\n```\r\n\r\nThose events will receive as properties the value of all previously filled parameters as a vector.\r\n\r\n### Description\r\n\r\n*Type*: Feature\r\n",
  "closed_by": {
    "login": "jeluard",
    "id": 359723,
    "node_id": "MDQ6VXNlcjM1OTcyMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/359723?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jeluard",
    "html_url": "https://github.com/jeluard",
    "followers_url": "https://api.github.com/users/jeluard/followers",
    "following_url": "https://api.github.com/users/jeluard/following{/other_user}",
    "gists_url": "https://api.github.com/users/jeluard/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jeluard/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jeluard/subscriptions",
    "organizations_url": "https://api.github.com/users/jeluard/orgs",
    "repos_url": "https://api.github.com/users/jeluard/repos",
    "events_url": "https://api.github.com/users/jeluard/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jeluard/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6691/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/438225544",
    "html_url": "https://github.com/status-im/status-mobile/issues/6691#issuecomment-438225544",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691",
    "id": 438225544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODIyNTU0NA==",
    "user": {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-13T11:01:25Z",
    "updated_at": "2018-11-13T11:01:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't think the approach here is the right one, there are several problems with that:\r\n\r\n* Command can be entered in multiple ways, typing it, selecting from list of available commands, or pasting the whole text of command string with or without arguments - would be the method for example called even if command string with arguments is pasted into the input field, there is no \"middle state\" of selected command without arguments ?\r\n* Retrieval of external data is usually asynchronous process which can take some time to complete - if I for example write `/send-collectible` in the input field and expect that I will have immediately suggestions for collectible types or particular NFT (second argument) available, it won't be the case and as a user, I will be confused, assuming that the command just doesn't work properly.\r\n* It's potentially inefficient to start the data retrieval each time each time the command is selected, and anything else (caching, etc) would require per-case approach which could not be applied to all commands in generic way\r\n\r\nBetter solution in my opinion is to introduce a concept of dependencies (backed by the protocol probably), where each \"component\" can declare dependency like `/send-collectible` -> `#{:cryptokitties :strikers}` (pseudocode) and upon start-up, the app will iterate over available components and automatically fetch declared dependencies for them.\r\nit will be much more declarative and nicer then imperative \"do this, do that\" approach for loading dependencies which we currently have, for example as loading of specific tokens upon visiting some screen in wallet (cc @goranjovic ).\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/438225544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/438230152",
    "html_url": "https://github.com/status-im/status-mobile/issues/6691#issuecomment-438230152",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691",
    "id": 438230152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODIzMDE1Mg==",
    "user": {
      "login": "jeluard",
      "id": 359723,
      "node_id": "MDQ6VXNlcjM1OTcyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/359723?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jeluard",
      "html_url": "https://github.com/jeluard",
      "followers_url": "https://api.github.com/users/jeluard/followers",
      "following_url": "https://api.github.com/users/jeluard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jeluard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jeluard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jeluard/subscriptions",
      "organizations_url": "https://api.github.com/users/jeluard/orgs",
      "repos_url": "https://api.github.com/users/jeluard/repos",
      "events_url": "https://api.github.com/users/jeluard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jeluard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-13T11:17:40Z",
    "updated_at": "2018-11-13T11:17:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree it would be better to have something like that, especially for the NFT command.\r\nNow we still need that chat command hook in the general case IMO.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/438230152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443277710",
    "html_url": "https://github.com/status-im/status-mobile/issues/6691#issuecomment-443277710",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6691",
    "id": 443277710,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzI3NzcxMA==",
    "user": {
      "login": "jeluard",
      "id": 359723,
      "node_id": "MDQ6VXNlcjM1OTcyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/359723?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jeluard",
      "html_url": "https://github.com/jeluard",
      "followers_url": "https://api.github.com/users/jeluard/followers",
      "following_url": "https://api.github.com/users/jeluard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jeluard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jeluard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jeluard/subscriptions",
      "organizations_url": "https://api.github.com/users/jeluard/orgs",
      "repos_url": "https://api.github.com/users/jeluard/repos",
      "events_url": "https://api.github.com/users/jeluard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jeluard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T17:28:41Z",
    "updated_at": "2018-11-30T17:28:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Replace by view lifecycle hooks.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443277710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

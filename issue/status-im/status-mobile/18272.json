{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/18272",
  "id": 2052727448,
  "node_id": "I_kwDOAx4p2c56WiKY",
  "number": 18272,
  "title": "Offline fetching and resending messages is not working from mobile devices on `shards.test`",
  "user": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3990911030,
      "node_id": "LA_kwDOAx4p2c7t4Hg2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Bug%20MVP",
      "name": "E:Mobile Bug MVP",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 5818300473,
      "node_id": "LA_kwDOAx4p2c8AAAABWsw4OQ",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Release%201.26",
      "name": "E:Mobile Release 1.26",
      "color": "B240A1",
      "default": false,
      "description": ""
    },
    {
      "id": 6136674080,
      "node_id": "LA_kwDOAx4p2c8AAAABbcY3IA",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/Release%20Blocker",
      "name": "Release Blocker",
      "color": "C53A1F",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-12-21T16:27:46Z",
  "updated_at": "2023-12-22T11:24:02Z",
  "closed_at": "2023-12-22T11:24:01Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n\r\n## Problem \r\nThe bug is not reproducible on the current `develop` branch and was not reproducible during testing https://github.com/status-im/status-mobile/pull/18115\r\n\r\n\r\n#### Expected behavior\r\n- can fetch messages from offline (4,5,6) + new channel\r\n- can resend messages while sending from offline after getting back online (1,2,3)\r\n\r\n#### Actual behavior\r\n- no messages  and community updates are received while getting back from offline\r\n- messages are stuck in \"Sending\" forever\r\n\r\n### Reproduction\r\nAs a desktop: create community\r\n1. Mobile: join community \r\n2. Mobile: go offline \r\n3. Mobile: post messages 1,2,3\r\n4. Desktop: post messages 4,5,6 + add channel2 \r\n5. Mobile: go online \r\n\r\n### Additional Information\r\n\r\n- Status version: RC 17  \r\n- Operating System: Android, iOS\r\n\r\nhttps://github.com/status-im/status-mobile/assets/4557972/ed25a1dd-22bf-4239-8d43-426a5f673be3\r\n\r\n\r\n\r\n\r\n### Logs\r\nDesktop ([build]( https://ci.infra.status.im/job/status-desktop/job/release/job/release%2F0.15.x/37/ )): [geth.log](https://github.com/status-im/status-mobile/files/13744043/geth.log)\r\nMobile ([build]( https://ci.infra.status.im/job/status-mobile/job/release/job/release%2F1.26.x/17/ )): [logs (78).zip](https://github.com/status-im/status-mobile/files/13744036/logs.78.zip)\r\n\r\n\r\n\r\n",
  "closed_by": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/18272/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866607485",
    "html_url": "https://github.com/status-im/status-mobile/issues/18272#issuecomment-1866607485",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
    "id": 1866607485,
    "node_id": "IC_kwDOAx4p2c5vQit9",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-21T16:29:23Z",
    "updated_at": "2023-12-21T16:29:42Z",
    "author_association": "MEMBER",
    "body": "cc @anastasiyaig @richard-ramos @cammellos ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866607485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866641293",
    "html_url": "https://github.com/status-im/status-mobile/issues/18272#issuecomment-1866641293",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
    "id": 1866641293,
    "node_id": "IC_kwDOAx4p2c5vQq-N",
    "user": {
      "login": "VolodLytvynenko",
      "id": 52490791,
      "node_id": "MDQ6VXNlcjUyNDkwNzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VolodLytvynenko",
      "html_url": "https://github.com/VolodLytvynenko",
      "followers_url": "https://api.github.com/users/VolodLytvynenko/followers",
      "following_url": "https://api.github.com/users/VolodLytvynenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/VolodLytvynenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VolodLytvynenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VolodLytvynenko/subscriptions",
      "organizations_url": "https://api.github.com/users/VolodLytvynenko/orgs",
      "repos_url": "https://api.github.com/users/VolodLytvynenko/repos",
      "events_url": "https://api.github.com/users/VolodLytvynenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VolodLytvynenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-21T16:54:24Z",
    "updated_at": "2023-12-21T16:57:28Z",
    "author_association": "NONE",
    "body": "I confirm everything that @churik  described [here](https://github.com/status-im/status-mobile/issues/18272#issue-2052727448) \r\nTested in case Mobile -> Mobile\r\n\r\n**Reproduction**\r\nAs a desktop: create community share to `Mobile 1:` and `Mobile 2:`\r\n\r\n`Mobile 1:` join the community and send message 1\r\n`Mobile 2:`join community (Now message 1 is not visible)\r\n`Mobile 2:` go offline\r\n`Mobile 1:` send 3-5 messages\r\n`Mobile 2:` go online\r\n\r\n### Actual result:\r\nno messages and community updates are received while getting back from offline\r\n\r\nhttps://github.com/status-im/status-mobile/assets/52490791/b3127614-f3b8-4e18-85f2-b2137b1fa500\r\n\r\n### Logs:\r\n-  **Mobile 2:** Real device. Device Pixel 7a.  (right on the record)    [Status-debug-logs.zip](https://github.com/status-im/status-mobile/files/13744329/Status-debug-logs.zip)\r\n\r\n- **Mobile 1:** Android studio. Pixel XL API 33 (left on the record)  [android_logcat4.txt](https://github.com/status-im/status-mobile/files/13744315/android_logcat4.1.txt)\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866641293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866666038",
    "html_url": "https://github.com/status-im/status-mobile/issues/18272#issuecomment-1866666038",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
    "id": 1866666038,
    "node_id": "IC_kwDOAx4p2c5vQxA2",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-21T17:13:03Z",
    "updated_at": "2023-12-21T17:13:03Z",
    "author_association": "MEMBER",
    "body": "I see a lot of `cannot do on demand discovery for non-waku protocol` errors that were fixed in go-waku in https://github.com/waku-org/go-waku/pull/951. I'll update the status-go branch with that go-waku version and this mobile PR",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866666038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866688830",
    "html_url": "https://github.com/status-im/status-mobile/issues/18272#issuecomment-1866688830",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
    "id": 1866688830,
    "node_id": "IC_kwDOAx4p2c5vQ2k-",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-21T17:31:44Z",
    "updated_at": "2023-12-21T17:31:44Z",
    "author_association": "MEMBER",
    "body": "Hm, the `test-shard-test` branch of status-go does contain the changes, yet the feature/peersyncing does not. I ended up updating go-waku on that branch. So we'd need to update the mobile branch to use this https://github.com/status-im/status-go/commit/c3739edc0ca3bfb1277def0c824244564f3c6bd7\r\n\r\nBut IMO the way to go should be to create a branch in status-go that uses `test-shard-test` as base, and include the commits from `feature/peersyncing`. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866688830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866689922",
    "html_url": "https://github.com/status-im/status-mobile/issues/18272#issuecomment-1866689922",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
    "id": 1866689922,
    "node_id": "IC_kwDOAx4p2c5vQ22C",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-21T17:32:46Z",
    "updated_at": "2023-12-21T17:32:46Z",
    "author_association": "MEMBER",
    "body": "I'm also not sure which branch is being used in status-mobile so I can update its status-go version",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1866689922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1867571697",
    "html_url": "https://github.com/status-im/status-mobile/issues/18272#issuecomment-1867571697",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18272",
    "id": 1867571697,
    "node_id": "IC_kwDOAx4p2c5vUOHx",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-22T11:24:01Z",
    "updated_at": "2023-12-22T11:24:01Z",
    "author_association": "MEMBER",
    "body": "Bug was introduced due to invalid rebase, fixed in build 18",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1867571697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

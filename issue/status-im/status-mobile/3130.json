{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/3130",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/3130/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/3130/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/3130/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/3130",
  "id": 291243205,
  "node_id": "MDU6SXNzdWUyOTEyNDMyMDU=",
  "number": 3130,
  "title": "Sign transaction button is available when having 0 funds for some dapps (CK, Auction house) and tokens",
  "user": {
    "login": "asemiankevich",
    "id": 28752642,
    "node_id": "MDQ6VXNlcjI4NzUyNjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/28752642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/asemiankevich",
    "html_url": "https://github.com/asemiankevich",
    "followers_url": "https://api.github.com/users/asemiankevich/followers",
    "following_url": "https://api.github.com/users/asemiankevich/following{/other_user}",
    "gists_url": "https://api.github.com/users/asemiankevich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/asemiankevich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/asemiankevich/subscriptions",
    "organizations_url": "https://api.github.com/users/asemiankevich/orgs",
    "repos_url": "https://api.github.com/users/asemiankevich/repos",
    "events_url": "https://api.github.com/users/asemiankevich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/asemiankevich/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 517247123,
      "node_id": "MDU6TGFiZWw1MTcyNDcxMjM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/medium-priority",
      "name": "medium-priority",
      "color": "c5c5c5",
      "default": false,
      "description": null
    },
    {
      "id": 691030971,
      "node_id": "MDU6TGFiZWw2OTEwMzA5NzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/wallet",
      "name": "wallet",
      "color": "1d76db",
      "default": false,
      "description": null
    },
    {
      "id": 837469643,
      "node_id": "MDU6TGFiZWw4Mzc0Njk2NDM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/:eyes:%20design-input-required",
      "name": ":eyes: design-input-required",
      "color": "d321bb",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "denis-sharypin",
    "id": 6559881,
    "node_id": "MDQ6VXNlcjY1NTk4ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6559881?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/denis-sharypin",
    "html_url": "https://github.com/denis-sharypin",
    "followers_url": "https://api.github.com/users/denis-sharypin/followers",
    "following_url": "https://api.github.com/users/denis-sharypin/following{/other_user}",
    "gists_url": "https://api.github.com/users/denis-sharypin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/denis-sharypin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/denis-sharypin/subscriptions",
    "organizations_url": "https://api.github.com/users/denis-sharypin/orgs",
    "repos_url": "https://api.github.com/users/denis-sharypin/repos",
    "events_url": "https://api.github.com/users/denis-sharypin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/denis-sharypin/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "denis-sharypin",
      "id": 6559881,
      "node_id": "MDQ6VXNlcjY1NTk4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6559881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/denis-sharypin",
      "html_url": "https://github.com/denis-sharypin",
      "followers_url": "https://api.github.com/users/denis-sharypin/followers",
      "following_url": "https://api.github.com/users/denis-sharypin/following{/other_user}",
      "gists_url": "https://api.github.com/users/denis-sharypin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/denis-sharypin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/denis-sharypin/subscriptions",
      "organizations_url": "https://api.github.com/users/denis-sharypin/orgs",
      "repos_url": "https://api.github.com/users/denis-sharypin/repos",
      "events_url": "https://api.github.com/users/denis-sharypin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/denis-sharypin/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-01-24T15:10:23Z",
  "updated_at": "2018-07-27T14:37:06Z",
  "closed_at": "2018-07-27T14:37:06Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Feature\r\n\r\n*Summary*: we have now several edge cases when sending tokens from wallet: \r\n1 - I send tokens with gas price and gas limit set to 0 and i receive this `transaction underpriced` https://prnt.sc/i4y92k \r\n\r\n2 - when i set too high gas price or gas limit and transaction fee is more than i have on my balance. In this case i am receiving `insufficient funds` https://prnt.sc/i4ya6i \r\n\r\n3 - when having 0 ETH sign button is available for some dapps (CK or Auction House), so i am able to send txn (even the red error message is showing insufficient funds) and then error pop up is shown\r\n\r\nNeed to implement some kind  of real time validation for both cases so me as a user is not confused tapping Got it button and expecting the transaction sent and then seeing errors.\r\n\r\n#### Expected behavior\r\nValidation is performed real time so I:\r\n\r\n- can't send tokens when transaction fee is more than my current ETH balance\r\n- can't send tokens with 0 gas limit and 0 gas price\r\n- can't perform txn to dapp (CK , Auction House) when i dont have enough funds\r\n\r\n### Reproduction\r\n\r\n- Open Status\r\n- Claim some tokens\r\n- Send tokens having transacton fee more than current balance\r\n- Send tokens having gas limit and gas price = 0\r\n- Try to buy expensive kitty\r\n- Having 0 ETH try to set up auction\r\n\r\n### Additional Information\r\n* Status version: latest develop\r\n* Operating System: Android, iOS\r\n",
  "closed_by": {
    "login": "asemiankevich",
    "id": 28752642,
    "node_id": "MDQ6VXNlcjI4NzUyNjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/28752642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/asemiankevich",
    "html_url": "https://github.com/asemiankevich",
    "followers_url": "https://api.github.com/users/asemiankevich/followers",
    "following_url": "https://api.github.com/users/asemiankevich/following{/other_user}",
    "gists_url": "https://api.github.com/users/asemiankevich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/asemiankevich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/asemiankevich/subscriptions",
    "organizations_url": "https://api.github.com/users/asemiankevich/orgs",
    "repos_url": "https://api.github.com/users/asemiankevich/repos",
    "events_url": "https://api.github.com/users/asemiankevich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/asemiankevich/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/3130/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/3130/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/369966255",
    "html_url": "https://github.com/status-im/status-mobile/issues/3130#issuecomment-369966255",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/3130",
    "id": 369966255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTk2NjI1NQ==",
    "user": {
      "login": "lukaszfryc",
      "id": 7532782,
      "node_id": "MDQ6VXNlcjc1MzI3ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaszfryc",
      "html_url": "https://github.com/lukaszfryc",
      "followers_url": "https://api.github.com/users/lukaszfryc/followers",
      "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
      "repos_url": "https://api.github.com/users/lukaszfryc/repos",
      "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-02T16:07:47Z",
    "updated_at": "2018-03-02T16:07:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "> 1 - I send tokens with gas price and gas limit set to 0 and i receive this transaction underpriced https://prnt.sc/i4y92k\r\n\r\nIn addition to setting gas price and gas limit to 0 there is also another case. @Serhy found that if there is no network when requesting for \"lowest gas price\" the gas limit and gas price fields are empty. If then user tries to send transaction he gets `transaction underpriced`. It can happen not only in wallet but in a chat as well (`/send`). \r\n\r\nFirst thing we could do is to display more meaningful message than \"transaction underpriced\" and suggest the user what to do next. Also, if we got the lowest fee at least once we should store it and use it as default value. This way we can minimize risk of not getting the lowest fee every time send transaction screen is opened.\r\n\r\n\r\n \n\n<blockquote><img src=\"https://image.prntscr.com/image/NDopyIiMT56mT0haIPLX5g.png\" width=\"48\" align=\"right\"><div>Lightshot</div><div><strong><a href=\"https://prnt.sc/i4y92k\">Screenshot</a></strong></div><div>Captured with Lightshot</div></blockquote>",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/369966255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

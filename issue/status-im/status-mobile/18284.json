{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/18284",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/18284",
  "id": 2053905493,
  "node_id": "I_kwDOAx4p2c56bBxV",
  "number": 18284,
  "title": "Messages sent after device sleep may stuck in \"sending\" state in community",
  "user": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3990911030,
      "node_id": "LA_kwDOAx4p2c7t4Hg2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Bug%20MVP",
      "name": "E:Mobile Bug MVP",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 6342485686,
      "node_id": "LA_kwDOAx4p2c8AAAABegqmtg",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/status-waku-integ",
      "name": "status-waku-integ",
      "color": "13BDF1",
      "default": false,
      "description": "All issues relating to the Status Waku integration."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/70",
    "html_url": "https://github.com/status-im/status-mobile/milestone/70",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/70/labels",
    "id": 9699572,
    "node_id": "MI_kwDOAx4p2c4AlAD0",
    "number": 70,
    "title": "1.27.0 - Alpha",
    "description": "### This release will be used for internal dogfooding\r\n\r\nMobile dev team priorities In priority order:\r\n\r\n**1. Finish anything that wasn't completed in the previous 1.26 cycle**\r\n\r\n**2. Select which accounts to share with each Community's control node**\r\n- Designs should be ready for review and dev feedback by 18th September\r\n\r\n**3. Settings home screen**\r\n- the settings home screen only\r\n\r\n**4. Fix bugs, both functional and UX fit-and-finish defects.**  \r\n\r\n- specifically focus on bugs related to the Communities functionality, when a community is utilizing all the community admin functionality available in Status Desktop\r\n\r\n- any remaining UX quality defects\r\n\r\n- ensure all community token gating related functionality is working\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 75,
    "closed_issues": 103,
    "state": "open",
    "created_at": "2023-07-26T12:50:42Z",
    "updated_at": "2024-01-25T18:49:11Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 3,
  "created_at": "2023-12-22T13:13:01Z",
  "updated_at": "2024-01-25T14:37:07Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n\r\n## Problem \r\nI believe the issue exists regardless of the fleet, but in the current release on `shards.test` version it is more noticeable. \r\nMessages are completely stuck in \"sending\" state if they are sent after the device is unlocked. Re-login doesn't help, the messages are stuck there forever and they are not being resent. \r\n\r\n#### Expected behavior\r\nMessages are sent \r\n\r\n#### Actual behavior\r\nmessages are stuck there forever and they are not being resent even after re-login \r\n\r\n\r\n### Reproduction\r\n**Prerequisites:** device A joined to community \r\n\r\n1. Lock the device and wait ~5 mins (app should be on the background)\r\n2. Unlock the device and try to send a couple of messages to community\r\n\r\n### Logs (to be added)\r\n\r\n### Additional Information\r\n\r\n- Status version: release 18 \r\n- Operating System: Android, iOS\r\n\r\n\r\n[comment]: # (Please, add logs/notes if necessary)\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/18284/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1869453182",
    "html_url": "https://github.com/status-im/status-mobile/issues/18284#issuecomment-1869453182",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284",
    "id": 1869453182,
    "node_id": "IC_kwDOAx4p2c5vbZd-",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-26T10:49:00Z",
    "updated_at": "2023-12-26T10:49:00Z",
    "author_association": "MEMBER",
    "body": "Currently can reproduce consistently with android sending from offline state - messages stuck in \"Sending\" state forever after getting back online\r\n![IMAGE 2023-12-26 11:48:34](https://github.com/status-im/status-mobile/assets/4557972/68a77b46-b2df-4c8a-9aa1-bd0d97eedca0)\r\n\r\n\r\nLogs: [Status-debug-logs.zip](https://github.com/status-im/status-mobile/files/13770902/Status-debug-logs.zip)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1869453182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1903716352",
    "html_url": "https://github.com/status-im/status-mobile/issues/18284#issuecomment-1903716352",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284",
    "id": 1903716352,
    "node_id": "IC_kwDOAx4p2c5xeGgA",
    "user": {
      "login": "pavloburykh",
      "id": 97245802,
      "node_id": "U_kgDOBcvaag",
      "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavloburykh",
      "html_url": "https://github.com/pavloburykh",
      "followers_url": "https://api.github.com/users/pavloburykh/followers",
      "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
      "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
      "repos_url": "https://api.github.com/users/pavloburykh/repos",
      "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-22T10:43:30Z",
    "updated_at": "2024-01-22T10:43:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "**UPDATE** (22.01.24):\r\n\r\nSo far I am unable to reproduce this issue. Maybe something has been fixed on go-waku side recently, not sure.\r\n\r\nBut let's keep this issue open for a while. If we face it again we will post an update here.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1903716352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910237928",
    "html_url": "https://github.com/status-im/status-mobile/issues/18284#issuecomment-1910237928",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/18284",
    "id": 1910237928,
    "node_id": "IC_kwDOAx4p2c5x2-ro",
    "user": {
      "login": "pavloburykh",
      "id": 97245802,
      "node_id": "U_kgDOBcvaag",
      "avatar_url": "https://avatars.githubusercontent.com/u/97245802?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pavloburykh",
      "html_url": "https://github.com/pavloburykh",
      "followers_url": "https://api.github.com/users/pavloburykh/followers",
      "following_url": "https://api.github.com/users/pavloburykh/following{/other_user}",
      "gists_url": "https://api.github.com/users/pavloburykh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pavloburykh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pavloburykh/subscriptions",
      "organizations_url": "https://api.github.com/users/pavloburykh/orgs",
      "repos_url": "https://api.github.com/users/pavloburykh/repos",
      "events_url": "https://api.github.com/users/pavloburykh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pavloburykh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-25T13:37:35Z",
    "updated_at": "2024-01-25T14:37:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "**UPDATE** (25.01.24): \r\n\r\nI have been able to reproduce the bug on the recovered user. In my case the issue seems nothing to do with sleep mode or offline/online handling. \r\n\r\nThe issues have been reproduced both in communities and 1-1 chats. \r\n\r\nSome of the messages have subsequently changed status from Sending to Sent and have been in fact delivered. \r\nBut some of the messages have been stuck in Sending status forever and have not been delivered (or delivered partially, i.e message contained text + 6 images but only text + 3 images have been delivered and 3 images have been lost). \r\n\r\n[Status-debug-logs (97).zip](https://github.com/status-im/status-mobile/files/14052742/Status-debug-logs.97.zip)\r\n\r\n![photo_2024-01-25 15 33 14](https://github.com/status-im/status-mobile/assets/97245802/3237d2db-d377-4254-8db3-64f42a64c345)\r\n![photo_2024-01-25 15 33 18](https://github.com/status-im/status-mobile/assets/97245802/a02ad493-d86a-4a65-84a4-4a292f7f1c31)\r\n\r\n\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1910237928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

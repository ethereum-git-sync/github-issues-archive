{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/18251",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/18251/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/18251/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/18251/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/18251",
  "id": 2050307962,
  "node_id": "I_kwDOAx4p2c56NTd6",
  "number": 18251,
  "title": "Android issues with Notifications permissions",
  "user": {
    "login": "mariia-skrypnyk",
    "id": 147824399,
    "node_id": "U_kgDOCM-fDw",
    "avatar_url": "https://avatars.githubusercontent.com/u/147824399?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mariia-skrypnyk",
    "html_url": "https://github.com/mariia-skrypnyk",
    "followers_url": "https://api.github.com/users/mariia-skrypnyk/followers",
    "following_url": "https://api.github.com/users/mariia-skrypnyk/following{/other_user}",
    "gists_url": "https://api.github.com/users/mariia-skrypnyk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mariia-skrypnyk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mariia-skrypnyk/subscriptions",
    "organizations_url": "https://api.github.com/users/mariia-skrypnyk/orgs",
    "repos_url": "https://api.github.com/users/mariia-skrypnyk/repos",
    "events_url": "https://api.github.com/users/mariia-skrypnyk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mariia-skrypnyk/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 448876669,
      "node_id": "MDU6TGFiZWw0NDg4NzY2Njk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/android",
      "name": "android",
      "color": "5319e7",
      "default": false,
      "description": null
    },
    {
      "id": 872160691,
      "node_id": "MDU6TGFiZWw4NzIxNjA2OTE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Push%20Notifications%20MVP",
      "name": "E:Mobile Push Notifications MVP",
      "color": "36b2b5",
      "default": false,
      "description": ""
    },
    {
      "id": 964625199,
      "node_id": "MDU6TGFiZWw5NjQ2MjUxOTk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Onboarding%20MVP",
      "name": "E:Mobile Onboarding MVP",
      "color": "b7a3ff",
      "default": false,
      "description": ""
    },
    {
      "id": 3990911030,
      "node_id": "LA_kwDOAx4p2c7t4Hg2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Bug%20MVP",
      "name": "E:Mobile Bug MVP",
      "color": "B60205",
      "default": false,
      "description": ""
    },
    {
      "id": 6104979722,
      "node_id": "LA_kwDOAx4p2c8AAAABa-KZCg",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Release%201.27",
      "name": "E:Mobile Release 1.27",
      "color": "140C7F",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/70",
    "html_url": "https://github.com/status-im/status-mobile/milestone/70",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/70/labels",
    "id": 9699572,
    "node_id": "MI_kwDOAx4p2c4AlAD0",
    "number": 70,
    "title": "1.27.0 - Alpha",
    "description": "### This release will be used for wide internal dogfooding \r\n\r\nMobile dev team priorities In priority order:\r\n\r\n**1. Finish anything that wasn't completed in the previous 1.26 cycle**\r\n\r\n**2. Select which accounts to share with each Community's control node**\r\n- Designs should be ready for review and dev feedback by 18th September\r\n\r\n**3. Settings home screen**\r\n- the settings home screen only\r\n\r\n**4. Fix bugs, both functional and UX fit-and-finish defects.**  \r\n\r\n- specifically focus on bugs related to the Communities functionality, when a community is utilizing all the community admin functionality available in Status Desktop\r\n\r\n- any remaining UX quality defects\r\n\r\n- ensure all community token gating related functionality is working\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 90,
    "closed_issues": 64,
    "state": "open",
    "created_at": "2023-07-26T12:50:42Z",
    "updated_at": "2023-12-20T12:23:44Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 0,
  "created_at": "2023-12-20T10:50:49Z",
  "updated_at": "2023-12-20T13:19:32Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n\r\n## Problem \r\n[comment]: # (A problem description)\r\n\r\nThis issue describes the behavior of the app when enabling push notifications both within the app (on onboarding and in profile) and in the device settings: it was discovered that notifications permissions behave differently on different devices, and in some cases, this leads to issues in the work of push notifications themselves.\r\n\r\nHere are the main examples of undesirable behavior:\r\n\r\n1. Notification Permissions are enabled by default after Status app installation.\r\n2. No Notifications Permission Request popup on Onboarding screen.\r\n3. No Notifications Permission Request popup on Notifications settings of Status app if user want's to enable notifications he skipped on Onboarding screen.\r\n\r\nAt the moment, we observe the following behavior on some devices listed [here](https://docs.google.com/spreadsheets/d/1stSJ6_IEZ7jTTQCcLIcjamOIZtGpvhL6jQVTNPnpljg/edit?usp=sharing)\r\n\r\n#### Expected behavior\r\n1. Notifications Permissions of Status app at the device settings should be disabled by default, especially from 13.0 android version , [here](https://developer.android.com/develop/ui/views/notifications/notification-permission) we have a details :\r\n\r\nAndroid 13.0, API level 33\r\nAdds runtime permission. For your app to send notifications, the user must grant this permission to your app.\r\n\r\n2. User should see Notifications Permission Request popup on Onboarding screen after tap on Enable Notifications button\r\n3. User should see Notifications Permission Request popup on Notifications Settings screen inside Status app (Profile menu option)\r\nOR \r\nan ability to return to device settings and enable notifications there in case he skipped notification enabling on the Onboarding screen. \r\n\r\n#### Actual behavior\r\n1. Notification permissions for the Status app at the device settings are enabled on some devices and disabled by default on others \r\n\r\n\r\nhttps://github.com/status-im/status-mobile/assets/147824399/224320c8-387b-4f78-93bf-c961c83d25ff\r\n\r\n\r\n\r\nhttps://github.com/status-im/status-mobile/assets/147824399/8760d596-cf02-416b-920e-3dfd689b1f0d\r\n\r\n\r\n*list of the devices is mentioned [here](https://docs.google.com/spreadsheets/d/1stSJ6_IEZ7jTTQCcLIcjamOIZtGpvhL6jQVTNPnpljg/edit?usp=sharing)\r\n3. User doesn't see Notifications Permission Request popup on Onboarding screen after tap on \"Enable notifications\" button but he do have notifications while using app in case his device has notifications enabled by default at the device settings.\r\n4. User doesn't see Notifications Permission Request popup on Notifications Settings screen inside Status app (Profile menu option) when he turns \"Show notifications\" toggle on in case his device has notifications disabled by default at the device settings.\r\n\r\n### Reproduction\r\n\r\n1. Install build to the Android device\r\n3. Please take a look at cases with steps mentioned [here](https://docs.google.com/spreadsheets/d/1stSJ6_IEZ7jTTQCcLIcjamOIZtGpvhL6jQVTNPnpljg/edit?usp=sharing)\r\n\r\n### Additional Information\r\n\r\n- Status version: nightly 20/12\r\n- Operating System: Android 11,12,13,14\r\n\r\n\r\n[comment]: # (Please, add logs/notes if necessary)\r\n*this issue contains several moments that don't work as expected and grouping them may be helpful but in any case let me know if it is better do divide them \r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/18251/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/18251/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

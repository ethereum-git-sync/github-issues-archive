{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6234",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6234",
  "id": 368526494,
  "node_id": "MDU6SXNzdWUzNjg1MjY0OTQ=",
  "number": 6234,
  "title": "Unknown is shown for messages in replies that cannot be fetched (sent more 24h ago)",
  "user": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 795655580,
      "node_id": "MDU6TGFiZWw3OTU2NTU1ODA=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/chat",
      "name": "chat",
      "color": "f70cb0",
      "default": false,
      "description": null
    },
    {
      "id": 957413450,
      "node_id": "MDU6TGFiZWw5NTc0MTM0NTA=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/low-severity",
      "name": "low-severity",
      "color": "3fdbce",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2018-10-10T07:23:12Z",
  "updated_at": "2018-12-12T12:08:48Z",
  "closed_at": "2018-12-12T12:08:48Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: \"Unknown\"  for initial messages in chat replies can be shown in two cases:\r\n- when you log in \\ log out  (because DB writing is done in async manner as @janherich said); after a while, Unknown is replaced by initial message\r\n- when you join public chat and it contains messages from 24 h with replies to messages that are older than 24 h.\r\n\r\n\r\n#### Expected behavior\r\nas for me best solution is don't show \"Unknown\" for scenario 1 (just ordinary messages) and show some spinner instead of \"Unknown\"  for scenario 2 until message can be fetched.\r\n\r\n#### Actual behavior\r\n\"Unknown\" \r\n<img width=\"241\" alt=\"unknown_3\" src=\"https://user-images.githubusercontent.com/4557972/46718858-2cd1ff80-cc75-11e8-87b9-54404265c5df.png\">\r\n\r\n\r\n### Reproduction\r\n\r\n*Scenario 1:*\r\n- Open Status\r\n- Log in\r\n- Join any channel that contains messages with replies (last 24 h) to messages that are older than 24 hours\r\n- Check chat history\r\n\r\n*Scenario 2:*\r\n- Open Status\r\n- Log in\r\n- Join any channel that contains messages with replies\r\n- Log out \\ log in\r\n- Pay attention to replies. Some of them can be displayed with \"Unknown\" until history will be fetched.\r\n\r\n### Additional Information\r\n[comment]: # (Please do your best to fill this out.)\r\n* Status version: nightly 10/10/2018\r\n* Operating System: Android, iOS, Mac OS\r\n",
  "closed_by": {
    "login": "yenda",
    "id": 1181225,
    "node_id": "MDQ6VXNlcjExODEyMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yenda",
    "html_url": "https://github.com/yenda",
    "followers_url": "https://api.github.com/users/yenda/followers",
    "following_url": "https://api.github.com/users/yenda/following{/other_user}",
    "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
    "organizations_url": "https://api.github.com/users/yenda/orgs",
    "repos_url": "https://api.github.com/users/yenda/repos",
    "events_url": "https://api.github.com/users/yenda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yenda/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6234/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/428466694",
    "html_url": "https://github.com/status-im/status-mobile/issues/6234#issuecomment-428466694",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234",
    "id": 428466694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODQ2NjY5NA==",
    "user": {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-10T07:27:01Z",
    "updated_at": "2018-10-10T07:27:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Already fixed in #6226 ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/428466694/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/428892883",
    "html_url": "https://github.com/status-im/status-mobile/issues/6234#issuecomment-428892883",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234",
    "id": 428892883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyODg5Mjg4Mw==",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-11T09:48:58Z",
    "updated_at": "2018-10-11T09:48:58Z",
    "author_association": "MEMBER",
    "body": "Scenario 1 is still reproducible. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/428892883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/429254517",
    "html_url": "https://github.com/status-im/status-mobile/issues/6234#issuecomment-429254517",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234",
    "id": 429254517,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTI1NDUxNw==",
    "user": {
      "login": "lukaszfryc",
      "id": 7532782,
      "node_id": "MDQ6VXNlcjc1MzI3ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaszfryc",
      "html_url": "https://github.com/lukaszfryc",
      "followers_url": "https://api.github.com/users/lukaszfryc/followers",
      "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
      "repos_url": "https://api.github.com/users/lukaszfryc/repos",
      "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-12T08:53:52Z",
    "updated_at": "2018-10-12T08:53:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can we prioritize this issue? It maybe not harmful but lot of people are experiencing it and wondering why it happens. \r\n\r\nIn case of older > 24h (or even [7 days](https://github.com/status-im/status-react/pull/6268)) message, can we store this message in local db after replaying? cc @janherich ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/429254517/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/429285488",
    "html_url": "https://github.com/status-im/status-mobile/issues/6234#issuecomment-429285488",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6234",
    "id": 429285488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTI4NTQ4OA==",
    "user": {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-12T10:48:31Z",
    "updated_at": "2018-10-12T10:48:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "@lukaszfryc Yes, we probably should just probably embed message content and author in reply message. Originally, I didn't want to do it, because it could lead to quite significant increase in message size over the time (reply to reply to reply...) and more problematic implementation of future threads, but given that are message fetching is far from 100% reliable, there is no other way :/",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/429285488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

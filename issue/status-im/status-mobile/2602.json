{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/2602",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/2602",
  "id": 279144342,
  "node_id": "MDU6SXNzdWUyNzkxNDQzNDI=",
  "number": 2602,
  "title": "After upgrade: null is not an object (evaluating 'e.toLowerCase') if last message in chat is Request",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "janherich",
    "id": 1910609,
    "node_id": "MDQ6VXNlcjE5MTA2MDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janherich",
    "html_url": "https://github.com/janherich",
    "followers_url": "https://api.github.com/users/janherich/followers",
    "following_url": "https://api.github.com/users/janherich/following{/other_user}",
    "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
    "organizations_url": "https://api.github.com/users/janherich/orgs",
    "repos_url": "https://api.github.com/users/janherich/repos",
    "events_url": "https://api.github.com/users/janherich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janherich/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "janherich",
      "id": 1910609,
      "node_id": "MDQ6VXNlcjE5MTA2MDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1910609?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/janherich",
      "html_url": "https://github.com/janherich",
      "followers_url": "https://api.github.com/users/janherich/followers",
      "following_url": "https://api.github.com/users/janherich/following{/other_user}",
      "gists_url": "https://api.github.com/users/janherich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/janherich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/janherich/subscriptions",
      "organizations_url": "https://api.github.com/users/janherich/orgs",
      "repos_url": "https://api.github.com/users/janherich/repos",
      "events_url": "https://api.github.com/users/janherich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/janherich/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2017-12-04T20:49:26Z",
  "updated_at": "2018-01-18T19:10:04Z",
  "closed_at": "2018-01-18T19:10:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n### Description\r\n\r\n[comment]: # (Feature or Bug? i.e Type: Bug)\r\n*Type*: Bug\r\n\r\nIn the upgraded app (if last sent message in the chat was Request message) after sign in:\r\n1. Popup `null is not an object (evaluating 'e.toLowerCase') is shown each time after sign in \r\n2. If open chat and tap on back button then same popup is shown and no navigation happens, so user stays in the chat and need to re-launch app\r\n3. if user taps on the input field in the chat (to send something else) then popup `undefined is not an object (evaluating 'this._component.getScrollableNode')` shown and focus is out of the input field, so can't type. \r\n  \r\n![img_2535](https://user-images.githubusercontent.com/6584810/33575161-fea90478-d93b-11e7-8541-a5264752722c.jpg)\r\n![img_2538](https://user-images.githubusercontent.com/6584810/33575174-0b22f452-d93c-11e7-8d65-9e85d38b9c28.jpg)\r\n\r\n\r\n#### Expected behavior\r\n[comment]: # (Describe what you expected to happen.)\r\nAfter upgrade user can sign in, no popups with errors are shown\r\n#### Actual behavior\r\n[comment]: # (Describe what actually happened.)\r\nIf chat contains request message then after upgrade:\r\n1. Popup `null is not an object (evaluating 'e.toLowerCase') is shown each time after sign in \r\n2. If open chat and tap on back button then same popup is shown and no navigation happens, so user stays in the chat and need to re-launch app\r\n3. if user taps on the input field in the chat (to send something else) then popup `undefined is not an object (evaluating 'this._component.getScrollableNode')` shown and focus is out of the input field, so can't type. \r\n### Reproduction\r\n[comment]: # (Describe how we can replicate the bug step by step.)\r\nBefore upgrade:\r\n- Open Status\r\n- Open chat with Jarrad \r\n- Send to Jarrad /request 0.00004 ETH\r\n- Close app\r\n- upgrade\r\n- Launch app\r\n- Sign in (check if any popups are shown)\r\n- Open chat with Jarrad  (check if any popups are shown)\r\n\r\n\r\n### Additional Information\r\nafter upgrade: https://app.testfairy.com/projects/4803590-status/builds/7202630/sessions/29/?accessToken=iBR/7sEA7dfI5qIk6iOh4UoDbqk\r\n* Status version:  \r\nversion 0.9.11d411  \r\nupgraded from 0.9.12 TestFligh version to nightly build https://jenkins.status.im/job/status-react/job/nightly/94/ \r\n* Operating System: found on iOS, real device iPhone 6s, iOS 10.3.3\r\n\r\n",
  "closed_by": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/2602/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/349101142",
    "html_url": "https://github.com/status-im/status-mobile/issues/2602#issuecomment-349101142",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602",
    "id": 349101142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTEwMTE0Mg==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-04T20:51:11Z",
    "updated_at": "2017-12-04T20:51:11Z",
    "author_association": "NONE",
    "body": "also mentioned in comment https://github.com/status-im/status-react/issues/2473#issuecomment-346013566 but no special data described there. Because initial issue there is different, I've created this one and closed #2473 ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/349101142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/355355979",
    "html_url": "https://github.com/status-im/status-mobile/issues/2602#issuecomment-355355979",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602",
    "id": 355355979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTM1NTk3OQ==",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-04T18:09:27Z",
    "updated_at": "2018-01-04T18:10:53Z",
    "author_association": "MEMBER",
    "body": "Faced with issue on Android as well (Galaxy S7).\r\nI have several /request in group chat and one in 1-1 chat before upgrade.\r\nAfter upgrade and sign in (worked with app for 2 min after sign in, can see in TF session for first 2 min) I see same error with more details (debug is on):\r\n![egtolower](https://user-images.githubusercontent.com/4557972/34577691-bafc8c1a-f18a-11e7-87ab-e07b584d6d57.png)\r\nTF session (popup appears on 02:08): \r\nhttps://app.testfairy.com/projects/4803622-status/builds/7435076/sessions/2/?accessToken=vT/PcPtOfl4GQ3reoGBvJqqhS5E\r\n\r\n  ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/355355979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/358750182",
    "html_url": "https://github.com/status-im/status-mobile/issues/2602#issuecomment-358750182",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2602",
    "id": 358750182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODc1MDE4Mg==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-18T19:10:04Z",
    "updated_at": "2018-01-18T19:10:04Z",
    "author_association": "NONE",
    "body": "initial issue can't be reproduced. https://github.com/status-im/status-react/issues/2602#issuecomment-355355979 is moved to https://github.com/status-im/status-react/issues/3081",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/358750182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/17614",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/17614",
  "id": 1937393133,
  "node_id": "I_kwDOAx4p2c5zekXt",
  "number": 17614,
  "title": "Implement translations linting",
  "user": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 933023569,
      "node_id": "MDU6TGFiZWw5MzMwMjM1Njk=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/feature",
      "name": "feature",
      "color": "172b9e",
      "default": false,
      "description": "feature requests"
    },
    {
      "id": 4052544927,
      "node_id": "LA_kwDOAx4p2c7xjO2f",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Developer%20XP",
      "name": "E:Mobile Developer XP",
      "color": "0F662F",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "akatov",
    "id": 1148449,
    "node_id": "MDQ6VXNlcjExNDg0NDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1148449?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/akatov",
    "html_url": "https://github.com/akatov",
    "followers_url": "https://api.github.com/users/akatov/followers",
    "following_url": "https://api.github.com/users/akatov/following{/other_user}",
    "gists_url": "https://api.github.com/users/akatov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/akatov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/akatov/subscriptions",
    "organizations_url": "https://api.github.com/users/akatov/orgs",
    "repos_url": "https://api.github.com/users/akatov/repos",
    "events_url": "https://api.github.com/users/akatov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/akatov/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "akatov",
      "id": 1148449,
      "node_id": "MDQ6VXNlcjExNDg0NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1148449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akatov",
      "html_url": "https://github.com/akatov",
      "followers_url": "https://api.github.com/users/akatov/followers",
      "following_url": "https://api.github.com/users/akatov/following{/other_user}",
      "gists_url": "https://api.github.com/users/akatov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akatov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akatov/subscriptions",
      "organizations_url": "https://api.github.com/users/akatov/orgs",
      "repos_url": "https://api.github.com/users/akatov/repos",
      "events_url": "https://api.github.com/users/akatov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akatov/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-10-11T10:19:09Z",
  "updated_at": "2023-10-25T11:58:09Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "We need a tool to find outdated and missing translations in en.json during linting in dev and PR env.\r\n\r\nWe used Python script manually https://github.com/status-im/status-mobile/blob/develop/test/appium/tests/non_func/test_translations.py\r\n\r\nalso, this PR might be related https://github.com/status-im/status-mobile/pull/17610 cc @ilmotta ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/17614/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1757698297",
    "html_url": "https://github.com/status-im/status-mobile/issues/17614#issuecomment-1757698297",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614",
    "id": 1757698297,
    "node_id": "IC_kwDOAx4p2c5oxFj5",
    "user": {
      "login": "ilmotta",
      "id": 46027,
      "node_id": "MDQ6VXNlcjQ2MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilmotta",
      "html_url": "https://github.com/ilmotta",
      "followers_url": "https://api.github.com/users/ilmotta/followers",
      "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
      "organizations_url": "https://api.github.com/users/ilmotta/orgs",
      "repos_url": "https://api.github.com/users/ilmotta/repos",
      "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilmotta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-11T13:25:54Z",
    "updated_at": "2023-10-11T13:25:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@flexsurfer, I took a very good look at your idea to identify missing/unused translations using clj-kondo. I'm no expert, so I might be wrong.\r\n\r\nBasically, clj-kondo hooks run with [SCI](https://github.com/babashka/sci), and SCI doesn't allow reading files, which would be needed to verify if a given translation keyword is present in `en.json`. Therefore, Clojure outside SCI needs to run, but this is not supported in clj-kondo hooks.\r\n\r\nAFAIU when we need to do project-wide linting (not just at the AST node level), we need to write custom code to process the output of the clj-kondo analysis. This is how this repo https://github.com/yannvanhalewyn/analyse-re-frame-usage-with-clj-kondo/tree/master shows how to lint re-frame keyword usage, but this means an external Clojure script needs to run and the results would not be integrated in text editors, they would printed to STDOUT. The script would be more \"precise\" than the Python one (because it would understand Clojure code), but I don't see much value in doing this if the Python script works fine.\r\n\r\nThen there's the very complicated way clojure-lsp runs all sorts of diagnostics at the project level and is still capable of showing warnings/errors in text editors https://github.com/clojure-lsp/clojure-lsp/blob/c6b024940e65e86464fcb0f9be11aeee47a2440b/lib/src/clojure_lsp/feature/diagnostics.clj#L42. I can imagine we could fork clojure-lsp and extend the diagnostics (unless there's a better way), but I would not go into this rabbit hole personally.\r\n\r\nSo, the good news is that **we can write very sophisticated linters project-wide that understand Clojure**, but the bad news is that the DX is not the greatest because such project-wide linters can't be integrated with text editors ü§∑üèº \r\n\r\nI guess we can close this issue for the moment? Thank you",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1757698297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1757726404",
    "html_url": "https://github.com/status-im/status-mobile/issues/17614#issuecomment-1757726404",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614",
    "id": 1757726404,
    "node_id": "IC_kwDOAx4p2c5oxMbE",
    "user": {
      "login": "ilmotta",
      "id": 46027,
      "node_id": "MDQ6VXNlcjQ2MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilmotta",
      "html_url": "https://github.com/ilmotta",
      "followers_url": "https://api.github.com/users/ilmotta/followers",
      "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
      "organizations_url": "https://api.github.com/users/ilmotta/orgs",
      "repos_url": "https://api.github.com/users/ilmotta/repos",
      "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilmotta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-11T13:41:44Z",
    "updated_at": "2023-10-11T13:41:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just to be clear, even if we can't integrate with text editors, I still see value in having a custom linter preventing code from being merged that has unused or missing translations, and that we can certainly do.\r\n\r\nSo if this issue's scope is to only improve the usefulness of `make lint`, then I think we can leave it open, but if the goal is to nicely integrate everything with text editors, then it's much more tricky for project-wide analysis.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1757726404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1779105904",
    "html_url": "https://github.com/status-im/status-mobile/issues/17614#issuecomment-1779105904",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17614",
    "id": 1779105904,
    "node_id": "IC_kwDOAx4p2c5qCwBw",
    "user": {
      "login": "akatov",
      "id": 1148449,
      "node_id": "MDQ6VXNlcjExNDg0NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1148449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/akatov",
      "html_url": "https://github.com/akatov",
      "followers_url": "https://api.github.com/users/akatov/followers",
      "following_url": "https://api.github.com/users/akatov/following{/other_user}",
      "gists_url": "https://api.github.com/users/akatov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/akatov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/akatov/subscriptions",
      "organizations_url": "https://api.github.com/users/akatov/orgs",
      "repos_url": "https://api.github.com/users/akatov/repos",
      "events_url": "https://api.github.com/users/akatov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/akatov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-25T11:56:27Z",
    "updated_at": "2023-10-25T11:56:27Z",
    "author_association": "NONE",
    "body": ";;",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1779105904/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

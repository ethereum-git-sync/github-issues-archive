{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/2701",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/2701",
  "id": 281486255,
  "node_id": "MDU6SXNzdWUyODE0ODYyNTU=",
  "number": 2701,
  "title": "Offline inboxing iteration 1: Support public chat",
  "user": {
    "login": "oskarth",
    "id": 1552237,
    "node_id": "MDQ6VXNlcjE1NTIyMzc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1552237?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/oskarth",
    "html_url": "https://github.com/oskarth",
    "followers_url": "https://api.github.com/users/oskarth/followers",
    "following_url": "https://api.github.com/users/oskarth/following{/other_user}",
    "gists_url": "https://api.github.com/users/oskarth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/oskarth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/oskarth/subscriptions",
    "organizations_url": "https://api.github.com/users/oskarth/orgs",
    "repos_url": "https://api.github.com/users/oskarth/repos",
    "events_url": "https://api.github.com/users/oskarth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/oskarth/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "dmitryn",
    "id": 23836,
    "node_id": "MDQ6VXNlcjIzODM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dmitryn",
    "html_url": "https://github.com/dmitryn",
    "followers_url": "https://api.github.com/users/dmitryn/followers",
    "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
    "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
    "organizations_url": "https://api.github.com/users/dmitryn/orgs",
    "repos_url": "https://api.github.com/users/dmitryn/repos",
    "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dmitryn/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "dmitryn",
      "id": 23836,
      "node_id": "MDQ6VXNlcjIzODM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmitryn",
      "html_url": "https://github.com/dmitryn",
      "followers_url": "https://api.github.com/users/dmitryn/followers",
      "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
      "organizations_url": "https://api.github.com/users/dmitryn/orgs",
      "repos_url": "https://api.github.com/users/dmitryn/repos",
      "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmitryn/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2017-12-12T18:13:51Z",
  "updated_at": "2018-03-29T02:00:16Z",
  "closed_at": "2017-12-22T16:28:14Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### User Story\r\n\r\nUser A enters public chat room X. User A goes offline and people keep chatting. When User A comes back they instantly see all the missed messages in X.\r\n\r\n### Description\r\n\r\n*Type*: Feature\r\n\r\n*Summary*: Add support for group chat\r\n\r\n#### Expected behavior\r\nUser A enters public chat room X. User A goes offline and people keep chatting. When User A comes back they instantly see all the missed messages in X.\r\n\r\n#### Actual behavior\r\nWhen User A they don't see all missed messages in X.\r\n\r\n### Solution\r\n*Summary*: \r\n\r\n- [x] Cherry-pick / use https://github.com/status-im/status-react/pull/2670 as starting point\r\n- [x] (Optional) Update to latest status-go develop artifact\r\n- [x] Ensure you can reproduce for 1on1 chat and see \"offline inbox\" logs\r\n- [x] Add filter for public chat with allowp2p under offline inbox flag\r\n- [x] Make a test protocol (see https://github.com/status-im/status-react/issues/2664) where success/fail is apparent depending on flag on or off\r\n- [x] If it isn't this straightforward, check logs with 'offline inbox' and begin to understand why / decompose into additional tasks\r\n\r\n### Additional Information\r\nCheck difference between public chat and group chat. AFAIK it should be same thing but might not be. Right now main capability is public chat.",
  "closed_by": {
    "login": "dmitryn",
    "id": 23836,
    "node_id": "MDQ6VXNlcjIzODM2",
    "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dmitryn",
    "html_url": "https://github.com/dmitryn",
    "followers_url": "https://api.github.com/users/dmitryn/followers",
    "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
    "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
    "organizations_url": "https://api.github.com/users/dmitryn/orgs",
    "repos_url": "https://api.github.com/users/dmitryn/repos",
    "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dmitryn/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/2701/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/351316400",
    "html_url": "https://github.com/status-im/status-mobile/issues/2701#issuecomment-351316400",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701",
    "id": 351316400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTMxNjQwMA==",
    "user": {
      "login": "dmitryn",
      "id": 23836,
      "node_id": "MDQ6VXNlcjIzODM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmitryn",
      "html_url": "https://github.com/dmitryn",
      "followers_url": "https://api.github.com/users/dmitryn/followers",
      "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
      "organizations_url": "https://api.github.com/users/dmitryn/orgs",
      "repos_url": "https://api.github.com/users/dmitryn/repos",
      "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmitryn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T08:17:14Z",
    "updated_at": "2017-12-18T18:43:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Testing how it works in group chats. It seems working well, the only thing i've noticed is the warning:\r\n```\r\n[warn][tid:com.facebook.react.JavaScript] WARN [status-im.protocol.web3.delivery:163] -\r\n :shh-post-error Error: invalid argument 0: \r\njson: cannot unmarshal non-string into Go value of type hexutil.Bytes \r\n{:sig \"0x04fce15dcb084db53453a1328a7cde44d2f7820009897ca268a0dc58059367ddc52bf85e8bf39fa5553c6b6a8537158415f57958f4d72ccbb06f18541b71b27986\", \r\n:topic \"0xaabb11ee\", \r\n:payload \"0x7b3a6d6573736167652d69642022313531333130373539323836382d37646438366130392d356337372d353836632d626332302d356131623363613630646631222c203a67726f75702d69642022313531333130373537393734312d66396434396264652d396137622d353561632d623430372d353062353133393834643331222c203a636f6e74656e7420227b5c2269765c223a5b2d3139333939323733362c3634373035323131312c2d323130373135313438342c2d3938343234313538355d2c5c22765c223a312c5c22697465725c223a313030302c5c226b735c223a3132382c5c2274735c223a36342c5c226d6f64655c223a5c2263636d5c222c5c2261646174615c223a5c225c222c5c226369706865725c223a5c226165735c222c5c2263745c223a5b2d313434393532303639302c2d323038353038373935312c3538373535343535315d2c5c227461675c223a5c223436333064393831316130343338303663383036346261363465356434623263353631633166306561333361323961666137393263643761346162366633613539303532316131616566383130306234613339373838643062316633666435393063636330336135376462326132336132396133636662356566666330626531346439313738663464386361653730363862303838363730323965366339323861313863376234656433323132306635313533383065366433643639386463305c227d222c203a757365726e616d65206e696c2c203a74797065203a67726f75702d6d6573736167652c203a73686f773f20747275652c203a636c6f636b2d76616c756520312c203a72657175697265732d61636b3f20747275652c203a636f6e74656e742d747970652022746578742f706c61696e222c203a74696d657374616d7020313531333130373539323930377d0a\", \r\n:pubKey nil, \r\n:ttl 60}\r\n```\r\n\r\nI get this immediately after sign in (with existing group chat  but with no new chat messages in it)\r\n\r\nUPD: notified @JekaMas about this warning",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/351316400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/351340515",
    "html_url": "https://github.com/status-im/status-mobile/issues/2701#issuecomment-351340515",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701",
    "id": 351340515,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTM0MDUxNQ==",
    "user": {
      "login": "dmitryn",
      "id": 23836,
      "node_id": "MDQ6VXNlcjIzODM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmitryn",
      "html_url": "https://github.com/dmitryn",
      "followers_url": "https://api.github.com/users/dmitryn/followers",
      "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
      "organizations_url": "https://api.github.com/users/dmitryn/orgs",
      "repos_url": "https://api.github.com/users/dmitryn/repos",
      "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmitryn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-13T09:54:26Z",
    "updated_at": "2017-12-13T12:50:50Z",
    "author_association": "CONTRIBUTOR",
    "body": ">(Optional) Update to latest status-go develop artifact\r\n\r\nThere is no artifactory build for https://github.com/status-im/status-go/commit/ba6c96532bfdfcc1bc95d5535d3d6b04ee7de49e yet, not sure i need to build it myself with `make statusgo`. Still good to use `feature-add-enode-to-requestMessages-params-g4509f423-41`\r\n\r\nUPD: not relevant, updated to latest develop build",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/351340515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/352499654",
    "html_url": "https://github.com/status-im/status-mobile/issues/2701#issuecomment-352499654",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701",
    "id": 352499654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjQ5OTY1NA==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-18T17:38:55Z",
    "updated_at": "2017-12-18T17:38:55Z",
    "author_association": "NONE",
    "body": "@dmitryn @oskarth #2701 is mixing terms \"public\" and \"group\" chats.\r\n\r\nSummary: Add support for group chat\r\nTitle: Offline inboxing iteration 1: Support public chat \r\n\r\nStatus app has public chats and has group chats. Do we address both types of chats or only one of them. If one then is it public chat or group chat?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/352499654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/352522529",
    "html_url": "https://github.com/status-im/status-mobile/issues/2701#issuecomment-352522529",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701",
    "id": 352522529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjUyMjUyOQ==",
    "user": {
      "login": "dmitryn",
      "id": 23836,
      "node_id": "MDQ6VXNlcjIzODM2",
      "avatar_url": "https://avatars.githubusercontent.com/u/23836?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dmitryn",
      "html_url": "https://github.com/dmitryn",
      "followers_url": "https://api.github.com/users/dmitryn/followers",
      "following_url": "https://api.github.com/users/dmitryn/following{/other_user}",
      "gists_url": "https://api.github.com/users/dmitryn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dmitryn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dmitryn/subscriptions",
      "organizations_url": "https://api.github.com/users/dmitryn/orgs",
      "repos_url": "https://api.github.com/users/dmitryn/repos",
      "events_url": "https://api.github.com/users/dmitryn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dmitryn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-18T18:50:46Z",
    "updated_at": "2017-12-18T18:50:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@annadanchenko we address both types of chats here. The reason behind mixing terms is that they work similar to each other from the dev standpoint.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/352522529/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/353034444",
    "html_url": "https://github.com/status-im/status-mobile/issues/2701#issuecomment-353034444",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/2701",
    "id": 353034444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzAzNDQ0NA==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-20T11:06:46Z",
    "updated_at": "2017-12-20T11:06:46Z",
    "author_association": "NONE",
    "body": "Tested OK (ios and Android real devices), for public and for group chats\r\n 1. when users are not in contact of each other 2. whey they are contacts 3. when several messages are sent 4. location command is sent, when emoji is sent 5. in group chat (same things as above) + send, request commands\r\n\r\nExtra notes:\r\n1. New user joins public chat -> will receive old messages (from all time he was not in the chat)\r\n2. Sometimes messages are received in the other order than were sent (older messages come after new messages)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/353034444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

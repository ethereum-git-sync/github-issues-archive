{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/15115",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/15115/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/15115/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/15115/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/15115",
  "id": 1589236040,
  "node_id": "I_kwDOAx4p2c5eudFI",
  "number": 15115,
  "title": "Edge cases with delete messages",
  "user": {
    "login": "VladimrLitvinenko",
    "id": 52490791,
    "node_id": "MDQ6VXNlcjUyNDkwNzkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/VladimrLitvinenko",
    "html_url": "https://github.com/VladimrLitvinenko",
    "followers_url": "https://api.github.com/users/VladimrLitvinenko/followers",
    "following_url": "https://api.github.com/users/VladimrLitvinenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/VladimrLitvinenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/VladimrLitvinenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/VladimrLitvinenko/subscriptions",
    "organizations_url": "https://api.github.com/users/VladimrLitvinenko/orgs",
    "repos_url": "https://api.github.com/users/VladimrLitvinenko/repos",
    "events_url": "https://api.github.com/users/VladimrLitvinenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/VladimrLitvinenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 517247180,
      "node_id": "MDU6TGFiZWw1MTcyNDcxODA=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/low-priority",
      "name": "low-priority",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "yqrashawn",
    "id": 15090582,
    "node_id": "MDQ6VXNlcjE1MDkwNTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/15090582?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yqrashawn",
    "html_url": "https://github.com/yqrashawn",
    "followers_url": "https://api.github.com/users/yqrashawn/followers",
    "following_url": "https://api.github.com/users/yqrashawn/following{/other_user}",
    "gists_url": "https://api.github.com/users/yqrashawn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yqrashawn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yqrashawn/subscriptions",
    "organizations_url": "https://api.github.com/users/yqrashawn/orgs",
    "repos_url": "https://api.github.com/users/yqrashawn/repos",
    "events_url": "https://api.github.com/users/yqrashawn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yqrashawn/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "yqrashawn",
      "id": 15090582,
      "node_id": "MDQ6VXNlcjE1MDkwNTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/15090582?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yqrashawn",
      "html_url": "https://github.com/yqrashawn",
      "followers_url": "https://api.github.com/users/yqrashawn/followers",
      "following_url": "https://api.github.com/users/yqrashawn/following{/other_user}",
      "gists_url": "https://api.github.com/users/yqrashawn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yqrashawn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yqrashawn/subscriptions",
      "organizations_url": "https://api.github.com/users/yqrashawn/orgs",
      "repos_url": "https://api.github.com/users/yqrashawn/repos",
      "events_url": "https://api.github.com/users/yqrashawn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yqrashawn/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/64",
    "html_url": "https://github.com/status-im/status-mobile/milestone/64",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/64/labels",
    "id": 9196002,
    "node_id": "MI_kwDOAx4p2c4AjFHi",
    "number": 64,
    "title": "1.23.0 - Alpha",
    "description": "\"This release should feature:\r\n\r\n- Onboarding:\r\n  Allow a user to restore their account using a seedphrase\r\n\r\n- Syncing\r\n  Allow a user to syncing/pair two unpaired devices\r\n\r\n- Communities\r\n  User facing token gating functionality\r\n\r\n- General polish:\r\n  further polish of messaging/communities/onboarding\"",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 49,
    "closed_issues": 23,
    "state": "open",
    "created_at": "2023-03-23T10:11:43Z",
    "updated_at": "2023-04-28T15:22:36Z",
    "due_on": "2023-05-22T07:00:00Z",
    "closed_at": null
  },
  "comments": 2,
  "created_at": "2023-02-17T11:48:36Z",
  "updated_at": "2023-03-31T10:42:54Z",
  "closed_at": "2023-03-31T10:42:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Follow up for https://github.com/status-im/status-mobile/issues/14489 , https://github.com/status-im/status-mobile/issues/14488\r\n\r\n## ISSUE 1: The '<User_B> deleted this message' instead of '<User_A> deleted this message' notif is shown if User_A removes the message of User_B by delete for me option\r\n**Steps to reproduce:**\r\n1. User_A and User_B go to any chat\r\n2. Send the message as User_B\r\n3. Remove the message as User_A by 'delete for me' the option\r\n\r\n**Actual result:**\r\nThe '<User_B> deleted this message' is shown for User_A\r\n\r\nhttps://user-images.githubusercontent.com/52490791/219643834-073ec9cc-e49e-4ccb-af6b-699a00bfc57a.mp4\r\n\r\n\r\n\r\n**Expected result:**\r\nThe '<User_A> deleted this message' is shown for User_A\r\n\r\n\r\n## ISSUE 2: The messages removed by 'delete for me' option are shown in the list of pinned\r\n**Preconditions:**\r\n- If this is a Community or Group chat, then User_A is admin and User_B is invited\r\n\r\n**Steps to reproduce**\r\n1. Go to any chat\r\n2. Send the message as User_B \r\n3. Remove the message by 'Delete for me' option\r\n4. Pin the message as User_A\r\n5. Open a list of Pinned messages as User_B\r\n6. Long tap on the message\r\n\r\n**Actual result:**\r\nMessage removed by 'delete for me' option is shown in the list of pinned\r\n\r\nhttps://user-images.githubusercontent.com/52490791/219643139-ce59bf53-bd43-4548-b26a-dca7a12fa70f.mp4\r\n\r\n\r\n\r\n**Expected result:**\r\nThe message is not appeared in the list of pinned if it is deleted by 'delete for me' option\r\n\r\n**ADDITIONAL INFO:**\r\nThe same steps are for 1-1 chat\r\n\r\n\r\n## ISSUE 3: The messages are not able to be unpinned by non-admin users if the current message is removed by 'remove for everyone' option in Group chat\r\n\r\n**Preconditions:**\r\n-  User_A is admin and User_B is invited\r\n\r\n**Steps to reproduce**\r\n1. Go to any chat\r\n2. Send the message as User_B \r\n3. Remove the message by 'Delete for everyone' option\r\n4. Pin the message as User_A\r\n5. Open a list of Pinned messages as User_B\r\n6. Long tap on the message\r\n\r\n**Actual result:**\r\nUnpin option is not shown for User_B\r\n\r\nhttps://user-images.githubusercontent.com/52490791/219645477-08244fc7-3096-462b-b9ac-efe8eec633ee.mp4\r\n\r\n\r\n**Expected result:**\r\nUnpin option is shown for User_B\r\n\r\nCC: @yqrashawn ",
  "closed_by": {
    "login": "VladimrLitvinenko",
    "id": 52490791,
    "node_id": "MDQ6VXNlcjUyNDkwNzkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/VladimrLitvinenko",
    "html_url": "https://github.com/VladimrLitvinenko",
    "followers_url": "https://api.github.com/users/VladimrLitvinenko/followers",
    "following_url": "https://api.github.com/users/VladimrLitvinenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/VladimrLitvinenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/VladimrLitvinenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/VladimrLitvinenko/subscriptions",
    "organizations_url": "https://api.github.com/users/VladimrLitvinenko/orgs",
    "repos_url": "https://api.github.com/users/VladimrLitvinenko/repos",
    "events_url": "https://api.github.com/users/VladimrLitvinenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/VladimrLitvinenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/15115/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/15115/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1441379740",
    "html_url": "https://github.com/status-im/status-mobile/issues/15115#issuecomment-1441379740",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15115",
    "id": 1441379740,
    "node_id": "IC_kwDOAx4p2c5V6bWc",
    "user": {
      "login": "yqrashawn",
      "id": 15090582,
      "node_id": "MDQ6VXNlcjE1MDkwNTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/15090582?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yqrashawn",
      "html_url": "https://github.com/yqrashawn",
      "followers_url": "https://api.github.com/users/yqrashawn/followers",
      "following_url": "https://api.github.com/users/yqrashawn/following{/other_user}",
      "gists_url": "https://api.github.com/users/yqrashawn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yqrashawn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yqrashawn/subscriptions",
      "organizations_url": "https://api.github.com/users/yqrashawn/orgs",
      "repos_url": "https://api.github.com/users/yqrashawn/repos",
      "events_url": "https://api.github.com/users/yqrashawn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yqrashawn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-23T08:39:31Z",
    "updated_at": "2023-02-23T08:39:31Z",
    "author_association": "MEMBER",
    "body": "@VladimrLitvinenko question about issue2 and issue3, is this related to https://github.com/status-im/status-mobile/issues/15112, which there are features for groups and communities that allow none admin user to unpin message\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1441379740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1441525448",
    "html_url": "https://github.com/status-im/status-mobile/issues/15115#issuecomment-1441525448",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/15115",
    "id": 1441525448,
    "node_id": "IC_kwDOAx4p2c5V6-7I",
    "user": {
      "login": "VladimrLitvinenko",
      "id": 52490791,
      "node_id": "MDQ6VXNlcjUyNDkwNzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/52490791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VladimrLitvinenko",
      "html_url": "https://github.com/VladimrLitvinenko",
      "followers_url": "https://api.github.com/users/VladimrLitvinenko/followers",
      "following_url": "https://api.github.com/users/VladimrLitvinenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/VladimrLitvinenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VladimrLitvinenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VladimrLitvinenko/subscriptions",
      "organizations_url": "https://api.github.com/users/VladimrLitvinenko/orgs",
      "repos_url": "https://api.github.com/users/VladimrLitvinenko/repos",
      "events_url": "https://api.github.com/users/VladimrLitvinenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VladimrLitvinenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-23T10:32:30Z",
    "updated_at": "2023-02-23T10:32:30Z",
    "author_association": "NONE",
    "body": "> @VladimrLitvinenko question about issue2 and issue3, is this related to #15112, which there are features for groups and communities that allow none admin user to unpin message\r\n\r\n@yqrashawn Oh, yes, you are right. And this is the problem with group chats. It may be better to discuss this with the design team. \r\n**Because can be a case:**\r\n1. UserB (Non-admin) sends the message in group chat\r\n2. UserA (Admin) pins the message\r\n3. UserA removes this message by 'delete for everyone' option\r\n4. UserA clear history in the group chat\r\n\r\n**Actua result:**\r\nUserB sees pinned deleted message forever without the ability to unpin and the Admin user is also not able to unpin it because this message no exist for him anymore after history clearing\r\n\r\n**Expected result**\r\nI would suggest removing this message from a list of pinned in the group chat. But let me ask someone from design team",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1441525448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/8373",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/8373/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/8373/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/8373/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/8373",
  "id": 453159658,
  "node_id": "MDU6SXNzdWU0NTMxNTk2NTg=",
  "number": 8373,
  "title": "Adding dependency causes Status to get stuck in logo",
  "user": {
    "login": "e18r",
    "id": 16065447,
    "node_id": "MDQ6VXNlcjE2MDY1NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/16065447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/e18r",
    "html_url": "https://github.com/e18r",
    "followers_url": "https://api.github.com/users/e18r/followers",
    "following_url": "https://api.github.com/users/e18r/following{/other_user}",
    "gists_url": "https://api.github.com/users/e18r/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/e18r/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/e18r/subscriptions",
    "organizations_url": "https://api.github.com/users/e18r/orgs",
    "repos_url": "https://api.github.com/users/e18r/repos",
    "events_url": "https://api.github.com/users/e18r/events{/privacy}",
    "received_events_url": "https://api.github.com/users/e18r/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-06-06T17:47:46Z",
  "updated_at": "2019-06-12T11:34:18Z",
  "closed_at": "2019-06-12T11:34:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### User Story\r\n\r\nAs a developer, I want to include the [unfurl](https://github.com/e18r/unfurl) library in the Status codebase, in order to address issue #4606.\r\n\r\n### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: When I `:require` the [unfurl](https://github.com/e18r/unfurl) library in my code, the development app is launched, but it gets stuck on the logo forever. I imported that library in an [example project](https://github.com/e18r/test-project) successfully.\r\n\r\n#### Expected behavior\r\n![status2](https://user-images.githubusercontent.com/16065447/59049662-1c971200-884e-11e9-93f9-26a037d6252e.jpg)\r\nLast line of `make react-native-android`:\r\n\r\n    ::ffff:127.0.0.1 - - [06/Jun/2019:17:25:13 +0000] \"GET /target/android/env/android/main.js HTTP/1.1\" 304 - \"-\" \"okhttp/3.12.1\"\r\n\r\n#### Actual behavior\r\n![status1](https://user-images.githubusercontent.com/16065447/59049715-405a5800-884e-11e9-8bd1-82a74826f7a3.jpg)\r\nLast line of `make react-native-android`:\r\n\r\n    ::ffff:127.0.0.1 - - [06/Jun/2019:17:02:54 +0000] \"GET /target/android/hickory/core.js HTTP/1.1\" 304 - \"-\" \"okhttp/3.12.1\"\r\n\r\n### Reproduction\r\n[comment]: # (Describe how we can replicate the bug step by step.)\r\n\r\n- `git clone https://github.com/e18r/status-react -b fix-#4606`\r\n- `git checkout 1a354b705`. In this commit, I added the dependency, but didn't require it in my code yet.\r\n- Connect phone, run `adb start-server` and make sure it appears in `adb devices`. Run `adb reverse tcp:3449 tcp:3449`.\r\n- Run `make start-dev-android-real`, `make react-native-android`, and `make run-android`\r\n- Wait until everything is executed\r\n- The app is launched correctly on the phone: ![status2](https://user-images.githubusercontent.com/16065447/59049662-1c971200-884e-11e9-93f9-26a037d6252e.jpg)\r\n- Stop everything and `git checkout fix-#4606`. In this commit, I `:require` the dependency in my code.\r\n- `make clean`\r\n- Run the commands again\r\n- The app is launched on the phone, but it gets stuck on the logo: \r\n![status1](https://user-images.githubusercontent.com/16065447/59049715-405a5800-884e-11e9-8bd1-82a74826f7a3.jpg)\r\n\r\n### Additional Information\r\n* Status version: commit 04de022ea, Sun Jun 2 14:10:46 2019 +0200\r\n* Operating System: Android\r\n\r\n#### Logs\r\nNote: `adb logcat` seems to give too much unrelated information that could be confidential. Please let me know if you need that log.\r\n\r\n##### WORKING #####\r\n[startdev-android-real](https://pastebin.com/wfzfFidN)\r\n[react-native-android](https://pastebin.com/scRadBRd)\r\n[run-android](https://pastebin.com/mgk02cCN)\r\n\r\n##### NOT WORKING #####\r\n[startdev-android-real](https://pastebin.com/e03zfDCt)\r\n[react-native-android](https://pastebin.com/PCzUknbR)\r\n[run-android](https://pastebin.com/071sTA2r)",
  "closed_by": {
    "login": "e18r",
    "id": 16065447,
    "node_id": "MDQ6VXNlcjE2MDY1NDQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/16065447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/e18r",
    "html_url": "https://github.com/e18r",
    "followers_url": "https://api.github.com/users/e18r/followers",
    "following_url": "https://api.github.com/users/e18r/following{/other_user}",
    "gists_url": "https://api.github.com/users/e18r/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/e18r/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/e18r/subscriptions",
    "organizations_url": "https://api.github.com/users/e18r/orgs",
    "repos_url": "https://api.github.com/users/e18r/repos",
    "events_url": "https://api.github.com/users/e18r/events{/privacy}",
    "received_events_url": "https://api.github.com/users/e18r/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/8373/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/8373/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/499823862",
    "html_url": "https://github.com/status-im/status-mobile/issues/8373#issuecomment-499823862",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8373",
    "id": 499823862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTgyMzg2Mg==",
    "user": {
      "login": "pedropombeiro",
      "id": 138074,
      "node_id": "MDQ6VXNlcjEzODA3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/138074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pedropombeiro",
      "html_url": "https://github.com/pedropombeiro",
      "followers_url": "https://api.github.com/users/pedropombeiro/followers",
      "following_url": "https://api.github.com/users/pedropombeiro/following{/other_user}",
      "gists_url": "https://api.github.com/users/pedropombeiro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pedropombeiro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pedropombeiro/subscriptions",
      "organizations_url": "https://api.github.com/users/pedropombeiro/orgs",
      "repos_url": "https://api.github.com/users/pedropombeiro/repos",
      "events_url": "https://api.github.com/users/pedropombeiro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pedropombeiro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-07T09:41:41Z",
    "updated_at": "2019-06-07T09:41:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I do see this in adb logcat:\r\n```\r\n06-07 11:29:24.949  1932  1973 I ReactNativeJS: Requiring: react-native-keychain\r\n06-07 11:29:27.209  1932  1973 I ReactNativeJS: Requiring: react-native-camera\r\n06-07 11:29:30.735  1932  1973 W ReactNativeJS: Possible Unhandled Promise Rejection (id: 0):\r\n06-07 11:29:30.735  1932  1973 W ReactNativeJS: ReferenceError: Can't find variable: Node\r\n06-07 11:29:30.735  1932  1973 W ReactNativeJS: hickory$core$node_type\r\n06-07 11:29:30.735  1932  1973 W ReactNativeJS: eval code\r\n06-07 11:29:30.735  1932  1973 W ReactNativeJS: eval@[native code]\r\n06-07 11:29:30.735  1932  1973 W ReactNativeJS: asyncImportScripts$@http://10.0.3.2:8081/index.android.delta?platform=android&dev=true&minify=false:206670:21\r\n```\r\n\r\nI'm assuming it's referring to\r\n``` javascript\r\nreturn (Node[[cljs.core.str.cljs$core$IFn$_invoke$arity$1(type),\"_NODE\"].join('')]);\r\n```\r\nin line 81 of `target/android/hickory/core.js`\r\n\r\nmaybe this is relevant? https://github.com/davidsantiago/hickory/issues/17#issuecomment-168378641\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/499823862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/499843603",
    "html_url": "https://github.com/status-im/status-mobile/issues/8373#issuecomment-499843603",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/8373",
    "id": 499843603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTg0MzYwMw==",
    "user": {
      "login": "e18r",
      "id": 16065447,
      "node_id": "MDQ6VXNlcjE2MDY1NDQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/16065447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e18r",
      "html_url": "https://github.com/e18r",
      "followers_url": "https://api.github.com/users/e18r/followers",
      "following_url": "https://api.github.com/users/e18r/following{/other_user}",
      "gists_url": "https://api.github.com/users/e18r/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e18r/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e18r/subscriptions",
      "organizations_url": "https://api.github.com/users/e18r/orgs",
      "repos_url": "https://api.github.com/users/e18r/repos",
      "events_url": "https://api.github.com/users/e18r/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e18r/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-07T10:57:52Z",
    "updated_at": "2019-06-07T10:57:52Z",
    "author_association": "NONE",
    "body": "Thank you for your help, @PombeirP. It's probably very relevant, will look into that.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/499843603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

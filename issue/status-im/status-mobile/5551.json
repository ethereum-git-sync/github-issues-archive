{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/5551",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/5551",
  "id": 351766360,
  "node_id": "MDU6SXNzdWUzNTE3NjYzNjA=",
  "number": 5551,
  "title": "Deleted chat does not re-appear with new messages for logged out user",
  "user": {
    "login": "ankaqwerty",
    "id": 42421835,
    "node_id": "MDQ6VXNlcjQyNDIxODM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/42421835?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ankaqwerty",
    "html_url": "https://github.com/ankaqwerty",
    "followers_url": "https://api.github.com/users/ankaqwerty/followers",
    "following_url": "https://api.github.com/users/ankaqwerty/following{/other_user}",
    "gists_url": "https://api.github.com/users/ankaqwerty/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ankaqwerty/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ankaqwerty/subscriptions",
    "organizations_url": "https://api.github.com/users/ankaqwerty/orgs",
    "repos_url": "https://api.github.com/users/ankaqwerty/repos",
    "events_url": "https://api.github.com/users/ankaqwerty/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ankaqwerty/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "lukaszfryc",
    "id": 7532782,
    "node_id": "MDQ6VXNlcjc1MzI3ODI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lukaszfryc",
    "html_url": "https://github.com/lukaszfryc",
    "followers_url": "https://api.github.com/users/lukaszfryc/followers",
    "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
    "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
    "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
    "repos_url": "https://api.github.com/users/lukaszfryc/repos",
    "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "lukaszfryc",
      "id": 7532782,
      "node_id": "MDQ6VXNlcjc1MzI3ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaszfryc",
      "html_url": "https://github.com/lukaszfryc",
      "followers_url": "https://api.github.com/users/lukaszfryc/followers",
      "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
      "repos_url": "https://api.github.com/users/lukaszfryc/repos",
      "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-08-17T23:24:41Z",
  "updated_at": "2018-10-05T13:50:01Z",
  "closed_at": "2018-10-05T13:50:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: _Bug_\r\n\r\n*Summary*: \r\n\r\nWhen user deletes the chat and logs out, he receives push notifications that lead to nothing. \r\nGeneral issue is that if user is logged out, his deleted chat does not re-appear if the messages were received while he was logged out.\r\nNote: When user is logged in, the behaviour is expected and chat does re-appear with new messages in it.\r\n\r\n#### Expected behavior\r\nUser is redirected to Home page with a chat that re-appears with new messages in it\r\n\r\n#### Actual behavior\r\nUser is redirected to Home page with no chat \r\n\r\n### Reproduction\r\n\r\n- Open pre-existing 1-1 chat between users A and B\r\n- Delete chat as user A\r\n- Log out or close the app\r\n- Send a message as user B in the same chat \r\n- Wait for the push notification to appear, and click on it\r\n\r\n### Additional Information\r\n\r\n* Status version: 0.9.25 (6360) node bccee2a\r\n\r\nOperating System: Genymotion emulator Samsung Galaxy S6/Android 7.1.0\r\nReal device:\r\nLenovo TAB-8703X/Android 6.0.1",
  "closed_by": {
    "login": "SlizkovaGanna",
    "id": 43638377,
    "node_id": "MDQ6VXNlcjQzNjM4Mzc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/43638377?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SlizkovaGanna",
    "html_url": "https://github.com/SlizkovaGanna",
    "followers_url": "https://api.github.com/users/SlizkovaGanna/followers",
    "following_url": "https://api.github.com/users/SlizkovaGanna/following{/other_user}",
    "gists_url": "https://api.github.com/users/SlizkovaGanna/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SlizkovaGanna/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SlizkovaGanna/subscriptions",
    "organizations_url": "https://api.github.com/users/SlizkovaGanna/orgs",
    "repos_url": "https://api.github.com/users/SlizkovaGanna/repos",
    "events_url": "https://api.github.com/users/SlizkovaGanna/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SlizkovaGanna/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/5551/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/414307842",
    "html_url": "https://github.com/status-im/status-mobile/issues/5551#issuecomment-414307842",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551",
    "id": 414307842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDMwNzg0Mg==",
    "user": {
      "login": "lukaszfryc",
      "id": 7532782,
      "node_id": "MDQ6VXNlcjc1MzI3ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaszfryc",
      "html_url": "https://github.com/lukaszfryc",
      "followers_url": "https://api.github.com/users/lukaszfryc/followers",
      "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
      "repos_url": "https://api.github.com/users/lukaszfryc/repos",
      "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-20T12:59:32Z",
    "updated_at": "2018-08-20T12:59:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @ankaqwerty, thanks for the issue. Here is how it works on my side (tested on Android, Status 0.9.25)\r\n\r\n> General issue is that if user is logged out, his deleted chat does not re-appear if the messages were received while he was logged out.\r\n\r\nWhen I log out, receive a notification, open the app and log in again I see the chat with 1 unread message. And, this is what I expect to see.\r\n\r\n\r\n> Note: When user is logged in, the behaviour is expected and chat does re-appear with new messages in it.\r\n\r\nActually, the chat **should** re-appear when new message is received.\r\n\r\n---\r\n\r\nMaybe these issues were due to mailservers unavilability, did you see some warnings about mailservers being offline? Could you try those scenarions once again?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/414307842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/414713755",
    "html_url": "https://github.com/status-im/status-mobile/issues/5551#issuecomment-414713755",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551",
    "id": 414713755,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDcxMzc1NQ==",
    "user": {
      "login": "ankaqwerty",
      "id": 42421835,
      "node_id": "MDQ6VXNlcjQyNDIxODM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/42421835?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ankaqwerty",
      "html_url": "https://github.com/ankaqwerty",
      "followers_url": "https://api.github.com/users/ankaqwerty/followers",
      "following_url": "https://api.github.com/users/ankaqwerty/following{/other_user}",
      "gists_url": "https://api.github.com/users/ankaqwerty/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ankaqwerty/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ankaqwerty/subscriptions",
      "organizations_url": "https://api.github.com/users/ankaqwerty/orgs",
      "repos_url": "https://api.github.com/users/ankaqwerty/repos",
      "events_url": "https://api.github.com/users/ankaqwerty/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ankaqwerty/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-21T15:22:16Z",
    "updated_at": "2018-08-21T15:22:16Z",
    "author_association": "NONE",
    "body": "Hi, @lukaszfryc !\r\n\r\nThere were no messages about mailservers unavailability.\r\nThe steps that should be followed are:\r\n1) Create a 1-1 chat between users A and B\r\n2) Delete that chat by user A\r\n3) Log out as a user A\r\n4) Send a message in the chat as user B\r\n5) Login as user A and check that your chat has re-appeared with a message.\r\nThe current result is that the chat does **not** re-appear\r\n\r\nThis is Status version: 0.9.25 (6360) node bccee2a (release)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/414713755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/427371114",
    "html_url": "https://github.com/status-im/status-mobile/issues/5551#issuecomment-427371114",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/5551",
    "id": 427371114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNzM3MTExNA==",
    "user": {
      "login": "SlizkovaGanna",
      "id": 43638377,
      "node_id": "MDQ6VXNlcjQzNjM4Mzc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/43638377?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SlizkovaGanna",
      "html_url": "https://github.com/SlizkovaGanna",
      "followers_url": "https://api.github.com/users/SlizkovaGanna/followers",
      "following_url": "https://api.github.com/users/SlizkovaGanna/following{/other_user}",
      "gists_url": "https://api.github.com/users/SlizkovaGanna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SlizkovaGanna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SlizkovaGanna/subscriptions",
      "organizations_url": "https://api.github.com/users/SlizkovaGanna/orgs",
      "repos_url": "https://api.github.com/users/SlizkovaGanna/repos",
      "events_url": "https://api.github.com/users/SlizkovaGanna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SlizkovaGanna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-05T13:45:19Z",
    "updated_at": "2018-10-05T13:45:19Z",
    "author_association": "NONE",
    "body": "Re-tested with a nightly build (5 Oct 2018) on iOS 11.4.1 and Android 7.0 - issue no longer reproduces",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/427371114/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

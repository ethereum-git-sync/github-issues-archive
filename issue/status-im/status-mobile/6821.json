{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6821",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6821/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6821/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6821/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6821",
  "id": 383028538,
  "node_id": "MDU6SXNzdWUzODMwMjg1Mzg=",
  "number": 6821,
  "title": "Crash when going offline and logging out",
  "user": {
    "login": "lukaszfryc",
    "id": 7532782,
    "node_id": "MDQ6VXNlcjc1MzI3ODI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lukaszfryc",
    "html_url": "https://github.com/lukaszfryc",
    "followers_url": "https://api.github.com/users/lukaszfryc/followers",
    "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
    "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
    "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
    "repos_url": "https://api.github.com/users/lukaszfryc/repos",
    "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 946691481,
      "node_id": "MDU6TGFiZWw5NDY2OTE0ODE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/mobile-app",
      "name": "mobile-app",
      "color": "f4e949",
      "default": false,
      "description": ""
    },
    {
      "id": 955294273,
      "node_id": "MDU6TGFiZWw5NTUyOTQyNzM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/medium-severity",
      "name": "medium-severity",
      "color": "e884a7",
      "default": false,
      "description": ""
    },
    {
      "id": 1067655928,
      "node_id": "MDU6TGFiZWwxMDY3NjU1OTI4",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/stale",
      "name": "stale",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-11-21T09:31:51Z",
  "updated_at": "2019-02-26T09:38:59Z",
  "closed_at": "2019-02-26T09:38:59Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: Sometimes the app crashes when network connection has changed and user is trying to log out. E.g. the device went online->offline and after that, user is trying to log out. I could reproduce the same for offline->online scenario.\r\n\r\n### Reproduction\r\n\r\n- Be online\r\n- Create new account\r\n- Log out\r\n- Log in again\r\n- Go offline\r\n- Try to log out\r\n\r\n### Additional Information\r\n* Status version: nightly, Nov 21\r\n* Operating System: tested only iOS\r\n\r\n### iOS logs\r\n**Crash log**\r\n[StatusIm 21-11-2018.txt](https://github.com/status-im/status-react/files/2603603/StatusIm.21-11-2018.txt)\r\n\r\n\r\n**Console logs:**\r\n```\r\ndefault\t10:23:50.154231 +0100\tStatusIm\tDEBUG [status-im.utils.handlers:34] - Handling re-frame event:  :signals/signal-received\r\ndefault\t10:23:50.156025 +0100\tStatusIm\tDEBUG [status-im.events:698] - :event-str {\"type\":\"discovery.summary\",\"event\":[{\"id\":\"0440117a5bc67c2908fad94ba29c7b7f2c1536e96a9df950f3265a9566bf3a7306ea8ab5a1f9794a0a641dcb1e4951ce7c093c61c0d255f4ed5d2ed02c8fce23\",\"name\":\"Statusd/v0.16.8/linux-amd64/go1.10.2\",\"caps\":[\"shh/6\"],\"network\":{\"localAddress\":\"192.168.0.101:51001\",\"remoteAddress\":\"35.224.15.65:30305\",\"inbound\":false,\"trusted\":false,\"static\":true},\"protocols\":{\"shh\":\"unknown\"}},{\"id\":\"69c89c2b3b69d6e24b40b32f98eb5d32ea59c39306a8240c7d6bcf1a687de646e32cc3a1aefd0c974faa02cf04119a174cb05febbd12cdd6b497c9900959b976\",\"name\":\"Statusd/v0.16.8/linux-amd64/go1.10.2\",\"caps\":[\"shh/6\"],\"network\":{\"localAddress\":\"192.168.0.101:51005\",\"remoteAddress\":\"167.99.18.187:30304\",\"inbound\":false,\"trusted\":false,\"static\":true},\"protocols\":{\"shh\":\"unknown\"}},{\"id\":\"7c80e37f324bbc767d890e6381854ef9985d33940285413311e8b5927bf47702afa40cd5d34be9aa6183ac467009b9545e24b0d0bc54ef2b773547bb8c274192\",\"name\":\"Statusd/v0.16.8/linux-amd64/go1.10.2\",\"caps\":[\"shh/6\"],\"network\"<…>\r\ndefault\t10:23:50.248072 +0100\tStatusIm\tStopNode result {\"error\":\"\"}\r\ndefault\t10:23:50.248351 +0100\tStatusIm\t-[LAClient evaluatePolicy:options:uiDelegate:reply:]_block_invoke -> (null), Error Domain=com.apple.LocalAuthentication Code=-1004 \"User interaction is required.\" UserInfo={FingerDatabaseHash=<fadb6b58 568e9e74 70a2e18e 784016d8 8adceb50 0ff25659 f9823e50 5aeb8ebf>, BiometryType=1, AvailableMechanisms=(\r\n    1,\r\n    2\r\n), NSLocalizedDescription=User interaction is required.} on <private>\r\ndefault\t10:23:50.248471 +0100\tStatusIm\t-[LAContext canEvaluatePolicy:error:]_block_invoke -> YES on <private>\r\ndefault\t10:23:50.248530 +0100\tStatusIm\t-[LAContext dealloc]  on <private>\r\ndefault\t10:23:50.250682 +0100\tStatusIm\tDEBUG [status-im.utils.handlers:34] - Handling re-frame event:  :keychain.callback/can-save-user-password?-success\r\ndefault\t10:23:50.252921 +0100\tStatusIm\tDEBUG [status-im.utils.handlers:34] - Handling re-frame event:  :accounts.login.callback/get-user-password-success\r\ndefault\t10:23:50.254058 +0100\tStatusIm\tDEBUG [status-im.ui.screens.navigation:19] - current view-id  :login changing to  :login\r\ndefault\t10:23:50.255081 +0100\tStatusIm\tDEBUG [status-im.ui.screens.navigation:98] - :navigate-to-clean :login\r\ndefault\t10:23:50.273723 +0100\tStatusIm\tDEBUG [status-im.ui.screens.views:83] - :on-will-focus :login\r\ndefault\t10:23:50.281577 +0100\tassertiond\t[StatusIm:452] Setting jetsam priority to 3 [0x108]\r\nerror\t10:23:50.282022 +0100\tassertiond\t[StatusIm:452] SyscallError: setpriority(PRIO_DARWIN_ROLE, 452, 3): No such process\r\ndefault\t10:23:50.282170 +0100\tassertiond\tClient relinquished <BKProcessAssertion: 0x147e20880; \"Shared Background Assertion 56 for im.status.ethereum\" (finishTask:180s); id:…84B03207CD61>\r\ndefault\t10:23:50.282943 +0100\tassertiond\t[StatusIm:452] Deactivate assertion: <BKProcessAssertion: 0x147e20880; \"Shared Background Assertion 56 for im.status.ethereum\" (finishTask:180s); id:…84B03207CD61>\r\ndefault\t10:23:50.283130 +0100\tassertiond\t[StatusIm:452] New process assertion state; preventSuspend, preventThrottleDownUI, preventThrottleDownCPU, preventSuspendOnSleep (assertion 0x147e20880 added: (none); removed: preventIdleSleep)\r\ndefault\t10:23:50.283696 +0100\tassertiond\tReleasing PowerAssertion on StatusIm:452 from update\r\ndefault\t10:23:50.283952 +0100\tassertiond\t[StatusIm:452] Remove assertion: <BKProcessAssertion: 0x147e20880; \"Shared Background Assertion 56 for im.status.ethereum\" (finishTask:180s); id:…84B03207CD61>\r\ndefault\t10:23:50.284392 +0100\tassertiond\t[StatusIm:452] Deactivate assertion: <BKProcessAssertion: 0x1488325f0; \"systemAnimationFence\" (finishTask:180s); id:…379BFE50F496>\r\ndefault\t10:23:50.284654 +0100\tassertiond\t[StatusIm:452] Setting jetsam priority to 3 [0x100]\r\ndefault\t10:23:50.284940 +0100\tassertiond\t[StatusIm:452] Remove assertion: <BKProcessAssertion: 0x1488325f0; \"systemAnimationFence\" (finishTask:180s); id:…379BFE50F496>\r\ndefault\t10:23:50.286554 +0100\tmediaserverd\t105: { \"action\":\"client_died\", \"session\":{\"ID\":\"0x1a2a1\",\"PID\":452,\"name\":\"StatusIm\"}, \"details\":null }\r\ndefault\t10:23:50.287461 +0100\tpowerd\tProcess assertiond.69 Released SystemIsActive \"StatusIm:452:452-DD29295E-80BF-4F20-AE49-84B03207CD61 [Shared Background Assertion 56 for im.status.ethereum] [0x147e20880]\" age:00:00:17  id:51539643909 [System: PrevIdle SysAct]\r\ndefault\t10:23:50.345747 +0100\tSpringBoard\tWIFI PICKER [im.status.ethereum]: isProcessLaunch: 0,    isForegroundActivation: 0,     isForegroundDeactivation: 1\r\nerror\t10:23:50.347581 +0100\tsymptomsd\tCan't get most elevated app state from dictionary {\r\n    BKSApplicationStateExtensionKey = 0;\r\n    SBApplicationStateDisplayIDKey = \"im.status.ethereum\";\r\n    SBApplicationStateKey = 0;\r\n    SBApplicationStateProcessIDKey = 452;\r\n    SBApplicationStateRunningReasonsKey =     (\r\n                {\r\n            SBApplicationStateRunningReasonAssertionIdentifierKey = Resume;\r\n            SBApplicationStateRunningReasonAssertionReasonKey = 10000;\r\n        }\r\n    );\r\n}\r\ndefault\t10:23:50.347637 +0100\tsymptomsd\t452 im.status.ethereum: Unknown (most elevated: Unknown)\r\ndefault\t10:23:50.348763 +0100\tsymptomsd\tEntry, display name im.status.ethereum uuid (null) pid 452 isFront 0\r\ndefault\t10:23:50.348983 +0100\tsymptomsd\tContinue with bundle name im.status.ethereum, is front 0\r\ndefault\t10:23:50.349150 +0100\tsymptomsd\tim.status.ethereum: Foreground: false\r\ndefault\t10:23:50.460898 +0100\tReportCrash\tFormulating report for corpse[452] StatusIm\r\nerror\t10:23:50.461010 +0100\tnsurlsessiond\tTIC Read Status [131:0x0]: 1:57\r\nerror\t10:23:50.461066 +0100\tnsurlsessiond\tTIC Read Status [131:0x0]: 1:57\r\ndefault\t10:23:50.550100 +0100\tReportCrash\tSaved type '109(<private>)' report (3 of max 25) at /var/mobile/Library/Logs/CrashReporter/StatusIm-2018-11-21-102350.ips\r\ndefault\t10:23:50.710563 +0100\tassertiond\t[StatusIm:452] Port death watcher fired.\r\ndefault\t10:23:50.712677 +0100\tassertiond\t[StatusIm:452] Ignoring assertion remove, because we are terminated or pending termination\r\ndefault\t10:23:50.713126 +0100\tassertiond\tProcess exited: <BKProcess: 0x148a0fd30; StatusIm; im.status.ethereum; pid: 452; agency: Application; visibility: none; task: none; hostpid: 55>\r\ndefault\t10:23:50.713205 +0100\tassertiond\t[StatusIm:452] Invalidating...\r\ndefault\t10:23:50.730834 +0100\tnsurlsessiond\tCurrent discretionary status for com.apple.coreduetd is non-discretionary\r\ndefault\t10:23:50.733704 +0100\tnsurlsessiond\tTask <C6732414-642F-497D-B41E-64443750FAF1>.<2> initialized appleIDAuthenticator, status codes = <private>\r\ndefault\t10:23:50.896505 +0100\tassertiond\t[StatusIm:452] Got exit context: <BKSProcessExitContext: 0x147e23d50; reason: crash>\r\ndefault\t10:23:50.897712 +0100\tSpringBoard\t<FBApplicationProcess: 0x10f246940; StatusIm (im.status.ethereum); pid: 452> assertiond says the process actually exited with context: <BKSProcessExitContext: 0x2814df2b0; reason: crash>\r\ndefault\t10:23:50.897918 +0100\tSpringBoard\t<FBApplicationProcess: 0x10f246940; StatusIm (im.status.ethereum); pid: 452> crashed.\r\n```\r\n",
  "closed_by": {
    "login": "status-github-bot[bot]",
    "id": 35452227,
    "node_id": "MDM6Qm90MzU0NTIyMjc=",
    "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
    "html_url": "https://github.com/apps/status-github-bot",
    "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6821/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6821/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/465057271",
    "html_url": "https://github.com/status-im/status-mobile/issues/6821#issuecomment-465057271",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6821",
    "id": 465057271,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTA1NzI3MQ==",
    "user": {
      "login": "status-github-bot[bot]",
      "id": 35452227,
      "node_id": "MDM6Qm90MzU0NTIyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
      "html_url": "https://github.com/apps/status-github-bot",
      "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-02-19T09:34:34Z",
    "updated_at": "2019-02-19T09:34:34Z",
    "author_association": "NONE",
    "body": "This issue has been automatically marked as stale because it has not had recent activity. It will be closed if no further activity occurs. Thank you for your contributions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/465057271/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/467367840",
    "html_url": "https://github.com/status-im/status-mobile/issues/6821#issuecomment-467367840",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6821",
    "id": 467367840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzM2Nzg0MA==",
    "user": {
      "login": "status-github-bot[bot]",
      "id": 35452227,
      "node_id": "MDM6Qm90MzU0NTIyMjc=",
      "avatar_url": "https://avatars.githubusercontent.com/in/8157?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/status-github-bot%5Bbot%5D",
      "html_url": "https://github.com/apps/status-github-bot",
      "followers_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/status-github-bot%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-02-26T09:38:59Z",
    "updated_at": "2019-02-26T09:38:59Z",
    "author_association": "NONE",
    "body": "This issue has been automatically closed. Please re-open if this issue is important to you.\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/467367840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/1659",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/1659/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/1659/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/1659/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/1659",
  "id": 251694180,
  "node_id": "MDU6SXNzdWUyNTE2OTQxODA=",
  "number": 1659,
  "title": "If user deletes group chat then no new messages sent there are shown to the user",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 517247123,
      "node_id": "MDU6TGFiZWw1MTcyNDcxMjM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/medium-priority",
      "name": "medium-priority",
      "color": "c5c5c5",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-08-21T15:29:05Z",
  "updated_at": "2018-04-20T15:11:24Z",
  "closed_at": "2018-04-20T15:11:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: User A deleted group chat X from Chats. User didn't leave the chat. After another group member sent new message to group chat X there is new empty chat with random name shown for user A. \r\nIssues:\r\n1. this new chat does not contains any messages. No messages are shown even after other members are sending messages to the chat.\r\n2. it's not clear that this is group chat: if tap on the avatar then options Profile/search chat/Notifications and sounds are shown as it's 1-1 chat. For group chat there would be Members/Settings/etc...\r\n3. this new chat has only @browse command (no location, send, request commands are shown)\r\n4. after user A re-launches the app this new chat is no longer shown\r\nSo, user A deletes group chat and has no option to get it again, as no new messages sent to the group chat are shown to this user.\r\n\r\nExpected: because user A didn't leave the group chat \r\n1 this group chat should be shown again in the Chats after user B sends new message to this group chat.\r\n2. after user A launches the app, group chat X is shown in the Chats (if any new messages were sent after user A deleted the chat)\r\n\r\n#### Expected behavior\r\nuser A deletes group chat than user B send new message to the group chat. As a result, user A should get same group chat shown in Chats with only new message from user B.\r\n\r\n#### Actual behavior\r\n1. this new chat does not contains any messages. No messages are shown even after other members are sending messages to the chat.\r\n2. it's not clear that this is group chat: if tap on the avatar then options Profile/search chat/Notifications and sounds are shown as it's 1-1 chat. For group chat there would be Members/Settings/etc...\r\n3. this new chat has only @browse command (no location, send, request commands are shown)\r\n4. after user A re-launches the app this new chat is no longer shown\r\n\r\n### Reproduction\r\n\r\nAs user B:\r\n- add user A as a contact\r\n- create group chat X with user A\r\n- send text message to user A in the group chat X\r\n\r\nAs user A:\r\n- check that you see new group chat X with message from B\r\n- delete group chat X in Chats: tap on 3 dots in top right corner, select Edit, tap on 3 dots next to group chat X and select Delete chat\r\n- check all chats you have now in Chats (because issue will be with extra empty chat created)\r\n\r\nAs user B:\r\n- after user A deleted group chat X: send new text message to the group chat X\r\n\r\nAs user A:\r\n- after user B sent new text message check that there is extra empty chat in Chats created with random 3 words name\r\n- Open empty chat, check its commands\r\n\r\n- As user B send 2-3 more messages to group chat X\r\n- As user A: check that empty chat has no messages, check that no other new group chats are created/shown\r\n\r\nAs user A: \r\n- close app\r\n- open app and sign in\r\n- check that empty chat is no longer shown\r\n\r\n### Additional Information\r\n* Status version: released 0.9.10 and develop 0.9.10-22-g92f3f9a4+\r\n* Operating System: \r\nReal device Samsung Galaxy S6, Android 6.0.1\r\nReal device iPhone 6s, iOS 10.3.3\r\n",
  "closed_by": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/1659/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/1659/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/356110437",
    "html_url": "https://github.com/status-im/status-mobile/issues/1659#issuecomment-356110437",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/1659",
    "id": 356110437,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjExMDQzNw==",
    "user": {
      "login": "lukaszfryc",
      "id": 7532782,
      "node_id": "MDQ6VXNlcjc1MzI3ODI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7532782?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lukaszfryc",
      "html_url": "https://github.com/lukaszfryc",
      "followers_url": "https://api.github.com/users/lukaszfryc/followers",
      "following_url": "https://api.github.com/users/lukaszfryc/following{/other_user}",
      "gists_url": "https://api.github.com/users/lukaszfryc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lukaszfryc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lukaszfryc/subscriptions",
      "organizations_url": "https://api.github.com/users/lukaszfryc/orgs",
      "repos_url": "https://api.github.com/users/lukaszfryc/repos",
      "events_url": "https://api.github.com/users/lukaszfryc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lukaszfryc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T22:01:00Z",
    "updated_at": "2018-01-08T22:01:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've retested it on 0.9.12 (TestFlight) on iPhone 6, iOS 11.2.1. After removing a group chat and sending a new message by another group member I didn't get the empty chat you mentioned. The group chat is not available either.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/356110437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/383127867",
    "html_url": "https://github.com/status-im/status-mobile/issues/1659#issuecomment-383127867",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/1659",
    "id": 383127867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MzEyNzg2Nw==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-20T15:11:24Z",
    "updated_at": "2018-04-20T15:11:24Z",
    "author_association": "NONE",
    "body": "can't reproduce after new-protocol. After user B sends new message: user A sees same chat with proper name and content and can send commands/messages into it",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/383127867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

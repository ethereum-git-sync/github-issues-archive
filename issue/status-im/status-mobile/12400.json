{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/12400",
  "id": 956478766,
  "node_id": "MDU6SXNzdWU5NTY0Nzg3NjY=",
  "number": 12400,
  "title": "Research creating own F-Droid repository",
  "user": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4052488027,
      "node_id": "LA_kwDOAx4p2c7xjA9b",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:FDroid",
      "name": "E:FDroid",
      "color": "CF1C74",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "jakubgs",
    "id": 2212681,
    "node_id": "MDQ6VXNlcjIyMTI2ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakubgs",
    "html_url": "https://github.com/jakubgs",
    "followers_url": "https://api.github.com/users/jakubgs/followers",
    "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
    "organizations_url": "https://api.github.com/users/jakubgs/orgs",
    "repos_url": "https://api.github.com/users/jakubgs/repos",
    "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakubgs/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2021-07-30T07:21:52Z",
  "updated_at": "2022-04-20T08:21:54Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Being dependent on F-Droid own submission and build process makes it hard to sync releases. It is possible to maintain your own F-Droid repository which would make use more independent in terms of submitting new versions:\r\n\r\nhttps://f-droid.org/en/docs/Setup_an_F-Droid_App_Repo/\r\n\r\nList of other known repositories:\r\nhttps://forum.f-droid.org/t/known-repositories/721\r\nhttps://f-droid.org/wiki/page/Known_Repositories",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/12400/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/899632890",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-899632890",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 899632890,
    "node_id": "IC_kwDOAx4p2c41n076",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-16T16:09:33Z",
    "updated_at": "2021-08-16T16:12:00Z",
    "author_association": "MEMBER",
    "body": "Based on this repository: https://www.cgeo.org/development#f-droid-repository\r\nI thought we could use the domain `fdroid.status.im` and have different branches under sub-paths, like they do:\r\n\r\n>#### Repositories\r\n>URL:\r\n>\r\n>* https://fdroid.cgeo.org for mainline\r\n>* https://fdroid.cgeo.org/nightly for nightly builds\r\n>* https://fdroid.cgeo.org/legacy for legacy builds\r\n>\r\n>Our repository fingerprint is:\r\n>\r\n>370BB4D550C391D5DCCB6C81FD82FDA4892964764E085A09B7E075E9BAD5ED98\r\n\r\nSo we could do something like:\r\n\r\n* https://fdroid.status.im/ - Releases\r\n* https://fdroid.status.im/nightly - Nightlies\r\n\r\nAnd while that would make for a neat URL, the documentation states that:\r\n\r\n>While __you can serve the repository at an arbitrary URL__, it is customary to make it available at an URL ending with `/fdroid/repo/`. A good reason to actually do this is that the __F-Droid client sets up an intent filter and registers itself for such URLs__. As a result, a user that has the F-Droid app installed and opens such a well-formed URL will have their device open F-Droid and guide them directly to adding the repository to it.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/899632890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/899636331",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-899636331",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 899636331,
    "node_id": "IC_kwDOAx4p2c41n1xr",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-16T16:13:50Z",
    "updated_at": "2021-08-18T12:26:41Z",
    "author_association": "MEMBER",
    "body": "Although I did test this with some other repos, like https://microg.org/fdroid/repo/ and it doesn't seem to work. F-Droid doesn't open.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/899636331/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901070911",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-901070911",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 901070911,
    "node_id": "IC_kwDOAx4p2c41tUA_",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-18T12:27:07Z",
    "updated_at": "2021-08-18T12:27:07Z",
    "author_association": "MEMBER",
    "body": "I looked in the [`fdroidclient`](https://gitlab.com/fdroid/fdroidclient/-/issues) issues and I couldn't find anything about intent filter.\r\n\r\nI created my own issue to see if this is a known issue: https://gitlab.com/fdroid/fdroidclient/-/issues/2251",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901070911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901088540",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-901088540",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 901088540,
    "node_id": "IC_kwDOAx4p2c41tYUc",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-18T12:51:27Z",
    "updated_at": "2021-08-18T12:51:27Z",
    "author_association": "MEMBER",
    "body": "When I try to run `fdroid update` on NixOS I get this:\r\n```\r\n > fdroid update --verbose             \r\nDEBUG: Reading 'config.py'\r\nDEBUG: Processing StatusIm-Mobile-v1.15.0-5e46db.apk\r\nDEBUG: Using androguard from \"/etc/profiles/per-user/sochan/lib/python3.8/site-packages/androguard/__init__.py\"\r\nTraceback (most recent call last):\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/lib/python3.8/site-packages/fdroidserver/update.py\", line 1216, in scan_apk_androguard\r\n    from androguard.core.bytecodes.apk import APK\r\n  File \"/etc/profiles/per-user/sochan/lib/python3.8/site-packages/androguard/core/bytecodes/apk.py\", line 9, in <module>\r\n    from androguard.core.bytecodes.axml import ARSCParser, AXMLPrinter, ARSCResTableConfig, AXMLParser, format_value, START_TAG, END_TAG, TEXT, END_DOCUMENT\r\n  File \"/etc/profiles/per-user/sochan/lib/python3.8/site-packages/androguard/core/bytecodes/axml/__init__.py\", line 17, in <module>\r\n    from lxml import etree\r\nImportError: /nix/store/q53f5birhik4dxg3q3r2g5f324n7r5mc-glibc-2.31-74/lib/libc.so.6: version `GLIBC_2.32' not found (required by /nix/store/gk42f59363p82rg2wv2mfy71jn5w4q4c-glibc-2.32-48/lib/librt.so.1)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/bin/.fdroid-wrapped\", line 171, in <module>\r\n    main()\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/bin/.fdroid-wrapped\", line 147, in main\r\n    mod.main()\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/lib/python3.8/site-packages/fdroidserver/update.py\", line 1968, in main\r\n    apks, cachechanged = process_apks(apkcache, repodirs[0], knownapks, options.use_date_from_apk)\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/lib/python3.8/site-packages/fdroidserver/update.py\", line 1495, in process_apks\r\n    (skip, apk, cachethis) = process_apk(apkcache, apkfilename, repodir, knownapks,\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/lib/python3.8/site-packages/fdroidserver/update.py\", line 1369, in process_apk\r\n    apk = scan_apk(apkfile)\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/lib/python3.8/site-packages/fdroidserver/update.py\", line 1055, in scan_apk\r\n    scan_apk_androguard(apk, apk_file)\r\n  File \"/nix/store/bkpkssfx6bpwdynsifygq86mda3z0rnw-fdroidserver-1.1.9/lib/python3.8/site-packages/fdroidserver/update.py\", line 1234, in scan_apk_androguard\r\n    raise FDroidException(\"androguard library is not installed and aapt not present\")\r\nfdroidserver.exception.FDroidException: androguard library is not installed and aapt not present\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901088540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901821947",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-901821947",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 901821947,
    "node_id": "IC_kwDOAx4p2c41wLX7",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T11:05:31Z",
    "updated_at": "2021-08-19T11:05:31Z",
    "author_association": "MEMBER",
    "body": "Thanks to tests by @qoqobolo it turns out that F-Droid repo deep linking(intent filter) works in other applications than browsers, for example in chat applications like Discord. I confirmed this myself and it does indeed work.\r\n\r\nFor this reason it would indeed make most sense to put the repo under https://status.im/frdroid/repo.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901821947/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901852732",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-901852732",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 901852732,
    "node_id": "IC_kwDOAx4p2c41wS48",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T11:55:31Z",
    "updated_at": "2021-08-19T11:55:31Z",
    "author_association": "MEMBER",
    "body": "I tried making a custom shell with Android SDK in it to do this:\r\n```nix\r\n{ pkgs ? import <nixpkgs> { config.android_sdk.accept_license = true; } }:\r\n\r\nlet\r\n  androidEnv = pkgs.androidenv.composeAndroidPackages {\r\n    toolsVersion = \"26.1.1\";\r\n    platformToolsVersion = \"31.0.2\";\r\n    buildToolsVersions = [ \"30.0.3\" ];\r\n    platformVersions = [ \"29\" ];\r\n    cmakeVersions = [ \"3.18.1\" ];\r\n    ndkVersion = \"22.1.7171670\";\r\n    includeNDK = true;\r\n    includeExtras = [\r\n      \"extras;android;m2repository\"\r\n      \"extras;google;m2repository\"\r\n    ];\r\n  };\r\nin pkgs.mkShell {\r\n  name = \"status-fdroidata\";\r\n\r\n  buildInputs = with pkgs; [ python38 python38Packages.androguard ];\r\n\r\n  ANDROID_HOME = \"${androidEnv.androidsdk}\";\r\n}\r\n```\r\nBut I'm getting the same `glibc` error:\r\n```\r\nImportError: /nix/store/q53f5birhik4dxg3q3r2g5f324n7r5mc-glibc-2.31-74/lib/libc.so.6: version `GLIBC_2.32' not found (required by /nix/store/gk42f59363p82rg2wv2mfy71jn5w4q4c-glibc-2.32-48/lib/librt.so.1)\r\n```\r\nI think I will try a container of a VM to compare with a non-Nix system.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901852732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901940441",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-901940441",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 901940441,
    "node_id": "IC_kwDOAx4p2c41woTZ",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T14:00:13Z",
    "updated_at": "2021-08-19T14:00:13Z",
    "author_association": "MEMBER",
    "body": "Okay, with this shell setup I managed to get it working:\r\n```nix\r\n{ pkgs ? import <nixpkgs> { config.android_sdk.accept_license = true; } }:\r\n\r\nlet\r\n  androidEnv = pkgs.androidenv.composeAndroidPackages {\r\n    toolsVersion = \"26.1.1\";\r\n    platformToolsVersion = \"31.0.2\";\r\n    buildToolsVersions = [ \"30.0.3\" ];\r\n    platformVersions = [ \"29\" ];\r\n    cmakeVersions = [ \"3.18.1\" ];\r\n    ndkVersion = \"22.1.7171670\";\r\n  };\r\n  myPython38 = pkgs.python38.withPackages (\r\n    python-packages: with (pkgs.python38Packages); [ androguard ]\r\n  );\r\nin pkgs.mkShell {\r\n  name = \"status-fdroidata\";\r\n\r\n  buildInputs = with pkgs; [ fdroidserver myPython38 ];\r\n\r\n  ANDROID_HOME = \"${androidEnv.androidsdk}\";\r\n}\r\n```\r\n```\r\n[nix-shell:~/work/status-fdroiddata]$ fdroid update -c\r\nINFO: Generated skeleton metadata for im.status.ethereum\r\nINFO: Creating signed index with this key (SHA256):\r\nINFO: D4 AD DB D7 01 61 6D 0E 6B F7 46 64 E2 83 E6 DD 98 35 13 F7 C0 9C 2A 75 B3 B8 27 77 17 6E 6B 97\r\nINFO: Finished\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901940441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901986299",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-901986299",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 901986299,
    "node_id": "IC_kwDOAx4p2c41wzf7",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T14:57:39Z",
    "updated_at": "2021-08-19T14:57:39Z",
    "author_association": "MEMBER",
    "body": "This generates and `repo/index.xml` which contains the app metadata:\r\n```\r\n > cat repo/index.xml | xmllint --format -\r\n```\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<fdroid>\r\n  <repo icon=\"fdroid-icon.png\" name=\"Status.im F-Droid Repo\" pubkey=\"3082...6981\" timestamp=\"1629381541\" url=\"https://status.im/fdroid/repo\" version=\"21\">\r\n    <description>This is a repository of Status application releases for Android.\r\n\r\nStatus is a Cryptocurrency wallet, Private messenger, and Ethereum DApp Browser all in one </description>\r\n  </repo>\r\n  <application id=\"im.status.ethereum\">\r\n    <id>im.status.ethereum</id>\r\n    <added>2021-08-19</added>\r\n    <lastupdated>2021-08-19</lastupdated>\r\n    <name>Status</name>\r\n    <summary/>\r\n    <icon>im.status.ethereum.2021071411.png</icon>\r\n    <desc>&lt;p&gt;No description available&lt;/p&gt;</desc>\r\n    <license>Unknown</license>\r\n    <categories>status-fdroiddata</categories>\r\n    <category>status-fdroiddata</category>\r\n    <web/>\r\n    <source/>\r\n    <tracker/>\r\n    <marketversion/>\r\n    <marketvercode>2147483647</marketvercode>\r\n    <package>\r\n      <version>1.15.0</version>\r\n      <versioncode>2021071411</versioncode>\r\n      <apkname>StatusIm-Mobile-v1.15.0-5e46db.apk</apkname>\r\n      <hash type=\"sha256\">3c1f363e366d8b8178aad804f87a792ef5ce3200c6985ef04930daf51fcfe508</hash>\r\n      <size>90386188</size>\r\n      <sdkver>23</sdkver>\r\n      <targetSdkVersion>29</targetSdkVersion>\r\n      <added>2021-08-19</added>\r\n      <sig>dd412f369ff54ab1d9fa79c19865ba6d</sig>\r\n      <permissions>ACCESS_FINE_LOCATION,ACCESS_NETWORK_STATE,ACCESS_WIFI_STATE,CAMERA,FOREGROUND_SERVICE,INTERNET,NFC,READ_EXTERNAL_STORAGE,RECEIVE_BOOT_COMPLETED,RECORD_AUDIO,USE_FINGERPRINT,VIBRATE,WAKE_LOCK,WRITE_EXTERNAL_STORAGE,com.android.vending.BILLING,com.google.android.c2dm.permission.RECEIVE,com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE</permissions>\r\n      <nativecode>arm64-v8a,armeabi-v7a,x86,x86_64</nativecode>\r\n      <features>android.hardware.camera,android.hardware.camera.autofocus</features>\r\n    </package>\r\n  </application>\r\n</fdroid>\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/901986299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/902011698",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-902011698",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 902011698,
    "node_id": "IC_kwDOAx4p2c41w5sy",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T15:29:27Z",
    "updated_at": "2021-08-19T15:29:27Z",
    "author_association": "MEMBER",
    "body": "I am seeing some warnings when adding the APKs, but they don't seem to matter:\r\n```\r\n[nix-shell:~/work/status-fdroiddata]$ fdroid update -c\r\nWARNING: Requested API level 29 is larger than maximum we have, returning API level 28 instead.\r\nWARNING: Using Java's jarsigner, not recommended for verifying APKs! Use apksigner\r\nWARNING: Requested API level 29 is larger than maximum we have, returning API level 28 instead.\r\nWARNING: Requested API level 29 is larger than maximum we have, returning API level 28 instead.\r\nWARNING: Requested API level 29 is larger than maximum we have, returning API level 28 instead.\r\n```\r\nThe APKs get imported without issues:\r\n```\r\n > cat repo/index.xml | xmllint --format - | grep apkname\r\n      <apkname>StatusIm-Mobile-v1.15.0-5e46db.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.14.0-d1a3a2.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.13.0-896b583.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.12.2-4e8bb68.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.12.1-4e8bb68.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.11.1-d41532a.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.10.1-09f95dc.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.10.0-d8be02.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.9.0-60511dc.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.8.0-579e079.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.7.2-5edbd0f.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.7.1-2d4638.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.7.0-e40664.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.6.1-877acff.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.6.0-21cac9.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.5.0-a1f59c2.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.4.1-2c882e3.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.4.0-12fce4.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.3.1-ff6cb2.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.3.0-00d63ed.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.2.1-464ad4d.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.2.0-b76fa53.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.1.0-7b64a99.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.0.2-2c47804.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.0.1-aa28d2.apk</apkname>\r\n      <apkname>StatusIm-Mobile-v1.0.0-30952e1.apk</apkname>\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/902011698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/902016552",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-902016552",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 902016552,
    "node_id": "IC_kwDOAx4p2c41w64o",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T15:36:00Z",
    "updated_at": "2021-08-19T15:36:00Z",
    "author_association": "MEMBER",
    "body": "If you use `--pretty` you get formatted XML. And if you add `--rename-apks` they all get renamed like this:\r\n```\r\n[nix-shell:~/work/status-fdroiddata]$ ls -lh repo/\r\ntotal 1.9G\r\n-rw-r--r-- 1 sochan sochan   18 Aug 19 17:33 categories.txt\r\ndrwxr-xr-x 2 sochan sochan   55 Aug 19 17:33 icons\r\ndrwxr-xr-x 2 sochan sochan   28 Aug 19 17:33 icons-120\r\ndrwxr-xr-x 2 sochan sochan   28 Aug 19 17:33 icons-160\r\ndrwxr-xr-x 2 sochan sochan   28 Aug 19 17:33 icons-240\r\ndrwxr-xr-x 2 sochan sochan   28 Aug 19 17:33 icons-320\r\ndrwxr-xr-x 2 sochan sochan   28 Aug 19 17:33 icons-480\r\ndrwxr-xr-x 2 sochan sochan   28 Aug 19 17:33 icons-640\r\n-rw-r--r-- 1 sochan sochan  67M Aug 19 17:25 im.status.ethereum_2020020414.apk\r\n-rw-r--r-- 1 sochan sochan  67M Aug 19 17:25 im.status.ethereum_2020021213.apk\r\n-rw-r--r-- 1 sochan sochan  67M Aug 19 17:25 im.status.ethereum_2020022507.apk\r\n-rw-r--r-- 1 sochan sochan  67M Aug 19 17:25 im.status.ethereum_2020031610.apk\r\n-rw-r--r-- 1 sochan sochan  67M Aug 19 17:25 im.status.ethereum_2020040117.apk\r\n-rw-r--r-- 1 sochan sochan  67M Aug 19 17:25 im.status.ethereum_2020040212.apk\r\n-rw-r--r-- 1 sochan sochan  68M Aug 19 17:25 im.status.ethereum_2020042307.apk\r\n-rw-r--r-- 1 sochan sochan  68M Aug 19 17:25 im.status.ethereum_2020050209.apk\r\n-rw-r--r-- 1 sochan sochan  75M Aug 19 17:25 im.status.ethereum_2020060905.apk\r\n-rw-r--r-- 1 sochan sochan  75M Aug 19 17:25 im.status.ethereum_2020070112.apk\r\n-rw-r--r-- 1 sochan sochan  76M Aug 19 17:25 im.status.ethereum_2020081013.apk\r\n-rw-r--r-- 1 sochan sochan  76M Aug 19 17:25 im.status.ethereum_2020082611.apk\r\n-rw-r--r-- 1 sochan sochan  76M Aug 19 17:25 im.status.ethereum_2020090810.apk\r\n-rw-r--r-- 1 sochan sochan  76M Aug 19 17:25 im.status.ethereum_2020092512.apk\r\n-rw-r--r-- 1 sochan sochan  76M Aug 19 17:25 im.status.ethereum_2020100112.apk\r\n-rw-r--r-- 1 sochan sochan  77M Aug 19 17:25 im.status.ethereum_2020100610.apk\r\n-rw-r--r-- 1 sochan sochan  77M Aug 19 17:25 im.status.ethereum_2020101914.apk\r\n-rw-r--r-- 1 sochan sochan  77M Aug 19 17:25 im.status.ethereum_2020112009.apk\r\n-rw-r--r-- 1 sochan sochan  79M Aug 19 17:25 im.status.ethereum_2021011115.apk\r\n-rw-r--r-- 1 sochan sochan  79M Aug 19 17:25 im.status.ethereum_2021011810.apk\r\n-rw-r--r-- 1 sochan sochan  80M Aug 19 17:25 im.status.ethereum_2021021517.apk\r\n-rw-r--r-- 1 sochan sochan  80M Aug 19 17:25 im.status.ethereum_2021031517.apk\r\n-rw-r--r-- 1 sochan sochan  80M Aug 19 17:25 im.status.ethereum_2021032607.apk\r\n-rw-r--r-- 1 sochan sochan  81M Aug 19 17:25 im.status.ethereum_2021042608.apk\r\n-rw-r--r-- 1 sochan sochan  81M Aug 19 17:25 im.status.ethereum_2021060711.apk\r\n-rw-r--r-- 1 sochan sochan  87M Aug 19 17:25 im.status.ethereum_2021071411.apk\r\n-rw-r--r-- 1 sochan sochan 6.9K Aug 19 17:33 index.jar\r\n-rw-r--r-- 1 sochan sochan 5.8K Aug 19 17:33 index-v1.jar\r\n-rw-r--r-- 1 sochan sochan  59K Aug 19 17:33 index-v1.json\r\n-rw-r--r-- 1 sochan sochan  27K Aug 19 17:33 index.xml\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/902016552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/902018256",
    "html_url": "https://github.com/status-im/status-mobile/issues/12400#issuecomment-902018256",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/12400",
    "id": 902018256,
    "node_id": "IC_kwDOAx4p2c41w7TQ",
    "user": {
      "login": "jakubgs",
      "id": 2212681,
      "node_id": "MDQ6VXNlcjIyMTI2ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212681?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakubgs",
      "html_url": "https://github.com/jakubgs",
      "followers_url": "https://api.github.com/users/jakubgs/followers",
      "following_url": "https://api.github.com/users/jakubgs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakubgs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakubgs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakubgs/subscriptions",
      "organizations_url": "https://api.github.com/users/jakubgs/orgs",
      "repos_url": "https://api.github.com/users/jakubgs/repos",
      "events_url": "https://api.github.com/users/jakubgs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakubgs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-19T15:38:16Z",
    "updated_at": "2021-08-19T15:38:16Z",
    "author_association": "MEMBER",
    "body": "```\r\n[nix-shell:~/work/status-fdroiddata]$ fdroid update -h\r\nusage: fdroid update [-h] [-v] [-q] [--create-key] [-c] [--delete-unknown] [-b] [-I] [-w] [--pretty] [--clean] [--nosign] [--use-date-from-apk] [--rename-apks]\r\n                     [--allow-disabled-algorithms] [-W {error,warn,ignore}]\r\n\r\noptional arguments:\r\n  -h, --help            show this help message and exit\r\n  -v, --verbose         Spew out even more information than normal\r\n  -q, --quiet           Restrict output to warnings and errors\r\n  --create-key          Add a repo signing key to an unsigned repo\r\n  -c, --create-metadata\r\n                        Add skeleton metadata files for APKs that are missing them\r\n  --delete-unknown      Delete APKs and/or OBBs without metadata from the repo\r\n  -b, --buildreport     Report on build data status\r\n  -I, --icons           Resize all the icons exceeding the max pixel size and exit\r\n  -w, --wiki            Update the wiki\r\n  --pretty              Produce human-readable XML/JSON for index files\r\n  --clean               Clean update - don't uses caches, reprocess all APKs\r\n  --nosign              When configured for signed indexes, create only unsigned indexes at this stage\r\n  --use-date-from-apk   Use date from APK instead of current time for newly added APKs\r\n  --rename-apks         Rename APK files that do not match package.name_123.apk\r\n  --allow-disabled-algorithms\r\n                        Include APKs that are signed with disabled algorithms like MD5\r\n  -W {error,warn,ignore}\r\n                        force metadata errors (default) to be warnings, or to be ignored.\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/902018256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/13914",
  "id": 1358884227,
  "node_id": "I_kwDOAx4p2c5Q_u2D",
  "number": 13914,
  "title": "Long/heavy audio messages are not sent",
  "user": {
    "login": "qoqobolo",
    "id": 67952253,
    "node_id": "MDQ6VXNlcjY3OTUyMjUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/qoqobolo",
    "html_url": "https://github.com/qoqobolo",
    "followers_url": "https://api.github.com/users/qoqobolo/followers",
    "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
    "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
    "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
    "repos_url": "https://api.github.com/users/qoqobolo/repos",
    "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/59",
    "html_url": "https://github.com/status-im/status-mobile/milestone/59",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/59/labels",
    "id": 7721557,
    "node_id": "MI_kwDOAx4p2c4AddJV",
    "number": 59,
    "title": "Release 1.20",
    "description": "",
    "creator": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 4,
    "closed_issues": 54,
    "state": "closed",
    "created_at": "2022-02-28T16:35:08Z",
    "updated_at": "2022-12-02T16:06:03Z",
    "due_on": null,
    "closed_at": "2022-12-02T16:06:03Z"
  },
  "comments": 7,
  "created_at": "2022-09-01T13:50:20Z",
  "updated_at": "2022-09-29T15:32:01Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n\r\n## Problem \r\nAudio messages longer than 1:25 (mostly with silence (no content)) get stuck in a pending state and never reach the recipient, relogin doesn't help. \r\nProbably the content of the message also affects the maximum length of a message that can be sent.\r\n\r\n#### Expected behavior\r\nCan send audio messages of any length (within 2 minutes) \r\n\r\n#### Actual behavior\r\n<img width=\"394\" alt=\"Screenshot 2022-09-01 at 15 45 11\" src=\"https://user-images.githubusercontent.com/67952253/187929688-5e184fd8-f57e-4551-b1e8-3ac85cbff1f5.png\">\r\n\r\n\r\n### Reproduction\r\n\r\n1. Start 1-1 chat\r\n2. Record an audio message longer than 1:25\r\n3. Send\r\n\r\n### Additional Information\r\n\r\n- Status version: RC 1.20\r\n- Operating System: Android, iOS\r\n\r\n### Logs \r\n[geth.log](https://github.com/status-im/status-mobile/files/9470364/geth.log)\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/13914/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1234409683",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1234409683",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1234409683,
    "node_id": "IC_kwDOAx4p2c5Jk5jT",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T15:05:22Z",
    "updated_at": "2022-09-01T15:05:22Z",
    "author_association": "MEMBER",
    "body": "Relevant logs:\r\n```\r\nt=2022-09-01T13:42:07+0000 lvl=eror msg=\"failed to send a datasync message\" error=\"huge messages are not allowed [0x49b5794d2dbefd50bf66f1cea6e0530e03b530e0b30400ed9203c9cbd6b76638][1353605][1048576]\"\r\nt=2022-09-01T13:42:07+0000 lvl=eror msg=\"failed to send message\" error=\"huge messages are not allowed [0x49b5794d2dbefd50bf66f1cea6e0530e03b530e0b30400ed9203c9cbd6b76638][1353605][1048576]\"\r\n```\r\n\r\nThe message size it's 1.3MB, so this one should get compressed before being able to send it.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1234409683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1236424378",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1236424378",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1236424378,
    "node_id": "IC_kwDOAx4p2c5Jsla6",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-04T22:13:12Z",
    "updated_at": "2022-09-04T22:13:12Z",
    "author_association": "MEMBER",
    "body": "@qoqobolo Could you share an example of a file that isn't working? Thank you :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1236424378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1236637748",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1236637748",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1236637748,
    "node_id": "IC_kwDOAx4p2c5JtZg0",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-05T07:30:14Z",
    "updated_at": "2022-09-05T07:30:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Samyoul unfortunately, there is no way to share an audio file as we can do this with images, it has to be recorded inside the application.\r\nYou can reproduce it on a real device: just record silence for 1:30 - 2:00 and try to send it in 1-1 chat",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1236637748/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1239143233",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1239143233",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1239143233,
    "node_id": "IC_kwDOAx4p2c5J29NB",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-07T09:29:47Z",
    "updated_at": "2022-09-07T09:38:48Z",
    "author_association": "MEMBER",
    "body": "The current library used for audio recording and playback is : https://www.npmjs.com/package/@react-native-community/audio-toolkit\r\n\r\nBut it appears to not be supported any more https://github.com/react-native-audio-toolkit/react-native-audio-toolkit/issues/272 and does not support `wav` output.\r\n\r\nThere is an alternative lib that is more supported but it doesn't support `wav` output either : https://github.com/hyochan/react-native-audio-recorder-player/issues?q=is%3Aissue+wav\r\n\r\nThere is another alternative lib that is not supported it seems BUT does support `wav` : https://github.com/goodatlas/react-native-audio-record\r\n\r\nIt would be helpful to have a lib that can record to `wav` rather than `aac`, as `wav` is easier to perform postprocessing on in Go. We can then re-encode the data into `aac` before transport.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1239143233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1239148428",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1239148428",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1239148428,
    "node_id": "IC_kwDOAx4p2c5J2-eM",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-07T09:34:20Z",
    "updated_at": "2022-09-07T09:36:55Z",
    "author_association": "MEMBER",
    "body": "This go lib https://github.com/gen2brain/aac-go can be used to perform post-processing and seems to be 100% pure Go, BUT it can only do AAC encoding and not the required decoding, therefore the input audio needs to be `wav`, or I need to figure out how to pass a byte-stream reader into the `aac` encoder.\r\n\r\nThis lib can perform AAC decode and encode, BUT it requires a none standard setup to import C libs https://github.com/izern/go-fdkaac",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1239148428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1262435075",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1262435075",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1262435075,
    "node_id": "IC_kwDOAx4p2c5LPzsD",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-29T15:20:47Z",
    "updated_at": "2022-09-29T15:25:44Z",
    "author_association": "MEMBER",
    "body": "A little note about the work I did on this issue.\r\n\r\nUnfortunately there is a bug that I don't really have want to spend more time resolving, it is really taking too much time to resolve. Basically the process hangs for some encodings params, I don't know why, but it hangs indefinitely and that is a big problem and if I try to interrupt the process I get a segmentation violation crash. And recover isn't seeming to work. Also it would be better if we can decode AAC and then re-encode to AAC, so this whole PR is a massive wash.\r\n\r\nI'm closing the PR, but I'll not delete it to make the work available in case we revisit this issue at some point in the future. I'm regrettably resigning from this issue. \r\n\r\nhttps://github.com/status-im/status-go/pull/2853",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1262435075/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1262451109",
    "html_url": "https://github.com/status-im/status-mobile/issues/13914#issuecomment-1262451109",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/13914",
    "id": 1262451109,
    "node_id": "IC_kwDOAx4p2c5LP3ml",
    "user": {
      "login": "Samyoul",
      "id": 5702426,
      "node_id": "MDQ6VXNlcjU3MDI0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5702426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Samyoul",
      "html_url": "https://github.com/Samyoul",
      "followers_url": "https://api.github.com/users/Samyoul/followers",
      "following_url": "https://api.github.com/users/Samyoul/following{/other_user}",
      "gists_url": "https://api.github.com/users/Samyoul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Samyoul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Samyoul/subscriptions",
      "organizations_url": "https://api.github.com/users/Samyoul/orgs",
      "repos_url": "https://api.github.com/users/Samyoul/repos",
      "events_url": "https://api.github.com/users/Samyoul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Samyoul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-29T15:32:00Z",
    "updated_at": "2022-09-29T15:32:00Z",
    "author_association": "MEMBER",
    "body": "Consider https://github.com/edgeware/mp4ff as a point for research when/if this issue becomes more important.\r\n\r\nOoooor, we could just implement global file chunking for any file that is less than ~10mb (or whatever) and then you don't need to worry about Waku transport limitations (so much).",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1262451109/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/1778",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/1778/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/1778/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/1778/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/1778",
  "id": 255900896,
  "node_id": "MDU6SXNzdWUyNTU5MDA4OTY=",
  "number": 1778,
  "title": "Username of the first account is changed to the username of second account on same device [bug/username-changed-to-default]",
  "user": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "yenda",
    "id": 1181225,
    "node_id": "MDQ6VXNlcjExODEyMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yenda",
    "html_url": "https://github.com/yenda",
    "followers_url": "https://api.github.com/users/yenda/followers",
    "following_url": "https://api.github.com/users/yenda/following{/other_user}",
    "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
    "organizations_url": "https://api.github.com/users/yenda/orgs",
    "repos_url": "https://api.github.com/users/yenda/repos",
    "events_url": "https://api.github.com/users/yenda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yenda/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "yenda",
      "id": 1181225,
      "node_id": "MDQ6VXNlcjExODEyMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yenda",
      "html_url": "https://github.com/yenda",
      "followers_url": "https://api.github.com/users/yenda/followers",
      "following_url": "https://api.github.com/users/yenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
      "organizations_url": "https://api.github.com/users/yenda/orgs",
      "repos_url": "https://api.github.com/users/yenda/repos",
      "events_url": "https://api.github.com/users/yenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yenda/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-mobile/milestones/14",
    "html_url": "https://github.com/status-im/status-mobile/milestone/14",
    "labels_url": "https://api.github.com/repos/status-im/status-mobile/milestones/14/labels",
    "id": 2672928,
    "node_id": "MDk6TWlsZXN0b25lMjY3MjkyOA==",
    "number": 14,
    "title": "Beta milestone 2 of 6",
    "description": "Iteration N2 14.08-01-09\nupdate: result of this milestone was the 0.9.11 release",
    "creator": {
      "login": "sla-shi",
      "id": 1944596,
      "node_id": "MDQ6VXNlcjE5NDQ1OTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1944596?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sla-shi",
      "html_url": "https://github.com/sla-shi",
      "followers_url": "https://api.github.com/users/sla-shi/followers",
      "following_url": "https://api.github.com/users/sla-shi/following{/other_user}",
      "gists_url": "https://api.github.com/users/sla-shi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sla-shi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sla-shi/subscriptions",
      "organizations_url": "https://api.github.com/users/sla-shi/orgs",
      "repos_url": "https://api.github.com/users/sla-shi/repos",
      "events_url": "https://api.github.com/users/sla-shi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sla-shi/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 82,
    "state": "closed",
    "created_at": "2017-08-01T04:59:05Z",
    "updated_at": "2017-10-20T14:02:21Z",
    "due_on": "2017-09-08T07:00:00Z",
    "closed_at": "2017-10-04T19:27:29Z"
  },
  "comments": 2,
  "created_at": "2017-09-07T11:11:11Z",
  "updated_at": "2017-09-10T11:02:04Z",
  "closed_at": "2017-09-10T11:02:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n*Type*: Bug\r\n\r\n*Summary*: Account with username \"one\" is created. Than user creates account \"two\" on the same device. After signing in to the account \"one\" and opening a drawer there is username \"two\" instead of \"one\". After switching users there are 2 accounts with same username \"two\" on Sign in screen\r\n\r\n#### Expected behavior\r\nEach account contains only its own info and does not share usernames, statuses etc\r\n#### Actual behavior\r\nAccount \"one\" gets username from account \"two\"\r\n\r\n### Reproduction\r\nfrom 01:19 to 01:44\r\nhttps://app.testfairy.com/projects/4803622-status/builds/6511348/sessions/7/?accessToken=6ffm6NazEJOne42MIo29wV/uqUc\r\n- Open Status first time and create new account\r\n- Open drawer, tap on username, delete default one and type \"one\"\r\n- Tap on empty place in the drawer\r\n- Tap on switch users\r\n- On Sign in screen tap on Create new account\r\n- In Console provide a password for new account\r\n-  Open drawer, tap on username, delete default one and type \"two\"\r\n- Tap on empty place in the drawer\r\n- Tap on switch users. Now on Sign in screen there are 2 accounts: \"one\" and \"two\"\r\n- Sign in to account \"one\"\r\n- Open drawer and check username shown\r\n- Tap on Switch users\r\n- Check usernames shown on sign in screen\r\n\r\n### Additional Information\r\n* Status version: PR `bug/username-changed-to-default`   0.9.10-70-g9044db9e+\r\n* Operating System: \r\nReal device Samsung Galaxy S6, Android 6.0.1\r\nReal device iPhone 6s, iOS 10.3.3",
  "closed_by": {
    "login": "annadanchenko",
    "id": 6584810,
    "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/annadanchenko",
    "html_url": "https://github.com/annadanchenko",
    "followers_url": "https://api.github.com/users/annadanchenko/followers",
    "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
    "repos_url": "https://api.github.com/users/annadanchenko/repos",
    "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/1778/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/1778/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/327799752",
    "html_url": "https://github.com/status-im/status-mobile/issues/1778#issuecomment-327799752",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/1778",
    "id": 327799752,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNzc5OTc1Mg==",
    "user": {
      "login": "oskarth",
      "id": 1552237,
      "node_id": "MDQ6VXNlcjE1NTIyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1552237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oskarth",
      "html_url": "https://github.com/oskarth",
      "followers_url": "https://api.github.com/users/oskarth/followers",
      "following_url": "https://api.github.com/users/oskarth/following{/other_user}",
      "gists_url": "https://api.github.com/users/oskarth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oskarth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oskarth/subscriptions",
      "organizations_url": "https://api.github.com/users/oskarth/orgs",
      "repos_url": "https://api.github.com/users/oskarth/repos",
      "events_url": "https://api.github.com/users/oskarth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oskarth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-07T13:30:44Z",
    "updated_at": "2017-09-07T13:30:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> After a quick glance at the code it appears to me that the app-db is not cleared when switching account, only some fields are overwritten when the accounts is initialized. Do you have any suggestions as of how this could be improved to avoid bugs such as https://github.com/status-im/status-react/issues/1778 (I was storing :profile/default-username and it was surviving the switch, maybe this one was useless the idea was just not to recompute it everytime it is needed) ? -- yenda\r\n\r\nDiscussion / confusion in Slack about whether app-db is cleared or not. See https://github.com/status-im/status-react/blob/e169949e0a4d77a011793fdd7dfa70f2abe1de42/src/status_im/ui/screens/events.cljs#L134\r\n\r\nLook at this more closely during code review of PR that fices this.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/327799752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/328335381",
    "html_url": "https://github.com/status-im/status-mobile/issues/1778#issuecomment-328335381",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/1778",
    "id": 328335381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODMzNTM4MQ==",
    "user": {
      "login": "annadanchenko",
      "id": 6584810,
      "node_id": "MDQ6VXNlcjY1ODQ4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6584810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/annadanchenko",
      "html_url": "https://github.com/annadanchenko",
      "followers_url": "https://api.github.com/users/annadanchenko/followers",
      "following_url": "https://api.github.com/users/annadanchenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/annadanchenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/annadanchenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/annadanchenko/subscriptions",
      "organizations_url": "https://api.github.com/users/annadanchenko/orgs",
      "repos_url": "https://api.github.com/users/annadanchenko/repos",
      "events_url": "https://api.github.com/users/annadanchenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/annadanchenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-10T11:02:03Z",
    "updated_at": "2017-09-10T11:02:03Z",
    "author_association": "NONE",
    "body": "works ok on develop build 0.9.10-84-g3e1d7311+ ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/328335381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

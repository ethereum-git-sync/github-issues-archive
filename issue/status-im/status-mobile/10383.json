{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/10383",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/10383/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/10383/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/10383/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/10383",
  "id": 603937942,
  "node_id": "MDU6SXNzdWU2MDM5Mzc5NDI=",
  "number": 10383,
  "title": "[performance] Performance EPIC",
  "user": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 783781483,
      "node_id": "MDU6TGFiZWw3ODM3ODE0ODM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/performance",
      "name": "performance",
      "color": "dd3bd8",
      "default": false,
      "description": null
    },
    {
      "id": 1358982436,
      "node_id": "MDU6TGFiZWwxMzU4OTgyNDM2",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/epic",
      "name": "epic",
      "color": "98f2db",
      "default": false,
      "description": ""
    },
    {
      "id": 3990913364,
      "node_id": "LA_kwDOAx4p2c7t4IFU",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:PerformanceImprovements",
      "name": "E:PerformanceImprovements",
      "color": "3F3E45",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": true,
  "assignee": {
    "login": "flexsurfer",
    "id": 11790366,
    "node_id": "MDQ6VXNlcjExNzkwMzY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/flexsurfer",
    "html_url": "https://github.com/flexsurfer",
    "followers_url": "https://api.github.com/users/flexsurfer/followers",
    "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
    "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
    "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
    "repos_url": "https://api.github.com/users/flexsurfer/repos",
    "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "flexsurfer",
      "id": 11790366,
      "node_id": "MDQ6VXNlcjExNzkwMzY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/11790366?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flexsurfer",
      "html_url": "https://github.com/flexsurfer",
      "followers_url": "https://api.github.com/users/flexsurfer/followers",
      "following_url": "https://api.github.com/users/flexsurfer/following{/other_user}",
      "gists_url": "https://api.github.com/users/flexsurfer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flexsurfer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flexsurfer/subscriptions",
      "organizations_url": "https://api.github.com/users/flexsurfer/orgs",
      "repos_url": "https://api.github.com/users/flexsurfer/repos",
      "events_url": "https://api.github.com/users/flexsurfer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flexsurfer/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-04-21T11:53:26Z",
  "updated_at": "2023-07-14T09:21:54Z",
  "closed_at": "2023-07-14T09:21:54Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "https://discuss.status.im/t/the-story-about-100ms/1630\r\n\r\nGeneral:\r\n\r\n* [x]  Investigate reagent tick #10378\r\n\r\nSign in:\r\n\r\n* [x] Improve sign in flow #10377\r\n\r\nChat:\r\n\r\n* [ ] Optimize chat subscriptions #10379\r\n~* [ ] Remove all subscriptions from list items #10380~\r\n* [x] Optimize input field in chat #10385\r\n* [x] Optimize chat view #10386\r\n* [x] Optimize navigation #10382\r\n\r\nContacts:\r\n\r\n* [ ] Optimize contacts subscriptions #10381\r\n\r\n#  [Part 2 (26/04/21)](#performance-part-2)\r\n\r\nSo far we've implemented lots of improvements but why UI sometimes still slow and clunky?\r\n\r\n First, lets separate UI slowness (unresponsiveness) and loading (UI is responsive)\r\n\r\n### For loading, we know the next issues\r\n1) sign in takes long time (loading indicator, UI is responsive ) - its a known issue, if there is lots of contacts or chats it takes time to start a node \r\n* [ ]  https://github.com/status-im/status-go/issues/2215\r\n2) status timeline first time opening  (loading indicator, UI is responsive ) , same issue, fetching from sql slow when lots of contacts\r\n\r\n### UI slowness (unresponsiveness)\r\n99% of time its js thread, here we have two major parts, 1 - re-frame event handlers , 2 - reagent/react , they go one after another, and we have T = Th + Tr , in ideal T should be less than 100ms\r\n\r\nfor Th most critical parts are signals, new messages, chats, mailserver filters etc, some of them might take even seconds.\r\nfor Tr most critical, screen creation and screen forceUpdates especially with flatlist, some of them might take even seconds\r\n\r\nso in worst cases, it can be a signal which takes a few seconds and then screen update with flatlist which might take seconds as well, in that case, any buttons will be unresponsive, js task for button event handler can't be run because js thread is busy\r\n\r\nknown issues\r\n1) most critical one, after sign in with lots of chats there is a tabs screen with loading indicator, but UI is unresponsive for a few seconds (not possible to navigate between tabs), here we have both Th and Tr, in Th we have lots of event handlers with app data initialization and for Tr we have flatlist with chats \r\n\r\n2) opening chat, and messages scrolling, same here , Th for handle more message from status-go and Tr for flatlist creation/update\r\n\r\n3) sometimes any part of UI can be slow because there is a signal from status go, and handlers use js thread for a long time, for example signal from mailserver is heavy \r\n\r\nSo there are two most critical directions\r\n\r\n### 1) Flatlist \r\nThe most critical part is item renderer or item layout, it should be just flat and simple without any logic or complex layout, in our case for both chat and message items item is very complex\r\n- We need to find a way how to improve item renderer\r\n\r\n### 2) re-frame handlers \r\nThe most critical part is signals from status-go , app initialization and loading more messages in chat\r\nWe need to \r\n- cover handlers by performance tests\r\n- if possible move to status-go\r\n- try RN multithreading\r\n- optimize code\r\n\r\nwe already moved a lot to status-go its not a simple task, currently, we're moving mailservers , it should improve a lot\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/10383/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 1,
    "confused": 0,
    "heart": 1,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/10383/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1635566247",
    "html_url": "https://github.com/status-im/status-mobile/issues/10383#issuecomment-1635566247",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/10383",
    "id": 1635566247,
    "node_id": "IC_kwDOAx4p2c5hfMKn",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T09:21:45Z",
    "updated_at": "2023-07-14T09:21:45Z",
    "author_association": "MEMBER",
    "body": "Moving to discussion, and we can add each item when ready to be worked on",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1635566247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

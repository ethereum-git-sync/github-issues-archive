{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/7474",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/7474/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/7474/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/7474/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/7474",
  "id": 409158555,
  "node_id": "MDU6SXNzdWU0MDkxNTg1NTU=",
  "number": 7474,
  "title": "Messages disappear on restarting the app ",
  "user": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-02-12T07:33:18Z",
  "updated_at": "2019-02-21T12:41:20Z",
  "closed_at": "2019-02-21T12:41:20Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "A user reported that messages disappear after restarting the app, both messages that they received and they sent.\r\n\r\nThey had conversations in #status channel.\r\n\r\nAfter restart, the messages from the previous conversation disappeared (until October 2018, likely the last time it was in the chat before upgrading to 0.9.33).\r\n\r\nWe asked to replicate, and it was partially replicated (some of the newer messages were persisted, but older were not).\r\n\r\nFetch 24 hours did not help.\r\n\r\nWe posted a reply to a message that disappeared, and the original message was not visible on the user device (which seems to indicate that the original message was not saved in the db).\r\n\r\nDevice is running 0.9.33, IOS 12.1.2, Iphone 5s.\r\n\r\nTwo extensions installed, giphy and an example extension made by status.\r\n\r\nWe asked to uninstall the extensions and it could still be replicated (all history gone).",
  "closed_by": {
    "login": "cammellos",
    "id": 1017008,
    "node_id": "MDQ6VXNlcjEwMTcwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cammellos",
    "html_url": "https://github.com/cammellos",
    "followers_url": "https://api.github.com/users/cammellos/followers",
    "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
    "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
    "organizations_url": "https://api.github.com/users/cammellos/orgs",
    "repos_url": "https://api.github.com/users/cammellos/repos",
    "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cammellos/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/7474/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/7474/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/465567246",
    "html_url": "https://github.com/status-im/status-mobile/issues/7474#issuecomment-465567246",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/7474",
    "id": 465567246,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTU2NzI0Ng==",
    "user": {
      "login": "Serhy",
      "id": 8749671,
      "node_id": "MDQ6VXNlcjg3NDk2NzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8749671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Serhy",
      "html_url": "https://github.com/Serhy",
      "followers_url": "https://api.github.com/users/Serhy/followers",
      "following_url": "https://api.github.com/users/Serhy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Serhy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Serhy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Serhy/subscriptions",
      "organizations_url": "https://api.github.com/users/Serhy/orgs",
      "repos_url": "https://api.github.com/users/Serhy/repos",
      "events_url": "https://api.github.com/users/Serhy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Serhy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-20T13:10:15Z",
    "updated_at": "2019-02-20T13:10:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "To reproduce behavior of disappearing messages after relogin could be done with the device date change to the past:\r\n\r\n**Reproduction:**\r\n1) Install Status\r\n2) Manually change the date to yesterday (at this moment it's 19th of February)\r\n3) Open Status and create new account\r\n4) Join `#status` public chat\r\n5) Wait till message history is fetched (Note: it fetches last 24h, so, depends of time when you execute this scenario, yesterdays messages - 18th of Feb at the current moment - should be present too)\r\n6) Close Status app\r\n7) Update the date to current date (20th of February at this moment)\r\n8) Open Status, log in to account\r\n9) Verify that: a) message history fetched in 5th step above is kept. b) message history is fetched and displays for the last 24h\r\n10) Relogin to account\r\n11) Verify that: a) message history fetched in 5th step above is kept. b) message history is fetched and displays for the last 24h\r\n**Actual result:** Latest message displayed in `#status` public chat is the last message posted at 18th of Feb (next messages, starting from 19th of Feb, are not visible. However, on Home screen the 'real' message is shown. \r\n\r\n<img width=\"970\" alt=\"screenshot 2019-02-20 at 15 06 20\" src=\"https://user-images.githubusercontent.com/8749671/53093971-8dc1ec00-3521-11e9-97b4-292e7c4dd711.png\">\r\n\r\nConfirmed with iOS, MacOS, Android - develop build (20th of February nightly build)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/465567246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/6903",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/6903",
  "id": 384804690,
  "node_id": "MDU6SXNzdWUzODQ4MDQ2OTA=",
  "number": 6903,
  "title": "Replies are shown as ordinary messages if they are sent from current nightly and quoted on release build or when reply to old message sent before upgrade and both contacts are on release build",
  "user": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 330296931,
      "node_id": "MDU6TGFiZWwzMzAyOTY5MzE=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 794860412,
      "node_id": "MDU6TGFiZWw3OTQ4NjA0MTI=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/release",
      "name": "release",
      "color": "30dcff",
      "default": false,
      "description": null
    },
    {
      "id": 795655580,
      "node_id": "MDU6TGFiZWw3OTU2NTU1ODA=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/chat",
      "name": "chat",
      "color": "f70cb0",
      "default": false,
      "description": null
    },
    {
      "id": 955294273,
      "node_id": "MDU6TGFiZWw5NTUyOTQyNzM=",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/medium-severity",
      "name": "medium-severity",
      "color": "e884a7",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-11-27T13:52:29Z",
  "updated_at": "2018-12-05T09:24:08Z",
  "closed_at": "2018-12-05T09:24:08Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Case 1: Replies are shown as ordinary messages if they are sent from current nightly and quoted on release build\r\n### Description\r\n\r\n*Type*: Bug\r\n*Summary*: when user has current nightly installed and replies to message, sent from release build, user with release build will see an ordinary message and vice versa.\r\n\r\n#### Expected behavior\r\ncan see reply message on both A and B\r\n\r\n#### Actual behavior\r\nordinary message on device A and reply message from device B\r\n![deblkdjsf](https://user-images.githubusercontent.com/4557972/49085954-958c3000-f253-11e8-92cb-e4828707683b.png)\r\n\r\n### Reproduction\r\n\r\n**Prerequisites:** \r\n1. device A has installed  0.9.31 version (released) \r\n2. device B has installed  latest nightly 26/11/2018\r\n\r\n- Open Status on device A\r\n- Log in\r\n- Join any channel (i.e. #test)\r\n- Open Status on device A\r\n- Log in\r\n- Join same channel (i.e. #test)\r\n- Send a message from device A\r\n- Reply to message from device B\r\n- Check public chat on device A and B\r\n\r\n\r\n### Additional Information\r\n* Status version: nightly 26/11/2018\r\n* Operating System: all\r\n\r\n\r\n# Case 2:  No quotation is shown in the reply message on recipient side if reply to message sent before upgrade\r\n\r\n### Description\r\n\r\n[comment]: # (Feature or Bug? i.e Type: Bug)\r\n*Type*: Bug\r\n\r\n[comment]: # (Describe the feature you would like, or briefly summarise the bug and what you did, what you expected to happen, and what actually happens. Sections below)\r\n*Summary*: Recipient gets no quotation in the reply message if reply to message sent before upgrade from 0.9.31 to 0.9.32. On sender side quotation is shown as expected. Both recipient and sender are on 0.9.32. Note that if reply to message sent after upgrade is done on both sides then quotation is shown as expected for both sender and recipient. So, issue is only on recipient side for replies to \"old\" messages sent while being on 0.9.31.\r\n\r\nRecipient (no quotation is shown):\r\n![36012](https://user-images.githubusercontent.com/6584810/49231010-4aa81f00-f3f1-11e8-9722-f679bdd07ca7.jpg)\r\n\r\nSender (shows quotation as expected)\r\n![screenshot_20181129-160441](https://user-images.githubusercontent.com/6584810/49231076-6f9c9200-f3f1-11e8-90bf-65359a7d4b07.png)\r\n\r\n#### Expected behavior\r\n[comment]: # (Describe what you expected to happen.)\r\nQuotation is shown to recipient, sender and other chat participants for replies to messages sent on 0.9.31 and on 0.9.32 \r\n#### Actual behavior\r\n[comment]: # (Describe what actually happened.)\r\nQuotation is not shown to recipient if reply to message sent before upgrade\r\n### Reproduction\r\n[comment]: # (Describe how we can replicate the bug step by step.)\r\n\r\n1. sender and recipient are on 0.9.31 and they are in contacts of each other\r\n2. both send text message in 1:1 chat\r\n3. both upgrade to 0.9.32\r\n4. sender replies to message from recipient in 1:1 chat\r\n5. check how reply is shown on recipient side\r\n\r\n\r\n### Additional Information\r\n[comment]: # (Please do your best to fill this out.)\r\n* Status version: from 0.9.31 release to build 7 of 0.9.32 release\r\n* Operating System: Android and iOS\r\n\r\n",
  "closed_by": {
    "login": "rasom",
    "id": 2364994,
    "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rasom",
    "html_url": "https://github.com/rasom",
    "followers_url": "https://api.github.com/users/rasom/followers",
    "following_url": "https://api.github.com/users/rasom/following{/other_user}",
    "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
    "organizations_url": "https://api.github.com/users/rasom/orgs",
    "repos_url": "https://api.github.com/users/rasom/repos",
    "events_url": "https://api.github.com/users/rasom/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rasom/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/6903/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/442469183",
    "html_url": "https://github.com/status-im/status-mobile/issues/6903#issuecomment-442469183",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903",
    "id": 442469183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MjQ2OTE4Mw==",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-28T14:38:51Z",
    "updated_at": "2018-11-28T14:38:51Z",
    "author_association": "MEMBER",
    "body": "@rasom as we discussed on chat-sync meeting, it could be related to your recent changes in message-IDs.\r\nCan you confirm or disprove it?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/442469183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443097197",
    "html_url": "https://github.com/status-im/status-mobile/issues/6903#issuecomment-443097197",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903",
    "id": 443097197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzA5NzE5Nw==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T05:38:26Z",
    "updated_at": "2018-12-01T16:28:50Z",
    "author_association": "MEMBER",
    "body": "@churik ~~yes it is related to the `message-id` thing and i doubt that we can do anything here~~\r\nworking on it",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443097197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443127013",
    "html_url": "https://github.com/status-im/status-mobile/issues/6903#issuecomment-443127013",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903",
    "id": 443127013,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzEyNzAxMw==",
    "user": {
      "login": "asemiankevich",
      "id": 28752642,
      "node_id": "MDQ6VXNlcjI4NzUyNjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/28752642?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/asemiankevich",
      "html_url": "https://github.com/asemiankevich",
      "followers_url": "https://api.github.com/users/asemiankevich/followers",
      "following_url": "https://api.github.com/users/asemiankevich/following{/other_user}",
      "gists_url": "https://api.github.com/users/asemiankevich/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/asemiankevich/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/asemiankevich/subscriptions",
      "organizations_url": "https://api.github.com/users/asemiankevich/orgs",
      "repos_url": "https://api.github.com/users/asemiankevich/repos",
      "events_url": "https://api.github.com/users/asemiankevich/events{/privacy}",
      "received_events_url": "https://api.github.com/users/asemiankevich/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T08:20:47Z",
    "updated_at": "2018-11-30T08:20:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yenda thoughts? ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443127013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443129620",
    "html_url": "https://github.com/status-im/status-mobile/issues/6903#issuecomment-443129620",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903",
    "id": 443129620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzEyOTYyMA==",
    "user": {
      "login": "yenda",
      "id": 1181225,
      "node_id": "MDQ6VXNlcjExODEyMjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1181225?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yenda",
      "html_url": "https://github.com/yenda",
      "followers_url": "https://api.github.com/users/yenda/followers",
      "following_url": "https://api.github.com/users/yenda/following{/other_user}",
      "gists_url": "https://api.github.com/users/yenda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yenda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yenda/subscriptions",
      "organizations_url": "https://api.github.com/users/yenda/orgs",
      "repos_url": "https://api.github.com/users/yenda/repos",
      "events_url": "https://api.github.com/users/yenda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yenda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-30T08:31:45Z",
    "updated_at": "2018-11-30T08:31:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@asemiankevich as I said in the release thread I think we should break compatibility (it's just for responses) and pass message-id in the messages from now on to avoid this kind of problems in the future",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443129620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443515727",
    "html_url": "https://github.com/status-im/status-mobile/issues/6903#issuecomment-443515727",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/6903",
    "id": 443515727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzUxNTcyNw==",
    "user": {
      "login": "rasom",
      "id": 2364994,
      "node_id": "MDQ6VXNlcjIzNjQ5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2364994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rasom",
      "html_url": "https://github.com/rasom",
      "followers_url": "https://api.github.com/users/rasom/followers",
      "following_url": "https://api.github.com/users/rasom/following{/other_user}",
      "gists_url": "https://api.github.com/users/rasom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rasom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rasom/subscriptions",
      "organizations_url": "https://api.github.com/users/rasom/orgs",
      "repos_url": "https://api.github.com/users/rasom/repos",
      "events_url": "https://api.github.com/users/rasom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rasom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-02T15:24:17Z",
    "updated_at": "2018-12-02T15:24:17Z",
    "author_association": "MEMBER",
    "body": "fix is ready https://github.com/status-im/status-react/pull/6976",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/443515727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

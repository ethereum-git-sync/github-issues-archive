{
  "url": "https://api.github.com/repos/status-im/status-mobile/issues/17754",
  "repository_url": "https://api.github.com/repos/status-im/status-mobile",
  "labels_url": "https://api.github.com/repos/status-im/status-mobile/issues/17754/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-mobile/issues/17754/comments",
  "events_url": "https://api.github.com/repos/status-im/status-mobile/issues/17754/events",
  "html_url": "https://github.com/status-im/status-mobile/issues/17754",
  "id": 1965621515,
  "node_id": "I_kwDOAx4p2c51KQEL",
  "number": 17754,
  "title": "Integrate Malli to support instrumenting Quo components",
  "user": {
    "login": "ilmotta",
    "id": 46027,
    "node_id": "MDQ6VXNlcjQ2MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilmotta",
    "html_url": "https://github.com/ilmotta",
    "followers_url": "https://api.github.com/users/ilmotta/followers",
    "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
    "organizations_url": "https://api.github.com/users/ilmotta/orgs",
    "repos_url": "https://api.github.com/users/ilmotta/repos",
    "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilmotta/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4052544927,
      "node_id": "LA_kwDOAx4p2c7xjO2f",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Developer%20XP",
      "name": "E:Mobile Developer XP",
      "color": "0F662F",
      "default": false,
      "description": ""
    },
    {
      "id": 6137126570,
      "node_id": "LA_kwDOAx4p2c8AAAABbc0eqg",
      "url": "https://api.github.com/repos/status-im/status-mobile/labels/E:Mobile%20Malli%20instrument%20Quo%20components",
      "name": "E:Mobile Malli instrument Quo components",
      "color": "c5def5",
      "default": false,
      "description": "Use Malli to instrument most of the Quo components"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ilmotta",
    "id": 46027,
    "node_id": "MDQ6VXNlcjQ2MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilmotta",
    "html_url": "https://github.com/ilmotta",
    "followers_url": "https://api.github.com/users/ilmotta/followers",
    "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
    "organizations_url": "https://api.github.com/users/ilmotta/orgs",
    "repos_url": "https://api.github.com/users/ilmotta/repos",
    "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilmotta/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ilmotta",
      "id": 46027,
      "node_id": "MDQ6VXNlcjQ2MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilmotta",
      "html_url": "https://github.com/ilmotta",
      "followers_url": "https://api.github.com/users/ilmotta/followers",
      "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
      "organizations_url": "https://api.github.com/users/ilmotta/orgs",
      "repos_url": "https://api.github.com/users/ilmotta/repos",
      "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilmotta/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-10-27T14:11:50Z",
  "updated_at": "2023-11-28T12:43:18Z",
  "closed_at": "2023-11-28T12:43:17Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Problem\r\n\r\nThis is a non-exhaustive list of problems that will be tractable by using Malli:\r\n\r\n- Quo component arguments aren't verified during development; it's easy to pass arguments that lead to unsupported variations, leading to UI bugs caught much later on. Preview namespaces don't count, because they are not used by production code.\r\n- Developers need to write unverifiable (by machines) docstrings in hopes of describing the argument types, often without following common conventions/styles. The docstrings end up being outdated and unreliable.\r\n- Developers need to manually craft the possible argument permutations to components to see if they render correctly. This is repeated over and over by different developers touching the component. Component specs (e.g. `quo.components.counter.step.component-spec`) help a lot, but they are not visual.\r\n- In preview namespaces, we need to manually write descriptor fields. Often we forget some or they're outdated, and it's a constant worry in PRs. We need to maintain 120+ previews, and there will be more.\r\n\r\nNote: The core devs have already agreed on using Malli after a few round of discussions and an internal presentation about the tool.\r\n\r\n**Crew**: `Malicious REPLers`\r\n\r\n## Implementation\r\n\r\nUse branch https://github.com/status-im/status-mobile/tree/ilmotta/malli-proof-of-concept as reference to create the foundations for follow-up PRs to use Malli effective.\r\n\r\n## Acceptance Criteria\r\n\r\n- When an instrumented function fails validation, the developer should be able to see the errors logged and a VERY noticeable error on screen, but the error should NOT block the developer's flow. This means a schema failure shouldn't throw an exception and show the RN's LogBox.\r\n- Support REPL-driven flows with Malli. Redefining schemas in the global registry should not require a full code reload.\r\n- When the code is hot-reloaded by `status-im2.setup.hot-reload`, all schemas should be de-registered and registered correctly, i.e. there should be no outdated schemas in the registry.\r\n- Component specs and unit tests should fail immediately when an instrumented function fails validation.\r\n- Instrument one simple component to prove it all works.",
  "closed_by": {
    "login": "ilmotta",
    "id": 46027,
    "node_id": "MDQ6VXNlcjQ2MDI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ilmotta",
    "html_url": "https://github.com/ilmotta",
    "followers_url": "https://api.github.com/users/ilmotta/followers",
    "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
    "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
    "organizations_url": "https://api.github.com/users/ilmotta/orgs",
    "repos_url": "https://api.github.com/users/ilmotta/repos",
    "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ilmotta/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/17754/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-mobile/issues/17754/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1829768880",
    "html_url": "https://github.com/status-im/status-mobile/issues/17754#issuecomment-1829768880",
    "issue_url": "https://api.github.com/repos/status-im/status-mobile/issues/17754",
    "id": 1829768880,
    "node_id": "IC_kwDOAx4p2c5tEA6w",
    "user": {
      "login": "ilmotta",
      "id": 46027,
      "node_id": "MDQ6VXNlcjQ2MDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/46027?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ilmotta",
      "html_url": "https://github.com/ilmotta",
      "followers_url": "https://api.github.com/users/ilmotta/followers",
      "following_url": "https://api.github.com/users/ilmotta/following{/other_user}",
      "gists_url": "https://api.github.com/users/ilmotta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ilmotta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ilmotta/subscriptions",
      "organizations_url": "https://api.github.com/users/ilmotta/orgs",
      "repos_url": "https://api.github.com/users/ilmotta/repos",
      "events_url": "https://api.github.com/users/ilmotta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ilmotta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-28T12:43:17Z",
    "updated_at": "2023-11-28T12:43:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closed by PR https://github.com/status-im/status-mobile/pull/17867 (Introduce malli library)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-mobile/issues/comments/1829768880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

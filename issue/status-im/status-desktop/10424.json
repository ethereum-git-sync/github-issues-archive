{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/10424",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/10424/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/10424/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/10424/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/10424",
  "id": 1683093063,
  "node_id": "I_kwDOD5KrTM5kUfZH",
  "number": 10424,
  "title": "MacOS Biometrics needs fixing",
  "user": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-04-25T12:38:18Z",
  "updated_at": "2023-04-25T12:38:18Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nCurrently the Biometrics has several reported but related issues and needs to be fixed in a single task that takes all of this account.\r\n\r\n---\r\n\r\n### Profile -> Biometrics: application crash (previously #9423)\r\n\r\n1. open app\r\n2. open create account with keycard\r\n3. select PIN (over biometrics)\r\n4. login\r\n5. open profile\r\n6. enable biometrics\r\n7. confirm action with PIN from keycard\r\n\r\nAs result, the app crashes (log attached)\r\n\r\n[message.txt](https://github.com/status-im/status-desktop/files/10578175/message.txt)\r\n\r\n---\r\n\r\n### Biometrics prompt is showing up after application is restarted (previously #9286)\r\n\r\n1. install recent master\r\n2. create account\r\n3. do not enable biomtrics\r\n4. close the app\r\n5. start it again\r\n\r\nAs result, user is prompted to bypass biometrics even it was not enabled yet\r\n\r\n<img width=\"370\" alt=\"Screenshot 2023-01-25 at 12 49 58\" src=\"https://user-images.githubusercontent.com/82375995/214549017-251049af-0418-4b5b-9420-8b33bf4cdd17.png\">\r\n\r\n---\r\n\r\n### Biometrics registers as enabled after TouchID setup cancelled (previously #7726)\r\n\r\nBiometrics is shown as enabled even when TouchID config is cancelled during account set up.\r\nThis can result in the following error during the next login:\r\n![image](https://user-images.githubusercontent.com/50769329/193679766-e31b9069-f60e-4e9d-ae5d-59ce5e04dfaf.png)\r\n\r\n#### Steps to reproduce\r\n\r\n- During account setup select to enable TouchID, but then cancel the TouchID prompt.\r\n- Check that Biometrics shows as enabled in settings\r\n- Quit app\r\n- Open app (touchid prompt will be displayed)\r\n- Attempt to login with TouchID\r\n\r\n##### Expected behavior\r\n\r\n- Biometrics is disabled if TouchID setup is not completed.\r\n\r\n##### Actual behavior\r\n\r\n- Biometrics is still enabled even though setup is not complete.\r\n\r\n---\r\n\r\n### MacOs - change key for the Keychain (previously #9429)\r\n\r\nA key under which we're storing pin/password in the Keychain for an account is account's display name. That can be misleading in case there are more than one account with the same display name, but different passwords or the same display name but one is a keycard account, another regular account.\r\n\r\nBecause of that we should think of changing that and use compressed public key instead.\r\n\r\nWithin this issue, we can do the following improvement:\r\nThe same as we have this constant [here](https://github.com/status-im/status-desktop/blob/master/src/constants.nim#L8) we can add `SUPPORTS_FINGERPRINT` const there as well, like `const SUPPORTS_FINGERPRINT = if IS_MACOS: return true else: return false` and replace usage of `IS_MACOS` in necessary places. Benefit of this change is that once we support biometric for linux/windows, we will just need to update `SUPPORTS_FINGERPRINT` constant.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/10424/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/10424/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

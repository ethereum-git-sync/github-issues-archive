{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/8919",
  "id": 1514499232,
  "node_id": "I_kwDOD5KrTM5aRWyg",
  "number": 8919,
  "title": "Chat input: can't send html text from the clipboard",
  "user": {
    "login": "mprakhov",
    "id": 117639195,
    "node_id": "U_kgDOBwMIGw",
    "avatar_url": "https://avatars.githubusercontent.com/u/117639195?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mprakhov",
    "html_url": "https://github.com/mprakhov",
    "followers_url": "https://api.github.com/users/mprakhov/followers",
    "following_url": "https://api.github.com/users/mprakhov/following{/other_user}",
    "gists_url": "https://api.github.com/users/mprakhov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mprakhov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mprakhov/subscriptions",
    "organizations_url": "https://api.github.com/users/mprakhov/orgs",
    "repos_url": "https://api.github.com/users/mprakhov/repos",
    "events_url": "https://api.github.com/users/mprakhov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mprakhov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2347610790,
      "node_id": "MDU6TGFiZWwyMzQ3NjEwNzkw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Chat",
      "name": "Chat",
      "color": "9279e0",
      "default": false,
      "description": ""
    },
    {
      "id": 4887814632,
      "node_id": "LA_kwDOD5KrTM8AAAABI1Yh6A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/StatusChatInput",
      "name": "StatusChatInput",
      "color": "331025",
      "default": false,
      "description": "Issues related to chat input component"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "caybro",
    "id": 5377645,
    "node_id": "MDQ6VXNlcjUzNzc2NDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/caybro",
    "html_url": "https://github.com/caybro",
    "followers_url": "https://api.github.com/users/caybro/followers",
    "following_url": "https://api.github.com/users/caybro/following{/other_user}",
    "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
    "organizations_url": "https://api.github.com/users/caybro/orgs",
    "repos_url": "https://api.github.com/users/caybro/repos",
    "events_url": "https://api.github.com/users/caybro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/caybro/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2022-12-30T12:46:20Z",
  "updated_at": "2023-01-05T11:32:55Z",
  "closed_at": "2023-01-05T11:32:55Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\n\r\nAs a user, I want to send any text from the clipboard  as it was copied (as a plain text)\r\n\r\n## Steps to reproduce\r\n\r\n1. Copy HTML text to the clipboard. Example\r\n```\r\nHello, could you help me with understanding the problem\r\n<Html>\r\n<Head></Head><Body>test text\r\n</Body></Html>\r\n```\r\n2. Paste to chat\r\n\r\n#### Expected behavior\r\n\r\nAll paste text is displayed and visible after the send\r\n\r\n#### Actual behavior\r\n\r\nText formatted and not displayed as it is\r\n\r\n### Additional Information\r\n\r\n- Status desktop version: 0.8.1\r\n- Operating System: macOS\r\n\r\n",
  "closed_by": {
    "login": "caybro",
    "id": 5377645,
    "node_id": "MDQ6VXNlcjUzNzc2NDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/caybro",
    "html_url": "https://github.com/caybro",
    "followers_url": "https://api.github.com/users/caybro/followers",
    "following_url": "https://api.github.com/users/caybro/following{/other_user}",
    "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
    "organizations_url": "https://api.github.com/users/caybro/orgs",
    "repos_url": "https://api.github.com/users/caybro/repos",
    "events_url": "https://api.github.com/users/caybro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/caybro/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/8919/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369945733",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369945733",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369945733,
    "node_id": "IC_kwDOD5KrTM5Rp7aF",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:06:13Z",
    "updated_at": "2023-01-03T16:06:13Z",
    "author_association": "MEMBER",
    "body": "Pretty sad... we already have the ClipboardProxy method to paste HTML :/ Or is this about pasting richtext as plain text? ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369945733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369961997",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369961997",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369961997,
    "node_id": "IC_kwDOD5KrTM5Rp_YN",
    "user": {
      "login": "mprakhov",
      "id": 117639195,
      "node_id": "U_kgDOBwMIGw",
      "avatar_url": "https://avatars.githubusercontent.com/u/117639195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mprakhov",
      "html_url": "https://github.com/mprakhov",
      "followers_url": "https://api.github.com/users/mprakhov/followers",
      "following_url": "https://api.github.com/users/mprakhov/following{/other_user}",
      "gists_url": "https://api.github.com/users/mprakhov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mprakhov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mprakhov/subscriptions",
      "organizations_url": "https://api.github.com/users/mprakhov/orgs",
      "repos_url": "https://api.github.com/users/mprakhov/repos",
      "events_url": "https://api.github.com/users/mprakhov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mprakhov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:19:59Z",
    "updated_at": "2023-01-03T16:19:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Pretty sad... we already have the ClipboardProxy method to paste HTML :/ Or is this about pasting richtext as plain text?\r\n\r\nPasting text as it is.\r\nFor example, you copy part of your HTML code and want to send it to someone, but it will be converted to rich text on the input",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369961997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369963393",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369963393",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369963393,
    "node_id": "IC_kwDOD5KrTM5Rp_uB",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:21:07Z",
    "updated_at": "2023-01-03T16:21:07Z",
    "author_association": "MEMBER",
    "body": "I see; I know it won't help on Windows, but I can do exactly this by pasting via the middle-mouse click :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369963393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369964176",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369964176",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369964176,
    "node_id": "IC_kwDOD5KrTM5Rp_6Q",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:21:47Z",
    "updated_at": "2023-01-03T16:21:47Z",
    "author_association": "MEMBER",
    "body": "That bypasses our key press handlers, and uses the QML's component builtin handler",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369964176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369965940",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369965940",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369965940,
    "node_id": "IC_kwDOD5KrTM5RqAV0",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:23:25Z",
    "updated_at": "2023-01-03T16:23:25Z",
    "author_association": "MEMBER",
    "body": "But still I think this is feasible; we just need a new shortcut (like `Ctrl+Shift+V`, commonly used, e.g. in Chrome), to paste plain text. We have all the needed info/data inside the ClipboardProxy",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369965940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369967375",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369967375",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369967375,
    "node_id": "IC_kwDOD5KrTM5RqAsP",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:24:39Z",
    "updated_at": "2023-01-03T16:24:39Z",
    "author_association": "MEMBER",
    "body": "@mprakhov wanna do this or shall I take it? ;) \r\n\r\nIdeas @iurimatias @jrainville (should be fairly easy)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369967375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369970974",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369970974",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369970974,
    "node_id": "IC_kwDOD5KrTM5RqBke",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:27:51Z",
    "updated_at": "2023-01-03T16:27:51Z",
    "author_association": "MEMBER",
    "body": "In theory, we don't want to have to rely on a special shortcut or button, the normal paste should just work. If I copy the snippet above and paste in Discord normally, it appears as code and isn't parsed.\r\n\r\nAny way we can do it as well? Maybe we need to convert to entities?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369970974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369974599",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369974599",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369974599,
    "node_id": "IC_kwDOD5KrTM5RqCdH",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:31:15Z",
    "updated_at": "2023-01-03T16:31:15Z",
    "author_association": "MEMBER",
    "body": "> In theory, we don't want to have to rely on a special shortcut or button, the normal paste should just work. If I copy the snippet above and paste in Discord normally, it appears as code and isn't parsed.\r\n> \r\n> Any way we can do it as well? Maybe we need to convert to entities?\r\n\r\nYou really _do_ need a special shortcut. The way the clipboard works is that it may contain the same \"contents\" in multiple MIME formats (in this case `text/plain` and `text/html`). How do you tell the app which format to grab? We just happen to prefer HTML (rich text) but in this case we want a different format. Nothing to do with entities either",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369974599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369977420",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369977420",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369977420,
    "node_id": "IC_kwDOD5KrTM5RqDJM",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:33:41Z",
    "updated_at": "2023-01-03T16:33:41Z",
    "author_association": "MEMBER",
    "body": "> The way the clipboard works is that it may contain the same \"contents\" in multiple MIME formats (in this case text/plain and text/html). How do you tell the app which format to grab? We just happen to prefer HTML (rich text) but in this case we want a different format. \r\n\r\nCan we just always grab `text/plain` instead? I don,t think we want the html most of the time. When pasting a link, we format it ourselves for example",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369977420/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369989481",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1369989481",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1369989481,
    "node_id": "IC_kwDOD5KrTM5RqGFp",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T16:44:29Z",
    "updated_at": "2023-01-03T16:44:29Z",
    "author_association": "MEMBER",
    "body": "Hmm, it seems we're already doing this but it's probably broken :)\r\n\r\nKeyPress:\r\n```qml\r\n        if (event.matches(StandardKey.Paste)) {\r\n            if (QClipboardProxy.hasImage) {\r\n                const clipboardImage = QClipboardProxy.imageBase64\r\n                showImageArea([clipboardImage])\r\n                event.accepted = true\r\n            } else {\r\n                messageInputField.remove(messageInputField.selectionStart, messageInputField.selectionEnd)\r\n\r\n                // cursor position must be stored in a helper property because setting readonly to true causes change\r\n                // of the cursor position to the end of the input\r\n                d.copyTextStart = messageInputField.cursorPosition\r\n                messageInputField.readOnly = true\r\n\r\n                const clipboardText = globalUtils.plainText(QClipboardProxy.text)\r\n                const copiedText = globalUtils.plainText(d.copiedTextPlain)\r\n                if (copiedText === clipboardText) {\r\n                    d.internalPaste = true\r\n                } else {\r\n                    d.copiedTextPlain = \"\"\r\n                    d.copiedTextFormatted = \"\"\r\n                    d.copiedMentionsPos = []\r\n                }\r\n            }\r\n        }\r\n```\r\n\r\nand then KeyRelease:\r\n``` qml\r\n        if (d.internalPaste) {\r\n            if (d.copiedTextPlain.includes(\"@\")) {\r\n                d.copiedTextFormatted = d.copiedTextFormatted.replace(/span style=\"/g, \"span style=\\\" text-decoration:none;\")\r\n\r\n                let lastFoundIndex = -1\r\n                for (let j = 0; j < d.copiedMentionsPos.length; j++) {\r\n                    const name = d.copiedMentionsPos[j].name\r\n                    const indexOfName = d.copiedTextPlain.indexOf(name, lastFoundIndex)\r\n                    lastFoundIndex += name.length\r\n\r\n                    if (indexOfName === d.copiedMentionsPos[j].leftIndex + 1) {\r\n                        const mention = {\r\n                            name: name,\r\n                            pubKey: d.copiedMentionsPos[j].pubKey,\r\n                            leftIndex: (d.copiedMentionsPos[j].leftIndex + d.copyTextStart - 1),\r\n                            rightIndex: (d.copiedMentionsPos[j].leftIndex + d.copyTextStart + name.length)\r\n                        }\r\n                        mentionsPos.push(mention)\r\n                        d.sortMentions()\r\n                    }\r\n                }\r\n            }\r\n\r\n            const prevLength = messageInputField.length\r\n            insertInTextInput(d.copyTextStart, d.copiedTextFormatted)\r\n            messageInputField.cursorPosition = d.copyTextStart + messageInputField.length - prevLength\r\n            d.internalPaste = false\r\n        } else if (event.matches(StandardKey.Paste)) {\r\n            insertInTextInput(d.copyTextStart, QClipboardProxy.text)\r\n            messageInputField.cursorPosition = d.copyTextStart + QClipboardProxy.text.length\r\n        }\r\n```\r\n\r\n@alexjba has been working on this recently; any idea? :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1369989481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1370032492",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1370032492",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1370032492,
    "node_id": "IC_kwDOD5KrTM5RqQls",
    "user": {
      "login": "mprakhov",
      "id": 117639195,
      "node_id": "U_kgDOBwMIGw",
      "avatar_url": "https://avatars.githubusercontent.com/u/117639195?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mprakhov",
      "html_url": "https://github.com/mprakhov",
      "followers_url": "https://api.github.com/users/mprakhov/followers",
      "following_url": "https://api.github.com/users/mprakhov/following{/other_user}",
      "gists_url": "https://api.github.com/users/mprakhov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mprakhov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mprakhov/subscriptions",
      "organizations_url": "https://api.github.com/users/mprakhov/orgs",
      "repos_url": "https://api.github.com/users/mprakhov/repos",
      "events_url": "https://api.github.com/users/mprakhov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mprakhov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T17:21:50Z",
    "updated_at": "2023-01-03T17:21:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @mprakhov wanna do this or shall I take it? ;)\r\n> \r\n> Ideas @iurimatias @jrainville (should be fairly easy)\r\n\r\nyou can take it I just found and wrote out a bug",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1370032492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1370092439",
    "html_url": "https://github.com/status-im/status-desktop/issues/8919#issuecomment-1370092439",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8919",
    "id": 1370092439,
    "node_id": "IC_kwDOD5KrTM5RqfOX",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T18:27:21Z",
    "updated_at": "2023-01-03T18:27:21Z",
    "author_association": "MEMBER",
    "body": "I did some more digging, and here's the TextEdit's paste() method:\r\n\r\n```cpp\r\n    if (source->hasFormat(QLatin1String(\"application/x-qrichtext\")) && d->acceptRichText) {\r\n        // x-qrichtext is always UTF-8 (taken from Qt3 since we don't use it anymore).\r\n        const QString richtext = QLatin1String(\"<meta name=\\\"qrichtext\\\" content=\\\"1\\\" />\")\r\n                + QString::fromUtf8(source->data(QLatin1String(\"application/x-qrichtext\")));\r\n        fragment = QTextDocumentFragment::fromHtml(richtext, d->doc);\r\n        hasData = true;\r\n    } else if (source->hasHtml() && d->acceptRichText) {\r\n        fragment = QTextDocumentFragment::fromHtml(source->html(), d->doc);\r\n        hasData = true;\r\n    } else {\r\n        QString text = source->text();\r\n        if (!text.isNull()) {\r\n            fragment = QTextDocumentFragment::fromPlainText(text);\r\n            hasData = true;\r\n        }\r\n    }\r\n```\r\n\r\nIt's obvious that it prefers rich text over plain text",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1370092439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/9125",
  "id": 1534644966,
  "node_id": "I_kwDOD5KrTM5beNLm",
  "number": 9125,
  "title": "Chore: Move UI-related C++ components to a common location",
  "user": {
    "login": "micieslak",
    "id": 20650004,
    "node_id": "MDQ6VXNlcjIwNjUwMDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/micieslak",
    "html_url": "https://github.com/micieslak",
    "followers_url": "https://api.github.com/users/micieslak/followers",
    "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
    "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
    "organizations_url": "https://api.github.com/users/micieslak/orgs",
    "repos_url": "https://api.github.com/users/micieslak/repos",
    "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/micieslak/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3143640900,
      "node_id": "MDU6TGFiZWwzMTQzNjQwOTAw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/chore",
      "name": "chore",
      "color": "5AD5E4",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "micieslak",
    "id": 20650004,
    "node_id": "MDQ6VXNlcjIwNjUwMDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/micieslak",
    "html_url": "https://github.com/micieslak",
    "followers_url": "https://api.github.com/users/micieslak/followers",
    "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
    "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
    "organizations_url": "https://api.github.com/users/micieslak/orgs",
    "repos_url": "https://api.github.com/users/micieslak/repos",
    "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/micieslak/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2023-01-16T10:04:41Z",
  "updated_at": "2023-02-09T14:16:00Z",
  "closed_at": "2023-02-09T14:15:49Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nCurrently C++ components are located in `status-desktop/vendor/DOtherSide/lib`. It's problematic because some C++ based UI components would be useful also in StatusQ (e.g. `RXValidator` type). Not using C++ types seems to be a big limitation here. Additionally components like `Storybook` (`status-desktop/storybook`) also use some C++ types. Currently sharing those C++ components between Storybook and other parts of the app is problematic. E.g. it would be useful to share C++ components for hot reloading between Storybook and Monitoring app.\r\n\r\nCurrently there is also other minor issues with sharing C++ code - `SortFilterProxyModel` is a submodule in both DOtherSide (`status-desktop/vendor/DOtherSide/vendor/SortFilterProxyModel`) and in StatusQ (`status-desktop/ui/StatusQ/vendor/SortFilterProxyModel`).\r\n\r\nThe proposed solution is to keep C++ types in their \"natural\" place, and refer to them from DOtherSide configuration:\r\n- things like `RXValidator` could be kept directly in `StatusQ` because it's logically part of StatusQ (generic UI component)\r\n- `SortFilterProxyModel` could be a submodule only in StatusQ and referred from DOtherSide config as well\r\n- Storybook/Monitoring c++ types could be moved to StatusQ as well bc they are generic, or alternatively kept in shared location in the main project directory.\r\n\r\nThe drawback of that solution is fact, that then keeping `DOtherSide` as a separate module doesn't make much sense. It would refer to locations specific for the project outside of it's own directory tree.\r\n",
  "closed_by": {
    "login": "micieslak",
    "id": 20650004,
    "node_id": "MDQ6VXNlcjIwNjUwMDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/micieslak",
    "html_url": "https://github.com/micieslak",
    "followers_url": "https://api.github.com/users/micieslak/followers",
    "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
    "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
    "organizations_url": "https://api.github.com/users/micieslak/orgs",
    "repos_url": "https://api.github.com/users/micieslak/repos",
    "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/micieslak/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/9125/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1383821504",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1383821504",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1383821504,
    "node_id": "IC_kwDOD5KrTM5Se3DA",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T10:24:18Z",
    "updated_at": "2023-01-16T10:24:18Z",
    "author_association": "MEMBER",
    "body": "Yes, very much agree",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1383821504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1383987428",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1383987428",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1383987428,
    "node_id": "IC_kwDOD5KrTM5Sffjk",
    "user": {
      "login": "alexandraB99",
      "id": 31625338,
      "node_id": "MDQ6VXNlcjMxNjI1MzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/31625338?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexandraB99",
      "html_url": "https://github.com/alexandraB99",
      "followers_url": "https://api.github.com/users/alexandraB99/followers",
      "following_url": "https://api.github.com/users/alexandraB99/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexandraB99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexandraB99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexandraB99/subscriptions",
      "organizations_url": "https://api.github.com/users/alexandraB99/orgs",
      "repos_url": "https://api.github.com/users/alexandraB99/repos",
      "events_url": "https://api.github.com/users/alexandraB99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexandraB99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T12:31:56Z",
    "updated_at": "2023-01-16T12:31:56Z",
    "author_association": "COLLABORATOR",
    "body": "+1 from me and also to consider `SyntaxHighligther`",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1383987428/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384011115",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1384011115",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1384011115,
    "node_id": "IC_kwDOD5KrTM5SflVr",
    "user": {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T12:51:02Z",
    "updated_at": "2023-01-16T12:51:02Z",
    "author_association": "MEMBER",
    "body": "> +1 from me and also to consider `SyntaxHighligther`\r\n\r\nYeah, everything like that. So do we agree on merging `DOtherSide` into `status-desktop` like we did (but for other reason) with `StatusQ`?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384011115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384021344",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1384021344",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1384021344,
    "node_id": "IC_kwDOD5KrTM5Sfn1g",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T13:00:54Z",
    "updated_at": "2023-01-16T13:00:54Z",
    "author_association": "MEMBER",
    "body": "imho you don't necessarily need to separate the stuff in the first step; merely having DOtherSide in one place (and built only once!) is already a considerable improvement ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384021344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384037440",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1384037440",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1384037440,
    "node_id": "IC_kwDOD5KrTM5SfrxA",
    "user": {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T13:11:07Z",
    "updated_at": "2023-01-16T13:11:07Z",
    "author_association": "MEMBER",
    "body": "Yeah, probably it should be the second step but the complementary one. Even now `DOtherSide` repo is not generic thing that could be easily used in other projects. And after described changes it will contain assumptions about external paths (to e.g. StatusQ's c++ components).\r\n\r\nAnother idea: we could keep DOtherSide in a separate repo as so far, as lean as possible, and provide additional C++ files via some configuration variables. But I wonder if it's worth of that effort of adjusting cmake configs for that.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384037440/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384055196",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1384055196",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1384055196,
    "node_id": "IC_kwDOD5KrTM5SfwGc",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T13:21:59Z",
    "updated_at": "2023-01-16T13:21:59Z",
    "author_association": "MEMBER",
    "body": "> Yeah, probably it should be the second step but the complementary one. Even now `DOtherSide` repo is not generic thing that could be easily used in other projects. And after described changes it will contain assumptions about external paths (to e.g. StatusQ's c++ components).\r\n> \r\n> Another idea: we could keep DOtherSide in a separate repo as so far, as lean as possible, and provide additional C++ files via some configuration variables. But I wonder if it's worth of that effort of adjusting cmake configs for that.\r\n\r\nimho not, we diverged so much from the upstream project",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384055196/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384246830",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1384246830",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1384246830,
    "node_id": "IC_kwDOD5KrTM5Sge4u",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T15:57:00Z",
    "updated_at": "2023-01-16T15:57:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well, tbh, I don't like the idea of making `DOtherSide` a bidirectional dependency. It's generally better to keep dependencies unidirectional and well-defined, especially that there is `nimqml` in between.\r\n\r\n> Currently C++ components are located in `status-desktop/vendor/DOtherSide/lib`. It's problematic because some C++ based UI components would be useful also in StatusQ (e.g. `RXValidator` type). Not using C++ types seems to be a big limitation here.\r\n\r\n`StatusQ` is not a separate library, it is just a logical part of our app, nothing else. It means, we can use everything exposed through `DOtherSide` the same as we do for `nim-app`:\r\n![image](https://user-images.githubusercontent.com/33099791/212717895-8cf3726d-ee80-44ea-920f-009021b87578.png)\r\n\r\n> Currently there is also other minor issues with sharing C++ code - SortFilterProxyModel is a submodule in both DOtherSide (status-desktop/vendor/DOtherSide/vendor/SortFilterProxyModel) and in StatusQ (status-desktop/ui/StatusQ/vendor/SortFilterProxyModel).\r\n\r\nThat's only because of `sandbox-app` (that we no longer support?). It can be easily solved by linking it against `DOtherSide` rather than `SortFilterProxyModel`. It will also make `sandbox-app` work properly if any `StatusQ` component uses something exposed by `DOtherSide`.\r\n\r\n![image](https://user-images.githubusercontent.com/33099791/212718647-1fae90e1-6303-42f3-a697-b75ef1ba1a0f.png)\r\n\r\nWe don't probably want to link against `DoOtherSide` as it is too heavy. \r\n\r\nFrom the separation of concerns point of view, and to keep dependencies unidirectional the following would be ideal:\r\n![image](https://user-images.githubusercontent.com/33099791/212719051-cb5b0c21-06e6-4df7-a028-ca995c18c24d.png)\r\n\r\nWe can make `status-cpp-extensions` a part of `DOtherSide` to avoid the burden of creating PRs in many different repos.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384246830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384672478",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1384672478",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1384672478,
    "node_id": "IC_kwDOD5KrTM5SiGze",
    "user": {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-16T23:35:18Z",
    "updated_at": "2023-01-16T23:35:18Z",
    "author_association": "MEMBER",
    "body": "Thank you @osmaczko for your response. It turns out that we have different understanding about that part. Let's clarify it a bit to find a golden mean :)\r\n\r\n> StatusQ is not a separate library, it is just a logical part of our app, nothing else.\r\n\r\nFrom what I understand, we want to keep it as was a separate library. It was in a separate repo but we merged it only for convenience. And we created guards to keep dependency unidirectional and library-like form. It's not built as a library, that's true, but it's quite self-contained, has own demo-app and tests, configured in a standard way via cmake.\r\n\r\n> It means, we can use everything exposed through DOtherSide the same as we do for nim-app\r\n\r\nHow we could do that? `Sandbox`'s cmake config would have to refer to `DOtherSide` location in `status-desktop`. This location is of course outside of `StatusQ` base dir. It would make (currently totally independent) `StatusQ` heavily dependent on stuff that we keep in specific locations of `status-desktop`.\r\n\r\nThe approach from the third diagram imo has the same problem. It would work only if we would stop treating StatusQ as a self-contained lib and exclude sandbox-app to upper directory (to avoid referring like `../../vendor/DOtherSide`).\r\n\r\nThe idea behind this task is to keep c++ stuff in proper place, not artificial place enforced by nim-related limitations:\r\n\r\n- cpp ui componets, like e.g. `RxValidator` would be kept within `StatusQ` directory. It could be used in other, higher level qml components in a regular way. For `sandbox-app` app or `tests` config it would be easily accessible (no need to refer external content).\r\n- cpp components for Storybook could be similarly located in `storybook` directory\r\n- cpp components specific for `status-desktop` (not sure if we have them right now) could be stored also in \"standard\" location for them, not in a very speficic external submodule.\r\n\r\nIn this approach role of `DOtherSide` should be understood in a slightly different way than so far.\r\nIt should be treated just as a tool allowing building the qt/qml app combined with some nim sources. It just takes c++ sources needed by the app (e.g. from StatusQ or direct c++ components of status-desktop) and builds them because while `nim` is involved it cannot be done in a standard way (regular cmake config). In this approach `DOtherSide` doesn't contain any sources which logically belong to other modules (status-desktop, StatusQ, Storybook). So imo there is no bidirectional dependency imo.\r\n\r\nRephrasing:\r\n- StatusQ uses standard cmake-based config for building (sandbox, tests). C++ sources are just within `StatusQ`'s dir.\r\n- Storybook also uses standard cmake-based config. Specific for Storybook c++ components (e.g. custom cpp models) are also stored in Storybook's location\r\n- status-desktop doesn't use standard cmake config because of Nim. Therefore it uses `DOtherSide` to accomplish this goal. Specific c++ components for status-desktop are located in a standard location (more or less like in other qt/qml projects). `DOtherSide` as a build helper refers to all those locations needed to build the app and create lib cooperating smoothly with rest of nim logic and qml part.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1384672478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1385167022",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1385167022",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1385167022,
    "node_id": "IC_kwDOD5KrTM5Sj_iu",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-17T10:24:23Z",
    "updated_at": "2023-01-17T10:24:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "> From what I understand, we want to keep it as was a separate library. It was in a separate repo but we merged it only for convenience. And we created guards to keep dependency unidirectional and library-like form. It's not built as a library, that's true, but it's quite self-contained, has own demo-app and tests, configured in a standard way via cmake.\r\n\r\nIf you take a look at it that way, then yes, StatusQ is a separate package. For nim-app StatusQ is just a qml subdirectory, it is not built as a library and the sources are treated as if they belong to nim-app. That's why when you do `import DotherSide 0.1` in any StatusQ component and run the nim-app, it will simply work. Of course, it would break sandbox-app and imports checker, to fix that we would need to make StatusQ DOtherSide aware, as mentioned before.\r\n\r\n> How we could do that? Sandbox's cmake config would have to refer to DOtherSide location in status-desktop. This location is of course outside of StatusQ base dir. It would make (currently totally independent) StatusQ heavily dependent on stuff that we keep in specific locations of status-desktop.\r\n\r\nWell, we either keep StatusQ totally independent and provide the DOtherSide the same way as we do with SortFilterProxyModel now, effectively duplicating nim-app repo dependencies or we do a compromise and refer to the parent directory for vendors. I wouldn't name it a \"heavy\" dependency.\r\n\r\n> The idea behind this task is to keep c++ stuff in proper place, not artificial place enforced by nim-related limitations\r\n\r\nYes, that makes a lot of sense to me. On one hand, making DoOtherSide dependent on StatusQ screams \"no, please don't\", on the other, bringing the benefits you mention makes it feel ok.\r\n\r\n> So imo there is no bidirectional dependency imo.\r\n\r\nAgreed, there is no bidirectional dependency.\r\n![image](https://user-images.githubusercontent.com/33099791/212871966-eda19b2e-b26a-4132-9ab9-14a3aac04ef9.png)\r\n\r\nAll in all, your arguments convinced me, green light from me.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1385167022/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1424258409",
    "html_url": "https://github.com/status-im/status-desktop/issues/9125#issuecomment-1424258409",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9125",
    "id": 1424258409,
    "node_id": "IC_kwDOD5KrTM5U5HVp",
    "user": {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-09T14:15:49Z",
    "updated_at": "2023-02-09T14:16:00Z",
    "author_association": "MEMBER",
    "body": "Subtasks done and merged, closing.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1424258409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/10322",
  "id": 1669422553,
  "node_id": "I_kwDOD5KrTM5jgV3Z",
  "number": 10322,
  "title": "Community History Archive download extremely delayed",
  "user": {
    "login": "John-44",
    "id": 22846356,
    "node_id": "MDQ6VXNlcjIyODQ2MzU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/John-44",
    "html_url": "https://github.com/John-44",
    "followers_url": "https://api.github.com/users/John-44/followers",
    "following_url": "https://api.github.com/users/John-44/following{/other_user}",
    "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
    "organizations_url": "https://api.github.com/users/John-44/orgs",
    "repos_url": "https://api.github.com/users/John-44/repos",
    "events_url": "https://api.github.com/users/John-44/events{/privacy}",
    "received_events_url": "https://api.github.com/users/John-44/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5745637395,
      "node_id": "LA_kwDOD5KrTM8AAAABVnd4Ew",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Community%20Bugfixes%20MVP",
      "name": "E:Desktop Community Bugfixes MVP",
      "color": "01CE46",
      "default": false,
      "description": "Misc bug fixes about communities that are due for the MVP"
    },
    {
      "id": 6176323312,
      "node_id": "LA_kwDOD5KrTM8AAAABcCM28A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Bugfixes%200.15.5",
      "name": "E:Desktop Bugfixes 0.15.5",
      "color": "BFE9C3",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [
    {
      "login": "borismelnik",
      "id": 82511785,
      "node_id": "MDQ6VXNlcjgyNTExNzg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/82511785?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/borismelnik",
      "html_url": "https://github.com/borismelnik",
      "followers_url": "https://api.github.com/users/borismelnik/followers",
      "following_url": "https://api.github.com/users/borismelnik/following{/other_user}",
      "gists_url": "https://api.github.com/users/borismelnik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/borismelnik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/borismelnik/subscriptions",
      "organizations_url": "https://api.github.com/users/borismelnik/orgs",
      "repos_url": "https://api.github.com/users/borismelnik/repos",
      "events_url": "https://api.github.com/users/borismelnik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/borismelnik/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/77",
    "html_url": "https://github.com/status-im/status-desktop/milestone/77",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/77/labels",
    "id": 9909318,
    "node_id": "MI_kwDOD5KrTM4AlzRG",
    "number": 77,
    "title": "0.15.5 - Stabilizing release",
    "description": "A point milestone where we focus the Messaging and Communities team 100% on bug fixing, stabilisation, reliability and finishing any unfinished items from 0.15  \r\n\r\n**1.  Fix bug and stabilise Communities and Messaging functionality**\r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase **\r\n\r\n\r\n\r\n--- Wallet ---\r\n\r\n- Improved handling of community minted tokens: Community Asset and NFT designs for Asset screens\r\n- Token visibility management\r\n- Minor updates to Asset screens\r\n- Continue work on WalletConnect integration\r\n- Database re-encryption flows",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 131,
    "closed_issues": 39,
    "state": "open",
    "created_at": "2023-09-11T16:40:59Z",
    "updated_at": "2023-11-23T18:58:09Z",
    "due_on": "2023-12-07T08:00:00Z",
    "closed_at": null
  },
  "comments": 9,
  "created_at": "2023-04-15T14:14:44Z",
  "updated_at": "2023-11-23T18:22:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Version 0.11, Windows 10\r\n\r\nI performed a clean fresh install of Status Desktop, and restored via seed phrase around 60 hours ago, Status Desktop has been running continually since then, and the community history archive download and unpack hasn't happened yet.\r\n\r\nEither it is:\r\nA) delayed (in which case this needs to be fixed) \r\n*or*\r\nB) it is broken (in which case it also needs to be fixed)\r\n\r\nI remember that previously we had an issue with the history download sometimes not starting for up to 7 days after a user joins a community.  This issue is to track fixing this.\r\n\r\nIf the owner node is (when online) is posting the torrent link to waku every say 8 hours (or if offline for more than 8 hours, it posts the torrent link to waku as soon as it comes online), then as long as the owner node has been online once in the last 30 days, a community member's install of Status Desktop should always be able to fetch the latest torrent link from waku store nodes at the same time as all the other initial fetching of messages from waku store nodes is performed.  Is this correct?  If so there must be a bug somewhere that is preventing this from working.  \r\n\r\nThere was a bug with fetching historical messages older than 24h from waku store nodes that I think @richard-ramos has now fixed, I wonder if this bug was impacting the Community History Archive service?\r\n\r\n--------------------\r\n**Desired resolution:**\r\n\r\n- The download of the latest Community History Archive should start within 1 hour of a user joining a new community (or within 1 hour of a community member performing a fresh install of Status Desktop and restoring their communities via either syncing with another device or from the backup to waku).\r\n\r\n\r\n\r\n \r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/10322/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1511736592",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1511736592",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1511736592,
    "node_id": "IC_kwDOD5KrTM5aG0UQ",
    "user": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T16:51:57Z",
    "updated_at": "2023-04-17T16:51:57Z",
    "author_association": "NONE",
    "body": "Update: it has finally worked, history has now been successfully downloaded and unpacked! :-)   So the issue to solve here is fixing whatever is preventing it from being started in a more timely manner ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1511736592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1511742162",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1511742162",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1511742162,
    "node_id": "IC_kwDOD5KrTM5aG1rS",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T16:56:12Z",
    "updated_at": "2023-04-17T16:56:12Z",
    "author_association": "MEMBER",
    "body": "Ah thanks for the update.\r\n\r\nI am currently investigating, but I don't have full knowledge. At least now I know it can still work.\r\n\r\nI'll try to figure out why it takes so long. I saw in my prod logs that I do receive the magnet links. I didn't have debug enabled on my dev one sadly, so I don't know yet if it received them.\r\n\r\nI'll try to figure it out today, but if I can't, I'll just wait for Pascal to be back. Since it's not completely broken, it's not as big a priority as I figured.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1511742162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1511879642",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1511879642",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1511879642,
    "node_id": "IC_kwDOD5KrTM5aHXPa",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T18:29:21Z",
    "updated_at": "2023-04-17T18:29:21Z",
    "author_association": "MEMBER",
    "body": "It triggered for me too. I created the account last Friday, didn't use it during the weekend, so it took ~10 hours.\r\n\r\nI'll leave it to Pascal to try to shorten it if he can when he's back.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1511879642/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517587104",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1517587104",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1517587104,
    "node_id": "IC_kwDOD5KrTM5adIqg",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T10:00:54Z",
    "updated_at": "2023-04-21T10:00:54Z",
    "author_association": "MEMBER",
    "body": "Just restored an account recently and for me it started almost immediately (in fact I could see the new messages signals in console even before the UI showed up)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517587104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517622186",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1517622186",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1517622186,
    "node_id": "IC_kwDOD5KrTM5adROq",
    "user": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T10:29:26Z",
    "updated_at": "2023-04-21T10:29:26Z",
    "author_association": "NONE",
    "body": "> Just restored an account recently and for me it started almost immediately (in fact I could see the new messages signals in console even before the UI showed up)\r\n\r\n@caybro were you using 0.11 or Master?\r\n\r\nAsking because I wonder if the recently fixed bug with fetching messages from waku store nodes may have fixed this?  I think this bug has recently been fixed in master (and is definitely present in 0.11) ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517622186/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517673273",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1517673273",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1517673273,
    "node_id": "IC_kwDOD5KrTM5adds5",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T11:17:30Z",
    "updated_at": "2023-04-21T11:17:30Z",
    "author_association": "MEMBER",
    "body": "> > Just restored an account recently and for me it started almost immediately (in fact I could see the new messages signals in console even before the UI showed up)\r\n> \r\n> @caybro were you using 0.11 or Master?\r\n> \r\n> Asking because I wonder if the recently fixed bug with fetching messages from waku store nodes may have fixed this? I think this bug has recently been fixed in master (and is definitely present in 0.11)\r\n\r\nI've been on master, so it looks like it indeed got fixed there",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517673273/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517677157",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1517677157",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1517677157,
    "node_id": "IC_kwDOD5KrTM5adepl",
    "user": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T11:21:39Z",
    "updated_at": "2023-04-21T11:21:39Z",
    "author_association": "NONE",
    "body": "> > > Just restored an account recently and for me it started almost immediately (in fact I could see the new messages signals in console even before the UI showed up)\r\n> > \r\n> > \r\n> > @caybro were you using 0.11 or Master?\r\n> > Asking because I wonder if the recently fixed bug with fetching messages from waku store nodes may have fixed this? I think this bug has recently been fixed in master (and is definitely present in 0.11)\r\n> \r\n> I've been on master, so it looks like it indeed got fixed there\r\n\r\nNice! But we should leave this issue open until QA have confirmed that this issue is fixed, because there is also a chance that fortuitous timing of when you chose to restore being the cause of the download starting immediately (need to test this multiple times, at different times, to be sure it is fixed).  \r\n\r\nI wonder if the \"missing requests to join community\" issue that @iurimatias has been facing is also connected to this (hopefully now fixed in master) waku message retrieval from store node bug?  We shall see!",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1517677157/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1531010774",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1531010774",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1531010774,
    "node_id": "IC_kwDOD5KrTM5bQV7W",
    "user": {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-02T07:29:27Z",
    "updated_at": "2023-05-02T07:29:27Z",
    "author_association": "MEMBER",
    "body": "> I performed a clean fresh install of Status Desktop, and restored via seed phrase around 60 hours ago, Status Desktop has been running continually since then, and the community history archive download and unpack hasn't happened yet.\r\n\r\n> Either it is:\r\nA) delayed (in which case this needs to be fixed)\r\nor\r\nB) it is broken (in which case it also needs to be fixed)\r\n\r\nThere are various reasons why it might take some time for the archive protocol to kick in:\r\n\r\n1. Your node has not received a magnet link message yet (maybe even failed to get one from store nodes)\r\n2. Your node has received a magnet link message but it's outdated (no torrent is served for this link anymore)\r\n3. Your node has received a magnet link, but the torrent timed out, so it has to wait for the next one\r\n4. Your node has received a magnet link and it actually started doing its work, it just takes a while\r\n5. Or something is indeed broken\r\n\r\nA look at your logs around that time should give us enough insights (I've put plenty of them in there).\r\n\r\n> I remember that previously we had an issue with the history download sometimes not starting for up to 7 days after a user joins a community. This issue is to track fixing this.\r\n\r\n^ This is the case where a node receives a magnet link, tries to fetch the torrent info from the torrent network and fails to do so (it times out). When that happens, we retry again. If it still times out we just let it be and wait for the next magnet link, which is publish by the owner node as soon as it comes online again (or when it creates new archives).\r\n\r\n> If the owner node is (when online) is posting the torrent link to waku every say 8 hours (or if offline for more than 8 hours, it posts the torrent link to waku as soon as it comes online), then as long as the owner node has been online once in the last 30 days, a community member's install of Status Desktop should always be able to fetch the latest torrent link from waku store nodes at the same time as all the other initial fetching of messages from waku store nodes is performed. Is this correct? If so there must be a bug somewhere that is preventing this from working.\r\n\r\nThis is correct, except that right now the owner node does not republish a magnet link every 8 hours.\r\nIt publishes it whenever it starts seeding a torrent for a community. This happens when:\r\n\r\na) The owner node comes online, and it already has a torrent file to be seeded\r\nb) The owner node creates new archives, updates the torrent file, and then seeds it\r\n\r\nDue to a) this basically means, whenever the node comes online it'll publish a magnet link if it has a torrent to seed.\r\nMember nodes keep track of the last magnet link they've seen, so they ignore it if they've seen it before.\r\n\r\n> The download of the latest Community History Archive should start within 1 hour of a user joining a new community (or within 1 hour of a community member performing a fresh install of Status Desktop and restoring their communities via either syncing with another device or from the backup to waku)\r\n\r\nDownload of community archives will start as soon as a member node has received the torrent info from the magnet link.\r\nWhen joining a community, the community member will receive a magnet link along with its invite. If the torrent is available at that time, it will start the download (assuming it doesn't time out).\r\n\r\nIt's gonna be hard to put the 1 hour time constraint on that, because we never have the guarantee that someone is actually seeding the torrent.\r\n\r\nI believe all in all, it'd be better to have some UI feedback for the user when loading of archives is happening. \r\nWe can even show some progress with #n out of #m data pieces/archives so users get a feel for the progress...",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1531010774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1535249969",
    "html_url": "https://github.com/status-im/status-desktop/issues/10322#issuecomment-1535249969",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10322",
    "id": 1535249969,
    "node_id": "IC_kwDOD5KrTM5bgg4x",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T18:51:56Z",
    "updated_at": "2023-05-04T18:51:56Z",
    "author_association": "MEMBER",
    "body": "Moving to 0.13 as there is no easy fix doable in time for 0.12",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1535249969/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

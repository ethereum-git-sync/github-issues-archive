{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/8863",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/8863/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/8863/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/8863/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/8863",
  "id": 1504764679,
  "node_id": "I_kwDOD5KrTM5ZsOMH",
  "number": 8863,
  "title": "Enable copy messageID and envelopeHash on Debug mode",
  "user": {
    "login": "richard-ramos",
    "id": 1106587,
    "node_id": "MDQ6VXNlcjExMDY1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/richard-ramos",
    "html_url": "https://github.com/richard-ramos",
    "followers_url": "https://api.github.com/users/richard-ramos/followers",
    "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
    "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
    "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
    "repos_url": "https://api.github.com/users/richard-ramos/repos",
    "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 3205515124,
      "node_id": "MDU6TGFiZWwzMjA1NTE1MTI0",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/priority%20F2:%20important",
      "name": "priority F2: important",
      "color": "FBCA04",
      "default": false,
      "description": "a feature the app should have if possible, has high business value but the app can work without it"
    },
    {
      "id": 3904273342,
      "node_id": "LA_kwDOD5KrTM7otnu-",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Wakuv2",
      "name": "E:Wakuv2",
      "color": "BC5398",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-12-20T15:36:47Z",
  "updated_at": "2023-04-25T15:27:24Z",
  "closed_at": "2023-04-25T15:27:24Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "The messageID and envelopeHash are useful information for debugging message loss in WakuV2. \r\nCurrently the process to obtain the message ID and the envelope hash is cumbersome as we need to go inside geth.log or inside the DB or temporarily modify the database to see the message ID\r\n\r\nTo solve this, the following changes must be done:\r\n1. Modify status-go user_messages table to add a column to store the envelope hash\r\n2. When inserting the message in the table in the message handler, insert also the envelope hash\r\n3. The functions to retrieve messages should also return the envelope hash.\r\n4. If DEBUG mode is enabled on desktop, in the context menu for the messages the following options must be added:\r\n- Copy messageID\r\n- Copy envelopeHash\r\n\r\ncc: @cammellos for his feedback, in case he has concerns about storage use or privacy concerns due to storing the envelopeHash. Perhaps this is something that should be done only if debug mode is enabled? \r\n",
  "closed_by": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/8863/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/8863/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1359625622",
    "html_url": "https://github.com/status-im/status-desktop/issues/8863#issuecomment-1359625622",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8863",
    "id": 1359625622,
    "node_id": "IC_kwDOD5KrTM5RCj2W",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-20T16:06:17Z",
    "updated_at": "2022-12-20T16:06:17Z",
    "author_association": "MEMBER",
    "body": "@richard-ramos I generally rather keep debug/production separate, so having it in the logs would be my preference rather than writing it in the database, for us in mobile logs are more accessible than databases, but I understand if that's really needed on desktop.\r\n\r\nThe envelope Hash that I saw being used is the `Sha256` of the `proto.Marshal(WakuMessage)`, is that correct?\r\nif that's correct, the issue is that a single message could have multiple hashes, since it might be re-transmitted multiple times, refreshing the timestamp & therefore the hash, unless I am mistaking.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1359625622/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

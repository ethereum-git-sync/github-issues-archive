{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12677",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12677/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12677/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12677/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12677",
  "id": 1986371311,
  "node_id": "I_kwDOD5KrTM52ZZ7v",
  "number": 12677,
  "title": "Stickers still show in the recent list after being uninstalled",
  "user": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 6014771087,
      "node_id": "LA_kwDOD5KrTM8AAAABZoIfjw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Chat%20Input",
      "name": "E:Desktop Chat Input",
      "color": "DDC1F7",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "kounkou",
    "id": 2589171,
    "node_id": "MDQ6VXNlcjI1ODkxNzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kounkou",
    "html_url": "https://github.com/kounkou",
    "followers_url": "https://api.github.com/users/kounkou/followers",
    "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
    "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
    "organizations_url": "https://api.github.com/users/kounkou/orgs",
    "repos_url": "https://api.github.com/users/kounkou/repos",
    "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kounkou/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/61",
    "html_url": "https://github.com/status-im/status-desktop/milestone/61",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/61/labels",
    "id": 8739485,
    "node_id": "MI_kwDOD5KrTM4AhVqd",
    "number": 61,
    "title": "0.16",
    "description": "**1.  Fix bug and stabilise Communities and Messaging functionality**\r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase **\r\n\r\n\r\n\r\n**--- Wallet Team ---**\r\n\r\n1. Complete support for Community minted assets\r\n\r\n2. Complete token visibility management screens\r\n\r\n3. Continue working on WalletConnect support\r\n\r\n4. Minor updates to Asset screens\r\n\r\n5. Continue fixing bugs, making optimisations and keeping tech debt low\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 156,
    "closed_issues": 109,
    "state": "open",
    "created_at": "2022-12-09T15:06:43Z",
    "updated_at": "2023-12-14T18:34:58Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 2,
  "created_at": "2023-11-09T20:41:03Z",
  "updated_at": "2023-12-15T04:52:30Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "#### Steps to reproduce:\n\n1. Buy or install new stickers\n2. Use some stickers from the new stickers pack\n3. Uninstall stickers\n\nResult: There are uninstalled stickers in the recently used stickers section\n\n![image](https://github.com/status-im/status-desktop/assets/11926403/9162c30f-be47-4824-8473-1df744d627c0)\n\n### Expected behaviour\n\nOnce a pack is uninstalled, all the stickers from that pack should be removed from the recent list (in the UI and also in the saved settings so that they stay out on app restart)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12677/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12677/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1853177619",
    "html_url": "https://github.com/status-im/status-desktop/issues/12677#issuecomment-1853177619",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12677",
    "id": 1853177619,
    "node_id": "IC_kwDOD5KrTM5udT8T",
    "user": {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-13T02:41:33Z",
    "updated_at": "2023-12-13T02:42:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi,\r\nI could reproduce the issue by following the steps taken by jrainville@\r\nI will now investigate why there Sticker still appear while the sticker pack was uninstalled. On below screenshot, the sticker is still present while the sticker pack containing the sticker was removed\r\n\r\n![Screenshot from 2023-12-12 20-41-07](https://github.com/status-im/status-desktop/assets/2589171/1af73bf5-486c-4352-a4a3-ac108da20c43)\r\n\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1853177619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1857274928",
    "html_url": "https://github.com/status-im/status-desktop/issues/12677#issuecomment-1857274928",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12677",
    "id": 1857274928,
    "node_id": "IC_kwDOD5KrTM5us8Qw",
    "user": {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-15T04:52:28Z",
    "updated_at": "2023-12-15T04:52:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "From my analysis, it turns out, the function that retrieves the list of recentStickers doesn't take care of cross checking if there is any active Sticker packs or even if the stickers are part of at least one of the active packs.\r\nIt seems logical to check those before returning the final list of stickers.\r\n\r\n```go\r\nfunc (api *API) recentStickers() ([]Sticker, error) {\r\n...\r\n```\r\nFor info, here is the structure of the Sticker : \r\n```\r\ntype Sticker struct {\r\n\tPackID *bigint.BigInt `json:\"packID,omitempty\"`\r\n\tURL    string         `json:\"url,omitempty\"`\r\n\tHash   string         `json:\"hash,omitempty\"`\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1857274928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

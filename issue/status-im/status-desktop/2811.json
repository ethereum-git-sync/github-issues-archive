{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/2811",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/2811",
  "id": 935955574,
  "node_id": "MDU6SXNzdWU5MzU5NTU1NzQ=",
  "number": 2811,
  "title": "Agree on Spec & implement user status on a community",
  "user": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2588688093,
      "node_id": "MDU6TGFiZWwyNTg4Njg4MDkz",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Communities",
      "name": "Communities",
      "color": "3923e0",
      "default": false,
      "description": ""
    },
    {
      "id": 3123853734,
      "node_id": "MDU6TGFiZWwzMTIzODUzNzM0",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/phase2b",
      "name": "phase2b",
      "color": "4866BB",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "richard-ramos",
    "id": 1106587,
    "node_id": "MDQ6VXNlcjExMDY1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/richard-ramos",
    "html_url": "https://github.com/richard-ramos",
    "followers_url": "https://api.github.com/users/richard-ramos/followers",
    "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
    "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
    "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
    "repos_url": "https://api.github.com/users/richard-ramos/repos",
    "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/29",
    "html_url": "https://github.com/status-im/status-desktop/milestone/29",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/29/labels",
    "id": 6912449,
    "node_id": "MDk6TWlsZXN0b25lNjkxMjQ0OQ==",
    "number": 29,
    "title": "Rats Cohort - Iteration 2",
    "description": "",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 29,
    "state": "closed",
    "created_at": "2021-07-02T16:48:56Z",
    "updated_at": "2021-08-27T16:28:34Z",
    "due_on": "2021-07-11T07:00:00Z",
    "closed_at": "2021-08-27T16:28:34Z"
  },
  "comments": 5,
  "created_at": "2021-07-02T17:40:13Z",
  "updated_at": "2021-07-22T17:48:53Z",
  "closed_at": "2021-07-22T17:48:53Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "To support seeing who is online or not in a community it should be possible to do this with a under the hood channel that each client can send a ping every X minutes, when the app quits it can send a offline ping, no ping in the last X minutes can interpreted as a offline state. We should talk to @cammellos to agree on whatever method is chosen before implementing.",
  "closed_by": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/2811/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/875884301",
    "html_url": "https://github.com/status-im/status-desktop/issues/2811#issuecomment-875884301",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811",
    "id": 875884301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTg4NDMwMQ==",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-07T19:48:11Z",
    "updated_at": "2021-07-08T13:45:23Z",
    "author_association": "MEMBER",
    "body": "**StatusMessage**\r\nStatus messages are used to indicate to other nodes the current status of an user account. Clients are expected to use the `status_type` to visually represent the status of the users that belong to a community, or the status of an added contact. Devices receiving a status message from another paired device should update their own status if the received message has a newer `clock` field value.\r\n\r\n\r\n```\r\nmessage StatusMessage {\r\n  uint64 clock = 1\r\n  \r\n  StatusType status_type = 7;\r\n  \r\n  string custom_emoji = 3\r\n  \r\n  string custom_text = 4\r\n  \r\n  enum StatusType {\r\n    UNKNOWN_STATUS_TYPE = 0;\r\n    ONLINE = 1;\r\n    DO_NOT_DISTURB = 2;\r\n  }\r\n}\r\n```\r\n\r\nClients MUST specify `clock`, `status_type`, and optionally `custom_emoji` and `custom_text`. For better developer experience this specifications RECOMMENDS creating a function that a user would call to set their current status, and then, the client will periodically send a status message every N minutes containing the latest user's status. The `custom_emoji` and `custom_text` are optional values that can be used to extend the user status with extra content with a free form short messaje and Unicode emoji\r\n\r\nClients MUST sanitize the payload before accessing its content, in particular the `custom_emoji` and `custom_text` fields\r\n\r\nStatus messages are sent into specific topics: \r\n- With communities, a topic derived from the community-id with the suffix `-ping` concatenated. \r\n- ~~With contacts, a topic derived from the contact's public key with the suffix `-ping` concatenated.~~\r\n- To know the status of a contact, their updates will be sent in their \"contact-code\" topic\r\n\r\nA filter SHOULD be created in the clients using the topics created for a community and contacts to subscribe to the status messages. Mailservers will store these messages since Waku v1 does not have a way to identify if a message is ephemeral and should not be stored in the database, but clients SHOULD not request stored messages from these topics. (An issue has been opened for Waku V2 to introduce the concept of [ephemeral messages](https://github.com/vacp2p/rfc/issues/424))\r\n\r\nSince these messages can be thought as the equivalent of a heartbeat message, clients can visually change the representation for the online status depending on the time that has passed since the last time a status message has been received for some user account, and mark a user as offline if the user has not sent a status message in a considerable amount of time\r\n\r\nTwo new settings are expected to be created on the user's database setting table:\r\n- `send-status-updates`, a `boolean` value indicating whether the status will be sent or not. This feature is opt-out, so the default value is `true`\r\n- `current-status-type`, an `int` value matching the `StatusType` enum.\r\n- `custom-status-emoji`, an optional `string` value that can be used to asociate an emoji to a custom status. Empty by default\r\n- `custom-status-text`, an optional `string` value containing a custom status text. Empty by default\r\n\r\ncc: @iurimatias @cammellos @corpetty \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/875884301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876212018",
    "html_url": "https://github.com/status-im/status-desktop/issues/2811#issuecomment-876212018",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811",
    "id": 876212018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjIxMjAxOA==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T07:45:25Z",
    "updated_at": "2021-07-08T07:45:32Z",
    "author_association": "MEMBER",
    "body": "> With contacts, a topic derived from the contact's public key with the suffix -ping concatenated.\r\n\r\n\r\nNot sure about this, you mean to send a message to each contact you have? I think that would be too expensive and generate quite a lot of traffic.\r\nThere's some way around it, but it's difficult not too disclose the fact that you are online to non-contacts, while status could be protected.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876212018/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876426917",
    "html_url": "https://github.com/status-im/status-desktop/issues/2811#issuecomment-876426917",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811",
    "id": 876426917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjQyNjkxNw==",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T13:11:15Z",
    "updated_at": "2021-07-08T13:11:15Z",
    "author_association": "MEMBER",
    "body": "> Not sure about this, you mean to send a message to each contact you have? I think that would be too expensive and generate quite a lot of traffic.\r\n\r\nI mean to have something similar to the timeline status updates. Currently users create a timeline status update by sending a message to a public channel whose id is their own public key,  and any user that adds you as a contact will automatically subscribe to your pubkey channel.\r\n\r\nI want to have something similar for status updates, so when a user adds you as a contact they would also subscribe to a channel where the user will periodically send the status updates. (I think we could even reuse the same timeline channel).",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876426917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876429723",
    "html_url": "https://github.com/status-im/status-desktop/issues/2811#issuecomment-876429723",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811",
    "id": 876429723,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjQyOTcyMw==",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T13:14:57Z",
    "updated_at": "2021-07-08T13:14:57Z",
    "author_association": "MEMBER",
    "body": "Yes, that sounds ok, so basically you only publish once, not each for contact. We already have a topic we can use, the \"contact-code\" topic",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876429723/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/883012827",
    "html_url": "https://github.com/status-im/status-desktop/issues/2811#issuecomment-883012827",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2811",
    "id": 883012827,
    "node_id": "IC_kwDOD5KrTM40obTb",
    "user": {
      "login": "oskarth",
      "id": 1552237,
      "node_id": "MDQ6VXNlcjE1NTIyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1552237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oskarth",
      "html_url": "https://github.com/oskarth",
      "followers_url": "https://api.github.com/users/oskarth/followers",
      "following_url": "https://api.github.com/users/oskarth/following{/other_user}",
      "gists_url": "https://api.github.com/users/oskarth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oskarth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oskarth/subscriptions",
      "organizations_url": "https://api.github.com/users/oskarth/orgs",
      "repos_url": "https://api.github.com/users/oskarth/repos",
      "events_url": "https://api.github.com/users/oskarth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oskarth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-20T02:58:12Z",
    "updated_at": "2021-07-20T02:58:12Z",
    "author_association": "NONE",
    "body": "Can we make sure this makes it into a spec in the specs repo? https://github.com/status-im/specs",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/883012827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/9424",
  "id": 1569727919,
  "node_id": "I_kwDOD5KrTM5dkCWv",
  "number": 9424,
  "title": "Old contact requests result in empty chat messages",
  "user": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2347610790,
      "node_id": "MDU6TGFiZWwyMzQ3NjEwNzkw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Chat",
      "name": "Chat",
      "color": "9279e0",
      "default": false,
      "description": ""
    },
    {
      "id": 4247404616,
      "node_id": "LA_kwDOD5KrTM79KkBI",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:ActivityCenter",
      "name": "E:ActivityCenter",
      "color": "472F37",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/64",
    "html_url": "https://github.com/status-im/status-desktop/milestone/64",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/64/labels",
    "id": 9039503,
    "node_id": "MI_kwDOD5KrTM4Aie6P",
    "number": 64,
    "title": "0.13",
    "description": "Priorities **in priority order** for the 0.13 milestone:\r\n\r\n**1. Finish items started in 0.12**\r\n- Complete any outstanding issues related to pairing (for syncing) - Igor\r\n- Implement the 'Admin' role (issue #10114) - Mykhailo\r\n- Any remaining work to pay off tech. debt related to mutual contacts - Mishka\r\n- When creating/editing token based permission, ability to search for and selecting Collectables from OpenSea - MichaelC\r\n\r\n**2. Channel token permissions**\r\n- Create, edit and delete channel token permissions in the permissions admin screens\r\n- This includes the \"no tokens required to view this channel\" permission\r\n- All user facing channel token permissions functionality e.g. what happens when a user tries to access a token gated channel they don't have the required tokens to access, what happens when a user only has permissions to view a channel, etc...\r\n- If a community is an open (not token gated at the community level) community, if a channel is token gated AND if **no** \"no tokens required to view this channel\" permission for that channel exists, then the channel should be automatically encrypted.  If token gating is removed from a channel, the channel should become unencrypted.\r\n\r\n**3. DB perf improvements**\r\n- https://www.notion.so/Database-related-performance-1dbaa7ea894c461d885e55676683be07\r\n- Alex and Patryk to work on this, with help from Lukáš\r\n\r\n**4. Update app to use new 'Share URL' formats**\r\n- add functionality to status-go to generate the new 'Share URL' formats for sharing links to: User Profiles, Communities, Channel inside a Community (issue https://github.com/status-im/status-desktop/issues/10851)\r\n- Update everywhere a user can share a URL from to use the new URL format (issue https://github.com/status-im/status-desktop/issues/10852)\r\n- New/updated URL unroll designs for inside chat, including specific unrolls for the new User Profile, Community and Channel inside a Community URLs (issue https://github.com/status-im/status-desktop/issues/10585)\r\n- Ability to share a URL that points to a specific channel in a community (issue #10160)\r\n- Update all address inputs to accept a user pasting a 'share URL' into the input (in addition to being able to input the raw address).  This includes: Start new chat input, send contact request input in Settings, the import community key input, etc...\r\n- Update Status Desktops URL handler so that if Status is installed on a computer, when a user clicks on a Status 'Share URL' the app is launched (if not already running) and after signing in the user is automatically taken to the entity the Share URL represented inside the app.  e.g. if a user clicks on a URL for a Status Community, the user should be taken to the home screen for that community inside the Status App\r\n\r\n**5. Mint Assets functionality**\r\n- Also includes some small improvements to the mint Collectables functionality\r\n- Noelia, GravityBlast\r\n\r\n**6. Profile showcase backend**\r\n\r\n\r\n**--- For the Wallet team ---**\r\ntldr; continue building out Ben's wallet designs\r\n\r\n1. Complete any outstanding development related to the activity screens\r\n2. All accounts overview screens\r\n3. New settings screens\r\n4. Implement 'imported key and account' syncing and transfer between devices\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 246,
    "state": "open",
    "created_at": "2023-02-13T19:04:13Z",
    "updated_at": "2023-06-16T21:45:35Z",
    "due_on": "2023-06-16T07:00:00Z",
    "closed_at": null
  },
  "comments": 11,
  "created_at": "2023-02-03T11:58:13Z",
  "updated_at": "2023-06-06T13:36:27Z",
  "closed_at": "2023-06-06T13:36:27Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Okay so here's a funny scenario:\r\n\r\n1. I have two accounts A and B each logged-in to their own desktop instances\r\n2. B sends A three contact requests, A does only respond to the latest one\r\n3. After the request was accepted, the chat of A<->B shows 2 empty chat messages from B\r\n\r\nThis is most likely because a contact request comes as a message signal and is probably interpreted as a chat message as well. \r\nThen, desktop probably doesn't render render the requests textmessage. I assume it doesn't do that because the contenttype of the message isn't \"text\" but \"unknown\".\r\n\r\nThis needs to be checked, I'm just thinking out loud here.\r\n\r\nEither way, I think we should **not** render previous contact request messages as chat message in the first place.\r\nHere's a screenshot from A's perspective after accepting the request:\r\n![Screenshot from 2023-02-03 12-52-39](https://user-images.githubusercontent.com/445106/216598011-99377f28-e44f-49dc-b0aa-0360c3632bd6.png)\r\n\r\n",
  "closed_by": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/9424/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415771110",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1415771110",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1415771110,
    "node_id": "IC_kwDOD5KrTM5UYvPm",
    "user": {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-03T12:00:13Z",
    "updated_at": "2023-02-03T12:00:13Z",
    "author_association": "MEMBER",
    "body": "Another thing I've noticed, those old contact requests (even the one that was accepted, is still rendered in the activity center and can still be interacted with.\r\n\r\nFor example, I can click \"accept\" on an old request. It will result in the following logs:\r\n\r\n```\r\nDBG 2023-02-03 12:59:10.218+01:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=58625 file=core.nim:27 rpc_method=wakuext_acceptLatestContactRequestForContact\r\nDBG 2023-02-03 12:59:10.251+01:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=58625 file=core.nim:27 rpc_method=wakuext_firstUnseenMessageID\r\nERR 2023-02-03 12:59:10.254+01:00 error: requested community doesn't exists  topics=\"community-service\" tid=58625 file=service.nim:559 communityId=\r\nDBG 2023-02-03 12:59:10.257+01:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=58625 file=core.nim:27 rpc_method=wakuext_unreadActivityCenterNotificationsCount\r\n```\r\n\r\nI do not know how communities are related to that at all.\r\nWe should probably make old requests \"inactive\" or something so they can't be interacted with anymore",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415771110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415785897",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1415785897",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1415785897,
    "node_id": "IC_kwDOD5KrTM5UYy2p",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-03T12:08:35Z",
    "updated_at": "2023-02-03T12:08:35Z",
    "author_association": "MEMBER",
    "body": "We are missing the correct messageType mapping:\r\n```diff\r\n--- ui/imports/utils/Constants.qml\r\n+++ ui/imports/utils/Constants.qml\r\n@@ -398,6 +398,7 @@ QtObject {\r\n         readonly property int gapType: 10\r\n         readonly property int editType: 11\r\n         readonly property int discordMessageType: 12\r\n+        readonly property int contactIdentityVerification: 13\r\n     }\r\n```\r\nand `function convertContentType(value)` in other places but you're right, this should most likely be not shown at all in the chat",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415785897/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415788574",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1415788574",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1415788574,
    "node_id": "IC_kwDOD5KrTM5UYzge",
    "user": {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-03T12:11:05Z",
    "updated_at": "2023-02-03T12:11:05Z",
    "author_association": "MEMBER",
    "body": "Thanks for confirming my hypothesis!",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415788574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415791247",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1415791247",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1415791247,
    "node_id": "IC_kwDOD5KrTM5UY0KP",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-03T12:13:29Z",
    "updated_at": "2023-02-03T12:13:29Z",
    "author_association": "MEMBER",
    "body": "@MishkaRogachev any idea? :)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1415791247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1416023211",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1416023211",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1416023211,
    "node_id": "IC_kwDOD5KrTM5UZsyr",
    "user": {
      "login": "MishkaRogachev",
      "id": 2522130,
      "node_id": "MDQ6VXNlcjI1MjIxMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2522130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MishkaRogachev",
      "html_url": "https://github.com/MishkaRogachev",
      "followers_url": "https://api.github.com/users/MishkaRogachev/followers",
      "following_url": "https://api.github.com/users/MishkaRogachev/following{/other_user}",
      "gists_url": "https://api.github.com/users/MishkaRogachev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MishkaRogachev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MishkaRogachev/subscriptions",
      "organizations_url": "https://api.github.com/users/MishkaRogachev/orgs",
      "repos_url": "https://api.github.com/users/MishkaRogachev/repos",
      "events_url": "https://api.github.com/users/MishkaRogachev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MishkaRogachev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-03T15:24:22Z",
    "updated_at": "2023-02-03T15:24:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @MishkaRogachev any idea? :)\r\n\r\nUnfortunately, i did not touch contact requests for a long time, but it can be tails of the current CR refactoring from mobile team. Ill take a closer look a bit later",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1416023211/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1416024059",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1416024059",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1416024059,
    "node_id": "IC_kwDOD5KrTM5UZs_7",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-03T15:25:06Z",
    "updated_at": "2023-02-03T15:25:06Z",
    "author_association": "NONE",
    "body": "Hi there! Can I ask you guys something here?\r\nThis step caught my eye:\r\n> 2. B sends A three contact requests\r\n\r\nQ: Are there any plans to change this behavior by limiting the possible number of sent requests to one?\r\nAFAIK, by design, if you send a request once to a chat key, it should get the `Pending` status for the sender, which prevents them from sending more requests to the same chat key.\r\n\r\nTL;DR\r\n\r\nWhy this worries me:\r\n1. It looks like a possible spam vector (for desktop clients mostly).\r\nOn mobile we have this issue https://github.com/status-im/status-mobile/issues/14947\r\nAnd here is the behavior John suggests to prevent possible spam in the form of annoying repetitive requests if they are canceled by the recipient: https://github.com/status-im/status-mobile/issues/14798#issuecomment-1406434296 \r\nOne more scenario: if the request is canceled by the sender. In this case, it's also canceled on the receiver's side. You can send another one, but the receiver will also have only one request (-> the user is protected from spammy repeated requests in the Activity center).\r\n\r\n2. There is a mismatch between mobile and desktop behavior in this case.\r\nIf you send multiple contact requests from desktop to mobile, only the first request (and the first message) will be displayed on mobile in the Activity center. After accepting the request, all requests will be displayed in the chat history and will remain in `Pending` status forever (except for the first one). This inconsistency could also be fixed by adding the `Pending` status when the request is sent for the first time.\r\n\r\nThese are not urgent questions. It's just that we are close to the first release cut, so we are already thinking about such things :)\r\nAnd please correct me if I misunderstand the scenario itself or if this is already covered somewhere. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1416024059/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1418637435",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1418637435",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1418637435,
    "node_id": "IC_kwDOD5KrTM5UjrB7",
    "user": {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-06T07:35:59Z",
    "updated_at": "2023-02-06T07:35:59Z",
    "author_association": "MEMBER",
    "body": "> Q: Are there any plans to change this behavior by limiting the possible number of sent requests to one?\r\nAFAIK, by design, if you send a request once to a chat key, it should get the Pending status for the sender, which prevents them from sending more requests to the same chat key.\r\n\r\n@qoqobolo so I think the way it is done by Desktop atm, is that, when you have a pending request, you can cancel it and send a new one. The receiver will then get multiple requests. Senders will also not get notified when a request was rejected AFAIK. \r\n\r\nI'm aware that this is a potential spam vector, but I think we went for it either way.\r\n\r\n> One more scenario: if the request is canceled by the sender. In this case, it's also canceled on the receiver's side. You can send another one, but the receiver will also have only one request (-> the user is protected from spammy repeated requests in the Activity center).\r\n\r\nI'm not sure if this is actually the case right now. Whether or not a sender cancels a request is not something that the receiver will get notified about. \r\n\r\n> There is a mismatch between mobile and desktop behavior in this case.\r\nIf you send multiple contact requests from desktop to mobile, only the first request (and the first message) will be displayed on mobile in the Activity center. After accepting the request, all requests will be displayed in the chat history and will remain in Pending status forever (except for the first one). This inconsistency could also be fixed by adding the Pending status when the request is sent for the first time.\r\n\r\nI think this is an important point.\r\n\r\n@MishkaRogachev do you know from the top of your head what's the implementation parity between mobile and desktop for these cases?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1418637435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1419427423",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1419427423",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1419427423,
    "node_id": "IC_kwDOD5KrTM5Umr5f",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-06T17:08:28Z",
    "updated_at": "2023-02-06T18:22:37Z",
    "author_association": "NONE",
    "body": "@0x-r4bbit hmm wait, in what way exactly did you send those three requests on your screenshot? :)\r\n\r\n> when you have a pending request, you can cancel it and send a new one.\r\n\r\nI mean yes, you can cancel it in settings, but there is another more fast way to send a new one: you just remove the chat key and paste it again without canceling. This doesn't look right to me, because this is what makes it so easy to quickly send a large number of requests.\r\n\r\nhttps://user-images.githubusercontent.com/67952253/217008099-759bfe1d-0abf-48b2-8306-c3858d295354.mov\r\n\r\nSo in terms of spam, I just wanted to bring your attention and make sure you're aware of _this way_ to send multiple contact requests. Let me know if it's better to forward this to the QA team for further discussion on whether this is correct, logging an issue, etc, I don't mean to shower you with these questions if you are not working specifically on this functionality :)\r\n\r\nIn terms of parity between mobile and desktop, I will also ask Andrea what is the desirable behavior from our side in this case.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1419427423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1420380842",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1420380842",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1420380842,
    "node_id": "IC_kwDOD5KrTM5UqUqq",
    "user": {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-07T08:28:36Z",
    "updated_at": "2023-02-07T08:28:36Z",
    "author_association": "MEMBER",
    "body": ">  but there is another more fast way to send a new one: you just remove the chat key and paste it again without canceling. This doesn't look right to me, because this is what makes it so easy to quickly send a large number of requests.\r\n\r\nThat's exactly how I've done it.\r\nWe could forbid that though.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1420380842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1420483171",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1420483171",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1420483171,
    "node_id": "IC_kwDOD5KrTM5Uqtpj",
    "user": {
      "login": "qoqobolo",
      "id": 67952253,
      "node_id": "MDQ6VXNlcjY3OTUyMjUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67952253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qoqobolo",
      "html_url": "https://github.com/qoqobolo",
      "followers_url": "https://api.github.com/users/qoqobolo/followers",
      "following_url": "https://api.github.com/users/qoqobolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/qoqobolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qoqobolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qoqobolo/subscriptions",
      "organizations_url": "https://api.github.com/users/qoqobolo/orgs",
      "repos_url": "https://api.github.com/users/qoqobolo/repos",
      "events_url": "https://api.github.com/users/qoqobolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qoqobolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-07T09:47:38Z",
    "updated_at": "2023-02-07T09:47:38Z",
    "author_association": "NONE",
    "body": "> We could forbid that though.\r\n\r\nYes, Pedro confirmed that we should do this\r\n![Screenshot 2023-02-07 at 10 42 17](https://user-images.githubusercontent.com/67952253/217208623-8281ee97-ccdb-4263-bd4f-85613dc90f6c.png)\r\n\r\nI'll create an issue.\r\nThanks for discussing it with me!",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1420483171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1578785630",
    "html_url": "https://github.com/status-im/status-desktop/issues/9424#issuecomment-1578785630",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9424",
    "id": 1578785630,
    "node_id": "IC_kwDOD5KrTM5eGlte",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-06T13:36:27Z",
    "updated_at": "2023-06-06T13:36:27Z",
    "author_association": "MEMBER",
    "body": "Closing this as we can no longer send multiple contact requests, so the original issue can't be reproduced. Also, there have a been a lot of fixes to the displaying of the contact request messages in chat",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1578785630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

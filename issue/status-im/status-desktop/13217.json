{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/13217",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/13217/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/13217/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/13217/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/13217",
  "id": 2083139845,
  "node_id": "I_kwDOD5KrTM58KjEF",
  "number": 13217,
  "title": "Community: removing a shard from community blocks messaging",
  "user": {
    "login": "anastasiyaig",
    "id": 82375995,
    "node_id": "MDQ6VXNlcjgyMzc1OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anastasiyaig",
    "html_url": "https://github.com/anastasiyaig",
    "followers_url": "https://api.github.com/users/anastasiyaig/followers",
    "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
    "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
    "repos_url": "https://api.github.com/users/anastasiyaig/repos",
    "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 6340869619,
      "node_id": "LA_kwDOD5KrTM8AAAABefH98w",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/status-waku-integ",
      "name": "status-waku-integ",
      "color": "13BDF1",
      "default": false,
      "description": "All issues relating to the Status Waku integration."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/61",
    "html_url": "https://github.com/status-im/status-desktop/milestone/61",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/61/labels",
    "id": 8739485,
    "node_id": "MI_kwDOD5KrTM4AhVqd",
    "number": 61,
    "title": "0.16",
    "description": "## Messaging & Communities team\r\n\r\n**1.  Fix bug and stabilise Communities and Messaging functionality**\r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase**\r\n\r\n&nbsp;\r\n\r\n## Wallet Team\r\n\r\n**1. Complete support for Community minted assets**\r\n\r\n**2. Complete token visibility management screens**\r\n\r\n**3. Continue working on WalletConnect support**\r\n\r\n**4. Minor updates to Asset screens**\r\n\r\n**5. Continue fixing bugs, making optimisations and keeping tech debt low**\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 146,
    "closed_issues": 194,
    "state": "open",
    "created_at": "2022-12-09T15:06:43Z",
    "updated_at": "2024-01-16T07:05:48Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 1,
  "created_at": "2024-01-16T07:00:21Z",
  "updated_at": "2024-01-16T07:15:04Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n1. create community in 0.15 release and make it encrypted\r\n2. add some members here\r\n3. send some messages in some channels\r\n4. click Edit community and assign community to shard 123\r\n5. try to send some messages again \r\n\r\nIn my case I received this: \r\n```\r\nERROR[01-16|09:34:13.828|github.com/status-im/status-go/wakuv2/waku.go:1060]                                 could not send message                   envelopeHash=0x71af99bdf132f0127d7f06852de23989d260b24023a075939afcf13342ef5a93 pubsubTopic=/waku/2/rs/16/123 contentTopic=/waku/1/0x7dccd139/rfc26 timestamp=1,705,386,854,118,873,907 error=\"not enough peers to publish\"\r\n```\r\n\r\nI talked to Richard and he said it might be okay because I am not connected to any peer that supports shard 16/123 \r\n\r\n6. then i go to community and removed the shard from it within UI (edit community - stop sharding)\r\n7. then i asked Valentina to restart the app and try message again and there is an error shown for her blocking her from login\r\n\r\n![image](https://github.com/status-im/status-desktop/assets/82375995/d71543cd-5023-4b8e-ac10-c9910e198dc6)\r\n\r\nI asked for geth log on her side and found this:\r\n```\r\nERROR[01-16|13:39:46.276|github.com/waku-org/go-waku/waku/v2/protocol/metadata/waku_metadata.go:219]  disconnecting from peer                  peerID=16Uiu2HAkukebeXjTQ9QDBeNDWuGfbaSg79wkkhK4vPocLgR6QFDf error=\"invalid shard count\"\r\nERROR[01-16|13:39:46.277|github.com/waku-org/go-waku/waku/v2/protocol/metadata/waku_metadata.go:219]  disconnecting from peer                  peerID=16Uiu2HAkukebeXjTQ9QDBeNDWuGfbaSg79wkkhK4vPocLgR6QFDf error=\"invalid shard count\"\r\n```\r\n\r\n[geth.log.zip](https://github.com/status-im/status-desktop/files/13946459/geth.log.zip)\r\n\r\nNeed some help investigating if removing a shard from community could lead to this\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/13217/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/13217/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1893173530",
    "html_url": "https://github.com/status-im/status-desktop/issues/13217#issuecomment-1893173530",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/13217",
    "id": 1893173530,
    "node_id": "IC_kwDOD5KrTM5w14ka",
    "user": {
      "login": "anastasiyaig",
      "id": 82375995,
      "node_id": "MDQ6VXNlcjgyMzc1OTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anastasiyaig",
      "html_url": "https://github.com/anastasiyaig",
      "followers_url": "https://api.github.com/users/anastasiyaig/followers",
      "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
      "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
      "repos_url": "https://api.github.com/users/anastasiyaig/repos",
      "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-16T07:04:55Z",
    "updated_at": "2024-01-16T07:04:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "cc @Valentina1133 \r\n\r\n@richard-ramos @igor-sirotin @osmaczko  can we please check on that somehow? i am pretty sure the flow of assigning a shard is kinda done incorrectly by me , but i think it should not lead to inability to use the app",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1893173530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/13109",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/13109/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/13109/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/13109/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/13109",
  "id": 2058218801,
  "node_id": "I_kwDOD5KrTM56re0x",
  "number": 13109,
  "title": "Preferred chains maintained in two places",
  "user": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 6350168202,
      "node_id": "LA_kwDOD5KrTM8AAAABen_gig",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:%20Desktop%20Saved%20Addresses",
      "name": "E: Desktop Saved Addresses",
      "color": "C9C13B",
      "default": false,
      "description": "Saved addresses per new design"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-12-28T09:43:31Z",
  "updated_at": "2023-12-28T09:43:32Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "We're maintaining 2 preferred chains for the same address in some cases (when the user saves a wallet account).\r\n\r\nPrimarily we're maintaining preferred chains in the `keypairs_accounts` table, for all wallet accounts and also we're maintaining preferred chains in the `saved_addresses` table as well for all saved addresses.\r\n\r\nThe trick is that the wallet address can be added to the saved addresses as well. In this case we have 2 preferred chains for the same address that are not synced.\r\n\r\n_Some of the solutions:_\r\n\r\n1. disable adding wallet addresses to the saved addresses list\r\n\r\n2. syncing the change, when changing referred chains for the wallet address, to check if it exists in the saved addresses and update preferred chains there as well, and vice versa, when changing preferred chains for the wallet address to check if it exists in the keypairs_accounts table and update chains there\r\n\r\n3. merging `saved_addresses` into `keypairs_accounts` table, adding some new flags `saved` (to mark if the address is added to the saved addresses or not), `saved_removed` (to mark if the address is removed from the saved addresses list or not) and `saved_clock` (to set the clock of the last change made over saved address), that way we can have a single source of truth and also if keypair/account is deleted (we're doing a soft delete, just setting a flag, not delete it for real), we will still have it in the list of saved addresses till the moment `saved_removed` flag is set to `true`. \r\n \r\n\r\nI'm maybe more for solution 3.  but we can discuss it.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/13109/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/13109/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

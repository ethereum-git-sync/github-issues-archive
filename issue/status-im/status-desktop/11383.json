{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/11383",
  "id": 1786224484,
  "node_id": "I_kwDOD5KrTM5qd59k",
  "number": 11383,
  "title": "Missed messages in a group chat",
  "user": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2347610790,
      "node_id": "MDU6TGFiZWwyMzQ3NjEwNzkw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Chat",
      "name": "Chat",
      "color": "9279e0",
      "default": false,
      "description": ""
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-07-03T13:48:45Z",
  "updated_at": "2023-07-03T17:22:21Z",
  "closed_at": "2023-07-03T15:47:58Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "After I run the app after ~10 days, I left the app for some time ~10 mins (to receive all missed messages) and started reading the WalletTeam group chat. \r\n\r\nThen I was hearing sounds like ne messages were receiving but there were no new messages (new like received after I started the app), but those sounds were played for newly received old messages. This can be the first issue?!?! Do we need to play a new message sound for history messages?\r\n\r\nThen I realized, just because I saw a lot of reply messages where an original message, a group member replied to, was not displayed, that I am missing some messages and because of that I couldn't understand the whole context a group members were discussing. This is definitely an issue worth checking, cause the thing could be even worse if nobody replied to those messages, then I couldn't even know that I don't have all messages.\r\n\r\nScreenshots from the Wallet Team group chat:\r\n![image](https://github.com/status-im/status-desktop/assets/86303051/2e6a7279-8fa5-4bd8-aa5b-e386c955b225)\r\n\r\n![image](https://github.com/status-im/status-desktop/assets/86303051/7d6adc12-f655-4981-886f-f69945b55112)\r\n\r\n",
  "closed_by": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/11383/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618358145",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618358145",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618358145,
    "node_id": "IC_kwDOD5KrTM5gdi-B",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T14:02:04Z",
    "updated_at": "2023-07-03T14:02:04Z",
    "author_association": "MEMBER",
    "body": "> After I run the app after ~10 days, I left the app for some time ~10 mins (to receive all missed messages) and started reading the WalletTeam group chat.\r\n\r\nI didn't understand that part when reading the message for the first time. \r\n\r\nThis issue is normal then, we only fetch message for the last 9 days (might be 7 even) cc @richard-ramos to confirm",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618358145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618487834",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618487834",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618487834,
    "node_id": "IC_kwDOD5KrTM5geCoa",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T14:41:34Z",
    "updated_at": "2023-07-03T14:41:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jrainville don't fetch messages for the last 30 days?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618487834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618524281",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618524281",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618524281,
    "node_id": "IC_kwDOD5KrTM5geLh5",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T14:51:41Z",
    "updated_at": "2023-07-03T14:51:41Z",
    "author_association": "MEMBER",
    "body": "> @jrainville don't fetch messages for the last 30 days?\r\n\r\nNo. we store 30 days of messages, but only fetch 7-9, otherwise it would be a very big/long request.\r\n\r\nI know Richard split the fetching per day, so maybe we'll expand to more days. ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618524281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618549865",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618549865",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618549865,
    "node_id": "IC_kwDOD5KrTM5geRxp",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T14:59:01Z",
    "updated_at": "2023-07-03T14:59:01Z",
    "author_association": "MEMBER",
    "body": "yeah. In this PR https://github.com/status-im/status-go/pull/3403 it was set to load 9d.\r\nThe way it works is that it loads from most recent to oldest messages, spliting up the history request in a lot of 24hr batches of 10 channels (due to a limit of a max of 10 topics per query in waku2). I remember there is some sort of priority ordering there to load recently browsed chat first, too... Even with these changes, fetching history takes a lot of time.\r\n\r\nFor the messages that you're missing the approach would be to go to the start of the channel and press the 'Fetch more messages' button so it will try to load another 9d batch, but just for that channel.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618549865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618740041",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618740041",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618740041,
    "node_id": "IC_kwDOD5KrTM5gfANJ",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T15:47:58Z",
    "updated_at": "2023-07-03T15:47:58Z",
    "author_association": "MEMBER",
    "body": "Gonna close this issue since it's \"per design\". If we decide to increase the fetch range, then it will fix this also.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618740041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618793478",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618793478",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618793478,
    "node_id": "IC_kwDOD5KrTM5gfNQG",
    "user": {
      "login": "Cuteivist",
      "id": 11396062,
      "node_id": "MDQ6VXNlcjExMzk2MDYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11396062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cuteivist",
      "html_url": "https://github.com/Cuteivist",
      "followers_url": "https://api.github.com/users/Cuteivist/followers",
      "following_url": "https://api.github.com/users/Cuteivist/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cuteivist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cuteivist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cuteivist/subscriptions",
      "organizations_url": "https://api.github.com/users/Cuteivist/orgs",
      "repos_url": "https://api.github.com/users/Cuteivist/repos",
      "events_url": "https://api.github.com/users/Cuteivist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cuteivist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T16:07:06Z",
    "updated_at": "2023-07-03T16:07:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "@richard-ramos  @jrainville \r\n\r\n> Then I was hearing sounds like ne messages were receiving but there were no new messages (new like received after I started the app), but those sounds were played for newly received old messages. This can be the first issue?!?! Do we need to play a new message sound for history messages?\r\n\r\nCan we address this issue? I find it really confusing on Windows when I get a system wide message notifications and I find that there is no new messages and I don't even know what message it was about. This notification isn't saved in history and clicking it doesn't follow to specific place in chat.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618793478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618910616",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618910616",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618910616,
    "node_id": "IC_kwDOD5KrTM5gfp2Y",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T17:18:50Z",
    "updated_at": "2023-07-03T17:18:50Z",
    "author_association": "MEMBER",
    "body": "@Cuteivist @saledjenic did you see if the notification was from a group message (maybe a group you couldn't see), or it's just that it's a notification in a channel where you had already read recent messages and thus there was no unread marker?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618910616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618913805",
    "html_url": "https://github.com/status-im/status-desktop/issues/11383#issuecomment-1618913805",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11383",
    "id": 1618913805,
    "node_id": "IC_kwDOD5KrTM5gfqoN",
    "user": {
      "login": "Cuteivist",
      "id": 11396062,
      "node_id": "MDQ6VXNlcjExMzk2MDYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/11396062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cuteivist",
      "html_url": "https://github.com/Cuteivist",
      "followers_url": "https://api.github.com/users/Cuteivist/followers",
      "following_url": "https://api.github.com/users/Cuteivist/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cuteivist/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cuteivist/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cuteivist/subscriptions",
      "organizations_url": "https://api.github.com/users/Cuteivist/orgs",
      "repos_url": "https://api.github.com/users/Cuteivist/repos",
      "events_url": "https://api.github.com/users/Cuteivist/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cuteivist/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-03T17:22:21Z",
    "updated_at": "2023-07-03T17:22:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm sure I'm getting those from group chat (that I'm in, just messages are loading in). \r\nI don't know if I got any from channels because I get pinged quite rare.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1618913805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

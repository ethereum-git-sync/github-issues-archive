{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/2036",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/2036",
  "id": 830924941,
  "node_id": "MDU6SXNzdWU4MzA5MjQ5NDE=",
  "number": 2036,
  "title": "Crash when trying to add custom token",
  "user": {
    "login": "piskel",
    "id": 10447278,
    "node_id": "MDQ6VXNlcjEwNDQ3Mjc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/10447278?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/piskel",
    "html_url": "https://github.com/piskel",
    "followers_url": "https://api.github.com/users/piskel/followers",
    "following_url": "https://api.github.com/users/piskel/following{/other_user}",
    "gists_url": "https://api.github.com/users/piskel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/piskel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/piskel/subscriptions",
    "organizations_url": "https://api.github.com/users/piskel/orgs",
    "repos_url": "https://api.github.com/users/piskel/repos",
    "events_url": "https://api.github.com/users/piskel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/piskel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "emizzle",
    "id": 5089238,
    "node_id": "MDQ6VXNlcjUwODkyMzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5089238?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/emizzle",
    "html_url": "https://github.com/emizzle",
    "followers_url": "https://api.github.com/users/emizzle/followers",
    "following_url": "https://api.github.com/users/emizzle/following{/other_user}",
    "gists_url": "https://api.github.com/users/emizzle/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/emizzle/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/emizzle/subscriptions",
    "organizations_url": "https://api.github.com/users/emizzle/orgs",
    "repos_url": "https://api.github.com/users/emizzle/repos",
    "events_url": "https://api.github.com/users/emizzle/events{/privacy}",
    "received_events_url": "https://api.github.com/users/emizzle/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "emizzle",
      "id": 5089238,
      "node_id": "MDQ6VXNlcjUwODkyMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5089238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emizzle",
      "html_url": "https://github.com/emizzle",
      "followers_url": "https://api.github.com/users/emizzle/followers",
      "following_url": "https://api.github.com/users/emizzle/following{/other_user}",
      "gists_url": "https://api.github.com/users/emizzle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emizzle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emizzle/subscriptions",
      "organizations_url": "https://api.github.com/users/emizzle/orgs",
      "repos_url": "https://api.github.com/users/emizzle/repos",
      "events_url": "https://api.github.com/users/emizzle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emizzle/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-03-13T15:39:04Z",
  "updated_at": "2021-04-01T13:38:56Z",
  "closed_at": "2021-03-25T19:52:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am attempting to add a custom ERC-721 token, but filling the \"Contract address\" field causes the program to raise this error:\r\n![image](https://user-images.githubusercontent.com/10447278/111034686-19638980-8417-11eb-84ed-1d87151f5cf5.png)\r\n\r\nClicking on \"Ok\" in the error pop-up causes the app to close.\r\n\r\nBut the error pop-up doesn't lock the focus, so we can still fill the fields and try adding the token manually.\r\nThis means we technically still can use the app if we don't mind the error pop-ups in the background, but eh...\r\n\r\nAlso, now the token is visible in the assets list, but launching Status causes an error, which again can be ignored.\r\n\r\nI am running Windows 10 Pro 20H2, and I am connected to a development blockchain running on Ganache 2.5.4.\r\nStatus version is beta.6.1",
  "closed_by": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/2036/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/798624613",
    "html_url": "https://github.com/status-im/status-desktop/issues/2036#issuecomment-798624613",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036",
    "id": 798624613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5ODYyNDYxMw==",
    "user": {
      "login": "piskel",
      "id": 10447278,
      "node_id": "MDQ6VXNlcjEwNDQ3Mjc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/10447278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/piskel",
      "html_url": "https://github.com/piskel",
      "followers_url": "https://api.github.com/users/piskel/followers",
      "following_url": "https://api.github.com/users/piskel/following{/other_user}",
      "gists_url": "https://api.github.com/users/piskel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/piskel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/piskel/subscriptions",
      "organizations_url": "https://api.github.com/users/piskel/orgs",
      "repos_url": "https://api.github.com/users/piskel/repos",
      "events_url": "https://api.github.com/users/piskel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/piskel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-13T16:53:36Z",
    "updated_at": "2021-03-13T16:54:05Z",
    "author_association": "NONE",
    "body": "I tried to see if the issue persisted on version beta.7.rc, going through the same process, adding the token, ignoring the error messages and all that.\r\nAlso, selecting the newly added token causes Status to crash.\r\nThe problem is that now we can't even log into the app. After entering the password I get this error.\r\n![image](https://user-images.githubusercontent.com/10447278/111037346-eb387680-8423-11eb-8077-4da44b93069d.png)\r\nAnd that's pretty much all we get to see from Status beyond the login page.\r\n\r\nI reckon it is pretty serious since we can't do much about it, if not deleting the Status folder in %localappdata%, at least from my experience.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/798624613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/806399257",
    "html_url": "https://github.com/status-im/status-desktop/issues/2036#issuecomment-806399257",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036",
    "id": 806399257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjM5OTI1Nw==",
    "user": {
      "login": "emizzle",
      "id": 5089238,
      "node_id": "MDQ6VXNlcjUwODkyMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5089238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emizzle",
      "html_url": "https://github.com/emizzle",
      "followers_url": "https://api.github.com/users/emizzle/followers",
      "following_url": "https://api.github.com/users/emizzle/following{/other_user}",
      "gists_url": "https://api.github.com/users/emizzle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emizzle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emizzle/subscriptions",
      "organizations_url": "https://api.github.com/users/emizzle/orgs",
      "repos_url": "https://api.github.com/users/emizzle/repos",
      "events_url": "https://api.github.com/users/emizzle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emizzle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T06:30:03Z",
    "updated_at": "2021-03-25T06:30:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for submitting this issue, @piskel! \r\n\r\nCan you confirm that you were adding an ERC-721 token? The reason I ask is because I did notice that adding a non-ERC-20/721 token contract address would cause an exception in the app and restarting the app would a crash on login, as you've described. In the current master branch, these exceptions are now handled off the main thread (part of a threadpool now), so the error should no longer be propagated to the front end.\r\n\r\nIn addition, I've added some error-checking for the VM exceptions, so now you should see a nice error message when attempting to add a non-ERC-20/721 contract. This will prevent users from being allowed to add these token contracts, and thus further prevent the crash on login issue you've encountered.\r\n\r\nThese updates are present in the following PR and will be in the next release: https://github.com/status-im/status-desktop/pull/2116. The error message you will when attempting to add the SimpleStorage contract (ie any non ERC-20/721 contract) as a custom token:\r\n![Imgur](https://imgur.com/y7sIoUY.png)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/806399257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/806405244",
    "html_url": "https://github.com/status-im/status-desktop/issues/2036#issuecomment-806405244",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036",
    "id": 806405244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjQwNTI0NA==",
    "user": {
      "login": "piskel",
      "id": 10447278,
      "node_id": "MDQ6VXNlcjEwNDQ3Mjc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/10447278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/piskel",
      "html_url": "https://github.com/piskel",
      "followers_url": "https://api.github.com/users/piskel/followers",
      "following_url": "https://api.github.com/users/piskel/following{/other_user}",
      "gists_url": "https://api.github.com/users/piskel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/piskel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/piskel/subscriptions",
      "organizations_url": "https://api.github.com/users/piskel/orgs",
      "repos_url": "https://api.github.com/users/piskel/repos",
      "events_url": "https://api.github.com/users/piskel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/piskel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T06:43:54Z",
    "updated_at": "2021-03-25T06:43:54Z",
    "author_association": "NONE",
    "body": "Ah ! Glad to know it'll get fixed ! Thanks a lot !\r\n\r\nHere is the contract I used :\r\n\r\n```solidity\r\npragma solidity ^0.6.0;\r\n\r\nimport \"@openzeppelin/contracts/token/ERC721/ERC721.sol\";\r\nimport \"@openzeppelin/contracts/utils/Counters.sol\";\r\n\r\ncontract ToToKeKen is ERC721 {\r\n    using Counters for Counters.Counter;\r\n    Counters.Counter private _tokenIds;\r\n\r\n    constructor() public ERC721(\"ToToKeKen\", \"TK2\") {}\r\n\r\n    function mint(address to, string memory tokenURI)\r\n        public\r\n        returns (uint256)\r\n    {\r\n        _tokenIds.increment();\r\n\r\n        uint256 newToken = _tokenIds.current();\r\n        _mint(to, newToken);\r\n        _setTokenURI(newToken, tokenURI);\r\n\r\n        return newToken;\r\n    }\r\n\r\n}\r\n```\r\nI believe it's pretty much the default ERC721 token implementation from openzeppelin, not much more to it.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/806405244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/809033099",
    "html_url": "https://github.com/status-im/status-desktop/issues/2036#issuecomment-809033099",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036",
    "id": 809033099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTAzMzA5OQ==",
    "user": {
      "login": "emizzle",
      "id": 5089238,
      "node_id": "MDQ6VXNlcjUwODkyMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5089238?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emizzle",
      "html_url": "https://github.com/emizzle",
      "followers_url": "https://api.github.com/users/emizzle/followers",
      "following_url": "https://api.github.com/users/emizzle/following{/other_user}",
      "gists_url": "https://api.github.com/users/emizzle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emizzle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emizzle/subscriptions",
      "organizations_url": "https://api.github.com/users/emizzle/orgs",
      "repos_url": "https://api.github.com/users/emizzle/repos",
      "events_url": "https://api.github.com/users/emizzle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emizzle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T03:05:51Z",
    "updated_at": "2021-03-29T03:05:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @piskel, would you mind trying out Beta 8 RC1 to see if this issue has been fixed for you? The release can be found here: https://github.com/status-im/status-desktop/releases/tag/beta.8.rc1.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/809033099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/811915057",
    "html_url": "https://github.com/status-im/status-desktop/issues/2036#issuecomment-811915057",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2036",
    "id": 811915057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTkxNTA1Nw==",
    "user": {
      "login": "piskel",
      "id": 10447278,
      "node_id": "MDQ6VXNlcjEwNDQ3Mjc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/10447278?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/piskel",
      "html_url": "https://github.com/piskel",
      "followers_url": "https://api.github.com/users/piskel/followers",
      "following_url": "https://api.github.com/users/piskel/following{/other_user}",
      "gists_url": "https://api.github.com/users/piskel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/piskel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/piskel/subscriptions",
      "organizations_url": "https://api.github.com/users/piskel/orgs",
      "repos_url": "https://api.github.com/users/piskel/repos",
      "events_url": "https://api.github.com/users/piskel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/piskel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T13:38:56Z",
    "updated_at": "2021-04-01T13:38:56Z",
    "author_association": "NONE",
    "body": "I tried again by starting fresh, deleting the status folder in %localappdata%, but now I can't add a new custom network. Clicking the \"Add network\" button does nothing.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/811915057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

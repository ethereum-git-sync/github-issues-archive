{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12188",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12188",
  "id": 1900742917,
  "node_id": "I_kwDOD5KrTM5xSwkF",
  "number": 12188,
  "title": "Split CommunityDescription message",
  "user": {
    "login": "MishkaRogachev",
    "id": 2522130,
    "node_id": "MDQ6VXNlcjI1MjIxMzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2522130?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MishkaRogachev",
    "html_url": "https://github.com/MishkaRogachev",
    "followers_url": "https://api.github.com/users/MishkaRogachev/followers",
    "following_url": "https://api.github.com/users/MishkaRogachev/following{/other_user}",
    "gists_url": "https://api.github.com/users/MishkaRogachev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MishkaRogachev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MishkaRogachev/subscriptions",
    "organizations_url": "https://api.github.com/users/MishkaRogachev/orgs",
    "repos_url": "https://api.github.com/users/MishkaRogachev/repos",
    "events_url": "https://api.github.com/users/MishkaRogachev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MishkaRogachev/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5745637395,
      "node_id": "LA_kwDOD5KrTM8AAAABVnd4Ew",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Community%20Bugfixes%20MVP",
      "name": "E:Desktop Community Bugfixes MVP",
      "color": "01CE46",
      "default": false,
      "description": "Misc bug fixes about communities that are due for the MVP"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-09-18T11:37:03Z",
  "updated_at": "2023-09-18T12:05:51Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nAt the moment, the [CommunityDescription](https://github.com/status-im/status-go/blob/develop/protocol/protobuf/communities.proto#L84-L101) message is too large, both in terms of meaningfulness and size in bytes. In [this](https://github.com/status-im/status-desktop/issues/12114#issuecomment-1721426909) experiment, we found that the size of this message for Status CCs reaches 2 mb. \r\n\r\nThis [PR](wait please) is a temporary measure until this feature is implemented. When switching to split messages I think we should remove this optimisation, but in the list of channel members we should not send the members themselves, but only their IDs.\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12188/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1723240065",
    "html_url": "https://github.com/status-im/status-desktop/issues/12188#issuecomment-1723240065",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188",
    "id": 1723240065,
    "node_id": "IC_kwDOD5KrTM5mto6B",
    "user": {
      "login": "MishkaRogachev",
      "id": 2522130,
      "node_id": "MDQ6VXNlcjI1MjIxMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2522130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MishkaRogachev",
      "html_url": "https://github.com/MishkaRogachev",
      "followers_url": "https://api.github.com/users/MishkaRogachev/followers",
      "following_url": "https://api.github.com/users/MishkaRogachev/following{/other_user}",
      "gists_url": "https://api.github.com/users/MishkaRogachev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MishkaRogachev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MishkaRogachev/subscriptions",
      "organizations_url": "https://api.github.com/users/MishkaRogachev/orgs",
      "repos_url": "https://api.github.com/users/MishkaRogachev/repos",
      "events_url": "https://api.github.com/users/MishkaRogachev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MishkaRogachev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-18T11:43:33Z",
    "updated_at": "2023-09-18T11:50:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Proposition\r\n\r\nI propose to split this message into several messages broken down by meaning, but not just chunks:\r\n- CommunityDescription (chat identity, intro, outro, tags and etc)\r\n- CommumnityMembers: (members & ban list)\r\n- CommunityChannels (chats & categories)\r\n- CommunityTokens (tokens & collectibles)\r\n\r\nI think permissions should be scattered between these categories. \r\n\r\n@richard-ramos it will be great if we can store just one last message of each type for each community. Then we can broadcast those messages periodically in case they are got lost.\r\n\r\n@osmaczko @mprakhov @cammellos WDYT?\r\n\r\n@John-44 @iurimatias @jrainville I think we need this before releasing the MVP due to the risk of losing compatibility",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1723240065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1723266978",
    "html_url": "https://github.com/status-im/status-desktop/issues/12188#issuecomment-1723266978",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188",
    "id": 1723266978,
    "node_id": "IC_kwDOD5KrTM5mtvei",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-18T12:00:22Z",
    "updated_at": "2023-09-18T12:00:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I like the idea.\r\n\r\nThe primary challenge I foresee is how to manage situations where one of the messages is lost. We need to determine whether we should wait for all partitions or if we can apply them separately to modify the state of the community.\r\n\r\nAdditionally, this change will enable encryption for both `CommunityMembers` and `CommunityChannels`. This ensures that they are not publicly accessible for closed communities.\r\n\r\n> I believe we need to implement this before releasing the MVP to avoid the risk of losing compatibility.\r\n\r\nI agree. Ideally, we should refrain from supporting the legacy `CommunityDescription` for the sake of simplicity.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1723266978/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1723275002",
    "html_url": "https://github.com/status-im/status-desktop/issues/12188#issuecomment-1723275002",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12188",
    "id": 1723275002,
    "node_id": "IC_kwDOD5KrTM5mtxb6",
    "user": {
      "login": "caybro",
      "id": 5377645,
      "node_id": "MDQ6VXNlcjUzNzc2NDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/caybro",
      "html_url": "https://github.com/caybro",
      "followers_url": "https://api.github.com/users/caybro/followers",
      "following_url": "https://api.github.com/users/caybro/following{/other_user}",
      "gists_url": "https://api.github.com/users/caybro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/caybro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/caybro/subscriptions",
      "organizations_url": "https://api.github.com/users/caybro/orgs",
      "repos_url": "https://api.github.com/users/caybro/repos",
      "events_url": "https://api.github.com/users/caybro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/caybro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-18T12:05:50Z",
    "updated_at": "2023-09-18T12:05:50Z",
    "author_association": "MEMBER",
    "body": "Good idea; I also thought if it would be feasible to just compress/uncompress the description; it's plain text anyway, should be able to reach a high ratio",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1723275002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/10772",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/10772/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/10772/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/10772/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/10772",
  "id": 1722183886,
  "node_id": "I_kwDOD5KrTM5mpnDO",
  "number": 10772,
  "title": "Keypair syncing - edge cases",
  "user": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 5639332268,
      "node_id": "LA_kwDOD5KrTM8AAAABUCFhrA",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/C2",
      "name": "C2",
      "color": "E15258",
      "default": false,
      "description": ""
    },
    {
      "id": 5745583027,
      "node_id": "LA_kwDOD5KrTM8AAAABVnajsw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Wallet%20Sync",
      "name": "E:Desktop Wallet Sync",
      "color": "6983CC",
      "default": false,
      "description": "Wallet account syncing"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/57",
    "html_url": "https://github.com/status-im/status-desktop/milestone/57",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/57/labels",
    "id": 8475715,
    "node_id": "MI_kwDOD5KrTM4AgVRD",
    "number": 57,
    "title": "0.14",
    "description": "Milestone cycles:\r\n\r\n[Cycle 1](https://github.com/status-im/status-desktop/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.14+label%3AC1): 7 July\r\n[Cycle 2](https://github.com/status-im/status-desktop/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.14+label%3AC2): 28 July \r\n[Cycle 3](https://github.com/status-im/status-desktop/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.14+label%3AC3): 18 August\r\n\r\n\r\n**--- Main focus ---**\r\n\r\n**1. Token permissions to enable control of community smart contracts**\r\n- Before a community founder can use any of the community token admin functionality, they first have to deploy Owner and Token Master contracts.\r\n- This work involves: new empty state screen for Mint and Airdrop tokens (before current empty state screen is revealed), new flow for deploying the community's Owner and Token Master contracts in a single step, a fixed uneditable permission giving anybody who holds the Token Master token admin rights for the community should be automatically created.\r\n- Only the holder of the single Owner token can access the Token Master airdrop, remote destruct, and view holders functions. Anybody who holds the Token Master token can access all token admin options, excluding those related to the Token Master token itself, as well as being and Admin of the community.\r\n- This will all be explained in more detail in the designs.\r\n\r\nBackend Epic: https://github.com/status-im/status-desktop/issues/11249\r\n\r\n**2. Update Community Admin home screen inc control node transfer and associated dialogues**\r\n- Remove ability for a Owner to leave a community on the computer that's running as that community's control node\r\n- Community Admin home screen cleanup (inc. adding at least one of the three graphs, whichever is easiest to implement).\r\n  - Graph issue: https://github.com/status-im/status-desktop/issues/11152  \r\n  - Community overview: https://github.com/status-im/status-desktop/issues/11278\r\n\r\n**3. Ability for user to select & manage accounts shared with each community control node**\r\n- This item is quite a bit of work\r\n- Touches Community settings, as well as all of the community join flows\r\n- Backend issues: \r\n  - Join API: https://github.com/status-im/status-desktop/issues/11154\r\n  - Edit API: https://github.com/status-im/status-desktop/issues/11153\r\n\r\n**4. Encryption for token gated channels that are inside Open (not token gated) communities**\r\n[#10998](https://github.com/status-im/status-desktop/issues/10998)\r\n\r\n**5. Final screens and bits and bobs needed prior to public beta**\r\n- Modal that's shown every time after login, reminding user's that Status Desktop is in Beta [#11044](https://github.com/status-im/status-desktop/issues/11044)\r\n- The bug with 'requests to join' a community not constantly arriving, or sometimes arriving after a delay, must be fixed. [#8264](https://github.com/status-im/status-desktop/issues/8264)\r\n- Anything that didn't get completed in 0.13 related to new share URL format\r\n- All the outstanding bugs and small items that got pushed into the 0.14 milestone.\r\n\r\n\r\n**--- Things that we SHOULD NOT work on during the 0.14 cycle ---**\r\n- Messaging and UI teams shouldn't work on perf. in 0.14 (but Wallet team should!)\r\n- Anything big mutual contacts related, other than fixing small bugs we find like #10497 #10498 #11120 #11121  (hopefully this functionality working good enough now!)\r\n\r\n**--- Wallet Team ---**\r\n\r\n1. Finish any outstanding work related to Activity screens (top priority - aim to have complete by July 14th)\r\n\r\n2. Updated Wallet Settings screens UI inc. account syncing functionality  *Synced information should immediately be reflected in the UI after it is received (sometimes synced info is currently only displayed after the next app restart, this needs to be fixed)*\r\n\r\n3. Wallet performance and memory consumption optimisations\r\n\r\n4. Fix bugs, clean up loose ends (to get things in a good state before the work on the Mobile wallet starts)\r\n\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 91,
    "closed_issues": 214,
    "state": "open",
    "created_at": "2022-09-28T20:32:56Z",
    "updated_at": "2023-07-28T10:49:16Z",
    "due_on": "2023-08-18T07:00:00Z",
    "closed_at": null
  },
  "comments": 1,
  "created_at": "2023-05-23T14:18:33Z",
  "updated_at": "2023-07-28T09:29:36Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "More less keypairs+keycards and watch-only accounts syncing is introduced in this PR https://github.com/status-im/status-go/pull/3475, but that is good if on both sides data refers to regular account.\r\n\r\nThe whole point here is about ecryption and keystore files.\r\n\r\nIn the table below `regular profile` refers to a profile keypair which is not migrated to a Keycard, `keycard profile` refers to a profile keypair which is migrated to a Keycard. \r\n\r\n### Case 1: recovering from another device\r\n| device A | recover from another device B (local pairing) | Expected state | Done |\r\n| -- | -- | -- | -- |\r\n| regular profile | regular profile | on device A must be: <br>-the same keypairs/accounts as on device B;<br>- the same set of keystore files as on device B;<br>- keystore files and db encrypted using password; | &#x2705; |\r\n| regular profile | keycard profile | on device A must be: <br>-the same keypairs/accounts as on device B;<br>- the same set of non profile keypair related keystore files as on device B;<br>- keystore files and db encrypted using encryption public key; | https://github.com/status-im/status-desktop/issues/10983 &#x2705; |\r\n| keycard profile | regular profile | N/A | N/A |\r\n| keycard profile | keycard profile | N/A | N/A |\r\n\r\n### Case 2: recovering from Waku\r\n| device A | recover from Waku | Expected state | Done |\r\n| -- | -- | -- | -- |\r\n| regular profile | regular profile | on device A must be: <br>- the same keypairs/accounts as it was at the moment when last backup was performed;<br>- no other keystore files then those referring to Status account + one for the default wallet account (path m/44'/60'/0'/0/0);<br>- no keystore files created for any of received seed/privatekey keypairs;<br>- keystore files and db encrypted using password; | &#x2705; |\r\n| regular profile | keycard profile | on device A must be: <br>- the same keypairs/accounts as it was at the moment when last backup was performed;<br>- no keystore files;<br>- db encrypted using encryption public key; | https://github.com/status-im/status-desktop/issues/11661 &#x2705; |\r\n| keycard profile | regular profile | on device A must be: <br>- the same keypairs/accounts as it was at the moment when last backup was performed;<br>- no other keystore files then those referring to Status account and all its derived accounts, that will be possible, cause in this case user has to provide seed phrase + password after successfully fetched backed up data;<br>- keystore files and db encrypted using password; | https://github.com/status-im/status-desktop/issues/11661 &#x2705; |\r\n| keycard profile | keycard profile | on device A must be: <br>- the same keypairs/accounts as it was at the moment when last backup was performed;<br>- no keystore files;<br>- db encrypted using encryption public key; | https://github.com/status-im/status-desktop/issues/11661 &#x2705; |\r\n\r\n### Case 3: when two devices decide to pair\r\n| device A | local pairing with device B (not recovering) | Expected state | Done |\r\n| -- | -- | -- | -- |\r\n| regular profile | regular profile | on device A must be: <br>-the same keypairs/accounts as on device B (means accounts stored on device A which are different then those stored on device B will be removed);<br>- the same set of keystore files as on device B;<br>- keystore files and db encrypted using password; | check the [comment](https://github.com/status-im/status-desktop/issues/10772#issuecomment-1655248967) &#x274C; |\r\n| regular profile | keycard profile | first we need to warn user that he is syncing with the device where profile keypair is migrated to a keycard;<br>if he confirms syncing then on device A must be: <br>- the same keypairs/accounts as on device B (means accounts stored on device A which are different then those stored on device B will be removed);<br>- the same set of keystore files as on device B;<br>- keystore files and db encrypted using encryption public key; | check the [comment](https://github.com/status-im/status-desktop/issues/10772#issuecomment-1655248967) &#x274C; |\r\n| keycard profile | regular profile | first we need to warn user that he is syncing with the device where profile keypair is not migrated to a keycard;<br>if he confirms syncing then on device A must be: <br>- the same keypairs/accounts as on device B (means accounts stored on device A which are different then those stored on device B will be removed);<br>- the same set of keystore files as on device B;<br>- keystore files and db encrypted using password; | check the [comment](https://github.com/status-im/status-desktop/issues/10772#issuecomment-1655248967) &#x274C; |\r\n| keycard profile | keycard profile | on device A must be: <br>-the same keypairs/accounts as on device B (means accounts stored on device A which are different then those stored on device B will be removed);<br>- the same set of keystore files as on device B;<br>- keystore files and db encrypted using encryption public key; | check the [comment](https://github.com/status-im/status-desktop/issues/10772#issuecomment-1655248967) &#x274C; |\r\n\r\n### Case 4: if devices are already paired\r\n| device A | migrating account on device B if A and B are already paired | Expected state | Done |\r\n| -- | -- | -- | -- |\r\n| regular profile | migrating to regular profile | N/A | N/A |\r\n| regular profile | migrating to keycard profile | on device A must be: <br>- the same set of keystore files as on device B (means profile keypair related keystore files are removed);<br>- keystore files and db encrypted using encryption public key; | https://github.com/status-im/status-desktop/issues/11706 |\r\n| keycard profile | migrating to regular profile | on device A must be: <br>- no keystore files created for any account related to a profile keypair;<br>- keystore files and db encrypted using password;| https://github.com/status-im/status-desktop/issues/11706 |\r\n| keycard profile | migrating to keycard profile | N/A | N/A |\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/10772/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/10772/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1655248967",
    "html_url": "https://github.com/status-im/status-desktop/issues/10772#issuecomment-1655248967",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10772",
    "id": 1655248967,
    "node_id": "IC_kwDOD5KrTM5iqRhH",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-28T08:15:39Z",
    "updated_at": "2023-07-28T08:23:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here are the onboarding options for running a new installed Status app for the first time:\r\n**1. I am new to Status**\r\n**2. I already use Status**\r\n\r\nIf user selects **1.**, options are:\r\n**1.1. generate new keys** [END] (generated a new seed phrase - regular user)\r\n**1.2. generate keys for a new keycard** [END] (generated a new seed phrase - keycard user)\r\n**1.3. import a seed phrase**\r\n\r\nif user selects **1.3.**, options are:\r\n**1.3.1. import a seed phrase** [END] (imported a seed phrase which is generated out of the Status app - regular user)\r\n**1.3.2. import a seed phrase into a new Keycard** [END] (imported a seed phrase which is generated out of the Status app - keycard user)\r\n\r\nif user selects **2.**, options are:\r\n**2.1. scan or enter a sync code** [END] (the app is synced from the app on other device - user will be either regular or keycard related, depends on the configuration on the other device)\r\n**2.2. I don't have other device**\r\n\r\nif user selects **2.2.**, options are:\r\n**2.2.1. login with keycard** [END] (means that user doesn't have another device with the same seed phrase and is trying to recover his account from the backup (waku) - keycard user)\r\n**2.2.2. enter a seed phrase** [END] (means that user doesn't have another device with the same seed phrase and is trying to recover his account from the backup (waku) - regular user)\r\n\r\n**Note:**\r\n- In cases **1.3.1.** and **1.3.2.** imported seed phrase should not be one which was previously created by the Status app. That flow is here to let user import their seed phrases which are created out of the Status app.\r\n\r\n- In case **2.** user is firstly forced to pair devices selecting option **2.1.** if he is an old Status user AND has other device. \r\n\r\n- Case **2.2.** should be used only if user is an old Status user and doesn't have other device with the same seed phrase or he lost it. In that case he has 2 options to recover, using a keycard, option **2.2.1.** or seed phrase option **2.2.2.**.\r\n\r\nBased on what's said here, I am not sure if we need to cover \"**Case 3: when two devices decide to pair**\" from the description of this issue? \r\n\r\nReason: \r\nIt's not possible/expected to have the same seed phrase on two devices if they are not paired or user didn't act honestly on the branching points during the onboarding follow (though we don't have a way to check that, it's more on user's responsibility). I mean when user creates a new seed phrase on a single device and wants to use the same seed on other device, he is not any more a new user on the other device and he should follow the correct onboarding flow there.\r\n\r\n@John-44 @benjthayer @alaibe ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1655248967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

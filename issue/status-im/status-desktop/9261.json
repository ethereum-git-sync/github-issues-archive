{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/9261",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/9261/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/9261/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/9261/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/9261",
  "id": 1554559288,
  "node_id": "I_kwDOD5KrTM5cqLE4",
  "number": 9261,
  "title": "Import tool: Add validation that files aren't allowed to be bigger than X",
  "user": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4371312179,
      "node_id": "LA_kwDOD5KrTM8AAAABBIzuMw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:%20Discord-Import",
      "name": "E: Discord-Import",
      "color": "c2e0c6",
      "default": false,
      "description": "Issues related to importing discord communities into Status"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-01-24T08:51:19Z",
  "updated_at": "2023-01-31T14:00:51Z",
  "closed_at": "2023-01-31T14:00:51Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "In an attempt to make the import tool more memory efficient (#8857 ) we need to process data to be imported in chunks.\r\nThe way we'll approach this is importing the data file by file.\r\n\r\nWhile the file size itself is not necessarily a correct indication of the actual amount of data that make it into an archive (profile images and message attachments need to be downloaded which add to the overall size), it's still a good starting point to ensure data is somewhat reasonably chunked.\r\n\r\nLooking at some of the archives I've downloaded last year, 50MB is probably a good limit here:\r\n\r\n```\r\n- 94M Jul  5  2022 'Status - 🌍public _ community - status [630719811558572052].json'\r\n- 39M Jul  5  2022 'Status - 📱 Core Mobile - mobile [626738033701683200].json'           \r\n- 32M Jul  5  2022 'Status - 🖥 Core Desktop - desktop [697843216048717905].json'\r\n- 25M Jul  5  2022 'Status - 🌍public _ community - support [663387611540226077].json'\r\n- 24M Jul  5  2022 'Status - whatever - watercooler [626032368700096522].json'               \r\n- 19M Jul  5  2022 'Status - 🔒security_infra - infra [626045898878877696].json'                 \r\n- 17M Jul  5  2022 'Status - ⚡marketing - marketing-internal [689475399586938931].json'\r\n- 13M Jul  5  2022 'Status - 💳Keycard - keycard [626364653890437140].json'    \r\n- 13M Jul  5  2022 'Status - 🌍public _ community - dap-ps [679254147081568256].json'\r\n-8,2M Jul  5  2022 'Status - 📱 Core Mobile - mobile-ui [626744384565674034].json'\r\n-7,1M Jul  5  2022 'Status - 🔒security_infra - security-internal [629482564180246542].json'\r\n-5,6M Jul  5  2022  people-ops.json\r\n-4,6M Jul  5  2022 'Status - 🖥 Core Desktop - desktop-ui [730410574428504166].json'\r\n-4,1M Jul  5  2022 'Status - 👋Internal - release [739764149516501053].json'         \r\n-4,0M Jul  5  2022 'Status - 🔒security_infra - infra-commits [824206132021166100].json'\r\n-3,7M Jul  5  2022 'Status - 📱 Core Mobile - standups [626744524017762334].json'\r\n-3,5M Jul  5  2022 'Status - 🖥 Core Desktop - random [696720996895424512].json'\r\n-3,1M Jul  5  2022 'Status - 🦄general - general [624205794384281631].json'    \r\n-2,5M Jul  5  2022 'Status - 👋Internal - communities [743483790898233374].json'     \r\n-2,3M Jul  5  2022 'Status - 📱 Core Mobile - status-go [862717376915308544].json' \r\n-2,1M Jul  5  2022 'Status - 🖥 Core Desktop - おはよう-updates [699581220052271194].json'\r\n-1,7M Jul  5  2022 'Status - 🔒security_infra - security [626416839680983072].json'  \r\n-1,7M Jul  5  2022 'Status - 📱 Core Mobile - mobile-prs [877471178569179137].json'\r\n-1,5M Jul  5  2022 'Status - 🎨Design - design [633669891999793165].json'\r\n-1,4M Jul  5  2022 'Status - 👋Internal - pm [704741763729850529].json'\r\n-1,2M Jul  5  2022 'Status - 🛠 Tooling - embark-community [697883935975407657].json'\r\n-1,2M Jul  5  2022 'Status - ⚡marketing - social-media [849356719138013214].json'\r\n-1,2M Jul  5  2022 'Status - whatever - corona-chan [915969473465421864].json'\r\n-1,2M Jul  5  2022 'Status - 👋Internal - status-takeover-dubai [963410163195338762].json'\r\n-1,1M Jul  5  2022 'Status - Archived - assemble [631491979145904129].json'     \r\n-1,1M Jul  5  2022 'Status - 🦄general - status-network [798557959701266433].json'        \r\n-1,1M Jul  5  2022 'Status - 📱 Core Mobile - buy-crypto-and-swaps [780361414275366923].json'\r\n-1,1M Jul  5  2022 'Status - MEETINGS & LOGISTICS - townhall-logistics [628197958805880872].json'\r\n-972K Jul  5  2022 'Status - whatever - war-chan [946379872492716042].json'           \r\n-806K Jul  5  2022 'Status - 🦄general - ask-finance [869581754858635314].json'       \r\n-701K Jul  5  2022 'Status - whatever - memes [915994106797359116].json'                  \r\n-680K Jul  5  2022 'Status - 🔷teller - teller [669575701887844353].json'                 \r\n-649K Jul  5  2022 'Status - 👋Internal - governance [666654375543832623].json'\r\n```\r\n\r\nNotice that the biggest export file at that point was ~39MB (I exclude the very first one because that one is a public channel that has a lot of spam messages in there).\r\n\r\nThe majority of exported data is far below 10 MB, so 50MB is probably very generous but still small enough that it doesn't blow up a machine when loaded into memory (again this is excluding attachments etc, so total size of imported archive data will be more anyways, but those have a size cap as well)\r\n",
  "closed_by": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/9261/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/9261/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1410407420",
    "html_url": "https://github.com/status-im/status-desktop/issues/9261#issuecomment-1410407420",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9261",
    "id": 1410407420,
    "node_id": "IC_kwDOD5KrTM5UERv8",
    "user": {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-31T14:00:47Z",
    "updated_at": "2023-01-31T14:00:47Z",
    "author_association": "MEMBER",
    "body": "This has landed with #9309 ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1410407420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/9947",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/9947/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/9947/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/9947/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/9947",
  "id": 1632071587,
  "node_id": "I_kwDOD5KrTM5hR2-j",
  "number": 9947,
  "title": "1x1 chat: removing custom picture is not reflected on contact's side",
  "user": {
    "login": "anastasiyaig",
    "id": 82375995,
    "node_id": "MDQ6VXNlcjgyMzc1OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anastasiyaig",
    "html_url": "https://github.com/anastasiyaig",
    "followers_url": "https://api.github.com/users/anastasiyaig/followers",
    "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
    "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
    "repos_url": "https://api.github.com/users/anastasiyaig/repos",
    "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5843564046,
      "node_id": "LA_kwDOD5KrTM8AAAABXE22Dg",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Bugfixes%200.15",
      "name": "E:Desktop Bugfixes 0.15",
      "color": "171717",
      "default": false,
      "description": "Misc bug fixes in Desktop app overall for 0.15"
    },
    {
      "id": 6176323312,
      "node_id": "LA_kwDOD5KrTM8AAAABcCM28A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Bugfixes%200.15.5",
      "name": "E:Desktop Bugfixes 0.15.5",
      "color": "BFE9C3",
      "default": false,
      "description": ""
    },
    {
      "id": 6343085517,
      "node_id": "LA_kwDOD5KrTM8AAAABehPNzQ",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/sprint-12-19",
      "name": "sprint-12-19",
      "color": "FFFFFF",
      "default": false,
      "description": ""
    },
    {
      "id": 6384622745,
      "node_id": "LA_kwDOD5KrTM8AAAABfI2cmQ",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/sprint-01-02",
      "name": "sprint-01-02",
      "color": "9C4E49",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [
    {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/61",
    "html_url": "https://github.com/status-im/status-desktop/milestone/61",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/61/labels",
    "id": 8739485,
    "node_id": "MI_kwDOD5KrTM4AhVqd",
    "number": 61,
    "title": "0.16",
    "description": "## Messaging & Communities team\r\n\r\n**1.  Fix bug and stabilise Communities and Messaging functionality**\r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase**\r\n\r\n&nbsp;\r\n\r\n## Wallet Team\r\n\r\n**1. Complete support for Community minted assets**\r\n\r\n**2. Complete token visibility management screens**\r\n\r\n**3. Continue working on WalletConnect support**\r\n\r\n**4. Minor updates to Asset screens**\r\n\r\n**5. Continue fixing bugs, making optimisations and keeping tech debt low**\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 152,
    "closed_issues": 184,
    "state": "open",
    "created_at": "2022-12-09T15:06:43Z",
    "updated_at": "2024-01-11T16:04:06Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 2,
  "created_at": "2023-03-20T13:04:31Z",
  "updated_at": "2024-01-11T17:45:03Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n1. open app\r\n2. add mutual contact\r\n3. open chat with this contact\r\n4. set custom user picture for yourself and save\r\n5. make sure the picture is shown for your contact\r\n6. delete the custom picture from your profile to have default one\r\n7. check contact's chat\r\n\r\nAs result, the contact is still seeing custom picture , even it was removed\r\n\r\n<img width=\"1917\" alt=\"Screenshot 2023-03-20 at 16 03 51\" src=\"https://user-images.githubusercontent.com/82375995/226346959-09d5ab66-f753-41d6-a7f6-cc041d849950.png\">\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/9947/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/9947/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1865357853",
    "html_url": "https://github.com/status-im/status-desktop/issues/9947#issuecomment-1865357853",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9947",
    "id": 1865357853,
    "node_id": "IC_kwDOD5KrTM5vLxod",
    "user": {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-21T01:41:18Z",
    "updated_at": "2023-12-21T01:41:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, \r\n\r\nI had a first look at the issue, and managed to reproduce the issue\r\nby following the steps given in the description.\r\nThis ticket involves the following function :\r\n\r\n```\r\nproc deleteIdentityImage*(keyUID: string): RpcResponse[JsonNode] {.raises: [Exception].} =\r\n  let payload = %* [keyUID]\r\n  result = core.callPrivateRPC(\"multiaccounts_deleteIdentityImage\", payload)\r\n\r\n...\r\n\r\nproc deleteIdentityImage*(self: Controller, address: string) =\r\n  self.profileService.deleteIdentityImage(address)\r\n```\r\n\r\nAt first glance, there is a pull or push mechanism for status clients which involves pulling the new image or if there's no new images, set the default image for the contact.\r\nHowever, this action doesn't happen.\r\n\r\nI believe, I am missing some elements to fix this ticket at optimal speed, I will take some 1 more day than expected to make sure I understand the details before starting a fix.\r\nI communicated to @iurimatias about this proposal.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1865357853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1883826242",
    "html_url": "https://github.com/status-im/status-desktop/issues/9947#issuecomment-1883826242",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9947",
    "id": 1883826242,
    "node_id": "IC_kwDOD5KrTM5wSOhC",
    "user": {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-09T21:30:03Z",
    "updated_at": "2024-01-11T17:45:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "From my testing, I have noticed that when I perform the image replacement of the Profile image, I receive a message that is sent that the contact code\r\n\r\n\r\nExample : \r\n\r\n```bash\r\nmap[{0x04c429330e366166687319c372775b39a917352e1af7f1510bf0a7a7805f7a2597030753529f3ff5e55b5a27c1d0be154312fa924532ac2ad005ed403223a43e9b-contact-code 7692f12c2a0093997319247c6fdab3e044f078d11cb6180da1e57c04826cc670 696540e50b67789173e875e0f48e68d920d28c9c2df9b602769434ee15bc8029 false 04c429330e366166687319c372775b39a917352e1af7f1510bf0a7a7805f7a2597030753529f3ff5e55b5a27c1d0be154312fa924532ac2ad005ed403223a43e9b  [137 94 6 90] false false true false 0}:[0x1c003bb2840]]\r\n```\r\n\r\nBut nothing is received when deleting the image on the profile. So the problem seems to be that the remove image doesn't notify anything therefore causing the issue.\r\nI put a log in the RetrieveAll() function to observe all messages.\r\n\r\nhttps://github.com/status-im/status-go/blob/a8357dceacd1b737952660272bf80251df19b8f8/protocol/messenger.go#L3255\r\n\r\n\r\n--------\r\n\r\nStep 1 :\r\nAdded a code to trigger the publishing of a message when the user does the delete of the profile image. The profile image delete was merely a delete of the image inside the database, but didn't trigger anything. Now we will publish a message that should be caught in Step 2. I can reuse the same trigger as for sending an image. But the message should have empty image.\r\n\r\nStep 2 :\r\nOnce Step 1 sent the message to delete the profile image, the application will reset the image.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1883826242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/9923",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/9923/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/9923/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/9923/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/9923",
  "id": 1627546992,
  "node_id": "I_kwDOD5KrTM5hAmVw",
  "number": 9923,
  "title": "Split images and audio messages into 125kb chunks for sending over Waku to enable support for larger images and audio messages",
  "user": {
    "login": "John-44",
    "id": 22846356,
    "node_id": "MDQ6VXNlcjIyODQ2MzU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/John-44",
    "html_url": "https://github.com/John-44",
    "followers_url": "https://api.github.com/users/John-44/followers",
    "following_url": "https://api.github.com/users/John-44/following{/other_user}",
    "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
    "organizations_url": "https://api.github.com/users/John-44/orgs",
    "repos_url": "https://api.github.com/users/John-44/repos",
    "events_url": "https://api.github.com/users/John-44/events{/privacy}",
    "received_events_url": "https://api.github.com/users/John-44/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 6176451730,
      "node_id": "LA_kwDOD5KrTM8AAAABcCUskg",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Features%200.17",
      "name": "E:Desktop Features 0.17",
      "color": "58017F",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/70",
    "html_url": "https://github.com/status-im/status-desktop/milestone/70",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/70/labels",
    "id": 9405726,
    "node_id": "MI_kwDOD5KrTM4Aj4Ue",
    "number": 70,
    "title": "0.17",
    "description": "**1. Finish anything that wasn't completed in the previous 0.16 cycle**\r\n\r\n- And fix bugs as usual.  We need to keep tech. debt at a roughly fixed level as we grow out functionality, can't let it accumulate! ;-)\r\n\r\n- Ensure accounts stored on Keycard are taken into consideration for community permissions\r\n\r\n**2. Token import functionality**\r\n- Ability for a community Owner to import ERC-20 and NFT tokens, to later be airdropped or retailed\r\n\r\n**3. Sending tokens to other users in chat**\r\n- Rebuild this functionality, based on a new design that utilizes the profile showcase functionality\r\n\r\n**4. Binaries over Waku**\r\n- Improve transfer of binaries over waku via splitting into chunks https://github.com/status-im/status-desktop/issues/9923\r\n- Posting of small files (max size somewhere in the region of 1 to 2mb).  Requires above item before going live\r\n\r\n**5. Chat functionality enhancements**\r\n- Introduce @channel as a new type of global @ mention.  This @ mention only @ mention's everyone who has posted a message in a channel in the last 30 days \r\n- Introduce the ability to search the users in the right side members/users bar.  At the same time, make any adaptations needed so that the right side members/users bar can scale to 10,000 users.\r\n\r\n**6. Automatic bandwidth test on app startup**\r\n- automatic bandwidth test on app startup, and use results to automatically configure the waku shard usage appropriately depending on the available bandwidth (at the 'user has tons of bandwidth' end of the spectrum all waku shards will use waku Relay mode, at the 'user has very little bandwidth' end of the spectrum all waku shards will use waku filter + light push mode, and in between these two ends of the spectrum the user will use a mix of waku relay mode and waku filter + light push mode for different shards).  Plus also use  the results of the bandwidth test to automatically set the bittorred throttling at an appropriate setting at the beginning of each new session.\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 2,
    "closed_issues": 0,
    "state": "open",
    "created_at": "2023-05-16T17:34:32Z",
    "updated_at": "2023-10-03T12:02:40Z",
    "due_on": "2024-03-28T07:00:00Z",
    "closed_at": null
  },
  "comments": 1,
  "created_at": "2023-03-16T13:59:12Z",
  "updated_at": "2023-11-06T16:59:25Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Problem:\r\n- Waku isn't designed to send large messages\r\n\r\n- libp2p (which Waku is built on top of) is in the process of being optimised by ProtocolLabs and others for messages up to 125kb in size, as part of the work to implement Ethereum's DankSharding (EIP-4844)\r\n\r\n- Users expect good quality images in a messaging app, but Status currently has a 300kb image size limit, and images that user's post are recompressed to fit inside this size limit (which means that large images currently look rubbish in Status).\r\n\r\n- It would be nice to raise the length limit for audio messages in the future\r\n\r\n- We would like to allow users to share small files (e.g. up to 2mb) in the future\r\n\r\n- The community web onboarding screens (the screen a user who doesn't have Status installed arrives on when they open a community URL that has been sent to them in a browser) requires communities to use a large high quality image as their banner (see example screen below)\r\n![2023-03-16 13_44_23-Sharing for Mobile â€“ Figma](https://user-images.githubusercontent.com/22846356/225636968-e84110e3-a15d-4e82-8d83-90dd3c48f861.png)\r\n\r\n## Solution\r\n- Add support to status-go to split binary files that are larger than 125kb into several waku messages, each with a 125kb payload.  Then at the recipient's end, reconstruct the binary from these multiple waku messages.\r\n\r\n- Increase the max size limit for each image sent in a message to 1.5mb.  If an image is less than 1.5mb it should not be recompressed.  If an image is larger than 1.5mb it should be recompressed to 1.5mb using the recompression functionality that is already in status-go today.\r\n\r\n- Increase the max size of audio messages to 1.5mb (e.g. at it's largest size, it would be split into twelve 125kb waku messages)\r\n\r\n- Increase the max size of community banner images to 2.5mb (e.g. at it's largest size, it would be split into twenty 125kb waku messages)\r\n\r\n- Set the max size of a community logo image as 250kb (e.g. at it's largest size, it would be split into two 125kb waku messages)\r\n\r\n- Set the max size of a user avatar image as 125kb  (e.g. at it's largest size, it would be split into two 125kb waku messages)\r\n\r\n## Other notes\r\n\r\n- This feature should be worked on by the Desktop team (not the Mobile team, because the Mobile has more work to do to get to MVP) \r\n\r\n- The desktop team shouldn't work on this feature until after the 0.13 release\r\n\r\n- Before starting work on this feature, whoever is going to implement it should speak to both @cammellos (because this is an approach that @cammellos has already been thinking about) and @felicio (because @felicio will need to add support for this into status.js)   \r\n\r\ncc'ing @iurimatias ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/9923/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/9923/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1795494180",
    "html_url": "https://github.com/status-im/status-desktop/issues/9923#issuecomment-1795494180",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/9923",
    "id": 1795494180,
    "node_id": "IC_kwDOD5KrTM5rBREk",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-06T16:59:19Z",
    "updated_at": "2023-11-06T16:59:19Z",
    "author_association": "MEMBER",
    "body": "FYI, there is a strong chance that  https://github.com/status-im/status-desktop/issues/12188 fixes this issue as well, since we'll do a more generic solution that chunks messages that exceed the waku limit",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1795494180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

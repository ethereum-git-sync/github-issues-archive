{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/8264",
  "id": 1450204398,
  "node_id": "I_kwDOD5KrTM5WcFzu",
  "number": 8264,
  "title": "Investigate why community requests to join are often not received",
  "user": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3205510054,
      "node_id": "MDU6TGFiZWwzMjA1NTEwMDU0",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/priority%201:%20high",
      "name": "priority 1: high",
      "color": "D93F0B",
      "default": false,
      "description": "an issue that is extremely important to fix, that interferes with the majority of users, occurs ofte"
    },
    {
      "id": 3955125927,
      "node_id": "LA_kwDOD5KrTM7rvm6n",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Communities",
      "name": "E:Communities",
      "color": "E56631",
      "default": false,
      "description": ""
    },
    {
      "id": 4331092409,
      "node_id": "LA_kwDOD5KrTM8AAAABAic5uQ",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/S:4",
      "name": "S:4",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5639332268,
      "node_id": "LA_kwDOD5KrTM8AAAABUCFhrA",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/C2",
      "name": "C2",
      "color": "E15258",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/57",
    "html_url": "https://github.com/status-im/status-desktop/milestone/57",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/57/labels",
    "id": 8475715,
    "node_id": "MI_kwDOD5KrTM4AgVRD",
    "number": 57,
    "title": "0.14",
    "description": "Milestone cycles:\r\n\r\n[Cycle 1](https://github.com/status-im/status-desktop/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.14+label%3AC1): 7 July\r\n[Cycle 2](https://github.com/status-im/status-desktop/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.14+label%3AC2): 28 July \r\n[Cycle 3](https://github.com/status-im/status-desktop/issues?q=is%3Aopen+is%3Aissue+milestone%3A0.14+label%3AC3): 18 August\r\n\r\n**Must be complete by 28th June - Deploy Community Directory Curation dApp**\r\n- Deploy SNT contract to Optimism\r\n- Register SNT contract with Optimism bridge\r\n- Deploy Curation dApp smart contracts to Optimism mainnet (not testnet)\r\n- Deploy Community Directory Curation dApp UI to \"curate.status.app\" domain (task for PVL)\r\n\r\nThen create a public 'Status Test Community'\r\n- 1 SNT is required to join the community\r\n- The community contains some token gated channels\r\n- Mint soulbound remotely destructible admin token\r\n- Airdrop Admin token to everybody in Messaging, QA and UI teams \r\n- Setup admin permission\r\n\r\nStart vote for this community to be the first community featured in the real, mainnet Community Directory!\r\nAim for all of the above to be done by end of June.\r\n\r\n\r\n**--- Main focus ---**\r\n\r\n**1. Token permissions to enable control of community smart contracts**\r\n- Before a community founder can use any of the community token admin functionality, they first have to deploy Owner and Token Master contracts.\r\n- This work involves: new empty state screen for Mint and Airdrop tokens (before current empty state screen is revealed), new flow for deploying the community's Owner and Token Master contracts in a single step, a fixed uneditable permission giving anybody who holds the Token Master token admin rights for the community should be automatically created.\r\n- Only the holder of the single Owner token can access the Token Master airdrop, remote destruct, and view holders functions. Anybody who holds the Token Master token can access all token admin options, excluding those related to the Token Master token itself, as well as being and Admin of the community.\r\n- This will all be explained in more detail in the designs.\r\n\r\nBackend Epic: https://github.com/status-im/status-desktop/issues/11249\r\n\r\n**2. Updates to control node transfer and associated dialogues**\r\n- Remove ability for a Owner to leave a community on the computer that's running as that community's control node\r\n- Community Admin home screen cleanup (inc. adding at least one of the three graphs, whichever is easiest to implement).\r\n  - Graph issue: https://github.com/status-im/status-desktop/issues/11152  \r\n  - Community overview: https://github.com/status-im/status-desktop/issues/11278\r\n\r\n**3. Ability for user to select & manage accounts shared with each community control node**\r\n- This item is quite a bit of work\r\n- Touches Community settings, as well as all of the community join flows\r\n- Backend issues: \r\n  - Join API: https://github.com/status-im/status-desktop/issues/11154\r\n  - Edit API: https://github.com/status-im/status-desktop/issues/11153\r\n\r\n**4. Encryption for token gated channels that are inside Open (not token gated) communities**\r\n[#10998](https://github.com/status-im/status-desktop/issues/10998)\r\n\r\n**5. Final screens and bits and bobs needed prior to public beta**\r\n- Modal that's shown every time after login, reminding user's that Status Desktop is in Beta [#11044](https://github.com/status-im/status-desktop/issues/11044)\r\n- The bug with 'requests to join' a community not constantly arriving, or sometimes arriving after a delay, must be fixed. [#8264](https://github.com/status-im/status-desktop/issues/8264)\r\n- Anything that didn't get completed in 0.13 related to new share URL format\r\n- All the outstanding bugs and small items that got pushed into the 0.14 milestone.\r\n\r\n**6. Profile showcase backend**\r\n- The long-delayed profile showcase backend!  We have the UI on the desktop ready to go for this feature, and Mobile is going to need the backend for this feature as well, so let's try to get it done in 0.14 [#11081](https://github.com/status-im/status-desktop/issues/11081)\r\n\r\n\r\n\r\n**--- Things that we SHOULD NOT work on during the 0.14 cycle ---**\r\n- Messaging and UI teams shouldn't work on perf. in 0.14 (but Wallet team should!)\r\n- Anything big mutual contacts related, other than fixing small bugs we find like #10497 #10498 #11120 #11121  (hopefully this functionality working good enough now!)\r\n\r\n**--- Wallet Team ---**\r\n\r\n1. Finish any outstanding work related to Activity screens (top priority - aim to have complete by July 14th)\r\n\r\n2. Updated Wallet Settings screens UI inc. account syncing functionality  *Synced information should immediately be reflected in the UI after it is received (sometimes synced info is currently only displayed after the next app restart, this needs to be fixed)*\r\n\r\n3. Wallet performance and memory consumption optimisations\r\n\r\n4. Fix bugs, clean up loose ends (to get things in a good state before the work on the Mobile wallet starts)\r\n\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 126,
    "closed_issues": 59,
    "state": "open",
    "created_at": "2022-09-28T20:32:56Z",
    "updated_at": "2023-06-30T17:34:11Z",
    "due_on": "2023-08-18T07:00:00Z",
    "closed_at": null
  },
  "comments": 7,
  "created_at": "2022-11-15T18:30:42Z",
  "updated_at": "2023-06-28T14:09:30Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n@iurimatias has found that with the multitude of requests he receives for the Status CC community, a lot of people say they sent a request and he never received it.\r\n\r\nI know it happened to me as well and it took one or two days before he finally received it.\r\n\r\nWe need to investigate if the issue is in sending, the peer to peer network or in receiving.\r\n\r\nThis might be related to message reliability, so one way to debug it would be to first reproduce the issue, get that message ID and/or envelope ID and then track it through all the layers. @richard-ramos added logs everywhere to help debug this.\r\n\r\nMaybe @iurimatias can share his DB if needed to see if we can see something on the receiving end.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/8264/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1329207926",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1329207926",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1329207926,
    "node_id": "IC_kwDOD5KrTM5POhp2",
    "user": {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T14:28:14Z",
    "updated_at": "2022-11-28T14:28:14Z",
    "author_association": "MEMBER",
    "body": "@iurimatias with latest fixes included in nwaku,  you should be able to retrieve historic messages that contain community requests, improving the experience.\n\nI did some experiments and code review of sections related to building the community request and also receiving them and found no apparent problems there. Lack of connectivity to peers might be causing these messages to not be broadcasted succesfully, so we might have to wait until NAT hole punching solutions are deployed.\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1329207926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1347370191",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1347370191",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1347370191,
    "node_id": "IC_kwDOD5KrTM5QTzzP",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-12T21:36:04Z",
    "updated_at": "2022-12-12T21:36:04Z",
    "author_association": "MEMBER",
    "body": "More info:\r\nWe discovered that the issue seems to be on the status-go side. I had a request that was sent from one account, and the other didn't receive it. I tracked the envelope ID and the message ID, and it **did** receive the envelope, but not the message id.\r\n\r\nHere are the logs for that envelope hash:\r\n```\r\ngeth-2022-12-12T20-33-11.382.log:t=2022-12-12T15:08:03-0500 lvl=info msg=\"received waku2 store message\" envelopeHash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth-2022-12-12T20-33-11.382.log:t=2022-12-12T15:08:03-0500 lvl=dbug msg=\"received new envelope\" hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth-2022-12-12T20-33-11.382.log:t=2022-12-12T15:08:03-0500 lvl=dbug msg=\"cached w envelope\" envelopeHash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=info msg=\"received waku2 store message\" envelopeHash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"received new envelope\" hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"cached w envelope\" envelopeHash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"message not cached\" namespace=Transport site=retrieveRawAll hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"calculated ID for envelope\" envelopeHash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7 messageId=0x764d1bfbdedcabaef60150c6e5efcab9d5a20efe7522b84d247011ebf13a42fe\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"processing messages further\" site=RetrieveAll hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7 count=1\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=info msg=\"processing message\" site=RetrieveAll hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7 message-id=0x764d1bfbdedcabaef60150c6e5efcab9d5a20efe7522b84d247011ebf13a42fe\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"Handling parsed message\" site=RetrieveAll hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7 message-id=0x764d1bfbdedcabaef60150c6e5efcab9d5a20efe7522b84d247011ebf13a42fe\r\ngeth.log:t=2022-12-12T15:57:24-0500 lvl=dbug msg=\"Handling CommunityRequestToJoin\" site=RetrieveAll hash=0x67a8ccfd1b2c17ee9d655ee0963bfb06df1455af3d369a974cc9277808acf9c7 message-id=0x764d1bfbdedcabaef60150c6e5efcab9d5a20efe7522b84d247011ebf13a42fe\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1347370191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1563138332",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1563138332",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1563138332,
    "node_id": "IC_kwDOD5KrTM5dK5kc",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-25T15:51:15Z",
    "updated_at": "2023-05-25T15:51:15Z",
    "author_association": "MEMBER",
    "body": "Some more recent logs we got\r\n```\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"cached w envelope\" envelopeHash=0x251ae7b5bcbeeb9c19e4c2a46af4a6bfb5013356e15126a039dab96f018dffbf\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"processing message: decrypted\" hash=0x251ae7b5bcbeeb9c19e4c2a46af4a6bfb5013356e15126a039dab96f018dffbf\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"processing message: decrypted\" hash=0x36a08e7ce17c7510d285b9c6259645dee1a11ae5dccd1d79a11bf6fb32a72e4e\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"filters did not match\" hash=0x36a08e7ce17c7510d285b9c6259645dee1a11ae5dccd1d79a11bf6fb32a72e4e contentTopic=/waku/1/0x6a4860f5/rfc26\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"processing message: decrypted\" hash=0xf38bc40db5441e2931a72aaa3d420b29ebe341a5f4f0d9a6ca0fc8c1539d742a\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"Epoch processing\" namespace=mvds node=04f2e7b3 epoch=4,129,264\r\nt=2023-01-10T08:49:50-0500 lvl=dbug msg=\"Epoch processing\" namespace=mvds node=04f2e7b3 epoch=4,129,265\r\n```\r\nInteresting line: `t=2023-01-10T08:49:50-0500 lvl=dbug msg=\"filters did not match\" hash=0x36a08e7ce17c7510d285b9c6259645dee1a11ae5dccd1d79a11bf6fb32a72e4e contentTopic=/waku/1/0x6a4860f5/rfc26`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1563138332/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1563146188",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1563146188",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1563146188,
    "node_id": "IC_kwDOD5KrTM5dK7fM",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-25T15:56:47Z",
    "updated_at": "2023-05-25T15:56:47Z",
    "author_association": "MEMBER",
    "body": "Some discussion I had with Richard \r\n\r\nJo — 06/01/2023 10:37\r\nhashes:\r\n```\r\nt=2023-01-06T10:34:23-0500 lvl=dbug msg=\"SENDING message\" namespace=Transport topic=\"[121 109 30 135]\"\r\nt=2023-01-06T10:34:23-0500 lvl=dbug msg=\"sent community message \" messageID=0x5ef7489796fc2a07e2337b4439f124e090e831d5ff2993b219b9dd26271f2583 hash=0x708edf79c81ef821036638bc9bf5a422674ea0c5307f8e76b5e3a582d60fe193\r\nt=2023-01-06T10:34:23-0500 lvl=info msg=\"publishing message via relay\" envelopeHash=0x708edf79c81ef821036638bc9bf5a422674ea0c5307f8e76b5e3a582d60fe193\r\nt=2023-01-06T10:34:23-0500 lvl=info msg=\"waku.relay published\" hash=708edf79c81ef821036638bc9bf5a422674ea0c5307f8e76b5e3a582d60fe193\r\n```\r\nrramos.eth | ラモス — 06/01/2023 10:38\r\nthe sending message topic should be  [121 109 30 135]  -----> 796D1E87 \r\nJo — 06/01/2023 10:38\r\nyou're saying it's using a wrong topic?\r\nrramos.eth | ラモス — 06/01/2023 10:39\r\nno, i'm translating it from decimal to hex\r\nJo — 06/01/2023 10:39\r\nkk\r\nah crap, I forgot that my second dekstop app is not up to date with master\r\nupdating now\r\nrramos.eth | ラモス — 06/01/2023 10:42\r\naccordign to the code, when sending a request to join message, it's sent to a public chat.\r\nWith a topic calculated from the public key from the community\r\n    filter, err := t.filters.LoadPublic(PubkeyToHex(publicKey)[2:])\r\nso the type \"public\" is okay\r\nJo — 06/01/2023 10:42\r\nah ok\r\nrramos.eth | ラモス — 06/01/2023 10:43\r\nwhat we need to figure out is if we have the filter registered for the receiver.\r\nthere should be a     filter, err := t.filters.LoadPublic(PubkeyToHex(publicKey)[2:])   too, for same public key\r\nJo — 06/01/2023 10:45\r\nOk I'll check it out\r\nrramos.eth | ラモス — 06/01/2023 10:46\r\nwhat i do see is this:\r\n```\r\nt=2023-01-05T13:41:04-0500 lvl=dbug msg=\"registering filter for\" namespace=filtersManager chatID=0x03046e24607c7e8c858034705637e9a9c405bd55f45772684e5eebbd3550216750 type=public topic=0xf73734f1\r\n```\r\nnotice the chatID there is a compressed key\r\nJo — 06/01/2023 10:47\r\nindeed\r\nrramos.eth | ラモス — 06/01/2023 10:47\r\ni wonder if that's the problem\r\nwill keep digging\r\nbecause when the message was sent, i think it was sent to a expanded public key (0x04....) \r\nrramos.eth | ラモス — 06/01/2023 10:48\r\nin here\r\n:Peepo_MathsConfusedThink:\r\nJo — 06/01/2023 10:49\r\nI did another repro on my two dev accounts. It failed again, but this time, I don't see the topic being registered at all\r\nAh, if I search /waku/1/0x59f6102d/rfc26 I don't find it, but I find it just with 0x59f6102d\r\nHmm\r\n```\r\nt=2023-01-05T13:41:04-0500 lvl=dbug msg=\"registering filter for\" namespace=filtersManager chatID=043900e2a9c7b4bf7146a4a31e4b768ca764f67ebbc9701fa9c809f832398500eb045c13489c089e75049bda10a512da05b94083ae09bb71fa5f00308344f686b4-admin type=community topic=0x59f6102d\r\n```\r\nthis time it says type community\r\nrramos.eth | ラモス — 06/01/2023 10:52\r\nbut that chatID is different\r\nJo — 06/01/2023 10:52\r\nand that was a fail\r\nrramos.eth | ラモス — 06/01/2023 10:52\r\nends in \"-admin\"\r\nJo — 06/01/2023 10:52\r\nright\r\nrestarted and got the request, let's see the diff\r\nrramos.eth | ラモス — 06/01/2023 10:55\r\nI have the suspicion that the problem is inside messenger_communities\r\nwherever we call InitPublicFilters\r\ni think that we are not being consistent with the communityID there\r\nwe're passing the compressed public key in some ocassions,\r\nand in others the full public key\r\nJo — 06/01/2023 10:56\r\nweird thing\r\nCan the message coming from mailserver have a different envelope ID than the direct one?\r\nrramos.eth | ラモス — 06/01/2023 10:57\r\nyes, sadly\r\nJo — 06/01/2023 10:57\r\nah ok\r\nrramos.eth | ラモス — 06/01/2023 10:57\r\nit's due to an issue i described in nwaku's repo\r\nJo — 06/01/2023 10:57\r\nthat explains what I'm seeing\r\nrramos.eth | ラモス — 06/01/2023 10:57\r\nabout the ids not being deterministic\r\nJo — 06/01/2023 10:57\r\nright\r\nat least I had the message ID\r\nlol sadly, I don't have the topic id/name when the reception is a success",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1563146188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1563155732",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1563155732",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1563155732,
    "node_id": "IC_kwDOD5KrTM5dK90U",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-25T16:03:12Z",
    "updated_at": "2023-05-25T16:03:12Z",
    "author_association": "MEMBER",
    "body": "thanks, taking a look at this",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1563155732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1579126212",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1579126212",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1579126212,
    "node_id": "IC_kwDOD5KrTM5eH43E",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-06T16:51:45Z",
    "updated_at": "2023-06-06T16:51:45Z",
    "author_association": "MEMBER",
    "body": "@cammellos have you found anything? Do you need more info to help you?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1579126212/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1581483368",
    "html_url": "https://github.com/status-im/status-desktop/issues/8264#issuecomment-1581483368",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/8264",
    "id": 1581483368,
    "node_id": "IC_kwDOD5KrTM5eQ4Vo",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-07T20:45:56Z",
    "updated_at": "2023-06-07T20:45:56Z",
    "author_association": "MEMBER",
    "body": "@jrainville sorry, got distracted :) more logs are always helpful, I had a look at the code and there's nothing obvious, but I'll have more time on Friday to investigate, apologies for the delay",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1581483368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12813",
  "id": 2004178051,
  "node_id": "I_kwDOD5KrTM53dVSD",
  "number": 12813,
  "title": "Messages that are sent from desktop when the client goes offline and before offline banner is shown will be lost (communities, \"Relay mode\")",
  "user": {
    "login": "churik",
    "id": 4557972,
    "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/churik",
    "html_url": "https://github.com/churik",
    "followers_url": "https://api.github.com/users/churik/followers",
    "following_url": "https://api.github.com/users/churik/following{/other_user}",
    "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
    "organizations_url": "https://api.github.com/users/churik/orgs",
    "repos_url": "https://api.github.com/users/churik/repos",
    "events_url": "https://api.github.com/users/churik/events{/privacy}",
    "received_events_url": "https://api.github.com/users/churik/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5745637395,
      "node_id": "LA_kwDOD5KrTM8AAAABVnd4Ew",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Community%20Bugfixes%20MVP",
      "name": "E:Desktop Community Bugfixes MVP",
      "color": "01CE46",
      "default": false,
      "description": "Misc bug fixes about communities that are due for the MVP"
    },
    {
      "id": 5954122732,
      "node_id": "LA_kwDOD5KrTM8AAAABYuSz7A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:%20Desktop%20Chat%20Messages%20&%20Chat%20Features",
      "name": "E: Desktop Chat Messages & Chat Features",
      "color": "F2960B",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "endulab",
    "id": 61889657,
    "node_id": "MDQ6VXNlcjYxODg5NjU3",
    "avatar_url": "https://avatars.githubusercontent.com/u/61889657?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/endulab",
    "html_url": "https://github.com/endulab",
    "followers_url": "https://api.github.com/users/endulab/followers",
    "following_url": "https://api.github.com/users/endulab/following{/other_user}",
    "gists_url": "https://api.github.com/users/endulab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/endulab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/endulab/subscriptions",
    "organizations_url": "https://api.github.com/users/endulab/orgs",
    "repos_url": "https://api.github.com/users/endulab/repos",
    "events_url": "https://api.github.com/users/endulab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/endulab/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "endulab",
      "id": 61889657,
      "node_id": "MDQ6VXNlcjYxODg5NjU3",
      "avatar_url": "https://avatars.githubusercontent.com/u/61889657?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/endulab",
      "html_url": "https://github.com/endulab",
      "followers_url": "https://api.github.com/users/endulab/followers",
      "following_url": "https://api.github.com/users/endulab/following{/other_user}",
      "gists_url": "https://api.github.com/users/endulab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/endulab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/endulab/subscriptions",
      "organizations_url": "https://api.github.com/users/endulab/orgs",
      "repos_url": "https://api.github.com/users/endulab/repos",
      "events_url": "https://api.github.com/users/endulab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/endulab/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/77",
    "html_url": "https://github.com/status-im/status-desktop/milestone/77",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/77/labels",
    "id": 9909318,
    "node_id": "MI_kwDOD5KrTM4AlzRG",
    "number": 77,
    "title": "0.15.5 - Stabilizing release",
    "description": "A point milestone where we focus the Messaging and Communities team 100% on bug fixing, stabilisation, reliability and finishing any unfinished items from 0.15  \r\n\r\n**1.  Fix bug and stabilise Communities and Messaging functionality**\r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase **\r\n\r\n\r\n\r\n--- Wallet ---\r\n\r\n- Improved handling of community minted tokens: Community Asset and NFT designs for Asset screens\r\n- Token visibility management\r\n- Minor updates to Asset screens\r\n- Continue work on WalletConnect integration\r\n- Database re-encryption flows",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 123,
    "closed_issues": 67,
    "state": "open",
    "created_at": "2023-09-11T16:40:59Z",
    "updated_at": "2023-11-29T12:16:05Z",
    "due_on": "2023-12-07T08:00:00Z",
    "closed_at": null
  },
  "comments": 13,
  "created_at": "2023-11-21T12:26:47Z",
  "updated_at": "2023-11-29T10:11:08Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\nMessages that were sent from an offline state when the desktop client doesn't detect that the device is offline (when the banner appears, ~1-1,5 mins) will never be delivered.\r\nThe issue is not reproducible for mobile.\r\n\r\n\r\n## Steps to reproduce\r\n**Prerequisites**: 2 users have joined the community\r\n1. Desktop: switch off Wi-Fi, send several messages to the community (send messages until \"Offline\" banner appears) \r\n2. Desktop: send several messages after \"Offline\" banner appears (they will be shown with \"Resend\" option)\r\n3. Desktop: switch on Wi-fi\r\n4. Mobile: check community \r\n\r\nhttps://github.com/status-im/status-desktop/assets/4557972/af0bdd66-6fd4-4c8a-ad1e-d4bcd93b4ac7\r\n\r\n\r\n#### Expected behavior\r\nall messages are delivered\r\n\r\n#### Actual behavior\r\nmessages sent on step 1 will be lost\r\n\r\n### Additional Information\r\n\r\n- Status desktop version: [RC3 0.15.x ](https://ci.infra.status.im/job/status-desktop/job/release/job/release%2F0.15.x/14/)\r\n- Operating System: Mac OSx\r\n\r\nLog: [geth copy 2.log](https://github.com/status-im/status-desktop/files/13426148/geth.copy.2.log)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12813/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820845860",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1820845860",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1820845860,
    "node_id": "IC_kwDOD5KrTM5sh-ck",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-21T12:37:06Z",
    "updated_at": "2023-11-21T12:37:06Z",
    "author_association": "MEMBER",
    "body": "most likely due to relay not having message confirmations?\r\nif lightpush enabled, do you have the same?\r\nit should work ok in 1-to-1, since we resend until delivery confirmed",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820845860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820910961",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1820910961",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1820910961,
    "node_id": "IC_kwDOD5KrTM5siOVx",
    "user": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-21T13:18:14Z",
    "updated_at": "2023-11-21T13:18:14Z",
    "author_association": "NONE",
    "body": "This bug will be perceived by users as messaging reliability issue, and some solution is therefor high priority.  I won't opinion on the solution here, but seems like something for 0.15.5 (or 0.16 at the latest)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820910961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820929262",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1820929262",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1820929262,
    "node_id": "IC_kwDOD5KrTM5siSzu",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-21T13:29:20Z",
    "updated_at": "2023-11-21T13:29:20Z",
    "author_association": "MEMBER",
    "body": "This is something discussed before in waku calls, I believe there were some hesitation on their side, but I strongly believe it is something that we should add, we can take example from wakuv1 that reduced the toll on the network by only enabling if asked by the peer.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820929262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820959844",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1820959844",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1820959844,
    "node_id": "IC_kwDOD5KrTM5siaRk",
    "user": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-21T13:48:11Z",
    "updated_at": "2023-11-21T13:48:11Z",
    "author_association": "NONE",
    "body": "ping @fryorcraken @richard-ramos @jm-clius - FYI in case you thoughts regarding the issue discussed above",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1820959844/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1821021858",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1821021858",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1821021858,
    "node_id": "IC_kwDOD5KrTM5sipai",
    "user": {
      "login": "churik",
      "id": 4557972,
      "node_id": "MDQ6VXNlcjQ1NTc5NzI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4557972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/churik",
      "html_url": "https://github.com/churik",
      "followers_url": "https://api.github.com/users/churik/followers",
      "following_url": "https://api.github.com/users/churik/following{/other_user}",
      "gists_url": "https://api.github.com/users/churik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/churik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/churik/subscriptions",
      "organizations_url": "https://api.github.com/users/churik/orgs",
      "repos_url": "https://api.github.com/users/churik/repos",
      "events_url": "https://api.github.com/users/churik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/churik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-21T14:23:50Z",
    "updated_at": "2023-11-21T14:24:02Z",
    "author_association": "MEMBER",
    "body": "@cammellos \r\nLight mode enabled on desktop or \"Relay mode\" in 1-1 chat:\r\nall messages are marked as \"Resend\" immediately app detects an offline state, and after coming back online messages are recent.\r\n\r\nSo yeah, the issue is specific to \"Relay mode\" (default on desktop) in communities\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1821021858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1828063181",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1828063181",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1828063181,
    "node_id": "IC_kwDOD5KrTM5s9gfN",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-27T15:32:20Z",
    "updated_at": "2023-11-27T15:32:20Z",
    "author_association": "MEMBER",
    "body": "Andrea:\r\n> one thing that is a bit odd, is that messages were not resent\r\nso I would start from investigating that\r\nbasically if peer count is 0\r\nthe message should be resent in theory, but I don't know on relay, I know in lightpush on mobile it works\r\nif you at least do that, then the issue becomes smaller",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1828063181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1828068691",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1828068691",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1828068691,
    "node_id": "IC_kwDOD5KrTM5s9h1T",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-27T15:35:20Z",
    "updated_at": "2023-11-27T15:35:20Z",
    "author_association": "MEMBER",
    "body": "Thanks, we have seen this issue again but on a good connection\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1828068691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831041891",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1831041891",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1831041891,
    "node_id": "IC_kwDOD5KrTM5tI3tj",
    "user": {
      "login": "fryorcraken",
      "id": 110212804,
      "node_id": "U_kgDOBpG2xA",
      "avatar_url": "https://avatars.githubusercontent.com/u/110212804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fryorcraken",
      "html_url": "https://github.com/fryorcraken",
      "followers_url": "https://api.github.com/users/fryorcraken/followers",
      "following_url": "https://api.github.com/users/fryorcraken/following{/other_user}",
      "gists_url": "https://api.github.com/users/fryorcraken/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fryorcraken/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fryorcraken/subscriptions",
      "organizations_url": "https://api.github.com/users/fryorcraken/orgs",
      "repos_url": "https://api.github.com/users/fryorcraken/repos",
      "events_url": "https://api.github.com/users/fryorcraken/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fryorcraken/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-29T01:21:21Z",
    "updated_at": "2023-11-29T01:21:21Z",
    "author_association": "NONE",
    "body": "We will propose strategies that can be used to mitigate the issue.\r\nhttps://github.com/waku-org/go-waku/issues/921 tracks this work.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831041891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831519036",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1831519036",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1831519036,
    "node_id": "IC_kwDOD5KrTM5tKsM8",
    "user": {
      "login": "chaitanyaprem",
      "id": 20137744,
      "node_id": "MDQ6VXNlcjIwMTM3NzQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20137744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chaitanyaprem",
      "html_url": "https://github.com/chaitanyaprem",
      "followers_url": "https://api.github.com/users/chaitanyaprem/followers",
      "following_url": "https://api.github.com/users/chaitanyaprem/following{/other_user}",
      "gists_url": "https://api.github.com/users/chaitanyaprem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chaitanyaprem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chaitanyaprem/subscriptions",
      "organizations_url": "https://api.github.com/users/chaitanyaprem/orgs",
      "repos_url": "https://api.github.com/users/chaitanyaprem/repos",
      "events_url": "https://api.github.com/users/chaitanyaprem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chaitanyaprem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-29T09:23:22Z",
    "updated_at": "2023-11-29T09:23:22Z",
    "author_association": "COLLABORATOR",
    "body": "> Thanks, we have seen this issue again but on a good connection\r\n\r\nI understand why messages were not sent before we identify network is disconnected. \r\nBut this seems strange, is this reproducible and do we have any further details when this has occured?\r\nAre any peers connected for the pubsubTopic? Any other useful info would help in root-causing the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831519036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831524959",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1831524959",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1831524959,
    "node_id": "IC_kwDOD5KrTM5tKtpf",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-29T09:27:08Z",
    "updated_at": "2023-11-29T09:27:08Z",
    "author_association": "MEMBER",
    "body": "> > Thanks, we have seen this issue again but on a good connection\r\n> \r\n> I understand why messages were not sent before we identify network is disconnected. But this seems strange, is this reproducible and do we have any further details when this has occured? Are any peers connected for the pubsubTopic? Any other useful info would help in root-causing the issue.\r\n\r\nNot sure we can replicate consistently, the connection was stable, but the peer count was 0, in this case the message should not get confirmed (I am not sure it's the case now to be honest, I can check I guess, that would alleviate the issue, but we'd still have the half open connection)",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831524959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831548648",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1831548648",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1831548648,
    "node_id": "IC_kwDOD5KrTM5tKzbo",
    "user": {
      "login": "chaitanyaprem",
      "id": 20137744,
      "node_id": "MDQ6VXNlcjIwMTM3NzQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20137744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chaitanyaprem",
      "html_url": "https://github.com/chaitanyaprem",
      "followers_url": "https://api.github.com/users/chaitanyaprem/followers",
      "following_url": "https://api.github.com/users/chaitanyaprem/following{/other_user}",
      "gists_url": "https://api.github.com/users/chaitanyaprem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chaitanyaprem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chaitanyaprem/subscriptions",
      "organizations_url": "https://api.github.com/users/chaitanyaprem/orgs",
      "repos_url": "https://api.github.com/users/chaitanyaprem/repos",
      "events_url": "https://api.github.com/users/chaitanyaprem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chaitanyaprem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-29T09:42:14Z",
    "updated_at": "2023-11-29T09:42:14Z",
    "author_association": "COLLABORATOR",
    "body": "> > > Thanks, we have seen this issue again but on a good connection\r\n> > \r\n> > \r\n> > I understand why messages were not sent before we identify network is disconnected. But this seems strange, is this reproducible and do we have any further details when this has occured? Are any peers connected for the pubsubTopic? Any other useful info would help in root-causing the issue.\r\n> \r\n> Not sure we can replicate consistently, the connection was stable, but the peer count was 0, in this case the message should not get confirmed (I am not sure it's the case now to be honest, I can check I guess, that would alleviate the issue, but we'd still have the half open connection)\r\n\r\nRelay publish should fail in such a scenario if it is initialized with minPeersToPublish value of more than 0. Is that handled to mark the message for retry?\r\nUnless it hit some kind of a corner case where during publish the peer connection is still considered active and then peer connection got dropped off/marked down (due to TCP delay in identifying the same).\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831548648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831564649",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1831564649",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1831564649,
    "node_id": "IC_kwDOD5KrTM5tK3Vp",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-29T09:52:21Z",
    "updated_at": "2023-11-29T09:52:21Z",
    "author_association": "MEMBER",
    "body": "> Unless it hit some kind of a corner case where during publish the peer connection is still considered active and then peer connection got dropped off/marked down (due to TCP delay in identifying the same).\r\n\r\nThis 100% happens, it's easy to replicate, cut off internet just before sending a message and you will get an half open connection, we had this problem on wakuv1 and that's why we implemented confirmations. On mobile happens very often, on desktop should happen less, but I guess depends on how stable your connection and peers are.\r\n\r\nI have the suspicious though that we don't mark messages for resend if the peer count is 0, that I need to have a look and we can address, but the issue above will still be valid.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831564649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831579744",
    "html_url": "https://github.com/status-im/status-desktop/issues/12813#issuecomment-1831579744",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12813",
    "id": 1831579744,
    "node_id": "IC_kwDOD5KrTM5tK7Bg",
    "user": {
      "login": "chaitanyaprem",
      "id": 20137744,
      "node_id": "MDQ6VXNlcjIwMTM3NzQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20137744?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chaitanyaprem",
      "html_url": "https://github.com/chaitanyaprem",
      "followers_url": "https://api.github.com/users/chaitanyaprem/followers",
      "following_url": "https://api.github.com/users/chaitanyaprem/following{/other_user}",
      "gists_url": "https://api.github.com/users/chaitanyaprem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chaitanyaprem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chaitanyaprem/subscriptions",
      "organizations_url": "https://api.github.com/users/chaitanyaprem/orgs",
      "repos_url": "https://api.github.com/users/chaitanyaprem/repos",
      "events_url": "https://api.github.com/users/chaitanyaprem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chaitanyaprem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-29T10:01:37Z",
    "updated_at": "2023-11-29T10:11:08Z",
    "author_association": "COLLABORATOR",
    "body": "> This 100% happens, it's easy to replicate, cut off internet just before sending a message and you will get an half open connection, we had this problem on wakuv1 and that's why we implemented confirmations. On mobile happens very often, on desktop should happen less, but I guess depends on how stable your connection and peers are.\r\n\r\nYes, i have tested it myself today and agree that this is due to half open TCP or TCP not yet identifying network disconnection and messages remaining in send buffer. I have documented a draft approach to take care of such scenarios https://github.com/waku-org/go-waku/issues/921#issuecomment-1831564676. Do go through and give your feedback as well. \r\n\r\n> I have the suspicious though that we don't mark messages for resend if the peer count is 0, that I need to have a look and we can address, but the issue above will still be valid.\r\n\r\nOk, sure...would be awesome if you can also point me to the code where this is set.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1831579744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

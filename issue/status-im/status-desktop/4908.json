{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/4908",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/4908",
  "id": 1150899613,
  "node_id": "I_kwDOD5KrTM5EmVWd",
  "number": 4908,
  "title": "fetching messages for the first time takes too long",
  "user": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2347610790,
      "node_id": "MDU6TGFiZWwyMzQ3NjEwNzkw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Chat",
      "name": "Chat",
      "color": "9279e0",
      "default": false,
      "description": ""
    },
    {
      "id": 3205510054,
      "node_id": "MDU6TGFiZWwzMjA1NTEwMDU0",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/priority%201:%20high",
      "name": "priority 1: high",
      "color": "D93F0B",
      "default": false,
      "description": "an issue that is extremely important to fix, that interferes with the majority of users, occurs ofte"
    },
    {
      "id": 3904273342,
      "node_id": "LA_kwDOD5KrTM7otnu-",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Wakuv2",
      "name": "E:Wakuv2",
      "color": "BC5398",
      "default": false,
      "description": ""
    },
    {
      "id": 3904302702,
      "node_id": "LA_kwDOD5KrTM7otu5u",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Bugfixes",
      "name": "E:Bugfixes",
      "color": "11DEC5",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "richard-ramos",
    "id": 1106587,
    "node_id": "MDQ6VXNlcjExMDY1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/richard-ramos",
    "html_url": "https://github.com/richard-ramos",
    "followers_url": "https://api.github.com/users/richard-ramos/followers",
    "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
    "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
    "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
    "repos_url": "https://api.github.com/users/richard-ramos/repos",
    "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "richard-ramos",
      "id": 1106587,
      "node_id": "MDQ6VXNlcjExMDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1106587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/richard-ramos",
      "html_url": "https://github.com/richard-ramos",
      "followers_url": "https://api.github.com/users/richard-ramos/followers",
      "following_url": "https://api.github.com/users/richard-ramos/following{/other_user}",
      "gists_url": "https://api.github.com/users/richard-ramos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/richard-ramos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/richard-ramos/subscriptions",
      "organizations_url": "https://api.github.com/users/richard-ramos/orgs",
      "repos_url": "https://api.github.com/users/richard-ramos/repos",
      "events_url": "https://api.github.com/users/richard-ramos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/richard-ramos/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-02-25T21:32:23Z",
  "updated_at": "2022-03-24T20:46:47Z",
  "closed_at": "2022-03-24T20:46:47Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\n\r\nIt definitely feels like it's taking far longer than it used to. It might be faulty mailservers like before and not the client's fault but we need to get to the bottom of this regardless.\r\n\r\n## Steps to reproduce\r\n\r\n1. create a new account\r\n2. join a channel with recent messages like #test\r\n\r\n#### Expected behavior\r\n\r\nshould load some messages after < 5 seconds (10 seconds max)\r\n\r\n#### Actual behavior\r\n\r\ntakes several minutes\r\n\r\n### Additional Information\r\n\r\n```\r\nERR 2022-02-25 16:28:53.452-05:00 rpc response error                         topics=\"rpc\" tid=3270553 file=core.nim:30 err=\"\\nstatus-go error [methodName:wakuext_requestAllHistoricMessages, code:-32000, message:context deadline exceeded ]\\n\"\r\nWRN 2022-02-25 16:28:53.452-05:00 Disconnecting active mailserver due to error topics=\"mailservers-service\" tid=3270553 file=service.nim:40 errDescription=\"\\nstatus-go error [methodName:wakuext_requestAllHistoricMessages, code:-32000, message:context deadline exceeded ]\\n\"\r\nDBG 2022-02-25 16:28:53.453-05:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=3270553 file=core.nim:20 rpc_method=wakuext_disconnectActiveMailserver\r\nINF 2022-02-25 16:28:53.457-05:00 delete                                     topics=\"mailserver\" tid=3270553 file=mailservers.nim:41 rpc_method=wakuext_disconnectActiveMailserver result=\"(jsonrpc: \\\"2.0\\\", result: null, id: 0, error: nil)\"\r\nINF 2022-02-25 16:28:53.603-05:00 active mailserver changed                  topics=\"mailservers-service\" tid=3270512 file=service.nim:123 node=\r\nINF 2022-02-25 16:29:00.593-05:00 active mailserver changed                  topics=\"mailservers-service\" tid=3270512 file=service.nim:123 node=enode://ee2b53b0ace9692167a410514bca3024695dbf0e1a68e1dff9716da620efb195f04a4b9e873fb9b74ac84de801106c465b8e2b6c4f0d93b8749d1578bfcaf03e@104.197.238.144:443\r\nINF 2022-02-25 16:29:00.663-05:00 mailserver available                       topics=\"mailservers-service\" tid=3270512 file=service.nim:128\r\nMAILSERVER AVAILABLE: ref 0x15ea43138 --> []\r\n\r\nINF 2022-02-25 16:29:00.663-05:00 Requesting message history                 topics=\"mailservers-service\" tid=3270556 file=service.nim:37\r\nDBG 2022-02-25 16:29:00.663-05:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=3270556 file=core.nim:20 rpc_method=wakuext_requestAllHistoricMessages\r\nINF 2022-02-25 16:29:12.503-05:00 history request failed                     topics=\"mailservers-service\" tid=3270512 file=service.nim:147 requestId=981a4ac9-4fb9-477a-926b-ac6cf4caf4fb errorMessage=\"context deadline exceeded\"\r\nDBG 2022-02-25 16:29:18.375-05:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=3270512 file=core.nim:20 rpc_method=wakuext_getContactByID\r\n\r\n\r\nWRN 2022-02-25 16:29:50.366-05:00 Error decoding signal                      topics=\"signals-manager\" tid=3270512 file=signals_manager.nim:43 err=\"Unknown signal received: backup.performed\"\r\nERR 2022-02-25 16:30:00.668-05:00 rpc response error                         topics=\"rpc\" tid=3270556 file=core.nim:30 err=\"\\nstatus-go error [methodName:wakuext_requestAllHistoricMessages, code:-32000, message:context deadline exceeded ]\\n\"\r\nWRN 2022-02-25 16:30:00.668-05:00 Disconnecting active mailserver due to error topics=\"mailservers-service\" tid=3270556 file=service.nim:40 errDescription=\"\\nstatus-go error [methodName:wakuext_requestAllHistoricMessages, code:-32000, message:context deadline exceeded ]\\n\"\r\nDBG 2022-02-25 16:30:00.668-05:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=3270556 file=core.nim:20 rpc_method=wakuext_disconnectActiveMailserver\r\nINF 2022-02-25 16:30:00.669-05:00 delete                                     topics=\"mailserver\" tid=3270556 file=mailservers.nim:41 rpc_method=wakuext_disconnectActiveMailserver result=\"(jsonrpc: \\\"2.0\\\", result: null, id: 0, error: nil)\"\r\nINF 2022-02-25 16:30:00.765-05:00 active mailserver changed                  topics=\"mailservers-service\" tid=3270512 file=service.nim:123 node=\r\n\r\nWRN 2022-02-25 16:31:10.672-05:00 Disconnecting active mailserver due to error topics=\"mailservers-service\" tid=3270554 file=service.nim:40 errDescription=\"\\nstatus-go error [methodName:wakuext_requestAllHistoricMessages, code:-32000, message:context deadline exceeded ]\\n\"\r\nDBG 2022-02-25 16:31:10.673-05:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=3270554 file=core.nim:20 rpc_method=wakuext_disconnectActiveMailserver\r\nINF 2022-02-25 16:31:10.676-05:00 delete                                     topics=\"mailserver\" tid=3270554 file=mailservers.nim:41 rpc_method=wakuext_disconnectActiveMailserver result=\"(jsonrpc: \\\"2.0\\\", result: null, id: 0, error: nil)\"\r\nINF 2022-02-25 16:31:10.780-05:00 active mailserver changed                  topics=\"mailservers-service\" tid=3270512 file=service.nim:123 node=\r\n```\r\n\r\n",
  "closed_by": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/4908/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1051304581",
    "html_url": "https://github.com/status-im/status-desktop/issues/4908#issuecomment-1051304581",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908",
    "id": 1051304581,
    "node_id": "IC_kwDOD5KrTM4-qaKF",
    "user": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-25T22:01:05Z",
    "updated_at": "2022-02-25T22:01:05Z",
    "author_association": "MEMBER",
    "body": "Doing this a second time and the message history loaded almost immediately so it's likely to be a faulty mailserver. Still it would be good to understand what mailservers do this, why, if it's detectable and if the client has mechanisms to select another mailserver if one mailserver is taking too long.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1051304581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1060673510",
    "html_url": "https://github.com/status-im/status-desktop/issues/4908#issuecomment-1060673510",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908",
    "id": 1060673510,
    "node_id": "IC_kwDOD5KrTM4_OJfm",
    "user": {
      "login": "cammellos",
      "id": 1017008,
      "node_id": "MDQ6VXNlcjEwMTcwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1017008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cammellos",
      "html_url": "https://github.com/cammellos",
      "followers_url": "https://api.github.com/users/cammellos/followers",
      "following_url": "https://api.github.com/users/cammellos/following{/other_user}",
      "gists_url": "https://api.github.com/users/cammellos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cammellos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cammellos/subscriptions",
      "organizations_url": "https://api.github.com/users/cammellos/orgs",
      "repos_url": "https://api.github.com/users/cammellos/repos",
      "events_url": "https://api.github.com/users/cammellos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cammellos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-07T13:13:46Z",
    "updated_at": "2022-03-07T13:13:46Z",
    "author_association": "MEMBER",
    "body": "@richard-ramos I am also working on this, we can coordinate if you'd like, but I will have to fix anyway, I can keep you updated.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1060673510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1061385868",
    "html_url": "https://github.com/status-im/status-desktop/issues/4908#issuecomment-1061385868",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4908",
    "id": 1061385868,
    "node_id": "IC_kwDOD5KrTM4_Q3aM",
    "user": {
      "login": "oskarth",
      "id": 1552237,
      "node_id": "MDQ6VXNlcjE1NTIyMzc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1552237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oskarth",
      "html_url": "https://github.com/oskarth",
      "followers_url": "https://api.github.com/users/oskarth/followers",
      "following_url": "https://api.github.com/users/oskarth/following{/other_user}",
      "gists_url": "https://api.github.com/users/oskarth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oskarth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oskarth/subscriptions",
      "organizations_url": "https://api.github.com/users/oskarth/orgs",
      "repos_url": "https://api.github.com/users/oskarth/repos",
      "events_url": "https://api.github.com/users/oskarth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oskarth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-08T04:10:14Z",
    "updated_at": "2022-03-08T04:10:14Z",
    "author_association": "NONE",
    "body": "Mailservers in Waku v1 or Store queries for Waku v2? Current issue and labels are inconsistent.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1061385868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

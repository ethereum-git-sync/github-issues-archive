{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12609",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12609/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12609/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12609/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12609",
  "id": 1972796714,
  "node_id": "I_kwDOD5KrTM51ln0q",
  "number": 12609,
  "title": "Move Permission logic from the Create/EditChatPopup to the Nim model",
  "user": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2087353959,
      "node_id": "MDU6TGFiZWwyMDg3MzUzOTU5",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/ui-team",
      "name": "ui-team",
      "color": "1111ff",
      "default": false,
      "description": ""
    },
    {
      "id": 2351074091,
      "node_id": "MDU6TGFiZWwyMzUxMDc0MDkx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/refactor",
      "name": "refactor",
      "color": "ef9870",
      "default": false,
      "description": ""
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5745629806,
      "node_id": "LA_kwDOD5KrTM8AAAABVndabg",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Comm%20Perms%20and%20Minting%20MVP",
      "name": "E:Desktop Comm Perms and Minting MVP",
      "color": "c2e0c6",
      "default": false,
      "description": "Misc tasks about Community permissions that are not part of another Epic, due for the MVP"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-11-01T17:28:58Z",
  "updated_at": "2023-11-01T17:28:58Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nAs implemented in https://github.com/status-im/status-desktop/pull/12160, the [new design](https://www.figma.com/file/qHfFm7C9LwtXpfdbxssCK3/Kuba%E2%8E%9CDesktop---Communities?type=design&node-id=2975-488707&mode=design&t=7bhUfNQmmUXSOz0g-4) was implemented to make it possible to create, edit and delete permissions inside the Create/EditChatPopup.\r\n\r\nFor added info, the permissions changes must not be confirmed (sent to status-go) until the user presses the `Create/Edit channel` button, so we need to keep a temporary state.\r\n\r\nThe problem is that the PR added a lot of logic to the QML part, because the PermisisonsModel was never meant to be used for that temporary context.\r\n\r\nWe need to improve the model to support it. Here is my idea:\r\n\r\n> Maybe we add an enum in the permisisons model called `temporaryState`. That enum it can be `default/normal`, `created`, `edited` or `deleted`.\r\n> With that, the UI can now  call Nim each time the user makes changes, but with a temporary flag.\r\n> \r\n> Then, when the user clicks Next, the Nim code can check those that are not `default/normal` and apply the change to them (create them, edit them, etc).\r\n> \r\n> If the user clicks cancel, instead we just undo everything.\r\n> For created, it's easy we just remove it from the model.\r\n> For deleted, it's also simple, we go back to normal.\r\n> \r\n> The complex one is edited, because we need to go back to the previous data and I'm not sure where we can keep that data. Maybe we can just get that permission back from the cache.\r\n\r\nWith all these changes in place, the code will be much cleaner in QML.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12609/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12609/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

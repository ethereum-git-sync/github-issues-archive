{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/4545",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/4545/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/4545/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/4545/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/4545",
  "id": 1112681187,
  "node_id": "I_kwDOD5KrTM5CUirj",
  "number": 4545,
  "title": "[base_bc] clicking on 1 on 1 after restarting the app is crashing the app.",
  "user": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 3222507535,
      "node_id": "MDU6TGFiZWwzMjIyNTA3NTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/hard-to-replicate",
      "name": "hard-to-replicate",
      "color": "D67081",
      "default": false,
      "description": ""
    },
    {
      "id": 3583083456,
      "node_id": "LA_kwDOD5KrTM7VkYPA",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/branch:%20base_bc",
      "name": "branch: base_bc",
      "color": "B87D14",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-01-24T13:56:10Z",
  "updated_at": "2022-01-25T20:09:55Z",
  "closed_at": "2022-01-25T20:09:55Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\n\r\nclicking on 1 on 1 after restarting the app is crashing the app.\r\n\r\n## Steps to reproduce\r\n\r\n1. open a 1 on 1 chat with a mobile contact\r\n2. send a message and react to it\r\n3. go to mobile, and also react to that message\r\n4. restart app\r\n5. click on the 1 on 1 chat\r\n\r\nresult: crash with this stack trace\r\n\r\n```\r\nINF 2022-01-23 18:12:11.473-05:00 shutting down... topics=\"status-app\" tid=207032 file=nim_status_client.nim:121\r\n...\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app_service/service/message/service.nim(250) onAsyncLoadMoreMessagesForChat\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app/core/eventemitter.nim(46) emit\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app/modules/main/chat_section/chat_content/messages/controller.nim(53) :anonymous\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app/modules/main/chat_section/chat_content/messages/private_interfaces/module_controller_delegate_interface.nim(3) newMessagesLoaded\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app/modules/main/chat_section/chat_content/messages/module.nim(132) newMessagesLoaded\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app/modules/shared_models/message_item.nim(197) addReaction\r\n/Users/iurimatias/Projects/Status/status-desktop/src/app/modules/shared_models/message_reaction_model.nim(117) addReaction\r\n/Users/iurimatias/Projects/Status/status-desktop/vendor/nimqml/src/nimqml/private/qabstractitemmodel.nim(237) dataChanged\r\n/Users/iurimatias/Projects/Status/status-desktop/vendor/nimbus-build-system/vendor/Nim/lib/system/fatal.nim(49) sysFatal\r\nError: unhandled exception: index out of bounds, the container is empty [IndexError]\r\n```\r\n",
  "closed_by": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/4545/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/4545/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1020968624",
    "html_url": "https://github.com/status-im/status-desktop/issues/4545#issuecomment-1020968624",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4545",
    "id": 1020968624,
    "node_id": "IC_kwDOD5KrTM482r6w",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-25T09:17:33Z",
    "updated_at": "2022-01-25T09:17:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "This crash was caused by inconsistency on the `stauts-go` side, cause the state we had in local db doesn't match the real fetched state in terms of reactions. That's fixed in PR #4558 (related to the [issue-4525](https://github.com/status-im/status-desktop/issues/4525)).\n\nIf you're local db is already corrupted then, there is no help :), you have either delete local `Status` folder and re-import your account using seed phrase or to keep using the current one but without opening a chat where reactions got messed up.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1020968624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/10276",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/10276",
  "id": 1664982882,
  "node_id": "I_kwDOD5KrTM5jPZ9i",
  "number": 10276,
  "title": "Fetching profile from a Waku backup is a bit broken",
  "user": {
    "login": "John-44",
    "id": 22846356,
    "node_id": "MDQ6VXNlcjIyODQ2MzU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/John-44",
    "html_url": "https://github.com/John-44",
    "followers_url": "https://api.github.com/users/John-44/followers",
    "following_url": "https://api.github.com/users/John-44/following{/other_user}",
    "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
    "organizations_url": "https://api.github.com/users/John-44/orgs",
    "repos_url": "https://api.github.com/users/John-44/repos",
    "events_url": "https://api.github.com/users/John-44/events{/privacy}",
    "received_events_url": "https://api.github.com/users/John-44/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/56",
    "html_url": "https://github.com/status-im/status-desktop/milestone/56",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/56/labels",
    "id": 8475714,
    "node_id": "MI_kwDOD5KrTM4AgVRC",
    "number": 56,
    "title": "0.12",
    "description": "Priorities **in priority order** for the 0.12 milestone:  \r\n\r\n**1. Improve performance**\r\n- Focus on eliminating any UI freezes when the user clicks on something and the app does not display an immediate response.  Target: the app should ideally respond to all user input within 50ms, but let's start with identifying the longest UI freezes and trying to fix the worst UI freezes first.\r\n- Speed and responsiveness of switching between community channels, and 1on1 and ad-hoc group chats is particularly important, especially for channels and chats that contains a lot of history.  We should aim for about 250ms delay in the *worst* case if possible.  Having a lot of history in a channel should not slow channel switching down.\r\n- DB perf optimisations.  \r\n- Move things to async and off main thread\r\n- See Alex's great profiling work for possible tasks (Alex to continue focusing on perf. for this release cycle)\r\n- \"user facing performance in everyday app usage\" is the top priority, but any task that improves performance is worthwhile\r\n\r\n**2. Finish development of token based functionality from 0.11**\r\n- Optimise No. queries made by owner node when checking member tokens (Pascal)\r\n- Community encryption should automatically switch on/off depending on community permissions (issue #9942)\r\n- Implement the 'Admin' role (issue #10114)\r\n- Airdrop to community members (in addition to addresses)\r\n- Optimise gas required by collectable minting smart contracts (issue #9943, GravityBlast)\r\n--- After collectable minting gas optimisation is complete, start work on Asset minting contracts (GravityBlast)\r\n- Complete token remote destruct UI\r\n- Remove 'Community Permissions Settings', 'Community Tokens' and 'Discord Import Tool' feature flags (issue #10115)\r\n- Thoroughly test, and fix all bugs found. \r\n- Anything else related to Community level token permissions, collectable minting, airdropping, and remote destructing that didn't make it into 0.11\r\n\r\n**3. Finish implementing the ability for Community Owners and Admins to drag and drop channels and categories into different orders**\r\n\r\n**4. Finish anything related to the initial pairing process for syncing that wasn't completed in 0.11** (Igor)\r\n\r\n**5. Improve Mutual Contacts functionality to improve reliability and pay off tech debt** (Mishka)\r\n\r\n**6. Complete Community Directory Curation dApp integration inc. Featured functionality** (Patryk)\r\n \r\n**7. Backend for the Profile Showcase**\r\n\r\n**8. Identity Verification** (required for 'Profile Showcase')\r\n\r\n**9. Fix bugs, bugs and more bugs!**\r\n- Esp. find the cause of and fix the longstanding bug of some 'requests to join' not arriving for hours/days after they were sent!\r\n- Many 'fit and finish' bugs for the UI team\r\n\r\n**--- For the Wallet team ---**\r\n\r\n1. Continue feature development inc. kicking off development of the activity screens\r\n2. 'All accounts' section.  The ability to return all tokens owned by the user in all accounts (excluding watch only accounts) is also required for the Showcase functionality\r\n3. Widen scope of 'backup to waku' and 'syncing' so that all relevant Wallet user state is backed up and synced between devices\r\n4. Continue to ensure Wallet functionality is performant.\r\n5. Fix wallet bugs",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 84,
    "closed_issues": 141,
    "state": "open",
    "created_at": "2022-09-28T20:32:37Z",
    "updated_at": "2023-04-29T10:33:10Z",
    "due_on": "2023-05-05T07:00:00Z",
    "closed_at": null
  },
  "comments": 3,
  "created_at": "2023-04-12T17:43:44Z",
  "updated_at": "2023-04-18T16:35:55Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I had to restore my account from seed phrase, and the following happened:\r\n\r\n1) The \"Fetching data...\" screen was correctly displayed.  Notice that it's telling me that \"1/1\" of my profile records have been successfully fetched\r\n\r\n![2023-04-12 18_06_25-Status Desktop](https://user-images.githubusercontent.com/22846356/231532678-7778b667-245f-4290-8974-c73561f6478a.png)\r\n\r\n2) However after waiting for two minutes and then pressing the \"Continue\" button, I was taken to the 'Unable to fetch your profile' screen, which is the screen a user should see when their user profile data (username, avatar, etc...) has *not* been fetched.\r\n\r\n![2023-04-12 18_08_16-Status Desktop](https://user-images.githubusercontent.com/22846356/231533074-50dbd38b-2a49-415f-8a2e-80628ca22862.png)\r\n\r\n3) I then pressed the \"Try to fetch profile again\" button (even though I know this should only induce two minute delay to see if further data arrives from Waku).  The app appeared to crash, and was unresponsive for several minutes\r\n\r\n4) Then just as I was about to force quite the app, it unfroze and took me back to the \"Fetching data...\" screen (it should have displayed this screen immediately after I pressed the \"Try to fetch profile again\" button on the proceeding screen).  Strangely, this screen now says that \"9/10\" of 'Community membership' information is downloaded, when the previous time this screen was displayed (in step 1) it said that \"9/9\" of 'Community membership' information was successfully downloaded,\r\n\r\n![2023-04-12 18_11_07-Status Desktop](https://user-images.githubusercontent.com/22846356/231534545-351ad109-bef6-4bd8-95ca-79ba2dc99b78.png)\r\n\r\n5) After waiting on the \"Fetching data...\" screen for around 5min I pressed the \"Continue\" button again, and was taken to the 'Unable to fetch your profile' screen again\r\n\r\n![2023-04-12 18_08_16-Status Desktop](https://user-images.githubusercontent.com/22846356/231535098-2f82a6b0-a441-45c5-b70a-237938ec213e.png)\r\n\r\n6) This time I pressed the \"Create new profile with the same chatkey\" button, and entered my chat name and chose an avatar image.  *Issue minor here: when I pressed the primary action button, the app froze for about a second before I was taken to the loading screen\"\r\n\r\nGood news: when I arrived back in Status, my communities were restored and it looks like my mutual contacts were restored :-)\r\n\r\n**Summary of the issues found**\r\n\r\n**Issue 1:** Restore of my username and avatar failed even though the \"Fetching data...\" screen told me that this information had been successfully restored.\r\n\r\n**Issue 2:** App froze for several minutes after pressing the \"Try to fetch profile again\" button on the 'Unable to fetch your profile' screen,\r\n\r\n**Issue 3:** The second time I viewed the \"Fetching data...\" screen (after pressing the \"Try to fetch profile again\" button), it showed that there were 10 pieces of community membership information (even though the last time I was on this screen in the same flow it said there were only 9 pieces of community membership information).  This 10th piece of community membership information never downloaded, even after waiting for more than 5 minutes.\r\n\r\n**Issue 4.** Even though my mutual contacts had been restored, the secondary nav bar in the messages section was empty.  I know that the chat history for 1on1 and ad-hoc group chats cannot be restored due to 'perfect forward secrecy', however at a minimum I should be able to see the ad-hoc group chats that I'm part of (even though there would be no history in them), because without this I have no way of knowing the ad-hoc group chats I'm in.  It would also be good for the 1on1 chats to be restored (again, even though the history in these chats can't be restored).  \r\n\r\nSo I think we should:\r\n- Add a list of the ad-hoc group chats and 1on1 chats the user is in, and the *recency order* of these chats to the data we back up to Waku.\r\n- When the user restores from a backup to waku, we should use this data to repopulate the list of 1on1 and ad-hoc group chats the user is in in the 'Messages' section of the app. \r\n\r\n I've done a seperate, more detailed writup of this issue here **https://github.com/status-im/status-desktop/issues/10324**\r\n\r\n**Possible minor improvement idea:** Because I haven't been using a keycard, on the \"Fetching data...\" screen the \"Keycards\" spinner was always spinning\r\n![2023-04-12 18_30_48-2023-04-12 18_06_25-Status Desktop png ‎- Photos](https://user-images.githubusercontent.com/22846356/231537630-5003bc97-33fd-4896-aa84-8431e251a2c1.png)\r\nIf a user isn't doesn't have any data to back up to waku in any category, how about if we backup to waku a message which tells us that 'the user has no information to backup to waku in this category'.  In my particular case that's described above, such a message could be used to show \"0/0\" and a green bar against \"Keycards\".  \r\n\r\n-----------------------------\r\n\r\nThere are bunch of issues in this issue, they should probably be split up into different issues so they can be worked on separately.  Sorry for not doing this, I just wanted to get everything I had just experienced written down quickly, and I've got a bunch of other things waiting on me.  \r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/10276/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1513282020",
    "html_url": "https://github.com/status-im/status-desktop/issues/10276#issuecomment-1513282020",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276",
    "id": 1513282020,
    "node_id": "IC_kwDOD5KrTM5aMtnk",
    "user": {
      "login": "imagiMary",
      "id": 124154641,
      "node_id": "U_kgDOB2ZzEQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/124154641?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imagiMary",
      "html_url": "https://github.com/imagiMary",
      "followers_url": "https://api.github.com/users/imagiMary/followers",
      "following_url": "https://api.github.com/users/imagiMary/following{/other_user}",
      "gists_url": "https://api.github.com/users/imagiMary/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imagiMary/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imagiMary/subscriptions",
      "organizations_url": "https://api.github.com/users/imagiMary/orgs",
      "repos_url": "https://api.github.com/users/imagiMary/repos",
      "events_url": "https://api.github.com/users/imagiMary/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imagiMary/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-18T14:43:47Z",
    "updated_at": "2023-04-18T14:43:47Z",
    "author_association": "NONE",
    "body": "Related to **Issue 4** - I have lost some mutual contacts, instead of them being Contacts, they are sitting under Settings / Messaging / Contacts / Pending Requests screen.\r\n\r\nhttps://user-images.githubusercontent.com/124154641/232798028-013a37b3-8900-47ab-82b8-691eeeb84bb2.mp4\r\n\r\nHowever when one of the users from Pending Requests pings me, they move to Settings / Messaging / Contacts\r\n\r\n\r\nhttps://user-images.githubusercontent.com/124154641/232812567-e2291360-9698-4d9f-9c1a-5610e77441aa.mp4\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1513282020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1513358157",
    "html_url": "https://github.com/status-im/status-desktop/issues/10276#issuecomment-1513358157",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276",
    "id": 1513358157,
    "node_id": "IC_kwDOD5KrTM5aNANN",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-18T15:24:50Z",
    "updated_at": "2023-04-18T15:24:50Z",
    "author_association": "MEMBER",
    "body": "> I have lost some mutual contacts, instead of them being Contacts, they are sitting under Settings / Messaging / Contacts / Pending Requests screen.\r\n\r\nThis is known and being fixed by @MishkaRogachev ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1513358157/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1513476581",
    "html_url": "https://github.com/status-im/status-desktop/issues/10276#issuecomment-1513476581",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10276",
    "id": 1513476581,
    "node_id": "IC_kwDOD5KrTM5aNdHl",
    "user": {
      "login": "MishkaRogachev",
      "id": 2522130,
      "node_id": "MDQ6VXNlcjI1MjIxMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2522130?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MishkaRogachev",
      "html_url": "https://github.com/MishkaRogachev",
      "followers_url": "https://api.github.com/users/MishkaRogachev/followers",
      "following_url": "https://api.github.com/users/MishkaRogachev/following{/other_user}",
      "gists_url": "https://api.github.com/users/MishkaRogachev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MishkaRogachev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MishkaRogachev/subscriptions",
      "organizations_url": "https://api.github.com/users/MishkaRogachev/orgs",
      "repos_url": "https://api.github.com/users/MishkaRogachev/repos",
      "events_url": "https://api.github.com/users/MishkaRogachev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MishkaRogachev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-18T16:35:55Z",
    "updated_at": "2023-04-18T16:35:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > I have lost some mutual contacts, instead of them being Contacts, they are sitting under Settings / Messaging / Contacts / Pending Requests screen.\r\n> \r\n> This is known and being fixed by @MishkaRogachev\r\n\r\nThis one should be fixed by this PR: https://github.com/status-im/status-desktop/pull/10336",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1513476581/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

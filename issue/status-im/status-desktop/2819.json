{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/2819",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/2819",
  "id": 937048909,
  "node_id": "MDU6SXNzdWU5MzcwNDg5MDk=",
  "number": 2819,
  "title": "Crash when clicking notification with mention",
  "user": {
    "login": "anastasiyaig",
    "id": 82375995,
    "node_id": "MDQ6VXNlcjgyMzc1OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anastasiyaig",
    "html_url": "https://github.com/anastasiyaig",
    "followers_url": "https://api.github.com/users/anastasiyaig/followers",
    "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
    "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
    "repos_url": "https://api.github.com/users/anastasiyaig/repos",
    "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2347610790,
      "node_id": "MDU6TGFiZWwyMzQ3NjEwNzkw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Chat",
      "name": "Chat",
      "color": "9279e0",
      "default": false,
      "description": ""
    },
    {
      "id": 2940749877,
      "node_id": "MDU6TGFiZWwyOTQwNzQ5ODc3",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/push_notifications",
      "name": "push_notifications",
      "color": "963962",
      "default": false,
      "description": ""
    },
    {
      "id": 3047396259,
      "node_id": "MDU6TGFiZWwzMDQ3Mzk2MjU5",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/crash",
      "name": "crash",
      "color": "B60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/29",
    "html_url": "https://github.com/status-im/status-desktop/milestone/29",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/29/labels",
    "id": 6912449,
    "node_id": "MDk6TWlsZXN0b25lNjkxMjQ0OQ==",
    "number": 29,
    "title": "Rats Cohort - Iteration 2",
    "description": "",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 29,
    "state": "closed",
    "created_at": "2021-07-02T16:48:56Z",
    "updated_at": "2021-08-27T16:28:34Z",
    "due_on": "2021-07-11T07:00:00Z",
    "closed_at": "2021-08-27T16:28:34Z"
  },
  "comments": 3,
  "created_at": "2021-07-05T12:36:10Z",
  "updated_at": "2021-07-13T14:35:29Z",
  "closed_at": "2021-07-13T14:35:29Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Mentioning someone in community channel and clicking the notification as recipient crashes the app\r\n\r\n\r\n\r\nhttps://user-images.githubusercontent.com/82375995/124781420-0dfb1780-df4c-11eb-97ff-a9a1c9f40497.mov\r\n\r\n\r\n\r\n`Traceback (most recent call last)\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/src/nim_status_client.nim(220) nim_status_client\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/src/nim_status_client.nim(217) mainProc\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/vendor/nimqml/src/nimqml/private/qapplication.nim(8) exec\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/vendor/nimqml/src/nimqml/private/qobject.nim(49) qobjectCallback\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/vendor/nimqml/src/nimqml/private/qobject.nim(34) onSlotCalled\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/vendor/nimbus-build-system/vendor/Nim/lib/core/macros.nim(572) onSlotCalled\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/src/app/chat/views/channel.nim(150) setActiveChannel\r\n/Users/jenkins/workspace/us-desktop_branches_macos_master/src/app/chat/views/chat_item.nim(33) setChatItem\r\nSIGSEGV: Illegal storage access. (Attempt to read from nil?)\r\n`",
  "closed_by": {
    "login": "iurimatias",
    "id": 176720,
    "node_id": "MDQ6VXNlcjE3NjcyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iurimatias",
    "html_url": "https://github.com/iurimatias",
    "followers_url": "https://api.github.com/users/iurimatias/followers",
    "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
    "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
    "organizations_url": "https://api.github.com/users/iurimatias/orgs",
    "repos_url": "https://api.github.com/users/iurimatias/repos",
    "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iurimatias/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/2819/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876563427",
    "html_url": "https://github.com/status-im/status-desktop/issues/2819#issuecomment-876563427",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819",
    "id": 876563427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjU2MzQyNw==",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T16:06:46Z",
    "updated_at": "2021-07-08T16:06:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I checked this and yes, crash is happening not only when you click on a notification bubble with mentions, but on any chat notification.\n\nThe current implementation does this: \n- user clicks notification bubble\n- the app changes the section calling appMain.changeAppSection(Constants.chat), and that sets the first channel as active one\n- the app tries to find ChatView for chat id stored in qml as currentNotificationChatId (whatever bubble is clicked), but cannot find it empty ChatView is returned from getChannelById called from setActiveChannel proc in ChannelView and app crashes\n\nAll in all general flow is not good here. The proper way for this is to have community id and chat id set for each notification bubble (or notification bubble id, but in that case we need to maintain list of them which bubble id points to what) and when user clicks a bubble to send those two params and they will uniquely define what we need to do in the app.\n\nThat is not possible to do using SystemTrayIcon qml component, as the only signal it provides for handling click on notification bubble is messageClicked without any additional params. Also SystemTrayIcon qml component doesn't maintain any list of displayed notifications. \n\nHow this can be solved:\n- handling this in a native code \n- updating qt source by adding title/message, and use our custom build from now on\n- wait to switch to Qt 5.15+ version and try with Notification QML Type, ( https://doc.qt.io/QtApplicationManager/qml-qtapplicationmanager-notification.html#details )\n\n@iurimatias what do you suggest on this?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876563427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876603334",
    "html_url": "https://github.com/status-im/status-desktop/issues/2819#issuecomment-876603334",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819",
    "id": 876603334,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjYwMzMzNA==",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T17:07:43Z",
    "updated_at": "2021-07-08T17:07:43Z",
    "author_association": "MEMBER",
    "body": "It's not my call, but I'd say that for now, we should start by just fixing the crash.\r\nThe notification issue of not opening the right channel has been known for a while, so we can endure it some more, but the crash is pretty recent and should be fixed IMO.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876603334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876680680",
    "html_url": "https://github.com/status-im/status-desktop/issues/2819#issuecomment-876680680",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/2819",
    "id": 876680680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjY4MDY4MA==",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T19:14:00Z",
    "updated_at": "2021-07-08T19:14:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jrainville the only we can do is just displaying the app as the top most window when someone clicks a bubble notification, cause we don't have appropriate information for displaying any particular channel.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/876680680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

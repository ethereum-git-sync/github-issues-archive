{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/10022",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/10022",
  "id": 1639696007,
  "node_id": "I_kwDOD5KrTM5hu8aH",
  "number": 10022,
  "title": "Move signals processing to separate thread",
  "user": {
    "login": "osmaczko",
    "id": 33099791,
    "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/osmaczko",
    "html_url": "https://github.com/osmaczko",
    "followers_url": "https://api.github.com/users/osmaczko/followers",
    "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
    "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
    "organizations_url": "https://api.github.com/users/osmaczko/orgs",
    "repos_url": "https://api.github.com/users/osmaczko/repos",
    "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/osmaczko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3166254951,
      "node_id": "MDU6TGFiZWwzMTY2MjU0OTUx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/performance",
      "name": "performance",
      "color": "7F1B66",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [
    {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/56",
    "html_url": "https://github.com/status-im/status-desktop/milestone/56",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/56/labels",
    "id": 8475714,
    "node_id": "MI_kwDOD5KrTM4AgVRC",
    "number": 56,
    "title": "0.12",
    "description": "Priorities **in priority order** for the 0.12 milestone:  \r\n\r\n**1. Improve performance**\r\n- Focus on eliminating any UI freezes when the user clicks on something and the app does not display an immediate response.  Target: the app should ideally respond to all user input within 50ms, but let's start with identifying the longest UI freezes and trying to fix the worst UI freezes first.\r\n- Speed and responsiveness of switching between community channels, and 1on1 and ad-hoc group chats is particularly important, especially for channels and chats that contains a lot of history.  We should aim for about 250ms delay in the *worst* case if possible.  Having a lot of history in a channel should not slow channel switching down.\r\n- DB perf optimisations.  \r\n- Move things to async and off main thread\r\n- See Alex's great profiling work for possible tasks (Alex to continue focusing on perf. for this release cycle)\r\n- \"user facing performance in everyday app usage\" is the top priority, but any task that improves performance is worthwhile\r\n\r\n**2. Finish development of token based functionality from 0.11**\r\n- Optimise No. queries made by owner node when checking member tokens (Pascal)\r\n- Community encryption should automatically switch on/off depending on community permissions (issue #9942)\r\n- Implement the 'Admin' role (issue #10114)\r\n- Airdrop to community members (in addition to addresses)\r\n- Optimise gas required by collectable minting smart contracts (issue #9943, GravityBlast)\r\n--- After collectable minting gas optimisation is complete, start work on Asset minting contracts (GravityBlast)\r\n- Complete token remote destruct UI\r\n- Remove 'Community Permissions Settings', 'Community Tokens' and 'Discord Import Tool' feature flags (issue #10115)\r\n- Thoroughly test, and fix all bugs found. \r\n- Anything else related to Community level token permissions, collectable minting, airdropping, and remote destructing that didn't make it into 0.11\r\n\r\n**3. Finish implementing the ability for Community Owners and Admins to drag and drop channels and categories into different orders**\r\n\r\n**4. Finish anything related to the initial pairing process for syncing that wasn't completed in 0.11** (Igor)\r\n\r\n**5. Improve Mutual Contacts functionality to improve reliability and pay off tech debt** (Mishka)\r\n\r\n**6. Complete Community Directory Curation dApp integration inc. Featured functionality** (Patryk)\r\n \r\n**7. Backend for the Profile Showcase**\r\n\r\n**8. Identity Verification** (required for 'Profile Showcase')\r\n\r\n**9. Fix bugs, bugs and more bugs!**\r\n- Esp. find the cause of and fix the longstanding bug of some 'requests to join' not arriving for hours/days after they were sent!\r\n- Many 'fit and finish' bugs for the UI team\r\n\r\n**--- For the Wallet team ---**\r\n\r\n1. Continue feature development inc. kicking off development of the activity screens\r\n2. 'All accounts' section.  The ability to return all tokens owned by the user in all accounts (excluding watch only accounts) is also required for the Showcase functionality\r\n3. Widen scope of 'backup to waku' and 'syncing' so that all relevant Wallet user state is backed up and synced between devices\r\n4. Continue to ensure Wallet functionality is performant.\r\n5. Fix wallet bugs",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 176,
    "state": "closed",
    "created_at": "2022-09-28T20:32:37Z",
    "updated_at": "2023-05-08T13:17:45Z",
    "due_on": "2023-05-05T07:00:00Z",
    "closed_at": "2023-05-08T13:17:45Z"
  },
  "comments": 3,
  "created_at": "2023-03-24T16:27:03Z",
  "updated_at": "2023-04-12T18:06:59Z",
  "closed_at": "2023-04-12T18:01:46Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nCurrently, the status-go signals are processed in the main thread, which causes the application to freeze during startup. Although a temporary [solution](https://github.com/status-im/status-desktop/pull/9525/) was provided, the root cause of the issue still exists.\r\n\r\nThe proposed solution is to move the signals parsing and preprocessing to the worker thread, allowing the main thread to remain unblocked even when processing many heavy signals at once.\r\n\r\n#### Acceptance criteria:\r\n- `SignalsManager` should be moved to the worker thread\r\n- services' signal processing should be moved to the worker thread\r\n\r\n#### Tasks\r\n- [x] investigate moving signals processing to separate thread\r\n  - this should result in a proposal to be discussed with team\r\n- [ ] implementation",
  "closed_by": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/10022/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1505702906",
    "html_url": "https://github.com/status-im/status-desktop/issues/10022#issuecomment-1505702906",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022",
    "id": 1505702906,
    "node_id": "IC_kwDOD5KrTM5ZvzP6",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-12T17:58:58Z",
    "updated_at": "2023-04-12T17:58:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've done some benchmarking.\r\n\r\n#### Process: \r\nCreate big dummy `messages.new` signal with 1000 messages and measure the parsing/processing time\r\n\r\nhttps://user-images.githubusercontent.com/33099791/231543146-631a24ad-ff99-4b03-a2d9-53cb45aadf2a.mp4\r\n\r\n\r\n#### Findings:\r\n- the signal is processed on the application's main thread\r\n- the parsing time for the signal is approximately 315 milliseconds\r\n\r\nLogs for reference:\r\n```\r\n--- AppController::start, threadId: 313643\r\n--- status-go::TriggerHugeSignal(1000 messages)\r\n--- SignalsManager::processSignal, threadId: 313643, signal: messages.new, cpuTime[ms]: 314.2800220000001\r\n```\r\n\r\n#### Conclusions:\r\nConsidering that a 1000-message signal represents an extreme scenario, the observed processing time remains relatively efficient. As a result, implementing a separate thread for signal processing does not warrant the additional complexity and resources.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1505702906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1505706787",
    "html_url": "https://github.com/status-im/status-desktop/issues/10022#issuecomment-1505706787",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022",
    "id": 1505706787,
    "node_id": "IC_kwDOD5KrTM5Zv0Mj",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-12T18:01:46Z",
    "updated_at": "2023-04-12T18:01:46Z",
    "author_association": "MEMBER",
    "body": "Ok, thanks for that. I'll close for now then",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1505706787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1505713152",
    "html_url": "https://github.com/status-im/status-desktop/issues/10022#issuecomment-1505713152",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/10022",
    "id": 1505713152,
    "node_id": "IC_kwDOD5KrTM5Zv1wA",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-12T18:06:58Z",
    "updated_at": "2023-04-12T18:06:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "status-go code for future reference:\r\n```\r\ndiff --git a/services/chat/api.go b/services/chat/api.go\r\nindex f0f5be54e..e37f325fe 100644\r\n--- a/services/chat/api.go\r\n+++ b/services/chat/api.go\r\n@@ -2,7 +2,9 @@ package chat\r\n \r\n import (\r\n \t\"context\"\r\n+\t\"crypto/ecdsa\"\r\n \t\"errors\"\r\n+\t\"fmt\"\r\n \t\"strings\"\r\n \r\n \t\"github.com/ethereum/go-ethereum/common/hexutil\"\r\n@@ -15,6 +17,7 @@ import (\r\n \t\"github.com/status-im/status-go/protocol/protobuf\"\r\n \t\"github.com/status-im/status-go/protocol/requests\"\r\n \tv1protocol \"github.com/status-im/status-go/protocol/v1\"\r\n+\t\"github.com/status-im/status-go/signal\"\r\n )\r\n \r\n var (\r\n@@ -596,3 +599,136 @@ func (api *API) EditChat(ctx context.Context, communityID types.HexBytes, chatID\r\n \tpubKey := types.EncodeHex(crypto.FromECDSAPub(api.s.messenger.IdentityPublicKey()))\r\n \treturn api.toAPIChat(response.Chats()[0], nil, pubKey, false)\r\n }\r\n+\r\n+func (api *API) TriggerHugeSignal(ctx context.Context) error {\r\n+\tfmt.Println(\"--- status-go::TriggerHugeSignal(1000 messages)\")\r\n+\tgo func() {\r\n+\t\tresponse := protocol.MessengerResponse{}\r\n+\t\tresponse.AddChat(&protocol.Chat{\r\n+\t\t\tID:                       \"0x04cd8ae283626f6931d5c16e80b2f6e6e74963939baea1da09c6db251aa2f4e18a259f7a0ce6cdfa0ff40b4b62324e6ec68eab2a134897ec5dec1af7f2d442486f\",\r\n+\t\t\tName:                     \"0x04cd8ae283626f6931d5c16e80b2f6e6e74963939baea1da09c6db251aa2f4e18a259f7a0ce6cdfa0ff40b4b62324e6ec68eab2a134897ec5dec1af7f2d442486f\",\r\n+\t\t\tDescription:              \"\",\r\n+\t\t\tColor:                    \"\",\r\n+\t\t\tEmoji:                    \"\",\r\n+\t\t\tActive:                   true,\r\n+\t\t\tChatType:                 1,\r\n+\t\t\tTimestamp:                1681318512464,\r\n+\t\t\tLastClockValue:           1681318509789,\r\n+\t\t\tDeletedAtClockValue:      0,\r\n+\t\t\tReadMessagesAtClockValue: 1681248091563,\r\n+\t\t\tUnviewedMessagesCount:    1,\r\n+\t\t\tUnviewedMentionsCount:    1,\r\n+\t\t\tLastMessage:              &common.Message{},\r\n+\t\t\tMembers:                  []protocol.ChatMember{},\r\n+\t\t\tMembershipUpdates:        []v1protocol.MembershipUpdateEvent{},\r\n+\t\t\tAlias:                    \"Cadetblue Vast Ant\",\r\n+\t\t\tIdenticon:                \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAlUlEQVR4nOzX0QmDUAxG4bZ0l+7UORzDOdzJaXQBIxG9cPg533MePATC9fMKYQiNITSG0BhCYwiNITSG0MSEfLuDy7xuYz/l2H/6vTtzMRsxhMYQmvbVqlRXpbpyV+e7YjZiCI0hNK13zJmnrlP3TVWJ2YghNIbQYP4Q716zmI0YQmOIBonZiCE0htAYQmMIzR4AAP//bgobcr/4IzwAAAAASUVORK5CYII=\",\r\n+\t\t\tMuted:                    false,\r\n+\t\t\tJoined:                   1680595242830,\r\n+\t\t})\r\n+\t\tresponse.AddContact(&protocol.Contact{\r\n+\t\t\tID:                        \"0x04cd8ae283626f6931d5c16e80b2f6e6e74963939baea1da09c6db251aa2f4e18a259f7a0ce6cdfa0ff40b4b62324e6ec68eab2a134897ec5dec1af7f2d442486f\",\r\n+\t\t\tENSVerified:               false,\r\n+\t\t\tAlias:                     \"Cadetblue Vast Ant\",\r\n+\t\t\tIdenticon:                 \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAlUlEQVR4nOzX0QmDUAxG4bZ0l+7UORzDOdzJaXQBIxG9cPg533MePATC9fMKYQiNITSG0BhCYwiNITSG0MSEfLuDy7xuYz/l2H/6vTtzMRsxhMYQmvbVqlRXpbpyV+e7YjZiCI0hNK13zJmnrlP3TVWJ2YghNIbQYP4Q716zmI0YQmOIBonZiCE0htAYQmMIzR4AAP//bgobcr/4IzwAAAAASUVORK5CYII=\",\r\n+\t\t\tLastUpdatedLocally:        1680519490392,\r\n+\t\t\tDisplayName:               \"rhsTest4\",\r\n+\t\t\tImages:                    map[string]images.IdentityImage{},\r\n+\t\t\tBlocked:                   false,\r\n+\t\t\tContactRequestRemoteState: 3,\r\n+\t\t\tContactRequestRemoteClock: 1680519502746,\r\n+\t\t\tContactRequestLocalState:  2,\r\n+\t\t\tContactRequestLocalClock:  1680519490392,\r\n+\t\t\tIsSyncing:                 false,\r\n+\t\t\tRemoved:                   false,\r\n+\t\t\tVerificationStatus:        0,\r\n+\t\t\tTrustStatus:               0,\r\n+\t\t})\r\n+\t\tfor i := 0; i < 1000; i++ {\r\n+\t\t\tresponse.AddMessage(&common.Message{\r\n+\t\t\t\tChatMessage: protobuf.ChatMessage{\r\n+\t\t\t\t\tClock:                         1681318509789,\r\n+\t\t\t\t\tTimestamp:                     1681318509789,\r\n+\t\t\t\t\tText:                          \"@0x04ef06d2236f433fed742d6f83fd5a6ddb177da414e961f8deed8f4dd5de6f6da35c1b08ced49950ab93267c04653be1f256ec15ace83ea5cb6549c49beb60c1ea test bla bla `code snippet` emojis: ðŸ¤” ðŸ˜‘ ðŸ˜‚ \",\r\n+\t\t\t\t\tResponseTo:                    \"\",\r\n+\t\t\t\t\tEnsName:                       \"\",\r\n+\t\t\t\t\tChatId:                        \"0x04ef06d2236f433fed742d6f83fd5a6ddb177da414e961f8deed8f4dd5de6f6da35c1b08ced49950ab93267c04653be1f256ec15ace83ea5cb6549c49beb60c1ea\",\r\n+\t\t\t\t\tMessageType:                   1,\r\n+\t\t\t\t\tContentType:                   1,\r\n+\t\t\t\t\tPayload:                       nil,\r\n+\t\t\t\t\tGrant:                         []byte{},\r\n+\t\t\t\t\tDisplayName:                   \"\",\r\n+\t\t\t\t\tContactRequestPropagatedState: &protobuf.ContactRequestPropagatedState{},\r\n+\t\t\t\t\tXXX_NoUnkeyedLiteral:          struct{}{},\r\n+\t\t\t\t\tXXX_unrecognized:              []byte{},\r\n+\t\t\t\t\tXXX_sizecache:                 0,\r\n+\t\t\t\t},\r\n+\t\t\t\tID:                fmt.Sprintf(\"0xc92f642b37e347a9554c26faa33bbb1802c7958610c174eefeee679f84dbab72%d\", i),\r\n+\t\t\t\tWhisperTimestamp:  1681318510000,\r\n+\t\t\t\tFrom:              \"0x04cd8ae283626f6931d5c16e80b2f6e6e74963939baea1da09c6db251aa2f4e18a259f7a0ce6cdfa0ff40b4b62324e6ec68eab2a134897ec5dec1af7f2d442486f\",\r\n+\t\t\t\tAlias:             \"Cadetblue Vast Ant\",\r\n+\t\t\t\tIdenticon:         \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAlUlEQVR4nOzX0QmDUAxG4bZ0l+7UORzDOdzJaXQBIxG9cPg533MePATC9fMKYQiNITSG0BhCYwiNITSG0MSEfLuDy7xuYz/l2H/6vTtzMRsxhMYQmvbVqlRXpbpyV+e7YjZiCI0hNK13zJmnrlP3TVWJ2YghNIbQYP4Q716zmI0YQmOIBonZiCE0htAYQmMIzR4AAP//bgobcr/4IzwAAAAASUVORK5CYII=\",\r\n+\t\t\t\tLocalChatID:       \"0x04cd8ae283626f6931d5c16e80b2f6e6e74963939baea1da09c6db251aa2f4e18a259f7a0ce6cdfa0ff40b4b62324e6ec68eab2a134897ec5dec1af7f2d442486f\",\r\n+\t\t\t\tSeen:              false,\r\n+\t\t\t\tOutgoingStatus:    \"\",\r\n+\t\t\t\tQuotedMessage:     &common.QuotedMessage{},\r\n+\t\t\t\tCommandParameters: &common.CommandParameters{},\r\n+\t\t\t\tGapParameters:     &common.GapParameters{},\r\n+\t\t\t\tRTL:               false,\r\n+\t\t\t\tParsedText: []byte(`\r\n+\t\t[\r\n+\t\t\t{\r\n+\t\t\t\t\"type\": \"paragraph\",\r\n+\t\t\t\t\"children\": [\r\n+\t\t\t\t\t{\r\n+\t\t\t\t\t\t\"literal\": \"\"\r\n+\t\t\t\t\t},\r\n+\t\t\t\t\t{\r\n+\t\t\t\t\t\t\"type\": \"mention\",\r\n+\t\t\t\t\t\t\"literal\": \"0x04ef06d2236f433fed742d6f83fd5a6ddb177da414e961f8deed8f4dd5de6f6da35c1b08ced49950ab93267c04653be1f256ec15ace83ea5cb6549c49beb60c1ea\"\r\n+\t\t\t\t\t},\r\n+\t\t\t\t\t{\r\n+\t\t\t\t\t\t\"literal\": \" test bla bla \"\r\n+\t\t\t\t\t},\r\n+\t\t\t\t\t{\r\n+\t\t\t\t\t\t\"type\": \"code\",\r\n+\t\t\t\t\t\t\"literal\": \"code snippet\"\r\n+\t\t\t\t\t},\r\n+\t\t\t\t\t{\r\n+\t\t\t\t\t\t\"literal\": \" emojis: ðŸ¤” ðŸ˜‘ ðŸ˜‚\"\r\n+\t\t\t\t\t}\r\n+\t\t\t\t]\r\n+\t\t\t}\r\n+\t\t]\r\n+\t`),\r\n+\t\t\t\tLineCount:       0,\r\n+\t\t\t\tBase64Image:     \"\",\r\n+\t\t\t\tImagePath:       \"\",\r\n+\t\t\t\tBase64Audio:     \"\",\r\n+\t\t\t\tAudioPath:       \"\",\r\n+\t\t\t\tImageLocalURL:   \"\",\r\n+\t\t\t\tAudioLocalURL:   \"\",\r\n+\t\t\t\tStickerLocalURL: \"\",\r\n+\t\t\t\tCommunityID:     \"\",\r\n+\t\t\t\tReplace:         \"\",\r\n+\t\t\t\tNew:             false,\r\n+\t\t\t\tSigPubKey:       &ecdsa.PublicKey{},\r\n+\t\t\t\tMentions: []string{\r\n+\t\t\t\t\t\"0x04ef06d2236f433fed742d6f83fd5a6ddb177da414e961f8deed8f4dd5de6f6da35c1b08ced49950ab93267c04653be1f256ec15ace83ea5cb6549c49beb60c1ea\",\r\n+\t\t\t\t},\r\n+\t\t\t\tMentioned:                true,\r\n+\t\t\t\tReplied:                  false,\r\n+\t\t\t\tLinks:                    []string{},\r\n+\t\t\t\tEditedAt:                 0,\r\n+\t\t\t\tDeleted:                  false,\r\n+\t\t\t\tDeletedBy:                \"\",\r\n+\t\t\t\tDeletedForMe:             false,\r\n+\t\t\t\tContactRequestState:      0,\r\n+\t\t\t\tContactVerificationState: 0,\r\n+\t\t\t\tDiscordMessage:           &protobuf.DiscordMessage{},\r\n+\t\t\t})\r\n+\t\t}\r\n+\t\tsignal.SendNewMessages(&response)\r\n+\t}()\r\n+\treturn nil\r\n+}\r\n```\r\n\r\nstatus-desktop code for future reference:\r\n```\r\ndiff --git a/src/app/core/signals/signals_manager.nim b/src/app/core/signals/signals_manager.nim\r\nindex 1108a472b..04442c65f 100644\r\n--- a/src/app/core/signals/signals_manager.nim\r\n+++ b/src/app/core/signals/signals_manager.nim\r\n@@ -1,4 +1,4 @@\r\n-import NimQml, json, strutils, chronicles, json_serialization\r\n+import NimQml, json, strutils, chronicles, json_serialization, times\r\n import ../eventemitter\r\n \r\n include types\r\n@@ -27,6 +27,8 @@ QtObject:\r\n     result.events = events\r\n \r\n   proc processSignal(self: SignalsManager, statusSignal: string) =\r\n+    let start = cpuTime()\r\n+\r\n     var jsonSignal: JsonNode\r\n     try:\r\n       jsonSignal = statusSignal.parseJson\r\n@@ -50,6 +52,9 @@ QtObject:\r\n     if(signal.signalType == SignalType.NodeCrashed):\r\n         error \"node.crashed\", error=statusSignal\r\n \r\n+    if(signal.signalType == SignalType.Message):\r\n+      echo(\"--- SignalsManager::processSignal, threadId: \", getThreadId(), \", signal: \", signal.signalTypeStr, \", cpuTime[ms]: \", (cpuTime()-start)*1000)\r\n+\r\n     self.events.emit(signal.signalType.event, signal)\r\n \r\n   proc receiveSignal(self: SignalsManager, signal: string) {.slot.} =\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1505713152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

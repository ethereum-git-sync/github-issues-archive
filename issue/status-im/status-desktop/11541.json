{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/11541",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/11541/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/11541/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/11541/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/11541",
  "id": 1804955607,
  "node_id": "I_kwDOD5KrTM5rlW_X",
  "number": 11541,
  "title": "Make requests to join more resilient to not depend on external APIs as much",
  "user": {
    "login": "jrainville",
    "id": 11926403,
    "node_id": "MDQ6VXNlcjExOTI2NDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrainville",
    "html_url": "https://github.com/jrainville",
    "followers_url": "https://api.github.com/users/jrainville/followers",
    "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
    "organizations_url": "https://api.github.com/users/jrainville/orgs",
    "repos_url": "https://api.github.com/users/jrainville/repos",
    "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrainville/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2351074091,
      "node_id": "MDU6TGFiZWwyMzUxMDc0MDkx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/refactor",
      "name": "refactor",
      "color": "ef9870",
      "default": false,
      "description": ""
    },
    {
      "id": 2987757762,
      "node_id": "MDU6TGFiZWwyOTg3NzU3NzYy",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/to%20analyze",
      "name": "to analyze",
      "color": "5CC421",
      "default": false,
      "description": ""
    },
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 6014779451,
      "node_id": "LA_kwDOD5KrTM8AAAABZoJAOw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20misc%20refactors",
      "name": "E:Desktop misc refactors",
      "color": "A6C799",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-07-14T14:12:06Z",
  "updated_at": "2023-11-01T17:59:18Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nCurrently, when sending a request to join, we check if you satisfy the requirements first. If you don't, then we don't send.\r\n\r\nHowever, there is the bad case of an external API/provider being down. For example, in the current master branch, if OpenSea is down (or if you try to use an L2), it will consider that a failed check and you won't be able to send the request.\r\n\r\nI don't have a good solution yet.\r\n\r\nOne option would be that if the provider(s) is down, we still send the request and since the owner does the check too.\r\nHowever, if the provider is down for the owner too, then the request will be put in the trash.\r\n\r\nSo we need to improve the owner code so that if it fails because of a provider error, we'll do retries.\r\n\r\nLet me know if you have other ideas.\r\n\r\n### Acceptance Criteria\r\n\r\nTBD\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/11541/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/11541/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1635935324",
    "html_url": "https://github.com/status-im/status-desktop/issues/11541#issuecomment-1635935324",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11541",
    "id": 1635935324,
    "node_id": "IC_kwDOD5KrTM5hgmRc",
    "user": {
      "login": "dlipicar",
      "id": 11161531,
      "node_id": "MDQ6VXNlcjExMTYxNTMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11161531?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dlipicar",
      "html_url": "https://github.com/dlipicar",
      "followers_url": "https://api.github.com/users/dlipicar/followers",
      "following_url": "https://api.github.com/users/dlipicar/following{/other_user}",
      "gists_url": "https://api.github.com/users/dlipicar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dlipicar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dlipicar/subscriptions",
      "organizations_url": "https://api.github.com/users/dlipicar/orgs",
      "repos_url": "https://api.github.com/users/dlipicar/repos",
      "events_url": "https://api.github.com/users/dlipicar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dlipicar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T14:20:43Z",
    "updated_at": "2023-07-14T14:25:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "If we're worried about the owner getting spammed by malicious joiner requests and we drop the check when our provider is down, they could simply block the provider's URL in their hosts file or firewall and spam away.\r\n\r\nThis seems to be a worry mainly because OpenSea's API is not that reliable. I think we could expect Infura not to be down, and possibly Alchemy too. If we make our critical features depend on those instead of OpenSea we'll probably be good.\r\n\r\nI agree the owner should have some retry mechanism when the providers return some temporary error.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1635935324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1635941354",
    "html_url": "https://github.com/status-im/status-desktop/issues/11541#issuecomment-1635941354",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11541",
    "id": 1635941354,
    "node_id": "IC_kwDOD5KrTM5hgnvq",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T14:25:14Z",
    "updated_at": "2023-07-14T14:25:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So we need to improve the owner code so that if it fails because of a provider error, we'll do retries.\r\n\r\nSounds good.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1635941354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

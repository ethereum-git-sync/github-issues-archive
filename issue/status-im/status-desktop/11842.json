{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/11842",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/11842/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/11842/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/11842/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/11842",
  "id": 1842984409,
  "node_id": "I_kwDOD5KrTM5t2bXZ",
  "number": 11842,
  "title": "Keep track of eventsender origin in request-to-join flow",
  "user": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5744740396,
      "node_id": "LA_kwDOD5KrTM8AAAABVmnILA",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Community%20Admin%20Improvements",
      "name": "E:Desktop Community Admin Improvements",
      "color": "fbca04",
      "default": false,
      "description": "Implementation of the needed improvements for the Admin events to be stable."
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-08-09T10:56:53Z",
  "updated_at": "2023-08-09T10:56:53Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "As discussed in https://github.com/status-im/status-go/pull/3843#issuecomment-1668460439, when an admin/tokenmaster/owner-without-private-key (\"eventsender\") signals a decision for a membership request to other eventsenders and the control nodes, they should all store the account that made the decision.\r\n\r\nThis is necessary so that the same account can change their mind (right now, once a requestToJoin enters a `*Pending` state, it cannot be changed anymore). To allow for that the node needs to know who made the decision in the first place.\r\n\r\nTechnically, this means:\r\n\r\n1. Extend the `communities_requests_to_join` table with a column that stores who updated the requests `state` in case of an admin event\r\n2. Introduce a migration script that enables 1) for existing clients\r\n3. Ensure this field is updated when a request to join enters any `*Pending` state for the first time\r\n4. During `DeclineRequestToJoin` or `AcceptRequestToJoin`, instead of stopping execution when current account is eventsender and requestToJoin is already in accepted/declinedPending, check who made that decision, if it's the same account, allow for updating that decision",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/11842/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/11842/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/11901",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/11901/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/11901/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/11901/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/11901",
  "id": 1852998131,
  "node_id": "I_kwDOD5KrTM5ucoHz",
  "number": 11901,
  "title": "ci: improve master builds",
  "user": {
    "login": "yakimant",
    "id": 1529006,
    "node_id": "MDQ6VXNlcjE1MjkwMDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1529006?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yakimant",
    "html_url": "https://github.com/yakimant",
    "followers_url": "https://api.github.com/users/yakimant/followers",
    "following_url": "https://api.github.com/users/yakimant/following{/other_user}",
    "gists_url": "https://api.github.com/users/yakimant/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yakimant/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yakimant/subscriptions",
    "organizations_url": "https://api.github.com/users/yakimant/orgs",
    "repos_url": "https://api.github.com/users/yakimant/repos",
    "events_url": "https://api.github.com/users/yakimant/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yakimant/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-08-16T10:57:50Z",
  "updated_at": "2023-08-16T14:52:08Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\n#### Situation\r\n\r\nWe have a job in Jenkins running build & e2e tests on each push to master:\r\nhttps://ci.infra.status.im/job/status-desktop/job/master/\r\n\r\nWe also run build & e2e on each PR branch push.\r\nBuild failure blocks PR from merging, but being up-to-date with master is not required.\r\n\r\nWe also run e2e nightly on `master`:\r\nhttps://ci.infra.status.im/job/status-desktop/job/nightly-e2e/\r\n\r\n#### Usage\r\n\r\nDevelopers are not requiring PR branch to be up-to-date with` master`, because it becomes difficult to merge.\r\nBut still they want to know, that `master` is not broken.\r\nPreviously they've got notifications on Discord, but it's not the case with switch to Status.\r\nCurrently noone is watching the results manually, unless maybe when `master` got broken for bisect.\r\n\r\n#### Diff with mobile flow\r\n\r\n1. Mobile don't run e2e on each push, only on demand\r\n2. Mobile require PR to be up-to-date with `master`\r\n3. Thus they know for sure, that code doesn't break `master`\r\n4. And don't need `master` builds\r\n\r\n#### Options\r\n\r\n1. Leave `master` build, enable notifications to Status\r\n2. Switch flow to Mobile-like\r\n3. Switch off `master` build\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/11901/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/11901/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1680441073",
    "html_url": "https://github.com/status-im/status-desktop/issues/11901#issuecomment-1680441073",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11901",
    "id": 1680441073,
    "node_id": "IC_kwDOD5KrTM5kKX7x",
    "user": {
      "login": "osmaczko",
      "id": 33099791,
      "node_id": "MDQ6VXNlcjMzMDk5Nzkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/33099791?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/osmaczko",
      "html_url": "https://github.com/osmaczko",
      "followers_url": "https://api.github.com/users/osmaczko/followers",
      "following_url": "https://api.github.com/users/osmaczko/following{/other_user}",
      "gists_url": "https://api.github.com/users/osmaczko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/osmaczko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/osmaczko/subscriptions",
      "organizations_url": "https://api.github.com/users/osmaczko/orgs",
      "repos_url": "https://api.github.com/users/osmaczko/repos",
      "events_url": "https://api.github.com/users/osmaczko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/osmaczko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-16T11:36:34Z",
    "updated_at": "2023-08-16T11:36:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll opt for Option 1.\r\n\r\nFor Option 2, as you mentioned, it will make PRs hard to merge.\r\n\r\nRegarding Option 3, I believe pushes to master are much less frequent than pushes to certain PRs. Contributors often modify the code to address review suggestions and fix bugs found by QAs. In other words, removing the master build will not significantly improve the load on Jenkins' nodes.\r\n\r\nThere is also Option 4 - do nothing. Pros: Enables easier bisecting when things go sideways.. Cons: It has some impact on the load on Jenkins' nodes.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1680441073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1680766035",
    "html_url": "https://github.com/status-im/status-desktop/issues/11901#issuecomment-1680766035",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/11901",
    "id": 1680766035,
    "node_id": "IC_kwDOD5KrTM5kLnRT",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-16T14:52:07Z",
    "updated_at": "2023-08-16T14:52:07Z",
    "author_association": "MEMBER",
    "body": "We could do option 1 but if the load is too big for master builds, we could do it as a nightly instead, so we get one report each day.\r\n\r\nAnother improvement we could do that we discussed in the e2e channel a while ago was to do the e2e build only on demand, but still require it to pass to merge, without the need to rebase on master.\r\nSometimes, we push to a PR and we're not fully done so running the e2e is useless.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1680766035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

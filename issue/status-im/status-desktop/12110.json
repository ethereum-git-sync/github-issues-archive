{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12110",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12110/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12110/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12110/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12110",
  "id": 1887606819,
  "node_id": "I_kwDOD5KrTM5wgpgj",
  "number": 12110,
  "title": "Wallet: Community token logo and amount improperly displayed in wallet",
  "user": {
    "login": "micieslak",
    "id": 20650004,
    "node_id": "MDQ6VXNlcjIwNjUwMDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/micieslak",
    "html_url": "https://github.com/micieslak",
    "followers_url": "https://api.github.com/users/micieslak/followers",
    "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
    "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
    "organizations_url": "https://api.github.com/users/micieslak/orgs",
    "repos_url": "https://api.github.com/users/micieslak/repos",
    "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
    "received_events_url": "https://api.github.com/users/micieslak/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "alaibe",
    "id": 491074,
    "node_id": "MDQ6VXNlcjQ5MTA3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/491074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alaibe",
    "html_url": "https://github.com/alaibe",
    "followers_url": "https://api.github.com/users/alaibe/followers",
    "following_url": "https://api.github.com/users/alaibe/following{/other_user}",
    "gists_url": "https://api.github.com/users/alaibe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alaibe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alaibe/subscriptions",
    "organizations_url": "https://api.github.com/users/alaibe/orgs",
    "repos_url": "https://api.github.com/users/alaibe/repos",
    "events_url": "https://api.github.com/users/alaibe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alaibe/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "alaibe",
      "id": 491074,
      "node_id": "MDQ6VXNlcjQ5MTA3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/491074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alaibe",
      "html_url": "https://github.com/alaibe",
      "followers_url": "https://api.github.com/users/alaibe/followers",
      "following_url": "https://api.github.com/users/alaibe/following{/other_user}",
      "gists_url": "https://api.github.com/users/alaibe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alaibe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alaibe/subscriptions",
      "organizations_url": "https://api.github.com/users/alaibe/orgs",
      "repos_url": "https://api.github.com/users/alaibe/repos",
      "events_url": "https://api.github.com/users/alaibe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alaibe/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/65",
    "html_url": "https://github.com/status-im/status-desktop/milestone/65",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/65/labels",
    "id": 9039509,
    "node_id": "MI_kwDOD5KrTM4Aie6V",
    "number": 65,
    "title": "0.15",
    "description": "**1. Finish anything that wasn't completed in the previous 0.14 cycle**\r\n- And fix bugs as usual. We need to keep tech. debt at a roughly fixed level as we grow out functionality, can't let it accumulate! ;-)\r\n\r\n**2. Tokenisation of community ownership**\r\n- Work needed already evaluated in spike.  Community and 'Channel in a Community' URLs don't need to be signed if this will present problems. Patryk to work on this as a continuation of the spike already done.\r\n- See priority 4 below, as this also has some implications for the tokenisation of community work.\r\n\r\n**3. Profile showcase backend**\r\n- The long-delayed profile showcase backend!  We have the UI on the desktop ready to go for this feature, and Mobile is going to need the backend for this feature as well, so let's try to get it done in 0.14 [#11081](https://github.com/status-im/status-desktop/issues/11081)\r\n\r\n**4. Community tokens visible in wallet when received by user who is not a member of that community**\r\n- Solution obvs. needs to be fully decenteralised and permissionless\r\n- Perhaps whenever a community token is A) sent from a Status Wallet to another user or B) airdropped by a community or C) retailed by a community, a M2M (invisible to the user) Waku message should be sent to the recipient's *ethereum address*?\r\n- This message could either: A) contain the metadata for the token B) tell the user that they have received token, and to check the metadata in either another Waku channel where Control Nodes periodically post Metadata OR check the metadata embedded in the token contract (embedding metadata in the token contract might be a better idea?).  \r\n- The token metadata stored in the token contract is signed by the Community's private key to ensure authenticity.  When the community's private key changes due to ownership of a community being transferred or due to the control node being moved, a transaction must be made to update this metadata so it is signed by the community's new private key.\r\n- See here for how a Waku message can be sent to and Ethereum address https://rfc.vac.dev/spec/20/\r\n\r\n**5. Discord history import into a single channel in an existing community**\r\n- Pay off any Discord history import service tech. debt first\r\n- Then build the import into a single channel functionality, designs for this are already complete\r\n\r\n**6. UI for community owner to enable manual Waku static shading for their community**\r\n- This will be off by default in 0.15\r\n- This UI is only for the Owner of a community (not TokenMasters or Admins)\r\n- Figma designs are here https://www.figma.com/file/qHfFm7C9LwtXpfdbxssCK3/Kuba%E2%8E%9CDesktop---Communities?type=design&node-id=37242%3A222352&mode=design&t=rw6q6NQYmiz3rSn2-1\r\n\r\n**7. Community chat functionality enhancements**\r\n- Ability to mark a token gated channel as 'hidden', only visible to community members with the requisite tokens\r\n\r\n**8. Refactor synchronisation of contacts**\r\n- To fix various contact request issues, is a large work item\r\n- Mishka and Igor to work on this?\r\n- https://github.com/status-im/status-go/issues/3720\r\n- https://github.com/status-im/status-go/issues/3803#issuecomment-1654588500\r\n\r\n\r\n\r\n**--- Wallet Team ---**\r\n\r\n1. Finish anything that wasn't completed in the previous 0.14 cycle\r\n- And fix bugs as usual. We need to keep tech. debt at a roughly fixed level as we grow out functionality, can't let it accumulate! ;-)\r\n\r\n2. Sending Community created tokens to Status users who are not members of that community\r\n- See priority 4) in the messaging priorities list above.\r\n\r\n3. Send NFT functionality\r\n\r\n4. Updated wallet settings with keypair syncing\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 162,
    "closed_issues": 58,
    "state": "open",
    "created_at": "2023-02-13T19:08:52Z",
    "updated_at": "2023-09-11T12:47:15Z",
    "due_on": "2023-09-29T07:00:00Z",
    "closed_at": null
  },
  "comments": 2,
  "created_at": "2023-09-08T12:39:04Z",
  "updated_at": "2023-09-11T10:25:34Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\n\r\nIn the mint asset form we define `Decimals (DP`:\r\n\r\n![image](https://github.com/status-im/status-desktop/assets/20650004/95db39fa-8edb-4eff-8e20-8d3d775680a4)\r\n\r\nThis `DP` value is intended to be used only on the UI side to control how many decimal places user should see and use when providing amount. Under the hood every unit is divisible in the same way as `ETH`. 1 unit is 10^18 base units.\r\n\r\nLet's take a look how asset look in `Tokens` section in community settings:\r\n\r\n![Screenshot from 2023-09-08 11-46-33](https://github.com/status-im/status-desktop/assets/20650004/68c7f912-f47a-400b-93c0-41d429339c94)\r\n\r\nThe total supply is `9,000000001`, `DP` is 10.\r\n\r\nIn the wallet the asset is presented as follows:\r\n\r\n![Screenshot from 2023-09-07 14-21-41](https://github.com/status-im/status-desktop/assets/20650004/152b1c56-8df0-4520-afb3-66395d9e5ed1)\r\n\r\nThe balance is displayed as `900 000 000` what is `9*10^8` or `9*10^(18-10)`. The `DP` value is improperly taken into account to present the balance. The actual amount in base units should be divided by 10^18 (that value is used consistently for all community assets). `DP` should be used only to control how many decimal places we show.\r\n\r\nThe other question is if the wallet should present the total supply. Is it equal to owner's balance for that token?\r\n\r\n## Steps to reproduce\r\n1. Create community\r\n2. Mint owner token and token master\r\n3. Mint community asset, define some finite amount and DP\r\n4. Go to wallet\r\n\r\n#### Expected behavior\r\nAsset should be visible with proper artwork and balance\r\n\r\n#### Actual behavior\r\nThere is no artwork visible, balance is incorrect\r\n\r\n### Additional Information\r\n\r\n- Status desktop version:\r\n- Operating System:\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12110/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12110/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1713451974",
    "html_url": "https://github.com/status-im/status-desktop/issues/12110#issuecomment-1713451974",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12110",
    "id": 1713451974,
    "node_id": "IC_kwDOD5KrTM5mITPG",
    "user": {
      "login": "alaibe",
      "id": 491074,
      "node_id": "MDQ6VXNlcjQ5MTA3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/491074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alaibe",
      "html_url": "https://github.com/alaibe",
      "followers_url": "https://api.github.com/users/alaibe/followers",
      "following_url": "https://api.github.com/users/alaibe/following{/other_user}",
      "gists_url": "https://api.github.com/users/alaibe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alaibe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alaibe/subscriptions",
      "organizations_url": "https://api.github.com/users/alaibe/orgs",
      "repos_url": "https://api.github.com/users/alaibe/repos",
      "events_url": "https://api.github.com/users/alaibe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alaibe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-11T08:50:49Z",
    "updated_at": "2023-09-11T08:50:49Z",
    "author_association": "COLLABORATOR",
    "body": "@micieslak regarding the balance, is the decimals correctly set in the contract?\r\n\r\nCould you link the contract so that I can verify that?\r\n\r\nRegarding the artwork. This is something that hasn't been worked on yet.\r\n\r\n`The other question is if the wallet should present the total supply.`\r\nDesign is not final here yet. but i doubt we will make a special case for community token",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1713451974/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1713604683",
    "html_url": "https://github.com/status-im/status-desktop/issues/12110#issuecomment-1713604683",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12110",
    "id": 1713604683,
    "node_id": "IC_kwDOD5KrTM5mI4hL",
    "user": {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-11T10:25:34Z",
    "updated_at": "2023-09-11T10:25:34Z",
    "author_association": "MEMBER",
    "body": "> @micieslak regarding the balance, is the decimals correctly set in the contract?\r\n\r\nFrom what I know it's fixed to be divisible as ETH, 1 unit is 10^18 base units. Decimals specified in the form are only for UI.\r\n\r\n> Could you link the contract so that I can verify that?\r\n\r\nI don't know the contract. @endulab would know for sure (he's off currently).\r\n\r\n> Regarding the artwork. This is something that hasn't been worked on yet.\r\n\r\nOk, its minor thing.\r\n\r\n> `The other question is if the wallet should present the total supply.` Design is not final here yet. but i doubt we will make a special case for community token\r\n\r\nSo the currently presented value seems to be incorrect, right?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1713604683/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/9443",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/9443/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/9443/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/9443/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/9443",
  "id": 1571071756,
  "node_id": "I_kwDOD5KrTM5dpKcM",
  "number": 9443,
  "title": "[wallet] SendModal - lowering entropy in QML implementation",
  "user": {
    "login": "stefandunca",
    "id": 47554641,
    "node_id": "MDQ6VXNlcjQ3NTU0NjQx",
    "avatar_url": "https://avatars.githubusercontent.com/u/47554641?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stefandunca",
    "html_url": "https://github.com/stefandunca",
    "followers_url": "https://api.github.com/users/stefandunca/followers",
    "following_url": "https://api.github.com/users/stefandunca/following{/other_user}",
    "gists_url": "https://api.github.com/users/stefandunca/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stefandunca/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stefandunca/subscriptions",
    "organizations_url": "https://api.github.com/users/stefandunca/orgs",
    "repos_url": "https://api.github.com/users/stefandunca/repos",
    "events_url": "https://api.github.com/users/stefandunca/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stefandunca/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 3143640900,
      "node_id": "MDU6TGFiZWwzMTQzNjQwOTAw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/chore",
      "name": "chore",
      "color": "5AD5E4",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [
    {
      "login": "Khushboo-dev-cpp",
      "id": 60327365,
      "node_id": "MDQ6VXNlcjYwMzI3MzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/60327365?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Khushboo-dev-cpp",
      "html_url": "https://github.com/Khushboo-dev-cpp",
      "followers_url": "https://api.github.com/users/Khushboo-dev-cpp/followers",
      "following_url": "https://api.github.com/users/Khushboo-dev-cpp/following{/other_user}",
      "gists_url": "https://api.github.com/users/Khushboo-dev-cpp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Khushboo-dev-cpp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Khushboo-dev-cpp/subscriptions",
      "organizations_url": "https://api.github.com/users/Khushboo-dev-cpp/orgs",
      "repos_url": "https://api.github.com/users/Khushboo-dev-cpp/repos",
      "events_url": "https://api.github.com/users/Khushboo-dev-cpp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Khushboo-dev-cpp/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/65",
    "html_url": "https://github.com/status-im/status-desktop/milestone/65",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/65/labels",
    "id": 9039509,
    "node_id": "MI_kwDOD5KrTM4Aie6V",
    "number": 65,
    "title": "0.15",
    "description": "**1. Finish anything that wasn't completed in the previous 0.14 cycle**\r\n- And fix bugs as usual. We need to keep tech. debt at a roughly fixed level as we grow out functionality, can't let it accumulate! ;-)\r\n\r\n**2. Tokenisation of community ownership**\r\n- Work needed already evaluated in spike.  Community and 'Channel in a Community' URLs don't need to be signed if this will present problems. Patryk to work on this as a continuation of the spike already done.\r\n- See priority 4 below, as this also has some implications for the tokenisation of community work.\r\n\r\n**3. Profile showcase backend**\r\n- The long-delayed profile showcase backend!  We have the UI on the desktop ready to go for this feature, and Mobile is going to need the backend for this feature as well, so let's try to get it done in 0.14 [#11081](https://github.com/status-im/status-desktop/issues/11081)\r\n\r\n**4. Community tokens visible in wallet when received by user who is not a member of that community**\r\n- Solution obvs. needs to be fully decenteralised and permissionless\r\n- Perhaps whenever a community token is A) sent from a Status Wallet to another user or B) airdropped by a community or C) retailed by a community, a M2M (invisible to the user) Waku message should be sent to the recipient's *ethereum address*?\r\n- This message could either: A) contain the metadata for the token B) tell the user that they have received token, and to check the metadata in either another Waku channel where Control Nodes periodically post Metadata OR check the metadata embedded in the token contract (embedding metadata in the token contract might be a better idea?).  \r\n- The token metadata stored in the token contract is signed by the Community's private key to ensure authenticity.  When the community's private key changes due to ownership of a community being transferred or due to the control node being moved, a transaction must be made to update this metadata so it is signed by the community's new private key.\r\n- See here for how a Waku message can be sent to and Ethereum address https://rfc.vac.dev/spec/20/\r\n\r\n**5. Discord history import into a single channel in an existing community**\r\n- Pay off any Discord history import service tech. debt first\r\n- Then build the import into a single channel functionality, designs for this are already complete\r\n\r\n**6. UI for community owner to enable manual Waku static shading for their community**\r\n- This will be off by default in 0.15\r\n- This UI is only for the Owner of a community (not TokenMasters or Admins)\r\n- Figma designs are here https://www.figma.com/file/qHfFm7C9LwtXpfdbxssCK3/Kuba%E2%8E%9CDesktop---Communities?type=design&node-id=37242%3A222352&mode=design&t=rw6q6NQYmiz3rSn2-1\r\n\r\n**7. Community chat functionality enhancements**\r\n- Ability to mark a token gated channel as 'hidden', only visible to community members with the requisite tokens\r\n\r\n\r\n\r\n\r\n\r\n**--- Wallet Team ---**\r\n\r\n1. Finish anything that wasn't completed in the previous 0.14 cycle\r\n- And fix bugs as usual. We need to keep tech. debt at a roughly fixed level as we grow out functionality, can't let it accumulate! ;-)\r\n\r\n2. Sending Community created tokens to Status users who are not members of that community\r\n- See priority 4) in the messaging priorities list above.\r\n\r\n3. Send NFT functionality\r\n\r\n4. Updated wallet settings with keypair syncing\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 29,
    "closed_issues": 237,
    "state": "open",
    "created_at": "2023-02-13T19:08:52Z",
    "updated_at": "2023-10-30T12:47:01Z",
    "due_on": "2023-11-09T08:00:00Z",
    "closed_at": null
  },
  "comments": 0,
  "created_at": "2023-02-04T18:39:31Z",
  "updated_at": "2023-10-30T08:27:47Z",
  "closed_at": "2023-10-29T08:42:43Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\n\nSend Modal has one of the most complex user workflows in the wallet module; hence the implementation is also complex and has grown organically. Even though it has already substantially improved, with this epic, we look into how to improve it even more\n\n### Prototyping\n\nInconveniences\n\n- Working with Send Modal requires starting the APP, waiting for tokens update, and having multiple accounts with different values to cover many cases, which is slow and error-prone.\n\nImprovement brainstorming\n\n- Add an abstraction layer based on the current MVC implementation and integrate it with Story-Book\n  - This might require extensive work but can be done in steps using multiple facades and be finalized later on after MVP\n  - I should improve a lot by refactoring and covering multiple use cases without depending on network requests and manual setup\n\n### Layouting\n\nInconsistencies\n\n- The main content is resized by [StackLayout](https://github.com/status-im/status-desktop/blob/46d4193bbdd4a993088a8bc91ebdc47944fe9105/ui/imports/shared/popups/SendModal.qml#L170) but can't see any usage for it (switching between multiple items)\n- Some items have hardcoded sizes and don't adapt, e.g. [TokenListView](https://github.com/status-im/status-desktop/blob/46d4193bbdd4a993088a8bc91ebdc47944fe9105/ui/imports/shared/views/TokenListView.qml#L41)\n- Layout hints follow the parent's size, e.g. [group1 ColumnLayout](https://github.com/status-im/status-desktop/blob/46d4193bbdd4a993088a8bc91ebdc47944fe9105/ui/imports/shared/popups/SendModal.qml#L177)\n  - Defeats the purpose of size hints\n\nSome first steps were started [with #9414 fix](https://github.com/status-im/status-desktop/pull/9414)\n\nImprovement brainstorming\n\n- [x] - Switch the main layout simple layout (ColumnLayout?) that takes size hints from the content (impicitWidth/implicitHeight)\n- [x] - The underlying dialog implementation will adjust the size based on the layout's hints.\n- [x]   - The dialog also has some size limitations, therefore have the main layout fill parent and follow these limits.\n- [x]   - All items inside should offer size hints (preferred, min or max) and adapt to (layouts should work ok here)\n- [x] - Scrollable content should be scrollable if the content doesn't fit the requirements.\n- [x]   - e.g. `interactive: contentWidth > width`\n- [x] - Follow contributing guidelines [Positioning and sizing(https://github.com/status-im/status-desktop/blob/46d4193bbdd4a993088a8bc91ebdc47944fe9105/ui/StatusQ/src/contributing.md#L44) and [Layouts](https://github.com/status-im/status-desktop/blob/46d4193bbdd4a993088a8bc91ebdc47944fe9105/ui/StatusQ/src/contributing.md#L85\n\n\nSome more improvements that can also be moved out of this task and created as a separate task  are defined below , most of them involve moving logic from the UI to the BE (nim)\n\n- [x] 1. When sending request the last request should be executed only #12243\n- [x] 2. Cards should not be greyed out when loading is on going #12243\n- [x] 3. Moving disabled and preferred chains ui state to him and make it more reliable?\n- [x] 4. Calculating entered address and giving it colours can be done on him side\n- [x] 5. The sendModal doesnt resize for simple networks #12243\n- [x] Let SendModal be completely demoed in storybook #12244 \n\n- [x] #12140\n- [ ] [Bug for 2nd notification for tx not shown](https://github.com/status-im/status-desktop/issues/12242)\n- [x] #12206\n- [x] #12222\n- [x] #12149\n- [x] Remove all chat send modal code, not needed and its annoying\n- [ ] [can we add refresh buttons for assets/transactions?](https://github.com/status-im/status-desktop/issues/12240)",
  "closed_by": {
    "login": "alaibe",
    "id": 491074,
    "node_id": "MDQ6VXNlcjQ5MTA3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/491074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alaibe",
    "html_url": "https://github.com/alaibe",
    "followers_url": "https://api.github.com/users/alaibe/followers",
    "following_url": "https://api.github.com/users/alaibe/following{/other_user}",
    "gists_url": "https://api.github.com/users/alaibe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alaibe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alaibe/subscriptions",
    "organizations_url": "https://api.github.com/users/alaibe/orgs",
    "repos_url": "https://api.github.com/users/alaibe/repos",
    "events_url": "https://api.github.com/users/alaibe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alaibe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/9443/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/9443/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

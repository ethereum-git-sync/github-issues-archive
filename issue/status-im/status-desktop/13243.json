{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/13243",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/13243/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/13243/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/13243/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/13243",
  "id": 2088531036,
  "node_id": "I_kwDOD5KrTM58fHRc",
  "number": 13243,
  "title": "Keycard: keycard module is busy error",
  "user": {
    "login": "glitchminer",
    "id": 50769329,
    "node_id": "MDQ6VXNlcjUwNzY5MzI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/50769329?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/glitchminer",
    "html_url": "https://github.com/glitchminer",
    "followers_url": "https://api.github.com/users/glitchminer/followers",
    "following_url": "https://api.github.com/users/glitchminer/following{/other_user}",
    "gists_url": "https://api.github.com/users/glitchminer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/glitchminer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/glitchminer/subscriptions",
    "organizations_url": "https://api.github.com/users/glitchminer/orgs",
    "repos_url": "https://api.github.com/users/glitchminer/repos",
    "events_url": "https://api.github.com/users/glitchminer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/glitchminer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "saledjenic",
    "id": 86303051,
    "node_id": "MDQ6VXNlcjg2MzAzMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/saledjenic",
    "html_url": "https://github.com/saledjenic",
    "followers_url": "https://api.github.com/users/saledjenic/followers",
    "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
    "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
    "organizations_url": "https://api.github.com/users/saledjenic/orgs",
    "repos_url": "https://api.github.com/users/saledjenic/repos",
    "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/saledjenic/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/61",
    "html_url": "https://github.com/status-im/status-desktop/milestone/61",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/61/labels",
    "id": 8739485,
    "node_id": "MI_kwDOD5KrTM4AhVqd",
    "number": 61,
    "title": "0.16",
    "description": "## Messaging & Communities team\r\n\r\n**1.  Fix bug and stabilise Communities and Messaging functionality** \r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase**\r\n\r\n&nbsp;\r\n\r\n## Wallet Team\r\n\r\n**1. Complete support for Community minted assets**\r\n\r\n**2. Complete token visibility management screens**\r\n\r\n**3. Continue working on WalletConnect support**\r\n\r\n**4. Minor updates to Asset screens**\r\n\r\n**5. Continue fixing bugs, making optimisations and keeping tech debt low**\r\n\r\n\r\n\r\n\r\n",
    "creator": {
      "login": "iurimatias",
      "id": 176720,
      "node_id": "MDQ6VXNlcjE3NjcyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/176720?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iurimatias",
      "html_url": "https://github.com/iurimatias",
      "followers_url": "https://api.github.com/users/iurimatias/followers",
      "following_url": "https://api.github.com/users/iurimatias/following{/other_user}",
      "gists_url": "https://api.github.com/users/iurimatias/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iurimatias/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iurimatias/subscriptions",
      "organizations_url": "https://api.github.com/users/iurimatias/orgs",
      "repos_url": "https://api.github.com/users/iurimatias/repos",
      "events_url": "https://api.github.com/users/iurimatias/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iurimatias/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 107,
    "closed_issues": 227,
    "state": "open",
    "created_at": "2022-12-09T15:06:43Z",
    "updated_at": "2024-01-22T12:32:54Z",
    "due_on": "2024-01-31T08:00:00Z",
    "closed_at": null
  },
  "comments": 1,
  "created_at": "2024-01-18T15:29:55Z",
  "updated_at": "2024-01-22T12:14:24Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\n\r\n\"The keycard module is still busy error\" is being displayed unexpectedly and could not be resolved without restarting.\r\n\r\n## Steps to reproduce\r\n\r\nExact steps are unknown. It happened somewhere between starting and restarting a keycard flow from the settings screen and inserting/removing card\r\n\r\n#### Actual behavior\r\n\r\nApp appears stuck in a loop, user is blocked from continuing\r\n\r\n![image](https://github.com/status-im/status-desktop/assets/50769329/279f9d0c-690f-49aa-be39-2e60b9f84e21)\r\n\r\n```\r\nINF 2024-01-18 14:51:22.441+00:00 keycard shared module is still running     topics=\"profile-section-profile-module\" tid=4898425 file=module.nim:101\r\nWarning: qrc:/app/AppLayouts/Profile/ProfileLayout.qml:432: ReferenceError: Theme is not defined (qrc:/app/AppLayouts/Profile/ProfileLayout.qml:432, )\r\nDBG 2024-01-18 14:51:22.444+00:00 [threadpool task thread] initiating task   topics=\"task-threadpool\" tid=4898446 file=threadpool.nim:54 messageType=TimerTaskArg:ObjectType threadid=4898446 task=\"{\\\"$type\\\":\\\"TimerTaskArg:ObjectType\\\",\\\"timeoutInMilliseconds\\\":1000,\\\"reason\\\":\\\"WaitForKeycardAvailability\\\",\\\"vptr\\\":105553141809088,\\\"slot\\\":\\\"onTimeout\\\",\\\"tptr\\\":4335445304}\"\r\nDBG 2024-01-18 14:51:23.445+00:00 [threadpool task thread] initiating task   topics=\"task-threadpool\" tid=4898452 file=threadpool.nim:54 messageType=TimerTaskArg:ObjectType threadid=4898452 task=\"{\\\"$type\\\":\\\"TimerTaskArg:ObjectType\\\",\\\"timeoutInMilliseconds\\\":1000,\\\"reason\\\":\\\"WaitForKeycardAvailability\\\",\\\"vptr\\\":105553141809088,\\\"slot\\\":\\\"onTimeout\\\",\\\"tptr\\\":4335445304}\"\r\nDBG 2024-01-18 14:51:24.451+00:00 [threadpool task thread] initiating task   topics=\"task-threadpool\" tid=4898449 file=threadpool.nim:54 messageType=TimerTaskArg:ObjectType threadid=4898449 task=\"{\\\"$type\\\":\\\"TimerTaskArg:ObjectType\\\",\\\"timeoutInMilliseconds\\\":1000,\\\"reason\\\":\\\"WaitForKeycardAvailability\\\",\\\"vptr\\\":105553141809088,\\\"slot\\\":\\\"onTimeout\\\",\\\"tptr\\\":4335445304}\"\r\nDBG 2024-01-18 14:51:24.903+00:00 NewBE_callPrivateRPC                       topics=\"rpc\" tid=4898425 file=core.nim:27 rpc_method=wakuext_speedupArchivesImport\r\nDBG 2024-01-18 14:51:25.456+00:00 [threadpool task thread] initiating task   topics=\"task-threadpool\" tid=4898453 file=threadpool.nim:54 messageType=TimerTaskArg:ObjectType threadid=4898453 task=\"{\\\"$type\\\":\\\"TimerTaskArg:ObjectType\\\",\\\"timeoutInMilliseconds\\\":1000,\\\"reason\\\":\\\"WaitForKeycardAvailability\\\",\\\"vptr\\\":105553141809088,\\\"slot\\\":\\\"onTimeout\\\",\\\"tptr\\\":4335445304}\"\r\n```\r\n\r\n### Additional Information\r\n\r\n- Status desktop version: Master (local) 2024-01-18\r\n- Operating System: Mac 14.2.1\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/13243/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/13243/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1903880696",
    "html_url": "https://github.com/status-im/status-desktop/issues/13243#issuecomment-1903880696",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/13243",
    "id": 1903880696,
    "node_id": "IC_kwDOD5KrTM5xeun4",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-22T12:14:23Z",
    "updated_at": "2024-01-22T12:14:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@glitchminer the keycard lib is a singleton instance that cannot run 2 keycard flows simultaneously, instead it runs one after another. To avoid potential issues we introduced that \"keycard module busy\" popup letting the user know that some work is still in progress since communication with a keycard is way slower than anything else. Also as another step of protection popup buttons are disabled when switching from one to another state.\r\n\r\nAgain I don't say that the user cannot block the keycard flows, but I cannot reproduce that scenario. Also having in mind handlings we did in the past in regards to that, I am more likely to think that it comes from some unexpected response from the keycard lib or some hardware-related things.",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1903880696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

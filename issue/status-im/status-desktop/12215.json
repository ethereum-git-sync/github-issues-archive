{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12215",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12215",
  "id": 1904831401,
  "node_id": "I_kwDOD5KrTM5xiWup",
  "number": 12215,
  "title": "When sending eth max value is not realistic",
  "user": {
    "login": "alaibe",
    "id": 491074,
    "node_id": "MDQ6VXNlcjQ5MTA3NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/491074?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alaibe",
    "html_url": "https://github.com/alaibe",
    "followers_url": "https://api.github.com/users/alaibe/followers",
    "following_url": "https://api.github.com/users/alaibe/following{/other_user}",
    "gists_url": "https://api.github.com/users/alaibe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alaibe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alaibe/subscriptions",
    "organizations_url": "https://api.github.com/users/alaibe/orgs",
    "repos_url": "https://api.github.com/users/alaibe/repos",
    "events_url": "https://api.github.com/users/alaibe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alaibe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2331339531,
      "node_id": "MDU6TGFiZWwyMzMxMzM5NTMx",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/wallet-team",
      "name": "wallet-team",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 3047427135,
      "node_id": "MDU6TGFiZWwzMDQ3NDI3MTM1",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/feature",
      "name": "feature",
      "color": "0E8A16",
      "default": false,
      "description": ""
    },
    {
      "id": 6005633131,
      "node_id": "LA_kwDOD5KrTM8AAAABZfawaw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:Desktop%20Wallet%20Transactions",
      "name": "E:Desktop Wallet Transactions",
      "color": "34F315",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/77",
    "html_url": "https://github.com/status-im/status-desktop/milestone/77",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/77/labels",
    "id": 9909318,
    "node_id": "MI_kwDOD5KrTM4AlzRG",
    "number": 77,
    "title": "0.15.5 - Stabilizing release",
    "description": "A point milestone where we focus 100% on bug fixing, stabilisation and finishing any unfinished items from 0.15  \r\n\r\nZero new messaging and community features.\r\n\r\n--- Wallet ---\r\n\r\n- Community Asset and NFT designs for Asset screens\r\n- Community token visibility\r\n- Minor updates to Asset screens",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 77,
    "closed_issues": 9,
    "state": "open",
    "created_at": "2023-09-11T16:40:59Z",
    "updated_at": "2023-10-03T06:43:25Z",
    "due_on": "2023-12-07T08:00:00Z",
    "closed_at": null
  },
  "comments": 3,
  "created_at": "2023-09-20T11:57:01Z",
  "updated_at": "2023-10-03T06:38:27Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "If I want send eth and click on max, there will be not enough eth for gas. Shall we in that case decrease the max value?\r\n\r\nNote that if u are multichain, this is even more complex as we need to decrease the value for each chain.\r\n\r\nProblem: at that stage router didn't run yet and we don't know what's the max value can be as it can change based on the routing\r\n\r\n\r\n@John-44 @benjthayer any idea here?",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12215/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1727583990",
    "html_url": "https://github.com/status-im/status-desktop/issues/12215#issuecomment-1727583990",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215",
    "id": 1727583990,
    "node_id": "IC_kwDOD5KrTM5m-Nb2",
    "user": {
      "login": "micieslak",
      "id": 20650004,
      "node_id": "MDQ6VXNlcjIwNjUwMDA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20650004?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/micieslak",
      "html_url": "https://github.com/micieslak",
      "followers_url": "https://api.github.com/users/micieslak/followers",
      "following_url": "https://api.github.com/users/micieslak/following{/other_user}",
      "gists_url": "https://api.github.com/users/micieslak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/micieslak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/micieslak/subscriptions",
      "organizations_url": "https://api.github.com/users/micieslak/orgs",
      "repos_url": "https://api.github.com/users/micieslak/repos",
      "events_url": "https://api.github.com/users/micieslak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/micieslak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-20T11:59:41Z",
    "updated_at": "2023-09-20T11:59:41Z",
    "author_association": "MEMBER",
    "body": "The related problem is defined here: https://github.com/status-im/status-desktop/issues/12146",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1727583990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1729465639",
    "html_url": "https://github.com/status-im/status-desktop/issues/12215#issuecomment-1729465639",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215",
    "id": 1729465639,
    "node_id": "IC_kwDOD5KrTM5nFY0n",
    "user": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-21T12:25:55Z",
    "updated_at": "2023-09-21T12:25:55Z",
    "author_association": "NONE",
    "body": "@alaibe @micieslak I remember that somewhere in the designs or in a github issue (but I can't remember where, might be in and old design or old issue) it specifies that in the case of sending ETH, if a user clicks Max it doesn't actually populate the send field with Max, it populates the Send field with \"Max - X amount\".\r\n\r\nI've had a hunt through both figmas and old issues trying to find the description of how this was supposed to work.  I can't find it, but I remember the idea so I'll rewrite here.\r\n\r\nThe logic below applies *per chain* (not per send transaction) so if a user is (for example) sending ETH to a recipient in a compound transaction on both Optimism and Mainnet, then this logic would apply to the user's balances for that account on Optimism and Mainnet.  e.g if the user has 1.5 ETH on Mainnet then 0.1 ETH would be left on Mainnet and if the user had 0.1 ETH on Optimism then 0.01 ETH would be left on Optimism.\r\n\r\n- If user has > 1 ETH, then when user presses Max populate send field with \"Max minus 0.1 ETH\"\r\n- If user has < 1 ETH but > 0.5 ETH, then when user presses Max populate send field with \"Max minus 0.05 ETH\"\r\n- If user has < 0.5 ETH but > 0.1 ETH, then when user presses Max populate send field with \"Max minus 0.025 ETH\"\r\n- If user has < 0.1 ETH but > 0.025 ETH, then when user presses Max populate send field with \"Max minus 0.01 ETH\"\r\n- If user has < 0.025 ETH but > 0.005 ETH, then when user presses Max populate send field with \"Max minus 0.002 ETH\"\r\n- If a user has < 0.005 ETH then the 'Max' button should be grayed out and inactive.\r\n\r\n@alaibe @micieslak does that make sense?  Might be worth discussing on a quick call.  CC'ing @benjthayer ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1729465639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1732511784",
    "html_url": "https://github.com/status-im/status-desktop/issues/12215#issuecomment-1732511784",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12215",
    "id": 1732511784,
    "node_id": "IC_kwDOD5KrTM5nRAgo",
    "user": {
      "login": "alaibe",
      "id": 491074,
      "node_id": "MDQ6VXNlcjQ5MTA3NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/491074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alaibe",
      "html_url": "https://github.com/alaibe",
      "followers_url": "https://api.github.com/users/alaibe/followers",
      "following_url": "https://api.github.com/users/alaibe/following{/other_user}",
      "gists_url": "https://api.github.com/users/alaibe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alaibe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alaibe/subscriptions",
      "organizations_url": "https://api.github.com/users/alaibe/orgs",
      "repos_url": "https://api.github.com/users/alaibe/repos",
      "events_url": "https://api.github.com/users/alaibe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alaibe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-24T07:43:17Z",
    "updated_at": "2023-09-24T07:43:17Z",
    "author_association": "COLLABORATOR",
    "body": "@John-44 Alright, i missed or totally forgot that point. I get the general idea and it makes sense reduce Max - X amount\r\nNow, something to consider, the user may click max before we know which chain is going to be used.\r\n\r\ne.g: I have 5 eth, but this 5 eth are dispatch as followed:\r\n3 eth on mainnet\r\n1 eth on optimism\r\n1 eth on arbitrum\r\nThat would mean according to your logic that max would fill in: 3-0.1 + 1-0.01 +1-0.01 is that right?\r\n\r\nNow what I don't understand is the second part of the logic:\r\nif user has > but < ....\r\ngas is not dependent of the amount of eth that u send?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1732511784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/12821",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/12821/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/12821/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/12821/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/12821",
  "id": 2005587460,
  "node_id": "I_kwDOD5KrTM53itYE",
  "number": 12821,
  "title": "Retrieve images from Status-go to generate thumbnail images in reply",
  "user": {
    "login": "kounkou",
    "id": 2589171,
    "node_id": "MDQ6VXNlcjI1ODkxNzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kounkou",
    "html_url": "https://github.com/kounkou",
    "followers_url": "https://api.github.com/users/kounkou/followers",
    "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
    "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
    "organizations_url": "https://api.github.com/users/kounkou/orgs",
    "repos_url": "https://api.github.com/users/kounkou/repos",
    "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kounkou/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4548141040,
      "node_id": "LA_kwDOD5KrTM8AAAABDxcf8A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/messenger-team",
      "name": "messenger-team",
      "color": "232858",
      "default": false,
      "description": ""
    },
    {
      "id": 5954122732,
      "node_id": "LA_kwDOD5KrTM8AAAABYuSz7A",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/E:%20Desktop%20Chat%20Messages%20&%20Chat%20Features",
      "name": "E: Desktop Chat Messages & Chat Features",
      "color": "F2960B",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [
    {
      "login": "kounkou",
      "id": 2589171,
      "node_id": "MDQ6VXNlcjI1ODkxNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2589171?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kounkou",
      "html_url": "https://github.com/kounkou",
      "followers_url": "https://api.github.com/users/kounkou/followers",
      "following_url": "https://api.github.com/users/kounkou/following{/other_user}",
      "gists_url": "https://api.github.com/users/kounkou/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kounkou/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kounkou/subscriptions",
      "organizations_url": "https://api.github.com/users/kounkou/orgs",
      "repos_url": "https://api.github.com/users/kounkou/repos",
      "events_url": "https://api.github.com/users/kounkou/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kounkou/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/status-im/status-desktop/milestones/77",
    "html_url": "https://github.com/status-im/status-desktop/milestone/77",
    "labels_url": "https://api.github.com/repos/status-im/status-desktop/milestones/77/labels",
    "id": 9909318,
    "node_id": "MI_kwDOD5KrTM4AlzRG",
    "number": 77,
    "title": "0.15.5 - Stabilizing release",
    "description": "A point milestone where we focus the Messaging and Communities team 100% on bug fixing, stabilisation, reliability and finishing any unfinished items from 0.15  \r\n\r\n**1.  Fix bug and stabilise Communities and Messaging functionality**\r\n\r\n**2.  Reduce size of community description metadata**\r\n- better compressions, less duplication\r\n\r\n**3. Use data sync layer (or other mechanism) to improve community description reliability**\r\n- Every time a new user joins the community, the Control Node updates and signs the description.\r\n- Random back off to stop it being too chatty \r\n\r\n**4. Continue work on profile showcase **\r\n\r\n\r\n\r\n--- Wallet ---\r\n\r\n- Improved handling of community minted tokens: Community Asset and NFT designs for Asset screens\r\n- Token visibility management\r\n- Minor updates to Asset screens\r\n- Continue work on WalletConnect integration\r\n- Database re-encryption flows",
    "creator": {
      "login": "John-44",
      "id": 22846356,
      "node_id": "MDQ6VXNlcjIyODQ2MzU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/22846356?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/John-44",
      "html_url": "https://github.com/John-44",
      "followers_url": "https://api.github.com/users/John-44/followers",
      "following_url": "https://api.github.com/users/John-44/following{/other_user}",
      "gists_url": "https://api.github.com/users/John-44/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/John-44/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/John-44/subscriptions",
      "organizations_url": "https://api.github.com/users/John-44/orgs",
      "repos_url": "https://api.github.com/users/John-44/repos",
      "events_url": "https://api.github.com/users/John-44/events{/privacy}",
      "received_events_url": "https://api.github.com/users/John-44/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 130,
    "closed_issues": 57,
    "state": "open",
    "created_at": "2023-09-11T16:40:59Z",
    "updated_at": "2023-11-27T18:46:39Z",
    "due_on": "2023-12-07T08:00:00Z",
    "closed_at": null
  },
  "comments": 1,
  "created_at": "2023-11-22T05:11:06Z",
  "updated_at": "2023-11-27T18:26:59Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nFrom PR : https://github.com/status-im/status-desktop/pull/12806\r\nIssue   : #10986 \r\n \r\n> I think using only the messages received here might not generate a good map, because newMessagesLoaded only contains ~20 messages. In most cases, it should be ok, but if someone replied to an old message, then the album of messages wouldn't be part of the messages seq, so we'd also not find the images.\r\n\r\njrainville\r\n\r\nIn the code creates a map that solely relies on the received messages. The received message having a limit of ~20 messages, reply on an image for older messages, the code will not be able to obtain the images for that older message.\r\nA solution would be to have access to the DB from status-go to fetch the corresponding message images and populate the Qml properties accordingly.\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1- Find very old message with album images (more than 20 message earlier)\r\n2- Reply to the message with album images\r\n\r\n#### Expected behavior\r\n\r\n- The old message images are not rendered in the reply thumbnails\r\n\r\n#### Actual behavior\r\n\r\n- The old message images should be rendered in the reply thumbnails\r\n\r\n### Additional information\r\n\r\n- https://github.com/status-im/status-desktop/issues/10986\r\n- https://github.com/status-im/status-desktop/pull/12806",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/12821/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/12821/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1823158197",
    "html_url": "https://github.com/status-im/status-desktop/issues/12821#issuecomment-1823158197",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/12821",
    "id": 1823158197,
    "node_id": "IC_kwDOD5KrTM5sqy-1",
    "user": {
      "login": "jrainville",
      "id": 11926403,
      "node_id": "MDQ6VXNlcjExOTI2NDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/11926403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrainville",
      "html_url": "https://github.com/jrainville",
      "followers_url": "https://api.github.com/users/jrainville/followers",
      "following_url": "https://api.github.com/users/jrainville/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrainville/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrainville/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrainville/subscriptions",
      "organizations_url": "https://api.github.com/users/jrainville/orgs",
      "repos_url": "https://api.github.com/users/jrainville/repos",
      "events_url": "https://api.github.com/users/jrainville/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrainville/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-22T17:04:37Z",
    "updated_at": "2023-11-22T17:04:37Z",
    "author_association": "MEMBER",
    "body": "For whoever works on this in the future, I think the optimal solution would be to improve the Message object in status-go itself so that any time we get the Quoted message, it also returns the album of images as part of it.\r\n\r\nObviously, this would only be local when retrieving messages from the DB, as we do not want to pass the full album of images when sending the images on the network.\r\n\r\nSo with luck, only modifying the persistence layer by improving the query would be enough! :crossed_fingers: ",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/1823158197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/status-im/status-desktop/issues/4102",
  "repository_url": "https://api.github.com/repos/status-im/status-desktop",
  "labels_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102/labels{/name}",
  "comments_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102/comments",
  "events_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102/events",
  "html_url": "https://github.com/status-im/status-desktop/issues/4102",
  "id": 1051264616,
  "node_id": "I_kwDOD5KrTM4-qQZo",
  "number": 4102,
  "title": "Can't select emoji from the list",
  "user": {
    "login": "anastasiyaig",
    "id": 82375995,
    "node_id": "MDQ6VXNlcjgyMzc1OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anastasiyaig",
    "html_url": "https://github.com/anastasiyaig",
    "followers_url": "https://api.github.com/users/anastasiyaig/followers",
    "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
    "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
    "repos_url": "https://api.github.com/users/anastasiyaig/repos",
    "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2036563458,
      "node_id": "MDU6TGFiZWwyMDM2NTYzNDU4",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2347610790,
      "node_id": "MDU6TGFiZWwyMzQ3NjEwNzkw",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/Chat",
      "name": "Chat",
      "color": "9279e0",
      "default": false,
      "description": ""
    },
    {
      "id": 3205511249,
      "node_id": "MDU6TGFiZWwzMjA1NTExMjQ5",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/priority%202:%20medium",
      "name": "priority 2: medium",
      "color": "FBCA04",
      "default": false,
      "description": "an issue that is not severely affecting the overall app, it may interfere with some users users expe"
    },
    {
      "id": 3550880424,
      "node_id": "LA_kwDOD5KrTM7TpiKo",
      "url": "https://api.github.com/repos/status-im/status-desktop/labels/0.4.0",
      "name": "0.4.0",
      "color": "6941CC",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "0x-r4bbit",
      "id": 445106,
      "node_id": "MDQ6VXNlcjQ0NTEwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x-r4bbit",
      "html_url": "https://github.com/0x-r4bbit",
      "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
      "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
      "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
      "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
      "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-11-11T18:48:39Z",
  "updated_at": "2021-11-25T07:59:22Z",
  "closed_at": "2021-11-25T07:59:22Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Bug Report\r\n\r\n## Description\r\n\r\nCan't select emoji from the list\r\n\r\n## Steps to reproduce\r\n\r\n1. open 1x1 chat\r\n2. click emoji\r\n3. select any emoji from the list\r\n\r\n#### Expected behavior\r\n\r\nCan select a nice emoji and send it\r\n\r\n#### Actual behavior\r\n\r\n```\r\nDBG 2021-11-11 21:46:32.516+03:00 callPrivateRPC                             topics=\"rpc\" tid=550184 file=core.nim:20 rpc_method=eth_call\r\nqrc:/imports/shared/status/StatusEmojiPopup.qml:64: TypeError: Cannot call method 'unshift' of undefined\r\n```\r\n\r\n### Additional Information\r\n\r\n- Status desktop version: `master` commit `2d0c95feb3e3eca8895fde4425c9c861c49ca992`\r\n- Operating System: macOS Big Sur\r\n\r\n",
  "closed_by": {
    "login": "0x-r4bbit",
    "id": 445106,
    "node_id": "MDQ6VXNlcjQ0NTEwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445106?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x-r4bbit",
    "html_url": "https://github.com/0x-r4bbit",
    "followers_url": "https://api.github.com/users/0x-r4bbit/followers",
    "following_url": "https://api.github.com/users/0x-r4bbit/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x-r4bbit/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x-r4bbit/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x-r4bbit/subscriptions",
    "organizations_url": "https://api.github.com/users/0x-r4bbit/orgs",
    "repos_url": "https://api.github.com/users/0x-r4bbit/repos",
    "events_url": "https://api.github.com/users/0x-r4bbit/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x-r4bbit/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/4102/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/972133524",
    "html_url": "https://github.com/status-im/status-desktop/issues/4102#issuecomment-972133524",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102",
    "id": 972133524,
    "node_id": "IC_kwDOD5KrTM458ZSU",
    "user": {
      "login": "alexandraB99",
      "id": 31625338,
      "node_id": "MDQ6VXNlcjMxNjI1MzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/31625338?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexandraB99",
      "html_url": "https://github.com/alexandraB99",
      "followers_url": "https://api.github.com/users/alexandraB99/followers",
      "following_url": "https://api.github.com/users/alexandraB99/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexandraB99/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexandraB99/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexandraB99/subscriptions",
      "organizations_url": "https://api.github.com/users/alexandraB99/orgs",
      "repos_url": "https://api.github.com/users/alexandraB99/repos",
      "events_url": "https://api.github.com/users/alexandraB99/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexandraB99/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-17T22:11:43Z",
    "updated_at": "2021-11-17T22:11:43Z",
    "author_association": "COLLABORATOR",
    "body": "I looked a bit into this, the issue it seems it's caused by https://github.com/status-im/status-desktop/commit/f0b2ed6cca7075156ecbe39415bc2441f19478e9. All below properties that were arrays before:\r\n\r\n```\r\nproperty var recentEmojis: []\r\nproperty var hiddenCommunityWelcomeBanners: []\r\nproperty var hiddenCommunityBackUpBanners: []\r\nproperty var whitelistedUnfurlingSites: ({})\r\n```\r\n\r\nare currently undefined. @saledjenic any ideas?",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/972133524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/972673801",
    "html_url": "https://github.com/status-im/status-desktop/issues/4102#issuecomment-972673801",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102",
    "id": 972673801,
    "node_id": "IC_kwDOD5KrTM45-dMJ",
    "user": {
      "login": "saledjenic",
      "id": 86303051,
      "node_id": "MDQ6VXNlcjg2MzAzMDUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86303051?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/saledjenic",
      "html_url": "https://github.com/saledjenic",
      "followers_url": "https://api.github.com/users/saledjenic/followers",
      "following_url": "https://api.github.com/users/saledjenic/following{/other_user}",
      "gists_url": "https://api.github.com/users/saledjenic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/saledjenic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/saledjenic/subscriptions",
      "organizations_url": "https://api.github.com/users/saledjenic/orgs",
      "repos_url": "https://api.github.com/users/saledjenic/repos",
      "events_url": "https://api.github.com/users/saledjenic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/saledjenic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-18T09:12:43Z",
    "updated_at": "2021-11-18T09:13:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I looked a bit into this, the issue it seems it's caused by [f0b2ed6](https://github.com/status-im/status-desktop/commit/f0b2ed6cca7075156ecbe39415bc2441f19478e9). All below properties that were arrays before:\r\n> \r\n> ```\r\n> property var recentEmojis: []\r\n> property var hiddenCommunityWelcomeBanners: []\r\n> property var hiddenCommunityBackUpBanners: []\r\n> property var whitelistedUnfurlingSites: ({})\r\n> ```\r\n> \r\n> are currently undefined. @saledjenic any ideas?\r\n\r\n@alexandraB99 the thing is most likely in default value which is set on the app start in case values for mentioned properties are not set before. \r\n\r\nSince `nimqml` doesn't have support for nim type QVariant, doesn't have appropriate constructors which will deal with array and object type (even QVariant on the Qt side knows that), we cannot set on the Nim side anything but default types for our properties plus QObject type.\r\n\r\nSo there are 2 solutions here:\r\n- to add appropriate constructors on the `nimqml` side and corresponding parts to `dotherside` and then use the on the nim side in the standard way you expected, this would be perfect since this will be a proper exposing of Qt type to the Nim\r\n- to pass empty string and deal with it on the qml side, that means above mentioned props in the `LocalAccountSensitiveSettings` class will have in case of array \"[]\" and in case of object \"{}\" default values and on the qml side you must pars them and use further",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/972673801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/977843856",
    "html_url": "https://github.com/status-im/status-desktop/issues/4102#issuecomment-977843856",
    "issue_url": "https://api.github.com/repos/status-im/status-desktop/issues/4102",
    "id": 977843856,
    "node_id": "IC_kwDOD5KrTM46SLaQ",
    "user": {
      "login": "anastasiyaig",
      "id": 82375995,
      "node_id": "MDQ6VXNlcjgyMzc1OTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anastasiyaig",
      "html_url": "https://github.com/anastasiyaig",
      "followers_url": "https://api.github.com/users/anastasiyaig/followers",
      "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
      "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
      "repos_url": "https://api.github.com/users/anastasiyaig/repos",
      "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-24T12:44:20Z",
    "updated_at": "2021-11-24T12:44:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "i can reproduce it in latest 0.4.0 release:\r\n\r\n`qrc:/imports/shared/status/StatusEmojiPopup.qml:64: TypeError: Property 'unshift' of object  is not a function`",
    "reactions": {
      "url": "https://api.github.com/repos/status-im/status-desktop/issues/comments/977843856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

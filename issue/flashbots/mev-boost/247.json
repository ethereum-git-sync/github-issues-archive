{
  "url": "https://api.github.com/repos/flashbots/mev-boost/issues/247",
  "repository_url": "https://api.github.com/repos/flashbots/mev-boost",
  "labels_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247/labels{/name}",
  "comments_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247/comments",
  "events_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247/events",
  "html_url": "https://github.com/flashbots/mev-boost/issues/247",
  "id": 1338436769,
  "node_id": "I_kwDOGZSKs85Pxuyh",
  "number": 247,
  "title": "Incorrect parsing of attester slashing indices in relay",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-08-15T01:53:18Z",
  "updated_at": "2022-08-15T18:16:25Z",
  "closed_at": "2022-08-15T18:16:25Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "This is more of an issue with the flashbots relay than `mev-boost` itself, but in lieu of another repo to open an issue on I'm opening it here.\r\n\r\nOn the Lighthouse Discord we had a user report a block proposal failure using `mev-boost`:\r\n\r\n> Aug 11 22:54:36.902 ERRO Error whilst producing a blinded block, cannot fallback because the block was signed, error: \"All endpoints failed http://localhost:5952/ => RequestFailed(Irrecoverable(\\\"Error from beacon node when publishing block: ServerMessage(ErrorMessage { code: 500, message: \\\\\\\"INTERNAL_SERVER_ERROR: Blind block proposal failed: Builder(ServerMessage(ErrorMessage { code: 400, message: \\\\\\\\\\\\\\\"json: cannot unmarshal string into Go struct field IndexedAttestation.message.body.attester_slashings.attestation_1.attesting_indices of type uint64\\\\\\\\\\\\\\\", stacktraces: [] }))\\\\\\\", stacktraces: [] })\\\"))\", service: block\r\n\r\nSource: https://discord.com/channels/605577013327167508/605577013331361793/1007508047586926682.\r\n\r\nI believe this indicates that the relay is trying to deserialize the `attesting_indices` of the attester slashing as a JSON `number` rather than a bignum `string` (the canonical representation that Lighthouse uses). Beacon nodes will always encode validator indices as quoted bignums, see e.g. https://ethereum.github.io/beacon-APIs/#/Beacon/getPoolAttesterSlashings.\r\n\r\nThis means that all blocks containing attester slashings will fail when the beacon node attempts to publish them, a rather significant liveness failure. Thankfully I think it should be easy to fix, the relay should fix its parsing of `attesting_indices` for the [`POST /eth/v1/builder/blinded_blocks` endpoint](https://ethereum.github.io/builder-specs/#/Builder/submitBlindedBlock).",
  "closed_by": {
    "login": "Ruteri",
    "id": 11313015,
    "node_id": "MDQ6VXNlcjExMzEzMDE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/11313015?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Ruteri",
    "html_url": "https://github.com/Ruteri",
    "followers_url": "https://api.github.com/users/Ruteri/followers",
    "following_url": "https://api.github.com/users/Ruteri/following{/other_user}",
    "gists_url": "https://api.github.com/users/Ruteri/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Ruteri/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Ruteri/subscriptions",
    "organizations_url": "https://api.github.com/users/Ruteri/orgs",
    "repos_url": "https://api.github.com/users/Ruteri/repos",
    "events_url": "https://api.github.com/users/Ruteri/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Ruteri/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/247/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214556754",
    "html_url": "https://github.com/flashbots/mev-boost/issues/247#issuecomment-1214556754",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247",
    "id": 1214556754,
    "node_id": "IC_kwDOGZSKs85IZKpS",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-15T02:49:56Z",
    "updated_at": "2022-08-15T02:49:56Z",
    "author_association": "NONE",
    "body": "Apologies, this is a duplicate of https://github.com/flashbots/go-boost-utils/issues/18 and seems to be fixed in the most recent versions of `mev-boost` and the relay.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214556754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214558547",
    "html_url": "https://github.com/flashbots/mev-boost/issues/247#issuecomment-1214558547",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247",
    "id": 1214558547,
    "node_id": "IC_kwDOGZSKs85IZLFT",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-15T02:54:34Z",
    "updated_at": "2022-08-15T02:54:34Z",
    "author_association": "NONE",
    "body": "The user claimed to be running https://github.com/flashbots/mev-boost/commit/e83a51b0970461c48b348d5dab3334115db044b0, which would seem to include the fix? My Go-fu isn't strong enough to determine whether we should expect the fix to already be included in that commit. Or maybe it is the relay that's out of date?",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214558547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214728251",
    "html_url": "https://github.com/flashbots/mev-boost/issues/247#issuecomment-1214728251",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247",
    "id": 1214728251,
    "node_id": "IC_kwDOGZSKs85IZ0g7",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-15T08:01:28Z",
    "updated_at": "2022-08-15T08:01:28Z",
    "author_association": "COLLABORATOR",
    "body": "Reopened until confirmed",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214728251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214871734",
    "html_url": "https://github.com/flashbots/mev-boost/issues/247#issuecomment-1214871734",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/247",
    "id": 1214871734,
    "node_id": "IC_kwDOGZSKs85IaXi2",
    "user": {
      "login": "Ruteri",
      "id": 11313015,
      "node_id": "MDQ6VXNlcjExMzEzMDE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11313015?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ruteri",
      "html_url": "https://github.com/Ruteri",
      "followers_url": "https://api.github.com/users/Ruteri/followers",
      "following_url": "https://api.github.com/users/Ruteri/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ruteri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ruteri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ruteri/subscriptions",
      "organizations_url": "https://api.github.com/users/Ruteri/orgs",
      "repos_url": "https://api.github.com/users/Ruteri/repos",
      "events_url": "https://api.github.com/users/Ruteri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ruteri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-15T10:37:13Z",
    "updated_at": "2022-08-15T11:22:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "~Confirmed with the user that the version of `mev-boost` ran did not contain the fixes. Closing.~\r\nSeems that the dependency was not updated!",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1214871734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/flashbots/mev-boost/issues/330",
  "repository_url": "https://api.github.com/repos/flashbots/mev-boost",
  "labels_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330/labels{/name}",
  "comments_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330/comments",
  "events_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330/events",
  "html_url": "https://github.com/flashbots/mev-boost/issues/330",
  "id": 1377132357,
  "node_id": "I_kwDOGZSKs85SFV9F",
  "number": 330,
  "title": "Requests to other relays are canceled as soon as one relay returns",
  "user": {
    "login": "kwood",
    "id": 804271,
    "node_id": "MDQ6VXNlcjgwNDI3MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/804271?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kwood",
    "html_url": "https://github.com/kwood",
    "followers_url": "https://api.github.com/users/kwood/followers",
    "following_url": "https://api.github.com/users/kwood/following{/other_user}",
    "gists_url": "https://api.github.com/users/kwood/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kwood/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kwood/subscriptions",
    "organizations_url": "https://api.github.com/users/kwood/orgs",
    "repos_url": "https://api.github.com/users/kwood/repos",
    "events_url": "https://api.github.com/users/kwood/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kwood/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-09-18T17:55:58Z",
  "updated_at": "2022-09-20T02:18:57Z",
  "closed_at": "2022-09-20T02:18:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "After proposing a block today, I saw the following messages:\r\n```\r\nlevel=info msg=\"best bid\" blockHash=<REDACTED> blockNumber=<REDACTED> method=getHeader module=service parentHash=<REDACTED> pubkey=<REDACTED> relays=\"https://<REDACTED>@bloxroute.max-profit.blxrbdn.com\" slot=<REDACTED>  txRoot=<REDACTED> value=<REDACTED> \r\nlevel=info msg=\"http: GET /eth/v1/builder/header/<REDACTED> /<REDACTED>/<REDACTED> 200\" duration=0.180380465 method=GET module=service path=/eth/v1/builder/header/<REDACTED> /<REDACTED>/<REDACTED> status=200\r\nlevel=info msg=\"received payload from relay\" blockHash=<REDACTED> method=getPayload module=service url=\"https://bloxroute.max-profit.blxrbdn.com/eth/v1/builder/blinded_blocks\"\r\nlevel=error msg=\"error making request to relay\" blockHash=<REDACTED> error=\"Post \\\"https://boost-relay.flashbots.net/eth/v1/builder/blinded_blocks\\\": context canceled\" method=getPayload module=service url=\"https://boost-relay.flashbots.net/eth/v1/builder/blinded_blocks\"\r\nlevel=info msg=\"http: POST /eth/v1/builder/blinded_blocks 200\" duration=0.185630197 method=POST module=service path=/eth/v1/builder/blinded_blocks status=200\r\n```\r\n\r\nNotably, the call to the flashbots relay was canceled, which would have returned a block with a larger reward than the bloxroute relay did.\r\n\r\nGlancing at the code, it seems that the requests to the rest of the relays might be cancelled upon the first relay returning:\r\nhttps://github.com/flashbots/mev-boost/blob/97207c6118778725f1703226f774e91e5395909d/server/service.go#L459",
  "closed_by": {
    "login": "kwood",
    "id": 804271,
    "node_id": "MDQ6VXNlcjgwNDI3MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/804271?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kwood",
    "html_url": "https://github.com/kwood",
    "followers_url": "https://api.github.com/users/kwood/followers",
    "following_url": "https://api.github.com/users/kwood/following{/other_user}",
    "gists_url": "https://api.github.com/users/kwood/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kwood/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kwood/subscriptions",
    "organizations_url": "https://api.github.com/users/kwood/orgs",
    "repos_url": "https://api.github.com/users/kwood/repos",
    "events_url": "https://api.github.com/users/kwood/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kwood/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/330/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1250927779",
    "html_url": "https://github.com/flashbots/mev-boost/issues/330#issuecomment-1250927779",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330",
    "id": 1250927779,
    "node_id": "IC_kwDOGZSKs85Kj6Sj",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T12:03:17Z",
    "updated_at": "2022-09-19T12:03:52Z",
    "author_association": "COLLABORATOR",
    "body": "At the getPayload (`POST /eth/v1/builder/blinded_blocks`) stage a relay cannot return a block with a higher reward, because the proposer already sends the signed block header for which it wants to receive the payload.\r\n\r\nmev-boost sends the payload to all the relays concurrently, and when it receives a payload, it cancels the other requests. That's what you see in the logs provided.\r\n\r\nA different discussion could be about whether mev-boost should send the payload to all the relays. We originally added this for redundancy (as multiple relays might have produced the same block), but could be worth revisiting.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1250927779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1251071577",
    "html_url": "https://github.com/flashbots/mev-boost/issues/330#issuecomment-1251071577",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330",
    "id": 1251071577,
    "node_id": "IC_kwDOGZSKs85KkdZZ",
    "user": {
      "login": "schonex",
      "id": 93842032,
      "node_id": "U_kgDOBZfqcA",
      "avatar_url": "https://avatars.githubusercontent.com/u/93842032?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schonex",
      "html_url": "https://github.com/schonex",
      "followers_url": "https://api.github.com/users/schonex/followers",
      "following_url": "https://api.github.com/users/schonex/following{/other_user}",
      "gists_url": "https://api.github.com/users/schonex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schonex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schonex/subscriptions",
      "organizations_url": "https://api.github.com/users/schonex/orgs",
      "repos_url": "https://api.github.com/users/schonex/repos",
      "events_url": "https://api.github.com/users/schonex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schonex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T14:07:03Z",
    "updated_at": "2022-09-19T14:07:03Z",
    "author_association": "NONE",
    "body": "even if not revisiting, should this really be an 'error' if its by design? \r\n\r\nalso why do all relays need to be send the payload if a best bidder has already been chosen? ",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1251071577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1251083377",
    "html_url": "https://github.com/flashbots/mev-boost/issues/330#issuecomment-1251083377",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330",
    "id": 1251083377,
    "node_id": "IC_kwDOGZSKs85KkgRx",
    "user": {
      "login": "kwood",
      "id": 804271,
      "node_id": "MDQ6VXNlcjgwNDI3MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/804271?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kwood",
      "html_url": "https://github.com/kwood",
      "followers_url": "https://api.github.com/users/kwood/followers",
      "following_url": "https://api.github.com/users/kwood/following{/other_user}",
      "gists_url": "https://api.github.com/users/kwood/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kwood/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kwood/subscriptions",
      "organizations_url": "https://api.github.com/users/kwood/orgs",
      "repos_url": "https://api.github.com/users/kwood/repos",
      "events_url": "https://api.github.com/users/kwood/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kwood/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T14:14:44Z",
    "updated_at": "2022-09-19T14:14:44Z",
    "author_association": "NONE",
    "body": "Okay then, seems to be my misunderstanding.\n\nI did check the slot on the flashbots relay, and there did seem to be a better block available in time, but hard to know what actually got delivered at the time.\n\nAgree that if this is expected to happen every proposal with more than one relay configured, then the logging should be adjusted so that this isn't an error.\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1251083377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1251090300",
    "html_url": "https://github.com/flashbots/mev-boost/issues/330#issuecomment-1251090300",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost/issues/330",
    "id": 1251090300,
    "node_id": "IC_kwDOGZSKs85Kkh98",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T14:19:56Z",
    "updated_at": "2022-09-19T14:19:56Z",
    "author_association": "COLLABORATOR",
    "body": "mev-boost asks all the relays for bids at the same time, and uses the best it receives. might be a builder submitted a better bid after your proposer asked for it, which is why you'd see it when checking manually after the fact.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost/issues/comments/1251090300/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

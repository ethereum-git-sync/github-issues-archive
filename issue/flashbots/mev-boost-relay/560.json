{
  "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560",
  "repository_url": "https://api.github.com/repos/flashbots/mev-boost-relay",
  "labels_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560/labels{/name}",
  "comments_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560/comments",
  "events_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560/events",
  "html_url": "https://github.com/flashbots/mev-boost-relay/issues/560",
  "id": 2038310561,
  "node_id": "I_kwDOHXha9s55fiah",
  "number": 560,
  "title": "Add proposer call time to historical dataset",
  "user": {
    "login": "MaxResnick",
    "id": 59893359,
    "node_id": "MDQ6VXNlcjU5ODkzMzU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/59893359?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MaxResnick",
    "html_url": "https://github.com/MaxResnick",
    "followers_url": "https://api.github.com/users/MaxResnick/followers",
    "following_url": "https://api.github.com/users/MaxResnick/following{/other_user}",
    "gists_url": "https://api.github.com/users/MaxResnick/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MaxResnick/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MaxResnick/subscriptions",
    "organizations_url": "https://api.github.com/users/MaxResnick/orgs",
    "repos_url": "https://api.github.com/users/MaxResnick/repos",
    "events_url": "https://api.github.com/users/MaxResnick/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MaxResnick/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4778997663,
      "node_id": "LA_kwDOHXha9s8AAAABHNm3nw",
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/labels/feature%20request",
      "name": "feature request",
      "color": "47F2B5",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-12-12T18:10:58Z",
  "updated_at": "2023-12-12T23:28:47Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "**Is your feature request related to a problem? Please describe.**\r\nThere has been a lot of interest around timing games recently and one of the core metrics for this is when the proposer calls the auction. Right now the best approximate we have is to match the winning bid to its submission time but this is a lower bound (see https://github.com/dataalways/mevboost-data/tree/main). \r\n\r\n**Describe the solution you'd like**\r\nAdd the time that the proposer requested the block header during the slot to the historical data API\r\n\r\n**Additional context**\r\n![image](https://github.com/flashbots/mev-boost-relay/assets/59893359/ad808294-d76f-4ee1-86cd-dba443682a4a)\r\n\r\nhttps://ethresear.ch/t/timing-games-implications-and-possible-mitigations/17612/2\r\n\r\nhttps://arxiv.org/abs/2305.09032\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1852886093",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/560#issuecomment-1852886093",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560",
    "id": 1852886093,
    "node_id": "IC_kwDOHXha9s5ucMxN",
    "user": {
      "login": "ralexstokes",
      "id": 3113781,
      "node_id": "MDQ6VXNlcjMxMTM3ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3113781?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ralexstokes",
      "html_url": "https://github.com/ralexstokes",
      "followers_url": "https://api.github.com/users/ralexstokes/followers",
      "following_url": "https://api.github.com/users/ralexstokes/following{/other_user}",
      "gists_url": "https://api.github.com/users/ralexstokes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ralexstokes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ralexstokes/subscriptions",
      "organizations_url": "https://api.github.com/users/ralexstokes/orgs",
      "repos_url": "https://api.github.com/users/ralexstokes/repos",
      "events_url": "https://api.github.com/users/ralexstokes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ralexstokes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-12T22:04:27Z",
    "updated_at": "2023-12-12T22:04:27Z",
    "author_association": "COLLABORATOR",
    "body": "this does seem like a nice feature to add\r\n\r\npossible concerns:\r\n\r\n1) complexity/overhead for relays: don't see any substantive increase here as it just means a few extra bytes per record and this data is already being logged so simple enough to just route to the historical data store\r\n2) privacy leak for validators: knowing what time a validator calls a relay for the winning bid (along w/ their identity that we already have) could enhance efforts to geolocate validators -- given the degree of freedom proposers have over when they make this call it doesn't seem to leak any material information beyond the status quo\r\n\r\nanyone see anything else?",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1852886093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1852937180",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/560#issuecomment-1852937180",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560",
    "id": 1852937180,
    "node_id": "IC_kwDOHXha9s5ucZPc",
    "user": {
      "login": "dataalways",
      "id": 96306976,
      "node_id": "U_kgDOBb2HIA",
      "avatar_url": "https://avatars.githubusercontent.com/u/96306976?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dataalways",
      "html_url": "https://github.com/dataalways",
      "followers_url": "https://api.github.com/users/dataalways/followers",
      "following_url": "https://api.github.com/users/dataalways/following{/other_user}",
      "gists_url": "https://api.github.com/users/dataalways/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dataalways/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dataalways/subscriptions",
      "organizations_url": "https://api.github.com/users/dataalways/orgs",
      "repos_url": "https://api.github.com/users/dataalways/repos",
      "events_url": "https://api.github.com/users/dataalways/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dataalways/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-12T22:51:02Z",
    "updated_at": "2023-12-12T22:51:02Z",
    "author_association": "NONE",
    "body": "It could also provide valuable empirical insights into relay processing speeds. Right now there's some ghost data that makes its way into a lot of explorers, i.e.: block [18,770,921](https://beaconcha.in/slot/7964162) @ Dec-12-2023 03:12:47 PM with timestamp 1702393967. \r\n\r\nIf we check the bloXroute max profit [raw bids](https://bloxroute.max-profit.blxrbdn.com/relay/v1/data/bidtraces/builder_blocks_received?block_hash=0x225e3c4aba1d36be71606521fb418b30875bd9f1af15b047743b48e859e0b254) for the corresponding winning block hash we see a bid arrival time of 1702393970.577, but if we cross reference vs [zeromev](https://zeromev.org/block?num=18770921) block arrival times we see that it was first detected by their nodes at 15:12:50.519 which corresponds to a timestamp of 1702393970.519. \r\n\r\nIf the bid timestamp is after other nodes were already seeing the block then the routing doesn't make any sense to me. \r\n\r\nI would suggest adding both the proposer call time and the bid timestamp to the `proposer_payload_delivered` endpoint.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1852937180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1852984441",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/560#issuecomment-1852984441",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/560",
    "id": 1852984441,
    "node_id": "IC_kwDOHXha9s5uckx5",
    "user": {
      "login": "austonst",
      "id": 1329703,
      "node_id": "MDQ6VXNlcjEzMjk3MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1329703?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/austonst",
      "html_url": "https://github.com/austonst",
      "followers_url": "https://api.github.com/users/austonst/followers",
      "following_url": "https://api.github.com/users/austonst/following{/other_user}",
      "gists_url": "https://api.github.com/users/austonst/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/austonst/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/austonst/subscriptions",
      "organizations_url": "https://api.github.com/users/austonst/orgs",
      "repos_url": "https://api.github.com/users/austonst/repos",
      "events_url": "https://api.github.com/users/austonst/events{/privacy}",
      "received_events_url": "https://api.github.com/users/austonst/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-12T23:21:57Z",
    "updated_at": "2023-12-12T23:28:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Maybe I'm missing something, but I don't believe this data is being logged. It seems a nontrivial effort to do so without changes to the builder API specs. getHeader requests are unsigned: it's difficult to pick out the proposer's request from the other thousands of requests in a slot.\r\n\r\nWe can narrow down the range by seeing which header they eventually call getPayload for, as is already commonly done. A sophisticated relay could also retroactively attempt to match the IP address (or other identifying info) of the sender of a successful getPayload call to one of the getHeader requests received that slot. It's not a foolproof method, and for some relays will produce edge cases when the header they deliver to the proposer is different than the one they eventually deliver via getPayload (if a different relay provided a more valuable bid).\r\n\r\nVanilla mev-boost-relay is currently not doing this kind of matching, and storing ~10k getHeader request IPs just to be able to match them later starts to sound like overhead.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1852984441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

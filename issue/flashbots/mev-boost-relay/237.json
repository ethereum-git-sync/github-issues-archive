{
  "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237",
  "repository_url": "https://api.github.com/repos/flashbots/mev-boost-relay",
  "labels_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237/labels{/name}",
  "comments_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237/comments",
  "events_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237/events",
  "html_url": "https://github.com/flashbots/mev-boost-relay/issues/237",
  "id": 1440008420,
  "node_id": "I_kwDOHXha9s5V1Mjk",
  "number": 237,
  "title": "[spec proposal] improved API to get validators",
  "user": {
    "login": "metachris",
    "id": 116939,
    "node_id": "MDQ6VXNlcjExNjkzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/metachris",
    "html_url": "https://github.com/metachris",
    "followers_url": "https://api.github.com/users/metachris/followers",
    "following_url": "https://api.github.com/users/metachris/following{/other_user}",
    "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
    "organizations_url": "https://api.github.com/users/metachris/orgs",
    "repos_url": "https://api.github.com/users/metachris/repos",
    "events_url": "https://api.github.com/users/metachris/events{/privacy}",
    "received_events_url": "https://api.github.com/users/metachris/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-11-08T11:23:53Z",
  "updated_at": "2022-11-09T13:21:23Z",
  "closed_at": null,
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "Context: https://collective.flashbots.net/t/privacy-concerns-with-data-api/568\r\n\r\nWe'll update the API for getting validators (https://boost-relay.flashbots.net/relay/v1/data/validator_registration?pubkey=) to make it more private, and to allow bulk queries.\r\n\r\nChanges:\r\n\r\n1. Instead of only providing `pubkey` for the request, it will also require `fee_recipient` (and optionally `gas_limit`). This is to maintain privacy for proposers (you can only query them if you know the fee_recipient).\r\n2. Allow single queries (like currently), as well as bulk queries with POST requests.\r\n3. Return a response only for active proposers (currently the API returns the result if a proposer registered at any time in the past)\r\n\r\nSingle query:\r\n\r\n```\r\nhttps://boost-relay.flashbots.net/relay/v1/data/validator_registration\r\n    ?pubkey=<pubkey>\r\n    ?fee_recipient=<feeRecipient>\r\n    [?gas_limit=<gasLimit>]\r\n```\r\n\r\nBulk query:\r\n\r\n```json\r\n[\r\n  {\r\n    \"pubkey\": \"<a_pubkey>\",\r\n    \"fee_recipient\": \"<a_fee_recipient>\"\r\n  },\r\n  {\r\n    \"pubkey\": \"<b_pubkey>\",\r\n    \"fee_recipient\": \"<b_fee_recipient>\",\r\n    \"gas_limit\": \"<b_gas_limit>\"\r\n  }\r\n]\r\n```\r\n\r\n\r\nResponse includes a list of found entries:\r\n\r\n```json\r\n[\r\n  \"<a_pubkey>\",\r\n  \"<b_pubkey>\"\r\n]\r\n```\r\n\r\nPossible extensions (please comment if you have a need for that, could be added now or in the future): \r\n1. return not only the pubkey but also `fee_recipient` and `gas_limit` (enable this response format with another query arg?)\r\n2. return not the found entries, but those that are not found (could also be enabled with another query arg).\r\n\r\n---\r\n\r\nPlease comment with any remaining thoughts. Will start implementation soon üôè ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1307463224",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/237#issuecomment-1307463224",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237",
    "id": 1307463224,
    "node_id": "IC_kwDOHXha9s5N7k44",
    "user": {
      "login": "jtraglia",
      "id": 95511699,
      "node_id": "U_kgDOBbFkkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtraglia",
      "html_url": "https://github.com/jtraglia",
      "followers_url": "https://api.github.com/users/jtraglia/followers",
      "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
      "organizations_url": "https://api.github.com/users/jtraglia/orgs",
      "repos_url": "https://api.github.com/users/jtraglia/repos",
      "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtraglia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-08T16:10:08Z",
    "updated_at": "2022-11-08T16:10:08Z",
    "author_association": "COLLABORATOR",
    "body": "Regarding possible extensions, I like the idea of having another query argument for missing entries; an empty list if everything is found. It seems like the most efficient way for operators to check a large group of validators at once.\r\n\r\nCould be as simple as:\r\n\r\n* `POST /relay/v1/data/validator_registration?missing`",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1307463224/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1307862424",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/237#issuecomment-1307862424",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237",
    "id": 1307862424,
    "node_id": "IC_kwDOHXha9s5N9GWY",
    "user": {
      "login": "jtraglia",
      "id": 95511699,
      "node_id": "U_kgDOBbFkkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtraglia",
      "html_url": "https://github.com/jtraglia",
      "followers_url": "https://api.github.com/users/jtraglia/followers",
      "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
      "organizations_url": "https://api.github.com/users/jtraglia/orgs",
      "repos_url": "https://api.github.com/users/jtraglia/repos",
      "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtraglia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-08T21:38:22Z",
    "updated_at": "2022-11-08T21:38:22Z",
    "author_association": "COLLABORATOR",
    "body": "Semi-related, I think we should remove the `timestamp` field from `/relay/v1/builder/validators` response entries:\r\n\r\n* https://flashbots.github.io/relay-specs/#/Builder/getValidators\r\n\r\nIf the registrations are guaranteed to be active, that information isn't required.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1307862424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1308519593",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/237#issuecomment-1308519593",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237",
    "id": 1308519593,
    "node_id": "IC_kwDOHXha9s5N_myp",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T10:12:42Z",
    "updated_at": "2022-11-09T10:12:55Z",
    "author_association": "COLLABORATOR",
    "body": "Can you please open a new issue re `builder/getValidators`? (fwiw I disagree because it also includes a signature, which can't be verified without the timestamp. should we also remove the signature?)",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1308519593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1308745736",
    "html_url": "https://github.com/flashbots/mev-boost-relay/issues/237#issuecomment-1308745736",
    "issue_url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/237",
    "id": 1308745736,
    "node_id": "IC_kwDOHXha9s5OAeAI",
    "user": {
      "login": "jtraglia",
      "id": 95511699,
      "node_id": "U_kgDOBbFkkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/95511699?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtraglia",
      "html_url": "https://github.com/jtraglia",
      "followers_url": "https://api.github.com/users/jtraglia/followers",
      "following_url": "https://api.github.com/users/jtraglia/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtraglia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtraglia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtraglia/subscriptions",
      "organizations_url": "https://api.github.com/users/jtraglia/orgs",
      "repos_url": "https://api.github.com/users/jtraglia/repos",
      "events_url": "https://api.github.com/users/jtraglia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtraglia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T13:21:23Z",
    "updated_at": "2022-11-09T13:21:23Z",
    "author_association": "COLLABORATOR",
    "body": "Ah that's a good point. I'll think about it some more, but yeah I'll open a new issue. Thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/flashbots/mev-boost-relay/issues/comments/1308745736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2065",
  "id": 450508589,
  "node_id": "MDU6SXNzdWU0NTA1MDg1ODk=",
  "number": 2065,
  "title": "ABI Contract Schema Tuple Components/Children are not Verified for their Types",
  "user": {
    "login": "mikeseese",
    "id": 549323,
    "node_id": "MDQ6VXNlcjU0OTMyMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/549323?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mikeseese",
    "html_url": "https://github.com/mikeseese",
    "followers_url": "https://api.github.com/users/mikeseese/followers",
    "following_url": "https://api.github.com/users/mikeseese/following{/other_user}",
    "gists_url": "https://api.github.com/users/mikeseese/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mikeseese/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mikeseese/subscriptions",
    "organizations_url": "https://api.github.com/users/mikeseese/orgs",
    "repos_url": "https://api.github.com/users/mikeseese/repos",
    "events_url": "https://api.github.com/users/mikeseese/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mikeseese/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 990823235,
      "node_id": "MDU6TGFiZWw5OTA4MjMyMzU=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Contract",
      "name": "Contract",
      "color": "a1ea8f",
      "default": false,
      "description": ""
    },
    {
      "id": 1675042241,
      "node_id": "MDU6TGFiZWwxNjc1MDQyMjQx",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority5%20%F0%9F%8C%80",
      "name": "priority5 ðŸŒ€",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-05-30T21:12:02Z",
  "updated_at": "2020-10-09T00:33:48Z",
  "closed_at": "2020-10-09T00:33:48Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "You'll see https://github.com/trufflesuite/truffle/pull/2064/files#diff-da060bd5170ce9e90e14ece903806d3eR135 says that the `components` property has an array of `object` types. This is *supposed to be* `\"items\": { \"$ref\": \"#/definitions/Parameter\" }`, but the https://github.com/bcherny/json-schema-to-typescript dependency we use to generate typings fails due to the recursion  (gets a `Maximum call stack size exceeded` error when building), despite the schema supports this recursion.\r\n\r\nTo make sure that users contracts that have structs of structs, we only check if the ABI child is an object, rather than verify it is one of the `Parameter` types.\r\n\r\nThe dependency has known about this issue for 2 years now (https://github.com/bcherny/json-schema-to-typescript/issues/76 which depends on another dependency issue https://github.com/APIDevTools/json-schema-ref-parser/issues/37), but a fix has yet to come.\r\n\r\nThis issue is to track the problem, and potentially fix the upstream dependencies and validate tuple components properly.",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/673025185",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-673025185",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 673025185,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzAyNTE4NQ==",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-12T18:00:59Z",
    "updated_at": "2020-08-12T18:00:59Z",
    "author_association": "MEMBER",
    "body": "@seesemichaelj do you know the status of this issue? Is it resolved now? Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/673025185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/673026528",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-673026528",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 673026528,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzAyNjUyOA==",
    "user": {
      "login": "mikeseese",
      "id": 549323,
      "node_id": "MDQ6VXNlcjU0OTMyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeseese",
      "html_url": "https://github.com/mikeseese",
      "followers_url": "https://api.github.com/users/mikeseese/followers",
      "following_url": "https://api.github.com/users/mikeseese/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeseese/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeseese/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeseese/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeseese/orgs",
      "repos_url": "https://api.github.com/users/mikeseese/repos",
      "events_url": "https://api.github.com/users/mikeseese/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeseese/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-12T18:03:38Z",
    "updated_at": "2020-08-12T18:03:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't, sorry",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/673026528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/685905357",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-685905357",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 685905357,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTkwNTM1Nw==",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T18:05:41Z",
    "updated_at": "2020-09-02T18:05:41Z",
    "author_association": "MEMBER",
    "body": "Hi @seesemichaelj just wanted to check on this issue so we can prioritize it -- this does sound like an issue, but where is this validation needed/what is the use case in which it came up? Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/685905357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/685918221",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-685918221",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 685918221,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTkxODIyMQ==",
    "user": {
      "login": "mikeseese",
      "id": 549323,
      "node_id": "MDQ6VXNlcjU0OTMyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeseese",
      "html_url": "https://github.com/mikeseese",
      "followers_url": "https://api.github.com/users/mikeseese/followers",
      "following_url": "https://api.github.com/users/mikeseese/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeseese/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeseese/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeseese/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeseese/orgs",
      "repos_url": "https://api.github.com/users/mikeseese/repos",
      "events_url": "https://api.github.com/users/mikeseese/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeseese/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T18:28:15Z",
    "updated_at": "2020-09-02T18:29:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Validation is something that this package provides, and therefore it should be accurate. I'm not sure of all of the use cases, but Teams validates artifacts uploaded for External Deployments. Specifically, looking at my comment and the code it points to, it seems that the lamen terms of what the issue is:\r\n\r\n- This validation needs to allow structs of structs\r\n- The **technically correct** way to do this is to change the line at https://github.com/trufflesuite/truffle/blob/develop/packages/contract-schema/spec/abi.spec.json#L152 to `\"items\": { \"$ref\": \"#/definitions/Parameter\" }`\r\n- However, making this change causes circular dependency issues caused by upstream packages. If those packages supported circular dependencies (which JSON Schema *allows*), then we could make this change and call it a day\r\n- We currently have a bandaid implemented to allow structs of structs, but it's very permissive by saying \"any object will do\" instead of specifically saying it has to be a struct (aka Parameter)\r\n\r\nSo the bug is that we can potentially let some non-valid contracts come off as valid because we don't have a correct mechanism to do that validation.\r\n\r\nI don't have a stake in this issue at this time (because this bandaid hasn't been an issue to me yet), and it's up to the Truffle team to figure out how you want to proceed.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/685918221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/697810709",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-697810709",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 697810709,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5NzgxMDcwOQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-23T18:07:20Z",
    "updated_at": "2020-09-23T18:07:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @seesemichaelj, we added this to our backlog. We put this as fairly low priority, if you think it is more critical then let us know and we'll bump the priority. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/697810709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/697859820",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-697859820",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 697859820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5Nzg1OTgyMA==",
    "user": {
      "login": "mikeseese",
      "id": 549323,
      "node_id": "MDQ6VXNlcjU0OTMyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549323?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeseese",
      "html_url": "https://github.com/mikeseese",
      "followers_url": "https://api.github.com/users/mikeseese/followers",
      "following_url": "https://api.github.com/users/mikeseese/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeseese/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeseese/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeseese/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeseese/orgs",
      "repos_url": "https://api.github.com/users/mikeseese/repos",
      "events_url": "https://api.github.com/users/mikeseese/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeseese/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-23T18:38:44Z",
    "updated_at": "2020-09-23T18:38:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sounds good; low priority is fine. I will escalate priority if it ever becomes an issue, but at this point it's up to yall whenever you want to fix it.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/697859820/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/705898812",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2065#issuecomment-705898812",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2065",
    "id": 705898812,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTg5ODgxMg==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-09T00:33:48Z",
    "updated_at": "2020-10-09T00:33:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "This should now be fixed.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/705898812/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

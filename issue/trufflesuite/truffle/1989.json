{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1989",
  "id": 440847131,
  "node_id": "MDU6SXNzdWU0NDA4NDcxMzE=",
  "number": 1989,
  "title": " Cannot read property 'replace' of undefined for truffle-hdwallet-provider",
  "user": {
    "login": "chaosma",
    "id": 3767044,
    "node_id": "MDQ6VXNlcjM3NjcwNDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3767044?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chaosma",
    "html_url": "https://github.com/chaosma",
    "followers_url": "https://api.github.com/users/chaosma/followers",
    "following_url": "https://api.github.com/users/chaosma/following{/other_user}",
    "gists_url": "https://api.github.com/users/chaosma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chaosma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chaosma/subscriptions",
    "organizations_url": "https://api.github.com/users/chaosma/orgs",
    "repos_url": "https://api.github.com/users/chaosma/repos",
    "events_url": "https://api.github.com/users/chaosma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chaosma/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-05-06T19:20:54Z",
  "updated_at": "2019-05-13T18:59:03Z",
  "closed_at": "2019-05-13T18:50:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\ntruffle migrate error: \r\n```\r\nCannot read property 'replace' of undefined caused by truffle-hdwallet-provider. \r\n```\r\n\r\nI have tried to install truffle-hdwallet-provider by\r\n```\r\nnpm install --save truffle-hdwallet-provider@web3-one\r\n```\r\nIt works before and now it broken again. My experience is that \"truffle-hdwallet-provider\" is not very stable and often caused by version mismatch of web3. Don't know the root cause for this issue. \r\n\r\n## Environment\r\n\r\nOperating System: MacOS\r\ntruffle-hdwallet-provider: 1.0.8\r\ntruffle version: v5.0.15. \r\nNode: v10.15.3\r\nnpm: 6.9.0\r\n",
  "closed_by": {
    "login": "chaosma",
    "id": 3767044,
    "node_id": "MDQ6VXNlcjM3NjcwNDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3767044?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chaosma",
    "html_url": "https://github.com/chaosma",
    "followers_url": "https://api.github.com/users/chaosma/followers",
    "following_url": "https://api.github.com/users/chaosma/following{/other_user}",
    "gists_url": "https://api.github.com/users/chaosma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chaosma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chaosma/subscriptions",
    "organizations_url": "https://api.github.com/users/chaosma/orgs",
    "repos_url": "https://api.github.com/users/chaosma/repos",
    "events_url": "https://api.github.com/users/chaosma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chaosma/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/489748513",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-489748513",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 489748513,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4OTc0ODUxMw==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-06T19:40:09Z",
    "updated_at": "2019-05-06T19:40:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @chaosma ! Can you give the latest default branch for `truffle-hdwallet-provider` a try? (`npm i --save truffle-hdwallet-provider`)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/489748513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490589740",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-490589740",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 490589740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDU4OTc0MA==",
    "user": {
      "login": "chaosma",
      "id": 3767044,
      "node_id": "MDQ6VXNlcjM3NjcwNDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3767044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chaosma",
      "html_url": "https://github.com/chaosma",
      "followers_url": "https://api.github.com/users/chaosma/followers",
      "following_url": "https://api.github.com/users/chaosma/following{/other_user}",
      "gists_url": "https://api.github.com/users/chaosma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chaosma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chaosma/subscriptions",
      "organizations_url": "https://api.github.com/users/chaosma/orgs",
      "repos_url": "https://api.github.com/users/chaosma/repos",
      "events_url": "https://api.github.com/users/chaosma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chaosma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-08T18:03:58Z",
    "updated_at": "2019-05-08T18:03:58Z",
    "author_association": "NONE",
    "body": "@CruzMolina  I got the same error. I also tried to remove web3@1.0.0 in package.json and just install the latest truffle-hdwallet-provider.  ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490589740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490590126",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-490590126",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 490590126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDU5MDEyNg==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-08T18:05:04Z",
    "updated_at": "2019-05-08T18:05:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chaosma can you share your truffle config?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490590126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490693862",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-490693862",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 490693862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDY5Mzg2Mg==",
    "user": {
      "login": "chaosma",
      "id": 3767044,
      "node_id": "MDQ6VXNlcjM3NjcwNDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3767044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chaosma",
      "html_url": "https://github.com/chaosma",
      "followers_url": "https://api.github.com/users/chaosma/followers",
      "following_url": "https://api.github.com/users/chaosma/following{/other_user}",
      "gists_url": "https://api.github.com/users/chaosma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chaosma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chaosma/subscriptions",
      "organizations_url": "https://api.github.com/users/chaosma/orgs",
      "repos_url": "https://api.github.com/users/chaosma/repos",
      "events_url": "https://api.github.com/users/chaosma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chaosma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-09T00:00:04Z",
    "updated_at": "2019-05-09T00:00:04Z",
    "author_association": "NONE",
    "body": "Here is my truffle config:\r\n\r\n```\r\nconst HDWalletProvider = require('truffle-hdwallet-provider');\r\nvar privateKeys = [process.env.PRIVATE_KEY];\r\n\r\nmodule.exports = {\r\n  networks: {\r\n    development: {\r\n      host: '127.0.0.1', // Localhost (default: none)\r\n      port: 7545, // Ganache\r\n      network_id: '*', // Any network (default: none)\r\n    },\r\n    ropsten: {\r\n      provider: new HDWalletProvider(\r\n        privateKeys,\r\n        'https://ropsten.infura.io/v3/' + process.env.INFURA_API_KEY,\r\n        0,\r\n        1,\r\n      ),\r\n      network_id: 3, // Ropsten's id\r\n      gas: 5500000, // Ropsten has a lower block limit than mainnet\r\n      skipDryRun: true,\r\n    },\r\n    main: {\r\n      provider: () =>\r\n        new HDWalletProvider(\r\n          privateKeys,\r\n          'https://mainnet.infura.io/v3/' + process.env.INFURA_API_KEY,\r\n          0,\r\n          1,\r\n        ),\r\n      network_id: 1,\r\n      gas: 5700000,\r\n      gasPrice: 10000000000,\r\n    },\r\n  },\r\n\r\n  // Set default mocha options here, use special reporters etc.\r\n  mocha: {\r\n    // timeout: 100000\r\n  },\r\n\r\n  // Configure your compilers\r\n  compilers: {\r\n    solc: {},\r\n  },\r\n};\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490693862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490737575",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-490737575",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 490737575,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MDczNzU3NQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-09T04:20:45Z",
    "updated_at": "2019-05-09T04:20:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chaosma, I believe you need to pass a thunk that returns a new HDWalletProvider.\r\n\r\nFor example:\r\n\r\n```\r\nmodule.exports = {\r\n  networks: {\r\n    ropsten: {\r\n      provider: () => {\r\n        return new HDWalletProvider(\r\n          privateKeys,\r\n          \"https://ropsten.infura.io/v3/\" + process.env.INFURA_API_KEY,\r\n          0,\r\n          1\r\n        );\r\n      },\r\n      network_id: 3, // Ropsten's id\r\n      gas: 5500000, // Ropsten has a lower block limit than mainnet\r\n      skipDryRun: true\r\n    },\r\n    main: {\r\n      provider: () => {\r\n        return new HDWalletProvider(\r\n          privateKeys,\r\n          \"https://mainnet.infura.io/v3/\" + process.env.INFURA_API_KEY,\r\n          0,\r\n          1\r\n        );\r\n      },\r\n      network_id: 1,\r\n      gas: 5700000,\r\n      gasPrice: 10000000000\r\n    }\r\n  }\r\n};\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/490737575/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 1,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/491941791",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-491941791",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 491941791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTk0MTc5MQ==",
    "user": {
      "login": "chaosma",
      "id": 3767044,
      "node_id": "MDQ6VXNlcjM3NjcwNDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3767044?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chaosma",
      "html_url": "https://github.com/chaosma",
      "followers_url": "https://api.github.com/users/chaosma/followers",
      "following_url": "https://api.github.com/users/chaosma/following{/other_user}",
      "gists_url": "https://api.github.com/users/chaosma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chaosma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chaosma/subscriptions",
      "organizations_url": "https://api.github.com/users/chaosma/orgs",
      "repos_url": "https://api.github.com/users/chaosma/repos",
      "events_url": "https://api.github.com/users/chaosma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chaosma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-13T18:50:03Z",
    "updated_at": "2019-05-13T18:50:03Z",
    "author_association": "NONE",
    "body": "@CruzMolina Oh, my bad. It works now. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/491941791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/491944839",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1989#issuecomment-491944839",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1989",
    "id": 491944839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTk0NDgzOQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-13T18:59:03Z",
    "updated_at": "2019-05-13T18:59:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sweet! Glad to hear that @chaosma 🙌 ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/491944839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

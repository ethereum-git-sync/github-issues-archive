{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/369",
  "id": 212272389,
  "node_id": "MDU6SXNzdWUyMTIyNzIzODk=",
  "number": 369,
  "title": "Solidity function that returns (byte, bytes, bytes) causes BigNumber Error",
  "user": {
    "login": "D-Nice",
    "id": 2888248,
    "node_id": "MDQ6VXNlcjI4ODgyNDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2888248?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/D-Nice",
    "html_url": "https://github.com/D-Nice",
    "followers_url": "https://api.github.com/users/D-Nice/followers",
    "following_url": "https://api.github.com/users/D-Nice/following{/other_user}",
    "gists_url": "https://api.github.com/users/D-Nice/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/D-Nice/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/D-Nice/subscriptions",
    "organizations_url": "https://api.github.com/users/D-Nice/orgs",
    "repos_url": "https://api.github.com/users/D-Nice/repos",
    "events_url": "https://api.github.com/users/D-Nice/events{/privacy}",
    "received_events_url": "https://api.github.com/users/D-Nice/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 644098328,
      "node_id": "MDU6TGFiZWw2NDQwOTgzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20reproduced",
      "name": "needs reproduced",
      "color": "fbca04",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2017-03-06T22:37:54Z",
  "updated_at": "2019-06-19T17:46:13Z",
  "closed_at": "2019-06-19T17:45:41Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nCalling a solidity function, which returns a byte type, and subsequently 2 bytes types (byte, bytes, bytes), throws a bigNumber error in Truffle console. \r\n\r\n## Steps to Reproduce\r\n\r\nUse the following two function in a test contract\r\n\r\n    function bytePre()\r\n    external constant\r\n    returns (byte a, bytes b) {\r\n        a = hex'ff';\r\n        b = hex'11';\r\n    }\r\n    function byteError()\r\n    external constant\r\n    returns (byte a, bytes b, bytes c) {\r\n        a = hex'ff';\r\n        b = hex'11';\r\n        c = hex'11';\r\n    }\r\n\r\nCompile, migrate and then test on truffle console as follows:\r\n\r\n`testContract.deployed().bytePre.call()`\r\n\r\n`testContract.deployed().byteError.call()`\r\n\r\n## Expected Behavior\r\n\r\nReturn the corresponding bytes correctly\r\n`[ '0xff',\r\n '0x11',\r\n '0x11', ]`\r\n## Actual Results\r\n\r\nbytePre function returns:\r\n\r\n`[ '0xff',\r\n '0x000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000011100000000000000000000000000000000000000000000000000000000000000' ]`\r\n\r\nbyteError function throws:\r\n\r\n`BigNumber Error: new BigNumber() not a base 16 number:\r\n    at raise (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\bignumber\r\n.js\\bignumber.js:1177:25)\r\n    at C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\bignumber.js\\big\r\nnumber.js:1165:33\r\n    at new BigNumber (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\b\r\nignumber.js\\bignumber.js:212:28)\r\n    at SolidityTypeDynamicBytes.formatOutputDynamicBytes [as _outputFormatter] (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node\r\n_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\web3\\lib\\solidity\\formatters.js:205:19)\r\n    at C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\web3\\lib\\solidit\r\ny\\type.js:237:25\r\n    at SolidityTypeDynamicBytes.SolidityType.decode (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modul\r\nes\\ether-pudding\\node_modules\\web3\\lib\\solidity\\type.js:238:11)\r\n    at C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\web3\\lib\\solidit\r\ny\\coder.js:219:29\r\n    at Array.map (native)\r\n    at SolidityCoder.decodeParams (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\n\r\node_modules\\web3\\lib\\solidity\\coder.js:218:26)\r\n    at SolidityFunction.unpackOutput (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-puddin\r\ng\\node_modules\\web3\\lib\\web3\\function.js:90:24)\r\n    at Object.callback (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\r\n\\web3\\lib\\web3\\function.js:118:30)\r\n    at C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\web3\\lib\\web3\\me\r\nthod.js:142:25\r\n    at C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\ether-pudding\\node_modules\\web3\\lib\\web3\\re\r\nquestmanager.js:89:9\r\n    at request.onreadystatechange (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\web3\\lib\\web3\\h\r\nttpprovider.js:114:13)\r\n    at dispatchEvent (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\xmlhttprequest\\lib\\XMLHttpRe\r\nquest.js:591:25)\r\n    at setState (C:\\Users\\D-Nice\\AppData\\Roaming\\npm\\node_modules\\truffle\\node_modules\\xmlhttprequest\\lib\\XMLHttpRequest\r\n.js:610:14)`\r\n\r\n## Environment\r\n\r\n* Operating System: Win 7 & Debian 8\r\n* Truffle version:  2.1.1 on Win 7 & 3.0.2 on Debian\r\n* Ethereum client: TestRPC\r\n* node version: 6.10.0 \r\n* npm version: 3.10.10\r\n",
  "closed_by": {
    "login": "eggplantzzz",
    "id": 14827965,
    "node_id": "MDQ6VXNlcjE0ODI3OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eggplantzzz",
    "html_url": "https://github.com/eggplantzzz",
    "followers_url": "https://api.github.com/users/eggplantzzz/followers",
    "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
    "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
    "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
    "repos_url": "https://api.github.com/users/eggplantzzz/repos",
    "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/369/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/310485830",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-310485830",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 310485830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMDQ4NTgzMA==",
    "user": {
      "login": "treeder",
      "id": 75826,
      "node_id": "MDQ6VXNlcjc1ODI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/75826?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/treeder",
      "html_url": "https://github.com/treeder",
      "followers_url": "https://api.github.com/users/treeder/followers",
      "following_url": "https://api.github.com/users/treeder/following{/other_user}",
      "gists_url": "https://api.github.com/users/treeder/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/treeder/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/treeder/subscriptions",
      "organizations_url": "https://api.github.com/users/treeder/orgs",
      "repos_url": "https://api.github.com/users/treeder/repos",
      "events_url": "https://api.github.com/users/treeder/events{/privacy}",
      "received_events_url": "https://api.github.com/users/treeder/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-22T19:57:49Z",
    "updated_at": "2017-06-22T19:57:49Z",
    "author_association": "NONE",
    "body": "I'm getting this too, it seems truffle assumes that every `call()` returns a number or something. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/310485830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/432771082",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-432771082",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 432771082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjc3MTA4Mg==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T18:16:31Z",
    "updated_at": "2018-10-24T18:16:31Z",
    "author_association": "MEMBER",
    "body": "Is this still a problem? In Truffle v5 I think we changed how this works (for starters, we're using BN.js instead now)\r\n\r\nLet me know! Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/432771082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/444542604",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-444542604",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 444542604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NDU0MjYwNA==",
    "user": {
      "login": "pf89",
      "id": 40271031,
      "node_id": "MDQ6VXNlcjQwMjcxMDMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/40271031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pf89",
      "html_url": "https://github.com/pf89",
      "followers_url": "https://api.github.com/users/pf89/followers",
      "following_url": "https://api.github.com/users/pf89/following{/other_user}",
      "gists_url": "https://api.github.com/users/pf89/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pf89/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pf89/subscriptions",
      "organizations_url": "https://api.github.com/users/pf89/orgs",
      "repos_url": "https://api.github.com/users/pf89/repos",
      "events_url": "https://api.github.com/users/pf89/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pf89/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-05T16:12:01Z",
    "updated_at": "2018-12-05T16:12:01Z",
    "author_association": "NONE",
    "body": "Hello, does anyone have a solution or at least a workaround? Get this bug too. Thank you very much",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/444542604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/450394976",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-450394976",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 450394976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDM5NDk3Ng==",
    "user": {
      "login": "D-Nice",
      "id": 2888248,
      "node_id": "MDQ6VXNlcjI4ODgyNDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2888248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/D-Nice",
      "html_url": "https://github.com/D-Nice",
      "followers_url": "https://api.github.com/users/D-Nice/followers",
      "following_url": "https://api.github.com/users/D-Nice/following{/other_user}",
      "gists_url": "https://api.github.com/users/D-Nice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/D-Nice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/D-Nice/subscriptions",
      "organizations_url": "https://api.github.com/users/D-Nice/orgs",
      "repos_url": "https://api.github.com/users/D-Nice/repos",
      "events_url": "https://api.github.com/users/D-Nice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/D-Nice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-28T17:19:22Z",
    "updated_at": "2018-12-28T17:19:22Z",
    "author_association": "NONE",
    "body": "I have not run into this scenario under Truffle v5 I believe, but have migrated towards using it, and would recommend others experiencing this issue atm to do the same and then report if they still have this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/450394976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/457616425",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-457616425",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 457616425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NzYxNjQyNQ==",
    "user": {
      "login": "malkevych",
      "id": 13216326,
      "node_id": "MDQ6VXNlcjEzMjE2MzI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/13216326?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/malkevych",
      "html_url": "https://github.com/malkevych",
      "followers_url": "https://api.github.com/users/malkevych/followers",
      "following_url": "https://api.github.com/users/malkevych/following{/other_user}",
      "gists_url": "https://api.github.com/users/malkevych/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/malkevych/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/malkevych/subscriptions",
      "organizations_url": "https://api.github.com/users/malkevych/orgs",
      "repos_url": "https://api.github.com/users/malkevych/repos",
      "events_url": "https://api.github.com/users/malkevych/events{/privacy}",
      "received_events_url": "https://api.github.com/users/malkevych/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-25T15:47:31Z",
    "updated_at": "2019-01-25T15:47:31Z",
    "author_association": "NONE",
    "body": "Have the same bug with truffle 5",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/457616425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/458137930",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-458137930",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 458137930,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODEzNzkzMA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-28T13:46:21Z",
    "updated_at": "2019-01-28T13:46:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@malkevych I am unable to reproduce the above error on version 5. Can you give me some steps?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/458137930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/503661578",
    "html_url": "https://github.com/trufflesuite/truffle/issues/369#issuecomment-503661578",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/369",
    "id": 503661578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzY2MTU3OA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-19T17:45:41Z",
    "updated_at": "2019-06-19T17:46:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this during maintenance. Feel free to comment if it is still an issue and we can re-open it.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/503661578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

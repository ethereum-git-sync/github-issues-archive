{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3361",
  "id": 701335604,
  "node_id": "MDU6SXNzdWU3MDEzMzU2MDQ=",
  "number": 3361,
  "title": "hdwallet-provider requires plaintext mnemonic",
  "user": {
    "login": "0x9060",
    "id": 59158959,
    "node_id": "MDQ6VXNlcjU5MTU4OTU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/59158959?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0x9060",
    "html_url": "https://github.com/0x9060",
    "followers_url": "https://api.github.com/users/0x9060/followers",
    "following_url": "https://api.github.com/users/0x9060/following{/other_user}",
    "gists_url": "https://api.github.com/users/0x9060/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0x9060/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0x9060/subscriptions",
    "organizations_url": "https://api.github.com/users/0x9060/orgs",
    "repos_url": "https://api.github.com/users/0x9060/repos",
    "events_url": "https://api.github.com/users/0x9060/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0x9060/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1086852667,
      "node_id": "MDU6TGFiZWwxMDg2ODUyNjY3",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20requirements",
      "name": "needs requirements",
      "color": "d4c5f9",
      "default": false,
      "description": "feature request is unclear"
    },
    {
      "id": 1675042241,
      "node_id": "MDU6TGFiZWwxNjc1MDQyMjQx",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority5%20%F0%9F%8C%80",
      "name": "priority5 üåÄ",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-09-14T18:39:59Z",
  "updated_at": "2021-06-08T07:11:26Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [X] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\n`hdwallet-provider` requires **plaintext** mnemonic.\r\n\r\n## Steps to Reproduce\r\n\r\nI want to deploy a contract to a network using `truffle/hdwallet-provider` and `truffle migrate --network rinkeby`, for example. Accordingly, I've defined by `truffle-config.js` file like so:\r\n\r\n```\r\nconst HDWalletProvider = require('@truffle/hdwallet-provider');\r\nconst fs = require('fs');\r\nconst mnemonic = fs.readFileSync(\".keysToTheKingdom\").toString().trim();\r\n\r\nconst infuraURL = 'https://rinkeby.infura.io/v3/MY-PROJECT-ID'\r\nconst infuraKey = fs.readFileSync(\".infuraProjectSecret\").toString().trim();\r\n\r\nvar HDWallet = require('@truffle/hdwallet-provider')\r\n\r\nmodule.exports = {\r\n  networks: {\r\n      rinkeby: {\r\n\t  provider: () => new HDWalletProvider(mnemonic, infuraURL),\r\n\t  network_id: 4,       // Rinkeby's network id \r\n\t  gas: 5500000,\r\n      },\r\n};\r\n```\r\n\r\nThis works, but requires me to store my mnemonic on my host in **plaintext** somewhere. This is insecure, regardless of the fact that I'm storing it in a hidden file.\r\n\r\n## Expected Behavior\r\n\r\nDo not require plaintext wallet mnemonics to deploy to networks. Instead, some public keys or a hash of the wallet mnemonic should be provided.\r\n\r\nOr some other workaround?\r\n\r\n## Actual Results\r\n\r\nDeployment to network works, but this requires storing wallet mnemonics in plaintext on the host somewhere. If the host becomes compromised, the keys to the kingdom, and my entire net worth, are lost. Storing this in plaintext is wild because of how critical this mnemonic is. It's 2020 - we don't store passwords in plaintext in a file on our host... why should we do it with something so critical as a wallet mnemonic?\r\n\r\n## Environment\r\n\r\n* Operating System: Ubuntu 18.04\r\n* Ethereum client: geth v1.9.21\r\n* Truffle version (`truffle version`): 5.1.43\r\n* node version (`node --version`): 8.10.0\r\n* npm version (`npm --version`): 6.14.8\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361/reactions",
    "total_count": 4,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 4,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/692997891",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3361#issuecomment-692997891",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361",
    "id": 692997891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5Mjk5Nzg5MQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-15T21:48:37Z",
    "updated_at": "2020-09-15T21:48:37Z",
    "author_association": "MEMBER",
    "body": "Hm. HDWalletProvider needs private key information, so your thought to provide just public key would be insufficient.\r\n\r\nYou can add mnemonics that use a password, but nothing about how Truffle works today would change the situation about requiring this in plaintext. I've just opened a [new issue to consider a password CLI prompt](https://github.com/trufflesuite/truffle/issues/3363), but I think there's probably a better way to get what you're looking for (which I touched on in the issue).\r\n\r\n‚ùó **In any event, don't use your main account inside Truffle, please!!! _Make a new mnemonic and transfer as little ETH as you need!_ Truffle makes development tools; our specialty is not in building a secure wallet implementation! Truffle doesn't need access to your entire net worth, I promise you!**",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/692997891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/693658125",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3361#issuecomment-693658125",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361",
    "id": 693658125,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MzY1ODEyNQ==",
    "user": {
      "login": "0x9060",
      "id": 59158959,
      "node_id": "MDQ6VXNlcjU5MTU4OTU5",
      "avatar_url": "https://avatars.githubusercontent.com/u/59158959?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0x9060",
      "html_url": "https://github.com/0x9060",
      "followers_url": "https://api.github.com/users/0x9060/followers",
      "following_url": "https://api.github.com/users/0x9060/following{/other_user}",
      "gists_url": "https://api.github.com/users/0x9060/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0x9060/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0x9060/subscriptions",
      "organizations_url": "https://api.github.com/users/0x9060/orgs",
      "repos_url": "https://api.github.com/users/0x9060/repos",
      "events_url": "https://api.github.com/users/0x9060/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0x9060/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-16T20:50:59Z",
    "updated_at": "2020-09-16T20:50:59Z",
    "author_association": "NONE",
    "body": "@gnidan Agree, I'm not actually using the same wallet for development and managing crypto holdings. Just included that to drive the point home, we still should not be storing plaintext mnemonics on our host, unless that wallet is not important to us if it becomes compromised. Thanks for opening the feature request!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/693658125/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/705092929",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3361#issuecomment-705092929",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361",
    "id": 705092929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTA5MjkyOQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-07T17:44:44Z",
    "updated_at": "2020-10-07T17:44:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, we'll look into doing this when we have the chance!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/705092929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/856360382",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3361#issuecomment-856360382",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361",
    "id": 856360382,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NjM2MDM4Mg==",
    "user": {
      "login": "sterlingcrispin",
      "id": 2976761,
      "node_id": "MDQ6VXNlcjI5NzY3NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2976761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sterlingcrispin",
      "html_url": "https://github.com/sterlingcrispin",
      "followers_url": "https://api.github.com/users/sterlingcrispin/followers",
      "following_url": "https://api.github.com/users/sterlingcrispin/following{/other_user}",
      "gists_url": "https://api.github.com/users/sterlingcrispin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sterlingcrispin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sterlingcrispin/subscriptions",
      "organizations_url": "https://api.github.com/users/sterlingcrispin/orgs",
      "repos_url": "https://api.github.com/users/sterlingcrispin/repos",
      "events_url": "https://api.github.com/users/sterlingcrispin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sterlingcrispin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-08T01:00:08Z",
    "updated_at": "2021-06-08T01:00:08Z",
    "author_association": "NONE",
    "body": "I agree this is crazy and should be fixed -- I'm sure this is being targeted by hackers trying to gain access to big wallets. This should be a must-fix issue",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/856360382/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/856516959",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3361#issuecomment-856516959",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3361",
    "id": 856516959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NjUxNjk1OQ==",
    "user": {
      "login": "freddyshim",
      "id": 62468975,
      "node_id": "MDQ6VXNlcjYyNDY4OTc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/62468975?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/freddyshim",
      "html_url": "https://github.com/freddyshim",
      "followers_url": "https://api.github.com/users/freddyshim/followers",
      "following_url": "https://api.github.com/users/freddyshim/following{/other_user}",
      "gists_url": "https://api.github.com/users/freddyshim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/freddyshim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/freddyshim/subscriptions",
      "organizations_url": "https://api.github.com/users/freddyshim/orgs",
      "repos_url": "https://api.github.com/users/freddyshim/repos",
      "events_url": "https://api.github.com/users/freddyshim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/freddyshim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-08T07:11:26Z",
    "updated_at": "2021-06-08T07:11:26Z",
    "author_association": "NONE",
    "body": "I'm surprised this issue hasn't been given a larger priority. Sure, we can circumvent the security issue by using a development account with a different mnemonic phrase, but I shouldn't have to download multiple Metamask extensions on different browsers just so that I can test my projects with an ease of mind.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/856516959/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

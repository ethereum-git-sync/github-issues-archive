{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/729",
  "id": 283917963,
  "node_id": "MDU6SXNzdWUyODM5MTc5NjM=",
  "number": 729,
  "title": "Tests randomly crashing at ProviderError.ExtendableError on Ubuntu (Linux)",
  "user": {
    "login": "dwalintukan",
    "id": 4350404,
    "node_id": "MDQ6VXNlcjQzNTA0MDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4350404?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dwalintukan",
    "html_url": "https://github.com/dwalintukan",
    "followers_url": "https://api.github.com/users/dwalintukan/followers",
    "following_url": "https://api.github.com/users/dwalintukan/following{/other_user}",
    "gists_url": "https://api.github.com/users/dwalintukan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dwalintukan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dwalintukan/subscriptions",
    "organizations_url": "https://api.github.com/users/dwalintukan/orgs",
    "repos_url": "https://api.github.com/users/dwalintukan/repos",
    "events_url": "https://api.github.com/users/dwalintukan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dwalintukan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971534911,
      "node_id": "MDU6TGFiZWw5NzE1MzQ5MTE=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Next",
      "name": "Next",
      "color": "5319e7",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 81,
  "created_at": "2017-12-21T15:31:59Z",
  "updated_at": "2021-04-30T00:17:23Z",
  "closed_at": "2019-01-16T18:42:47Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [X] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nOn a Ubuntu Linux environment (Trusty), tests randomly fail with this `ExtendableError`:\r\n```\r\n1) Contract: TopicEvent \"after each\" hook for \"throws on an invalid result index\":\r\nError: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:9401:17)\r\n      at new ProviderError (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:325054:24)\r\n      at /home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:325137:17\r\n      at /home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (/home/travis/.nvm/versions/node/v8.9.3/lib/node_modules/truffle/build/cli.bundled.js:176765:24)\r\n      at Socket.socketOnEnd (_http_client.js:423:9)\r\n      at endReadableNT (_stream_readable.js:1056:12)\r\n      at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n```\r\nSpecifically, I have a Travis-CI (continuous integration) setup and this is where the tests are failing. My local Mac OSX environment passes these tests with no problem. Every once and a while, they will fail with the same error, but I just run the tests again and they pass.\r\n\r\nI'd say it happens like 10-15% of the time on Mac OSX, but it happens like 60-80% of the time on the Travis-CI linux env. \r\n\r\nIt feels like it used to have this error less on earlier Truffle versions. I just updated to 4.0.4 and it seems way more often now.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Clone this repo: https://github.com/bodhiproject/bodhi-core\r\n2. Use Truffle v4.0.4 on a Ubuntu Linux environment (see environment details)\r\n3. truffle test\r\n\r\n## Expected Behavior\r\n\r\nTests should pass like they do on Mac OSX env.\r\n\r\n## Actual Results\r\n\r\nI test this on my local machine (mac osx), when all tests pass which they do, I push up to Github. Then it fires off a Travis-CI test on the linux env and fails pretty much every time.\r\n\r\n## Environment\r\n\r\n**Travis-CI Env** (fails)\r\n* Operating System: Ubuntu 14.04 Trusty\r\n* Truffle version: 4.0.4\r\n* node version: v8.9.3\r\n* npm version: 5.5.1\r\n* nvm version: 0.33.8\r\n* Build language: node_js\r\n* Build group: stable\r\n* Build dist: trusty\r\n* Distributor ID:\tUbuntu\r\n* Description:\tUbuntu 14.04.5 LTS\r\n* Release:\t14.04\r\n* Codename:\ttrusty\r\n* Compiled with gcc 4.8.2 for Unix (Linux ELF) on Oct 21 2013.\r\n* OS/Arch:      linux/amd64\r\n\r\n**Mac OSX Env** (passes)\r\n* Mac OSX 10.12.6 Sierra\r\n* Truffle v4.0.4\r\n* node version: 8.9.1\r\n* npm version: 5.5.1\r\n\r\n$ gcc --version:\r\n```\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\r\nApple LLVM version 9.0.0 (clang-900.0.39.2)\r\nTarget: x86_64-apple-darwin16.7.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/729/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/354613344",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-354613344",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 354613344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDYxMzM0NA==",
    "user": {
      "login": "Alonski",
      "id": 452199,
      "node_id": "MDQ6VXNlcjQ1MjE5OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/452199?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Alonski",
      "html_url": "https://github.com/Alonski",
      "followers_url": "https://api.github.com/users/Alonski/followers",
      "following_url": "https://api.github.com/users/Alonski/following{/other_user}",
      "gists_url": "https://api.github.com/users/Alonski/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Alonski/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Alonski/subscriptions",
      "organizations_url": "https://api.github.com/users/Alonski/orgs",
      "repos_url": "https://api.github.com/users/Alonski/repos",
      "events_url": "https://api.github.com/users/Alonski/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Alonski/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-31T16:38:13Z",
    "updated_at": "2017-12-31T16:38:44Z",
    "author_association": "NONE",
    "body": "This happens to me as well:\r\n```\r\nPS D:\\Projects\\Fun Stuff\\daostack> truffle develop\r\nTruffle Develop started at http://localhost:9545/\r\n\r\nAccounts:\r\n(0) 0x627306090abab3a6e1400e9345bc60c78a8bef57\r\n(1) 0xf17f52151ebef6c7334fad080c5704d77216b732\r\n(2) 0xc5fdf4076b8f3a5357c5e395ab970b5b54098fef\r\n(3) 0x821aea9a577a9b44299b9c15c88cf3087f3b5544\r\n(4) 0x0d1d4e623d10f9fba5db95830f7d3839406c6af2\r\n(5) 0x2932b7a2355d6fecc4b5c0b6bd44cc31df247a2e\r\n(6) 0x2191ef87e392377ec08e7c08eb105ef5448eced5\r\n(7) 0x0f4f2ac550a1b4e2280d04c21cea7ebd822934b5\r\n(8) 0x6330a553fc93768f612722bb8c2ec78ac90b3bbc\r\n(9) 0x5aeda56215b167893e80b4fe645ba6d5bab767de\r\n\r\nPrivate Keys:\r\n(0) c87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3\r\n(1) ae6ae8e5ccbfb04590405997ee2d52d2b330726137b875053c36d94e974d162f\r\n(2) 0dbbe8e4ae425a6d2687f1a7e3ba17bc98c673636790f1b8ad91193c05875ef1\r\n(3) c88b703fb08cbea894b6aeff5a544fb92e78a18e19814cd85da83b71f772aa6c\r\n(4) 388c684f0ba1ef5017716adb5d21a053ea8e90277d0868337519f97bede61418\r\n(5) 659cbb0e2411a44db63778987b1e22153c086a95eb6b18bdf89de078917abc63\r\n(6) 82d052c865f5763aad42add438569276c00d3d88a2d062d36b2bae914d58b8c8\r\n(7) aa3680d5d48a8283413f7a108367c7299ca73f553735860a87b08f39395618b7\r\n(8) 0f62d96d6675f32685bbdb8ac13cda7c23436f63efbb9d07700d8669ff12b7c4\r\n(9) 8d5366123cb560bb606379f90a0bfd4769eecc0557f1b362dcae9012b548b1e5\r\n\r\nMnemonic: candy maple cake sugar pudding cream honey rich smooth crumble sweet treat\r\n\r\ntruffle(develop)> test\r\nCompiling .\\contracts\\Migrations.sol...\r\nCompiling .\\contracts\\VotingMachines\\AbsoluteVote.sol...\r\nCompiling .\\contracts\\VotingMachines\\EmergentVoteScheme.sol...\r\nCompiling .\\contracts\\VotingMachines\\IntVoteInterface.sol...\r\nCompiling .\\contracts\\VotingMachines\\QuorumVote.sol...\r\nCompiling .\\contracts\\controller\\Avatar.sol...\r\nCompiling .\\contracts\\controller\\Controller.sol...\r\nCompiling .\\contracts\\controller\\DAOToken.sol...\r\nCompiling .\\contracts\\controller\\Reputation.sol...\r\nCompiling .\\contracts\\globalConstraints\\GlobalConstraintInterface.sol...\r\nCompiling .\\contracts\\globalConstraints\\TokenCapGC.sol...\r\nCompiling .\\contracts\\test\\ActionMock.sol...\r\nCompiling .\\contracts\\test\\Debug.sol...\r\nCompiling .\\contracts\\test\\ExecutableTest.sol...\r\nCompiling .\\contracts\\test\\GlobalConstraintMock.sol...\r\nCompiling .\\contracts\\universalSchemes\\ContributionReward.sol...\r\nCompiling .\\contracts\\universalSchemes\\ExecutableInterface.sol...\r\nCompiling .\\contracts\\universalSchemes\\GenesisScheme.sol...\r\nCompiling .\\contracts\\universalSchemes\\GlobalConstraintRegistrar.sol...\r\nCompiling .\\contracts\\universalSchemes\\OrganizationRegister.sol...\r\nCompiling .\\contracts\\universalSchemes\\SchemeRegistrar.sol...\r\nCompiling .\\contracts\\universalSchemes\\SimpleICO.sol...\r\nCompiling .\\contracts\\universalSchemes\\UniversalScheme.sol...\r\nCompiling .\\contracts\\universalSchemes\\UniversalSchemeInterface.sol...\r\nCompiling .\\contracts\\universalSchemes\\UpgradeScheme.sol...\r\nCompiling .\\contracts\\universalSchemes\\VestingScheme.sol...\r\nCompiling .\\contracts\\universalSchemes\\VoteInOrganizationScheme.sol...\r\nCompiling zeppelin-solidity/contracts/lifecycle/Destructible.sol...\r\nCompiling zeppelin-solidity/contracts/math/SafeMath.sol...\r\nCompiling zeppelin-solidity/contracts/mocks/StandardTokenMock.sol...\r\nCompiling zeppelin-solidity/contracts/ownership/Ownable.sol...\r\nCompiling zeppelin-solidity/contracts/token/BurnableToken.sol...\r\nCompiling zeppelin-solidity/contracts/token/MintableToken.sol...\r\nCompiling zeppelin-solidity/contracts/token/StandardToken.sol...\r\nCompiling zeppelin-solidity\\contracts\\math\\SafeMath.sol...\r\nCompiling zeppelin-solidity\\contracts\\ownership\\Ownable.sol...\r\nCompiling zeppelin-solidity\\contracts\\token\\BasicToken.sol...\r\nCompiling zeppelin-solidity\\contracts\\token\\ERC20.sol...\r\nCompiling zeppelin-solidity\\contracts\\token\\ERC20Basic.sol...\r\nCompiling zeppelin-solidity\\contracts\\token\\StandardToken.sol...\r\n\r\n\r\n  Contract: AbsoluteVote\r\n    √ Sanity checks (3485ms)\r\n    √ log the LogNewProposal event on proposing new proposal (1565ms)\r\n    √ should log the LogCancelProposal event on canceling a proposal (982ms)\r\n    √ should log the LogVoteProposal and LogCancelVoting events on voting and canceling the vote (1029ms)\r\n    √ should log the LogExecuteProposal event (1395ms)\r\n    √ All options can be voted (0-9) (2639ms)\r\n    √ Double vote shouldn't double proposal's 'Option 2' count (1205ms)\r\n    √ Vote cancellation should revert proposal's counters (1117ms)\r\n    √ As allowOwner is set to true, Vote on the behalf of someone else should work (1014ms)\r\n    √ As allowOwner is set to false, Vote on the behalf of someone else should NOT work (938ms)\r\n    √ if the voter is not the proposal's owner, he shouldn't be able to vote on the behalf of someone else (892ms)\r\n    √ Non-existent parameters hash shouldn't work (1085ms)\r\n    √ Invalid percentage required( < 0 || > 100) shouldn't work (2029ms)\r\n    √ Proposal voting or cancelling shouldn't be able after proposal has been executed (1180ms)\r\n    √ the vote function should behave as expected (1976ms)\r\n    √ cannot vote for another user (866ms)\r\n    √ Should behave sensibly when voting with an empty reputation system (333ms)\r\n    √ Should behave sensibly without an executable [TODO] execution isn't implemented yet (483ms)\r\n    √ Proposal with wrong num of options (876ms)\r\n    √ Test voteWithSpecifiedAmounts - More reputation than I own, negative reputation, etc.. (1139ms)\r\n    √ Internal functions can not be called externally (963ms)\r\n    √ Try to send wrong proposal id to the voting/cancel functions (1063ms)\r\n    √ 2 proposals, 1 Reputation system (1703ms)\r\n    as _not_ proposal owner - vote for myself\r\n      √ vote \"Option 1\" then vote \"Option 2\" should register \"Option 2\" (1139ms)\r\n      √ vote \"Option 3\" then vote \"Option 4\" should register \"Option 4\" (1206ms)\r\n    as proposal owner - vote for another user\r\n      √ vote \"Option 1\" then vote \"Option 2\" should register \"Option 2\" (1163ms)\r\n      √ vote \"Option 3\" then vote \"Option 4\" should register \"Option 4\" (1015ms)\r\n\r\n  Contract: Avatar\r\n    √ genericAction no owner (466ms)\r\n    √ generic call (553ms)\r\n    √ pay ether to avatar (1282ms)\r\n    √ sendEther from  (2278ms)\r\n    √ externalTokenTransfer   (592ms)\r\n    √ externalTokenTransferFrom & ExternalTokenIncreaseApproval (648ms)\r\n    √ externalTokenTransferFrom & externalTokenDecreaseApproval (784ms)\r\n\r\n  Contract: ContributionReward\r\n    √ constructor (138ms)\r\n    √ setParameters (1422ms)\r\n    √ registerOrganization - check fee payment  (2066ms)\r\n    √ submitContribution log (1745ms)\r\n    √ submitContribution fees (1779ms)\r\n    √ submitContribution without registration -should fail (1371ms)\r\n    √ submitContribution check owner vote (1457ms)\r\n    √ submitContribution check beneficiary==0 (1716ms)\r\n    √ execute submitContribution  yes  (1778ms)\r\n    √ execute submitContribution  mint reputation  (1759ms)\r\n    √ execute submitContribution  mint tokens  (1519ms)\r\n    √ execute submitContribution  send ethers  (2403ms)\r\n    √ execute submitContribution  send externalToken  (2165ms)\r\n    √ execute submitContribution proposal decision=='no' send externalToken   (1932ms)\r\n\r\n  Contract: Controller\r\n    √ mint reputation via controller (667ms)\r\n    √ mint tokens via controller (633ms)\r\n    √ register schemes (606ms)\r\n    √ register schemes - check permissions for register new scheme (24778ms)\r\n    √ register schemes - check permissions for updating existing scheme (1408ms)\r\n    √ unregister schemes (646ms)\r\n    √ unregister none registered scheme (590ms)\r\n    √ unregister schemes - check permissions unregister scheme (20398ms)\r\n    √ unregister self (753ms)\r\n    √ isSchemeRegistered  (1787ms)\r\n    √ addGlobalConstraint  (1804ms)\r\n    √ removeGlobalConstraint  (2442ms)\r\n    √ upgrade controller  (945ms)\r\n    √ upgrade controller check permission (873ms)\r\n    √ generic call (887ms)\r\n    √ sendEther (2555ms)\r\n    √ externalTokenTransfer (1030ms)\r\n    √ externalTokenTransferFrom & ExternalTokenIncreaseApproval (1196ms)\r\n    √ externalTokenTransferFrom & externalTokenDecreaseApproval (1799ms)\r\n    √ globalConstraints mintReputation add & remove (1035ms)\r\n    √ globalConstraints mintTokens add & remove (1211ms)\r\n    √ globalConstraints register schemes add & remove (1071ms)\r\n    √ globalConstraints unregister schemes add & remove (1001ms)\r\n    √ globalConstraints generic call  add & remove (1551ms)\r\n    √ globalConstraints sendEther  add & remove (3490ms)\r\n    √ globalConstraints externalTokenTransfer  add & remove (1294ms)\r\n    √ globalConstraints externalTokenTransferFrom , externalTokenIncreaseApproval , externalTokenDecreaseApproval (2016ms)\r\n\r\n  Contract: DAOToken\r\n    √ should put 0 Coins in the first account (70ms)\r\n    √ should be owned by its creator (83ms)\r\n    √ should be destructible (87ms)\r\n    √ should mint tokens to owner account (7614ms)\r\n    √ should allow minting tokens only by owner (6067ms)\r\n    √ log the Mint event on mint (101ms)\r\n    √ mint should be reflected in totalSupply (220ms)\r\n    √ mint should be reflected in balances (110ms)\r\n    √ totalSupply is 0 on init (77ms)\r\n    √ burn (190ms)\r\n    onlyOwner\r\n      √ mint by owner (96ms)\r\n      √ mint by not owner (71ms)\r\n\r\n  Contract: GenesisScheme\r\n    √ founders should get their share in reputation and tokens (2426ms)\r\n    √ forgeOrg check avatar (383ms)\r\n    √ forgeOrg check reputations and tokens to founders (328ms)\r\n    √ forgeOrg check transfer ownership (405ms)\r\n    √ setSchemes log (391ms)\r\n    √ setSchemes from account that does not hold the lock (306ms)\r\n    √ setSchemes increase approval for scheme  (413ms)\r\n    √ setSchemes increase approval for scheme without fee (346ms)\r\n    √ setSchemes check register (359ms)\r\n    √ setSchemes check unregisterSelf (466ms)\r\n    √ setSchemes delete lock (373ms)\r\n\r\n  Contract: GlobalConstraintRegistrar\r\n    √ constructor (142ms)\r\n    √ setParameters (777ms)\r\n    √ registerOrganization - check fee payment  (1457ms)\r\n    √ proposeGlobalConstraint log (1580ms)\r\n    √ proposeGlobalConstraint without registration -should fail (1292ms)\r\n    √ proposeGlobalConstraint check owner vote (1269ms)\r\n    √ execute proposeGlobalConstraint  (1612ms)\r\n    √ proposeToRemoveGC log (1717ms)\r\n    √ proposeToRemoveGC without registration -should fail (1189ms)\r\n    √ proposeToRemoveGC check owner vote (1829ms)\r\n    √ execute proposeToRemoveGC  (2184ms)\r\n    √ execute proposeToRemoveGC (same as proposeGlobalConstraint) vote=NO  (1693ms)\r\n\r\n  Contract: Migrations\r\n    √ should have deployed entire DAOStack\r\n\r\n  Contract: OrganizationRegister\r\n    √ constructor (150ms)\r\n    √ setParameters (192ms)\r\n    √ registerOrganization - check fee payment  (1804ms)\r\n    √ addOrPromoteAddress add and promote  (2300ms)\r\n    √ addOrPromoteAddress add without enough fee should fail  (1163ms)\r\n    √ addOrPromoteAddress add  without regisration -should fail  (1266ms)\r\n\r\n  Contract: QuorumVote\r\n    √ Sanity checks (1451ms)\r\n    √ Quorum proposals should be executed when reaching the percentage required (1332ms)\r\n    √ Invalid inputs shouldn't work (precReq, vote) (6588ms)\r\n    √ All options can be voted (0-9) (2502ms)\r\n    √ Double vote shouldn't double proposal's 'Option 2' count (1068ms)\r\n    √ Vote cancellation should revert proposal's counters (1067ms)\r\n    √ As allowOwner is set to true, Vote on the behalf of someone else should work (2654ms)\r\n    √ As allowOwner is set to false, Vote on the behalf of someone else should NOT work (1128ms)\r\n    √ if the voter is not the proposal's owner, he shouldn't be able to vote on the behalf of someone else (1200ms)\r\n    √ Should not able to vote / cancel vote / proposal after proposal has been executed (1289ms)\r\n    √ Only the owner of the proposal can cancel it (1463ms)\r\n    √ log the LogNewProposal event on proposing new proposal (1231ms)\r\n    √ Should log the LogCancelProposal event on canceling a proposal (857ms)\r\n    √ Should log the LogVoteProposal and LogCancelVoting events on voting and canceling the vote (999ms)\r\n    √ Should log the LogExecuteProposal event on executing quorum proposal with 'no' decision (925ms)\r\n    √ cannot vote for another user (998ms)\r\n    √ Should behave sensibly without an executable [TODO] execution isn't implemented yet (458ms)\r\n    √ Test voteWithSpecifiedAmounts - More reputation than I own, negative reputation, etc.. (982ms)\r\n    √ Internal functions can not be called externally (2591ms)\r\n    √ Try to send wrong proposal id to the voting/cancel functions (1798ms)\r\n\r\n  Contract: Reputation\r\n    1) \"before all\" hook: prepare suite\r\n\r\n  Contract: SchemeRegistrar\r\n    2) \"before all\" hook: prepare suite\r\n\r\n  Contract: SimpleICO\r\n    3) \"before all\" hook: prepare suite\r\n\r\n  Contract: TokenCapGC\r\n    4) \"before all\" hook: prepare suite\r\n\r\n  Contract: UpgradeScheme\r\n    5) \"before all\" hook: prepare suite\r\n\r\n  Contract: VestingScheme\r\n    6) \"before all\" hook: prepare suite\r\n\r\n  Contract: VoteInOrganizationScheme\r\n    7) \"before all\" hook: prepare suite\r\n\r\n\r\n  137 passing (4m)\r\n  7 failing\r\n\r\n  1) Contract: Reputation \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n\r\n  2) Contract: SchemeRegistrar \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n\r\n  3) Contract: SimpleICO \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n\r\n  4) Contract: TokenCapGC \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n\r\n  5) Contract: UpgradeScheme \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n\r\n  6) Contract: VestingScheme \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n\r\n  7) Contract: VoteInOrganizationScheme \"before all\" hook: prepare suite:\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:9401:17)\r\n      at new ProviderError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325054:24)\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325137:17\r\n      at C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:325195:24\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:328229:7)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176415:18)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176705:12)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176895:12)\r\n      at ClientRequest.<anonymous> (C:\\Users\\Alon\\AppData\\Roaming\\nvm\\v8.9.3\\node_modules\\truffle\\build\\cli.bundled.js:176765:24)\r\n```\r\nRepo: https://github.com/daostack/daostack\r\n\r\nI am running Windows 10 so this doesn't seem related to OS\r\n\r\nFor me it happens around 50% of the time locally and also happens during Travis build.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/354613344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/365129061",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-365129061",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 365129061,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTEyOTA2MQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-13T02:14:47Z",
    "updated_at": "2018-02-13T02:14:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue has been open for a while and looks a lot like the non-deterministic ganache bug which @benjamincburns fixed recently. Downloading the latest ganache-cli (read the release notes!) should resolve this problem.\r\n\r\nClosing but if anyone continues to see this error please re-open or comment. Thanks for reporting.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/365129061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/367208363",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-367208363",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 367208363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzIwODM2Mw==",
    "user": {
      "login": "nickjm",
      "id": 7245435,
      "node_id": "MDQ6VXNlcjcyNDU0MzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7245435?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nickjm",
      "html_url": "https://github.com/nickjm",
      "followers_url": "https://api.github.com/users/nickjm/followers",
      "following_url": "https://api.github.com/users/nickjm/following{/other_user}",
      "gists_url": "https://api.github.com/users/nickjm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nickjm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nickjm/subscriptions",
      "organizations_url": "https://api.github.com/users/nickjm/orgs",
      "repos_url": "https://api.github.com/users/nickjm/repos",
      "events_url": "https://api.github.com/users/nickjm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nickjm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-21T04:15:51Z",
    "updated_at": "2018-02-21T04:15:51Z",
    "author_association": "NONE",
    "body": "I'm getting this error message when connecting to Rinkeby with Infura, truffle-wallet-provider, and ethereumjs-wallet. I'm not convinced this is Ganache, but maybe my error is caused my something else.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/367208363/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/367394779",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-367394779",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 367394779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzM5NDc3OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-21T16:58:14Z",
    "updated_at": "2018-02-21T16:59:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nickjm Could you provide context (what are you doing in your code) or a reproduction path? A stacktrace might also be helpful.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/367394779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/368974025",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-368974025",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 368974025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2ODk3NDAyNQ==",
    "user": {
      "login": "hickscorp",
      "id": 822933,
      "node_id": "MDQ6VXNlcjgyMjkzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/822933?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hickscorp",
      "html_url": "https://github.com/hickscorp",
      "followers_url": "https://api.github.com/users/hickscorp/followers",
      "following_url": "https://api.github.com/users/hickscorp/following{/other_user}",
      "gists_url": "https://api.github.com/users/hickscorp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hickscorp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hickscorp/subscriptions",
      "organizations_url": "https://api.github.com/users/hickscorp/orgs",
      "repos_url": "https://api.github.com/users/hickscorp/repos",
      "events_url": "https://api.github.com/users/hickscorp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hickscorp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-27T18:15:35Z",
    "updated_at": "2018-02-27T18:16:36Z",
    "author_association": "NONE",
    "body": "I have this issue around 10% of my builds, with 128 tests active, randomly.\r\nThe tests are running on the default dummy node (Ganache?), with the latest version of Truffle.\r\nInterestingly enough, it only fails when built in our CI (Drone, dockerized), not locally.\r\nOur environments are based on Ubuntu and use standard docker NodeJS:Carbon images.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/368974025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/373349669",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-373349669",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 373349669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MzM0OTY2OQ==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-15T11:47:26Z",
    "updated_at": "2018-03-15T11:58:26Z",
    "author_association": "NONE",
    "body": "Same problem on Windows 10:\r\n- Ganache CLI v6.1.0 (ganache-core: 2.1.0)\r\n- Truffle v4.1.3\r\n- npm v5.5.1\r\n- node v8.9.3\r\n\r\n```\r\n  1) Contract: ...\r\n     AssertionError: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at Context.it (...)\r\n      at <anonymous>\r\n      at process._tickCallback (internal/process/next_tick.js:188:7)\r\n\r\n  2) Contract: ... \"after each\" hook: after test for \"...\":\r\n     Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n      at ProviderError.ExtendableError (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-error\\index.js:10:1)\r\n      at new ProviderError (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-provider\\error.js:17:1)\r\n      at C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-provider\\wrapper.js:71:1\r\n      at C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-provider\\wrapper.js:129:1\r\n      at XMLHttpRequest.request.onreadystatechange (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\web3\\lib\\web3\\httpprovider.js:128:1)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:64:1)\r\n      at XMLHttpRequest._setReadyState (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:354:1)\r\n      at XMLHttpRequest._onHttpRequestError (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:544:1)\r\n      at ClientRequest.<anonymous> (C:\\Users\\...\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:414:1)\r\n      at Socket.socketErrorListener (_http_client.js:387:9)\r\n      at emitErrorNT (internal/streams/destroy.js:64:8)\r\n      at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n      at process._tickCallback (internal/process/next_tick.js:180:9)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/373349669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379338551",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379338551",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379338551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTMzODU1MQ==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T18:30:46Z",
    "updated_at": "2018-04-06T18:30:46Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nAny news on this?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379338551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379342584",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379342584",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379342584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM0MjU4NA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T18:46:01Z",
    "updated_at": "2018-04-06T18:46:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman No, everyone's seeing it intermittently, AFAIK it predates recent work to stabilize the test client and it's possible that it's related to  [issue 453](https://github.com/trufflesuite/ganache-cli/issues/453) at `ganache-cli` which is under bounty and currently being worked on. There's more detail over there if you're interested. \r\n\r\nUnfortunately this looks like (as @benjamincburns would say) a heisenbug. If anyone finds a consistent way of reproducing it they will be  greeted with delight. \r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379342584/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379355640",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379355640",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379355640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM1NTY0MA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T19:36:24Z",
    "updated_at": "2018-04-06T19:36:24Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nThank you for the info.\r\nP.S.: To me, *heisenbug* is kind of instinctively associated with Heisenberg (Uncertainty Principle's Heisenberg, not Breaking Bad's Heisenberg). More specifically, something like - \"if you touch it, you change it\", or in other words - this bug is unsolvable by definition, which I sincerely hope is not the case here... Or perhaps you were referring to the bug being uncertain, not the actual solution (and perhaps I went slightly off track with my \"associativity\")...\r\n\r\nIn my case, I see this occurring at random indeed, but - and this is actually very deterministic - in only 1 out of 23 scripts which `truffle test` executes.\r\nI've been banging my head for a while, trying to figure out in what sense this script is different from all the others, which could explain this. But I have failed to find any notable difference, so I cannot think of any sustainable workaround.\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379355640/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379357199",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379357199",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379357199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM1NzE5OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T19:43:16Z",
    "updated_at": "2018-04-06T19:43:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Ahhh!! That's pretty good isolation of the problem. It could be something in the script you identified. Could also be related to the test execution that precedes it.\r\n\r\nIf there's any possibility of having another set of eyes look at the codebase, we'd definitely be interested.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379357199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379368154",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379368154",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379368154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM2ODE1NA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T20:28:36Z",
    "updated_at": "2018-04-06T20:31:45Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nMost likely not related to the preceding script, as I also tried to `truffle test` this script alone, and the problem persisted.\r\nI'm not sure that I'm allowed to post the code publicly at this point, so I will try to minimize both the Solidity contract and the Javascript test, and if I am still able to reproduce the problem then I will post it here.\r\nAnother interesting point of attention, is the fact that I haven't seen it happening when using `testrpc-sc` instead of `ganache-cli`.\r\nSo the bug can probably be reduced to the differences between those two (and also, we can probably eliminate the chances of it being related to the truffle suite itself or to mocha).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379368154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379369696",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379369696",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379369696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTM2OTY5Ng==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-06T20:35:07Z",
    "updated_at": "2018-04-06T20:35:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Ok great, thank you. One thing about `testrpc-sc` is that it's much slower. If the underlying issue is a race condition, testrpc-sc could be introducing delays that mask it. Another important difference is that it uses an older version of ethereumjs-vm (from the fall). Possible clue there too, although have been seeing these disconnections all year. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379369696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379433643",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379433643",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379433643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTQzMzY0Mw==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-07T05:25:39Z",
    "updated_at": "2018-04-07T05:51:40Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nI can consistently reproduce the problem with the code below.\r\n\r\nMyContract.sol:\r\n```\r\npragma solidity ^0.4.18;\r\n\r\ncontract MyContract {\r\n    uint256 public constant ONE = 1000000000;\r\n    uint256 public constant GAMMA = 179437500000000000000000000000000000000000;\r\n    uint256 public constant DELTA = 29437500;\r\n\r\n    function buy(uint256 x, uint256 y, uint256 alpha, uint256 beta) external pure returns (uint256) {\r\n        uint256 temp = alpha - beta * y;\r\n        return x * (temp * ONE) / (temp * (ONE - DELTA) + GAMMA);\r\n    }\r\n\r\n    function sell(uint256 x, uint256 y, uint256 alpha, uint256 beta) external pure returns (uint256) {\r\n        uint256 temp = alpha - beta * y;\r\n        return x * (temp * (ONE + DELTA) - GAMMA) / (temp * ONE);\r\n    }\r\n}\r\n```\r\n\r\nMyContractUnitTest.js:\r\n```\r\ncontract(\"MyContractUnitTest\", () => {\r\n    let interval = [\"0\", \"20000000000000000000000000\", \"10000000000000000000000000000000000\", \"0\"];\r\n    let NUM_OF_TESTS_PER_INTERVAL = 10;\r\n\r\n    function buyFunc(x, y, alpha, beta) {\r\n        let temp = alpha.minus(beta.times(y));\r\n        return x.times(temp.times(ONE)).dividedBy(temp.times(ONE.minus(DELTA)).plus(GAMMA));\r\n    }\r\n\r\n    function sellFunc(x, y, alpha, beta) {\r\n        let temp = alpha.minus(beta.times(y));\r\n        return x.times(temp.times(ONE.plus(DELTA)).minus(GAMMA)).dividedBy(temp.times(ONE));\r\n    }\r\n\r\n    async function buy(x, y, alpha, beta) {\r\n        let fixedPoint = await myContract.buy(x, y, alpha, beta);\r\n        let floatPoint = buyFunc(x, y, alpha, beta);\r\n        return [fixedPoint, floatPoint];\r\n    }\r\n\r\n    async function sell(x, y, alpha, beta) {\r\n        let fixedPoint = await myContract.sell(x, y, alpha, beta);\r\n        let floatPoint = sellFunc(x, y, alpha, beta);\r\n        return [fixedPoint, floatPoint];\r\n    }\r\n\r\n    let myContract;\r\n    let ONE;\r\n    let GAMMA;\r\n    let DELTA;\r\n    before(async () => {\r\n        myContract = await artifacts.require(\"MyContract.sol\").new();\r\n        ONE = await myContract.ONE();\r\n        GAMMA = await myContract.GAMMA();\r\n        DELTA = await myContract.DELTA();\r\n    });\r\n\r\n    let AMOUNT = web3.toBigNumber(1000000);\r\n\r\n    for (let func of [buy, sell]) {\r\n        describe(`${func.name}:`, async () => {\r\n            for (let row = 0; row < 100; row++) {\r\n                for (let col = 0; col < 10; col++) {\r\n                    let [minN, maxN, alpha, beta] = interval.map(x => web3.toBigNumber(x));\r\n                    let incN = maxN.minus(minN).dividedBy(NUM_OF_TESTS_PER_INTERVAL - 1);\r\n                    for (let i = 0; i < NUM_OF_TESTS_PER_INTERVAL; i++) {\r\n                        let y = minN.plus(incN.times(i)).truncated();\r\n                        it(`interval ${row} ${col}, test ${i}`, async () => {\r\n                            try {\r\n                                let [fixedPoint, floatPoint] = await func(AMOUNT, y, alpha, beta);\r\n                                let ratio = fixedPoint.dividedBy(floatPoint);\r\n                                assert(ratio.greaterThanOrEqualTo(\"0.99999\") && ratio.lessThanOrEqualTo(\"1\"), `ratio = ${ratio.toFixed()}`);\r\n                            }\r\n                            catch (error) {\r\n                                assert(false, error.message);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n});\r\n```\r\n\r\nMy setup (as mentioned in a previous comment on this thread) is:\r\n\r\n- Windows 10\r\n- Ganache CLI v6.1.0 (ganache-core: 2.1.0)\r\n- Truffle v4.1.3\r\n- npm v5.5.1\r\n- node v8.9.3\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379433643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379482273",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-379482273",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 379482273,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3OTQ4MjI3Mw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-07T16:34:48Z",
    "updated_at": "2018-04-07T16:35:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Great!! Thank you. Going to open a companion issue over at `ganache-cli` and will talk to @benjamincburns about this and get his input. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/379482273/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/382849211",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-382849211",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 382849211,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjg0OTIxMQ==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-19T19:12:22Z",
    "updated_at": "2018-04-19T19:12:22Z",
    "author_association": "NONE",
    "body": "@cgewecke: Also happens on `testrpc-sc` if you try \"hard enough\"...",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/382849211/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385370130",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-385370130",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 385370130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTM3MDEzMA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T11:16:35Z",
    "updated_at": "2018-04-30T11:16:35Z",
    "author_association": "NONE",
    "body": "@cgewecke : I am circulating around the conclusion that this problem stems from improper usage of the Mocha framework. More precisely, improper usage of the `before`, `beforeEach`, `afterEach` and `after` hooks.\r\n\r\nThe typical error messages, although poorly phrased, imply this conjecture as well:\r\n- `\"before all\" hook....`\r\n- `\"before each\" hook...`\r\n- `\"after each\" hook...`\r\n- `\"after all\" hook...`\r\n\r\nYou can read the relevant information [here](https://mochajs.org/#root-level-hooks), namely:\r\n\r\n> You may also pick any file and add “root”-level hooks. For example, add `beforeEach()` outside of all `describe()` blocks. This will cause the callback to `beforeEach()` to run before any test case, **regardless of the file it lives in**.\r\n\r\nSo using these hooks on the root-level might be a bad idea in this case, since due to the nature of the tested system (communication with a TestRPC or Ganache process), they typically execute asynchronous code.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385370130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385418857",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-385418857",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 385418857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTQxODg1Nw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T14:40:29Z",
    "updated_at": "2018-04-30T14:40:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Agree it seems like disconnections happen at the 'seams' of the suites where the  hooks are.  The code at `truffle-core` [here](https://github.com/trufflesuite/truffle-core/blob/develop/lib/test.js#L219-L248) that sets up the 'contract' suite looks to me like it safely binds hooks within a `describe` and executes them asynchronously via Mocha's `done` callback.  Do you see another place where they might be invoked?\r\n\r\n     ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385418857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385422496",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-385422496",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 385422496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTQyMjQ5Ng==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T14:51:46Z",
    "updated_at": "2018-04-30T14:51:46Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nI have removed all my root-level hooks, and i'm still encountering disconnections.\r\nHowever, in opposed to before, the errors that I am getting are always `\"after each\" hook...`.\r\nAnd to be absolutely clear on that, I don't even have an `afterEach` hook in any of my tests!\r\nMaybe Mocha adds implicit calls to `afterEach`, when an explicit call to `beforeEach` exists in the code.\r\nHowever, so long as these implicit calls are not added at the root-level, it does not support my conjecture of hooked code running in the wrong scope to begin with.\r\nIn short, I'm at a loss here...\r\n\r\nBy the way, in the code that you linked, there doesn't seem to be support for the `after` hook, and I am using this hook in my tests.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385422496/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385432067",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-385432067",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 385432067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTQzMjA2Nw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T15:21:39Z",
    "updated_at": "2018-04-30T15:21:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Hmmm....that's a nice observation about `after` - I wonder if that's causing problems.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385432067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385435855",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-385435855",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 385435855,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTQzNTg1NQ==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-30T15:33:46Z",
    "updated_at": "2018-04-30T15:36:56Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nThanks.\r\nI removed all the `after` hooks in my code (replaced them with `it`s), and now I'm getting a `\"before each\" hook...` error.\r\nSo I'm suspecting that one way or another - these hooks are not incorporated properly into Truffle.\r\nIn order to bring an empirical evidence for this conjecture, I am now trying the following workaround:\r\n\r\n- Replace each `before` hook with an `it`\r\n- Replace each `after` hook with an `it`\r\n- Move the contents of each `beforeEach` hook to the beginning of each one of the `it`s which follow\r\n- Move the contents of each `afterEach` hook to the end of each one of the `it`s which follow\r\n\r\nIf all tests pass without disconnections, then I'm pretty sure that we can stamp this as the cause of the problem. And even if not, I think that it could still be related to hooks which are added implicitly by the Mocha framework.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/385435855/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/386269403",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-386269403",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 386269403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NjI2OTQwMw==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-03T11:50:23Z",
    "updated_at": "2018-05-03T11:50:36Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nI take back my previous conjecture of this error occurring on a given test as a result of something which has executed on a previous test.\r\nThis is because the error occurs when I execute `truffle test` separately for each test file (i.e., running `truffle test test/SomeFile.js` sequentially for each JS file).\r\nMoreover, in between calls to `truffle test`, I close and reopen the `ganache-cli` process.\r\nSo this error cannot be related to any previous state stored by either `truffle test` or `ganache-cli` (unless one of them saves some \"global information\" in the operating-system's temp folder or something like that, which I sincerely doubt).\r\n\r\nIn addition to that, I have recently tested the new `ganache-cli` beta version (7.0.0-beta.0), where the problem persists.\r\n\r\nI have posted my findings on [a similar GIT thread](https://github.com/trufflesuite/ganache-cli/issues/359) which is closed by now, but I am hoping will reopen.\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/386269403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387499522",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387499522",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387499522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzQ5OTUyMg==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-08T18:33:37Z",
    "updated_at": "2018-05-08T18:48:26Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nI have conducted a more extensive research, by modifying file `/node_modules/truffle/build/cli.bundled.js`.\r\n\r\nI started off by checking which path leads to the `NOT_CONNECTED_MESSAGE` error message (`'Invalid JSON RPC response: \"\"'`):\r\n\r\n- The synchronous path (`send: function(originalSend, preHook, postHook)`)\r\n- The asynchronous path (`sendAsync: function(originalSendAsync, preHook, postHook)`)\r\n\r\nAs expected, this error occurs only in the asynchronous path.\r\n\r\nSecond, I added some logging in this path, just before invoking `callback(error, result)`:\r\n\r\n    if (payload.params == undefined)\r\n        console.log(result.id, payload.method, 'no params');\r\n    else\r\n        console.log(result.id, payload.method, payload.params.length);\r\n\r\nHere is the consistency that I have observed:\r\n\r\n1. During normal execution:\r\n   - `result.id` starts from a very large value, and grows on each `evm` operation, for example:\r\n     - id = 1525799814567, method = evm_revert\r\n     - id = 1525799814727, method = evm_snapshot\r\n   - `result.id` starts from 1 and increments by 1 on each `net` or `eth` operation, for example:\r\n     - id = 1, method = net_version\r\n     - id = 2, method = eth_sendTransaction\r\n     - id = 3, method = eth_getTransactionReceipt\r\n     - id = 4, method = eth_call\r\n     - id = 5, method = eth_newBlockFilter\r\n     - id = 6, method = eth_getCode\r\n     - id = 7, method = eth_blockNumber\r\n     - id = 8, method = eth_uninstallFilter\r\n   - In some cases, both `result.id` and `payload.method` are `undefined`.\r\n     When that happens, `result.id` increments by 2 on the next `net` or `eth` operation, for example:\r\n     - id = 12, method = eth_blockNumber\r\n     - id = undefined, method = undefined\r\n     - id = 14, method = eth_uninstallFilter\r\n2. Right before the error occurs:\r\n   - In the last one or two cases, `result.id` is `undefined` but `payload.method` is valid.\r\n   - In the last case, `payload.method` is sometimes `eth_getLogs` for the first time in the entire test.\r\n   - Here are several examples for that:\r\n     - Test 1 ended with:\r\n       - id = undefined, method = net_version\r\n       - id = 1525791759176, method = eth_getLogs\r\n     - Test 2 ended with:\r\n       - id = undefined, method = eth_call\r\n       - id = undefined, method = eth_getLogs\r\n     - Test 3 ended with:\r\n       - id = undefined, method = eth_blockNumber\r\n     - Test 4 ended with:\r\n       - id = undefined, method = eth_call\r\n       - id = undefined, method = eth_getLogs\r\n     - Test 5 ended with:\r\n       - id = undefined, method = eth_blockNumber\r\n\r\nI am hopeful that the above information will provide some clues towards the source of this problem.\r\nAnd since I am able to reproduce it repeatedly, I will be happy to generate more logging in case you have any specific requests.\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387499522/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387690570",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387690570",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387690570,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzY5MDU3MA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T10:08:08Z",
    "updated_at": "2018-05-10T05:56:08Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nUpdate to the above:\r\n\r\nI later realized that:\r\n- In some cases:\r\n  - The `id` is in `result`\r\n  - The `method` is in `payload`\r\n- In other cases:\r\n  - The `id` is in `result[0]`\r\n  - The `method` is in `payload[0]`\r\n\r\nI therefore changed the logging as follows:\r\n\r\n    if (result.id != undefined)\r\n        console.log(`Normal: id = ${result.id}, method = ${payload.method}`);\r\n    else if (result[0] != undefined)\r\n        console.log(`In [0]: id = ${result[0].id}, method = ${payload[0].method}`);\r\n    else\r\n        console.log(`Problem: result = ${result}, payload = ${JSON.stringify(payload, null, 4)}`);\r\n\r\nThe new logging has improved my previous observation from this:\r\n\r\n    result.id = undefined\r\n    payload.method = undefined\r\n\r\nTo this:\r\n\r\n    result[0].id = <the previous id + 1>\r\n    payload[0].method = eth_getFilterChanges\r\n\r\nAll of that, during normal execution of course.\r\n\r\nWhat happens right before the error can be described as follows:\r\nIn the last one or two cases, the `result` is empty.\r\nThe contents which the `result` normally holds:\r\n- `jsonrpc` is still available in the `payload`\r\n- `id` is still available in the `payload`\r\n- `result` is not available anywhere\r\n\r\nIs it possible that somewhere in ganache-cli code, the `payload` is initialized but the `result` is not?\r\n\r\nThat could most certainly be classified as an \"Invalid JSON RPC response\" (which you guys can easily resolve).\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387690570/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387736398",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387736398",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387736398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NzczNjM5OA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T13:21:48Z",
    "updated_at": "2018-05-09T13:23:42Z",
    "author_association": "NONE",
    "body": "Some more observations:\r\n\r\nWhen the last two `result` objects are empty:\r\n1. The last `payload` object always contains:\r\n   - `method = eth_getLogs`\r\n   - `id = <some very large number>`\r\n2. The error reported by `truffle test` is always `\"after each\" hook: after test for...`\r\n\r\nWhen only the last `result` object are empty:\r\n1. The last `payload` object always contains:\r\n   - `method != eth_getLogs`\r\n   - `id = <the previous id + 1>`\r\n2. The error reported by `truffle test` is either `\"before each\" hook: before test for...` or `No events were emitted`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387736398/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387764006",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387764006",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387764006,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzc2NDAwNg==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T14:46:45Z",
    "updated_at": "2018-05-09T14:46:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Thank you. . . this analysis is really helpful. \r\n\r\n> Is it possible that somewhere in ganache-cli code, the payload is initialized but the result is not? \r\n\r\n@benjamincburns Does anything jump out at you as a possibility in the preceding three comments?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387764006/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387775349",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387775349",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387775349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzc3NTM0OQ==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T15:19:26Z",
    "updated_at": "2018-05-09T15:19:26Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nI've been doing my research only on `truffle` side, thinking I wasn't able to do much on `ganache` side because all the code inside /node_modules/ganache appeared \"compacted\".\r\n\r\nBut then I realized that I could go directly to the source code on GitHub, so I'm now looking there too trying to connect the dots...\r\n\r\nI'm doing it without logging this time, because I would essentially need to reinstall it (npm) after every change, so too much hustle...\r\n \r\nThank you!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387775349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387777161",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387777161",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387777161,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzc3NzE2MQ==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T15:24:43Z",
    "updated_at": "2018-05-09T15:56:41Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nBTW, preliminary observation in `ganache` code:\r\n\r\nIt seems that the `jsonrpc` field is mostly set to `\"2.0\"` (string) and rarely set to `2.0` (double).\r\nPerhaps it doesn't make any difference when sent from the `ganache` process to the `truffle` process, but I would nevertheless make it consistent across the project.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387777161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387787533",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387787533",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387787533,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzc4NzUzMw==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T15:56:24Z",
    "updated_at": "2018-05-09T15:57:49Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nA question about line 100 in file /ganache-core-develop/lib/provider.js:\r\n\r\n    callback(response.error ? err : null, response);\r\n\r\nLooking a few lines above it, the variable `response` is either an object or an array of objects.\r\n\r\nWhen it is an array of objects, I believe that `response.error` is `undefined`, hence the expression `response.error ? err : null` evaluates to `null`.\r\n\r\nIs this really the desired behavior in this case?\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387787533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387851833",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387851833",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387851833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzg1MTgzMw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T19:38:20Z",
    "updated_at": "2018-05-09T20:08:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Just talked to @benjamincburns about this and he thinks it's ok. Have published an experimental truffle build which removes the eth_getLogs attempt in `truffle test`. If you have a chance could try running your suite with it and seeing if it makes any difference? Maybe we can isolate this problem to that call.\r\n```\r\nnpm install -g darq-truffle@barakman\r\ndarq-truffle test # Example command\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387851833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387853220",
    "html_url": "https://github.com/trufflesuite/truffle/issues/729#issuecomment-387853220",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/729",
    "id": 387853220,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4Nzg1MzIyMA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-09T19:43:52Z",
    "updated_at": "2018-05-09T19:43:52Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\nI will do so, thank you very much!!!\r\nBut as I mentioned above, I must also remind you that in some failure cases, the `eth_getLogs` method was not present in the erroneous `payload` (i.e, the `payload` which came along with an empty `result` did not contain this method).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/387853220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

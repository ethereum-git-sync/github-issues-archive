{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2141",
  "id": 462057616,
  "node_id": "MDU6SXNzdWU0NjIwNTc2MTY=",
  "number": 2141,
  "title": "Unable to migrate smart contract (Token ERC20) when using parameters in constructor",
  "user": {
    "login": "alexandreValente",
    "id": 25650621,
    "node_id": "MDQ6VXNlcjI1NjUwNjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/25650621?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexandreValente",
    "html_url": "https://github.com/alexandreValente",
    "followers_url": "https://api.github.com/users/alexandreValente/followers",
    "following_url": "https://api.github.com/users/alexandreValente/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexandreValente/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexandreValente/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexandreValente/subscriptions",
    "organizations_url": "https://api.github.com/users/alexandreValente/orgs",
    "repos_url": "https://api.github.com/users/alexandreValente/repos",
    "events_url": "https://api.github.com/users/alexandreValente/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexandreValente/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-06-28T14:18:39Z",
  "updated_at": "2019-06-29T16:12:19Z",
  "closed_at": "2019-06-29T16:12:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\nIssue not found on Gitter but still searching.\r\n---------------------------\r\n\r\n## Issue\r\n\r\nHi to all,\r\n\r\ndon't know if this is a truffle init issue but I get this...\r\nWhen I try to migrate my Token smart contract (using Openzeppelin ERC20) I want to migrate using a custom script for initializing constructor parameter but I get stuck somewhere:\r\n\r\n\r\nThis is the constructor of myToken...\r\n\r\nconstructor (uint _quantity, uint _price, uint _ethconv, uint _fees, address payable _codex, address payable _to) public {\r\n\r\n    owner =  msg.sender;\r\n    codex = _codex;\r\n    quantity = _quantity;\r\n    price = _price;\r\n    ethconv = _ethconv;\r\n    seller = _to;\r\n    fees = _fees;\r\n    \r\n    initialSupply = _quantity;\r\n    ethPrice = _price * _ethconv;\r\n    \r\n    transfer(msg.sender, initialSupply);\r\n}\r\n\r\n## Steps to Reproduce\r\ntruffle migrate or truffle migrate --reset\r\n\r\nusing following migration script:\r\n\r\nAnd this is the migration script:\r\n\r\nvar myToken = artifacts.require(\"myToken\");\r\n\r\nlet quantity = 100;\r\nlet price = 50;\r\nlet ethconv = 1;\r\nlet fees = 45;\r\n\r\nowner = \"0xbFe32eD630d3dBEFFa7Fa1dc38aA3108B8df840c\";\r\ncodex = \"0x36373E9d3A70c971D4D04b09697DA7d337204CDa\";\r\nseller = \"0x3F3dEeA4877D97c98f610b5BE580DdA83dBC5C36\";\r\n\r\nmodule.exports = function(deployer) {\r\ndeployer.deploy(myToken, quantity, price, ethconv, fees, codex, seller, {from: owner});\r\n};\r\n\r\n\r\n\r\nPlease provide the shortest amount of steps to reproduce your issue.\r\n\r\n## Expected Behavior\r\nTo get my Token deployed on local RPC (ganache GUI local blockchain).\r\n\r\nWhat you expected to happen.\r\nto get my constructor initialize the variables at migration.\r\n\r\n## Actual Results\r\n\r\nWhat actually happened. Please give examples and support it with screenshots, copied output or error messages.\r\n\r\nError: Error: Error:  *** Deployment Failed ***\r\n\r\n\"myToken\" hit a require or revert statement somewhere in its constructor. Try:\r\n   * Verifying that your constructor params satisfy all require conditions.\r\n   * Adding reason strings to your require statements.\r\n\r\n    at Object.run (/usr/lib/node_modules/truffle/build/webpack:/packages/truffle-migrate/index.js:92:1)\r\n    at process._tickCallback (internal/process/next_tick.js:68:7)\r\n\r\n\r\n\r\n## Environment\r\n\r\n* Operating System: 4.18.0-21-generic #22-Ubuntu SMP (running inside Virtual Box 6.0)\r\n* Ethereum client: Ganache GUI v2.0.2 beta 0\r\n* Truffle version (`truffle version`): previously V.5.0.19 and now Truffle v5.0.25 (core: 5.0.25)  .\r\n* node version (`node --version`): Node v10.15.3\r\n* npm version (`npm --version`): 6.9.2 (just upgraded).\r\n",
  "closed_by": {
    "login": "alexandreValente",
    "id": 25650621,
    "node_id": "MDQ6VXNlcjI1NjUwNjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/25650621?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexandreValente",
    "html_url": "https://github.com/alexandreValente",
    "followers_url": "https://api.github.com/users/alexandreValente/followers",
    "following_url": "https://api.github.com/users/alexandreValente/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexandreValente/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexandreValente/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexandreValente/subscriptions",
    "organizations_url": "https://api.github.com/users/alexandreValente/orgs",
    "repos_url": "https://api.github.com/users/alexandreValente/repos",
    "events_url": "https://api.github.com/users/alexandreValente/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexandreValente/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/506968620",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2141#issuecomment-506968620",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2141",
    "id": 506968620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjk2ODYyMA==",
    "user": {
      "login": "alexandreValente",
      "id": 25650621,
      "node_id": "MDQ6VXNlcjI1NjUwNjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25650621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexandreValente",
      "html_url": "https://github.com/alexandreValente",
      "followers_url": "https://api.github.com/users/alexandreValente/followers",
      "following_url": "https://api.github.com/users/alexandreValente/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexandreValente/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexandreValente/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexandreValente/subscriptions",
      "organizations_url": "https://api.github.com/users/alexandreValente/orgs",
      "repos_url": "https://api.github.com/users/alexandreValente/repos",
      "events_url": "https://api.github.com/users/alexandreValente/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexandreValente/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-29T16:12:18Z",
    "updated_at": "2019-06-29T16:12:18Z",
    "author_association": "NONE",
    "body": "OK I found my error...I made a mistake when calling the transfer function...transfer(msg.sender, initialSupply); This is the function causing the revert. And the parameters the error message talks about is about the function not the constructor parameters.\r\nI have set this function in comment and the migration works as expected.\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/506968620/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

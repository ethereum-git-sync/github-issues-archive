{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2216",
  "id": 467871807,
  "node_id": "MDU6SXNzdWU0Njc4NzE4MDc=",
  "number": 2216,
  "title": "Invalid Opcode",
  "user": {
    "login": "mindrunner",
    "id": 1413542,
    "node_id": "MDQ6VXNlcjE0MTM1NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1413542?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mindrunner",
    "html_url": "https://github.com/mindrunner",
    "followers_url": "https://api.github.com/users/mindrunner/followers",
    "following_url": "https://api.github.com/users/mindrunner/following{/other_user}",
    "gists_url": "https://api.github.com/users/mindrunner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mindrunner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mindrunner/subscriptions",
    "organizations_url": "https://api.github.com/users/mindrunner/orgs",
    "repos_url": "https://api.github.com/users/mindrunner/repos",
    "events_url": "https://api.github.com/users/mindrunner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mindrunner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2019-07-14T18:47:05Z",
  "updated_at": "2021-07-29T14:35:33Z",
  "closed_at": "2019-07-15T17:48:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n## Issue\r\n\r\nI am getting an invalid opcode error from solc (I think) when compiling my contracts. This happens with truffle 5.0.26 and 5.0.27. Dowgrading to 5.0.1 solved my problem. Did not test other versions. In Gitter nobody answered my question.\r\n\r\n## Steps to Reproduce\r\n\r\n1) clone https://github.com/mindrunner/ethereum-supply-chain-tracking\r\n2) run truffle test\r\n\r\n## Expected Behavior\r\n\r\nTests are either suceeding or failing\r\n\r\n## Actual Results\r\n\r\n```\r\n[le@w530]: ~/src/ethereum-supply-chain-tracking/cacao>$ truffle test\r\nUsing network 'development'.\r\n\r\n\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/base/SupplyChain.sol\r\n> Artifacts written to /tmp/test-119611-1587-198to5y.cnsf\r\n> Compiled successfully using:\r\n   - solc: 0.5.8+commit.23d335f2.Emscripten.clang\r\n\r\nError: Error: Error: Returned error: VM Exception while processing transaction: invalid opcode\r\n    at Object.run (/usr/lib/node_modules/truffle/build/webpack:/packages/truffle-migrate/index.js:92:1)\r\n    at processTicksAndRejections (internal/process/task_queues.js:86:5)\r\nTruffle v5.0.25 (core: 5.0.25)\r\nNode v11.15.0\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: Arch Linux \r\n* Ethereum client: Ganache CLI v6.0.3 (ganache-core: 2.0.2)\r\n* Truffle version (`truffle version`): 5.0.27\r\n* node version (`node --version`): v11.15.0\r\n* npm version (`npm --version`): 6.10.1\r\n",
  "closed_by": {
    "login": "mindrunner",
    "id": 1413542,
    "node_id": "MDQ6VXNlcjE0MTM1NDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1413542?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mindrunner",
    "html_url": "https://github.com/mindrunner",
    "followers_url": "https://api.github.com/users/mindrunner/followers",
    "following_url": "https://api.github.com/users/mindrunner/following{/other_user}",
    "gists_url": "https://api.github.com/users/mindrunner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mindrunner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mindrunner/subscriptions",
    "organizations_url": "https://api.github.com/users/mindrunner/orgs",
    "repos_url": "https://api.github.com/users/mindrunner/repos",
    "events_url": "https://api.github.com/users/mindrunner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mindrunner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511233785",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2216#issuecomment-511233785",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216",
    "id": 511233785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTIzMzc4NQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-14T20:41:39Z",
    "updated_at": "2019-07-14T20:41:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @mindrunner , setting the compiler evmVersion for solc to `\"byzantium\"` in your config should do the trick ðŸ¤ž .\r\n\r\nAs of `0.5.5`, `solc` defaults to compiling to `petersburg`.\r\n\r\nYou could also use the latest version of `ganache-cli` since I believe that defaults to using `petersburg` now as well.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511233785/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511502265",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2216#issuecomment-511502265",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216",
    "id": 511502265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTUwMjI2NQ==",
    "user": {
      "login": "mindrunner",
      "id": 1413542,
      "node_id": "MDQ6VXNlcjE0MTM1NDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1413542?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mindrunner",
      "html_url": "https://github.com/mindrunner",
      "followers_url": "https://api.github.com/users/mindrunner/followers",
      "following_url": "https://api.github.com/users/mindrunner/following{/other_user}",
      "gists_url": "https://api.github.com/users/mindrunner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mindrunner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mindrunner/subscriptions",
      "organizations_url": "https://api.github.com/users/mindrunner/orgs",
      "repos_url": "https://api.github.com/users/mindrunner/repos",
      "events_url": "https://api.github.com/users/mindrunner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mindrunner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-15T17:48:20Z",
    "updated_at": "2019-07-15T17:48:20Z",
    "author_association": "NONE",
    "body": "Perfect, that helps a lot. Wasn't really aware of the outdated ganache-cli. All ganache and truffle packages are horribly outdated on Arch. Got everything from npm now and works way better! :)\r\n\r\nCheers",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511502265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/889199289",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2216#issuecomment-889199289",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2216",
    "id": 889199289,
    "node_id": "IC_kwDOAkfq-c41ABq5",
    "user": {
      "login": "codeoffconduct",
      "id": 59344690,
      "node_id": "MDQ6VXNlcjU5MzQ0Njkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/59344690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/codeoffconduct",
      "html_url": "https://github.com/codeoffconduct",
      "followers_url": "https://api.github.com/users/codeoffconduct/followers",
      "following_url": "https://api.github.com/users/codeoffconduct/following{/other_user}",
      "gists_url": "https://api.github.com/users/codeoffconduct/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/codeoffconduct/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/codeoffconduct/subscriptions",
      "organizations_url": "https://api.github.com/users/codeoffconduct/orgs",
      "repos_url": "https://api.github.com/users/codeoffconduct/repos",
      "events_url": "https://api.github.com/users/codeoffconduct/events{/privacy}",
      "received_events_url": "https://api.github.com/users/codeoffconduct/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T14:35:33Z",
    "updated_at": "2021-07-29T14:35:33Z",
    "author_association": "NONE",
    "body": "> Hey @mindrunner , setting the compiler evmVersion for solc to `\"byzantium\"` in your config should do the trick ðŸ¤ž .\r\n> \r\n> As of `0.5.5`, `solc` defaults to compiling to `petersburg`.\r\n> \r\n> You could also use the latest version of `ganache-cli` since I believe that defaults to using `petersburg` now as well.\r\n\r\nYou made my day my friend. I spent 2 days figuring out what it could be. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/889199289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/101",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/101",
  "id": 137612810,
  "node_id": "MDU6SXNzdWUxMzc2MTI4MTA=",
  "number": 101,
  "title": "Fails when not installing globally",
  "user": {
    "login": "jonnor",
    "id": 45185,
    "node_id": "MDQ6VXNlcjQ1MTg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/45185?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jonnor",
    "html_url": "https://github.com/jonnor",
    "followers_url": "https://api.github.com/users/jonnor/followers",
    "following_url": "https://api.github.com/users/jonnor/following{/other_user}",
    "gists_url": "https://api.github.com/users/jonnor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jonnor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jonnor/subscriptions",
    "organizations_url": "https://api.github.com/users/jonnor/orgs",
    "repos_url": "https://api.github.com/users/jonnor/repos",
    "events_url": "https://api.github.com/users/jonnor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jonnor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2016-03-01T15:59:01Z",
  "updated_at": "2016-03-24T15:22:11Z",
  "closed_at": "2016-03-24T15:22:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```\nnpm install truffle\n[jon@jon-laptop dapp]$ ./node_modules/.bin/truffle init\n./node_modules/.bin/truffle: line 19: cd: /usr/lib/node_modules/truffle/: No such file or directory\n./node_modules/.bin/truffle: line 20: /usr/lib/node_modules/truffle//node_modules/.bin/babel-node: No such file or directory\n```\n\nThis makes it hard to install without root privileges, and tricky for developers to ensure they are on the same version. It also requires extra setup in Travis CI, cause `npm install` won't pull it in anymore.\n",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/101/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/190789296",
    "html_url": "https://github.com/trufflesuite/truffle/issues/101#issuecomment-190789296",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101",
    "id": 190789296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDc4OTI5Ng==",
    "user": {
      "login": "jonnor",
      "id": 45185,
      "node_id": "MDQ6VXNlcjQ1MTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/45185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonnor",
      "html_url": "https://github.com/jonnor",
      "followers_url": "https://api.github.com/users/jonnor/followers",
      "following_url": "https://api.github.com/users/jonnor/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonnor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonnor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonnor/subscriptions",
      "organizations_url": "https://api.github.com/users/jonnor/orgs",
      "repos_url": "https://api.github.com/users/jonnor/repos",
      "events_url": "https://api.github.com/users/jonnor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonnor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-01T16:14:17Z",
    "updated_at": "2016-03-01T16:14:17Z",
    "author_association": "NONE",
    "body": "Looked into the `truffle` script which has those hardcoding, and instead did the equivalent. However it fails with some ES6/babel things:\n\n```\n[jon@jon-laptop dapp]$ ./node_modules/truffle/node_modules/.bin/babel-node ./node_modules/truffle/truffle.es6 \n/home/jon/work/thegrid/dapp/node_modules/truffle/lib/config.es6:195\n    config.expect = function(expected_path, description=\"file\", extra=\"\", callback) {\nSyntaxError: Unexpected token =\n  at exports.runInThisContext (vm.js:53:16)\n  at Module._extensions..js (module.js:417:10)\n  at Object.require.extensions.(anonymous function) [as .es6] (/home/jon/work/thegrid/dapp/node_modules/truffle/node_modules/babel/node_modules/babel-core/lib/api/register/node.js:214:7)\n  at Module.load (/home/jon/work/thegrid/dapp/node_modules/truffle/node_modules/coffee-script/lib/coffee-script/register.js:45:36)\n  at Function.Module._load (module.js:301:12)\n```\n\nThis on nodejs 4.2\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/190789296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/190795921",
    "html_url": "https://github.com/trufflesuite/truffle/issues/101#issuecomment-190795921",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101",
    "id": 190795921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MDc5NTkyMQ==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-01T16:28:11Z",
    "updated_at": "2016-03-01T16:28:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @jonnor. I'm currently in the process of revamping the scripts that get run, mostly for windows support, but it'll result in better organization and portability in the long run. Can you do this for me:\n\nFirst, pull from the `windows` branch and install locally:\n\n```\n$ git clone https://github.com/ConsenSys/truffle.git\n$ cd truffle\n$ git checkout windows\n$ npm install\n```\n\nThen, try running truffle through the new `cli.js`:\n\n```\n(in truffle dir)\n$ node cli.js <options>\n```\n\nDoes that work for you? My guess is it should. Let me know -- I expect this to be pushed to master in days.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/190795921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/191223326",
    "html_url": "https://github.com/trufflesuite/truffle/issues/101#issuecomment-191223326",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101",
    "id": 191223326,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTIyMzMyNg==",
    "user": {
      "login": "jonnor",
      "id": 45185,
      "node_id": "MDQ6VXNlcjQ1MTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/45185?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonnor",
      "html_url": "https://github.com/jonnor",
      "followers_url": "https://api.github.com/users/jonnor/followers",
      "following_url": "https://api.github.com/users/jonnor/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonnor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonnor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonnor/subscriptions",
      "organizations_url": "https://api.github.com/users/jonnor/orgs",
      "repos_url": "https://api.github.com/users/jonnor/repos",
      "events_url": "https://api.github.com/users/jonnor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonnor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-02T12:34:35Z",
    "updated_at": "2016-03-02T12:34:35Z",
    "author_association": "NONE",
    "body": "I fixed it by adding a `./truffle` wrapper to my project (included below), inspired by the original truffle shell script. This works for now, can try to remove when you've pushed the portability fixes master / released it.\n\n```\n#!/bin/bash\n\n# Replicated from truffle bash script to work with non-global NPM install\n# See https://github.com/ConsenSys/truffle/issues/101\nexport TRUFFLE_WORKING_DIRECTORY=`pwd`;\nexport TRUFFLE_NPM_LOCATION=`pwd`/node_modules/truffle;\n\n# Hack. babel-node will clobber -e, and it doesn't look like `--` will stop it.\n# Because we're doing string replacement, we have to take edge cases into account.\nargs=\" $@\"\nargs=${args// -e / --environment }\nargs=${args// -e=/ --environment=}\nargs=${args// -environment/ --environment}\n\ncd ${TRUFFLE_NPM_LOCATION}\n./node_modules/.bin/babel-node ./truffle.es6 -- ${args}\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/191223326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/200884090",
    "html_url": "https://github.com/trufflesuite/truffle/issues/101#issuecomment-200884090",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/101",
    "id": 200884090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIwMDg4NDA5MA==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-24T15:22:11Z",
    "updated_at": "2016-03-24T15:22:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jonnor I just tried, and this is fixed on master. A script shows up at `./node_modules/.bin/truffle` when installed locally, and it seemed to work for me. Will close this -- although master hasn't been released to npm yet. Please reopen if you continue to encounter issues.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/200884090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

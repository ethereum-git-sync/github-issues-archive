{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2818",
  "id": 562108337,
  "node_id": "MDU6SXNzdWU1NjIxMDgzMzc=",
  "number": 2818,
  "title": "Mocha globals in exec to iterate quickly on tests (or no-compile, no-deploy option for test)",
  "user": {
    "login": "jjgonecrypto",
    "id": 799038,
    "node_id": "MDQ6VXNlcjc5OTAzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/799038?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jjgonecrypto",
    "html_url": "https://github.com/jjgonecrypto",
    "followers_url": "https://api.github.com/users/jjgonecrypto/followers",
    "following_url": "https://api.github.com/users/jjgonecrypto/following{/other_user}",
    "gists_url": "https://api.github.com/users/jjgonecrypto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jjgonecrypto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jjgonecrypto/subscriptions",
    "organizations_url": "https://api.github.com/users/jjgonecrypto/orgs",
    "repos_url": "https://api.github.com/users/jjgonecrypto/repos",
    "events_url": "https://api.github.com/users/jjgonecrypto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jjgonecrypto/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 1086852667,
      "node_id": "MDU6TGFiZWwxMDg2ODUyNjY3",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20requirements",
      "name": "needs requirements",
      "color": "d4c5f9",
      "default": false,
      "description": "feature request is unclear"
    },
    {
      "id": 1675041996,
      "node_id": "MDU6TGFiZWwxNjc1MDQxOTk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority4%20%F0%9F%93%8B",
      "name": "priority4 ðŸ“‹",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-02-09T02:06:57Z",
  "updated_at": "2020-03-03T17:37:36Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI'd like to know if there is a way to execute tests in truffle console (or otherwise) without having to restart ganache and redeploy between test runs. This is imperative to speed up the feedback loop when iterating on test specs when there are no changes to the underlying Solidity files. (Note: we are employing snapshot and restores before and after each test respectively).\r\n\r\n## Steps to Reproduce\r\n\r\n1. `truffle console`\r\n2. `> deploy`\r\n3. `> exec singleTest.js`\r\n4. repeat 3\r\n\r\n## Expected Behavior\r\n\r\nI'm looking for a way to run step 3 with mocha injected, with the same globals available (`web3`, `contract`, `it`, `before(Each)?|after(Each)?`, that way I don't have to rewrite tests in a generic way for `exec` and then port them back to regular specs when done. \r\n\r\nAn alternative might be adding flags to the `test` command as in: `> test --no-compile --no-deploy singleTest.js` - but that's a feature request I suspect.\r\n\r\n## Actual Results\r\n\r\n`exec` won't setup testing globals and `test` will always try to recompile and redeploy, adding on redundant wait time to the testing feedback loop\r\n\r\n## Environment\r\n\r\n* Operating System: macOS Catalina\r\n* Ethereum client: ganache 6.8.2\r\n* Truffle version (`truffle version`): 5.1.4\r\n* node version (`node --version`): 10.16.3\r\n* npm version (`npm --version`): 6.13.7 \r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/588379155",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2818#issuecomment-588379155",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818",
    "id": 588379155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODM3OTE1NQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-19T18:41:11Z",
    "updated_at": "2020-02-19T18:41:11Z",
    "author_association": "MEMBER",
    "body": "Thanks for raising this issue! \r\n\r\nWe've been discussing this issue a bunch recently. Note that there are edge cases, if your tests alter your contract state. We're looking at solutions for allowing this special-case behavior in a \"buyer beware\" way (i.e., we can't solve the edge cases, but maybe your tests aren't affected by those)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/588379155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/588581653",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2818#issuecomment-588581653",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818",
    "id": 588581653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4ODU4MTY1Mw==",
    "user": {
      "login": "jjgonecrypto",
      "id": 799038,
      "node_id": "MDQ6VXNlcjc5OTAzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799038?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jjgonecrypto",
      "html_url": "https://github.com/jjgonecrypto",
      "followers_url": "https://api.github.com/users/jjgonecrypto/followers",
      "following_url": "https://api.github.com/users/jjgonecrypto/following{/other_user}",
      "gists_url": "https://api.github.com/users/jjgonecrypto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jjgonecrypto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jjgonecrypto/subscriptions",
      "organizations_url": "https://api.github.com/users/jjgonecrypto/orgs",
      "repos_url": "https://api.github.com/users/jjgonecrypto/repos",
      "events_url": "https://api.github.com/users/jjgonecrypto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jjgonecrypto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-20T02:46:46Z",
    "updated_at": "2020-02-20T02:46:46Z",
    "author_association": "NONE",
    "body": "Thanks @gnidan . We are using `evm_snapshot` on `beforeEach` and `evm_revert` on `afterEach` so tests altering contract state is not an issue. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/588581653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/594074925",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2818#issuecomment-594074925",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2818",
    "id": 594074925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDA3NDkyNQ==",
    "user": {
      "login": "sirpy",
      "id": 671095,
      "node_id": "MDQ6VXNlcjY3MTA5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/671095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sirpy",
      "html_url": "https://github.com/sirpy",
      "followers_url": "https://api.github.com/users/sirpy/followers",
      "following_url": "https://api.github.com/users/sirpy/following{/other_user}",
      "gists_url": "https://api.github.com/users/sirpy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sirpy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sirpy/subscriptions",
      "organizations_url": "https://api.github.com/users/sirpy/orgs",
      "repos_url": "https://api.github.com/users/sirpy/repos",
      "events_url": "https://api.github.com/users/sirpy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sirpy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-03T17:37:35Z",
    "updated_at": "2020-03-03T17:37:35Z",
    "author_association": "NONE",
    "body": "plus one...\r\ni think allowing exec to run tests would be perfect\r\nmake truffle test keep cleanroom behaviour, but use exec for quick iterations when doing TDD",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/594074925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

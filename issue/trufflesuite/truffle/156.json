{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/156",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/156",
  "id": 154455860,
  "node_id": "MDU6SXNzdWUxNTQ0NTU4NjA=",
  "number": 156,
  "title": "Truffle not working with new Geth/v1.4.3-stable",
  "user": {
    "login": "msbachler",
    "id": 4311824,
    "node_id": "MDQ6VXNlcjQzMTE4MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4311824?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/msbachler",
    "html_url": "https://github.com/msbachler",
    "followers_url": "https://api.github.com/users/msbachler/followers",
    "following_url": "https://api.github.com/users/msbachler/following{/other_user}",
    "gists_url": "https://api.github.com/users/msbachler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/msbachler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msbachler/subscriptions",
    "organizations_url": "https://api.github.com/users/msbachler/orgs",
    "repos_url": "https://api.github.com/users/msbachler/repos",
    "events_url": "https://api.github.com/users/msbachler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/msbachler/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2016-05-12T11:04:10Z",
  "updated_at": "2016-05-17T11:17:13Z",
  "closed_at": "2016-05-17T11:17:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I ran an apt-get update this morning on one of my blockchain servers and it upgraded me to Geth  v1.4.3-stable. I am on Truffle v 1.0.3. When I rebuilt one of my dapps and then ran it in the browser I got the following error:\n\napp.js:5318 Uncaught TypeError: Cannot read property 'filter' of undefined\n\nTo help you locate it the actual code snippet in app.js around that error is:\n\n,u=function(t){t.abi.filter(function(t){return\"function\"===t.type}).map(function(e){return new a(t._eth,e,t.address)}).forEach(function(e){e.attachToContract(t)})},\n\nJust to be absolutely sure I rebuild a different dapp as well and ran that and got exactly the same error message as above. \n\nI have the same two dapps on a different server still running running Geth 1.3.6 with Truffle v1.0.3 and they run fine and don't get that error.\n",
  "closed_by": {
    "login": "msbachler",
    "id": 4311824,
    "node_id": "MDQ6VXNlcjQzMTE4MjQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4311824?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/msbachler",
    "html_url": "https://github.com/msbachler",
    "followers_url": "https://api.github.com/users/msbachler/followers",
    "following_url": "https://api.github.com/users/msbachler/following{/other_user}",
    "gists_url": "https://api.github.com/users/msbachler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/msbachler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/msbachler/subscriptions",
    "organizations_url": "https://api.github.com/users/msbachler/orgs",
    "repos_url": "https://api.github.com/users/msbachler/repos",
    "events_url": "https://api.github.com/users/msbachler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/msbachler/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/156/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219658226",
    "html_url": "https://github.com/trufflesuite/truffle/issues/156#issuecomment-219658226",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156",
    "id": 219658226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTY1ODIyNg==",
    "user": {
      "login": "msbachler",
      "id": 4311824,
      "node_id": "MDQ6VXNlcjQzMTE4MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4311824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msbachler",
      "html_url": "https://github.com/msbachler",
      "followers_url": "https://api.github.com/users/msbachler/followers",
      "following_url": "https://api.github.com/users/msbachler/following{/other_user}",
      "gists_url": "https://api.github.com/users/msbachler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msbachler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msbachler/subscriptions",
      "organizations_url": "https://api.github.com/users/msbachler/orgs",
      "repos_url": "https://api.github.com/users/msbachler/repos",
      "events_url": "https://api.github.com/users/msbachler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msbachler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T08:53:52Z",
    "updated_at": "2016-05-17T08:53:52Z",
    "author_association": "NONE",
    "body": "I put some console logging to your app.js generated code. It is specifically upset about the object 't' in the above code snippet because it does not have the property 'abi' on which it wants to get the 'filter'. I printed out 't' and it is:\n\nt:{\"_eth\":{\"_requestManager\":{\"provider\":{\"host\":\"http://212.219.130.124:54200\"},\"polls\":{},\"timeout\":null},\"compile\":{}},\"transactionHash\":null,\"address\":\"0xd1bb9301e1a2d24965ef8ce1de7f9353946d5621\"}\n\nNo idea if this helps you. I will keep digging. This is a major issue for me so I really need to get it fixed. I particularly want to know if there is anything I can do by just changing my code in some way to fix this.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219658226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219664468",
    "html_url": "https://github.com/trufflesuite/truffle/issues/156#issuecomment-219664468",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156",
    "id": 219664468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTY2NDQ2OA==",
    "user": {
      "login": "msbachler",
      "id": 4311824,
      "node_id": "MDQ6VXNlcjQzMTE4MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4311824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msbachler",
      "html_url": "https://github.com/msbachler",
      "followers_url": "https://api.github.com/users/msbachler/followers",
      "following_url": "https://api.github.com/users/msbachler/following{/other_user}",
      "gists_url": "https://api.github.com/users/msbachler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msbachler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msbachler/subscriptions",
      "organizations_url": "https://api.github.com/users/msbachler/orgs",
      "repos_url": "https://api.github.com/users/msbachler/repos",
      "events_url": "https://api.github.com/users/msbachler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msbachler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T09:22:20Z",
    "updated_at": "2016-05-17T09:22:20Z",
    "author_association": "NONE",
    "body": "OK. It is failing at the point of trying to create a new instance of a contract. I put some console logs into the following code from your app.js:\n\n```\nPudding.at = function(address) {\n  var web3 = Pudding.getWeb3();\n  var contract_class = web3.eth.contract(this.prototype.abi);\n  var contract = contract_class.at(address);\n  return new this(contract);\n};\n```\n\n'this.prototype' is an empty object, so does not have an abi property when calling web3.eth.contract. Both the contract js code snippets for my two contracts have definitely been copied into the bottom of app.js as usual. I don't know enough about Pudding or your app.js really to know what is failing exactly. I will keep digging.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219664468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219670163",
    "html_url": "https://github.com/trufflesuite/truffle/issues/156#issuecomment-219670163",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156",
    "id": 219670163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTY3MDE2Mw==",
    "user": {
      "login": "msbachler",
      "id": 4311824,
      "node_id": "MDQ6VXNlcjQzMTE4MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4311824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msbachler",
      "html_url": "https://github.com/msbachler",
      "followers_url": "https://api.github.com/users/msbachler/followers",
      "following_url": "https://api.github.com/users/msbachler/following{/other_user}",
      "gists_url": "https://api.github.com/users/msbachler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msbachler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msbachler/subscriptions",
      "organizations_url": "https://api.github.com/users/msbachler/orgs",
      "repos_url": "https://api.github.com/users/msbachler/repos",
      "events_url": "https://api.github.com/users/msbachler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msbachler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T09:47:05Z",
    "updated_at": "2016-05-17T09:47:05Z",
    "author_association": "NONE",
    "body": "I compared the app.js on my new blockchain server that works with the one on the old blockchain server that has been upgraded. Both return '1.0.3' for the 'truffle version' command. But the <contract>.sol.js code is quite different on both machines. Person.console.js on the new server says in the contract_data object that it was 'generated_with:\"2.0.6\"'. On the old server it says 'Person.generated_with = \"1.0.3\"'? But both say they are truffle version 1.0.3. What exactly does the generated_with property refer to?\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219670163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219688829",
    "html_url": "https://github.com/trufflesuite/truffle/issues/156#issuecomment-219688829",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/156",
    "id": 219688829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIxOTY4ODgyOQ==",
    "user": {
      "login": "msbachler",
      "id": 4311824,
      "node_id": "MDQ6VXNlcjQzMTE4MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4311824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/msbachler",
      "html_url": "https://github.com/msbachler",
      "followers_url": "https://api.github.com/users/msbachler/followers",
      "following_url": "https://api.github.com/users/msbachler/following{/other_user}",
      "gists_url": "https://api.github.com/users/msbachler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/msbachler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/msbachler/subscriptions",
      "organizations_url": "https://api.github.com/users/msbachler/orgs",
      "repos_url": "https://api.github.com/users/msbachler/repos",
      "events_url": "https://api.github.com/users/msbachler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/msbachler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-17T11:17:08Z",
    "updated_at": "2016-05-17T11:17:08Z",
    "author_association": "NONE",
    "body": "OK. After some diffing I worked out that the most likely issue to why the two .sol.js contract files where so different on the two servers was the ether-pudding library. So I ran npm install -g ether-pudding on the old server (with the new geth) to be sure it had the newest version. (I had run npm undate -g already). I then truffle compiled and truffle deployed, and truffle built. That dapp I was testing with now works in the same way as it does on the new server. They both get some promise warnings, which I will look at later but at least they both work now. So I can go ahead and update the new server to the new Geth without worrying. I am not sure I really understand npm and how it updates stuff very well. I will just keep checking versions on the too for all dependent libraries are as required as npm update is obviously not updating as I expected.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/219688829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

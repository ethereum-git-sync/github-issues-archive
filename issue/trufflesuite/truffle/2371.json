{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2371",
  "id": 489683399,
  "node_id": "MDU6SXNzdWU0ODk2ODMzOTk=",
  "number": 2371,
  "title": "TypeScript tests dont run",
  "user": {
    "login": "angel-manuel",
    "id": 5376023,
    "node_id": "MDQ6VXNlcjUzNzYwMjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5376023?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/angel-manuel",
    "html_url": "https://github.com/angel-manuel",
    "followers_url": "https://api.github.com/users/angel-manuel/followers",
    "following_url": "https://api.github.com/users/angel-manuel/following{/other_user}",
    "gists_url": "https://api.github.com/users/angel-manuel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/angel-manuel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/angel-manuel/subscriptions",
    "organizations_url": "https://api.github.com/users/angel-manuel/orgs",
    "repos_url": "https://api.github.com/users/angel-manuel/repos",
    "events_url": "https://api.github.com/users/angel-manuel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/angel-manuel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-09-05T11:06:03Z",
  "updated_at": "2022-01-14T07:22:06Z",
  "closed_at": "2019-09-05T18:44:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nTypeScript tests fail when parsing ES6 import and possibly all TypeScript extra stuff.\r\nProbably mocha \r\n\r\n## Steps to Reproduce\r\n\r\n```sh\r\nmkdir Metacoin\r\ncd Metacoin\r\ntruffle unbox metacoin\r\n\r\n# Adding import to test and converting to .ts\r\necho \"import web3 from 'web3'\" > import.ts\r\ncat import.ts test/metacoin.js > test/metacoin.ts\r\nrm import.ts test/metacoin.js\r\n\r\nnpx truffle test\r\n```\r\n\r\nIs also interesting to run the following after installing ts-node\r\n```\r\nnpx mocha --require ts-node/register test/metacoin.ts\r\n```\r\n\r\n## Expected Behavior\r\n\r\nTests run correctly\r\n\r\n## Actual Results\r\n\r\n```\r\n% npx truffle test\r\n\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/ConvertLib.sol\r\n> Compiling ./contracts/MetaCoin.sol\r\n> Compiling ./contracts/Migrations.sol\r\n> Compiling ./test/TestMetaCoin.sol\r\n\r\n/tmp/Metacoin/test/metacoin.ts:1\r\nimport web3 from 'web3'\r\n       ^^^^\r\n\r\nSyntaxError: Unexpected identifier\r\n    at Module._compile (internal/modules/cjs/loader.js:872:18)\r\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:947:10)\r\n    at Module.load (internal/modules/cjs/loader.js:790:32)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:703:12)\r\n    at Module.require (internal/modules/cjs/loader.js:830:19)\r\n    at require (internal/modules/cjs/helpers.js:68:18)\r\n    at /home/arturo/.nvm/versions/node/v12.10.0/lib/node_modules/truffle/node_modules/mocha/lib/mocha.js:250:27\r\n    at Array.forEach (<anonymous>)\r\n    at Mocha.loadFiles (/home/arturo/.nvm/versions/node/v12.10.0/lib/node_modules/truffle/node_modules/mocha/lib/mocha.js:247:14)\r\n    at Mocha.run (/home/arturo/.nvm/versions/node/v12.10.0/lib/node_modules/truffle/node_modules/mocha/lib/mocha.js:576:10)\r\n    at /home/arturo/.nvm/versions/node/v12.10.0/lib/node_modules/truffle/build/webpack:/packages/core/lib/test.js:116:1\r\n    at new Promise (<anonymous>)\r\n    at Object.run (/home/arturo/.nvm/versions/node/v12.10.0/lib/node_modules/truffle/build/webpack:/packages/core/lib/test.js:115:1)\r\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\nTruffle v5.0.35 (core: 5.0.35)\r\nNode v12.10.0\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: `Linux Mint 19 4.15.0-60-generic`\r\n* Ethereum client:\r\n* Truffle version (`truffle version`): `v5.0.35`\r\n* node version (`node --version`): `v12.10.0`\r\n* npm version (`npm --version`): `6.10.3`\r\n",
  "closed_by": {
    "login": "angel-manuel",
    "id": 5376023,
    "node_id": "MDQ6VXNlcjUzNzYwMjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5376023?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/angel-manuel",
    "html_url": "https://github.com/angel-manuel",
    "followers_url": "https://api.github.com/users/angel-manuel/followers",
    "following_url": "https://api.github.com/users/angel-manuel/following{/other_user}",
    "gists_url": "https://api.github.com/users/angel-manuel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/angel-manuel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/angel-manuel/subscriptions",
    "organizations_url": "https://api.github.com/users/angel-manuel/orgs",
    "repos_url": "https://api.github.com/users/angel-manuel/repos",
    "events_url": "https://api.github.com/users/angel-manuel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/angel-manuel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/528378080",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2371#issuecomment-528378080",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371",
    "id": 528378080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyODM3ODA4MA==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-05T13:59:05Z",
    "updated_at": "2019-09-05T13:59:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @angel-manuel ! Current TS test support requires using [`truffle-typings`](https://github.com/ethereum-ts/truffle-typings) with [`typechain`](https://medium.com/ethereum-ts/typesafe-truffle-with-typescript-and-typechain-1773e5b733b4).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/528378080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/528520965",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2371#issuecomment-528520965",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371",
    "id": 528520965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyODUyMDk2NQ==",
    "user": {
      "login": "angel-manuel",
      "id": 5376023,
      "node_id": "MDQ6VXNlcjUzNzYwMjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5376023?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/angel-manuel",
      "html_url": "https://github.com/angel-manuel",
      "followers_url": "https://api.github.com/users/angel-manuel/followers",
      "following_url": "https://api.github.com/users/angel-manuel/following{/other_user}",
      "gists_url": "https://api.github.com/users/angel-manuel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/angel-manuel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/angel-manuel/subscriptions",
      "organizations_url": "https://api.github.com/users/angel-manuel/orgs",
      "repos_url": "https://api.github.com/users/angel-manuel/repos",
      "events_url": "https://api.github.com/users/angel-manuel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/angel-manuel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-05T18:44:48Z",
    "updated_at": "2019-09-05T18:44:48Z",
    "author_association": "NONE",
    "body": "Solved adding the following to `truffle-config.js`\r\n\r\n```js\r\nrequire('ts-node/register')\r\n\r\n// OPTIONAL: Allows the use of tsconfig path mappings with ts-node\r\nrequire('tsconfig-paths/register')\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/528520965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/555603294",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2371#issuecomment-555603294",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371",
    "id": 555603294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NTYwMzI5NA==",
    "user": {
      "login": "digulla",
      "id": 159306,
      "node_id": "MDQ6VXNlcjE1OTMwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/159306?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/digulla",
      "html_url": "https://github.com/digulla",
      "followers_url": "https://api.github.com/users/digulla/followers",
      "following_url": "https://api.github.com/users/digulla/following{/other_user}",
      "gists_url": "https://api.github.com/users/digulla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/digulla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/digulla/subscriptions",
      "organizations_url": "https://api.github.com/users/digulla/orgs",
      "repos_url": "https://api.github.com/users/digulla/repos",
      "events_url": "https://api.github.com/users/digulla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/digulla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-19T16:57:04Z",
    "updated_at": "2019-11-19T16:57:04Z",
    "author_association": "NONE",
    "body": "What dependencies need to be in package.json for this to work?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/555603294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/791442561",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2371#issuecomment-791442561",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371",
    "id": 791442561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MTQ0MjU2MQ==",
    "user": {
      "login": "flcoder",
      "id": 660141,
      "node_id": "MDQ6VXNlcjY2MDE0MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/660141?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flcoder",
      "html_url": "https://github.com/flcoder",
      "followers_url": "https://api.github.com/users/flcoder/followers",
      "following_url": "https://api.github.com/users/flcoder/following{/other_user}",
      "gists_url": "https://api.github.com/users/flcoder/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flcoder/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flcoder/subscriptions",
      "organizations_url": "https://api.github.com/users/flcoder/orgs",
      "repos_url": "https://api.github.com/users/flcoder/repos",
      "events_url": "https://api.github.com/users/flcoder/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flcoder/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-05T14:10:13Z",
    "updated_at": "2021-03-05T14:10:13Z",
    "author_association": "NONE",
    "body": "I'm using `truffle exec script.ts` and it's treating it as js\r\n```typescript\r\nconst handleUncaught = (uncaught:any) => { log(`Uncaught:`, uncaught) }\r\n                               ^\r\nSyntaxError: Unexpected token ':'\r\n```\r\n\r\nI have `require('ts-node/register')` in `truffle-config.js`.\r\n\r\nIs there something else I need to do?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/791442561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1012840046",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2371#issuecomment-1012840046",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2371",
    "id": 1012840046,
    "node_id": "IC_kwDOAkfq-c48XrZu",
    "user": {
      "login": "atrhacker",
      "id": 343136,
      "node_id": "MDQ6VXNlcjM0MzEzNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/343136?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/atrhacker",
      "html_url": "https://github.com/atrhacker",
      "followers_url": "https://api.github.com/users/atrhacker/followers",
      "following_url": "https://api.github.com/users/atrhacker/following{/other_user}",
      "gists_url": "https://api.github.com/users/atrhacker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/atrhacker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/atrhacker/subscriptions",
      "organizations_url": "https://api.github.com/users/atrhacker/orgs",
      "repos_url": "https://api.github.com/users/atrhacker/repos",
      "events_url": "https://api.github.com/users/atrhacker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/atrhacker/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-14T07:22:06Z",
    "updated_at": "2022-01-14T07:22:06Z",
    "author_association": "NONE",
    "body": "> I'm using `truffle exec script.ts` and it's treating it as js\r\n> \r\n> ```ts\r\n> const handleUncaught = (uncaught:any) => { log(`Uncaught:`, uncaught) }\r\n>                                ^\r\n> SyntaxError: Unexpected token ':'\r\n> ```\r\n> \r\n> I have `require('ts-node/register')` in `truffle-config.js`.\r\n> \r\n> Is there something else I need to do?\r\n\r\nsorry to raise this issue again. did you solve this issue ?\r\nusing ts in normal test is working but not with truffle exec (import statement not working, unexcpted token for : , etc..)\r\n\r\nMany thanks in advance",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1012840046/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

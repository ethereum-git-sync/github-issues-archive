{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/5735",
  "id": 1464639167,
  "node_id": "I_kwDOAkfq-c5XTJ6_",
  "number": 5735,
  "title": "Cannot initialize HDWalletProvider",
  "user": {
    "login": "dancespiele",
    "id": 29615753,
    "node_id": "MDQ6VXNlcjI5NjE1NzUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/29615753?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dancespiele",
    "html_url": "https://github.com/dancespiele",
    "followers_url": "https://api.github.com/users/dancespiele/followers",
    "following_url": "https://api.github.com/users/dancespiele/following{/other_user}",
    "gists_url": "https://api.github.com/users/dancespiele/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dancespiele/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dancespiele/subscriptions",
    "organizations_url": "https://api.github.com/users/dancespiele/orgs",
    "repos_url": "https://api.github.com/users/dancespiele/repos",
    "events_url": "https://api.github.com/users/dancespiele/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dancespiele/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-11-25T14:41:09Z",
  "updated_at": "2023-01-12T18:08:21Z",
  "closed_at": "2023-01-12T18:08:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've [opened a support ticket](https://trufflesuite.zendesk.com/hc/en-us/requests/new) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nWhen I try to initialize `HDWalletProvider` I get this error:\r\n```bash\r\n `Expected input type is Uint8Array (got object)`\r\ntoBytes (node_modules/@noble/hashes/utils.js:89:15)\r\n      at pbkdf2Init (node_modules/@noble/hashes/pbkdf2.js:17:45)\r\n      at pbkdf2 (node_modules/@noble/hashes/pbkdf2.js:42:44)\r\n      at mnemonicToSeedSync (node_modules/@scure/bip39/index.js:140:32)\r\n      at HDWalletProvider.checkBIP39Mnemonic (node_modules/@truffle/hdwallet-provider/src/index.ts:329:25)\r\n      at new HDWalletProvider (node_modules/@truffle/hdwallet-provider/src/index.ts:109:12)\r\n      at Object.<anonymous> (integration-tests/dtp.spec.tsx:20:47)\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\nThe code to reproduce:\r\n```ts\r\nif (process.env.SEED_WORDS) {\r\n      const seedphrase = process.env.SEED_WORDS\r\n      appConfig.web3Provider = new HDWalletProvider({\r\n        mnemonic: {\r\n          phrase: seedphrase\r\n        },\r\n        providerOrUrl: appConfig.web3ProviderUri,\r\n        addressIndex: 0,\r\n        numberOfAddresses: 10,\r\n      })\r\n    }\r\n```\r\nI checked that SEE_WORDS contain the 12 words\r\n\r\n## Expected Behavior\r\n\r\nHDWalletProvider should initialize\r\n\r\n## Actual Results\r\n\r\n```bash\r\n `Expected input type is Uint8Array (got object)`\r\ntoBytes (node_modules/@noble/hashes/utils.js:89:15)\r\n      at pbkdf2Init (node_modules/@noble/hashes/pbkdf2.js:17:45)\r\n      at pbkdf2 (node_modules/@noble/hashes/pbkdf2.js:42:44)\r\n      at mnemonicToSeedSync (node_modules/@scure/bip39/index.js:140:32)\r\n      at HDWalletProvider.checkBIP39Mnemonic (node_modules/@truffle/hdwallet-provider/src/index.ts:329:25)\r\n      at new HDWalletProvider (node_modules/@truffle/hdwallet-provider/src/index.ts:109:12)\r\n      at Object.<anonymous> (integration-tests/dtp.spec.tsx:20:47)\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: Linux Manjaro\r\n* Ethereum client: polygon infura\r\n* @truffle/hdwallet-provider version (`truffle version`): 2.1.2\r\n* node version (`node --version`): v16.14.0\r\n* npm version (`npm --version`): 8.19.2\r\n",
  "closed_by": {
    "login": "lsqproduction",
    "id": 12772017,
    "node_id": "MDQ6VXNlcjEyNzcyMDE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/12772017?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lsqproduction",
    "html_url": "https://github.com/lsqproduction",
    "followers_url": "https://api.github.com/users/lsqproduction/followers",
    "following_url": "https://api.github.com/users/lsqproduction/following{/other_user}",
    "gists_url": "https://api.github.com/users/lsqproduction/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lsqproduction/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lsqproduction/subscriptions",
    "organizations_url": "https://api.github.com/users/lsqproduction/orgs",
    "repos_url": "https://api.github.com/users/lsqproduction/repos",
    "events_url": "https://api.github.com/users/lsqproduction/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lsqproduction/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1334197701",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5735#issuecomment-1334197701",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735",
    "id": 1334197701,
    "node_id": "IC_kwDOAkfq-c5Phj3F",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-01T18:47:29Z",
    "updated_at": "2022-12-01T18:47:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @dancespiele, thanks for reporting this issue! Just checking to make sure, your seed phrase is a string with 12 words from the bip39 list. You can find the word list [here](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki). Also note that you cannot arbitrarily pick words in any order as there is some sort of checksum validation that happens. Let me know if you think that your seed phrase is in the proper format or not!\r\n\r\nIf it is the case that your seed phrase is not in the proper format, Truffle should probably produce a better error message for this case!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1334197701/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1380801366",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5735#issuecomment-1380801366",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5735",
    "id": 1380801366,
    "node_id": "IC_kwDOAkfq-c5STVtW",
    "user": {
      "login": "lsqproduction",
      "id": 12772017,
      "node_id": "MDQ6VXNlcjEyNzcyMDE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12772017?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsqproduction",
      "html_url": "https://github.com/lsqproduction",
      "followers_url": "https://api.github.com/users/lsqproduction/followers",
      "following_url": "https://api.github.com/users/lsqproduction/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsqproduction/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsqproduction/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsqproduction/subscriptions",
      "organizations_url": "https://api.github.com/users/lsqproduction/orgs",
      "repos_url": "https://api.github.com/users/lsqproduction/repos",
      "events_url": "https://api.github.com/users/lsqproduction/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsqproduction/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-12T18:08:20Z",
    "updated_at": "2023-01-12T18:08:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing for issue maintenance. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1380801366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

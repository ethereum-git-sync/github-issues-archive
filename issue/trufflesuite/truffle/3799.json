{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3799",
  "id": 808323524,
  "node_id": "MDU6SXNzdWU4MDgzMjM1MjQ=",
  "number": 3799,
  "title": "Having \"-\" in import filename break compilation in weird way (5.1.66)",
  "user": {
    "login": "hellwolf",
    "id": 186660,
    "node_id": "MDQ6VXNlcjE4NjY2MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/186660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hellwolf",
    "html_url": "https://github.com/hellwolf",
    "followers_url": "https://api.github.com/users/hellwolf/followers",
    "following_url": "https://api.github.com/users/hellwolf/following{/other_user}",
    "gists_url": "https://api.github.com/users/hellwolf/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hellwolf/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hellwolf/subscriptions",
    "organizations_url": "https://api.github.com/users/hellwolf/orgs",
    "repos_url": "https://api.github.com/users/hellwolf/repos",
    "events_url": "https://api.github.com/users/hellwolf/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hellwolf/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-15T08:42:11Z",
  "updated_at": "2021-02-19T23:14:39Z",
  "closed_at": "2021-02-19T23:14:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nSince \"5.1.66\", there are certain import stops working in weird way. And it's been observed that it happens when the file name contains \"-\" symbol.\r\n\r\n## Steps to Reproduce\r\n\r\nUsing truffle version: 5.1.66\r\nUsing solidity version: 0.7.6\r\n\r\n- truffle init\r\n- install `@openzeppelin/contracts`\r\n- create a test contract, starting:\r\n\r\n```\r\npragma solidity ^0.7.0;\r\nimport \"@openzeppelin/contracts/token/ERC20/IERC20.sol\";\r\n```\r\n\r\ntruffle compile, it should pass.\r\n\r\nBut change to the following deliberately:\r\n\r\n```\r\nimport \"@open-zeppelin/contracts/token/ERC20/IERC20.sol\";\r\n```\r\n\r\nNoticing a \"-\" in between, it fails with a mysterious error:\r\n\r\n```\r\nCompileError: /home/hellwolf/tmp/truffle-test/contracts/ERC20.sol:5:1: ParserError: Source \"È¢bn-zeppelin/contracts/utils/Context.sol\" not found: Callback not supported.\r\nimport \"@open-zeppelin/contracts/utils/Context.sol\";\r\n^--------------------------------------------------^\r\n```\r\n\r\nNote that, the project I am working on unfortunately has a \"-\" in the file name, namely https://www.npmjs.com/package/@superfluid-finance/ethereum-contracts. It really made a head scratchier!\r\n\r\n## Expected Behavior\r\n\r\nShould import file with its name containing \"-\" and compile correctly.\r\n\r\n## Actual Results\r\n\r\nTruffle 5.1.66 failed with mysterious error.\r\n\r\n## Environment\r\n\r\n* Operating System:  ubuntu\r\n* Ethereum client: n/a\r\n* Truffle version (`truffle version`): 5.1.66\r\n* node version (`node --version`): 12.20.2\r\n* npm version (`npm --version`): 6.14.11\r\n",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780150085",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3799#issuecomment-780150085",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
    "id": 780150085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDE1MDA4NQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T22:10:01Z",
    "updated_at": "2021-02-16T22:13:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, I'm a little confused by this report.  Of course importing from `@open-zeppelin/contracts` doesn't work because that's not the name of the project; it's `@openzeppelin` rather than `@open-zeppelin`.  As for the mysterious error you're seeing, that's simply solc's error message when it can't locate an imported source; we recently decided to start exposing those error messages rather than replacing them with our own as we had been, as [our own had some problems](https://github.com/trufflesuite/truffle/issues/3668).\r\n\r\nHowever, you say that imports with dashes in them don't work more generaly?  Do you have a reproduction example for that we could check out?  (One that doesn't rely on trying to import a non-existent source, that is.)  Meanwhile I'll try to reproduce this myself, I suppose, and see if I can figure out what's going on.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780150085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780158141",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3799#issuecomment-780158141",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
    "id": 780158141,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDE1ODE0MQ==",
    "user": {
      "login": "hellwolf",
      "id": 186660,
      "node_id": "MDQ6VXNlcjE4NjY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/186660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hellwolf",
      "html_url": "https://github.com/hellwolf",
      "followers_url": "https://api.github.com/users/hellwolf/followers",
      "following_url": "https://api.github.com/users/hellwolf/following{/other_user}",
      "gists_url": "https://api.github.com/users/hellwolf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hellwolf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hellwolf/subscriptions",
      "organizations_url": "https://api.github.com/users/hellwolf/orgs",
      "repos_url": "https://api.github.com/users/hellwolf/repos",
      "events_url": "https://api.github.com/users/hellwolf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hellwolf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T22:27:28Z",
    "updated_at": "2021-02-16T22:27:41Z",
    "author_association": "NONE",
    "body": "> However, you say that imports with dashes in them don't work more generaly?\r\n\r\nYes, that's what I am saying. Using openzeppelin was just a convenient way to show that the error message is indicating something is off.\r\n\r\nAnother way to reproduce:\r\n\r\n1. download the folder `https://github.com/superfluid-finance/protocol-monorepo/tree/dev/examples/dividends-rights-token-demo`\r\n2. change the truffle version to 5.1.66 in package.json.\r\n3. yarn install & yarn build\r\n\r\nIt will fail. but if you skip step (2), it will succeed.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780158141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780160108",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3799#issuecomment-780160108",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
    "id": 780160108,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDE2MDEwOA==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T22:31:42Z",
    "updated_at": "2021-02-16T22:31:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, I was able to reproduce an error compiling Superfluid, and was able to confirm that the error is new in 5.1.66.  I'll have to look into this and see what's causing it.  It's not clear to me that dashes are actually the cause; relative imports with dashes worked fine, for instance.  Still, something's clearly going wrong here, so I'll look into it.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780160108/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780178507",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3799#issuecomment-780178507",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
    "id": 780178507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDE3ODUwNw==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T23:13:50Z",
    "updated_at": "2021-02-16T23:16:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, I've put up PR #3802 to fix this, and unless there's some unforeseen problem it should go out with this week's release.  Sorry about the problem, thanks for the report!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780178507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780189017",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3799#issuecomment-780189017",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
    "id": 780189017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDE4OTAxNw==",
    "user": {
      "login": "hellwolf",
      "id": 186660,
      "node_id": "MDQ6VXNlcjE4NjY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/186660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hellwolf",
      "html_url": "https://github.com/hellwolf",
      "followers_url": "https://api.github.com/users/hellwolf/followers",
      "following_url": "https://api.github.com/users/hellwolf/following{/other_user}",
      "gists_url": "https://api.github.com/users/hellwolf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hellwolf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hellwolf/subscriptions",
      "organizations_url": "https://api.github.com/users/hellwolf/orgs",
      "repos_url": "https://api.github.com/users/hellwolf/repos",
      "events_url": "https://api.github.com/users/hellwolf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hellwolf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-16T23:40:05Z",
    "updated_at": "2021-02-16T23:40:05Z",
    "author_association": "NONE",
    "body": "thanks for the fast response!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/780189017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/782441875",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3799#issuecomment-782441875",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3799",
    "id": 782441875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjQ0MTg3NQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-19T23:14:38Z",
    "updated_at": "2021-02-19T23:14:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fix is released now, closing!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/782441875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

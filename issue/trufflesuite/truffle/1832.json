{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1832",
  "id": 422690440,
  "node_id": "MDU6SXNzdWU0MjI2OTA0NDA=",
  "number": 1832,
  "title": "Deployment artifacts do not store smart contract records for multiple networks with the same network ID",
  "user": {
    "login": "busypeter",
    "id": 23269459,
    "node_id": "MDQ6VXNlcjIzMjY5NDU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/23269459?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/busypeter",
    "html_url": "https://github.com/busypeter",
    "followers_url": "https://api.github.com/users/busypeter/followers",
    "following_url": "https://api.github.com/users/busypeter/following{/other_user}",
    "gists_url": "https://api.github.com/users/busypeter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/busypeter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/busypeter/subscriptions",
    "organizations_url": "https://api.github.com/users/busypeter/orgs",
    "repos_url": "https://api.github.com/users/busypeter/repos",
    "events_url": "https://api.github.com/users/busypeter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/busypeter/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 230393329,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjk=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    },
    {
      "id": 971536096,
      "node_id": "MDU6TGFiZWw5NzE1MzYwOTY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Migrations",
      "name": "Migrations",
      "color": "b887db",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-03-19T11:53:04Z",
  "updated_at": "2019-07-09T02:55:41Z",
  "closed_at": "2019-07-09T02:55:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nThe deployment artifacts in ``build/contracts/`` store the migration state, i.e. addresses of deployed contracts. These addresses are stored per network ID, so if in truffle-config.js we define more than one network with the same ID, ``truffle migrate`` will only store state for one network (probably for the last deployment, I haven't tested this).\r\n\r\nThere are multiple scenarios where this feature is required. One would be where we have multiple test environments, e.g. TEST and STAGE, and we want them on the same testnet. In this case, in truffle-config.js we'll have two networks with different names, but with the same network ID.\r\n\r\n## Steps to Reproduce\r\n1. Add the following networks to truffle-config.js:\r\n```\r\n    stage: {\r\n      provider: () => {\r\n        return new HDWalletProvider(STAGE_MNEMONIC, \"https://rinkeby.infura.io/v3/\" + INFURA_STAGE_TOKEN)\r\n      },\r\n      network_id: 4\r\n    },\r\n    dev: {\r\n      provider: () => {\r\n        return new HDWalletProvider(DEV_MNEMONIC, \"https://rinkeby.infura.io/v3/\" + INFURA_DEV_TOKEN)\r\n      },\r\n      network_id: 4\r\n    },\r\n```\r\n2. Run ``truffle migrate``.\r\n\r\n## Expected Behavior\r\n\r\nDeployment artifact stores contract addresses for both 'stage' and 'dev' networks.\r\n\r\n## Actual Results\r\n\r\nDeployment artifact stores contract addresses for one network only.\r\n\r\n## Environment\r\n\r\n* Operating System: Any\r\n* Ethereum client: Any\r\n* Truffle version (`truffle version`): 5.0.2\r\n* node version (`node --version`): 8.10.0\r\n* npm version (`npm --version`): 6.5.0\r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/484194917",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1832#issuecomment-484194917",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832",
    "id": 484194917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDE5NDkxNw==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-17T17:51:52Z",
    "updated_at": "2019-04-17T17:51:52Z",
    "author_association": "MEMBER",
    "body": "Yep. This is a known limitation. Frustrating as heck, I know! I'll group this into #1718, since there's ongoing work there to address these problems. Thanks for bringing this up!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/484194917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/509467111",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1832#issuecomment-509467111",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1832",
    "id": 509467111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTQ2NzExMQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-09T02:55:40Z",
    "updated_at": "2019-07-09T02:55:40Z",
    "author_association": "MEMBER",
    "body": "Issue maintenance: closing this as duplicate of #1087 ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/509467111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

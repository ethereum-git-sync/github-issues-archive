{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1586",
  "id": 393932983,
  "node_id": "MDU6SXNzdWUzOTM5MzI5ODM=",
  "number": 1586,
  "title": "truffle-contract sendTransaction clears data parameter",
  "user": {
    "login": "ritave",
    "id": 1614945,
    "node_id": "MDQ6VXNlcjE2MTQ5NDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1614945?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ritave",
    "html_url": "https://github.com/ritave",
    "followers_url": "https://api.github.com/users/ritave/followers",
    "following_url": "https://api.github.com/users/ritave/following{/other_user}",
    "gists_url": "https://api.github.com/users/ritave/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ritave/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ritave/subscriptions",
    "organizations_url": "https://api.github.com/users/ritave/orgs",
    "repos_url": "https://api.github.com/users/ritave/repos",
    "events_url": "https://api.github.com/users/ritave/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ritave/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-12-24T21:50:14Z",
  "updated_at": "2019-08-03T13:49:46Z",
  "closed_at": "2019-08-03T13:49:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\nWhen trying to send a transaction as such `contactInstance.sendTransaction({data: myData})`, the data parameter is cleared when sent through RPC.\r\n\r\n```javascript\r\nExample.deployed().then(instance => instance.sendTransaction({data: \"0x1234\"})).then(console.log);\r\n```\r\nThe resulting RPC sent misses the `data` param.\r\n\r\nThis is an error on this line https://github.com/trufflesuite/truffle/blob/develop/packages/truffle-contract/lib/execute.js#L166 which should check if `params.data` exist before setting it to `undefined`\r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/450941452",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-450941452",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 450941452,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDk0MTQ1Mg==",
    "user": {
      "login": "nventuro",
      "id": 2530770,
      "node_id": "MDQ6VXNlcjI1MzA3NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2530770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nventuro",
      "html_url": "https://github.com/nventuro",
      "followers_url": "https://api.github.com/users/nventuro/followers",
      "following_url": "https://api.github.com/users/nventuro/following{/other_user}",
      "gists_url": "https://api.github.com/users/nventuro/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nventuro/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nventuro/subscriptions",
      "organizations_url": "https://api.github.com/users/nventuro/orgs",
      "repos_url": "https://api.github.com/users/nventuro/repos",
      "events_url": "https://api.github.com/users/nventuro/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nventuro/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-02T18:22:23Z",
    "updated_at": "2019-01-02T18:22:23Z",
    "author_association": "NONE",
    "body": "This is a departure from pre-truffle 5 behavior, where having a `data` field worked. Since the API is almost the same as `web3.eth.sendTransaction` (except that we don't need to fill in the `to` parameter), we could just use that one, but calling it directly means logs are not decoded, which is a bummer.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/450941452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/472404356",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-472404356",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 472404356,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MjQwNDM1Ng==",
    "user": {
      "login": "area",
      "id": 311812,
      "node_id": "MDQ6VXNlcjMxMTgxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/311812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/area",
      "html_url": "https://github.com/area",
      "followers_url": "https://api.github.com/users/area/followers",
      "following_url": "https://api.github.com/users/area/following{/other_user}",
      "gists_url": "https://api.github.com/users/area/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/area/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/area/subscriptions",
      "organizations_url": "https://api.github.com/users/area/orgs",
      "repos_url": "https://api.github.com/users/area/repos",
      "events_url": "https://api.github.com/users/area/events{/privacy}",
      "received_events_url": "https://api.github.com/users/area/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-13T12:37:01Z",
    "updated_at": "2019-03-13T12:37:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is very unintuitive behaviour, especially as it's advertised in the documentation as \r\n\r\n> has the same API as web3.eth.sendTransaction\r\n\r\nAdmittedly, this is in the section titled 'triggering the fallback function', but that requires a certain level of reading-between-the-lines to arrive at the conclusion that `data` is unsupported.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/472404356/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/473397361",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-473397361",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 473397361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzM5NzM2MQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-15T18:32:52Z",
    "updated_at": "2019-03-15T18:32:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nventuro If you want to trigger a transaction using the data field, you probably want to use `instance.method.sendTransaction`. And yes, like @area said `instance.sendTransaction` is currently primarily intended to run the fallback function. However, currently this is not strictly the same as `web3.eth.sendTransaction` and probably should be. So in the future I think we are going to consider changing that, if you want to submit a PR and help expedite the process you are more than welcome :) Thanks!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/473397361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/501268761",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-501268761",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 501268761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMTI2ODc2MQ==",
    "user": {
      "login": "LiorRabin",
      "id": 6675831,
      "node_id": "MDQ6VXNlcjY2NzU4MzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6675831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LiorRabin",
      "html_url": "https://github.com/LiorRabin",
      "followers_url": "https://api.github.com/users/LiorRabin/followers",
      "following_url": "https://api.github.com/users/LiorRabin/following{/other_user}",
      "gists_url": "https://api.github.com/users/LiorRabin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LiorRabin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LiorRabin/subscriptions",
      "organizations_url": "https://api.github.com/users/LiorRabin/orgs",
      "repos_url": "https://api.github.com/users/LiorRabin/repos",
      "events_url": "https://api.github.com/users/LiorRabin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LiorRabin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-12T13:17:45Z",
    "updated_at": "2019-06-12T13:17:45Z",
    "author_association": "NONE",
    "body": "Hello, so how do I actually send data to the fallback function?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/501268761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/516721395",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-516721395",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 516721395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjcyMTM5NQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-31T06:49:41Z",
    "updated_at": "2019-07-31T06:49:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just encountered this problem.  Wanted to use `contract.sendTransaction` in a test to make sure we could properly handle some mis-encoded data, but, well, it didn't work, because it didn't send the data.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/516721395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/516874940",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-516874940",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 516874940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjg3NDk0MA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-31T14:31:51Z",
    "updated_at": "2019-07-31T14:32:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@LiorRabin What would be the use case for supplying data to the fallback function? I don't think it would serve any purpose, correct me if I'm wrong. According to the Solidity docs, \"This function cannot have arguments... It is executed on a call to the contract if none of the other functions match the given function identifier (or if no data was supplied at all).\"\r\n\r\nhttps://solidity.readthedocs.io/en/v0.5.10/contracts.html#fallback-function",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/516874940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/516879932",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1586#issuecomment-516879932",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1586",
    "id": 516879932,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjg3OTkzMg==",
    "user": {
      "login": "LiorRabin",
      "id": 6675831,
      "node_id": "MDQ6VXNlcjY2NzU4MzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6675831?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LiorRabin",
      "html_url": "https://github.com/LiorRabin",
      "followers_url": "https://api.github.com/users/LiorRabin/followers",
      "following_url": "https://api.github.com/users/LiorRabin/following{/other_user}",
      "gists_url": "https://api.github.com/users/LiorRabin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LiorRabin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LiorRabin/subscriptions",
      "organizations_url": "https://api.github.com/users/LiorRabin/orgs",
      "repos_url": "https://api.github.com/users/LiorRabin/repos",
      "events_url": "https://api.github.com/users/LiorRabin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LiorRabin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-31T14:43:14Z",
    "updated_at": "2019-07-31T14:43:14Z",
    "author_association": "NONE",
    "body": "@eggplantzzz the use case I had in mind when asking the question turned out to be irrelevant.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/516879932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

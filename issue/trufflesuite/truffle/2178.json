{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2178",
  "id": 467009833,
  "node_id": "MDU6SXNzdWU0NjcwMDk4MzM=",
  "number": 2178,
  "title": "Unstructured Storage Proxy Pattern with Quorum ",
  "user": {
    "login": "FITStaff",
    "id": 34380717,
    "node_id": "MDQ6VXNlcjM0MzgwNzE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/34380717?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/FITStaff",
    "html_url": "https://github.com/FITStaff",
    "followers_url": "https://api.github.com/users/FITStaff/followers",
    "following_url": "https://api.github.com/users/FITStaff/following{/other_user}",
    "gists_url": "https://api.github.com/users/FITStaff/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/FITStaff/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/FITStaff/subscriptions",
    "organizations_url": "https://api.github.com/users/FITStaff/orgs",
    "repos_url": "https://api.github.com/users/FITStaff/repos",
    "events_url": "https://api.github.com/users/FITStaff/events{/privacy}",
    "received_events_url": "https://api.github.com/users/FITStaff/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1205502427,
      "node_id": "MDU6TGFiZWwxMjA1NTAyNDI3",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Enterprise",
      "name": "Enterprise",
      "color": "b8def2",
      "default": false,
      "description": ""
    },
    {
      "id": 1205502598,
      "node_id": "MDU6TGFiZWwxMjA1NTAyNTk4",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Quorum",
      "name": "Quorum",
      "color": "a5f7dd",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-07-11T17:08:24Z",
  "updated_at": "2019-07-12T15:52:55Z",
  "closed_at": "2019-07-12T15:52:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I implemented an unstructured storage proxy pattern that I’ve successfully tested in Remix. However, when I call the logic contract via the proxy in Truffle I get an error. There’s one function modifier and it just checks to make sure the caller is an Owner, which in this case the calling address is the owner/deployer of the contract. Any ideas? The first image below is the error message and the second image below is proof that I’m connected to the correct contract instance and have already set the proxy target to the most updated contract address and am calling from the contract owner.\r\n \r\n![image](https://user-images.githubusercontent.com/34380717/61070481-d436bb00-a3dc-11e9-9485-8dffafdd9d2b.png)\r\n\r\nProof that proxy is pointed to most updated address and that my calling address is registered as the owner, which is the function modifier controlling the ‘registerOrganization’ method:\r\n![image](https://user-images.githubusercontent.com/34380717/61070512-e7498b00-a3dc-11e9-8463-f742365fd41e.png)\r\n\r\n\r\nStack:\r\nTruffle v4.1.15: For some reason, this was the only version I could get my quorum private contracts to deploy without any errors\r\nBlockchain: QuorumMaker (local)\r\nNode: v10.16.0\r\nnpm: 6.9.0\r\nProxy Pattern: https://github.com/zeppelinos/labs/tree/master/upgradeability_using_unstructured_storage\r\n \r\n",
  "closed_by": {
    "login": "CruzMolina",
    "id": 7537712,
    "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CruzMolina",
    "html_url": "https://github.com/CruzMolina",
    "followers_url": "https://api.github.com/users/CruzMolina/followers",
    "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
    "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
    "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
    "repos_url": "https://api.github.com/users/CruzMolina/repos",
    "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510582559",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2178#issuecomment-510582559",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178",
    "id": 510582559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDU4MjU1OQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-11T17:38:12Z",
    "updated_at": "2019-07-11T17:38:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm, this probably won't fix it, but can you try passing your owner address as a string (i.e. `('FL', 1, 'test', \"0x...\")`?\r\n\r\nYou mention that your contract is a private contract, if so you might need to interact with it using a `privateFor` param passed in your tx call. `privateFor` params were officially supported as of truffle `v5.0.14`.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510582559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510589873",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2178#issuecomment-510589873",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178",
    "id": 510589873,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDU4OTg3Mw==",
    "user": {
      "login": "parm23",
      "id": 42729062,
      "node_id": "MDQ6VXNlcjQyNzI5MDYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/42729062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/parm23",
      "html_url": "https://github.com/parm23",
      "followers_url": "https://api.github.com/users/parm23/followers",
      "following_url": "https://api.github.com/users/parm23/following{/other_user}",
      "gists_url": "https://api.github.com/users/parm23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/parm23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/parm23/subscriptions",
      "organizations_url": "https://api.github.com/users/parm23/orgs",
      "repos_url": "https://api.github.com/users/parm23/repos",
      "events_url": "https://api.github.com/users/parm23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/parm23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-11T17:57:45Z",
    "updated_at": "2019-07-11T17:57:45Z",
    "author_association": "NONE",
    "body": "@CruzMolina I moved from 4.1.15 (post deployment) to v5.0.14. After running the transaction again, it returned a more insightful error\r\n\r\ntruffle(quorumMaker1)> Directory.at(OwnedUpgradeabilityProxyDirectory.address).registerOrganization(\"FL\", \"1\", \"test\", \"0x7090462b2c5e3416fb6bb505814261772e49b194\")\r\nThrown:\r\nevalmachine.<anonymous>:0\r\nDirectory.at(OwnedUpgradeabilityProxyDirectory.address).registerOrganization(\"FL\", \"1\", \"test\", \"0x7090462b2c5e3416fb6bb505814261772e49b194\")\r\n                                                        ^\r\n\r\nTypeError: Directory.at(...).registerOrganization is not a function\r\n    at evalmachine.<anonymous>:0:57\r\n    at Script.runInContext (vm.js:133:20)\r\n    at runScript (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:352961:14)\r\n    at Console.interpret (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:352975:19)\r\n    at ReplManager.interpret (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:353960:18)\r\n    at bound (domain.js:402:14)\r\n    at REPLServer.runBound [as eval] (domain.js:415:12)\r\n    at REPLServer.onLine (repl.js:642:10)\r\n    at REPLServer.emit (events.js:198:13)\r\n    at REPLServer.EventEmitter.emit (domain.js:448:20)\r\ntruffle(quorumMaker1)> \r\n\r\n\r\nIt seems as if it's not finding the 'registerOrganization' function in the proxy, but the proxy is supposed to forward that to the Directory contract as part of the proxy's fallback function. The contract is calling \"Directory\" at the Proxy's address, per the instructions of the unstructured proxy pattern. Seems to be able to resolve this fine in Remix. Any experience with this?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510589873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510595145",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2178#issuecomment-510595145",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178",
    "id": 510595145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDU5NTE0NQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-11T18:11:51Z",
    "updated_at": "2019-07-11T18:11:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "If you're using the VM on Remix, it isn't going to provide accurate quorum RPC responses, since I believe it uses `ethereumjs-vm` under the hood.\r\n\r\nIt might help to provide a repo for reproduction and/or reproduction steps since I'm not sure how you're migrating to QuorumMaker. Depending on how you deployed your various contracts, you might need to pass a `privateFor` param.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510595145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510610200",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2178#issuecomment-510610200",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178",
    "id": 510610200,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDYxMDIwMA==",
    "user": {
      "login": "parm23",
      "id": 42729062,
      "node_id": "MDQ6VXNlcjQyNzI5MDYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/42729062?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/parm23",
      "html_url": "https://github.com/parm23",
      "followers_url": "https://api.github.com/users/parm23/followers",
      "following_url": "https://api.github.com/users/parm23/following{/other_user}",
      "gists_url": "https://api.github.com/users/parm23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/parm23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/parm23/subscriptions",
      "organizations_url": "https://api.github.com/users/parm23/orgs",
      "repos_url": "https://api.github.com/users/parm23/repos",
      "events_url": "https://api.github.com/users/parm23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/parm23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-11T18:53:09Z",
    "updated_at": "2019-07-11T18:53:09Z",
    "author_association": "NONE",
    "body": "@CruzMolina this specific contract is actually public. I have some others that were made private, i removed those for now but you can check out my deploy script \r\n\r\nhttps://github.com/parm23/privateQuorumProxy/tree/master/truffle-init-default\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510610200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510938262",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2178#issuecomment-510938262",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2178",
    "id": 510938262,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDkzODI2Mg==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-12T15:52:54Z",
    "updated_at": "2019-07-12T15:52:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing since I believe this has been resolved over Gitter.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510938262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

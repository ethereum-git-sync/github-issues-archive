{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/324",
  "id": 198757206,
  "node_id": "MDU6SXNzdWUxOTg3NTcyMDY=",
  "number": 324,
  "title": "Truffle Build (Custom) broken in beta (3.0.0-9)",
  "user": {
    "login": "oladotunr",
    "id": 19908426,
    "node_id": "MDQ6VXNlcjE5OTA4NDI2",
    "avatar_url": "https://avatars.githubusercontent.com/u/19908426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/oladotunr",
    "html_url": "https://github.com/oladotunr",
    "followers_url": "https://api.github.com/users/oladotunr/followers",
    "following_url": "https://api.github.com/users/oladotunr/following{/other_user}",
    "gists_url": "https://api.github.com/users/oladotunr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/oladotunr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/oladotunr/subscriptions",
    "organizations_url": "https://api.github.com/users/oladotunr/orgs",
    "repos_url": "https://api.github.com/users/oladotunr/repos",
    "events_url": "https://api.github.com/users/oladotunr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/oladotunr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2017-01-04T16:58:34Z",
  "updated_at": "2018-10-24T18:14:16Z",
  "closed_at": "2018-10-24T18:14:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "---------------------------\r\n\r\n## Issue\r\n\r\nWe recently moved over to the `beta` branch to start making use of the new npm-based import functionality, although now it seems the custom build support is broken.\r\n\r\nWe used to define a custom `builder` class, instantiate it and pass the instance to `build` in our `truffle.js` file. Now that throws an error saying `No build configuration specified. Can't build.` which is fine. But now when we pass the same instance as `builder` it throws a separate error `Build configuration can no longer be specified as an object. Please see our documentation for an updated list of supported build configurations.` because it seems to be expecting our custom builder class instance to be a function (`truffle/lib/build.js - ln 96`)? which doesn't seem to make any sense as a logical type check, assuming you're expecting `builder` to be an object with the various `build`, `clean` etc functions and not just a flat function?\r\n\r\nHere's our `truffle.js` config file:\r\n\r\n```\r\nmodule.exports  = {\r\n  builder:      require('./builders/ownage-network-api-build.js')({\r\n    version:    \"1.0\"\r\n  }),\r\n\r\n  rpc: {\r\n    host:       \"localhost\",\r\n    port:       8545,\r\n    gas:        9999999 // For the Solidity tests.\r\n  }\r\n};\r\n```\r\nand here's what we have to do to get this to work; the required builder module extract (where ONIBuilder is a class with the various clean/build methods):\r\n\r\n```\r\nmodule.exports          = function(opts)\r\n{\r\n    var oni             = new ONIBuilder(opts);\r\n    var builder         = function(options, cb)\r\n    {\r\n        return this.build(options, cb);\r\n    }.bind(oni);\r\n    return builder;\r\n};\r\n```\r\nSo this works but it's messy and the clean function is never invoked due to the way the code assembles the `builder` in `truffle/lib/build.js - lns 100-102`. Again, the code to make this work is functional in the stable build of truffle (2.1.1) it seems the new changes desired to remove support for the `DefaultBuilder`, but doesn't provide a useful way to provide our own `builder` class, only a `builder` function that limits functionality somewhat.\r\nTo provide some context here: Our default builder allows us to package the ether-pudding compiled smart contract interface types into an npm module, to be packaged, versioned and distributed for internal usage across our separate codebases. The `truffle build` pipeline is pretty useful for us as it provides the convenience of driving the process cleanly, and providing the necessary truffle dependent functionality required as part of that process. I hope we don't lose it outright.\r\n\r\n## Steps to Reproduce\r\n\r\nSee the above description.\r\n\r\n## Expected Behavior\r\n\r\nPreviously (`truffle@2.1.1`) we'd just define our build class and instantiate it into the `build` config in the `truffle.js` file and It Just Worked. Would be great to be able to do that again without having to go around the houses.\r\n\r\n## Actual Results\r\n\r\nSee the above description.\r\n\r\n## Environment\r\n\r\n* Operating System: Any\r\n* Truffle version: 3.0.0-9\r\n* Ethereum client: Any\r\n* node version: Any \r\n* npm version: Any\r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/324/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/273049438",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-273049438",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 273049438,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MzA0OTQzOA==",
    "user": {
      "login": "KennyVan",
      "id": 5512387,
      "node_id": "MDQ6VXNlcjU1MTIzODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5512387?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KennyVan",
      "html_url": "https://github.com/KennyVan",
      "followers_url": "https://api.github.com/users/KennyVan/followers",
      "following_url": "https://api.github.com/users/KennyVan/following{/other_user}",
      "gists_url": "https://api.github.com/users/KennyVan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KennyVan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KennyVan/subscriptions",
      "organizations_url": "https://api.github.com/users/KennyVan/orgs",
      "repos_url": "https://api.github.com/users/KennyVan/repos",
      "events_url": "https://api.github.com/users/KennyVan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KennyVan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-17T08:19:01Z",
    "updated_at": "2017-01-17T08:19:01Z",
    "author_association": "NONE",
    "body": "This is not just the custom build that is broken.\r\n\r\nInitializing a new project and trying to run it is broken in general right now since Beta 8, I am now running Beta 7 pretty smoothly",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/273049438/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/275755367",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-275755367",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 275755367,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTc1NTM2Nw==",
    "user": {
      "login": "GNSPS",
      "id": 4008213,
      "node_id": "MDQ6VXNlcjQwMDgyMTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4008213?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GNSPS",
      "html_url": "https://github.com/GNSPS",
      "followers_url": "https://api.github.com/users/GNSPS/followers",
      "following_url": "https://api.github.com/users/GNSPS/following{/other_user}",
      "gists_url": "https://api.github.com/users/GNSPS/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GNSPS/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GNSPS/subscriptions",
      "organizations_url": "https://api.github.com/users/GNSPS/orgs",
      "repos_url": "https://api.github.com/users/GNSPS/repos",
      "events_url": "https://api.github.com/users/GNSPS/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GNSPS/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-27T19:40:38Z",
    "updated_at": "2017-01-27T19:40:38Z",
    "author_association": "NONE",
    "body": "+1",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/275755367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/276777762",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-276777762",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 276777762,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3Njc3Nzc2Mg==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-01T20:49:28Z",
    "updated_at": "2017-02-01T20:49:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @ownageio et. al., can you recheck this with Truffle 3.0.2? Note that even if you were using 3.0beta you will still need to handle breaking changes when upgrading to 3.0.2. See the [upgrade guide](http://truffleframework.com/tutorials/upgrading-from-truffle-2-to-3) for more info.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/276777762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/277044480",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-277044480",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 277044480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3NzA0NDQ4MA==",
    "user": {
      "login": "oladotunr",
      "id": 19908426,
      "node_id": "MDQ6VXNlcjE5OTA4NDI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19908426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oladotunr",
      "html_url": "https://github.com/oladotunr",
      "followers_url": "https://api.github.com/users/oladotunr/followers",
      "following_url": "https://api.github.com/users/oladotunr/following{/other_user}",
      "gists_url": "https://api.github.com/users/oladotunr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/oladotunr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/oladotunr/subscriptions",
      "organizations_url": "https://api.github.com/users/oladotunr/orgs",
      "repos_url": "https://api.github.com/users/oladotunr/repos",
      "events_url": "https://api.github.com/users/oladotunr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/oladotunr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-02T18:42:49Z",
    "updated_at": "2017-02-02T18:42:49Z",
    "author_association": "NONE",
    "body": "Thanks for this Tim,\r\n\r\nWill coordinate with Peter and test as we upgrade to 3.0.2.\r\n\r\nThanks for the excellent support.\r\n\r\nRegards,\r\n\r\n\r\n\r\nDotun Rominiyi\r\nDirector of Technology\r\nOwnage Ltd\r\nwww.ownage.io<http://www.ownage.io>\r\n\r\nFrom: Tim Coulter [mailto:notifications@github.com]\r\nSent: 01 February 2017 20:50\r\nTo: ConsenSys/truffle\r\nCc: Webmaster; Mention\r\nSubject: Re: [ConsenSys/truffle] Truffle Build (Custom) broken in beta (3.0.0-9) (#324)\r\n\r\n\r\nHey @ownageio<https://github.com/ownageio> et. al., can you recheck this with Truffle 3.0.2? Note that even if you were using 3.0beta you will still need to handle breaking changes when upgrading to 3.0.2. See the upgrade guide<http://truffleframework.com/tutorials/upgrading-from-truffle-2-to-3> for more info.\r\n\r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub<https://github.com/ConsenSys/truffle/issues/324#issuecomment-276777762>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AS_HSqA4Va0iOVkekM0CA4ApPs9cfkWqks5rYO_agaJpZM4La1eQ>.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/277044480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/309822828",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-309822828",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 309822828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwOTgyMjgyOA==",
    "user": {
      "login": "RichLinnell",
      "id": 204181,
      "node_id": "MDQ6VXNlcjIwNDE4MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/204181?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RichLinnell",
      "html_url": "https://github.com/RichLinnell",
      "followers_url": "https://api.github.com/users/RichLinnell/followers",
      "following_url": "https://api.github.com/users/RichLinnell/following{/other_user}",
      "gists_url": "https://api.github.com/users/RichLinnell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RichLinnell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RichLinnell/subscriptions",
      "organizations_url": "https://api.github.com/users/RichLinnell/orgs",
      "repos_url": "https://api.github.com/users/RichLinnell/repos",
      "events_url": "https://api.github.com/users/RichLinnell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RichLinnell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-20T17:00:44Z",
    "updated_at": "2017-06-20T17:00:44Z",
    "author_association": "NONE",
    "body": "I'm getting this error using Truffle v3.2.5. Is this no longer supported?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/309822828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/317438418",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-317438418",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 317438418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNzQzODQxOA==",
    "user": {
      "login": "DerekChia",
      "id": 1457728,
      "node_id": "MDQ6VXNlcjE0NTc3Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1457728?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DerekChia",
      "html_url": "https://github.com/DerekChia",
      "followers_url": "https://api.github.com/users/DerekChia/followers",
      "following_url": "https://api.github.com/users/DerekChia/following{/other_user}",
      "gists_url": "https://api.github.com/users/DerekChia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DerekChia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DerekChia/subscriptions",
      "organizations_url": "https://api.github.com/users/DerekChia/orgs",
      "repos_url": "https://api.github.com/users/DerekChia/repos",
      "events_url": "https://api.github.com/users/DerekChia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DerekChia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-24T14:22:46Z",
    "updated_at": "2017-07-24T14:22:46Z",
    "author_association": "NONE",
    "body": "Same, getting the same error after init. Any idea why this error appears?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/317438418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/432770308",
    "html_url": "https://github.com/trufflesuite/truffle/issues/324#issuecomment-432770308",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/324",
    "id": 432770308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjc3MDMwOA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-24T18:14:15Z",
    "updated_at": "2018-10-24T18:14:15Z",
    "author_association": "MEMBER",
    "body": "I'm betting this issue is out of date. Closing. Feel free to correct me, and I will reopen. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/432770308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

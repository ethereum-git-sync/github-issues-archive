{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3432",
  "id": 719960100,
  "node_id": "MDU6SXNzdWU3MTk5NjAxMDA=",
  "number": 3432,
  "title": "Remove unnecessary dependencies from abi-utils",
  "user": {
    "login": "sz-piotr",
    "id": 17070569,
    "node_id": "MDQ6VXNlcjE3MDcwNTY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17070569?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sz-piotr",
    "html_url": "https://github.com/sz-piotr",
    "followers_url": "https://api.github.com/users/sz-piotr/followers",
    "following_url": "https://api.github.com/users/sz-piotr/following{/other_user}",
    "gists_url": "https://api.github.com/users/sz-piotr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sz-piotr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sz-piotr/subscriptions",
    "organizations_url": "https://api.github.com/users/sz-piotr/orgs",
    "repos_url": "https://api.github.com/users/sz-piotr/repos",
    "events_url": "https://api.github.com/users/sz-piotr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sz-piotr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393329,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjk=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    },
    {
      "id": 1675041996,
      "node_id": "MDU6TGFiZWwxNjc1MDQxOTk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority4%20%F0%9F%93%8B",
      "name": "priority4 ðŸ“‹",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-10-13T07:36:11Z",
  "updated_at": "2020-10-14T17:46:46Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The package `@truffle/abi-utils` is sweet and simple, but requires a lot of potentially unnecessary dependencies. Some examples:\r\n- ~ajv~\r\n- crypto-js, debug and ajv from truffle/contract-schema\r\n- source-map-support \r\n- change-case and its 12 other dependencies\r\n\r\nIt would be great for the package to be as lean as possible.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 3,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/707910504",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3432#issuecomment-707910504",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432",
    "id": 707910504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzkxMDUwNA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-13T17:55:28Z",
    "updated_at": "2020-10-13T17:55:28Z",
    "author_association": "MEMBER",
    "body": "Note that we'll want to keep `source-map-support`, since that's what enables sourcemaps at runtime.\r\n\r\nProbably the first thing to do here is to remove the use of @truffle/contract-schema's `Abi` type, and move that into this package instead... I'm thinking that, in addition to the normalized types that abi-utils provides, we could also provide \"loose\" types. That would avoid the need to use the autogenerated types altogether.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/707910504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/707944603",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3432#issuecomment-707944603",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432",
    "id": 707944603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzk0NDYwMw==",
    "user": {
      "login": "sz-piotr",
      "id": 17070569,
      "node_id": "MDQ6VXNlcjE3MDcwNTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/17070569?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sz-piotr",
      "html_url": "https://github.com/sz-piotr",
      "followers_url": "https://api.github.com/users/sz-piotr/followers",
      "following_url": "https://api.github.com/users/sz-piotr/following{/other_user}",
      "gists_url": "https://api.github.com/users/sz-piotr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sz-piotr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sz-piotr/subscriptions",
      "organizations_url": "https://api.github.com/users/sz-piotr/orgs",
      "repos_url": "https://api.github.com/users/sz-piotr/repos",
      "events_url": "https://api.github.com/users/sz-piotr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sz-piotr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-13T18:58:58Z",
    "updated_at": "2020-10-13T18:58:58Z",
    "author_association": "NONE",
    "body": "I wanted to ask about source map support. Why is it part of all the libraries in truffle instead of being required once somewhere in the user facing part at the top?\r\n\r\nI did some research and it seems that it works great if the end user requires it but causes problems when being part of a library. Here a are some examples:\r\n\r\nhttps://github.com/facebook/jest/issues/10330\r\nhttps://github.com/TypeStrong/ts-node/issues/268\r\n\r\nWe also have had a lot of problems in Waffle because of this:\r\nhttps://github.com/EthWorks/Waffle/pull/336\r\n\r\nMaybe this dependency can also be reconsidered?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/707944603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/707945512",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3432#issuecomment-707945512",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3432",
    "id": 707945512,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzk0NTUxMg==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-13T19:00:52Z",
    "updated_at": "2020-10-13T19:02:32Z",
    "author_association": "MEMBER",
    "body": "Hm, I'll have to do research into that after meetings today. It's possible that we missed something. We decided to use that package just because stacktraces without source maps have been very problematic in the past, and we wanted to solve the problem categorically.\r\n\r\nBut if that's not best practice, then it's certainly worth reconsidering! cc @haltman-at you also might want to be aware of this discussion.\r\n\r\n**edit**, to answer your question directly:\r\n> Why is it part of all the libraries in truffle instead of being required once somewhere in the user facing part at the top?\r\n\r\nBecause we consider individual @truffle/* packages to be user facing :)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/707945512/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

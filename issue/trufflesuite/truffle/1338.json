{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1338",
  "id": 369861637,
  "node_id": "MDU6SXNzdWUzNjk4NjE2Mzc=",
  "number": 1338,
  "title": "npm test failing on Vyper checks ",
  "user": {
    "login": "Mordax",
    "id": 9853904,
    "node_id": "MDQ6VXNlcjk4NTM5MDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9853904?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Mordax",
    "html_url": "https://github.com/Mordax",
    "followers_url": "https://api.github.com/users/Mordax/followers",
    "following_url": "https://api.github.com/users/Mordax/following{/other_user}",
    "gists_url": "https://api.github.com/users/Mordax/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Mordax/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Mordax/subscriptions",
    "organizations_url": "https://api.github.com/users/Mordax/orgs",
    "repos_url": "https://api.github.com/users/Mordax/repos",
    "events_url": "https://api.github.com/users/Mordax/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Mordax/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-10-14T02:48:24Z",
  "updated_at": "2018-10-14T23:07:50Z",
  "closed_at": "2018-10-14T23:07:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nnpm test fails on Windows, fails at Vyper checks.\r\n\r\n## Steps to Reproduce\r\n\r\nInstall Lerna, Yarn, run bootstrap, then npm test. Git Bash and Admin Command Prompt \r\nhas the same issue.\r\n\r\n## Expected Behavior\r\n\r\nAll checks pass.\r\n\r\n## Actual Results\r\n\r\n```bash\r\nyarn run v1.10.1\r\n$ mocha --colors\r\ntruffle-compile-vyper:\r\ntruffle-compile-vyper:   vyper compiler\r\ntruffle-compile-vyper:     1) compiles vyper contracts\r\ntruffle-compile-vyper:     2) skips solidity contracts\r\ntruffle-compile-vyper:   0 passing (85ms)\r\ntruffle-compile-vyper:   2 failing\r\ntruffle-compile-vyper:   1) vyper compiler\r\ntruffle-compile-vyper:        compiles vyper contracts:\r\ntruffle-compile-vyper:      Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\r\ntruffle-compile-vyper:       at D:\\truffle\\packages\\truffle-compile-vyper\\test\\test_compiler.js:18:14\r\ntruffle-compile-vyper:       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:160:21\r\ntruffle-compile-vyper:       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:77:21\r\ntruffle-compile-vyper:       at ChildProcess.exithandler (child_process.js:282:5)\r\ntruffle-compile-vyper:       at maybeClose (internal/child_process.js:925:16)\r\ntruffle-compile-vyper:       at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\r\ntruffle-compile-vyper:\r\ntruffle-compile-vyper:   2) vyper compiler\r\ntruffle-compile-vyper:        skips solidity contracts:\r\ntruffle-compile-vyper:      Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\r\ntruffle-compile-vyper:       at D:\\truffle\\packages\\truffle-compile-vyper\\test\\test_compiler.js:48:14\r\ntruffle-compile-vyper:       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:160:21\r\ntruffle-compile-vyper:       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:77:21\r\ntruffle-compile-vyper:       at ChildProcess.exithandler (child_process.js:282:5)\r\ntruffle-compile-vyper:       at maybeClose (internal/child_process.js:925:16)\r\ntruffle-compile-vyper:       at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\r\ntruffle-compile-vyper:\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\nerror Command failed with exit code 2.\r\nlerna ERR! execute callback with error\r\nlerna ERR! Error: Command failed: yarn run test --colors\r\nerror Command failed with exit code 2.\r\nlerna ERR!\r\nyarn run v1.10.1\r\n$ mocha --colors\r\nlerna ERR!\r\nlerna ERR!\r\nlerna ERR!   vyper compiler\r\nlerna ERR!     1) compiles vyper contracts\r\nlerna ERR!     2) skips solidity contracts\r\nlerna ERR!\r\nlerna ERR!\r\nlerna ERR!   0 passing (85ms)\r\nlerna ERR!   2 failing\r\nlerna ERR!\r\nlerna ERR!   1) vyper compiler\r\nlerna ERR!        compiles vyper contracts:\r\nlerna ERR!      Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\r\nlerna ERR!       at D:\\truffle\\packages\\truffle-compile-vyper\\test\\test_compiler.js:18:14\r\nlerna ERR!       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:160:21\r\nlerna ERR!       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:77:21\r\nlerna ERR!       at ChildProcess.exithandler (child_process.js:282:5)\r\nlerna ERR!       at maybeClose (internal/child_process.js:925:16)\r\nlerna ERR!       at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\r\nlerna ERR!\r\nlerna ERR!   2) vyper compiler\r\nlerna ERR!        skips solidity contracts:\r\nlerna ERR!      Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\r\nlerna ERR!       at D:\\truffle\\packages\\truffle-compile-vyper\\test\\test_compiler.js:48:14\r\nlerna ERR!       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:160:21\r\nlerna ERR!       at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:77:21\r\nlerna ERR!       at ChildProcess.exithandler (child_process.js:282:5)\r\nlerna ERR!       at maybeClose (internal/child_process.js:925:16)\r\nlerna ERR!       at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\r\nlerna ERR!\r\nlerna ERR!\r\nlerna ERR!\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\nlerna ERR!\r\nlerna ERR!     at Promise.all.then.arr (D:\\truffle\\node_modules\\execa\\index.js:236:11)\r\nlerna ERR!     at <anonymous>\r\n{ Error: Command failed: yarn run test --colors\r\nerror Command failed with exit code 2.\r\n\r\nyarn run v1.10.1\r\n$ mocha --colors\r\n\r\n\r\n  vyper compiler\r\n    1) compiles vyper contracts\r\n    2) skips solidity contracts\r\n\r\n\r\n  0 passing (85ms)\r\n  2 failing\r\n\r\n  1) vyper compiler\r\n       compiles vyper contracts:\r\n     Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\r\n      at D:\\truffle\\packages\\truffle-compile-vyper\\test\\test_compiler.js:18:14\r\n      at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:160:21\r\n      at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:77:21\r\n      at ChildProcess.exithandler (child_process.js:282:5)\r\n      at maybeClose (internal/child_process.js:925:16)\r\n      at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\r\n\r\n  2) vyper compiler\r\n       skips solidity contracts:\r\n     Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\r\n      at D:\\truffle\\packages\\truffle-compile-vyper\\test\\test_compiler.js:48:14\r\n      at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:160:21\r\n      at D:\\truffle\\packages\\truffle-compile-vyper\\index.js:77:21\r\n      at ChildProcess.exithandler (child_process.js:282:5)\r\n      at maybeClose (internal/child_process.js:925:16)\r\n      at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\r\n\r\n\r\n\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n\r\n    at Promise.all.then.arr (D:\\truffle\\node_modules\\execa\\index.js:236:11)\r\n    at <anonymous>\r\n    at process._tickCallback (internal/process/next_tick.js:188:7)\r\n  code: 1,\r\n  killed: false,\r\n  stdout: '\\u001b[2K\\u001b[1G\\u001b[1myarn run v1.10.1\\u001b[22m\\u001b[m\\n\\u001b[2K\\u001b[1G\\u001b[2m$ mocha --colors\\u001b[22m\\n\\n\\u001b[0m\\u001b[0m\\n\\u001b[0m  vyper compiler\\u001b[0m\\n  \\u001b[31m  1) compiles vyper contracts\\u001b[0m\\n  \\u001b[31m  2) skips solidity contracts\\u001b[0m\\n\\n\\n\\u001b[92m \\u001b[0m\\u001b[32m 0 passing\\u001b[0m\\u001b[90m (85ms)\\u001b[0m\\n\\u001b[31m  2 failing\\u001b[0m\\n\\n\\u001b[0m  1) vyper compiler\\n       compiles vyper contracts:\\n\\u001b[0m\\u001b[31m     Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\\u001b[0m\\u001b[90m\\n      at D:\\\\truffle\\\\packages\\\\truffle-compile-vyper\\\\test\\\\test_compiler.js:18:14\\n      at D:\\\\truffle\\\\packages\\\\truffle-compile-vyper\\\\index.js:160:21\\n      at D:\\\\truffle\\\\packages\\\\truffle-compile-vyper\\\\index.js:77:21\\n      at ChildProcess.exithandler (child_process.js:282:5)\\n      at maybeClose (internal/child_process.js:925:16)\\n      at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\\n\\u001b[0m\\n\\u001b[0m  2) vyper compiler\\n       skips solidity contracts:\\n\\u001b[0m\\u001b[31m     Uncaught AssertionError [ERR_ASSERTION]: Compiles without error\\u001b[0m\\u001b[90m\\n      at D:\\\\truffle\\\\packages\\\\truffle-compile-vyper\\\\test\\\\test_compiler.js:48:14\\n      at D:\\\\truffle\\\\packages\\\\truffle-compile-vyper\\\\index.js:160:21\\n      at D:\\\\truffle\\\\packages\\\\truffle-compile-vyper\\\\index.js:77:21\\n      at ChildProcess.exithandler (child_process.js:282:5)\\n      at maybeClose (internal/child_process.js:925:16)\\n      at Process.ChildProcess._handle.onexit (internal/child_process.js:209:5)\\n\\u001b[0m\\n\\n\\n\\u001b[2K\\u001b[1G\\u001b[94minfo\\u001b[39m Visit \\u001b[1mhttps://yarnpkg.com/en/docs/cli/run\\u001b[22m for documentation about this command.\\n',\r\n  stderr: '\\u001b[2K\\u001b[1G\\u001b[31merror\\u001b[39m Command failed with exit code 2.\\n',\r\n  failed: true,\r\n  signal: null,\r\n  cmd: 'yarn run test --colors',\r\n  timedOut: false,\r\n  exitCode: 1 }\r\nnpm ERR! Test failed.  See above for more details.\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: Windows 10\r\n* Ethereum client: Is it needed for running developer tests on Truffle? \r\n* Truffle version (`truffle version`): v4.1.14 \r\n* node version (`node --version`): v8.11.4\r\n* npm version (`npm --version`): 6.1.0",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/429671211",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1338#issuecomment-429671211",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1338",
    "id": 429671211,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTY3MTIxMQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-14T23:07:50Z",
    "updated_at": "2018-10-14T23:07:50Z",
    "author_association": "MEMBER",
    "body": "Thanks for raising this issue! I opened #1336 recently, to address the problem of tests with external dependencies running locally. Closing this issue as duplicate of that.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/429671211/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

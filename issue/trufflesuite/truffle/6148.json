{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/6148",
  "id": 1814685902,
  "node_id": "I_kwDOAkfq-c5sKejO",
  "number": 6148,
  "title": "TypeError: Cannot read properties of undefined (reading 'start') - Transaction that creates ERC20 contract",
  "user": {
    "login": "AlissonRS",
    "id": 4753901,
    "node_id": "MDQ6VXNlcjQ3NTM5MDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4753901?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlissonRS",
    "html_url": "https://github.com/AlissonRS",
    "followers_url": "https://api.github.com/users/AlissonRS/followers",
    "following_url": "https://api.github.com/users/AlissonRS/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlissonRS/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlissonRS/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlissonRS/subscriptions",
    "organizations_url": "https://api.github.com/users/AlissonRS/orgs",
    "repos_url": "https://api.github.com/users/AlissonRS/repos",
    "events_url": "https://api.github.com/users/AlissonRS/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlissonRS/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-07-20T19:39:57Z",
  "updated_at": "2023-07-20T23:54:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello!\r\n\r\nTrying to debug a transaction hash from a Ganache RPC node, I was able to debug a few lines, but then it fails at a specific line.\r\n\r\n`truffle debug 0x7ef2fd6cdc70d8822b125a2a82fcb2d416cd9a4d50c26f56ce7127e952e58f08 --url https://flokifi-rpc.forkfy.io --fetch-external`\r\n\r\nIt always fails when trying to cross through a certain line around the ERC20 constructor (as this transaction is creating an ERC20 token). The error is as below:\r\n\r\n`\r\nTypeError: Cannot read properties of undefined (reading 'start')    at /Users/radish/projects/truffle/packages/debugger/lib/sourcemapping/selectors/index.js:323:19    at recomputationWrapper (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/index.js:87:25)    at memoized (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/defaultMemoize.js:135:20)    at dependenciesChecker (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/index.js:101:40)    at Function.memoized (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/defaultMemoize.js:135:20)    at /home/sniffnoy/truffle/reselect-tree/lib/index.js:83:1    at dependenciesChecker (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/index.js:97:37)    at memoized (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/defaultMemoize.js:135:20)    at dependenciesChecker (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/index.js:97:37)    at memoized (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/reselect/lib/defaultMemoize.js:135:20)    at runSelectEffect (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:734:26)    at runEffect (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1208:7)    at digestEffect (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1275:5)    at next (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1165:9)    at proc (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1112:3)    at /home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:589:17    at immediately (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:60:12)    at runForkEffect (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:588:3)    at runEffect (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1208:7)    at digestEffect (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1275:5)    at next (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1165:9)    at currCb (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1255:7)    at takeCb (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:507:5)    at put (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:343:9)    at Object.chan.put (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:375:7)    at /home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/redux-saga-core.dev.cjs.js:1416:17    at dispatch (/home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/redux/lib/applyMiddleware.js:45:18)    at /home/alisson/.nvm/versions/node/v18.15.0/lib/node_modules/truffle/node_modules/@redux-saga/core/dist/io-a03c6210.js:137:12The above error occurred in task pr    created by takeEvery(TRACE_TICK, pr)    created by data.xr    created by SESSION_START_FULL_MODE    created by Xi    created by session.Tasks cancelled due to error:takeEvery(TRACE_TICK, pr)txlog.Zrevm.trsourcemapping.pistacktrace.Ticontroller.jiweb3.dn\r\n`\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\n`TypeError: Cannot read properties of undefined (reading 'start')    at ` when debugging a transaction.\r\n\r\n## Steps to Reproduce\r\n\r\nSend a transaction that internally creates an ERC20 token on-the-fly, but the transaction fails after the ERC20 contract creation. Try debugging the tx hash up the the part where the transaction reverted.\r\n\r\n## Expected Behavior\r\n\r\nShould be able to debug.\r\n\r\n## Actual Results\r\n\r\nThe debug starts, but in the line where the ERC20 contract is created (e.g. `ERC20 token = new ERC20(name, symbol)`) the TypeError happens.\r\n\r\n## Environment\r\n\r\n* Operating System: Ubuntu 22\r\n* Ethereum client: Ganache\r\n* Truffle version (`truffle version`): v5.9.4\r\n* node version (`node --version`): v18.15.0\r\n* npm version (`npm --version`): 9.5.0\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1644582337",
    "html_url": "https://github.com/trufflesuite/truffle/issues/6148#issuecomment-1644582337",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148",
    "id": 1644582337,
    "node_id": "IC_kwDOAkfq-c5iBlXB",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T20:46:59Z",
    "updated_at": "2023-07-20T20:46:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for reporting this @AlissonRS! We'll have to investigate this, you are using the CLI debugger?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1644582337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1644798135",
    "html_url": "https://github.com/trufflesuite/truffle/issues/6148#issuecomment-1644798135",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6148",
    "id": 1644798135,
    "node_id": "IC_kwDOAkfq-c5iCaC3",
    "user": {
      "login": "AlissonRS",
      "id": 4753901,
      "node_id": "MDQ6VXNlcjQ3NTM5MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4753901?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlissonRS",
      "html_url": "https://github.com/AlissonRS",
      "followers_url": "https://api.github.com/users/AlissonRS/followers",
      "following_url": "https://api.github.com/users/AlissonRS/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlissonRS/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlissonRS/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlissonRS/subscriptions",
      "organizations_url": "https://api.github.com/users/AlissonRS/orgs",
      "repos_url": "https://api.github.com/users/AlissonRS/repos",
      "events_url": "https://api.github.com/users/AlissonRS/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlissonRS/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-20T23:54:15Z",
    "updated_at": "2023-07-20T23:54:15Z",
    "author_association": "NONE",
    "body": "@eggplantzzz yes, I debug it with the command below (the RPC node is a Ganache one):\r\n\r\n`truffle debug 0x7ef2fd6cdc70d8822b125a2a82fcb2d416cd9a4d50c26f56ce7127e952e58f08 --url https://flokifi-rpc.forkfy.io --fetch-external`",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1644798135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1616",
  "id": 396163684,
  "node_id": "MDU6SXNzdWUzOTYxNjM2ODQ=",
  "number": 1616,
  "title": "npm install truffle fails with gyp ERR! and node-gyp rebuild",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-01-05T13:02:55Z",
  "updated_at": "2019-01-10T14:04:07Z",
  "closed_at": "2019-01-10T14:04:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have tried this now on different machines and I get the node-gyp error everywhere. Is there somebody who does not get this error when installing truffle?\r\n\r\nI am running a `Ubuntu 16.04.5 LTS`, `npm 6.5.0`, `node v10.14.2`.\r\nHow to reproduce? Do this: `sudo npm install -g truffle`\r\nAnd I get this:\r\n```\r\n\r\n> keccak@1.4.0 install /usr/lib/node_modules/truffle/node_modules/keccak\r\n> npm run rebuild || echo \"Keccak bindings compilation fail. Pure JS implementation will be used.\"\r\n\r\n\r\n> keccak@1.4.0 rebuild /usr/lib/node_modules/truffle/node_modules/keccak\r\n> node-gyp rebuild\r\n\r\ngyp WARN EACCES user \"root\" does not have permission to access the dev dir \"/home/user/.node-gyp/10.14.2\"\r\ngyp WARN EACCES attempting to reinstall using temporary dev dir \"/usr/lib/node_modules/truffle/node_modules/keccak/.node-gyp\"\r\ngyp WARN install got an error, rolling back install\r\ngyp WARN install got an error, rolling back install\r\ngyp ERR! configure error \r\ngyp ERR! stack Error: EACCES: permission denied, mkdir '/usr/lib/node_modules/truffle/node_modules/keccak/.node-gyp'\r\ngyp ERR! System Linux 4.4.0-140-generic\r\ngyp ERR! command \"/usr/bin/node\" \"/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\r\ngyp ERR! cwd /usr/lib/node_modules/truffle/node_modules/keccak\r\ngyp ERR! node -v v10.14.2\r\ngyp ERR! node-gyp -v v3.8.0\r\ngyp ERR! not ok \r\nnpm ERR! code ELIFECYCLE\r\nnpm ERR! errno 1\r\nnpm ERR! keccak@1.4.0 rebuild: `node-gyp rebuild`\r\nnpm ERR! Exit status 1\r\nnpm ERR! \r\nnpm ERR! Failed at the keccak@1.4.0 rebuild script.\r\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\r\nKeccak bindings compilation fail. Pure JS implementation will be used.\r\n\r\n```\r\nCan this error be ignored or does it change anything?",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451968648",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1616#issuecomment-451968648",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616",
    "id": 451968648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTk2ODY0OA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-07T15:19:35Z",
    "updated_at": "2019-01-07T15:19:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "@saitam1 Hmm, you probably shouldn't need `sudo` for that. I think there might be something wonky with your npm. I remember I had some similar issue when setting up a fresh computer with npm.\r\n\r\nMaybe this will help --> https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451968648/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/453106327",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1616#issuecomment-453106327",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1616",
    "id": 453106327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MzEwNjMyNw==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-10T14:04:02Z",
    "updated_at": "2019-01-10T14:04:02Z",
    "author_association": "NONE",
    "body": "Using nvm with npm help solving this issue (`nvm use 8.15.0`)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/453106327/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

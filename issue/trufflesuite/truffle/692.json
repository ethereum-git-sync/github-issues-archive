{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/692",
  "id": 276827120,
  "node_id": "MDU6SXNzdWUyNzY4MjcxMjA=",
  "number": 692,
  "title": "Errors when calling the initialize public method in `truffle console`",
  "user": {
    "login": "josoroma-zz",
    "id": 69951,
    "node_id": "MDQ6VXNlcjY5OTUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/josoroma-zz",
    "html_url": "https://github.com/josoroma-zz",
    "followers_url": "https://api.github.com/users/josoroma-zz/followers",
    "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
    "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
    "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
    "repos_url": "https://api.github.com/users/josoroma-zz/repos",
    "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2017-11-26T14:03:26Z",
  "updated_at": "2017-12-03T15:33:32Z",
  "closed_at": "2017-11-27T19:06:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Errors when calling the initialize public method in `truffle console`\r\n\r\n![image](https://user-images.githubusercontent.com/69951/33240675-8dbb199e-d27f-11e7-8e37-12d013f09e94.png)\r\n\r\n## Steps to Reproduce\r\n\r\n`./scripts/test.sh`\r\n\r\n - https://github.com/josoroma/ape/blob/master/scripts/test.sh#L37\r\n\r\n`truffle migrate --network development --reset --compile-all`\r\n\r\n - https://github.com/josoroma/ape/blob/master/migrations/2_deploy_contracts.js\r\n\r\n```\r\ntruffle console\r\n...\r\nApeToken.deployed().then(inst => { apetoken = inst })\r\n...\r\nApePreICO.deployed().then(inst => { preico = inst })\r\n...\r\npreico.initialized.call()\r\nfalse\r\n...\r\npreico.initialize({ from: apetoken.address })\r\n...\r\npreico.initialize({ from: preico.owner() })\r\n...\r\n```\r\n\r\n## Expected Behavior\r\n\r\nSee the value `preico.initialized.call()` automatically changed to true.\r\n\r\n## Actual Results\r\n\r\n![image](https://user-images.githubusercontent.com/69951/33240692-b0068326-d27f-11e7-9251-fa1ed366d3a5.png)\r\n\r\n## macOS Sierra Environment\r\n\r\n```\r\ntruffle version\r\n```\r\nTruffle v4.0.1 (core: 4.0.1)\r\nSolidity v0.4.18 (solc-js)\r\n\r\n```\r\nnode -v && npm -v\r\n```\r\nv8.9.1\r\n5.5.1\r\n\r\n## References\r\n\r\n - https://medium.com/@valkn0t/3-things-i-learned-this-week-using-solidity-truffle-and-web3-a911c3adc730\r\n\r\n - https://medium.com/@mattdlockyer/ethereum-application-development-smart-contracts-with-truffle-framework-1-3-40e78b4c72",
  "closed_by": {
    "login": "josoroma-zz",
    "id": 69951,
    "node_id": "MDQ6VXNlcjY5OTUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/josoroma-zz",
    "html_url": "https://github.com/josoroma-zz",
    "followers_url": "https://api.github.com/users/josoroma-zz/followers",
    "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
    "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
    "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
    "repos_url": "https://api.github.com/users/josoroma-zz/repos",
    "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/692/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347035066",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347035066",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347035066,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzAzNTA2Ng==",
    "user": {
      "login": "josoroma-zz",
      "id": 69951,
      "node_id": "MDQ6VXNlcjY5OTUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josoroma-zz",
      "html_url": "https://github.com/josoroma-zz",
      "followers_url": "https://api.github.com/users/josoroma-zz/followers",
      "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
      "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
      "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
      "repos_url": "https://api.github.com/users/josoroma-zz/repos",
      "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-26T20:15:38Z",
    "updated_at": "2017-11-26T20:15:38Z",
    "author_association": "NONE",
    "body": "no luck so far:\r\n\r\n![image](https://user-images.githubusercontent.com/69951/33243923-215f136a-d2b4-11e7-855a-0f98954675f2.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347035066/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347052354",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347052354",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347052354,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzA1MjM1NA==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-27T00:39:30Z",
    "updated_at": "2017-11-27T02:22:47Z",
    "author_association": "NONE",
    "body": "initialize can only be called once, and only from the address that the contract was created with.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347052354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347056773",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347056773",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347056773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzA1Njc3Mw==",
    "user": {
      "login": "josoroma-zz",
      "id": 69951,
      "node_id": "MDQ6VXNlcjY5OTUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josoroma-zz",
      "html_url": "https://github.com/josoroma-zz",
      "followers_url": "https://api.github.com/users/josoroma-zz/followers",
      "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
      "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
      "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
      "repos_url": "https://api.github.com/users/josoroma-zz/repos",
      "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-27T01:31:44Z",
    "updated_at": "2017-11-27T01:31:44Z",
    "author_association": "NONE",
    "body": "@chuacw by any chance would you mind sharing an example please?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347056773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347061750",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347061750",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347061750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzA2MTc1MA==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-27T02:17:30Z",
    "updated_at": "2017-11-27T02:17:30Z",
    "author_association": "NONE",
    "body": "@josoroma Hi, I'll be happy to. What kind of example? A call in truffle development, a Truffle test script, or a Solidity contract?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347061750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347087574",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347087574",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347087574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzA4NzU3NA==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-27T06:08:13Z",
    "updated_at": "2017-11-27T06:08:52Z",
    "author_association": "NONE",
    "body": "Here's the Truffle test script (written by me) which executed successfully. The reason why your calls in truffle develop failed is because you didn't transfer the expected amount of tokens.\r\n\r\nconst PreICO = artifacts.require('./ApePreICO.sol');\r\nconst ApeToken = artifacts.require('./ApeToken.sol');\r\n\r\n// Truffle test script to test ApePreICO and ApeToken by chuacw\r\n\r\n\r\nlet debug = false;\r\nlog = function(msg) {\r\n  if (debug)\r\n    console.log(msg);\r\n}\r\n\r\n\r\ncontract('PreICO', function(accounts) {\r\n\r\n  let wallet = accounts[2];\r\n  let anotherwallet = accounts[3];\r\n  let thirdwallet = accounts[4];\r\n  let ApeTokenAddress = null;\r\n  let PreICOInstance = null;\r\n  let ApeTokenInstance;\r\n  \r\n  log(\"accounts: \" + accounts);\r\n  log(\"Wallet: \" + wallet);\r\n\r\n  beforeEach('setup contract for each test', async function() {\r\n      ApeTokenInstance = await ApeToken.new({from: wallet});\r\n      ApeTokenAddress = ApeTokenInstance.address;\r\n      log(\"Ape Token address: \" + ApeTokenAddress);\r\n      PreICOInstance = await PreICO.new(ApeTokenInstance.address, {from: anotherwallet}); // .new to create a new instance, .deployed() to get an existing instance\r\n      log(\"PreICO Address: \" + PreICOInstance.address);\r\n  })\r\n  \r\n  it('can get owner', async function() {\r\n    let owner = await PreICOInstance.owner();\r\n    // console.log(\"Owner: \" + owner);\r\n  })\r\n\r\n  it('cannot call initialize from any other wallet', async function() {\r\n    let ex = false;\r\n    log(\"Ex value: \" + ex);\r\n    try {\r\n      await PreICOInstance.initialize({from: thirdwallet});\r\n    } catch (e) {\r\n      ex = true; // can't initialize the wallet willy nilly \r\n    }\r\n    log(\"Ex value: \"  + ex);\r\n    assert.equal(ex, true);\r\n  })\r\n\r\n  it('can get initialized before initialization', async function() {\r\n    log(\"Calling initialized\");\r\n    let initialized = await PreICOInstance.initialized();\r\n    log(\"initialized: \" + initialized);\r\n    assert.equal(initialized, false);\r\n  })\r\n\r\n  it('can get token balance', async function() {\r\n    let tokensAvailable = await PreICOInstance.tokensAvailable();\r\n    log(\"Tokens available: \" + tokensAvailable);\r\n    assert.equal(tokensAvailable, 0);\r\n  })\r\n  \r\n  it('can transfer token to this account', async function() {\r\n    let initialSupply = await ApeTokenInstance.INITIAL_SUPPLY();\r\n    log(\"INITIAL_SUPPLY: \" + initialSupply);\r\n    await ApeTokenInstance.transfer(PreICOInstance.address, await PreICOInstance.INITIAL_TOKENS(), {from: wallet});\r\n    log(\"Successful transfer\");\r\n    assert.equal(initialSupply, 1e+26);\r\n  })\r\n\r\n  it('can get tokens after transfer', async function() {\r\n    // repeat transfer from \"can transfer token to this account\", since each \"it\" test case is newly initialized...\r\n    await ApeTokenInstance.transfer(PreICOInstance.address, await PreICOInstance.INITIAL_TOKENS(), {from: wallet});\r\n    log(\"Successful transfer\");\r\n    log(\"Tokens available: \" + await PreICOInstance.tokensAvailable());\r\n  })\r\n\r\n  it('can initialize', async function() {\r\n    await ApeTokenInstance.transfer(PreICOInstance.address, await PreICOInstance.INITIAL_TOKENS(), {from: wallet});\r\n    log(\"Successful transfer\");\r\n    log(\"Tokens available: \" + await PreICOInstance.tokensAvailable());\r\n    await PreICOInstance.initialize({from: anotherwallet});\r\n    let initialized = await PreICOInstance.initialized();\r\n    log(\"Initialized successfully: \" + initialized);\r\n    assert.equal(initialized, true);\r\n  })\r\n\r\n  it(\"can't initialize again after initialization\", async function() {\r\n    await ApeTokenInstance.transfer(PreICOInstance.address, await PreICOInstance.INITIAL_TOKENS(), {from: wallet});\r\n    log(\"Successful transfer\");\r\n    log(\"Tokens available: \" + await PreICOInstance.tokensAvailable());\r\n    await PreICOInstance.initialize({from: anotherwallet});\r\n    let initialized = await PreICOInstance.initialized();\r\n    log(\"Initialized successfully: \" + initialized);\r\n    assert.equal(initialized, true);\r\n    let ex = false;\r\n    try {\r\n      await PreICOInstance.initialize({from: anotherwallet});\r\n    } catch (e) {\r\n      ex = true;\r\n    }\r\n    assert.equal(ex, true);\r\n  })\r\n\r\n})\r\n\r\nThis issue should be closed as there's a difference between user expectation and reality, not a truffle issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347087574/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347409474",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347409474",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347409474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzQwOTQ3NA==",
    "user": {
      "login": "josoroma-zz",
      "id": 69951,
      "node_id": "MDQ6VXNlcjY5OTUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josoroma-zz",
      "html_url": "https://github.com/josoroma-zz",
      "followers_url": "https://api.github.com/users/josoroma-zz/followers",
      "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
      "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
      "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
      "repos_url": "https://api.github.com/users/josoroma-zz/repos",
      "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T04:22:26Z",
    "updated_at": "2017-11-28T04:22:26Z",
    "author_association": "NONE",
    "body": "@chuacw very helpful man and the test is easy to follow. Probably i'am missing something obvious again but i'm stuck trying to successfully replicate your transfer() call:\r\n```\r\nwallet = web3.eth.accounts[0]\r\naccount1 = web3.eth.accounts[1]\r\naccount2 = web3.eth.accounts[2]\r\naccount3 = web3.eth.accounts[3]\r\n\r\namount1 = web3.toWei(1, 'ether')\r\namount2 = web3.toWei(2, 'ether')\r\namount3 = web3.toWei(3, 'ether')\r\n\r\nApeToken.deployed().then(instance => { apeTokenInstance = instance })\r\napeTokenInstance.address\r\n\r\nApePreICO.deployed().then(instance => { apePreICOInstance = instance })\r\napePreICOInstance.address\r\n\r\napePreICOInstance.owner()\r\n\r\napePreICOInstance.tokensAvailable()\r\n\r\napeTokenInstance.INITIAL_SUPPLY()\r\napePreICOInstance.INITIAL_TOKENS()\r\n\r\napePreICOInstance.checkBalance(wallet)\r\napePreICOInstance.checkBalance(account1)\r\napePreICOInstance.checkBalance(account2)\r\napePreICOInstance.checkBalance(account3)\r\n\r\napePreICOInstance.balanceOf(wallet)\r\napePreICOInstance.balanceOf(account1)\r\napePreICOInstance.balanceOf(account2)\r\napePreICOInstance.balanceOf(account3)\r\n```\r\n\r\n## Stuck trying to run:\r\n\r\n```\r\napeTokenInstance.transfer(apePreICOInstance.address, apePreICOInstance.INITIAL_TOKENS(), {from: wallet})\r\n```\r\nor\r\n```\r\napeTokenInstance.transfer(apePreICOInstance.address, apePreICOInstance.INITIAL_TOKENS(), {from: ApeToken.address})\r\n```\r\n## Both are hitting the error:\r\n\r\n```\r\nError: Invalid number of arguments to Solidity function\r\n...\r\n```\r\n\r\n(y)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347409474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347412005",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347412005",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347412005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzQxMjAwNQ==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T04:44:11Z",
    "updated_at": "2017-11-28T04:44:11Z",
    "author_association": "NONE",
    "body": "I can't guess what's wrong now.\r\nPlease provide complete code that can be compiled and run.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347412005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347755839",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347755839",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347755839,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzc1NTgzOQ==",
    "user": {
      "login": "josoroma-zz",
      "id": 69951,
      "node_id": "MDQ6VXNlcjY5OTUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josoroma-zz",
      "html_url": "https://github.com/josoroma-zz",
      "followers_url": "https://api.github.com/users/josoroma-zz/followers",
      "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
      "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
      "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
      "repos_url": "https://api.github.com/users/josoroma-zz/repos",
      "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T05:18:16Z",
    "updated_at": "2017-11-29T05:20:07Z",
    "author_association": "NONE",
    "body": "@chuacw Code, tests were made through the truffle console:\r\n\r\nhttps://github.com/josoroma/ape/blob/master/migrations/2_deploy_contracts.js\r\n\r\nhttps://github.com/josoroma/ape/blob/master/contracts/ApePreICO.sol\r\n\r\nAt the end of this comment you will find the weird results for:\r\n\r\n### apePreICOInstance.balanceOf(account2) == 0\r\n\r\n### apePreICOInstance.weiRaised() == 0\r\n\r\nThanks in advance!\r\n\r\n```\r\ncd ~/Sites/ico/ape && reload && nvm use 8\r\n\r\n./scripts/test.sh\r\n\r\nrm -fr build && truffle migrate --network development --reset --compile-all && truffle console\r\n```\r\n\r\n```\r\nwallet = web3.eth.accounts[0]\r\naccount1 = web3.eth.accounts[1]\r\naccount2 = web3.eth.accounts[2]\r\naccount3 = web3.eth.accounts[3]\r\n```\r\n\r\n```\r\namount1 = web3.toWei(1, 'ether')\r\namount2 = web3.toWei(2, 'ether')\r\namount3 = web3.toWei(3, 'ether')\r\n```\r\n\r\n```\r\nApeToken.deployed().then(instance => { apeTokenInstance = instance })\r\n\r\napeTokenInstance.address\r\n'0x50934a1f738cecc566c1612123c13950dbc5e037'\r\n```\r\n\r\n```\r\nApePreICO.deployed().then(instance => { apePreICOInstance = instance })\r\n\r\napePreICOInstance.address\r\n'0xec41caf76a7ce22bcae44093034a2f30f2524ae1'\r\n\r\napePreICOInstance.owner()\r\n'0x4345f962f6b2b80b83b9ec2de70458e4e106f055'\r\n```\r\n\r\n```\r\napeTokenInstance.INITIAL_SUPPLY()\r\n{ s: 1, e: 26, c: [ 1000000000000 ] }\r\n\r\napePreICOInstance.INITIAL_TOKENS()\r\n{ s: 1, e: 24, c: [ 60000000000 ] }\r\n\r\napePreICOInstance.tokensAvailable()\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n```\r\n\r\n## coin\r\n\r\n```\r\napePreICOInstance.checkBalance(wallet)\r\n{ s: 1, e: 19, c: [ 987859, 16300000000000 ] }\r\n\r\napePreICOInstance.checkBalance(apePreICOInstance.address)\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n```\r\n\r\n## tokens\r\n\r\n```\r\napePreICOInstance.balanceOf(wallet)\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n\r\napePreICOInstance.balanceOf(apePreICOInstance.address)\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n\r\napePreICOInstance.owner()\r\napePreICOInstance.checkBalance('0x4345f962f6b2b80b83b9ec2de70458e4e106f055')\r\n{ s: 1, e: 19, c: [ 987859, 16300000000000 ] }\r\n```\r\n\r\n```\r\napePreICOInstance.tokensAvailable()\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n\r\napePreICOInstance.checkBalance(wallet)\r\n{ s: 1, e: 19, c: [ 987859, 16300000000000 ] }\r\n```\r\n\r\n## Initialize\r\n\r\n```\r\nPRE_ICO_INITIAL_TOKENS = 60000000000\r\n\r\napeTokenInstance.transfer(apePreICOInstance.address, PRE_ICO_INITIAL_TOKENS, {from: wallet})\r\n```\r\n\r\n```\r\napePreICOInstance.tokensAvailable()\r\n{ s: 1, e: 10, c: [ 60000000000 ] }\r\n\r\napePreICOInstance.checkBalance(wallet)\r\n{ s: 1, e: 19, c: [ 987807, 75100000000000 ] }\r\n```\r\n\r\n```\r\napePreICOInstance.owner()\r\napePreICOInstance.checkBalance('0x4345f962f6b2b80b83b9ec2de70458e4e106f055')\r\n{ s: 1, e: 19, c: [ 987807, 75100000000000 ] }\r\n```\r\n\r\n```\r\n16300000000000\r\n75100000000000\r\n```\r\n\r\n```\r\napePreICOInstance.weiRaised()\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n```\r\n\r\n```\r\napePreICOInstance.checkBalance(account2)\r\n{ s: 1, e: 20, c: [ 1000000 ] }\r\napePreICOInstance.balanceOf(account2)\r\n{ s: 1, e: 0, c: [ 0 ] }\r\n```\r\n\r\n```\r\napePreICOInstance.buyTokens(web3.toWei(1, \"ether\"), { from: account2 })\r\n```\r\n\r\n### apePreICOInstance.balanceOf(account2) == 0\r\n\r\n```\r\napePreICOInstance.checkBalance(account2)\r\n{ s: 1, e: 19, c: [ 999941, 94400000000000 ] }\r\napePreICOInstance.balanceOf(account2)\r\n{ s: 1, e: 0, c: [ 0 ] }      <=== ?\r\n```\r\n\r\n### apePreICOInstance.weiRaised() == 0\r\n\r\n```\r\napePreICOInstance.weiRaised()\r\n{ s: 1, e: 0, c: [ 0 ] }      <=== ?\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347755839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347769921",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-347769921",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 347769921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Nzc2OTkyMQ==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T06:54:45Z",
    "updated_at": "2017-11-29T06:54:45Z",
    "author_association": "NONE",
    "body": "Am I missing something here? Can you help me understand why you're executing so many tests in truffle console instead of truffle test? ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347769921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/348782534",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-348782534",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 348782534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODc4MjUzNA==",
    "user": {
      "login": "josoroma-zz",
      "id": 69951,
      "node_id": "MDQ6VXNlcjY5OTUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/69951?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josoroma-zz",
      "html_url": "https://github.com/josoroma-zz",
      "followers_url": "https://api.github.com/users/josoroma-zz/followers",
      "following_url": "https://api.github.com/users/josoroma-zz/following{/other_user}",
      "gists_url": "https://api.github.com/users/josoroma-zz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josoroma-zz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josoroma-zz/subscriptions",
      "organizations_url": "https://api.github.com/users/josoroma-zz/orgs",
      "repos_url": "https://api.github.com/users/josoroma-zz/repos",
      "events_url": "https://api.github.com/users/josoroma-zz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josoroma-zz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-03T15:19:27Z",
    "updated_at": "2017-12-03T15:19:55Z",
    "author_association": "NONE",
    "body": "@chuacw Thanks for insisting on the tests.\r\n\r\nI believe that now I really have a little better understanding of solidity.\r\n\r\nhttps://github.com/josoroma/ape/blob/master/tests/ApePreICO.test.js#L131\r\n\r\n```\r\n./scripts/test.sh\r\nrm -fr build && truffle migrate --network development --reset --compile-all\r\ntruffle test tests/ApePreICO.test.js\r\n```\r\n\r\n```\r\n*** Ape Token Wallet: 0x3b7634fe1dc8b07894143bc87f93d0a51b104e1f\r\n\r\n\r\n  Contract: PreICO\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n==> Owner: 0x3b7634fe1dc8b07894143bc87f93d0a51b104e1f\r\n    ✓ can get owner\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n==> isUnstraustableAccount value: false\r\n==> isUnstraustableAccount value: true\r\n    ✓ cannot call initialize from any other wallet\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 0\r\n    Initialized      false\r\n    WEI Raised       0\r\n==> isInitialized: false\r\n    ✓ cannot get initialized (40ms)\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 0\r\n    Initialized      false\r\n    WEI Raised       0\r\n    ✓ can get initial token balance (43ms)\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n==> INITIAL_SUPPLY: 1e+26\r\n==> Successful transfer\r\n    ✓ can transfer token to this account (73ms)\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 6e+24\r\n    Initialized      false\r\n    WEI Raised       0\r\n    ✓ can get tokens after transfer\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 6e+24\r\n    Initialized      false\r\n    WEI Raised       0\r\n==> isInitialized: true\r\n    ✓ can initialize (48ms)\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 6e+24\r\n    Initialized      true\r\n    WEI Raised       0\r\n==> isInitialized: false\r\n    ✓ cannot initialize again after initialization (45ms)\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 6e+24\r\n    Initialized      true\r\n    WEI Raised       0\r\n==> Tokens available 5.997e+24\r\n==> Initialized      true\r\n==> WEI Raised       1000000000000000000\r\n    checkBalanceToken     105469346500000000000\r\n    checkBalancePurchases 86584088200000000000\r\n    ✓ can buy tokens (109ms)\r\n*** Ape Token Account Address: 0xdc3a1689e6211d359bf906ff6ed0c603e93949a5\r\n*** PreICO Account Address: 0x0717a047e9c930afe59df9eb28bce816191be3e3\r\n    Tokens available 5.997e+24\r\n    Initialized      true\r\n    WEI Raised       1000000000000000000\r\n==> Tokens available 5.985e+24\r\n==> Initialized      true\r\n==> WEI Raised       5000000000000000000\r\n    checkBalanceToken     109469346500000000000\r\n    checkBalancePurchases 82578813300000000000\r\n    ✓ can buy tokens one more time (109ms)\r\n\r\n\r\n  10 passing (579ms)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/348782534/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/348784666",
    "html_url": "https://github.com/trufflesuite/truffle/issues/692#issuecomment-348784666",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/692",
    "id": 348784666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0ODc4NDY2Ng==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-03T15:33:32Z",
    "updated_at": "2017-12-03T15:33:32Z",
    "author_association": "NONE",
    "body": "Congratulations, @josoroma ! I believed you've learnt something here.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/348784666/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

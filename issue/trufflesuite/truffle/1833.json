{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1833",
  "id": 422709128,
  "node_id": "MDU6SXNzdWU0MjI3MDkxMjg=",
  "number": 1833,
  "title": "Not possible to retrieve contract migration state from blockchain",
  "user": {
    "login": "busypeter",
    "id": 23269459,
    "node_id": "MDQ6VXNlcjIzMjY5NDU5",
    "avatar_url": "https://avatars.githubusercontent.com/u/23269459?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/busypeter",
    "html_url": "https://github.com/busypeter",
    "followers_url": "https://api.github.com/users/busypeter/followers",
    "following_url": "https://api.github.com/users/busypeter/following{/other_user}",
    "gists_url": "https://api.github.com/users/busypeter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/busypeter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/busypeter/subscriptions",
    "organizations_url": "https://api.github.com/users/busypeter/orgs",
    "repos_url": "https://api.github.com/users/busypeter/repos",
    "events_url": "https://api.github.com/users/busypeter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/busypeter/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 230393329,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjk=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-03-19T12:39:25Z",
  "updated_at": "2019-03-25T12:30:34Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nDeployment artifacts, including the addresses of the deployed contracts, are stored in the directory ``build/contracts/`` on the host machine that was used to deploy. In cases where we lose the artifacts, e.g. the machine has a catastrophic failure, the dir gets accidentally deleted and there is no backup, etc., it will not be possible to continue migrations if we need truffle to know all this information in future migrations (e.g. when mutating deployed contracts).\r\n\r\nIn essence, ``build/contracts/`` is rather important and should be backed up to ensure the production deployment state is preserved.\r\n\r\n## Affected Scenarios\r\n\r\nIn cases, where want to decommission the original machine that was used in deployment and continue migrations on a clean machine, we must copy over the artifacts (and possibly other data, like ``migrations/``, depending on the scenario).\r\n\r\n## Possible Solutions\r\n\r\nIt seems one good place to store the state would be the blockchain (e.g. the Migrations smart contract). It has been suggested that a truffle plugin is a good way to introduce this functionality, although native truffle support would be appreciated.\r\n\r\nAlternatively, truffle could change the way it stores the deployment artifacts in a more portable-friendly way, i.e. store the deployment state in a separate directory, that would enable easy packaging and moving. Be it for backup or just handing over the migration state to a new operator (on a different host machine). Today, ``build/contracts/`` contains a lot more data unnecessary in this scenario.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476175469",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1833#issuecomment-476175469",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1833",
    "id": 476175469,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjE3NTQ2OQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-25T12:30:34Z",
    "updated_at": "2019-03-25T12:30:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@busypeter Thanks for the good suggestion! Actually we are currently working on a large feature that will totally overhaul artifact management and should address a lot of the issues that you mentioned. Stay tuned!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476175469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

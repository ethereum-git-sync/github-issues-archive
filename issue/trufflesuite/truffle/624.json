{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/624",
  "id": 266250874,
  "node_id": "MDU6SXNzdWUyNjYyNTA4NzQ=",
  "number": 624,
  "title": "Truffle doesn't seem to detect mined transactions if insta-mining",
  "user": {
    "login": "karalabe",
    "id": 129561,
    "node_id": "MDQ6VXNlcjEyOTU2MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/karalabe",
    "html_url": "https://github.com/karalabe",
    "followers_url": "https://api.github.com/users/karalabe/followers",
    "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
    "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
    "organizations_url": "https://api.github.com/users/karalabe/orgs",
    "repos_url": "https://api.github.com/users/karalabe/repos",
    "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/karalabe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 25,
  "created_at": "2017-10-17T19:33:06Z",
  "updated_at": "2019-12-07T22:46:02Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nWe're experimenting with a new developer mode for go-ethereum (i.e. `geth --dev`), where block times are 0 (Clique PoA chain) and any transaction that enters into the pool gets mined as soon as possible into a block (300 microsecond order of magnitude).\r\n\r\nWhen running `truffle test`, I've noticed that a single transaction is submitted, geth mines it instantly, but tuffle keeps waiting patiently for it to get mined. Since the \"insta-miner\" doesn't produce empty blocks, it refuses to mine anything until the next transaction arrives. However, truffle doesn't notice that the transaction was already mined.\r\n\r\nI've tried to verify whether the issue is in truffle or not. When truffle \"hangs\" waiting for the transaction to mine, I can submit a random transaction into the node form the outside. When my own transaction ends up in a block, truffle immediately notices the transaction it sent *in the previous* block and continues.\r\n\r\n## Steps to Reproduce\r\n\r\n * Check out the insta-miner PR of go-ethereum https://github.com/ethereum/go-ethereum/pull/15323\r\n * Build geth and run with `geth --dev --rpc console`\r\n * Check out the ENS repository https://github.com/ethereum/ens\r\n * Set up and run the tests `npm install && truffle test --network=dev.fifs`\r\n * The first transaction is mined, then everything apparently hangs\r\n * Submit a transaction manually into the geth console `eth.sendTransaction({from: eth.accounts[0], to: eth.accounts[0]})`\r\n * Truffle continues only here\r\n\r\n## Expected Behavior\r\n\r\nI would expect truffle to properly detect when a transaction is mined and continue, even if it takes a fraction of a millisecond between submit and block creation.\r\n\r\n## Actual Results\r\n\r\nMy hunch is that truffle submits a transaction, and afterwards starts listening for a block to see if it was mined. But geth's new mining mode will produce the block faster, before truffle actually listens for new blocks. As such, this seems a data race between truffle's submit and \"await\" functionality.\r\n\r\n## Environment\r\n\r\n* Operating System: Linux\r\n* Truffle version: Truffle v3.4.11 (core: 3.4.11)\r\n* Ethereum client: Geth\r\n* node version: v8.6.0\r\n* npm version: 5.3.0\r\n\r\nPing @Arachnid, I think you saw a similar issue on your repo too.",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/624/reactions",
    "total_count": 8,
    "+1": 8,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/337346302",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-337346302",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 337346302,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzM0NjMwMg==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-17T19:38:05Z",
    "updated_at": "2017-10-17T19:38:05Z",
    "author_association": "NONE",
    "body": "Small update. If I inject a 100ms delay between receiving the transaction and mining it, truffle does correctly detect the block and continue, so this definitely seems to be a data race within truffle.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/337346302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/337367673",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-337367673",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 337367673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNzM2NzY3Mw==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-17T20:53:45Z",
    "updated_at": "2017-10-17T20:53:45Z",
    "author_association": "MEMBER",
    "body": "Thanks for reporting this! Sounds like this will require `truffle-contract` to be reworked slightly to account for this race condition. We will have to triage the work involved in fixing this, or PRs welcome!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/337367673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358244337",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-358244337",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 358244337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODI0NDMzNw==",
    "user": {
      "login": "izqui",
      "id": 447328,
      "node_id": "MDQ6VXNlcjQ0NzMyOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/447328?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/izqui",
      "html_url": "https://github.com/izqui",
      "followers_url": "https://api.github.com/users/izqui/followers",
      "following_url": "https://api.github.com/users/izqui/following{/other_user}",
      "gists_url": "https://api.github.com/users/izqui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/izqui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/izqui/subscriptions",
      "organizations_url": "https://api.github.com/users/izqui/orgs",
      "repos_url": "https://api.github.com/users/izqui/repos",
      "events_url": "https://api.github.com/users/izqui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/izqui/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-17T09:19:25Z",
    "updated_at": "2018-01-17T09:19:54Z",
    "author_association": "NONE",
    "body": "What is the status of this? We are trying to run our test suite on real nodes prior to launch and this issue is blocking us.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358244337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358493371",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-358493371",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 358493371,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODQ5MzM3MQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-18T00:12:55Z",
    "updated_at": "2018-01-18T00:12:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@karalabe @izqui \r\n\r\n@gnidan and I looked at this issue this morning and were wondering if either of you could analyze it further with us. The relevant code at truffle is [here](https://github.com/trufflesuite/truffle-contract/blob/develop/contract.js#L155-L191). It's a callback passed to web3's `myContract.myMethod.sendTransaction`. @karalabe is correct that it patiently waits for the transaction to be mined, but shouldn't this callback be fired as soon as it's mined? \r\n\r\nHave written a small node script for `web3` that reproduces the Truffle sequence and am wondering if someone can run it against geth insta-mine to see if the issue is here or elsewhere? Or arrive at a clearer understanding of it anyway.... Thanks! Apologies for the delay addressing this. \r\n\r\n```javascript\r\n#!/usr/bin/env node\r\nconst solc = require('solc');\r\nconst Web3 = require('web3');\r\nconst web3 = new Web3();\r\n\r\nweb3.setProvider(new web3.providers.HttpProvider('http://localhost:8545'));\r\n\r\n// Compile\r\nconst source = `\r\n  pragma solidity ^0.4.18;\r\n  contract Simple {\r\n    uint x;\r\n\r\n    function set(uint val) public {\r\n      x = val;\r\n    }\r\n  }`;\r\n\r\nconst input = {\r\n  language: \"Solidity\",\r\n  sources: { \"Simple.sol\": { content: source } },\r\n  settings: { outputSelection: { \"*\": { \"*\": [\"abi\", \"evm.bytecode.object\"] } } }\r\n};\r\n\r\nlet output = solc.compileStandard(JSON.stringify(input));\r\noutput = JSON.parse(output, null, ' ');\r\nconst abi = output.contracts[\"Simple.sol\"][\"Simple\"].abi;\r\nconst bytecode = \"0x\" + output.contracts[\"Simple.sol\"][\"Simple\"].evm.bytecode.object;\r\n\r\n// Deploy\r\nconst Simple = web3.eth.contract(abi);\r\nconst deployment = Simple.new({from: web3.eth.coinbase, gas: 1000000, data: bytecode});\r\nconst deploymentReceipt = web3.eth.getTransactionReceipt(deployment.transactionHash);\r\n\r\n// Set a value with sendTransaction\r\nconst instance = Simple.at(deploymentReceipt.contractAddress);\r\n\r\n/*\r\n  truffleMethod.set(5) is like the sequence below. On ganache which also instamines,\r\n  the tx hash is immediately returned in the callback and it's possible to fetch it with\r\n  getTransactionReceipt. On a real client Truffle retries the getTransactionReceipt step\r\n  once a second for ~4 minutes (unless configured otherwise). The hang must come from\r\n  that. On geth instamine, when is this callback fired?\r\n */\r\ninstance.set.sendTransaction(5, {from: web3.eth.coinbase, gas: 90000}, function(err, tx){\r\n  const receipt = web3.eth.getTransactionReceipt(tx); \r\n})\r\n``` ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358493371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358836020",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-358836020",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 358836020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODgzNjAyMA==",
    "user": {
      "login": "cpurta",
      "id": 7330964,
      "node_id": "MDQ6VXNlcjczMzA5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7330964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpurta",
      "html_url": "https://github.com/cpurta",
      "followers_url": "https://api.github.com/users/cpurta/followers",
      "following_url": "https://api.github.com/users/cpurta/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpurta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpurta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpurta/subscriptions",
      "organizations_url": "https://api.github.com/users/cpurta/orgs",
      "repos_url": "https://api.github.com/users/cpurta/repos",
      "events_url": "https://api.github.com/users/cpurta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpurta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T01:15:34Z",
    "updated_at": "2018-01-19T01:15:34Z",
    "author_association": "NONE",
    "body": "@cgewecke I just ran that script against a geth node running the private dev chain. Geth is correctly mining and sealing blocks as it should and that script ran without a problem. Using `geth --dev --rpc` to start the client. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358836020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358862118",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-358862118",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 358862118,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODg2MjExOA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T04:14:04Z",
    "updated_at": "2018-01-19T04:14:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cpurta Thank you that's helpful. Will be looking into this further. . . .",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/358862118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/359093111",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-359093111",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 359093111,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTA5MzExMQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-19T21:24:29Z",
    "updated_at": "2018-01-19T21:24:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@karalabe @cpurta \r\n\r\nIt looks possible that @karalabe's initial hunch about the cause of this problem is correct but the filter is being set at `web3` [here](https://github.com/ethereum/web3.js/blob/develop/lib/web3/contract.js#L96-L120) and [here](https://github.com/ethereum/web3.js/blob/develop/lib/web3/contract.js#L214-L231) on contract creation. When I comment out the `sendTransaction` lines in the script above and modify it to target the `new` callbacks, e.g\r\n```javascript\r\n// Deploy\r\nconst Simple = web3.eth.contract(abi);\r\n\r\nSimple.new({from: web3.eth.coinbase, gas: 1000000, data: bytecode}, (err, instance) => {\r\n  if (err) throw new Error(err);\r\n  if (instance && !instance.address){\r\n    console.log('first cb fires: txHash -->' + instance.transactionHash);\r\n  } else {\r\n    console.log('after filtering for `latest`: contract address --> ' + instance.address);\r\n  }\r\n});\r\n```\r\n\r\n`geth` hangs at the first log line. `ganache-cli` fires the callback twice as expected although not sure if this is the luck of latency or something else. \r\n\r\nThis shouldn't be an issue in `web3 1.0` which uses EventEmitter instead of a double callback. `Web3 1.0` is in Truffle's sights although it will likely come as a breaking release (possibly in the spring). \r\n\r\n@karalabe Do you have any views about the correctness of the diagnosis above or how to proceed here? Some ideas:\r\n+ `geth` introduces optional latency to be backward compatible with original `web3` \r\n+ `web3` inverts it's order, setting up the filter and running the tx within that callback. \r\n\r\nOpen to anything.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/359093111/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/359198207",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-359198207",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 359198207,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTE5ODIwNw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-20T20:02:27Z",
    "updated_at": "2018-01-20T20:02:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "NB: Merged [PR](https://github.com/ethereum/web3.js/pull/936) from July 2017 fixing web3 1.0 to work with parity client's instant seal.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/359198207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360904667",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-360904667",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 360904667,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDkwNDY2Nw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-26T21:08:23Z",
    "updated_at": "2018-01-26T21:08:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cpurta Revisted this and found the following: Using Truffle's example MetaCoin project, if I run `geth` with the `dev.period` option enabled:\r\n```\r\ngeth --dev --dev.period 1 --rpc --targetgaslimit 0x6ACFC0 // <-- 7000000 gas\r\n```\r\nand a Truffle network defined as:\r\n```javascript\r\nnetworks: {\r\n    geth: {\r\n      host: \"127.0.0.1\",\r\n      port: 8545,\r\n      network_id: \"*\",\r\n      gas: 6300000,\r\n    }\r\n  }\r\n```\r\nthen both `truffle migrate --network geth` and `truffle test --network geth` succeed. \r\n\r\nDoes enabling the `dev.period` flag present problems for your use case? Otherwise it seems like we might have overlooked something simple here.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360904667/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360924997",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-360924997",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 360924997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDkyNDk5Nw==",
    "user": {
      "login": "cpurta",
      "id": 7330964,
      "node_id": "MDQ6VXNlcjczMzA5NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7330964?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cpurta",
      "html_url": "https://github.com/cpurta",
      "followers_url": "https://api.github.com/users/cpurta/followers",
      "following_url": "https://api.github.com/users/cpurta/following{/other_user}",
      "gists_url": "https://api.github.com/users/cpurta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cpurta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cpurta/subscriptions",
      "organizations_url": "https://api.github.com/users/cpurta/orgs",
      "repos_url": "https://api.github.com/users/cpurta/repos",
      "events_url": "https://api.github.com/users/cpurta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cpurta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-26T22:42:42Z",
    "updated_at": "2018-01-26T22:42:42Z",
    "author_association": "NONE",
    "body": "@cgewecke I just ran some tests against a geth dev node using the `--dev.period` flag and migration and tests worked perfectly. I was not aware of that flag in geth (guess I should look a bit more closely at the usage 😅). I think that resolves this issue then.\r\n\r\nI am finding that I am running into the same issue using parity. Will be looking into if the same option applies there with their instant seal dev chain. If not it looks like that is something that parity can add before web3 1.0 is integrated with truffle. \r\n\r\nThank you so much for looking into this. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360924997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360928489",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-360928489",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 360928489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDkyODQ4OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-26T23:00:16Z",
    "updated_at": "2018-01-27T03:20:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cpurta Great! No problem at all, really enjoyed it - `geth --dev` is *fast*. Going to close here and track the Parity issue at #389. \r\n\r\n[EDIT] Actually I take that back - it was fast running the metacoin tests, but I looked at Zeppelin and tests are failing (not sure why) / it seems to run at quarter speed as well. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360928489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/415752944",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-415752944",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 415752944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTc1Mjk0NA==",
    "user": {
      "login": "karalabe",
      "id": 129561,
      "node_id": "MDQ6VXNlcjEyOTU2MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/129561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/karalabe",
      "html_url": "https://github.com/karalabe",
      "followers_url": "https://api.github.com/users/karalabe/followers",
      "following_url": "https://api.github.com/users/karalabe/following{/other_user}",
      "gists_url": "https://api.github.com/users/karalabe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/karalabe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/karalabe/subscriptions",
      "organizations_url": "https://api.github.com/users/karalabe/orgs",
      "repos_url": "https://api.github.com/users/karalabe/repos",
      "events_url": "https://api.github.com/users/karalabe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/karalabe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-24T13:06:12Z",
    "updated_at": "2018-08-24T13:06:12Z",
    "author_association": "NONE",
    "body": "Hey all, I'm not sure why this was closed. The issue still persists, blocks take 1 second to be detected by Truffle after they are mined by Geth.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/415752944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/415794097",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-415794097",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 415794097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTc5NDA5Nw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-24T15:27:30Z",
    "updated_at": "2018-08-24T15:27:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @karalabe apologies - \r\n\r\nWe've started running part of truffle's own test suite in [CI](https://travis-ci.org/trufflesuite/truffle/builds/419409671) with geth using `--dev --dev.period 1` and the next version of Truffle (`truffle@beta`) should be able to run without the period flag because the underlying issue has been resolved in web3 1.0.  \r\n\r\nWill update our test scripts to verify that is case.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/415794097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/417808569",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-417808569",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 417808569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzgwODU2OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-31T22:53:29Z",
    "updated_at": "2018-08-31T22:53:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@karalabe Small update here . . . have opened a [PR](https://github.com/trufflesuite/truffle/pull/1247) to run truffle's integration and contract wrapper tests with insta-mine. With an http provider It works (and it's fast).\r\n\r\nHowever, if web3 connects to the client over websockets, there are occasional non-deterministic failures I can't isolate the cause of. Do you have any advice about this? Do you believe the issue is on the web/truffle side or are there known problems with the websockets at Geth?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/417808569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435901009",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-435901009",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 435901009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTkwMTAwOQ==",
    "user": {
      "login": "matthieu-merlyn",
      "id": 13644449,
      "node_id": "MDQ6VXNlcjEzNjQ0NDQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13644449?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthieu-merlyn",
      "html_url": "https://github.com/matthieu-merlyn",
      "followers_url": "https://api.github.com/users/matthieu-merlyn/followers",
      "following_url": "https://api.github.com/users/matthieu-merlyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthieu-merlyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthieu-merlyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthieu-merlyn/subscriptions",
      "organizations_url": "https://api.github.com/users/matthieu-merlyn/orgs",
      "repos_url": "https://api.github.com/users/matthieu-merlyn/repos",
      "events_url": "https://api.github.com/users/matthieu-merlyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthieu-merlyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-05T14:47:35Z",
    "updated_at": "2018-11-05T14:47:35Z",
    "author_association": "NONE",
    "body": "@karalabe @cgewecke @gnidan \r\n\r\nAny updates on this issue? Thanks.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435901009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451491732",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-451491732",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 451491732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTQ5MTczMg==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-01-04T16:22:24Z",
    "updated_at": "2019-01-04T16:22:24Z",
    "author_association": "NONE",
    "body": "Thank you for raising this issue! It has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. If you would like to keep this issue open, please respond with information about the current state of this problem.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451491732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451629024",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-451629024",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 451629024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTYyOTAyNA==",
    "user": {
      "login": "Arachnid",
      "id": 17865,
      "node_id": "MDQ6VXNlcjE3ODY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17865?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Arachnid",
      "html_url": "https://github.com/Arachnid",
      "followers_url": "https://api.github.com/users/Arachnid/followers",
      "following_url": "https://api.github.com/users/Arachnid/following{/other_user}",
      "gists_url": "https://api.github.com/users/Arachnid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Arachnid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Arachnid/subscriptions",
      "organizations_url": "https://api.github.com/users/Arachnid/orgs",
      "repos_url": "https://api.github.com/users/Arachnid/repos",
      "events_url": "https://api.github.com/users/Arachnid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Arachnid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-05T05:17:58Z",
    "updated_at": "2019-01-05T05:17:58Z",
    "author_association": "NONE",
    "body": "This isn't @stale.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451629024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451629029",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-451629029",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 451629029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTYyOTAyOQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-01-05T05:18:00Z",
    "updated_at": "2019-01-05T05:18:00Z",
    "author_association": "NONE",
    "body": "Thanks for your response! This issue is no longer considered stale and someone from the Truffle team will try to respond as soon as they can.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451629029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/454890603",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-454890603",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 454890603,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDg5MDYwMw==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T18:36:39Z",
    "updated_at": "2019-01-16T18:36:39Z",
    "author_association": "MEMBER",
    "body": "@Arachnid or anyone: is this still a problem on Truffle v5? We can look into this to see about resolving the race condition.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/454890603/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/454923305",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-454923305",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 454923305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NDkyMzMwNQ==",
    "user": {
      "login": "Arachnid",
      "id": 17865,
      "node_id": "MDQ6VXNlcjE3ODY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17865?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Arachnid",
      "html_url": "https://github.com/Arachnid",
      "followers_url": "https://api.github.com/users/Arachnid/followers",
      "following_url": "https://api.github.com/users/Arachnid/following{/other_user}",
      "gists_url": "https://api.github.com/users/Arachnid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Arachnid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Arachnid/subscriptions",
      "organizations_url": "https://api.github.com/users/Arachnid/orgs",
      "repos_url": "https://api.github.com/users/Arachnid/repos",
      "events_url": "https://api.github.com/users/Arachnid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Arachnid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-16T20:14:18Z",
    "updated_at": "2019-01-16T20:14:18Z",
    "author_association": "NONE",
    "body": "I'm not certain; if you're unsure if you've fixed it you can simply run any test suite against a geth instance with instant-mining enabled.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/454923305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/455425503",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-455425503",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 455425503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1NTQyNTUwMw==",
    "user": {
      "login": "onetom",
      "id": 56646,
      "node_id": "MDQ6VXNlcjU2NjQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/56646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/onetom",
      "html_url": "https://github.com/onetom",
      "followers_url": "https://api.github.com/users/onetom/followers",
      "following_url": "https://api.github.com/users/onetom/following{/other_user}",
      "gists_url": "https://api.github.com/users/onetom/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/onetom/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/onetom/subscriptions",
      "organizations_url": "https://api.github.com/users/onetom/orgs",
      "repos_url": "https://api.github.com/users/onetom/repos",
      "events_url": "https://api.github.com/users/onetom/events{/privacy}",
      "received_events_url": "https://api.github.com/users/onetom/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-18T04:39:25Z",
    "updated_at": "2019-01-18T04:39:25Z",
    "author_association": "NONE",
    "body": "I'm experiencing inexplicable delays talking to a `geth --dev` even when I'm interfacing with it via web3.js or ethers.io directly.\r\nIt just hangs for seconds...\r\nI'm also seeing `😱 block lost` entries in the `geth` log, which I haven't found a lot of info about, but as I understand it should only happen on a multi-node PoA chain, not on a solo `geth --dev` chain.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/455425503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/493648936",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-493648936",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 493648936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzY0ODkzNg==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-05-18T05:05:54Z",
    "updated_at": "2019-05-18T05:05:54Z",
    "author_association": "NONE",
    "body": "Thank you for raising this issue! It has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. If you would like to keep this issue open, please respond with information about the current state of this problem.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/493648936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/497916345",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-497916345",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 497916345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzkxNjM0NQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-06-01T05:58:20Z",
    "updated_at": "2019-06-01T05:58:20Z",
    "author_association": "NONE",
    "body": "There has been no new activity on this issue since it was marked as stale 7 days ago, so it is being automatically closed.  If you'd like help with this or a different problem, please open a new issue. Thanks!\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/497916345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/497982339",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-497982339",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 497982339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5Nzk4MjMzOQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2019-06-01T22:30:36Z",
    "updated_at": "2019-06-01T22:30:36Z",
    "author_association": "NONE",
    "body": "Thanks for your response! This issue is no longer considered stale and someone from the Truffle team will try to respond as soon as they can.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/497982339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/562893395",
    "html_url": "https://github.com/trufflesuite/truffle/issues/624#issuecomment-562893395",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/624",
    "id": 562893395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2Mjg5MzM5NQ==",
    "user": {
      "login": "tinchoabbate",
      "id": 8171248,
      "node_id": "MDQ6VXNlcjgxNzEyNDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8171248?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tinchoabbate",
      "html_url": "https://github.com/tinchoabbate",
      "followers_url": "https://api.github.com/users/tinchoabbate/followers",
      "following_url": "https://api.github.com/users/tinchoabbate/following{/other_user}",
      "gists_url": "https://api.github.com/users/tinchoabbate/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tinchoabbate/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tinchoabbate/subscriptions",
      "organizations_url": "https://api.github.com/users/tinchoabbate/orgs",
      "repos_url": "https://api.github.com/users/tinchoabbate/repos",
      "events_url": "https://api.github.com/users/tinchoabbate/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tinchoabbate/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-07T22:46:02Z",
    "updated_at": "2019-12-07T22:46:02Z",
    "author_association": "NONE",
    "body": "Just ran into this issue, and still persists. My environment:\r\n\r\nTruffle:\r\n```\r\n$ npx truffle version\r\nTruffle v5.1.3 (core: 5.1.3)\r\nSolidity - 0.5.7 (solc-js)\r\nNode v11.8.0\r\nWeb3.js v1.2.2\r\n```\r\n\r\nTruffle config\r\n```\r\nmodule.exports = {\r\n    networks: {\r\n        geth: {\r\n            host: \"localhost\",\r\n            port: 8543,\r\n            network_id: \"*\",\r\n            gas: 6283185,\r\n            websockets: true\r\n        }\r\n    },\r\n    compilers: {\r\n      solc: {\r\n        version: \"0.5.7\",\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nGeth in Docker:\r\n```\r\nGeth\r\nVersion: 1.9.9-stable\r\nGit Commit: 017449971e1e9e220efcd97d3313a0e27f47003b\r\nGit Commit Date: 20191206\r\nArchitecture: amd64\r\nProtocol Versions: [64 63]\r\nGo Version: go1.13.5\r\nOperating System: linux\r\nGOPATH=\r\nGOROOT=/usr/local/go\r\n```\r\n\r\nI'm connecting to the Geth running in the Docker container over websockets. Setting `--dev.period 1` solves the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/562893395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

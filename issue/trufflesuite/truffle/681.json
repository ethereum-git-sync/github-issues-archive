{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/681",
  "id": 273858444,
  "node_id": "MDU6SXNzdWUyNzM4NTg0NDQ=",
  "number": 681,
  "title": "Truffle develop static network id interferes with MetaMask",
  "user": {
    "login": "pimotte",
    "id": 5917458,
    "node_id": "MDQ6VXNlcjU5MTc0NTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5917458?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pimotte",
    "html_url": "https://github.com/pimotte",
    "followers_url": "https://api.github.com/users/pimotte/followers",
    "following_url": "https://api.github.com/users/pimotte/following{/other_user}",
    "gists_url": "https://api.github.com/users/pimotte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pimotte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pimotte/subscriptions",
    "organizations_url": "https://api.github.com/users/pimotte/orgs",
    "repos_url": "https://api.github.com/users/pimotte/repos",
    "events_url": "https://api.github.com/users/pimotte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pimotte/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2017-11-14T16:34:23Z",
  "updated_at": "2017-12-29T00:07:36Z",
  "closed_at": "2017-11-28T18:13:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nWhen using `truffle develop` a constant network id is used. When shutting down a truffle develop session, the transactions in the testrpc will disappear, but MetaMask will remember them. This will result in errors of the form: 'Error: tx doesn't have the correct nonce'. The corresponding MetaMask issue is here: https://github.com/MetaMask/metamask-extension/issues/1999\r\n\r\nUnless there is a good reason to have the static network id, I feel it would be really useful to signal that the blockchain in question is a *different* blockchain, by virtue of it having a different network id (and possibly chain id).\r\n\r\n## Steps to Reproduce\r\n\r\n1. Unbox and start the react box using `truffle develop`.\r\n2. Open localhost:3000 and Accept the transaction\r\n3. Close `truffle develop` (make sure the process has stopped)\r\n4. Run `truffle develop`, compile, migrate.\r\n5. Open localhost:3000 and Accept transaction\r\n\r\n## Expected Behavior\r\n\r\nThe transaction in step 5 succeeds, by virtue of no prior transactions being in MetaMask, because the second `truffle develop` generated a new network id.\r\n\r\n## Actual Results\r\n\r\nThe transaction in step 5 fails, due to 'Error: tx doesn't have the correct nonce'\r\n\r\n## Environment\r\n\r\n* Operating System: Ubuntu 16.05\r\n* Truffle version: v4.0.1\r\n* Ethereum client: ---\r\n* node version: v6.11.5\r\n* npm version: 5.3.0\r\n",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/681/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344487997",
    "html_url": "https://github.com/trufflesuite/truffle/issues/681#issuecomment-344487997",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
    "id": 344487997,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDQ4Nzk5Nw==",
    "user": {
      "login": "rheaplex",
      "id": 21746,
      "node_id": "MDQ6VXNlcjIxNzQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/21746?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rheaplex",
      "html_url": "https://github.com/rheaplex",
      "followers_url": "https://api.github.com/users/rheaplex/followers",
      "following_url": "https://api.github.com/users/rheaplex/following{/other_user}",
      "gists_url": "https://api.github.com/users/rheaplex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rheaplex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rheaplex/subscriptions",
      "organizations_url": "https://api.github.com/users/rheaplex/orgs",
      "repos_url": "https://api.github.com/users/rheaplex/repos",
      "events_url": "https://api.github.com/users/rheaplex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rheaplex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-15T05:13:44Z",
    "updated_at": "2017-11-15T05:13:44Z",
    "author_association": "NONE",
    "body": "Importing fresh seeds fills up Metamask with old addresses in my experience.\r\n\r\nIMO it would be better for this to be fixed by Metamask as part of their nonce handling improvements.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344487997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344502245",
    "html_url": "https://github.com/trufflesuite/truffle/issues/681#issuecomment-344502245",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
    "id": 344502245,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDUwMjI0NQ==",
    "user": {
      "login": "pimotte",
      "id": 5917458,
      "node_id": "MDQ6VXNlcjU5MTc0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5917458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pimotte",
      "html_url": "https://github.com/pimotte",
      "followers_url": "https://api.github.com/users/pimotte/followers",
      "following_url": "https://api.github.com/users/pimotte/following{/other_user}",
      "gists_url": "https://api.github.com/users/pimotte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pimotte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pimotte/subscriptions",
      "organizations_url": "https://api.github.com/users/pimotte/orgs",
      "repos_url": "https://api.github.com/users/pimotte/repos",
      "events_url": "https://api.github.com/users/pimotte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pimotte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-15T06:52:31Z",
    "updated_at": "2017-11-15T06:52:31Z",
    "author_association": "NONE",
    "body": "What do you mean with that first sentence? Reimporting the seed is a workaround?\r\n\r\nIn any case, the metamask issue says they are not looking to bend over backwards to detect differences between private networks. Doesn't it make sense to use a new network or chain id when you're starting from scratch?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344502245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344834588",
    "html_url": "https://github.com/trufflesuite/truffle/issues/681#issuecomment-344834588",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
    "id": 344834588,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDgzNDU4OA==",
    "user": {
      "login": "rheaplex",
      "id": 21746,
      "node_id": "MDQ6VXNlcjIxNzQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/21746?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rheaplex",
      "html_url": "https://github.com/rheaplex",
      "followers_url": "https://api.github.com/users/rheaplex/followers",
      "following_url": "https://api.github.com/users/rheaplex/following{/other_user}",
      "gists_url": "https://api.github.com/users/rheaplex/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rheaplex/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rheaplex/subscriptions",
      "organizations_url": "https://api.github.com/users/rheaplex/orgs",
      "repos_url": "https://api.github.com/users/rheaplex/repos",
      "events_url": "https://api.github.com/users/rheaplex/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rheaplex/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-16T07:05:47Z",
    "updated_at": "2017-11-16T07:05:47Z",
    "author_association": "NONE",
    "body": "I tried it and importing a new seed doesn't work now. :-(\r\n\r\nI just tried with a new network ID in Ganache and that doesn't work either.\r\n\r\nBetween testrpc and Ganache not working with Metamask without a complete reinstall, and failing in Mist with \"Account not found\" when trying to send transactions I'm not sure what to use to test UI.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344834588/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344837774",
    "html_url": "https://github.com/trufflesuite/truffle/issues/681#issuecomment-344837774",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
    "id": 344837774,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NDgzNzc3NA==",
    "user": {
      "login": "pimotte",
      "id": 5917458,
      "node_id": "MDQ6VXNlcjU5MTc0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5917458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pimotte",
      "html_url": "https://github.com/pimotte",
      "followers_url": "https://api.github.com/users/pimotte/followers",
      "following_url": "https://api.github.com/users/pimotte/following{/other_user}",
      "gists_url": "https://api.github.com/users/pimotte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pimotte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pimotte/subscriptions",
      "organizations_url": "https://api.github.com/users/pimotte/orgs",
      "repos_url": "https://api.github.com/users/pimotte/repos",
      "events_url": "https://api.github.com/users/pimotte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pimotte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-16T07:23:50Z",
    "updated_at": "2017-11-16T07:23:50Z",
    "author_association": "NONE",
    "body": "The MetaMask issue speaks of an undocumented chainId option in testrpc. Can we use that in Ganache to force MetaMask to re-read the transactions?\r\n\r\nI'm of the opinion that this is actually an issue on both sides (i.e. truffle develop should be using random id's, unless pinned by an argument, and metamask should be caching less aggressively)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/344837774/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347613699",
    "html_url": "https://github.com/trufflesuite/truffle/issues/681#issuecomment-347613699",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
    "id": 347613699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzYxMzY5OQ==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T18:13:45Z",
    "updated_at": "2017-11-28T18:13:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi all. \n\nMetamask is currently trying to fix this on their end. Bug here: https://github.com/MetaMask/metamask-extension/issues/1999\n\nWe believe their fix should be all that's needed. I'm going to close this ticket in favor of theirs. Cheers! ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347613699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/354122595",
    "html_url": "https://github.com/trufflesuite/truffle/issues/681#issuecomment-354122595",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/681",
    "id": 354122595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDEyMjU5NQ==",
    "user": {
      "login": "wanderingstan",
      "id": 673455,
      "node_id": "MDQ6VXNlcjY3MzQ1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/673455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wanderingstan",
      "html_url": "https://github.com/wanderingstan",
      "followers_url": "https://api.github.com/users/wanderingstan/followers",
      "following_url": "https://api.github.com/users/wanderingstan/following{/other_user}",
      "gists_url": "https://api.github.com/users/wanderingstan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wanderingstan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wanderingstan/subscriptions",
      "organizations_url": "https://api.github.com/users/wanderingstan/orgs",
      "repos_url": "https://api.github.com/users/wanderingstan/repos",
      "events_url": "https://api.github.com/users/wanderingstan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wanderingstan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-27T14:36:26Z",
    "updated_at": "2017-12-29T00:07:36Z",
    "author_association": "NONE",
    "body": "Metamask has [postponed fixing](https://github.com/MetaMask/metamask-extension/issues/1999#issuecomment-354012719) this on their end: https://github.com/MetaMask/metamask-extension/issues/1999#issuecomment-354012719\r\n\r\nThere is a \"patch\" that may allow you to continue to use `truffle develop` in the meantime: \r\nhttps://github.com/MetaMask/metamask-extension/issues/1999#issuecomment-354141687\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/354122595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

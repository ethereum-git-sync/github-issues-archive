{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/372",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/372/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/372/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/372/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/372",
  "id": 213450006,
  "node_id": "MDU6SXNzdWUyMTM0NTAwMDY=",
  "number": 372,
  "title": "Truffle Kovan gas problem",
  "user": {
    "login": "JackBekket",
    "id": 22002044,
    "node_id": "MDQ6VXNlcjIyMDAyMDQ0",
    "avatar_url": "https://avatars.githubusercontent.com/u/22002044?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JackBekket",
    "html_url": "https://github.com/JackBekket",
    "followers_url": "https://api.github.com/users/JackBekket/followers",
    "following_url": "https://api.github.com/users/JackBekket/following{/other_user}",
    "gists_url": "https://api.github.com/users/JackBekket/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JackBekket/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JackBekket/subscriptions",
    "organizations_url": "https://api.github.com/users/JackBekket/orgs",
    "repos_url": "https://api.github.com/users/JackBekket/repos",
    "events_url": "https://api.github.com/users/JackBekket/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JackBekket/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-03-10T20:56:25Z",
  "updated_at": "2017-09-15T21:47:52Z",
  "closed_at": "2017-09-15T21:47:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nIn Kovan testnet gas limition is 4.7 million gas, but trufffle default value is  ```4712388``` so your transaction with contract deployment never will pass and transaction stack of your ethereum account will be blocked by this transactions with all funds on them.\r\n\r\n## Steps to Reproduce\r\n\r\nstart any node configured for ```kovan testnet``` for example ```parity --chain=kovan``` and try to deploy any contract with ```truffle migrate```.\r\n\r\n## Expected Behavior\r\n\r\nContract deployed.\r\n\r\n## Actual Results\r\n\r\nTransaction is staked, and never will be pass through, also it blocks any other transaction with nonce value higher than that. Any further operation with account's will be blocked by this transaction.\r\n\r\n## Suggestion how to solve problem\r\n\r\nIn first place we need to replace this blocking transaction with valid one. For this you need to connect to ethereum node through Java-Scritpc console and execute method ```web3.eth.sendTransaction``` with manually setted ```nonce``` which compare with nonce of broken transaction, like ```web3.eth.sendTransaction({from:accounts[0],value:5,to:accounts[1],nonce:0});``` where ```nonce``` is the same number as your bloked transaction.\r\n\r\nAs second - you need to set gas amount for deployment in file ```truffle.js``` which must be 4.7M or lower, like -\r\n```\r\nnetworks: {\r\n  development: {\r\n    host: \"localhost\",\r\n    port: 8545,\r\n    network_id: \"*\", // match any network\r\n    gas:4700000\r\n  }\r\n```\r\nAnd after that you can finely deploy contracts in Kovan network throught Truffle.",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/372/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/372/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/286632218",
    "html_url": "https://github.com/trufflesuite/truffle/issues/372#issuecomment-286632218",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/372",
    "id": 286632218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NjYzMjIxOA==",
    "user": {
      "login": "IstoraMandiri",
      "id": 1696942,
      "node_id": "MDQ6VXNlcjE2OTY5NDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1696942?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IstoraMandiri",
      "html_url": "https://github.com/IstoraMandiri",
      "followers_url": "https://api.github.com/users/IstoraMandiri/followers",
      "following_url": "https://api.github.com/users/IstoraMandiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/IstoraMandiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IstoraMandiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IstoraMandiri/subscriptions",
      "organizations_url": "https://api.github.com/users/IstoraMandiri/orgs",
      "repos_url": "https://api.github.com/users/IstoraMandiri/repos",
      "events_url": "https://api.github.com/users/IstoraMandiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IstoraMandiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-15T03:39:37Z",
    "updated_at": "2017-03-15T03:39:37Z",
    "author_association": "NONE",
    "body": "Notes: \r\n\r\n* We've now increased the gas limit on Kovan to 5 mil to get around this, so it shouldn't affect most users anymore\r\n* The `new` method in `truffle-contract` should be using `estimateGas` before deploying if `gas` isn't set, which would solve this problem for other networks with gas lower than the default.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/286632218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/329911962",
    "html_url": "https://github.com/trufflesuite/truffle/issues/372#issuecomment-329911962",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/372",
    "id": 329911962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyOTkxMTk2Mg==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-15T21:47:52Z",
    "updated_at": "2017-09-15T21:47:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey all.\n\nI'm going to close this ticket for housekeeping issues. `truffle-contract` will get a future overhaul, so we'll circle up on the `estimateGas` feature then.\n\nThanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/329911962/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

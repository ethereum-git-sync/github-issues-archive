{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1461",
  "id": 384470567,
  "node_id": "MDU6SXNzdWUzODQ0NzA1Njc=",
  "number": 1461,
  "title": "Random \"Could not connect to your Ethereum client\"",
  "user": {
    "login": "elenadimitrova",
    "id": 703848,
    "node_id": "MDQ6VXNlcjcwMzg0OA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/703848?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/elenadimitrova",
    "html_url": "https://github.com/elenadimitrova",
    "followers_url": "https://api.github.com/users/elenadimitrova/followers",
    "following_url": "https://api.github.com/users/elenadimitrova/following{/other_user}",
    "gists_url": "https://api.github.com/users/elenadimitrova/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/elenadimitrova/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/elenadimitrova/subscriptions",
    "organizations_url": "https://api.github.com/users/elenadimitrova/orgs",
    "repos_url": "https://api.github.com/users/elenadimitrova/repos",
    "events_url": "https://api.github.com/users/elenadimitrova/events{/privacy}",
    "received_events_url": "https://api.github.com/users/elenadimitrova/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-11-26T19:12:39Z",
  "updated_at": "2022-06-16T06:33:16Z",
  "closed_at": "2018-12-12T17:23:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\nWe encounter a client disconnect issue at seemingly random points when running our test suite. Tests pass when run individually.\r\n\r\nThe following issues appear related:\r\nhttps://github.com/trufflesuite/truffle/issues/729\r\nhttps://github.com/trufflesuite/truffle/issues/1260\r\nhttps://github.com/trufflesuite/ganache-core/commit/312902f25e6581c7aee900497ff5146ea217cd4a\r\n\r\n## Steps to Reproduce\r\n\r\nIt has been really difficult to reproduce this issue as it is likely due to a race condition.  \r\n\r\n## Expected Behavior\r\n\r\nTest suite to complete \r\n\r\n## Actual Results\r\n\r\n```\r\n Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n```\r\nSample CI builds failing\r\nhttps://circleci.com/gh/JoinColony/colonyNetwork/4940\r\nhttps://circleci.com/gh/JoinColony/colonyNetwork/4930\r\n\r\n## Environment\r\n\r\n* Operating System: OSX\r\n* Ethereum client: `ganache-cli@6.1.6` https://github.com/area/ganache-cli/commits/fakefix/eth_call_selfdestruct\r\n* Truffle version (`truffle version`): `5.0.0-beta.2`\r\n* node version (`node --version`): `9.11.2`\r\n* npm version (`npm --version`): `5.6.0`",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/446671052",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-446671052",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 446671052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0NjY3MTA1Mg==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-12T17:23:55Z",
    "updated_at": "2018-12-12T17:23:55Z",
    "author_association": "MEMBER",
    "body": "Seems like this is resolved*. Closing, but let us know if the problem starts happening again!\r\n\r\n* https://github.com/JoinColony/colonyNetwork/pull/461",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/446671052/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/458912828",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-458912828",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 458912828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1ODkxMjgyOA==",
    "user": {
      "login": "MicrowaveDev",
      "id": 4842007,
      "node_id": "MDQ6VXNlcjQ4NDIwMDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4842007?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MicrowaveDev",
      "html_url": "https://github.com/MicrowaveDev",
      "followers_url": "https://api.github.com/users/MicrowaveDev/followers",
      "following_url": "https://api.github.com/users/MicrowaveDev/following{/other_user}",
      "gists_url": "https://api.github.com/users/MicrowaveDev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MicrowaveDev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MicrowaveDev/subscriptions",
      "organizations_url": "https://api.github.com/users/MicrowaveDev/orgs",
      "repos_url": "https://api.github.com/users/MicrowaveDev/repos",
      "events_url": "https://api.github.com/users/MicrowaveDev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MicrowaveDev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-30T11:36:00Z",
    "updated_at": "2019-01-30T11:36:00Z",
    "author_association": "NONE",
    "body": "@gnidan Solved by what, downgrading and using custom release? When fix of this error will appeared in regular release? on 5.0.3 release?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/458912828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/961899181",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-961899181",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 961899181,
    "node_id": "IC_kwDOAkfq-c45VWqt",
    "user": {
      "login": "dzarezenko",
      "id": 148570,
      "node_id": "MDQ6VXNlcjE0ODU3MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/148570?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dzarezenko",
      "html_url": "https://github.com/dzarezenko",
      "followers_url": "https://api.github.com/users/dzarezenko/followers",
      "following_url": "https://api.github.com/users/dzarezenko/following{/other_user}",
      "gists_url": "https://api.github.com/users/dzarezenko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dzarezenko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dzarezenko/subscriptions",
      "organizations_url": "https://api.github.com/users/dzarezenko/orgs",
      "repos_url": "https://api.github.com/users/dzarezenko/repos",
      "events_url": "https://api.github.com/users/dzarezenko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dzarezenko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-05T13:34:38Z",
    "updated_at": "2021-11-05T13:36:05Z",
    "author_association": "NONE",
    "body": "I still have the same problem with Ganache. \r\nSome parts of tests passed and this error message after that:\r\n\r\n```\r\nProviderError: \r\nCould not connect to your Ethereum client with the following parameters:\r\n    - host       > 127.0.0.1\r\n    - port       > 8545\r\n    - network_id > 5777\r\nPlease check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle-config.js)\r\n\r\n      at /usr/local/lib/node_modules/truffle/build/webpack:/packages/provider/wrapper.js:73:1\r\n      at /usr/local/lib/node_modules/truffle/build/webpack:/packages/provider/wrapper.js:102:1\r\n      at XMLHttpRequest.request.onreadystatechange (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/web3/node_modules/web3-providers-http/src/index.js:111:1)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request-event-target.js:34:1)\r\n      at XMLHttpRequest._setReadyState (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:208:1)\r\n      at XMLHttpRequest._onHttpRequestError (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:349:1)\r\n      at ClientRequest.<anonymous> (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:252:47)\r\n      at Socket.socketErrorListener (_http_client.js:469:9)\r\n      at emitErrorNT (internal/streams/destroy.js:106:8)\r\n      at emitErrorCloseNT (internal/streams/destroy.js:74:3)\r\n      at processTicksAndRejections (internal/process/task_queues.js:80:21)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/961899181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/991039677",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-991039677",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 991039677,
    "node_id": "IC_kwDOAkfq-c47EhC9",
    "user": {
      "login": "hgouveia",
      "id": 668866,
      "node_id": "MDQ6VXNlcjY2ODg2Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/668866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hgouveia",
      "html_url": "https://github.com/hgouveia",
      "followers_url": "https://api.github.com/users/hgouveia/followers",
      "following_url": "https://api.github.com/users/hgouveia/following{/other_user}",
      "gists_url": "https://api.github.com/users/hgouveia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hgouveia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hgouveia/subscriptions",
      "organizations_url": "https://api.github.com/users/hgouveia/orgs",
      "repos_url": "https://api.github.com/users/hgouveia/repos",
      "events_url": "https://api.github.com/users/hgouveia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hgouveia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-10T14:55:46Z",
    "updated_at": "2021-12-10T14:55:46Z",
    "author_association": "NONE",
    "body": "same here, it shows me that same error randomly, when i check the ganache-cli, is all fine, is not down\r\n\r\n> I still have the same problem with Ganache. Some parts of tests passed and this error message after that:\r\n> \r\n> ```\r\n> ProviderError: \r\n> Could not connect to your Ethereum client with the following parameters:\r\n>     - host       > 127.0.0.1\r\n>     - port       > 8545\r\n>     - network_id > 5777\r\n> Please check that your Ethereum client:\r\n>     - is running\r\n>     - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n>     - is accessible over the network\r\n>     - is properly configured in your Truffle configuration file (truffle-config.js)\r\n> \r\n>       at /usr/local/lib/node_modules/truffle/build/webpack:/packages/provider/wrapper.js:73:1\r\n>       at /usr/local/lib/node_modules/truffle/build/webpack:/packages/provider/wrapper.js:102:1\r\n>       at XMLHttpRequest.request.onreadystatechange (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/web3/node_modules/web3-providers-http/src/index.js:111:1)\r\n>       at XMLHttpRequestEventTarget.dispatchEvent (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request-event-target.js:34:1)\r\n>       at XMLHttpRequest._setReadyState (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:208:1)\r\n>       at XMLHttpRequest._onHttpRequestError (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:349:1)\r\n>       at ClientRequest.<anonymous> (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:252:47)\r\n>       at Socket.socketErrorListener (_http_client.js:469:9)\r\n>       at emitErrorNT (internal/streams/destroy.js:106:8)\r\n>       at emitErrorCloseNT (internal/streams/destroy.js:74:3)\r\n>       at processTicksAndRejections (internal/process/task_queues.js:80:21)\r\n> ```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/991039677/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/991976697",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-991976697",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 991976697,
    "node_id": "IC_kwDOAkfq-c47IFz5",
    "user": {
      "login": "gordienoye",
      "id": 800867,
      "node_id": "MDQ6VXNlcjgwMDg2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/800867?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gordienoye",
      "html_url": "https://github.com/gordienoye",
      "followers_url": "https://api.github.com/users/gordienoye/followers",
      "following_url": "https://api.github.com/users/gordienoye/following{/other_user}",
      "gists_url": "https://api.github.com/users/gordienoye/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gordienoye/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gordienoye/subscriptions",
      "organizations_url": "https://api.github.com/users/gordienoye/orgs",
      "repos_url": "https://api.github.com/users/gordienoye/repos",
      "events_url": "https://api.github.com/users/gordienoye/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gordienoye/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-12T21:49:15Z",
    "updated_at": "2021-12-12T23:09:13Z",
    "author_association": "NONE",
    "body": "I have had the error show up today on tests that were running correctly last week. I have gotten the same errors using `ganache-cli` as well as running the Ganache OSX application. I am on OSX using Truffle installed in the local project:\r\n\r\n```\r\nTruffle v5.4.19 (core: 5.4.19)\r\nSolidity - ^0.8.0 (solc-js)\r\nNode v16.13.0\r\nWeb3.js v1.5.3\r\nGanache CLI v6.12.2 (ganache-core: 2.13.2)\r\n```\r\n\r\nI am getting a very similar error but the call stack is slightly different after `provider/wrapper.js`.\r\n\r\n```\r\n     ProviderError:\r\nCould not connect to your Ethereum client with the following parameters:\r\n    - host       > 127.0.0.1\r\n    - port       > 8545\r\n    - network_id > 1639344360396\r\nPlease check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" or \"--http\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle-config.js)\r\n\r\n      at /Users/gordienoye/<local repo>/node_modules/truffle/build/webpack:/packages/provider/wrapper.js:73:1\r\n      at /Users/gordienoye/<local repo>/node_modules/truffle/build/webpack:/packages/provider/wrapper.js:102:1\r\n      at XMLHttpRequest.request.onreadystatechange (node_modules/truffle/build/webpack:/node_modules/web3/node_modules/web3-providers-http/lib/index.js:98:1)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request-event-target.js:34:1)\r\n      at XMLHttpRequest.exports.modules.996763.XMLHttpRequest._setReadyState (node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:208:1)\r\n      at XMLHttpRequest.exports.modules.996763.XMLHttpRequest._onHttpRequestError (node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:349:1)\r\n      at ClientRequest.<anonymous> (node_modules/truffle/build/webpack:/node_modules/xhr2-cookies/dist/xml-http-request.js:252:47)\r\n      at ClientRequest.emit (node:events:390:28)\r\n      at ClientRequest.emit (node:domain:475:12)\r\n      at Socket.socketErrorListener (node:_http_client:447:9)\r\n      at Socket.emit (node:events:390:28)\r\n      at Socket.emit (node:domain:475:12)\r\n      at emitErrorNT (node:internal/streams/destroy:157:8)\r\n      at emitErrorCloseNT (node:internal/streams/destroy:122:3)\r\n      at processTicksAndRejections (node:internal/process/task_queues:83:21)\r\n```\r\n\r\n---\r\n\r\nA couple notes that _might_ be useful in tracking down the issue:\r\n- Some tests are take an excessively long time to complete on some test runs (normally taking 100 ms and sometimes taking over 20 seconds)\r\n- My tests are making use of `getPastEvents`\r\n- Disconnect happens in a relatively consistent location in the tests--in one of a small group of tests. When I broke out the block of tests into a separate file the disconnect still happened in the same block.\r\n\r\n---\r\n\r\nThe delay in some of the tests is likely related to the fact that the terminal output from `ganache-cli` shows a transaction followed by a call to `eth_getTransactionReceipt` followed by 1764 calls to `eth_getBlockByNumber` just before the above error is thrown.\r\n\r\n---\r\n\r\nThe only debug option that I tried that might shed light on the problem is the `-mem` listing showed a large increase in `external` memory before the disconnect happened. At the point that the tests appear to be hung before getting the disconnect message above, the memory usage was a follows:\r\n\r\n```\r\n{\r\n  rss: 226701312,\r\n  heapTotal: 173957120,\r\n  heapUsed: 133607336,\r\n  external: 37037066,\r\n  arrayBuffers: 18285031\r\n}\r\n{\r\n  rss: 243437568,\r\n  heapTotal: 178151424,\r\n  heapUsed: 143899440,\r\n  external: 60655445,\r\n  arrayBuffers: 22708454\r\n}\r\n{\r\n  rss: 247443456,\r\n  heapTotal: 181559296,\r\n  heapUsed: 150062848,\r\n  external: 79978489,\r\n  arrayBuffers: 24441908\r\n}\r\n{\r\n  rss: 252387328,\r\n  heapTotal: 183918592,\r\n  heapUsed: 144125848,\r\n  external: 99248947,\r\n  arrayBuffers: 23087414\r\n}\r\n{\r\n  rss: 253087744,\r\n  heapTotal: 182345728,\r\n  heapUsed: 134571952,\r\n  external: 29438270,\r\n  arrayBuffers: 18224566\r\n}\r\n```\r\n\r\nAs I could not have the logging active at the same time as the memory logging, I cannot be sure that `ganach-cli` was iterating through the many hundreds of `eth_getBlockByNumber` but I believe it to be a pretty safe bet that it was doing just that.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/991976697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1077582943",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-1077582943",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 1077582943,
    "node_id": "IC_kwDOAkfq-c5AOpxf",
    "user": {
      "login": "chrisdrifte",
      "id": 74468367,
      "node_id": "MDQ6VXNlcjc0NDY4MzY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/74468367?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrisdrifte",
      "html_url": "https://github.com/chrisdrifte",
      "followers_url": "https://api.github.com/users/chrisdrifte/followers",
      "following_url": "https://api.github.com/users/chrisdrifte/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrisdrifte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrisdrifte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrisdrifte/subscriptions",
      "organizations_url": "https://api.github.com/users/chrisdrifte/orgs",
      "repos_url": "https://api.github.com/users/chrisdrifte/repos",
      "events_url": "https://api.github.com/users/chrisdrifte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrisdrifte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-24T12:37:37Z",
    "updated_at": "2022-03-24T12:37:37Z",
    "author_association": "NONE",
    "body": "Fixed this problem by configuring truffle to use a more recent version of web3, as suggested [here](https://github.com/trufflesuite/truffle/issues/3710#issuecomment-1073054526).\r\n\r\nInstall web3 if not already in your deps (worked for me with `1.7.1`)\r\n```shell\r\nyarn add -D web3\r\n```\r\n\r\nUpdate `truffle-config.js` to include `provider` field:\r\n```js\r\nconst Web3 = require(\"web3\");\r\n\r\nmodule.exports = {\r\n  // ...\r\n  networks: {\r\n    development: {\r\n      provider: () => new Web3.providers.HttpProvider(\"http://127.0.0.1:7545\"),\r\n      host: \"127.0.0.1\",\r\n      port: 7545,\r\n      network_id: \"*\",\r\n    },\r\n    // ...\r\n  },\r\n  // ...\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1077582943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1157286676",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1461#issuecomment-1157286676",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1461",
    "id": 1157286676,
    "node_id": "IC_kwDOAkfq-c5E-ssU",
    "user": {
      "login": "stuartwk",
      "id": 11183054,
      "node_id": "MDQ6VXNlcjExMTgzMDU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/11183054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stuartwk",
      "html_url": "https://github.com/stuartwk",
      "followers_url": "https://api.github.com/users/stuartwk/followers",
      "following_url": "https://api.github.com/users/stuartwk/following{/other_user}",
      "gists_url": "https://api.github.com/users/stuartwk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stuartwk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stuartwk/subscriptions",
      "organizations_url": "https://api.github.com/users/stuartwk/orgs",
      "repos_url": "https://api.github.com/users/stuartwk/repos",
      "events_url": "https://api.github.com/users/stuartwk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stuartwk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-16T06:33:16Z",
    "updated_at": "2022-06-16T06:33:16Z",
    "author_association": "NONE",
    "body": "@gordienoye could you find a way to resolve this? I'm running into what looks to be the same thing locally on a Mac...\r\n\r\n```\r\n     ProviderError: \r\nCould not connect to your Ethereum client.\r\nPlease check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle-config.js)\r\n\r\n      at webpack:///./packages/provider/wrapper.js:73:1\r\n      at webpack:///./packages/provider/wrapper.js:102:1\r\n      at XMLHttpRequest.request.onreadystatechange (webpack:///./node_modules/web3/node_modules/web3-providers-http/lib/index.js:98:1)\r\n      at XMLHttpRequestEventTarget.dispatchEvent (webpack:///./node_modules/xhr2-cookies/dist/xml-http-request-event-target.js:34:1)\r\n      at XMLHttpRequest.exports.modules.996763.XMLHttpRequest._setReadyState (webpack:///./node_modules/xhr2-cookies/dist/xml-http-request.js:208:1)\r\n      at XMLHttpRequest.exports.modules.996763.XMLHttpRequest._onHttpRequestError (webpack:///./node_modules/xhr2-cookies/dist/xml-http-request.js:349:1)\r\n      at ClientRequest.<anonymous> (webpack:///./node_modules/xhr2-cookies/dist/xml-http-request.js:252:47)\r\n      at ClientRequest.emit (node:events:526:28)\r\n      at ClientRequest.emit (node:domain:475:12)\r\n      at Socket.socketErrorListener (node:_http_client:442:9)\r\n      at Socket.emit (node:events:526:28)\r\n      at Socket.emit (node:domain:475:12)\r\n      at emitErrorNT (node:internal/streams/destroy:157:8)\r\n      at emitErrorCloseNT (node:internal/streams/destroy:122:3)\r\n      at processTicksAndRejections (node:internal/process/task_queues:83:21)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1157286676/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

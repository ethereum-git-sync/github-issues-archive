{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4322",
  "id": 1004583038,
  "node_id": "I_kwDOAkfq-c474Lh-",
  "number": 4322,
  "title": "[v2] HDWalletProvider; Execution Reverted when trying to 'setRecord' to claim ENS domain.",
  "user": {
    "login": "gsiros",
    "id": 47118034,
    "node_id": "MDQ6VXNlcjQ3MTE4MDM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/47118034?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gsiros",
    "html_url": "https://github.com/gsiros",
    "followers_url": "https://api.github.com/users/gsiros/followers",
    "following_url": "https://api.github.com/users/gsiros/following{/other_user}",
    "gists_url": "https://api.github.com/users/gsiros/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gsiros/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gsiros/subscriptions",
    "organizations_url": "https://api.github.com/users/gsiros/orgs",
    "repos_url": "https://api.github.com/users/gsiros/repos",
    "events_url": "https://api.github.com/users/gsiros/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gsiros/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-09-22T18:08:19Z",
  "updated_at": "2021-12-22T19:22:56Z",
  "closed_at": "2021-12-22T19:22:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this \r\n\r\n---------------------------\r\n**IMPORTANT**; this is the same issue as [this](https://github.com/trufflesuite/truffle/issues/4308). The original issue was closed due to the `ttl` parameter in the `web3.eth.ens.setRecord` function being `0`. I've tried changing the parameter to any other positive integer, **but the result is the same**.\r\n\r\n## Issue\r\n\r\nUsing Truffle's HDWalletProvider causes an error when trying to claim an ENS domain via the web3.js `web3.eth.ens.setRecord` function. The execution gets reverted.\r\n\r\n## Steps to Reproduce\r\n\r\nThe process is very straight forward;\r\n1. Create a provider instance for web3. (12word mnemonic + infura's rinkeby link)\r\n2. Call the `web3.eth.ens.setRecord` function as;\r\n`result = await web3.eth.ens.setRecord('blablabla.eth', accounts[0], \"0xf6305c19e814d2a75429Fd637d01F7ee0E77d615\",             \r\n 10000000, { from: accounts[0] });`\r\n\r\n## Expected Behavior\r\n\r\nThe expected outcome is some message of affirmation, that the domain has been claimed.\r\n\r\n## Actual Results\r\n\r\nThe execution of the transaction gets reverted. The NodeJS terminal output is `{ code: -32000, message: 'execution reverted' }`\r\n\r\n## Environment\r\n\r\n* Operating System: macOS (10.15.7)\r\n* Ethereum client: -\r\n* Truffle's HDWalletProvider version `1.5.0`\r\n* node version `14.17.3`\r\n* npm version `6.14.13`\r\n",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925182930",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4322#issuecomment-925182930",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
    "id": 925182930,
    "node_id": "IC_kwDOAkfq-c43JSvS",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-22T18:30:18Z",
    "updated_at": "2021-09-22T18:30:18Z",
    "author_association": "MEMBER",
    "body": "Hi @gsiros have you tried any other provider to see if you still get this problem? `web3.js` has a provider you can use and then generate a wallet with. Thanks, please let us know if this issue is specific to HD Wallet provider! ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925182930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925269188",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4322#issuecomment-925269188",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
    "id": 925269188,
    "node_id": "IC_kwDOAkfq-c43JnzE",
    "user": {
      "login": "gsiros",
      "id": 47118034,
      "node_id": "MDQ6VXNlcjQ3MTE4MDM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/47118034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsiros",
      "html_url": "https://github.com/gsiros",
      "followers_url": "https://api.github.com/users/gsiros/followers",
      "following_url": "https://api.github.com/users/gsiros/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsiros/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsiros/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsiros/subscriptions",
      "organizations_url": "https://api.github.com/users/gsiros/orgs",
      "repos_url": "https://api.github.com/users/gsiros/repos",
      "events_url": "https://api.github.com/users/gsiros/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsiros/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-22T19:40:36Z",
    "updated_at": "2021-09-22T19:40:36Z",
    "author_association": "NONE",
    "body": "@fainashalts Yes, i have used the  Web3's HttpProvider with Infura's endpoint. It does not work. An error message pops up sayig `eth_SendTransaction does not exist`. Any thoughts? Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925269188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925315204",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4322#issuecomment-925315204",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
    "id": 925315204,
    "node_id": "IC_kwDOAkfq-c43JzCE",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-22T20:43:05Z",
    "updated_at": "2021-09-22T20:43:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, `eth_sendTransaction` doesn't exist because that's used for sending unsigned transactions without a private key.  If you want to use web3 alone to test this, you'll want to use its [`web3.eth.accounts.wallet`](https://web3js.readthedocs.io/en/v1.5.2/web3-eth-accounts.html#wallet) feature.  Once you've created an account to the wallet, web3 will automatically sign for you any transactions sent from it.  Then you can test this out.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925315204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925317152",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4322#issuecomment-925317152",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
    "id": 925317152,
    "node_id": "IC_kwDOAkfq-c43Jzgg",
    "user": {
      "login": "gsiros",
      "id": 47118034,
      "node_id": "MDQ6VXNlcjQ3MTE4MDM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/47118034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsiros",
      "html_url": "https://github.com/gsiros",
      "followers_url": "https://api.github.com/users/gsiros/followers",
      "following_url": "https://api.github.com/users/gsiros/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsiros/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsiros/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsiros/subscriptions",
      "organizations_url": "https://api.github.com/users/gsiros/orgs",
      "repos_url": "https://api.github.com/users/gsiros/repos",
      "events_url": "https://api.github.com/users/gsiros/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsiros/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-22T20:46:13Z",
    "updated_at": "2021-09-22T20:46:13Z",
    "author_association": "NONE",
    "body": "@haltman-at thanks for the info. How do I import MetaMask's existing accounts to web3.eth.accounts.wallet?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925317152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925347049",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4322#issuecomment-925347049",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
    "id": 925347049,
    "node_id": "IC_kwDOAkfq-c43J6zp",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-22T21:33:41Z",
    "updated_at": "2021-09-22T21:33:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I don't know much of anything about MetaMask, but assuming you have their private key, you can use [`web3.eth.accounts.wallet.add`](https://web3js.readthedocs.io/en/v1.5.2/web3-eth-accounts.html#wallet-add).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925347049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/999810131",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4322#issuecomment-999810131",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4322",
    "id": 999810131,
    "node_id": "IC_kwDOAkfq-c47l-RT",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-22T19:22:56Z",
    "updated_at": "2021-12-22T19:22:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, we're going to close this for issue maintenance.  Let us know if there's still a problem here and we can perhaps reopen this.  Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/999810131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

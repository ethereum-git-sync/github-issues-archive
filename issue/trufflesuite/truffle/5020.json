{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/5020",
  "id": 1203890018,
  "node_id": "I_kwDOAkfq-c5Hwedi",
  "number": 5020,
  "title": "Dashboard shows odd network name when connecting with Ganache",
  "user": {
    "login": "benjamincburns",
    "id": 803016,
    "node_id": "MDQ6VXNlcjgwMzAxNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/803016?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benjamincburns",
    "html_url": "https://github.com/benjamincburns",
    "followers_url": "https://api.github.com/users/benjamincburns/followers",
    "following_url": "https://api.github.com/users/benjamincburns/following{/other_user}",
    "gists_url": "https://api.github.com/users/benjamincburns/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benjamincburns/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benjamincburns/subscriptions",
    "organizations_url": "https://api.github.com/users/benjamincburns/orgs",
    "repos_url": "https://api.github.com/users/benjamincburns/repos",
    "events_url": "https://api.github.com/users/benjamincburns/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benjamincburns/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 1675041356,
      "node_id": "MDU6TGFiZWwxNjc1MDQxMzU2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority2%20%E2%9A%A0%EF%B8%8F",
      "name": "priority2 ⚠️",
      "color": "006b75",
      "default": false,
      "description": ""
    },
    {
      "id": 3816950911,
      "node_id": "LA_kwDOAkfq-c7jggx_",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/dashboard",
      "name": "dashboard",
      "color": "4667D5",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-04-13T23:48:29Z",
  "updated_at": "2022-08-24T22:47:09Z",
  "closed_at": "2022-08-24T22:47:09Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nWhen I connect the dashboard to Ganache via Metamask, it tells me that I've connected to a network called \"CENNZNET OLD.\"\r\n\r\n## Steps to Reproduce\r\n\r\n1. Start truffle dashboard\r\n2. Configure MetaMask to point at localhost:8545\r\n3. Observe network name shown in dashboard\r\n\r\n## Expected Behavior\r\n\r\nNetwork name should ideally be resolved in the following order (with each step falling back to the next):\r\n\r\n1. User's `truffle-config.js`\r\n2. Metamask's name for the network\r\n3. https://chainid.network/chains.json (but pulled from the Truffle relay so we can unbreak old versions if that disappears/moves)\r\n\r\n## Actual Results\r\n\r\n![image](https://user-images.githubusercontent.com/803016/163287408-b1425d48-37a3-4b59-a770-4288f635c00d.png)\r\n\r\n## Environment\r\n \r\n* Truffle version (`truffle version`): v5.5.9\r\n",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1105504889",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5020#issuecomment-1105504889",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020",
    "id": 1105504889,
    "node_id": "IC_kwDOAkfq-c5B5Kp5",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-21T17:37:44Z",
    "updated_at": "2022-04-21T17:37:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note that the reason this is happening at present is due to the prioritization of (3) over the others (together with the use of chain ID 1337).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1105504889/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1182894979",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5020#issuecomment-1182894979",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020",
    "id": 1182894979,
    "node_id": "IC_kwDOAkfq-c5GgYuD",
    "user": {
      "login": "cliffoo",
      "id": 41348973,
      "node_id": "MDQ6VXNlcjQxMzQ4OTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/41348973?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cliffoo",
      "html_url": "https://github.com/cliffoo",
      "followers_url": "https://api.github.com/users/cliffoo/followers",
      "following_url": "https://api.github.com/users/cliffoo/following{/other_user}",
      "gists_url": "https://api.github.com/users/cliffoo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cliffoo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cliffoo/subscriptions",
      "organizations_url": "https://api.github.com/users/cliffoo/orgs",
      "repos_url": "https://api.github.com/users/cliffoo/repos",
      "events_url": "https://api.github.com/users/cliffoo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cliffoo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T07:59:16Z",
    "updated_at": "2022-07-13T07:59:16Z",
    "author_association": "MEMBER",
    "body": "Some updates on this issue as I work through [pull#5241](https://github.com/trufflesuite/truffle/pull/5241).\r\n\r\nIn fear of potential supply chain attack (no hard feelings to [lists.eth](https://github.com/ethereum-lists/chains) or [defillama](https://github.com/DefiLlama/chainlist)), I'd like the new Dashboard to minimize all network requests that are not strictly related to processing Dashboard messages.\r\n\r\nSo chainid.network/chains.json appears to come from [ethereum-lists/chains](https://github.com/ethereum-lists/chains), and since:\r\n\r\n- For a given chain, we only need its id and name for now.\r\n- I'd like this id-to-name mapping to go into version control (like how we update sourcify fetcher).\r\n\r\nI made a [little script](https://github.com/cliffoo/parse-chains) to parse the chain data in ethereum-lists/chains, which outputs a json small enough that I want to bundle it into the Dashboard frontend, and use like \r\n```js\r\nimport chainIDtoNameJson from \"src/assets/chainIDtoName.json\";\r\nfunction getChainNameByID(id) {\r\n  return chainIDtoName[id];\r\n}\r\ngetChainNameByID(1337) // => \"Ganache\"\r\n```\r\n\r\nThis, on top of my discovery that MetaMask doesn't seem to provide network names, I think the expected behavior can be modified as such:\r\nResolve chain name by:\r\n1. `truffle-config.js`\r\n2. `chainIDtoName.json` in `packages/dashboard/src/assets`\r\n\r\nNote: [Here](https://github.com/cliffoo/parse-chains/blob/master/index.js#L15)'s why 1337 resolves to \"Ganache\".",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1182894979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1182901850",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5020#issuecomment-1182901850",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020",
    "id": 1182901850,
    "node_id": "IC_kwDOAkfq-c5GgaZa",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T08:06:00Z",
    "updated_at": "2022-07-13T08:06:00Z",
    "author_association": "MEMBER",
    "body": "ah @cliffoo you found a familiar problem! thanks for the write up on the specifics here!\r\n\r\n@haltman-at @davidmurdoch how does @cliffoo's concern [above](https://github.com/trufflesuite/truffle/issues/5020#issuecomment-1182894979) fit into the prior work done on suite-wide network housekeeping? Is `__experimentalInfo` fit for this purpose? (and obligatory comment about can we get it a proper name :). thanks!\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1182901850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1183171360",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5020#issuecomment-1183171360",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020",
    "id": 1183171360,
    "node_id": "IC_kwDOAkfq-c5GhcMg",
    "user": {
      "login": "davidmurdoch",
      "id": 187813,
      "node_id": "MDQ6VXNlcjE4NzgxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/187813?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidmurdoch",
      "html_url": "https://github.com/davidmurdoch",
      "followers_url": "https://api.github.com/users/davidmurdoch/followers",
      "following_url": "https://api.github.com/users/davidmurdoch/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidmurdoch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidmurdoch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidmurdoch/subscriptions",
      "organizations_url": "https://api.github.com/users/davidmurdoch/orgs",
      "repos_url": "https://api.github.com/users/davidmurdoch/repos",
      "events_url": "https://api.github.com/users/davidmurdoch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidmurdoch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T12:38:29Z",
    "updated_at": "2022-07-13T12:38:29Z",
    "author_association": "MEMBER",
    "body": "I don't think it's fit for that purpose, since Truffle/Dashboard might not have access to the provider. 1337 has been the id for devnets (i think it was geth that first used it) since chains had chain ids. Ganache does identify itself via `web3_clientVersion` RPC though.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1183171360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1188804665",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5020#issuecomment-1188804665",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5020",
    "id": 1188804665,
    "node_id": "IC_kwDOAkfq-c5G27g5",
    "user": {
      "login": "benjamincburns",
      "id": 803016,
      "node_id": "MDQ6VXNlcjgwMzAxNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/803016?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjamincburns",
      "html_url": "https://github.com/benjamincburns",
      "followers_url": "https://api.github.com/users/benjamincburns/followers",
      "following_url": "https://api.github.com/users/benjamincburns/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjamincburns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjamincburns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjamincburns/subscriptions",
      "organizations_url": "https://api.github.com/users/benjamincburns/orgs",
      "repos_url": "https://api.github.com/users/benjamincburns/repos",
      "events_url": "https://api.github.com/users/benjamincburns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjamincburns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T09:14:35Z",
    "updated_at": "2022-07-19T09:14:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Open question (no bias from me toward yes/no here) - if we're considering bundling the network list in with the dashboard that will mean that old versions will never \"discover\" new network configurations. Do we care about that? If so, perhaps we could make that JSON object something that could be fetched periodically?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1188804665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

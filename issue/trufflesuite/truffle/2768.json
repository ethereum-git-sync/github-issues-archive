{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2768",
  "id": 551836342,
  "node_id": "MDU6SXNzdWU1NTE4MzYzNDI=",
  "number": 2768,
  "title": "Truffle fails to resolve solc remapping",
  "user": {
    "login": "pik694",
    "id": 12941747,
    "node_id": "MDQ6VXNlcjEyOTQxNzQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/12941747?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pik694",
    "html_url": "https://github.com/pik694",
    "followers_url": "https://api.github.com/users/pik694/followers",
    "following_url": "https://api.github.com/users/pik694/following{/other_user}",
    "gists_url": "https://api.github.com/users/pik694/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pik694/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pik694/subscriptions",
    "organizations_url": "https://api.github.com/users/pik694/orgs",
    "repos_url": "https://api.github.com/users/pik694/repos",
    "events_url": "https://api.github.com/users/pik694/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pik694/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393329,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjk=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    },
    {
      "id": 1086852667,
      "node_id": "MDU6TGFiZWwxMDg2ODUyNjY3",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20requirements",
      "name": "needs requirements",
      "color": "d4c5f9",
      "default": false,
      "description": "feature request is unclear"
    },
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    },
    {
      "id": 1675041996,
      "node_id": "MDU6TGFiZWwxNjc1MDQxOTk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority4%20%F0%9F%93%8B",
      "name": "priority4 ðŸ“‹",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-01-18T22:50:37Z",
  "updated_at": "2021-09-21T20:16:59Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue. []()\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI tried to use `solc` `remapping` by adding the proper option to `truffle-config.js`, but `Resolver` fires an exception before the flow even reaches solc.\r\n\r\n`solc remapping` has been enabled (the option is passed from config to `solc`) as a fix to #2355, and it passes unit tests, but there is no integration test that checks whether it is actually possible to compile contracts using `remappings` option.\r\n\r\n## Steps to Reproduce\r\n\r\nFollow README in [https://github.com/pik694/truffle-remapping-issue.git](https://github.com/pik694/truffle-remapping-issue.git). \r\n\r\nThe exception seems to be thrown in this line [https://github.com/trufflesuite/truffle/blob/7c19713c22a512b6a7f936a6927ddb553836d56e/packages/resolver/index.js#L75](https://github.com/trufflesuite/truffle/blob/7c19713c22a512b6a7f936a6927ddb553836d56e/packages/resolver/index.js#L75).\r\n\r\n\r\n## Expected Behavior\r\n\r\nContracts should compile without errors.\r\n\r\n## Actual Results\r\n\r\n```\r\nCompiling your contracts...\r\n===========================\r\nError: Could not find remapped/C.sol from any sources; imported from /***/truffle-remapping-issue/contracts/A.sol\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:82:1\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/node_modules/async/internal/onlyOnce.js:12:1\r\n    at next (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/async/whilst.js:68:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:69:1\r\n    at FS.resolve (/usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/fs.js:69:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:60:1\r\n    at next (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/async/whilst.js:66:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:69:1\r\n    at GlobalNPM.resolve (/usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/globalnpm.js:50:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:60:1\r\n    at next (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/async/whilst.js:66:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:69:1\r\n    at NPM.resolve (/usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/npm.js:54:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:60:1\r\n    at next (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/async/whilst.js:66:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:69:1\r\n    at EPM.resolve (/usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/epm.js:109:1)\r\n    at /usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:60:1\r\n    at whilst (/usr/local/lib/node_modules/truffle/build/webpack:/node_modules/async/whilst.js:70:1)\r\n    at Resolver.resolve (/usr/local/lib/node_modules/truffle/build/webpack:/packages/resolver/index.js:52:1)\r\n    at Promise (/usr/local/lib/node_modules/truffle/build/webpack:/packages/compile-solidity/profiler/index.js:199:1)\r\n    at new Promise (<anonymous>)\r\nTruffle v5.1.7 (core: 5.1.7)\r\nNode v10.16.3\r\nmake: *** [truffle] Error 1\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: `macOS 10.15`\r\n* Truffle: `v5.1.7 (core: 5.1.7)`\r\n* Solidity: `v0.5.12 (solc-js)`\r\n* Node: `v10.16.3`\r\n* Web3.js: `v1.2.1`\r\n* npm: `6.13.4`\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/576722126",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2768#issuecomment-576722126",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768",
    "id": 576722126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NjcyMjEyNg==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-21T15:03:07Z",
    "updated_at": "2020-01-21T15:03:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pik694 Thanks for reporting this and providing the repro steps! I'll see if I can get to the bottom of this.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/576722126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/577968375",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2768#issuecomment-577968375",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768",
    "id": 577968375,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3Nzk2ODM3NQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-24T02:39:51Z",
    "updated_at": "2020-01-24T02:41:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oh it looks like this problem will be a bit more involved than I thought. The problem is that the resolver doesn't know how to deal with (resolve) the remappings. I don't think we'll have time for it in the immediate future but if anyone is interested in tackling this then let me know!\r\n\r\nI added a \"needs requirements\" label here as I'm not exactly sure what behavior we need to have actually. Somehow we need to basically emulate Solidity's behavior with remappings.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/577968375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/924351172",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2768#issuecomment-924351172",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2768",
    "id": 924351172,
    "node_id": "IC_kwDOAkfq-c43GHrE",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T20:16:59Z",
    "updated_at": "2021-09-21T20:16:59Z",
    "author_association": "NONE",
    "body": "For anyone interested in tackling this: compiler's behavior is now fully documented in [Import remapping](https://docs.soliditylang.org/en/develop/path-resolution.html#import-remapping).\r\n\r\nAlso, the compiler is actually supposed to be able to do that translation for you automatically. The problem is that the resolved path is only computed after parsing and has been missing from the output: https://github.com/ethereum/solidity/issues/11756. This will be fixed in one of the upcoming releases.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/924351172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

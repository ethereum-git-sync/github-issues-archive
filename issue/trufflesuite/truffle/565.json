{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/565",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/565/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/565/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/565/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/565",
  "id": 256900100,
  "node_id": "MDU6SXNzdWUyNTY5MDAxMDA=",
  "number": 565,
  "title": "Truffle migrate process hanging",
  "user": {
    "login": "leopoldjoy",
    "id": 8941653,
    "node_id": "MDQ6VXNlcjg5NDE2NTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8941653?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leopoldjoy",
    "html_url": "https://github.com/leopoldjoy",
    "followers_url": "https://api.github.com/users/leopoldjoy/followers",
    "following_url": "https://api.github.com/users/leopoldjoy/following{/other_user}",
    "gists_url": "https://api.github.com/users/leopoldjoy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leopoldjoy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leopoldjoy/subscriptions",
    "organizations_url": "https://api.github.com/users/leopoldjoy/orgs",
    "repos_url": "https://api.github.com/users/leopoldjoy/repos",
    "events_url": "https://api.github.com/users/leopoldjoy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leopoldjoy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2017-09-12T02:43:54Z",
  "updated_at": "2017-09-19T17:27:57Z",
  "closed_at": "2017-09-19T17:27:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI'm trying to deploy a few contracts using Truffle, however when I call `truffle migrate` no result is returned (the process doesn't terminate), it gets stuck here:\r\n\r\n    Running migration: 1_initial_migration.js\r\n    Deploying Migrations...\r\n    ... 0xd117334af701c281d57f33caead63954ec00c673e3e4adc653fe2bace0b6eea1\r\n\r\n## Steps to Reproduce\r\n\r\n1) Setup `geth` using `puppeth ` by following [this tutorial](https://modalduality.org/posts/puppeth/)\r\n2) Call `npm install -g truffle` in an empty directory\r\n3) Call `truffle init`\r\n4) Call `truffle compile`\r\n5) Call `truffle migrate`, here is where the script will not terminate (freeze)\r\n\r\n## Expected Behavior\r\n\r\nI expect the script to terminate after calling `truffle migrate` and return the address of the deployed contract.\r\n\r\n## Actual Results\r\n\r\nIn addition to the above error, when I call `truffle migrate` with the `--verbose-rp` flag I get the following output:\r\n\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 1,\r\n         >   \"method\": \"net_version\",\r\n         >   \"params\": []\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 1,\r\n       <     \"result\": \"1\"\r\n       <   }\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 2,\r\n         >   \"method\": \"eth_accounts\",\r\n         >   \"params\": []\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 2,\r\n       <     \"result\": [\r\n       <       \"0xb609f2d1584a60c61ea4d245833cde5ca0f00c82\"\r\n       <     ]\r\n       <   }\r\n      Using network 'development'.\r\n\r\n      Running migration: 1_initial_migration.js\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 3,\r\n         >   \"method\": \"eth_accounts\",\r\n         >   \"params\": []\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 3,\r\n       <     \"result\": [\r\n       <       \"0xb609f2d1584a60c61ea4d245833cde5ca0f00c82\"\r\n       <     ]\r\n       <   }\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 4,\r\n         >   \"method\": \"net_version\",\r\n         >   \"params\": []\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 4,\r\n       <     \"result\": \"1\"\r\n       <   }\r\n        Deploying Migrations...\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 5,\r\n         >   \"method\": \"net_version\",\r\n         >   \"params\": []\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 5,\r\n       <     \"result\": \"1\"\r\n       <   }\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 6,\r\n         >   \"method\": \"eth_sendTransaction\",\r\n         >   \"params\": [\r\n         >     {\r\n         >       \"from\": \"0xb609f2d1584a60c61ea4d245833cde5ca0f00c82\",\r\n         >       \"gas\": \"0xf4240\",\r\n         >       \"gasPrice\": \"0x174876e800\",\r\n         >       \"data\": \"0x6060604052341561000f57600080fd5b5b60008054600160a060020a03191633600160a060020a03161790555b5b6101e58061003c6000396000f300606060405263ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416630900f010811461005e578063445df0ac1461007f5780638da5cb5b146100a4578063fdacd576146100d3575b600080fd5b341561006957600080fd5b61007d600160a060020a03600435166100eb565b005b341561008a57600080fd5b610092610182565b60405190815260200160405180910390f35b34156100af57600080fd5b6100b7610188565b604051600160a060020a03909116815260200160405180910390f35b34156100de57600080fd5b61007d600435610197565b005b6000805433600160a060020a039081169116141561017c5781905080600160a060020a031663fdacd5766001546040517c010000000000000000000000000000000000000000000000000000000063ffffffff84160281526004810191909152602401600060405180830381600087803b151561016757600080fd5b6102c65a03f1151561017857600080fd5b5050505b5b5b5050565b60015481565b600054600160a060020a031681565b60005433600160a060020a03908116911614156101b45760018190555b5b5b505600a165627a7a723058208ce0c069dd06b408f0fbfcaa5b8903a11618c2150ba05f03219dbc3982a7e2a70029\"\r\n         >     }\r\n         >   ]\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 6,\r\n       <     \"result\": \"0x96002d6db3fb2c50a1f7bc7b9fe49120925c60b88bffadebc4f754af757cc399\"\r\n       <   }\r\n        ... 0x96002d6db3fb2c50a1f7bc7b9fe49120925c60b88bffadebc4f754af757cc399\r\n         > {\r\n         >   \"jsonrpc\": \"2.0\",\r\n         >   \"id\": 7,\r\n         >   \"method\": \"eth_newBlockFilter\",\r\n         >   \"params\": []\r\n         > }\r\n       <   {\r\n       <     \"jsonrpc\": \"2.0\",\r\n       <     \"id\": 7,\r\n       <     \"result\": \"0xaf9eb6480baf7af0e42a8506b52a6ff1\"\r\n       <   }\r\n         > [\r\n         >   {\r\n         >     \"jsonrpc\": \"2.0\",\r\n         >     \"id\": 8,\r\n         >     \"method\": \"eth_getFilterChanges\",\r\n         >     \"params\": [\r\n         >       \"0xaf9eb6480baf7af0e42a8506b52a6ff1\"\r\n         >     ]\r\n         >   }\r\n         > ]\r\n       <   [\r\n       <     {\r\n       <       \"jsonrpc\": \"2.0\",\r\n       <       \"id\": 8,\r\n       <       \"result\": []\r\n       <     }\r\n       <   ]\r\n         > [\r\n         >   {\r\n         >     \"jsonrpc\": \"2.0\",\r\n         >     \"id\": 9,\r\n         >     \"method\": \"eth_getFilterChanges\",\r\n         >     \"params\": [\r\n         >       \"0xaf9eb6480baf7af0e42a8506b52a6ff1\"\r\n         >     ]\r\n         >   }\r\n         > ]\r\n       <   [\r\n       <     {\r\n       <       \"jsonrpc\": \"2.0\",\r\n       <       \"id\": 9,\r\n       <       \"result\": []\r\n       <     }\r\n       <   ]\r\n         > [\r\n         >   {\r\n         >     \"jsonrpc\": \"2.0\",\r\n         >     \"id\": 10,\r\n         >     \"method\": \"eth_getFilterChanges\",\r\n         >     \"params\": [\r\n         >       \"0xaf9eb6480baf7af0e42a8506b52a6ff1\"\r\n         >     ]\r\n         >   }\r\n         > ]\r\n       <   [\r\n       <     {\r\n       <       \"jsonrpc\": \"2.0\",\r\n       <       \"id\": 10,\r\n       <       \"result\": []\r\n       <     }\r\n       <   ]\r\n    \r\n    ... Continues like this with the \"id\" field increasing indefinitely\r\n\r\n## Environment\r\n\r\n* Operating System: MacOS 10.12\r\n* Truffle version: 3.4.9\r\n* Ethereum client: geth 1.6.7\r\n* node version: 8.4.0\r\n* npm version: 4.6.1\r\n",
  "closed_by": {
    "login": "leopoldjoy",
    "id": 8941653,
    "node_id": "MDQ6VXNlcjg5NDE2NTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8941653?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/leopoldjoy",
    "html_url": "https://github.com/leopoldjoy",
    "followers_url": "https://api.github.com/users/leopoldjoy/followers",
    "following_url": "https://api.github.com/users/leopoldjoy/following{/other_user}",
    "gists_url": "https://api.github.com/users/leopoldjoy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/leopoldjoy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/leopoldjoy/subscriptions",
    "organizations_url": "https://api.github.com/users/leopoldjoy/orgs",
    "repos_url": "https://api.github.com/users/leopoldjoy/repos",
    "events_url": "https://api.github.com/users/leopoldjoy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/leopoldjoy/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/565/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/565/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/330374926",
    "html_url": "https://github.com/trufflesuite/truffle/issues/565#issuecomment-330374926",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/565",
    "id": 330374926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDM3NDkyNg==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-18T22:32:38Z",
    "updated_at": "2017-09-18T22:32:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "From the output you provided (thank you!) it looks like Truffle was never able to verify that the contract was mined successfully. On your geth private blockchain, are you mining by chance? If not, then transactions won't be processed correctly, and migrations won't complete successfully.\n\nA little history tidbit: Way early on in Truffle we removed any kind of timeout from migrations because you might be deploying to a live chain -- and if there's congestion, especially early on in Ethereum's history, transactions could take hours to succeed. A timeout in this case would cause you to lose your Ether and put the migration in a unknown state. So we decided to remove the timeout, hence giving the appearance that the migration is hanging. The `eth_getFilterChanges` requests you're seeing are Truffle polling to see if the transaction was mined successfully. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/330374926/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/330612704",
    "html_url": "https://github.com/trufflesuite/truffle/issues/565#issuecomment-330612704",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/565",
    "id": 330612704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzMDYxMjcwNA==",
    "user": {
      "login": "leopoldjoy",
      "id": 8941653,
      "node_id": "MDQ6VXNlcjg5NDE2NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8941653?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/leopoldjoy",
      "html_url": "https://github.com/leopoldjoy",
      "followers_url": "https://api.github.com/users/leopoldjoy/followers",
      "following_url": "https://api.github.com/users/leopoldjoy/following{/other_user}",
      "gists_url": "https://api.github.com/users/leopoldjoy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/leopoldjoy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/leopoldjoy/subscriptions",
      "organizations_url": "https://api.github.com/users/leopoldjoy/orgs",
      "repos_url": "https://api.github.com/users/leopoldjoy/repos",
      "events_url": "https://api.github.com/users/leopoldjoy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/leopoldjoy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-19T17:27:57Z",
    "updated_at": "2017-09-19T17:27:57Z",
    "author_association": "NONE",
    "body": "@tcoulter Thanks for the reply! I actually ended up switching to `parity`. You're right though, I think I wasn't mining which was causing the migrations to not complete.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/330612704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

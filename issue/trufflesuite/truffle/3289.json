{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3289",
  "id": 683868678,
  "node_id": "MDU6SXNzdWU2ODM4Njg2Nzg=",
  "number": 3289,
  "title": "Truffle Ignores Compiler Version",
  "user": {
    "login": "creese",
    "id": 1467590,
    "node_id": "MDQ6VXNlcjE0Njc1OTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1467590?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/creese",
    "html_url": "https://github.com/creese",
    "followers_url": "https://api.github.com/users/creese/followers",
    "following_url": "https://api.github.com/users/creese/following{/other_user}",
    "gists_url": "https://api.github.com/users/creese/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/creese/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/creese/subscriptions",
    "organizations_url": "https://api.github.com/users/creese/orgs",
    "repos_url": "https://api.github.com/users/creese/repos",
    "events_url": "https://api.github.com/users/creese/events{/privacy}",
    "received_events_url": "https://api.github.com/users/creese/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-08-21T23:03:32Z",
  "updated_at": "2020-08-22T17:31:43Z",
  "closed_at": "2020-08-22T17:31:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nWhen I specify a compiler version, Truffle ignores the settings in my truffle config and uses the default compiler instead.\r\n\r\n## Steps to Reproduce\r\n\r\n1. Create a new project using `truffle unbox pet-shop`.\r\n2. Create a new smart contract with `pragma solidity 0.6.12;`.\r\n3. Add the following lines to `truffle-config.js`.\r\n```\r\ncompilers: {\r\n      solc: {\r\n        version: \"0.6.12\"\r\n        }\r\n    }\r\n```\r\n4. Compile the code using `truffle compile`.\r\n\r\n## Expected Behavior\r\n\r\nTruffle uses solc 0.6.12 to compile the code.\r\n\r\n## Actual Results\r\n\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/Election.sol\r\n> Compiling ./contracts/Migrations.sol\r\n\r\n/home/hero/code/election/contracts/Election.sol:1:1: ParserError: Source file requires different compiler version (current compiler is 0.5.16+commit.9c3226ce.Emscripten.clang - note that nightly builds are considered to be strictly less than the released version\r\npragma solidity 0.6.12;\r\n^---------------------^\r\n\r\nError: Truffle is currently using solc 0.5.16, but one or more of your contracts specify \"pragma solidity 0.6.12\".\r\nPlease update your truffle config or pragma statement(s).\r\n(See https://truffleframework.com/docs/truffle/reference/configuration#compiler-configuration for information on\r\nconfiguring Truffle to use a specific solc compiler version.)\r\n\r\nCompilation failed. See above.\r\nTruffle v5.1.41 (core: 5.1.41)\r\nNode v12.18.3\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: Arch Linux (5.8.1-arch1-1)\r\n* Ethereum client: n/a\r\n* Truffle version (`truffle version`): 5.1.41\r\n* node version (`node --version`): 12.18.3\r\n* npm version (`npm --version`): 6.14.6",
  "closed_by": {
    "login": "creese",
    "id": 1467590,
    "node_id": "MDQ6VXNlcjE0Njc1OTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1467590?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/creese",
    "html_url": "https://github.com/creese",
    "followers_url": "https://api.github.com/users/creese/followers",
    "following_url": "https://api.github.com/users/creese/following{/other_user}",
    "gists_url": "https://api.github.com/users/creese/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/creese/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/creese/subscriptions",
    "organizations_url": "https://api.github.com/users/creese/orgs",
    "repos_url": "https://api.github.com/users/creese/repos",
    "events_url": "https://api.github.com/users/creese/events{/privacy}",
    "received_events_url": "https://api.github.com/users/creese/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678571346",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3289#issuecomment-678571346",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289",
    "id": 678571346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODU3MTM0Ng==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-22T01:03:42Z",
    "updated_at": "2020-08-22T01:03:42Z",
    "author_association": "MEMBER",
    "body": "Could you paste your whole truffle-config? (Minus any private info, like mnemonics or keys)\r\n\r\nI just tried this and it seems to work fine. Don't know why it wouldn't work, unless you have a duplicate `compilers` section or such.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678571346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678577178",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3289#issuecomment-678577178",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289",
    "id": 678577178,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODU3NzE3OA==",
    "user": {
      "login": "creese",
      "id": 1467590,
      "node_id": "MDQ6VXNlcjE0Njc1OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1467590?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/creese",
      "html_url": "https://github.com/creese",
      "followers_url": "https://api.github.com/users/creese/followers",
      "following_url": "https://api.github.com/users/creese/following{/other_user}",
      "gists_url": "https://api.github.com/users/creese/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/creese/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/creese/subscriptions",
      "organizations_url": "https://api.github.com/users/creese/orgs",
      "repos_url": "https://api.github.com/users/creese/repos",
      "events_url": "https://api.github.com/users/creese/events{/privacy}",
      "received_events_url": "https://api.github.com/users/creese/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-22T01:45:36Z",
    "updated_at": "2020-08-22T01:45:36Z",
    "author_association": "NONE",
    "body": "```\r\nmodule.exports = {\r\n  // See <http://truffleframework.com/docs/advanced/configuration>\r\n  // for more about customizing your Truffle configuration!\r\n  networks: {\r\n    development: {\r\n      host: \"127.0.0.1\",\r\n      port: 7545,\r\n      network_id: \"*\" // Match any network id\r\n    },\r\n    develop: {\r\n      port: 8545\r\n    },\r\n    compilers: {\r\n      solc: {\r\n        version: \"0.6.12\"\r\n      }\r\n    }\r\n  }\r\n};\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678577178/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678591742",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3289#issuecomment-678591742",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289",
    "id": 678591742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODU5MTc0Mg==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-22T04:19:05Z",
    "updated_at": "2020-08-22T04:19:05Z",
    "author_association": "MEMBER",
    "body": "Ah! You have `compilers` inside `networks`; it should be at the top-level:\r\n\r\n```javascript\r\nmodule.exports = {\r\n  // See <http://truffleframework.com/docs/advanced/configuration>\r\n  // for more about customizing your Truffle configuration!\r\n  networks: {\r\n    development: {\r\n      host: \"127.0.0.1\",\r\n      port: 7545,\r\n      network_id: \"*\" // Match any network id\r\n    },\r\n    develop: {\r\n      port: 8545\r\n    }\r\n  },\r\n  compilers: {\r\n    solc: {\r\n      version: \"0.6.12\"\r\n    }\r\n  }\r\n};\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678591742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678669012",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3289#issuecomment-678669012",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3289",
    "id": 678669012,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3ODY2OTAxMg==",
    "user": {
      "login": "creese",
      "id": 1467590,
      "node_id": "MDQ6VXNlcjE0Njc1OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1467590?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/creese",
      "html_url": "https://github.com/creese",
      "followers_url": "https://api.github.com/users/creese/followers",
      "following_url": "https://api.github.com/users/creese/following{/other_user}",
      "gists_url": "https://api.github.com/users/creese/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/creese/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/creese/subscriptions",
      "organizations_url": "https://api.github.com/users/creese/orgs",
      "repos_url": "https://api.github.com/users/creese/repos",
      "events_url": "https://api.github.com/users/creese/events{/privacy}",
      "received_events_url": "https://api.github.com/users/creese/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-22T17:31:43Z",
    "updated_at": "2020-08-22T17:31:43Z",
    "author_association": "NONE",
    "body": "Thanks, that did it!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/678669012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

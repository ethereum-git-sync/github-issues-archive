{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1181",
  "id": 349514260,
  "node_id": "MDU6SXNzdWUzNDk1MTQyNjA=",
  "number": 1181,
  "title": "scripts won't exit in 4.1.13",
  "user": {
    "login": "djudjuu",
    "id": 9882716,
    "node_id": "MDQ6VXNlcjk4ODI3MTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9882716?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djudjuu",
    "html_url": "https://github.com/djudjuu",
    "followers_url": "https://api.github.com/users/djudjuu/followers",
    "following_url": "https://api.github.com/users/djudjuu/following{/other_user}",
    "gists_url": "https://api.github.com/users/djudjuu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djudjuu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djudjuu/subscriptions",
    "organizations_url": "https://api.github.com/users/djudjuu/orgs",
    "repos_url": "https://api.github.com/users/djudjuu/repos",
    "events_url": "https://api.github.com/users/djudjuu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djudjuu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-08-10T13:24:16Z",
  "updated_at": "2018-08-10T21:11:21Z",
  "closed_at": "2018-08-10T21:11:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\nWhen running truffle scirpts (e.g. 'truffle compile' or 'truffle networks') the script runs, but does not exit. This is annoying as it is impossible to use truffle scripts in pipelines such as npm's \"prepublish\"\r\n\r\n## Steps to Reproduce\r\n\r\n- run truffle networks\r\n\r\n## Expected Behavior\r\n\r\nlist networks and exit process\r\n\r\n## Actual Results\r\n\r\nit does not exit:\r\n\r\n![screenshot from 2018-08-10 15-21-20](https://user-images.githubusercontent.com/9882716/43960063-1987c6c4-9cb1-11e8-956f-30a827bad5ff.png)\r\n\r\n## Environment\r\n\r\n* Operating System: ubuntu gnome\r\n* Ethereum client:\r\n* Truffle version (`truffle version`): 4.1.13 (older version 4.1.7 did not have the bug)\r\n* node version (`node --version`): v.9.11.2\r\n* npm version (`npm --version`): 6.1.0\r\n",
  "closed_by": {
    "login": "djudjuu",
    "id": 9882716,
    "node_id": "MDQ6VXNlcjk4ODI3MTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9882716?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/djudjuu",
    "html_url": "https://github.com/djudjuu",
    "followers_url": "https://api.github.com/users/djudjuu/followers",
    "following_url": "https://api.github.com/users/djudjuu/following{/other_user}",
    "gists_url": "https://api.github.com/users/djudjuu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/djudjuu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/djudjuu/subscriptions",
    "organizations_url": "https://api.github.com/users/djudjuu/orgs",
    "repos_url": "https://api.github.com/users/djudjuu/repos",
    "events_url": "https://api.github.com/users/djudjuu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/djudjuu/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/412138706",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1181#issuecomment-412138706",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181",
    "id": 412138706,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjEzODcwNg==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T16:41:24Z",
    "updated_at": "2018-08-10T16:54:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @djudjuu.\r\n\r\nCan you show your `truffle.js`? There was a change in the `hdwallet-provider` a couple months ago that makes it critical to wrap it in a function when setting the provider, as shown in the docs [here](https://truffleframework.com/docs/truffle/reference/configuration#providers). If this isn't done it automatically connects to a network and leaves an interval timer open that prevents the script from exiting correctly. \r\n\r\nWe're also shipping a more permanent fix for this bug early next week  . . .",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/412138706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/412207618",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1181#issuecomment-412207618",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1181",
    "id": 412207618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMjIwNzYxOA==",
    "user": {
      "login": "djudjuu",
      "id": 9882716,
      "node_id": "MDQ6VXNlcjk4ODI3MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9882716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/djudjuu",
      "html_url": "https://github.com/djudjuu",
      "followers_url": "https://api.github.com/users/djudjuu/followers",
      "following_url": "https://api.github.com/users/djudjuu/following{/other_user}",
      "gists_url": "https://api.github.com/users/djudjuu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/djudjuu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/djudjuu/subscriptions",
      "organizations_url": "https://api.github.com/users/djudjuu/orgs",
      "repos_url": "https://api.github.com/users/djudjuu/repos",
      "events_url": "https://api.github.com/users/djudjuu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/djudjuu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-10T21:11:20Z",
    "updated_at": "2018-08-10T21:11:20Z",
    "author_association": "NONE",
    "body": "> wrap it in a function when setting the provider, as shown in the docs here. \r\n\r\nspot on. that fixed it! ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/412207618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

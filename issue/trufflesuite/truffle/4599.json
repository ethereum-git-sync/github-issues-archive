{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4599",
  "id": 1095364430,
  "node_id": "I_kwDOAkfq-c5BSe9O",
  "number": 4599,
  "title": "Project migrating fine with Mumbai testnet but not working with Matic mainnet.",
  "user": {
    "login": "mustafa-boorenie",
    "id": 75136994,
    "node_id": "MDQ6VXNlcjc1MTM2OTk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/75136994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mustafa-boorenie",
    "html_url": "https://github.com/mustafa-boorenie",
    "followers_url": "https://api.github.com/users/mustafa-boorenie/followers",
    "following_url": "https://api.github.com/users/mustafa-boorenie/following{/other_user}",
    "gists_url": "https://api.github.com/users/mustafa-boorenie/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mustafa-boorenie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mustafa-boorenie/subscriptions",
    "organizations_url": "https://api.github.com/users/mustafa-boorenie/orgs",
    "repos_url": "https://api.github.com/users/mustafa-boorenie/repos",
    "events_url": "https://api.github.com/users/mustafa-boorenie/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mustafa-boorenie/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-01-06T14:19:46Z",
  "updated_at": "2022-01-06T22:15:12Z",
  "closed_at": "2022-01-06T22:15:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've [opened a support ticket](https://trufflesuite.zendesk.com/hc/en-us/requests/new) before filing this issue.\r\n\r\n---------------------------\r\n\r\nI have been trying to migrate my truffle ERC20 token to MATIC's main net. However I keep getting this error:\r\n\r\nIt seems that the running: $ truffle migrate --network matic (-- reset) OR $ truffle deploy --network matic (-- reset)\r\nDoes not connect with the MATIC chain. Regardless, it works fine when uploading to the Mumbai testnet. \r\n\r\nMy truffle-config.js file:\r\n\r\n```\r\n`const HDWalletProvider = require('@truffle/hdwallet-provider');\r\nrequire('dotenv').config();\r\n\r\nconst mnemonic = process.env.MNEMONIC;\r\nconst eth_key = process.env.ETHERSCAN_API_KEY;\r\nconst poly_key = process.env.POLY_API_KEY;\r\n\r\nmodule.exports = {  \r\n  api_keys : {  \r\n\r\n    etherscan : eth_key,    // Add Etherscan API Key here\r\n    polygonscan :  poly_key // Add Polygonscan API Key here\r\n  },\r\n\r\n  networks: {\r\n    mumbai: {\r\n      provider: () => new HDWalletProvider(mnemonic, `https://polygon-mumbai.infura.io/v3/${process.env.INFURA_KEY}`),\r\n      network_id: 80001,\r\n      confirmations: 2,\r\n      timeoutBlocks: 200,\r\n      skipDryRun: true\r\n    },\r\n\r\n    matic: {\r\n      provider: () => new HDWalletProvider(mnemonic, `https://polygon-mainnet.infura.io/v3/${process.env.INFURA_KEY}`),\r\n      network_id: 137,    // # Polygon network ID (default: 137)\r\n      confirmations: 0,   // # of blocks to confirm deployment (default : 0)\r\n      timeoutBlocks: 200, // # of blocks before deployment time runs out (default : 200 )\r\n      skipDryRun: true,   // Simulated dry-run (default: false)\r\n      networkCheckTimeout: 1000000\r\n    },\r\n  },\r\n\r\n  mocha: {\r\n    // timeout: 100000\r\n  },\r\n\r\n  compilers: {\r\n    solc: {\r\n      version: \"0.8.9\",    // Fetch exact version from solc-bin (default: truffle's version)\r\n      // docker: true,        // Use \"0.5.1\" you've installed locally with docker (default: false)\r\n      // settings: {          // See the solidity docs for advice about optimization and evmVersion\r\n       optimizer: {\r\n         enabled: true,\r\n         runs: 200\r\n       },\r\n    }\r\n  },\r\n\r\n  plugins : [\r\n    // Plug-in added here to improve verification efficiency\r\n    // !!!!REMEMBER TO ADD ETHERSCAN API KEY!!!!\r\n    'truffle-plugin-verify'\r\n  ]\r\n\r\n};`\r\n```\r\n\r\nUsing this, running truffle deploy --network matic should deploy the contract, instead it displays:\r\n\r\n/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:160\r\n        cb(null, null)\r\n        ^\r\nError: Could not find block\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:59:28\r\n    at afterRequest (/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:160:9)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:175:12\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:234:9\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/async/internal/once.js:12:16\r\n    at replenish (/Users/mustafaboorenie/desertcoin/node_modules/async/internal/eachOfLimit.js:61:25)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/async/internal/eachOfLimit.js:71:9\r\n    at eachLimit (/Users/mustafaboorenie/desertcoin/node_modules/async/eachLimit.js:43:36)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/async/internal/doLimit.js:9:16\r\n    at end (/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:211:5)\r\n    at Request._callback (/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/subproviders/rpc.js:72:5)\r\n    at Request.self.callback (/Users/mustafaboorenie/desertcoin/node_modules/request/request.js:185:22)\r\n    at Request.emit (node:events:390:28)\r\n    at Request.<anonymous> (/Users/mustafaboorenie/desertcoin/node_modules/request/request.js:1154:10)\r\n    at Request.emit (node:events:390:28)\r\n    at IncomingMessage.<anonymous> (/Users/mustafaboorenie/desertcoin/node_modules/request/request.js:1076:12)\r\n\r\nOR displays:\r\n\r\n message: 'ESOCKETTIMEDOUT',\r\n  data: { originalError: { code: 'ESOCKETTIMEDOUT', connect: false } }\r\n})\r\n    at new NodeError (node:internal/errors:371:5)\r\n    at Web3ProviderEngine.emit (node:events:379:17)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:54:14\r\n    at afterRequest (/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:148:21)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:174:21\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:232:9\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/async/internal/once.js:12:16\r\n    at replenish (/Users/mustafaboorenie/desertcoin/node_modules/async/internal/eachOfLimit.js:61:25)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/async/internal/eachOfLimit.js:71:9\r\n    at eachLimit (/Users/mustafaboorenie/desertcoin/node_modules/async/eachLimit.js:43:36)\r\n    at /Users/mustafaboorenie/desertcoin/node_modules/async/internal/doLimit.js:9:16\r\n    at end (/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/index.js:211:5)\r\n    at Request._callback (/Users/mustafaboorenie/desertcoin/node_modules/web3-provider-engine/subproviders/rpc.js:36:21)\r\n    at self.callback (/Users/mustafaboorenie/desertcoin/node_modules/request/request.js:185:22)\r\n    at Request.emit (node:events:390:28)\r\n    at ClientRequest.<anonymous> (/Users/mustafaboorenie/desertcoin/node_modules/request/request.js:819:16)\r\n\r\nOR displays this:\r\n\r\nError: Transaction has been reverted by the EVM:\r\n    at Migration._deploy (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:99:1)\r\n    at runMicrotasks (<anonymous>)\r\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n    at Migration._load (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:56:1)\r\n    at Migration.run (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/Migration.js:217:1)\r\n    at Object.runMigrations (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:150:1)\r\n    at Object.runFrom (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:110:1)\r\n    at Object.runAll (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:114:1)\r\n    at Object.run (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/migrate/index.js:79:1)\r\n    at runMigrations (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/core/lib/commands/migrate.js:258:1)\r\n    at Object.run (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/core/lib/commands/migrate.js:223:1)\r\n    at Command.run (/opt/homebrew/lib/node_modules/truffle/build/webpack:/packages/core/lib/command.js:183:1)\r\n\r\nUsing, truffle migrate --network matic causes:\r\n\r\n\"Migrations\" -- Transaction was not mined within 750 seconds, please make sure your transaction was properly sent. Be aware that it might still be mined!.\r\n\r\nHere is my system settings:\r\n\r\nmacOS Monterey 12.0.1\r\nTruffle v5.4.18 (core: 5.4.18)\r\nSolidity - 0.8.9 (solc-js)\r\nNode v17.0.1\r\nWeb3.js v1.5.3\r\n\r\nI've been losing quite a bit of cash trying to get this up so if someone could help me out I'd be really grateful. Thank you!!",
  "closed_by": {
    "login": "fainashalts",
    "id": 8952139,
    "node_id": "MDQ6VXNlcjg5NTIxMzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fainashalts",
    "html_url": "https://github.com/fainashalts",
    "followers_url": "https://api.github.com/users/fainashalts/followers",
    "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
    "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
    "organizations_url": "https://api.github.com/users/fainashalts/orgs",
    "repos_url": "https://api.github.com/users/fainashalts/repos",
    "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fainashalts/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1006931436",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4599#issuecomment-1006931436",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599",
    "id": 1006931436,
    "node_id": "IC_kwDOAkfq-c48BI3s",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-06T21:00:40Z",
    "updated_at": "2022-01-06T21:00:40Z",
    "author_association": "MEMBER",
    "body": "Hi @mustafa-boorenie thanks for bringing this up! While I would set up the provider a tad differently (see the configuration [here](https://github.com/truffle-box/polygon-box/blob/main/truffle-config.polygon.js), what you have should work. \r\n\r\nThere is a new game on the Polygon network that appears to be causing gas prices to spike and intermittent issues with connecting to the network. I suggest editing your config to match what I linked above, and trying again in a couple of days (or perhaps checking [here](https://polygonscan.com/gastracker) and trying when gas is low, which should hopefully . If I find out that the issue from the Polygon side is fixed, I will update here! ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1006931436/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1006947929",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4599#issuecomment-1006947929",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599",
    "id": 1006947929,
    "node_id": "IC_kwDOAkfq-c48BM5Z",
    "user": {
      "login": "mustafa-boorenie",
      "id": 75136994,
      "node_id": "MDQ6VXNlcjc1MTM2OTk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/75136994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mustafa-boorenie",
      "html_url": "https://github.com/mustafa-boorenie",
      "followers_url": "https://api.github.com/users/mustafa-boorenie/followers",
      "following_url": "https://api.github.com/users/mustafa-boorenie/following{/other_user}",
      "gists_url": "https://api.github.com/users/mustafa-boorenie/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mustafa-boorenie/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mustafa-boorenie/subscriptions",
      "organizations_url": "https://api.github.com/users/mustafa-boorenie/orgs",
      "repos_url": "https://api.github.com/users/mustafa-boorenie/repos",
      "events_url": "https://api.github.com/users/mustafa-boorenie/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mustafa-boorenie/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-06T21:28:52Z",
    "updated_at": "2022-01-06T21:28:52Z",
    "author_association": "NONE",
    "body": "Thanks for your help. I was able to successfully deploy the contract during a time with low traffic. I hope that this issue gets resolved soon! ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1006947929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1006974158",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4599#issuecomment-1006974158",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4599",
    "id": 1006974158,
    "node_id": "IC_kwDOAkfq-c48BTTO",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-06T22:15:12Z",
    "updated_at": "2022-01-06T22:15:12Z",
    "author_association": "MEMBER",
    "body": "So glad it worked out @mustafa-boorenie! I'm closing this issue for maintenance but if you encounter any other problems please feel free to open a new one. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1006974158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

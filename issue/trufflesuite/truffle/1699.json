{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1699",
  "id": 406936976,
  "node_id": "MDU6SXNzdWU0MDY5MzY5NzY=",
  "number": 1699,
  "title": "truffle migrate with websocket: TypeError: Cannot read property 'subscription' of undefined",
  "user": {
    "login": "Bowfish",
    "id": 27821742,
    "node_id": "MDQ6VXNlcjI3ODIxNzQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/27821742?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Bowfish",
    "html_url": "https://github.com/Bowfish",
    "followers_url": "https://api.github.com/users/Bowfish/followers",
    "following_url": "https://api.github.com/users/Bowfish/following{/other_user}",
    "gists_url": "https://api.github.com/users/Bowfish/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Bowfish/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Bowfish/subscriptions",
    "organizations_url": "https://api.github.com/users/Bowfish/orgs",
    "repos_url": "https://api.github.com/users/Bowfish/repos",
    "events_url": "https://api.github.com/users/Bowfish/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Bowfish/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 1125012066,
      "node_id": "MDU6TGFiZWwxMTI1MDEyMDY2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/on%20hold",
      "name": "on hold",
      "color": "c0d8f7",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2019-02-05T19:24:04Z",
  "updated_at": "2019-08-28T17:44:53Z",
  "closed_at": "2019-08-28T17:44:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\nWhen I run `truffle migrate --network devilnet` with the following network conifguration:\r\n```\r\ndevilnet: {\r\n      host: \"127.0.0.1\",      // Localhost (default: none)\r\n      port: 8546,             // Custom port\r\n      network_id: 639276,     // Custom network\r\n      gas: 8500000,           // Gas sent with each transaction (default: ~6700000)\r\n      gasPrice: 1800000000,  // 20 gwei (in wei) (default: 100 gwei)\r\n      websockets: true,        // Enable EventEmitter interface for web3 (default: false)\r\n      provider: () => new Web3.providers.WebsocketProvider(\"ws://localhost:8546\", {\r\n        headers: {\r\n          origin: \"127.0.0.1\"\r\n        }\r\n})\r\n```\r\nI get the following error:\r\n```\r\n/home/xxx/node_modules/web3-providers/dist/web3-providers.cjs.js:304\r\nevent = this.getSubscriptionEvent(response.params.subscription);\r\n                                                  ^\r\nTypeError: Cannot read property 'subscription' of undefined\r\nat WebsocketProvider.onMessage (/home/xxx/node_modules/web3-providers/dist/web3-providers.cjs.js:304:59)\r\nat WebsocketProvider.onMessage (/home/xxx/node_modules/web3-providers/dist/web3-providers.cjs.js:410:77)\r\n```\r\n## Environment\r\n\r\n* Operating System: linux\r\n* Ethereum client: geth version 1.8.22-stable\r\n* Truffle version (`truffle version`): v5.0.3 (core: 5.0.3)\r\n* node version (`node --version`): 8.15.0\r\n* npm version (`npm --version`): 6.7.0\r\n",
  "closed_by": {
    "login": "eggplantzzz",
    "id": 14827965,
    "node_id": "MDQ6VXNlcjE0ODI3OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eggplantzzz",
    "html_url": "https://github.com/eggplantzzz",
    "followers_url": "https://api.github.com/users/eggplantzzz/followers",
    "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
    "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
    "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
    "repos_url": "https://api.github.com/users/eggplantzzz/repos",
    "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462522969",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-462522969",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 462522969,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjUyMjk2OQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-11T22:36:58Z",
    "updated_at": "2019-02-11T22:36:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Bowfish Just a couple of things to try...\r\nWill you make sure that you are using Web3 version 1.0.0-beta.36? The newer versions of web3 recently broke some provider functionality for Truffle and Ganache. Also try removing the `host` and `port` properties from the config and see what happens. I don't think you should need them since you have the `provider` property. Let me know if this helps at all.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462522969/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462539528",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-462539528",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 462539528,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjUzOTUyOA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-11T23:36:15Z",
    "updated_at": "2019-02-11T23:36:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually I am having success with web3@beta.37 but not web3@beta.38 so you can try that instead of beta.36",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462539528/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462773418",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-462773418",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 462773418,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2Mjc3MzQxOA==",
    "user": {
      "login": "Bowfish",
      "id": 27821742,
      "node_id": "MDQ6VXNlcjI3ODIxNzQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/27821742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bowfish",
      "html_url": "https://github.com/Bowfish",
      "followers_url": "https://api.github.com/users/Bowfish/followers",
      "following_url": "https://api.github.com/users/Bowfish/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bowfish/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bowfish/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bowfish/subscriptions",
      "organizations_url": "https://api.github.com/users/Bowfish/orgs",
      "repos_url": "https://api.github.com/users/Bowfish/repos",
      "events_url": "https://api.github.com/users/Bowfish/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bowfish/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-12T14:10:32Z",
    "updated_at": "2019-02-12T14:19:33Z",
    "author_association": "NONE",
    "body": "@eggplantzzz That already looks much better with version 1.0.0-beta.36, but it still doesn't connect. What parameters do I have to specify in the geth command? My command line looks like this:\r\n\r\n`geth --datadir ./node01 --networkid 1234 --syncmode 'full' --port 30311 --rpc --rpcaddr 'localhost' --rpcport 8601 --rpcapi 'personal,db,eth,net,web3,txpool,miner,clique' --rpccorsdomain 'http://localhost:3000' --ws --wsaddr 'localhost' --wsport 8546  --wsorigins '*' --gasprice '1' --targetgaslimit 94000000 --mine`\r\n\r\nand my truffle-conf.js network definition looks like this:\r\n\r\n  ```\r\npoadevnet: {\r\n      network_id: 1234,       // Any network (default: none)\r\n      provider: () => new Web3.providers.WebsocketProvider(\"ws://localhost:8546\", {\r\n        headers: {\r\n          Origin: \"http://localhost\"\r\n        }\r\n      })\r\n    },\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462773418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462931902",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-462931902",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 462931902,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjkzMTkwMg==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-12T20:58:26Z",
    "updated_at": "2019-02-12T20:58:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oh I was assuming you were using Ganache CLI and not geth so I'm not sure if geth requires any additional configuration. If I come across something helpful I'll try and leave it here. The business above concerning Web3 versions is strictly related to Truffle and Ganache...it might be fine with geth, I'm not sure.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/462931902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/463077152",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-463077152",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 463077152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzA3NzE1Mg==",
    "user": {
      "login": "Bowfish",
      "id": 27821742,
      "node_id": "MDQ6VXNlcjI3ODIxNzQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/27821742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bowfish",
      "html_url": "https://github.com/Bowfish",
      "followers_url": "https://api.github.com/users/Bowfish/followers",
      "following_url": "https://api.github.com/users/Bowfish/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bowfish/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bowfish/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bowfish/subscriptions",
      "organizations_url": "https://api.github.com/users/Bowfish/orgs",
      "repos_url": "https://api.github.com/users/Bowfish/repos",
      "events_url": "https://api.github.com/users/Bowfish/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bowfish/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-13T06:32:13Z",
    "updated_at": "2019-02-13T06:32:13Z",
    "author_association": "NONE",
    "body": "Here is my latest version of the geth commandline:\r\n```\r\ngeth --datadir ./node01 --networkid 56707 --syncmode 'full' --port 30311 --rpc --rpcaddr 'localhost' --rpcport 8601 --rpcapi 'personal,db,eth,net,web3,txpool,miner,clique' --rpccorsdomain 'http://localhost:3000' --ws --wsaddr 'localhost' --wsport 8546 --mine\r\n```\r\n\r\nHere is my latest version of the truffle-config.js configuration:\r\n```\r\npoadevnet: {\r\n  network_id: 56707,       // Any network (default: none)\r\n  provider: () => {\r\n    const Web3 = require(\"./client/node_modules/web3\");\r\n    const wsProvider = new Web3.providers.WebsocketProvider(\"ws://localhost:8546\", {\r\n      headers: {\r\n        Origin: \"http://localhost\"\r\n      }\r\n    })\r\n    console.log(wsProvider);\r\n    return wsProvider;\r\n  },\r\n},\r\n```\r\nHere is the output of console.log(wsProvider) \r\n```\r\nWebsocketProvider {\r\n  _events: {},\r\n  _eventsCount: 0,\r\n  connection: \r\n   W3CWebSocket {\r\n     _listeners: \r\n      { message: [Array],\r\n        open: [Array],\r\n        close: [Array],\r\n        error: [Array] },\r\n     addEventListener: [Function: _addEventListener],\r\n     removeEventListener: [Function: _removeEventListener],\r\n     dispatchEvent: [Function: _dispatchEvent],\r\n     _url: 'ws://localhost:8546',\r\n     _readyState: 0,\r\n     _protocol: undefined,\r\n     _extensions: '',\r\n     _bufferedAmount: 0,\r\n     _binaryType: 'arraybuffer',\r\n     _connection: undefined,\r\n     _client: \r\n      WebSocketClient {\r\n        domain: null,\r\n        _events: [Object],\r\n        _eventsCount: 2,\r\n        _maxListeners: undefined,\r\n        config: [Object],\r\n        _req: [Object],\r\n        protocols: [],\r\n        origin: null,\r\n        url: [Object],\r\n        secure: false,\r\n        base64nonce: 'bwZAaBbOZlTo7zVEWuzfqQ==' } },\r\n  timeout: undefined,\r\n  subscriptions: {},\r\n  READY: 'ready',\r\n  CONNECT: 'connect',\r\n  ERROR: 'error',\r\n  CLOSE: 'close',\r\n  SOCKET_MESSAGE: 'socket_message',\r\n  SOCKET_READY: 'socket_ready',\r\n  SOCKET_CLOSE: 'socket_close',\r\n  SOCKET_ERROR: 'socket_error',\r\n  SOCKET_CONNECT: 'socket_connect',\r\n  SOCKET_NETWORK_CHANGED: 'socket_networkChanged',\r\n  SOCKET_ACCOUNTS_CHANGED: 'socket_accountsChanged',\r\n  host: 'ws://localhost:8546' \r\n}\r\n```\r\n\r\nAnd here is the error message:\r\n```\r\n/home/xyz/src/bd300/client/node_modules/web3-providers/dist/web3-providers.cjs.js:242\r\n        event = this.getSubscriptionEvent(response.params.subscription);\r\n                                                          ^\r\nTypeError: Cannot read property 'subscription' of undefined\r\n    at WebsocketProvider.onMessage (/home/xyz/src/bd300/client/node_modules/web3-providers/dist/web3-providers.cjs.js:242:59)\r\n    at WebsocketProvider.onMessage (/home/xyz/src/bd300/client/node_modules/web3-providers/dist/web3-providers.cjs.js:378:77)\r\n    at W3CWebSocket._dispatchEvent [as dispatchEvent] (/home/xyz/src/bd300/client/node_modules/yaeti/lib/EventTarget.js:115:12)\r\n    at W3CWebSocket.onMessage (/home/xyz/src/bd300/client/node_modules/websocket/lib/W3CWebSocket.js:234:14)\r\n    at WebSocketConnection.<anonymous> (/home/xyz/src/bd300/client/node_modules/websocket/lib/W3CWebSocket.js:205:19)\r\n    at emitOne (events.js:116:13)\r\n    at WebSocketConnection.emit (events.js:211:7)\r\n    at WebSocketConnection.processFrame (/home/xyz/src/bd300/client/node_modules/websocket/lib/WebSocketConnection.js:552:26)\r\n    at /home/xyz/src/bd300/client/node_modules/websocket/lib/WebSocketConnection.js:321:40\r\n    at _combinedTickCallback (internal/process/next_tick.js:132:7)\r\n    at process._tickCallback (internal/process/next_tick.js:181:9)\r\n```\r\n\r\nweb3: 1.0.0-beta.46\r\nTruffle v5.0.4 (core: 5.0.4)\r\nSolidity v0.5.0 (solc-js)\r\nNode v8.15.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/463077152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/463836174",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-463836174",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 463836174,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzgzNjE3NA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-14T22:55:51Z",
    "updated_at": "2019-02-14T22:55:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Try downgrading Web3 to version 1.0.0-beta.37 and trying again. Let me know what happens.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/463836174/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/463929098",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-463929098",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 463929098,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MzkyOTA5OA==",
    "user": {
      "login": "Bowfish",
      "id": 27821742,
      "node_id": "MDQ6VXNlcjI3ODIxNzQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/27821742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bowfish",
      "html_url": "https://github.com/Bowfish",
      "followers_url": "https://api.github.com/users/Bowfish/followers",
      "following_url": "https://api.github.com/users/Bowfish/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bowfish/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bowfish/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bowfish/subscriptions",
      "organizations_url": "https://api.github.com/users/Bowfish/orgs",
      "repos_url": "https://api.github.com/users/Bowfish/repos",
      "events_url": "https://api.github.com/users/Bowfish/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bowfish/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-15T06:54:22Z",
    "updated_at": "2019-02-15T06:54:22Z",
    "author_association": "NONE",
    "body": "@eggplantzzz With Web3 to version 1.0.0-beta.37 it looks a bit better. At least I don't get the error message anymore, but I get the following output, that the connection is not open on send.\r\n\r\n```\r\nWebsocketProvider {\r\n  responseCallbacks: {},\r\n  notificationCallbacks: [],\r\n  _customTimeout: undefined,\r\n  connection: \r\n   W3CWebSocket {\r\n     _listeners: {},\r\n     addEventListener: [Function: _addEventListener],\r\n     removeEventListener: [Function: _removeEventListener],\r\n     dispatchEvent: [Function: _dispatchEvent],\r\n     _url: 'ws://localhost:8546',\r\n     _readyState: 0,\r\n     _protocol: undefined,\r\n     _extensions: '',\r\n     _bufferedAmount: 0,\r\n     _binaryType: 'arraybuffer',\r\n     _connection: undefined,\r\n     _client: \r\n      WebSocketClient {\r\n        domain: null,\r\n        _events: [Object],\r\n        _eventsCount: 2,\r\n        _maxListeners: undefined,\r\n        config: [Object],\r\n        _req: [Object],\r\n        protocols: [],\r\n        origin: undefined,\r\n        url: [Object],\r\n        secure: false,\r\n        base64nonce: '2QeLwQD8V/t8Z33bx5fj3w==' },\r\n     onerror: [Function],\r\n     onclose: [Function],\r\n     onmessage: [Function] },\r\n  connected: [Getter] }\r\nconnection not open on send()\r\nconnection not open on send()\r\n\r\n   Replacing 'MyContracts'\r\n   ------------------------\r\nconnection not open on send()\r\nconnection not open on send()\r\nconnection not open\r\nTruffle v5.0.4 (core: 5.0.4)\r\nNode v8.15.0\r\n```\r\nThe 1_initial_migration.js is working fine, but the second part 2_deploy_contracts.js produces the message from above.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/463929098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/467629810",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-467629810",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 467629810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NzYyOTgxMA==",
    "user": {
      "login": "gabeibarra",
      "id": 12751632,
      "node_id": "MDQ6VXNlcjEyNzUxNjMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/12751632?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gabeibarra",
      "html_url": "https://github.com/gabeibarra",
      "followers_url": "https://api.github.com/users/gabeibarra/followers",
      "following_url": "https://api.github.com/users/gabeibarra/following{/other_user}",
      "gists_url": "https://api.github.com/users/gabeibarra/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gabeibarra/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gabeibarra/subscriptions",
      "organizations_url": "https://api.github.com/users/gabeibarra/orgs",
      "repos_url": "https://api.github.com/users/gabeibarra/repos",
      "events_url": "https://api.github.com/users/gabeibarra/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gabeibarra/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-26T21:54:54Z",
    "updated_at": "2019-02-26T21:54:54Z",
    "author_association": "NONE",
    "body": "I was having the same issue as @Bowfish above `connection not open on send()`, and then when changing to many different Truffle / Web3js version pairs, also having the original subscription error.\r\n\r\nThere are also errors in the HttpProvider provider, preventing an http or https deploy (This is the only way I know to do an https deploy to custom network!!!).\r\n\r\nNow I'm doing manual deploys without Truffle, but I'd like to help get to the bottom of it in a PR. Can anyone point us to the source code area as I investigate?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/467629810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/469312465",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-469312465",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 469312465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTMxMjQ2NQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T16:14:58Z",
    "updated_at": "2019-03-04T16:14:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gabeibarra What part of the code are you interested in investigating?\r\n@Bowfish Were you able to get it working with geth? Were you ever able to get it working if you tried to use Ganache? I would be interested in knowing whether this is geth-specific issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/469312465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/469313869",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-469313869",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 469313869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2OTMxMzg2OQ==",
    "user": {
      "login": "Bowfish",
      "id": 27821742,
      "node_id": "MDQ6VXNlcjI3ODIxNzQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/27821742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bowfish",
      "html_url": "https://github.com/Bowfish",
      "followers_url": "https://api.github.com/users/Bowfish/followers",
      "following_url": "https://api.github.com/users/Bowfish/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bowfish/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bowfish/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bowfish/subscriptions",
      "organizations_url": "https://api.github.com/users/Bowfish/orgs",
      "repos_url": "https://api.github.com/users/Bowfish/repos",
      "events_url": "https://api.github.com/users/Bowfish/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bowfish/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-04T16:18:37Z",
    "updated_at": "2019-03-04T16:24:24Z",
    "author_association": "NONE",
    "body": "@eggplantzzz I posted some update on spectrum about this and here is the link to the github repo with the code https://github.com/Bowfish/truffle-ws-migrate-test with some explanation in the README.md",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/469313869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/477279104",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-477279104",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 477279104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzI3OTEwNA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-27T17:53:14Z",
    "updated_at": "2019-03-27T17:56:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Turns out the root of this is an issue with geth.\r\nhttps://github.com/ethereum/go-ethereum/issues/16846",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/477279104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/513800962",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-513800962",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 513800962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzgwMDk2Mg==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-22T13:54:03Z",
    "updated_at": "2019-07-22T13:54:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Bowfish I see that they closed that issue over on the Geth. Is that issue resolved?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/513800962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/525849716",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1699#issuecomment-525849716",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1699",
    "id": 525849716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNTg0OTcxNg==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-28T17:44:52Z",
    "updated_at": "2019-08-28T17:44:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like this issue should be resolved. @Bowfish let us know if we need to reopen!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/525849716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

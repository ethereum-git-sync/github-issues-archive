{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1279",
  "id": 361464214,
  "node_id": "MDU6SXNzdWUzNjE0NjQyMTQ=",
  "number": 1279,
  "title": "Fail to port tests to v5.0.0-beta.0",
  "user": {
    "login": "jmendiola222",
    "id": 5326111,
    "node_id": "MDQ6VXNlcjUzMjYxMTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5326111?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jmendiola222",
    "html_url": "https://github.com/jmendiola222",
    "followers_url": "https://api.github.com/users/jmendiola222/followers",
    "following_url": "https://api.github.com/users/jmendiola222/following{/other_user}",
    "gists_url": "https://api.github.com/users/jmendiola222/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jmendiola222/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jmendiola222/subscriptions",
    "organizations_url": "https://api.github.com/users/jmendiola222/orgs",
    "repos_url": "https://api.github.com/users/jmendiola222/repos",
    "events_url": "https://api.github.com/users/jmendiola222/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jmendiola222/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1120350502,
      "node_id": "MDU6TGFiZWwxMTIwMzUwNTAy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/stale",
      "name": "stale",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-09-18T20:11:04Z",
  "updated_at": "2018-12-02T20:37:57Z",
  "closed_at": "2018-12-02T20:37:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [X] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nRunning working `v4.1.14` tests to [v5.0.0-beta.0 â€“ Chocolate Sushi](https://github.com/trufflesuite/truffle/releases) fails without clear error description.\r\n\r\n## Steps to Reproduce\r\n\r\n- set up some test to a simple Contract that interacts with pretty much regular ERC20 OpenZeppelin contracts that work in `v4.1.14`\r\n- run them using `v5.0.0-beta.0`\r\n\r\n## Expected Behavior\r\n\r\ntest should work? Maybe I'm missing same adaptation guide here, but couldn't find a step by step checklist on things needed to be updated on test to port them to v5.\r\n\r\n## Actual Results\r\n\r\nGot this error:\r\n```\r\nError: while migrating MyContract: Invalid number of parameters for \"undefined\". Got 0 expected 1!\r\n    at /node_modules/truffle/build/webpack:/packages/truffle-deployer/src/deployment.js:361:1\r\n    at <anonymous>\r\n    at process._tickCallback (internal/process/next_tick.js:189:7)\r\nps: unrecognized option: p\r\nBusyBox v1.26.2 (2018-05-30 13:51:20 GMT) multi-call binary.\r\n\r\nUsage: ps [-o COL1,COL2=HEADER]\r\n\r\nShow list of processes\r\n\r\n\t-o COL1,COL2=HEADER\tSelect columns for display\r\nnpm ERR! Test failed.  See above for more details.\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: LInux Mint\r\n* Ethereum client: default ganache-cli\r\n* Truffle version (`truffle version`): v5.0.0-beta.0\r\n* node version (`node --version`): `v8.12.0`\r\n* npm version (`npm --version`): `6.4.1`\r\n\r\nDockerFile:\r\n```ruby\r\nFROM mhart/alpine-node:8\r\n\r\nRUN apk add --no-cache make gcc g++ python git bash\r\n\r\nCOPY ./ ./\r\n\r\nRUN npm uninstall truffle\r\nRUN npm install truffle@beta\r\n```",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/423834400",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1279#issuecomment-423834400",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
    "id": 423834400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzgzNDQwMA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-23T17:50:56Z",
    "updated_at": "2018-09-23T17:50:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jmendiola222 The error you're getting is coming from the contract constructor and suggests that one of the constructor inputs you supplied to MyContract is undefined? Or missing?\r\n\r\nIf you can show the code around that deployment it might help with debugging. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/423834400/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/424034352",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1279#issuecomment-424034352",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
    "id": 424034352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDAzNDM1Mg==",
    "user": {
      "login": "jmendiola222",
      "id": 5326111,
      "node_id": "MDQ6VXNlcjUzMjYxMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5326111?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmendiola222",
      "html_url": "https://github.com/jmendiola222",
      "followers_url": "https://api.github.com/users/jmendiola222/followers",
      "following_url": "https://api.github.com/users/jmendiola222/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmendiola222/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmendiola222/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmendiola222/subscriptions",
      "organizations_url": "https://api.github.com/users/jmendiola222/orgs",
      "repos_url": "https://api.github.com/users/jmendiola222/repos",
      "events_url": "https://api.github.com/users/jmendiola222/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmendiola222/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-24T16:17:53Z",
    "updated_at": "2018-09-24T16:17:53Z",
    "author_association": "NONE",
    "body": "Thanks @cgewecke, I can't yet share the complete code base, but here are the basics. Let me enforce once again that this test do work on `v4.1.14`, with almost 100% coverage. \r\n\r\n```sol\r\nimport \"./MyToken1.sol\";\r\nimport \"./MyToken2.sol\";\r\nimport \"./OtherContract.sol\";\r\n\r\ncontract MyContract is Ownable {\r\n\r\n  address internal myToken1Address;\r\n  address internal myToken2Address;\r\n  address internal myOtherContractAddress;\r\n  \r\n  constructor(uint256 arg0) Ownable() public {\r\n    myToken1Address = new MyToken1();\r\n    myToken2Address = new MyToken2();\r\n    myOtherContractAddress = new OtherContract(arg0, 40);\r\n    initializeConfig();\r\n  }\r\n```\r\nThen in out tests we have something like:\r\n\r\n```js\r\nconst MyContract = artifacts.require('./contracts/MyContract.sol');\r\n\r\ncontract('MyContract', function([owner, userAccount, ...accounts]) {\r\n  beforeEach(async function() {\r\n    this.myContract = await MyContract.new(10000 * 100, { from: owner });\r\n\r\n    [x, y, z] = await Promise.all([\r\n      this.myContract.getX(),\r\n      this.myContract.getY(),\r\n      this.myContract.getZ()\r\n    ]);\r\n\r\n    await this.myContract.setParam(3 * x);\r\n  });\r\n  it('WHEN not init should reverts', async function() {\r\n    const doing = this.myContract.doShomething(100000, {\r\n        from: userAccount,\r\n        value: 110\r\n      });\r\n      await assertRevert(doing);\r\n   });\r\n});\r\n```\r\n\r\nHope this clarifies. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/424034352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/424043869",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1279#issuecomment-424043869",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
    "id": 424043869,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDA0Mzg2OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-24T16:45:33Z",
    "updated_at": "2018-09-24T16:45:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @jmendiola222 it looks like the error message is coming from a migrations file rather than a test. Truffle will run your migrations are run as part of the preparations for the test suite execution.\r\n> Error: while migrating MyContract\r\n\r\nCould you look in the relevant file and see if there's something amiss in one of your `deploy` statements?\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/424043869/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/424681552",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1279#issuecomment-424681552",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
    "id": 424681552,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyNDY4MTU1Mg==",
    "user": {
      "login": "jmendiola222",
      "id": 5326111,
      "node_id": "MDQ6VXNlcjUzMjYxMTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5326111?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmendiola222",
      "html_url": "https://github.com/jmendiola222",
      "followers_url": "https://api.github.com/users/jmendiola222/followers",
      "following_url": "https://api.github.com/users/jmendiola222/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmendiola222/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmendiola222/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmendiola222/subscriptions",
      "organizations_url": "https://api.github.com/users/jmendiola222/orgs",
      "repos_url": "https://api.github.com/users/jmendiola222/repos",
      "events_url": "https://api.github.com/users/jmendiola222/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmendiola222/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-26T11:30:17Z",
    "updated_at": "2018-09-26T11:30:17Z",
    "author_association": "NONE",
    "body": "Thanks @cgewecke that was correct, on my migration file a had:\r\n```js\r\n  await deployer.deploy(myLibrary);\r\n  deployer.link(myLibrary, MyContract);\r\n  await deployer.deploy(MyContract);\r\n```\r\nWhere as we saw, `MyContract` contructor receives a `uint256`. Changing it to `deployer.deploy(MyContract, 1000)` solved this issue. Any clue on why this is not a problem in `v4`? Migrations are not runned on test for that version?\r\n\r\nThanks again!\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/424681552/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/441436980",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1279#issuecomment-441436980",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
    "id": 441436980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTQzNjk4MA==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-11-25T12:29:13Z",
    "updated_at": "2018-11-25T12:29:13Z",
    "author_association": "NONE",
    "body": "Thank you for raising this issue! It has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. If you would like to keep this issue open, please respond with information about the current state of this problem.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/441436980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/443539899",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1279#issuecomment-443539899",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1279",
    "id": 443539899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MzUzOTg5OQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-12-02T20:37:49Z",
    "updated_at": "2018-12-02T20:37:49Z",
    "author_association": "NONE",
    "body": "There has been no new activity on this issue since it was marked as stale 7 days ago, so it is being automatically closed.  If you'd like help with this or a different problem, please open a new issue. Thanks!\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/443539899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

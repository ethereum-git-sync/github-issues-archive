{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/410",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/410/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/410/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/410/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/410",
  "id": 230463403,
  "node_id": "MDU6SXNzdWUyMzA0NjM0MDM=",
  "number": 410,
  "title": "Contract name collision handling?",
  "user": {
    "login": "illuzen",
    "id": 6833917,
    "node_id": "MDQ6VXNlcjY4MzM5MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6833917?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/illuzen",
    "html_url": "https://github.com/illuzen",
    "followers_url": "https://api.github.com/users/illuzen/followers",
    "following_url": "https://api.github.com/users/illuzen/following{/other_user}",
    "gists_url": "https://api.github.com/users/illuzen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/illuzen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/illuzen/subscriptions",
    "organizations_url": "https://api.github.com/users/illuzen/orgs",
    "repos_url": "https://api.github.com/users/illuzen/repos",
    "events_url": "https://api.github.com/users/illuzen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/illuzen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-05-22T17:19:14Z",
  "updated_at": "2017-07-11T16:49:35Z",
  "closed_at": "2017-07-11T16:49:35Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nThere seems to be some strange handling of the situation in which multiple contracts with the same name exist in the truffle system. I haven't quite figured it out, but renaming one of my contracts made my test pass. Changing the contract was changing the behavior, but the following remains a mystery. \r\n\r\n`\r\n\r\ncontract OldToken is ERC20 {}\r\n\r\n    contract A  {\r\n\r\n     uint256 public originalSupply; \r\n\r\n     function A(address a) {\r\n\r\n        oldToken = OldToken(a);\r\n\r\n        originalSupply = oldToken.totalSupply();\r\n\r\n    }\r\n}\r\n\r\n`\r\n\r\nThis was throwing at runtime, but commenting out the originalSupply = line made it go thru. And it turns out I had a contract named A before in another file, but I had removed it and blown away my build directory so I thought that should be enough to deal with any name collision issues. Well, changing my contract name to AA, which I had never used before allows me to call oldToken.totalSupply(). It's strange that the code responded to changes in this contract even tho there was apparently a name collision. Maybe the abi wasn't changing, but the implementation was? \r\n\r\nNot familiar enough with truffle internals yet to say what this might be but I think there must be some cache somewhere that I need to reset to prevent this from happening in the future. And maybe if truffle is installed globally it could be picking up on contracts in other projects with the same name?\r\n\r\n\r\n## Environment\r\n\r\n* Operating System: OSX 10.12.4\r\n* Truffle version: v3.1.2\r\n* Ethereum client: v3.0.5\r\n* node version: v7.7.4\r\n* npm version: 4.1.2\r\n",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/410/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/410/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/314505102",
    "html_url": "https://github.com/trufflesuite/truffle/issues/410#issuecomment-314505102",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/410",
    "id": 314505102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNDUwNTEwMg==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-11T16:49:35Z",
    "updated_at": "2017-07-11T16:49:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for this! Marking as a duplicate of #443. Cheers!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/314505102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

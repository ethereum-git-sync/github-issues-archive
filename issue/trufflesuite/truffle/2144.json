{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2144",
  "id": 462120136,
  "node_id": "MDU6SXNzdWU0NjIxMjAxMzY=",
  "number": 2144,
  "title": "Out of gas: Test networks require a different HD-Wallet-Path against to Mainnet",
  "user": {
    "login": "itinance",
    "id": 1758597,
    "node_id": "MDQ6VXNlcjE3NTg1OTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758597?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/itinance",
    "html_url": "https://github.com/itinance",
    "followers_url": "https://api.github.com/users/itinance/followers",
    "following_url": "https://api.github.com/users/itinance/following{/other_user}",
    "gists_url": "https://api.github.com/users/itinance/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/itinance/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/itinance/subscriptions",
    "organizations_url": "https://api.github.com/users/itinance/orgs",
    "repos_url": "https://api.github.com/users/itinance/repos",
    "events_url": "https://api.github.com/users/itinance/events{/privacy}",
    "received_events_url": "https://api.github.com/users/itinance/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393329,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjk=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    },
    {
      "id": 1103191633,
      "node_id": "MDU6TGFiZWwxMTAzMTkxNjMz",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20labels",
      "name": "needs labels",
      "color": "62e5ac",
      "default": false,
      "description": "gettin' meta"
    },
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-06-28T16:41:11Z",
  "updated_at": "2020-11-11T19:00:25Z",
  "closed_at": "2020-11-11T19:00:25Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "**Long story short:** \r\n\r\nI sent some Test-Ether on Ropsten into the first address, that was derived with MyCrypto out of my Mnmonics, but the deployment using truffle or `zos`-Tool was constantly running out of gas, no matter which funds was sent. And here is why this happened and will happen again without further steps. I will also provide the solution below:\r\n\r\n**Long Story:**\r\n\r\nWhen we import a Mnemonic into MyCrypto or MyEtherWallet (or other Tools) for Ropsten-Network, it derives the address with the following path: `m/44'/1'/0'/0`, while `truffle-hdwallet-provider` constantly is using `m/44'/60'/0'/0/` no matter wich network will be used.\r\n\r\n`m/44'/60'/0'/0/` is the derivation path for Ethereum Mainnet, while all other Testnets across all coins share `m/44'/1'/0'/0` for path derivation.\r\n\r\nTherefor, I get a different address on MyCrypto as the first address than it will be used by `truffle-hdwallet-provider`.\r\n\r\nThis means, when I transfer Test-Ether on Ropsten Network to the first address out of my Mnemonic, it will be a different address as the HDWalletProvider will generate with our default settings.\r\n\r\n**Example:**\r\n\r\nMnemonic: \"tooth spike smile swarm adapt history motion salt outdoor document observe cloth\"\r\n\r\nMyCrypto Ropsten (using `m/44'/1'/0'/0`): `0x9dbFAFB5Edd1D69aCaC1C104C526C4ACDc20F3Ae`\r\n\r\ntruffle-HDWallet-provider with default settings (using `m/44'/60'/0'/0`): `0xC0306fe5c3E90025AD56832A4399670be51b3Eec`\r\n\r\nThus, a deployment of contracts, that are based on `truffle-config.js` as it is recommend in this repository (README), will raise \"Out of gas\"-exception because different addresses will be used. I would send Test-Ether to the address, that was generated by MyCrypto. And `truffle-hdwallet-provider` expects the second address, which probably has no funds nor could sign any transaction due to missing private key.\r\n\r\n**Solution:**\r\n\r\nFortunately the constructor of `truffle-hdwallet-provider` offers an argument for the `wallet_hdpath` that should be used for address derivation. So for using Ropster addresses (and even all other Testnetworks) properly with MyCrypto / MyEtherWallet, the following constructor is required to make transactions work as expected.\r\n\r\n```\r\nropsten: {\r\n  provider: () => new HDWalletProvider(\r\n    process.env.DEV_MNEMONIC, \"https://ropsten.infura.io/v3/\" + infuraProjectId, \r\n        0, 1, true, \"m/44'/1'/0'/0/\"\r\n    ),\r\n  networkId: 3,       // Ropsten's id\r\n},\r\n\r\n```\r\n\r\nExplanation of the parameters:\r\n\r\n```\r\n0 = start with first address\r\n1 = derive only 1 addresses\r\ntrue = sharedNonce (default)\r\n\r\n“m/44’/1’/0’/0/” = BIP44 derivation path that is used for test networks (across all coins)\r\n```\r\n\r\nWe should reflect this in README as well. ",
  "closed_by": {
    "login": "eggplantzzz",
    "id": 14827965,
    "node_id": "MDQ6VXNlcjE0ODI3OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eggplantzzz",
    "html_url": "https://github.com/eggplantzzz",
    "followers_url": "https://api.github.com/users/eggplantzzz/followers",
    "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
    "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
    "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
    "repos_url": "https://api.github.com/users/eggplantzzz/repos",
    "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510894397",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2144#issuecomment-510894397",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
    "id": 510894397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDg5NDM5Nw==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-12T13:52:03Z",
    "updated_at": "2019-07-12T13:52:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "@itinance Interesting, I didn't know about this convention. Do you have any docs that you could link to that describe this behavior?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510894397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510931809",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2144#issuecomment-510931809",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
    "id": 510931809,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDkzMTgwOQ==",
    "user": {
      "login": "itinance",
      "id": 1758597,
      "node_id": "MDQ6VXNlcjE3NTg1OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1758597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/itinance",
      "html_url": "https://github.com/itinance",
      "followers_url": "https://api.github.com/users/itinance/followers",
      "following_url": "https://api.github.com/users/itinance/following{/other_user}",
      "gists_url": "https://api.github.com/users/itinance/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/itinance/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/itinance/subscriptions",
      "organizations_url": "https://api.github.com/users/itinance/orgs",
      "repos_url": "https://api.github.com/users/itinance/repos",
      "events_url": "https://api.github.com/users/itinance/events{/privacy}",
      "received_events_url": "https://api.github.com/users/itinance/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-12T15:34:35Z",
    "updated_at": "2019-07-12T15:34:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "@eggplantzzz it seems to be something like a \"common sense\" in several sections of crypto applications and/or libraries.\r\n\r\nSince [BIP0044](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki) indicates ?`m/44'/1'/0'/0/0` as derivation path for BTC Testnet, others have adopted these rules also on other currencies (although I am not really a friend of this). \r\n\r\nMyCrypto uses the same derivation path for Ethereum Testnets:\r\n\r\n<img width=\"424\" alt=\"Screenshot 2019-07-12 17 19 32\" src=\"https://user-images.githubusercontent.com/1758597/61139901-a334b400-a4ca-11e9-8288-665917e9ee71.png\">\r\n\r\nAnd [hd-wallet-derive](https://github.com/dan-da/hd-wallet-derive) is also using the same path across all supported currencies, if one chooses the respective testnet.\r\n\r\nI saw similar approaches in some other tools, blogposts and libraries too but can't remember exactly. \r\n\r\nBut when it comes to work with MyCrypto for instance (or with hd-wallet-derive, that was used in some projects of my customers heavily) there is a big confusion about this. \r\n\r\nI think it needs definitely a standard across all tools. And if there is none yet, we should at least add some notes about different behavious if someone is working with MyCrypto because of my confusing and time consuming story, that I have written at the beginning :)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/510931809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511972292",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2144#issuecomment-511972292",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
    "id": 511972292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTk3MjI5Mg==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-16T20:26:32Z",
    "updated_at": "2019-07-16T20:27:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey thanks very much for the lesson and for pointing this out!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511972292/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/526604881",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2144#issuecomment-526604881",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
    "id": 526604881,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyNjYwNDg4MQ==",
    "user": {
      "login": "itinance",
      "id": 1758597,
      "node_id": "MDQ6VXNlcjE3NTg1OTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1758597?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/itinance",
      "html_url": "https://github.com/itinance",
      "followers_url": "https://api.github.com/users/itinance/followers",
      "following_url": "https://api.github.com/users/itinance/following{/other_user}",
      "gists_url": "https://api.github.com/users/itinance/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/itinance/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/itinance/subscriptions",
      "organizations_url": "https://api.github.com/users/itinance/orgs",
      "repos_url": "https://api.github.com/users/itinance/repos",
      "events_url": "https://api.github.com/users/itinance/events{/privacy}",
      "received_events_url": "https://api.github.com/users/itinance/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-30T13:37:59Z",
    "updated_at": "2019-08-30T13:37:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "By the way. Just read \"Mastering Ethereum\". In their Book \"Mastering Ethereum\" from Dr. Gavin Wood and Andreas M. Antonopoulos they also write that the HD Path for all testnets across all currencies and blockchains should be \"m/44'/1'/0'/0\"",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/526604881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/705099689",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2144#issuecomment-705099689",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
    "id": 705099689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTA5OTY4OQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-07T17:57:34Z",
    "updated_at": "2020-10-07T17:57:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hm, so was this ever resolved?  I see that the README was updated; does that suffice here or is there something more to do?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/705099689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/725602265",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2144#issuecomment-725602265",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2144",
    "id": 725602265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTYwMjI2NQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-11T19:00:25Z",
    "updated_at": "2020-11-11T19:00:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this for issue maintenance.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/725602265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

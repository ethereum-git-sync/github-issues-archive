{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/215",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/215",
  "id": 167949319,
  "node_id": "MDU6SXNzdWUxNjc5NDkzMTk=",
  "number": 215,
  "title": "Towards a better interface to interact with contracts",
  "user": {
    "login": "maraoz",
    "id": 287189,
    "node_id": "MDQ6VXNlcjI4NzE4OQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/287189?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/maraoz",
    "html_url": "https://github.com/maraoz",
    "followers_url": "https://api.github.com/users/maraoz/followers",
    "following_url": "https://api.github.com/users/maraoz/following{/other_user}",
    "gists_url": "https://api.github.com/users/maraoz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/maraoz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/maraoz/subscriptions",
    "organizations_url": "https://api.github.com/users/maraoz/orgs",
    "repos_url": "https://api.github.com/users/maraoz/repos",
    "events_url": "https://api.github.com/users/maraoz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/maraoz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2016-07-27T20:31:40Z",
  "updated_at": "2017-07-13T16:53:16Z",
  "closed_at": "2017-07-13T16:53:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "[As explained in the Truffle docs](https://truffle.readthedocs.io/en/latest/getting_started/contracts/), each contract method can be used as a `call` or as a `transaction`. The latter is used by calling the method directly, for example: `coin.sendCoin(...)`, and the former is used via the `call` function, like so: `coin.getBalance.call(...)`.\n\nI find this very counter-intuitive. As a beginner, this was pretty hard to understand. I know that this is much much better than using Web3 directly, but I think we can do better! I open this thread to discuss ideas to improve how to interact with contracts.\n\nOne idea I have of a better interface (let me know if it doesn't make sense):\n\n``` javascript\nvar account_one = \"0x1234...\"; // an address\nvar account_two = \"0xabcd...\"; // another address\nvar account_three = \"0xabcd...\"; // yet another address\nvar account_four = \"0xabcd...\"; // yet another address\n\nvar coin = MetaCoin.deployed();\ncoin.getBalance(account_one)\n  .then(function(balance) {\n    if (balance.toNumber() >= 10) {\n      coin.transaction({from: account_one})\n        .sendCoin(account_two, 5)\n        .sendCoin(account_three, 5);\n    }\n  });\n\ncoin.sendCoin(account_four, 2) // throws exception saying sendCoin method is transactional and needs to be called in a transaction context\n```\n\nGiven that methods are exclusively either a `transaction` or a `call`, is there a way we can check this at runtime to support this interface?\n\nIf you think this makes sense, I'd be happy to help implement these changes.\n",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/215/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236448026",
    "html_url": "https://github.com/trufflesuite/truffle/issues/215#issuecomment-236448026",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215",
    "id": 236448026,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjQ0ODAyNg==",
    "user": {
      "login": "netusco",
      "id": 449493,
      "node_id": "MDQ6VXNlcjQ0OTQ5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/449493?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/netusco",
      "html_url": "https://github.com/netusco",
      "followers_url": "https://api.github.com/users/netusco/followers",
      "following_url": "https://api.github.com/users/netusco/following{/other_user}",
      "gists_url": "https://api.github.com/users/netusco/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/netusco/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/netusco/subscriptions",
      "organizations_url": "https://api.github.com/users/netusco/orgs",
      "repos_url": "https://api.github.com/users/netusco/repos",
      "events_url": "https://api.github.com/users/netusco/events{/privacy}",
      "received_events_url": "https://api.github.com/users/netusco/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-07-31T18:28:05Z",
    "updated_at": "2016-07-31T18:30:59Z",
    "author_association": "NONE",
    "body": "I agree with the need to find a more intuitive way to refer to non transaction methods. Are you suggesting to create explicit transaction objects or methods and use directly the rest of read-only methods without the call?\n\nIsn't there a chained .sendCoin method blocked by the ; ?\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236448026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236623183",
    "html_url": "https://github.com/trufflesuite/truffle/issues/215#issuecomment-236623183",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215",
    "id": 236623183,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjYyMzE4Mw==",
    "user": {
      "login": "maraoz",
      "id": 287189,
      "node_id": "MDQ6VXNlcjI4NzE4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maraoz",
      "html_url": "https://github.com/maraoz",
      "followers_url": "https://api.github.com/users/maraoz/followers",
      "following_url": "https://api.github.com/users/maraoz/following{/other_user}",
      "gists_url": "https://api.github.com/users/maraoz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maraoz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maraoz/subscriptions",
      "organizations_url": "https://api.github.com/users/maraoz/orgs",
      "repos_url": "https://api.github.com/users/maraoz/repos",
      "events_url": "https://api.github.com/users/maraoz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maraoz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-01T15:56:06Z",
    "updated_at": "2016-08-01T15:56:06Z",
    "author_association": "NONE",
    "body": "@netusco yes. IMO the dafault behavior should be calling the function as read-only, and the call that creates a transaction (pretty big side effect) should require a bit more work. \nNice catch on the `;`, I'll edit now.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236623183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236630126",
    "html_url": "https://github.com/trufflesuite/truffle/issues/215#issuecomment-236630126",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215",
    "id": 236630126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjYzMDEyNg==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-01T16:20:00Z",
    "updated_at": "2016-08-01T16:20:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Are you guys familiar with constant functions, i.e.:\n\n```\ncontract MyContract {\n  function someFunction() constant returns (uint) {\n    return 5;\n  }\n}\n```\n\nIf you declare a function constant, then the contract abstraction will know it's only a call. Thus, the following becomes a call instead of a transaction:\n\n``` javascript\nvar contract = MyContract.deployed();\ncontract.someFunction().then(...);\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236630126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236630775",
    "html_url": "https://github.com/trufflesuite/truffle/issues/215#issuecomment-236630775",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215",
    "id": 236630775,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIzNjYzMDc3NQ==",
    "user": {
      "login": "maraoz",
      "id": 287189,
      "node_id": "MDQ6VXNlcjI4NzE4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maraoz",
      "html_url": "https://github.com/maraoz",
      "followers_url": "https://api.github.com/users/maraoz/followers",
      "following_url": "https://api.github.com/users/maraoz/following{/other_user}",
      "gists_url": "https://api.github.com/users/maraoz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maraoz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maraoz/subscriptions",
      "organizations_url": "https://api.github.com/users/maraoz/orgs",
      "repos_url": "https://api.github.com/users/maraoz/repos",
      "events_url": "https://api.github.com/users/maraoz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maraoz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-01T16:22:22Z",
    "updated_at": "2016-08-01T16:28:37Z",
    "author_association": "NONE",
    "body": "@tcoulter nice! That's very useful :)\nIt may be useful to update [the docs](https://truffle.readthedocs.io/en/latest/getting_started/contracts/) to show this simpler way.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/236630775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/315137588",
    "html_url": "https://github.com/trufflesuite/truffle/issues/215#issuecomment-315137588",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/215",
    "id": 315137588,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTEzNzU4OA==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-13T16:53:16Z",
    "updated_at": "2017-07-13T16:53:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @maraoz. This is old. I'm going to close it for housekeeping, but please let me know if you have any questions or you think we should expand upon our abstractions.\r\n\r\nNote: More abstraction features are in the works!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/315137588/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

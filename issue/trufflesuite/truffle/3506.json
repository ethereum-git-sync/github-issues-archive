{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3506",
  "id": 736931977,
  "node_id": "MDU6SXNzdWU3MzY5MzE5Nzc=",
  "number": 3506,
  "title": "\"Invalid number of parameters\" when invoking a method where the ABI contains multiple methods of the same name with different signatures",
  "user": {
    "login": "josh-richardson",
    "id": 13924368,
    "node_id": "MDQ6VXNlcjEzOTI0MzY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/13924368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/josh-richardson",
    "html_url": "https://github.com/josh-richardson",
    "followers_url": "https://api.github.com/users/josh-richardson/followers",
    "following_url": "https://api.github.com/users/josh-richardson/following{/other_user}",
    "gists_url": "https://api.github.com/users/josh-richardson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/josh-richardson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/josh-richardson/subscriptions",
    "organizations_url": "https://api.github.com/users/josh-richardson/orgs",
    "repos_url": "https://api.github.com/users/josh-richardson/repos",
    "events_url": "https://api.github.com/users/josh-richardson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/josh-richardson/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 644098328,
      "node_id": "MDU6TGFiZWw2NDQwOTgzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20reproduced",
      "name": "needs reproduced",
      "color": "fbca04",
      "default": false,
      "description": null
    },
    {
      "id": 990823235,
      "node_id": "MDU6TGFiZWw5OTA4MjMyMzU=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Contract",
      "name": "Contract",
      "color": "a1ea8f",
      "default": false,
      "description": ""
    },
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    },
    {
      "id": 1675041796,
      "node_id": "MDU6TGFiZWwxNjc1MDQxNzk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority3%20%F0%9F%94%A7",
      "name": "priority3 ðŸ”§",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-11-05T13:27:31Z",
  "updated_at": "2023-02-02T19:11:26Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nWhen upgrading a large suite of upgradable ERC20 contracts from solidity 0.5.12 to 0.6.12, we encountered an issue with our Truffle tests. A previously working and completely unchanged test now gives the following exception when we attempt to call our `initialize` method.\r\n\r\n`Error: Invalid number of parameters for \"initialize\". Got 3 expected 1!`\r\n\r\nWhen we attempt to instantiate our contracts in the `beforeEach` function, roughly as follows:\r\n\r\n```\r\nthis.token = await Token.new({ from: admin })\r\nawait this.token.initialize(address1, address2, { from: admin })\r\n```\r\n\r\nThis contract inherits from another contract which also has an initialize method, but which only takes one parameter. Using Solc 0.5.12 resulted in an ABI where the method taking two parameters was first, as follows:\r\n![image](https://user-images.githubusercontent.com/13924368/98248960-f3fcd580-1f75-11eb-93cf-983eb66ef0d3.png)\r\n\r\n\r\nHowever, 0.6.12 produces the opposite, where the method order in the ABI is reversed, which I suspect is why this issue is manifesting itself here:\r\n![image](https://user-images.githubusercontent.com/13924368/98248887-daf42480-1f75-11eb-8096-798eeb30325a.png)\r\n\r\nA similar issue is reported here in a (now deprecated) OpenZeppelin project: https://github.com/OpenZeppelin/starter-kit-gsn/issues/75\r\n\r\n## Steps to Reproduce\r\n\r\nCreate two contracts where one inherits from the other, where both have a function with the same name but a different signature. Ensure that the method from the parent contract comes before the method of the child contract in the ABI after compilation. When attempting to run tests, calling the method on an instance of the child contract will cause Truffle will to throw the aforementioned error.\r\n\r\n## Expected Behavior\r\n\r\nThe method should be correctly resolved and should run without an error.\r\n\r\n## Actual Results\r\n\r\nTruffle throws the aforementioned error, and I have to use a workaround: \r\n```\r\nawait this.token.methods['initialize(address,address)'](address1, address2, { from: admin })\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: Linux\r\n* Ethereum client: ganache-cli\r\n* Truffle version (`truffle version`): 5.1.51\r\n* node version (`node --version`): 10.23.0\r\n* npm version (`npm --version`): 6.14.8\r\n",
  "closed_by": {
    "login": "josh-richardson",
    "id": 13924368,
    "node_id": "MDQ6VXNlcjEzOTI0MzY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/13924368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/josh-richardson",
    "html_url": "https://github.com/josh-richardson",
    "followers_url": "https://api.github.com/users/josh-richardson/followers",
    "following_url": "https://api.github.com/users/josh-richardson/following{/other_user}",
    "gists_url": "https://api.github.com/users/josh-richardson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/josh-richardson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/josh-richardson/subscriptions",
    "organizations_url": "https://api.github.com/users/josh-richardson/orgs",
    "repos_url": "https://api.github.com/users/josh-richardson/repos",
    "events_url": "https://api.github.com/users/josh-richardson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/josh-richardson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/722456895",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3506#issuecomment-722456895",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506",
    "id": 722456895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjQ1Njg5NQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T15:39:52Z",
    "updated_at": "2020-11-05T15:39:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @josh-richardson, thanks for reporting this issue. Up to this point, the recommended way of dealing with function overloading has been to use the method you have employed in your workaround; that is, to use the `methods` namespace along with the function signature that you are concerned with. We'll have to get the team together, discuss this, and decide whether we should implement a different means of dealing with this kinds of things that would be nicer. Thanks for bringing this up!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/722456895/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/722610473",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3506#issuecomment-722610473",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506",
    "id": 722610473,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjYxMDQ3Mw==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T19:58:35Z",
    "updated_at": "2020-11-05T19:58:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "That's odd though that this doesn't work.  Right now we rely on web3's overload handling, and it should handle differing *numbers* of parameters just fine; where it falls down is overloading based on types.  (Something I've been meaning to handle, but it's going to take quite a while...)  But yeah, if the problem is the *number* I wouldn't expect this to happen, so this might be worth looking into.  (Although as @eggplantzzz mentions there is always the workaround.)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/722610473/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/722653289",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3506#issuecomment-722653289",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3506",
    "id": 722653289,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjY1MzI4OQ==",
    "user": {
      "login": "josh-richardson",
      "id": 13924368,
      "node_id": "MDQ6VXNlcjEzOTI0MzY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/13924368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josh-richardson",
      "html_url": "https://github.com/josh-richardson",
      "followers_url": "https://api.github.com/users/josh-richardson/followers",
      "following_url": "https://api.github.com/users/josh-richardson/following{/other_user}",
      "gists_url": "https://api.github.com/users/josh-richardson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/josh-richardson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/josh-richardson/subscriptions",
      "organizations_url": "https://api.github.com/users/josh-richardson/orgs",
      "repos_url": "https://api.github.com/users/josh-richardson/repos",
      "events_url": "https://api.github.com/users/josh-richardson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/josh-richardson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T21:22:24Z",
    "updated_at": "2020-11-05T22:56:40Z",
    "author_association": "NONE",
    "body": "> That's odd though that this doesn't work. Right now we rely on web3's overload handling, and it should handle differing _numbers_ of parameters just fine; where it falls down is overloading based on types. (Something I've been meaning to handle, but it's going to take quite a while...) But yeah, if the problem is the _number_ I wouldn't expect this to happen, so this might be worth looking into. (Although as @eggplantzzz mentions there is always the workaround.)\r\n\r\nAs far as I can tell, it is indeed the number of arguments - if I swap the elements around in the ABI & save it, everything works as expected. I can try throwing together a small demo repository if it would be helpful.\r\n\r\nEdit: this is peculiar, I'm unable to reproduce this in a simple new project, I'll raise this with my team and see if we can isolate it to something specific in the ABI. It definitely works just fine though if we swap the order of those two functions in the ABI, or if we remove the first function in the ABI.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/722653289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

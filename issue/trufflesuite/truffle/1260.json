{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1260",
  "id": 358575267,
  "node_id": "MDU6SXNzdWUzNTg1NzUyNjc=",
  "number": 1260,
  "title": "Lost ganache connection when running tests",
  "user": {
    "login": "sinanofficial",
    "id": 1637381,
    "node_id": "MDQ6VXNlcjE2MzczODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1637381?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sinanofficial",
    "html_url": "https://github.com/sinanofficial",
    "followers_url": "https://api.github.com/users/sinanofficial/followers",
    "following_url": "https://api.github.com/users/sinanofficial/following{/other_user}",
    "gists_url": "https://api.github.com/users/sinanofficial/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sinanofficial/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sinanofficial/subscriptions",
    "organizations_url": "https://api.github.com/users/sinanofficial/orgs",
    "repos_url": "https://api.github.com/users/sinanofficial/repos",
    "events_url": "https://api.github.com/users/sinanofficial/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sinanofficial/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1120350502,
      "node_id": "MDU6TGFiZWwxMTIwMzUwNTAy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/stale",
      "name": "stale",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-09-10T11:08:45Z",
  "updated_at": "2018-11-17T20:17:14Z",
  "closed_at": "2018-11-17T20:17:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nLost etherium connection when running tests, especially tests in loops.\r\n{ Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\r\n    - is running\r\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\r\n    - is accessible over the network\r\n    - is properly configured in your Truffle configuration file (truffle.js)\r\n\r\n    at ProviderError.ExtendableError (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-error\\index.js:10:1)\r\n    at new ProviderError (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-provider\\error.js:17:1)\r\n    at C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-provider\\wrapper.js:71:1\r\n    at C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-provider\\wrapper.js:129:1\r\n    at XMLHttpRequest.request.onreadystatechange (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\web3\\lib\\web3\\httpprovider.js:128:1)\r\n    at XMLHttpRequestEventTarget.dispatchEvent (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:64:1)\r\n    at XMLHttpRequest._setReadyState (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:354:1)\r\n    at XMLHttpRequest._onHttpRequestError (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:544:1)\r\n    at ClientRequest.<anonymous> (C:\\Users\\Administrator\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\xhr2\\lib\\xhr2.js:414:1)\r\n    at emitOne (events.js:116:13)\r\n    at ClientRequest.emit (events.js:211:7)\r\n    at Socket.socketErrorListener (_http_client.js:387:9)\r\n    at emitOne (events.js:116:13)\r\n    at Socket.emit (events.js:211:7)\r\n    at emitErrorNT (internal/streams/destroy.js:64:8)\r\n    at _combinedTickCallback (internal/process/next_tick.js:138:11)\r\n    at process._tickCallback (internal/process/next_tick.js:180:9)\r\n  message: 'Could not connect to your Ethereum client. Please check that your Ethereum client:\\n    - is running\\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\\n    - is accessible over the network\\n    - is properly configured in your Truffle configuration file (truffle.js)\\n',\r\n  stack: 'Error: Could not connect to your Ethereum client. Please check that your Ethereum client:\\n    - is running\\n    - is accepting RPC connections (i.e., \"--rpc\" option is used in geth)\\n    - is accessible over the network\\n    - is properly configured in your Truffle configuration file (truffle.js)\\n\\n    at ProviderError.ExtendableError (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\packages\\\\truffle-error\\\\index.js:10:1)\\n    at new ProviderError (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\packages\\\\truffle-provider\\\\error.js:17:1)\\n    at C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\packages\\\\truffle-provider\\\\wrapper.js:71:1\\n    at C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\packages\\\\truffle-provider\\\\wrapper.js:129:1\\n    at XMLHttpRequest.request.onreadystatechange (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\~\\\\web3\\\\lib\\\\web3\\\\httpprovider.js:128:1)\\n    at XMLHttpRequestEventTarget.dispatchEvent (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\~\\\\xhr2\\\\lib\\\\xhr2.js:64:1)\\n    at XMLHttpRequest._setReadyState (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\~\\\\xhr2\\\\lib\\\\xhr2.js:354:1)\\n    at XMLHttpRequest._onHttpRequestError (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\~\\\\xhr2\\\\lib\\\\xhr2.js:544:1)\\n    at ClientRequest.<anonymous> (C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\truffle\\\\build\\\\webpack:\\\\~\\\\xhr2\\\\lib\\\\xhr2.js:414:1)\\n    at emitOne (events.js:116:13)\\n    at ClientRequest.emit (events.js:211:7)\\n    at Socket.socketErrorListener (_http_client.js:387:9)\\n    at emitOne (events.js:116:13)\\n    at Socket.emit (events.js:211:7)\\n    at emitErrorNT (internal/streams/destroy.js:64:8)\\n    at _combinedTickCallback (internal/process/next_tick.js:138:11)\\n    at process._tickCallback (internal/process/next_tick.js:180:9)',\r\n  name: 'ProviderError' }\r\n\r\n## Steps to Reproduce\r\n\r\nMy connection configuration shall be right, because some tests finished as expected, but it will suddenly fail at any point with error above.\r\nI noticed that it will fail in iteration calls more often.\r\nI tried to let block mine every 5 seconds from auto mine, and add sleeping for 5 seconds between transactions, it will be better, but not resolved totally, still fails.\r\n\r\n## Expected Behavior\r\nRunning without losting connection.\r\n## Environment\r\n\r\n* Operating System:  Windows 10\r\n* Ethereum client: Ganache CLI v6.1.8 (ganache-core: 2.2.1)  \r\n* Truffle version (`truffle version`): Truffle v4.1.14\r\n* node version (`node --version`): 8.9.4\r\n* npm version (`npm --version`): 6.4.0\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/419980623",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1260#issuecomment-419980623",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260",
    "id": 419980623,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTk4MDYyMw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-10T16:44:52Z",
    "updated_at": "2018-09-10T16:44:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sinanofficial How many iterations are your loops? This looks like it might be a duplicate of #729. We think will be resolved with some recent changes at Web3 that make sure the provider is invoked with `KEEP-ALIVE`. At the moment if you are running many thousands of calls to the client Web3 can consume all the available port resources on your OS and triggers this error.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/419980623/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/437569164",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1260#issuecomment-437569164",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260",
    "id": 437569164,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzU2OTE2NA==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-11-10T08:55:47Z",
    "updated_at": "2018-11-10T08:55:47Z",
    "author_association": "NONE",
    "body": "Thank you for raising this issue! It has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. If you would like to keep this issue open, please respond with information about the current state of this problem.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/437569164/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/439644739",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1260#issuecomment-439644739",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1260",
    "id": 439644739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzOTY0NDczOQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-11-17T20:17:13Z",
    "updated_at": "2018-11-17T20:17:13Z",
    "author_association": "NONE",
    "body": "There has been no new activity on this issue since it was marked as stale 7 days ago, so it is being automatically closed.  If you'd like help with this or a different problem, please open a new issue. Thanks!\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/439644739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

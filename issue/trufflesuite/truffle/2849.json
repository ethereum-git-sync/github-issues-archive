{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2849",
  "id": 569534985,
  "node_id": "MDU6SXNzdWU1Njk1MzQ5ODU=",
  "number": 2849,
  "title": "`truffle compile` throws InternalCompilerError with no description",
  "user": {
    "login": "safakoks",
    "id": 17928869,
    "node_id": "MDQ6VXNlcjE3OTI4ODY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17928869?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/safakoks",
    "html_url": "https://github.com/safakoks",
    "followers_url": "https://api.github.com/users/safakoks/followers",
    "following_url": "https://api.github.com/users/safakoks/following{/other_user}",
    "gists_url": "https://api.github.com/users/safakoks/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/safakoks/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/safakoks/subscriptions",
    "organizations_url": "https://api.github.com/users/safakoks/orgs",
    "repos_url": "https://api.github.com/users/safakoks/repos",
    "events_url": "https://api.github.com/users/safakoks/events{/privacy}",
    "received_events_url": "https://api.github.com/users/safakoks/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 644098328,
      "node_id": "MDU6TGFiZWw2NDQwOTgzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20reproduced",
      "name": "needs reproduced",
      "color": "fbca04",
      "default": false,
      "description": null
    },
    {
      "id": 1088150379,
      "node_id": "MDU6TGFiZWwxMDg4MTUwMzc5",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/error%20better",
      "name": "error better",
      "color": "f27915",
      "default": false,
      "description": "issue indicates improvement to error messaging"
    },
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    },
    {
      "id": 1675042518,
      "node_id": "MDU6TGFiZWwxNjc1MDQyNTE4",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority6%20%F0%9F%92%AD",
      "name": "priority6 ðŸ’­",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2020-02-23T18:13:56Z",
  "updated_at": "2021-09-11T20:40:20Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI have tried to create a test of my contract which includes a function returns `Struct` instance. But, it returns a meaningless error.\r\n\r\n## Steps to Reproduce\r\nHere's my contract which is created by Solidity v0.6.0\r\n``` \r\npragma solidity ^0.6.0;\r\npragma experimental ABIEncoderV2;\r\n\r\n\r\ncontract Stack{\r\n\r\n    struct Item{\r\n        string  name;\r\n        uint256 quantity;\r\n        bool isSolid;\r\n    }\r\n\r\n    mapping(address => Item[]) userItemsMap;\r\n\r\n\r\n    function addItem(string memory _name, uint256 _quantity, bool _isSolid) public {\r\n        userItemsMap[msg.sender].push(Item({\r\n        name:_name, quantity:_quantity,\r\n        isSolid :_isSolid\r\n            }));\r\n    }\r\n\r\n    function getItems() public view returns(Item[] memory){\r\n        return userItemsMap[msg.sender];\r\n    }\r\n\r\n    function getLastItem() public view returns(Item memory){\r\n        Item[] memory userItems = userItemsMap[msg.sender];\r\n        require(userItems.length>0);\r\n        return userItems[userItems.length - 1];\r\n    }\r\n\r\n}\r\n```\r\nAnd its sample test contract :\r\n```\r\npragma solidity ^0.6.0;\r\n\r\nimport \"truffle/Assert.sol\";\r\nimport \"truffle/DeployedAddresses.sol\";\r\nimport \"../contracts/Stack.sol\";\r\n\r\ncontract  TestStackContract{\r\n\r\n    function testAddingItem() public {\r\n\r\n        Stack stackInstance =  Stack(DeployedAddresses.Stack());\r\n\r\n        stackInstance.addItem(\"Apple\",125,true);\r\n\r\n        Stack.Item memory lastItem = stackInstance.getLastItem();\r\n\r\n        Assert.equal(lastItem.name, \"Apple\", \"Name should be Apple\");\r\n    }\r\n}\r\n\r\n```\r\n\r\n## Expected Behavior\r\nI run `truffle test` and it should pass the test or return an error message\r\n\r\n## Actual Results\r\nIt returns an `InternalCompilerError` without any error message\r\n\r\n```\r\nUsing network 'development'.\r\n\r\n\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./test/TestBiddingContract.sol\r\n> Compiling ./test/TestStack.sol\r\n\r\nInternalCompilerError:\r\n\r\nCompilation failed. See above.\r\nTruffle v5.1.13 (core: 5.1.13)\r\nNode v8.17.0\r\n\r\n```\r\n## Environment\r\n\r\n* Operating System: Ubuntu 16.04\r\n* Ethereum client: GETH / Quorum\r\n* Truffle version (`truffle version`): v5.1.13\r\n* node version (`node --version`): v8.17.0\r\n* npm version (`npm --version`): 6.13.4\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 3,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590407990",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-590407990",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 590407990,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDQwNzk5MA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-24T16:10:32Z",
    "updated_at": "2020-02-24T16:10:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@safakoks Thanks for reporting this, I'll try and reproduce your error to get to the bottom of this!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590407990/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590413703",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-590413703",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 590413703,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDQxMzcwMw==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-24T16:20:37Z",
    "updated_at": "2020-02-24T16:20:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Using Truffle without Geth or Quorum I get the following error\r\n```\r\nInternalCompilerError: Unknown dynamically sized type: struct Stack.Item memory\r\n```\r\nIt looks like that message comes from the decoder and perhaps Geth/Quorum setups give differently formatted messages? Maybe @haltman-at might understand what is going on here a little bit better than I do.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590413703/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590448401",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-590448401",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 590448401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDQ0ODQwMQ==",
    "user": {
      "login": "safakoks",
      "id": 17928869,
      "node_id": "MDQ6VXNlcjE3OTI4ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/17928869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/safakoks",
      "html_url": "https://github.com/safakoks",
      "followers_url": "https://api.github.com/users/safakoks/followers",
      "following_url": "https://api.github.com/users/safakoks/following{/other_user}",
      "gists_url": "https://api.github.com/users/safakoks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/safakoks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/safakoks/subscriptions",
      "organizations_url": "https://api.github.com/users/safakoks/orgs",
      "repos_url": "https://api.github.com/users/safakoks/repos",
      "events_url": "https://api.github.com/users/safakoks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/safakoks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-24T17:22:05Z",
    "updated_at": "2020-02-24T17:40:40Z",
    "author_association": "NONE",
    "body": "Is there any solution for this? Because I could not understand what is wrong and why it happens?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590448401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590499067",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-590499067",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 590499067,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDQ5OTA2Nw==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-24T19:11:33Z",
    "updated_at": "2020-02-24T19:11:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "`InternalCompilerError` is a `solc` error message; it's `solc` throwing that error, not Truffle.  This has nothing to do with the decoder, it's a compilation error.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590499067/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590505062",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-590505062",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 590505062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDUwNTA2Mg==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-24T19:24:37Z",
    "updated_at": "2020-02-24T19:24:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Basically, if you see `InternalCompilerError`, you should report it to the Solidity team.  Unless for some reason compiling those tests only fails in Truffle?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590505062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590730226",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-590730226",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 590730226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDczMDIyNg==",
    "user": {
      "login": "safakoks",
      "id": 17928869,
      "node_id": "MDQ6VXNlcjE3OTI4ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/17928869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/safakoks",
      "html_url": "https://github.com/safakoks",
      "followers_url": "https://api.github.com/users/safakoks/followers",
      "following_url": "https://api.github.com/users/safakoks/following{/other_user}",
      "gists_url": "https://api.github.com/users/safakoks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/safakoks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/safakoks/subscriptions",
      "organizations_url": "https://api.github.com/users/safakoks/orgs",
      "repos_url": "https://api.github.com/users/safakoks/repos",
      "events_url": "https://api.github.com/users/safakoks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/safakoks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-25T07:48:57Z",
    "updated_at": "2020-02-25T07:52:40Z",
    "author_association": "NONE",
    "body": "@haltman-at thanks for your answer, yes it happened because of Solidity. I asked them, why it occurs, they recommend me adding ``pragma experimental ABIEncoderV2;`` into Test Contract, It works fine on Remix. But still, truffle does not accept the contract during ``truffle test``\r\n\r\nIt returns the same error without any message :\r\n```\r\nUsing network 'development'.\r\n\r\n\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/Stack.sol\r\n> Compiling ./test/TestStack.sol\r\n\r\nInternalCompilerError:\r\n\r\nCompilation failed. See above.\r\nTruffle v5.1.13 (core: 5.1.13)\r\nNode v8.17.0\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/590730226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591583121",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-591583121",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 591583121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MTU4MzEyMQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-26T18:51:24Z",
    "updated_at": "2020-02-26T18:51:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@safakoks , which version of solidity are you specifically using to compile with while testing?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591583121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591596911",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-591596911",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 591596911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MTU5NjkxMQ==",
    "user": {
      "login": "safakoks",
      "id": 17928869,
      "node_id": "MDQ6VXNlcjE3OTI4ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/17928869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/safakoks",
      "html_url": "https://github.com/safakoks",
      "followers_url": "https://api.github.com/users/safakoks/followers",
      "following_url": "https://api.github.com/users/safakoks/following{/other_user}",
      "gists_url": "https://api.github.com/users/safakoks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/safakoks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/safakoks/subscriptions",
      "organizations_url": "https://api.github.com/users/safakoks/orgs",
      "repos_url": "https://api.github.com/users/safakoks/repos",
      "events_url": "https://api.github.com/users/safakoks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/safakoks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-26T19:19:16Z",
    "updated_at": "2020-02-26T19:19:16Z",
    "author_association": "NONE",
    "body": "@CruzMolina , here's my compile config in ```truffle-config.js```\r\n\r\n```\r\ncompilers: {\r\n        solc: {\r\n            version: \"0.6.0\"\r\n        }\r\n    }\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591596911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591669525",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-591669525",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 591669525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MTY2OTUyNQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-26T22:08:36Z",
    "updated_at": "2020-02-26T22:08:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmmm. odd. this is what I see\r\n\r\n```bash\r\nâžœ  reprod-error truffle test\r\n\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/Migrations.sol\r\n> Compiling ./contracts/Stack.sol\r\n> Compiling ./test/TestExample.sol\r\n\r\nInternalCompilerError: Unknown dynamically sized type: struct Stack.Item memory\r\n\r\nCompilation failed. See above.\r\nTruffle v5.1.14 (core: 5.1.14)\r\nNode v10.18.0\r\n```\r\n\r\nSame output when using Node v8.17.0.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591669525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591822084",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-591822084",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 591822084,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MTgyMjA4NA==",
    "user": {
      "login": "safakoks",
      "id": 17928869,
      "node_id": "MDQ6VXNlcjE3OTI4ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/17928869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/safakoks",
      "html_url": "https://github.com/safakoks",
      "followers_url": "https://api.github.com/users/safakoks/followers",
      "following_url": "https://api.github.com/users/safakoks/following{/other_user}",
      "gists_url": "https://api.github.com/users/safakoks/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/safakoks/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/safakoks/subscriptions",
      "organizations_url": "https://api.github.com/users/safakoks/orgs",
      "repos_url": "https://api.github.com/users/safakoks/repos",
      "events_url": "https://api.github.com/users/safakoks/events{/privacy}",
      "received_events_url": "https://api.github.com/users/safakoks/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-27T07:22:39Z",
    "updated_at": "2020-02-27T07:22:39Z",
    "author_association": "NONE",
    "body": "@CruzMolina may it happens because I am using ```Truffle v5.1.13```?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/591822084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/592052696",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-592052696",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 592052696,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MjA1MjY5Ng==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-27T16:32:30Z",
    "updated_at": "2020-02-27T16:32:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@safakoks Hmmm. No, I'm not seeing any changes to the relevant code in v5.1.14.\r\n\r\nAt this point, I think we need to see a repo of a truffle project example where this exact bug is consistently reproduced.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/592052696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/829045357",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-829045357",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 829045357,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTA0NTM1Nw==",
    "user": {
      "login": "pynixwang",
      "id": 1189879,
      "node_id": "MDQ6VXNlcjExODk4Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1189879?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pynixwang",
      "html_url": "https://github.com/pynixwang",
      "followers_url": "https://api.github.com/users/pynixwang/followers",
      "following_url": "https://api.github.com/users/pynixwang/following{/other_user}",
      "gists_url": "https://api.github.com/users/pynixwang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pynixwang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pynixwang/subscriptions",
      "organizations_url": "https://api.github.com/users/pynixwang/orgs",
      "repos_url": "https://api.github.com/users/pynixwang/repos",
      "events_url": "https://api.github.com/users/pynixwang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pynixwang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T08:33:54Z",
    "updated_at": "2021-04-29T08:33:54Z",
    "author_association": "NONE",
    "body": "you call another contract returns memory struct but you do not use `pragma experimental ABIEncoderV2;`",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/829045357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/829046758",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-829046758",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 829046758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTA0Njc1OA==",
    "user": {
      "login": "pynixwang",
      "id": 1189879,
      "node_id": "MDQ6VXNlcjExODk4Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1189879?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pynixwang",
      "html_url": "https://github.com/pynixwang",
      "followers_url": "https://api.github.com/users/pynixwang/followers",
      "following_url": "https://api.github.com/users/pynixwang/following{/other_user}",
      "gists_url": "https://api.github.com/users/pynixwang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pynixwang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pynixwang/subscriptions",
      "organizations_url": "https://api.github.com/users/pynixwang/orgs",
      "repos_url": "https://api.github.com/users/pynixwang/repos",
      "events_url": "https://api.github.com/users/pynixwang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pynixwang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T08:36:09Z",
    "updated_at": "2021-04-29T08:36:09Z",
    "author_association": "NONE",
    "body": "I run into this today",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/829046758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/913223576",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-913223576",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 913223576,
    "node_id": "IC_kwDOAkfq-c42bq-Y",
    "user": {
      "login": "lobsterhands",
      "id": 1688881,
      "node_id": "MDQ6VXNlcjE2ODg4ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1688881?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lobsterhands",
      "html_url": "https://github.com/lobsterhands",
      "followers_url": "https://api.github.com/users/lobsterhands/followers",
      "following_url": "https://api.github.com/users/lobsterhands/following{/other_user}",
      "gists_url": "https://api.github.com/users/lobsterhands/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lobsterhands/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lobsterhands/subscriptions",
      "organizations_url": "https://api.github.com/users/lobsterhands/orgs",
      "repos_url": "https://api.github.com/users/lobsterhands/repos",
      "events_url": "https://api.github.com/users/lobsterhands/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lobsterhands/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-05T20:35:42Z",
    "updated_at": "2021-09-05T20:35:42Z",
    "author_association": "NONE",
    "body": "Using [solc-js](https://github.com/ethereum/solc-js) directly may provide better debugging information.\r\n\r\n`solcjs path/to/Contract.sol --abi`",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/913223576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/917476461",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2849#issuecomment-917476461",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2849",
    "id": 917476461,
    "node_id": "IC_kwDOAkfq-c42r5Rt",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-11T20:37:03Z",
    "updated_at": "2021-09-11T20:40:20Z",
    "author_association": "NONE",
    "body": "@safakoks \r\n> It returns the same error without any message :\r\n\r\nAre you sure you are running it on the same code? There was another variation of the issue you reported in https://github.com/ethereum/solidity/issues/8379 where `solc` would return `InternalCompilerError` with no message instead: https://github.com/ethereum/solidity/issues/9270. You can trigger it by simply by removing the `string` from your struct to make it statically sized. See the repro below.\r\n\r\nSo I think that `InternalCompilerError` is not a Truffle issue but a compiler issue instead and that it was fixed along with the other issue in solc 0.7.4.\r\n\r\nIt was really a bunch of related bugs, for example also https://github.com/ethereum/solidity/issues/9969 and https://github.com/ethereum/solidity/issues/9970. They were all triggered by the compiler running into something that requires `ABIEncoderV2` and is defined in a file that enables it but then being used in another file that does not have it enabled. On earlier versions the workaround is simply to make sure you have the pragma in every file where you are using stuff that depends on `ABIEncoderV2`.\r\n\r\n### Repro with a dynamically-sized struct\r\n```bash\r\nmkdir -p /tmp/truffle-test/\r\ncd /tmp/truffle-test/\r\nnpm install truffle\r\nnpx truffle init\r\necho 'module.exports.compilers.solc.version = \"0.6.0\";' >> truffle-config.js\r\n\r\ncat << EOF > contracts/Stack.sol\r\npragma solidity ^0.6.0;\r\npragma experimental ABIEncoderV2;\r\n\r\ncontract Stack {\r\n    struct Item {\r\n        string name;\r\n    }\r\n\r\n    function getLastItem() public view returns(Item memory) {}\r\n}\r\nEOF\r\n\r\ncat << EOF > test/TestStack.sol\r\npragma solidity ^0.6.0;\r\n\r\nimport \"../contracts/Stack.sol\";\r\n\r\ncontract TestStackContract {\r\n    function testAddingItem() public {\r\n        Stack(0x0).getLastItem();\r\n    }\r\n}\r\nEOF\r\n\r\nnpx truffle test\r\n```\r\nOutput:\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/Migrations.sol\r\n> Compiling ./contracts/Stack.sol\r\n> Compiling ./test/TestStack.sol\r\n\r\nInternalCompilerError: Unknown dynamically sized type: struct Stack.Item memory\r\n\r\nCompilation failed. See above.\r\nTruffle v5.4.10 (core: 5.4.10)\r\nNode v16.9.1\r\n```\r\n### Repro with a statically-sized struct\r\n```bash\r\nmkdir -p /tmp/truffle-test/\r\ncd /tmp/truffle-test/\r\nnpm install truffle\r\nnpx truffle init\r\necho 'module.exports.compilers.solc.version = \"0.6.0\";' >> truffle-config.js\r\n\r\ncat << EOF > contracts/Stack.sol\r\npragma solidity ^0.6.0;\r\npragma experimental ABIEncoderV2;\r\n\r\ncontract Stack {\r\n    struct Item {\r\n        uint value;\r\n    }\r\n\r\n    function getLastItem() public view returns(Item memory) {}\r\n}\r\nEOF\r\n\r\ncat << EOF > test/TestStack.sol\r\npragma solidity ^0.6.0;\r\n\r\nimport \"../contracts/Stack.sol\";\r\n\r\ncontract TestStackContract {\r\n    function testAddingItem() public {\r\n        Stack(0x0).getLastItem();\r\n    }\r\n}\r\nEOF\r\n\r\nnpx truffle test\r\n```\r\nOutput:\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling ./contracts/Migrations.sol\r\n> Compiling ./contracts/Stack.sol\r\n> Compiling ./test/TestStack.sol\r\n\r\nInternalCompilerError:\r\n\r\nCompilation failed. See above.\r\nTruffle v5.4.10 (core: 5.4.10)\r\nNode v16.9.1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/917476461/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1213",
  "id": 353056691,
  "node_id": "MDU6SXNzdWUzNTMwNTY2OTE=",
  "number": 1213,
  "title": "Dynamically set contract gas defaults based on client block limit",
  "user": {
    "login": "cgewecke",
    "id": 7332026,
    "node_id": "MDQ6VXNlcjczMzIwMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cgewecke",
    "html_url": "https://github.com/cgewecke",
    "followers_url": "https://api.github.com/users/cgewecke/followers",
    "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
    "organizations_url": "https://api.github.com/users/cgewecke/orgs",
    "repos_url": "https://api.github.com/users/cgewecke/repos",
    "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cgewecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393332,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMzI=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/wontfix",
      "name": "wontfix",
      "color": "ffffff",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-08-22T17:44:54Z",
  "updated_at": "2021-09-03T18:48:38Z",
  "closed_at": "2021-09-03T18:08:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Ganache has a default gas limit of ~6700000 and Truffle hard-codes that as the default in `truffle-config` unless it's over ridden by a preference defined in the network config. This leads to a lot of confusion:\r\n+ `Exceeds block gas limit` when transitioning from ganache-cli to Ropsten (where limit is low)\r\n+ Running ganache-cli at the command line with a higher gas limit and *still* running out of gas (@shkfnly raised this in slack yesterday)\r\n\r\nFor V5 we've implemented gas estimation at truffle-contract but it's disabled in the truffle context because the client estimates are sometimes wildly off. \r\n\r\nIdeally we should ask the client what its limit is and use that. But this is a little complicated...needs investigation. \r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/912718344",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1213#issuecomment-912718344",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1213",
    "id": 912718344,
    "node_id": "IC_kwDOAkfq-c42ZvoI",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-03T18:08:28Z",
    "updated_at": "2021-09-03T18:08:28Z",
    "author_association": "MEMBER",
    "body": "Closing this as won't-fix, since it's likely not safe to use the block limit anymore. Instead, we're moving forward with using the estimated gas value (with a buffer).\r\n\r\nSee #3992 for the main issue, or PR #4296, where the work is happening to implement this behavior.\r\n\r\n(ðŸ¤ž that this estimation strategy won't be too wildly inaccurate and we won't have to reconsider this)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/912718344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

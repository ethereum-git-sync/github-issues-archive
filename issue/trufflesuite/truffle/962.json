{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/962",
  "id": 325775407,
  "node_id": "MDU6SXNzdWUzMjU3NzU0MDc=",
  "number": 962,
  "title": "'truffle compile' doesn't work properly when using multiple network providers.",
  "user": {
    "login": "gerchicov-bp",
    "id": 11498205,
    "node_id": "MDQ6VXNlcjExNDk4MjA1",
    "avatar_url": "https://avatars.githubusercontent.com/u/11498205?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gerchicov-bp",
    "html_url": "https://github.com/gerchicov-bp",
    "followers_url": "https://api.github.com/users/gerchicov-bp/followers",
    "following_url": "https://api.github.com/users/gerchicov-bp/following{/other_user}",
    "gists_url": "https://api.github.com/users/gerchicov-bp/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gerchicov-bp/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gerchicov-bp/subscriptions",
    "organizations_url": "https://api.github.com/users/gerchicov-bp/orgs",
    "repos_url": "https://api.github.com/users/gerchicov-bp/repos",
    "events_url": "https://api.github.com/users/gerchicov-bp/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gerchicov-bp/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-05-23T16:08:03Z",
  "updated_at": "2018-05-25T21:26:29Z",
  "closed_at": "2018-05-25T21:26:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nUsed truffle 4.1.8 and everything was ok. Updated to the latest (4.1.11). Now it seems it compiles the contracts but I must cancel/stop it manually. Here is my folder:\r\nhttp://dropmefiles.com/7dHdO\r\nIn the same time tried to compile contracts in another folder - it compiles them successfully.\r\n\r\n## Steps to Reproduce\r\n\r\nUnzip the folder from this link and run `truffle compile`.\r\n\r\n## Expected Behavior\r\n\r\nCompiling process is finished successfully\r\n\r\n## Actual Results\r\n\r\nIt seems that contracts are compiled but I see `Writing artifacts to ./build/contracts` infinitely.\r\n\r\n## Environment\r\n\r\n* Operating System: OSX 10.13.4\r\n* Ethereum client: none (is not involved)\r\n* Truffle version (`truffle version`): 4.1.11\r\n* node version (`node --version`): v9.9.0\r\n* npm version (`npm --version`): 6.0.1\r\n",
  "closed_by": {
    "login": "cgewecke",
    "id": 7332026,
    "node_id": "MDQ6VXNlcjczMzIwMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cgewecke",
    "html_url": "https://github.com/cgewecke",
    "followers_url": "https://api.github.com/users/cgewecke/followers",
    "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
    "organizations_url": "https://api.github.com/users/cgewecke/orgs",
    "repos_url": "https://api.github.com/users/cgewecke/repos",
    "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cgewecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/962/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391406864",
    "html_url": "https://github.com/trufflesuite/truffle/issues/962#issuecomment-391406864",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
    "id": 391406864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTQwNjg2NA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T16:14:55Z",
    "updated_at": "2018-05-23T17:15:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Will check this out in few minutes (on a train) but our CI is passing and have manually verified that commands are completing ok on MetaCoin. Why is it working in one folder for you and not in another?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391406864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391427884",
    "html_url": "https://github.com/trufflesuite/truffle/issues/962#issuecomment-391427884",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
    "id": 391427884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTQyNzg4NA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T17:14:05Z",
    "updated_at": "2018-05-23T17:14:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gerchicov-bp I'm getting your project to compile ok after wrapping the wallet providers in functions, as suggested by the docs [here](http://truffleframework.com/docs/advanced/configuration#managing-multiple-providers). Have only tried with the `localhost` network I stubbed in. Could you double-check that your custom host is working? \r\n\r\n**truffle.js**\r\n```javascript\r\nmodule.exports = {\r\n  // See <http://truffleframework.com/docs/advanced/configuration>\r\n  // to customize your Truffle configuration!\r\n  networks: {\r\n\r\n    development: {\r\n      host: \"127.0.0.1\",\r\n      port: 8545,\r\n      network_id: \"*\" // Match any network id\r\n    },\r\n    /*},\r\n    development: {\r\n      host: \"<custom-host>\",\r\n      port: 8545,\r\n      network_id: \"*\"\r\n    },*/\r\n    rinkeby: {\r\n      provider: function() {\r\n        return new HDWalletProvider(mnemonic, \"https://rinkeby.infura.io/<infura-key>\");\r\n      },\r\n      gas: 4500000,\r\n      gasPrice: 25000000000,\r\n      network_id: 4\r\n    },\r\n    ropsten: {\r\n      provider: function() {\r\n        new HDWalletProvider(mnemonic, \"https://ropsten.infura.io/<infura-key>\");\r\n      },\r\n      gas: 4500000,\r\n      gasPrice: 25000000000,\r\n      network_id: 3\r\n    }\r\n  }\r\n};\r\n```\r\n\r\n**Output**\r\n```shell\r\ngerchicov user$ truffle version\r\nTruffle v4.1.11 (core: 4.1.11)\r\nSolidity v0.4.24 (solc-js)\r\ngewecke:gerchicov user$ truffle compile\r\nCompiling ./contracts/ClientReceipt.sol...\r\nCompiling ./contracts/Migrations.sol...\r\nCompiling ./contracts/Simple.sol...\r\n\r\nCompilation warnings encountered:\r\n\r\n/gerchicov/contracts/Migrations.sol:11:3: Warning: Defining constructors as functions with the same name as the contract is deprecated. Use \"constructor(...) { ... }\" instead.\r\n  function Migrations() public {\r\n  ^ (Relevant source part starts here and spans across multiple lines).\r\n,/gerchicov/contracts/Simple.sol:6:3: Warning: No visibility specified. Defaulting to \"public\". \r\n  function getA() constant returns (uint256) {\r\n  ^ (Relevant source part starts here and spans across multiple lines).\r\n,/gerchicov/contracts/Simple.sol:10:3: Warning: No visibility specified. Defaulting to \"public\". \r\n  function setA(uint256 newValue) {\r\n  ^ (Relevant source part starts here and spans across multiple lines).\r\n\r\nWriting artifacts to ./build/contracts\r\n\r\ngerchicov user$ \r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391427884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391510288",
    "html_url": "https://github.com/trufflesuite/truffle/issues/962#issuecomment-391510288",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
    "id": 391510288,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUxMDI4OA==",
    "user": {
      "login": "Gargo",
      "id": 853345,
      "node_id": "MDQ6VXNlcjg1MzM0NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/853345?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gargo",
      "html_url": "https://github.com/Gargo",
      "followers_url": "https://api.github.com/users/Gargo/followers",
      "following_url": "https://api.github.com/users/Gargo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gargo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gargo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gargo/subscriptions",
      "organizations_url": "https://api.github.com/users/Gargo/orgs",
      "repos_url": "https://api.github.com/users/Gargo/repos",
      "events_url": "https://api.github.com/users/Gargo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gargo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:00:24Z",
    "updated_at": "2018-05-23T22:00:24Z",
    "author_association": "NONE",
    "body": "@cgewecke Yes, your code works. BUT:\r\n1)what is the difference and why does my format is mentioned in the documentation as correct too?\r\n2)how and why settings for \"migration\" influence \"compilation\"?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391510288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391519398",
    "html_url": "https://github.com/trufflesuite/truffle/issues/962#issuecomment-391519398",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
    "id": 391519398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTUxOTM5OA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-23T22:35:05Z",
    "updated_at": "2018-05-23T22:35:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Gargo \r\n\r\n1. Unfortunately the non-function format for the wallet is only reliable if there is a single provider. The docs could use some improvement in that section because it's not obvious why there are two formats. The 'function' form was introduced because the `non-function` form causes super weird behavior in the provider when there are multiple connections open to Infura.  Original bug report at #348.\r\n\r\n2. No great answer for this - `truffle compile` builds the artifacts and networks are one the things we track in that object. At the moment this isn't very helpful but it will become important when the artifact is refactored for the next major release because it will be possible to specify different compilations for different networks.  In the comment above I'm just trying to narrow things a bit so we can figure out what's going wrong. I know the config is getting loaded - I want to see if there's a specific issue with connecting remotely or not.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391519398/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391605089",
    "html_url": "https://github.com/trufflesuite/truffle/issues/962#issuecomment-391605089",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
    "id": 391605089,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MTYwNTA4OQ==",
    "user": {
      "login": "emin93",
      "id": 5310475,
      "node_id": "MDQ6VXNlcjUzMTA0NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5310475?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emin93",
      "html_url": "https://github.com/emin93",
      "followers_url": "https://api.github.com/users/emin93/followers",
      "following_url": "https://api.github.com/users/emin93/following{/other_user}",
      "gists_url": "https://api.github.com/users/emin93/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emin93/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emin93/subscriptions",
      "organizations_url": "https://api.github.com/users/emin93/orgs",
      "repos_url": "https://api.github.com/users/emin93/repos",
      "events_url": "https://api.github.com/users/emin93/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emin93/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-24T06:36:13Z",
    "updated_at": "2018-05-24T06:36:13Z",
    "author_association": "NONE",
    "body": "Thanks @cgewecke, for me that was the missing part. As soon as I switched to the \"function\" form, the issue got resolved.\r\n\r\n- Truffle version (`truffle version`): Truffle v4.1.11 (core: 4.1.11) Solidity v0.4.24 (solc-js)\r\n- Node version (`node -v`): v8.11.2\r\n- NPM version (`npm -v`): 6.0.1\r\n\r\n```javascript\r\nconst path = require(\"path\");\r\nconst HDWalletProvider = require(\"truffle-hdwallet-provider\");\r\n\r\nmodule.exports = {\r\n  contracts_build_directory: path.join(process.cwd(), \"src/Contracts\"),\r\n  networks: {\r\n    mainnet: {\r\n      provider: () => new HDWalletProvider(mnemonic, \"https://mainnet.infura.io/<infura-key>\"),\r\n      network_id: 1\r\n    },\r\n    rinkeby: {\r\n      provider: () => new HDWalletProvider(, \"https://rinkeby.infura.io/<infura-key>\"),\r\n      network_id: 4\r\n    }\r\n  }\r\n};\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/391605089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/392191481",
    "html_url": "https://github.com/trufflesuite/truffle/issues/962#issuecomment-392191481",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/962",
    "id": 392191481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjE5MTQ4MQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-25T21:26:29Z",
    "updated_at": "2018-05-25T21:26:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gerchicov-bp Thanks for opening this - have amended the docs to remove the non-function closure examples. \r\n\r\nClosing.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/392191481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

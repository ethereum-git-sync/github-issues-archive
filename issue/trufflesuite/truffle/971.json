{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/971",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/971",
  "id": 327521710,
  "node_id": "MDU6SXNzdWUzMjc1MjE3MTA=",
  "number": 971,
  "title": "Errors unhelpful when accidentally deploying interfaces / abstract contracts. ",
  "user": {
    "login": "Mc01",
    "id": 2324400,
    "node_id": "MDQ6VXNlcjIzMjQ0MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2324400?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Mc01",
    "html_url": "https://github.com/Mc01",
    "followers_url": "https://api.github.com/users/Mc01/followers",
    "following_url": "https://api.github.com/users/Mc01/following{/other_user}",
    "gists_url": "https://api.github.com/users/Mc01/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Mc01/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Mc01/subscriptions",
    "organizations_url": "https://api.github.com/users/Mc01/orgs",
    "repos_url": "https://api.github.com/users/Mc01/repos",
    "events_url": "https://api.github.com/users/Mc01/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Mc01/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971536096,
      "node_id": "MDU6TGFiZWw5NzE1MzYwOTY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Migrations",
      "name": "Migrations",
      "color": "b887db",
      "default": false,
      "description": ""
    },
    {
      "id": 1120350502,
      "node_id": "MDU6TGFiZWwxMTIwMzUwNTAy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/stale",
      "name": "stale",
      "color": "ffffff",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-05-29T23:28:30Z",
  "updated_at": "2021-04-24T01:59:49Z",
  "closed_at": "2018-11-15T10:10:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nTruffle contract (https://github.com/trufflesuite/truffle-contract) shows incorrect messages and behaves incorrectly during migrations.\r\n\r\n## Steps to Reproduce\r\n\r\nClone and setup this repo: https://github.com/Mc01/TruffleTest\r\n\r\n## Expected Behavior\r\n\r\n1. Contract should not be deployed and Truffle should throw informative exception what's the reason. Truffle should not allow to enter method after deployment and fail with interaction on contract properties.\r\n2. Truffle should show parsed messages by default - the default error `The contract code couldn't be stored, please check your gas amount.` is misleading and ambiguous. `Error: {ContractName} has no network configuration for its current network id ({NetworkId}).` is preferred, however also invalid for this case. The best would be information about whats the issue with contract code or in what process it fails.\r\n\r\n## Actual Results\r\n\r\nContract seems to be deployed successfully and informs about invalid network configuration.\r\n\r\nDefault message: `This should throw during deploy and do not allow calling contract inside\r\nError encountered, bailing. Network state unknown. Review successful transactions manually.\r\nError: The contract code couldn't be stored, please check your gas amount.`\r\n\r\nCaught internal message: `Error: {ContractName} has no network configuration for its current network id ({NetworkId}).`\r\n\r\n## Environment\r\n\r\n* Operating System: OSX\r\n* Ethereum client: Ganache App/Ganache CLI/Truffle Develop\r\n* Truffle version (`truffle version`): 4.1.11\r\n* node version (`node --version`): v9.6.1\r\n* npm version (`npm --version`): 5.6.0\r\n",
  "closed_by": {
    "login": "stale[bot]",
    "id": 26384082,
    "node_id": "MDM6Qm90MjYzODQwODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/stale%5Bbot%5D",
    "html_url": "https://github.com/apps/stale",
    "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/971/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/392987770",
    "html_url": "https://github.com/trufflesuite/truffle/issues/971#issuecomment-392987770",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971",
    "id": 392987770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5Mjk4Nzc3MA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T00:03:44Z",
    "updated_at": "2018-05-30T00:03:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Mc01 Thank you for this excellent bug report, really appreciate the reproduction case.  \r\n\r\nIf I understand correctly - the error is being triggered by an attempt to deploy an abstract contract. We should definitely handle this case better - there's a related issue from some time ago [here](https://github.com/trufflesuite/truffle/issues/796). \r\n\r\nThe error you're seeing comes from one of Truffle's dependencies: `web3`. When it executes a deployment and receives a receipt, it performs [a check](https://github.com/ethereum/web3.js/blob/develop/lib/web3/contract.js#L96-L157) to verify that code exists at that address. An abstract contract has no data associated with it so there is nothing there.\r\n\r\nIf you look at the `IncorrectChild` artifact in the `build` folder after running `truffle-compile`,  you will see it has no bytecode, so nothing is being written to the chain:\r\n\r\n```\r\n\"bytecode\": \"0x\",\r\n\"deployedBytecode\": \"0x\", \r\n```\r\n\r\nWe should detect cases where someone attempts to deploy a contract with an empty binary and either reject or skip those contracts. \r\n\r\nAs a side note - I noticed in your `truffle.js` you're using a form of provider instantiation that no longer works with the latest `HDWallet`. Because of some recent changes in that Library, these provider calls should be wrapped in a function closure, as shown in the docs [here](http://truffleframework.com/docs/advanced/configuration#providers).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/392987770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/393069960",
    "html_url": "https://github.com/trufflesuite/truffle/issues/971#issuecomment-393069960",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971",
    "id": 393069960,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzA2OTk2MA==",
    "user": {
      "login": "Mc01",
      "id": 2324400,
      "node_id": "MDQ6VXNlcjIzMjQ0MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2324400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Mc01",
      "html_url": "https://github.com/Mc01",
      "followers_url": "https://api.github.com/users/Mc01/followers",
      "following_url": "https://api.github.com/users/Mc01/following{/other_user}",
      "gists_url": "https://api.github.com/users/Mc01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Mc01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Mc01/subscriptions",
      "organizations_url": "https://api.github.com/users/Mc01/orgs",
      "repos_url": "https://api.github.com/users/Mc01/repos",
      "events_url": "https://api.github.com/users/Mc01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Mc01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-30T08:08:39Z",
    "updated_at": "2018-05-30T08:08:39Z",
    "author_association": "NONE",
    "body": "@cgewecke Thanks for quick answer. \r\n\r\nHere's the equivalent message from Remix IDE when trying to deploy this contract `This contract does not implement all functions and thus cannot be created.`. So to confirm - yes, it is an abstract contract.\r\n\r\nBtw, thanks for pointing out these issue with provider and `HDWallet`. Haven't noticed that it already changed. Will definitely use that in my own projects üëç ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/393069960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/436927293",
    "html_url": "https://github.com/trufflesuite/truffle/issues/971#issuecomment-436927293",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971",
    "id": 436927293,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjkyNzI5Mw==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-11-08T09:21:57Z",
    "updated_at": "2018-11-08T09:21:57Z",
    "author_association": "NONE",
    "body": "Thank you for raising this issue! It has been automatically marked as stale because it has not had recent activity. It will be closed in 7 days if no further activity occurs. If you would like to keep this issue open, please respond with information about the current state of this problem.\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/436927293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/438987381",
    "html_url": "https://github.com/trufflesuite/truffle/issues/971#issuecomment-438987381",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971",
    "id": 438987381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzODk4NzM4MQ==",
    "user": {
      "login": "stale[bot]",
      "id": 26384082,
      "node_id": "MDM6Qm90MjYzODQwODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/1724?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stale%5Bbot%5D",
      "html_url": "https://github.com/apps/stale",
      "followers_url": "https://api.github.com/users/stale%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/stale%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/stale%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/stale%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/stale%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/stale%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/stale%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2018-11-15T10:09:54Z",
    "updated_at": "2018-11-15T10:09:54Z",
    "author_association": "NONE",
    "body": "There has been no new activity on this issue since it was marked as stale 7 days ago, so it is being automatically closed.  If you'd like help with this or a different problem, please open a new issue. Thanks!\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/438987381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/826016977",
    "html_url": "https://github.com/trufflesuite/truffle/issues/971#issuecomment-826016977",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/971",
    "id": 826016977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNjAxNjk3Nw==",
    "user": {
      "login": "gideongrinberg",
      "id": 49839886,
      "node_id": "MDQ6VXNlcjQ5ODM5ODg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/49839886?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gideongrinberg",
      "html_url": "https://github.com/gideongrinberg",
      "followers_url": "https://api.github.com/users/gideongrinberg/followers",
      "following_url": "https://api.github.com/users/gideongrinberg/following{/other_user}",
      "gists_url": "https://api.github.com/users/gideongrinberg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gideongrinberg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gideongrinberg/subscriptions",
      "organizations_url": "https://api.github.com/users/gideongrinberg/orgs",
      "repos_url": "https://api.github.com/users/gideongrinberg/repos",
      "events_url": "https://api.github.com/users/gideongrinberg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gideongrinberg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-24T01:59:49Z",
    "updated_at": "2021-04-24T01:59:49Z",
    "author_association": "NONE",
    "body": "Still an issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/826016977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

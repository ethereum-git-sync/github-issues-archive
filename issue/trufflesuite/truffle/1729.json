{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1729",
  "id": 412207162,
  "node_id": "MDU6SXNzdWU0MTIyMDcxNjI=",
  "number": 1729,
  "title": "Issue with same event name from two contracts",
  "user": {
    "login": "chrischip",
    "id": 15347031,
    "node_id": "MDQ6VXNlcjE1MzQ3MDMx",
    "avatar_url": "https://avatars.githubusercontent.com/u/15347031?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chrischip",
    "html_url": "https://github.com/chrischip",
    "followers_url": "https://api.github.com/users/chrischip/followers",
    "following_url": "https://api.github.com/users/chrischip/following{/other_user}",
    "gists_url": "https://api.github.com/users/chrischip/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chrischip/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chrischip/subscriptions",
    "organizations_url": "https://api.github.com/users/chrischip/orgs",
    "repos_url": "https://api.github.com/users/chrischip/repos",
    "events_url": "https://api.github.com/users/chrischip/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chrischip/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 990823235,
      "node_id": "MDU6TGFiZWw5OTA4MjMyMzU=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Contract",
      "name": "Contract",
      "color": "a1ea8f",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2019-02-20T01:54:18Z",
  "updated_at": "2020-03-11T17:53:51Z",
  "closed_at": "2020-03-11T17:53:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [X] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nWhen two different contracts have the same event name but different signature, Truffle-contract does not decodeLogs correctly.\r\n\r\n## Steps to Reproduce\r\nsimple contract code:\r\n\r\n```\r\npragma solidity ^0.5.0;\r\n\r\ncontract ContractA  {\r\n\r\n   event Approval(\r\n    address indexed _owner,\r\n    address indexed _approved,\r\n    uint256 indexed _tokenId\r\n  );\r\n    function testA() public {\r\n   \r\n         emit Approval(address(this), address(0), 1);\r\n    }\r\n}\r\ncontract ContractB  {\r\n \r\n   event Approval(\r\n     address indexed owner,\r\n    address indexed spender,\r\n    uint256  value\r\n  );\r\n\r\n    function TestFunctionNotOK(address contractA_Address) public{       \r\n        ContractA(contractA_Address).testA();     \r\n    }\r\n}\r\n```\r\nusing this code for Truffle-Test:\r\n```\r\nvar ContractB = artifacts.require(\"ContractB\");\r\nvar ContractA = artifacts.require(\"ContractA\");\r\n\r\ncontract('ContractB',  function(accounts) {\r\n\r\n  it(\"test EventB\",  function() {\r\n    return ContractB.deployed().then(async function(contractBInstance) {\r\n        const constractAInstance = await ContractA.deployed();\r\n\r\n        await contractBInstance.TestFunctionNotOK(constractAInstance.address);     \r\n    })\r\n  });\r\n});\r\n```\r\n\r\n\r\n## Expected Behavior\r\n\r\nExpect it to pass the test\r\n\r\n## Actual Results\r\n\r\nYou will see this error:\r\n\r\n> \r\n>    Error: TypeError: Cannot read property 'toString' of null Given value: \"null\"\r\n>       at Object.toBN (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\web3-utils\\src\\utils.js:64:1)\r\n>       at _convertNumber (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-contract\\lib\\reformat.js:20:1)\r\n>       at abiSegment.forEach (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-contract\\lib\\reformat.js:76:1)\r\n>       at Array.forEach (<anonymous>)\r\n>       at Function.numbers (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-contract\\lib\\reformat.js:51:1)\r\n>       at C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-contract\\lib\\utils.js:61:1\r\n>       at Array.map (<anonymous>)\r\n>       at Function.decodeLogs (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-contract\\lib\\utils.js:44:1)\r\n>       at Promise.receipt (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\truffle-contract\\lib\\handlers.js:98:1)\r\n>       at Promise.emit (C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\eventemitter3\\index.js:89:1)\r\n>       at C:\\Users\\chris\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\web3-eth\\~\\web3-core-method\\src\\index.js:353:1\r\n>       at process._tickCallback (internal/process/next_tick.js:68:7)\r\n\r\n\r\n## Environment\r\n\r\n* Operating System: win10\r\n* Ethereum client: ganache-cli\r\n* Truffle version (`truffle version`):\r\nTruffle v5.0.4 (core: 5.0.4)\r\nSolidity v0.5.0 (solc-js)\r\nNode v10.1.0\r\n* node version (`node --version`): v10.1.0\r\n* npm version (`npm --version`): 6.0.1\r\n",
  "closed_by": {
    "login": "eggplantzzz",
    "id": 14827965,
    "node_id": "MDQ6VXNlcjE0ODI3OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eggplantzzz",
    "html_url": "https://github.com/eggplantzzz",
    "followers_url": "https://api.github.com/users/eggplantzzz/followers",
    "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
    "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
    "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
    "repos_url": "https://api.github.com/users/eggplantzzz/repos",
    "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729/reactions",
    "total_count": 4,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 1,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/465707770",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-465707770",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 465707770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NTcwNzc3MA==",
    "user": {
      "login": "chrischip",
      "id": 15347031,
      "node_id": "MDQ6VXNlcjE1MzQ3MDMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15347031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrischip",
      "html_url": "https://github.com/chrischip",
      "followers_url": "https://api.github.com/users/chrischip/followers",
      "following_url": "https://api.github.com/users/chrischip/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrischip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrischip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrischip/subscriptions",
      "organizations_url": "https://api.github.com/users/chrischip/orgs",
      "repos_url": "https://api.github.com/users/chrischip/repos",
      "events_url": "https://api.github.com/users/chrischip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrischip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-20T18:53:47Z",
    "updated_at": "2019-02-20T18:53:47Z",
    "author_association": "NONE",
    "body": "Please note that this is not an uncommon scenario and might affect a lot of Dapp  implementations. Both ERC20 and ERC721 have the events \"Transfer\" and \"Approval\", both have a slightly signature (one parameter is indexed vs the other one is not). If a contract tries to invoke a function which utilize both ERC20 and ERC721 at the same time, truffle-contract will appears to fail (while the blockchain could successfully processed the transaction). ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/465707770/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/473499294",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-473499294",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 473499294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3MzQ5OTI5NA==",
    "user": {
      "login": "HardlyDifficult",
      "id": 14855515,
      "node_id": "MDQ6VXNlcjE0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HardlyDifficult",
      "html_url": "https://github.com/HardlyDifficult",
      "followers_url": "https://api.github.com/users/HardlyDifficult/followers",
      "following_url": "https://api.github.com/users/HardlyDifficult/following{/other_user}",
      "gists_url": "https://api.github.com/users/HardlyDifficult/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HardlyDifficult/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HardlyDifficult/subscriptions",
      "organizations_url": "https://api.github.com/users/HardlyDifficult/orgs",
      "repos_url": "https://api.github.com/users/HardlyDifficult/repos",
      "events_url": "https://api.github.com/users/HardlyDifficult/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HardlyDifficult/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-16T04:44:50Z",
    "updated_at": "2019-03-16T04:48:11Z",
    "author_association": "NONE",
    "body": "We just hit the same.  Because we interface with ERC20 and ERC721, we cannot rename the \"Transfer\" and \"Approval\" events as @chrischip pointed out.\r\n\r\nIs the work-around to migrate tests to not use Truffle anymore, e.g. making calls with web3 instead? Anything else I could try?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/473499294/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474097885",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-474097885",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 474097885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDA5Nzg4NQ==",
    "user": {
      "login": "HardlyDifficult",
      "id": 14855515,
      "node_id": "MDQ6VXNlcjE0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HardlyDifficult",
      "html_url": "https://github.com/HardlyDifficult",
      "followers_url": "https://api.github.com/users/HardlyDifficult/followers",
      "following_url": "https://api.github.com/users/HardlyDifficult/following{/other_user}",
      "gists_url": "https://api.github.com/users/HardlyDifficult/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HardlyDifficult/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HardlyDifficult/subscriptions",
      "organizations_url": "https://api.github.com/users/HardlyDifficult/orgs",
      "repos_url": "https://api.github.com/users/HardlyDifficult/repos",
      "events_url": "https://api.github.com/users/HardlyDifficult/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HardlyDifficult/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-18T20:57:04Z",
    "updated_at": "2019-03-18T20:57:04Z",
    "author_association": "NONE",
    "body": "I created another example of this issue:\r\nhttps://github.com/hardlydifficult/SolidityBugInvestigation_EventsWithTheSameName\r\nLet me know if there are any questions on this\r\n\r\nIt seems switching to the web3 API is not a viable workaround here (the request hangs instead of throws as error).\r\n\r\nThis example is very close to what we are trying to achieve, our contract implements the ERC721 standard (including the `Transfer` event) and is attempting to transfer a ERC20 token (which emits a different `Transfer` event).  \r\n\r\nPlease let me know if you have any suggestions, not sure how we should proceed here.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474097885/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474119819",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-474119819",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 474119819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDExOTgxOQ==",
    "user": {
      "login": "chrischip",
      "id": 15347031,
      "node_id": "MDQ6VXNlcjE1MzQ3MDMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15347031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrischip",
      "html_url": "https://github.com/chrischip",
      "followers_url": "https://api.github.com/users/chrischip/followers",
      "following_url": "https://api.github.com/users/chrischip/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrischip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrischip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrischip/subscriptions",
      "organizations_url": "https://api.github.com/users/chrischip/orgs",
      "repos_url": "https://api.github.com/users/chrischip/repos",
      "events_url": "https://api.github.com/users/chrischip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrischip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-18T22:05:39Z",
    "updated_at": "2019-03-18T22:05:39Z",
    "author_association": "NONE",
    "body": "I dive deep into the code and it seems the problem lies in the Web3 version provided. In my unit test I think web3 is instantiated by Truffle test, and in PRD it is instantiated by Drizzle.  I compared the Web3 version they (Truffle and Drizzle) used to the very current version of Web3, it seems that the issue were addressed in the latest Web3 (I didn't actually test it but the decodeLogs part of the code seems to be very different). I think once Truffle move to the new Web3 version, this will probably be resolved. Please correct me if I am wrong.\r\n\r\nCurrently that is nothing I could do more. I just catch that specific error, simply ignore it and assume that the transaction has been executed successfully.\r\n\r\nI struggle so much on the different versions of Web3, and also the providers, especially with subscriptions as HTTP polling seems to be taken out of Web3 1.0. Really hope there is a solution for this Web3 version hell.\r\n\r\n\r\n\r\n \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474119819/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474121797",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-474121797",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 474121797,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDEyMTc5Nw==",
    "user": {
      "login": "HardlyDifficult",
      "id": 14855515,
      "node_id": "MDQ6VXNlcjE0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HardlyDifficult",
      "html_url": "https://github.com/HardlyDifficult",
      "followers_url": "https://api.github.com/users/HardlyDifficult/followers",
      "following_url": "https://api.github.com/users/HardlyDifficult/following{/other_user}",
      "gists_url": "https://api.github.com/users/HardlyDifficult/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HardlyDifficult/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HardlyDifficult/subscriptions",
      "organizations_url": "https://api.github.com/users/HardlyDifficult/orgs",
      "repos_url": "https://api.github.com/users/HardlyDifficult/repos",
      "events_url": "https://api.github.com/users/HardlyDifficult/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HardlyDifficult/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-18T22:13:22Z",
    "updated_at": "2019-03-19T05:08:04Z",
    "author_association": "NONE",
    "body": "Good insight, thanks for sharing.  I believe Truffle is using Web3 beta 37... and the versions which came after included breaking changes that seem to be causing others issues.  It seems the general recommendation at the moment is to stay on beta 37 until the latest version stabilizes again.  I wonder what the latest is on that and if Truffle is considering an upgrade soon.\r\n\r\nIt seems the only path forward is to catch and ignore the error.  But I'm concerned that if the issue is Web3 specifically we may encounter problems in our dapp as well (vs just Truffle tests).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474121797/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474124365",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-474124365",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 474124365,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDEyNDM2NQ==",
    "user": {
      "login": "chrischip",
      "id": 15347031,
      "node_id": "MDQ6VXNlcjE1MzQ3MDMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15347031?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrischip",
      "html_url": "https://github.com/chrischip",
      "followers_url": "https://api.github.com/users/chrischip/followers",
      "following_url": "https://api.github.com/users/chrischip/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrischip/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrischip/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrischip/subscriptions",
      "organizations_url": "https://api.github.com/users/chrischip/orgs",
      "repos_url": "https://api.github.com/users/chrischip/repos",
      "events_url": "https://api.github.com/users/chrischip/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrischip/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-18T22:23:02Z",
    "updated_at": "2019-03-18T22:23:02Z",
    "author_association": "NONE",
    "body": "My client side from MetaMask + Drizzle definitely still having the same problem. I can only catch it and ignore it. Otherwise than the annoying error it doesn't seem to have any other side effect so far.....",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474124365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474480143",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-474480143",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 474480143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDQ4MDE0Mw==",
    "user": {
      "login": "HardlyDifficult",
      "id": 14855515,
      "node_id": "MDQ6VXNlcjE0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HardlyDifficult",
      "html_url": "https://github.com/HardlyDifficult",
      "followers_url": "https://api.github.com/users/HardlyDifficult/followers",
      "following_url": "https://api.github.com/users/HardlyDifficult/following{/other_user}",
      "gists_url": "https://api.github.com/users/HardlyDifficult/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HardlyDifficult/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HardlyDifficult/subscriptions",
      "organizations_url": "https://api.github.com/users/HardlyDifficult/orgs",
      "repos_url": "https://api.github.com/users/HardlyDifficult/repos",
      "events_url": "https://api.github.com/users/HardlyDifficult/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HardlyDifficult/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-19T17:24:36Z",
    "updated_at": "2019-03-19T17:24:36Z",
    "author_association": "NONE",
    "body": "I believe we found a workaround which will avoid the error completely, make the call using web3's `encodeFunctionCall` followed by `sendTransaction` (example below).\r\n\r\nI'm guessing this works since when making the call this way, web3 does not know the ABI for the rest of the contract and therefore cannot attempt to decode logs (which is where the failure occurs).\r\n\r\n```\r\nconst call = web3.eth.abi.encodeFunctionCall(\r\n  testContract.options.jsonInterface.find(\r\n    e => e.name == 'sendToken'\r\n  ),\r\n  [token.address, toAccount]\r\n)\r\nawait web3.eth.sendTransaction({\r\n  to: testContract.options.address,\r\n  data: call,\r\n  from: tokenOwner \r\n})\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474480143/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474972129",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-474972129",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 474972129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NDk3MjEyOQ==",
    "user": {
      "login": "HardlyDifficult",
      "id": 14855515,
      "node_id": "MDQ6VXNlcjE0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HardlyDifficult",
      "html_url": "https://github.com/HardlyDifficult",
      "followers_url": "https://api.github.com/users/HardlyDifficult/followers",
      "following_url": "https://api.github.com/users/HardlyDifficult/following{/other_user}",
      "gists_url": "https://api.github.com/users/HardlyDifficult/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HardlyDifficult/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HardlyDifficult/subscriptions",
      "organizations_url": "https://api.github.com/users/HardlyDifficult/orgs",
      "repos_url": "https://api.github.com/users/HardlyDifficult/repos",
      "events_url": "https://api.github.com/users/HardlyDifficult/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HardlyDifficult/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-20T18:27:37Z",
    "updated_at": "2019-03-20T18:27:37Z",
    "author_association": "NONE",
    "body": "I tested and this seems to still be an issue with Web3 beta 50.  So I opened a bug over there for investigation: https://github.com/ethereum/web3.js/issues/2542",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/474972129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481796378",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-481796378",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 481796378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTc5NjM3OA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-10T17:56:10Z",
    "updated_at": "2019-04-10T17:56:10Z",
    "author_association": "MEMBER",
    "body": "What an issue to find!\r\n\r\nWe'll have to look into this. Hopefully some investigation will identify next steps / workarounds / other remediations.\r\n\r\nThanks for raising this!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481796378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/509612327",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-509612327",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 509612327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTYxMjMyNw==",
    "user": {
      "login": "aliaksandr-adzinets",
      "id": 1880747,
      "node_id": "MDQ6VXNlcjE4ODA3NDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1880747?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aliaksandr-adzinets",
      "html_url": "https://github.com/aliaksandr-adzinets",
      "followers_url": "https://api.github.com/users/aliaksandr-adzinets/followers",
      "following_url": "https://api.github.com/users/aliaksandr-adzinets/following{/other_user}",
      "gists_url": "https://api.github.com/users/aliaksandr-adzinets/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aliaksandr-adzinets/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aliaksandr-adzinets/subscriptions",
      "organizations_url": "https://api.github.com/users/aliaksandr-adzinets/orgs",
      "repos_url": "https://api.github.com/users/aliaksandr-adzinets/repos",
      "events_url": "https://api.github.com/users/aliaksandr-adzinets/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aliaksandr-adzinets/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-09T11:56:01Z",
    "updated_at": "2019-07-09T11:56:01Z",
    "author_association": "NONE",
    "body": "I can confirm this issue on truffle@5.0.26. \r\n\r\nMy smart contract has a public method that, upon being called, issues Transfer/Approve events of both ERC20 and ERC721 implementations within the same transaction.\r\n\r\nThe only difference is that in my case it was an \"Out of gas\" error instead of the \"Cannot read property 'toString' of null\" error mentioned by the OP...\r\n\r\nAfter I renamed ERC721 events to Transfer721/Approve721, the error disappeared.\r\n\r\nHowever, using an external Web3 instance of v1.0.0-beta.55 hasn't helped a lot -- instead of getting an error as before, the transaction just stucks. So it looks like a Web3 issue, not a Truffle issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/509612327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/512830448",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-512830448",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 512830448,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMjgzMDQ0OA==",
    "user": {
      "login": "rotcivegaf",
      "id": 7088778,
      "node_id": "MDQ6VXNlcjcwODg3Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7088778?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rotcivegaf",
      "html_url": "https://github.com/rotcivegaf",
      "followers_url": "https://api.github.com/users/rotcivegaf/followers",
      "following_url": "https://api.github.com/users/rotcivegaf/following{/other_user}",
      "gists_url": "https://api.github.com/users/rotcivegaf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rotcivegaf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rotcivegaf/subscriptions",
      "organizations_url": "https://api.github.com/users/rotcivegaf/orgs",
      "repos_url": "https://api.github.com/users/rotcivegaf/repos",
      "events_url": "https://api.github.com/users/rotcivegaf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rotcivegaf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-18T14:05:49Z",
    "updated_at": "2019-07-18T14:05:49Z",
    "author_association": "NONE",
    "body": "You can try [this](https://github.com/trufflesuite/truffle/issues/2179#issuecomment-510701494)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/512830448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/556009521",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-556009521",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 556009521,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NjAwOTUyMQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-20T13:45:22Z",
    "updated_at": "2019-11-20T13:45:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "This should be resolved on the latest Truffle (currently 5.1.0). We are still left with a problem decoding both of the events but it will no longer error.\r\n\r\nIn the future at some point we are going to work on correctly decoding both events from the logs.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/556009521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/565433392",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-565433392",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 565433392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NTQzMzM5Mg==",
    "user": {
      "login": "knightlands",
      "id": 54715671,
      "node_id": "MDQ6VXNlcjU0NzE1Njcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/54715671?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knightlands",
      "html_url": "https://github.com/knightlands",
      "followers_url": "https://api.github.com/users/knightlands/followers",
      "following_url": "https://api.github.com/users/knightlands/following{/other_user}",
      "gists_url": "https://api.github.com/users/knightlands/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knightlands/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knightlands/subscriptions",
      "organizations_url": "https://api.github.com/users/knightlands/orgs",
      "repos_url": "https://api.github.com/users/knightlands/repos",
      "events_url": "https://api.github.com/users/knightlands/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knightlands/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-13T13:01:59Z",
    "updated_at": "2019-12-13T13:01:59Z",
    "author_association": "NONE",
    "body": "Truffle 5.1.3 issue is still there.\r\n\r\n`event Transfer(address indexed _from, address indexed _to, uint256 _tokenId);`  and \r\n`event Transfer(address indexed from, address indexed to, uint256 value);`\r\n\r\nwill not be parsed in the same transaction and will throw <b>Error: Returned values aren't valid, did it run Out of Gas?</b>",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/565433392/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/579918369",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-579918369",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 579918369,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3OTkxODM2OQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-29T19:24:34Z",
    "updated_at": "2020-01-29T19:24:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@knightlands Do you have a project and steps that I could use to reproduce this error?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/579918369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597779033",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1729#issuecomment-597779033",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1729",
    "id": 597779033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5Nzc3OTAzMw==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-11T17:53:50Z",
    "updated_at": "2020-03-11T17:53:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chrischip I think this problem may be fixed on the most recent Truffle (version 5.1.16). Let me know if you are still having this problem and I'll be happy to re-open this issue and try to help!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597779033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2390",
  "id": 493387186,
  "node_id": "MDU6SXNzdWU0OTMzODcxODY=",
  "number": 2390,
  "title": "truffleAssert problem",
  "user": {
    "login": "Aleione",
    "id": 51761861,
    "node_id": "MDQ6VXNlcjUxNzYxODYx",
    "avatar_url": "https://avatars.githubusercontent.com/u/51761861?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Aleione",
    "html_url": "https://github.com/Aleione",
    "followers_url": "https://api.github.com/users/Aleione/followers",
    "following_url": "https://api.github.com/users/Aleione/following{/other_user}",
    "gists_url": "https://api.github.com/users/Aleione/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Aleione/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Aleione/subscriptions",
    "organizations_url": "https://api.github.com/users/Aleione/orgs",
    "repos_url": "https://api.github.com/users/Aleione/repos",
    "events_url": "https://api.github.com/users/Aleione/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Aleione/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2019-09-13T15:27:36Z",
  "updated_at": "2019-11-06T19:05:16Z",
  "closed_at": "2019-11-06T19:05:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi,\r\n\r\ni have a problem with truffleAssert during truffle test. On local ganache blockchain test is passed because revert string is the same of that indicate in javascript test code. When i run test with the same code on ropsten using truffle-hdwallet-provider module, it returns this error:\r\n \r\nAssertionError: Expected to fail with SafeMath: subtraction overflow, but failed with: StatusError: Transaction: 0x9b3b35d6d42be4c8fb17e8e7c540a4090a1d36e0ac7b60f5888662b3c9d19385 exited with an error (status 0).\r\n     Please check that the transaction:\r\n     - satisfies all conditions set by Solidity `require` statements.\r\n     - does not trigger a Solidity `revert` statement.\r\n\r\nIt seems that revert error string is not that indicated in solidity code but a transaction error generic.\r\nHow can i fix this, please?\r\n\r\nThanks",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/532292829",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-532292829",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 532292829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjI5MjgyOQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-17T16:16:45Z",
    "updated_at": "2019-09-17T16:16:45Z",
    "author_association": "MEMBER",
    "body": "Hi @Aleione, thanks for raising this! We'll triage this and get back to you as soon as we can!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/532292829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/532793691",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-532793691",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 532793691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjc5MzY5MQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-18T17:50:33Z",
    "updated_at": "2019-09-19T17:06:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "This sounds like it might be a problem with truffle-assertions rather than Truffle; @rkalis, do you know anything about this?  I do have to wonder whether truffle-assertions may be relying on special Ganache behavior here (I don't know anything about truffle-assertions' internals); providing revert strings for transactions (as opposed to calls) is nonstandard Ganache behavior that won't occur with other clients.  Truffle determines revert strings in other cases by rerunning the transaction as a call, but I don't know whether truffle-assertions is purely built on top of Truffle or whether it might go a little more low-level and get the revert strings directly from the Ganache error.  In the latter case, this will have problems with other clients.  Anyway, like I said, I'm hoping @rkalis can provide some clarity here.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/532793691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/532977372",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-532977372",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 532977372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjk3NzM3Mg==",
    "user": {
      "login": "rkalis",
      "id": 9142187,
      "node_id": "MDQ6VXNlcjkxNDIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9142187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkalis",
      "html_url": "https://github.com/rkalis",
      "followers_url": "https://api.github.com/users/rkalis/followers",
      "following_url": "https://api.github.com/users/rkalis/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkalis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkalis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkalis/subscriptions",
      "organizations_url": "https://api.github.com/users/rkalis/orgs",
      "repos_url": "https://api.github.com/users/rkalis/repos",
      "events_url": "https://api.github.com/users/rkalis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkalis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T05:50:37Z",
    "updated_at": "2019-09-19T05:50:37Z",
    "author_association": "MEMBER",
    "body": "Hey @haltman-at, thanks for the ping.\r\n\r\n[This](https://github.com/rkalis/truffle-assertions/blob/master/index.js#L146-L162) is the function in `truffle-assertions` that asserts a revert. [This](https://github.com/rkalis/truffle-assertions#truffleassertfailsasyncfn-errortype-reason-message) is the documentation for the function.\r\n\r\nThe function takes a Promise produced by a contract function on a TruffleContract instance. It then asserts that the Promise is rejected, and checks the rejection message (which includes the reason string when used with Ganache / ganache-cli). But when using public networks like Ropsten, the error is like in the issue description, and doesn't include the reason string:\r\n```\r\nStatusError: Transaction: 0x9b3b35d6d42be4c8fb17e8e7c540a4090a1d36e0ac7b60f5888662b3c9d19385 exited with an error (status 0).\r\n```\r\n\r\nYou said that Truffle determines the revert reason string in those cases by rerunning the tx as a call. So to make use of that I should extend the `.fails()` function so that it reruns the tx as a call when it receives a `StatusError` to determine the reason string? Or is there something baked into Truffle that I can use for that?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/532977372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/533226633",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-533226633",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 533226633,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzIyNjYzMw==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T17:16:47Z",
    "updated_at": "2019-09-19T17:16:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, I'm not the expert here; @eggplantzzz would know more I think.  But I think if you're doing things by means of Truffle, you ought to be able to make use of its doing that rather than having to do it yourself.  Except this might be quite troublesome because I think this gets thrown in an exception and it may not be a proper `Error` object and extracting it may require hackery?  Like I said, this is about the limit of my knowledge (at least offhand), hoping @eggplantzzz or someone can elaborate.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/533226633/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/535146875",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-535146875",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 535146875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNTE0Njg3NQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-25T18:16:24Z",
    "updated_at": "2019-09-25T18:16:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @cgewecke, do you happen to know offhand if Truffle provides a way for truffle-assertions to get at the revert string for this?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/535146875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/535167104",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-535167104",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 535167104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNTE2NzEwNA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-25T19:06:16Z",
    "updated_at": "2019-09-25T20:43:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "@eggplantzzz (Just speculating here..)\r\n\r\nThe truffleAssert code LGTM. I suspect this might be a bug in the way TC handles reason fetching from geth-like clients when gas estimation is enabled. There's a related issue at [ganache-core 480][2] because their behavior became more geth-like last month.\r\n\r\n@Aleione is using Ropsten via HDWalletProvider.\r\n+ There are reason fetching tests for geth at truffle/contract which pass [here][1]\r\n+ They don't work if gas estimation is enabled because Geth errors on revert instead of returning an estimate and as written TC [passes 0 gas][3] for that case. (That design isn't great -mea culpa). \r\n+ The 'estimate' error does not include the call return data IIRC, so you can't trivially extract the reason there.\r\n\r\nA quick test for this hypothesis would be: does the reason get fetched from Ropsten when you fund the tx with an explicit gas value (like TC's unit test)?\r\n\r\nI don't know why this isn't OOG tbh.\r\n\r\n[1]: https://github.com/trufflesuite/truffle/blob/develop/packages/contract/test/methods.js#L465-L486\r\n[2]: https://github.com/trufflesuite/ganache-core/issues/480\r\n[3]: https://github.com/trufflesuite/truffle/blob/develop/packages/contract/lib/execute.js#L19-L46",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/535167104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/537608248",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-537608248",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 537608248,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzYwODI0OA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-02T17:54:53Z",
    "updated_at": "2019-10-02T17:54:53Z",
    "author_association": "MEMBER",
    "body": "Hm so what do we do here? @haltman-at says that this is a truffle-assertions issue, not a Truffle issue, which I'm inclined to believe... although there seems to be more that Truffle could do to make truffle-assertions' life easier?\r\n\r\nThoughts for resolving this, anyone?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/537608248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/537635294",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-537635294",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 537635294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzYzNTI5NA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-02T19:05:01Z",
    "updated_at": "2019-10-02T19:05:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "> does the reason get fetched from Ropsten when you fund the tx with an explicit gas value (like [TC's unit test](https://github.com/trufflesuite/truffle/blob/develop/packages/contract/test/methods.js#L470))\r\n\r\n@gnidan My belief is that's a reasonable test of whether or not it's a Truffle gas estimation error handling problem. If the reason **is fetched** - it's Truffle's problem.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/537635294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/537851458",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-537851458",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 537851458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzg1MTQ1OA==",
    "user": {
      "login": "rkalis",
      "id": 9142187,
      "node_id": "MDQ6VXNlcjkxNDIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9142187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkalis",
      "html_url": "https://github.com/rkalis",
      "followers_url": "https://api.github.com/users/rkalis/followers",
      "following_url": "https://api.github.com/users/rkalis/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkalis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkalis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkalis/subscriptions",
      "organizations_url": "https://api.github.com/users/rkalis/orgs",
      "repos_url": "https://api.github.com/users/rkalis/repos",
      "events_url": "https://api.github.com/users/rkalis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkalis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-03T08:49:33Z",
    "updated_at": "2019-10-03T08:49:33Z",
    "author_association": "MEMBER",
    "body": "Hmm. I did some digging into this, and tested some of the things mentioned here. Doing so, I noticed though that this actually just seems to work out of the box.\r\n\r\nConsidering the following ([source](https://github.com/rkalis/truffle-assertions/blob/master/docs/kalis-me-tutorial-code/test/test-reverts.test.js#L26-L29)): \r\n```js\r\nawait truffleAssert.reverts(\r\n  casino.bet(betNumber, { from: bettingAccount, value: betSize }),\r\n  \"Bet amount can not exceed max bet size\"\r\n);\r\n```\r\n\r\nWhen following these steps in my [tutorial code project](https://github.com/rkalis/truffle-assertions/tree/master/docs/kalis-me-tutorial-code):\r\n1. `truffle compile`\r\n2. `truffle migrate --network rinkeby` or `truffle migrate --network goerli` or `truffle migrate --network ropsten`\r\n3. `truffle test --network rinkeby` or `truffle test --network goerli` or `truffle test --network ropsten`\r\n\r\nAll tests pass\r\n```\r\n  Contract: Casino\r\n    ✓ should not be able to bet more than max bet (15417ms)\r\n    ✓ should not be able to bet without sending ether (14403ms)\r\n```\r\n\r\nThis is without specifying any additional gas parameter, just out of the box. It also works fine when using a gas parameter, but it doesn't seem to matter.\r\n\r\n@Aleione do you have a repository with the code you are using so we can try to reproduce the behaviour you're experiencing, as I can't reproduce it with my own tests.\r\n\r\n## Environment\r\n* Operating System: macOS 10.14.4\r\n* Truffle version: 5.0.38\r\n* node version: 11.15.0\r\n* npm version: 6.9.0\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/537851458/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/550452735",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-550452735",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 550452735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ1MjczNQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T19:00:02Z",
    "updated_at": "2019-11-06T19:00:02Z",
    "author_association": "MEMBER",
    "body": "@rkalis our ticket processing process says it's time to close this from no response, but want to leave it up to you... what do we do here, do you think?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/550452735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/550454159",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-550454159",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 550454159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ1NDE1OQ==",
    "user": {
      "login": "rkalis",
      "id": 9142187,
      "node_id": "MDQ6VXNlcjkxNDIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9142187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkalis",
      "html_url": "https://github.com/rkalis",
      "followers_url": "https://api.github.com/users/rkalis/followers",
      "following_url": "https://api.github.com/users/rkalis/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkalis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkalis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkalis/subscriptions",
      "organizations_url": "https://api.github.com/users/rkalis/orgs",
      "repos_url": "https://api.github.com/users/rkalis/repos",
      "events_url": "https://api.github.com/users/rkalis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkalis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T19:03:27Z",
    "updated_at": "2019-11-06T19:03:27Z",
    "author_association": "MEMBER",
    "body": "Haven't heard back from @Aleione, and I couldn't reproduce the issue without their response, so closing is fine by me. It can always be reopened with new information in the future.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/550454159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/550454911",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2390#issuecomment-550454911",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2390",
    "id": 550454911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ1NDkxMQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T19:05:16Z",
    "updated_at": "2019-11-06T19:05:16Z",
    "author_association": "MEMBER",
    "body": "Sounds good, thanks @rkalis! Doing that!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/550454911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

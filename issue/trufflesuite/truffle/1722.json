{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1722",
  "id": 411258329,
  "node_id": "MDU6SXNzdWU0MTEyNTgzMjk=",
  "number": 1722,
  "title": "public mapping getter behaves unexpectedly in truffle test ",
  "user": {
    "login": "ryokomy",
    "id": 6007453,
    "node_id": "MDQ6VXNlcjYwMDc0NTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6007453?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ryokomy",
    "html_url": "https://github.com/ryokomy",
    "followers_url": "https://api.github.com/users/ryokomy/followers",
    "following_url": "https://api.github.com/users/ryokomy/following{/other_user}",
    "gists_url": "https://api.github.com/users/ryokomy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ryokomy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ryokomy/subscriptions",
    "organizations_url": "https://api.github.com/users/ryokomy/orgs",
    "repos_url": "https://api.github.com/users/ryokomy/repos",
    "events_url": "https://api.github.com/users/ryokomy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ryokomy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2019-02-18T00:41:25Z",
  "updated_at": "2019-04-03T17:54:44Z",
  "closed_at": "2019-04-03T17:54:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI wrote a test which reads public mapping.  \r\nBut it failed with error `xx is not a function`.  \r\nI confirmed that there was the function in ABI, and I could access the mapping from `truffle console`.\r\nThis happens only when I use `truffle test`.\r\nI also confirmed that I could access a public address variable.\r\n\r\n## Steps to Reproduce\r\n\r\n- solidity file\r\n``` \r\nstruct UserInfo {\r\n    uint16 class;\r\n    uint256 balance;\r\n    bool exists;\r\n}\r\nmapping(uint256 => UserInfo) userIdToUserInfo;\r\n```\r\n\r\n- test javascript\r\n```\r\nconsole.log(await contract.userIdToClassId(1))\r\n```\r\n\r\n## Expected Behavior\r\nreturn UserInfo\r\n\r\n## Actual Results\r\nfails with `TypeError:  contract.userIdToUserInfo is not a function`\r\n\r\n## Environment\r\n\r\n* Operating System: macOS High Sierra Version 10.13.6\r\n* Ethereum client: Ganache Version 1.1.0\r\n* Truffle version (`truffle version`): Truffle v5.0.4 (core: 5.0.4), Solidity - 0.5.4 (solc-js)\r\n* node version (`node --version`): v10.11.0\r\n* npm version (`npm --version`): 6.4.1\r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/466069388",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1722#issuecomment-466069388",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722",
    "id": 466069388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2NjA2OTM4OA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-21T16:35:50Z",
    "updated_at": "2019-02-21T16:35:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @ryokomy, if you want to have those variables available like this you either need to declare them \"public\" or create getters for them in the contract. Let me know how it goes.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/466069388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/479593884",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1722#issuecomment-479593884",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1722",
    "id": 479593884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTU5Mzg4NA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-03T17:54:43Z",
    "updated_at": "2019-04-03T17:54:43Z",
    "author_association": "MEMBER",
    "body": "@ryokomy have you figured this out? I'm closing this for issue maintenance, but feel free to comment and we'll reopen. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/479593884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2820",
  "id": 562438089,
  "node_id": "MDU6SXNzdWU1NjI0MzgwODk=",
  "number": 2820,
  "title": "Truffle Decoder's second parameter of dependent contracts should be optional",
  "user": {
    "login": "adrianmcli",
    "id": 943555,
    "node_id": "MDQ6VXNlcjk0MzU1NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/943555?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adrianmcli",
    "html_url": "https://github.com/adrianmcli",
    "followers_url": "https://api.github.com/users/adrianmcli/followers",
    "following_url": "https://api.github.com/users/adrianmcli/following{/other_user}",
    "gists_url": "https://api.github.com/users/adrianmcli/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adrianmcli/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adrianmcli/subscriptions",
    "organizations_url": "https://api.github.com/users/adrianmcli/orgs",
    "repos_url": "https://api.github.com/users/adrianmcli/repos",
    "events_url": "https://api.github.com/users/adrianmcli/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adrianmcli/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-02-10T09:42:21Z",
  "updated_at": "2020-03-20T20:31:36Z",
  "closed_at": "2020-03-20T20:31:36Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Calling this:\r\n\r\n```js\r\nconst decoder = await Decoder.forContractInstance(truffleContractInstance);\r\n```\r\n\r\nProduces a cryptic error:\r\n\r\n```js\r\nTypeError: Cannot read property 'includes' of undefined\r\n    at index.js:374\r\n    at step (index.js:261)\r\n    at Object.next (index.js:192)\r\n    at index.js:164\r\n...\r\n```\r\n\r\nIt is only when you pass in an empty array as the second parameter does the error go away:\r\n\r\n```js\r\nconst decoder = await Decoder.forContractInstance(truffleContractInstance, []);\r\n```",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/584893617",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-584893617",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 584893617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDg5MzYxNw==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T22:43:30Z",
    "updated_at": "2020-02-11T22:52:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, is the behavior you intend that it should work the same as if an empty array was passed?  Hm.\r\n\r\nLet me tell you what's planned for this right now.  The plan is that that final argument should be able to be a number of things allowing for all relevant contracts to be found -- not just a straight list of them, but also say a resolver or config object that's able to find them.  But that relies on some functionality that isn't implemented yet.\r\n\r\nAnyway, I guess leaving it out having it act the same as `[]` makes sense, but I do want to avoid accidentally introducing some sort of inconsistency there.\r\n\r\nEdit: Just to clarify, that is the behavior you want, that it should act the same as passing `[]`?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/584893617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585327636",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-585327636",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 585327636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTMyNzYzNg==",
    "user": {
      "login": "adrianmcli",
      "id": 943555,
      "node_id": "MDQ6VXNlcjk0MzU1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/943555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adrianmcli",
      "html_url": "https://github.com/adrianmcli",
      "followers_url": "https://api.github.com/users/adrianmcli/followers",
      "following_url": "https://api.github.com/users/adrianmcli/following{/other_user}",
      "gists_url": "https://api.github.com/users/adrianmcli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adrianmcli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adrianmcli/subscriptions",
      "organizations_url": "https://api.github.com/users/adrianmcli/orgs",
      "repos_url": "https://api.github.com/users/adrianmcli/repos",
      "events_url": "https://api.github.com/users/adrianmcli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adrianmcli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-12T17:40:47Z",
    "updated_at": "2020-02-12T17:40:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Forgive me for a second here as this is a bit subjective and a bit of a tangential rant, but I've never been a fan of APIs that have a bunch of non-[named parameters](https://en.wikipedia.org/wiki/Named_parameter). Having to know what the 1st, 2nd, 3rd argument is causes confusion and makes things a living hell whenever the API changes.\r\n\r\nI'm not sure if it's too late, but I much prefer an API that allows you to simulate named parameters with an object (as it is much more clear and explicit):\r\n\r\n```js\r\nconst decoder = await Decoder.forContractInstance({\r\n  instance: truffleContractInstance,\r\n  dependentArtifacts: [],\r\n  resolver: myResolverFn\r\n});\r\n```\r\n\r\nThat being said, I'd be happy to accept a simple change to have an empty array as default:\r\n\r\n```ts\r\nexport async function forContractInstance(\r\n  contract: ContractInstanceObject,\r\n  artifacts: Artifact[] = []\r\n): Promise<ContractInstanceDecoder> {\r\n  return await forContractAt(contract.constructor, contract.address, artifacts);\r\n}\r\n```\r\n\r\nBasically just changing `artifacts: Artifact[]` to `artifacts: Artifact[] = []`, it should be a very simple fix.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585327636/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585354051",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-585354051",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 585354051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTM1NDA1MQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-12T18:36:09Z",
    "updated_at": "2020-02-12T18:36:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Good news, my current plan is actually to handle the last argument by having it be an object specifying what it is!  (Not going to redo the other arguments though, that'd be a breaking change...)  With the existing form left in for compatibility.  So, yeah, I guess having it default to `[]` is a change I could make as well...",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585354051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585355862",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-585355862",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 585355862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTM1NTg2Mg==",
    "user": {
      "login": "adrianmcli",
      "id": 943555,
      "node_id": "MDQ6VXNlcjk0MzU1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/943555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adrianmcli",
      "html_url": "https://github.com/adrianmcli",
      "followers_url": "https://api.github.com/users/adrianmcli/followers",
      "following_url": "https://api.github.com/users/adrianmcli/following{/other_user}",
      "gists_url": "https://api.github.com/users/adrianmcli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adrianmcli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adrianmcli/subscriptions",
      "organizations_url": "https://api.github.com/users/adrianmcli/orgs",
      "repos_url": "https://api.github.com/users/adrianmcli/repos",
      "events_url": "https://api.github.com/users/adrianmcli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adrianmcli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-12T18:40:18Z",
    "updated_at": "2020-02-12T18:40:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "That is good news!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585355862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585442310",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-585442310",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 585442310,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTQ0MjMxMA==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-12T22:07:59Z",
    "updated_at": "2020-02-12T22:07:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, looking at the two issues you submitted, the conclusion I'm coming to is that I didn't really optimize this for convenience in this just-a-simple-contract case, where there are no external structs or enums or contract types you need to deal with, no inheritance, you're not decoding events of unknown provenance, etc.  I was really focused on the opposite case (which I realize is *not* exactly convenient at the moment, but I was planning to make it so eventually).  But, I guess I can largely address that by the means you suggest, of making that argument optional and treating it as `[]`.  So, whew, problem avoided there.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585442310/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585557669",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-585557669",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 585557669,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTU1NzY2OQ==",
    "user": {
      "login": "adrianmcli",
      "id": 943555,
      "node_id": "MDQ6VXNlcjk0MzU1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/943555?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adrianmcli",
      "html_url": "https://github.com/adrianmcli",
      "followers_url": "https://api.github.com/users/adrianmcli/followers",
      "following_url": "https://api.github.com/users/adrianmcli/following{/other_user}",
      "gists_url": "https://api.github.com/users/adrianmcli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adrianmcli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adrianmcli/subscriptions",
      "organizations_url": "https://api.github.com/users/adrianmcli/orgs",
      "repos_url": "https://api.github.com/users/adrianmcli/repos",
      "events_url": "https://api.github.com/users/adrianmcli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adrianmcli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-13T05:26:30Z",
    "updated_at": "2020-02-13T05:26:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yay, thanks @haltman-at !",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/585557669/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/601897829",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2820#issuecomment-601897829",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2820",
    "id": 601897829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMTg5NzgyOQ==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-20T20:31:36Z",
    "updated_at": "2020-03-20T20:31:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oh, huh, why is this still open?  Closing.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/601897829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

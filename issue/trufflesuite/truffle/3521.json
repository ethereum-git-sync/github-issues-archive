{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3521",
  "id": 741411180,
  "node_id": "MDU6SXNzdWU3NDE0MTExODA=",
  "number": 3521,
  "title": "Artifacts are from different compiler runs | Contracts compiling more than once",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1675041796,
      "node_id": "MDU6TGFiZWwxNjc1MDQxNzk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority3%20%F0%9F%94%A7",
      "name": "priority3 ðŸ”§",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "eggplantzzz",
    "id": 14827965,
    "node_id": "MDQ6VXNlcjE0ODI3OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eggplantzzz",
    "html_url": "https://github.com/eggplantzzz",
    "followers_url": "https://api.github.com/users/eggplantzzz/followers",
    "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
    "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
    "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
    "repos_url": "https://api.github.com/users/eggplantzzz/repos",
    "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-11-12T08:58:37Z",
  "updated_at": "2023-02-02T19:17:11Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n1-  I have `Artifacts are from different compiler runs` when trying to migrate my contracts.\r\nWhen I try to compile all the contracts I see:\r\n2- some contracts are double-compiling and\r\n3- some of OZ imports are double-compiling and their paths are messed up with slashed and backslashes\r\n4- when I run `truffle compile`, it compiles all my contracts (not OZ) again, even when there are no changes there\r\n\r\n```\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/GSN/Context.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/Initializable.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/access/AccessControl.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/access/Ownable.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/math/SafeMath.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/token/ERC20/ERC20.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/token/ERC20/ERC20Burnable.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/token/ERC20/SafeERC20.sol\r\nCompiling @openzeppelin/contracts-ethereum-package/contracts/utils/ReentrancyGuard.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\GSN\\Context.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\Initializable.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\math\\SafeMath.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\token\\ERC20\\ERC20.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\token\\ERC20\\IERC20.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\utils\\Address.sol\r\nCompiling @openzeppelin\\contracts-ethereum-package\\contracts\\utils\\EnumerableSet.sol\r\nCompiling .\\contracts\\Migrations.sol\r\nCompiling .\\contracts\\Modules\\AddressProvider.sol\r\nCompiling .\\contracts\\Modules\\SchoolModule.sol\r\nCompiling .\\contracts\\Modules\\OracleModule.sol\r\nCompiling .\\contracts\\Modules\\ClassModule.sol\r\nCompiling .\\contracts\\City\\City.sol\r\nCompiling .\\contracts\\inc\\Base.sol\r\nCompiling .\\contracts\\inc\\CoreLibrary.sol\r\nCompiling .\\contracts\\Modules\\AddressProvider.sol\r\nCompiling .\\contracts\\Modules\\SchoolModule.sol\r\nCompiling .\\contracts\\Modules\\OracleModule.sol\r\nCompiling .\\contracts\\Modules\\ClassModule.sol\r\nCompiling .\\contracts\\City\\City.sol\r\nCompiling .\\contracts\\inc\\Base.sol\r\nCompiling .\\contracts\\inc\\CoreLibrary.sol\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System:  Win10 x64\r\n* Ethereum client:  Ganache v2.5.4\r\n* Truffle version (`truffle version`): \r\nTruffle v5.1.52 (core: 5.1.52)\r\nSolidity - 0.7.4 (solc-js)\r\nNode v12.18.4\r\nWeb3.js v1.2.9\r\n* node version (`node --version`): v12.18.4\r\n* npm version (`npm --version`): 6.14.6\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/729876704",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3521#issuecomment-729876704",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521",
    "id": 729876704,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTg3NjcwNA==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-18T18:38:50Z",
    "updated_at": "2020-11-18T18:38:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, thanks for the report!  Do you have an example repo we could check out that would allow us to reproduce this, or other instructions we could follow to create a reproduction example?  Thank you!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/729876704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/730377946",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3521#issuecomment-730377946",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521",
    "id": 730377946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMDM3Nzk0Ng==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-19T13:35:06Z",
    "updated_at": "2020-11-19T13:35:06Z",
    "author_association": "NONE",
    "body": "Hi, @haltman-at will try to upload a testing repo to try it.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/730377946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/730464198",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3521#issuecomment-730464198",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521",
    "id": 730464198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMDQ2NDE5OA==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-19T15:49:06Z",
    "updated_at": "2020-11-19T15:50:13Z",
    "author_association": "NONE",
    "body": "@haltman-at I uploaded this sample https://github.com/drbullock/TruffleTest\r\n\r\nI have added now Interfaces to my original project now and it looks like it is partially fixed, but it is still recompiling the Interfaces.\r\n\r\nIn the meantime, from the test repo (only for compiling) here are the logs:\r\n\r\n**Fresh compile:**\r\n\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling @openzeppelin/contracts-upgradeable/token/ERC20/ERC20BurnableUpgradeable.sol\r\n> Compiling @openzeppelin/contracts-upgradeable/token/ERC20/ERC20Upgradeable.sol\r\n> Compiling @openzeppelin\\contracts-upgradeable\\GSN\\ContextUpgradeable.sol\r\n> Compiling @openzeppelin\\contracts-upgradeable\\math\\SafeMathUpgradeable.sol\r\n> Compiling @openzeppelin\\contracts-upgradeable\\proxy\\Initializable.sol\r\n> Compiling @openzeppelin\\contracts-upgradeable\\token\\ERC20\\ERC20Upgradeable.sol\r\n> Compiling @openzeppelin\\contracts-upgradeable\\token\\ERC20\\IERC20Upgradeable.sol\r\n> Compiling @openzeppelin\\contracts-upgradeable\\utils\\AddressUpgradeable.sol\r\n> Compiling .\\contracts\\Migrations.sol\r\n> Compiling .\\contracts\\inc\\Base.sol\r\n> Compiling .\\contracts\\interfaces\\IToken.sol\r\n> Compiling .\\contracts\\tokens\\AToken.sol\r\n> Compiling .\\contracts\\tokens\\BToken.sol\r\n> Compiling .\\contracts\\inc\\Base.sol\r\n> Compiling .\\contracts\\interfaces\\IToken.sol\r\n> Artifacts written to C:\\TruffleTest\\build\\contracts\r\n> Compiled successfully using:\r\n   - solc: 0.7.4+commit.3f05b770.Emscripten.clang\r\n```\r\n\r\n**Next compiles:**\r\n\r\n```\r\nCompiling your contracts...\r\n===========================\r\n> Compiling .\\contracts\\inc\\Base.sol\r\n> Compiling .\\contracts\\interfaces\\IToken.sol\r\n> Artifacts written to C:\\TruffleTest\\build\\contracts\r\n> Compiled successfully using:\r\n   - solc: 0.7.4+commit.3f05b770.Emscripten.clang\r\n```\r\n\r\n**Truffle Version:**\r\n\r\n```\r\nTruffle v5.1.53 (core: 5.1.53)\r\nSolidity - 0.7.4 (solc-js)\r\nNode v12.18.4\r\nWeb3.js v1.2.9\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/730464198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/737442028",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3521#issuecomment-737442028",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3521",
    "id": 737442028,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNzQ0MjAyOA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-02T19:20:41Z",
    "updated_at": "2020-12-02T19:20:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@drbullock Thanks very much for the report and the repro repo! We'll dig into this and see if we can see what's going on here.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/737442028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

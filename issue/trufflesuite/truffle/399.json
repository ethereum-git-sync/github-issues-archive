{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/399",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/399",
  "id": 227375114,
  "node_id": "MDU6SXNzdWUyMjczNzUxMTQ=",
  "number": 399,
  "title": "Parsing issue with multiple spaces",
  "user": {
    "login": "illuzen",
    "id": 6833917,
    "node_id": "MDQ6VXNlcjY4MzM5MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6833917?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/illuzen",
    "html_url": "https://github.com/illuzen",
    "followers_url": "https://api.github.com/users/illuzen/followers",
    "following_url": "https://api.github.com/users/illuzen/following{/other_user}",
    "gists_url": "https://api.github.com/users/illuzen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/illuzen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/illuzen/subscriptions",
    "organizations_url": "https://api.github.com/users/illuzen/orgs",
    "repos_url": "https://api.github.com/users/illuzen/repos",
    "events_url": "https://api.github.com/users/illuzen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/illuzen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 971680115,
      "node_id": "MDU6TGFiZWw5NzE2ODAxMTU=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Console",
      "name": "Console",
      "color": "fbca04",
      "default": false,
      "description": ""
    },
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    },
    {
      "id": 1675041796,
      "node_id": "MDU6TGFiZWwxNjc1MDQxNzk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority3%20%F0%9F%94%A7",
      "name": "priority3 ðŸ”§",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-05-09T13:54:26Z",
  "updated_at": "2022-04-22T00:03:26Z",
  "closed_at": "2022-04-22T00:03:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nNot sure when this was introduced, but in the yargs-parser node module, we now break when double spaces are introduced between certain tokens, so \r\n\r\n`MultiSigWallet.new(web3.eth.accounts, 3 ).then(function(i){wallet = i}) \r\n`\r\nis fine, but\r\n\r\n`MultiSigWallet.new(web3.eth.accounts, 3 ).then(function(i){wallet  = i})\r\n`\r\nthrows \r\n\r\n> TypeError: Cannot read property 'match' of undefined\r\n>     at parse (/usr/local/lib/node_modules/truffle/node_modules/yargs-parser/index.js:122:12)\r\n>     at Function.Parser.detailed (/usr/local/lib/node_modules/truffle/node_modules/yargs-parser/index.js:756:10)\r\n>     at parseArgs (/usr/local/lib/node_modules/truffle/node_modules/yargs/yargs.js:873:27)\r\n>     at Object.Yargs.self.parse (/usr/local/lib/node_modules/truffle/node_modules/yargs/yargs.js:499:18)\r\n>     at Command.getCommand (/usr/local/lib/node_modules/truffle/lib/command.js:19:24)\r\n>     at TruffleInterpreter.interpret (/usr/local/lib/node_modules/truffle/lib/repl.js:104:20)\r\n>     at bound (domain.js:280:14)\r\n>     at REPLServer.runBound [as eval] (domain.js:293:12)\r\n>     at REPLServer.onLine (repl.js:536:10)\r\n>     at emitOne (events.js:96:13)\r\n>     at REPLServer.emit (events.js:191:7)\r\n>     at REPLServer.Interface._onLine (readline.js:238:10)\r\n>     at REPLServer.Interface._line (readline.js:581:8)\r\n>     at REPLServer.Interface._ttyWrite (readline.js:860:14)\r\n>     at REPLServer.self._ttyWrite (repl.js:609:7)\r\n>     at ReadStream.onkeypress (readline.js:117:10)\r\n> \r\n\r\nPrinting out args from yargs-parser.parse shows it is tokenizing funny\r\n\r\n```\r\n[ 'MultiSigWallet.new(web3.eth.accounts,',\r\n  '3',\r\n  ').then(function(i){wallet',\r\n  ,                     // <--------- empty string is token?\r\n  '=',\r\n  'i})' ]\r\n\r\n\r\n```\r\nsorry I don't have time right now to debug further, it's not critical, just spent half an hour chasing it down. It might be an issue in yargs-parser?\r\n\r\n##  to Reproduce\r\n\r\ntruffle console\r\n\r\n(dev)> MyContract.new(args).then(function(i){ c  = i})\r\n## Expected Behavior\r\n\r\njust eat the extra space\r\n\r\n## Actual Results\r\n\r\ntrys to consume empty string as a token\r\n\r\n## Environment\r\n\r\n* Operating System: OSX\r\n* Truffle version: Truffle v3.1.2\r\n* Ethereum client: EthereumJS TestRPC v3.0.3\r\n* node version: v7.7.4\r\n* npm version: 4.1.2",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/399/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/361496157",
    "html_url": "https://github.com/trufflesuite/truffle/issues/399#issuecomment-361496157",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399",
    "id": 361496157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTQ5NjE1Nw==",
    "user": {
      "login": "bingtimren",
      "id": 2824513,
      "node_id": "MDQ6VXNlcjI4MjQ1MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2824513?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bingtimren",
      "html_url": "https://github.com/bingtimren",
      "followers_url": "https://api.github.com/users/bingtimren/followers",
      "following_url": "https://api.github.com/users/bingtimren/following{/other_user}",
      "gists_url": "https://api.github.com/users/bingtimren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bingtimren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bingtimren/subscriptions",
      "organizations_url": "https://api.github.com/users/bingtimren/orgs",
      "repos_url": "https://api.github.com/users/bingtimren/repos",
      "events_url": "https://api.github.com/users/bingtimren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bingtimren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T07:04:33Z",
    "updated_at": "2018-01-30T08:48:17Z",
    "author_association": "NONE",
    "body": "Encountered the same problem. The only difference between (below) the first command (failed) and the second (success), is an extra space after \"=\" in the first command\r\n\r\ntruffle(develop)> msgHash =  web3.sha3('\\x19Ethereum Signed Message:\\n' + message.length + message);\r\nTypeError: Cannot read property 'match' of undefined\r\n    at parse (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:319624:13)\r\n    at Function.Parser.detailed (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:320258:10)\r\n    at parseArgs (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:322455:27)\r\n    at Object.Yargs.self.parse (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:322081:18)\r\n    at Command.getCommand (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:160684:24)\r\n    at Console.interpret (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:202605:20)\r\n    at ReplManager.interpret (/usr/local/lib/node_modules/truffle/build/cli.bundled.js:203345:18)\r\n    at bound (domain.js:301:14)\r\n    at REPLServer.runBound [as eval] (domain.js:314:12)\r\n    at REPLServer.onLine (repl.js:468:10)\r\n\r\ntruffle(develop)> msgHash = web3.sha3('\\x19Ethereum Signed Message:\\n' + message.length + message);\r\n'0xa3cf95943562e78a694789d6ff02163344c42aa6e4495117eba9a9da6e60c866'\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/361496157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/452808620",
    "html_url": "https://github.com/trufflesuite/truffle/issues/399#issuecomment-452808620",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399",
    "id": 452808620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjgwODYyMA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-09T18:40:43Z",
    "updated_at": "2019-01-09T18:40:43Z",
    "author_association": "MEMBER",
    "body": "Is this still an issue on v5? Let us know! Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/452808620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/452937959",
    "html_url": "https://github.com/trufflesuite/truffle/issues/399#issuecomment-452937959",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399",
    "id": 452937959,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MjkzNzk1OQ==",
    "user": {
      "login": "bingtimren",
      "id": 2824513,
      "node_id": "MDQ6VXNlcjI4MjQ1MTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2824513?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bingtimren",
      "html_url": "https://github.com/bingtimren",
      "followers_url": "https://api.github.com/users/bingtimren/followers",
      "following_url": "https://api.github.com/users/bingtimren/following{/other_user}",
      "gists_url": "https://api.github.com/users/bingtimren/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bingtimren/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bingtimren/subscriptions",
      "organizations_url": "https://api.github.com/users/bingtimren/orgs",
      "repos_url": "https://api.github.com/users/bingtimren/repos",
      "events_url": "https://api.github.com/users/bingtimren/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bingtimren/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-10T01:38:41Z",
    "updated_at": "2019-01-10T01:38:41Z",
    "author_association": "NONE",
    "body": "Yes it's still an issue. Below, the second command failed only because of an extra space after \"=\". Truffle version is\r\n\r\n$ truffle version\r\nTruffle v5.0.1 (core: 5.0.1)\r\nSolidity v0.5.0 (solc-js)\r\nNode v8.10.0\r\n\r\n\r\n```\r\ntruffle(develop)> msgHash = web3.utils.sha3('\\x19Ethereum Signed Message:\\n' + message.length + message);\r\n'0xe28f5ff58ff3f1b24d6ba6e3b3e95e49589e8dd59b91296e76189d6ad2857b22'\r\ntruffle(develop)> msgHash =  web3.utils.sha3('\\x19Ethereum Signed Message:\\n' + message.length + message);\r\nTypeError: Cannot read property 'match' of undefined\r\n    at ReadStream.onData (readline.js:1011:36)\r\n    at emitKeys.next (<anonymous>)\r\n    at emitKeys (internal/readline.js:420:14)\r\n    at ReadStream.emit (events.js:214:7)\r\n    at emitTwo (events.js:126:13)\r\n    at ReadStream.onkeypress (readline.js:160:10)\r\n    at REPLServer.self._ttyWrite (repl.js:537:7)\r\n    at REPLServer.Interface._ttyWrite (readline.js:911:14)\r\n    at REPLServer.Interface._line (readline.js:631:8)\r\n    at REPLServer.Interface._onLine (readline.js:282:10)\r\n    at REPLServer.emit (events.js:211:7)\r\n    at emitOne (events.js:116:13)\r\n    at REPLServer.onLine (repl.js:468:10)\r\n    at REPLServer.runBound [as eval] (domain.js:314:12)\r\n    at bound (domain.js:301:14)\r\n    at ReplManager.interpret (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/lib/repl.js:118:1)\r\n    at Console.interpret (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/lib/console.js:138:1)\r\n    at Command.getCommand (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/lib/command.js:21:1)\r\n    at Object.Yargs.self.parse (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/~/yargs/yargs.js:532:1)\r\n    at Object.Yargs.self._parseArgs (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/~/yargs/yargs.js:938:1)\r\n    at Function.Parser.detailed (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/~/yargs-parser/index.js:761:1)\r\n    at parse (/usr/local/lib/node_modules/truffle/build/webpack:/packages/truffle-core/~/yargs-parser/index.js:125:1)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/452937959/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1105869150",
    "html_url": "https://github.com/trufflesuite/truffle/issues/399#issuecomment-1105869150",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/399",
    "id": 1105869150,
    "node_id": "IC_kwDOAkfq-c5B6jle",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-22T00:03:26Z",
    "updated_at": "2022-04-22T00:03:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, this should be fixed now!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1105869150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

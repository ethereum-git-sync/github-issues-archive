{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2878",
  "id": 579230562,
  "node_id": "MDU6SXNzdWU1NzkyMzA1NjI=",
  "number": 2878,
  "title": "Truffle Script halts in a loop",
  "user": {
    "login": "alexy97",
    "id": 33332028,
    "node_id": "MDQ6VXNlcjMzMzMyMDI4",
    "avatar_url": "https://avatars.githubusercontent.com/u/33332028?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexy97",
    "html_url": "https://github.com/alexy97",
    "followers_url": "https://api.github.com/users/alexy97/followers",
    "following_url": "https://api.github.com/users/alexy97/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexy97/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexy97/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexy97/subscriptions",
    "organizations_url": "https://api.github.com/users/alexy97/orgs",
    "repos_url": "https://api.github.com/users/alexy97/repos",
    "events_url": "https://api.github.com/users/alexy97/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexy97/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-03-11T12:31:47Z",
  "updated_at": "2020-03-11T17:42:08Z",
  "closed_at": "2020-03-11T17:42:08Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am trying to run a very simple script using the truffle exec command  which sends a bunch of transactions to the node. I am not using await on the method calls , but the execution still wait and does not proceed which results in only 1 iteration. \r\n\r\n```javascript\r\nconst EnergyToken = artifacts.require(\"EnergyToken\");\r\n\r\n\r\nmodule.exports = async   function(callback) {\r\n  fetch();\r\n  console.log(\"Sending transactions...\");\r\n  const contract =  await \r\n  EnergyToken.at(\"0x9cF19b3215C4dEa492F7609425f5A230DCD13DE9\"); \r\n   \r\n  for (let cnt = 1; cnt <= 50; cnt++ {\r\n      console.log(\"Transaction \" + cnt);\r\n      contract.transfer(accounts[1],cnt);\r\n  }\r\n    console.log(\"Successfully sent transactions!\");\r\n    callback();\r\n}\r\n```\r\nI am not sure if this is expected behaviour or if there is some kind of workaround but for my test I need to send the transactions without waiting for each response individually.\r\n",
  "closed_by": {
    "login": "eggplantzzz",
    "id": 14827965,
    "node_id": "MDQ6VXNlcjE0ODI3OTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/eggplantzzz",
    "html_url": "https://github.com/eggplantzzz",
    "followers_url": "https://api.github.com/users/eggplantzzz/followers",
    "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
    "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
    "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
    "repos_url": "https://api.github.com/users/eggplantzzz/repos",
    "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597772456",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2878#issuecomment-597772456",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878",
    "id": 597772456,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5Nzc3MjQ1Ng==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-11T17:41:29Z",
    "updated_at": "2020-03-11T17:41:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "So the fact that `contract.transfer` is an asynchronous function is probably what is causing your problem. The loop is synchronous and it calls `transfer` each time. However, it does not wait for the function to finish, jumps out of the loop, and calls the callback. This, in turn, probably exits the process and thus does not deal with whatever happens when the data comes back. So maybe just `await` each `contract.transfer` if you want to make sure you completed all calls. I hope this helps!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597772456/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597772781",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2878#issuecomment-597772781",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2878",
    "id": 597772781,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5Nzc3Mjc4MQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-11T17:42:08Z",
    "updated_at": "2020-03-11T17:42:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing as this is probably not an issue with Truffle. If you find it actually is a problem, get back to us and we'll be happy to re-open it!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597772781/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

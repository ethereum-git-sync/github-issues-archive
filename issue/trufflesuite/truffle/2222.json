{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2222",
  "id": 468447110,
  "node_id": "MDU6SXNzdWU0Njg0NDcxMTA=",
  "number": 2222,
  "title": "Plugin improvement: expose truffle-core's index.js in webpack bundle ",
  "user": {
    "login": "cgewecke",
    "id": 7332026,
    "node_id": "MDQ6VXNlcjczMzIwMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cgewecke",
    "html_url": "https://github.com/cgewecke",
    "followers_url": "https://api.github.com/users/cgewecke/followers",
    "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
    "organizations_url": "https://api.github.com/users/cgewecke/orgs",
    "repos_url": "https://api.github.com/users/cgewecke/repos",
    "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cgewecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-07-16T04:54:37Z",
  "updated_at": "2019-08-14T17:41:04Z",
  "closed_at": "2019-08-14T17:41:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "As a plugin I might like to compile with special settings or run tests after preprocessing something. It would be convenient to have all the resources exported in truffle-core's [index.js](https://github.com/trufflesuite/truffle/blob/develop/packages/truffle-core/index.js) immediately available with\r\n```javascript\r\nconst truffle = require(\"truffle\");\r\n```\r\n\r\nNot sure but I think this is possible with webpack's [expose-loader](https://webpack.js.org/loaders/expose-loader/). Like maybe you just have to expose `truffle-core` as `index.js` and list the bundled cli.js as the package.json's main? \r\n\r\n**Questions**\r\n+ Is this already possible but I've missed it?\r\n+ If not, Is there any appetite for a PR like this? \r\n+ If it becomes possible, should any additional truffle modules be exposed?  \r\n",
  "closed_by": {
    "login": "cgewecke",
    "id": 7332026,
    "node_id": "MDQ6VXNlcjczMzIwMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cgewecke",
    "html_url": "https://github.com/cgewecke",
    "followers_url": "https://api.github.com/users/cgewecke/followers",
    "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
    "organizations_url": "https://api.github.com/users/cgewecke/orgs",
    "repos_url": "https://api.github.com/users/cgewecke/repos",
    "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cgewecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511668336",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2222#issuecomment-511668336",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222",
    "id": 511668336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTY2ODMzNg==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-16T05:16:57Z",
    "updated_at": "2019-07-16T05:17:22Z",
    "author_association": "MEMBER",
    "body": "_issue number with all 2's, nice @cgewecke_\r\n\r\nIs this file actually useful in its current state? I barely even knew it existed.\r\n\r\nAnyway, just as a quick response:\r\n\r\n> Is this already possible but I've missed it?\r\n\r\nI haven't looked, but the solution you describe sounds viable, or maybe it's simpler than that... you might only need to define another entrypoint in the webpack config.\r\n\r\n> If not, Is there any appetite for a PR like this?\r\n\r\nI'd be in favor of getting Truffle available as a library!\r\n\r\n> If it becomes possible, should any additional truffle modules be exposed?\r\n\r\nProbably! I think maybe it's worth collecting use cases here? It wouldn't be awful, but it'd be a shame to suddenly offer Truffle as a library only to have to break the interface quickly afterwards.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511668336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511676001",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2222#issuecomment-511676001",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222",
    "id": 511676001,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTY3NjAwMQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-16T05:54:50Z",
    "updated_at": "2019-07-16T05:54:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gnidan Whoa! I didn't notice that about the 2's'. Crazy!\r\n\r\nI don't know about other use cases but mine is coverage. I need to:\r\n+ set the provider as a ganache-core instance (so I can listen to the vm step and watch opcodes)\r\n+ compile from a custom contracts_directory with `optimization.enabled: false` to a custom build_directory.\r\n+ execute the tests using the artifacts written to the custom buid_directory.\r\n\r\nI *think* if I have `workflow-compile` and `truffle-core/lib/test` I'm good, idk.\r\n\r\n> define another entrypoint in the webpack config.\r\n\r\nApologies, could you explain that to me?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511676001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511689474",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2222#issuecomment-511689474",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222",
    "id": 511689474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTY4OTQ3NA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-16T06:50:27Z",
    "updated_at": "2019-07-16T06:50:27Z",
    "author_association": "MEMBER",
    "body": "> define another entrypoint in the webpack config.\r\n\r\nSee [this part](https://github.com/trufflesuite/truffle/blob/develop/packages/truffle/cli.webpack.config.js#L11) of the webpack config, which defines `cli`, `chain`, `analytics`, getting bundled into `cli.bundled.js`, etc. I think you just need to add to that and specify a `main` in the package.json? Try it out, though.\r\n\r\n...\r\n\r\nThinking about this some more... I don't think the risk of breaking change is that big of a deal. Might as well get any kind of useful interface now and worry about a proper interface later. Feel free to open a PR!*\r\n\r\n(*fyi tho i'm afk for the next week, so i'll have to review/merge when i get back, if no one else beats me to it)\r\n\r\nThanks for calling attention to this!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511689474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511702526",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2222#issuecomment-511702526",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222",
    "id": 511702526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTcwMjUyNg==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-16T07:36:39Z",
    "updated_at": "2019-07-16T07:38:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sweet thank you and no problem I'm doing all this way in advance. Have a great vacation.\r\n\r\nWas worried that doing it the analytics.js way might make another huge mostly duplicate bundle. Which is fine with me but will look into the other way anyway....\r\n\r\n> I don't think the risk of breaking change is that big of a deal.\r\n\r\nProbably compile and test will be pretty standard inclusions no matter what. . .I think it's pretty safe. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/511702526/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/521346149",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2222#issuecomment-521346149",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2222",
    "id": 521346149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTM0NjE0OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-14T17:41:04Z",
    "updated_at": "2019-08-14T17:41:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Published in `5.0.30`",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/521346149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

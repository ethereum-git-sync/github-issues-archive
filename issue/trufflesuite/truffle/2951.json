{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/2951",
  "id": 599065720,
  "node_id": "MDU6SXNzdWU1OTkwNjU3MjA=",
  "number": 2951,
  "title": "No Bytecode Generated for Compiled Contract",
  "user": {
    "login": "mudgen",
    "id": 49092,
    "node_id": "MDQ6VXNlcjQ5MDky",
    "avatar_url": "https://avatars.githubusercontent.com/u/49092?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mudgen",
    "html_url": "https://github.com/mudgen",
    "followers_url": "https://api.github.com/users/mudgen/followers",
    "following_url": "https://api.github.com/users/mudgen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mudgen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mudgen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mudgen/subscriptions",
    "organizations_url": "https://api.github.com/users/mudgen/orgs",
    "repos_url": "https://api.github.com/users/mudgen/repos",
    "events_url": "https://api.github.com/users/mudgen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mudgen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-04-13T18:51:01Z",
  "updated_at": "2020-04-14T18:34:22Z",
  "closed_at": "2020-04-13T23:19:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nThe command `truffle compile` will fail to generate the bytecode in .json files for contracts that have their interface defined in other contracts that are also being compiled.\r\n\r\n## Steps to Reproduce\r\n**Step 1.** Create two very simple contracts.  Let's call them TestA.sol and TestB.sol.\r\n**Step 2.** TestB.sol contains an interface definition of the TestA.sol contract.\r\n\r\nHere is what TestA.sol looks like:\r\n```solidity\r\npragma solidity ^0.6.2;\r\n\r\ncontract TestA {\r\n    function doSomething() external pure returns (address) {\r\n        return address(0);\r\n    }\r\n}\r\n```\r\nHere is what TestB.sol looks like:\r\n```solidity\r\npragma solidity ^0.6.2;\r\n\r\ninterface TestA {\r\n    function doSomething() external pure returns (address);\r\n}\r\n\r\ncontract TestB {\r\n    function get_id() public pure returns (uint256) {\r\n        return 25;\r\n    }\r\n}\r\n```\r\n\r\n**Step 3.** Put these two contracts in a directory called \"contracts\".  Then execute \"truffle compile\".\r\n\r\n**Step 4.** Look at the generated bytecode for contract TestA.json that should exist in the TestA.json file. It does not exist.  Here is a screenshot:\r\n\r\n![no bytecode](https://i.ibb.co/Ky1HXpN/zerobytecode.png)\r\n\r\n## Expected Behavior\r\n\r\nI expected the bytecode for contract TestA.sol to be in TestA.json.\r\n\r\n## Actual Results\r\n\r\nThe bytecode for TestA.sol was missing in TestA.json.\r\n\r\nPerhaps TestA.json was created for the interface rather than the contract. I think it should be the other way around.\r\n\r\n## Environment\r\n\r\n* Windows 10\r\n* Truffle v5.1.21 (core: 5.1.21)\r\n* Solidity - 0.6.2 (solc-js)\r\n* Node v10.18.1\r\n* Web3.js v1.2.\r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/613143464",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2951#issuecomment-613143464",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951",
    "id": 613143464,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzE0MzQ2NA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-13T23:19:53Z",
    "updated_at": "2020-04-13T23:19:53Z",
    "author_association": "MEMBER",
    "body": "Looks like #1087 strikes again!\r\n\r\nSorry for the inconvenience; Truffle has a long-standing limitation that prevents having two contracts with the same name.\r\n\r\nClosing this as duplicate, but thank you for reminding me that this issue is _really freakin' annoying_ ;)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/613143464/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/613183733",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2951#issuecomment-613183733",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951",
    "id": 613183733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzE4MzczMw==",
    "user": {
      "login": "mudgen",
      "id": 49092,
      "node_id": "MDQ6VXNlcjQ5MDky",
      "avatar_url": "https://avatars.githubusercontent.com/u/49092?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mudgen",
      "html_url": "https://github.com/mudgen",
      "followers_url": "https://api.github.com/users/mudgen/followers",
      "following_url": "https://api.github.com/users/mudgen/following{/other_user}",
      "gists_url": "https://api.github.com/users/mudgen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mudgen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mudgen/subscriptions",
      "organizations_url": "https://api.github.com/users/mudgen/orgs",
      "repos_url": "https://api.github.com/users/mudgen/repos",
      "events_url": "https://api.github.com/users/mudgen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mudgen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-14T01:57:15Z",
    "updated_at": "2020-04-14T02:05:16Z",
    "author_association": "NONE",
    "body": "Okay, thanks!\r\n\r\nThis version of the problem might be easier to solve than contracts overwriting contracts.  In my use cases it is more \"okay\" for a contract to overwrite an interface, since I am not going to deploy an interface.\r\n\r\nHaving an interface that overwrites the bytecode of a contract seems like a more subtle problem.  For a long time I didn't know why my contract compiled and had no bytecode.   I just thought truffle was broken. \r\n\r\nMy workaround was to install an earlier version of truffle: Truffle v5.1.21 \r\nWith this version I could compile a couple times and it would work.   With the current version of truffle this doesn't work.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/613183733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/613609920",
    "html_url": "https://github.com/trufflesuite/truffle/issues/2951#issuecomment-613609920",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/2951",
    "id": 613609920,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMzYwOTkyMA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-14T18:34:22Z",
    "updated_at": "2020-04-14T18:34:22Z",
    "author_association": "MEMBER",
    "body": "Interesting @mudgen.\r\n\r\nThere might be a workaround here, to omit artifacts for interfaces. If you'd like to take a look at doing this, would love a PR! (Or maybe just open an issue for that specific task)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/613609920/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

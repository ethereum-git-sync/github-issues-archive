{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/865",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/865/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/865/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/865/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/865",
  "id": 308179356,
  "node_id": "MDU6SXNzdWUzMDgxNzkzNTY=",
  "number": 865,
  "title": "Debug failure when Reaching a specific line of code",
  "user": {
    "login": "johhonn",
    "id": 35551051,
    "node_id": "MDQ6VXNlcjM1NTUxMDUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35551051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/johhonn",
    "html_url": "https://github.com/johhonn",
    "followers_url": "https://api.github.com/users/johhonn/followers",
    "following_url": "https://api.github.com/users/johhonn/following{/other_user}",
    "gists_url": "https://api.github.com/users/johhonn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/johhonn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/johhonn/subscriptions",
    "organizations_url": "https://api.github.com/users/johhonn/orgs",
    "repos_url": "https://api.github.com/users/johhonn/repos",
    "events_url": "https://api.github.com/users/johhonn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/johhonn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2018-03-23T21:08:25Z",
  "updated_at": "2018-03-23T21:26:55Z",
  "closed_at": "2018-03-23T21:26:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "---------------------------\r\n\r\n## Issue\r\n\r\nI am trying to debug a contract that is failing with ther Error: VM Exception while processing transaction:revert. After getting the transaction hash from the function call and calling truffle debug on it I am able to step through the code until I reach the line that could be causing the  vm exception error. If i proceed any further the debugger crashes with the following error\r\n\r\n## Steps to Reproduce\r\n1. compile contracts with truffle dev\r\n2.run `command Book.deployed().then(function(instance){return instance.buyCoin({from:web3.eth.accounts[5], value: 6})})`\r\n3.get transaction hash\r\n4.call debug on hash\r\n5.step through contracts until failure\r\n## Expected Behavior\r\nTruffle debug allows me to step through  the code to see where the error occurs\r\n\r\n## Actual Results\r\nError: Trace and instruction mismatch.\r\n```\r\ntrace {\r\n  \"depth\": 0,\r\n  \"error\": \"\",\r\n  \"gas\": 6583642,\r\n  \"gasCost\": -103538,\r\n  \"memory\": [\r\n    \"0000000000000000000000002932b7a2355d6fecc4b5c0b6bd44cc31df247a2e\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000001\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000100\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"00000000000000000000000000000000000000000000000000000000000000c0\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000009\",\r\n    \"416e6f6e796d6f75730000000000000000000000000000000000000000000000\",\r\n    \"3344b72d00000000000000000000000000000000000000000000000000000000\",\r\n    \"000000110000000000000000000000002932b7a2355d6fecc4b5c0b6bd44cc31\",\r\n    \"df247a2e00000000000000000000000000000000000000000000000000000000\",\r\n    \"0000000100000000000000000000000000000000000000000000000000000000\"\r\n  ],\r\n  \"op\": \"ISZERO\",\r\n  \"pc\": 2998,\r\n  \"stack\": [\r\n    \"00000000000000000000000000000000000000000000000000000000091e9a60\",\r\n    \"00000000000000000000000000000000000000000000000000000000000001e4\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"00000000000000000000000075c35c980c0d37ef46df04d31a140b65503c0eed\",\r\n    \"000000000000000000000000000000000000000000000000000000003344b72d\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000164\",\r\n    \"0000000000000000000000000000000000000000000000000000000000000000\"\r\n  ],\r\n  \"storage\": {}\r\n}\r\ninstruction {\r\n  \"name\": \"JUMPDEST\",\r\n  \"fee\": 1,\r\n  \"in\": 0,\r\n  \"out\": 0,\r\n  \"dynamic\": false,\r\n  \"pc\": 1656,\r\n  \"index\": 860,\r\n  \"jump\": \"-\",\r\n  \"start\": 933,\r\n  \"length\": 31,\r\n  \"range\": {\r\n    \"start\": {\r\n      \"line\": 37,\r\n      \"column\": 5\r\n    },\r\n    \"end\": {\r\n      \"line\": 37,\r\n      \"column\": 36\r\n    }\r\n  }\r\n}\r\n\r\nThis is likely due to a bug in the debugger. Please file an issue on the Truffle issue tracker and provide as much information about your code and transaction as possible.\r\n\r\nFatal Error: See above.\r\n    at REPLServer.Interface._onLine (readline.js:285:10)\r\n    at REPLServer.emit (domain.js:421:20)\r\n    at REPLServer.emit (events.js:180:13)\r\n    at REPLServer.onLine (repl.js:501:10)\r\n    at REPLServer.runBound [as eval] (domain.js:388:12)\r\n    at bound (domain.js:375:14)\r\n    at ReplManager.interpret (/usr/lib/node_modules/truffle/build/webpack:/~/truffle-core/lib/repl.js:119:1)\r\n    at Object.interpreter (/usr/lib/node_modules/truffle/build/webpack:/~/truffle-core/lib/commands/debug.js:137:1)\r\n    at Debugger.step (/usr/lib/node_modules/truffle/build/webpack:/~/truffle-debugger/debugger.js:211:1)\r\n    at Debugger.advance (/usr/lib/node_modules/truffle/build/webpack:/~/truffle-debugger/debugger.js:179:1)\r\n```\r\n## Environment\r\n\r\n* Operating System: Manjaro Linux\r\n* Ethereum client:Geth\r\n* Truffle version (`truffle version`):4.0.6 \r\n* node version (`node --version`):9.8.0\r\n* npm version (`npm --version`): 5.6.0\r\n",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/865/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/865/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375803005",
    "html_url": "https://github.com/trufflesuite/truffle/issues/865#issuecomment-375803005",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/865",
    "id": 375803005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTgwMzAwNQ==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-23T21:26:55Z",
    "updated_at": "2018-03-23T21:26:55Z",
    "author_association": "MEMBER",
    "body": "Sounds like this is due to `buyCoin` deferring to a library.\r\n\r\nClosing here, duplicate of trufflesuite/truffle-debugger#39",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375803005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

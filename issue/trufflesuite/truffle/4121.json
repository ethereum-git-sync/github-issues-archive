{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4121",
  "id": 924738012,
  "node_id": "MDU6SXNzdWU5MjQ3MzgwMTI=",
  "number": 4121,
  "title": "truffle migrate outputs source code to screen",
  "user": {
    "login": "aliveli186",
    "id": 8914034,
    "node_id": "MDQ6VXNlcjg5MTQwMzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8914034?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aliveli186",
    "html_url": "https://github.com/aliveli186",
    "followers_url": "https://api.github.com/users/aliveli186/followers",
    "following_url": "https://api.github.com/users/aliveli186/following{/other_user}",
    "gists_url": "https://api.github.com/users/aliveli186/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aliveli186/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aliveli186/subscriptions",
    "organizations_url": "https://api.github.com/users/aliveli186/orgs",
    "repos_url": "https://api.github.com/users/aliveli186/repos",
    "events_url": "https://api.github.com/users/aliveli186/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aliveli186/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-06-18T09:50:07Z",
  "updated_at": "2021-06-18T21:02:18Z",
  "closed_at": "2021-06-18T21:02:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\n```\r\nropsten: {\r\n  provider: () => new HDWalletProvider(mnemonic, `https://ropsten.infura.io/v3/${infuraKey}`),\r\n  network_id: 3,       // Ropsten's id\r\n  gas: 5500000,        // Ropsten has a lower block limit than mainnet\r\n  confirmations: 2,    // # of confs to wait between deployments. (default: 0)\r\n  timeoutBlocks: 200,  // # of blocks before a deployment times out  (minimum/default: 50)\r\n  skipDryRun: true     // Skip dry run before migrations? (default: false for public nets )\r\n}\r\n```\r\n\r\nThe command: `truffle migrate --network ropsten`\r\ndoesn't deploy to the blockchain but prints all byte code and some JavaScript code to the screen with the following error message at the end.\r\n\r\nI don't have this error when I deploy locally or locally fork ropsten.\r\nThis is deployment related error, the contract compilation phase completes without errors.\r\n\r\n```\r\nRuntimeError: abort([object Object]). Build with -s ASSERTIONS=1 for more info.\r\n    at process.abort (C:\\Users\\Developer\\.config\\truffle\\compilers\\node_modules\\soljson-v0.8.4+commit.c7e474f2.js:1:12950)\r\n    at process.emit (events.js:315:20)\r\n    at process.emit (C:\\Users\\Developer\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\node_modules\\source-map-support\r\n\\source-map-support.js:495:1)\r\n    at process.emit (C:\\Users\\Developer\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\node_modules\\source-map-support\r\n\\source-map-support.js:495:1)\r\n    at processPromiseRejections (internal/process/promises.js:245:33)\r\n    at processTicksAndRejections (internal/process/task_queues.js:94:32)\r\n    at runNextTicks (internal/process/task_queues.js:62:3)\r\n    at listOnTimeout (internal/timers.js:523:9)\r\n    at processTimers (internal/timers.js:497:7)\r\n```\r\n\r\nWhat could be the problem and how can I compile with \"-s ASSERTIONS=1\" to get more information?\r\n\r\nSample screen output.\r\n```\r\nAOQ8EgBplQAAapUAAGuVAAAMQAAAbJUAAA5AAAAPQAAAbZUAAG6VAAASQAAAE0AAAG+VAABY3BAAMAwQANgnEQAAAAAAKD0SAJGVAACSlQAAC0AAAAxAAACT\r\nlQAADkAAAA9AAACUlQAAEUAAABJAAAATQAAAlZUAAFjcEAD9DBAA2CcRAAAAAABQPRIAlpUAAJeVAABY3BAATQ4QACQAEQBY3BAAFQ4QAEQ9EgAAAAAARD0S\r\nAJaVAACYlQAAAAAAAKQ9EgC1lQAAtpUAALeVAAC4lQAAuZUAAA5AAAAPQAAAupUAABFAAAASQAAAE0AAALuVAABY3BAA9w4QANgnEQAAAAAA6D0SAAlAAADF\r\nlQAAvJUAAMaVAADHlQAADkAAAA9AAADIlQAAEUAAABJAAAATQAAAyZUAAFjcEACEDxAA2CcRAAAAAAAUPhIAypUAAMuVAABkPgAAzJUAAM2VAADOlQAAWNwQ\r\nAEIQEADgJhEAAAAAAFg+EgDylQAA85UAAPSVAAD1lQAA9pUAAA5AAAAPQAAA95UAABFAAAASQAAAE0AAAPiVAABY3BAAdhAQANgnEQAAAAAAnD4SAEWWAABG\r\nlgAAR5YAAEiWAABJlgAASpYAAEuWAABMlgAAEUAAABJAAAATQAAATZYAAFjcEABwFBAA2CcRAAAAAADEPhIAEpcAADeXAAAUlwAAMNwQAB5SEABY3BAAA1IQ\r\nALw+EgAAAAAA7D4SADiXAAA5lwAAOpcAADDcEABRUhAAWNwQADpSEADkPhIAAAAAADQ/EgA7lwAAPZcAAD6XAAAAAAAAUJYGADuXAAA/lwAAPpcAAAAAAAAs\r\nlgYAO5cAAECXAAA+lwAAWNwQAKpSEAA02BAAAAAAAHA/EgBBlwAAQpcAAEOXAAAAAAAAhD8SAA+XAABElwAAEZcAADDcEABMWRAAWNwQACtZEABoPxIAMNwQ\r\nAGJZEABY3BAAgFkQAHw/EgCdWRAAoVkQAKtZEAAlWBAAtFkQAL1ZEABB1IDJAAsD6GASAEGQgckACwEFAEGcgckACwJPlwBBtIHJAAsOSZcAAFCXAAAIYRIA\r\nAAQAQcyByQALAQEAQduByQALBQr/////AEGggskACwmQQBIAAAAAAAUAQbSCyQALAkuXAEHMgskACwtJlwAASJcAABBlEgBB5ILJAAsBAgBB84LJAAsF////\r\n//8AQbiDyQALAQkAQcSDyQALAkuXAEHYg8kACxJKlwAAAAAAAEiXAABIZRIAAAQAQYSEyQALBP////8AQciEyQALF4BtEADQbRAAtHAQAF2aAABa1xAAgHdi\r\n\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(file){try{if(file==wasmBin\r\naryFile&&wasmBinary){return new Uint8Array(wasmBinary)}var binary=tryParseAsDataURI(file);if(binary){return binary}if(re\r\nadBinary){return readBinary(file)}else{throw\"sync fetching of the wasm failed: you can preload it to Module['wasmBinary'\r\n] manually, or emcc.py will do that for you when generating HTML (but not JS)\"}}catch(err){abort(err)}}function instanti\r\nateSync(file,info){var instance;var module;var binary;try{binary=getBinary(file);module=new WebAssembly.Module(binary);i\r\nnstance=new WebAssembly.Instance(module,info)}catch(e){var str=e.toString();err(\"failed to compile wasm module: \"+str);i\r\nf(str.indexOf(\"imported Memory\")>=0||str.indexOf(\"memory import\")>=0){err(\"Memory size incompatibility issues may be due\r\n to changing INITIAL_MEMORY at runtime to something too large. Use ALLOW_MEMORY_GROWTH to allow any size memory (and als\r\no make sure not to set INITIAL_MEMORY at runtime to something smaller than it was at compile time).\")}throw e}return[ins\r\ntance,module]}function createWasm(){var info={\"a\":asmLibraryArg};function receiveInstance(instance,module){var exports=i\r\nnstance.exports;Module[\"asm\"]=exports;wasmMemory=Module[\"asm\"][\"qb\"];updateGlobalBufferAndViews(wasmMemory.buffer);wasmT\r\nable=Module[\"asm\"][\"rb\"];removeRunDependency(\"wasm-instantiate\")}addRunDependency(\"wasm-instantiate\");if(Module[\"instant\r\niateWasm\"]){try{var exports=Module[\"instantiateWasm\"](info,receiveInstance);return exports}catch(e){err(\"Module.instanti\r\nateWasm callback failed with error: \"+e);return false}}var result=instantiateSync(wasmBinaryFile,info);receiveInstance(r\r\n```\r\n",
  "closed_by": {
    "login": "aliveli186",
    "id": 8914034,
    "node_id": "MDQ6VXNlcjg5MTQwMzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8914034?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aliveli186",
    "html_url": "https://github.com/aliveli186",
    "followers_url": "https://api.github.com/users/aliveli186/followers",
    "following_url": "https://api.github.com/users/aliveli186/following{/other_user}",
    "gists_url": "https://api.github.com/users/aliveli186/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aliveli186/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aliveli186/subscriptions",
    "organizations_url": "https://api.github.com/users/aliveli186/orgs",
    "repos_url": "https://api.github.com/users/aliveli186/repos",
    "events_url": "https://api.github.com/users/aliveli186/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aliveli186/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/864065286",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4121#issuecomment-864065286",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121",
    "id": 864065286,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDA2NTI4Ng==",
    "user": {
      "login": "cds-amal",
      "id": 2529600,
      "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cds-amal",
      "html_url": "https://github.com/cds-amal",
      "followers_url": "https://api.github.com/users/cds-amal/followers",
      "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
      "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
      "organizations_url": "https://api.github.com/users/cds-amal/orgs",
      "repos_url": "https://api.github.com/users/cds-amal/repos",
      "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cds-amal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-18T14:07:26Z",
    "updated_at": "2021-06-18T14:07:26Z",
    "author_association": "MEMBER",
    "body": "@aliveli186 what version of truffle are you using? This should have been resolved in [v5.3.10](https://github.com/trufflesuite/truffle/releases/tag/v5.3.10) ðŸ˜… . If you're on a previous version you can upgrade with the following command `npm uninstall -g truffle && npm install -g truffle`\r\n\r\n> What could be the problem and how can I compile with \"-s ASSERTIONS=1\" to get more information?\r\n\r\nThat output shouldn't be displayed but you can examine the end of the dump, which may have information on the rejected promise or error that caused the issue. \r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/864065286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/864258673",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4121#issuecomment-864258673",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121",
    "id": 864258673,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDI1ODY3Mw==",
    "user": {
      "login": "aliveli186",
      "id": 8914034,
      "node_id": "MDQ6VXNlcjg5MTQwMzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8914034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aliveli186",
      "html_url": "https://github.com/aliveli186",
      "followers_url": "https://api.github.com/users/aliveli186/followers",
      "following_url": "https://api.github.com/users/aliveli186/following{/other_user}",
      "gists_url": "https://api.github.com/users/aliveli186/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aliveli186/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aliveli186/subscriptions",
      "organizations_url": "https://api.github.com/users/aliveli186/orgs",
      "repos_url": "https://api.github.com/users/aliveli186/repos",
      "events_url": "https://api.github.com/users/aliveli186/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aliveli186/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-18T20:29:01Z",
    "updated_at": "2021-06-18T20:29:01Z",
    "author_association": "NONE",
    "body": "@cds-amal I upgraded, still errors but shows more details.\r\nI added `networkCheckTimeout: 1000000` but has no effect.\r\n\r\n```\r\nF:\\Projects\\Blockchain\\node_modules\\request\\request.js:848\r\n          var e = new Error('ETIMEDOUT')\r\n                  ^\r\nError: PollingBlockTracker - encountered an error while attempting to update latest block:\r\nError: ETIMEDOUT\r\n    at Timeout.<anonymous> (F:\\Projects\\Blockchain\\node_modules\\request\\request.js:848:19)\r\n    at listOnTimeout (internal/timers.js:554:17)\r\n    at processTimers (internal/timers.js:497:7)\r\n    at PollingBlockTracker._performSync (F:\\Projects\\Blockchain\\node_modules\\eth-block-tracker\\src\\polling.js:51:24)\r\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n    at runNextTicks (internal/process/task_queues.js:62:3)\r\n    at listOnTimeout (internal/timers.js:523:9)\r\n    at processTimers (internal/timers.js:497:7)\r\nUnhandledRejections detected\r\nPromise {\r\n  <rejected> {\r\n    code: -32603,\r\n    message: 'ETIMEDOUT',\r\n    data: { originalError: [Object] },\r\n    stack: 'Error: ETIMEDOUT\\n' +\r\n      '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n      '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n      '    at processTimers (internal/timers.js:497:7)'\r\n  }\r\n} {\r\n  code: -32603,\r\n  message: 'ETIMEDOUT',\r\n  data: { originalError: { code: 'ETIMEDOUT', connect: true } },\r\n  stack: 'Error: ETIMEDOUT\\n' +\r\n    '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n    '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n    '    at processTimers (internal/timers.js:497:7)'\r\n}\r\nPromise {\r\n  <rejected> {\r\n    code: -32603,\r\n    message: 'ETIMEDOUT',\r\n    data: { originalError: [Object] },\r\n    stack: 'Error: ETIMEDOUT\\n' +\r\n      '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n      '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n      '    at processTimers (internal/timers.js:497:7)'\r\n  }\r\n} {\r\n  code: -32603,\r\n  message: 'ETIMEDOUT',\r\n  data: { originalError: { code: 'ETIMEDOUT', connect: true } },\r\n  stack: 'Error: ETIMEDOUT\\n' +\r\n    '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n    '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n    '    at processTimers (internal/timers.js:497:7)'\r\n}\r\nPromise {\r\n  <rejected> {\r\n    code: -32603,\r\n    message: 'ETIMEDOUT',\r\n    data: { originalError: [Object] },\r\n    stack: 'Error: ETIMEDOUT\\n' +\r\n      '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n      '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n      '    at processTimers (internal/timers.js:497:7)'\r\n  }\r\n} {\r\n  code: -32603,\r\n  message: 'ETIMEDOUT',\r\n  data: { originalError: { code: 'ETIMEDOUT', connect: true } },\r\n  stack: 'Error: ETIMEDOUT\\n' +\r\n    '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n    '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n    '    at processTimers (internal/timers.js:497:7)'\r\n}\r\nPromise {\r\n  <rejected> {\r\n    code: -32603,\r\n    message: 'ETIMEDOUT',\r\n    data: { originalError: [Object] },\r\n    stack: 'Error: ETIMEDOUT\\n' +\r\n      '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n      '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n      '    at processTimers (internal/timers.js:497:7)'\r\n  }\r\n} {\r\n  code: -32603,\r\n  message: 'ETIMEDOUT',\r\n  data: { originalError: { code: 'ETIMEDOUT', connect: true } },\r\n  stack: 'Error: ETIMEDOUT\\n' +\r\n    '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n    '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n    '    at processTimers (internal/timers.js:497:7)'\r\n}\r\nPromise {\r\n  <rejected> {\r\n    code: -32603,\r\n    message: 'ETIMEDOUT',\r\n    data: { originalError: [Object] },\r\n    stack: 'Error: ETIMEDOUT\\n' +\r\n      '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n      '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n      '    at processTimers (internal/timers.js:497:7)'\r\n  }\r\n} {\r\n  code: -32603,\r\n  message: 'ETIMEDOUT',\r\n  data: { originalError: { code: 'ETIMEDOUT', connect: true } },\r\n  stack: 'Error: ETIMEDOUT\\n' +\r\n    '    at Timeout.<anonymous> (F:\\\\Projects\\\\Blockchain\\\\node_modules\\\\request\\\\request.js:848:19)\\n' +\r\n    '    at listOnTimeout (internal/timers.js:554:17)\\n' +\r\n    '    at processTimers (internal/timers.js:497:7)'\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/864258673/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/864271966",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4121#issuecomment-864271966",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4121",
    "id": 864271966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDI3MTk2Ng==",
    "user": {
      "login": "aliveli186",
      "id": 8914034,
      "node_id": "MDQ6VXNlcjg5MTQwMzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8914034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aliveli186",
      "html_url": "https://github.com/aliveli186",
      "followers_url": "https://api.github.com/users/aliveli186/followers",
      "following_url": "https://api.github.com/users/aliveli186/following{/other_user}",
      "gists_url": "https://api.github.com/users/aliveli186/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aliveli186/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aliveli186/subscriptions",
      "organizations_url": "https://api.github.com/users/aliveli186/orgs",
      "repos_url": "https://api.github.com/users/aliveli186/repos",
      "events_url": "https://api.github.com/users/aliveli186/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aliveli186/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-18T21:02:18Z",
    "updated_at": "2021-06-18T21:02:18Z",
    "author_association": "NONE",
    "body": "Changing the provider configuration to use web sockets solved the problem.\r\n\r\n```\r\nprovider: () => new HDWalletProvider(mnemonic, `wss://ropsten.infura.io/ws/v3/${infuraKey}`),\r\nwebsockets: true\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/864271966/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

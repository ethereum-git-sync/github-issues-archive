{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4409",
  "id": 1047947422,
  "node_id": "I_kwDOAkfq-c4-dmie",
  "number": 4409,
  "title": "Debugger CLI should treat Vyper unmapped instructions like Solidity unmapped instructions",
  "user": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971535002,
      "node_id": "MDU6TGFiZWw5NzE1MzUwMDI=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Debugger",
      "name": "Debugger",
      "color": "7911ad",
      "default": false,
      "description": ""
    },
    {
      "id": 1426368764,
      "node_id": "MDU6TGFiZWwxNDI2MzY4NzY0",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "006b75",
      "default": true,
      "description": ""
    },
    {
      "id": 1675041996,
      "node_id": "MDU6TGFiZWwxNjc1MDQxOTk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority4%20%F0%9F%93%8B",
      "name": "priority4 ðŸ“‹",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-11-08T21:40:38Z",
  "updated_at": "2021-12-03T03:03:43Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nVyper handles unmapped instructions differently from Solidity.  In Solidity, unmapped instructions are given a file index of -1.  When attempting to show the source for such an instruction, we instead just show `1: // No source code found.`.\r\n\r\nHowever, in Vyper, such instructions are not given a file index of -1, but are given a start and length of 0.  So when we show the source for them, we instead show the beginning of the file, which is confusing.\r\n\r\nThe CLI debugger therefore, when printing the source for a given instruction, should check if it has a length of 0 and if so treat it as if no source code was found.\r\n\r\nNote: The debugger internals should probably also make this change to the `solidity.current.nextUserStep` selector, but since there's no actual relevance there at the moment, that doesn't need to be done as part of this (it would just be writing code that wouldn't be used anywhere).\r\n\r\nAlso note: There's no need to update the debugger controller to take account of this, because it already does!  It's only the printout that's the problem at the moment.\r\n\r\n## Environment\r\n\r\n* Truffle version (`truffle version`): 5.4.18",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/985176061",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4409#issuecomment-985176061",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4409",
    "id": 985176061,
    "node_id": "IC_kwDOAkfq-c46uJf9",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-03T03:03:33Z",
    "updated_at": "2021-12-03T03:03:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oh, hm, a complication, though -- Vyper source might *start* on such an unmapped instruction.  That would look really bad, if we treated it as unmapped.  That might need special handling.  Hm.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/985176061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4010",
  "id": 869524906,
  "node_id": "MDU6SXNzdWU4Njk1MjQ5MDY=",
  "number": 4010,
  "title": "truffle/HDWalletProvider v1.3.0 doesn't work for Binance Smart Chain Testnet. ",
  "user": {
    "login": "nicezic",
    "id": 29541078,
    "node_id": "MDQ6VXNlcjI5NTQxMDc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/29541078?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nicezic",
    "html_url": "https://github.com/nicezic",
    "followers_url": "https://api.github.com/users/nicezic/followers",
    "following_url": "https://api.github.com/users/nicezic/following{/other_user}",
    "gists_url": "https://api.github.com/users/nicezic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nicezic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nicezic/subscriptions",
    "organizations_url": "https://api.github.com/users/nicezic/orgs",
    "repos_url": "https://api.github.com/users/nicezic/repos",
    "events_url": "https://api.github.com/users/nicezic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nicezic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-04-28T05:56:08Z",
  "updated_at": "2021-05-03T03:58:02Z",
  "closed_at": "2021-04-28T18:25:00Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\ntruffle/HDWalletProvider v1.3.0 doesn't work for Binance Smart Chain Testnet. \r\n\r\n## Steps to Reproduce\r\n\r\nPlease provide the shortest amount of steps to reproduce your issue.\r\n. install HDWalletProvider@1.3.0 ( latest )\r\n. deploy to Binance Smart Chain Testnet ( failed )\r\n. install HDWalletProvider@1.2.6\r\n. deploy to Binance Smart Chain Testnet ( worked )\r\n\r\n## Expected Behavior\r\n\r\nHDWalletProvider@1.3.0 should also work out.\r\n\r\n## Actual Results\r\n\r\n```\r\n> yarn upgrade @truffle/hdwallet-provider@latest\r\n...\r\n[4/4] Rebuilding all packages...\r\nsuccess Saved lockfile.\r\nwarning No license field\r\nsuccess Saved 1 new dependency.\r\ninfo Direct dependencies\r\n└─ @truffle/hdwallet-provider@1.3.0\r\ninfo All dependencies\r\n└─ @truffle/hdwallet-provider@1.3.0\r\n\r\n> truffle.cmd migrate --reset --network bsctest\r\n\r\nCompiling your contracts...\r\n===========================\r\n√ Fetching solc version list from solc-bin. Attempt #1\r\n> Everything is up to date, there is nothing to compile.\r\n\r\n\r\n\r\nStarting migrations...\r\n======================\r\n> Network name:    'bsctest'\r\n> Network id:      97\r\n> Block gas limit: 30000000 (0x1c9c380)\r\n\r\n\r\n1_initial_migration.js\r\n======================\r\n\r\n   Replacing 'Migrations'\r\n   ----------------------\r\n\r\nError:  *** Deployment Failed ***\r\n\r\n\"Migrations\" -- invalid sender.\r\n\r\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)\r\n    at Migration._deploy (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\Migration.js:74:1)\r\n    at Migration._load (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\Migration.js:61:1)\r\n    at Migration.run (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\Migration.js:212:1)\r\n    at Object.runMigrations (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\index.js:150:1)\r\n    at Object.runFrom (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\index.js:110:1)\r\n    at Object.runAll (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\index.js:114:1)\r\n    at Object.run (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\migrate\\index.js:79:1)\r\n    at runMigrations (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\core\\lib\\commands\\migrate.js:263:1)\r\n    at Object.run (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\core\\lib\\commands\\migrate.js:228:1)\r\n    at Command.run (C:\\Users\\yhpark\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\packages\\core\\lib\\command.js:140:1)\r\nTruffle v5.3.3 (core: 5.3.3)\r\nNode v14.16.1\r\n> yarn upgrade @truffle/hdwallet-provider@1.2.6\r\nyarn upgrade v1.22.10\r\n...\r\ninfo Direct dependencies\r\n└─ @truffle/hdwallet-provider@1.2.6\r\ninfo All dependencies\r\n└─ @truffle/hdwallet-provider@1.2.6\r\nDone in 1.14s.\r\nPS C:\\work\\first-bnb> truffle.cmd migrate --reset --network bsctest \r\n\r\nCompiling your contracts...\r\n===========================\r\n√ Fetching solc version list from solc-bin. Attempt #1\r\n> Everything is up to date, there is nothing to compile.\r\n\r\n\r\n\r\nStarting migrations...\r\n======================\r\n> Network name:    'bsctest'\r\n> Network id:      97\r\n> Block gas limit: 30000000 (0x1c9c380)\r\n\r\n\r\n1_initial_migration.js\r\n======================\r\n\r\n   Replacing 'Migrations'\r\n   ----------------------\r\n   > transaction hash:    0xf7eec17ca8b8f57a984f4906ffe10ef8b9a3ff6462953deef57f8116f90cc1c1\r\n   > Blocks: 2            Seconds: 9\r\n   > contract address:    0x7b70A309e88c9CfABf3ABff6214F9e955F773c9a\r\n   > block number:        8365390\r\n   > block timestamp:     1619586361\r\n   > account:             0x85Cc4aA3c32Bde305CD9C5dd3d2a4d40A5C39efF\r\n   > balance:             7.16218322\r\n   > gas used:            246904 (0x3c478)\r\n   > gas price:           20 gwei\r\n   > value sent:          0 ETH\r\n   > total cost:          0.00493808 ETH\r\n\r\n\r\n   > Saving migration to chain.\r\n   > Saving artifacts\r\n   -------------------------------------\r\n   > Total cost:          0.00493808 ETH\r\n\r\n\r\n2_deploy_contracts.js\r\n=====================\r\n\r\n   Replacing 'MyContract'\r\n   ----------------------\r\n   > transaction hash:    0xdd613f6614460fce0372020c1d3b9a6611cae1828f867ef9c9a5bdfa9bab83ac\r\n   > Blocks: 2            Seconds: 5\r\n   > contract address:    0xF2aae9fabb22aAf852595544E9B592C3cF4E9390\r\n   > block number:        8365396\r\n   > block timestamp:     1619586379\r\n   > account:             0x85Cc4aA3c32Bde305CD9C5dd3d2a4d40A5C39efF\r\n   > balance:             7.15530878\r\n   > gas used:            301209 (0x49899)\r\n   > gas price:           20 gwei\r\n   > value sent:          0 ETH\r\n   > total cost:          0.00602418 ETH\r\n\r\n\r\n   > Saving migration to chain.\r\n   > Saving artifacts\r\n   -------------------------------------\r\n   > Total cost:          0.00602418 ETH\r\n\r\n\r\nSummary\r\n=======\r\n> Total deployments:   2\r\n> Final cost:          0.01096226 ETH\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: Win 10\r\n* Ethereum client: Binance Smart Chain Testnet ( https://data-seed-prebsc-2-s3.binance.org:8545/ )\r\n* Truffle version (`truffle version`): Truffle v5.3.3 (core: 5.3.3)\r\n* node version (`node --version`): v14.16.1\r\n* npm version (`npm --version`): yarn v1.22.10\r\n\r\n\r\n### truffle-config.js\r\n```\r\nconst provider = new HDWalletProvider(\r\n  [process.env.MY_PRIVATE_KEY],\r\n  'https://data-seed-prebsc-2-s3.binance.org:8545/',\r\n  0, 1\r\n);\r\n\r\n  networks: {\r\n    bsctest: {\r\n      provider: () => provider,\r\n      network_id: \"97\",\r\n      gas: 1000000\r\n    }\r\n```",
  "closed_by": {
    "login": "davidmurdoch",
    "id": 187813,
    "node_id": "MDQ6VXNlcjE4NzgxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/187813?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davidmurdoch",
    "html_url": "https://github.com/davidmurdoch",
    "followers_url": "https://api.github.com/users/davidmurdoch/followers",
    "following_url": "https://api.github.com/users/davidmurdoch/following{/other_user}",
    "gists_url": "https://api.github.com/users/davidmurdoch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davidmurdoch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davidmurdoch/subscriptions",
    "organizations_url": "https://api.github.com/users/davidmurdoch/orgs",
    "repos_url": "https://api.github.com/users/davidmurdoch/repos",
    "events_url": "https://api.github.com/users/davidmurdoch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davidmurdoch/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/828679250",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4010#issuecomment-828679250",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010",
    "id": 828679250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODY3OTI1MA==",
    "user": {
      "login": "davidmurdoch",
      "id": 187813,
      "node_id": "MDQ6VXNlcjE4NzgxMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/187813?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidmurdoch",
      "html_url": "https://github.com/davidmurdoch",
      "followers_url": "https://api.github.com/users/davidmurdoch/followers",
      "following_url": "https://api.github.com/users/davidmurdoch/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidmurdoch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidmurdoch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidmurdoch/subscriptions",
      "organizations_url": "https://api.github.com/users/davidmurdoch/orgs",
      "repos_url": "https://api.github.com/users/davidmurdoch/repos",
      "events_url": "https://api.github.com/users/davidmurdoch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidmurdoch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-28T18:25:00Z",
    "updated_at": "2021-04-28T18:25:00Z",
    "author_association": "MEMBER",
    "body": "Thanks for opening this issue, @nicezic0. Let's track this over in #4000.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/828679250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/828915233",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4010#issuecomment-828915233",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010",
    "id": 828915233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyODkxNTIzMw==",
    "user": {
      "login": "nicezic",
      "id": 29541078,
      "node_id": "MDQ6VXNlcjI5NTQxMDc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29541078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicezic",
      "html_url": "https://github.com/nicezic",
      "followers_url": "https://api.github.com/users/nicezic/followers",
      "following_url": "https://api.github.com/users/nicezic/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicezic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicezic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicezic/subscriptions",
      "organizations_url": "https://api.github.com/users/nicezic/orgs",
      "repos_url": "https://api.github.com/users/nicezic/repos",
      "events_url": "https://api.github.com/users/nicezic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicezic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T03:24:04Z",
    "updated_at": "2021-04-29T03:24:04Z",
    "author_association": "NONE",
    "body": "> \r\n> \r\n> Thanks for opening this issue, @nicezic0. Let's track this over in #4000.\r\n\r\nThanks a lot!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/828915233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/829950998",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4010#issuecomment-829950998",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010",
    "id": 829950998,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTk1MDk5OA==",
    "user": {
      "login": "gianlucamazza",
      "id": 25006045,
      "node_id": "MDQ6VXNlcjI1MDA2MDQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/25006045?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gianlucamazza",
      "html_url": "https://github.com/gianlucamazza",
      "followers_url": "https://api.github.com/users/gianlucamazza/followers",
      "following_url": "https://api.github.com/users/gianlucamazza/following{/other_user}",
      "gists_url": "https://api.github.com/users/gianlucamazza/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gianlucamazza/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gianlucamazza/subscriptions",
      "organizations_url": "https://api.github.com/users/gianlucamazza/orgs",
      "repos_url": "https://api.github.com/users/gianlucamazza/repos",
      "events_url": "https://api.github.com/users/gianlucamazza/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gianlucamazza/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-30T08:58:26Z",
    "updated_at": "2021-04-30T08:58:26Z",
    "author_association": "NONE",
    "body": "do you have any temporary solution? I'm stuck on this error too: \r\n\r\n\"Migrations\" -- invalid sender.\r\n\r\nbsc_testnet: {\r\n      provider: () => new HDWalletProvider({\r\n        mnemonic: mnemonic,\r\n        providerOrUrl: \"https://data-seed-prebsc-1-s1.binance.org:8545\",\r\n        chainId: 42\r\n      }),\r\n      network_id: 97,\r\n      confirmations: 10,\r\n      timeoutBlocks: 200,\r\n      skipDryRun: true,\r\n      websockets: true\r\n    }\r\n    \r\nWhat chainId should we use?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/829950998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/831005977",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4010#issuecomment-831005977",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4010",
    "id": 831005977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTAwNTk3Nw==",
    "user": {
      "login": "nicezic",
      "id": 29541078,
      "node_id": "MDQ6VXNlcjI5NTQxMDc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29541078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicezic",
      "html_url": "https://github.com/nicezic",
      "followers_url": "https://api.github.com/users/nicezic/followers",
      "following_url": "https://api.github.com/users/nicezic/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicezic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicezic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicezic/subscriptions",
      "organizations_url": "https://api.github.com/users/nicezic/orgs",
      "repos_url": "https://api.github.com/users/nicezic/repos",
      "events_url": "https://api.github.com/users/nicezic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicezic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T03:54:33Z",
    "updated_at": "2021-05-03T03:58:02Z",
    "author_association": "NONE",
    "body": "> \r\n> \r\n> do you have any temporary solution? I'm stuck on this error too:\r\n> \r\n> \"Migrations\" -- invalid sender.\r\n> \r\n> bsc_testnet: {\r\n> provider: () => new HDWalletProvider({\r\n> mnemonic: mnemonic,\r\n> providerOrUrl: \"https://data-seed-prebsc-1-s1.binance.org:8545\",\r\n> chainId: 42\r\n> }),\r\n> network_id: 97,\r\n> confirmations: 10,\r\n> timeoutBlocks: 200,\r\n> skipDryRun: true,\r\n> websockets: true\r\n> }\r\n> \r\n> What chainId should we use?\r\n\r\nIn HDWalletProvider ...\r\nor just use @truffle/hdwallet-provider@1.2.6 instead of latest.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/831005977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

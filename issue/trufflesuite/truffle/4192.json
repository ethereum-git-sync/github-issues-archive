{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4192",
  "id": 947907760,
  "node_id": "MDU6SXNzdWU5NDc5MDc3NjA=",
  "number": 4192,
  "title": "db processes when not enabled",
  "user": {
    "login": "cds-amal",
    "id": 2529600,
    "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cds-amal",
    "html_url": "https://github.com/cds-amal",
    "followers_url": "https://api.github.com/users/cds-amal/followers",
    "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
    "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
    "organizations_url": "https://api.github.com/users/cds-amal/orgs",
    "repos_url": "https://api.github.com/users/cds-amal/repos",
    "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cds-amal/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-07-19T18:18:30Z",
  "updated_at": "2021-07-30T20:51:10Z",
  "closed_at": "2021-07-30T20:51:10Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "When compiling a project with db disabled, it should not be in the execution trace. This was observed on both windows and linux OS.\r\n\r\n## Versions\r\n\r\n$ truffle version\r\nTruffle v5.4.0 (core: 5.4.0)\r\nSolidity v0.5.16 (solc-js)\r\nNode v12.22.1\r\nWeb3.js v1.4.0\r\n\r\n## truffle-config.js\r\n```JavaScript\r\nmodule.exports = {\r\n  // Uncommenting the defaults below\r\n  // provides for an easier quick-start with Ganache.\r\n  // You can also follow this format for other networks;\r\n  // see <http://truffleframework.com/docs/advanced/configuration>\r\n  // for more details on how to specify configuration options!\r\n  //\r\n  //networks: {\r\n  //  development: {\r\n  //    host: \"127.0.0.1\",\r\n  //    port: 7545,\r\n  //    network_id: \"*\"\r\n  //  },\r\n  //  test: {\r\n  //    host: \"127.0.0.1\",\r\n  //    port: 7545,\r\n  //    network_id: \"*\"\r\n  //  }\r\n  //}\r\n  //\r\n};\r\n```\r\n\r\n## Reproduction steps\r\n\r\n```console\r\nreprod meta-coin\r\ntruffle unbox metacoin mc\r\ncd mc\r\nDEBUG=db* truffle compile\r\n```\r\n\r\n## Expected \r\n\r\nThere should be no `db*` logs\r\n\r\n## Actual results\r\n\r\n```console\r\nâ”€$ DEBUG=db* truffle compile\r\n  db:meta:graph:schema Creating DefinitonSchema for sources... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for sources. +1ms\r\n  db:meta:graph:schema Creating DefinitonSchema for bytecodes... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for bytecodes. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for compilations... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for compilations. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for contracts... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for contracts. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for contractInstances... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for contractInstances. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for networks... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for networks. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for nameRecords... +1ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for nameRecords. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for projects... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for projects. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for projectNames... +0ms\r\n  db:meta:graph:schema Created MutableDefinitonSchema for projectNames. +0ms\r\n  db:meta:graph:schema Creating DefinitonSchema for networkGenealogies... +0ms\r\n  db:meta:graph:schema Created ImmutableDefinitionSchema for networkGenealogies. +0ms\r\n  db:meta:graph:schema:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:sources:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:sources:typeDefs Generated. +0ms\r\n  db:meta:graph:schema:bytecodes:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:bytecodes:typeDefs Generated. +1ms\r\n  db:meta:graph:schema:compilations:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:compilations:typeDefs Generated. +1ms\r\n  db:meta:graph:schema:contracts:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:contracts:typeDefs Generated. +1ms\r\n  db:meta:graph:schema:contractInstances:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:contractInstances:typeDefs Generated. +1ms\r\n  db:meta:graph:schema:networks:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:networks:typeDefs Generated. +0ms\r\n  db:meta:graph:schema:nameRecords:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:nameRecords:typeDefs Generated. +0ms\r\n  db:meta:graph:schema:projects:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:projects:typeDefs Generated. +1ms\r\n  db:meta:graph:schema:projectNames:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:projectNames:typeDefs Generated. +0ms\r\n  db:meta:graph:schema:networkGenealogies:typeDefs Generating... +0ms\r\n  db:meta:graph:schema:networkGenealogies:typeDefs Generated. +0ms\r\n  db:meta:graph:schema:typeDefs Generated. +5ms\r\n  db:meta:graph:schema:resolvers Generating... +0ms\r\n  db:meta:graph:schema:sources:resolvers Generating... +0ms\r\n  db:meta:graph:schema:sources:resolvers Generating... +0ms\r\n  db:meta:graph:schema:sources:resolvers Generated. +0ms\r\n  db:meta:graph:schema:sources:resolvers Generated. +0ms\r\n  db:meta:graph:schema:bytecodes:resolvers Generating... +0ms\r\n  db:meta:graph:schema:bytecodes:resolvers Generating... +0ms\r\n  db:meta:graph:schema:bytecodes:resolvers Generated. +0ms\r\n  db:meta:graph:schema:bytecodes:resolvers Generated. +0ms\r\n  db:meta:graph:schema:compilations:resolvers Generating... +0ms\r\n  db:meta:graph:schema:compilations:resolvers Generating... +0ms\r\n  db:meta:graph:schema:compilations:resolvers Generated. +0ms\r\n  db:meta:graph:schema:compilations:resolvers Generated. +0ms\r\n  db:meta:graph:schema:contracts:resolvers Generating... +0ms\r\n  db:meta:graph:schema:contracts:resolvers Generating... +0ms\r\n  db:meta:graph:schema:contracts:resolvers Generated. +0ms\r\n  db:meta:graph:schema:contracts:resolvers Generated. +0ms\r\n  db:meta:graph:schema:contractInstances:resolvers Generating... +0ms\r\n  db:meta:graph:schema:contractInstances:resolvers Generating... +0ms\r\n  db:meta:graph:schema:contractInstances:resolvers Generated. +0ms\r\n  db:meta:graph:schema:contractInstances:resolvers Generated. +0ms\r\n  db:meta:graph:schema:networks:resolvers Generating... +0ms\r\n  db:meta:graph:schema:networks:resolvers Generating... +0ms\r\n  db:meta:graph:schema:networks:resolvers Generated. +0ms\r\n  db:meta:graph:schema:networks:resolvers Generated. +0ms\r\n  db:meta:graph:schema:nameRecords:resolvers Generating... +0ms\r\n  db:meta:graph:schema:nameRecords:resolvers Generating... +0ms\r\n  db:meta:graph:schema:nameRecords:resolvers Generated. +0ms\r\n  db:meta:graph:schema:nameRecords:resolvers Generated. +0ms\r\n  db:meta:graph:schema:projects:resolvers Generating... +0ms\r\n  db:meta:graph:schema:projects:resolvers Generating... +0ms\r\n  db:meta:graph:schema:projects:resolvers Generated. +1ms\r\n  db:meta:graph:schema:projects:resolvers Generated. +1ms\r\n  db:meta:graph:schema:projectNames:resolvers Generating... +0ms\r\n  db:meta:graph:schema:projectNames:resolvers Generating... +0ms\r\n  db:meta:graph:schema:projectNames:resolvers Generated. +0ms\r\n  db:meta:graph:schema:projectNames:resolvers Generated. +0ms\r\n  db:meta:graph:schema:networkGenealogies:resolvers Generating... +0ms\r\n  db:meta:graph:schema:networkGenealogies:resolvers Generating... +0ms\r\n  db:meta:graph:schema:networkGenealogies:resolvers Generated. +0ms\r\n  db:meta:graph:schema:networkGenealogies:resolvers Generated. +0ms\r\n  db:meta:graph:schema:resolvers Generated. +2ms\r\n```\r\n",
  "closed_by": {
    "login": "cds-amal",
    "id": 2529600,
    "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cds-amal",
    "html_url": "https://github.com/cds-amal",
    "followers_url": "https://api.github.com/users/cds-amal/followers",
    "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
    "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
    "organizations_url": "https://api.github.com/users/cds-amal/orgs",
    "repos_url": "https://api.github.com/users/cds-amal/repos",
    "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cds-amal/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/884383596",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4192#issuecomment-884383596",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192",
    "id": 884383596,
    "node_id": "IC_kwDOAkfq-c40tp9s",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-21T18:03:09Z",
    "updated_at": "2021-07-21T18:04:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like those logs come from importing @truffle/db. Seems like we should have some kind of guard to prevent the import when a user has it disabled.\r\n\r\nhttps://github.com/trufflesuite/truffle/issues/4141 is related. Fixing that will fix this.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/884383596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/890147045",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4192#issuecomment-890147045",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4192",
    "id": 890147045,
    "node_id": "IC_kwDOAkfq-c41DpDl",
    "user": {
      "login": "cds-amal",
      "id": 2529600,
      "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cds-amal",
      "html_url": "https://github.com/cds-amal",
      "followers_url": "https://api.github.com/users/cds-amal/followers",
      "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
      "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
      "organizations_url": "https://api.github.com/users/cds-amal/orgs",
      "repos_url": "https://api.github.com/users/cds-amal/repos",
      "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cds-amal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T20:51:10Z",
    "updated_at": "2021-07-30T20:51:10Z",
    "author_association": "MEMBER",
    "body": "The [latest release](https://github.com/trufflesuite/truffle/releases/tag/v5.4.3) should have fixed this",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/890147045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

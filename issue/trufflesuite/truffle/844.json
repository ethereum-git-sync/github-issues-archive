{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/844",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/844/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/844/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/844/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/844",
  "id": 304412702,
  "node_id": "MDU6SXNzdWUzMDQ0MTI3MDI=",
  "number": 844,
  "title": "TypeError: contract.detectNetwork is not a function",
  "user": {
    "login": "neilrjones",
    "id": 3137626,
    "node_id": "MDQ6VXNlcjMxMzc2MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3137626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/neilrjones",
    "html_url": "https://github.com/neilrjones",
    "followers_url": "https://api.github.com/users/neilrjones/followers",
    "following_url": "https://api.github.com/users/neilrjones/following{/other_user}",
    "gists_url": "https://api.github.com/users/neilrjones/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/neilrjones/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/neilrjones/subscriptions",
    "organizations_url": "https://api.github.com/users/neilrjones/orgs",
    "repos_url": "https://api.github.com/users/neilrjones/repos",
    "events_url": "https://api.github.com/users/neilrjones/events{/privacy}",
    "received_events_url": "https://api.github.com/users/neilrjones/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-03-12T15:11:43Z",
  "updated_at": "2018-03-12T16:32:02Z",
  "closed_at": "2018-03-12T16:25:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [ x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nTrying to deploy a contract with constructor parameters to a private network.  Contracts without parameters deploy with no problem\r\n\r\n## Steps to Reproduce\r\n\r\ntruffle.cmd migrate --reset\r\n\r\n## Expected Behavior\r\n\r\nContract migrated and deployed\r\n\r\n## Actual Results\r\n\r\ntruffle.cmd migrate --reset\r\nUsing network 'development'.\r\n\r\nRunning migration: 1_initial_migration.js\r\n  Replacing Migrations...\r\n  ... 0xdd72b111135e5692bfd8c54a46eede53471ff6b2fbc9ab643fbb62e318825c5e\r\n  Migrations: 0x6003fccaaf4f67b3c8419c3201ba40983753f370\r\nSaving successful migration to network...\r\n  ... 0x814fecd2ae043c5957e1ea0eecd211de6bc36d087da80b99378125af9d07581f\r\nSaving artifacts...\r\nRunning migration: 2_d.js\r\nError encountered, bailing. Network state unknown. Review successful transactions manually.\r\nTypeError: contract.detectNetwork is not a function\r\n    at C:\\Users\\neilrjones\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-deployer\\src\\actions\\deploy.js:6:1\r\n    at C:\\Users\\neilrjones\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-deployer\\src\\actions\\deploymany.js:15:1\r\n    at Array.map (<anonymous>)\r\n    at C:\\Users\\neilrjones\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-deployer\\src\\actions\\deploymany.js:5:1\r\n    at C:\\Users\\neilrjones\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\webpack:\\~\\truffle-deployer\\src\\deferredchain.js:20:1\r\n    at <anonymous>\r\n\r\n## Environment\r\n\r\n* Operating System: \r\nWindows 10\r\n* Ethereum client:\r\nGeth\r\nVersion: 1.7.3-stable\r\nGit Commit: 4bb3c89d44e372e6a9ab85a8be0c9345265c763a\r\nArchitecture: amd64\r\nProtocol Versions: [63 62]\r\nNetwork Id: 1\r\nGo Version: go1.9\r\nOperating System: windows\r\nGOPATH=\r\nGOROOT=C:\\tools\\go\r\n\r\n\r\n* Truffle version (`truffle version`):Truffle v4.0.6 (core: 4.0.6) Solidity v0.4.19 (solc-js)\r\n* node version (`node --version`):\r\n* npm version (`npm --version`): 5.5.1\r\n\r\n2_deploy.js\r\n/* eslint-disable */\r\nvar Owned = artifacts.require('Owned');\r\nvar SouSouMain = artifacts.require('SouSouMain');\r\n\r\nrequire('dotenv').config();\r\nvar Web3 = require('web3');\r\n\r\nif (typeof web3 !== 'undefined') {\r\n  web3 = new Web3(web3.currentProvider);\r\n} else {\r\n  web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'));\r\n}\r\nlet softCap = 5000000000000000000;\r\nlet hardCap = 100000000000000000000;\r\nlet startTimestamp = Math.floor(Date.now() / 1000);\r\nconst endTime = startTimestamp + 86400 * 20; // 20 days\r\nconst oneEth = 1000000000000000000;\r\nconst minCap = 2000000000000000000;\r\nconst maxCap = 5000000000000000000;\r\n\r\nmodule.exports = function(deployer, network, accounts) {\r\n  var fundsWallet = accounts[0];\r\n  var owner = accounts[0];\r\n  var sousouId = 1;\r\n  var cycles = 12;\r\n  var durationSeconds = 4 * 7 * 24 * 60 * 60; // 4 weeks\r\n  var numSubGroups = 0;\r\n  var tokenIco = '0x0';\r\n\r\n  deployer.deploy([\r\n    SouSouMain,\r\n    owner,\r\n    sousouId,\r\n    cycles,\r\n    durationSeconds,\r\n    numSubGroups\r\n  ]);\r\n};\r\n\r\ntruffle.js\r\nrequire('babel-register');\r\nrequire('babel-polyfill');\r\n\r\nmodule.exports = {\r\n  networks: {\r\n    development: {\r\n      host: '127.0.0.1',\r\n      port: 8545,\r\n      network_id: '*', // Match any network id\r\n      from: '0x96e59edfbf5e4f92f682f740d4cba5b553520347', // eslint-disable-line\r\n      gas: 2900000\r\n    },\r\n    private: {\r\n      host: '127.0.0.1',\r\n      port: 8545,\r\n      network_id: '*', // Match any network id\r\n      from: '0x96e59edfbf5e4f92f682f740d4cba5b553520347', // eslint-disable-line\r\n      gas: 6700000, // 2900000\r\n      gasPrice: 400000000000\r\n    },\r\n    rinkeby: {\r\n      host: 'localhost', // eslint-disable-line\r\n      port: 8545,\r\n      from: '0x96e59edfbf5e4f92f682f740d4cba5b553520347', // eslint-disable-line\r\n      network_id: 4,\r\n      gas: 4612388, // Gas limit used for deploys\r\n      gasPrice: 100000000000\r\n    },\r\n    ropsten: {\r\n      host: 'localhost', // eslint-disable-line\r\n      port: 8545,\r\n      from: '0x96e59edfbf5e4f92f682f740d4cba5b553520347', // eslint-disable-line\r\n      network_id: '3'\r\n    }\r\n  },\r\n  mocha: {\r\n    useColors: true,\r\n    timeout: 0\r\n  },\r\n  solc: { optimizer: { enabled: true, runs: 200 } }\r\n};\r\n\r\n",
  "closed_by": {
    "login": "neilrjones",
    "id": 3137626,
    "node_id": "MDQ6VXNlcjMxMzc2MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3137626?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/neilrjones",
    "html_url": "https://github.com/neilrjones",
    "followers_url": "https://api.github.com/users/neilrjones/followers",
    "following_url": "https://api.github.com/users/neilrjones/following{/other_user}",
    "gists_url": "https://api.github.com/users/neilrjones/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/neilrjones/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/neilrjones/subscriptions",
    "organizations_url": "https://api.github.com/users/neilrjones/orgs",
    "repos_url": "https://api.github.com/users/neilrjones/repos",
    "events_url": "https://api.github.com/users/neilrjones/events{/privacy}",
    "received_events_url": "https://api.github.com/users/neilrjones/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/844/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/844/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/372371567",
    "html_url": "https://github.com/trufflesuite/truffle/issues/844#issuecomment-372371567",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/844",
    "id": 372371567,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjM3MTU2Nw==",
    "user": {
      "login": "neilrjones",
      "id": 3137626,
      "node_id": "MDQ6VXNlcjMxMzc2MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3137626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/neilrjones",
      "html_url": "https://github.com/neilrjones",
      "followers_url": "https://api.github.com/users/neilrjones/followers",
      "following_url": "https://api.github.com/users/neilrjones/following{/other_user}",
      "gists_url": "https://api.github.com/users/neilrjones/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/neilrjones/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/neilrjones/subscriptions",
      "organizations_url": "https://api.github.com/users/neilrjones/orgs",
      "repos_url": "https://api.github.com/users/neilrjones/repos",
      "events_url": "https://api.github.com/users/neilrjones/events{/privacy}",
      "received_events_url": "https://api.github.com/users/neilrjones/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T16:25:56Z",
    "updated_at": "2018-03-12T16:25:56Z",
    "author_association": "NONE",
    "body": "I believe we can close this issue.  Looks like Truffle does not like the [] when there is only one contract being deployed.\r\n\r\nChange:\r\ndeployer.deploy([\r\nSouSouMain,\r\nowner,\r\nsousouId,\r\ncycles,\r\ndurationSeconds,\r\nnumSubGroups\r\n]);\r\nto:\r\ndeployer.deploy(\r\nSouSouMain,\r\nowner,\r\nsousouId,\r\ncycles,\r\ndurationSeconds,\r\nnumSubGroups\r\n);",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/372371567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/372373879",
    "html_url": "https://github.com/trufflesuite/truffle/issues/844#issuecomment-372373879",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/844",
    "id": 372373879,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjM3Mzg3OQ==",
    "user": {
      "login": "neilrjones",
      "id": 3137626,
      "node_id": "MDQ6VXNlcjMxMzc2MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3137626?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/neilrjones",
      "html_url": "https://github.com/neilrjones",
      "followers_url": "https://api.github.com/users/neilrjones/followers",
      "following_url": "https://api.github.com/users/neilrjones/following{/other_user}",
      "gists_url": "https://api.github.com/users/neilrjones/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/neilrjones/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/neilrjones/subscriptions",
      "organizations_url": "https://api.github.com/users/neilrjones/orgs",
      "repos_url": "https://api.github.com/users/neilrjones/repos",
      "events_url": "https://api.github.com/users/neilrjones/events{/privacy}",
      "received_events_url": "https://api.github.com/users/neilrjones/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-12T16:32:02Z",
    "updated_at": "2018-03-12T16:32:02Z",
    "author_association": "NONE",
    "body": "By the way,\r\nTruffle does not seem to have a problem with the [] if no constructor parameters are passed.\r\ndeployer.deploy([SouSouFundsMet]);\r\n\r\nWorks with no problem but \r\ndeployer.deploy([SouSouMain,owner,sousouId,cycles,durationSeconds,numSubGroups]);\r\n\r\nDoes not.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/372373879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1895",
  "id": 431074866,
  "node_id": "MDU6SXNzdWU0MzEwNzQ4NjY=",
  "number": 1895,
  "title": "Migration against infura erroring during `Reporter.postDeploy()`",
  "user": {
    "login": "adamgall",
    "id": 706929,
    "node_id": "MDQ6VXNlcjcwNjkyOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/706929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/adamgall",
    "html_url": "https://github.com/adamgall",
    "followers_url": "https://api.github.com/users/adamgall/followers",
    "following_url": "https://api.github.com/users/adamgall/following{/other_user}",
    "gists_url": "https://api.github.com/users/adamgall/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/adamgall/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/adamgall/subscriptions",
    "organizations_url": "https://api.github.com/users/adamgall/orgs",
    "repos_url": "https://api.github.com/users/adamgall/repos",
    "events_url": "https://api.github.com/users/adamgall/events{/privacy}",
    "received_events_url": "https://api.github.com/users/adamgall/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "CruzMolina",
    "id": 7537712,
    "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CruzMolina",
    "html_url": "https://github.com/CruzMolina",
    "followers_url": "https://api.github.com/users/CruzMolina/followers",
    "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
    "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
    "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
    "repos_url": "https://api.github.com/users/CruzMolina/repos",
    "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2019-04-09T16:54:54Z",
  "updated_at": "2019-04-25T16:40:10Z",
  "closed_at": "2019-04-25T16:39:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue. -> https://gitter.im/ConsenSys/truffle?at=5caccc2225686a7dc301cab4\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nGetting errors thrown from this line when doing migrations and using `HDWalletProvider` connected to infura nodes.\r\n\r\n```\r\n2_deploy_contract.js\r\n=========================\r\n\r\n   Deploying 'Contract'\r\n   ----------------------------------\r\n   > transaction hash:    0xtxH4sh\r\n   â ¹ Blocks: 0            Seconds: 0TypeError: Cannot read property 'timestamp' of null\r\n    at Reporter.postDeploy (/../node_modules/truffle/build/webpack:/packages/truffle-reporters/reporters/migrations-V5/reporter.js:317:1)\r\n    at processTicksAndRejections (internal/process/next_tick.js:81:5)\r\n   â ¦ Blocks: 0            Seconds: 0\r\n```\r\n\r\nMigration hangs at this point.\r\n\r\nThis was likely introduced in https://github.com/trufflesuite/truffle/pull/1868, and is probably due to infura using an array of endpoint nodes, which might not all have the same block state at any given moment.\r\n\r\n## Steps to Reproduce\r\n\r\nPerform a migration using `HDWalletProvider`, pointed at a public infura endpoint (such as https://ropsten.infura.io/v3/your-key), and observe the above error. It's sporadic, but has been happening very often for me.\r\n\r\n## Expected Behavior\r\n\r\nI'd expect that the migration does not fail.\r\n\r\n## Actual Results\r\n\r\nSee error text above :)\r\n\r\n## Environment\r\n\r\n* Operating System: OSX 10.14.3\r\n* Ethereum client: infura via https://ropsten.infura.io/v3/your-key\r\n* Truffle version (`truffle version`):\r\n```\r\nTruffle v5.0.11 (core: 5.0.11)\r\nSolidity v0.5.0 (solc-js)\r\nNode v11.12.0\r\nWeb3.js v1.0.0-beta.37\r\n```\r\n* node version (`node --version`): 11.12.0\r\n* npm version (`npm --version`): 6.9.0\r\n",
  "closed_by": {
    "login": "CruzMolina",
    "id": 7537712,
    "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CruzMolina",
    "html_url": "https://github.com/CruzMolina",
    "followers_url": "https://api.github.com/users/CruzMolina/followers",
    "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
    "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
    "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
    "repos_url": "https://api.github.com/users/CruzMolina/repos",
    "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481335815",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-481335815",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 481335815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTMzNTgxNQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-09T16:59:32Z",
    "updated_at": "2019-04-09T16:59:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @adamgall , literally just noticed this error on my end while looking into other `truffle-hdwallet-provider`-related issues!\r\n\r\nHoping to fix this shortly ðŸ¤ž ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481335815/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481343046",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-481343046",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 481343046,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTM0MzA0Ng==",
    "user": {
      "login": "adamgall",
      "id": 706929,
      "node_id": "MDQ6VXNlcjcwNjkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/706929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamgall",
      "html_url": "https://github.com/adamgall",
      "followers_url": "https://api.github.com/users/adamgall/followers",
      "following_url": "https://api.github.com/users/adamgall/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamgall/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamgall/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamgall/subscriptions",
      "organizations_url": "https://api.github.com/users/adamgall/orgs",
      "repos_url": "https://api.github.com/users/adamgall/repos",
      "events_url": "https://api.github.com/users/adamgall/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamgall/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-09T17:19:39Z",
    "updated_at": "2019-04-09T17:19:39Z",
    "author_association": "NONE",
    "body": "For anyone else out there in the meantime, downgrading to `truffle v5.0.10` allowed me to run migrations against infura without issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481343046/reactions",
      "total_count": 5,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481441199",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-481441199",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 481441199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTQ0MTE5OQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-09T21:09:02Z",
    "updated_at": "2019-04-09T21:09:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "so it looks like this is a known issue when polling from both geth & parity nodes (paritytech/parity-ethereum#8788, paritytech/parity-ethereum#6334, INFURA/infura/issues/43). I've noticed locally it's a sporadic error, but happens often enough to ruin the migrations experience. PR incoming.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481441199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/483282097",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-483282097",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 483282097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzI4MjA5Nw==",
    "user": {
      "login": "PaulRBerg",
      "id": 8782666,
      "node_id": "MDQ6VXNlcjg3ODI2NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8782666?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PaulRBerg",
      "html_url": "https://github.com/PaulRBerg",
      "followers_url": "https://api.github.com/users/PaulRBerg/followers",
      "following_url": "https://api.github.com/users/PaulRBerg/following{/other_user}",
      "gists_url": "https://api.github.com/users/PaulRBerg/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PaulRBerg/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PaulRBerg/subscriptions",
      "organizations_url": "https://api.github.com/users/PaulRBerg/orgs",
      "repos_url": "https://api.github.com/users/PaulRBerg/repos",
      "events_url": "https://api.github.com/users/PaulRBerg/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PaulRBerg/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T14:45:25Z",
    "updated_at": "2019-04-15T14:45:25Z",
    "author_association": "NONE",
    "body": "Why has this been closed? Using the latest version of truffle, that is `v5.0.12`, I still have this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/483282097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/483283218",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-483283218",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 483283218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzI4MzIxOA==",
    "user": {
      "login": "adamgall",
      "id": 706929,
      "node_id": "MDQ6VXNlcjcwNjkyOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/706929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamgall",
      "html_url": "https://github.com/adamgall",
      "followers_url": "https://api.github.com/users/adamgall/followers",
      "following_url": "https://api.github.com/users/adamgall/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamgall/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamgall/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamgall/subscriptions",
      "organizations_url": "https://api.github.com/users/adamgall/orgs",
      "repos_url": "https://api.github.com/users/adamgall/repos",
      "events_url": "https://api.github.com/users/adamgall/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamgall/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T14:47:58Z",
    "updated_at": "2019-04-15T14:47:58Z",
    "author_association": "NONE",
    "body": "@PaulRBerg My fault, this is probably poor GitHub etiquette on my part.\r\n\r\nI believe that version `v5.0.13` will contain the fix.\r\n\r\n@CruzMolina what's the process for closing issues which contained merged fixes? Do you go through and close them after pushing a release?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/483283218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/483301851",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-483301851",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 483301851,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MzMwMTg1MQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-15T15:32:30Z",
    "updated_at": "2019-04-15T15:32:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@adamgall yup, we typically do issue grooming after release. This should be released in `v5.0.13` by end of week. Keeping this open for now.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/483301851/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/486748282",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1895#issuecomment-486748282",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1895",
    "id": 486748282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Njc0ODI4Mg==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-25T16:39:46Z",
    "updated_at": "2019-04-25T16:40:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing since I believe this has been resolved in `5.0.13`. Happy to reopen if it's still a problem.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/486748282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4481",
  "id": 1069075401,
  "node_id": "I_kwDOAkfq-c4_uMvJ",
  "number": 4481,
  "title": "Add detail log",
  "user": {
    "login": "wxy",
    "id": 128338,
    "node_id": "MDQ6VXNlcjEyODMzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/128338?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wxy",
    "html_url": "https://github.com/wxy",
    "followers_url": "https://api.github.com/users/wxy/followers",
    "following_url": "https://api.github.com/users/wxy/following{/other_user}",
    "gists_url": "https://api.github.com/users/wxy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wxy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wxy/subscriptions",
    "organizations_url": "https://api.github.com/users/wxy/orgs",
    "repos_url": "https://api.github.com/users/wxy/repos",
    "events_url": "https://api.github.com/users/wxy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wxy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-12-02T03:00:24Z",
  "updated_at": "2022-01-23T01:12:01Z",
  "closed_at": "2022-01-23T01:12:00Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "- [X] I've [opened a support ticket](https://trufflesuite.zendesk.com/hc/en-us/requests/new) before filing this issue. （Ticket: 521615）\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI am using Truffle to deploy smart contracts to the main network. Unfortunately, I am experiencing a timeout issue during the deployment process. So, I would like to be able to add detailed logging so that errors can be troubleshot, or can be fixed manually to continue to completion.\r\n\r\n## Steps to Reproduce\r\n\r\nThis happens when using slow links for deployment via Infura.\r\n\r\n## Expected Behavior\r\n\r\nDeployment success.\r\n\r\n## Actual Results\r\n\r\nThe deployment was interrupted due to a timeout.\r\n\r\n```\r\n> confirmation number: 1 (block: 13651340)\r\n> confirmation number: 2 (block: 13651341)\r\n\r\n- Blocks: 0 Seconds: 0\r\n- Saving migration to chain.\r\n- Blocks: 0 Seconds: 0\r\n- Blocks: 0 Seconds: 0\r\n- Blocks: 0 Seconds: 0\r\n- Saving migration to chain.\r\n\r\n....../node_modules/request/request.js:816\r\nvar e = new Error('ESOCKETTIMEDOUT')\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: MacOS\r\n* Ethereum client: Truffle\r\n* Truffle version (`truffle version`):\r\n* node version (`node --version`):\r\n* npm version (`npm --version`): \r\n",
  "closed_by": {
    "login": "wxy",
    "id": 128338,
    "node_id": "MDQ6VXNlcjEyODMzOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/128338?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wxy",
    "html_url": "https://github.com/wxy",
    "followers_url": "https://api.github.com/users/wxy/followers",
    "following_url": "https://api.github.com/users/wxy/following{/other_user}",
    "gists_url": "https://api.github.com/users/wxy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wxy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wxy/subscriptions",
    "organizations_url": "https://api.github.com/users/wxy/orgs",
    "repos_url": "https://api.github.com/users/wxy/repos",
    "events_url": "https://api.github.com/users/wxy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wxy/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989081201",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4481#issuecomment-989081201",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481",
    "id": 989081201,
    "node_id": "IC_kwDOAkfq-c469C5x",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-08T18:38:06Z",
    "updated_at": "2021-12-08T18:38:06Z",
    "author_association": "MEMBER",
    "body": "Hi @wxy thanks for bringing up this issue! We always want to provide more detailed logging where possible/appropriate. \r\n\r\nCan you clarify what \"slow links for deployment via Infura\" means? Do you mind also providing the information in the \"Environment\" section above?\r\n\r\nI'm not sure what additional information we could add in logging here that would be helpful? What information would you have wanted to see here?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989081201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989921301",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4481#issuecomment-989921301",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481",
    "id": 989921301,
    "node_id": "IC_kwDOAkfq-c47AQAV",
    "user": {
      "login": "wxy",
      "id": 128338,
      "node_id": "MDQ6VXNlcjEyODMzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/128338?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wxy",
      "html_url": "https://github.com/wxy",
      "followers_url": "https://api.github.com/users/wxy/followers",
      "following_url": "https://api.github.com/users/wxy/following{/other_user}",
      "gists_url": "https://api.github.com/users/wxy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wxy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wxy/subscriptions",
      "organizations_url": "https://api.github.com/users/wxy/orgs",
      "repos_url": "https://api.github.com/users/wxy/repos",
      "events_url": "https://api.github.com/users/wxy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wxy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-09T14:48:49Z",
    "updated_at": "2021-12-09T14:48:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you very much for your reply. This issue occurred when I deployed a smart contract through Infura. I'm in China, so connecting to Infura seems to be slow, especially when deploying contracts. I have no way to change to another network, and although I have increased the timeout parameters (`timeoutBlocks: 150` and `networkCheckTimeout: 999999`), it still times out after waiting for about 10 minutes, and the deployment is broken.\r\n\r\nSo after a deployment break, I don't know where the deployment is going and I can't fix it manually or continue. So I wanted to provide a detailed log so that I knew what was being done when the deployment was interrupted.\r\n\r\nOf course, I later learned that I could modify it by adding some parameters to the Network file (cf. Rinkeby).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989921301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1011388814",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4481#issuecomment-1011388814",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481",
    "id": 1011388814,
    "node_id": "IC_kwDOAkfq-c48SJGO",
    "user": {
      "login": "kevinbluer",
      "id": 210755,
      "node_id": "MDQ6VXNlcjIxMDc1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/210755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinbluer",
      "html_url": "https://github.com/kevinbluer",
      "followers_url": "https://api.github.com/users/kevinbluer/followers",
      "following_url": "https://api.github.com/users/kevinbluer/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinbluer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinbluer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinbluer/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinbluer/orgs",
      "repos_url": "https://api.github.com/users/kevinbluer/repos",
      "events_url": "https://api.github.com/users/kevinbluer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinbluer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-12T19:39:25Z",
    "updated_at": "2022-01-12T19:39:25Z",
    "author_association": "MEMBER",
    "body": "Hey @wxy, thanks for all the additional detail! One thing you could try during the deployment is enabling Truffle's internal debug logging (note that this is something we use during development / troubleshooting)...example as follows:\n\n```\nDEBUG=“*” truffle migrate\n```\n\nFeel free to try it and see if it provides anything useful. If not, let us know and we look at other options.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1011388814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1019388402",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4481#issuecomment-1019388402",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4481",
    "id": 1019388402,
    "node_id": "IC_kwDOAkfq-c48wqHy",
    "user": {
      "login": "wxy",
      "id": 128338,
      "node_id": "MDQ6VXNlcjEyODMzOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/128338?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wxy",
      "html_url": "https://github.com/wxy",
      "followers_url": "https://api.github.com/users/wxy/followers",
      "following_url": "https://api.github.com/users/wxy/following{/other_user}",
      "gists_url": "https://api.github.com/users/wxy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wxy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wxy/subscriptions",
      "organizations_url": "https://api.github.com/users/wxy/orgs",
      "repos_url": "https://api.github.com/users/wxy/repos",
      "events_url": "https://api.github.com/users/wxy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wxy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T01:12:00Z",
    "updated_at": "2022-01-23T01:12:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@kevinbluer Thanks for your reply, I will try it later. 😃",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1019388402/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

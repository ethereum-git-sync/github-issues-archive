{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/5066",
  "id": 1219067615,
  "node_id": "I_kwDOAkfq-c5IqX7f",
  "number": 5066,
  "title": "Unable to run tests explicitly from a selected folder",
  "user": {
    "login": "mario-christopher",
    "id": 28613341,
    "node_id": "MDQ6VXNlcjI4NjEzMzQx",
    "avatar_url": "https://avatars.githubusercontent.com/u/28613341?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mario-christopher",
    "html_url": "https://github.com/mario-christopher",
    "followers_url": "https://api.github.com/users/mario-christopher/followers",
    "following_url": "https://api.github.com/users/mario-christopher/following{/other_user}",
    "gists_url": "https://api.github.com/users/mario-christopher/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mario-christopher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mario-christopher/subscriptions",
    "organizations_url": "https://api.github.com/users/mario-christopher/orgs",
    "repos_url": "https://api.github.com/users/mario-christopher/repos",
    "events_url": "https://api.github.com/users/mario-christopher/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mario-christopher/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 1675041796,
      "node_id": "MDU6TGFiZWwxNjc1MDQxNzk2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority3%20%F0%9F%94%A7",
      "name": "priority3 ðŸ”§",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-04-28T17:45:06Z",
  "updated_at": "2023-09-27T23:06:28Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nI want to be able to run Tests from a selected folder. On discussing with the Truffle team, it seems that this is possible using the cmdLine :\r\n`truffle test .test/phase-3/*.js`\r\n\r\nWhen the above cmd is executed from package.json scripts, I get the error :\r\n`Error: Cannot find module 'D:\\<folder-path>\\test\\phase-3\\*.js'`\r\n\r\nWhen the above cmd is executed directly, I get no error, but no Tests are executed .\r\nCould be a \"Windows\" specific error ?\r\n\r\n## Steps to Reproduce\r\n\r\nOn a Windows machine, create a sub-folder under the `test` directory, and create your test file in it.\r\nRun `truffle test .test/phase-3/*.js` either from package.json scripts or directly.\r\n\r\n## Expected Behavior\r\n\r\nTests within the sub-folder alone should execute.\r\n\r\n## Actual Results\r\n\r\nNo tests are executed\r\n\r\n## Environment\r\n\r\n* Operating System: Windows\r\n* Truffle v5.5.2 (core: 5.5.2)\r\n* Ganache v7.0.1\r\n* Solidity - 0.8.12 (solc-js)\r\n* Node v14.17.6\r\n* Web3.js v1.5.3: \r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1138944510",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5066#issuecomment-1138944510",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066",
    "id": 1138944510,
    "node_id": "IC_kwDOAkfq-c5D4un-",
    "user": {
      "login": "swisstackle",
      "id": 63764679,
      "node_id": "MDQ6VXNlcjYzNzY0Njc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/63764679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/swisstackle",
      "html_url": "https://github.com/swisstackle",
      "followers_url": "https://api.github.com/users/swisstackle/followers",
      "following_url": "https://api.github.com/users/swisstackle/following{/other_user}",
      "gists_url": "https://api.github.com/users/swisstackle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/swisstackle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/swisstackle/subscriptions",
      "organizations_url": "https://api.github.com/users/swisstackle/orgs",
      "repos_url": "https://api.github.com/users/swisstackle/repos",
      "events_url": "https://api.github.com/users/swisstackle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/swisstackle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-26T19:43:05Z",
    "updated_at": "2022-05-26T19:44:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Reproduced the error. Same error message.\r\n\r\nWhen using the specific filename, it works:\r\ni.e: truffle test ./test/testest/PlayersTest.js\r\n\r\nWith \"*.js\" it doesnt work.\r\n\r\nI've tested it with the commandline, not in package.json scripts.\r\n\r\nTruffle version: 5.5.11\r\nNode version: 16.14.0\r\nOS: Windows 10",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1138944510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1139077237",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5066#issuecomment-1139077237",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066",
    "id": 1139077237,
    "node_id": "IC_kwDOAkfq-c5D5PB1",
    "user": {
      "login": "swisstackle",
      "id": 63764679,
      "node_id": "MDQ6VXNlcjYzNzY0Njc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/63764679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/swisstackle",
      "html_url": "https://github.com/swisstackle",
      "followers_url": "https://api.github.com/users/swisstackle/followers",
      "following_url": "https://api.github.com/users/swisstackle/following{/other_user}",
      "gists_url": "https://api.github.com/users/swisstackle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/swisstackle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/swisstackle/subscriptions",
      "organizations_url": "https://api.github.com/users/swisstackle/orgs",
      "repos_url": "https://api.github.com/users/swisstackle/repos",
      "events_url": "https://api.github.com/users/swisstackle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/swisstackle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-26T21:27:53Z",
    "updated_at": "2022-05-26T21:34:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "@cds-amal @gnidan @eggplantzzz\r\nShould we even consider making \"*.js\" work? Why don't we just give the user an option to give a directory and then all the files inside the directory are being tested.\r\n\r\nSee the comment inside  else if (inputArgs.length > 0) {}. There we could just check if inputArgs is a directory and if yes, push all the files to filesToRun. If we wanna make it even better, we could even accept multiple directories so that the user can organize his tests better. I could implement this real quick and make a PR.\r\n\r\n```\r\nconst determineTestFilesToRun = ({ inputFile, inputArgs = [], config }) => {\r\n  const path = require(\"path\");\r\n  const fs = require(\"fs\");\r\n  const glob = require(\"glob\");\r\n  let filesToRun = [];\r\n\r\n  console.log(\"inputArgs: \"+inputArgs);\r\n  if (inputFile) {\r\n    filesToRun.push(inputFile);\r\n  } else if (inputArgs.length > 0) {\r\n\r\n\r\n\r\n   //Check if inputArgs is a directory, if yes, just push all files fo filesToRun\r\n\r\n\r\n    inputArgs.forEach(inputArg => filesToRun.push(inputArg));\r\n  }\r\n\r\n  if (filesToRun.length === 0) {\r\n    const directoryContents = glob.sync(\r\n      `${config.test_directory}${path.sep}**${path.sep}*`\r\n    );\r\n    filesToRun =\r\n      directoryContents.filter(item => fs.statSync(item).isFile()) || [];\r\n  }\r\n  return filesToRun.filter(file => {\r\n    return file.match(config.test_file_extension_regexp) !== null;\r\n  });\r\n};\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1139077237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1145461938",
    "html_url": "https://github.com/trufflesuite/truffle/issues/5066#issuecomment-1145461938",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/5066",
    "id": 1145461938,
    "node_id": "IC_kwDOAkfq-c5ERlyy",
    "user": {
      "login": "swisstackle",
      "id": 63764679,
      "node_id": "MDQ6VXNlcjYzNzY0Njc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/63764679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/swisstackle",
      "html_url": "https://github.com/swisstackle",
      "followers_url": "https://api.github.com/users/swisstackle/followers",
      "following_url": "https://api.github.com/users/swisstackle/following{/other_user}",
      "gists_url": "https://api.github.com/users/swisstackle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/swisstackle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/swisstackle/subscriptions",
      "organizations_url": "https://api.github.com/users/swisstackle/orgs",
      "repos_url": "https://api.github.com/users/swisstackle/repos",
      "events_url": "https://api.github.com/users/swisstackle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/swisstackle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-03T00:11:23Z",
    "updated_at": "2022-06-03T00:11:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "I am working on implementing it at the moment. \r\nI am writing test cases for this functionality at the moment. Where do you guys typically locate tests for commands that don't have their own package (such as the test command)?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1145461938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

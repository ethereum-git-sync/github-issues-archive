{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/758",
  "id": 290260567,
  "node_id": "MDU6SXNzdWUyOTAyNjA1Njc=",
  "number": 758,
  "title": "Deployment of multiple contracts not recorded in JSON files",
  "user": {
    "login": "terraflops1048576",
    "id": 3110527,
    "node_id": "MDQ6VXNlcjMxMTA1Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3110527?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terraflops1048576",
    "html_url": "https://github.com/terraflops1048576",
    "followers_url": "https://api.github.com/users/terraflops1048576/followers",
    "following_url": "https://api.github.com/users/terraflops1048576/following{/other_user}",
    "gists_url": "https://api.github.com/users/terraflops1048576/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terraflops1048576/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terraflops1048576/subscriptions",
    "organizations_url": "https://api.github.com/users/terraflops1048576/orgs",
    "repos_url": "https://api.github.com/users/terraflops1048576/repos",
    "events_url": "https://api.github.com/users/terraflops1048576/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terraflops1048576/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2018-01-21T09:56:01Z",
  "updated_at": "2018-03-11T18:07:39Z",
  "closed_at": "2018-02-06T05:29:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nProbably the same issue as in https://github.com/trufflesuite/truffle/issues/713. My contracts are interdependent, with some taking constructor arguments of the addresses of others. However, the workaround did not work for me; chaining the promises to run one after the other led to the same issue as separating them into different migrations.\r\n\r\n## Steps to Reproduce\r\n\r\n`truffle migrate --reset`\r\n`truffle console`\r\n```\r\nDummy.deployed()\r\n```\r\n\r\n## Expected Behavior\r\n\r\nI expect that Dummy.deployed() will give a thenable that I can use to access the deployed instance of Dummy. Ganache indicates that the contract deployment was successful (and all deployments succeeded in Remix), but Truffle doesn't seem to remember this. In fact none of the [X]Coin contracts exist in Truffle's mind; running ACoin.deployed() or FirstCoin.deployed() gives the same error, but Dummy in this case is an almost empty contract:\r\n\r\n```\r\ncontract Dummy {\r\n    function Dummy() public {}\r\n}\r\n```\r\nMigrations 2 and 3 deploy the data and support contracts that function properly. Migration 4 deploys the first currency contract; this is the first contract that can't be found. Migration 5 tries to deploy the rest, which can't be found either.\r\n\r\n\r\n## Actual Results\r\nSometimes this happens:\r\n```\r\nError: The contract code couldn't be stored, please check your gas amount.\r\n    at Object.callback (/usr/lib/node_modules/truffle/build/cli.bundled.js:328412:46)\r\n    at /usr/lib/node_modules/truffle/build/cli.bundled.js:37990:25\r\n    at /usr/lib/node_modules/truffle/build/cli.bundled.js:330356:9\r\n    at /usr/lib/node_modules/truffle/build/cli.bundled.js:176198:11\r\n    at /usr/lib/node_modules/truffle/build/cli.bundled.js:326008:9\r\n    at XMLHttpRequest.request.onreadystatechange (/usr/lib/node_modules/truffle/build/cli.bundled.js:329052:7)\r\n    at XMLHttpRequestEventTarget.dispatchEvent (/usr/lib/node_modules/truffle/build/cli.bundled.js:176427:18)\r\n    at XMLHttpRequest._setReadyState (/usr/lib/node_modules/truffle/build/cli.bundled.js:176717:12)\r\n    at XMLHttpRequest._onHttpResponseEnd (/usr/lib/node_modules/truffle/build/cli.bundled.js:176872:12)\r\n    at IncomingMessage.<anonymous> (/usr/lib/node_modules/truffle/build/cli.bundled.js:176832:24)\r\n\r\n```\r\nbut re-running truffle migrate --reset seems to fix the issue. This is not the main issue.\r\n\r\n```\r\nCompiling ./contracts/ERC20.sol...\r\nCompiling ./contracts/Migrations.sol...\r\nCompiling ./contracts/libraries/ITT/Math.sol...\r\nWriting artifacts to ./build/contracts\r\n\r\nUsing network 'development'.\r\n\r\nRunning migration: 1_initial_migration.js\r\n  Replacing Migrations...\r\n  ... 0xc8ccb8fad6c9556a24d7e18ee223835c3b42382fb22fbfe7092f9f61550f4460\r\n  Migrations: 0xbd2c938b9f6bfc1a66368d08cb44dc3eb2ae27be\r\nSaving successful migration to network...\r\n  ... 0xcd6eeb5bec35d4799909d5715cf44925a766a50d0e16dd1335253a006f4a3453\r\nSaving artifacts...\r\nRunning migration: 2_deploy_data.js\r\n  Replacing DataContract...\r\n  ... 0x16218bf15f1a99c37814235955550878a6042741462e1e194a10ed58ddd4081a\r\n  DataContract: 0x8acee021a27779d8e98b9650722676b850b25e11\r\nSaving successful migration to network...\r\n  ... 0x826afc1973ce8c2b0a3d54fb4804046aba83adb18f392cbad1f28953614a979a\r\nSaving artifacts...\r\nRunning migration: 3_deploy_itt.js\r\n  Replacing ITT...\r\n  ... 0x3d403e85e1ee8836b5984230a865b01d34eb36df5bf1bf246807c9178951d0e9\r\n  ITT: 0x4e71920b7330515faf5ea0c690f1ad06a85fb60c\r\nSaving successful migration to network...\r\n  ... 0x992da3cce5f8a6ee49f176f32dcdf629f8031c6056c81bf9325e211e14d96f5b\r\nSaving artifacts...\r\nRunning migration: 4_deploy_first_currency.js\r\nSaving successful migration to network...\r\n  Deploying FirstCoin...\r\n  ... 0x7d6e201bc467648d504bfe092bff8e4579ffef5775905ced095e5235e89e1717\r\nSaving artifacts...\r\n  ... 0xb25af8583898ca36c75b2d4436a584665f6cf998db5be229b1ccf01d9047f534\r\nRunning migration: 5_deploy_other_currencies.js\r\nSaving successful migration to network...\r\n  Deploying ACoin...\r\n  Deploying BCoin...\r\n  Deploying CCoin...\r\n  Deploying DCoin...\r\n  Deploying ECoin...\r\n  Deploying FCoin...\r\n  Deploying GCoin...\r\n  Deploying HCoin...\r\n  Deploying ICoin...\r\n  Deploying Dummy...\r\n  FirstCoin: 0xd54b47f8e6a1b97f3a84f63c867286272b273b7c\r\n  ... 0x03632a240b2d5c582304e61b1d78e6d5c1f31cff0d7a54469e8b7c380988452b\r\nSaving artifacts...\r\n  ... 0x29ab839997160936d574af0d1bfc892eaf1ec8147313a83490930f03a2950bb6\r\nRunning migration: 6_register_currencies.js\r\n  ... 0x150d4dc42f83c0ddb6178e3ed9076ecb4394ebacc6b736217d8abec9ecf40f40\r\nSaving successful migration to network...\r\n  ... 0xe4b22072becf51c29e1f982c2a91dfacd8070371d26af3a1fef4164f68c6fe3f\r\n  ... 0xc00494997f8fc1e88be93fc86573452c80b89010cd524278d10f7296b7ce606a\r\n  ... 0xfaeac5c9395482f4d8a8b310ffe184b05621a3ebbb1aef244f2a75bfc23d7406\r\n  ... 0xbacb020810d5859bd911aec131147b03ab9529ce2ac1968fa0b5774367443aaf\r\n  ... 0x9f0b1fa6ad57ca8a7b5373c3fce0b30576a0d522f8eefac44f4755c7d9adc166\r\n  ... 0x5f79133f5973ad46c9ed3edbced7f6b71d6ca39ad1e39fd862cd411227d35a22\r\n  ... 0xf501f0ced5dc35aae7745b837181a9d2693167673433c2ce9d3bdb10edfe451c\r\n  ... 0x265e69d23ad9423a631b95bf159599277db7afd4901b107f22652b1bd2fb2260\r\n  ... 0xd70e1e0da2f7bed7a00a98e41dafb661be409872315e4bb3c293b4845163fdd0\r\nSaving artifacts...\r\nRunning migration: 7_initialize_trading.js\r\nSaving successful migration to network...\r\n  BCoin: 0x8273e4b8ed6c78e252a9fca5563adfcc75c91b2a\r\n  ACoin: 0xcfed223fab2a41b5a5a5f9aaae2d1e882cb6fe2d\r\n  CCoin: 0x8273e4b8ed6c78e252a9fca5563adfcc75c91b2a\r\n  DCoin: 0xf08df3efdd854fede77ed3b2e515090eee765154\r\n  ICoin: 0x2467636bea0f3c2441227eedbffac59f11d54a80\r\n  ECoin: 0x74e3fc764c2474f25369b9d021b7f92e8441a2dc\r\n  Dummy: 0x855d1c79ad3fb086d516554dc7187e3fdfc1c79a\r\n  GCoin: 0x8e4c131b37383e431b9cd0635d3cf9f3f628edae\r\n  FCoin: 0x98d9f9e8debd4a632682ba207670d2a5acd3c489\r\n  HCoin: 0x1411cb266fced1587b0aa29e9d5a9ef3db64a9c5\r\n  ... 0xfef5e8867f8d767787de748407765993eb2bbb5e2bc9ba54c1ab27dd99d2e56a\r\nSaving artifacts...\r\n```\r\nMigrations 6 and 7 are both empty.\r\n```\r\nError: Dummy has not been deployed to detected network (network/artifact mismatch)\r\n    at /usr/lib/node_modules/truffle/build/cli.bundled.js:317898:17\r\n```\r\n## Environment\r\n\r\n* Operating System: Ubuntu 17.10\r\n`uname -a`\r\n```\r\nLinux fiskens-dator 4.13.0-25-generic #29-Ubuntu SMP Mon Jan 8 21:14:41 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n* Truffle version: v4.0.5\r\n* Ethereum client: ganache-1.0.1 (No client installed so far, just a local testnet)\r\n* node version: v9.4.0\r\n* npm version: 5.6.0\r\n",
  "closed_by": {
    "login": "terraflops1048576",
    "id": 3110527,
    "node_id": "MDQ6VXNlcjMxMTA1Mjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3110527?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terraflops1048576",
    "html_url": "https://github.com/terraflops1048576",
    "followers_url": "https://api.github.com/users/terraflops1048576/followers",
    "following_url": "https://api.github.com/users/terraflops1048576/following{/other_user}",
    "gists_url": "https://api.github.com/users/terraflops1048576/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terraflops1048576/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terraflops1048576/subscriptions",
    "organizations_url": "https://api.github.com/users/terraflops1048576/orgs",
    "repos_url": "https://api.github.com/users/terraflops1048576/repos",
    "events_url": "https://api.github.com/users/terraflops1048576/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terraflops1048576/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/758/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/359820394",
    "html_url": "https://github.com/trufflesuite/truffle/issues/758#issuecomment-359820394",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
    "id": 359820394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1OTgyMDM5NA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-23T15:11:19Z",
    "updated_at": "2018-01-23T15:11:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "@terraflops Thanks for such a detailed description. Is there any chance you could share the contents of the migrations files you're using or if this isn't possible for privacy reasons, a minimal example migration that results in the same error so we can reproduce and investigate further? ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/359820394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360006742",
    "html_url": "https://github.com/trufflesuite/truffle/issues/758#issuecomment-360006742",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
    "id": 360006742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDAwNjc0Mg==",
    "user": {
      "login": "terraflops1048576",
      "id": 3110527,
      "node_id": "MDQ6VXNlcjMxMTA1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3110527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terraflops1048576",
      "html_url": "https://github.com/terraflops1048576",
      "followers_url": "https://api.github.com/users/terraflops1048576/followers",
      "following_url": "https://api.github.com/users/terraflops1048576/following{/other_user}",
      "gists_url": "https://api.github.com/users/terraflops1048576/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terraflops1048576/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terraflops1048576/subscriptions",
      "organizations_url": "https://api.github.com/users/terraflops1048576/orgs",
      "repos_url": "https://api.github.com/users/terraflops1048576/repos",
      "events_url": "https://api.github.com/users/terraflops1048576/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terraflops1048576/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-24T03:08:14Z",
    "updated_at": "2018-01-24T03:43:23Z",
    "author_association": "NONE",
    "body": "Sure. My project is rather complicated, but I've made a new Truffle project that exactly duplicates the aforementioned problem. Running truffle migrate --reset (I switched to ganache-cli@6.0.3 as the GUI kept crashing.) gives the output in output.txt. As usual, `Derived1.deployed()`, `Derived2.deployed()`, `Derived3.deployed()`, and `Dummy1.deployed()` all fail, while `Required.deployed()` and `Data.deployed()` succeed.\r\n\r\nEntire project zip:\r\n[Example.zip](https://github.com/trufflesuite/truffle/files/1658349/Example.zip)\r\n\r\nGist with the source files:\r\nhttps://gist.github.com/terraflops/aeb116dd99ac005aeba9216aabb47518\r\n\r\nI should note that this is what I've tried as well:\r\n```\r\nvar Data = artifacts.require(\"Data\");\r\nvar Required = artifacts.require(\"Required\");\r\nvar Derived1 = artifacts.require(\"Derived1\");\r\nvar Derived2 = artifacts.require(\"Derived2\");\r\nvar Derived3 = artifacts.require(\"Derived3\");\r\nvar Dummy1 = artifacts.require(\"Dummy1\");\r\n\r\nmodule.exports = function(deployer) {\r\n\tdeployer.deploy(Data).then(() => {\r\n\t\tdeployer.deploy(Required).then(() => {\r\n\t\t\tData.deployed().then((instance) => {\r\n\t\t\t\tdeployer.deploy(Derived1, instance.address).then(() => {\r\n\t\t\t\t\tdeployer.deploy(Derived2, instance.address).then(() => {\r\n\t\t\t\t\t\tdeployer.deploy(Derived3, instance.address).then(() => {\r\n\t\t\t\t\t\t\tdeployer.deploy(Dummy1).then(() => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"Everything deployed!\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t});\r\n};\r\n\r\n```\r\nwhich yields:\r\n```\r\nUsing network 'development'.\r\n\r\nRunning migration: 1_initial_migration.js\r\n  Replacing Migrations...\r\n  ... 0xe97aedb960ea6ee9b5e5e49b23015c0f5a9de2cd7f4152f1be166cc1be309b52\r\n  Migrations: 0x6dad1ce8b53b7874758cba8bcd55f74bbf31c7e1\r\nSaving successful migration to network...\r\n  ... 0x64ca1f20ca192228941cf20707c91a1ca301ebde9836f5656569897275f4e814\r\nSaving artifacts...\r\nRunning migration: 2_deploy_everything.js\r\n  Replacing Data...\r\n  ... 0xe863e25bb76c5626447ecf0e6a95b54c5dcd360da7afb4cef8b922c75f3005a4\r\n  Data: 0x9bb46d630530ad89ce605e95c67be90e62ad1abf\r\nSaving successful migration to network...\r\n  Deploying Required...\r\n  ... 0xfca77ef29d8d4963e7dee1b7a3317372be5ca932c7720cf9014ce610bb285bd2\r\nSaving artifacts...\r\n  ... 0x06ea2521163cfa7d4ae4e20a1a2fbcf0e93125f2d3cf4cfdfc0a20bd94b950f0\r\n  Required: 0xfa1d3644a77fc3828cd5f122bae2e5039e90638f\r\n  Deploying Derived1...\r\n  ... 0x7b457b4d1be29affe50619b935558168aeb095c1419727fb3af1595ad7f3e979\r\n  Derived1: 0x96dc4f0a895f3b89d01c4a3eb8ff7d1345b63873\r\n  Deploying Derived2...\r\n  ... 0x57a90eb220d5caa63e818ac407e61b27f0cc28e89684409bf46d9726f950fdf4\r\n  Derived2: 0x944ac21dec65a4c9bc86c76c01e3f893bd1a305a\r\n  Deploying Derived3...\r\n  ... 0x8e493551522d97b277366999e8d7f035c1c28c5b4452bbda24a2f3e2bf859f9f\r\n  Derived3: 0xf193bfd04e57b150931a7c64310481dda1b7f5a9\r\n  Deploying Dummy1...\r\n  ... 0x766f176c29254344c3015c929295f98d5eef78d529e9cdb6fdb357639e16f23c\r\n  Dummy1: 0x5f3071e9b439a58802828a34d742559c628037ca\r\nEverything deployed!\r\n\r\n```\r\nbut none of the Derived or Dummy1 contracts work.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360006742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360318576",
    "html_url": "https://github.com/trufflesuite/truffle/issues/758#issuecomment-360318576",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
    "id": 360318576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MDMxODU3Ng==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-25T00:17:37Z",
    "updated_at": "2018-01-25T00:17:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@terraflops Thanks so much for making a simple demo of this! Really appreciate it. \r\n\r\nI've gotten the migrations to populate the network object as expected by removing the `deployed` promise from the migrations files for derived contracts and passing the deployer the artifact address directly: ex:\r\n```javascript\r\nvar Derived1 = artifacts.require(\"Derived1\");\r\nvar Data = artifacts.require(\"Data\");\r\nmodule.exports = function(deployer) {\r\n\r\n    /* --- Original ---\r\n    Data.deployed().then(function(instance) {\r\n         deployer.deploy(Derived1, instance.address);\r\n    });*/\r\n\r\n    // --- New ---\r\n    deployer.deploy(Derived1, Data.address);\r\n}\r\n```\r\n\r\nThe behavior of promises in the migrations is a topic that should probably be expanded on in the docs - apologies for this - FWIW there's an example of an issue similar to yours [here](https://github.com/trufflesuite/truffle/issues/688). \r\n\r\nMigrations stage deployments rather than executing them immediately, so if you want to execute code asynchronously (like `Data.deployed`) that's something which has to be returned as a promise to the deployer. For your case the following should also work:\r\n\r\n```javascript\r\nmodule.exports = function(deployer) {\r\n    deployer.then(function(){\r\n      return Data.deployed();\r\n    }).then(function(instance){\r\n      return deployer.deploy(Derived1, instance.address)\r\n    });\r\n}\r\n```\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/360318576/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/361688972",
    "html_url": "https://github.com/trufflesuite/truffle/issues/758#issuecomment-361688972",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
    "id": 361688972,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MTY4ODk3Mg==",
    "user": {
      "login": "bulgakovk",
      "id": 8983736,
      "node_id": "MDQ6VXNlcjg5ODM3MzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8983736?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bulgakovk",
      "html_url": "https://github.com/bulgakovk",
      "followers_url": "https://api.github.com/users/bulgakovk/followers",
      "following_url": "https://api.github.com/users/bulgakovk/following{/other_user}",
      "gists_url": "https://api.github.com/users/bulgakovk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bulgakovk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bulgakovk/subscriptions",
      "organizations_url": "https://api.github.com/users/bulgakovk/orgs",
      "repos_url": "https://api.github.com/users/bulgakovk/repos",
      "events_url": "https://api.github.com/users/bulgakovk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bulgakovk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-30T18:29:53Z",
    "updated_at": "2018-01-30T18:29:53Z",
    "author_association": "NONE",
    "body": "Also be careful with using `Promise.all()`. Rewriting with `then` helps me.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/361688972/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/363315308",
    "html_url": "https://github.com/trufflesuite/truffle/issues/758#issuecomment-363315308",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
    "id": 363315308,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2MzMxNTMwOA==",
    "user": {
      "login": "terraflops1048576",
      "id": 3110527,
      "node_id": "MDQ6VXNlcjMxMTA1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3110527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terraflops1048576",
      "html_url": "https://github.com/terraflops1048576",
      "followers_url": "https://api.github.com/users/terraflops1048576/followers",
      "following_url": "https://api.github.com/users/terraflops1048576/following{/other_user}",
      "gists_url": "https://api.github.com/users/terraflops1048576/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terraflops1048576/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terraflops1048576/subscriptions",
      "organizations_url": "https://api.github.com/users/terraflops1048576/orgs",
      "repos_url": "https://api.github.com/users/terraflops1048576/repos",
      "events_url": "https://api.github.com/users/terraflops1048576/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terraflops1048576/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-06T05:29:27Z",
    "updated_at": "2018-02-06T05:29:27Z",
    "author_association": "NONE",
    "body": "This worked. It's unintuitive behavior that Truffle doesn't record the addresses, but also doesn't this go against the standard JavaScript promises in which this type of chaining is optional?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/363315308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/372135688",
    "html_url": "https://github.com/trufflesuite/truffle/issues/758#issuecomment-372135688",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/758",
    "id": 372135688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjEzNTY4OA==",
    "user": {
      "login": "elie222",
      "id": 3090527,
      "node_id": "MDQ6VXNlcjMwOTA1Mjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3090527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elie222",
      "html_url": "https://github.com/elie222",
      "followers_url": "https://api.github.com/users/elie222/followers",
      "following_url": "https://api.github.com/users/elie222/following{/other_user}",
      "gists_url": "https://api.github.com/users/elie222/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elie222/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elie222/subscriptions",
      "organizations_url": "https://api.github.com/users/elie222/orgs",
      "repos_url": "https://api.github.com/users/elie222/repos",
      "events_url": "https://api.github.com/users/elie222/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elie222/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-11T18:07:39Z",
    "updated_at": "2018-03-11T18:07:39Z",
    "author_association": "NONE",
    "body": "Can confirm this rewrite worked for me too. But seems like a bug in Truffle that things should be done this way.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/372135688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

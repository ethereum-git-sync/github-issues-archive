{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1392",
  "id": 375458033,
  "node_id": "MDU6SXNzdWUzNzU0NTgwMzM=",
  "number": 1392,
  "title": "Upgrade to truffle 5 causes migration to fail with \"error while converting number null to BN.js\"",
  "user": {
    "login": "lakamsani",
    "id": 3322496,
    "node_id": "MDQ6VXNlcjMzMjI0OTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3322496?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lakamsani",
    "html_url": "https://github.com/lakamsani",
    "followers_url": "https://api.github.com/users/lakamsani/followers",
    "following_url": "https://api.github.com/users/lakamsani/following{/other_user}",
    "gists_url": "https://api.github.com/users/lakamsani/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lakamsani/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lakamsani/subscriptions",
    "organizations_url": "https://api.github.com/users/lakamsani/orgs",
    "repos_url": "https://api.github.com/users/lakamsani/repos",
    "events_url": "https://api.github.com/users/lakamsani/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lakamsani/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2018-10-30T12:13:24Z",
  "updated_at": "2018-11-06T14:36:04Z",
  "closed_at": "2018-11-01T00:05:53Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x ] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n- Tried the workaround suggest in that Gitter channel and also after talking to @gnidan just now at [Devcon4](https://devcon4.ethereum.org) but not having luck. Tried [right after](https://github.com/PulseBlockchain/oz-sample-app/blob/ed52f82b5d0a504adf4950f3e975f90d2be5cdbc/test/TestCrowdsale.js#L24) `require` statements for the artifacts as well as in the `before` [function](https://github.com/PulseBlockchain/oz-sample-app/blob/ed52f82b5d0a504adf4950f3e975f90d2be5cdbc/test/TestCrowdsale.js#L46). \r\n---------------------------\r\n\r\n## Issue\r\n\r\nI have 18 mocha truffle/mocha tests that all pass with truffle4 but migration fails in truffle5. \r\n\r\n\r\n## Steps to Reproduce\r\nPlease check out this sample repo branch https://github.com/PulseBlockchain/oz-sample-app/tree/vamsee/truffl5-oz-2  and run `truffle test` with the latest truffle5. \r\n\r\n## Expected Behavior\r\n\r\nAll tests should pass as before with truffle4\r\n \r\n## Actual Results\r\n\r\nWhat actually happened. Please give examples and support it with screenshots, copied output or error messages.\r\n\r\n```\r\ntruffle5 test\r\nUsing network 'development'.\r\n\r\nError: while migrating TestCrowdsale: Error: [number-to-bn] while converting number null to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported. Given value: \"NaN\"\r\n    at /Users/vamsee/Development/blockchain/trufflesuite/truffle-via-npm/node_modules/truffle/build/webpack:/packages/truffle-deployer/src/deployment.js:359:1\r\n    at <anonymous>\r\n    at process._tickCallback (internal/process/next_tick.js:188:7)\r\nTruffle v5.0.0-next.14 (core: 5.0.0-beta.1)\r\nSolidity v0.4.25 (solc-js)\r\nNode v8.10.0\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: macOS mojave\r\n* npm 5.6.0\r\n",
  "closed_by": {
    "login": "fainashalts",
    "id": 8952139,
    "node_id": "MDQ6VXNlcjg5NTIxMzk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fainashalts",
    "html_url": "https://github.com/fainashalts",
    "followers_url": "https://api.github.com/users/fainashalts/followers",
    "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
    "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
    "organizations_url": "https://api.github.com/users/fainashalts/orgs",
    "repos_url": "https://api.github.com/users/fainashalts/repos",
    "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fainashalts/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/434277666",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-434277666",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 434277666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDI3NzY2Ng==",
    "user": {
      "login": "lakamsani",
      "id": 3322496,
      "node_id": "MDQ6VXNlcjMzMjI0OTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3322496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lakamsani",
      "html_url": "https://github.com/lakamsani",
      "followers_url": "https://api.github.com/users/lakamsani/followers",
      "following_url": "https://api.github.com/users/lakamsani/following{/other_user}",
      "gists_url": "https://api.github.com/users/lakamsani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lakamsani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lakamsani/subscriptions",
      "organizations_url": "https://api.github.com/users/lakamsani/orgs",
      "repos_url": "https://api.github.com/users/lakamsani/repos",
      "events_url": "https://api.github.com/users/lakamsani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lakamsani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-30T12:16:39Z",
    "updated_at": "2018-10-30T12:16:39Z",
    "author_association": "NONE",
    "body": "BTW, I have truffle4 installed globally and truffle5 installed separately so I can try both quickly without another `npm install -g`. That is the reason for `truffle5` command above. Perhaps there is a way to have multiple versions globally. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/434277666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/434888453",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-434888453",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 434888453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNDg4ODQ1Mw==",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-01T00:05:53Z",
    "updated_at": "2018-11-01T00:07:08Z",
    "author_association": "MEMBER",
    "body": "Hi @lakamsani, thanks for reaching out about this. I cloned your repo to see what I could do to help. There appear to be a few things going on here so I hope you don't mind but I'll walk you through what I was able to address: \r\n\r\nFirst, you should make sure that you are actually connected to web3. I didn't see a requires in the `2_Test-Crowdsale.js`file, and when I added it I was able to get the latest block times, which were returning null before and throwing this error. I just required it locally to test with ganache-cli, but of course you can connect it to whatever blockchain you are using. \r\n\r\nSecond, I got an error about bignumber being missing, so I installed it and required it as well. I needed to convert cap eth and goal eth in `2_Test-Crowdsale.js`  to big numbers in order for them to be accepted by the deployment function.\r\n\r\nUnfortunately, once this was resolved, I got the following error: \r\n\r\nError: while migrating `TestCrowdsale: Returned error: VM Exception while processing transaction: revert\r\n    at /Users/fainashalts/truffle-dev/truffle/packages/truffle-deployer/src/deployment.js:363:17\r\n    at process.internalTickCallback (internal/process/next_tick.js:77:7)`\r\n\r\nI have a hunch this is similar to what was going in this issue, so you may want to pursue a similar solution: https://github.com/trufflesuite/truffle/issues/884\r\n\r\nAlso, I am seeing a test failure for Contract: ICO Signature and Platform Tests that `TypeError: web3.currentProvider.sendAsync is not a function`\r\n\r\nYou may need to do something different since Truffle5 uses the newest version of Web3, so check out the docs: https://web3js.readthedocs.io/en/1.0/web3-eth.html#currentprovider\r\n\r\nIf that doesn't help, you may want to try the solution here: https://github.com/ethjs/ethjs/issues/6\r\n\r\nI hope some of this is helpful, and if you continue to have a problem with the specific error here after following these steps, please feel free to reopen this issue with more information. Thanks and I hope you're having a great time at DevCon4!\r\n\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/434888453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435028742",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-435028742",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 435028742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTAyODc0Mg==",
    "user": {
      "login": "lakamsani",
      "id": 3322496,
      "node_id": "MDQ6VXNlcjMzMjI0OTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3322496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lakamsani",
      "html_url": "https://github.com/lakamsani",
      "followers_url": "https://api.github.com/users/lakamsani/followers",
      "following_url": "https://api.github.com/users/lakamsani/following{/other_user}",
      "gists_url": "https://api.github.com/users/lakamsani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lakamsani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lakamsani/subscriptions",
      "organizations_url": "https://api.github.com/users/lakamsani/orgs",
      "repos_url": "https://api.github.com/users/lakamsani/repos",
      "events_url": "https://api.github.com/users/lakamsani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lakamsani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-01T12:41:52Z",
    "updated_at": "2018-11-01T12:45:41Z",
    "author_association": "NONE",
    "body": "@fainashalts  thanks for looking into this providing detailed feedback. Given that all my tests were working with Truffle4, looks like somehow a `web3` instance was being magically injected by Truffle4 during the migration stage deployer scripts but not anymore. If you could either send a PR with all your changes or simply paste the changes you made in `2_Test-Crowdsale.js`  and `package.json` as a comment below that would be great. I can pick up from there and figure out the other issues.  I fixed that signature test problem in my main project repo (this repo is a small slice of my main project and I used to reproduce issues etc). ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435028742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435074595",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-435074595",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 435074595,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTA3NDU5NQ==",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-01T15:18:18Z",
    "updated_at": "2018-11-01T16:23:22Z",
    "author_association": "MEMBER",
    "body": "Hi @lakamsani, happy to help. I don't have the code anymore as I was just digging around to see if this is an issue with Truffle v5 that needs addressing in our code. The steps above should get you most of the way there though!\r\n\r\nYou are right, I believe web3 does need to be required explicitly. Also, I forgot to mention in my previous comment that the `web3.eth.getBlock('latest')` api call returns a promise, so you'll need to wrap it in an async/await to ensure you can get that value.\r\n\r\nHere is a link to the release notes for this version of Truffle, with loads of information on different features that have been added: https://github.com/trufflesuite/truffle/releases \r\n\r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435074595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435209303",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-435209303",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 435209303,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTIwOTMwMw==",
    "user": {
      "login": "lakamsani",
      "id": 3322496,
      "node_id": "MDQ6VXNlcjMzMjI0OTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3322496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lakamsani",
      "html_url": "https://github.com/lakamsani",
      "followers_url": "https://api.github.com/users/lakamsani/followers",
      "following_url": "https://api.github.com/users/lakamsani/following{/other_user}",
      "gists_url": "https://api.github.com/users/lakamsani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lakamsani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lakamsani/subscriptions",
      "organizations_url": "https://api.github.com/users/lakamsani/orgs",
      "repos_url": "https://api.github.com/users/lakamsani/repos",
      "events_url": "https://api.github.com/users/lakamsani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lakamsani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-01T22:32:00Z",
    "updated_at": "2018-11-01T22:32:00Z",
    "author_association": "NONE",
    "body": "@fainashalts  I just pushed a commit to my branch where I tried some of your instructions. I do see a change in behavior but now it stopping with a different error as shown below. So I 'm not able to get to the point where you were. Can you send me a sample project that shows the correct way to initialize web3 in Truffle5 now that it is not being injected anymore? \r\n\r\nYou can see in my latest commit that I had to initalize web3 in two different places hard-coding the host/port. \r\n* First in migration script. https://github.com/PulseBlockchain/oz-sample-app/blob/1c6fe23db4aeae7c255dbd4aef7ec9f1b71023be/migrations/2_Test-Crowdsale.js#L7\r\n* Again in the test itself. https://github.com/PulseBlockchain/oz-sample-app/blob/1c6fe23db4aeae7c255dbd4aef7ec9f1b71023be/test/TestCrowdsale.js#L9\r\n\r\nIs there anyway to make my deployment code use the same web3 url as passed to the `truffle test --network` argument where it picks up from  `truffle-config.js` . For example it picks up the default `development` if you omit the `--network` parameter to `truffle test` whose url is `http://localhost:8545`\r\n\r\n```\r\n[Function: sass]\r\nTypeError: Cannot read property 'getBlock' of undefined\r\n    at module.exports (/Users/vamsee/Development/blockchain/pulse/oz-sample-app/migrations/2_Test-Crowdsale.js:24:38)\r\n    at Require.file (/Users/vamsee/Development/blockchain/trufflesuite/truffle-via-npm/node_modules/truffle/build/webpack:/packages/truffle-migrate/migration.js:59:1)\r\n    at /Users/vamsee/Development/blockchain/trufflesuite/truffle-via-npm/node_modules/truffle/build/webpack:/packages/truffle-require/require.js:101:1\r\n    at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:511:3)\r\nTruffle v5.0.0-next.14 (core: 5.0.0-beta.1)\r\nSolidity v0.4.25 (solc-js)\r\nNode v8.10.0\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435209303/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435456321",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-435456321",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 435456321,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTQ1NjMyMQ==",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-02T17:41:59Z",
    "updated_at": "2018-11-02T17:41:59Z",
    "author_association": "MEMBER",
    "body": "Hi @lakamsani, unfortunately we don't have the bandwidth to troubleshoot questions that are not directly related to issues/bugs in Truffle's codebase. The error you posted is likely due to web3 still not being connected as you have it written, also you should make sure you have a blockchain running on 8545 if that is what you're using to connect web3. \r\n\r\nGitter is a great place to ask for help with questions that are more specific to your own code, I highly recommend it! https://gitter.im/ConsenSys/truffle",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435456321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435506716",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-435506716",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 435506716,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTUwNjcxNg==",
    "user": {
      "login": "lakamsani",
      "id": 3322496,
      "node_id": "MDQ6VXNlcjMzMjI0OTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3322496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lakamsani",
      "html_url": "https://github.com/lakamsani",
      "followers_url": "https://api.github.com/users/lakamsani/followers",
      "following_url": "https://api.github.com/users/lakamsani/following{/other_user}",
      "gists_url": "https://api.github.com/users/lakamsani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lakamsani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lakamsani/subscriptions",
      "organizations_url": "https://api.github.com/users/lakamsani/orgs",
      "repos_url": "https://api.github.com/users/lakamsani/repos",
      "events_url": "https://api.github.com/users/lakamsani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lakamsani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-02T20:56:46Z",
    "updated_at": "2018-11-03T02:14:23Z",
    "author_association": "NONE",
    "body": "@fainashalts this is serious DX (developer experience) problem. Gitter works only if someone answers right away.  Questions get lost if no one answers them in time. I have already tried it and didn't get any where with this problem. So I posted this issue after that. `ganache-cli` is definitely running on port 8545 and all test pass with truffle4. \r\n\r\nIf the truffle team is really serious about developer adoption you should provide a sample \"hello world\" type project (outside of the truffle boxes) that shows how to initialize web3 in the migrations script in truffle5. Looks  it has changed quite a bit from how it is done in truffle4. Otherwise, developers will start looking for alternatives like https://github.com/nomiclabs/buidler. It's kind of odd that you are not able to provide the code changes you have already made that enabled this project to get past the web3 initialization issues in the migration script! That will be useful to others grappling with a similar problem. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435506716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435561645",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-435561645",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 435561645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNTU2MTY0NQ==",
    "user": {
      "login": "lakamsani",
      "id": 3322496,
      "node_id": "MDQ6VXNlcjMzMjI0OTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3322496?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lakamsani",
      "html_url": "https://github.com/lakamsani",
      "followers_url": "https://api.github.com/users/lakamsani/followers",
      "following_url": "https://api.github.com/users/lakamsani/following{/other_user}",
      "gists_url": "https://api.github.com/users/lakamsani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lakamsani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lakamsani/subscriptions",
      "organizations_url": "https://api.github.com/users/lakamsani/orgs",
      "repos_url": "https://api.github.com/users/lakamsani/repos",
      "events_url": "https://api.github.com/users/lakamsani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lakamsani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-03T05:19:22Z",
    "updated_at": "2018-11-03T05:20:39Z",
    "author_association": "NONE",
    "body": "@fainashalts  I had an incorrect import for the web3 in the migrations script that caused the last error. After I fixed that getting this error which I believe you fixed before in your local test. From the truffle error message, it is not clear what line of the migration script is problematic. Is there some way to find that or is it possible to setup a  debugger breakpoint in the migration JavaScript code?\r\n\r\n```\r\n   Deploying 'TestCrowdsale'\r\n   -------------------------\r\nDeplyoment failed\r\nError:  *** Deployment Failed ***\r\n\r\n\"TestCrowdsale\" -- Error: [number-to-bn] while converting number {\"number\":\"Invalid Number\",\"sign\":1,\"rest\":0} to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported. Given value: \"Invalid Number\".\r\n\r\n    at /Users/vamsee/Development/blockchain/trufflesuite/truffle-via-npm/node_modules/truffle/build/webpack:/packages/truffle-deployer/src/deployment.js:359:1\r\n    at <anonymous>\r\n    at process._tickCallback (internal/process/next_tick.js:188:7)\r\n   > Saving artifacts\r\n   -------------------------------------\r\n   > Total cost:          0.02951162 ETH\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/435561645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/436273794",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1392#issuecomment-436273794",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1392",
    "id": 436273794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzNjI3Mzc5NA==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-06T14:36:03Z",
    "updated_at": "2018-11-06T14:36:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think version 1 of web3 uses the BN library and not BigNumber.  In your migration file you are doing `const BigNumber = Web3.BigNumber;` which for me on my local comes out as `undefined`.  I haven't scoured your code but try and resolve that issue and see what happens.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/436273794/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

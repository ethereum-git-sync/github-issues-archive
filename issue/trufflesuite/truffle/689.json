{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/689",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/689",
  "id": 276480597,
  "node_id": "MDU6SXNzdWUyNzY0ODA1OTc=",
  "number": 689,
  "title": "Fine-tuned gasPrices during migration",
  "user": {
    "login": "robbiehanson",
    "id": 304604,
    "node_id": "MDQ6VXNlcjMwNDYwNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/304604?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/robbiehanson",
    "html_url": "https://github.com/robbiehanson",
    "followers_url": "https://api.github.com/users/robbiehanson/followers",
    "following_url": "https://api.github.com/users/robbiehanson/following{/other_user}",
    "gists_url": "https://api.github.com/users/robbiehanson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/robbiehanson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/robbiehanson/subscriptions",
    "organizations_url": "https://api.github.com/users/robbiehanson/orgs",
    "repos_url": "https://api.github.com/users/robbiehanson/repos",
    "events_url": "https://api.github.com/users/robbiehanson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/robbiehanson/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2017-11-23T22:35:04Z",
  "updated_at": "2017-11-28T17:53:37Z",
  "closed_at": "2017-11-28T17:53:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [X] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\nFirst, I'd just like to say: Thank you for an amazing project. I was really struggling with Ethereum development before I found Truffle. This is the first project I've found that puts everything together in a cohesive manner.\r\n\r\nQuestion / Feature Request: Is there a way to control the gasPrice in a more fine-tuned way ?\r\n\r\nFrom what I can tell, the only way to control the gasPrice is via the (one setting) in truffle.js, which will control the gasPrice for every operation within the migration. For example, if I'm deploying a single contract, then the single gasPrice would be used for:\r\n\r\n- deploying the Migrations contract\r\n- invoking Migrations.setCompleted(1)\r\n- deploying my contract\r\n- invoking Migrations.setCompleted(2)\r\n\r\nIt would be handy to be able to specify the gasPrice for each of these operations independently. For example, I would like to set the deployment of the Migrations contract to an average gasPrice. Since I know the contract is small, I know that won't cost very much. And I'd like to get it mined fairly quickly. I'd want to set the gasPrice for invoking Migrations.setCompleted() to a high gasPrice, since I know it will be cheap, and I'd like it to get mined very quickly. And then when deploying my own contract, which is much larger, I'd be interested in setting the gasPrice pretty low. I don't mind if it takes a long time, and I don't want to pay $25 for it.",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/689/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/346732573",
    "html_url": "https://github.com/trufflesuite/truffle/issues/689#issuecomment-346732573",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689",
    "id": 346732573,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NjczMjU3Mw==",
    "user": {
      "login": "chuacw",
      "id": 1757930,
      "node_id": "MDQ6VXNlcjE3NTc5MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1757930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chuacw",
      "html_url": "https://github.com/chuacw",
      "followers_url": "https://api.github.com/users/chuacw/followers",
      "following_url": "https://api.github.com/users/chuacw/following{/other_user}",
      "gists_url": "https://api.github.com/users/chuacw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chuacw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chuacw/subscriptions",
      "organizations_url": "https://api.github.com/users/chuacw/orgs",
      "repos_url": "https://api.github.com/users/chuacw/repos",
      "events_url": "https://api.github.com/users/chuacw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chuacw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-24T03:05:35Z",
    "updated_at": "2017-11-24T03:18:56Z",
    "author_association": "NONE",
    "body": "Robbie,\r\n\r\nYou can set gas price when deploying.\r\nHere's my migration file, 1_initial_migration.js\r\n\r\nvar Migrations = artifacts.require(\"./Migrations.sol\");\r\nvar Scream = artifacts.require(\"./Scream.sol\");\r\n\r\nmodule.exports = function(deployer) {\r\n  deployer.deploy(Migrations, {gas: 4612388, from: \"0x....\"});\r\n  deployer.deploy(Scream);\r\n};\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/346732573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/346954991",
    "html_url": "https://github.com/trufflesuite/truffle/issues/689#issuecomment-346954991",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689",
    "id": 346954991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk1NDk5MQ==",
    "user": {
      "login": "robbiehanson",
      "id": 304604,
      "node_id": "MDQ6VXNlcjMwNDYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/304604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robbiehanson",
      "html_url": "https://github.com/robbiehanson",
      "followers_url": "https://api.github.com/users/robbiehanson/followers",
      "following_url": "https://api.github.com/users/robbiehanson/following{/other_user}",
      "gists_url": "https://api.github.com/users/robbiehanson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robbiehanson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robbiehanson/subscriptions",
      "organizations_url": "https://api.github.com/users/robbiehanson/orgs",
      "repos_url": "https://api.github.com/users/robbiehanson/repos",
      "events_url": "https://api.github.com/users/robbiehanson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robbiehanson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-25T17:42:23Z",
    "updated_at": "2017-11-25T17:42:23Z",
    "author_association": "NONE",
    "body": "That's excellent news, thank you. However, the [documentation](http://truffleframework.com/docs/getting_started/migrations) didn't really explain this. (So I've submitted a pull request to update it.)\r\n\r\nFirst, I saw this example:\r\n\r\n```\r\n// Deploy A, then deploy B, passing in A's newly deployed address\r\ndeployer.deploy(A).then(function() {\r\n  return deployer.deploy(B, A.address);\r\n});\r\n```\r\n\r\nWhich I understood as: \"OK, so the ARGS are for the contract, as it gets invoked during contract creation on the blockchain\"\r\n\r\nThen I saw this in the documentation:\r\n\r\n    DEPLOYER.DEPLOY(CONTRACT, ARGSâ€¦, OPTIONS)\r\n    Additionally, the last argument is an optional object that observes a single key, overwrite. If overwrite is set to false, the deployer won't deploy this contract if one has already been deployed. \r\n\r\nWhich I understood as: \"OK, so one can also pass an options object, which is just used by the deployer code to determine which path it should take.\"\r\n\r\nIf I'm understanding this correctly, you're saying that the `options` is actually used by both the deployer, and by the 'send transaction' stuff.\r\n\r\nHere's the pull request I submitted to improve the documentation:\r\nhttps://github.com/trufflesuite/trufflesuite.com/pull/35",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/346954991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/346955169",
    "html_url": "https://github.com/trufflesuite/truffle/issues/689#issuecomment-346955169",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689",
    "id": 346955169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0Njk1NTE2OQ==",
    "user": {
      "login": "robbiehanson",
      "id": 304604,
      "node_id": "MDQ6VXNlcjMwNDYwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/304604?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robbiehanson",
      "html_url": "https://github.com/robbiehanson",
      "followers_url": "https://api.github.com/users/robbiehanson/followers",
      "following_url": "https://api.github.com/users/robbiehanson/following{/other_user}",
      "gists_url": "https://api.github.com/users/robbiehanson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robbiehanson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robbiehanson/subscriptions",
      "organizations_url": "https://api.github.com/users/robbiehanson/orgs",
      "repos_url": "https://api.github.com/users/robbiehanson/repos",
      "events_url": "https://api.github.com/users/robbiehanson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robbiehanson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-25T17:45:29Z",
    "updated_at": "2017-11-25T17:45:29Z",
    "author_association": "NONE",
    "body": "I just realized this doesn't really fix all the fine-grained options:\r\n\r\n- deploying the Migrations contract  <- Fixed\r\n- invoking Migrations.setCompleted(1) <- Not fixed\r\n- deploying my contract  <- Fixed\r\n- invoking Migrations.setCompleted(2) <- Not fixed\r\n\r\nIs there a way I can specify the gasPrice when invoking `Migrations.setCompleted(x)` ?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/346955169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347607756",
    "html_url": "https://github.com/trufflesuite/truffle/issues/689#issuecomment-347607756",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/689",
    "id": 347607756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzYwNzc1Ng==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T17:53:37Z",
    "updated_at": "2017-11-28T17:53:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @robbiehanson. The Migrations contract -- and interacting with it -- is special to Truffle. Since Truffle performs the `setCompleted` calls during migrations, there's no way to set the gas price other than by setting it within your `truffle.js` file. That said, assuming you don't want different gas prices for calling `setCompleted(1)` and `setCompleted(2)`, you should now have all your bases covered; that's because any gas price set in the transaction (e.g., the gas price set when deploying your contract) will overwrite the gas price in the `truffle.js` file. \n\nI'm going to close this for now as you should have everything that you need. Cheers!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/347607756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1728",
  "id": 412143388,
  "node_id": "MDU6SXNzdWU0MTIxNDMzODg=",
  "number": 1728,
  "title": "Total Cost reports inaccurate",
  "user": {
    "login": "wbt",
    "id": 563406,
    "node_id": "MDQ6VXNlcjU2MzQwNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/563406?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wbt",
    "html_url": "https://github.com/wbt",
    "followers_url": "https://api.github.com/users/wbt/followers",
    "following_url": "https://api.github.com/users/wbt/following{/other_user}",
    "gists_url": "https://api.github.com/users/wbt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wbt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wbt/subscriptions",
    "organizations_url": "https://api.github.com/users/wbt/orgs",
    "repos_url": "https://api.github.com/users/wbt/repos",
    "events_url": "https://api.github.com/users/wbt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wbt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393326,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true,
      "description": null
    },
    {
      "id": 971536096,
      "node_id": "MDU6TGFiZWw5NzE1MzYwOTY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Migrations",
      "name": "Migrations",
      "color": "b887db",
      "default": false,
      "description": ""
    },
    {
      "id": 1403343142,
      "node_id": "MDU6TGFiZWwxNDAzMzQzMTQy",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20investigated",
      "name": "needs investigated",
      "color": "b7410e",
      "default": false,
      "description": ""
    },
    {
      "id": 1675041356,
      "node_id": "MDU6TGFiZWwxNjc1MDQxMzU2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority2%20%E2%9A%A0%EF%B8%8F",
      "name": "priority2 ⚠️",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "cds-amal",
    "id": 2529600,
    "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cds-amal",
    "html_url": "https://github.com/cds-amal",
    "followers_url": "https://api.github.com/users/cds-amal/followers",
    "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
    "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
    "organizations_url": "https://api.github.com/users/cds-amal/orgs",
    "repos_url": "https://api.github.com/users/cds-amal/repos",
    "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cds-amal/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cds-amal",
      "id": 2529600,
      "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cds-amal",
      "html_url": "https://github.com/cds-amal",
      "followers_url": "https://api.github.com/users/cds-amal/followers",
      "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
      "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
      "organizations_url": "https://api.github.com/users/cds-amal/orgs",
      "repos_url": "https://api.github.com/users/cds-amal/repos",
      "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cds-amal/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-02-19T21:57:22Z",
  "updated_at": "2022-12-08T19:07:18Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Issue\r\nIn Truffle 5, the \"migrate\" command is much more verbose, and at the end of each migration a \"Total cost\" is reported, with a \"final cost\" at the end.  These amounts are incorrect.\r\n\r\n## Steps to Reproduce\r\nUse [this repo](https://github.com/wbt/overwhelmer) and its readme for steps to reproduce.  Use a relatively low value, like 500, for `transactionsToRun` in migration 3 (step 4), to avoid the other errors that repo helps illustrate. \r\n\r\n## Expected Behavior\r\nThe sum of migration \"total cost\" reports should equal the difference in account balance before - after the migration.\r\n\r\n## Actual Results\r\nThe reported \"total cost\" and \"final cost\" are much less than the amount the account balanced has decreased during the execution of that migration. \r\n\r\n## Environment\r\n* Operating System:  Windows 10 Pro \r\n* Ethereum client: Ganache, tested with versions 1.3.0 and 2.0.0-beta2\r\n* Truffle version (`truffle version`): 5.0.4\r\n* node version (`node --version`): 9.3.0\r\n* npm version (`npm --version`): 6.8.0\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476338652",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1728#issuecomment-476338652",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
    "id": 476338652,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjMzODY1Mg==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-25T19:13:00Z",
    "updated_at": "2019-03-25T19:13:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Wow, really good find @wbt. I see you've already opened an issue for this at trufflesuite/ganache#1131.  So far this looks more like a Ganache issue than truffle.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476338652/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/477712678",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1728#issuecomment-477712678",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
    "id": 477712678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NzcxMjY3OA==",
    "user": {
      "login": "wbt",
      "id": 563406,
      "node_id": "MDQ6VXNlcjU2MzQwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/563406?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbt",
      "html_url": "https://github.com/wbt",
      "followers_url": "https://api.github.com/users/wbt/followers",
      "following_url": "https://api.github.com/users/wbt/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbt/subscriptions",
      "organizations_url": "https://api.github.com/users/wbt/orgs",
      "repos_url": "https://api.github.com/users/wbt/repos",
      "events_url": "https://api.github.com/users/wbt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-28T18:13:25Z",
    "updated_at": "2019-03-28T18:13:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@CruzMolina These are different issues, with incorrect totals being reported in different places.\r\nThe [Ganache issue](https://github.com/trufflesuite/ganache/issues/1131) is that the account balance and transaction account *shown in Ganache* is **temporarily** incorrect while a set of transactions is processing, and the user has no way to know the display is currently incorrect and just needs a few minutes to catch up. \r\n\r\nThis Issue is about the line output by Truffle at the end of a migration and/or set of migrations, after Truffle has had as much opportunity as it wants to for calculation and summing up the total.  Without having done a deep dive into the code, the appearance is that Truffle is calculating this output figure incorrectly, maybe omitting transactions that neither send ETH nor create new contract instances.\r\n\r\nI think it is a separate issue with a separate fix, and that the fix for this is in Truffle code, more specifically in Truffle code that was new for v5. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/477712678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1125315392",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1728#issuecomment-1125315392",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
    "id": 1125315392,
    "node_id": "IC_kwDOAkfq-c5DEvNA",
    "user": {
      "login": "MicaiahReid",
      "id": 17027138,
      "node_id": "MDQ6VXNlcjE3MDI3MTM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/17027138?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MicaiahReid",
      "html_url": "https://github.com/MicaiahReid",
      "followers_url": "https://api.github.com/users/MicaiahReid/followers",
      "following_url": "https://api.github.com/users/MicaiahReid/following{/other_user}",
      "gists_url": "https://api.github.com/users/MicaiahReid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MicaiahReid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MicaiahReid/subscriptions",
      "organizations_url": "https://api.github.com/users/MicaiahReid/orgs",
      "repos_url": "https://api.github.com/users/MicaiahReid/repos",
      "events_url": "https://api.github.com/users/MicaiahReid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MicaiahReid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-12T18:47:41Z",
    "updated_at": "2022-05-12T18:47:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @wbt! We've been going through some of the older issues in our backlog and came across this. Do you have a way to confirm if this is still an issue?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1125315392/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1127839854",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1728#issuecomment-1127839854",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
    "id": 1127839854,
    "node_id": "IC_kwDOAkfq-c5DOXhu",
    "user": {
      "login": "wbt",
      "id": 563406,
      "node_id": "MDQ6VXNlcjU2MzQwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/563406?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbt",
      "html_url": "https://github.com/wbt",
      "followers_url": "https://api.github.com/users/wbt/followers",
      "following_url": "https://api.github.com/users/wbt/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbt/subscriptions",
      "organizations_url": "https://api.github.com/users/wbt/orgs",
      "repos_url": "https://api.github.com/users/wbt/repos",
      "events_url": "https://api.github.com/users/wbt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-16T15:48:32Z",
    "updated_at": "2022-05-16T15:49:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll likely be doing migrations again in a few months, and would be able to dive back into it then.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1127839854/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1129927739",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1728#issuecomment-1129927739",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
    "id": 1129927739,
    "node_id": "IC_kwDOAkfq-c5DWVQ7",
    "user": {
      "login": "wbt",
      "id": 563406,
      "node_id": "MDQ6VXNlcjU2MzQwNg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/563406?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wbt",
      "html_url": "https://github.com/wbt",
      "followers_url": "https://api.github.com/users/wbt/followers",
      "following_url": "https://api.github.com/users/wbt/following{/other_user}",
      "gists_url": "https://api.github.com/users/wbt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wbt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wbt/subscriptions",
      "organizations_url": "https://api.github.com/users/wbt/orgs",
      "repos_url": "https://api.github.com/users/wbt/repos",
      "events_url": "https://api.github.com/users/wbt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wbt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-18T12:09:45Z",
    "updated_at": "2022-05-18T12:09:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Due to unexpected circumstances, I wound up doing migrations again much sooner than expected, and find that the issue still exists.  On a deeper re-read, there is also a repro repo linked to above that others can use to test in case Covid-19 kills me off or something like that. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1129927739/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1319092409",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1728#issuecomment-1319092409",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1728",
    "id": 1319092409,
    "node_id": "IC_kwDOAkfq-c5On8C5",
    "user": {
      "login": "cds-amal",
      "id": 2529600,
      "node_id": "MDQ6VXNlcjI1Mjk2MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2529600?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cds-amal",
      "html_url": "https://github.com/cds-amal",
      "followers_url": "https://api.github.com/users/cds-amal/followers",
      "following_url": "https://api.github.com/users/cds-amal/following{/other_user}",
      "gists_url": "https://api.github.com/users/cds-amal/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cds-amal/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cds-amal/subscriptions",
      "organizations_url": "https://api.github.com/users/cds-amal/orgs",
      "repos_url": "https://api.github.com/users/cds-amal/repos",
      "events_url": "https://api.github.com/users/cds-amal/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cds-amal/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T19:19:17Z",
    "updated_at": "2022-11-17T19:19:17Z",
    "author_association": "MEMBER",
    "body": "Might be related to #1885. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1319092409/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

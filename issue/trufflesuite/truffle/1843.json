{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1843",
  "id": 423487349,
  "node_id": "MDU6SXNzdWU0MjM0ODczNDk=",
  "number": 1843,
  "title": "Feature Request: Control the timestamp of initial blocks",
  "user": {
    "login": "pieterhartel",
    "id": 22255740,
    "node_id": "MDQ6VXNlcjIyMjU1NzQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/22255740?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pieterhartel",
    "html_url": "https://github.com/pieterhartel",
    "followers_url": "https://api.github.com/users/pieterhartel/followers",
    "following_url": "https://api.github.com/users/pieterhartel/following{/other_user}",
    "gists_url": "https://api.github.com/users/pieterhartel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pieterhartel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pieterhartel/subscriptions",
    "organizations_url": "https://api.github.com/users/pieterhartel/orgs",
    "repos_url": "https://api.github.com/users/pieterhartel/repos",
    "events_url": "https://api.github.com/users/pieterhartel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pieterhartel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 230393329,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjk=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true,
      "description": null
    },
    {
      "id": 1086852667,
      "node_id": "MDU6TGFiZWwxMDg2ODUyNjY3",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/needs%20requirements",
      "name": "needs requirements",
      "color": "d4c5f9",
      "default": false,
      "description": "feature request is unclear"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-03-20T21:46:19Z",
  "updated_at": "2020-04-15T18:11:02Z",
  "closed_at": "2020-04-15T18:11:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nI am trying to debug smart contracts that use `now`. It would be most helpful if the contracts could be made to behave deterministically, so that each block has a controlled timestamp. It seems that timestamps cannot be controlled during the deployment phase of a contract.\r\n\r\n## Steps to Reproduce\r\n\r\n Instamining will generate a few blocks during the deployment of a contract, with timestamps that cannot be controlled. This is problematic when the constructor of the contract calls `now`.\r\n\r\n## Expected Behavior\r\n\r\nA possible solution would be to extend the scope of `ganache-cli -t`from the timestamp of the genesis block to the following blocks generated during the contract deployment. The developer can take control and turn instamining off as soon as the deployment is complete.\r\n\r\n## Actual Results\r\n\r\nRandom looking timestamps on the first few blocks after the genesis block.\r\n\r\n## Environment\r\n\r\n$ truffle version\r\nTruffle v5.0.2 (core: 5.0.2)\r\nSolidity v0.5.0 (solc-js)\r\nNode v10.15.0\r\n$ uname -a\r\nDarwin 18.2.0 Darwin Kernel Version 18.2.0: Thu Dec 20 20:46:53 PST 2018; root:xnu-4903.241.1~1/RELEASE_X86_64 x86_64",
  "closed_by": {
    "login": "gnidan",
    "id": 151065,
    "node_id": "MDQ6VXNlcjE1MTA2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gnidan",
    "html_url": "https://github.com/gnidan",
    "followers_url": "https://api.github.com/users/gnidan/followers",
    "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
    "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
    "organizations_url": "https://api.github.com/users/gnidan/orgs",
    "repos_url": "https://api.github.com/users/gnidan/repos",
    "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gnidan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/475058583",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1843#issuecomment-475058583",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
    "id": 475058583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTA1ODU4Mw==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-20T22:48:01Z",
    "updated_at": "2019-03-20T22:48:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @pieterhartel ! Are you referring specifically to deployments via `truffle migrate`, when using `truffle test` out-of-the-box (which runs `ganache-core` in the background)? When using `truffle develop`?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/475058583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/475219634",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1843#issuecomment-475219634",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
    "id": 475219634,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTIxOTYzNA==",
    "user": {
      "login": "pieterhartel",
      "id": 22255740,
      "node_id": "MDQ6VXNlcjIyMjU1NzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22255740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pieterhartel",
      "html_url": "https://github.com/pieterhartel",
      "followers_url": "https://api.github.com/users/pieterhartel/followers",
      "following_url": "https://api.github.com/users/pieterhartel/following{/other_user}",
      "gists_url": "https://api.github.com/users/pieterhartel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pieterhartel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pieterhartel/subscriptions",
      "organizations_url": "https://api.github.com/users/pieterhartel/orgs",
      "repos_url": "https://api.github.com/users/pieterhartel/repos",
      "events_url": "https://api.github.com/users/pieterhartel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pieterhartel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-21T13:02:18Z",
    "updated_at": "2019-03-21T13:02:18Z",
    "author_association": "NONE",
    "body": "Here is a zip with a sample contract and associated files: [HelloEthSalon.zip](https://github.com/trufflesuite/truffle/files/2992091/HelloEthSalon.zip)\r\n\r\nRunning `truffle test` shows the instamined blocks and their timestamps. Using `ganache-cli -t` gives me control over the timestamp of the genesis block but not of the others.\r\n\r\n```\r\n$ truffle test\r\nCompiling ./contracts/HelloEthSalon.sol...\r\nCompiling ./contracts/Migrations.sol...\r\n\r\n\r\n  Contract: HelloEthSalon:GetMessage\r\n    ✓ TEST: should return a correct string (55ms)\r\n0 1553172915\r\n1 1553172919\r\n2 1553172919\r\n3 1553172919\r\n4 1553172919\r\n    ✓ TEST: check all addresses (70ms)\r\n\r\n\r\n  2 passing (153ms)\r\n\r\n```\r\n\r\n```\r\n$ truffle version\r\nTruffle v5.0.2 (core: 5.0.2)\r\nSolidity v0.5.0 (solc-js)\r\nNode v10.15.0\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/475219634/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/475378483",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1843#issuecomment-475378483",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
    "id": 475378483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTM3ODQ4Mw==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-21T19:53:12Z",
    "updated_at": "2019-03-21T19:53:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pieterhartel after playing around w/ your code, I see what you mean.\r\n\r\nThat would be a pretty cool feature to add to migrations/deployments period. Will look into this 👍 ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/475378483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481570302",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1843#issuecomment-481570302",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
    "id": 481570302,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTU3MDMwMg==",
    "user": {
      "login": "pieterhartel",
      "id": 22255740,
      "node_id": "MDQ6VXNlcjIyMjU1NzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/22255740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pieterhartel",
      "html_url": "https://github.com/pieterhartel",
      "followers_url": "https://api.github.com/users/pieterhartel/followers",
      "following_url": "https://api.github.com/users/pieterhartel/following{/other_user}",
      "gists_url": "https://api.github.com/users/pieterhartel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pieterhartel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pieterhartel/subscriptions",
      "organizations_url": "https://api.github.com/users/pieterhartel/orgs",
      "repos_url": "https://api.github.com/users/pieterhartel/repos",
      "events_url": "https://api.github.com/users/pieterhartel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pieterhartel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-10T07:29:56Z",
    "updated_at": "2019-04-10T07:29:56Z",
    "author_association": "NONE",
    "body": "There is a workaround for this issue that is actually really simple. It consists of dispensing with the second migration script. Instead the contract is deployed in the test script. For details and an example see: [https://github.com/trufflesuite/ganache-core/issues/388#issuecomment-480951656](url)",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/481570302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597784169",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1843#issuecomment-597784169",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
    "id": 597784169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5Nzc4NDE2OQ==",
    "user": {
      "login": "eggplantzzz",
      "id": 14827965,
      "node_id": "MDQ6VXNlcjE0ODI3OTY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/14827965?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eggplantzzz",
      "html_url": "https://github.com/eggplantzzz",
      "followers_url": "https://api.github.com/users/eggplantzzz/followers",
      "following_url": "https://api.github.com/users/eggplantzzz/following{/other_user}",
      "gists_url": "https://api.github.com/users/eggplantzzz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eggplantzzz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eggplantzzz/subscriptions",
      "organizations_url": "https://api.github.com/users/eggplantzzz/orgs",
      "repos_url": "https://api.github.com/users/eggplantzzz/repos",
      "events_url": "https://api.github.com/users/eggplantzzz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eggplantzzz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-11T18:04:23Z",
    "updated_at": "2020-03-11T18:04:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pieterhartel Glad you came up with a workaround! Do you think that there is still something actionable here?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/597784169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/614195784",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1843#issuecomment-614195784",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1843",
    "id": 614195784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDE5NTc4NA==",
    "user": {
      "login": "gnidan",
      "id": 151065,
      "node_id": "MDQ6VXNlcjE1MTA2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/151065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gnidan",
      "html_url": "https://github.com/gnidan",
      "followers_url": "https://api.github.com/users/gnidan/followers",
      "following_url": "https://api.github.com/users/gnidan/following{/other_user}",
      "gists_url": "https://api.github.com/users/gnidan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gnidan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gnidan/subscriptions",
      "organizations_url": "https://api.github.com/users/gnidan/orgs",
      "repos_url": "https://api.github.com/users/gnidan/repos",
      "events_url": "https://api.github.com/users/gnidan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gnidan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-15T18:11:01Z",
    "updated_at": "2020-04-15T18:11:01Z",
    "author_association": "MEMBER",
    "body": "Closing this for issue maintenance, since there's a viable workaround and no clear requirements on a new feature.\r\n\r\nIf anyone wants this in the future, would love to pick up the conversation again! Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/614195784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

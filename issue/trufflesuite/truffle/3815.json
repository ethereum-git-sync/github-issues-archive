{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/3815",
  "id": 811586028,
  "node_id": "MDU6SXNzdWU4MTE1ODYwMjg=",
  "number": 3815,
  "title": "Truffle compile error with multiline imports",
  "user": {
    "login": "vimwitch",
    "id": 631020,
    "node_id": "MDQ6VXNlcjYzMTAyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/631020?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vimwitch",
    "html_url": "https://github.com/vimwitch",
    "followers_url": "https://api.github.com/users/vimwitch/followers",
    "following_url": "https://api.github.com/users/vimwitch/following{/other_user}",
    "gists_url": "https://api.github.com/users/vimwitch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vimwitch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vimwitch/subscriptions",
    "organizations_url": "https://api.github.com/users/vimwitch/orgs",
    "repos_url": "https://api.github.com/users/vimwitch/repos",
    "events_url": "https://api.github.com/users/vimwitch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vimwitch/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-02-19T00:39:09Z",
  "updated_at": "2021-02-19T01:25:29Z",
  "closed_at": "2021-02-19T01:25:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nCompilation fails as a result of an invalid regular expression.\r\n\r\n## Steps to Reproduce\r\n\r\nRunning [these shell commands](https://gist.github.com/JChanceHud/fe72c6f923096638e54228c0630dccbb) will reproduce the error.\r\n\r\nSpecifically the error is occurring when compiling [this solidity code.](https://gist.github.com/JChanceHud/c96ced80122f515c556fd7b3b7e3bf58)\r\n\r\n[This](https://github.com/trufflesuite/truffle/blob/develop/packages/compile-solidity/parser.js#L61) is the section of truffle throwing the error. This is the message that is output by solc (and then used to construct the regex). All the import statements in the error from solc have strange unicode characters at the beginning.\r\n\r\n```\r\nSource \"(�aries/Types.sol\" not found: Callback not supported. ParsedContract.sol:9:1: ParserError: Source \"(�aries/Types.sol\" not found: Callback not supported.\r\nimport {\r\n^ (Relevant source part starts here and spans across multiple lines).\r\n```\r\n\r\nThis issue is new with 5.1.66.\r\n\r\n## Expected Behavior\r\n\r\nThe code compiles without error.\r\n\r\n## Actual Results\r\n\r\n```\r\nSyntaxError: Invalid regular expression: /(\"|')(.*(�aries/Types.sol)(\"|')/: Unterminated group\r\n    at new RegExp (<anonymous>)\r\n    at /zkopru/node_modules/truffle/build/webpack:/packages/compile-solidity/parser.js:63:1\r\n    at Array.map (<anonymous>)\r\n    at Object.parseImports (/zkopru/node_modules/truffle/build/webpack:/packages/compile-solidity/parser.js:53:1)\r\n    at parseImports (/zkopru/node_modules/truffle/build/webpack:/packages/compile-solidity/profiler/loadParser.js:24:1)\r\n    at Object.<anonymous> (/zkopru/node_modules/truffle/build/webpack:/packages/compile-common/dist/src/profiler/getImports.js:23:1)\r\n    at Generator.next (<anonymous>)\r\n    at /zkopru/node_modules/truffle/build/webpack:/packages/compile-common/dist/src/profiler/getImports.js:8:1\r\n    at new Promise (<anonymous>)\r\n    at __awaiter (/zkopru/node_modules/truffle/build/webpack:/packages/compile-common/dist/src/profiler/getImports.js:4:1)\r\n    at Object.getImports (/zkopru/node_modules/truffle/build/webpack:/packages/compile-common/dist/src/profiler/getImports.js:19:1)\r\n    at /zkopru/node_modules/truffle/build/webpack:/packages/compile-common/dist/src/profiler/resolveAllSources.js:58:1\r\n    at Generator.next (<anonymous>)\r\n    at fulfilled (/zkopru/node_modules/truffle/build/webpack:/packages/compile-common/dist/src/profiler/resolveAllSources.js:5:42)\r\nTruffle v5.1.66 (core: 5.1.66)\r\nNode v14.14.0\r\nerror Command failed with exit code 1.\r\n```\r\n\r\n## Environment\r\n\r\n* Operating System: docker `node:14.14-buster-slim`\r\n* Ethereum client:\r\n* Truffle version (`truffle version`): 5.1.66\r\n* node version (`node --version`): 14.14.0\r\n* npm version (`npm --version`): yarn v1.22.5\r\n",
  "closed_by": {
    "login": "vimwitch",
    "id": 631020,
    "node_id": "MDQ6VXNlcjYzMTAyMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/631020?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vimwitch",
    "html_url": "https://github.com/vimwitch",
    "followers_url": "https://api.github.com/users/vimwitch/followers",
    "following_url": "https://api.github.com/users/vimwitch/following{/other_user}",
    "gists_url": "https://api.github.com/users/vimwitch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vimwitch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vimwitch/subscriptions",
    "organizations_url": "https://api.github.com/users/vimwitch/orgs",
    "repos_url": "https://api.github.com/users/vimwitch/repos",
    "events_url": "https://api.github.com/users/vimwitch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vimwitch/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/781744650",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3815#issuecomment-781744650",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815",
    "id": 781744650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTc0NDY1MA==",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-19T01:13:03Z",
    "updated_at": "2021-02-19T01:13:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm pretty sure this is the same issue as #3799.  There's already a PR merged to fix it which should go out in tomorrow's release.  Still, thanks for the report!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/781744650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/781749508",
    "html_url": "https://github.com/trufflesuite/truffle/issues/3815#issuecomment-781749508",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/3815",
    "id": 781749508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTc0OTUwOA==",
    "user": {
      "login": "vimwitch",
      "id": 631020,
      "node_id": "MDQ6VXNlcjYzMTAyMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/631020?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vimwitch",
      "html_url": "https://github.com/vimwitch",
      "followers_url": "https://api.github.com/users/vimwitch/followers",
      "following_url": "https://api.github.com/users/vimwitch/following{/other_user}",
      "gists_url": "https://api.github.com/users/vimwitch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vimwitch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vimwitch/subscriptions",
      "organizations_url": "https://api.github.com/users/vimwitch/orgs",
      "repos_url": "https://api.github.com/users/vimwitch/repos",
      "events_url": "https://api.github.com/users/vimwitch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vimwitch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-19T01:25:28Z",
    "updated_at": "2021-02-19T01:25:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, thanks for the heads up! I'll reopen if the next release doesn't fix.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/781749508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

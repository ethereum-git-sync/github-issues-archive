{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4565",
  "id": 1086413181,
  "node_id": "I_kwDOAkfq-c5AwVl9",
  "number": 4565,
  "title": "Debugger crashes when used with Geth versions 1.10.9 and up",
  "user": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971535002,
      "node_id": "MDU6TGFiZWw5NzE1MzUwMDI=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Debugger",
      "name": "Debugger",
      "color": "7911ad",
      "default": false,
      "description": ""
    },
    {
      "id": 1675041356,
      "node_id": "MDU6TGFiZWwxNjc1MDQxMzU2",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority2%20%E2%9A%A0%EF%B8%8F",
      "name": "priority2 ⚠️",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-12-22T03:26:36Z",
  "updated_at": "2022-01-03T22:23:15Z",
  "closed_at": "2021-12-23T00:24:59Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nWhen the debugger is used with Geth, on versions 1.10.9 and up, it crashes.  This is due to [this Geth issue](https://github.com/ethereum/go-ethereum/issues/24146); there's no memory in the traces and this causes a crash.\r\n\r\nIt'll be easy enough to fix the crash, but the question then becomes, what do we actually do without memory?  One possibility would be to compute the memory ourselves, but I don't think that's really reasonable.\r\n\r\nAnother possibility is to act as if memory is just always empty (so memory variables will always display as 0, or empty string, or empty array, etc).  I think this is a reasonable interim workaround, but it'll be confusing to users.  I think that if we do this, we should also print a warning on debugger startup.  (This will mean that the necessary information, that memory is missing, will have to somehow make its way from the `web3` saga to the debugger CLI... presumably it'd get stored in the state somewhere.)\r\n\r\n## Steps to Reproduce\r\n\r\nDownload Geth (version 1.10.9 or later).  Run `geth --dev --http --http.api eth,net,debug`.  (If you're using my repo of solidity test cases, you may want to instead run `geth --dev --http --http.api eth,net,debug --http.port 7545`).  Run a transaction against it, then attempt to debug it.\r\n\r\n## Environment\r\n\r\n* Ethereum client: Geth, versions 1.10.9 and up (most recent at time of submission: 1.10.13)\r\n* Truffle version (`truffle version`): 5.4.25",
  "closed_by": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/999600003",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4565#issuecomment-999600003",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565",
    "id": 999600003,
    "node_id": "IC_kwDOAkfq-c47lK-D",
    "user": {
      "login": "kasvtv",
      "id": 1628729,
      "node_id": "MDQ6VXNlcjE2Mjg3Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1628729?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kasvtv",
      "html_url": "https://github.com/kasvtv",
      "followers_url": "https://api.github.com/users/kasvtv/followers",
      "following_url": "https://api.github.com/users/kasvtv/following{/other_user}",
      "gists_url": "https://api.github.com/users/kasvtv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kasvtv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kasvtv/subscriptions",
      "organizations_url": "https://api.github.com/users/kasvtv/orgs",
      "repos_url": "https://api.github.com/users/kasvtv/repos",
      "events_url": "https://api.github.com/users/kasvtv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kasvtv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-22T14:03:05Z",
    "updated_at": "2021-12-22T14:03:05Z",
    "author_association": "NONE",
    "body": "Can confirm this as well for Remix. After many hours yesterday, I found that the Remix debugger does not work when connected through the Web3 Provider to a local geth instance ever since version 1.10.9, including the latest 1.10.13.\r\n\r\nTo any beginner trying to solve the issue, if you have Golang installed, you can rebuild geth 1.10.8 from source using:\r\n```sh\r\ngo get github.com/ethereum/go-ethereum@v1.10.8\r\ncd $GOPATH/pkg/mod/github.com/ethereum/go-ethereum@v1.10.8/cmd/geth\r\ngo build -o $GOPATH/bin .\r\n```\r\nReplace `$GOPATH` with `%GOPATH%` if using Windows command line.\r\n\r\nMake sure the old installation of geth is removed. Then verify the version by running `geth version`.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/999600003/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/999957232",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4565#issuecomment-999957232",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4565",
    "id": 999957232,
    "node_id": "IC_kwDOAkfq-c47miLw",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-23T00:24:59Z",
    "updated_at": "2021-12-23T00:24:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fix for the immediate problem with memory is now released; however there's still a potential problem with storage that I'll have to write up an issue for later.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/999957232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

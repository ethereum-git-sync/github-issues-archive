{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/862",
  "id": 307379021,
  "node_id": "MDU6SXNzdWUzMDczNzkwMjE=",
  "number": 862,
  "title": "Truffle compiler option 'contracts_build_directory' inconsistent behavior",
  "user": {
    "login": "barakman",
    "id": 7003246,
    "node_id": "MDQ6VXNlcjcwMDMyNDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barakman",
    "html_url": "https://github.com/barakman",
    "followers_url": "https://api.github.com/users/barakman/followers",
    "following_url": "https://api.github.com/users/barakman/following{/other_user}",
    "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
    "organizations_url": "https://api.github.com/users/barakman/orgs",
    "repos_url": "https://api.github.com/users/barakman/repos",
    "events_url": "https://api.github.com/users/barakman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barakman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971536096,
      "node_id": "MDU6TGFiZWw5NzE1MzYwOTY=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Migrations",
      "name": "Migrations",
      "color": "b887db",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2018-03-21T19:03:26Z",
  "updated_at": "2021-09-22T15:37:50Z",
  "closed_at": "2018-10-11T23:32:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Truffle compiler option `contracts_build_directory` is described [here](http://truffleframework.com/docs/advanced/configuration#contracts_build_directory).\r\n\r\nI'm having trouble with Truffle's inconsistent behavior on that configuration parameter.\r\n\r\nI'm setting it as follows:\r\n\r\n    contracts_build_directory: \"../../artifacts\"\r\n\r\nWhen I execute `truffle compile`, all artifacts are created in a folder named \"artifacts\" which is located two levels above the project's root directory.\r\n\r\nWhen I execute `truffle migrate --network=development`, I get the following error message:\r\n\r\n    Running migration: 1_initial_migration.js\r\n    fs.js:904\r\n      return binding.readdir(pathModule._makeLong(path), options.encoding);\r\n                     ^\r\n    \r\n    Error: ENOENT: no such file or directory, scandir '<see_below>\\artifacts'\r\n\r\nWhere `<see_below>` is a full path which ends only one level above the project's root directory.\r\n\r\nI can therefore resolve this problem as follows:\r\n\r\n1. Run `truffle compile`\r\n2. Change `contracts_build_directory` from `\"../../artifacts\"` to `\"../../../artifacts\"`\r\n3. Run `truffle migrate --network=development`\r\n\r\nThis solution is inappropriate of course.\r\n\r\nMy project directory structure is as follows:\r\n\r\n    project folder:\r\n        contracts folder:\r\n            sol files\r\n        migrations folder:\r\n            1_initial_migration.js file\r\n            2_deploy_contracts.js file\r\n        test folder:\r\n            js files\r\n        truffle-config.js file\r\n\r\nMy truffle configuration (in truffle-config.js) is as follows:\r\n\r\n    // See <http://truffleframework.com/docs/advanced/configuration>\r\n    module.exports = {\r\n        contracts_build_directory: \"../../artifacts\",\r\n        networks: {\r\n            development: {\r\n                host:       \"127.0.0.1\",\r\n                network_id: \"*\",\r\n                port:       8545,\r\n                gas:        4712388,      // Gas limit used for deploys\r\n                gasPrice:   100000000000, // Gas price used for deploys\r\n            },\r\n        },\r\n        mocha: {\r\n            useColors: true,\r\n            bail:      true,   // Abort after first test failure\r\n            reporter:  \"list\", // See <https://mochajs.org/#reporters>\r\n        },\r\n        solc: {\r\n            optimizer: {\r\n                enabled: true,\r\n                runs:    5000000,\r\n            },\r\n        },\r\n    };\r\n\r\nTo my understanding, the problem stems from the fact that `truffle migrate` \"steps into\" the `migrations` folder and runs from there (hence an additional `..\\` is required in the value of the `contracts_build_directory` parameter).\r\n\r\nUPDATE:\r\n\r\nIf I delete all the artifacts, and then run `truffle migrate` without preceding it with `truffle compile` (i.e., letting `truffle migrate` do the compilation), then it works only when the `contracts_build_directory` option is NOT specified. Any other way (even setting it to the default value `./build/contracts` or to the \"trivial\" value `./`) - the migration fails.\r\n\r\nSo in short, there seem to be a \"collision\" between `truffle migrate` and `contracts_build_directory`.",
  "closed_by": {
    "login": "CruzMolina",
    "id": 7537712,
    "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CruzMolina",
    "html_url": "https://github.com/CruzMolina",
    "followers_url": "https://api.github.com/users/CruzMolina/followers",
    "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
    "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
    "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
    "repos_url": "https://api.github.com/users/CruzMolina/repos",
    "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/862/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375980966",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-375980966",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 375980966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTk4MDk2Ng==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-25T15:56:08Z",
    "updated_at": "2018-03-25T15:56:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "@barakman Thanks for this report. Will investigate.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375980966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/377952233",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-377952233",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 377952233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3Nzk1MjIzMw==",
    "user": {
      "login": "lazyc97",
      "id": 8538104,
      "node_id": "MDQ6VXNlcjg1MzgxMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8538104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lazyc97",
      "html_url": "https://github.com/lazyc97",
      "followers_url": "https://api.github.com/users/lazyc97/followers",
      "following_url": "https://api.github.com/users/lazyc97/following{/other_user}",
      "gists_url": "https://api.github.com/users/lazyc97/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lazyc97/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lazyc97/subscriptions",
      "organizations_url": "https://api.github.com/users/lazyc97/orgs",
      "repos_url": "https://api.github.com/users/lazyc97/repos",
      "events_url": "https://api.github.com/users/lazyc97/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lazyc97/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-02T15:14:37Z",
    "updated_at": "2018-04-02T16:02:13Z",
    "author_association": "NONE",
    "body": "I got problem at `return binding.readdir(pathModule.toNamespacedPath(path), options.encoding)` instead. I'm on Linux but `toNamespacedPath` seems to only work on Windows, might this be a problem with OS detection? I'm using Arch.\r\n\r\nI found a workaround:\r\n```javascript\r\nvar path = require('path');\r\nmodule.exports = {\r\n    contracts_build_directory: path.join(__dirname, /* your output dir */)\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/377952233/reactions",
      "total_count": 14,
      "+1": 10,
      "-1": 0,
      "laugh": 0,
      "hooray": 4,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394212370",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-394212370",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 394212370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDIxMjM3MA==",
    "user": {
      "login": "RobertoC27",
      "id": 8262009,
      "node_id": "MDQ6VXNlcjgyNjIwMDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8262009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertoC27",
      "html_url": "https://github.com/RobertoC27",
      "followers_url": "https://api.github.com/users/RobertoC27/followers",
      "following_url": "https://api.github.com/users/RobertoC27/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertoC27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertoC27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertoC27/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertoC27/orgs",
      "repos_url": "https://api.github.com/users/RobertoC27/repos",
      "events_url": "https://api.github.com/users/RobertoC27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertoC27/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T01:39:37Z",
    "updated_at": "2018-06-04T01:39:37Z",
    "author_association": "NONE",
    "body": "I'm having this issue as well, is there an official solution for it or just this workaround for now?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394212370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394404937",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-394404937",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 394404937,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDQwNDkzNw==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T15:51:40Z",
    "updated_at": "2018-06-04T15:51:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "@RobertoC27 There's no official solution -  out of curiosity which OS are you using?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394404937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394417832",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-394417832",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 394417832,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDQxNzgzMg==",
    "user": {
      "login": "RobertoC27",
      "id": 8262009,
      "node_id": "MDQ6VXNlcjgyNjIwMDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8262009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertoC27",
      "html_url": "https://github.com/RobertoC27",
      "followers_url": "https://api.github.com/users/RobertoC27/followers",
      "following_url": "https://api.github.com/users/RobertoC27/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertoC27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertoC27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertoC27/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertoC27/orgs",
      "repos_url": "https://api.github.com/users/RobertoC27/repos",
      "events_url": "https://api.github.com/users/RobertoC27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertoC27/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T16:31:48Z",
    "updated_at": "2018-06-04T16:31:48Z",
    "author_association": "NONE",
    "body": "I’m on windows 10, but I was working on a VM with Ubuntu 16.04 and issue was there.\r\n\r\nEnviado desde mi iPhone\r\n\r\nEl jun. 4, 2018, a la(s) 9:51 a. m., c-g-e-w-e-k-e-> <notifications@github.com<mailto:notifications@github.com>> escribió:\r\n\r\n\r\n@RobertoC27<https://github.com/RobertoC27> There's no official solution - out of curiosity which OS are you using?\r\n\r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub<https://github.com/trufflesuite/truffle/issues/862#issuecomment-394404937>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AH4ReZ2a1LKmvlmuE8fCX0_ddyuuqkpfks5t5VeXgaJpZM4S1VR4>.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394417832/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394438760",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-394438760",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 394438760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDQzODc2MA==",
    "user": {
      "login": "RobertoC27",
      "id": 8262009,
      "node_id": "MDQ6VXNlcjgyNjIwMDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8262009?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RobertoC27",
      "html_url": "https://github.com/RobertoC27",
      "followers_url": "https://api.github.com/users/RobertoC27/followers",
      "following_url": "https://api.github.com/users/RobertoC27/following{/other_user}",
      "gists_url": "https://api.github.com/users/RobertoC27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RobertoC27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RobertoC27/subscriptions",
      "organizations_url": "https://api.github.com/users/RobertoC27/orgs",
      "repos_url": "https://api.github.com/users/RobertoC27/repos",
      "events_url": "https://api.github.com/users/RobertoC27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RobertoC27/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-04T17:42:05Z",
    "updated_at": "2018-06-04T17:42:05Z",
    "author_association": "NONE",
    "body": "Just to make it clear, I’m working on Windows 10 and the issue can be reproduced consistently, but when working with a VM with Ubuntu 16.04 issue was present as well. In Ubuntu the problem was that the migrations.sol file could not be found. Solved it by changing the line that was something like “require(./migrations.sol)” and changed it to\r\n“Require(migrations)”.\r\n\r\n\r\n\r\nEl jun. 4, 2018, a la(s) 9:51 a. m., c-g-e-w-e-k-e-> <notifications@github.com<mailto:notifications@github.com>> escribió:\r\n\r\n\r\n@RobertoC27<https://github.com/RobertoC27> There's no official solution - out of curiosity which OS are you using?\r\n\r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub<https://github.com/trufflesuite/truffle/issues/862#issuecomment-394404937>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AH4ReZ2a1LKmvlmuE8fCX0_ddyuuqkpfks5t5VeXgaJpZM4S1VR4>.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/394438760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/416055880",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-416055880",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 416055880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjA1NTg4MA==",
    "user": {
      "login": "nicosquare",
      "id": 1103141,
      "node_id": "MDQ6VXNlcjExMDMxNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1103141?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nicosquare",
      "html_url": "https://github.com/nicosquare",
      "followers_url": "https://api.github.com/users/nicosquare/followers",
      "following_url": "https://api.github.com/users/nicosquare/following{/other_user}",
      "gists_url": "https://api.github.com/users/nicosquare/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nicosquare/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nicosquare/subscriptions",
      "organizations_url": "https://api.github.com/users/nicosquare/orgs",
      "repos_url": "https://api.github.com/users/nicosquare/repos",
      "events_url": "https://api.github.com/users/nicosquare/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nicosquare/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-26T17:43:56Z",
    "updated_at": "2018-08-26T17:43:56Z",
    "author_association": "NONE",
    "body": "Good afternoon everyone,\r\n\r\nIs there any advance on this issue? I'm facing exactly the same and I'm running out of options, I really need to change the directory of artifacts. It's the same issue:\r\n\r\n1. Change contracts_build_directory\r\n2. Run truffle compile\r\n3. Run truffle migrate --network=development\r\n4. It fails with the following stack trace:\r\n\r\nUsing network 'development'.\r\n\r\nRunning migration: 1_initial_migration.js\r\nfs.js:119\r\n    throw err;\r\n    ^\r\n\r\nError: ENOENT: no such file or directory, scandir './src/contracts/'\r\n    at Object.readdirSync (fs.js:759:3)\r\n    at FS.getContractName (/Users/madog/.nvm/versions/node/v10.7.0/lib/node_modules/truffle/build/cli.bundled.js:101719:22)\r\n    at FS.require (/Users/madog/.nvm/versions/node/v10.7.0/lib/node_modules/truffle/build/cli.bundled.js:101698:28)\r\n    at Resolver.require (/Users/madog/.nvm/versions/node/v10.7.0/lib/node_modules/truffle/build/cli.bundled.js:59966:25)\r\n    at Object.require (/Users/madog/.nvm/versions/node/v10.7.0/lib/node_modules/truffle/build/cli.bundled.js:69602:36)\r\n    at ResolverIntercept.require (/Users/madog/.nvm/versions/node/v10.7.0/lib/node_modules/truffle/build/cli.bundled.js:197047:32)\r\n    at /Users/madog/Documents/repos/dev/cycleapp/migrations/1_initial_migration.js:1:28\r\n    at Script.runInContext (vm.js:102:20)\r\n    at Script.runInNewContext (vm.js:108:17)\r\n    at /Users/madog/.nvm/versions/node/v10.7.0/lib/node_modules/truffle/build/cli.bundled.js:101639:14\r\n    at FSReqWrap.readFileAfterClose [as oncomplete] (internal/fs/read_file_context.js:53:3)\r\n\r\nThanks for any advice!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/416055880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/416084151",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-416084151",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 416084151,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjA4NDE1MQ==",
    "user": {
      "login": "lazyc97",
      "id": 8538104,
      "node_id": "MDQ6VXNlcjg1MzgxMDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8538104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lazyc97",
      "html_url": "https://github.com/lazyc97",
      "followers_url": "https://api.github.com/users/lazyc97/followers",
      "following_url": "https://api.github.com/users/lazyc97/following{/other_user}",
      "gists_url": "https://api.github.com/users/lazyc97/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lazyc97/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lazyc97/subscriptions",
      "organizations_url": "https://api.github.com/users/lazyc97/orgs",
      "repos_url": "https://api.github.com/users/lazyc97/repos",
      "events_url": "https://api.github.com/users/lazyc97/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lazyc97/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-27T00:23:04Z",
    "updated_at": "2018-08-27T00:23:04Z",
    "author_association": "NONE",
    "body": "@nicosquare you can check my workaround above",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/416084151/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/429155737",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-429155737",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 429155737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTE1NTczNw==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-11T23:32:02Z",
    "updated_at": "2018-10-11T23:32:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for raising this issue @barakman !\r\n\r\nWe've finally merged a fix for this into truffle@next via #1331.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/429155737/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/447885352",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-447885352",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 447885352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0Nzg4NTM1Mg==",
    "user": {
      "login": "vrde",
      "id": 134680,
      "node_id": "MDQ6VXNlcjEzNDY4MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/134680?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vrde",
      "html_url": "https://github.com/vrde",
      "followers_url": "https://api.github.com/users/vrde/followers",
      "following_url": "https://api.github.com/users/vrde/following{/other_user}",
      "gists_url": "https://api.github.com/users/vrde/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vrde/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vrde/subscriptions",
      "organizations_url": "https://api.github.com/users/vrde/orgs",
      "repos_url": "https://api.github.com/users/vrde/repos",
      "events_url": "https://api.github.com/users/vrde/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vrde/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-17T15:29:11Z",
    "updated_at": "2018-12-17T15:29:11Z",
    "author_association": "NONE",
    "body": "Can you reopen this issue? For the users of Truffle version 4 the bug is still there.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/447885352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/450105172",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-450105172",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 450105172,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MDEwNTE3Mg==",
    "user": {
      "login": "alexiskattan",
      "id": 1602292,
      "node_id": "MDQ6VXNlcjE2MDIyOTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1602292?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexiskattan",
      "html_url": "https://github.com/alexiskattan",
      "followers_url": "https://api.github.com/users/alexiskattan/followers",
      "following_url": "https://api.github.com/users/alexiskattan/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexiskattan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexiskattan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexiskattan/subscriptions",
      "organizations_url": "https://api.github.com/users/alexiskattan/orgs",
      "repos_url": "https://api.github.com/users/alexiskattan/repos",
      "events_url": "https://api.github.com/users/alexiskattan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexiskattan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-12-27T08:42:06Z",
    "updated_at": "2018-12-27T08:42:06Z",
    "author_association": "NONE",
    "body": "> contracts_build_directory: path.join(__dirname\r\n\r\n\r\n\r\n> I got problem at `return binding.readdir(pathModule.toNamespacedPath(path), options.encoding)` instead. I'm on Linux but `toNamespacedPath` seems to only work on Windows, might this be a problem with OS detection? I'm using Arch.\r\n> \r\n> I found a workaround:\r\n> \r\n> ```js\r\n> var path = require('path');\r\n> module.exports = {\r\n>     contracts_build_directory: path.join(__dirname, /* your output dir */)\r\n> }\r\n> ```\r\n\r\nWhere do you put this snipped to make it work?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/450105172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451809824",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-451809824",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 451809824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ1MTgwOTgyNA==",
    "user": {
      "login": "WyseNynja",
      "id": 624221,
      "node_id": "MDQ6VXNlcjYyNDIyMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/624221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WyseNynja",
      "html_url": "https://github.com/WyseNynja",
      "followers_url": "https://api.github.com/users/WyseNynja/followers",
      "following_url": "https://api.github.com/users/WyseNynja/following{/other_user}",
      "gists_url": "https://api.github.com/users/WyseNynja/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WyseNynja/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WyseNynja/subscriptions",
      "organizations_url": "https://api.github.com/users/WyseNynja/orgs",
      "repos_url": "https://api.github.com/users/WyseNynja/repos",
      "events_url": "https://api.github.com/users/WyseNynja/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WyseNynja/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-01-07T03:15:34Z",
    "updated_at": "2019-01-07T03:15:34Z",
    "author_association": "NONE",
    "body": "@alexiskattan into your truffle-config.js",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/451809824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/671014044",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-671014044",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 671014044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTAxNDA0NA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-09T06:37:20Z",
    "updated_at": "2020-08-09T06:41:42Z",
    "author_association": "NONE",
    "body": "@cgewecke:\r\n\r\nAlmost two and a half years later, the `contracts_build_directory` compiler option is still not handled properly on Windows.\r\n\r\nI'm on Truffle 5.1.36 now, and `truffle test` always ends up converting my contracts build directory (where Truffle creates all JSON artifacts) from `'./<my_project_folder>/build/contracts'` (which is also the default BTW) to some temporary Windows directory, for example, `'C:\\\\Users\\\\LOCALC~1\\\\AppData\\\\Local\\\\Temp\\\\test--12372-H5iUC1JGbek1'` (the suffix changes on every execution).\r\n\r\nThis, in turn, causes a full rebuild upon every execution (i.e., `truffle compile --all` is always executed automatically before the actual test begins).\r\n\r\nI have added some printouts in your code (file `cli.bundled.js`), and found out that the problem my be stemming from when function `prepareConfigAndRunTests` is called with this temporary directory.\r\n\r\nI believe that the problem might be here:\r\n```\r\n      Environment.detect(config)\r\n        .then(() => copyArtifactsToTempDir(config))\r\n        .then(({ config, temporaryDirectory }) => {\r\n          return prepareConfigAndRunTests({\r\n            config,\r\n            files,\r\n            temporaryDirectory\r\n          });\r\n        })\r\n```\r\nAnd since I know that this problem does not occur on neither Linux nor MacOS, I believe that it possibly stems from `Environment.detect`.\r\n\r\nWhat I don't get is, when printing all Truffle configurable directories (`contracts_directory`, `build_directory`, `test_directory`, `contracts_build_directory`, etc) in your code, why the only one which is replaced with a temporary directory is `contracts_build_directory`.\r\n\r\nAny help would be very much appreciated, as I am currently left to wait on compilation before every test.\r\n\r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/671014044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/673625824",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-673625824",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 673625824,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzYyNTgyNA==",
    "user": {
      "login": "barakman",
      "id": 7003246,
      "node_id": "MDQ6VXNlcjcwMDMyNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7003246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barakman",
      "html_url": "https://github.com/barakman",
      "followers_url": "https://api.github.com/users/barakman/followers",
      "following_url": "https://api.github.com/users/barakman/following{/other_user}",
      "gists_url": "https://api.github.com/users/barakman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barakman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barakman/subscriptions",
      "organizations_url": "https://api.github.com/users/barakman/orgs",
      "repos_url": "https://api.github.com/users/barakman/repos",
      "events_url": "https://api.github.com/users/barakman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barakman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T17:59:51Z",
    "updated_at": "2020-08-13T17:59:51Z",
    "author_association": "NONE",
    "body": "@CruzMolina:\r\n\r\nAny chance to get some help with that (see previous message)?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/673625824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925047236",
    "html_url": "https://github.com/trufflesuite/truffle/issues/862#issuecomment-925047236",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/862",
    "id": 925047236,
    "node_id": "IC_kwDOAkfq-c43IxnE",
    "user": {
      "login": "archerstar221",
      "id": 83966662,
      "node_id": "MDQ6VXNlcjgzOTY2NjYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/83966662?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/archerstar221",
      "html_url": "https://github.com/archerstar221",
      "followers_url": "https://api.github.com/users/archerstar221/followers",
      "following_url": "https://api.github.com/users/archerstar221/following{/other_user}",
      "gists_url": "https://api.github.com/users/archerstar221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/archerstar221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/archerstar221/subscriptions",
      "organizations_url": "https://api.github.com/users/archerstar221/orgs",
      "repos_url": "https://api.github.com/users/archerstar221/repos",
      "events_url": "https://api.github.com/users/archerstar221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/archerstar221/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-22T15:37:50Z",
    "updated_at": "2021-09-22T15:37:50Z",
    "author_association": "NONE",
    "body": "I have get the problem like this.\r\nSo How to set directory?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/925047236/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

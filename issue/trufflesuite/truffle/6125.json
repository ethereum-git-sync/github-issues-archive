{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/6125",
  "id": 1773187096,
  "node_id": "I_kwDOAkfq-c5psLAY",
  "number": 6125,
  "title": "deploy successfully in development network but failed with the ganache ui blockchain",
  "user": {
    "login": "chenqping",
    "id": 5651810,
    "node_id": "MDQ6VXNlcjU2NTE4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5651810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chenqping",
    "html_url": "https://github.com/chenqping",
    "followers_url": "https://api.github.com/users/chenqping/followers",
    "following_url": "https://api.github.com/users/chenqping/following{/other_user}",
    "gists_url": "https://api.github.com/users/chenqping/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chenqping/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chenqping/subscriptions",
    "organizations_url": "https://api.github.com/users/chenqping/orgs",
    "repos_url": "https://api.github.com/users/chenqping/repos",
    "events_url": "https://api.github.com/users/chenqping/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chenqping/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-06-25T10:00:19Z",
  "updated_at": "2023-06-25T15:49:07Z",
  "closed_at": "2023-06-25T15:43:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [\r\n![truffle migrate failed](https://github.com/trufflesuite/truffle/assets/5651810/9b20bf9d-42b8-43e7-8650-5c2483220434)\r\n] I've [opened a support ticket](https://trufflesuite.zendesk.com/hc/en-us/requests/new) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nDeploy a contract passing in another contract's address as a constructor argument, but failed with the following error:\r\n```\r\n *** Deployment Failed ***\r\n\r\n\"MyMetaTxDemo\" hit an invalid opcode while deploying. Try:\r\n   * Verifying that your constructor params satisfy all assert conditions.\r\n   * Verifying your constructor code doesn't access an array out of bounds.\r\n   * Adding reason strings to your assert statements.\r\n```\r\nmigrate script as follows:\r\n```\r\nconst MetaTxDemo = artifacts.require(\"MetaTxDemo\");\r\n\r\nmodule.exports = function(deployer) {\r\n  deployer.deploy(MetaTxDemo, \"0x85a34a43BeFBaEc40bcC63eb19F8D0E7FD6B4495\");\r\n};\r\n```\r\nbut this script works with the embedded development local ganache instance, don't know why it doesn't work with ganache ui\r\n\r\n## Steps to Reproduce\r\n\r\ntruffle migrate\r\n\r\n## Expected Behavior\r\n\r\ndeploy successfully or give more detail to diagnose the error\r\n\r\n## Actual Results\r\ndeploy falied with ganache ui but succeed with the embedded development instance\r\n\r\n## Environment\r\n\r\n* Operating System: macOS Big Sur\r\n* Ethereum client: Ganache-ui 2.7.1\r\n* Truffle version (`truffle version`): 5.10.0\r\n* node version (`node --version`): 16.17.1\r\n* npm version (`npm --version`): 9.7.1\r\n",
  "closed_by": {
    "login": "chenqping",
    "id": 5651810,
    "node_id": "MDQ6VXNlcjU2NTE4MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5651810?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chenqping",
    "html_url": "https://github.com/chenqping",
    "followers_url": "https://api.github.com/users/chenqping/followers",
    "following_url": "https://api.github.com/users/chenqping/following{/other_user}",
    "gists_url": "https://api.github.com/users/chenqping/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chenqping/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chenqping/subscriptions",
    "organizations_url": "https://api.github.com/users/chenqping/orgs",
    "repos_url": "https://api.github.com/users/chenqping/repos",
    "events_url": "https://api.github.com/users/chenqping/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chenqping/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1606138736",
    "html_url": "https://github.com/trufflesuite/truffle/issues/6125#issuecomment-1606138736",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/6125",
    "id": 1606138736,
    "node_id": "IC_kwDOAkfq-c5fu7tw",
    "user": {
      "login": "chenqping",
      "id": 5651810,
      "node_id": "MDQ6VXNlcjU2NTE4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5651810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chenqping",
      "html_url": "https://github.com/chenqping",
      "followers_url": "https://api.github.com/users/chenqping/followers",
      "following_url": "https://api.github.com/users/chenqping/following{/other_user}",
      "gists_url": "https://api.github.com/users/chenqping/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chenqping/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chenqping/subscriptions",
      "organizations_url": "https://api.github.com/users/chenqping/orgs",
      "repos_url": "https://api.github.com/users/chenqping/repos",
      "events_url": "https://api.github.com/users/chenqping/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chenqping/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-25T15:43:54Z",
    "updated_at": "2023-06-25T15:49:07Z",
    "author_association": "NONE",
    "body": "It seems because Ganache UI latest version 2.7.1 only supports up to Merge hard fork, but my truffle config uses solc 0.8.20, which corresponds to shanghai(default), so may some OP code not compatible. Use ganache-cli latest version is ok.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1606138736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

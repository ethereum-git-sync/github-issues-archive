{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/1845",
  "id": 423618422,
  "node_id": "MDU6SXNzdWU0MjM2MTg0MjI=",
  "number": 1845,
  "title": "truffle 5 migration doesn't work",
  "user": {
    "login": "az-ms",
    "id": 44391109,
    "node_id": "MDQ6VXNlcjQ0MzkxMTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/44391109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/az-ms",
    "html_url": "https://github.com/az-ms",
    "followers_url": "https://api.github.com/users/az-ms/followers",
    "following_url": "https://api.github.com/users/az-ms/following{/other_user}",
    "gists_url": "https://api.github.com/users/az-ms/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/az-ms/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/az-ms/subscriptions",
    "organizations_url": "https://api.github.com/users/az-ms/orgs",
    "repos_url": "https://api.github.com/users/az-ms/repos",
    "events_url": "https://api.github.com/users/az-ms/events{/privacy}",
    "received_events_url": "https://api.github.com/users/az-ms/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1289161117,
      "node_id": "MDU6TGFiZWwxMjg5MTYxMTE3",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/web3",
      "name": "web3",
      "color": "477aef",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-03-21T08:38:13Z",
  "updated_at": "2019-03-26T14:03:44Z",
  "closed_at": "2019-03-26T14:03:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [Yes] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nI have some problem with truffle 5.\r\nWhen we try to use truffle 5 to deploy the contact, it doesn't trigger the deployment at all.\r\nHowever when we turn to truffle 4 (4.1.15), it's running/deployed successfully.\r\n\r\nHere is the output from truffle 5:\r\n\r\nadam@ms-Virtual-Machine:~/simple-storage$ truffle migrate --network test --reset --verbose-rpc\r\n\r\n{\r\n\"jsonrpc\": \"2.0\",\r\n\"id\": 2,\r\n\"method\": \"eth_getBlockByNumber\",\r\n\"params\": [\r\n\"latest\",\r\nfalse\r\n]\r\n}\r\n\r\nI tested this json request, our private service can respond this request.\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nInstall truffle 5.0\r\n\r\n## Expected Behavior\r\n\r\nThe contract can be deployed to the target blockchain network.\r\n\r\n## Actual Results\r\n\r\nNo deployment or migration activity at all.\r\n\r\n## Environment\r\n\r\n* Operating System:  Ubuntu 18.04 LTS\r\n* Ethereum client:  Geth\r\n* Truffle version (`truffle version`):  5.0.8\r\n* node version (`node --version`):  v11.10.1\r\n* npm version (`npm --version`):  6.7.0\r\n",
  "closed_by": {
    "login": "CruzMolina",
    "id": 7537712,
    "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/CruzMolina",
    "html_url": "https://github.com/CruzMolina",
    "followers_url": "https://api.github.com/users/CruzMolina/followers",
    "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
    "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
    "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
    "repos_url": "https://api.github.com/users/CruzMolina/repos",
    "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
    "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476072665",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1845#issuecomment-476072665",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845",
    "id": 476072665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjA3MjY2NQ==",
    "user": {
      "login": "az-ms",
      "id": 44391109,
      "node_id": "MDQ6VXNlcjQ0MzkxMTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44391109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/az-ms",
      "html_url": "https://github.com/az-ms",
      "followers_url": "https://api.github.com/users/az-ms/followers",
      "following_url": "https://api.github.com/users/az-ms/following{/other_user}",
      "gists_url": "https://api.github.com/users/az-ms/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/az-ms/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/az-ms/subscriptions",
      "organizations_url": "https://api.github.com/users/az-ms/orgs",
      "repos_url": "https://api.github.com/users/az-ms/repos",
      "events_url": "https://api.github.com/users/az-ms/events{/privacy}",
      "received_events_url": "https://api.github.com/users/az-ms/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-25T06:37:16Z",
    "updated_at": "2019-03-25T06:41:06Z",
    "author_association": "NONE",
    "body": "I have reproduced this issue on Ganache. I run Ganache on 10.94.200.94. \r\nHere is my networks setting:\r\n\r\n    web3pganache: {\r\n      provider: function() {\r\n        var provider = new web3.providers.HttpProvider(\"http://10.94.200.94:7545\");\r\n        return provider;\r\n      },\r\n      network_id:\"*\"\r\n    },\r\n\r\n\r\n    ganache: {\r\n      host: \"10.94.200.94\",\r\n      port: 7545,\r\n      network_id: \"*\" // Match any network id\r\n    },\r\n\r\n// this works as we expected \r\n$ truffle migrate --network=ganache --reset\r\n\r\n// when we turn to use web3provider, we don't see any migration taking place. \r\n\r\n$ truffle migrate --network=web3pganache --reset --verbose-rpc\r\n\r\nCompiling your contracts...\r\n===========================\r\n> Everything is up to date, there is nothing to compile.\r\n\r\n   > {\r\n   >   \"jsonrpc\": \"2.0\",\r\n   >   \"id\": 3,\r\n   >   \"method\": \"eth_getBlockByNumber\",\r\n   >   \"params\": [\r\n   >     \"latest\",\r\n   >     false\r\n   >   ]\r\n   > }\r\n\r\nLet me know if this is not supported way to do this on truffle 5. As we can get it passed on truffle 4 and we also need web3 http provider to setup the http connection to private blockchain service. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476072665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476324591",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1845#issuecomment-476324591",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845",
    "id": 476324591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjMyNDU5MQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-25T18:32:49Z",
    "updated_at": "2019-03-25T18:34:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @az-ms !\r\n\r\nWhat version of web3 are you using for `web3pganache`?\r\nCurrently we only guarantee compatibility between web3 & truffle up to `web3@1.0.0-beta.37`.\r\n\r\nJust verified locally that the latest web3 (beta.50) doesn't work, but using beta.37 does.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476324591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476489146",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1845#issuecomment-476489146",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845",
    "id": 476489146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjQ4OTE0Ng==",
    "user": {
      "login": "az-ms",
      "id": 44391109,
      "node_id": "MDQ6VXNlcjQ0MzkxMTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/44391109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/az-ms",
      "html_url": "https://github.com/az-ms",
      "followers_url": "https://api.github.com/users/az-ms/followers",
      "following_url": "https://api.github.com/users/az-ms/following{/other_user}",
      "gists_url": "https://api.github.com/users/az-ms/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/az-ms/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/az-ms/subscriptions",
      "organizations_url": "https://api.github.com/users/az-ms/orgs",
      "repos_url": "https://api.github.com/users/az-ms/repos",
      "events_url": "https://api.github.com/users/az-ms/events{/privacy}",
      "received_events_url": "https://api.github.com/users/az-ms/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-26T06:11:39Z",
    "updated_at": "2019-03-26T06:11:39Z",
    "author_association": "NONE",
    "body": "@CruzMolina \r\n\r\nThank you for your input. I have verified this and it works on web3@1.0.0-beta.37.\r\nAnd I also find my original issue may be also related the version compatibility. \r\nNow web3@1.0.0-beta.37 is installed, but when I use httpheaderprovider (https://github.com/EthereumEx/httpheaderprovider) as the https provider, the migration always doesn't take place on truffle 5.\r\n\r\nIt seems that issue is related to its dependent web3 library.  Now I have removed this httpheaderprovider and use web3 provider directly, then the issue is resolved. \r\n\r\n├─┬ httpheaderprovider@0.3.4\r\n\r\n│ ├─┬ debug@2.6.9\r\n\r\n│ │ └── ms@2.0.0\r\n\r\n│ └─┬ web3@0.17.0-beta\r\n\r\n│   ├── bignumber.js@2.0.7 (git+https://github.com/debris/bignumber.js.git#94d7146671b9719e00a09c29b01a691bc85048c2)\r\n\r\n│   ├── crypto-js@3.1.8\r\n\r\n│   ├── utf8@2.1.1\r\n\r\n│   └── xmlhttprequest@1.8.0\r\n\r\n \r\n ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476489146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476656961",
    "html_url": "https://github.com/trufflesuite/truffle/issues/1845#issuecomment-476656961",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/1845",
    "id": 476656961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjY1Njk2MQ==",
    "user": {
      "login": "CruzMolina",
      "id": 7537712,
      "node_id": "MDQ6VXNlcjc1Mzc3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7537712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CruzMolina",
      "html_url": "https://github.com/CruzMolina",
      "followers_url": "https://api.github.com/users/CruzMolina/followers",
      "following_url": "https://api.github.com/users/CruzMolina/following{/other_user}",
      "gists_url": "https://api.github.com/users/CruzMolina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CruzMolina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CruzMolina/subscriptions",
      "organizations_url": "https://api.github.com/users/CruzMolina/orgs",
      "repos_url": "https://api.github.com/users/CruzMolina/repos",
      "events_url": "https://api.github.com/users/CruzMolina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CruzMolina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-26T14:03:43Z",
    "updated_at": "2019-03-26T14:03:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Oh wow, yes I would expect a pkg using web3@0.17.0-beta to act wonky w/ truffle 5.\r\n\r\nGlad we were able to narrow this down. Closing, but please feel free to re-open or create a new issue if something comes up!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/476656961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

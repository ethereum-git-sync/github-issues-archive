{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/499",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/499/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/499/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/499/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/499",
  "id": 243176415,
  "node_id": "MDU6SXNzdWUyNDMxNzY0MTU=",
  "number": 499,
  "title": "Truffle does not show proper error message when attempting to migrate abstract contract",
  "user": {
    "login": "Qqwy",
    "id": 5345745,
    "node_id": "MDQ6VXNlcjUzNDU3NDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5345745?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Qqwy",
    "html_url": "https://github.com/Qqwy",
    "followers_url": "https://api.github.com/users/Qqwy/followers",
    "following_url": "https://api.github.com/users/Qqwy/following{/other_user}",
    "gists_url": "https://api.github.com/users/Qqwy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Qqwy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Qqwy/subscriptions",
    "organizations_url": "https://api.github.com/users/Qqwy/orgs",
    "repos_url": "https://api.github.com/users/Qqwy/repos",
    "events_url": "https://api.github.com/users/Qqwy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Qqwy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2017-07-15T13:49:43Z",
  "updated_at": "2017-07-17T16:48:17Z",
  "closed_at": "2017-07-17T16:48:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nWhen you call `truffle migrate --reset` or `truffle test` while you have a contract that does not implement all calls of its abstract interface(s), we will get an error akin to:\r\n\r\n```\r\nError encountered, bailing. Network state unknown. Review successful transactions manually.\r\nError: The contract code couldn't be stored, please check your gas amount.\r\n    at Object.callback (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:207913:46)\r\n    at /home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:31866:25\r\n    at /home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:209746:9\r\n    at XMLHttpRequest.request.onreadystatechange (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:208522:13)\r\n    at XMLHttpRequestEventTarget.dispatchEvent (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210395:18)\r\n    at XMLHttpRequest._setReadyState (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210685:12)\r\n    at XMLHttpRequest._onHttpResponseEnd (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210840:12)\r\n    at IncomingMessage.<anonymous> (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210800:24)\r\n    at emitNone (events.js:91:20)\r\n    at IncomingMessage.emit (events.js:188:7)\r\n\r\n```\r\n\r\n## Steps to Reproduce\r\n\r\n```\r\ncontract Supply {\r\n    function totalSupply() constant returns (uint totalSupply);\r\n}\r\n\r\ncontract MyContract is Supply {\r\n    uint8 public number;\r\n    function set(uint8 new_number) {\r\n        number = new_number;\r\n    }\r\n}\r\n```\r\n\r\nMigrations file:\r\n```\r\nvar MyContract = artifacts.require(\"./MyContract.sol\");\r\n\r\nmodule.exports = function(deployer) {\r\n    deployer.deploy(MyContract);\r\n};\r\n\r\n```\r\n\r\n\r\n\r\n## Expected Behavior\r\n\r\nI'd expect an error message that is useful to debug the issue. In this case, something stating that we're trying to deploy an abstract or otherwise invalid contract. (Its bytecode is `0x`.)\r\n\r\n\r\n## Actual Results\r\n\r\n```\r\nError encountered, bailing. Network state unknown. Review successful transactions manually.\r\nError: The contract code couldn't be stored, please check your gas amount.\r\n    at Object.callback (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:207913:46)\r\n    at /home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:31866:25\r\n    at /home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:209746:9\r\n    at XMLHttpRequest.request.onreadystatechange (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:208522:13)\r\n    at XMLHttpRequestEventTarget.dispatchEvent (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210395:18)\r\n    at XMLHttpRequest._setReadyState (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210685:12)\r\n    at XMLHttpRequest._onHttpResponseEnd (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210840:12)\r\n    at IncomingMessage.<anonymous> (/home/qqwy/.asdf/installs/nodejs/7.8.0/.npm/lib/node_modules/truffle/build/cli.bundled.js:210800:24)\r\n    at emitNone (events.js:91:20)\r\n    at IncomingMessage.emit (events.js:188:7)\r\n\r\n```\r\n\r\n\r\n## Environment\r\n\r\n* Operating System: Linux Mint Serena.\r\n* Truffle version:\r\n  * Truffle v3.4.3 (core: 3.4.1)\r\n  * Solidity v0.4.11 (solc-js)\r\n\r\n* Ethereum client: testrpc\r\n* node version: 7.8.0\r\n* npm version: 4.2.0 (yarn version 0.24.5)\r\n",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/499/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/499/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/315811490",
    "html_url": "https://github.com/trufflesuite/truffle/issues/499#issuecomment-315811490",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/499",
    "id": 315811490,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxNTgxMTQ5MA==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-17T16:48:17Z",
    "updated_at": "2017-07-17T16:48:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the report! I'm marking this as a dupe of trufflesuite/truffle-contract#34. Cheers!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/315811490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4697",
  "id": 1124839672,
  "node_id": "I_kwDOAkfq-c5DC7D4",
  "number": 4697,
  "title": "Function depth in debugger doesn't increase when entering function called from fallback/receive function in Solidity >=0.5.1",
  "user": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 971535002,
      "node_id": "MDU6TGFiZWw5NzE1MzUwMDI=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Debugger",
      "name": "Debugger",
      "color": "7911ad",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-02-05T05:23:01Z",
  "updated_at": "2022-02-17T23:08:46Z",
  "closed_at": "2022-02-17T23:08:46Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nIf you call the fallback or receive function of a contract written in Solidity 0.5.1 or greater, and that fallback or receive function calls another function `f`, then the debugger's function depth won't increment upon entering `f`.\r\n\r\nThis is because, since the contract is in Solidity >=0.5.1, the debugger applies the phantom call guard, and nullifies the depth increase from the first jump-in encountered; since fallback and receive functions don't have a jump-in marking of their own, instead that nullification gets incorrectly applied to the first function *called* from the fallback or receive function.\r\n\r\nNote that constructors also don't have a jump-in marking, but this problem doesn't affect constructors because the debugger doesn't apply the phantom call guard when in a constructor.  It should also not apply the phantom call guard when a fallback or receive function is invoked, in order to solve this problem.\r\n\r\nPresumably I decided earlier that this was acceptable because this failure to increment the function depth cannot result in any variable collisions, and thus I considered harmless.  However, I neglected to consider that the function depth is also used for stepping, and as such this may cause the debugger to step incorrectly.  As such, this problem with the function depth should be corrected.\r\n\r\n## Environment\r\n\r\n* Truffle version (`truffle version`): 5.4.32",
  "closed_by": {
    "login": "kevinbluer",
    "id": 210755,
    "node_id": "MDQ6VXNlcjIxMDc1NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/210755?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kevinbluer",
    "html_url": "https://github.com/kevinbluer",
    "followers_url": "https://api.github.com/users/kevinbluer/followers",
    "following_url": "https://api.github.com/users/kevinbluer/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevinbluer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kevinbluer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevinbluer/subscriptions",
    "organizations_url": "https://api.github.com/users/kevinbluer/orgs",
    "repos_url": "https://api.github.com/users/kevinbluer/repos",
    "events_url": "https://api.github.com/users/kevinbluer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kevinbluer/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1043595282",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4697#issuecomment-1043595282",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4697",
    "id": 1043595282,
    "node_id": "IC_kwDOAkfq-c4-NAAS",
    "user": {
      "login": "kevinbluer",
      "id": 210755,
      "node_id": "MDQ6VXNlcjIxMDc1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/210755?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kevinbluer",
      "html_url": "https://github.com/kevinbluer",
      "followers_url": "https://api.github.com/users/kevinbluer/followers",
      "following_url": "https://api.github.com/users/kevinbluer/following{/other_user}",
      "gists_url": "https://api.github.com/users/kevinbluer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kevinbluer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kevinbluer/subscriptions",
      "organizations_url": "https://api.github.com/users/kevinbluer/orgs",
      "repos_url": "https://api.github.com/users/kevinbluer/repos",
      "events_url": "https://api.github.com/users/kevinbluer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kevinbluer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-17T23:08:46Z",
    "updated_at": "2022-02-17T23:08:46Z",
    "author_association": "MEMBER",
    "body": "Fixed in https://github.com/trufflesuite/truffle/releases/tag/v5.5.0",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1043595282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

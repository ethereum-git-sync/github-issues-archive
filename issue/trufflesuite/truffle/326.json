{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/326",
  "id": 199761984,
  "node_id": "MDU6SXNzdWUxOTk3NjE5ODQ=",
  "number": 326,
  "title": "Failed to run migration on testnet, it might due to some compilation inconsistencies",
  "user": {
    "login": "tranvictor",
    "id": 5132552,
    "node_id": "MDQ6VXNlcjUxMzI1NTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5132552?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tranvictor",
    "html_url": "https://github.com/tranvictor",
    "followers_url": "https://api.github.com/users/tranvictor/followers",
    "following_url": "https://api.github.com/users/tranvictor/following{/other_user}",
    "gists_url": "https://api.github.com/users/tranvictor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tranvictor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tranvictor/subscriptions",
    "organizations_url": "https://api.github.com/users/tranvictor/orgs",
    "repos_url": "https://api.github.com/users/tranvictor/repos",
    "events_url": "https://api.github.com/users/tranvictor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tranvictor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 17,
  "created_at": "2017-01-10T08:41:14Z",
  "updated_at": "2018-03-22T15:34:23Z",
  "closed_at": "2017-03-02T16:37:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\n`truffle compile` compiled `migration` contract to have `lastCompletedMigration` instead of `last_completed_migration` and it led to this error:\r\n\r\n```\r\n/usr/local/lib/node_modules/truffle/lib/migrate.js:226\r\n      migrations.last_completed_migration.call().then(function(completed_migration) {\r\n                                         ^\r\n\r\nTypeError: Cannot read property 'call' of undefined\r\n    at /usr/local/lib/node_modules/truffle/lib/migrate.js:226:42\r\n    at /usr/local/lib/node_modules/truffle/node_modules/ether-pudding/index.js:235:7\r\n    at tryToString (fs.js:425:3)\r\n    at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:412:12)\r\n```\r\n## Steps to Reproduce\r\n\r\nI couldn't reproduce the bug on fresh project.\r\n\r\n## Expected Behavior\r\n\r\nThe compiled migration file should have `last_completed_migration`\r\n## Actual Results\r\n\r\nIt has `lastCompletedMigration` instead.\r\n## Environment\r\n\r\n* Operating System: MacOS\r\n* Truffle version: v2.1.1\r\n",
  "closed_by": {
    "login": "tcoulter",
    "id": 92629,
    "node_id": "MDQ6VXNlcjkyNjI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tcoulter",
    "html_url": "https://github.com/tcoulter",
    "followers_url": "https://api.github.com/users/tcoulter/followers",
    "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
    "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
    "organizations_url": "https://api.github.com/users/tcoulter/orgs",
    "repos_url": "https://api.github.com/users/tcoulter/repos",
    "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tcoulter/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/326/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/271518734",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-271518734",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 271518734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MTUxODczNA==",
    "user": {
      "login": "tranvictor",
      "id": 5132552,
      "node_id": "MDQ6VXNlcjUxMzI1NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5132552?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tranvictor",
      "html_url": "https://github.com/tranvictor",
      "followers_url": "https://api.github.com/users/tranvictor/followers",
      "following_url": "https://api.github.com/users/tranvictor/following{/other_user}",
      "gists_url": "https://api.github.com/users/tranvictor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tranvictor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tranvictor/subscriptions",
      "organizations_url": "https://api.github.com/users/tranvictor/orgs",
      "repos_url": "https://api.github.com/users/tranvictor/repos",
      "events_url": "https://api.github.com/users/tranvictor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tranvictor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-10T08:49:05Z",
    "updated_at": "2017-01-10T08:49:05Z",
    "author_association": "NONE",
    "body": "It turns out I used [zeppelin](http://zeppelin-solidity.readthedocs.io/en/latest/) to build up my contract and it has its own `migration` contract whose name exactly the same as `truffle`'s migration contract. Thus it is replaced by `zeppelin`'s one.\r\n\r\nThis is pretty tricky, I guess `truffle` should redesign the `build/contracts` directory structure so same name contracts don't replace each other.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/271518734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/282172906",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-282172906",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 282172906,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjE3MjkwNg==",
    "user": {
      "login": "JGcarv",
      "id": 16119563,
      "node_id": "MDQ6VXNlcjE2MTE5NTYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16119563?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JGcarv",
      "html_url": "https://github.com/JGcarv",
      "followers_url": "https://api.github.com/users/JGcarv/followers",
      "following_url": "https://api.github.com/users/JGcarv/following{/other_user}",
      "gists_url": "https://api.github.com/users/JGcarv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JGcarv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JGcarv/subscriptions",
      "organizations_url": "https://api.github.com/users/JGcarv/orgs",
      "repos_url": "https://api.github.com/users/JGcarv/repos",
      "events_url": "https://api.github.com/users/JGcarv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JGcarv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-24T01:07:37Z",
    "updated_at": "2017-02-24T01:07:37Z",
    "author_association": "NONE",
    "body": "Hi @tranvictor ! I'm facing the same issue. What did you do to solve it?\r\nThanks!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/282172906/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/282328780",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-282328780",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 282328780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MjMyODc4MA==",
    "user": {
      "login": "tranvictor",
      "id": 5132552,
      "node_id": "MDQ6VXNlcjUxMzI1NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5132552?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tranvictor",
      "html_url": "https://github.com/tranvictor",
      "followers_url": "https://api.github.com/users/tranvictor/followers",
      "following_url": "https://api.github.com/users/tranvictor/following{/other_user}",
      "gists_url": "https://api.github.com/users/tranvictor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tranvictor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tranvictor/subscriptions",
      "organizations_url": "https://api.github.com/users/tranvictor/orgs",
      "repos_url": "https://api.github.com/users/tranvictor/repos",
      "events_url": "https://api.github.com/users/tranvictor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tranvictor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-02-24T16:03:05Z",
    "updated_at": "2017-02-24T16:03:05Z",
    "author_association": "NONE",
    "body": "@JGcarv In my case, I just removed the redundant `migration` contract from zeppelin. See my comment above for better explanation ðŸ˜„ ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/282328780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/283695431",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-283695431",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 283695431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzY5NTQzMQ==",
    "user": {
      "login": "JGcarv",
      "id": 16119563,
      "node_id": "MDQ6VXNlcjE2MTE5NTYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/16119563?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JGcarv",
      "html_url": "https://github.com/JGcarv",
      "followers_url": "https://api.github.com/users/JGcarv/followers",
      "following_url": "https://api.github.com/users/JGcarv/following{/other_user}",
      "gists_url": "https://api.github.com/users/JGcarv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JGcarv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JGcarv/subscriptions",
      "organizations_url": "https://api.github.com/users/JGcarv/orgs",
      "repos_url": "https://api.github.com/users/JGcarv/repos",
      "events_url": "https://api.github.com/users/JGcarv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JGcarv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-02T16:04:03Z",
    "updated_at": "2017-03-02T16:04:03Z",
    "author_association": "NONE",
    "body": "I see. That makes sense. Thanks @tranvictor !",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/283695431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/283705725",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-283705725",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 283705725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzcwNTcyNQ==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-02T16:37:29Z",
    "updated_at": "2017-03-02T16:37:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "To clarify: Are all of you guys on Truffle 2? Truffle 3.x should fix this issue, as it has defined ordering of dependencies sources (i.e., your project first, then EthPM, then NPM). If you haven't yet, give Truffle 3.0 a try. It requires some upgrading, but you can find more information here: http://truffleframework.com/tutorials/upgrading-from-truffle-2-to-3",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/283705725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/283705853",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-283705853",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 283705853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4MzcwNTg1Mw==",
    "user": {
      "login": "tcoulter",
      "id": 92629,
      "node_id": "MDQ6VXNlcjkyNjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/92629?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tcoulter",
      "html_url": "https://github.com/tcoulter",
      "followers_url": "https://api.github.com/users/tcoulter/followers",
      "following_url": "https://api.github.com/users/tcoulter/following{/other_user}",
      "gists_url": "https://api.github.com/users/tcoulter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tcoulter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tcoulter/subscriptions",
      "organizations_url": "https://api.github.com/users/tcoulter/orgs",
      "repos_url": "https://api.github.com/users/tcoulter/repos",
      "events_url": "https://api.github.com/users/tcoulter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tcoulter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-02T16:37:56Z",
    "updated_at": "2017-03-02T16:39:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm going to close this ticket since it *should* be fixed in Truffle 3. If Truffle 3 users still have this issue, please reopen.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/283705853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/313312015",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-313312015",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 313312015,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMzMxMjAxNQ==",
    "user": {
      "login": "interfect",
      "id": 752054,
      "node_id": "MDQ6VXNlcjc1MjA1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/752054?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/interfect",
      "html_url": "https://github.com/interfect",
      "followers_url": "https://api.github.com/users/interfect/followers",
      "following_url": "https://api.github.com/users/interfect/following{/other_user}",
      "gists_url": "https://api.github.com/users/interfect/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/interfect/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/interfect/subscriptions",
      "organizations_url": "https://api.github.com/users/interfect/orgs",
      "repos_url": "https://api.github.com/users/interfect/repos",
      "events_url": "https://api.github.com/users/interfect/events{/privacy}",
      "received_events_url": "https://api.github.com/users/interfect/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-07-06T06:53:55Z",
    "updated_at": "2017-07-06T06:53:55Z",
    "author_association": "NONE",
    "body": "I can confirm that this issue persists in Truffle v3.2.7, and has screwed up my live net deployment. The Zeppelin Migrations contract, which I don't use, gets built and clobbers the Truffle Migrations contract.\r\n\r\nThe two are *just* similar enough that migrations can run, if the migrations contract has not yet been deployed, but then subsequent attempts to run migrations fail with the incredibly uninformative:\r\n\r\n```\r\n$ truffle migrate\r\nUsing network 'development'.\r\n\r\nTypeError: Cannot read property 'call' of undefined\r\n    at <snip>\\npm\\node_modules\\truffle\\build\\cli.bundled.js:54937:49\r\n    at process._tickCallback (internal/process/next_tick.js:109:7)\r\n```\r\n\r\nTruffle should fail at the compile step if two contracts have the same name, because it can't do anything other than clobber one with the other.\r\n\r\nAlternately, \"Truffle\" should be sprinkled liberally throughout the migrations contract method names, to avoid giving the appearance of working when you have the wrong contract.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/313312015/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/325141343",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-325141343",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 325141343,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNTE0MTM0Mw==",
    "user": {
      "login": "berlinguyinca",
      "id": 16364,
      "node_id": "MDQ6VXNlcjE2MzY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/16364?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/berlinguyinca",
      "html_url": "https://github.com/berlinguyinca",
      "followers_url": "https://api.github.com/users/berlinguyinca/followers",
      "following_url": "https://api.github.com/users/berlinguyinca/following{/other_user}",
      "gists_url": "https://api.github.com/users/berlinguyinca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/berlinguyinca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/berlinguyinca/subscriptions",
      "organizations_url": "https://api.github.com/users/berlinguyinca/orgs",
      "repos_url": "https://api.github.com/users/berlinguyinca/repos",
      "events_url": "https://api.github.com/users/berlinguyinca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/berlinguyinca/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-26T16:01:36Z",
    "updated_at": "2017-08-26T16:01:36Z",
    "author_association": "NONE",
    "body": "I'm seeing the same issue here",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/325141343/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/328243811",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-328243811",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 328243811,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyODI0MzgxMQ==",
    "user": {
      "login": "Ethbet",
      "id": 29768221,
      "node_id": "MDQ6VXNlcjI5NzY4MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/29768221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ethbet",
      "html_url": "https://github.com/Ethbet",
      "followers_url": "https://api.github.com/users/Ethbet/followers",
      "following_url": "https://api.github.com/users/Ethbet/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ethbet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ethbet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ethbet/subscriptions",
      "organizations_url": "https://api.github.com/users/Ethbet/orgs",
      "repos_url": "https://api.github.com/users/Ethbet/repos",
      "events_url": "https://api.github.com/users/Ethbet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ethbet/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-09-09T00:54:23Z",
    "updated_at": "2017-09-09T00:54:23Z",
    "author_association": "NONE",
    "body": "We were having this issue as well, it was temporarily fixed by removing all built contracts from their directory. There still appear to be several bugs in this catagory in the latest version of truffle regardless.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/328243811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/335054070",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-335054070",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 335054070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTA1NDA3MA==",
    "user": {
      "login": "tmm360",
      "id": 7620704,
      "node_id": "MDQ6VXNlcjc2MjA3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7620704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmm360",
      "html_url": "https://github.com/tmm360",
      "followers_url": "https://api.github.com/users/tmm360/followers",
      "following_url": "https://api.github.com/users/tmm360/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmm360/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmm360/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmm360/subscriptions",
      "organizations_url": "https://api.github.com/users/tmm360/orgs",
      "repos_url": "https://api.github.com/users/tmm360/repos",
      "events_url": "https://api.github.com/users/tmm360/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmm360/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-09T01:46:06Z",
    "updated_at": "2017-10-09T01:51:31Z",
    "author_association": "NONE",
    "body": "This should be reopened because is still an active issue. @tranvictor @tcoulter \r\nMy error on `truffle migrate` on `Truffle v3.4.11 (core: 3.4.11)`:\r\n\r\n```\r\nUsing network 'development'.\r\n\r\nTypeError: Cannot read property 'call' of undefined\r\n    at C:\\Users\\mirko\\AppData\\Roaming\\npm\\node_modules\\truffle\\build\\cli.bundled.js:72945:49\r\n    at <anonymous>\r\n    at process._tickCallback (internal/process/next_tick.js:188:7)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/335054070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/335058756",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-335058756",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 335058756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTA1ODc1Ng==",
    "user": {
      "login": "tmm360",
      "id": 7620704,
      "node_id": "MDQ6VXNlcjc2MjA3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7620704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tmm360",
      "html_url": "https://github.com/tmm360",
      "followers_url": "https://api.github.com/users/tmm360/followers",
      "following_url": "https://api.github.com/users/tmm360/following{/other_user}",
      "gists_url": "https://api.github.com/users/tmm360/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tmm360/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tmm360/subscriptions",
      "organizations_url": "https://api.github.com/users/tmm360/orgs",
      "repos_url": "https://api.github.com/users/tmm360/repos",
      "events_url": "https://api.github.com/users/tmm360/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tmm360/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-09T02:57:33Z",
    "updated_at": "2017-10-09T02:57:33Z",
    "author_association": "NONE",
    "body": "Sorry, my fault... I've updated my code and appear to be solved. Will update if it isn't.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/335058756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/354588927",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-354588927",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 354588927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NDU4ODkyNw==",
    "user": {
      "login": "louisgv",
      "id": 6723574,
      "node_id": "MDQ6VXNlcjY3MjM1NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6723574?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/louisgv",
      "html_url": "https://github.com/louisgv",
      "followers_url": "https://api.github.com/users/louisgv/followers",
      "following_url": "https://api.github.com/users/louisgv/following{/other_user}",
      "gists_url": "https://api.github.com/users/louisgv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/louisgv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/louisgv/subscriptions",
      "organizations_url": "https://api.github.com/users/louisgv/orgs",
      "repos_url": "https://api.github.com/users/louisgv/repos",
      "events_url": "https://api.github.com/users/louisgv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/louisgv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-31T07:02:12Z",
    "updated_at": "2017-12-31T07:04:06Z",
    "author_association": "NONE",
    "body": "I stumbled upon the same problem while trying to run `truffle migrate`. \r\n\r\nI got around it by removing the `build` directory, restart Ganache. Afterward `truffle migrate` runs smoothly \r\n\r\n```\r\ntruffle version\r\nTruffle v4.0.4 (core: 4.0.4)\r\nSolidity v0.4.18 (solc-js)\r\n```\r\n\r\nThis problem happens after a previous migrate run caused `Ganache` to crash. For some reason the build was invalid and thus it was trying to read from the previous build is my assumption. \r\n\r\nAnyway, cheer.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/354588927/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/374979284",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-374979284",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 374979284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NDk3OTI4NA==",
    "user": {
      "login": "JackPickering",
      "id": 16956871,
      "node_id": "MDQ6VXNlcjE2OTU2ODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/16956871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackPickering",
      "html_url": "https://github.com/JackPickering",
      "followers_url": "https://api.github.com/users/JackPickering/followers",
      "following_url": "https://api.github.com/users/JackPickering/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackPickering/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackPickering/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackPickering/subscriptions",
      "organizations_url": "https://api.github.com/users/JackPickering/orgs",
      "repos_url": "https://api.github.com/users/JackPickering/repos",
      "events_url": "https://api.github.com/users/JackPickering/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackPickering/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-21T15:28:44Z",
    "updated_at": "2018-03-21T15:32:51Z",
    "author_association": "NONE",
    "body": "I am having this same issue with the error that @tranvictor got at the start, at the exact same line however, my contracts folder does not contain an additional migrations file (i.e. I just have the one), yet I still get the error at the module:\r\n`  lastCompletedMigration: function(options, callback) {\r\n    var Migrations;\r\n\r\n    try {\r\n      Migrations = options.resolver.require(\"Migrations\");\r\n    } catch (e) {\r\n      return callback(new Error(\"Could not find built Migrations contract: \" + e.message));\r\n    }\r\n\r\n    if (Migrations.isDeployed() == false) {\r\n      return callback(null, 0);\r\n    }\r\n\r\n    var migrations = Migrations.deployed();\r\n\r\n    Migrations.deployed().then(function(migrations) {\r\n      return migrations.last_completed_migration.call();\r\n    }).then(function(completed_migration) {\r\n      callback(null, completed_migration.toNumber());\r\n    }).catch(callback);\r\n  },`\r\n\r\nThe line that throws is:\r\n`   return migrations.last_completed_migration.call();`\r\n\r\nHowever, in the Migrations.json file, the function reads:\r\n`   {\r\n      \"constant\": true,\r\n      \"inputs\": [],\r\n      \"name\": \"lastCompletedMigration\",\r\n      \"outputs\": [\r\n        {\r\n          \"name\": \"\",\r\n          \"type\": \"uint256\"\r\n        }\r\n      ],`\r\n\r\nMeaning the method last_completed_migration is not being found as there is one named lastCompletedMigration. Where would this be? Is there a way of altering the migrations folder to specifically call this instead?\r\n\r\nThis is absolutely vital to be able to deploy large sets of contracts which are inter-linked as you cannot expect people to risk spending $100 on every migration to deploy them all together and as it stands, you cannot migrate contracts separately using truffle due to this error.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/374979284/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375012479",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-375012479",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 375012479,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTAxMjQ3OQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-21T16:45:51Z",
    "updated_at": "2018-03-21T16:45:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@JackPickering Could you update to the latest Truffle and test with that? The current migrations logic looks like this:\r\n```javascript\r\nMigrations.deployed().then(function(migrations) {\r\n      // Two possible Migrations.sol's (lintable/unlintable)\r\n      return (migrations.last_completed_migration)\r\n        ? migrations.last_completed_migration.call()\r\n        : migrations.lastCompletedMigration.call();\r\n\r\n    }).then(function(completed_migration) {\r\n      callback(null, completed_migration.toNumber());\r\n    }).catch(callback);\r\n```\r\n\r\nIt looks like you're trying to run a newer version of the migrations contract with an older version of truffle which doesn't support it.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375012479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375242894",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-375242894",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 375242894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTI0Mjg5NA==",
    "user": {
      "login": "JackPickering",
      "id": 16956871,
      "node_id": "MDQ6VXNlcjE2OTU2ODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/16956871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackPickering",
      "html_url": "https://github.com/JackPickering",
      "followers_url": "https://api.github.com/users/JackPickering/followers",
      "following_url": "https://api.github.com/users/JackPickering/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackPickering/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackPickering/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackPickering/subscriptions",
      "organizations_url": "https://api.github.com/users/JackPickering/orgs",
      "repos_url": "https://api.github.com/users/JackPickering/repos",
      "events_url": "https://api.github.com/users/JackPickering/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackPickering/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T10:06:34Z",
    "updated_at": "2018-03-22T13:31:17Z",
    "author_association": "NONE",
    "body": "I've updated to Truffle @4.1.3\r\n\r\nThen ran 'truffle unbox webpack'\r\n\r\nThis is my migrations.sol contract...\r\n```\r\npragma solidity ^0.4.17;\r\n\r\ncontract Migrations {\r\n  address public owner;\r\n  uint public last_completed_migration;\r\n\r\n  modifier restricted() {\r\n    if (msg.sender == owner) _;\r\n  }\r\n\r\n  function Migrations() public {\r\n    owner = msg.sender;\r\n  }\r\n\r\n  function setCompleted(uint completed) public restricted {\r\n    last_completed_migration = completed;\r\n  }\r\n\r\n  function upgrade(address new_address) public restricted {\r\n    Migrations upgraded = Migrations(new_address);\r\n    upgraded.setCompleted(last_completed_migration);\r\n  }\r\n}\r\n```\r\n\r\nThis is my migrations.js file...\r\n\r\n```\r\nvar Migrations = artifacts.require(\"./Migrations.sol\");\r\n\r\nmodule.exports = function(deployer) {\r\n  deployer.deploy(Migrations);\r\n};\r\n```\r\n\r\nWhere is this new logic meant to be? \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375242894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375324305",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-375324305",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 375324305,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTMyNDMwNQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T14:24:05Z",
    "updated_at": "2018-03-22T14:24:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@JackPickering The new logic is at `truffle-migrate` where the migrations are processed. There are now two possible versions of the standard migrations contract - the original and a newer one that follows the Solidity style guidelines and camel cases the variable names. It's installed when anyone starts a new project from scratch with `truffle init`.\r\n\r\nThe ABI you showed indicates the compiled contract you're interacting with is the newer version:\r\n```\r\n{ \"constant\": true, \"inputs\": [], \"name\": \"lastCompletedMigration\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ],\r\n```\r\n\r\nIs Petshop the project you're working on? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375324305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375350236",
    "html_url": "https://github.com/trufflesuite/truffle/issues/326#issuecomment-375350236",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/326",
    "id": 375350236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTM1MDIzNg==",
    "user": {
      "login": "JackPickering",
      "id": 16956871,
      "node_id": "MDQ6VXNlcjE2OTU2ODcx",
      "avatar_url": "https://avatars.githubusercontent.com/u/16956871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JackPickering",
      "html_url": "https://github.com/JackPickering",
      "followers_url": "https://api.github.com/users/JackPickering/followers",
      "following_url": "https://api.github.com/users/JackPickering/following{/other_user}",
      "gists_url": "https://api.github.com/users/JackPickering/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JackPickering/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JackPickering/subscriptions",
      "organizations_url": "https://api.github.com/users/JackPickering/orgs",
      "repos_url": "https://api.github.com/users/JackPickering/repos",
      "events_url": "https://api.github.com/users/JackPickering/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JackPickering/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T15:34:23Z",
    "updated_at": "2018-03-22T15:34:23Z",
    "author_association": "NONE",
    "body": "Okay, that makes sense thank you, its worked but now I get a different error unrelated to this thread. Myabe you could help though if you wouldnt mind? It basically now says `Error: Could not set `null` as the transaction hash for SaleStagesLib` when I try to link a library that has already been migrated. \r\nhttps://github.com/trufflesuite/truffle-migrate/issues/24\r\n\r\nMuch appreciated, \r\nThanks",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/375350236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

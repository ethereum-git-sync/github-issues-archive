{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/890",
  "id": 313263906,
  "node_id": "MDU6SXNzdWUzMTMyNjM5MDY=",
  "number": 890,
  "title": "Is debugging mainnet transactions with Infura possible?",
  "user": {
    "login": "chapati23",
    "id": 117495,
    "node_id": "MDQ6VXNlcjExNzQ5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/117495?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chapati23",
    "html_url": "https://github.com/chapati23",
    "followers_url": "https://api.github.com/users/chapati23/followers",
    "following_url": "https://api.github.com/users/chapati23/following{/other_user}",
    "gists_url": "https://api.github.com/users/chapati23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chapati23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chapati23/subscriptions",
    "organizations_url": "https://api.github.com/users/chapati23/orgs",
    "repos_url": "https://api.github.com/users/chapati23/repos",
    "events_url": "https://api.github.com/users/chapati23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chapati23/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2018-04-11T10:26:36Z",
  "updated_at": "2018-04-13T07:55:49Z",
  "closed_at": "2018-04-11T21:00:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "- [x] I've asked for help in the [Truffle Gitter](http://gitter.im/Consensys/truffle) before filing this issue.\r\n\r\n---------------------------\r\n\r\n## Issue\r\n\r\nCan't debug mainnet transactions using infura\r\n\r\n## Steps to Reproduce\r\n\r\n```js\r\n// truffle.js\r\nconst HDWalletProvider = require('truffle-hdwallet-provider')\r\n\r\nmodule.exports = {\r\n  networks: {\r\n    mainnet: {\r\n      provider: new HDWalletProvider(\r\n        'some randomly made up mnemonic',\r\n        'https://mainnet.infura.io/'\r\n      ),\r\n      network_id: '1'\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## Expected Behavior\r\n\r\n```sh\r\ntruffle debug <tx-id>  --network mainnet\r\n```\r\n\r\nshould have debugged my transaction\r\n\r\n## Actual Results\r\n\r\nGot an error\r\n\r\n![screen shot 2018-04-11 at 12 24 09](https://user-images.githubusercontent.com/117495/38611189-4f1a8a7a-3d83-11e8-816e-2f1efc057e11.png)\r\n\r\n\r\n## Environment\r\n\r\n* Operating System: MacOS 10.13.4\r\n* Ethereum client: Infura\r\n* Truffle version (`truffle version`): v4.1.5\r\n* node version (`node --version`): v9.8.0\r\n* npm version (`npm --version`): v5.6.0\r\n",
  "closed_by": {
    "login": "chapati23",
    "id": 117495,
    "node_id": "MDQ6VXNlcjExNzQ5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/117495?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chapati23",
    "html_url": "https://github.com/chapati23",
    "followers_url": "https://api.github.com/users/chapati23/followers",
    "following_url": "https://api.github.com/users/chapati23/following{/other_user}",
    "gists_url": "https://api.github.com/users/chapati23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chapati23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chapati23/subscriptions",
    "organizations_url": "https://api.github.com/users/chapati23/orgs",
    "repos_url": "https://api.github.com/users/chapati23/repos",
    "events_url": "https://api.github.com/users/chapati23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chapati23/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/890/reactions",
    "total_count": 4,
    "+1": 4,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380566355",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-380566355",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 380566355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDU2NjM1NQ==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T19:20:24Z",
    "updated_at": "2018-04-11T19:21:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chapati23 AFAIK Infura doesn't support geth's debugging API, possibly for security reasons. The debugger requires that the client implement the [debug_traceTransaction](https://github.com/ethereum/go-ethereum/wiki/Management-APIs#debug_tracetransaction) endpoint and geth allows that method to pass arbitrary JS code in as an option and run it on the client as a trace processor. It would be risky for a public facing service to allow anyone to do that.\r\n \r\nHowever, you should be be able to debug mainnet transactions via a local geth node by running `truffle debug 0x... --network mainnet`. \r\n  ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380566355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380580504",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-380580504",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 380580504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDU4MDUwNA==",
    "user": {
      "login": "chapati23",
      "id": 117495,
      "node_id": "MDQ6VXNlcjExNzQ5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/117495?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chapati23",
      "html_url": "https://github.com/chapati23",
      "followers_url": "https://api.github.com/users/chapati23/followers",
      "following_url": "https://api.github.com/users/chapati23/following{/other_user}",
      "gists_url": "https://api.github.com/users/chapati23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chapati23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chapati23/subscriptions",
      "organizations_url": "https://api.github.com/users/chapati23/orgs",
      "repos_url": "https://api.github.com/users/chapati23/repos",
      "events_url": "https://api.github.com/users/chapati23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chapati23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T20:11:22Z",
    "updated_at": "2018-04-11T20:11:22Z",
    "author_association": "NONE",
    "body": "@cgewecke thanks, that's what I feared. been syncing for a few hours alreadyâ€¦\r\n\r\nwould it work with `geth --fast` (syncing only tx receipts and current state DB as far as i understand the docs) or do i need a _full_ full node locally?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380580504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380587474",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-380587474",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 380587474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDU4NzQ3NA==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T20:36:35Z",
    "updated_at": "2018-04-11T20:36:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chapati23 It looks like it depends on which transaction you want to inspect. There's a nice overview of this subject at the Geth docs [here](https://github.com/ethereum/go-ethereum/wiki/Tracing:-Introduction).",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380587474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380594139",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-380594139",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 380594139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDU5NDEzOQ==",
    "user": {
      "login": "chapati23",
      "id": 117495,
      "node_id": "MDQ6VXNlcjExNzQ5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/117495?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chapati23",
      "html_url": "https://github.com/chapati23",
      "followers_url": "https://api.github.com/users/chapati23/followers",
      "following_url": "https://api.github.com/users/chapati23/following{/other_user}",
      "gists_url": "https://api.github.com/users/chapati23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chapati23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chapati23/subscriptions",
      "organizations_url": "https://api.github.com/users/chapati23/orgs",
      "repos_url": "https://api.github.com/users/chapati23/repos",
      "events_url": "https://api.github.com/users/chapati23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chapati23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-11T21:00:46Z",
    "updated_at": "2018-04-11T21:00:46Z",
    "author_association": "NONE",
    "body": "Thanks @cgewecke, will give it a read and report back here after my local geth node is fully synced.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380594139/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380883547",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-380883547",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 380883547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDg4MzU0Nw==",
    "user": {
      "login": "chapati23",
      "id": 117495,
      "node_id": "MDQ6VXNlcjExNzQ5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/117495?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chapati23",
      "html_url": "https://github.com/chapati23",
      "followers_url": "https://api.github.com/users/chapati23/followers",
      "following_url": "https://api.github.com/users/chapati23/following{/other_user}",
      "gists_url": "https://api.github.com/users/chapati23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chapati23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chapati23/subscriptions",
      "organizations_url": "https://api.github.com/users/chapati23/orgs",
      "repos_url": "https://api.github.com/users/chapati23/repos",
      "events_url": "https://api.github.com/users/chapati23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chapati23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T17:28:01Z",
    "updated_at": "2018-04-12T17:28:01Z",
    "author_association": "NONE",
    "body": "Haven't finished syncing yet but I guess this paragraph from the docs answers my question:\r\n\r\n> In order for an Ethereum node to reexecute a transaction, **it needs to have available all historical state accessed by the transaction**:\r\n> * Balance, nonce, bytecode and storage of both the recipient as well as all internally invoked contracts.\r\n> * Block metadata referenced during execution of both the outer as well as all internally created transactions.\r\n> * Intermediate state generated by all preceding transactions contained in the same block as the one being traced.\r\n\r\nThis sounds like it'd only work with a full geth node which sadly is too big for a normal dev machine these days. Guess the best alternative would be to have a full geth node running on AWS.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380883547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380893542",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-380893542",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 380893542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MDg5MzU0Mg==",
    "user": {
      "login": "cgewecke",
      "id": 7332026,
      "node_id": "MDQ6VXNlcjczMzIwMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7332026?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cgewecke",
      "html_url": "https://github.com/cgewecke",
      "followers_url": "https://api.github.com/users/cgewecke/followers",
      "following_url": "https://api.github.com/users/cgewecke/following{/other_user}",
      "gists_url": "https://api.github.com/users/cgewecke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cgewecke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cgewecke/subscriptions",
      "organizations_url": "https://api.github.com/users/cgewecke/orgs",
      "repos_url": "https://api.github.com/users/cgewecke/repos",
      "events_url": "https://api.github.com/users/cgewecke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cgewecke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-12T18:02:02Z",
    "updated_at": "2018-04-12T18:02:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@chapati23 Ai! That's good to know. . . .thank you. ",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/380893542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/381055446",
    "html_url": "https://github.com/trufflesuite/truffle/issues/890#issuecomment-381055446",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/890",
    "id": 381055446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTA1NTQ0Ng==",
    "user": {
      "login": "chapati23",
      "id": 117495,
      "node_id": "MDQ6VXNlcjExNzQ5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/117495?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chapati23",
      "html_url": "https://github.com/chapati23",
      "followers_url": "https://api.github.com/users/chapati23/followers",
      "following_url": "https://api.github.com/users/chapati23/following{/other_user}",
      "gists_url": "https://api.github.com/users/chapati23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chapati23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chapati23/subscriptions",
      "organizations_url": "https://api.github.com/users/chapati23/orgs",
      "repos_url": "https://api.github.com/users/chapati23/repos",
      "events_url": "https://api.github.com/users/chapati23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chapati23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T07:55:49Z",
    "updated_at": "2018-04-13T07:55:49Z",
    "author_association": "NONE",
    "body": "Can confirm for sure now. In fully synced `geth --fast` node, i get `Error: required historical state unavailable` when trying to run `debug.traceTransaction(<tx-id>)`.\r\n\r\nwas worth a shot.",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/381055446/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

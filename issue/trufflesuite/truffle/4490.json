{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4490",
  "id": 1070635447,
  "node_id": "I_kwDOAkfq-c4_0Jm3",
  "number": 4490,
  "title": "Setting a custom path for the native solc binary",
  "user": {
    "login": "cameel",
    "id": 137030,
    "node_id": "MDQ6VXNlcjEzNzAzMA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cameel",
    "html_url": "https://github.com/cameel",
    "followers_url": "https://api.github.com/users/cameel/followers",
    "following_url": "https://api.github.com/users/cameel/following{/other_user}",
    "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
    "organizations_url": "https://api.github.com/users/cameel/orgs",
    "repos_url": "https://api.github.com/users/cameel/repos",
    "events_url": "https://api.github.com/users/cameel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cameel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 971681714,
      "node_id": "MDU6TGFiZWw5NzE2ODE3MTQ=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Compiler",
      "name": "Compiler",
      "color": "b60205",
      "default": false,
      "description": ""
    },
    {
      "id": 1528813673,
      "node_id": "MDU6TGFiZWwxNTI4ODEzNjcz",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/Config",
      "name": "Config",
      "color": "8fe004",
      "default": false,
      "description": ""
    },
    {
      "id": 1675042241,
      "node_id": "MDU6TGFiZWwxNjc1MDQyMjQx",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority5%20%F0%9F%8C%80",
      "name": "priority5 ðŸŒ€",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-12-03T14:15:45Z",
  "updated_at": "2023-04-25T08:35:00Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Currently Truffle [is hard-coded to use the globally installed solc binary called `solc`](https://github.com/trufflesuite/truffle/blob/v5.4.23/packages/compile-solidity/src/compilerSupplier/loadingStrategies/Native.ts#L8) when configured with `compilers.solc.version = 'native'`. This makes switching between versions of the compiler cumbersome. It would be more convenient if it allowed setting a custom path. Currently this is only possible with the emscripten binaries via solc-js.\r\n\r\nIn my case the primary motivation is to easily run tests of external projects with custom builds of the compiler but I could also imagine users wanting to use the much faster native binaries with multiple projects using different compiler versions.\r\n\r\nIf simply accepting the path to a native binary in the `compilers.solc.version` setting is problematic (would need some kind of detection to recognize it as a native binary?), my suggestion would be to read the compiler path from an environment variable if the variable exists. Using a custom compiler would then be as simple as:\r\n\r\n```bash\r\nTRUFFLE_NATIVE_SOLC_PATH=\"/tmp/solc-linux-amd64-v0.8.10+commit.fc410830\" truffle compile\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989104196",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4490#issuecomment-989104196",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490",
    "id": 989104196,
    "node_id": "IC_kwDOAkfq-c469IhE",
    "user": {
      "login": "fainashalts",
      "id": 8952139,
      "node_id": "MDQ6VXNlcjg5NTIxMzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8952139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fainashalts",
      "html_url": "https://github.com/fainashalts",
      "followers_url": "https://api.github.com/users/fainashalts/followers",
      "following_url": "https://api.github.com/users/fainashalts/following{/other_user}",
      "gists_url": "https://api.github.com/users/fainashalts/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fainashalts/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fainashalts/subscriptions",
      "organizations_url": "https://api.github.com/users/fainashalts/orgs",
      "repos_url": "https://api.github.com/users/fainashalts/repos",
      "events_url": "https://api.github.com/users/fainashalts/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fainashalts/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-08T18:58:15Z",
    "updated_at": "2021-12-08T18:58:15Z",
    "author_association": "MEMBER",
    "body": "Hi @cameel we like this idea, but it will require scoping as far as how to specify this properly in the user config and properly handle the info inside Truffle. We'll put it on our backlog to investigate further, but PRs are always welcome if you have an implementation in mind!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989104196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989941378",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4490#issuecomment-989941378",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490",
    "id": 989941378,
    "node_id": "IC_kwDOAkfq-c47AU6C",
    "user": {
      "login": "cameel",
      "id": 137030,
      "node_id": "MDQ6VXNlcjEzNzAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/137030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cameel",
      "html_url": "https://github.com/cameel",
      "followers_url": "https://api.github.com/users/cameel/followers",
      "following_url": "https://api.github.com/users/cameel/following{/other_user}",
      "gists_url": "https://api.github.com/users/cameel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cameel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cameel/subscriptions",
      "organizations_url": "https://api.github.com/users/cameel/orgs",
      "repos_url": "https://api.github.com/users/cameel/repos",
      "events_url": "https://api.github.com/users/cameel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cameel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-09T15:10:31Z",
    "updated_at": "2021-12-09T15:12:01Z",
    "author_association": "NONE",
    "body": "Great! I might try submitting a PR for this eventually, because it's blocking switching the Colony-based tests to the native compiler in the Solidity repo. Unfortunately not at the moment though because it's just a small part of a bigger task (benchmarking compilation/optimization using the new IR-based code generator) and it's not that critical, just nice to have to be able to get rid of brittle workarounds.\r\n\r\nAs for specifying this - would you prefer the solution with putting the compiler path in the setting or using an env variable? In case of a setting would you rely on autodetection or add another property to indicate what type of executable this is?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/989941378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1521375494",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4490#issuecomment-1521375494",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490",
    "id": 1521375494,
    "node_id": "IC_kwDOAkfq-c5arlkG",
    "user": {
      "login": "hellwolf",
      "id": 186660,
      "node_id": "MDQ6VXNlcjE4NjY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/186660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hellwolf",
      "html_url": "https://github.com/hellwolf",
      "followers_url": "https://api.github.com/users/hellwolf/followers",
      "following_url": "https://api.github.com/users/hellwolf/following{/other_user}",
      "gists_url": "https://api.github.com/users/hellwolf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hellwolf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hellwolf/subscriptions",
      "organizations_url": "https://api.github.com/users/hellwolf/orgs",
      "repos_url": "https://api.github.com/users/hellwolf/repos",
      "events_url": "https://api.github.com/users/hellwolf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hellwolf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T08:21:30Z",
    "updated_at": "2023-04-25T08:21:30Z",
    "author_association": "NONE",
    "body": "Is it possible now?",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1521375494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1521395214",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4490#issuecomment-1521395214",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4490",
    "id": 1521395214,
    "node_id": "IC_kwDOAkfq-c5arqYO",
    "user": {
      "login": "hellwolf",
      "id": 186660,
      "node_id": "MDQ6VXNlcjE4NjY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/186660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hellwolf",
      "html_url": "https://github.com/hellwolf",
      "followers_url": "https://api.github.com/users/hellwolf/followers",
      "following_url": "https://api.github.com/users/hellwolf/following{/other_user}",
      "gists_url": "https://api.github.com/users/hellwolf/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hellwolf/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hellwolf/subscriptions",
      "organizations_url": "https://api.github.com/users/hellwolf/orgs",
      "repos_url": "https://api.github.com/users/hellwolf/repos",
      "events_url": "https://api.github.com/users/hellwolf/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hellwolf/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T08:34:59Z",
    "updated_at": "2023-04-25T08:34:59Z",
    "author_association": "NONE",
    "body": "https://github.com/trufflesuite/truffle/pull/6007",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1521395214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

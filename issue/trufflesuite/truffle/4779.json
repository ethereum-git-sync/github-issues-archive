{
  "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779",
  "repository_url": "https://api.github.com/repos/trufflesuite/truffle",
  "labels_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779/labels{/name}",
  "comments_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779/comments",
  "events_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779/events",
  "html_url": "https://github.com/trufflesuite/truffle/issues/4779",
  "id": 1150778087,
  "node_id": "I_kwDOAkfq-c5El3rn",
  "number": 4779,
  "title": "No source fetcher for Blockscout",
  "user": {
    "login": "haltman-at",
    "id": 35589221,
    "node_id": "MDQ6VXNlcjM1NTg5MjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haltman-at",
    "html_url": "https://github.com/haltman-at",
    "followers_url": "https://api.github.com/users/haltman-at/followers",
    "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
    "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
    "organizations_url": "https://api.github.com/users/haltman-at/orgs",
    "repos_url": "https://api.github.com/users/haltman-at/repos",
    "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haltman-at/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 230393328,
      "node_id": "MDU6TGFiZWwyMzAzOTMzMjg=",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 1675042518,
      "node_id": "MDU6TGFiZWwxNjc1MDQyNTE4",
      "url": "https://api.github.com/repos/trufflesuite/truffle/labels/priority6%20%F0%9F%92%AD",
      "name": "priority6 ðŸ’­",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-02-25T19:29:10Z",
  "updated_at": "2023-04-25T08:38:36Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Issue\r\n\r\nThere's currently no source fetcher for [Blockscout](https://blockscout.com).\r\n\r\nThat said, writing one faces some problems.  Now Blockscout actually has two different APIs one could use for fetching source code.  One is similar to Etherscan's; the other is GraphQL based.   However, the GraphQL-based interface seems to be lacking some necessary information (such as the value of the `runs` parameter), so I don't think we can use that one; it would have to be the Etherscan-like interface (which is not *quite* identical to Etherscan's, having some minor differences, such as the key name for the `runs` parameter).\r\n\r\nHowever, determining the exact workings of this interface would also be troublesome (the documentation certainly doesn't do much to explain it).  As with Etherscan, there are four cases, although they're not the same four cases that Etherscan has.  (The cases are Solidity single-source; Vyper single-source; Solidity JSON; and Solidity metadata-and-sources (like Sourcify); that last one is different from Etherscan, which instead has Solidity multiple-source.)\r\n\r\nSo, it would be necessary to determine how each of those cases work.  I've already looked at the Solidity single-source case.  But how to determine the others?\r\n\r\nWith Etherscan, I could determine things by browsing verified contracts, looking for the different cases.  But Blockscout doesn't seem to have a good way to browse verified contracts.  Also with Etherscan, I could throw up test contracts on Goerli and verify them to see the result; the problem here is that Blockscout doesn't support the usual testnets.  The only testnets they support are the xDAI testnet and Sokol.  So uh I'd have to figure out how to use one of those, probably Sokol?  They have a faucet at least which is convenient.  But maybe I can look at that sometime when I have time...\r\n\r\n## Environment\r\n\r\n* Truffle version (`truffle version`): 5.5.2",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1057788898",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4779#issuecomment-1057788898",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779",
    "id": 1057788898,
    "node_id": "IC_kwDOAkfq-c4_DJPi",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-03T08:17:12Z",
    "updated_at": "2022-03-03T08:17:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, even this is low-priority, I did some more looking into this using Sokol, and what I found is that Blockscout has some problems.  The JSON method just... doesn't seem to work?  I couldn't verify any contracts that way.  And if you use the Sourcify-like method, then the return value is missing some necessary information. :-/  I mean, the good news is that in that case they actually verify the contract on Sourcify, so one could rely on that...? :-/  (Presumably not in the same fetcher, though.)\r\n\r\nMoreover, Blockscout seems to be in the habit of occasionally returning errors for no particular reason that I could find.  It seemed like if it knew about that address, but that address wasn't verified, it would return an error!  It would only return the \"not verified\" message when it was an address it didn't know about at all...?  This will pose a problem if one wants to be able to retry on errors, as it will lead to a lot of fruitless retrying!",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1057788898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1207106467",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4779#issuecomment-1207106467",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779",
    "id": 1207106467,
    "node_id": "IC_kwDOAkfq-c5H8vuj",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-06T00:36:57Z",
    "updated_at": "2022-08-06T00:36:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Btw, here are the issues I've filed with Blocksout:\r\n1. https://github.com/blockscout/blockscout/issues/5746\r\n2. https://github.com/blockscout/blockscout/issues/5747\r\n3. https://github.com/blockscout/blockscout/issues/5748\r\n4. https://github.com/blockscout/blockscout/issues/5749",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1207106467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1521202124",
    "html_url": "https://github.com/trufflesuite/truffle/issues/4779#issuecomment-1521202124",
    "issue_url": "https://api.github.com/repos/trufflesuite/truffle/issues/4779",
    "id": 1521202124,
    "node_id": "IC_kwDOAkfq-c5aq7PM",
    "user": {
      "login": "haltman-at",
      "id": 35589221,
      "node_id": "MDQ6VXNlcjM1NTg5MjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/35589221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haltman-at",
      "html_url": "https://github.com/haltman-at",
      "followers_url": "https://api.github.com/users/haltman-at/followers",
      "following_url": "https://api.github.com/users/haltman-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/haltman-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haltman-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haltman-at/subscriptions",
      "organizations_url": "https://api.github.com/users/haltman-at/orgs",
      "repos_url": "https://api.github.com/users/haltman-at/repos",
      "events_url": "https://api.github.com/users/haltman-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haltman-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-25T06:08:17Z",
    "updated_at": "2023-04-25T08:38:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "So, Blockscout now supports Yul!  However, I ran into a problem trying to test that case: https://github.com/blockscout/blockscout-rs/issues/449",
    "reactions": {
      "url": "https://api.github.com/repos/trufflesuite/truffle/issues/comments/1521202124/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

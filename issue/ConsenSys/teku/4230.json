{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/4230",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/4230",
  "id": 965100341,
  "node_id": "MDU6SXNzdWU5NjUxMDAzNDE=",
  "number": 4230,
  "title": "Add (experimental) light client server functionality",
  "user": {
    "login": "benjaminion",
    "id": 20796281,
    "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benjaminion",
    "html_url": "https://github.com/benjaminion",
    "followers_url": "https://api.github.com/users/benjaminion/followers",
    "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
    "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
    "organizations_url": "https://api.github.com/users/benjaminion/orgs",
    "repos_url": "https://api.github.com/users/benjaminion/repos",
    "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benjaminion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1846421702,
      "node_id": "MDU6TGFiZWwxODQ2NDIxNzAy",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/Epic",
      "name": "Epic",
      "color": "3E4B9E",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-08-10T15:56:54Z",
  "updated_at": "2023-01-26T16:31:45Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "See [these notes](https://notes.ethereum.org/@ralexstokes/S1RSe1JlF) for some background.\n\n> A first milestone here is to fork one of the production-grade beacon clients and build out the aforementioned functionality.\n\nI believe that Teku's architecture makes it well suited to implementing the light client server functionality and meeting this milestone.\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/4230/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 2
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/952444030",
    "html_url": "https://github.com/ConsenSys/teku/issues/4230#issuecomment-952444030",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230",
    "id": 952444030,
    "node_id": "IC_kwDOCM9I9M44xSR-",
    "user": {
      "login": "jeyakatsa",
      "id": 51394348,
      "node_id": "MDQ6VXNlcjUxMzk0MzQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/51394348?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jeyakatsa",
      "html_url": "https://github.com/jeyakatsa",
      "followers_url": "https://api.github.com/users/jeyakatsa/followers",
      "following_url": "https://api.github.com/users/jeyakatsa/following{/other_user}",
      "gists_url": "https://api.github.com/users/jeyakatsa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jeyakatsa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jeyakatsa/subscriptions",
      "organizations_url": "https://api.github.com/users/jeyakatsa/orgs",
      "repos_url": "https://api.github.com/users/jeyakatsa/repos",
      "events_url": "https://api.github.com/users/jeyakatsa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jeyakatsa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-27T00:51:35Z",
    "updated_at": "2021-10-27T00:51:35Z",
    "author_association": "NONE",
    "body": "Hi @benjaminion !\r\n\r\nI've began work on this here: https://github.com/jeyakatsa/teku/tree/lightclient/light-client\r\n\r\nWill be updating and sending pull requests when necessary.\r\n\r\nAvailable for any questions you or your team may have!",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/952444030/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1319084219",
    "html_url": "https://github.com/ConsenSys/teku/issues/4230#issuecomment-1319084219",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230",
    "id": 1319084219,
    "node_id": "IC_kwDOCM9I9M5On6C7",
    "user": {
      "login": "robzajac",
      "id": 11546455,
      "node_id": "MDQ6VXNlcjExNTQ2NDU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11546455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robzajac",
      "html_url": "https://github.com/robzajac",
      "followers_url": "https://api.github.com/users/robzajac/followers",
      "following_url": "https://api.github.com/users/robzajac/following{/other_user}",
      "gists_url": "https://api.github.com/users/robzajac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robzajac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robzajac/subscriptions",
      "organizations_url": "https://api.github.com/users/robzajac/orgs",
      "repos_url": "https://api.github.com/users/robzajac/repos",
      "events_url": "https://api.github.com/users/robzajac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robzajac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-17T19:12:04Z",
    "updated_at": "2022-11-17T19:12:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Bumping with work done in #6384.\r\n[Endpoints](https://github.com/ethereum/beacon-APIs/tree/master/apis/beacon/light_client)\r\n[Data types](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/sync-protocol.md#containers)\r\n\r\n- [`GetLightClientBootstrap`](https://github.com/ethereum/beacon-APIs/blob/master/apis/beacon/light_client/bootstrap.yaml): Returns the data for clients to startup into the light client protocol, including the current sync committee and latest block header\r\n- [`GetLightClientUpdatesByRange`](https://github.com/ethereum/beacon-APIs/blob/master/apis/beacon/light_client/updates.yaml): Returns the LightClientUpdate for the provided sync committee range, including the attested block header and the next sync committee\r\n- [`GetLightClientFinalityUpdate`](https://github.com/ethereum/beacon-APIs/blob/master/apis/beacon/light_client/finality_update.yaml): Returns the latest known LightClientFinalityUpdate\r\n- [`GetLightClientOptimisticUpdate`](https://github.com/ethereum/beacon-APIs/blob/master/apis/beacon/light_client/optimistic_update.yaml): Returns the latest known LightClientOptimisticUpdate\r\n\r\nWill continue to track in this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1319084219/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1357933576",
    "html_url": "https://github.com/ConsenSys/teku/issues/4230#issuecomment-1357933576",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/4230",
    "id": 1357933576,
    "node_id": "IC_kwDOCM9I9M5Q8GwI",
    "user": {
      "login": "robzajac",
      "id": 11546455,
      "node_id": "MDQ6VXNlcjExNTQ2NDU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11546455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robzajac",
      "html_url": "https://github.com/robzajac",
      "followers_url": "https://api.github.com/users/robzajac/followers",
      "following_url": "https://api.github.com/users/robzajac/following{/other_user}",
      "gists_url": "https://api.github.com/users/robzajac/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robzajac/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robzajac/subscriptions",
      "organizations_url": "https://api.github.com/users/robzajac/orgs",
      "repos_url": "https://api.github.com/users/robzajac/repos",
      "events_url": "https://api.github.com/users/robzajac/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robzajac/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-19T16:36:30Z",
    "updated_at": "2023-01-26T16:31:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Acceptance criteria:\r\n- LC server endpoints are implemented, tested and deployed in teku\r\n- Demonstrated a light client sync against a teku full node\r\n\r\nAPI reference:\r\n- [`consensus-specs`](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/full-node.md)\r\n- [`beacon-APIs`](https://github.com/ethereum/beacon-APIs/tree/master/apis/beacon/light_client)\r\n\r\nProgress update:\r\n\r\nGeneral\r\n- [x] ~Update JSON serialization according to etan's update to the light client fields https://github.com/ethereum/beacon-APIs/pull/287~\r\n- [ ] Add support for Capella types https://github.com/ethereum/beacon-APIs/pull/293\r\n\r\n`GetLightClientBootstrap`\r\n- [X] ~SSZ types~\r\n- [X] ~REST API~\r\n- [X] ~Business logic & implementation~\r\n- [ ] [gossip topic](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/p2p-interface.md#getlightclientbootstrap)\r\n\r\n`GetLightClientUpdatesByRange`\r\n- [X] ~SSZ types~\r\n- [X] ~REST API~\r\n- [x] ~`application/octet-stream` [custom encoding](https://github.com/ethereum/beacon-APIs/blob/master/apis/beacon/light_client/updates.yaml#L37)~\r\n- [ ] Business logic & implementation\r\n- [ ] [gossip topic](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/p2p-interface.md#lightclientupdatesbyrange)\r\n\r\n`GetLightClientFinalityUpdate`\r\n\r\nFollow after `GetLightClientUpdatesByRange`\r\n- [ ] REST API & implementation\r\n- [ ] [gossip topic](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/p2p-interface.md#getlightclientfinalityupdate)\r\n- [ ] [eventstream topic](https://github.com/ethereum/beacon-APIs/blob/master/apis/eventstream/index.yaml)\r\n\r\n`GetLightClientOptimisticUpdate`\r\n\r\nFollow after `GetLightClientUpdatesByRange`\r\n- [ ] REST API & implementation\r\n- [ ] [gossip topic](https://github.com/ethereum/consensus-specs/blob/dev/specs/altair/light-client/p2p-interface.md#getlightclientoptimisticupdate)\r\n- [ ] [eventstream topic](https://github.com/ethereum/beacon-APIs/blob/master/apis/eventstream/index.yaml)\r\n\r\nMisc\r\n- [X] ~Implement merkle inclusion proofs for SSZ object fields~\r\n- ~[ ] Verify merkle proofs implementation with implementation of [`calculate_merkle_root`](https://github.com/ethereum/consensus-specs/blob/dev/ssz/merkle-proofs.md#merkle-multiproofs)~ Not necessary, implementation is repetitive to the implementation of constructing the merkle proof itself, which can be validated by test cases.\r\n- [X] ~`--light-client-support-enabled` flag (default true, but not all clients will elect to serve the data)~\r\n- [ ] Cache of `LightClientUpdate` for the block retention period (~5 months)\r\n\t- Much faster than reading multiple historic `BeaconState`\r\n\r\nI thought it would be helpful to lay this out, let me know if you have any thoughts or feedback @rolfyone @ajsutton",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1357933576/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

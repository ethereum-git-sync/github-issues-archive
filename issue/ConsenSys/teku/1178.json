{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/1178",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/1178",
  "id": 566011606,
  "node_id": "MDU6SXNzdWU1NjYwMTE2MDY=",
  "number": 1178,
  "title": "Modify `teku validator generate` subcommand to encrypt generated BLS keys in keystore",
  "user": {
    "login": "jframe",
    "id": 909467,
    "node_id": "MDQ6VXNlcjkwOTQ2Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/909467?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jframe",
    "html_url": "https://github.com/jframe",
    "followers_url": "https://api.github.com/users/jframe/followers",
    "following_url": "https://api.github.com/users/jframe/following{/other_user}",
    "gists_url": "https://api.github.com/users/jframe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jframe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jframe/subscriptions",
    "organizations_url": "https://api.github.com/users/jframe/orgs",
    "repos_url": "https://api.github.com/users/jframe/repos",
    "events_url": "https://api.github.com/users/jframe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jframe/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1846450568,
      "node_id": "MDU6TGFiZWwxODQ2NDUwNTY4",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/TeamGroot",
      "name": "TeamGroot",
      "color": "1d76db",
      "default": false,
      "description": "Under active development by TeamGroot @PegaSys"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "usmansaleem",
    "id": 669527,
    "node_id": "MDQ6VXNlcjY2OTUyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/669527?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/usmansaleem",
    "html_url": "https://github.com/usmansaleem",
    "followers_url": "https://api.github.com/users/usmansaleem/followers",
    "following_url": "https://api.github.com/users/usmansaleem/following{/other_user}",
    "gists_url": "https://api.github.com/users/usmansaleem/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/usmansaleem/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/usmansaleem/subscriptions",
    "organizations_url": "https://api.github.com/users/usmansaleem/orgs",
    "repos_url": "https://api.github.com/users/usmansaleem/repos",
    "events_url": "https://api.github.com/users/usmansaleem/events{/privacy}",
    "received_events_url": "https://api.github.com/users/usmansaleem/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "usmansaleem",
      "id": 669527,
      "node_id": "MDQ6VXNlcjY2OTUyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/669527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/usmansaleem",
      "html_url": "https://github.com/usmansaleem",
      "followers_url": "https://api.github.com/users/usmansaleem/followers",
      "following_url": "https://api.github.com/users/usmansaleem/following{/other_user}",
      "gists_url": "https://api.github.com/users/usmansaleem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/usmansaleem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/usmansaleem/subscriptions",
      "organizations_url": "https://api.github.com/users/usmansaleem/orgs",
      "repos_url": "https://api.github.com/users/usmansaleem/repos",
      "events_url": "https://api.github.com/users/usmansaleem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/usmansaleem/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-02-17T01:43:54Z",
  "updated_at": "2020-04-06T23:46:34Z",
  "closed_at": "2020-04-06T23:46:34Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nAs a teku administrator,\r\nI want the capability to encrypt validator and withdrawl BLS keys when invoking `teku validator generate`\r\nso that BLS keys are not plain text anymore.\r\n\r\n### Acceptance Criteria\r\n- Introduce cli options \r\n~~~\r\n  -e, --encrypt-keys=<TRUE|FALSE>\r\n                             Encrypt validator keys. (Default: false)\r\n  -k, --keystore-output-dir=<PATH>\r\n                             Encrypted keystore output directory. Use current\r\n                               directory if not specified\r\n\r\n~~~\r\n- For each validator, a sub folder is created in output directory which contains generated keystore/password file pairs for validator key and withdrawal key i.e. \r\n~~~\r\n<keystore-output-dir>/validator1\r\n- validator_keystore_1.json\r\n- validator_password_1.txt\r\n- withdrawal_keystore_1.json\r\n- withdrawal_password_1.txt\r\n ~~~\r\n- related unit test cases\r\n\r\n### Additional Information\r\n- Generate a random password with default size of 32 bytes and then converted to Base64 encoded string",
  "closed_by": {
    "login": "bgravenorst",
    "id": 50852695,
    "node_id": "MDQ6VXNlcjUwODUyNjk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/50852695?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bgravenorst",
    "html_url": "https://github.com/bgravenorst",
    "followers_url": "https://api.github.com/users/bgravenorst/followers",
    "following_url": "https://api.github.com/users/bgravenorst/following{/other_user}",
    "gists_url": "https://api.github.com/users/bgravenorst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bgravenorst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bgravenorst/subscriptions",
    "organizations_url": "https://api.github.com/users/bgravenorst/orgs",
    "repos_url": "https://api.github.com/users/bgravenorst/repos",
    "events_url": "https://api.github.com/users/bgravenorst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bgravenorst/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/1178/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/594345002",
    "html_url": "https://github.com/ConsenSys/teku/issues/1178#issuecomment-594345002",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178",
    "id": 594345002,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDM0NTAwMg==",
    "user": {
      "login": "arash009",
      "id": 33149995,
      "node_id": "MDQ6VXNlcjMzMTQ5OTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/33149995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arash009",
      "html_url": "https://github.com/arash009",
      "followers_url": "https://api.github.com/users/arash009/followers",
      "following_url": "https://api.github.com/users/arash009/following{/other_user}",
      "gists_url": "https://api.github.com/users/arash009/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arash009/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arash009/subscriptions",
      "organizations_url": "https://api.github.com/users/arash009/orgs",
      "repos_url": "https://api.github.com/users/arash009/repos",
      "events_url": "https://api.github.com/users/arash009/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arash009/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-04T06:08:17Z",
    "updated_at": "2020-03-04T06:08:17Z",
    "author_association": "NONE",
    "body": "I'm not sure it's worth introducing the extra complexity to customise the password size. I'd suggest we go with the default 32 and leave it.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/594345002/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/594356191",
    "html_url": "https://github.com/ConsenSys/teku/issues/1178#issuecomment-594356191",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178",
    "id": 594356191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NDM1NjE5MQ==",
    "user": {
      "login": "usmansaleem",
      "id": 669527,
      "node_id": "MDQ6VXNlcjY2OTUyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/669527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/usmansaleem",
      "html_url": "https://github.com/usmansaleem",
      "followers_url": "https://api.github.com/users/usmansaleem/followers",
      "following_url": "https://api.github.com/users/usmansaleem/following{/other_user}",
      "gists_url": "https://api.github.com/users/usmansaleem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/usmansaleem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/usmansaleem/subscriptions",
      "organizations_url": "https://api.github.com/users/usmansaleem/orgs",
      "repos_url": "https://api.github.com/users/usmansaleem/repos",
      "events_url": "https://api.github.com/users/usmansaleem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/usmansaleem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-04T06:50:11Z",
    "updated_at": "2020-03-04T06:50:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated so that we will use 32 bytes random password generation converted to base64 encoded string.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/594356191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/595501921",
    "html_url": "https://github.com/ConsenSys/teku/issues/1178#issuecomment-595501921",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178",
    "id": 595501921,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NTUwMTkyMQ==",
    "user": {
      "login": "usmansaleem",
      "id": 669527,
      "node_id": "MDQ6VXNlcjY2OTUyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/669527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/usmansaleem",
      "html_url": "https://github.com/usmansaleem",
      "followers_url": "https://api.github.com/users/usmansaleem/followers",
      "following_url": "https://api.github.com/users/usmansaleem/following{/other_user}",
      "gists_url": "https://api.github.com/users/usmansaleem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/usmansaleem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/usmansaleem/subscriptions",
      "organizations_url": "https://api.github.com/users/usmansaleem/orgs",
      "repos_url": "https://api.github.com/users/usmansaleem/repos",
      "events_url": "https://api.github.com/users/usmansaleem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/usmansaleem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-05T23:45:52Z",
    "updated_at": "2020-03-05T23:45:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Example command (besu node running deposit contract):\n~~~\n./teku validator generate --contract-address=dddddddddddddddddddddddddddddddddddddddd --encrypt-keys=true --keystore-output-dir=. --number-of-validators=1 --private-key=8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63 --node-url=http://localhost:8545\n~~~\n\nSee `acceptance-tests/src/test-support/resources/besu/depositContractGenesis.json` the genesis file sample to be used with besu node",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/595501921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/595505725",
    "html_url": "https://github.com/ConsenSys/teku/issues/1178#issuecomment-595505725",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178",
    "id": 595505725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NTUwNTcyNQ==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-06T00:00:29Z",
    "updated_at": "2020-03-06T00:00:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "For a secure command, we should avoid having the ETH1 private key on the command line as well.  It probably should be read from a file (would be nice if it can support reading from system in as well so you don't *have* to create a file)",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/595505725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/596368655",
    "html_url": "https://github.com/ConsenSys/teku/issues/1178#issuecomment-596368655",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1178",
    "id": 596368655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjM2ODY1NQ==",
    "user": {
      "login": "usmansaleem",
      "id": 669527,
      "node_id": "MDQ6VXNlcjY2OTUyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/669527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/usmansaleem",
      "html_url": "https://github.com/usmansaleem",
      "followers_url": "https://api.github.com/users/usmansaleem/followers",
      "following_url": "https://api.github.com/users/usmansaleem/following{/other_user}",
      "gists_url": "https://api.github.com/users/usmansaleem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/usmansaleem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/usmansaleem/subscriptions",
      "organizations_url": "https://api.github.com/users/usmansaleem/orgs",
      "repos_url": "https://api.github.com/users/usmansaleem/repos",
      "events_url": "https://api.github.com/users/usmansaleem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/usmansaleem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-09T07:25:17Z",
    "updated_at": "2020-03-09T07:25:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Support for reading password using interactive mode, from environment variable and/or from file (using PicoCLI built-in support). Command synopsis:\n\n~~~\n./teku validator generate --contract-address=dddddddddddddddddddddddddddddddddddddddd \\\n--encrypt-keys=true --output-path=. \\\n--number-of-validators=1 \\\n--private-key=8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63 \\\n--node-url=http://localhost:8545 --validator-password --withdrawal-password\nEnter value for --validator-password (Password to encrypt validator keys):\nEnter value for --withdrawal-password (Password to encrypt withdrawal keys):\n17:19:55.404 [INFO ] - Generating Encrypted Keystores ...\n17:19:59.947 [INFO ] - Deposit transaction(s) successful.\n~~~\n\nUsage help:\n~~~\n./teku validator generate --help\n\nteku validator generate [OPTIONS]\n\nDescription:\n\nRegister validators by generating new keys and sending deposit transactions to\nan Ethereum 1 node\n\nOptions:\n  -a, --amount=<GWEI>        Deposit amount in Gwei (default: 32000000000)\n  -c, --contract-address=<ADDRESS>\n                             Address of the deposit contract\n  -e, --encrypt-keys=<true|false>\n                             Encrypt validator and withdrawal keys. (Default:\n                               true)\n  -h, --help                 Show this help message and exit.\n  -n, --number-of-validators=<NUMBER>\n                             The number of validators to create keys for and\n                               register\n  -o, --output-path=<FILE|DIR>\n                             Path to output file for unencrypted keys or output\n                               directory for encrypted keystore files. If not\n                               set, unencrypted keys will be written on\n                               standard out and encrypted keystores will be\n                               created in current directory\n  -p, --private-key=<KEY>    Ethereum 1 private key to use to send transactions\n  -u, --node-url=<URL>       JSON-RPC endpoint URL for the Ethereum 1 node to\n                               send transactions via\n  -V, --version              Print version information and exit.\n      --validator-password   Password to encrypt validator keys\n      --validator-password:env=<ENV_VAR>\n                             Read password from environment variable to encrypt\n                               the validator keys\n      --validator-password:file=<FILE>\n                             Read password from the file to encrypt the\n                               validator keys\n      --withdrawal-password  Password to encrypt withdrawal keys\n      --withdrawal-password:env=<ENVIRONMENT_VAR>\n                             Read password from environment variable to encrypt\n                               the withdrawal keys\n      --withdrawal-password:file=<FILE>\n                             Read password from the file to encrypt the\n                               withdrawal keys\n\nTeku is licensed under the Apache License 2.0\n\n~~~\n\nTODO: Read eth1 private key using similar approach.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/596368655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/2302",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/2302/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/2302/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/2302/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/2302",
  "id": 649842954,
  "node_id": "MDU6SXNzdWU2NDk4NDI5NTQ=",
  "number": 2302,
  "title": "Feature request: detailed reward/penalty metrics",
  "user": {
    "login": "benjaminion",
    "id": 20796281,
    "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benjaminion",
    "html_url": "https://github.com/benjaminion",
    "followers_url": "https://api.github.com/users/benjaminion/followers",
    "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
    "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
    "organizations_url": "https://api.github.com/users/benjaminion/orgs",
    "repos_url": "https://api.github.com/users/benjaminion/repos",
    "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benjaminion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1048919131,
      "node_id": "MDU6TGFiZWwxMDQ4OTE5MTMx",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/enhancement%20%F0%9F%95%B5%EF%B8%8F%E2%80%8D%E2%99%80%EF%B8%8F",
      "name": "enhancement üïµÔ∏è‚Äç‚ôÄÔ∏è",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-07-02T11:05:22Z",
  "updated_at": "2021-01-10T23:43:50Z",
  "closed_at": "2021-01-10T23:43:50Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\nAs a staker or staking service, I want to be able to see very granular reward and penalty information so that I can identify any issues and compare with others. \n\nCurrently, validator balances are available via the state object, but that does not give granular insight. If my validator is falling behind, I might like to know whether it is due to delayed inclusion of attestations in blocks, or incorrect votes on the head block, or poor packing of attestations into blocks, etc. This information is not currently accessible.\n\nTeku could log this data on demand, e.g. to a CSV file. Need to decide whether this is done in real time, or via historical API calls (`get_rewards_for_epoch`), or a dedicated mode that can resync the chain and output the data. Also need to decide which validators' data get output. All of them would be a lot of data, so maybe selected by validator index.\n\nAlso useful would be to log alongside the data the maximum available reward for perfect performance, for comaprison purposes.",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/2302/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/2302/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/757564936",
    "html_url": "https://github.com/ConsenSys/teku/issues/2302#issuecomment-757564936",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2302",
    "id": 757564936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzU2NDkzNg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-10T23:43:50Z",
    "updated_at": "2021-01-10T23:43:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "We now have enough individual metrics to track all the different elements of attestation rewards for the validators running on against a teku beacon node: https://www.symphonious.net/2021/01/10/exploring-eth2-attestation-rewards-and-validator-performance/\r\n\r\nSpecifically:\r\n```\r\n(\r\nvalidator_performance_correct_head_block_count - (validator_performance_expected_attestations - validator_performance_correct_head_block_count) +\r\n\r\nvalidator_performance_correct_target_count - (validator_performance_expected_attestations - validator_performance_correct_target_count) +\r\n\r\nvalidator_performance_included_attestations - (validator_performance_expected_attestations - validator_performance_included_attestations) +\r\n\r\n(0.875 * validator_performance_included_attestations / validator_performance_inclusion_distance_average)\r\n) / validator_performance_expected_attestations / 3.875\r\n```\r\n\r\nWe log the individual components each epoch, but not currently the weighted total which I think is probably reasonable. There's already a lot of info in the log message and the individual components are what you can act on and the total when reported epoch by epoch is going to fluctuate a fair bit for low numbers of validators.\r\n\r\nI'm going to close this but reopen if you feel we should be reporting the total.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/757564936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/4650",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/4650/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/4650/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/4650/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/4650",
  "id": 1054321009,
  "node_id": "I_kwDOCM9I9M4-16lx",
  "number": 4650,
  "title": "[Merge] Handle conflicting optimistic head",
  "user": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-11-16T01:02:11Z",
  "updated_at": "2021-12-12T23:50:08Z",
  "closed_at": "2021-12-12T23:50:08Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "When the optimistic head is different to the strict head, we should disable block, attestation and sync committee production (as per https://hackmd.io/xsk9_feiQ3SIYz2yRa1z7Q).\n\nHowever we may need to differentiate between nodes which we are waiting on a response from the execution engine and ones which have received a SYNCING response.  We shouldn't stop performing duties because a block was just imported and we haven't yet heard back from the execution engine (could use the strict head in that case or could wait until we get a response).  The linked doc assumes that we only optimistically sync when we get a `SYNCING` response from the execution engine whereas Teku always optimistically syncs so we don't have to wait for a synchronous response from the execution engine.",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/4650/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/4650/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/978801880",
    "html_url": "https://github.com/ConsenSys/teku/issues/4650#issuecomment-978801880",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/4650",
    "id": 978801880,
    "node_id": "IC_kwDOCM9I9M46V1TY",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-25T03:52:34Z",
    "updated_at": "2021-11-25T03:52:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "This isn't necessarily the case any more as we need to keep producing blocks around transition time even if we get a block the EL doesn't know and so returns syncing (such a terminal block may never have been published).  See https://github.com/ethereum/consensus-specs/issues/2732",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/978801880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/991995807",
    "html_url": "https://github.com/ConsenSys/teku/issues/4650#issuecomment-991995807",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/4650",
    "id": 991995807,
    "node_id": "IC_kwDOCM9I9M47IKef",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-12T23:50:08Z",
    "updated_at": "2021-12-12T23:50:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Going to close this one as the requirements have changed and this ticket is now confusing. We will want to switch the beacon node to \"syncing\" mode whenever it is using optimistic sync which then takes care of pretty much all of these details.  Will log new tickets to cover this.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/991995807/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/Consensys/teku/issues/7879",
  "repository_url": "https://api.github.com/repos/Consensys/teku",
  "labels_url": "https://api.github.com/repos/Consensys/teku/issues/7879/labels{/name}",
  "comments_url": "https://api.github.com/repos/Consensys/teku/issues/7879/comments",
  "events_url": "https://api.github.com/repos/Consensys/teku/issues/7879/events",
  "html_url": "https://github.com/Consensys/teku/issues/7879",
  "id": 2080479926,
  "node_id": "I_kwDOCM9I9M58AZq2",
  "number": 7879,
  "title": "/eth/v3/validator/blocks/{slot} not returning correct data",
  "user": {
    "login": "mcdee",
    "id": 511384,
    "node_id": "MDQ6VXNlcjUxMTM4NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/511384?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mcdee",
    "html_url": "https://github.com/mcdee",
    "followers_url": "https://api.github.com/users/mcdee/followers",
    "following_url": "https://api.github.com/users/mcdee/following{/other_user}",
    "gists_url": "https://api.github.com/users/mcdee/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mcdee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mcdee/subscriptions",
    "organizations_url": "https://api.github.com/users/mcdee/orgs",
    "repos_url": "https://api.github.com/users/mcdee/repos",
    "events_url": "https://api.github.com/users/mcdee/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mcdee/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2024-01-13T21:20:35Z",
  "updated_at": "2024-01-13T21:20:35Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nA call to `/eth/v3/validator/blocks/{slot}` on devnet-12 returned incorrect data.\r\n\r\nThe specific endpont called was:\r\n\r\n```\r\n/eth/v3/validator/blocks/326383?randao_reveal=0x97e375d4cdd3943d5eb42d26b08efcd34e2700110d6adf97b04593908e292a26acb215a14bd1b24a7edf05a4c8f8bf7a0ece69394bc25379582b669735ff1f6bfd12ea661a4b0d832bc348a05faaee9b236fbd095fa3ed5391e82a04175bddbe&graffiti=0x417474657374616e742f566f7563680000000000000000000000000000000000\r\n```\r\nand the data returned was:\r\n\r\n```\r\n{\"version\":\"deneb\",\"execution_payload_blinded\":true,\"execution_payload_value\":\"84000000000000\",\"consensus_block_value\":\"2448542000000000\",\"data\":{\"slot\":\"326383\",\"proposer_index\":\"2789\",\"parent_root\":\"0x09aa548b87a292c2ee9acd5d819ac9c8f90ab44f2d40278aa5b1d7cfe04caad3\",\"state_root\":\"0xe2e9eb68c9524b283b906c716ffba6f9a7f313901141901c98d9cee2df0b4f22\",\"body\":{\"randao_reveal\":\"0x97e375d4cdd3943d5eb42d26b08efcd34e2700110d6adf97b04593908e292a26acb215a14bd1b24a7edf05a4c8f8bf7a0ece69394bc25379582b669735ff1f6bfd12ea661a4b0d832bc348a05faaee9b236fbd095fa3ed5391e82a04175bddbe\",\"eth1_data\":{\"deposit_root\":\"0xe5700ac7bf08aa474241beaab310610d5944343c12b12b9710fbce881d30f157\",\"deposit_count\":\"850\",\"block_hash\":\"0x66f5796139b34c313ab45843f45dae4367c2ba1a83ed81ddd21fcd584457433a\"},\"graffiti\":\"0x417474657374616e742f566f7563680000000000000000000000000000000000\",\"proposer_slashings\":[],\"attester_slashings\":[],\"attestations\":[{\"aggregation_bits\":\"0xfffff5fbbffffffeffeffffff77e\",\"data\":{\"slot\":\"326382\",\"index\":\"0\",\"beacon_block_root\":\"0x09aa548b87a292c2ee9acd5d819ac9c8f90ab44f2d40278aa5b1d7cfe04caad3\",\"source\":{\"epoch\":\"10198\",\"root\":\"0x8b897c93f370edfab5211ae25e18989d977d4c84831af6ba7e2549047326c458\"},\"target\":{\"epoch\":\"10199\",\"root\":\"0xaf2ba49648846c9619da933e2e4631226bbd40b76b1f3a282995402b0a48f823\"}},\"signature\":\"0x89d761e8d5d0a733eebb11b8d2ff25d4ddc61d104e83915d6a04f462f18ab5cfd29b0919802fd9e046b3fa55c7698b2718d62b28da5e37aeac99a3472552b0e84aec6b5df84b4583d10311d1c46320b5c80984a1b7d88e9388320cdcae6e6bc7\"}],\"deposits\":[],\"voluntary_exits\":[],\"sync_aggregate\":{\"sync_committee_bits\":\"0xfdfbffe9f77dffbffdefdd75ffeeffddbff7717f7fffffde7ef7fefd7fff7feffffafbfffffffffdfdffdfffbdb7fffffdfeffffbfffffdfb36bfffffe9ffeff\",\"sync_committee_signature\":\"0xae1f1ab7813410ac8d5e396107d81b29e09255986be2fd103b68ecc6d1382b1106ff45227a9961e87c8ecd785b728dcb16ed029ce35d63bcba6cf08942a4502a17ba061896349096796598eed6216bd6a1cb2760e1ca6f4482fef875f6aa9102\"},\"execution_payload_header\":{\"parent_hash\":\"0x7b593fd14b592752d23f49cf8f6f8a0d9105fd91b7a3d8c7452cdf741f498395\",\"fee_recipient\":\"0xf4e8263979a89dc357d7f9f79533febc7f3e287b\",\"state_root\":\"0xbe2973e213251edc8c0aafd0b2d06487d80aeb644e92a77812041db0a26a4a5e\",\"receipts_root\":\"0x10457e39b8c68ced2071538b4c7034fe68f9c666187fd6b2d6ddcc21149f0d10\",\"logs_bloom\":\"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\"prev_randao\":\"0xcff5d48b6f99b957ea23e05d6423986795e032b8dd5655760dd7bfd81be5ce88\",\"block_number\":\"310806\",\"gas_limit\":\"30000000\",\"gas_used\":\"42000\",\"timestamp\":\"1705179396\",\"extra_data\":\"0xd883010d0a846765746888676f312e32312e35856c696e7578\",\"base_fee_per_gas\":\"9\",\"block_hash\":\"0x2b86e660e082d22c8f6ccfaf4426d42a77b5d657ae7a7cf1578dee863f8013f6\",\"transactions_root\":\"0x436df0931151a904326940fd7d22ee9f1d04e7c68b2967145948953c0ed5f7b6\",\"withdrawals_root\":\"0xfdfd6478c5ec785b97ca5ef6d09e419455b13709acdf534f0960e3ab9be635d5\",\"blob_gas_used\":\"262144\",\"excess_blob_gas\":\"131072\"},\"bls_to_execution_changes\":[],\"blob_kzg_commitments\":[\"0x8feedb4eb3d5ce4828293092abec3fef7d435296947978e14155a559413fc2abec5e3efe7dff39f4afd663b68d31333b\",\"0x8a190e2961b87db7a6ec9e732edfc8e2added420af4f6eb98171a99486cd8fd5e02a14bd0930a351284094707b208698\"]}}}\r\n```\r\n\r\nIt appears that the `data` key is a `BlindedBeaconBlock`, but according to https://ethereum.github.io/beacon-APIs/#/ValidatorRequiredApi/produceBlockV3 it should be `BlindedBeaconBlockContents` _i.e._ the block plus the blobs.\r\n\r\n### Steps to Reproduce (Bug)\r\n\r\nCall the `v3` blocks endpoint as per above.\r\n\r\n**Expected behavior:**\r\n\r\nThe returned data is per the spec.\r\n\r\n**Actual behavior:**\r\n\r\nOnly the blinded block is returned.\r\n\r\n**Frequency:**\r\n\r\nEvery time for devnet 12 (on deneb).\r\n\r\n### Versions (Add all that apply)\r\n```\r\nteku/v24.1.0/linux-x86_64/-privatebuild-openjdk64bitservervm-java-17\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/Consensys/teku/issues/7879/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/Consensys/teku/issues/7879/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

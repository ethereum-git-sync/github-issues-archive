{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/1891",
  "id": 623016125,
  "node_id": "MDU6SXNzdWU2MjMwMTYxMjU=",
  "number": 1891,
  "title": "Too much log noise during shutdown",
  "user": {
    "login": "arash009",
    "id": 33149995,
    "node_id": "MDQ6VXNlcjMzMTQ5OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/33149995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/arash009",
    "html_url": "https://github.com/arash009",
    "followers_url": "https://api.github.com/users/arash009/followers",
    "following_url": "https://api.github.com/users/arash009/following{/other_user}",
    "gists_url": "https://api.github.com/users/arash009/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/arash009/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arash009/subscriptions",
    "organizations_url": "https://api.github.com/users/arash009/orgs",
    "repos_url": "https://api.github.com/users/arash009/repos",
    "events_url": "https://api.github.com/users/arash009/events{/privacy}",
    "received_events_url": "https://api.github.com/users/arash009/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1846512527,
      "node_id": "MDU6TGFiZWwxODQ2NTEyNTI3",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/TeamZiz",
      "name": "TeamZiz",
      "color": "fcf879",
      "default": false,
      "description": "Under active development by TeamZiz @PegaSys"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rolfyone",
    "id": 2967240,
    "node_id": "MDQ6VXNlcjI5NjcyNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolfyone",
    "html_url": "https://github.com/rolfyone",
    "followers_url": "https://api.github.com/users/rolfyone/followers",
    "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
    "organizations_url": "https://api.github.com/users/rolfyone/orgs",
    "repos_url": "https://api.github.com/users/rolfyone/repos",
    "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolfyone/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-05-22T07:33:51Z",
  "updated_at": "2020-06-14T23:35:09Z",
  "closed_at": "2020-06-14T23:35:09Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Teku logs a bunch of exceptions and other scary looking junk during shutdown.  We should spend some time killing it and working through the exceptions we find to ensure that: \n\n- we shut everything down cleanly\n- we shut things down in the right order so dependencies \n- any cancellation exceptions or other stuff that gets thrown as a part of normal shutdown should be reduced to debug or trace level\n\n",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/1891/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/640303989",
    "html_url": "https://github.com/ConsenSys/teku/issues/1891#issuecomment-640303989",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
    "id": 640303989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDMwMzk4OQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T00:30:45Z",
    "updated_at": "2020-06-08T00:30:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "ctrl-C is not a normal way to shut down running processes.\nwhat are the success criteria for this ticket? Can you be more specific @arash009 ",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/640303989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/640304626",
    "html_url": "https://github.com/ConsenSys/teku/issues/1891#issuecomment-640304626",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
    "id": 640304626,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDMwNDYyNg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T00:34:44Z",
    "updated_at": "2020-06-08T00:34:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "ctrl-C is the expected way to terminate an application like Teku.  It sends a SIGINT which is the same as systemd would send.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/640304626/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641680681",
    "html_url": "https://github.com/ConsenSys/teku/issues/1891#issuecomment-641680681",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
    "id": 641680681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTY4MDY4MQ==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-10T02:24:23Z",
    "updated_at": "2020-06-10T02:24:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "should really only report 'teku is shutting down' on CTRL+C",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641680681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641703209",
    "html_url": "https://github.com/ConsenSys/teku/issues/1891#issuecomment-641703209",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
    "id": 641703209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTcwMzIwOQ==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-10T03:48:35Z",
    "updated_at": "2020-06-10T03:48:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "this appears to be no longer an issue. i've tried a number of things including syncing to Witti, and I'm not getting extra output when shutting down under any circumstances i've found.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641703209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641703924",
    "html_url": "https://github.com/ConsenSys/teku/issues/1891#issuecomment-641703924",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
    "id": 641703924,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTcwMzkyNA==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-10T03:51:29Z",
    "updated_at": "2020-06-10T03:51:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "I got:\r\n```\r\nonTick: java.lang.InterruptedException: sleep interrupted\r\njava.lang.InterruptedException: sleep interrupted\r\n\tat java.base/java.lang.Thread.sleep(Native Method)\r\n\tat tech.pegasys.teku.services.beaconchain.BeaconChainController.processSlot(BeaconChainController.java:509)\r\n\tat tech.pegasys.teku.services.beaconchain.BeaconChainController.onTick(BeaconChainController.java:474)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat tech.pegasys.teku.events.DirectEventDeliverer.executeMethod(DirectEventDeliverer.java:70)\r\n\tat tech.pegasys.teku.events.DirectEventDeliverer.deliverTo(DirectEventDeliverer.java:53)\r\n\tat tech.pegasys.teku.events.AsyncEventDeliverer.lambda$deliverTo$0(AsyncEventDeliverer.java:60)\r\n\tat tech.pegasys.teku.events.AsyncEventDeliverer$QueueReader.deliverNextEvent(AsyncEventDeliverer.java:111)\r\n\tat tech.pegasys.teku.events.AsyncEventDeliverer$QueueReader.run(AsyncEventDeliverer.java:103)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\na few hours ago when shutting down.  Often get various rejected execution exceptions as well.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641703924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641704051",
    "html_url": "https://github.com/ConsenSys/teku/issues/1891#issuecomment-641704051",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1891",
    "id": 641704051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTcwNDA1MQ==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-10T03:52:03Z",
    "updated_at": "2020-06-10T03:52:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another example from today:\r\n```\r\nScheduling next check of ETH1 chain head failed\r\njava.util.concurrent.RejectedExecutionException: Task java.util.concurrent.CompletableFuture$AsyncRun@27b8f306 rejected from java.util.concurrent.ThreadPoolExecutor@297f0981[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 18324]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(ThreadPoolExecutor.java:2055)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:825)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:1355)\r\n\tat java.base/java.util.concurrent.CompletableFuture.asyncRunStage(CompletableFuture.java:1750)\r\n\tat java.base/java.util.concurrent.CompletableFuture.runAsync(CompletableFuture.java:1959)\r\n\tat org.web3j.utils.Async.run(Async.java:33)\r\n\tat org.web3j.protocol.Service.sendAsync(Service.java:54)\r\n\tat org.web3j.protocol.core.Request.sendAsync(Request.java:85)\r\n\tat tech.pegasys.teku.pow.Web3jEth1Provider.getEth1Block(Web3jEth1Provider.java:83)\r\n\tat tech.pegasys.teku.pow.Web3jEth1Provider.getLatestEth1Block(Web3jEth1Provider.java:90)\r\n\tat tech.pegasys.teku.pow.ThrottlingEth1Provider.lambda$queueRequest$5(ThrottlingEth1Provider.java:70)\r\n\tat tech.pegasys.teku.pow.ThrottlingEth1Provider.processQueuedRequests(ThrottlingEth1Provider.java:86)\r\n\tat tech.pegasys.teku.pow.ThrottlingEth1Provider.queueRequest(ThrottlingEth1Provider.java:74)\r\n\tat tech.pegasys.teku.pow.ThrottlingEth1Provider.getLatestEth1Block(ThrottlingEth1Provider.java:57)\r\n\tat tech.pegasys.teku.pow.Eth1HeadTracker.pollLatestHead(Eth1HeadTracker.java:55)\r\n\tat tech.pegasys.teku.util.async.SafeFuture.fromRunnable(SafeFuture.java:104)\r\n\tat tech.pegasys.teku.util.async.AsyncRunner.lambda$runAfterDelay$1(AsyncRunner.java:34)\r\n\tat tech.pegasys.teku.util.async.DelayedExecutorAsyncRunner.lambda$runAsync$1(DelayedExecutorAsyncRunner.java:57)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/641704051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

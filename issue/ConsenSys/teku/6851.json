{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/6851",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/6851",
  "id": 1595574185,
  "node_id": "I_kwDOCM9I9M5fGoep",
  "number": 6851,
  "title": "Implement validator aggregator selection changes for DVT",
  "user": {
    "login": "benjaminion",
    "id": 20796281,
    "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benjaminion",
    "html_url": "https://github.com/benjaminion",
    "followers_url": "https://api.github.com/users/benjaminion/followers",
    "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
    "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
    "organizations_url": "https://api.github.com/users/benjaminion/orgs",
    "repos_url": "https://api.github.com/users/benjaminion/repos",
    "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benjaminion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1846421702,
      "node_id": "MDU6TGFiZWwxODQ2NDIxNzAy",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/Epic",
      "name": "Epic",
      "color": "3E4B9E",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-02-22T18:12:55Z",
  "updated_at": "2023-03-25T12:57:44Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "[Link to detailed description](https://docs.google.com/document/d/1q9jOTPcYQa-3L8luRvQJ-M0eegtba4Nmon3dpO79TMk/edit?usp=sharing)\r\n\r\nIn short, when configured as part of a DVT (distributed validator technology) cluster, validators are unable to work out directly whether they are to perform attestation (or sync committee) aggregation duty for a committee. This is because they do not have access to the entire signing key needed to generate the signature used for aggregator selection.\r\n\r\nTo support this, some changes to the validator client are needed. At high-level (see [the doc](https://docs.google.com/document/d/1q9jOTPcYQa-3L8luRvQJ-M0eegtba4Nmon3dpO79TMk/edit?usp=sharing) for details),\r\n\r\n1. Configure the validator client to know that it is part of a DVT cluster. I have a slight preference for the manual method (`--distributed` flag on the VC) rather than automatic detection, but happy to discuss.\r\n2. If distributed mode is active, then modify the control flow after attesting in order to consult the beacon node about whether the validator is an aggregator or not, after supplying a partial signature. Also modify the control flow for sync committee aggregation duty.\r\n\r\nThese changes use new standard beacon APIs and should be generic across DVT solutions. (This is why I prefer manual configuration via a flag - automatic detection might be solution-specific or fragile.)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/6851/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1471567524",
    "html_url": "https://github.com/ConsenSys/teku/issues/6851#issuecomment-1471567524",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851",
    "id": 1471567524,
    "node_id": "IC_kwDOCM9I9M5Xtlak",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T09:09:27Z",
    "updated_at": "2023-03-16T09:09:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "It sounds like the latest DVT solution won't be requiring beacon-api changes, so these suggested changes are going to be fairly specific to this implementation - worth taking into consideration while prioritising...\nhttps://github.com/ethereum/distributed-validator-specs\nemerging spec...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1471567524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1473668179",
    "html_url": "https://github.com/ConsenSys/teku/issues/6851#issuecomment-1473668179",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851",
    "id": 1473668179,
    "node_id": "IC_kwDOCM9I9M5X1mRT",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T11:06:04Z",
    "updated_at": "2023-03-17T11:06:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "That spec is looking quite old right now, and doesn't deal with aggregators at all afaics (which might be a blind-spot). We should get some clarity on what the current state of play is. There are only two major implementers of DVT that I'm aware of at the moment, so anything we implement is inevitably going to be fairly application specific. Would definitely prefer to be adhering to whatever \"standard\" emerges, though.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1473668179/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1473670659",
    "html_url": "https://github.com/ConsenSys/teku/issues/6851#issuecomment-1473670659",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6851",
    "id": 1473670659,
    "node_id": "IC_kwDOCM9I9M5X1m4D",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T11:08:04Z",
    "updated_at": "2023-03-17T11:08:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "I was talking to @saltiniroberto , they're working on a fork... He's actively working on it though.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1473670659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

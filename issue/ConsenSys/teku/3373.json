{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/3373",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/3373",
  "id": 758954734,
  "node_id": "MDU6SXNzdWU3NTg5NTQ3MzQ=",
  "number": 3373,
  "title": "[Feature Request] Support for reading graffiti from file",
  "user": {
    "login": "Doppelbock42",
    "id": 17707735,
    "node_id": "MDQ6VXNlcjE3NzA3NzM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/17707735?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Doppelbock42",
    "html_url": "https://github.com/Doppelbock42",
    "followers_url": "https://api.github.com/users/Doppelbock42/followers",
    "following_url": "https://api.github.com/users/Doppelbock42/following{/other_user}",
    "gists_url": "https://api.github.com/users/Doppelbock42/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Doppelbock42/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Doppelbock42/subscriptions",
    "organizations_url": "https://api.github.com/users/Doppelbock42/orgs",
    "repos_url": "https://api.github.com/users/Doppelbock42/repos",
    "events_url": "https://api.github.com/users/Doppelbock42/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Doppelbock42/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1048919131,
      "node_id": "MDU6TGFiZWwxMDQ4OTE5MTMx",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/enhancement%20%F0%9F%95%B5%EF%B8%8F%E2%80%8D%E2%99%80%EF%B8%8F",
      "name": "enhancement üïµÔ∏è‚Äç‚ôÄÔ∏è",
      "color": "a2eeef",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1170684912,
      "node_id": "MDU6TGFiZWwxMTcwNjg0OTEy",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/good%20first%20issue%20:raising_hand:",
      "name": "good first issue :raising_hand:",
      "color": "006b75",
      "default": false,
      "description": "This is a good first issue for a new contributor to work on"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-12-08T00:23:56Z",
  "updated_at": "2021-01-10T22:38:59Z",
  "closed_at": "2021-01-10T22:38:59Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nAs a validator, I would like support for reading graffiti from a file so that I can preserve my privacy and draw Leslie the Rhino on the https://beaconcha.in/graffitiwall. \r\n\r\n\r\n**Expected behavior:** \r\nSomething similar to what Prysm has, https://docs.prylabs.network/docs/prysm-usage/graffiti-file/. Prysm lists 3 options, Specific , Random, and Default. The Specific option where you can set graffiti based on validator ID is important so you can preserve privacy by not linking your validators. I'd also add another option called List, where it goes down a list of graffiti and repeats the list. List is similar to Random but in random some items might never get picked.\r\n\r\n### Additional Information\r\nThis is mostly a fun feature but it does address a privacy concern where validators can be linked by using the same graffiti.  \r\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/3373/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/740980785",
    "html_url": "https://github.com/ConsenSys/teku/issues/3373#issuecomment-740980785",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373",
    "id": 740980785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDk4MDc4NQ==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-08T20:27:59Z",
    "updated_at": "2020-12-08T20:27:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for raising this, we'll look into it.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/740980785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/742231690",
    "html_url": "https://github.com/ConsenSys/teku/issues/3373#issuecomment-742231690",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373",
    "id": 742231690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MjIzMTY5MA==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-10T04:29:34Z",
    "updated_at": "2020-12-10T04:29:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "For anyone looking to implement this, my suggestion would be to start from https://github.com/ConsenSys/teku/blob/513d969759df60e495822f7eda82ac593e32188d/validator/client/src/main/java/tech/pegasys/teku/validator/client/Validator.java#L27\r\n\r\nThe beacon chain can also provide a default graffiti at https://github.com/ConsenSys/teku/blob/848fd9c0282d17f3623741ed09d56c12141c09e3/validator/coordinator/src/main/java/tech/pegasys/teku/validator/coordinator/BlockFactory.java#L131\r\n\r\nIn both places it may make sense to introduce a `GraffitiLoader` class which is responsible for getting the graffiti rather than just passing in `Optional<Bytes32> graffiti`. `GraffitiLoader` could then handle loading the latest value from file or just supply the literal value as it does today and it makes it easy to reuse between the validator client and beacon chain.\r\n\r\nIt should also handle any failures to read the file and ensure the block creation doesn't fail (likely log an error and return the empty string if the file can't be loaded).",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/742231690/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/757556442",
    "html_url": "https://github.com/ConsenSys/teku/issues/3373#issuecomment-757556442",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3373",
    "id": 757556442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzU1NjQ0Mg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-10T22:38:59Z",
    "updated_at": "2021-01-10T22:38:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "This was added with #3414.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/757556442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

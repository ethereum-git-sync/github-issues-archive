{
  "url": "https://api.github.com/repos/Consensys/teku/issues/7489",
  "repository_url": "https://api.github.com/repos/Consensys/teku",
  "labels_url": "https://api.github.com/repos/Consensys/teku/issues/7489/labels{/name}",
  "comments_url": "https://api.github.com/repos/Consensys/teku/issues/7489/comments",
  "events_url": "https://api.github.com/repos/Consensys/teku/issues/7489/events",
  "html_url": "https://github.com/Consensys/teku/issues/7489",
  "id": 1885168472,
  "node_id": "I_kwDOCM9I9M5wXWNY",
  "number": 7489,
  "title": "Option for specify network in voluntary-exit sub-command",
  "user": {
    "login": "heejin-github",
    "id": 83936146,
    "node_id": "MDQ6VXNlcjgzOTM2MTQ2",
    "avatar_url": "https://avatars.githubusercontent.com/u/83936146?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/heejin-github",
    "html_url": "https://github.com/heejin-github",
    "followers_url": "https://api.github.com/users/heejin-github/followers",
    "following_url": "https://api.github.com/users/heejin-github/following{/other_user}",
    "gists_url": "https://api.github.com/users/heejin-github/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/heejin-github/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/heejin-github/subscriptions",
    "organizations_url": "https://api.github.com/users/heejin-github/orgs",
    "repos_url": "https://api.github.com/users/heejin-github/repos",
    "events_url": "https://api.github.com/users/heejin-github/events{/privacy}",
    "received_events_url": "https://api.github.com/users/heejin-github/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-09-07T05:59:06Z",
  "updated_at": "2023-09-08T02:19:52Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- \r\nBy filing an Issue, you are expected to comply with the Code of Conduct, \r\nincluding treating everyone with respect:\r\nhttps://github.com/Consensys/teku/blob/master/CODE-OF-CONDUCT.md\r\n\r\nNot all sections will apply to all issue types.\r\n-->\r\n\r\n### Description\r\nWith Lighthouse BN, Teku VC cannot execute voluntary-exit with following error.\r\nLighthouse BN didn't provide `MAX_REQUEST_BLOCKS`. but, it seems similar with #7397 .\r\nso, trying to find specify network name but, voluntary-exit sub-command didn't have it.\r\n\r\n### Steps to Reproduce (Bug)\r\n- Teku validator client connected with Lighthouse BN.\r\n- activate validator \r\n- try voluntary-exit with below docker command.\r\n```sh\r\n#!/bin/bash\r\n\r\ndocker run -it --name teku_validator_exit \\\r\n\t--network host \\\r\n\t-v <PATH_FOR_VALIDATOR_KEYS>:/root/vc/teku/validator_keys \\\r\n\tconsensys/teku:23.9.0 \\\r\n        voluntary-exit \\\r\n        --beacon-node-api-endpoint=<LIGHTHOUSE_BEACON_API_ENDPOINT> \\\r\n        --confirmation-enabled=false \\\r\n        --validator-keys=\"/root/vc/teku/validator_keys/<EXIT_VALIDATOR_KEYSTORE>:/root/vc/teku/validator_keys/<KEYSTORE_PASSWORD>\" \r\n```\r\n- run log\r\n```sh\r\nLoading configuration...\r\nFailed to retrieve network spec from beacon node endpoint '<LIGHTHOUSE_BEACON_API_ENDPOINT>'.\r\nDetails: Missing value for spec constant 'MAX_REQUEST_BLOCKS'\r\n```\r\n\r\nLighthouse BN didn't provide `MAX_REQUEST_BLOCKS`. so, trying to specify network. (refer to the #7397 )\r\nbut, there's no options for `network` in `voluntary-exit` sub-command.\r\n```\r\nUnknown options: '--network', 'goerli'\r\n\r\nTo display full help:\r\nteku [COMMAND] --help\r\n```\r\n\r\n**Expected behavior:** [What you expect to happen]\r\n\r\n**Actual behavior:** [What actually happens]\r\n\r\n**Frequency:** [How regularly does it occur?]\r\n\r\n### Versions (Add all that apply)\r\n* Software version: [`23.9.0`]\r\n* Java version: [`java -version`]\r\n* OS Name & Version: [`Ubuntu 22.04.3 LTS`]\r\n* Docker Version: [`24.0.5, build ced0996`]\r\n* Cloud VM, type, size: [Baremetal]\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/Consensys/teku/issues/7489/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/Consensys/teku/issues/7489/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1709783784",
    "html_url": "https://github.com/Consensys/teku/issues/7489#issuecomment-1709783784",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7489",
    "id": 1709783784,
    "node_id": "IC_kwDOCM9I9M5l6Tro",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-07T09:11:58Z",
    "updated_at": "2023-09-07T09:11:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for raising.\nWe will have a look at the lighthouse interop with some of the constant values moving around in the spec recently, which will be the reason that teku couldn't read the spec from the BN.\n\nIn regards to the command to execute the exit, it's definitely possible, and very similar to where you got.\nBecause of the library we use for command processing, its a bit confusing, but `--network` is an option on the teku command, so the voluntary-exit ends up looking like:\n```\nteku --network goerli voluntary-exit \\\n--beacon-node-api-endpoint=<LIGHTHOUSE_BEACON_API_ENDPOINT> \\\n        --confirmation-enabled=false \\\n        --validator-keys=\"/root/vc/teku/validator_keys/<EXIT_VALIDATOR_KEYSTORE>:/root/vc/teku/validator_keys/<KEYSTORE_PASSWORD>\" \n```\n\nThis will then read the network configuration from the built-in package. \n\nHopefully this gets you going! We'll look at the constants that made this required, it's much less clunky when it can be read from the BN.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1709783784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1710984688",
    "html_url": "https://github.com/Consensys/teku/issues/7489#issuecomment-1710984688",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7489",
    "id": 1710984688,
    "node_id": "IC_kwDOCM9I9M5l-43w",
    "user": {
      "login": "heejin-github",
      "id": 83936146,
      "node_id": "MDQ6VXNlcjgzOTM2MTQ2",
      "avatar_url": "https://avatars.githubusercontent.com/u/83936146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/heejin-github",
      "html_url": "https://github.com/heejin-github",
      "followers_url": "https://api.github.com/users/heejin-github/followers",
      "following_url": "https://api.github.com/users/heejin-github/following{/other_user}",
      "gists_url": "https://api.github.com/users/heejin-github/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/heejin-github/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/heejin-github/subscriptions",
      "organizations_url": "https://api.github.com/users/heejin-github/orgs",
      "repos_url": "https://api.github.com/users/heejin-github/repos",
      "events_url": "https://api.github.com/users/heejin-github/events{/privacy}",
      "received_events_url": "https://api.github.com/users/heejin-github/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-08T02:19:51Z",
    "updated_at": "2023-09-08T02:19:51Z",
    "author_association": "NONE",
    "body": "@rolfyone Thanks for your kind!\r\nUnfortunately, I tried with `--network` option on the teku command. but, it seems still trying to read from the BN.\r\neven if I added `--network goerli` option, still failed to retrieve network spec from BN as below log.\r\n\r\n\r\n```sh\r\n$ cat exit-validator.sh\r\n#!/bin/bash\r\n\r\ndocker run -it --name teku_validator_exit \\\r\n\t--network host \\\r\n\t-v <PATH_FOR_VALIDATOR_KEYS>:/root/vc/teku/validator_keys \\\r\n\tconsensys/teku:23.9.0 \\\r\n        --network goerli \\\r\n        voluntary-exit \\\r\n        --beacon-node-api-endpoint=<LIGHTHOUSE_BEACON_API_ENDPOINT> \\\r\n        --confirmation-enabled=false \\\r\n        --validator-keys=\"/root/vc/teku/validator_keys/<EXIT_VALIDATOR_KEYSTORE>:/root/vc/teku/validator_keys/<KEYSTORE_PASSWORD>\" \r\n```\r\n\r\n- log\r\n```\r\n$ bash exit-validator.sh\r\nLoading configuration...\r\nFailed to retrieve network spec from beacon node endpoint 'http://localhost:3600/'.\r\nDetails: Missing value for spec constant 'MAX_REQUEST_BLOCKS'\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1710984688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

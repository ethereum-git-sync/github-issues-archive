{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/6256",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/6256/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/6256/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/6256/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/6256",
  "id": 1388440998,
  "node_id": "I_kwDOCM9I9M5Swe2m",
  "number": 6256,
  "title": "Missed block while using teku with mev-boost",
  "user": {
    "login": "tiagocmachado",
    "id": 30123077,
    "node_id": "MDQ6VXNlcjMwMTIzMDc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/30123077?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tiagocmachado",
    "html_url": "https://github.com/tiagocmachado",
    "followers_url": "https://api.github.com/users/tiagocmachado/followers",
    "following_url": "https://api.github.com/users/tiagocmachado/following{/other_user}",
    "gists_url": "https://api.github.com/users/tiagocmachado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tiagocmachado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tiagocmachado/subscriptions",
    "organizations_url": "https://api.github.com/users/tiagocmachado/orgs",
    "repos_url": "https://api.github.com/users/tiagocmachado/repos",
    "events_url": "https://api.github.com/users/tiagocmachado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tiagocmachado/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-09-27T22:12:24Z",
  "updated_at": "2022-09-27T22:20:20Z",
  "closed_at": "2022-09-27T22:20:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nMissed block while using teku with mev-boost, although not 200% it is a teku issue.\r\n\r\n### Steps to Reproduce (Bug)\r\n`Sep 27 21:16:23 mainnet-1 teku[1069242]: 2022-09-27 21:16:23.401 INFO  - Received Builder Bid (Block Number = 15627307, Block Hash = 0x20cd2c152dfc912d806326300d19dc1b2539b8ebbbc3e28058d654278e1aa150, MEV Reward (wei) = 104930938071142305, Gas Limit = 30000000, Gas Used = 13365982)\r\nSep 27 21:16:23 mainnet-1 teku[1069242]: 2022-09-27 21:16:23.978 INFO  - Received execution payload from Builder (Block Number 15627307, Block Hash = 0x20cd2c152dfc912d806326300d19dc1b2539b8ebbbc3e28058d654278e1aa150)\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: 2022-09-27 21:16:24.671 WARN  - Payload for child of block root 0x1709fa550443b7a81760873d295d95f946e286c81fbaa25142b0a575c0945089 was invalid\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: 2022-09-27 21:16:24.676 ERROR - Failed to import proposed block due to FAILED_STATE_TRANSITION: 3b8003dab40b74749ca6b710bb300d30fbcb227c34f02e1745df83e13eeeeecd (4790780)\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: java.lang.IllegalStateException: Invalid ExecutionPayload: invalid bloom (remote: 74a2e92803085c02b0707008d81b05a67881004e4816a6a748598005ffe31797849221760a265203cc481d11275d1dc5e3beb020ffc33daf422ed16029fae10ca0003690980280fae877e41d9001a36306e0820897e2daee53802d59c96aa337628208420f0afe566645550610723de355975ca4133c9c05824635329decc205fa0261b983c23b5137fc4d554bc0420d04dc0a51bbd670ac68aa0cde6230882cfe0e636fef82e6bb6ac44cec8d1c200f34fdb4db8a1fc3126ca024168cb89a246d1595031a808a7976541442174ed211a396f664bc99809a3b961f93a8786d3c0038e2b82f7120921c06b0a401442a5e86d08ab861d96d4026f43c749c8a7ca3  local: 74a2e92803085c02b0707008d81b05a67881024e4816a6a748598005ffe31797849261760a265203cc481d13275d1dc5e3beb020ffc33daf422ed56029fae10ca0003690980280fae877e41d9001a36306e0820897e2daee53802d59c96aa337628208420f0afe566645550610723fe355975ca4133c9c05824635329decc205fa0261b983c23b5137fc4d554bc0420d04dc0a51bbd672ac68aa0cde6230882cfe0e637fef82e6bb6ac44cfc8d1c200f34fdb4db8a1fc3126ca024168cb89a246d15b5031a808a7976541442174ed211a396f664bc99809a3b961f93a8786d3c0038e2b82f7120925c06b0a401442a5e86d08ab861d96d4826f43c749c8a7ca3)\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.statetransition.forkchoice.ForkChoice.importBlockAndState(ForkChoice.java:335) ~[teku-ethereum-statetransition-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.statetransition.forkchoice.ForkChoice.lambda$onBlock$9(ForkChoice.java:303) ~[teku-ethereum-statetransition-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:646) ~[?:?]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at java.util.concurrent.CompletableFuture$Completion.run(CompletableFuture.java:482) ~[?:?]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.eventthread.AsyncRunnerEventThread.lambda$asSupplier$2(AsyncRunnerEventThread.java:139) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.eventthread.AsyncRunnerEventThread.recordEventThreadIdAndExecute(AsyncRunnerEventThread.java:130) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.eventthread.AsyncRunnerEventThread.lambda$doExecute$1(AsyncRunnerEventThread.java:113) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.SafeFuture.of(SafeFuture.java:81) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.AsyncRunner.lambda$runAsync$2(AsyncRunner.java:47) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.SafeFuture.of(SafeFuture.java:73) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at tech.pegasys.teku.infrastructure.async.ScheduledExecutorAsyncRunner.lambda$createRunnableForAction$1(ScheduledExecutorAsyncRunner.java:119) ~[teku-infrastructure-async-22.9.1.jar:22.9.1]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[?:?]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[?:?]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: at java.lang.Thread.run(Thread.java:833) ~[?:?]\r\nSep 27 21:16:24 mainnet-1 teku[1069242]: 2022-09-27 21:16:24.678 INFO  - Validator   *** Published block              Count: 1, Slot: 4790780, Root: 3b8003dab40b74749ca6b710bb300d30fbcb227c34f02e1745df83e13eeeeecd, 13365982 (44%) gas, EL block:  20cd2c152dfc912d806326300d19dc1b2539b8ebbbc3e28058d654278e1aa150 (15627307)\r\nSep 27 21:16:27 mainnet-1 teku[1069242]: 2022-09-27 21:16:27.048 INFO  - Validator   *** Published sync_signature     Count: 1, Slot: 4790780, Root: 1709fa550443b7a81760873d295d95f946e286c81fbaa25142b0a575c0945089\r\nSep 27 21:16:27 mainnet-1 teku[1069242]: 2022-09-27 21:16:27.133 INFO  - Validator   *** Published attestation        Count: 27, Slot: 4790780, Root: 1709fa550443b7a81760873d295d95f946e286c81fbaa25142b0a575c0945089\r\nSep 27 21:16:27 mainnet-1 teku[1069242]: 2022-09-27 21:16:27.438 INFO  - Slot Event  *** Slot: 4790780, Block:                                                        ... empty, Justified: 149710, Finalized: 149709, Peers: 100\r\nSep 27 21:16:31 mainnet-1 teku[1069242]: 2022-09-27 21:16:31.078 INFO  - Validator   *** Published aggregate          Count: 4, Slot: 4790780, Root: 1709fa550443b7a81760873d295d95f946e286c81fbaa25142b0a575c0945089`\r\n\r\n**Frequency:**\r\nOnly once\r\n\r\n### Versions (Add all that apply)\r\n* Software version: 22.9.1\r\n* Java version: 17.0.4\r\n* OS Name & Version: Ubuntu 20.04",
  "closed_by": {
    "login": "tiagocmachado",
    "id": 30123077,
    "node_id": "MDQ6VXNlcjMwMTIzMDc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/30123077?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tiagocmachado",
    "html_url": "https://github.com/tiagocmachado",
    "followers_url": "https://api.github.com/users/tiagocmachado/followers",
    "following_url": "https://api.github.com/users/tiagocmachado/following{/other_user}",
    "gists_url": "https://api.github.com/users/tiagocmachado/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tiagocmachado/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tiagocmachado/subscriptions",
    "organizations_url": "https://api.github.com/users/tiagocmachado/orgs",
    "repos_url": "https://api.github.com/users/tiagocmachado/repos",
    "events_url": "https://api.github.com/users/tiagocmachado/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tiagocmachado/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/6256/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/6256/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1260122944",
    "html_url": "https://github.com/ConsenSys/teku/issues/6256#issuecomment-1260122944",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6256",
    "id": 1260122944,
    "node_id": "IC_kwDOCM9I9M5LG_NA",
    "user": {
      "login": "tiagocmachado",
      "id": 30123077,
      "node_id": "MDQ6VXNlcjMwMTIzMDc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/30123077?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tiagocmachado",
      "html_url": "https://github.com/tiagocmachado",
      "followers_url": "https://api.github.com/users/tiagocmachado/followers",
      "following_url": "https://api.github.com/users/tiagocmachado/following{/other_user}",
      "gists_url": "https://api.github.com/users/tiagocmachado/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tiagocmachado/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tiagocmachado/subscriptions",
      "organizations_url": "https://api.github.com/users/tiagocmachado/orgs",
      "repos_url": "https://api.github.com/users/tiagocmachado/repos",
      "events_url": "https://api.github.com/users/tiagocmachado/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tiagocmachado/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-27T22:20:20Z",
    "updated_at": "2022-09-27T22:20:20Z",
    "author_association": "NONE",
    "body": "relayer related issue",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1260122944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/7023",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/7023/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/7023/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/7023/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/7023",
  "id": 1663144483,
  "node_id": "I_kwDOCM9I9M5jIZIj",
  "number": 7023,
  "title": "antithesis test had 'please fix or report' message",
  "user": {
    "login": "rolfyone",
    "id": 2967240,
    "node_id": "MDQ6VXNlcjI5NjcyNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolfyone",
    "html_url": "https://github.com/rolfyone",
    "followers_url": "https://api.github.com/users/rolfyone/followers",
    "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
    "organizations_url": "https://api.github.com/users/rolfyone/orgs",
    "repos_url": "https://api.github.com/users/rolfyone/repos",
    "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolfyone/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1048919129,
      "node_id": "MDU6TGFiZWwxMDQ4OTE5MTI5",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/bug%20%F0%9F%90%9E",
      "name": "bug üêû",
      "color": "dd6c94",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "lucassaldanha",
    "id": 1766440,
    "node_id": "MDQ6VXNlcjE3NjY0NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1766440?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucassaldanha",
    "html_url": "https://github.com/lucassaldanha",
    "followers_url": "https://api.github.com/users/lucassaldanha/followers",
    "following_url": "https://api.github.com/users/lucassaldanha/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucassaldanha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucassaldanha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucassaldanha/subscriptions",
    "organizations_url": "https://api.github.com/users/lucassaldanha/orgs",
    "repos_url": "https://api.github.com/users/lucassaldanha/repos",
    "events_url": "https://api.github.com/users/lucassaldanha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucassaldanha/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "lucassaldanha",
      "id": 1766440,
      "node_id": "MDQ6VXNlcjE3NjY0NDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1766440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucassaldanha",
      "html_url": "https://github.com/lucassaldanha",
      "followers_url": "https://api.github.com/users/lucassaldanha/followers",
      "following_url": "https://api.github.com/users/lucassaldanha/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucassaldanha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucassaldanha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucassaldanha/subscriptions",
      "organizations_url": "https://api.github.com/users/lucassaldanha/orgs",
      "repos_url": "https://api.github.com/users/lucassaldanha/repos",
      "events_url": "https://api.github.com/users/lucassaldanha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucassaldanha/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-04-11T20:10:38Z",
  "updated_at": "2023-04-20T23:17:46Z",
  "closed_at": "2023-04-20T23:17:46Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "it looks like we attempted to select beyond head potentially, haven't looked at trace fully.\n\nGiven this is onSlot, we can throw a better message and not fall through generic handling...\n```\n[   27564] [   897.401110] [service_teku-besu-0]                     [I] 2023-04-03 13:18:07.873 DEBUG - Ignoring calculated payload building attributes since it violates ordering\n[   27564] [   897.403531] [service_teku-besu-0]                     [I] 2023-04-03 13:18:07.875 DEBUG - Ignoring calculated payload building attributes since it violates ordering\n[   27564] [   897.413403] [service_prysm-geth-0]                    [I] time=\"2023-04-03 13:18:07\" level=debug msg=\"gRPC request finished.\" backend=[] duration=167.668¬µs method=\"/ethereum.eth.v1alpha1.BeaconNodeValidator/GetSyncMessageBlockRoot\"\n[   27564] [   897.446149] [service_lighthouse-geth-0]               [I] : InsufficientPeers, service: libp2p\n[   27564] [   897.446149] [service_lighthouse-geth-0]               [I] Apr 03 13:18:07.917 WARN Could not publish message               error: InsufficientPeers, service: libp2p\n[   27564] [   897.446149] [service_lighthouse-geth-0]               [I] Apr 03 13:18:07.917 WARN Could not publish message               error: InsufficientPeers, service: libp2p\n[   27564] [   897.446149] [service_lighthouse-geth-0]               [I] Apr 03 13:18:07.917 WARN Could not publish message               error: InsufficientPeers, service: libp2p\n[   27564] [   897.525497] [service_nimbus-nethermind-0]             [I] DBG 2023-04-03 13:18:07.997+00:00 Current syncing state                      topics=\"syncman\" workers_map=wwwwwUwwww sleeping_workers_count=0 waiting_workers_count=9 pending_workers_count=1 wall_head_slot=144 local_head_slot=103 pause_time= avg_sync_speed=0.2582259141418051 ins_sync_speed=0.0 sync_ident=main direction=forward\n[   27564] [   897.528534] [service_lodestar-besu-0]                 [I] Apr-03 13:18:08.000[]                 \u001B[32minfo\u001B[39m: Searching peers - peers: 0 - slot: 144 (skipped 41) - head: 103 0xc19e‚Ä¶ef90 - execution: valid(0xcb17‚Ä¶264f) - finalized: 0x0000‚Ä¶0000:0\n[   27564] [   897.531551] [service_lodestar-geth-0]                 [I] Apr-03 13:18:08.003[]                 \u001B[32minfo\u001B[39m: Searching peers - peers: 1 - slot: 144 (skipped 41) - head: 103 0xc19e‚Ä¶ef90 - execution: valid(0xcb17‚Ä¶264f) - finalized: 0x0000‚Ä¶0000:0\n[   27564] [   897.533525] [service_teku-besu-0]                     [I] 2023-04-03 13:18:08.005 DEBUG - Producing instance of Job 'DEFAULT.Timer-1', class=tech.pegasys.teku.services.timer.ScheduledTimeEvent\n[   27564] [   897.540343] [service_lighthouse-geth-0]               [I] Apr 03 13:18:08.006 INFO Connected to beacon node(s)             synced: 1, available: 1, total: 1, service: notifier\n[   27564] [   897.540343] [service_lighthouse-geth-0]               [I] Apr 03 13:18:08.012 INFO Some validators active                  slot: 144, epoch: 18, total_validators: 10, active_validators: 7, current_epoch_proposers: 2, service: notifier\n[   27564] [   897.541525] [service_lighthouse-nethermind-0]         [I] Apr 03 13:18:08.002Apr 03 13:18:08.003 INFO Connected to beacon node(s)             synced: 1, available: 1, total: 1, service: notifier\n[   27564] [   897.541525] [service_lighthouse-nethermind-0]         [I] Apr 03 13:18:08.013 INFO Awaiting activation                     slot: 144, epoch: 18, validators: 10, service: notifier\n[   27564] [   897.547076] [service_lighthouse-besu-0]               [I] Apr 03 13:18:08.019 INFO Connected to beacon node(s)             synced: 1, available: 1, total: 1, service: notifier\n[   27564] [   897.547076] [service_lighthouse-besu-0]               [I] Apr 03 13:18:08.019 INFO Some validators active                  slot: 144, epoch: 18, total_validators: 10, active_validators: 9, current_epoch_proposers: 0, service: notifier\n[   27564] [   897.550122] [service_lodestar-nethermind-0]           [I] Apr-03 13:18:08.020[]                 \u001B[32minfo\u001B[39m: Searching peers - peers: 1 - slot: 144 (skipped 41) - head: 103 0xc19e‚Ä¶ef90 - execution: valid(0xcb17‚Ä¶264f) - finalized: 0x0000‚Ä¶0000:0\n[   27564] [   897.550569] [service_teku-whale-0]                    [I] 2023-04-03 13:18:08.021 DEBUG - Producing instance of Job 'DEFAULT.Timer-1', class=tech.pegasys.teku.services.timer.ScheduledTimeEvent\n[   27564] [   897.550569] [service_teku-whale-0]                    [I] 2023-04-03 13:18:08.022 DEBUG - Calling execute on job DEFAULT.Timer-1\n[   27564] [   897.552701] [service_teku-besu-0]                     [I] 2023-04-03 13:18:08.024 DEBUG - Calling execute on job DEFAULT.Timer-1\n[   27564] [   897.561474] [service_teku-whale-0]                    [I] 2023-04-03 13:18:08.033 DEBUG - batch acquisition of 1 triggers\n[   27564] [   897.578620] [service_teku-besu-0]                     [I] 2023-04-03 13:18:08.050 INFO  - Validator   *** Published attestation        Count: 2, Slot: 144, Root: b60d23b6ce81a34f1b2f5da5738aa1c9c99053936028063117a4a757a3641819\n[   27564] [   897.594806] [service_lighthouse-besu-0]               [I] Apr 03 13:18:08.037 WARN Low peer count                          peer_count: 0, service: slot_notifier\n[   27564] [   897.654597] [service_teku-nethermind-0]               [I] 2023-04-03 13:18:08.1246|Waiting for peers... 37s\n[   27564] [   897.666472] [service_teku-besu-0]                     [I] 2023-04-03 13:18:08.138 DEBUG - batch acquisition of 1 triggers\n[   27564] [   897.667627] [service_nimbus-geth-0]                   [I] DBG 2023-04-03 13:18:08.139+00:00 Timed out or unrequested whoareyou packet  topics=\"eth p2p discv5\" address=10.0.20.70:4000\n[   27564] [   897.669666] [service_lighthouse-nethermind-0]         [I] WARN Low peer count                          peer_count: 0, service: slot_notifier\n[   27564] [   897.680460] [service_teku-besu-0]                     [I] 2023-04-03 13:18:08.152 INFO  - Validator   *** Published sync_signature     Count: 3, Slot: 144, Root: b60d23b6ce81a34f1b2f5da5738aa1c9c99053936028063117a4a757a3641819\n[   27564] [   897.690612] [service_lighthouse-besu-0]               [I] Apr 03 13:18:08.103 INFO Synced                                  slot: 144, block:    ‚Ä¶  empty, epoch: 18, finalized_epoch: 0, finalized_root: 0x69a9‚Ä¶f4ab, exec_hash: 0x05ec‚Ä¶eb48 (verified), peers: 0, service: slot_notifier\n[   27564] [   897.690612] [service_lighthouse-besu-0]               [I] Apr 03 13:18:08.162 WARN Syncing deposit contract block cache    est_blocks_remaining: 6, service: slot_notifier\n[   27564] [   897.708083] [service_nimbus-nethermind-0]             [I] DBG 2023-04-03 13:18:08.179+00:00 Timed out or unrequested whoareyou packet  topics=\"eth p2p discv5\" address=10.0.20.70:4000\n[   27564] [   897.711650] [service_prysm-geth-0]                    [I] time=\"2023-04-03 13:18:07\" level=error msg=\"Could not request sync message block root to sign\" error=\"rpc error: code = DeadlineExceeded desc = context deadline exceeded\" prefix=validator\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] 2023-04-03 13:18:08.087 ERROR - PLEASE FIX OR REPORT | Unexpected exception thrown for event 'interface tech.pegasys.teku.ethereum.events.SlotEventsChannel.onSlot' in handler 'tech.pegasys.teku.validator.coordinator.performance.DefaultPerformanceTracker'\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] java.util.concurrent.CompletionException: java.lang.IllegalArgumentException: Block at slot 133 not available from state at slot 132\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.CompletableFuture.biApply(CompletableFuture.java:1313) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.CompletableFuture.biApplyStage(CompletableFuture.java:1329) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.CompletableFuture.thenCombine(CompletableFuture.java:2210) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.infrastructure.async.SafeFuture.thenCombine(SafeFuture.java:536) ~[teku-infrastructure-async-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.validator.coordinator.performance.DefaultPerformanceTracker.getAttestationPerformanceForEpoch(DefaultPerformanceTracker.java:264) ~[teku-beacon-validator-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.validator.coordinator.performance.DefaultPerformanceTracker.reportAttestationPerformance(DefaultPerformanceTracker.java:181) ~[teku-beacon-validator-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.validator.coordinator.performance.DefaultPerformanceTracker.onSlot(DefaultPerformanceTracker.java:126) ~[teku-beacon-validator-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.lang.reflect.Method.invoke(Method.java:568) ~[?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.infrastructure.events.DirectEventDeliverer.executeMethod(DirectEventDeliverer.java:74) ~[teku-infrastructure-events-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.infrastructure.events.DirectEventDeliverer.deliverTo(DirectEventDeliverer.java:54) ~[teku-infrastructure-events-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.infrastructure.events.AsyncEventDeliverer.lambda$deliverTo$0(AsyncEventDeliverer.java:66) ~[teku-infrastructure-events-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.infrastructure.events.AsyncEventDeliverer$QueueReader.deliverNextEvent(AsyncEventDeliverer.java:125) [teku-infrastructure-events-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.infrastructure.events.AsyncEventDeliverer$QueueReader.run(AsyncEventDeliverer.java:116) [teku-infrastructure-events-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) [?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) [?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.lang.Thread.run(Thread.java:833) [?:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] Caused by: java.lang.IllegalArgumentException: Block at slot 133 not available from state at slot 132\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at com.google.common.base.Preconditions.checkArgument(Preconditions.java:435) ~[guava-31.1-jre.jar:?]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.spec.logic.common.helpers.BeaconStateAccessors.getBlockRootAtSlot(BeaconStateAccessors.java:235) ~[teku-ethereum-spec-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.spec.Spec.getBlockRootAtSlot(Spec.java:423) ~[teku-ethereum-spec-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.validator.coordinator.performance.DefaultPerformanceTracker.calculateAttestationPerformance(DefaultPerformanceTracker.java:317) ~[teku-beacon-validator-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at tech.pegasys.teku.validator.coordinator.performance.DefaultPerformanceTracker.lambda$getAttestationPerformanceForEpoch$7(DefaultPerformanceTracker.java:267) ~[teku-beacon-validator-23.3.1.jar:23.3.1]\n[   27564] [   897.770081] [service_teku-geth-0]                     [I] at java.util.concurrent.CompletableFuture.biApply(CompletableFuture.java:1311) ~[?:?]\n```",
  "closed_by": {
    "login": "lucassaldanha",
    "id": 1766440,
    "node_id": "MDQ6VXNlcjE3NjY0NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1766440?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucassaldanha",
    "html_url": "https://github.com/lucassaldanha",
    "followers_url": "https://api.github.com/users/lucassaldanha/followers",
    "following_url": "https://api.github.com/users/lucassaldanha/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucassaldanha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucassaldanha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucassaldanha/subscriptions",
    "organizations_url": "https://api.github.com/users/lucassaldanha/orgs",
    "repos_url": "https://api.github.com/users/lucassaldanha/repos",
    "events_url": "https://api.github.com/users/lucassaldanha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucassaldanha/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/7023/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/7023/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

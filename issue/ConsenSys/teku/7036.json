{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/7036",
  "id": 1669501284,
  "node_id": "I_kwDOCM9I9M5jgpFk",
  "number": 7036,
  "title": "Teku 23.3.1 docker container crashes immediately on start",
  "user": {
    "login": "j4ys0n",
    "id": 979576,
    "node_id": "MDQ6VXNlcjk3OTU3Ng==",
    "avatar_url": "https://avatars.githubusercontent.com/u/979576?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/j4ys0n",
    "html_url": "https://github.com/j4ys0n",
    "followers_url": "https://api.github.com/users/j4ys0n/followers",
    "following_url": "https://api.github.com/users/j4ys0n/following{/other_user}",
    "gists_url": "https://api.github.com/users/j4ys0n/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/j4ys0n/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/j4ys0n/subscriptions",
    "organizations_url": "https://api.github.com/users/j4ys0n/orgs",
    "repos_url": "https://api.github.com/users/j4ys0n/repos",
    "events_url": "https://api.github.com/users/j4ys0n/events{/privacy}",
    "received_events_url": "https://api.github.com/users/j4ys0n/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rolfyone",
    "id": 2967240,
    "node_id": "MDQ6VXNlcjI5NjcyNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolfyone",
    "html_url": "https://github.com/rolfyone",
    "followers_url": "https://api.github.com/users/rolfyone/followers",
    "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
    "organizations_url": "https://api.github.com/users/rolfyone/orgs",
    "repos_url": "https://api.github.com/users/rolfyone/repos",
    "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolfyone/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2023-04-15T17:40:34Z",
  "updated_at": "2023-04-17T01:14:57Z",
  "closed_at": "2023-04-17T01:14:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- \r\nBy filing an Issue, you are expected to comply with the Code of Conduct, \r\nincluding treating everyone with respect:\r\nhttps://github.com/ConsenSys/teku/blob/master/CODE-OF-CONDUCT.md\r\n\r\nNot all sections will apply to all issue types.\r\n-->\r\n\r\n### Description\r\nTeku 23.3.1 docker container crashes immediately on start\r\n```\r\n[0.035s][warning][os,thread] Failed to start thread - pthread_create failed (EPERM) for attributes: stacksize: 1024k, guardsize: 4k, detached.\r\n#\r\n# There is insufficient memory for the Java Runtime Environment to continue.\r\n# Cannot create worker GC thread. Out of system resources.\r\n# An error report file with more information is saved as:\r\n# /opt/teku/hs_err_pid1.log\r\n[0.025s][warning][os,thread] Failed to start thread - pthread_create failed (EPERM) for attributes: stacksize: 1024k, guardsize: 4k, detached.\r\n```\r\nv22.x worked fine, exact same environment, runtime flags\r\n\r\n### Steps to Reproduce (Bug)\r\nSince this environment is not the most common - here's how to set it up.\r\n\r\nOn a separate machine, \r\n- Install Proxmox https://www.proxmox.com/en/downloads/category/iso-images-pve\r\n- Set up an LXC with docker. helper script: https://tteck.github.io/Proxmox/ - click on \"Docker - Kubernetes\" > \"Docker LXC\"\r\n- Start LXC\r\n- `docker run -it --rm consensys/teku:23.3.1`\r\n\r\n**Expected behavior:** container should run\r\n\r\n**Actual behavior:** container crashes\r\n\r\n**Frequency:** every time\r\n\r\n### Versions (Add all that apply)\r\n* Software version: 23.3.1\r\n* Java version: OpenJDK 16, OpenJDK 17\r\n* OS Name & Version: Ubuntu 22.04 LXC on Proxmox 7.4\r\n* Docker Version: Docker version 20.10.7, build f0df350\r\n* Cloud VM, type, size: LXC with 16 cores and 32GB allocated\r\n\r\n[hs_err_pid1.log](https://github.com/ConsenSys/teku/files/11240223/teku-jvm-error.txt)\r\n",
  "closed_by": {
    "login": "rolfyone",
    "id": 2967240,
    "node_id": "MDQ6VXNlcjI5NjcyNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolfyone",
    "html_url": "https://github.com/rolfyone",
    "followers_url": "https://api.github.com/users/rolfyone/followers",
    "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
    "organizations_url": "https://api.github.com/users/rolfyone/orgs",
    "repos_url": "https://api.github.com/users/rolfyone/repos",
    "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolfyone/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/7036/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510523828",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510523828",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510523828,
    "node_id": "IC_kwDOCM9I9M5aCMO0",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-16T23:55:28Z",
    "updated_at": "2023-04-16T23:55:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for raising...\n\n```\n-XX:SoftMaxHeapSize=2g -Xms5g -Xmx5g\n```\n\nI'd suggest removing softMaxHeapSize, and Xms... although Xms may be useful in this instance since it's showing you a lack of memory available up front.  either-way, softMaxHeap won't be required...\n\nAre there a lot of other processes running (outside of this container)? The message suggests there's no physical memory left on the machine to satisfy allocating 5G swap upfront...\n\nI did start this docker instance the other day on my machine and it was working for a different reason, so believe it is going to be configuration, just trying to narrow down in what way... sorry to ask more questions than I answered...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510523828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510538496",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510538496",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510538496,
    "node_id": "IC_kwDOCM9I9M5aCP0A",
    "user": {
      "login": "j4ys0n",
      "id": 979576,
      "node_id": "MDQ6VXNlcjk3OTU3Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/979576?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/j4ys0n",
      "html_url": "https://github.com/j4ys0n",
      "followers_url": "https://api.github.com/users/j4ys0n/followers",
      "following_url": "https://api.github.com/users/j4ys0n/following{/other_user}",
      "gists_url": "https://api.github.com/users/j4ys0n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/j4ys0n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/j4ys0n/subscriptions",
      "organizations_url": "https://api.github.com/users/j4ys0n/orgs",
      "repos_url": "https://api.github.com/users/j4ys0n/repos",
      "events_url": "https://api.github.com/users/j4ys0n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/j4ys0n/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T00:30:31Z",
    "updated_at": "2023-04-17T00:36:14Z",
    "author_association": "NONE",
    "body": "Thanks for the suggestion. I've tried that actually. Among other variations, I tried running the container with no arguments and the result is the same. The run command I wrote in the original issue description has the same result. `docker run -it --rm consensys/teku:23.3.1`\r\n\r\nTo answer your other questions - \r\nIn this specific LXC, there are other things running, with docker. everything here: https://github.com/j4ys0n/eth-validator-stack/blob/main/docker-compose.yml\r\n\r\nBut I have many LXCs running on this specific server. The LXCs are running on Proxmox, which is an open source hypervisor.\r\n\r\nI am using this same docker-compose on an AWS EC2 instance and it runs fine, so the issue seems to be with running this image in a linux container.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510538496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510541069",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510541069",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510541069,
    "node_id": "IC_kwDOCM9I9M5aCQcN",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T00:39:35Z",
    "updated_at": "2023-04-17T00:39:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "fairly useless example, but just for context:\r\n```\r\ndocker run -it --rm consensys/teku:23.3.1 --network minimal --Xinterop-enabled=true\r\nINFO StatusConsoleListener Configuring logging for destination: console and file\r\nINFO StatusConsoleListener Logging file location: /opt/teku/.local/share/teku/logs/teku.log\r\nINFO StatusConsoleListener Logging includes events: true\r\nINFO StatusConsoleListener Logging includes validator duties: true\r\nINFO StatusConsoleListener Logging includes color: true\r\nINFO StatusConsoleListener Include P2P warnings set to: false\r\n00:37:47.244 INFO  - Teku version: teku/v23.3.1/linux-aarch_64/-eclipseadoptium-openjdk64bitservervm-java-17\r\n00:37:47.246 INFO  - This software is licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this software except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n00:37:47.309 INFO  - Configuration | Network: minimal, Storage Mode: PRUNE\r\n00:37:47.309 INFO  - Host Configuration | Maximum Heap Size: 1.92 GB, Total Memory: 7.67 GB, CPU Cores: 6\r\n00:37:47.310 INFO  - Rest Api Configuration | Enabled: false\r\n00:37:47.310 INFO  - Validator Api Configuration | Listen Address: 0.0.0.0, Port 5052, Allow: [127.0.0.1, localhost]\r\n00:37:47.459 INFO  - Storing beacon chain data in: /opt/teku/.local/share/teku/beacon\r\n00:37:47.460 INFO  - Loading 0 validator keys...\r\n00:37:47.462 INFO  - Loaded 0 Validators:\r\n00:37:47.464 INFO  - Using portable BLST library.\r\n00:37:47.588 INFO  - Initializing storage\r\n00:37:47.590 INFO  - Storage initialization complete\r\n00:37:47.604 INFO  - Starting with mocked start interoperability mode with genesis time 2023-04-17 12:37:52 and 64 validators\r\n00:37:47.763 INFO  - Genesis Event ***\r\nGenesis state root: 0x458c86dc2f811dddef03805fb2535896c30f213a253768bd663df5add366f4de\r\nGenesis block root: 0x9bb6be93aabbc78ff60b964272a8a8d5cd1bc2fbd30cb5125b2e2d19a0b29c4f\r\nGenesis time: 2023-04-17 00:37:52 GMT\r\n00:37:47.948 INFO  - Generated new p2p private key and storing in: generated-node-key\r\n00:37:48.142 INFO  - PreGenesis Local ENR: enr:-Iu4QK-FvfPcsJ8ZAmPvpLZJjEzXIoxGCxtgTSjiALCjH0apYAk_HhBFCAuSpzR39ONuoWgjIK74Jq0E3KJ80AXu-oUChGV0aDKQGK5MywAAAAH__________4JpZIJ2NIlzZWNwMjU2azGhAjuFsKjhIU9PJLUyFutWEq78iG2fLPbqPvbY2XY5Hj0l\r\n00:37:48.187 INFO  - 4 seconds until genesis time is reached. Peers: 0\r\n00:37:48.231 INFO  - Listening for connections on: /ip4/172.17.0.2/tcp/9000/p2p/16Uiu2HAkyS2GdiM1X2BtbFPWt3oJ5z7QgAWH1EKv9uM2VQAbL4Z2\r\n00:37:48.252 INFO  - Local ENR: enr:-Iu4QOFSokYLIb0VP2lB1wXWcfU0wyeiRywLolufexND8ECQZkEqQPNsSZEi0Ddq-4tJ-H_4UPHW9jbN4FFppivpwsgDhGV0aDKQUmfZxgAAAAH__________4JpZIJ2NIlzZWNwMjU2azGhAjuFsKjhIU9PJLUyFutWEq78iG2fLPbqPvbY2XY5Hj0l\r\n00:37:52.007 INFO  - Epoch Event *** Epoch: 0, Justified checkpoint: 0, Finalized checkpoint: 0, Finalized root: 9bb6be93aabbc78ff60b964272a8a8d5cd1bc2fbd30cb5125b2e2d19a0b29c4f\r\n^CTeku is shutting down\r\n```\r\n\r\nBecause this is interop, a lot of things don't happen, but it does start, and I'd expect it to not start if it was a broken image...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510541069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510541506",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510541506",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510541506,
    "node_id": "IC_kwDOCM9I9M5aCQjC",
    "user": {
      "login": "j4ys0n",
      "id": 979576,
      "node_id": "MDQ6VXNlcjk3OTU3Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/979576?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/j4ys0n",
      "html_url": "https://github.com/j4ys0n",
      "followers_url": "https://api.github.com/users/j4ys0n/followers",
      "following_url": "https://api.github.com/users/j4ys0n/following{/other_user}",
      "gists_url": "https://api.github.com/users/j4ys0n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/j4ys0n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/j4ys0n/subscriptions",
      "organizations_url": "https://api.github.com/users/j4ys0n/orgs",
      "repos_url": "https://api.github.com/users/j4ys0n/repos",
      "events_url": "https://api.github.com/users/j4ys0n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/j4ys0n/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T00:41:09Z",
    "updated_at": "2023-04-17T00:43:20Z",
    "author_association": "NONE",
    "body": "It does not start on the LXC.\r\n\r\n```\r\ndocker run -it --rm consensys/teku:23.3.1 --network minimal --Xinterop-enabled=true\r\n[0.014s][warning][os,thread] Failed to start thread \"GC Thread#0\" - pthread_create failed (EPERM) for attributes: stacksize: 1024k, guardsize: 4k, detached.\r\n#\r\n# There is insufficient memory for the Java Runtime Environment to continue.\r\n# Cannot create worker GC thread. Out of system resources.\r\n# An error report file with more information is saved as:\r\n# /opt/teku/hs_err_pid1.log\r\n```\r\n\r\nthere's plenty of memory available on the server and the LXC that's provisioned on it.\r\n\r\n![image](https://user-images.githubusercontent.com/979576/232353616-077264c8-6d56-495f-b598-a574ea7ff933.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510541506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510542745",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510542745",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510542745,
    "node_id": "IC_kwDOCM9I9M5aCQ2Z",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T00:45:35Z",
    "updated_at": "2023-04-17T00:45:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "There's a few references online to a similar issue around random docker images, but the only answer seems to be 'update docker'.\r\nI'm guessing you've already tried that?",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510542745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510550141",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510550141",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510550141,
    "node_id": "IC_kwDOCM9I9M5aCSp9",
    "user": {
      "login": "j4ys0n",
      "id": 979576,
      "node_id": "MDQ6VXNlcjk3OTU3Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/979576?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/j4ys0n",
      "html_url": "https://github.com/j4ys0n",
      "followers_url": "https://api.github.com/users/j4ys0n/followers",
      "following_url": "https://api.github.com/users/j4ys0n/following{/other_user}",
      "gists_url": "https://api.github.com/users/j4ys0n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/j4ys0n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/j4ys0n/subscriptions",
      "organizations_url": "https://api.github.com/users/j4ys0n/orgs",
      "repos_url": "https://api.github.com/users/j4ys0n/repos",
      "events_url": "https://api.github.com/users/j4ys0n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/j4ys0n/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T01:02:36Z",
    "updated_at": "2023-04-17T01:02:36Z",
    "author_association": "NONE",
    "body": "Ah - that was it! Thank you sir. I was searching for teku specific issues, not necessarily java/docker issues.\r\n\r\nThere is another issue though. The container starts up but then teku doesn't start.\r\n\r\n```\r\n2023-04-17 00:59:02.839 INFO  - Using default implementation for ThreadExecutor\r\n2023-04-17 00:59:02.844 INFO  - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\r\n2023-04-17 00:59:02.845 INFO  - Quartz Scheduler v.2.3.2 created.\r\n2023-04-17 00:59:02.845 INFO  - RAMJobStore initialized.\r\n2023-04-17 00:59:02.845 INFO  - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'QuartzScheduler' with instanceId 'NON_CLUSTERED'\r\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\r\n  NOT STARTED.\r\n  Currently in standby mode.\r\n  Number of jobs executed: 0\r\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 1 threads.\r\n  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.\r\n\r\n2023-04-17 00:59:02.845 INFO  - Quartz scheduler 'QuartzScheduler' initialized from an externally provided properties instance.\r\n2023-04-17 00:59:02.845 INFO  - Quartz scheduler version: 2.3.2\r\n2023-04-17 00:59:02.855 INFO  - Initializing storage\r\n2023-04-17 00:59:03.324 FATAL - Failed to initialize storage. Check the existing database matches the current network configuration. Set log level to debug for more information.\r\n2023-04-17 00:59:03.325 FATAL - Teku failed to start\r\njava.util.concurrent.CompletionException: tech.pegasys.teku.infrastructure.ssz.sos.SszDeserializeException: First variable element offset doesn't match the end of fixed part\r\n```\r\n\r\nI'm not sure why it would fail to initialize storage.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510550141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510553055",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510553055",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510553055,
    "node_id": "IC_kwDOCM9I9M5aCTXf",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T01:06:34Z",
    "updated_at": "2023-04-17T01:06:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok this one is probably less severe in a way, thats basically because it was running pre 23.3.1 during the capella fork and now it's confused.\r\n\r\nIf you're an archive node you probably want to keep history so you'll want to do something like:\r\n```\r\nteku debug-tools db delete-hot-blocks\r\n```\r\n\r\nif you're running prune or minimal, it's probably not a huge issue to just re-initialise your database, it would just have to re-download blocks... This would mean deleting the data folder and re-initialising from `initial-state`. I usually just google `checkpointz beaconcha.in` and use the initial state they offer, but if you have a trusted node internally you could equally use an initial-state from that...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510553055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510558951",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510558951",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510558951,
    "node_id": "IC_kwDOCM9I9M5aCUzn",
    "user": {
      "login": "j4ys0n",
      "id": 979576,
      "node_id": "MDQ6VXNlcjk3OTU3Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/979576?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/j4ys0n",
      "html_url": "https://github.com/j4ys0n",
      "followers_url": "https://api.github.com/users/j4ys0n/followers",
      "following_url": "https://api.github.com/users/j4ys0n/following{/other_user}",
      "gists_url": "https://api.github.com/users/j4ys0n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/j4ys0n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/j4ys0n/subscriptions",
      "organizations_url": "https://api.github.com/users/j4ys0n/orgs",
      "repos_url": "https://api.github.com/users/j4ys0n/repos",
      "events_url": "https://api.github.com/users/j4ys0n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/j4ys0n/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T01:13:47Z",
    "updated_at": "2023-04-17T01:13:47Z",
    "author_association": "NONE",
    "body": "ah - ok - i will try that. i run this at home for dev and stuff like that and forgot to update in time. thanks again!\r\ni do have an archive, but that's actually offline temporarily, awaiting a replacement nvme drive.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510558951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510559859",
    "html_url": "https://github.com/ConsenSys/teku/issues/7036#issuecomment-1510559859",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/7036",
    "id": 1510559859,
    "node_id": "IC_kwDOCM9I9M5aCVBz",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T01:14:56Z",
    "updated_at": "2023-04-17T01:14:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok, I'll close this, but feel free to ask further questions on this ticket or in discord if you need more help :)",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1510559859/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

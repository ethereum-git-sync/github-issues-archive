{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/3125",
  "id": 734259363,
  "node_id": "MDU6SXNzdWU3MzQyNTkzNjM=",
  "number": 3125,
  "title": "Segfault on Fedora 32, Java 15, OpenJDK 20.9",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1048919129,
      "node_id": "MDU6TGFiZWwxMDQ4OTE5MTI5",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/bug%20%F0%9F%90%9E",
      "name": "bug üêû",
      "color": "dd6c94",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 2172542566,
      "node_id": "MDU6TGFiZWwyMTcyNTQyNTY2",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/P3",
      "name": "P3",
      "color": "FFFF00",
      "default": false,
      "description": "Medium"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2020-11-02T07:25:07Z",
  "updated_at": "2022-02-21T04:01:19Z",
  "closed_at": "2022-02-21T04:01:19Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nMy Teku node segfaulted while syncing from genesis.\r\n\r\n```\r\n16:08:57.993 INFO  - Sync Event  *** Current slot: 645644, Head slot: 47776, Connected peers: 28\r\n16:09:10.817 INFO  - Sync Event  *** Current slot: 645645, Head slot: 47808, Connected peers: 27\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007fa160cb3b31, pid=210481, tid=211314\r\n#\r\n# JRE version: OpenJDK Runtime Environment 20.9 (15.0+36) (build 15+36)\r\n# Java VM: OpenJDK 64-Bit Server VM 20.9 (15+36, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0xd8fb31]  ObjectSynchronizer::get_lock_owner(ThreadsList*, Handle)+0x51\r\n#\r\n# Core dump will be written. Default location: Core dumps may be processed with \"/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h\" (or dumping to /home/michael/teku-medalla/core.210481)\r\n#\r\n# An error report file with more information is saved as:\r\n# /home/michael/teku-medalla/hs_err_pid210481.log\r\nCompiled method (n/a) 12689402 20398     n 0       sun.management.ThreadImpl::getThreadInfo1 (native)\r\n total in heap  [0x00007fa148ba4a90,0x00007fa148ba4e18] = 904\r\n relocation     [0x00007fa148ba4be8,0x00007fa148ba4c20] = 56\r\n main code      [0x00007fa148ba4c20,0x00007fa148ba4e18] = 504\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   https://bugzilla.redhat.com/enter_bug.cgi?product=Fedora&component=java-latest-openjdk&version=32\r\n#\r\n./teku.sh: line 9: 210481 Aborted                 (core dumped) ./teku-0.12.12/bin/teku --network=medalla --rest-api-enabled --rest-api-docs-enabled --metrics-enabled\r\n```\r\n\r\n### Steps to Reproduce\r\n\r\nUnsure, looks like some kind of race condition, or possibly a bug in the JVM. If it happens again I'll likely try a different JVM version.\r\n\r\nI was running with these arguments:\r\n\r\n```\r\n#!/bin/bash\r\n\r\nexport JAVA_OPTS=\"-Xmx2g\"\r\n\r\n./teku-0.12.12/bin/teku \\\r\n    --network=medalla \\\r\n    --rest-api-enabled \\\r\n    --rest-api-docs-enabled \\\r\n    --metrics-enabled\r\n```\r\n\r\n### Versions\r\n\r\n* Software version: `teku/v0.12.12/linux-x86_64/-redhatinc-openjdk64bitservervm-java-15`\r\n* Java version:\r\n```\r\nopenjdk version \"15\" 2020-09-15\r\nOpenJDK Runtime Environment 20.9 (build 15+36)\r\nOpenJDK 64-Bit Server VM 20.9 (build 15+36, mixed mode, sharing)\r\n```\r\n* OS Name & Version: `Fedora release 32 (Thirty Two)`\r\n* Kernel Version: `Linux my-hostname 5.8.15-201.fc32.x86_64 #1 SMP Thu Oct 15 15:56:44 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux`\r\n* Virtual Machine software & version: N/A\r\n* Docker Version: N/A\r\n* Cloud VM, type, size: N/A\r\n* CPU: Core i3 530 (2010)\r\n\r\n### Additional Information\r\n\r\nThis issue looks similar: https://github.com/ConsenSys/teku/issues/3079\r\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/3125/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720365949",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-720365949",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 720365949,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDM2NTk0OQ==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-02T09:56:21Z",
    "updated_at": "2020-11-02T09:56:21Z",
    "author_association": "NONE",
    "body": "Got another one within a few hours of restarting:\r\n\r\n```\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f7fd2123f34, pid=215814, tid=215834\r\n#\r\n# JRE version: OpenJDK Runtime Environment 20.9 (15.0+36) (build 15+36)\r\n# Java VM: OpenJDK 64-Bit Server VM 20.9 (15+36, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0x687f34]  oopDesc::size_given_klass(Klass*)+0x4\r\n#\r\n# Core dump will be written. Default location: Core dumps may be processed with \"/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h\" (or dumping to /home/michael/teku-medalla/core.215814)\r\n#\r\n# An error report file with more information is saved as:\r\n# /home/michael/teku-medalla/hs_err_pid215814.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   https://bugzilla.redhat.com/enter_bug.cgi?product=Fedora&component=java-latest-openjdk&version=32\r\n#\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720365949/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720773176",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-720773176",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 720773176,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDc3MzE3Ng==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-02T23:00:11Z",
    "updated_at": "2020-11-02T23:02:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for raising this, can we get a copy of the core dump? `/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h` ? It will help diagnosis...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720773176/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720793640",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-720793640",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 720793640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDc5MzY0MA==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-03T00:00:21Z",
    "updated_at": "2020-11-03T00:00:21Z",
    "author_association": "NONE",
    "body": "Here are the crash logs from Java, and I'll DM you the core dump links in case there's any sensitive data in there (I wasn't running any validators, so there shouldn't be):\r\n\r\nhttps://sproul.xyz/eth2/hs_err_pid210481.log\r\nhttps://sproul.xyz/eth2/hs_err_pid215814.log\r\n\r\nBtw, I'm running on Java 11 now without issue, so it must be something specific about the `java-latest-openjdk` package, although I guess Java 15 is OK for other users?",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720793640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720805780",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-720805780",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 720805780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDgwNTc4MA==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-03T00:35:08Z",
    "updated_at": "2020-11-03T00:35:08Z",
    "author_association": "NONE",
    "body": "DMed on Telegram",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720805780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720895100",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-720895100",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 720895100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDg5NTEwMA==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-03T04:15:29Z",
    "updated_at": "2020-11-03T04:15:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "We've got a bunch on jvm 14, but this is the first i've seen with jvm15...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720895100/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720949763",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-720949763",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 720949763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDk0OTc2Mw==",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-03T07:24:29Z",
    "updated_at": "2020-11-03T07:38:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here's one from me on OpenJDK 13/Ubuntu 20.04\r\n```\r\n23:45:49.184 INFO  - Slot Event  *** Slot: 651228, Block:    ... empty, Epoch: 20350, Finalized checkpoint: 15614, Finalized root: b38064..b440, Peers: 80\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f2cef94fa08, pid=229988, tid=230150\r\n#\r\n# JRE version: OpenJDK Runtime Environment (13.0.3+3) (build 13.0.3+3-Ubuntu-1ubuntu2)\r\n# Java VM: OpenJDK 64-Bit Server VM (13.0.3+3-Ubuntu-1ubuntu2, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0x474a08]\r\n#\r\n# Core dump will be written. Default location: Core dumps may be processed with \"/usr/share/apport/apport %p %s %c %d %P %E\" (or dumping to /data/teku_medalla/data/core.229988)\r\n#\r\n# An error report file with more information is saved as:\r\n# /data/teku_medalla/data/hs_err_pid229988.log\r\nCompiled method (n/a) 406960996 20571     n 0       sun.management.ThreadImpl::getThreadInfo1 (native)\r\n total in heap  [0x00007f2cd94c4490,0x00007f2cd94c4820] = 912\r\n relocation     [0x00007f2cd94c45f0,0x00007f2cd94c4620] = 48\r\n main code      [0x00007f2cd94c4620,0x00007f2cd94c4820] = 512\r\n```\r\n\r\nI have the coredump (only 60MB) and can provide it. I also have the *hs_err_pidNNN.log* file.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/720949763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/722803298",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-722803298",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 722803298,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjgwMzI5OA==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-06T04:15:57Z",
    "updated_at": "2020-11-06T04:15:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Copying my comment from #3079 here: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8249871 looks extremely similar - the ThreadLocal.getMap method is called by ThreadLocal.remove and is also small enough to have likely been inlined. Unfortunately its still unresolved.\r\n\r\nAll of these reports are in an area which is accessing thread information in some form which points back to that same bug.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/722803298/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/728506316",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-728506316",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 728506316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODUwNjMxNg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T00:28:39Z",
    "updated_at": "2020-11-17T00:28:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can reproduce the crash when reprocessing through the long period of non-finality on Medalla but only as the java heap becomes almost completely full.  Most likely the node would crash with `OutOfMemoryError` shortly anyway and providing extra memory seems to allow it to continue fine.\r\n\r\nI'd definitely be interested in hearing from anyone seeing this issue more recently while the network is finalizing and/or when the heap isn't full.\r\n\r\nGiven it's slightly different to the other jdk bugs mentioned above, I've logged an issue with Oracle specifically for this which is currently in internal review (internal review ID : 9067712).",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/728506316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/728730705",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-728730705",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 728730705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODczMDcwNQ==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T07:01:07Z",
    "updated_at": "2020-11-17T07:01:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Reproduced on bare metal.  Same medalla sync with -Xmx4g:\r\n```\r\n{\"timestamp\":\"2020-11-17T06:40:45,015\",\"level\":\"INFO\",\"thread\":\"TimeTickChannel-0\",\"class\":\"teku-event-log\",\"message\":\"Sync Event  *** Current slot: 754103, Head slot: 610663, Connected peers: 74\",\"throwable\":\"\"}\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007f70733783cc, pid=5024, tid=5085\r\n#\r\n# JRE version: OpenJDK Runtime Environment 20.3 (14.0.2+12) (build 14.0.2+12)\r\n# Java VM: OpenJDK 64-Bit Server VM 20.3 (14.0.2+12, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\r\n# Problematic frame:\r\n# V  [libjvm.so+0x7053cc]  G1ParScanThreadState::copy_to_survivor_space(G1HeapRegionAttr, oopDesc*, markWord)+0x37c\r\n#\r\n# No core dump will be written. Core dumps have been disabled. To enable core dumping, try \"ulimit -c unlimited\" before starting Java again\r\n#\r\n# An error report file with more information is saved as:\r\n# /opt/teku/teku-develop/hs_err_pid5024.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   https://bugzilla.redhat.com/enter_bug.cgi?product=Fedora%20EPEL&component=java-latest-openjdk&version=epel7\r\n#\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/728730705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1046449494",
    "html_url": "https://github.com/ConsenSys/teku/issues/3125#issuecomment-1046449494",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3125",
    "id": 1046449494,
    "node_id": "IC_kwDOCM9I9M4-X41W",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-21T04:01:19Z",
    "updated_at": "2022-02-21T04:01:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "This hasn't been an ongoing issue and JDK versions have progressed a lot since. Given it only occurred when teku wouldn't be able to continue due to lack of memory anyway I'm going to close this.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1046449494/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

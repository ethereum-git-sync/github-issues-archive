{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/2973",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/2973",
  "id": 721728749,
  "node_id": "MDU6SXNzdWU3MjE3Mjg3NDk=",
  "number": 2973,
  "title": "Key files loading is slow",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-10-14T19:40:33Z",
  "updated_at": "2020-12-15T09:29:41Z",
  "closed_at": "2020-11-27T09:39:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Take 2 minutes 16 seconds to load 300 key files, on a 6 cores Intel i5 9th gen fast machine.\r\nTo make things worse, sync is not parallel, sync won't start until key loading is done. In mainnet, time is money.\r\ncpu consumption is also high during loading.\r\n\r\nCompare with two other major clients:\r\n1. prysm loads instantly\r\n2. lighthouse used to be like teku, but now employes key cache. first time loading takes same time as teku, subsequent loading is instant.\r\n\r\nHope your guys can take a page from prysm and lighthouse teams.\r\n",
  "closed_by": {
    "login": "benjaminion",
    "id": 20796281,
    "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benjaminion",
    "html_url": "https://github.com/benjaminion",
    "followers_url": "https://api.github.com/users/benjaminion/followers",
    "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
    "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
    "organizations_url": "https://api.github.com/users/benjaminion/orgs",
    "repos_url": "https://api.github.com/users/benjaminion/repos",
    "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benjaminion/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/2973/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/708627508",
    "html_url": "https://github.com/ConsenSys/teku/issues/2973#issuecomment-708627508",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973",
    "id": 708627508,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODYyNzUwOA==",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-14T19:58:02Z",
    "updated_at": "2020-10-14T20:26:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @somuchid  - loading speed largely depends on how your keystores were generated. Many generators use `scrypt` format which is very slow and memory hungry, but (for these exact reasons) the most secure. Personally I use `pbkdf2` format keystores which load instantly, but are less secure (for this exact reason). I generated my `pbkdf2` keystores using the [`ethdo`](https://github.com/wealdtech/ethdo) tool with my mnemonic phrase. Both formats are supported by [EIP 2335](https://eips.ethereum.org/EIPS/eip-2335) and Teku supports both.\r\n\r\nAny kind of fast caching could reduce your security. I want security level to be a user choice, so I doubt that we will implement this in Teku. If you want instant loading and are comfortable with the compromise, then I recommend taking a look at converting your keyfiles to `pbkdf2` format.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/708627508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/713891463",
    "html_url": "https://github.com/ConsenSys/teku/issues/2973#issuecomment-713891463",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973",
    "id": 713891463,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzg5MTQ2Mw==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-21T21:36:29Z",
    "updated_at": "2020-10-21T21:36:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Teku is deliberately using the keystore that's supplied to us so that users are in control of the level of security for those files.  It would be good to document a way to re-encode a keystore to use pbkdf2 encryption though if users want them to load faster.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/713891463/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/734742462",
    "html_url": "https://github.com/ConsenSys/teku/issues/2973#issuecomment-734742462",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973",
    "id": 734742462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDc0MjQ2Mg==",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T09:39:14Z",
    "updated_at": "2020-11-27T09:39:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fast-loading `pbkdf2` keystores may be generated via the [ethdo](https://github.com/wealdtech/ethdo) tooling. Teku will continue to load keystores in the form in which they are provided -- `scrypt` (slow) or `pbkdf2` (fast) --, as per EIP 2335, so as to give users control over their own security tradeoffs.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/734742462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/745166146",
    "html_url": "https://github.com/ConsenSys/teku/issues/2973#issuecomment-745166146",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2973",
    "id": 745166146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTE2NjE0Ng==",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-15T09:29:41Z",
    "updated_at": "2020-12-15T09:29:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Further to this, I made a script that (ab)uses `ethdo` to convert existing Launchpad scrypt keystores to pbkdf2 keystores: https://gist.github.com/benjaminion/6d24491abe01a40e728c37f0834f5009",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/745166146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

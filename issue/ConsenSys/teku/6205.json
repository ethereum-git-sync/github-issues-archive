{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/6205",
  "id": 1374687827,
  "node_id": "I_kwDOCM9I9M5R8BJT",
  "number": 6205,
  "title": "Teku + Besu, attestations randomly missed since the merge",
  "user": {
    "login": "totoCZ",
    "id": 5316250,
    "node_id": "MDQ6VXNlcjUzMTYyNTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5316250?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/totoCZ",
    "html_url": "https://github.com/totoCZ",
    "followers_url": "https://api.github.com/users/totoCZ/followers",
    "following_url": "https://api.github.com/users/totoCZ/following{/other_user}",
    "gists_url": "https://api.github.com/users/totoCZ/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/totoCZ/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/totoCZ/subscriptions",
    "organizations_url": "https://api.github.com/users/totoCZ/orgs",
    "repos_url": "https://api.github.com/users/totoCZ/repos",
    "events_url": "https://api.github.com/users/totoCZ/events{/privacy}",
    "received_events_url": "https://api.github.com/users/totoCZ/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 19,
  "created_at": "2022-09-15T15:11:32Z",
  "updated_at": "2022-11-02T00:08:11Z",
  "closed_at": "2022-11-02T00:08:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "besu 22.7.2\r\nteku 22.9.0\r\n\r\n`Sep 15 15:06:00 eth-consensus teku[522445]: 2022-09-15 15:06:00.673 INFO  - Attestation performance: epoch 146952, expected 6, produced 6, included 5 (83%), distance 1 / 1.00 / 1>\r\n`\r\n\r\nteku log https://termbin.com/573u\r\nbesu log https://termbin.com/41ic\r\n\r\nIt's not clear why produced is 6 and included 5.\r\n\r\nThe end result is 80% performance.\r\n\r\n<img width=\"419\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5316250/190440672-dae9efa6-20df-40ae-90e3-ed94c421cc59.png\">\r\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/6205/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1248288724",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1248288724",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1248288724,
    "node_id": "IC_kwDOCM9I9M5KZ1_U",
    "user": {
      "login": "torfbolt",
      "id": 233423,
      "node_id": "MDQ6VXNlcjIzMzQyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/233423?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/torfbolt",
      "html_url": "https://github.com/torfbolt",
      "followers_url": "https://api.github.com/users/torfbolt/followers",
      "following_url": "https://api.github.com/users/torfbolt/following{/other_user}",
      "gists_url": "https://api.github.com/users/torfbolt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/torfbolt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/torfbolt/subscriptions",
      "organizations_url": "https://api.github.com/users/torfbolt/orgs",
      "repos_url": "https://api.github.com/users/torfbolt/repos",
      "events_url": "https://api.github.com/users/torfbolt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/torfbolt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-15T15:49:39Z",
    "updated_at": "2022-09-15T15:49:39Z",
    "author_association": "NONE",
    "body": "Similar symptoms for me with the same client combo. I noticed that there are suspiciously many empty slots in the Teku log:\r\n\r\n> 15:27:15.076 INFO  - Slot Event  *** Slot: 4702634, Block: 4a74296200b1970641ffe28e52972ef1e8a1bd8777db5fb03021e34e00c37cd8, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:27:27.117 INFO  - Slot Event  *** Slot: 4702635, Block:                                                        ... empty, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:27:39.125 INFO  - Slot Event  *** Slot: 4702636, Block: d7b9bf7534cbd83a5d5c2b20822a13e0b65279c8e330aa05902de64d6b298839, Justified: 146956, Finalized: 146955, Peers: 99\r\n15:27:51.117 INFO  - Slot Event  *** Slot: 4702637, Block: d1f59414c48170f16098c6811981aabdc118d4063068118315ba62be3be19b03, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:28:03.123 INFO  - Slot Event  *** Slot: 4702638, Block: ab616d4623d339bbad3961fc18f7c93afa6cfcf3be5c5d1381fc08ee993ae3fe, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:28:15.123 INFO  - Slot Event  *** Slot: 4702639, Block:                                                        ... empty, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:28:27.121 INFO  - Slot Event  *** Slot: 4702640, Block: 774ecc2744e98800144a225101ad7d2128a6c434d99c05bfc561313ff56aa49a, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:28:39.121 INFO  - Slot Event  *** Slot: 4702641, Block: 725c9e3d1f7ea499cfbe575c0f292a9d2c46cf0d8c84f3e6eda8dcb3b917a928, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:28:51.123 INFO  - Slot Event  *** Slot: 4702642, Block:                                                        ... empty, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:29:03.068 INFO  - Slot Event  *** Slot: 4702643, Block: 03c1e6a62000c875bb610dd72de9f5192ac7efa1df73fc72b55667414f6adf86, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:29:15.115 INFO  - Slot Event  *** Slot: 4702644, Block: 47a4440774b1d4d203889bf99ed6466ce4b3221811d99e1cfed9d9c88bb86848, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:29:27.118 INFO  - Slot Event  *** Slot: 4702645, Block:                                                        ... empty, Justified: 146956, Finalized: 146955, Peers: 100\r\n15:29:39.177 INFO  - Slot Event  *** Slot: 4702646, Block: e329fc7107dd79d9922729ef7f2cd60f811275cbcc08724fb7c9542cf087901b, Justified: 146956, Finalized: 146955, Peers: 100\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1248288724/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1248315759",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1248315759",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1248315759,
    "node_id": "IC_kwDOCM9I9M5KZ8lv",
    "user": {
      "login": "patwhite",
      "id": 5015863,
      "node_id": "MDQ6VXNlcjUwMTU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5015863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/patwhite",
      "html_url": "https://github.com/patwhite",
      "followers_url": "https://api.github.com/users/patwhite/followers",
      "following_url": "https://api.github.com/users/patwhite/following{/other_user}",
      "gists_url": "https://api.github.com/users/patwhite/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/patwhite/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/patwhite/subscriptions",
      "organizations_url": "https://api.github.com/users/patwhite/orgs",
      "repos_url": "https://api.github.com/users/patwhite/repos",
      "events_url": "https://api.github.com/users/patwhite/events{/privacy}",
      "received_events_url": "https://api.github.com/users/patwhite/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-15T16:13:31Z",
    "updated_at": "2022-09-15T16:13:31Z",
    "author_association": "NONE",
    "body": "Having the same problem, also seeing execution client offline when connected to Besu. ",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1248315759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1248757327",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1248757327",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1248757327,
    "node_id": "IC_kwDOCM9I9M5KboZP",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-15T23:37:48Z",
    "updated_at": "2022-09-15T23:37:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "For the record, we're actively investigating this.  There are two issues on-going, one is slow responses from Besu which delays importing blocks. The other is slow leveldb performance in Teku which can also delay blocks and can lead to attestations failing to be created as the beacon node falls behind.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1248757327/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1249514592",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1249514592",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1249514592,
    "node_id": "IC_kwDOCM9I9M5KehRg",
    "user": {
      "login": "ronaldjmaas",
      "id": 32280203,
      "node_id": "MDQ6VXNlcjMyMjgwMjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32280203?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ronaldjmaas",
      "html_url": "https://github.com/ronaldjmaas",
      "followers_url": "https://api.github.com/users/ronaldjmaas/followers",
      "following_url": "https://api.github.com/users/ronaldjmaas/following{/other_user}",
      "gists_url": "https://api.github.com/users/ronaldjmaas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ronaldjmaas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ronaldjmaas/subscriptions",
      "organizations_url": "https://api.github.com/users/ronaldjmaas/orgs",
      "repos_url": "https://api.github.com/users/ronaldjmaas/repos",
      "events_url": "https://api.github.com/users/ronaldjmaas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ronaldjmaas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T15:37:55Z",
    "updated_at": "2022-09-16T15:37:55Z",
    "author_association": "NONE",
    "body": "Issue is also reported here:\r\nhttps://github.com/hyperledger/besu/issues/4398",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1249514592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1249596971",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1249596971",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1249596971,
    "node_id": "IC_kwDOCM9I9M5Ke1Yr",
    "user": {
      "login": "iamkoa",
      "id": 303227,
      "node_id": "MDQ6VXNlcjMwMzIyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303227?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamkoa",
      "html_url": "https://github.com/iamkoa",
      "followers_url": "https://api.github.com/users/iamkoa/followers",
      "following_url": "https://api.github.com/users/iamkoa/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamkoa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamkoa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamkoa/subscriptions",
      "organizations_url": "https://api.github.com/users/iamkoa/orgs",
      "repos_url": "https://api.github.com/users/iamkoa/repos",
      "events_url": "https://api.github.com/users/iamkoa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamkoa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-16T17:12:33Z",
    "updated_at": "2022-09-16T17:12:33Z",
    "author_association": "NONE",
    "body": "Having the same issue with **Teku + Geth**. Attestation performance has gone from 95%+ pre-merge to around 80% post-merge.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1249596971/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250027001",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250027001",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250027001,
    "node_id": "IC_kwDOCM9I9M5KgeX5",
    "user": {
      "login": "totoCZ",
      "id": 5316250,
      "node_id": "MDQ6VXNlcjUzMTYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5316250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/totoCZ",
      "html_url": "https://github.com/totoCZ",
      "followers_url": "https://api.github.com/users/totoCZ/followers",
      "following_url": "https://api.github.com/users/totoCZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/totoCZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/totoCZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/totoCZ/subscriptions",
      "organizations_url": "https://api.github.com/users/totoCZ/orgs",
      "repos_url": "https://api.github.com/users/totoCZ/repos",
      "events_url": "https://api.github.com/users/totoCZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/totoCZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-17T08:14:56Z",
    "updated_at": "2022-09-17T08:14:56Z",
    "author_association": "NONE",
    "body": "With the latest teku update the frequency has decreased but still happening once every few hours.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250027001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250051066",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250051066",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250051066,
    "node_id": "IC_kwDOCM9I9M5KgkP6",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-17T11:07:24Z",
    "updated_at": "2022-09-17T11:07:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "> With the latest teku update the frequency has decreased but still happening once every few hours.\r\n\r\nAre you seeing \"Published attestation\" events for the missed attestations and are they published on time (not much more than 4s into the slot the attestation is for)? You can use https://slots.symphonious.net to find the start time of slots.\r\n\r\nThere are a lot of factors involved with getting an attestation included and most of them aren't in your control. The main thing is that teku needs to publish the attestation on time.  Teku and the EL (besu in this case) also need to work together to import blocks quickly so that your attestation has the right head block.  With 22.9.1-RC1 in all our metrics we've seen Teku processing blocks in a timely fashion but being held up by slow responses from the EL - particularly besu which is still investigating some performance issues.\r\n\r\nOne thing that you can do is to enable the block time metrics with `--Xmetrics-block-timing-tracking-enabled`. This should give you a clearer picture of where Teku is spending time when processing blocks. One key information that help us is `execution_payload_result_received` (it is part of the log entry for block timing) and was introduced in 22.9.1-RC1 (previously time waiting on the EL turned up in `transaction_prepared` section). That's time waiting for the EL, beyond the time Teku was processing the block in parallel. If the `execution_payload_result_received` value is high (more than 500ms or so) it is already a clue that the EL is taking too long which will lead to more incorrect head votes, and a higher likelihood that the attestation won't be included even if it is published on time.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250051066/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250060155",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250060155",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250060155,
    "node_id": "IC_kwDOCM9I9M5Kgmd7",
    "user": {
      "login": "totoCZ",
      "id": 5316250,
      "node_id": "MDQ6VXNlcjUzMTYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5316250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/totoCZ",
      "html_url": "https://github.com/totoCZ",
      "followers_url": "https://api.github.com/users/totoCZ/followers",
      "following_url": "https://api.github.com/users/totoCZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/totoCZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/totoCZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/totoCZ/subscriptions",
      "organizations_url": "https://api.github.com/users/totoCZ/orgs",
      "repos_url": "https://api.github.com/users/totoCZ/repos",
      "events_url": "https://api.github.com/users/totoCZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/totoCZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-17T12:11:01Z",
    "updated_at": "2022-09-17T12:11:01Z",
    "author_association": "NONE",
    "body": "Thanks for the update. I will wait for a new besu release and if it's not fixed with that then I'll do more debugging",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250060155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250217155",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250217155",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250217155,
    "node_id": "IC_kwDOCM9I9M5KhMzD",
    "user": {
      "login": "torfbolt",
      "id": 233423,
      "node_id": "MDQ6VXNlcjIzMzQyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/233423?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/torfbolt",
      "html_url": "https://github.com/torfbolt",
      "followers_url": "https://api.github.com/users/torfbolt/followers",
      "following_url": "https://api.github.com/users/torfbolt/following{/other_user}",
      "gists_url": "https://api.github.com/users/torfbolt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/torfbolt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/torfbolt/subscriptions",
      "organizations_url": "https://api.github.com/users/torfbolt/orgs",
      "repos_url": "https://api.github.com/users/torfbolt/repos",
      "events_url": "https://api.github.com/users/torfbolt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/torfbolt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T08:09:13Z",
    "updated_at": "2022-09-18T08:09:13Z",
    "author_association": "NONE",
    "body": "Still seeing a lot of empty slot entries in the log with 22.9.1",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250217155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250230694",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250230694",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250230694,
    "node_id": "IC_kwDOCM9I9M5KhQGm",
    "user": {
      "login": "totoCZ",
      "id": 5316250,
      "node_id": "MDQ6VXNlcjUzMTYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5316250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/totoCZ",
      "html_url": "https://github.com/totoCZ",
      "followers_url": "https://api.github.com/users/totoCZ/followers",
      "following_url": "https://api.github.com/users/totoCZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/totoCZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/totoCZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/totoCZ/subscriptions",
      "organizations_url": "https://api.github.com/users/totoCZ/orgs",
      "repos_url": "https://api.github.com/users/totoCZ/repos",
      "events_url": "https://api.github.com/users/totoCZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/totoCZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T09:37:05Z",
    "updated_at": "2022-09-18T10:01:28Z",
    "author_association": "NONE",
    "body": "```\r\nSep 18 09:44:03 eth-consensus teku[684683]: 2022-09-18 09:44:03.817 WARN  - Late Block Import *** Block: 9ec8c30f1b881288946b1343279f92ece901e54437f63a0f030746a2f57c4574 (4722518) proposer 354772 arrival 1379ms, pre-state_retrieved +27ms, processed +191ms, execution_payload_result_received +3199ms, begin_importing +1ms, transaction_prepared +0ms, transaction_committed +0ms, completed +19ms\r\nSep 18 09:40:15 eth-consensus teku[684683]: 2022-09-18 09:40:15.465 WARN  - Late Block Import *** Block: c69a596582d72f158ec25e93667e5641faa56e20adb74d359a470c7c5244c909 (4722499) proposer 294130 arrival 1615ms, pre-state_retrieved +29ms, processed +209ms, execution_payload_result_received +2591ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +1ms, completed +18ms\r\nSep 18 09:39:51 eth-consensus teku[684683]: 2022-09-18 09:39:51.315 WARN  - Late Block Import *** Block: c5eb6c61c126031706113a6e2da3db9d0e02051cc6ac75c717ebe1050d88cec6 (4722497) proposer 315427 arrival 2836ms, pre-state_retrieved +22ms, processed +167ms, execution_payload_result_received +1260ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +3ms, completed +26ms\r\nSep 18 09:39:41 eth-consensus teku[684683]: 2022-09-18 09:39:41.311 WARN  - Late Block Import *** Block: 11fefc3bbd1ab5da8986b4a5c2b0a2d7429dfa07a9a0d62d2399fc4af93cd0a4 (4722496) proposer 204277 arrival 1943ms, pre-state_retrieved +28ms, processed +250ms, execution_payload_result_received +4064ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +0ms, completed +24ms\r\nSep 18 09:39:04 eth-consensus teku[684683]: 2022-09-18 09:39:04.049 WARN  - Late Block Import *** Block: 8185c339528b5fe442936ce15cf237bd1a4b970d26a7424a16d2f573b55f021d (4722493) proposer 11215 arrival 1115ms, pre-state_retrieved +31ms, processed +139ms, execution_payload_result_received +3741ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +1ms, completed +20ms\r\nSep 18 09:37:15 eth-consensus teku[684683]: 2022-09-18 09:37:15.796 WARN  - Late Block Import *** Block: 4e53d6c09f8d613463a0c1dcb3aa09a8bcd32d8ec70be9de214cbeafe2a83bcf (4722484) proposer 16907 arrival 1489ms, pre-state_retrieved +34ms, processed +291ms, execution_payload_result_received +2943ms, begin_importing +1ms, transaction_prepared +0ms, transaction_committed +1ms, completed +37ms\r\nSep 18 09:33:15 eth-consensus teku[684683]: 2022-09-18 09:33:15.947 WARN  - Late Block Import *** Block: 9f8f6cc247e702b1ddff49e871a0f5eb90d0787e7ec3c1337c39387e2e91e628 (4722464) proposer 273783 arrival 2323ms, pre-state_retrieved +22ms, processed +206ms, execution_payload_result_received +2373ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +0ms, completed +21ms\r\nSep 18 09:30:04 eth-consensus teku[684683]: 2022-09-18 09:30:04.153 WARN  - Late Block Import *** Block: de875ee4fb69a5810e8d1f2ef796614ac89c58c57cfdd05c0a6eb86ba4b180da (4722448) proposer 10461 arrival 2474ms, pre-state_retrieved +22ms, processed +212ms, execution_payload_result_received +2416ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +1ms, completed +26ms\r\n```\r\n\r\n(Arrival in 2s is normal?)",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250230694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250237184",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250237184",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250237184,
    "node_id": "IC_kwDOCM9I9M5KhRsA",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T10:17:39Z",
    "updated_at": "2022-09-18T10:17:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "@torfbolt That can be caused by quite a lot of factors. I'd suggest enabling the late block timing logs as described in https://github.com/ConsenSys/teku/releases/tag/22.9.1 so you can see why the block is late importing.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250237184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250238381",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250238381",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250238381,
    "node_id": "IC_kwDOCM9I9M5KhR-t",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T10:25:23Z",
    "updated_at": "2022-09-18T10:25:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@totocz A 2 second arrival is relatively slow - ideally it should be under 1s, but it's not generally the end of the world.  The main problem with those numbers is `execution_payload_result_received` which is the time that Teku is waiting on besu to respond and that's what's caused those blocks to complete importing after the 4s mark.  Some of them would have imported late even if they'd been received quickly.\r\n\r\nTo give an idea of block arrival times.  In the last day, 11% of blocks were received within 500ms, 50% of blocks were received between 500ms and 1s, 25% between 1s and 1.5s and 8% between 1.5s and 2s.  Then about 5% of blocks were received later than that.\r\n\r\nSo with the time besu is taking most blocks would probably be imported just in time, but quite frequently blocks would be imported late and you'd see an empty slot message when really the block was received with enough time that it should have been imported in time. This is the common pattern we're seeing with 22.9.1 where it's the execution client that is now dominating the block import time and there's not much more Teku can do to improve things.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250238381/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250239029",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250239029",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250239029,
    "node_id": "IC_kwDOCM9I9M5KhSI1",
    "user": {
      "login": "totoCZ",
      "id": 5316250,
      "node_id": "MDQ6VXNlcjUzMTYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5316250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/totoCZ",
      "html_url": "https://github.com/totoCZ",
      "followers_url": "https://api.github.com/users/totoCZ/followers",
      "following_url": "https://api.github.com/users/totoCZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/totoCZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/totoCZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/totoCZ/subscriptions",
      "organizations_url": "https://api.github.com/users/totoCZ/orgs",
      "repos_url": "https://api.github.com/users/totoCZ/repos",
      "events_url": "https://api.github.com/users/totoCZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/totoCZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T10:29:49Z",
    "updated_at": "2022-09-18T10:29:49Z",
    "author_association": "NONE",
    "body": "Besides besu, is there anything that can be done to further speed up the arrivals? This is a powerful datacenter node in the UK with 100 peers. It's not like there should be any limit on my machine. Does it fully depend on p2p network conditions?",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250239029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250240582",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1250240582",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1250240582,
    "node_id": "IC_kwDOCM9I9M5KhShG",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-18T10:37:24Z",
    "updated_at": "2022-09-18T10:37:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "The late arrivals are almost always because the block producer (someone else's validator) was slow in producing the block. There's nothing you can do about that.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1250240582/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1251060612",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1251060612",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1251060612,
    "node_id": "IC_kwDOCM9I9M5KkauE",
    "user": {
      "login": "scheer88",
      "id": 19706465,
      "node_id": "MDQ6VXNlcjE5NzA2NDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19706465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/scheer88",
      "html_url": "https://github.com/scheer88",
      "followers_url": "https://api.github.com/users/scheer88/followers",
      "following_url": "https://api.github.com/users/scheer88/following{/other_user}",
      "gists_url": "https://api.github.com/users/scheer88/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/scheer88/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/scheer88/subscriptions",
      "organizations_url": "https://api.github.com/users/scheer88/orgs",
      "repos_url": "https://api.github.com/users/scheer88/repos",
      "events_url": "https://api.github.com/users/scheer88/events{/privacy}",
      "received_events_url": "https://api.github.com/users/scheer88/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T13:59:55Z",
    "updated_at": "2022-09-19T13:59:55Z",
    "author_association": "NONE",
    "body": "I also enabled `--Xmetrics-block-timing-tracking-enabled` and logged the `Late Block Import` lines for the last 2 hours:\r\n\r\n`execution_payload_result_received` is higher than `500ms`: \r\n`1073ms` `925ms` `1616ms` `1125ms` `1104ms` `1195ms` `1561ms` `1243ms` `675ms` `450ms` `1341ms` \r\n\r\nand `arrival` is also higher than `1000ms`: \r\n`4625ms` `3898ms` `3898ms` `2378ms` `6597ms` `3307ms` `8275ms` `3690ms` `4132ms` `3356ms` `3884ms` `4222ms`\r\n\r\n## Full Log:\r\n``` bash\r\nSep 19 13:47:41 eth-server teku[387521]: 13:47:41.016 WARN  - Late Block Import *** Block: b1c24fabb4765e1abf2b9c89928dc206737583e2bfa8eca1e78000daf5ecba0a (4730336) proposer 134914 arrival 4625ms, pre-state_retrieved +7ms, processed +305ms, execution_payload_result_received +1073ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +6ms\r\nSep 19 14:40:39 eth-server teku[387521]: 14:40:39.931 WARN  - Late Block Import *** Block: 084df768999642371b46394047fdcc51a5f8380928e8d7df551bfa07be1a102c (4730601) proposer 6347 arrival 3898ms, pre-state_retrieved +7ms, processed +95ms, execution_payload_result_received +925ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +6ms\r\nSep 19 14:47:15 eth-server teku[387521]: 14:47:15.186 WARN  - Late Block Import *** Block: 965030340b20acc7f326f32a5ab5f42179d1e158a002bfc15dde2ce1e9d6c671 (4730634) proposer 268358 arrival 2378ms, pre-state_retrieved +9ms, processed +172ms, execution_payload_result_received +1616ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +0ms, completed +9ms\r\nSep 19 14:50:42 eth-server teku[387521]: 14:50:42.801 WARN  - Late Block Import *** Block: 702fde89e7a4597e1faad53fce7670c680e5ac333150953d9c20b18bec6fd71b (4730651) proposer 96283 arrival 6597ms, pre-state_retrieved +8ms, processed +63ms, execution_payload_result_received +1125ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +8ms\r\nSep 19 14:58:03 eth-server teku[387521]: 14:58:03.526 WARN  - Late Block Import *** Block: 37be8af64f2685017e6230ff9d6a1ff67736a745809ee631d0ce341c3c68eb5a (4730688) proposer 332615 arrival 3307ms, pre-state_retrieved +5ms, processed +98ms, execution_payload_result_received +1104ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +12ms\r\nSep 19 15:09:08 eth-server teku[387521]: 15:09:08.588 WARN  - Late Block Import *** Block: 074e3791a628b74eca1d29073e998a72567781ac78189567708c92c0d0b7e279 (4730743) proposer 266432 arrival 8275ms, pre-state_retrieved +6ms, processed +107ms, execution_payload_result_received +1195ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +0ms, completed +4ms\r\nSep 19 15:17:16 eth-server teku[387521]: 15:17:16.371 WARN  - Late Block Import *** Block: a0904112478161a75cb3b18e24bb7b9cafefb71dd706a30f23f582665dfb6ece (4730784) proposer 411853 arrival 3690ms, pre-state_retrieved +9ms, processed +102ms, execution_payload_result_received +1561ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +1ms, completed +8ms\r\nSep 19 15:19:04 eth-server teku[387521]: 15:19:04.531 WARN  - Late Block Import *** Block: f9c26cb136d3a712583180beed111cf7986be16e87946a611ace0b9bf43efca9 (4730793) proposer 316624 arrival 4132ms, pre-state_retrieved +9ms, processed +137ms, execution_payload_result_received +1243ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +10ms\r\nSep 19 15:24:27 eth-server teku[387521]: 15:24:27.138 WARN  - Late Block Import *** Block: e09905215980d1d539c49018878efc6b4c57a87005424a08be0cdb9066d55db4 (4730820) proposer 423210 arrival 3356ms, pre-state_retrieved +8ms, processed +91ms, execution_payload_result_received +675ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +0ms, completed +7ms\r\nSep 19 15:27:15 eth-server teku[387521]: 15:27:15.378 WARN  - Late Block Import *** Block: 8adbd498f02afb0fc001c8dd81813206c9d48b95b711a3df90ffb2059841ca2c (4730834) proposer 405111 arrival 3884ms, pre-state_retrieved +5ms, processed +36ms, execution_payload_result_received +450ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +3ms\r\nSep 19 15:29:52 eth-server teku[387521]: 15:29:52.646 WARN  - Late Block Import *** Block: 6fb6c3eed319d1fa0741de65cc9c182135308cf1073fc94de85fae500b2298cf (4730847) proposer 175686 arrival 4222ms, pre-state_retrieved +7ms, processed +66ms, execution_payload_result_received +1341ms, begin_importing +0ms, transaction_prepared +1ms, transaction_committed +0ms, completed +9ms\r\n\r\n```\r\n\r\nI did not have missing attestations during that time, however once in a while the `distance` in the `Attestation performance` Info looks as follows: \r\n`distance 1 / 1.17 / 2`\r\n\r\nMaybe this information helps with debugging.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1251060612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1257025284",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1257025284",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1257025284,
    "node_id": "IC_kwDOCM9I9M5K7K8E",
    "user": {
      "login": "totoCZ",
      "id": 5316250,
      "node_id": "MDQ6VXNlcjUzMTYyNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5316250?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/totoCZ",
      "html_url": "https://github.com/totoCZ",
      "followers_url": "https://api.github.com/users/totoCZ/followers",
      "following_url": "https://api.github.com/users/totoCZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/totoCZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/totoCZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/totoCZ/subscriptions",
      "organizations_url": "https://api.github.com/users/totoCZ/orgs",
      "repos_url": "https://api.github.com/users/totoCZ/repos",
      "events_url": "https://api.github.com/users/totoCZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/totoCZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-24T17:33:54Z",
    "updated_at": "2022-09-24T17:33:54Z",
    "author_association": "NONE",
    "body": "besu 22.7.3 https://termbin.com/fmng\r\nI guess now we need to wait for https://github.com/hyperledger/besu/pull/4409 ?\r\nFeel free to close this here if you want, I can move the issue over to besu",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1257025284/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1273659018",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1273659018",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1273659018,
    "node_id": "IC_kwDOCM9I9M5L6n6K",
    "user": {
      "login": "AXDevTimothy",
      "id": 106777343,
      "node_id": "U_kgDOBl1K_w",
      "avatar_url": "https://avatars.githubusercontent.com/u/106777343?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AXDevTimothy",
      "html_url": "https://github.com/AXDevTimothy",
      "followers_url": "https://api.github.com/users/AXDevTimothy/followers",
      "following_url": "https://api.github.com/users/AXDevTimothy/following{/other_user}",
      "gists_url": "https://api.github.com/users/AXDevTimothy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AXDevTimothy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AXDevTimothy/subscriptions",
      "organizations_url": "https://api.github.com/users/AXDevTimothy/orgs",
      "repos_url": "https://api.github.com/users/AXDevTimothy/repos",
      "events_url": "https://api.github.com/users/AXDevTimothy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AXDevTimothy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-10T18:10:05Z",
    "updated_at": "2022-10-10T18:10:05Z",
    "author_association": "NONE",
    "body": "> Having the same issue with **Teku + Geth**. Attestation performance has gone from 95%+ pre-merge to around 80% post-merge.\r\n\r\nSame here. I hardly ever missed an attestation before the merge.  Now missing them every hour almost. \r\n![image](https://user-images.githubusercontent.com/106777343/194928229-c30f7b1e-118c-4183-8ecd-9fa666bdb16e.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1273659018/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1279827907",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1279827907",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1279827907,
    "node_id": "IC_kwDOCM9I9M5MSJ_D",
    "user": {
      "login": "kiss81",
      "id": 61309045,
      "node_id": "MDQ6VXNlcjYxMzA5MDQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/61309045?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kiss81",
      "html_url": "https://github.com/kiss81",
      "followers_url": "https://api.github.com/users/kiss81/followers",
      "following_url": "https://api.github.com/users/kiss81/following{/other_user}",
      "gists_url": "https://api.github.com/users/kiss81/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kiss81/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kiss81/subscriptions",
      "organizations_url": "https://api.github.com/users/kiss81/orgs",
      "repos_url": "https://api.github.com/users/kiss81/repos",
      "events_url": "https://api.github.com/users/kiss81/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kiss81/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-15T20:35:15Z",
    "updated_at": "2022-10-15T20:46:49Z",
    "author_association": "NONE",
    "body": "I miss one as well every 4 hours on average with besu + teku. I also see some attested epoch's that does give a negative award (those are not missed!)\r\n![image](https://user-images.githubusercontent.com/61309045/196006505-c65742ce-908d-43c5-b130-4f98b8a76961.png)\r\n\r\n@totoCZ \r\nhttps://github.com/hyperledger/besu/pull/4409\r\nseems to be merged, so will be in the next besu release is my guess",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1279827907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1299377885",
    "html_url": "https://github.com/ConsenSys/teku/issues/6205#issuecomment-1299377885",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6205",
    "id": 1299377885,
    "node_id": "IC_kwDOCM9I9M5Ncu7d",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T00:08:11Z",
    "updated_at": "2022-11-02T00:08:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm going to close this one as we've ironed out the initial performance issues with Teku a while back and what's left just boils down to besu import times which they're working on.\n\nFor anyone who comes across this issue in the future, https://www.symphonious.net/2022/09/25/understanding-attestation-misses/ has a bunch of details for how to investigate why attestations were missed.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1299377885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

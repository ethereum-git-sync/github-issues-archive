{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/1855",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/1855/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/1855/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/1855/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/1855",
  "id": 623003523,
  "node_id": "MDU6SXNzdWU2MjMwMDM1MjM=",
  "number": 1855,
  "title": "Debug initialization of gossip network",
  "user": {
    "login": "arash009",
    "id": 33149995,
    "node_id": "MDQ6VXNlcjMzMTQ5OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/33149995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/arash009",
    "html_url": "https://github.com/arash009",
    "followers_url": "https://api.github.com/users/arash009/followers",
    "following_url": "https://api.github.com/users/arash009/following{/other_user}",
    "gists_url": "https://api.github.com/users/arash009/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/arash009/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arash009/subscriptions",
    "organizations_url": "https://api.github.com/users/arash009/orgs",
    "repos_url": "https://api.github.com/users/arash009/repos",
    "events_url": "https://api.github.com/users/arash009/events{/privacy}",
    "received_events_url": "https://api.github.com/users/arash009/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2079826019,
      "node_id": "MDU6TGFiZWwyMDc5ODI2MDE5",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/TeamCentaur",
      "name": "TeamCentaur",
      "color": "d4c5f9",
      "default": false,
      "description": "Under active development by TeamCentaur @PegaSys"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-05-22T07:09:06Z",
  "updated_at": "2020-08-26T05:54:54Z",
  "closed_at": "2020-08-26T05:54:54Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When writing acceptance tests for block gossiping, I had to add a call to Thread.sleep() in order for the gossiping to work.  Otherwise, attempts to gossip would fail because the gossip layer didn't have any peers available for gossiping.  We should investigate why this is required and see if there's a way to remove the extra wait: https://github.com/PegaSysEng/artemis/pull/986/files#diff-66d1036b3a68c67245aaaaa19fb588efR74\n\nOutput when the wait is removed:\n\n```\n2019-11-06 17:28:03.721-05:00 | P2PService-event-thread-0 | TRACE  | GossipTopicHandler | Failed to gossip message on Topic(topic=/eth2/beacon_block/ssz)\njava.util.concurrent.CompletionException: io.libp2p.etc.types.NothingToCompleteException\n\tat java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:367) ~[?:?]\n\tat java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:376) ~[?:?]\n\tat java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1074) ~[?:?]\n\tat java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506) [?:?]\n\tat java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1705) [?:?]\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?]\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\n\tat java.lang.Thread.run(Thread.java:834) [?:?]\nCaused by: io.libp2p.etc.types.NothingToCompleteException\n\tat io.libp2p.etc.types.AsyncExtKt.anyComplete(AsyncExt.kt:62) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat io.libp2p.etc.types.AsyncExtKt.anyComplete(AsyncExt.kt:59) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat io.libp2p.pubsub.gossip.GossipRouter.broadcastOutbound(GossipRouter.kt:123) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat io.libp2p.pubsub.AbstractRouter$publish$1.invoke(AbstractRouter.kt:48) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat io.libp2p.pubsub.AbstractRouter$publish$1.invoke(AbstractRouter.kt:24) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat io.libp2p.etc.types.AsyncExtKt$submitAsync$1.get(AsyncExt.kt:51) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat io.libp2p.etc.types.AsyncExtKt$submitAsync$1.get(AsyncExt.kt) ~[jvm-libp2p-minimal-0.1.0-RELEASE.jar:?]\n\tat java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700) ~[?:?]\n\t... 6 more\n```\n\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/1855/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/1855/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/680672724",
    "html_url": "https://github.com/ConsenSys/teku/issues/1855#issuecomment-680672724",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1855",
    "id": 680672724,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDY3MjcyNA==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-26T05:54:54Z",
    "updated_at": "2020-08-26T05:54:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is required because jvm-libp2p performs a number of operations asynchronously, including sending messages to subscribe.  The jvm-libp2p API doesn't currently provide a way to track when the operation is actually complete.\n\nGiven the amount of work involved in making such tracking possible, and the limited number of tests that have been affected by this, closing this as won't fix.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/680672724/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

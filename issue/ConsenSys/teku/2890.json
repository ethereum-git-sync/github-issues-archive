{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/2890",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/2890",
  "id": 715520059,
  "node_id": "MDU6SXNzdWU3MTU1MjAwNTk=",
  "number": 2890,
  "title": "Teku node not syncing",
  "user": {
    "login": "lufa23",
    "id": 67415638,
    "node_id": "MDQ6VXNlcjY3NDE1NjM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/67415638?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lufa23",
    "html_url": "https://github.com/lufa23",
    "followers_url": "https://api.github.com/users/lufa23/followers",
    "following_url": "https://api.github.com/users/lufa23/following{/other_user}",
    "gists_url": "https://api.github.com/users/lufa23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lufa23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lufa23/subscriptions",
    "organizations_url": "https://api.github.com/users/lufa23/orgs",
    "repos_url": "https://api.github.com/users/lufa23/repos",
    "events_url": "https://api.github.com/users/lufa23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lufa23/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-10-06T09:52:51Z",
  "updated_at": "2020-10-16T12:33:59Z",
  "closed_at": "2020-10-16T12:33:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, i started a Teku node with:\r\n\r\nteku --network=medalla --metrics-enabled --rest-api-enabled --rest-api-docs-enabled\r\n\r\nin order to gather some metrics.\r\n\r\nAnyway, the node does not seem to be syncing\r\n![Screenshot 2020-10-06 at 11 52 16](https://user-images.githubusercontent.com/67415638/95186561-68532600-07ca-11eb-98bc-d3b4dd70b831.png)\r\n\r\nHow can i solve this issue?\r\nThanks",
  "closed_by": {
    "login": "lufa23",
    "id": 67415638,
    "node_id": "MDQ6VXNlcjY3NDE1NjM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/67415638?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lufa23",
    "html_url": "https://github.com/lufa23",
    "followers_url": "https://api.github.com/users/lufa23/followers",
    "following_url": "https://api.github.com/users/lufa23/following{/other_user}",
    "gists_url": "https://api.github.com/users/lufa23/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lufa23/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lufa23/subscriptions",
    "organizations_url": "https://api.github.com/users/lufa23/orgs",
    "repos_url": "https://api.github.com/users/lufa23/repos",
    "events_url": "https://api.github.com/users/lufa23/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lufa23/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/2890/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704182433",
    "html_url": "https://github.com/ConsenSys/teku/issues/2890#issuecomment-704182433",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890",
    "id": 704182433,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDE4MjQzMw==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-06T10:36:55Z",
    "updated_at": "2020-10-06T10:36:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi,\nThe node isn't syncing because it can't find any peers. It's hard to know why not from the small snippet of log. If you could include the full log content that would be very useful.\n\nAlso, what version of Teku are you running? Is it possible that something else is using port 9000 - often this is a Lighthouse instance on the same machine?\n\nhttps://docs.google.com/document/d/1YWi4HqkGqs9PQA67agHON4PciPKO39mlZwH_3AKg68I/edit?usp=sharing includes some useful trouble shooting tips for common issues, including a link to a guide to open incoming ports which can help to find more peers.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704182433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704227446",
    "html_url": "https://github.com/ConsenSys/teku/issues/2890#issuecomment-704227446",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890",
    "id": 704227446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDIyNzQ0Ng==",
    "user": {
      "login": "lufa23",
      "id": 67415638,
      "node_id": "MDQ6VXNlcjY3NDE1NjM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/67415638?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lufa23",
      "html_url": "https://github.com/lufa23",
      "followers_url": "https://api.github.com/users/lufa23/followers",
      "following_url": "https://api.github.com/users/lufa23/following{/other_user}",
      "gists_url": "https://api.github.com/users/lufa23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lufa23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lufa23/subscriptions",
      "organizations_url": "https://api.github.com/users/lufa23/orgs",
      "repos_url": "https://api.github.com/users/lufa23/repos",
      "events_url": "https://api.github.com/users/lufa23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lufa23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-06T12:14:03Z",
    "updated_at": "2020-10-13T14:11:40Z",
    "author_association": "NONE",
    "body": "Here it is:\r\n\r\nTeku version: `teku/v0.12.9-dev-4c2a25f7/osx-x86_64/oracle-java-13`\r\nWith `lsof -i :9000` i made sure there are no processes running on that port.\r\nHere the whole log i got:\r\n<img width=\"1668\" alt=\"Screenshot 2020-10-13 at 16 07 35\" src=\"https://user-images.githubusercontent.com/67415638/95872119-c05fce80-0d6e-11eb-86e3-25b109ff0587.png\">\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704227446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704718137",
    "html_url": "https://github.com/ConsenSys/teku/issues/2890#issuecomment-704718137",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890",
    "id": 704718137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDcxODEzNw==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-07T06:13:29Z",
    "updated_at": "2020-10-07T06:13:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "While teku is running, just for sanity, maybe check what's on 9000 and 5051...\r\n```\r\nsudo lsof -i :9000 -i :5051\r\n```\r\n\r\n5051 is the default rest port, should be accessible as localhost generally speaking:\r\n\r\n```\r\ncurl -X GET \"http://localhost:5051/eth/v1/node/version\" -H \"accept: application/json\"\r\n```\r\n\r\nIs the `listening for connections on: /ip4/192.168.22.152/tcp/9000` the expected ip address? Potentially you could open up port 9000 from your firewall if you have access, then other peers should be able to connect to you. Having said that, you should be able to connect outwards, so i would have expected your peers to go beyond 0 even if you are just connecting to peers and they're not able to request a connection to you...\r\n\r\nIf none of that sheds any light, it might be worth clearing out log files, and just running a trace session for a short time (a couple of minutes would be plenty)...\r\n\r\n```\r\nrm -f ~/Library/teku/logs/teku.log\r\nteku --network mandella --metrics-enabled --rest-api-enabled --rest-api-docs-enabled --logging trace\r\n```\r\n\r\nAnd if we could grab a copy of that trace file (`~/Library/teku/logs/teku.log`) as a gist, then we can dig further into the problem hopefully with a bit of an idea from the trace.\r\n\r\nSorry, these are mostly vague, because I'm just trying to get a better context of what might be going on...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704718137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704735312",
    "html_url": "https://github.com/ConsenSys/teku/issues/2890#issuecomment-704735312",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890",
    "id": 704735312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNDczNTMxMg==",
    "user": {
      "login": "lufa23",
      "id": 67415638,
      "node_id": "MDQ6VXNlcjY3NDE1NjM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/67415638?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lufa23",
      "html_url": "https://github.com/lufa23",
      "followers_url": "https://api.github.com/users/lufa23/followers",
      "following_url": "https://api.github.com/users/lufa23/following{/other_user}",
      "gists_url": "https://api.github.com/users/lufa23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lufa23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lufa23/subscriptions",
      "organizations_url": "https://api.github.com/users/lufa23/orgs",
      "repos_url": "https://api.github.com/users/lufa23/repos",
      "events_url": "https://api.github.com/users/lufa23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lufa23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-07T06:54:26Z",
    "updated_at": "2020-10-07T06:54:26Z",
    "author_association": "NONE",
    "body": "thanks, i have just run Teku connected to another WIFI network, and it is currently syncing with peers. So i guess it is a firewall/ IP problem. I will try your suggestions as soon as i have access to the other facility and see how to fix it",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/704735312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/705164952",
    "html_url": "https://github.com/ConsenSys/teku/issues/2890#issuecomment-705164952",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2890",
    "id": 705164952,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNTE2NDk1Mg==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-07T20:06:06Z",
    "updated_at": "2020-10-07T20:12:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "It's also possible for networks to block p2p traffic, which sounds like a plausible explanation if the same setup is working now, but it's only a 'possible' explanation. Just mentioning here as another possible thing to investigate if you have access to the sites firewall, or know the admin.\r\n\r\nSome ISP's also block it, but i'm not 100% sure how you'd verify that it's an ISP unless it's on their site. Just another possibility if it works on the other network.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/705164952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

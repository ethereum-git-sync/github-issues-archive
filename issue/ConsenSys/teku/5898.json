{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/5898",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/5898/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/5898/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/5898/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/5898",
  "id": 1296073037,
  "node_id": "I_kwDOCM9I9M5NQIFN",
  "number": 5898,
  "title": "Builder API Compatability with Distributed Validators - Validator Registration",
  "user": {
    "login": "ciaranmcveigh5",
    "id": 15610084,
    "node_id": "MDQ6VXNlcjE1NjEwMDg0",
    "avatar_url": "https://avatars.githubusercontent.com/u/15610084?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ciaranmcveigh5",
    "html_url": "https://github.com/ciaranmcveigh5",
    "followers_url": "https://api.github.com/users/ciaranmcveigh5/followers",
    "following_url": "https://api.github.com/users/ciaranmcveigh5/following{/other_user}",
    "gists_url": "https://api.github.com/users/ciaranmcveigh5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ciaranmcveigh5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ciaranmcveigh5/subscriptions",
    "organizations_url": "https://api.github.com/users/ciaranmcveigh5/orgs",
    "repos_url": "https://api.github.com/users/ciaranmcveigh5/repos",
    "events_url": "https://api.github.com/users/ciaranmcveigh5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ciaranmcveigh5/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-07-06T16:14:32Z",
  "updated_at": "2022-07-14T09:41:52Z",
  "closed_at": "2022-07-14T09:41:52Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Distributed Validators Require Signed Contents To Be The Same - ValidatorRegistrationV1\r\n\r\nThe current implementation of the validator registration isn't compatible with a distributed validator\r\n\r\nFor distributed validators it's important that the signed contents are the same across all \"co-validators\"  \r\n\r\nTeku currently uses timeProvider.getTimeInSeconds() for the Timestamp in ValidatorRegistrationV1, time.now in milliseconds are likely to never match\r\n\r\n- The simplest solution would be an --X param that effectively hardcodes the timestamp, this could be done via an actual timestamp, a slot number or an epoch number, in this situation it's up to the co-validators to co-ordinate to ensure they all have the same config set for \"timestamp\"\r\n- Since Teku uses the first signature (with the hardcoded timestamp) for any subsequent re-registrations the distributed validator will simply need to update their registration config which would include timestamp to register with new information on a relay\r\n\r\nsee here for discussion in discord https://discord.com/channels/697535391594446898/697539289042649190/994236320799002705\r\n\r\ncc @tbenr     ",
  "closed_by": {
    "login": "tbenr",
    "id": 15999009,
    "node_id": "MDQ6VXNlcjE1OTk5MDA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/15999009?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tbenr",
    "html_url": "https://github.com/tbenr",
    "followers_url": "https://api.github.com/users/tbenr/followers",
    "following_url": "https://api.github.com/users/tbenr/following{/other_user}",
    "gists_url": "https://api.github.com/users/tbenr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tbenr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tbenr/subscriptions",
    "organizations_url": "https://api.github.com/users/tbenr/orgs",
    "repos_url": "https://api.github.com/users/tbenr/repos",
    "events_url": "https://api.github.com/users/tbenr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tbenr/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/5898/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/5898/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1176564140",
    "html_url": "https://github.com/ConsenSys/teku/issues/5898#issuecomment-1176564140",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/5898",
    "id": 1176564140,
    "node_id": "IC_kwDOCM9I9M5GIPGs",
    "user": {
      "login": "corverroos",
      "id": 29249923,
      "node_id": "MDQ6VXNlcjI5MjQ5OTIz",
      "avatar_url": "https://avatars.githubusercontent.com/u/29249923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/corverroos",
      "html_url": "https://github.com/corverroos",
      "followers_url": "https://api.github.com/users/corverroos/followers",
      "following_url": "https://api.github.com/users/corverroos/following{/other_user}",
      "gists_url": "https://api.github.com/users/corverroos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/corverroos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/corverroos/subscriptions",
      "organizations_url": "https://api.github.com/users/corverroos/orgs",
      "repos_url": "https://api.github.com/users/corverroos/repos",
      "events_url": "https://api.github.com/users/corverroos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/corverroos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T18:54:30Z",
    "updated_at": "2022-07-06T18:55:02Z",
    "author_association": "NONE",
    "body": "A hardcoded flag with a \"random\" timestamp might be the easiest solution to implement, but it moves the complexity of co-ordinating and configuring to operators of the distributed validator.\r\n\r\nSince periodic registrations are done at the start of every epoch, the epoch start time could also be used. This reduces operation and coordination overhead at the cost of increased implementation complexity and one additional signature per validator per epoch. ",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1176564140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

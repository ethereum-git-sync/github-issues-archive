{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/6089",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/6089",
  "id": 1342274284,
  "node_id": "I_kwDOCM9I9M5QAXrs",
  "number": 6089,
  "title": "Invalid aggregates being propagated",
  "user": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-08-17T20:44:13Z",
  "updated_at": "2022-08-24T00:12:19Z",
  "closed_at": "2022-08-24T00:12:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nFrom Nishant in EF discord #interop channel:\r\nhey , I am occasionally seeing teku propagate aggregates with bad signatures on goerli:\r\n```\r\nDEBUG sync: Gossip message was rejected agent=teku/teku/v22.8.0/linux-x86_64/-eclipseadoptium-openjdk64bitservervm-java-17 error=Verification of aggregate failed gossip score=2.8162448517379155 multiaddress=/ip4/x/tcp/x peer id=x topic=/eth2/c2ce3aa8/beacon_aggregate_and_proof/ssz_snappy\r\n\r\nDEBUG sync: Gossip message was rejected agent=teku/teku/v22.8.0/linux-x86_64/-eclipseadoptium-openjdk64bitservervm-java-17 error=Verification of aggregate failed gossip score=0 multiaddress=/ip4/x/tcp/x peer id=x topic=/eth2/c2ce3aa8/beacon_aggregate_and_proof/ssz_snappy\r\n```\r\n\r\nSome examples:\r\n```\r\n0x640000008c66bdb91e25538762b89e36f4a9ae83d3f2f0588532711e6123eed2ac76d7c68987aca64d0752b76bfba9f05ec23ee00aa28ebebdaf7d8324d77fcf3dc525edc4861c6439a68ac4d8b642b4eb5f9482f9134270265cd6940ce37f0b1047359cc2af0500000000006c000000b60629a48dec2ee8d0df9717a9393aa559969741f20722e650e19bbd6cac69531fac9b08a689c7bb417d69369616c10d11cb02aaee77ce66f4b5e37e2c6e5f4d8e1a308969114ad7256cfbab63c391838693773414bc2f885737928d4d468568e4000000dc3f3800000000003900000000000000fad41da26f403049ba7b28d97188302fcf6e214f7aa06f79aa9b41af9ab05cadfdc101000000000078145592ab260152c7c4842f56cb9dd2bb3767373084cf31bdb991fa8fe71978fec1010000000000987d5e6ca9b597658175410f43ae17d5b102d6a685b66fce1a55121b5d95506a8ed8904d07f8f7c453672a6f9782e9c2f8d1923905fe46f2f3f8538a901aeb46484062af82d6925e9b745c22a140628408f96bc717222593f9d409fce44b15ee1eb4564842a324375ac65b3e46fe403d8c26969d7014a089e213290113887771dffaedf5f36deffeebff7fc71cfff2fdf9eefbe9df1f75\r\n\r\n0x64000000afd7a17409d65f1bf8f05d450a5ec1d88721135a99450c7615752c9efe1d6fb25d7a5d4e4f369e46ba0d8eee33854dbe143f1271b917aa91946352a96f7014c976ec19345b982973e6d54cfd6804dc866b49fe42a86e3565fd331207d2af0256c5af0500000000006c00000090335c51c4691c54f0a727e09c415b344a646f59ddda11164a34e421158da8a0ed442f3c81217dbaa0c1974d76e3eef503cc2bd1285e72d814d2f07fbf2858ce82b9683850de268b2e52ce92251ce3b7cf969ebc8d3971366cc04165abe190a5e4000000dc3f3800000000002900000000000000fad41da26f403049ba7b28d97188302fcf6e214f7aa06f79aa9b41af9ab05cadfdc101000000000078145592ab260152c7c4842f56cb9dd2bb3767373084cf31bdb991fa8fe71978fec1010000000000987d5e6ca9b597658175410f43ae17d5b102d6a685b66fce1a55121b5d95506ab43a7263a0660f6b56bf3ec2ba80e911eb637e5a2f8b7af86b0b6478d30a66451e459b2057bde0d4053f275cf65fbb650cfbb556b1beafece3b28f0eda6a8311a3de2761de719156a792a9bbd840a557e1345e79c33df9f9ce45e37bd98ad6f50000000000000000404000000000000000000002000080\r\n```",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/6089/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1220291205",
    "html_url": "https://github.com/ConsenSys/teku/issues/6089#issuecomment-1220291205",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089",
    "id": 1220291205,
    "node_id": "IC_kwDOCM9I9M5IvCqF",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T06:12:42Z",
    "updated_at": "2022-08-19T06:12:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another instance:\n```\n[2022-08-18 18:34:12] DEBUG sync: Received block blockSlot=3694971 graffiti=teku/v22.8.0+61-gc514633 proposerIndex=134853 sinceSlotStartTime=223.03655ms\n[2022-08-18 18:34:12] DEBUG blockchain: Synced new block block=0x3ab9f7a5... chainServiceProcessedTime=258.20102ms epoch=115467 finalizedEpoch=115465 finalizedRoot=0x036ca81f... justifiedEpoch=115466 justifiedRoot=0x2fd290fc... parentRoot=0x58ffa5f6... sinceSlotStartTime=490.030074ms slot=3694971 slotInEpoch=27 version=bellatrix\n[2022-08-18 18:34:12] DEBUG blockchain: Synced new payload blockHash=0xbd9d29afdf14 gasUtilized=0.00 parentHash=0xd2826df4aa44\n[2022-08-18 18:34:12]  INFO blockchain: Finished applying state transition attestations=128 payloadHash=0xbd9d29afdf14 slot=3694971 syncBitsCount=289 txCount=2\n[2022-08-18 18:34:14] DEBUG powchain: Latest eth1 chain event blockHash=0xbd9d29afdf141707fc7018c22a6229b029b2d9ec80c8d83fcaff8b3b9731bc85 blockNumber=7428400 difficulty=0\n[2022-08-18 18:34:28] DEBUG powchain: Latest eth1 chain event blockHash=0xbd9d29afdf141707fc7018c22a6229b029b2d9ec80c8d83fcaff8b3b9731bc85 blockNumber=7428400 difficulty=0\n[2022-08-18 18:34:32] DEBUG sync: Gossip message was rejected agent=teku/teku/v22.8.0/linux-x86_64/-eclipseadoptium-openjdk64bitservervm-java-17 error=aggregate ssz 0x64000000a8fce4557a8edf2f390cd2eefb44fdc013d7acad824d52bc3da42ccc39e70b654b6a03a6233f6cd15fbdc4c81599fbd310260f2ea2c1a2cfb30dc5036caa65d7573d26ac5ff5f629c51aa8dc6a03ab1f4fc70cc54c9eea42d40026cc88e0e15bd49d0500000000006c000000a91fe59650c538c89dad1192c93572b5fdfb630791e69e9d92fabe21ff4612660078f78106623fc5bab2bf453e223f3407f20645f4c923be95f5c7d5a69fbffa7fe4af39624861ba0630601ee82667d9b4b4d65660cff7285281f1eede79a43fe40000007c6138000000000031000000000000003ab9f7a5a2a6dafeea4ba3ff18aac048c30a87ba17a5c095ebbf6feab2424efe0ac30100000000002fd290fc55456405b4a189eb8063560bec12f9e6f38b37325a7121ba49eb5a8d0bc3010000000000f5262ea7f8bbe330db33741f31b26dba49a33c0da3153c77f5f91839a6b6a761b08b86203446277e9ce62f336dda5eed1276b84bab211bd2f5deeacb7e84aa0a414b745d3ba6168481b97d17758526141388eb535a399cf62394da8ec88a344eff49daf37021bed55efb2b22d82b04a4021b3ce1a8f4f619d903a4635dc8b9a5ffec7e7ffdfd7d7bdf7bbefbfbefdf3ff7f7bbcfffefd7: Verification of aggregate failed gossip score=0 multiaddress=/ip4/34.198.182.168/tcp/49470 peer id=16Uiu2HAmTg5eZncFAVPKgd759MaqVCqfjVDvignmUckMyumYJxZn topic=/eth2/c2ce3aa8/beacon_aggregate_and_proof/ssz_snappy\n[2022-08-18 18:34:36] DEBUG sync: Received block blockSlot=3694973 graffiti=teku/v22.8.0+61-gc514633 proposerIndex=158257 sinceSlotStartTime=675.196495ms\n[2022-08-18 18:34:37] DEBUG blockchain: Synced new block block=0x280c4d74... chainServiceProcessedTime=580.408589ms epoch=115467 finalizedEpoch=115465 finalizedRoot=0x036ca81f... justifiedEpoch=115466 justifiedRoot=0x2fd290fc... parentRoot=0x3ab9f7a5... sinceSlotStartTime=1.284952919s slot=3694973 slotInEpoch=29 version=bellatrix\n[2022-08-18 18:34:37] DEBUG blockchain: Synced new payload blockHash=0x2f2d51395b4a gasUtilized=0.52 parentHash=0xbd9d29afdf14\n```\n\n```\n0x64000000a8fce4557a8edf2f390cd2eefb44fdc013d7acad824d52bc3da42ccc39e70b654b6a03a6233f6cd15fbdc4c81599fbd310260f2ea2c1a2cfb30dc5036caa65d7573d26ac5ff5f629c51aa8dc6a03ab1f4fc70cc54c9eea42d40026cc88e0e15bd49d0500000000006c000000a91fe59650c538c89dad1192c93572b5fdfb630791e69e9d92fabe21ff4612660078f78106623fc5bab2bf453e223f3407f20645f4c923be95f5c7d5a69fbffa7fe4af39624861ba0630601ee82667d9b4b4d65660cff7285281f1eede79a43fe40000007c6138000000000031000000000000003ab9f7a5a2a6dafeea4ba3ff18aac048c30a87ba17a5c095ebbf6feab2424efe0ac30100000000002fd290fc55456405b4a189eb8063560bec12f9e6f38b37325a7121ba49eb5a8d0bc3010000000000f5262ea7f8bbe330db33741f31b26dba49a33c0da3153c77f5f91839a6b6a761b08b86203446277e9ce62f336dda5eed1276b84bab211bd2f5deeacb7e84aa0a414b745d3ba6168481b97d17758526141388eb535a399cf62394da8ec88a344eff49daf37021bed55efb2b22d82b04a4021b3ce1a8f4f619d903a4635dc8b9a5ffec7e7ffdfd7d7bdf7bbefbfbefdf3ff7f7bbcfffefd7\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1220291205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1220459951",
    "html_url": "https://github.com/ConsenSys/teku/issues/6089#issuecomment-1220459951",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089",
    "id": 1220459951,
    "node_id": "IC_kwDOCM9I9M5Ivr2v",
    "user": {
      "login": "Nashatyrev",
      "id": 8173857,
      "node_id": "MDQ6VXNlcjgxNzM4NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8173857?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nashatyrev",
      "html_url": "https://github.com/Nashatyrev",
      "followers_url": "https://api.github.com/users/Nashatyrev/followers",
      "following_url": "https://api.github.com/users/Nashatyrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nashatyrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nashatyrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nashatyrev/subscriptions",
      "organizations_url": "https://api.github.com/users/Nashatyrev/orgs",
      "repos_url": "https://api.github.com/users/Nashatyrev/repos",
      "events_url": "https://api.github.com/users/Nashatyrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nashatyrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T09:30:02Z",
    "updated_at": "2022-08-19T09:30:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Just to log, here is the third case decoded: \r\n```java\r\nSignedAggregateAndProof{\r\n\tmessage=AggregateAndProof{\r\n\t\taggregator_index=368084, \r\n\t\taggregate=Attestation{\r\n\t\t\taggregation_bits=SszBitlist{size=183, 111111110011011101111110111111101011111110111111101111101101111011111011110111100111110111011111110111111111011111111011111111001110111111101111110111011111001111111111111101111110101}, \r\n\t\t\tdata=AttestationData{\r\n\t\t\t\tslot=3694972, \r\n\t\t\t\tindex=49, \r\n\t\t\t\tbeacon_block_root=0x3ab9f7a5a2a6dafeea4ba3ff18aac048c30a87ba17a5c095ebbf6feab2424efe, \r\n\t\t\t\tsource=Checkpoint{\r\n\t\t\t\t\tepoch=115466, \r\n\t\t\t\t\troot=0x2fd290fc55456405b4a189eb8063560bec12f9e6f38b37325a7121ba49eb5a8d\r\n\t\t\t\t}, \r\n\t\t\t\ttarget=Checkpoint{\r\n\t\t\t\t\tepoch=115467, \r\n\t\t\t\t\troot=0xf5262ea7f8bbe330db33741f31b26dba49a33c0da3153c77f5f91839a6b6a761\r\n\t\t\t\t}\r\n\t\t\t}, \r\n\t\t\tsignature=SszByteVector{0xb08b86203446277e9ce62f336dda5eed1276b84bab211bd2f5deeacb7e84aa0a414b745d3ba6168481b97d17758526141388eb535a399cf62394da8ec88a344eff49daf37021bed55efb2b22d82b04a4021b3ce1a8f4f619d903a4635dc8b9a5}\r\n\t\t}, \r\n\t\tselection_proof=SszByteVector{0xa91fe59650c538c89dad1192c93572b5fdfb630791e69e9d92fabe21ff4612660078f78106623fc5bab2bf453e223f3407f20645f4c923be95f5c7d5a69fbffa7fe4af39624861ba0630601ee82667d9b4b4d65660cff7285281f1eede79a43f}\r\n\t}, \r\n\tsignature=SszByteVector{0xa8fce4557a8edf2f390cd2eefb44fdc013d7acad824d52bc3da42ccc39e70b654b6a03a6233f6cd15fbdc4c81599fbd310260f2ea2c1a2cfb30dc5036caa65d7573d26ac5ff5f629c51aa8dc6a03ab1f4fc70cc54c9eea42d40026cc88e0e15b}\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1220459951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1220570604",
    "html_url": "https://github.com/ConsenSys/teku/issues/6089#issuecomment-1220570604",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/6089",
    "id": 1220570604,
    "node_id": "IC_kwDOCM9I9M5IwG3s",
    "user": {
      "login": "Nashatyrev",
      "id": 8173857,
      "node_id": "MDQ6VXNlcjgxNzM4NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8173857?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Nashatyrev",
      "html_url": "https://github.com/Nashatyrev",
      "followers_url": "https://api.github.com/users/Nashatyrev/followers",
      "following_url": "https://api.github.com/users/Nashatyrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/Nashatyrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Nashatyrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Nashatyrev/subscriptions",
      "organizations_url": "https://api.github.com/users/Nashatyrev/orgs",
      "repos_url": "https://api.github.com/users/Nashatyrev/repos",
      "events_url": "https://api.github.com/users/Nashatyrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Nashatyrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-19T11:35:28Z",
    "updated_at": "2022-08-19T11:35:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Running that [fuzz test](https://github.com/Nashatyrev/artemis/blob/test/invalid-bls-validated/ethereum/statetransition/src/test/java/tech/pegasys/teku/statetransition/validation/signatures/AggregatingSignatureVerificationServiceTest.java#L278) on Windows and Linux machines for 20 hours haven't identified any issues with `AggregatingSignatureVerificationService`",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1220570604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

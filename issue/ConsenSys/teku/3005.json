{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/3005",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/3005",
  "id": 724121128,
  "node_id": "MDU6SXNzdWU3MjQxMjExMjg=",
  "number": 3005,
  "title": "The latest finalized checkpoint at epoch 15614 is outside of the weak subjectivity period.  Please supply a recent weak subjectivity checkpoint using --ws-checkpoint=<BLOCK_ROOT>:<EPOCH>",
  "user": {
    "login": "dankrad",
    "id": 6130607,
    "node_id": "MDQ6VXNlcjYxMzA2MDc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6130607?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dankrad",
    "html_url": "https://github.com/dankrad",
    "followers_url": "https://api.github.com/users/dankrad/followers",
    "following_url": "https://api.github.com/users/dankrad/following{/other_user}",
    "gists_url": "https://api.github.com/users/dankrad/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dankrad/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dankrad/subscriptions",
    "organizations_url": "https://api.github.com/users/dankrad/orgs",
    "repos_url": "https://api.github.com/users/dankrad/repos",
    "events_url": "https://api.github.com/users/dankrad/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dankrad/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mbaxter",
    "id": 658601,
    "node_id": "MDQ6VXNlcjY1ODYwMQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mbaxter",
    "html_url": "https://github.com/mbaxter",
    "followers_url": "https://api.github.com/users/mbaxter/followers",
    "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
    "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
    "organizations_url": "https://api.github.com/users/mbaxter/orgs",
    "repos_url": "https://api.github.com/users/mbaxter/repos",
    "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mbaxter/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-10-18T21:08:52Z",
  "updated_at": "2020-10-20T23:37:35Z",
  "closed_at": "2020-10-20T23:37:35Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Medalla hasn't been finalizing for a long time, and it seems the last finalized epoch has now fallen out of the WS period. Teku just shut itself down with the message\r\n\r\n```\r\n06:19:24.396 INFO  - Slot Event  *** Slot: 537696, Block:    ... empty, Epoch: 16803, Finalized checkpoint: 15614, Finalized root: b38064..b440, Peers: 18\r\n06:19:28.001 INFO  - Validator   *** Published aggregate    Count: 1, Slot: 537696, Root: 4f48f4..fd39\r\n06:19:36.053 INFO  - Validator   *** Published attestation  Count: 2, Slot: 537697, Root: 4f48f4..fd39\r\n06:19:36.525 INFO  - Slot Event  *** Slot: 537697, Block:    ... empty, Epoch: 16803, Finalized checkpoint: 15614, Finalized root: b38064..b440, Peers: 17\r\n06:19:40.867 FATAL - The latest finalized checkpoint at epoch 15614 is outside of the weak subjectivity period.  Please supply a recent weak subjectivity checkpoint using --ws-checkpoint=<BLOCK_ROOT>:<EPOCH>.\r\nTeku is shutting down\r\n```\r\n\r\nand is now refusing to start back up (same message on every launch)\r\n\r\n[tekulog5.zip](https://github.com/PegaSysEng/teku/files/5398182/tekulog5.zip)\r\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/3005/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/711424316",
    "html_url": "https://github.com/ConsenSys/teku/issues/3005#issuecomment-711424316",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005",
    "id": 711424316,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTQyNDMxNg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-18T21:12:35Z",
    "updated_at": "2020-10-18T21:12:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm guessing at some point you did specify a weak subjectivity checkpoint - otherwise it should only be warning.\r\n\r\nYou can avoid the shutdown with `--Xws-suppress-errors-until-epoch <big number>`.  It's still unclear how long periods of non-finality and the weak subjectivity checks need to interact to ensure safety.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/711424316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/711856237",
    "html_url": "https://github.com/ConsenSys/teku/issues/3005#issuecomment-711856237",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005",
    "id": 711856237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTg1NjIzNw==",
    "user": {
      "login": "dankrad",
      "id": 6130607,
      "node_id": "MDQ6VXNlcjYxMzA2MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6130607?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dankrad",
      "html_url": "https://github.com/dankrad",
      "followers_url": "https://api.github.com/users/dankrad/followers",
      "following_url": "https://api.github.com/users/dankrad/following{/other_user}",
      "gists_url": "https://api.github.com/users/dankrad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dankrad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dankrad/subscriptions",
      "organizations_url": "https://api.github.com/users/dankrad/orgs",
      "repos_url": "https://api.github.com/users/dankrad/repos",
      "events_url": "https://api.github.com/users/dankrad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dankrad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T08:39:07Z",
    "updated_at": "2020-10-19T08:39:07Z",
    "author_association": "NONE",
    "body": "I did specify it, but the client had since fully caught up to the main chain and was signing attestations. So my intuition is that at that point the old checkpoint should be forgotten and the client go back to normal operation.\r\n\r\n```--Xws-suppress-errors-until-epoch <big number>``` does seem to be a workaround but shouldn't WS checkpoints be updated by default when the client catches up?",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/711856237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/711893536",
    "html_url": "https://github.com/ConsenSys/teku/issues/3005#issuecomment-711893536",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005",
    "id": 711893536,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTg5MzUzNg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T09:15:15Z",
    "updated_at": "2020-10-19T09:15:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm going to have to defer to @mbaxter on that as she actually knows what she's talking about with WS.  But I think it updates only when there's a new finalized checkpoint so it's struggling with Medalla not finalising.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/711893536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/712245333",
    "html_url": "https://github.com/ConsenSys/teku/issues/3005#issuecomment-712245333",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005",
    "id": 712245333,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjI0NTMzMw==",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T15:28:07Z",
    "updated_at": "2020-10-19T15:28:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @dankrad - it's still a bit unclear how exactly we should be handling this case.  For now, if you've supplied a WS checkpoint, the client runs in a \"strict\" mode where it will crash if the latest finalized checkpoint falls outside of the WS period.  If you want to run in a more lenient mode (just log warnings), you can clear out the stored WS state with:  `teku admin weak-subjectivity clear-state`.  ",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/712245333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/712259549",
    "html_url": "https://github.com/ConsenSys/teku/issues/3005#issuecomment-712259549",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3005",
    "id": 712259549,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjI1OTU0OQ==",
    "user": {
      "login": "dankrad",
      "id": 6130607,
      "node_id": "MDQ6VXNlcjYxMzA2MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6130607?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dankrad",
      "html_url": "https://github.com/dankrad",
      "followers_url": "https://api.github.com/users/dankrad/followers",
      "following_url": "https://api.github.com/users/dankrad/following{/other_user}",
      "gists_url": "https://api.github.com/users/dankrad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dankrad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dankrad/subscriptions",
      "organizations_url": "https://api.github.com/users/dankrad/orgs",
      "repos_url": "https://api.github.com/users/dankrad/repos",
      "events_url": "https://api.github.com/users/dankrad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dankrad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T15:50:16Z",
    "updated_at": "2020-10-19T15:50:16Z",
    "author_association": "NONE",
    "body": "As I said, workaround is currently ok for me, but I think this needs to be solved so that not all teku validators will suddenly go offline in case there is an extended non-finalized period.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/712259549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

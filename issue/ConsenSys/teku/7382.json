{
  "url": "https://api.github.com/repos/Consensys/teku/issues/7382",
  "repository_url": "https://api.github.com/repos/Consensys/teku",
  "labels_url": "https://api.github.com/repos/Consensys/teku/issues/7382/labels{/name}",
  "comments_url": "https://api.github.com/repos/Consensys/teku/issues/7382/comments",
  "events_url": "https://api.github.com/repos/Consensys/teku/issues/7382/events",
  "html_url": "https://github.com/Consensys/teku/issues/7382",
  "id": 1818916120,
  "node_id": "I_kwDOCM9I9M5sanUY",
  "number": 7382,
  "title": "Teku VC asks Web3Signer to sign for inactive validators",
  "user": {
    "login": "gg718",
    "id": 126100364,
    "node_id": "U_kgDOB4QjjA",
    "avatar_url": "https://avatars.githubusercontent.com/u/126100364?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gg718",
    "html_url": "https://github.com/gg718",
    "followers_url": "https://api.github.com/users/gg718/followers",
    "following_url": "https://api.github.com/users/gg718/following{/other_user}",
    "gists_url": "https://api.github.com/users/gg718/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gg718/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gg718/subscriptions",
    "organizations_url": "https://api.github.com/users/gg718/orgs",
    "repos_url": "https://api.github.com/users/gg718/repos",
    "events_url": "https://api.github.com/users/gg718/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gg718/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1048919129,
      "node_id": "MDU6TGFiZWwxMDQ4OTE5MTI5",
      "url": "https://api.github.com/repos/Consensys/teku/labels/bug%20%F0%9F%90%9E",
      "name": "bug 🐞",
      "color": "dd6c94",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "zilm13",
    "id": 6196452,
    "node_id": "MDQ6VXNlcjYxOTY0NTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6196452?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zilm13",
    "html_url": "https://github.com/zilm13",
    "followers_url": "https://api.github.com/users/zilm13/followers",
    "following_url": "https://api.github.com/users/zilm13/following{/other_user}",
    "gists_url": "https://api.github.com/users/zilm13/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zilm13/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zilm13/subscriptions",
    "organizations_url": "https://api.github.com/users/zilm13/orgs",
    "repos_url": "https://api.github.com/users/zilm13/repos",
    "events_url": "https://api.github.com/users/zilm13/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zilm13/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zilm13",
      "id": 6196452,
      "node_id": "MDQ6VXNlcjYxOTY0NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6196452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zilm13",
      "html_url": "https://github.com/zilm13",
      "followers_url": "https://api.github.com/users/zilm13/followers",
      "following_url": "https://api.github.com/users/zilm13/following{/other_user}",
      "gists_url": "https://api.github.com/users/zilm13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zilm13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zilm13/subscriptions",
      "organizations_url": "https://api.github.com/users/zilm13/orgs",
      "repos_url": "https://api.github.com/users/zilm13/repos",
      "events_url": "https://api.github.com/users/zilm13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zilm13/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 15,
  "created_at": "2023-07-24T18:25:00Z",
  "updated_at": "2023-10-10T19:04:45Z",
  "closed_at": "2023-10-10T19:04:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nTeku VC asks Web3Signer to sign for inactive validators. Let's say I load 10 keys into Teku; 5 that have received 32 ETH and become active, and another 5 that have yet to receive 32 ETH, I see errors in the logs for Web3Signer like:\r\n\r\n> `2023-07-24 09:42:15.029+00:00 | vert.x-eventloop-thread-0 | ERROR | LogErrorHandler | Failed request: http://web3signer:9000/api/v1/eth2/sign/0xa60345b3482359171a7aae637b93fcd9245126a07bc58717cbc55502a197bf838e10adb6825f52420994c9f29c913b7d`\r\n\r\nOther validator clients correctly recognize the validator is not active and do not ask Web3Signer to sign.\r\n\r\n### Steps to Reproduce (Bug)\r\n\r\n**Expected behavior:**\r\n\r\nTeku should not ask Web3Signer to sign for inactive keys.\r\n\r\n**Actual behavior:**\r\n\r\nTeku asks Web3Signer to sign for inactive keys.\r\n\r\n**Frequency:**\r\n\r\nEvery epoch.\r\n\r\n### Versions (Add all that apply)\r\n\r\n* Teku v23.6.2\r\n* Web3Signer v23.6.0",
  "closed_by": {
    "login": "zilm13",
    "id": 6196452,
    "node_id": "MDQ6VXNlcjYxOTY0NTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6196452?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zilm13",
    "html_url": "https://github.com/zilm13",
    "followers_url": "https://api.github.com/users/zilm13/followers",
    "following_url": "https://api.github.com/users/zilm13/following{/other_user}",
    "gists_url": "https://api.github.com/users/zilm13/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zilm13/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zilm13/subscriptions",
    "organizations_url": "https://api.github.com/users/zilm13/orgs",
    "repos_url": "https://api.github.com/users/zilm13/repos",
    "events_url": "https://api.github.com/users/zilm13/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zilm13/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/Consensys/teku/issues/7382/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/Consensys/teku/issues/7382/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1648702145",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1648702145",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1648702145,
    "node_id": "IC_kwDOCM9I9M5iRTLB",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T22:19:15Z",
    "updated_at": "2023-07-24T22:19:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for raising.\nWhen you say 'constantly', is it asking every slot? Once an epoch?\nIt sounds very much like attempting to determine if an attester is an aggregator...\n\nI'll put the 'bug' flag on this one, but this extra information would be useful if it's easy to get at, otherwise we'll be trying it anyway so we'll find out soon enough...",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1648702145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1648747486",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1648747486",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1648747486,
    "node_id": "IC_kwDOCM9I9M5iRePe",
    "user": {
      "login": "gg718",
      "id": 126100364,
      "node_id": "U_kgDOB4QjjA",
      "avatar_url": "https://avatars.githubusercontent.com/u/126100364?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gg718",
      "html_url": "https://github.com/gg718",
      "followers_url": "https://api.github.com/users/gg718/followers",
      "following_url": "https://api.github.com/users/gg718/following{/other_user}",
      "gists_url": "https://api.github.com/users/gg718/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gg718/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gg718/subscriptions",
      "organizations_url": "https://api.github.com/users/gg718/orgs",
      "repos_url": "https://api.github.com/users/gg718/repos",
      "events_url": "https://api.github.com/users/gg718/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gg718/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-24T23:16:13Z",
    "updated_at": "2023-07-24T23:16:13Z",
    "author_association": "NONE",
    "body": "Apologies, opened this issue a little too hastily.\r\n\r\nIt's every epoch – description updated.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1648747486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1648931653",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1648931653",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1648931653,
    "node_id": "IC_kwDOCM9I9M5iSLNF",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-25T02:46:56Z",
    "updated_at": "2023-07-25T02:46:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok great, I suspect it's likely trying to decide which validators are aggregators for the epoch.\nThe VC likely isn't fully aware of each validators status, but I think we can probably do something to alleviate this.\nThanks for the extra context, it's helpful :)",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1648931653/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1661380827",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1661380827",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1661380827,
    "node_id": "IC_kwDOCM9I9M5jBqjb",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T02:10:20Z",
    "updated_at": "2023-08-02T02:10:20Z",
    "author_association": "NONE",
    "body": "We are also noticing this and same behavior for exited validators and it causes in our case to miss a lot of attestations where there are inactive or exited keys.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1661380827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1661548920",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1661548920",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1661548920,
    "node_id": "IC_kwDOCM9I9M5jCTl4",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T06:06:54Z",
    "updated_at": "2023-08-02T06:06:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "> We are also noticing this and same behavior for exited validators and it causes in our case to miss a lot of attestations where there are inactive or exited keys.\r\n\r\nSigning a message causes missed attestations?\r\nAre you talking about signing contention? Or reporting in the summary line? I'd be interested to know a little more on this if possible...",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1661548920/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662186637",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1662186637",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1662186637,
    "node_id": "IC_kwDOCM9I9M5jEvSN",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T13:10:38Z",
    "updated_at": "2023-08-02T13:10:38Z",
    "author_association": "NONE",
    "body": "@rolfyone unfortunately no errors in either Teku BN or Teku VC logs, but the performance of our Teku validator has been considerably worse and I think it's due to this issue.\r\n\r\n- https://beaconcha.in/validator/292955#attestations",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662186637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662437501",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1662437501",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1662437501,
    "node_id": "IC_kwDOCM9I9M5jFsh9",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T15:37:48Z",
    "updated_at": "2023-08-02T15:37:48Z",
    "author_association": "NONE",
    "body": "Just fyi, we are planning to prune out all inactive and exited keys from our keymanager and see if that improves Teku performance, otherwise, we'll fall back to Prysm VC + Prysm BN 😞  ",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662437501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662485256",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1662485256",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1662485256,
    "node_id": "IC_kwDOCM9I9M5jF4MI",
    "user": {
      "login": "zilm13",
      "id": 6196452,
      "node_id": "MDQ6VXNlcjYxOTY0NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6196452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zilm13",
      "html_url": "https://github.com/zilm13",
      "followers_url": "https://api.github.com/users/zilm13/followers",
      "following_url": "https://api.github.com/users/zilm13/following{/other_user}",
      "gists_url": "https://api.github.com/users/zilm13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zilm13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zilm13/subscriptions",
      "organizations_url": "https://api.github.com/users/zilm13/orgs",
      "repos_url": "https://api.github.com/users/zilm13/repos",
      "events_url": "https://api.github.com/users/zilm13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zilm13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T16:00:44Z",
    "updated_at": "2023-08-02T16:06:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ybstaked we are looking into this, I'm trying to reproduce the bug. Please, get back to us with the results of the pruning.\r\nIf pruning helps, handling of exited and inactive validators is clearly the issue, otherwise we should look into more details as the reason of bad validator performance is somewhere else for your nodes. We'd be happy to help find out it.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662485256/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662671087",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1662671087",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1662671087,
    "node_id": "IC_kwDOCM9I9M5jGljv",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T17:32:59Z",
    "updated_at": "2023-08-02T17:32:59Z",
    "author_association": "NONE",
    "body": "@zilm13 thanks, we just pruned all inactive keys from one VC process  (still has keys with `withdrawal_done` status).  Now, monitoring the remaining 1 active key in the wallet: https://beaconcha.in/validator/17998#attestations, along with another key in another wallet that's also impacted by it: https://beaconcha.in/validator/292955#attestations",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662671087/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662899187",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1662899187",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1662899187,
    "node_id": "IC_kwDOCM9I9M5jHdPz",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T20:06:20Z",
    "updated_at": "2023-08-02T20:06:20Z",
    "author_association": "NONE",
    "body": "Again, no errors in Teku VC or Teku BN and performance doesn't seem to have improved in the last 2 hours, will wait overnight and if still no improvement, will switch back to Prysm.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1662899187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1663668293",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1663668293",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1663668293,
    "node_id": "IC_kwDOCM9I9M5jKZBF",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T09:49:55Z",
    "updated_at": "2023-08-03T09:49:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Are there large numbers of `regeneration of state` messages on the BN? This can cause issues close to epoch transition and is something we've refactored in the release that's being made currently - basically it was regenerating epoch states, and i've changed caching to remove that specific cause of slow down... a symptom is those messages.\r\nWhile I was testing this seemed to be a problem that could occur even with huge heap space, just due to how the old state caching was functioning, and was fairly regular (every epoch or so), and because of where it occurred it could potentially cause slowdown outside of how keys are managed...",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1663668293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1664005046",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1664005046",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1664005046,
    "node_id": "IC_kwDOCM9I9M5jLrO2",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T13:40:18Z",
    "updated_at": "2023-08-03T13:40:18Z",
    "author_association": "NONE",
    "body": "This validator's performance looks better: https://beaconcha.in/validator/17998#attestations\r\n\r\nBefore: 99 total keys: 1 active, 32 exited, 66 inactive\r\nAfter: 33 total keys: 1 active, 32 exited.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1664005046/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1664012423",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1664012423",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1664012423,
    "node_id": "IC_kwDOCM9I9M5jLtCH",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T13:44:52Z",
    "updated_at": "2023-08-03T13:58:10Z",
    "author_association": "NONE",
    "body": "> Are there large numbers of `regeneration of state` messages on the BN? This can cause issues close to epoch transition and is something we've refactored in the release that's being made currently - basically it was regenerating epoch states, and i've changed caching to remove that specific cause of slow down... a symptom is those messages. While I was testing this seemed to be a problem that could occur even with huge heap space, just due to how the old state caching was functioning, and was fairly regular (every epoch or so), and because of where it occurred it could potentially cause slowdown outside of how keys are managed...\r\n\r\nThere is no \"regeneration\" or \"error\" logs in either Teku BNs or Teku VCs.  Only \"warning\" logs is:  \r\n```\r\n[cl-teku-mainnet-2-0] 12:00:27.403 WARN  - Late Block Import *** Block: ad8c030ee77d5c06517987ac83d51b7428dbba0dc624b08542649302b60fd68e (7020000) proposer 760069 arrival 4158ms, pre-state_retrieved +5ms, processed +191ms, execution_payload_result_received +38ms, begin_importing +0ms, transaction_prepared +0ms, transaction_committed +0ms, completed +11ms\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1664012423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1666201501",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1666201501",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1666201501,
    "node_id": "IC_kwDOCM9I9M5jUDed",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-04T21:33:12Z",
    "updated_at": "2023-08-04T21:33:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "> This validator's performance looks better: https://beaconcha.in/validator/17998#attestations\r\n> \r\n> Before: 99 total keys: 1 active, 32 exited, 66 inactive After: 33 total keys: 1 active, 32 exited.\r\n\r\nok that's really good to know, thanks! We've got someone looking at this problem, so this is useful context.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1666201501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1668064535",
    "html_url": "https://github.com/Consensys/teku/issues/7382#issuecomment-1668064535",
    "issue_url": "https://api.github.com/repos/Consensys/teku/issues/7382",
    "id": 1668064535,
    "node_id": "IC_kwDOCM9I9M5jbKUX",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-07T15:13:28Z",
    "updated_at": "2023-08-07T15:13:28Z",
    "author_association": "NONE",
    "body": "Actually part of the fix seems like us switching to another beacon node, but not sure why the \"broken Teku BN\" was having issues, there's no useful error logs.",
    "reactions": {
      "url": "https://api.github.com/repos/Consensys/teku/issues/comments/1668064535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/3571",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/3571",
  "id": 805237661,
  "node_id": "MDU6SXNzdWU4MDUyMzc2NjE=",
  "number": 3571,
  "title": "\"teku failed to start\" with no other error information - logs attached",
  "user": {
    "login": "kyleboddy",
    "id": 746351,
    "node_id": "MDQ6VXNlcjc0NjM1MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/746351?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kyleboddy",
    "html_url": "https://github.com/kyleboddy",
    "followers_url": "https://api.github.com/users/kyleboddy/followers",
    "following_url": "https://api.github.com/users/kyleboddy/following{/other_user}",
    "gists_url": "https://api.github.com/users/kyleboddy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kyleboddy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kyleboddy/subscriptions",
    "organizations_url": "https://api.github.com/users/kyleboddy/orgs",
    "repos_url": "https://api.github.com/users/kyleboddy/repos",
    "events_url": "https://api.github.com/users/kyleboddy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kyleboddy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-02-10T06:59:40Z",
  "updated_at": "2021-02-10T07:26:32Z",
  "closed_at": "2021-02-10T07:26:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nAs a user trying to run teku after depositing 32 ETH, I want to get the client working, but it crashes with no usable information.\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Follow the [Consensys first blog post](https://consensys.net/blog/blockchain-explained/my-journey-to-becoming-a-validator-on-ethereum-2-0/) on depositing 32 ETH using Metamask - succeeds.\r\n2. Follow the [Consensys second blog post](https://consensys.net/blog/developers/my-journey-to-becoming-a-validator-on-ethereum-2-0-part-2/) on building the validator machine. Chose to build locally, Ubuntu 20.04 LTS 64-bit, signed up for Infura endpoint, installed Java/Teku, registered non-root user, used systemd services, all of which succeeded.\r\n3. Test to see if port 9000 is being forwarded properly using netcat and it hits the Infura endpoint properly; succeeds. \r\n4. Run teku using systemd or yaml configuration files; teku fails to start with no further information.\r\n\r\n**Expected behavior:** \r\nTeku runs as written about in the two blog posts cited above.\r\n\r\n**Actual behavior:**\r\nUpon running teku and enabling verbose logs, I get errors using the systemd method as well as the yaml configuration file method. I Google them and see no similar errors, likely because there is no information after teku crashes, unlike p2p port 9000 problems or Java stacktrace dumps.\r\n\r\n```\r\nvalidator@ethvalidator:~/teku-21.1.1/bin$ sudo systemctl stop teku\r\nvalidator@ethvalidator:~/teku-21.1.1/bin$ ./teku --config-file ~/tekuconfig/validatorconfig.yaml --logging=ALL\r\n2021-02-09 22:43:05,597 main INFO Setting logging level to ALL\r\n2021-02-09 22:43:05,844 main INFO Configuring logging for destination: console and file\r\n2021-02-09 22:43:05,844 main INFO Logging file location: ~/tekudata/logs/teku.log\r\n2021-02-09 22:43:05,844 main INFO Logging includes events: true\r\n2021-02-09 22:43:05,844 main INFO Logging includes validator duties: true\r\n2021-02-09 22:43:05,845 main INFO Logging includes color: true\r\n22:43:05.916 INFO  - Teku version: teku/v21.1.1/linux-x86_64/-ubuntu-openjdk64bitservervm-java-11\r\n22:43:05.917 INFO  - This software is licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this software except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n22:43:05.997 INFO  - Loading 1 validator keys...\r\n22:43:06.275 INFO  - Storing beacon chain data in: /home/validator/teku-21.1.1/bin/~/tekudata/beacon\r\n22:43:12.992 INFO  - Loading initial state from jar:file:/home/validator/teku-21.1.1/lib/teku-ethereum-networks-21.1.1.jar!/tech/pegasys/teku/networks/pyrmont-genesis.ssz\r\n22:43:14.604 INFO  - Loaded initial state at epoch 0 (state root = 0x2bb257ca66d05a047a65fe43a5f457b674de445d917cca029efb09b3ba4758c4, block root = 0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87, block slot = 0).\r\n22:43:14.623 INFO  - Initializing storage\r\n22:43:16.969 INFO  - Storage initialization complete\r\n22:43:17.251 INFO  - Loading generated p2p private key from: generated-node-key\r\n22:43:18.041 INFO  - PreGenesis Local ENR: enr:-KG4QKD1BNAYmnmGebxNR90JeTsoNC3GmXb_fFAl1im5mgnIXqHKnjrtGGV8J4BMKSNBmhvEPB3C2zLfA8npH-jp8ycFhGV0aDKQ1Uz1lwAAIAn__________4JpZIJ2NIJpcIR_AAEBiXNlY3AyNTZrMaECZFNfRQeWEs3F8gMG9VZiTSqGchH64nkHen8R9ZHEeQ2DdGNwgiMog3VkcIIjKA\r\n22:43:18.468 INFO  - Listening for connections on: /ip4/127.0.1.1/tcp/9000/p2p/16Uiu2HAm2BJV4CefQrMMT1dJ5Tz2KRjYM1F7JyhB3rnQVowJqqoJ\r\nTeku failed to start\r\n\r\nTo display full help:\r\nteku [COMMAND] --help\r\n```\r\n\r\n**Frequency:** \r\n100 percent of the time.\r\n\r\n### Versions \r\n* Software version: teku/v21.1.1/linux-x86_64/-ubuntu-openjdk64bitservervm-java-11\r\n* Java version: openjdk version \"11.0.9.1\" 2020-11-04, OpenJDK Runtime Environment (build 11.0.9.1+1-Ubuntu-0ubuntu1.20.04), OpenJDK 64-Bit Server VM (build 11.0.9.1+1-Ubuntu-0ubuntu1.20.04, mixed mode, sharing)\r\n* OS Name & Version: Ubuntu 20.04.2 LTS, Focal Fossa\r\n* Kernel Version: Linux ethvalidator 5.8.0-41-generic #46~20.04.1-Ubuntu SMP Mon Jan 18 17:52:23 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\nThank you for reviewing this.",
  "closed_by": {
    "login": "kyleboddy",
    "id": 746351,
    "node_id": "MDQ6VXNlcjc0NjM1MQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/746351?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kyleboddy",
    "html_url": "https://github.com/kyleboddy",
    "followers_url": "https://api.github.com/users/kyleboddy/followers",
    "following_url": "https://api.github.com/users/kyleboddy/following{/other_user}",
    "gists_url": "https://api.github.com/users/kyleboddy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kyleboddy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kyleboddy/subscriptions",
    "organizations_url": "https://api.github.com/users/kyleboddy/orgs",
    "repos_url": "https://api.github.com/users/kyleboddy/repos",
    "events_url": "https://api.github.com/users/kyleboddy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kyleboddy/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/3571/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/776493100",
    "html_url": "https://github.com/ConsenSys/teku/issues/3571#issuecomment-776493100",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571",
    "id": 776493100,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjQ5MzEwMA==",
    "user": {
      "login": "kyleboddy",
      "id": 746351,
      "node_id": "MDQ6VXNlcjc0NjM1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/746351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyleboddy",
      "html_url": "https://github.com/kyleboddy",
      "followers_url": "https://api.github.com/users/kyleboddy/followers",
      "following_url": "https://api.github.com/users/kyleboddy/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyleboddy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyleboddy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyleboddy/subscriptions",
      "organizations_url": "https://api.github.com/users/kyleboddy/orgs",
      "repos_url": "https://api.github.com/users/kyleboddy/repos",
      "events_url": "https://api.github.com/users/kyleboddy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyleboddy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T07:02:06Z",
    "updated_at": "2021-02-10T07:09:35Z",
    "author_association": "NONE",
    "body": "validatorconfig.yaml:\r\n\r\n\r\n```\r\n# network\r\nnetwork: \"pyrmont\"\r\n\r\n# p2p\r\np2p-enabled: true\r\np2p-port: 9000\r\n\r\n# validators\r\nvalidator-keys: REDACTED\r\nvalidators-graffiti: \"Teku Validator\"\r\n\r\n# Eth 1\r\neth1-endpoint: REDACTED\r\n\r\n# metrics\r\nmetrics-enabled: true\r\nmetrics-categories: [\"BEACON\",\"LIBP2P\",\"NETWORK\"]\r\n\r\n# database\r\ndata-path: \"~/tekudata\"\r\ndata-storage-mode: \"archive\"\r\n\r\n# rest api\r\nrest-api-port: 5051\r\nrest-api-docs-enabled: true\r\nrest-api-enabled: true\r\n\r\n# logging\r\nlog-include-validator-duties-enabled: true\r\n```\r\n\r\nValidator link:\r\n\r\nhttps://mainnet.beaconcha.in/validator/0xb308bde486e893f7825b80579cc083354eaafe7cc55444b97a77afe4b39698687df39b1a642f3cb580bae64e2f5b13ba",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/776493100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/776499747",
    "html_url": "https://github.com/ConsenSys/teku/issues/3571#issuecomment-776499747",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571",
    "id": 776499747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjQ5OTc0Nw==",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T07:16:05Z",
    "updated_at": "2021-02-10T07:16:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the detailed report! Just to note that this looks identical to https://github.com/ConsenSys/teku/issues/3481. You may find pointers to a solution there: it was a permissions issue on the validator key files in that case. The lack of an error message on exit ought to be fixed in the next release (due in the next day or so).",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/776499747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/776504670",
    "html_url": "https://github.com/ConsenSys/teku/issues/3571#issuecomment-776504670",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/3571",
    "id": 776504670,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjUwNDY3MA==",
    "user": {
      "login": "kyleboddy",
      "id": 746351,
      "node_id": "MDQ6VXNlcjc0NjM1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/746351?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kyleboddy",
      "html_url": "https://github.com/kyleboddy",
      "followers_url": "https://api.github.com/users/kyleboddy/followers",
      "following_url": "https://api.github.com/users/kyleboddy/following{/other_user}",
      "gists_url": "https://api.github.com/users/kyleboddy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kyleboddy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kyleboddy/subscriptions",
      "organizations_url": "https://api.github.com/users/kyleboddy/orgs",
      "repos_url": "https://api.github.com/users/kyleboddy/repos",
      "events_url": "https://api.github.com/users/kyleboddy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kyleboddy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T07:26:32Z",
    "updated_at": "2021-02-10T07:26:32Z",
    "author_association": "NONE",
    "body": "Got it. It wasn't a permissions error, it was in fact my own stupidity. I didn't realize there was a different logging option, and upon doing that, I got an \"invalid keystore password\" error and realized I had the wrong information in my appended text file for the password. Upon fixing that mistake, it's running great!\r\n\r\nDiscord was super helpful - posting the logs here for the next people up!\r\n\r\n![image](https://user-images.githubusercontent.com/746351/107478278-0f0b5280-6b2e-11eb-8403-7133fec49826.png)\r\n\r\nThe only thing that I would request is the slightly confusing idea that turning logging to ALL didn't dump everything to console and had to be pointed out to me in Discord.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/776504670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

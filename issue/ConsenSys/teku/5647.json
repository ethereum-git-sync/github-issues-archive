{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/5647",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/5647/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/5647/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/5647/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/5647",
  "id": 1254130510,
  "node_id": "I_kwDOCM9I9M5KwINO",
  "number": 5647,
  "title": "Use Teku for the beaconchain explorer",
  "user": {
    "login": "skylenet",
    "id": 1500888,
    "node_id": "MDQ6VXNlcjE1MDA4ODg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1500888?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/skylenet",
    "html_url": "https://github.com/skylenet",
    "followers_url": "https://api.github.com/users/skylenet/followers",
    "following_url": "https://api.github.com/users/skylenet/following{/other_user}",
    "gists_url": "https://api.github.com/users/skylenet/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/skylenet/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/skylenet/subscriptions",
    "organizations_url": "https://api.github.com/users/skylenet/orgs",
    "repos_url": "https://api.github.com/users/skylenet/repos",
    "events_url": "https://api.github.com/users/skylenet/events{/privacy}",
    "received_events_url": "https://api.github.com/users/skylenet/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rolfyone",
    "id": 2967240,
    "node_id": "MDQ6VXNlcjI5NjcyNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolfyone",
    "html_url": "https://github.com/rolfyone",
    "followers_url": "https://api.github.com/users/rolfyone/followers",
    "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
    "organizations_url": "https://api.github.com/users/rolfyone/orgs",
    "repos_url": "https://api.github.com/users/rolfyone/repos",
    "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolfyone/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-05-31T16:41:51Z",
  "updated_at": "2022-06-09T09:07:48Z",
  "closed_at": "2022-06-09T09:07:48Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I've been trying to use the Teku as the underlying beacon client for the beaconchain explorer ( https://github.com/gobitfly/eth2-beaconchain-explorer ) . Officially it only supports Prysm or Lighthouse for now.\r\n\r\nThe beaconchain explorer seems to be using a custom API from Lighthouse to get some metrics about validator inclusion per epoch : `/lighthouse/validator_inclusion/{epoch}/global`\r\n\r\nIt returns something like the following:\r\n\r\n```json\r\n{\r\n    \"data\": {\r\n        \"current_epoch_active_gwei\": 3365824000000000,\r\n        \"previous_epoch_active_gwei\": 3365696000000000,\r\n        \"current_epoch_target_attesting_gwei\": 3100288000000000,\r\n        \"previous_epoch_target_attesting_gwei\": 3200480000000000,\r\n        \"previous_epoch_head_attesting_gwei\": 2899808000000000\r\n    }\r\n}\r\n```\r\n\r\nWhich the beaconchain explorer then transforms the information it needs like:\r\n\r\n```go\r\nreturn &types.ValidatorParticipation{\r\n        Epoch: epoch,\r\n        // technically there are rules for delayed finalization through previous epoch, applied only later. But good enough, this matches previous wonky behavior\r\n        Finalized:               float32(parsedResponse.Data.CurrentEpochTargetAttestingGwei)/float32(parsedResponse.Data.CurrentEpochActiveGwei) > (float32(2) / float32(3)),\r\n        GlobalParticipationRate: float32(parsedResponse.Data.PreviousEpochTargetAttestingGwei) / float32(parsedResponse.Data.CurrentEpochActiveGwei),\r\n        VotedEther:              uint64(parsedResponse.Data.PreviousEpochTargetAttestingGwei),\r\n        EligibleEther:           uint64(parsedResponse.Data.CurrentEpochActiveGwei),\r\n    }\r\n ```\r\n \r\nI was wondering if Teku has something similar, and if not, how much effort it would be to implement such APIs and if it would make any sense. This is not too important, but it would be nice to be able to use Teku for the beaconchain explorer.",
  "closed_by": {
    "login": "rolfyone",
    "id": 2967240,
    "node_id": "MDQ6VXNlcjI5NjcyNDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rolfyone",
    "html_url": "https://github.com/rolfyone",
    "followers_url": "https://api.github.com/users/rolfyone/followers",
    "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
    "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
    "organizations_url": "https://api.github.com/users/rolfyone/orgs",
    "repos_url": "https://api.github.com/users/rolfyone/repos",
    "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rolfyone/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/5647/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/5647/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1144248478",
    "html_url": "https://github.com/ConsenSys/teku/issues/5647#issuecomment-1144248478",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/5647",
    "id": 1144248478,
    "node_id": "IC_kwDOCM9I9M5EM9ie",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-01T23:37:06Z",
    "updated_at": "2022-06-01T23:37:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry for the delay in getting back to you on this.  We don't currently have an API for this but we do publish metrics like this so it should be doable to add an API for this. Might take a bit of fiddling to be able to calculate it on demand for this API but shouldn't be too bad.  We're planning the next sprint this evening so will see if we can get it onto the TODO list.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1144248478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

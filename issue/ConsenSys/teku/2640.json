{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/2640",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/2640",
  "id": 683904990,
  "node_id": "MDU6SXNzdWU2ODM5MDQ5OTA=",
  "number": 2640,
  "title": "UnsatisfiedLinkError on fresh install/build",
  "user": {
    "login": "jnew00",
    "id": 4602100,
    "node_id": "MDQ6VXNlcjQ2MDIxMDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4602100?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jnew00",
    "html_url": "https://github.com/jnew00",
    "followers_url": "https://api.github.com/users/jnew00/followers",
    "following_url": "https://api.github.com/users/jnew00/following{/other_user}",
    "gists_url": "https://api.github.com/users/jnew00/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jnew00/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jnew00/subscriptions",
    "organizations_url": "https://api.github.com/users/jnew00/orgs",
    "repos_url": "https://api.github.com/users/jnew00/repos",
    "events_url": "https://api.github.com/users/jnew00/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jnew00/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1048919135,
      "node_id": "MDU6TGFiZWwxMDQ4OTE5MTM1",
      "url": "https://api.github.com/repos/ConsenSys/teku/labels/question%20%E2%9D%94",
      "name": "question ‚ùî",
      "color": "d876e3",
      "default": false,
      "description": "Further information is requested"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-08-22T01:54:24Z",
  "updated_at": "2022-02-21T03:55:52Z",
  "closed_at": "2022-02-21T03:55:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Getting this error when trying to run teku for the first time \r\n\r\n```\r\nTeku failed to start.\r\njava.util.concurrent.CompletionException: java.lang.UnsatisfiedLinkError: /tmp/librocksdbjni8697586722914603821.so: /tmp/librocksdbjni8697586722914603821.so: failed to map segment from shared object\r\n        at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331)\r\n        at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1099)\r\n        at java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2235)\r\n        at tech.pegasys.teku.infrastructure.async.SafeFuture.thenCompose(SafeFuture.java:373)\r\n        at tech.pegasys.teku.services.ServiceController.doStart(ServiceController.java:54)\r\n        at tech.pegasys.teku.service.serviceutils.Service.start(Service.java:33)\r\n        at tech.pegasys.teku.BeaconNode.start(BeaconNode.java:98)\r\n        at tech.pegasys.teku.Teku.start(Teku.java:39)\r\n        at tech.pegasys.teku.cli.BeaconNodeCommand.call(BeaconNodeCommand.java:261)\r\n        at tech.pegasys.teku.cli.BeaconNodeCommand.call(BeaconNodeCommand.java:65)\r\n        at picocli.CommandLine.executeUserObject(CommandLine.java:1933)\r\n        at picocli.CommandLine.access$1100(CommandLine.java:145)\r\n        at picocli.CommandLine$RunLast.executeUserObjectOfLastSubcommandWithSameParent(CommandLine.java:2332)\r\n        at picocli.CommandLine$RunLast.handle(CommandLine.java:2326)\r\n        at picocli.CommandLine$RunLast.handle(CommandLine.java:2291)\r\n        at picocli.CommandLine$AbstractParseResultHandler.execute(CommandLine.java:2159)\r\n        at picocli.CommandLine.execute(CommandLine.java:2058)\r\n        at tech.pegasys.teku.cli.BeaconNodeCommand.parse(BeaconNodeCommand.java:210)\r\n        at tech.pegasys.teku.Teku.main(Teku.java:31)\r\nCaused by: java.lang.UnsatisfiedLinkError: /tmp/librocksdbjni8697586722914603821.so: /tmp/librocksdbjni8697586722914603821.so: failed to map segment from shared object\r\n        at java.base/java.lang.ClassLoader$NativeLibrary.load0(Native Method)\r\n        at java.base/java.lang.ClassLoader$NativeLibrary.load(ClassLoader.java:2442)\r\n        at java.base/java.lang.ClassLoader$NativeLibrary.loadLibrary(ClassLoader.java:2498)\r\n        at java.base/java.lang.ClassLoader.loadLibrary0(ClassLoader.java:2694)\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2627)\r\n        at java.base/java.lang.Runtime.load0(Runtime.java:768)\r\n        at java.base/java.lang.System.load(System.java:1837)\r\n        at org.rocksdb.NativeLibraryLoader.loadLibraryFromJar(NativeLibraryLoader.java:79)\r\n        at org.rocksdb.NativeLibraryLoader.loadLibrary(NativeLibraryLoader.java:57)\r\n        at org.rocksdb.RocksDB.loadLibrary(RocksDB.java:67)\r\n        at org.rocksdb.RocksDB.<clinit>(RocksDB.java:38)\r\n        at tech.pegasys.teku.storage.server.rocksdb.core.RocksDbUtil.loadNativeLibrary(RocksDbUtil.java:27)\r\n        at tech.pegasys.teku.storage.server.rocksdb.core.RocksDbInstanceFactory.<clinit>(RocksDbInstanceFactory.java:44)\r\n        at tech.pegasys.teku.storage.server.rocksdb.RocksDbDatabase.createV4(RocksDbDatabase.java:96)\r\n        at tech.pegasys.teku.storage.server.VersionedDatabaseFactory.createV5Database(VersionedDatabaseFactory.java:170)\r\n        at tech.pegasys.teku.storage.server.VersionedDatabaseFactory.createDatabase(VersionedDatabaseFactory.java:119)\r\n        at tech.pegasys.teku.services.chainstorage.StorageService.lambda$doStart$0(StorageService.java:54)\r\n        at tech.pegasys.teku.infrastructure.async.SafeFuture.fromRunnable(SafeFuture.java:138)\r\n        at tech.pegasys.teku.services.chainstorage.StorageService.doStart(StorageService.java:44)\r\n        at tech.pegasys.teku.service.serviceutils.Service.start(Service.java:33)\r\n        at tech.pegasys.teku.services.ServiceController.doStart(ServiceController.java:51)\r\n        ... 14 more\r\nTeku failed to start\r\n```\r\n\r\n### Versions (Add all that apply)\r\n* Software version: [`teku/v0.12.4-dev-1dc98016/linux-x86_64/-ubuntu-openjdk64bitservervm-java-11`]\r\n* Java version: \r\n[`openjdk version \"11.0.8\" 2020-07-14\r\nOpenJDK Runtime Environment (build 11.0.8+10-post-Ubuntu-0ubuntu120.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.8+10-post-Ubuntu-0ubuntu120.04, mixed mode, sharing)`]\r\n\r\n* OS Name & Version: [`Ubuntu 20.04.1 LTS`]\r\n* Kernel Version:  [`Linux earth 5.4.0-42-generic #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux`]\r\n\r\n### Additional Information\r\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/2640/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/679448996",
    "html_url": "https://github.com/ConsenSys/teku/issues/2640#issuecomment-679448996",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640",
    "id": 679448996,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3OTQ0ODk5Ng==",
    "user": {
      "login": "rolfyone",
      "id": 2967240,
      "node_id": "MDQ6VXNlcjI5NjcyNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2967240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rolfyone",
      "html_url": "https://github.com/rolfyone",
      "followers_url": "https://api.github.com/users/rolfyone/followers",
      "following_url": "https://api.github.com/users/rolfyone/following{/other_user}",
      "gists_url": "https://api.github.com/users/rolfyone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rolfyone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rolfyone/subscriptions",
      "organizations_url": "https://api.github.com/users/rolfyone/orgs",
      "repos_url": "https://api.github.com/users/rolfyone/repos",
      "events_url": "https://api.github.com/users/rolfyone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rolfyone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-25T01:28:15Z",
    "updated_at": "2020-08-25T01:28:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like rocksdb is using the temp dir to extract a shared object, and the /tmp is marked as noexec...\n\nThere's a couple of options:\n\n - could remove noexec on the /tmp mount so things are executable\n   - can be done permanently in the fstab, or temporarily as `sudo mount /tmp -o remount,exec`\n \n- could change tmpdir so that executables can be run from the tmpdir for the application...\n\n```\nmkdir tmp\nexport TMPDIR=`pwd`/tmp\n```\nin the shell before executing teku would create a new temp folder under the current working folder, then set that as the tempdir to use for the applications within that shell...",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/679448996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/680011386",
    "html_url": "https://github.com/ConsenSys/teku/issues/2640#issuecomment-680011386",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640",
    "id": 680011386,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDAxMTM4Ng==",
    "user": {
      "login": "jnew00",
      "id": 4602100,
      "node_id": "MDQ6VXNlcjQ2MDIxMDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4602100?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnew00",
      "html_url": "https://github.com/jnew00",
      "followers_url": "https://api.github.com/users/jnew00/followers",
      "following_url": "https://api.github.com/users/jnew00/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnew00/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnew00/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnew00/subscriptions",
      "organizations_url": "https://api.github.com/users/jnew00/orgs",
      "repos_url": "https://api.github.com/users/jnew00/repos",
      "events_url": "https://api.github.com/users/jnew00/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnew00/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-25T13:03:28Z",
    "updated_at": "2020-08-25T13:03:28Z",
    "author_association": "NONE",
    "body": "This worked. Thank you.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/680011386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/680226569",
    "html_url": "https://github.com/ConsenSys/teku/issues/2640#issuecomment-680226569",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640",
    "id": 680226569,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MDIyNjU2OQ==",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-25T19:30:10Z",
    "updated_at": "2020-08-25T19:30:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "TODO: Check if we can write to /tmp, if not check if we can write instead to $HOME or the data directory.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/680226569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1046447690",
    "html_url": "https://github.com/ConsenSys/teku/issues/2640#issuecomment-1046447690",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/2640",
    "id": 1046447690,
    "node_id": "IC_kwDOCM9I9M4-X4ZK",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-21T03:55:52Z",
    "updated_at": "2022-02-21T03:55:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "I haven't had another report of this since 2020 and we managed to solve the immediate issue so going to close this one.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/1046447690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/1792",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/1792/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/1792/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/1792/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/1792",
  "id": 618625573,
  "node_id": "MDU6SXNzdWU2MTg2MjU1NzM=",
  "number": 1792,
  "title": " java.util.NoSuchElementException: No value present",
  "user": {
    "login": "MDionSijan",
    "id": 25801298,
    "node_id": "MDQ6VXNlcjI1ODAxMjk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/25801298?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MDionSijan",
    "html_url": "https://github.com/MDionSijan",
    "followers_url": "https://api.github.com/users/MDionSijan/followers",
    "following_url": "https://api.github.com/users/MDionSijan/following{/other_user}",
    "gists_url": "https://api.github.com/users/MDionSijan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MDionSijan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MDionSijan/subscriptions",
    "organizations_url": "https://api.github.com/users/MDionSijan/orgs",
    "repos_url": "https://api.github.com/users/MDionSijan/repos",
    "events_url": "https://api.github.com/users/MDionSijan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MDionSijan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/ConsenSys/teku/milestones/6",
    "html_url": "https://github.com/ConsenSys/teku/milestone/6",
    "labels_url": "https://api.github.com/repos/ConsenSys/teku/milestones/6/labels",
    "id": 5455481,
    "node_id": "MDk6TWlsZXN0b25lNTQ1NTQ4MQ==",
    "number": 6,
    "title": "Centaur Sprint 15",
    "description": "",
    "creator": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 3,
    "state": "closed",
    "created_at": "2020-05-23T22:21:03Z",
    "updated_at": "2021-11-16T09:57:20Z",
    "due_on": "2020-06-02T07:00:00Z",
    "closed_at": "2021-11-16T09:57:20Z"
  },
  "comments": 2,
  "created_at": "2020-05-15T01:02:42Z",
  "updated_at": "2020-06-03T03:30:19Z",
  "closed_at": "2020-06-03T03:30:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/PegasysEng/teku/blob/master/CODE-OF-CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging wiki: https://github.com/PegasysEng/teku/wiki/debugging -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3APegasysEng/Teku -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nAs a developer, I want to sync to Schlesi.\r\n\r\n### Acceptance Criteria\r\n*Sync to Schlesi without the exception\r\n\r\n### Steps to Reproduce (Bug)\r\nWith docker image\r\n1. Attempt to sync to Schlesi\r\n2. Hit Out Of Memory error\r\n3. Restart Teku\r\n4. Hit exception\r\n\r\n**Expected behavior:** \r\nNo exception is thrown.\r\n\r\n**Actual behavior:** \r\n`java.util.NoSuchElementException: No value present` exception is thrown.\r\n\r\n**Frequency:**\r\nHappened once.\r\n\r\n### Versions (Add all that apply)\r\n* Software version: `351b6c2c89b3`\r\n* OS Name & Version: Windows 10, Docker w/ linux container\r\n* Docker Version: [`19.03.8, build afacb8b`]\r\n\r\n\r\n### Additional Information\r\n\r\nLogged Exception\r\n\r\n`\r\n23:58:37.545 INFO  - Sync Event *** Current slot: 126593, Head slot: 19524, Connected peers: 6                          23:58:52.839 INFO  - Sync Event *** Current slot: 126594, Head slot: 19529, Connected peers: 6                          23:59:13.962 INFO  - Sync Event *** Current slot: 126595, Head slot: 19535, Connected peers: 6                          23:59:13.973 INFO  - Sync Event *** Current slot: 126596, Head slot: 19535, Connected peers: 7                          23:59:24.368 INFO  - Sync Event *** Current slot: 126597, Head slot: 19537, Connected peers: 8                          Exception in thread \"Thread-14281\" java.util.NoSuchElementException: No value present                                           at java.base/java.util.Optional.orElseThrow(Optional.java:382)                                                          at org.ethereum.beacon.discovery.storage.NodeTableImpl$ClosestNodeIterator.loadNextBatch(NodeTableImpl.java:186)        at org.ethereum.beacon.discovery.storage.NodeTableImpl$ClosestNodeIterator.hasNext(NodeTableImpl.java:145)              at java.base/java.util.Spliterators$IteratorSpliterator.tryAdvance(Spliterators.java:1811)                              at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)                           at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)                            at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)                                      at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)                               at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)                              at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)                        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)                                      at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)                                     at org.ethereum.beacon.discovery.task.RecursiveLookupTask.sendRequests(RecursiveLookupTask.java:60)                     at org.ethereum.beacon.discovery.task.RecursiveLookupTask.execute(RecursiveLookupTask.java:42)                          at org.ethereum.beacon.discovery.task.DiscoveryTaskManager.searchForNewPeers(DiscoveryTaskManager.java:234)             at org.ethereum.beacon.discovery.DiscoverySystem.searchForNewPeers(DiscoverySystem.java:99)                             at tech.pegasys.teku.networking.p2p.discovery.discv5.DiscV5Service.searchForPeers(DiscV5Service.java:78)                at tech.pegasys.teku.networking.p2p.connection.ConnectionManager.searchForPeers(ConnectionManager.java:86)              at tech.pegasys.teku.util.async.DelayedExecutorAsyncRunner.lambda$runAsync$1(DelayedExecutorAsyncRunner.java:57)        at java.base/java.lang.Thread.run(Thread.java:834)                                                              23:59:37.935 INFO  - Sync Event *** Current slot: 126598, Head slot: 19542, Connected peers: 6                          23:59:55.482 INFO  - Sync Event *** Current slot: 126599, Head slot: 19544, Connected peers: 6                          00:00:04.377 INFO  - Sync Event *** Current slot: 126600, Head slot: 19545, Connected peers: 6                          00:00:19.518 INFO  - Sync Event *** Current slot: 126601, Head slot: 19548, Connected peers: 6    `\r\n",
  "closed_by": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/1792/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/1792/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/631861542",
    "html_url": "https://github.com/ConsenSys/teku/issues/1792#issuecomment-631861542",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1792",
    "id": 631861542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMTg2MTU0Mg==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-21T03:45:08Z",
    "updated_at": "2020-05-21T03:45:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for this report.   The exception stems from the discv5 library so I've implemented a fix there.  Apart from the noise in the logs the only impact is that the current round of discovery fails but peer search happens periodically so it will carry on next time.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/631861542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/637931187",
    "html_url": "https://github.com/ConsenSys/teku/issues/1792#issuecomment-637931187",
    "issue_url": "https://api.github.com/repos/ConsenSys/teku/issues/1792",
    "id": 637931187,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzkzMTE4Nw==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-03T03:30:19Z",
    "updated_at": "2020-06-03T03:30:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Pulled in latest discovery dependency that includes the fix for this.",
    "reactions": {
      "url": "https://api.github.com/repos/ConsenSys/teku/issues/comments/637931187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

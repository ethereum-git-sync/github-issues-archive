{
  "url": "https://api.github.com/repos/ConsenSys/teku/issues/4845",
  "repository_url": "https://api.github.com/repos/ConsenSys/teku",
  "labels_url": "https://api.github.com/repos/ConsenSys/teku/issues/4845/labels{/name}",
  "comments_url": "https://api.github.com/repos/ConsenSys/teku/issues/4845/comments",
  "events_url": "https://api.github.com/repos/ConsenSys/teku/issues/4845/events",
  "html_url": "https://github.com/ConsenSys/teku/issues/4845",
  "id": 1097637312,
  "node_id": "I_kwDOCM9I9M5BbJ3A",
  "number": 4845,
  "title": "[Merge] too many `engine_` calls in parallel make EL struggle and calls timeout",
  "user": {
    "login": "tbenr",
    "id": 15999009,
    "node_id": "MDQ6VXNlcjE1OTk5MDA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/15999009?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tbenr",
    "html_url": "https://github.com/tbenr",
    "followers_url": "https://api.github.com/users/tbenr/followers",
    "following_url": "https://api.github.com/users/tbenr/following{/other_user}",
    "gists_url": "https://api.github.com/users/tbenr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tbenr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tbenr/subscriptions",
    "organizations_url": "https://api.github.com/users/tbenr/orgs",
    "repos_url": "https://api.github.com/users/tbenr/repos",
    "events_url": "https://api.github.com/users/tbenr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tbenr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-01-10T09:16:55Z",
  "updated_at": "2022-01-12T03:33:28Z",
  "closed_at": "2022-01-12T03:33:28Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nin case of network instability during optimistic sync, when we start having several optimistic heads in protoarray to re-execute against EL, we could overloading the EL which cant keep up. In those situation we start getting timeout on latest calls (and also ForkChoicePayloadExecutor may occur meanwhile)\r\n\r\nduring issues on kintsugi network we accumulated at least 30 optimistic heads. `OptimisticHeadValidator` run them all in parallel. We were hitting the worst case scenario in which the payloads was actually executed (which may potentially take up to 1-2 seconds each to execute)\r\n\r\npotential solutions I have in mind so far:\r\n- limit\\queueing `OptimisticHeadValidator` backlog\r\n- introduce a QoS\\reatelimiting ExecutionEngineClient which may manage a max concurrent engine calls plus some logic on prioritising forkchoice calls over the one coming from  `OptimisticHeadValidator`\r\n",
  "closed_by": {
    "login": "tbenr",
    "id": 15999009,
    "node_id": "MDQ6VXNlcjE1OTk5MDA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/15999009?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tbenr",
    "html_url": "https://github.com/tbenr",
    "followers_url": "https://api.github.com/users/tbenr/followers",
    "following_url": "https://api.github.com/users/tbenr/following{/other_user}",
    "gists_url": "https://api.github.com/users/tbenr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tbenr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tbenr/subscriptions",
    "organizations_url": "https://api.github.com/users/tbenr/orgs",
    "repos_url": "https://api.github.com/users/tbenr/repos",
    "events_url": "https://api.github.com/users/tbenr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tbenr/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ConsenSys/teku/issues/4845/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ConsenSys/teku/issues/4845/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

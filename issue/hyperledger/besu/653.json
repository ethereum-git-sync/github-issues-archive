{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/653",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/653/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/653/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/653/events",
  "html_url": "https://github.com/hyperledger/besu/issues/653",
  "id": 594932178,
  "node_id": "MDU6SXNzdWU1OTQ5MzIxNzg=",
  "number": 653,
  "title": "A node with misconfigured  min-gas-price will silently drop remote transactions",
  "user": {
    "login": "magooster",
    "id": 12111442,
    "node_id": "MDQ6VXNlcjEyMTExNDQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/12111442?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/magooster",
    "html_url": "https://github.com/magooster",
    "followers_url": "https://api.github.com/users/magooster/followers",
    "following_url": "https://api.github.com/users/magooster/following{/other_user}",
    "gists_url": "https://api.github.com/users/magooster/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/magooster/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/magooster/subscriptions",
    "organizations_url": "https://api.github.com/users/magooster/orgs",
    "repos_url": "https://api.github.com/users/magooster/repos",
    "events_url": "https://api.github.com/users/magooster/events{/privacy}",
    "received_events_url": "https://api.github.com/users/magooster/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-04-06T09:02:08Z",
  "updated_at": "2020-04-16T03:14:01Z",
  "closed_at": "2020-04-16T03:14:00Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# Description\r\nAs a node operator, I want to log/report when remote transactions are dropped so that I can quickly identify misconfiguration issues. \r\n\r\n### Acceptance Criteria\r\n* Besu logs/metrics contain notification of dropped transactions due to too low gas price.\r\n\r\n### Steps to Reproduce\r\n1. Add a validating node to an existing zero-gas network with min-gas price not set to zero\r\n2. Submit transactions to a node with min-gas-price set to zero\r\n3. Check for empty blocks and/or the validating nodes transaction pool (will be empty)\r\n\r\n**Expected behavior:** [What you expect to happen]\r\n\r\nNode should log that remote transactions are being dropped\r\n\r\n**Actual behavior:** [What actually happens]\r\n\r\nNode silently drops remote transactions with gasPrice < nodes minimum gas price.\r\n\r\n**Frequency:** [What percentage of the time does it occur?]\r\n\r\nAll the time in a zero gas network.\r\n\r\n### Versions (Add all that apply)\r\n* Software version:  1.4.x, 1.3.x\r\n\r\n### Additional Information\r\n\r\nThis is especially critical for validating nodes, as this results in empty blocks causing network throughput to fall and transactions to take longer to process.\r\n\r\nThis issue is obvious when submitting transactions directly to a node as the JSON-RPC interface will return an error.\r\n\r\nDocumentation on min-gas-price needs to explicitly call this out especially for a zero gas network.",
  "closed_by": {
    "login": "MadelineMurray",
    "id": 43356962,
    "node_id": "MDQ6VXNlcjQzMzU2OTYy",
    "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MadelineMurray",
    "html_url": "https://github.com/MadelineMurray",
    "followers_url": "https://api.github.com/users/MadelineMurray/followers",
    "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
    "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
    "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
    "repos_url": "https://api.github.com/users/MadelineMurray/repos",
    "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/653/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/653/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614305546",
    "html_url": "https://github.com/hyperledger/besu/issues/653#issuecomment-614305546",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/653",
    "id": 614305546,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDMwNTU0Ng==",
    "user": {
      "login": "rain-on",
      "id": 37158202,
      "node_id": "MDQ6VXNlcjM3MTU4MjAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/37158202?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rain-on",
      "html_url": "https://github.com/rain-on",
      "followers_url": "https://api.github.com/users/rain-on/followers",
      "following_url": "https://api.github.com/users/rain-on/following{/other_user}",
      "gists_url": "https://api.github.com/users/rain-on/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rain-on/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rain-on/subscriptions",
      "organizations_url": "https://api.github.com/users/rain-on/orgs",
      "repos_url": "https://api.github.com/users/rain-on/repos",
      "events_url": "https://api.github.com/users/rain-on/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rain-on/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-15T22:11:07Z",
    "updated_at": "2020-04-15T22:14:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @magooster,\r\nIt's worth considering the following when approaching this issue:\r\n\r\n1. In an Ethereum network, transactions are dropped regularly, each miner effectively has its own set of rules for transaction selection (Besu is quite simple, and selects anything above a threshold (min-gas-price)). Usually, the rules are such that \"cheap\" transactions don't get mined.\r\n\r\n2. In the situation above, the 0-gas-price transaction is only being ignored by one of the validators, and thus will be mined in the next block (which would be proposed by a different validator).\r\n\r\n3. While we talk about \"zero gas networks\" - the reality is, each node is completely independent of the others, there is no overarching controller. So having each validator with a different min-gas-price is a legal configuration.\r\n\r\nFinally - there is a JSON RPC on Besu \"eth_gasPrice\" which will return the min-gas-price set for the node - so while it won't log an message for each ignored transaction, you are able to query a node to confirm its configuration.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614305546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614391319",
    "html_url": "https://github.com/hyperledger/besu/issues/653#issuecomment-614391319",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/653",
    "id": 614391319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDM5MTMxOQ==",
    "user": {
      "login": "MadelineMurray",
      "id": 43356962,
      "node_id": "MDQ6VXNlcjQzMzU2OTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MadelineMurray",
      "html_url": "https://github.com/MadelineMurray",
      "followers_url": "https://api.github.com/users/MadelineMurray/followers",
      "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
      "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
      "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
      "repos_url": "https://api.github.com/users/MadelineMurray/repos",
      "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-16T03:13:28Z",
    "updated_at": "2020-04-16T03:13:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Moving this to a docs issue so we can make this expected behaviour clearer. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614391319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614391489",
    "html_url": "https://github.com/hyperledger/besu/issues/653#issuecomment-614391489",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/653",
    "id": 614391489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDM5MTQ4OQ==",
    "user": {
      "login": "MadelineMurray",
      "id": 43356962,
      "node_id": "MDQ6VXNlcjQzMzU2OTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MadelineMurray",
      "html_url": "https://github.com/MadelineMurray",
      "followers_url": "https://api.github.com/users/MadelineMurray/followers",
      "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
      "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
      "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
      "repos_url": "https://api.github.com/users/MadelineMurray/repos",
      "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-16T03:14:01Z",
    "updated_at": "2020-04-16T03:14:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Issue moved to [hyperledger/besu-docs #322](https://github.com/hyperledger/besu-docs/issues/322) via [**ZenHub**](https://www.zenhub.com/)\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614391489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1464/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1464/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1464/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1464",
  "id": 723179867,
  "node_id": "MDU6SXNzdWU3MjMxNzk4Njc=",
  "number": 1464,
  "title": "Slow execution (spurious idle-periods during startup)",
  "user": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2020-10-16T12:36:58Z",
  "updated_at": "2020-10-19T14:48:47Z",
  "closed_at": "2020-10-19T14:48:47Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "This might not be an error at all, I'm just trying to figure out why `evmtool` is extremely slow on my machine, and I noticed the same/similar happening with `besu` too. \r\n\r\nI compiled latest `besu` (at `2d7cdf0da4cf7dd2a5f7db5de750ef6358b0f73a`), and ran it, like so, on a little 4-core NUC unit. \r\n```\r\n~/besu$ ./build/install/besu/bin/besu --logging=ALL\r\nSetting logging level to ALL\r\n2020-10-16 14:23:38.046+02:00 | main | INFO  | AltBN128PairingPrecompiledContract | Using native alt bn128\r\n2020-10-16 14:27:03.520+02:00 | main | INFO  | SECP256K1 | Using native secp256k1\r\n```\r\nThere is a four-minute gap between those lines, where seemingly nothing happens. There is almost no IO, there is almost zero processor use, and I have no idea what's going on. After that, things start happening at a rapid pace: \r\n```\r\n2020-10-16 14:23:38.046+02:00 | main | INFO  | AltBN128PairingPrecompiledContract | Using native alt bn128\r\n2020-10-16 14:27:03.520+02:00 | main | INFO  | SECP256K1 | Using native secp256k1\r\n2020-10-16 14:27:03.529+02:00 | main | INFO  | Besu | Starting Besu version: besu/v20.10.1-dev-2d7cdf0d/linux-x86_64/openjdk-java-14\r\n2020-10-16 14:27:03.560+02:00 | main | DEBUG | ResourceLeakDetector | -Dio.netty.leakDetection.level: simple\r\n2020-10-16 14:27:03.560+02:00 | main | DEBUG | ResourceLeakDetector | -Dio.netty.leakDetection.targetRecords: 4\r\n2020-10-16 14:27:03.567+02:00 | main | DEBUG | InternalThreadLocalMap | -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024\r\n2020-10-16 14:27:03.567+02:00 | main | DEBUG | InternalThreadLocalMap | -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096\r\n2020-10-16 14:27:03.572+02:00 | main | DEBUG | MultithreadEventLoopGroup | -Dio.netty.eventLoopThreads: 8\r\n2020-10-16 14:27:03.586+02:00 | main | DEBUG | NioEventLoop | -Dio.netty.noKeySetOptimization: false\r\n2020-10-16 14:27:03.586+02:00 | main | DEBUG | NioEventLoop | -Dio.netty.selectorAutoRebuildThreshold: 512\r\n2020-10-16 14:27:03.594+02:00 | main | DEBUG | PlatformDependent0 | -Dio.netty.noUnsafe: false\r\n2020-10-16 14:27:03.595+02:00 | main | DEBUG | PlatformDependent0 | Java version: 14\r\n2020-10-16 14:27:03.596+02:00 | main | DEBUG | PlatformDependent0 | sun.misc.Unsafe.theUnsafe: available\r\n2020-10-16 14:27:03.596+02:00 | main | DEBUG | PlatformDependent0 | sun.misc.Unsafe.copyMemory: available\r\n2020-10-16 14:27:03.597+02:00 | main | DEBUG | PlatformDependent0 | java.nio.Buffer.address: available\r\n2020-10-16 14:27:03.597+02:00 | main | DEBUG | PlatformDependent0 | direct buffer constructor: available\r\n2020-10-16 14:27:03.598+02:00 | main | DEBUG | PlatformDependent0 | java.nio.Bits.unaligned: available, true\r\n2020-10-16 14:27:03.599+02:00 | main | DEBUG | PlatformDependent0 | jdk.internal.misc.Unsafe.allocateUninitializedArray(int): available\r\n2020-10-16 14:27:03.599+02:00 | main | DEBUG | PlatformDependent0 | java.nio.DirectByteBuffer.<init>(long, int): available\r\n2020-10-16 14:27:03.600+02:00 | main | DEBUG | PlatformDependent | sun.misc.Unsafe: available\r\n2020-10-16 14:27:03.600+02:00 | main | DEBUG | PlatformDependent | maxDirectMemory: 8344567808 bytes (maybe)\r\n2020-10-16 14:27:03.600+02:00 | main | DEBUG | PlatformDependent | -Dio.netty.tmpdir: /tmp (java.io.tmpdir)\r\n2020-10-16 14:27:03.600+02:00 | main | DEBUG | PlatformDependent | -Dio.netty.bitMode: 64 (sun.arch.data.model)\r\n2020-10-16 14:27:03.601+02:00 | main | DEBUG | PlatformDependent | -Dio.netty.maxDirectMemory: 8344567808 bytes\r\n2020-10-16 14:27:03.601+02:00 | main | DEBUG | PlatformDependent | -Dio.netty.uninitializedArrayAllocationThreshold: 1024\r\n2020-10-16 14:27:03.602+02:00 | main | DEBUG | CleanerJava9 | java.nio.ByteBuffer.cleaner(): available\r\n2020-10-16 14:27:03.602+02:00 | main | DEBUG | PlatformDependent | -Dio.netty.noPreferDirect: false\r\n2020-10-16 14:27:03.607+02:00 | main | DEBUG | PlatformDependent | org.jctools-core.MpscChunkedArrayQueue: available\r\n```\r\n\r\nRunning it a second time, it came up very quickly: \r\n```\r\nSetting logging level to ALL\r\n2020-10-16 14:32:47.648+02:00 | main | INFO  | AltBN128PairingPrecompiledContract | Using native alt bn128\r\n2020-10-16 14:32:48.228+02:00 | main | INFO  | SECP256K1 | Using native secp256k1\r\n2020-10-16 14:32:48.233+02:00 | main | INFO  | Besu | Starting Besu version: besu/v20.10.1-dev-2d7cdf0d/linux-x86_64/openjdk-java-14\r\n```\r\nRunning it a third time, it stalled for about 2 minutes again: \r\n```\r\n2020-10-16 14:32:55.522+02:00 | main | INFO  | AltBN128PairingPrecompiledContract | Using native alt bn128\r\n2020-10-16 14:35:09.658+02:00 | main | INFO  | SECP256K1 | Using native secp256k1\r\n2020-10-16 14:35:09.665+02:00 | main | INFO  | Besu | Starting Besu version: besu/v20.10.1-dev-2d7cdf0d/linux-x86_64/openjdk-java-14\r\n2020-10-16 14:35:09.705+02:00 | main | DEBUG | ResourceLeakDetector | -Dio.netty.leakDetection.level: simple\r\n```\r\nAny idea what's going on here? ",
  "closed_by": {
    "login": "shemnon",
    "id": 38109,
    "node_id": "MDQ6VXNlcjM4MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shemnon",
    "html_url": "https://github.com/shemnon",
    "followers_url": "https://api.github.com/users/shemnon/followers",
    "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
    "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
    "organizations_url": "https://api.github.com/users/shemnon/orgs",
    "repos_url": "https://api.github.com/users/shemnon/repos",
    "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shemnon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1464/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1464/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710027687",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710027687",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710027687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDAyNzY4Nw==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T12:54:57Z",
    "updated_at": "2020-10-16T12:54:57Z",
    "author_association": "NONE",
    "body": "If I use \r\n```\r\n./build/install/besu/bin/besu --logging=ALL --Xsecp256k1-native-enabled false\r\n```\r\nThen I don't experience those idle-periods during boot. :shrug: ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710027687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710062915",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710062915",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710062915,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA2MjkxNQ==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T13:55:49Z",
    "updated_at": "2020-10-16T13:56:56Z",
    "author_association": "MEMBER",
    "body": "My guess is that the bitcoin core elliptic curve binary is blocking on native randomness, we've seen that in our acceptance tests with some of our acceptance tests on the java side.  (secure by default, side channel attacks, yadda yadda yadda).\r\n\r\nTo turn off this randomization set either JAVA_OPTS or BESU_OPTS environmental variables to \r\n`-Dsecp256k1.randomize=false` - this will tell the library integration to skip the randomization step.  Since it's test code this should be fine, but the standard disclaimer of \"you shouldn't do this in production signing real money transactions\" applies.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710062915/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710095345",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710095345",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710095345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA5NTM0NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T14:53:27Z",
    "updated_at": "2020-10-16T14:53:27Z",
    "author_association": "NONE",
    "body": "Yes, that does fix the idle-period. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710095345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710096231",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710096231",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710096231,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA5NjIzMQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T14:54:56Z",
    "updated_at": "2020-10-16T14:54:56Z",
    "author_association": "NONE",
    "body": "Heh, the `evm` execution went from 3-5 minutes down to a couple of seconds :+1: ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710096231/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710096589",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710096589",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710096589,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA5NjU4OQ==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T14:55:37Z",
    "updated_at": "2020-10-16T14:55:37Z",
    "author_association": "MEMBER",
    "body": "I think I'll make it standard for EVMTool since it's non-production.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710096589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710204831",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710204831",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710204831,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDIwNDgzMQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T16:45:24Z",
    "updated_at": "2020-10-16T16:45:24Z",
    "author_association": "NONE",
    "body": "Running them in a batch, I now did 10K statetests in 5 minutes. As far as I'm concerned, this issue can be closed, but I'll leave it open if you want to have it as a reminder to fix the standard. \r\nIt seems very odd, btw, why the random should be starved. It's a standard `Ubuntu 20.04.1 LTS` running on an intel NUC. It's running an X-server, dunno if java magic tries to tweak out bits of random from some UI-components. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710204831/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710226835",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710226835",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710226835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDIyNjgzNQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T17:01:02Z",
    "updated_at": "2020-10-16T17:01:02Z",
    "author_association": "NONE",
    "body": "This also works, and may be a better solution: \"-Djava.security.egd=file:/dev/./urandom\". Some people will tell you that `urandom` isn't good enough, but here's what Thomas Ptacek has to say about it: https://sockpuppet.org/blog/2014/02/25/safely-generate-random-numbers/\r\n\r\n> Use urandom\r\n>\r\n> Use urandom. Use urandom. Use urandom. Use urandom. Use urandom. Use urandom.\r\n> But what about for crypto keys?\r\n> \r\n> Still urandom.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710226835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710317449",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710317449",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710317449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDMxNzQ0OQ==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T17:56:26Z",
    "updated_at": "2020-10-16T17:56:26Z",
    "author_association": "MEMBER",
    "body": "We've still seen that solution block as well, it was one of our first attempts.  Also, that won't propagate down into the native secp256k1 code, only java managed encryption.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710317449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710763291",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-710763291",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 710763291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDc2MzI5MQ==",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-17T06:56:41Z",
    "updated_at": "2020-10-17T06:56:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Note that in Besu's (then Pantheon) first audit, one of the issues was that we were using `/dev/random` and the recommendation was to use `/dev/urandom` by default.  So assuming `-Dsecp256k1.randomize=false` does map to use `/dev/urandom` instead of `/dev/random` then enabling it by default is likely the more secure option. Especially since users could deliberately target Besu and attempt to exhaust entropy by submitting a lot of transactions that use these precompiles.\r\n\r\nBut this is a drive by comment so feel free to ignore as I may be missing some context. :)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/710763291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711133690",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-711133690",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 711133690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTEzMzY5MA==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-18T08:18:49Z",
    "updated_at": "2020-10-18T08:18:49Z",
    "author_association": "NONE",
    "body": "This would explain two other things -- a lot of hive failures are due to timeouts, e.g. this one: https://hivetests.ethdevops.io/viewer.html?file=results/besu_latest/client-0bc3fcf2.log  . Apparently the idle-period makes it time out. \r\nIt would also explain why the hive execution takes 2+ days for besu. Even in the cases where it doesn't time out, if it adds 30 seconds to the executions of 12K, it adds up. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711133690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711630155",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-711630155",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 711630155,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTYzMDE1NQ==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T06:13:19Z",
    "updated_at": "2020-10-19T06:13:19Z",
    "author_association": "MEMBER",
    "body": "`--Dsecp256k1.randomize=false` turns off the secp256k1 seed randomization, it doesn't make it use different entropy.  It makes it vulnerable to side channel attacks.  So it should default to on for production but for consensus testing all the keys are already known.  And since Besu doesn't do wallets the only real value it provides is related to the node key.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711630155/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711630856",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-711630856",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 711630856,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTYzMDg1Ng==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T06:13:58Z",
    "updated_at": "2020-10-19T06:13:58Z",
    "author_association": "MEMBER",
    "body": "@davemec can you look into what needs to be done to add this flag to our hive tests?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711630856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711654985",
    "html_url": "https://github.com/hyperledger/besu/issues/1464#issuecomment-711654985",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1464",
    "id": 711654985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTY1NDk4NQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T06:32:01Z",
    "updated_at": "2020-10-19T06:59:03Z",
    "author_association": "NONE",
    "body": "I already did it:https://github.com/ethereum/hive/pull/338 . Though I might have to use 'export' instead (fixed now)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/711654985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

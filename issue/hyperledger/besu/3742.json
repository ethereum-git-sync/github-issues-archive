{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3742",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3742/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3742/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3742/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3742",
  "id": 1209222313,
  "node_id": "I_kwDODE2jmc5IE0Sp",
  "number": 3742,
  "title": "Snap sync stall",
  "user": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-04-20T06:30:32Z",
  "updated_at": "2022-04-27T14:05:31Z",
  "closed_at": "2022-04-27T14:05:31Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nTried a snap sync with bonsai storage on MainNet. It wound up stalling and not making any progress for many hours.   Most likely relevant section of the logs is below - it was healing the state then repivoted and that's the last I heard of any sync progress.\r\n\r\nI've restarted it and it's now back to downloading world state nodes and importing blocks.\r\n\r\nThis is on the `dev-teku-besu-ohio-mainnet-shadow-2` box for those with ConsenSys AWS access - feel free to poke around on there or I'm happy to grab more detailed logs etc.\r\n\r\nBesu version: besu/v22.4.0-RC2-dev-24e417d4/linux-x86_64/corretto-java-17\r\n\r\n\r\n```\r\n2022-04-20 00:34:44.139+00:00 | EthScheduler-Services-13 (batchPersistBigStorageData) | INFO  | SnapWorldDownloadState | Retrieved 1164207491 world state nodes\r\n2022-04-20 00:34:46.143+00:00 | EthScheduler-Services-13 (batchPersistBigStorageData) | INFO  | SnapWorldDownloadState | Retrieved 1164409126 world state nodes\r\n2022-04-20 00:34:48.386+00:00 | EthScheduler-Services-8 (batchPersistStorageData) | INFO  | SnapWorldDownloadState | Retrieved 1164609130 world state nodes\r\n2022-04-20 00:34:49.935+00:00 | EthScheduler-Services-3 (batchPersistAccountData) | INFO  | SnapWorldDownloadState | Retrieved 1164818343 world state nodes\r\n2022-04-20 00:34:54.084+00:00 | EthScheduler-Services-18 (batchPersistCodeData) | INFO  | SnapWorldDownloadState | Retrieved 1165018343 world state nodes\r\n2022-04-20 00:34:57.751+00:00 | EthScheduler-Services-8 (batchPersistStorageData) | INFO  | SnapWorldDownloadState | Retrieved 1165220762 world state nodes\r\n2022-04-20 00:34:59.204+00:00 | EthScheduler-Services-13 (batchPersistBigStorageData) | INFO  | SnapWorldDownloadState | Retrieved 1165426568 world state nodes\r\n2022-04-20 00:35:01.168+00:00 | EthScheduler-Services-13 (batchPersistBigStorageData) | INFO  | SnapWorldDownloadState | Retrieved 1165649698 world state nodes\r\n2022-04-20 00:35:03.393+00:00 | EthScheduler-Services-28 (requestCompleteTask) | INFO  | SnapWorldDownloadState | Starting world state heal process from peers (generated nodes 1165819046)\r\n2022-04-20 00:35:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:35:20.113+00:00 | EthScheduler-Services-26 (batchPersistTrieNodeData) | INFO  | SnapWorldDownloadState | Healed 10000 world sync nodes\r\n2022-04-20 00:35:25.279+00:00 | vert.x-eventloop-thread-0 | WARN  | EngineExchangeTransitionConfiguration | not called in 120 seconds, consensus client may not be connected\r\n2022-04-20 00:35:30.348+00:00 | EthScheduler-Services-26 (batchPersistTrieNodeData) | INFO  | SnapWorldDownloadState | Healed 20002 world sync nodes\r\n2022-04-20 00:35:41.716+00:00 | EthScheduler-Services-26 (batchPersistTrieNodeData) | INFO  | SnapWorldDownloadState | Healed 30003 world sync nodes\r\n2022-04-20 00:36:01.800+00:00 | EthScheduler-Services-26 (batchPersistTrieNodeData) | INFO  | SnapWorldDownloadState | Healed 40006 world sync nodes\r\n2022-04-20 00:36:11.851+00:00 | EthScheduler-Services-26 (batchPersistTrieNodeData) | INFO  | SnapWorldDownloadState | Healed 50007 world sync nodes\r\n2022-04-20 00:36:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:36:24.541+00:00 | EthScheduler-Services-26 (batchPersistTrieNodeData) | INFO  | SnapWorldDownloadState | Healed 60010 world sync nodes\r\n2022-04-20 00:36:25.867+00:00 | EthScheduler-Services-24 (checkNewPivotBlock) | INFO  | DynamicPivotBlockManager | Select new pivot block 14618744 0x36d62464ff650fb2ac5b725918e227eae769b1347a5239b71a15f622baa8ebd0\r\n2022-04-20 00:37:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:37:25.379+00:00 | vert.x-eventloop-thread-0 | WARN  | EngineExchangeTransitionConfiguration | not called in 120 seconds, consensus client may not be connected\r\n2022-04-20 00:38:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:39:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:39:25.478+00:00 | vert.x-eventloop-thread-0 | WARN  | EngineExchangeTransitionConfiguration | not called in 120 seconds, consensus client may not be connected\r\n2022-04-20 00:40:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:41:13.896+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-04-20 00:41:25.552+00:00 | vert.x-eventloop-thread-0 | WARN  | EngineExchangeTransitionConfiguration | not called in 120 seconds, consensus client may not be connected\r\n```",
  "closed_by": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3742/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3742/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1105982954",
    "html_url": "https://github.com/hyperledger/besu/issues/3742#issuecomment-1105982954",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3742",
    "id": 1105982954,
    "node_id": "IC_kwDODE2jmc5B6_Xq",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-22T04:09:00Z",
    "updated_at": "2022-04-22T04:09:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think I'll give you a fix today ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1105982954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3959/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3959/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3959/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3959",
  "id": 1268013616,
  "node_id": "I_kwDODE2jmc5LlFow",
  "number": 3959,
  "title": "RPC performance regression since 22.4.0-RC2",
  "user": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 4328706977,
      "node_id": "LA_kwDODE2jmc8AAAABAgLToQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamChupa",
      "name": "TeamChupa",
      "color": "fbca04",
      "default": false,
      "description": "GH issues worked on by Chupacabara Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2022-06-10T20:47:26Z",
  "updated_at": "2022-07-19T08:23:48Z",
  "closed_at": "2022-07-18T19:50:51Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nWe have had a report of RPC performance regression in besu after upgrading from 22.1.x to the latest quaarterly release versions:\r\n![image (1).png](https://images.zenhubusercontent.com/6047871b4cf8bd5fa5c15d7b/33de5ae9-18ec-49d3-8519-172efcb5e265)\r\n\r\nAfter some version bisecting it appears that the performance regression first appears in [22.4.0-RC2](https://github.com/hyperledger/besu/releases/tag/22.4.0-RC2):\r\n\r\n![image.png](https://images.zenhubusercontent.com/6047871b4cf8bd5fa5c15d7b/789dfae9-26da-4377-b299-217747aa42d4)\r\n\r\nAs noted in the chart, versions since 22.4.0-RC2 show a significant latency in rpc response time for light RPC activity (1-2 requests per second).\r\n\r\n### Acceptance Criteria\r\n* identify and address the source of the rpc latency\r\n\r\n### Steps to Reproduce (Bug)\r\nTo observe request latency spike on releases since 22.4.0-RC2\r\n1. use the dev network resources attached to join as a non-validating node\r\n2. at an average rate of 2 requests per second, issue a mix of RPC requests: \r\n  eth_getBlockByNumber Full and eth_getLogs Full \r\n\r\n\r\n**Expected behavior:** no regression in RPC performance\r\n\r\n**Actual behavior:** request latency is unacceptable\r\n\r\n**Frequency:** 100% reproducible with the aforementioned traffic\r\n\r\n### Versions (Add all that apply)\r\n* Software version: 22.4.0-RC2 +\r\n* Java version: jdk 11\r\n* OS Name & Version: [`cat /etc/*release`]\r\n* Kernel Version: [`uname -a`]\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version: [`docker version`]\r\n* Cloud VM, type, size: [Amazon Web Services I3-large]\r\n\r\n### Smart contract information (If you're reporting an issue arising from deploying or calling a smart contract, please supply related information)\r\n* Solidity version [`solc --version`]\r\n* Repo with minimal set of deployable/reproducible contract code - please provide a link\r\n* Please include specifics on how you are deploying/calling the contract \r\n* Have you reproduced the issue on other eth clients\r\n\r\n### Additional Information (Add any of the following or anything else that may be relevant)\r\n* Besu setup info - genesis file, config options\r\ncloud k8s instance pod config:\r\n```\r\n- env:\r\n    - name: JAVA_OPTS\r\n      value: -Xmx16g\r\n    - name: BESU_DATA_PATH\r\n      value: /data\r\n    - name: BESU_SYNC_MODE\r\n      value: FULL\r\n    - name: BESU_BOOTNODES\r\n      value: enode://9cccbaae702d477c5fd4d704a2d6f92a90005f62de980b11b0d042877bf759774cf7d68d358c59427622e87538bc46afa1195d6ac12cb153d6771461c1830d1b@54.243.108.56:30303,enode://d6518f4f318a172158cf73c3e615c4eb488efb14c20b4a2f13570bf01092573222cd6935599a80017512457fb7f229cf6562f9d038b5d0dc98db95074d4a98b3@18.235.247.31:30303\r\n    - name: BESU_RPC_HTTP_ENABLED\r\n      value: \"true\"\r\n    - name: BESU_RPC_HOST\r\n      value: 0.0.0.0\r\n    - name: BESU_RPC_HTTP_API\r\n      value: ETH,NET,WEB3\r\n    - name: BESU_P2P_PORT\r\n      value: \"30303\"\r\n    - name: BESU_HOST_ALLOWLIST\r\n      value: '*'\r\n    - name: BESU_NAT_METHOD\r\n      value: NONE\r\n    - name: BESU_GENESIS_FILE\r\n      value: /genesis/genesis.json\r\n    - name: BESU_P2P_HOST\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: metadata.annotations['dedicated.infura.io/pod-ip']\r\n```\r\n* System info - i3xl, with resource config:\r\n```\r\n    resources:\r\n      requests:\r\n        cpu: 3500m\r\n        memory: 24Gi,\r\n```",
  "closed_by": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3959/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3959/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1152737033",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1152737033",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1152737033,
    "node_id": "IC_kwDODE2jmc5EtV8J",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-10T21:03:41Z",
    "updated_at": "2022-06-10T21:04:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "see [this gist for details on how to connect](https://gist.github.com/garyschulte/c8918a6364e772e65c42123b5213bde7) to the palm dev network where this can be reproduced reliably",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1152737033/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1177727216",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1177727216",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1177727216,
    "node_id": "IC_kwDODE2jmc5GMrDw",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-07T14:43:34Z",
    "updated_at": "2022-07-07T14:43:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@usmansaleem @garyschulte - has there been any progress on this issue?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1177727216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1178503568",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1178503568",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1178503568,
    "node_id": "IC_kwDODE2jmc5GPomQ",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T03:29:32Z",
    "updated_at": "2022-07-08T03:29:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @usmansaleem @garyschulte - has there been any progress on this issue?\r\n\r\nYes, @ahamlat  has identified that the regression was introduced in #3695 and it appears to be related to netty deferring to a native transport library.  Ameziane is out ill currently, but we should be able to have a mitigation for this soon.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1178503568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1178652556",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1178652556",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1178652556,
    "node_id": "IC_kwDODE2jmc5GQM-M",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T07:29:22Z",
    "updated_at": "2022-07-08T07:29:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mbaxter : I compared the performances before and after #3695 and we can notice a real degradation. I used a benchmark created by @usmansaleem with the same throughput during 5 minutes. Here are the results :\r\n### Before PR 3695\r\n\r\n> ================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                    358 (OK=358    KO=-     )\r\n**> mean response time                                    39 (OK=39     KO=-     )**\r\n> std deviation                                         51 (OK=51     KO=-     )\r\n**> response time 50th percentile                         12 (OK=12     KO=-     )**\r\n> response time 75th percentile                         58 (OK=58     KO=-     )\r\n> response time 95th percentile                        144 (OK=144    KO=-     )\r\n**> response time 99th percentile                        221 (OK=221    KO=-     )**\r\n> mean requests/sec                                  4.987 (OK=4.987  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1501 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            0 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n\r\n### After PR 3695\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                  20834 (OK=20834  KO=-     )\r\n**> mean response time                                   484 (OK=484    KO=-     )**\r\n> std deviation                                       1830 (OK=1830   KO=-     )\r\n**> response time 50th percentile                        227 (OK=227    KO=-     )**\r\n> response time 75th percentile                        274 (OK=274    KO=-     )\r\n> response time 95th percentile                        539 (OK=539    KO=-     )\r\n**> response time 99th percentile                      12279 (OK=12279  KO=-     )**\r\n> mean requests/sec                                  4.618 (OK=4.618  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1444 ( 96%)\r\n> 800 ms < t < 1200 ms                                   9 (  1%)\r\n> t > 1200 ms                                           48 (  3%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n\r\nAs Besu is consuming a lot of CPU during these tests, I did some CPU profiling to see which is the hot spot in the two tests\r\n \r\n### Before PR 3695\r\n<img width=\"1256\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5099602/177938270-719f64cc-52b9-4b42-9117-5f91d7671810.png\">\r\n\r\nCPU hot spot : RocksDB.get\r\n\r\n### After PR 3695\r\n<img width=\"1263\" alt=\"image\" src=\"https://user-images.githubusercontent.com/5099602/177938373-766be34e-368f-4e24-b548-e38c8c90a06f.png\">\r\n\r\nCPU hot spot : some calls to native librairies\r\n\r\n@diega : Do you think we can improve the performance of this PR  #3695 ? I was thinking for example about testing Java implementations instead of native librairies",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1178652556/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179091419",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1179091419",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1179091419,
    "node_id": "IC_kwDODE2jmc5GR4Hb",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T15:05:38Z",
    "updated_at": "2022-07-08T15:05:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is a major regression - it is blocking upgrades to RPC nodes on the Palm network.   Have you considered reverting the problematic PR while a fix is worked out?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179091419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179140165",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1179140165",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1179140165,
    "node_id": "IC_kwDODE2jmc5GSEBF",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T15:52:53Z",
    "updated_at": "2022-07-08T15:52:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "It is a pretty major refactor from a couple months back, it might be more difficult to revert it than to mitigate or fix it.  We will prioritize a fix one way or the other.  ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179140165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179199933",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1179199933",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1179199933,
    "node_id": "IC_kwDODE2jmc5GSSm9",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T17:06:56Z",
    "updated_at": "2022-07-08T17:06:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I took a quick look at the revert conflicts - it doesn't look too bad to me.  It really depends on timing, if there's an imminent fix, probably makes sense to just wait on the fix.  But if there's weeks of exploratory work, probably better to just revert it. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179199933/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1182175285",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1182175285",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1182175285,
    "node_id": "IC_kwDODE2jmc5GdpA1",
    "user": {
      "login": "diega",
      "id": 79943,
      "node_id": "MDQ6VXNlcjc5OTQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/79943?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diega",
      "html_url": "https://github.com/diega",
      "followers_url": "https://api.github.com/users/diega/followers",
      "following_url": "https://api.github.com/users/diega/following{/other_user}",
      "gists_url": "https://api.github.com/users/diega/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diega/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diega/subscriptions",
      "organizations_url": "https://api.github.com/users/diega/orgs",
      "repos_url": "https://api.github.com/users/diega/repos",
      "events_url": "https://api.github.com/users/diega/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diega/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T18:15:26Z",
    "updated_at": "2022-07-12T18:15:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mbaxter if you have the environment for running the test, would you try just reverting [70a01962](https://github.com/hyperledger/besu/pull/3695/commits/70a019623e5cb1226d3c6a096609d3e3c3918c8d)? This commit has been lost in the _squash_ but that's the one enabling native transport usage. If the regression is still present after reverting this one, then the problem is somewhere else in the refactor.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1182175285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1183522152",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1183522152",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1183522152,
    "node_id": "IC_kwDODE2jmc5Gix1o",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-13T18:02:34Z",
    "updated_at": "2022-07-13T18:02:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@diega suggested testing the impact of adding `ordered=false` in the declaration of the `blockingHandler` for the HTTP endpoint (ref: https://vertx.io/docs/vertx-web/java/#_using_blocking_handlers)\r\n\r\nAdd false as second argument here: https://github.com/hyperledger/besu/blob/main/ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/JsonRpcHttpService.java#L333 and here https://github.com/hyperledger/besu/blob/main/ethereum/api/src/main/java/org/hyperledger/besu/ethereum/api/jsonrpc/JsonRpcHttpService.java#L344 \r\n\r\nI am paraphrasing his suggestion - but anyone looking at the defect could try the above @mbaxter ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1183522152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1183921551",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1183921551",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1183921551,
    "node_id": "IC_kwDODE2jmc5GkTWP",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T02:43:21Z",
    "updated_at": "2022-07-14T02:43:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "I ran @usmansaleem's [performance tool](https://github.com/usmansaleem/besu-gatling) against the [Palm Testnet](https://docs.palm.io/HowTo/Run-a-Transaction-Node/) at version [22.4.0-RC1](https://github.com/hyperledger/besu/releases/tag/22.4.0-RC1)(before the regression was released) and compared that to `main`, but it doesn't look like the issue is reproducing for me unless I'm reading the output wrong.\r\n\r\nAt 22.4.0-RC1 (before the regression):\r\n```\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                    982 (OK=982    KO=-     )\r\n> mean response time                                     6 (OK=6      KO=-     )\r\n> std deviation                                         26 (OK=26     KO=-     )\r\n> response time 50th percentile                          4 (OK=4      KO=-     )\r\n> response time 75th percentile                          6 (OK=6      KO=-     )\r\n> response time 95th percentile                         11 (OK=11     KO=-     )\r\n> response time 99th percentile                         35 (OK=35     KO=-     )\r\n> mean requests/sec                                   4.97 (OK=4.97   KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1500 (100%)\r\n> 800 ms < t < 1200 ms                                   1 (  0%)\r\n> t > 1200 ms                                            0 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n```\r\n\r\nAnd on `main`:\r\n```\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                    601 (OK=601    KO=-     )\r\n> mean response time                                    11 (OK=11     KO=-     )\r\n> std deviation                                         18 (OK=18     KO=-     )\r\n> response time 50th percentile                         10 (OK=10     KO=-     )\r\n> response time 75th percentile                         14 (OK=14     KO=-     )\r\n> response time 95th percentile                         20 (OK=20     KO=-     )\r\n> response time 99th percentile                         57 (OK=57     KO=-     )\r\n> mean requests/sec                                  4.987 (OK=4.987  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1501 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            0 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n```\r\n\r\n@usmansaleem - any suggestions on the gatling tests?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1183921551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1183974224",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1183974224",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1183974224,
    "node_id": "IC_kwDODE2jmc5GkgNQ",
    "user": {
      "login": "usmansaleem",
      "id": 669527,
      "node_id": "MDQ6VXNlcjY2OTUyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/669527?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/usmansaleem",
      "html_url": "https://github.com/usmansaleem",
      "followers_url": "https://api.github.com/users/usmansaleem/followers",
      "following_url": "https://api.github.com/users/usmansaleem/following{/other_user}",
      "gists_url": "https://api.github.com/users/usmansaleem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/usmansaleem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/usmansaleem/subscriptions",
      "organizations_url": "https://api.github.com/users/usmansaleem/orgs",
      "repos_url": "https://api.github.com/users/usmansaleem/repos",
      "events_url": "https://api.github.com/users/usmansaleem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/usmansaleem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T04:30:04Z",
    "updated_at": "2022-07-14T04:30:04Z",
    "author_association": "MEMBER",
    "body": "@mbaxter I used https://github.com/ConsenSys-Palm/palm-node to create the palm instance and updated the bootnodes etc. as mentioned in this ticket. I set up Besu `22.4.3`, not the RC1 that was reported in the ticket. However, I was **not** able to see the regression in my tests (I even increased the load to 50 total users/sec). However, @ahamlat was able to reproduce regression in the environment that he sat up (I believe he sat up mainnet, not palm dev env).",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1183974224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1184512070",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1184512070",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1184512070,
    "node_id": "IC_kwDODE2jmc5GmjhG",
    "user": {
      "login": "diega",
      "id": 79943,
      "node_id": "MDQ6VXNlcjc5OTQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/79943?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diega",
      "html_url": "https://github.com/diega",
      "followers_url": "https://api.github.com/users/diega/followers",
      "following_url": "https://api.github.com/users/diega/following{/other_user}",
      "gists_url": "https://api.github.com/users/diega/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diega/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diega/subscriptions",
      "organizations_url": "https://api.github.com/users/diega/orgs",
      "repos_url": "https://api.github.com/users/diega/repos",
      "events_url": "https://api.github.com/users/diega/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diega/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-14T14:24:01Z",
    "updated_at": "2022-07-14T17:11:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "I ran the **besu-gatling** default test suite against a fully synced _palm dev_ node (HEAD at 18_438_825) with the following outputs\r\n\r\nOutput for `main (b85b39d30)`\r\n```\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                   3493 (OK=3493   KO=-     )\r\n> mean response time                                     9 (OK=9      KO=-     )\r\n> std deviation                                         90 (OK=90     KO=-     )\r\n> response time 50th percentile                          7 (OK=7      KO=-     )\r\n> response time 75th percentile                          9 (OK=9      KO=-     )\r\n> response time 95th percentile                         10 (OK=10     KO=-     )\r\n> response time 99th percentile                         14 (OK=14     KO=-     )\r\n> mean requests/sec                                  4.938 (OK=4.938  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1500 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            1 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n```\r\n\r\nOutput for `22.4.4 (eefa93fd6)`\r\n```\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                   4033 (OK=4033   KO=-     )\r\n> mean response time                                     9 (OK=9      KO=-     )\r\n> std deviation                                        104 (OK=104    KO=-     )\r\n> response time 50th percentile                          7 (OK=7      KO=-     )\r\n> response time 75th percentile                          8 (OK=8      KO=-     )\r\n> response time 95th percentile                         12 (OK=12     KO=-     )\r\n> response time 99th percentile                         16 (OK=16     KO=-     )\r\n> mean requests/sec                                  4.921 (OK=4.921  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1500 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            1 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n```\r\n\r\nOutput for [`diega/3959_fix (4801d9e70)`](https://github.com/hyperledger/besu/pull/4099)\r\n```\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      2 (OK=2      KO=-     )\r\n> max response time                                   4029 (OK=4029   KO=-     )\r\n> mean response time                                     9 (OK=9      KO=-     )\r\n> std deviation                                        104 (OK=104    KO=-     )\r\n> response time 50th percentile                          5 (OK=5      KO=-     )\r\n> response time 75th percentile                          9 (OK=9      KO=-     )\r\n> response time 95th percentile                         11 (OK=11     KO=-     )\r\n> response time 99th percentile                         22 (OK=22     KO=-     )\r\n> mean requests/sec                                  4.921 (OK=4.921  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1500 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            1 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n```\r\n\r\nbased on these numbers, I can say I can **not** reproduce the reported performance degradation",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1184512070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1188751269",
    "html_url": "https://github.com/hyperledger/besu/issues/3959#issuecomment-1188751269",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3959",
    "id": 1188751269,
    "node_id": "IC_kwDODE2jmc5G2uel",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T08:23:48Z",
    "updated_at": "2022-07-19T08:23:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not able to reproduce anymore, here are the results :\r\n\r\n1. **Version 22.4.3**\r\n\r\n>  curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"web3_clientVersion\",\"params\":[],\"id\":1}' localhost:8545\r\n> {\r\n>   \"jsonrpc\" : \"2.0\",\r\n>   \"id\" : 1,\r\n>   \"result\" : \"besu/v22.4.3/linux-x86_64/corretto-java-17\"\r\n> }\r\n\r\n**Benchmark output**\r\n\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                    767 (OK=767    KO=-     )\r\n**> mean response time                                    91 (OK=91     KO=-     )**\r\n> std deviation                                         76 (OK=76     KO=-     )\r\n**> response time 50th percentile                         69 (OK=69     KO=-     )**\r\n> response time 75th percentile                        134 (OK=134    KO=-     )\r\n> response time 95th percentile                        219 (OK=219    KO=-     )\r\n**> response time 99th percentile                        339 (OK=339    KO=-     )**\r\n> mean requests/sec                                  4.987 (OK=4.987  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1501 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            0 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n\r\n2. **Version** [Diego's fix](https://github.com/hyperledger/besu/pull/4099)\r\n\r\n> curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"web3_clientVersion\",\"params\":[],\"id\":1}' localhost:8545\r\n> {\r\n>   \"jsonrpc\" : \"2.0\",\r\n>   \"id\" : 1,\r\n>   \"result\" : \"besu/v22.7.0-RC2-dev-4801d9e7/linux-x86_64/corretto-java-17\"\r\n> }\r\n\r\n**Benchmark output**\r\n\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                    928 (OK=928    KO=-     )\r\n**> mean response time                                    64 (OK=64     KO=-     )**\r\n> std deviation                                         60 (OK=60     KO=-     )\r\n**> response time 50th percentile                         55 (OK=55     KO=-     )**\r\n> response time 75th percentile                         84 (OK=84     KO=-     )\r\n> response time 95th percentile                        159 (OK=159    KO=-     )\r\n**> response time 99th percentile                        238 (OK=238    KO=-     )**\r\n> mean requests/sec                                  4.987 (OK=4.987  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1500 (100%)\r\n> 800 ms < t < 1200 ms                                   1 (  0%)\r\n> t > 1200 ms                                            0 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n\r\n3. **Version** [PR 3695](https://github.com/hyperledger/besu/pull/3695)\r\n\r\n> curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"web3_clientVersion\",\"params\":[],\"id\":1}' localhost:8545\r\n> {\r\n>   \"jsonrpc\" : \"2.0\",\r\n>   \"id\" : 1,\r\n>   \"result\" : \"besu/v22.4.0-RC2-dev-70a01962/linux-x86_64/corretto-java-17\"\r\n> }\r\n\r\n**Benchmark output**\r\n\r\n================================================================================\r\n---- Global Information --------------------------------------------------------\r\n> request count                                       1501 (OK=1501   KO=0     )\r\n> min response time                                      1 (OK=1      KO=-     )\r\n> max response time                                    404 (OK=404    KO=-     )\r\n**> mean response time                                    52 (OK=52     KO=-     )**\r\n> std deviation                                         53 (OK=53     KO=-     )\r\n**> response time 50th percentile                         35 (OK=35     KO=-     )**\r\n> response time 75th percentile                         71 (OK=71     KO=-     )\r\n> response time 95th percentile                        150 (OK=150    KO=-     )\r\n**> response time 99th percentile                        248 (OK=248    KO=-     )**\r\n> mean requests/sec                                  4.987 (OK=4.987  KO=-     )\r\n---- Response Time Distribution ------------------------------------------------\r\n> t < 800 ms                                          1501 (100%)\r\n> 800 ms < t < 1200 ms                                   0 (  0%)\r\n> t > 1200 ms                                            0 (  0%)\r\n> failed                                                 0 (  0%)\r\n================================================================================\r\n\r\nI had the same results with Java 11.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1188751269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

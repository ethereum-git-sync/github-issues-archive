{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/550",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/550/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/550/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/550/events",
  "html_url": "https://github.com/hyperledger/besu/issues/550",
  "id": 585813382,
  "node_id": "MDU6SXNzdWU1ODU4MTMzODI=",
  "number": 550,
  "title": "Segment private state storage",
  "user": {
    "login": "MadelineMurray",
    "id": 43356962,
    "node_id": "MDQ6VXNlcjQzMzU2OTYy",
    "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MadelineMurray",
    "html_url": "https://github.com/MadelineMurray",
    "followers_url": "https://api.github.com/users/MadelineMurray/followers",
    "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
    "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
    "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
    "repos_url": "https://api.github.com/users/MadelineMurray/repos",
    "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1740324632,
      "node_id": "MDU6TGFiZWwxNzQwMzI0NjMy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/privacy",
      "name": "privacy",
      "color": "d7f99a",
      "default": false,
      "description": "private transactions"
    },
    {
      "id": 2152224197,
      "node_id": "MDU6TGFiZWwyMTUyMjI0MTk3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamRevenant",
      "name": "TeamRevenant",
      "color": "78e298",
      "default": false,
      "description": "GH issues worked on by Revenant Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-03-22T21:12:25Z",
  "updated_at": "2020-10-14T22:54:18Z",
  "closed_at": "2020-10-14T22:54:18Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Right now the private state storage stores\r\n\r\n1. $privateTxHash_LOGS -> the logs emitted from a contract call\r\n2. $privateTxHash_OUTPUT -> the return value of a contract call\r\n3. $blockhash_$pmtHash_METADATA -> the resulting state root for each transaction in each privacy group\r\n\r\nThe goal is to use the comlumnar rocksdb approach to segment the private state storage such that each type of value is in its own column.\r\n\r\nThe benefit of doing this is that it will be a cleaner approach wrt maintainability and it will be more performant.\r\n\r\nAn alternative approach to consider is to squash the data in an object and have only 1 key for the private state storage. It is possible to derive the private tx hash from the combination of block hash and PMT hash. The resulting key value pair would look like this:\r\n\r\n$blockhash_$pmtHash -> {the resulting state root for each transaction in each privacy group, the logs emitted from a contract call, the return value of a contract call}",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/550/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/550/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/603818951",
    "html_url": "https://github.com/hyperledger/besu/issues/550#issuecomment-603818951",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/550",
    "id": 603818951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzgxODk1MQ==",
    "user": {
      "login": "RatanRSur",
      "id": 4733314,
      "node_id": "MDQ6VXNlcjQ3MzMzMTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4733314?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RatanRSur",
      "html_url": "https://github.com/RatanRSur",
      "followers_url": "https://api.github.com/users/RatanRSur/followers",
      "following_url": "https://api.github.com/users/RatanRSur/following{/other_user}",
      "gists_url": "https://api.github.com/users/RatanRSur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RatanRSur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RatanRSur/subscriptions",
      "organizations_url": "https://api.github.com/users/RatanRSur/orgs",
      "repos_url": "https://api.github.com/users/RatanRSur/repos",
      "events_url": "https://api.github.com/users/RatanRSur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RatanRSur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-25T12:46:13Z",
    "updated_at": "2020-03-25T12:46:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @iikirilov , I think I remember you working on this, is that correct?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/603818951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/604033025",
    "html_url": "https://github.com/hyperledger/besu/issues/550#issuecomment-604033025",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/550",
    "id": 604033025,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwNDAzMzAyNQ==",
    "user": {
      "login": "iikirilov",
      "id": 9802500,
      "node_id": "MDQ6VXNlcjk4MDI1MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9802500?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iikirilov",
      "html_url": "https://github.com/iikirilov",
      "followers_url": "https://api.github.com/users/iikirilov/followers",
      "following_url": "https://api.github.com/users/iikirilov/following{/other_user}",
      "gists_url": "https://api.github.com/users/iikirilov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iikirilov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iikirilov/subscriptions",
      "organizations_url": "https://api.github.com/users/iikirilov/orgs",
      "repos_url": "https://api.github.com/users/iikirilov/repos",
      "events_url": "https://api.github.com/users/iikirilov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iikirilov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-25T19:13:20Z",
    "updated_at": "2020-03-25T19:13:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, but it was put in the backlog at the time.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/604033025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

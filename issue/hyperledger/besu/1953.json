{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1953/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1953/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1953/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1953",
  "id": 816222357,
  "node_id": "MDU6SXNzdWU4MTYyMjIzNTc=",
  "number": 1953,
  "title": "Migration script testing ",
  "user": {
    "login": "MadelineMurray",
    "id": 43356962,
    "node_id": "MDQ6VXNlcjQzMzU2OTYy",
    "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MadelineMurray",
    "html_url": "https://github.com/MadelineMurray",
    "followers_url": "https://api.github.com/users/MadelineMurray/followers",
    "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
    "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
    "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
    "repos_url": "https://api.github.com/users/MadelineMurray/repos",
    "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2152224197,
      "node_id": "MDU6TGFiZWwyMTUyMjI0MTk3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamRevenant",
      "name": "TeamRevenant",
      "color": "78e298",
      "default": false,
      "description": "GH issues worked on by Revenant Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2021-02-25T08:49:17Z",
  "updated_at": "2021-04-20T07:13:55Z",
  "closed_at": "2021-04-20T07:13:55Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "`see it work` testing for Orion -> Tessera migration script. Similar to @pinges's privacy on a forking consensus mechanism test. \n\n- [x] Create Besu <> Orion network and submit a number of transactions \n- [x] Migrate Orion -> Tessera \n- [x] Restart network with Besu <> Tessera and confirm private group states match \n",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1953/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1953/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806328199",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-806328199",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 806328199,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjMyODE5OQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T03:02:33Z",
    "updated_at": "2021-03-25T03:38:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Besu > Orion \nrun web3js-eea/concurrentPrivateTransactions/ with 50 tx\nhttps://github.com/ConsenSys/web3js-eea/blob/master/example/concurrentPrivateTransactions/concurrentPrivateTransactions.js\n\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"priv_findPrivacyGroup\",\n    \"params\": [\n        [\n            \"GGilEkXLaQ9yhhtbpBT03Me9iYa7U/mWXxrJhnbl1XY=\"\n        ]\n    ],\n    \"id\": 1\n}\n```\n\n>             \"privacyGroupId\": \"MC4aHjApHsGb0j5glU2iAj5KcR5LId52S0BU9mtdeuY=\",",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806328199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806329124",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-806329124",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 806329124,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjMyOTEyNA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T03:05:07Z",
    "updated_at": "2021-03-25T03:05:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"priv_debugGetStateRoot\",\n    \"params\": [\n        \"MC4aHjApHsGb0j5glU2iAj5KcR5LId52S0BU9mtdeuY=\",\n        \"latest\"\n    ],\n    \"id\": 1\n}\n```\n\n>\n```\n {\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"result\": \"0x69904cc3945ada15579fa6f7f1c95e31555210ac017646b4a1373412281dce82\"\n}\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806329124/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806332841",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-806332841",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 806332841,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjMzMjg0MQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T03:16:39Z",
    "updated_at": "2021-03-25T03:22:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "➜  orion-to-tessera git:(orion-migration-tool) ✗ build/install/migrate/bin/migrate -f ~/workspace/besu-local-nodes/config/orion/orion1.conf -o tessera-migrated.conf tessera.jdbc.user sa tessera.jdbc.password sa tessera.jdbc.url jdbc:h2:./target/h2/tessera-88\n\n\n```\n=== Migration report ===\nMigrated 50 of 50 transactions\nMigrated 1 of 1 privacy groups\n```\n\norion config had:\n```\nworkdir = \"workdir/orion1\"\n#storage = \"leveldb\"\n\nnodeurl = \"http://127.0.0.1:8081/\"\nnodeport = 8081\nnodenetworkinterface = \"0.0.0.0\"\n\nclienturl = \"http://127.0.0.1:8881/\"\nclientport = 8881\nclientnetworkinterface = \"0.0.0.0\"\n\ntls = \"off\"\n\nothernodes = [\"http://127.0.0.1:8081\",\"http://127.0.0.1:8082\",\"http://127.0.0.1:8083\"]\n\npublickeys = [\"keys/orion.pub\"]\nprivatekeys = [\"keys/orion.key\"]\n\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806332841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806334981",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-806334981",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 806334981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjMzNDk4MQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T03:23:04Z",
    "updated_at": "2021-03-25T03:23:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "tessera config gets this:\n\n```\n{\n   \"type\" : \"config\",\n   \"version\" : \"20.10.2-SNAPSHOT\",\n   \"useWhiteList\" : false,\n   \"disablePeerDiscovery\" : false,\n   \"bootstrapNode\" : false,\n   \"jdbc\" : {\n      \"username\" : \"sa\",\n      \"password\" : \"sa\",\n      \"url\" : \"jdbc:h2:./target/h2/tessera-88\",\n      \"autoCreateTables\" : true,\n      \"fetchSize\" : 0\n   },\n   \"serverConfigs\" : [ {\n      \"app\" : \"Q2T\",\n      \"communicationType\" : \"REST\",\n      \"serverAddress\" : \"http://127.0.0.1:8081/\",\n      \"properties\" : {\n      }\n   }, {\n      \"app\" : \"P2P\",\n      \"communicationType\" : \"REST\",\n      \"serverAddress\" : \"http://127.0.0.1:8081/\",\n      \"properties\" : {\n      }\n   } ],\n   \"peer\" : [ {\n      \"url\" : \"http://127.0.0.1:8081\"\n   }, {\n      \"url\" : \"http://127.0.0.1:8082\"\n   }, {\n      \"url\" : \"http://127.0.0.1:8083\"\n   } ],\n   \"keys\" : {\n      \"keyData\" : {\n         \"privateKeyPath\" : \"/Users/sallymacfarlane/workspace/tessera/migration/orion-to-tessera/workdir/orion1/keys/orion.key\",\n         \"publicKeyPath\" : \"/Users/sallymacfarlane/workspace/tessera/migration/orion-to-tessera/workdir/orion1/keys/orion.pub\"\n      }\n   },\n   \"alwaysSendTo\" : [ ],\n   \"features\" : {\n      \"enableRemoteKeyValidation\" : false,\n      \"enablePrivacyEnhancements\" : false\n   },\n   \"encryptor\" : {\n      \"type\" : \"NACL\"\n   },\n   \"mode\" : \"orion\"\n}\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806334981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806340276",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-806340276",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 806340276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjM0MDI3Ng==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T03:39:05Z",
    "updated_at": "2021-03-25T03:39:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "so then running Tessera with that config (fixing the Q2T port to 8881)\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"priv_findPrivacyGroup\",\n    \"params\": [\n        [\n            \"GGilEkXLaQ9yhhtbpBT03Me9iYa7U/mWXxrJhnbl1XY=\"\n        ]\n    ],\n    \"id\": 1\n}\n```\ngives no results\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"result\": []\n}\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806340276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806342273",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-806342273",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 806342273,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjM0MjI3Mw==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T03:46:21Z",
    "updated_at": "2021-03-25T03:52:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "similar issue with running https://github.com/ConsenSys/web3js-eea/tree/master/example/multiNodeExample which creates a group with 2 members\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"priv_findPrivacyGroup\",\n    \"params\": [\n        [\n            \"GGilEkXLaQ9yhhtbpBT03Me9iYa7U/mWXxrJhnbl1XY=\",\n            \"KkOjNLmCI6r+mICrC6l+XuEDjFEzQllaMQMpWLl4y1s=\"\n        ]\n    ],\n    \"id\": 1\n}\n```\nBesu/Orion gives privacy group with ID \"OGD/4dkDZWb4VqgDfElovjYMDAcSiRUiB6fLtFRmugU=\"\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"priv_debugGetStateRoot\",\n    \"params\": [\n        \"OGD/4dkDZWb4VqgDfElovjYMDAcSiRUiB6fLtFRmugU=\",\n        \"latest\"\n    ],\n    \"id\": 1\n}\n```\nwhich has this state root\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"result\": \"0x23b483b707dd23c2798004d689aa958cbdc1f9069a48621b6ad500cb27960217\"\n}\n```\nbut the same priv_findPrivacyGroup call using Besu/Tessera returns no results",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/806342273/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/809061113",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-809061113",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 809061113,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTA2MTExMw==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T04:44:17Z",
    "updated_at": "2021-03-29T04:44:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "With latest migration branch, with the fix for privacy groups. \n```\n*   13183b76c (HEAD -> orion-migration-tool) Merge branch 'orion-migration-tool' of github.com:ConsenSys/tessera into orion-migration-tool\n|\\\n| * ae48f5b88 (upstream/orion-migration-tool) passwords file is also in workdir.\n| * 7ea425729 read in wrong value for privacy group id as in orion db key is in base64 format\n* | 3d539bad3 Merge branch 'orion-migration-tool' of github.com:ConsenSys/tessera into orion-migration-tool\n|\\|\n```\n\nTested with various combinations of batches of transactions, and then using priv_debugGetStateRoot to test that states are equal\nhttps://docs.google.com/spreadsheets/d/1Ty88ok9YqKhSNRWGhiM32v7mKd-tEeda7Gtj1qI5Xq0/edit#gid=0 \nAlso tested migrating a db that is set up for multi-tenancy. \nTested running this script to create privacy groups directly, and after migrating the result is the same: web3js-eea/example/multiTenancy/createPrivacyGroupMultiTenancy.js",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/809061113/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/810801106",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-810801106",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 810801106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMDgwMTEwNg==",
    "user": {
      "login": "MadelineMurray",
      "id": 43356962,
      "node_id": "MDQ6VXNlcjQzMzU2OTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MadelineMurray",
      "html_url": "https://github.com/MadelineMurray",
      "followers_url": "https://api.github.com/users/MadelineMurray/followers",
      "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
      "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
      "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
      "repos_url": "https://api.github.com/users/MadelineMurray/repos",
      "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-31T06:14:24Z",
    "updated_at": "2021-03-31T06:21:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "@macfarla - to add sample command line to run migration and record demo. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/810801106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/810804644",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-810804644",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 810804644,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMDgwNDY0NA==",
    "user": {
      "login": "MadelineMurray",
      "id": 43356962,
      "node_id": "MDQ6VXNlcjQzMzU2OTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/43356962?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MadelineMurray",
      "html_url": "https://github.com/MadelineMurray",
      "followers_url": "https://api.github.com/users/MadelineMurray/followers",
      "following_url": "https://api.github.com/users/MadelineMurray/following{/other_user}",
      "gists_url": "https://api.github.com/users/MadelineMurray/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MadelineMurray/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MadelineMurray/subscriptions",
      "organizations_url": "https://api.github.com/users/MadelineMurray/orgs",
      "repos_url": "https://api.github.com/users/MadelineMurray/repos",
      "events_url": "https://api.github.com/users/MadelineMurray/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MadelineMurray/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-31T06:21:34Z",
    "updated_at": "2021-03-31T06:21:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Have tested with LevelDB only at this point. Use priv_debugGetStateRoot to check has worked correctly. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/810804644/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/810861368",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-810861368",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 810861368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMDg2MTM2OA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-31T07:58:01Z",
    "updated_at": "2021-03-31T18:32:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "How to run it\n1. Build the migration tool. \nFirst, the code is currently on a branch so you have to check that out and build it\nhttps://github.com/ConsenSys/tessera/pull/1246\nAnd despite what that readme says, I still build it from the main tessera dir\n```\ncd ~/workspace/tessera\n./gradlew install -x test\n\n```\n2. Start Orion. \nThen run up Besu & Orion - I've been using this setup https://github.com/lucassaldanha/besu-local-nodes but if you already have your own that's also fine. \n```\ncd ~/workspace/besu-local-nodes\nbesu --config-file config/besu/besu1.conf\norion config/orion/orion1.conf\n```\n\n3. Send some txs\nThen create some txs - I've been using web3js-eea examples as described above. The concurrentPrivateTxs example only needs one Orion node running, the multiNode ones generally need 2 or 3.\nIf you're going to use priv_debugGetStateRoot (and priv_getTransactionCount is also useful) to test before & after, you can run this against your privacy groups now while Orion is running. eg use concurrentPrivateTxs.js to send 50 txs to orion1 and 40 txs to orion 2&3\nNote to use web3js-eea examples you need to make sure the keys.js match your environment - the keys for all besu/orion nodes are in the readme for the besu-local-nodes repo if you're using that setup.\nTo do this you change these lines in the js \n```\nconst TX_COUNT = 50; # change this number to send a different number of txs\nconst BATCH_SIZE = 5;\n\n// options used to create a privacy group with only one member\nconst privacyOptions = {\n  privateFrom: orion.node1.publicKey,\n  privateFor: [orion.node1.publicKey], ## change this to send to different recipients eg [orion.node2.publicKey,orion.node3.publicKey]\n  privateKey: besu.node1.privateKey\n};\n```\n\n4. Stop Orion.\nThen stop Besu & Orion.\n\n5. Run the migrate\nThen you run the migrate, and it does everything relative to the current directory so to make my life easier I've been running it from `~/workspace/besu-local-nodes` where I have this repo checked out, it has orion config ready to go. https://github.com/lucassaldanha/besu-local-nodes\nto see the help:\n`~/workspace/tessera/migration/orion-to-tessera/build/install/migrate/bin/migrate --help` \nexample command line:\n`~/workspace/tessera/migration/orion-to-tessera/build/install/migrate/bin/migrate -f ~/workspace/besu-local-nodes/config/orion/orion1.conf -o tessera-migrated.conf tessera.jdbc.user sa tessera.jdbc.password sa tessera.jdbc.url jdbc:h2:./workdir/orion1/tessera1`\nit will create tessera-migrated.conf and ./workdir/orion1/tessera1 db (change these arguments if you want them to go somewhere different)\n\n6. Run Besu&Tessera\nI have it aliased so wherever you have tessera checked out to - mine is /Users/sallymacfarlane/workspace/tessera/\n`alias tessera=java\\ -jar\\ /Users/sallymacfarlane/workspace/tessera/tessera-dist/tessera-app/target/tessera-app-21.1.1-SNAPSHOT-app.jar`\nor you can just run `java jar path-to-tessera.jar -configfile tessera-migrated.conf`\nNote the config file created by the migration script has the mode=orion in it so you don't need to specify on the cmd line. And nothing needs to change in besu.\nAgain I'm running this from ~/workspace/besu-local-nodes because all paths (eg in tessera-migrated.conf) are relative from there.\n```\ntessera -configfile tessera-migrated.conf\nbesu --config-file config/besu/besu1.conf\n```\n7. Verify the state\nuse priv_debugGetStateRoot and priv_getTransactionCount\n\n8. Send more txs\nVerify that you can send further txs - again using web3js-eea examples or your preferred method.\n\n9. Stop Tessera\nOnce you're done, stop Besu & Tessera",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/810861368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/811582825",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-811582825",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 811582825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTU4MjgyNQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T02:01:23Z",
    "updated_at": "2021-04-01T02:01:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "New things: \n1. if you point the migration at an existing tessera db, it will throw an exception if the tables are non-empty - this allows DBAs to create the db in advance of the migration but prevents mixing up unrelated data\n2. password-protected keys are now converted as part of the migration (although there is a bug where the filename is incorrect in the config file - but this should be easy to fix)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/811582825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/817380449",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-817380449",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 817380449,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzM4MDQ0OQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-11T22:07:29Z",
    "updated_at": "2021-04-11T22:07:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "password protected keys get migrated successfully but in the process the orion keys get renamed to .orion and the filename is used for the tessera format - so the tessera config points to the same filename as the orion config did. Which is only a problem if you need to redo the migration... you will need to reinstate the original orion keys first",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/817380449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/817392776",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-817392776",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 817392776,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNzM5Mjc3Ng==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-11T23:34:48Z",
    "updated_at": "2021-04-11T23:34:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "blocked on testing the TLS piece",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/817392776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/819877640",
    "html_url": "https://github.com/hyperledger/besu/issues/1953#issuecomment-819877640",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1953",
    "id": 819877640,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxOTg3NzY0MA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-14T22:03:29Z",
    "updated_at": "2021-04-14T22:03:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\n{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"priv_getTransactionCount\",\n    \"params\": [\n        \"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73\",\n        \"67NmE7/94nuomQiZv/g19BzyhhX84kwJo3lr5+n43xI=\"\n    ],\n    \"id\": 1\n}\n```\nresult\n```\n{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"result\": \"0xb4\"\n}\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/819877640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

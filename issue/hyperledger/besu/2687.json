{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2687",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2687/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2687/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2687/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2687",
  "id": 981902254,
  "node_id": "MDU6SXNzdWU5ODE5MDIyNTQ=",
  "number": 2687,
  "title": "Error when starting IBFT2.0 network and 4 nodes didn't sync up ",
  "user": {
    "login": "emclab",
    "id": 946013,
    "node_id": "MDQ6VXNlcjk0NjAxMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/946013?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/emclab",
    "html_url": "https://github.com/emclab",
    "followers_url": "https://api.github.com/users/emclab/followers",
    "following_url": "https://api.github.com/users/emclab/following{/other_user}",
    "gists_url": "https://api.github.com/users/emclab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/emclab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/emclab/subscriptions",
    "organizations_url": "https://api.github.com/users/emclab/orgs",
    "repos_url": "https://api.github.com/users/emclab/repos",
    "events_url": "https://api.github.com/users/emclab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/emclab/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2051684044,
      "node_id": "MDU6TGFiZWwyMDUxNjg0MDQ0",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/P4",
      "name": "P4",
      "color": "ccff33",
      "default": false,
      "description": "Low (ex: Node doesn't start up when the configuration file has unexpected \"end-of-line\" character)"
    },
    {
      "id": 3805591260,
      "node_id": "LA_kwDODE2jmc7i1Lbc",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/peering",
      "name": "peering",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-08-28T18:42:18Z",
  "updated_at": "2022-03-14T05:57:41Z",
  "closed_at": "2022-03-14T05:57:31Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nUpgraded to 21.7.2 from 21.1 and restart 4 nodes (one boot node). There is an error complaining ANTLR version mismatch on boot node and it never sync up. The node get start with command systemctl start/restart node1.service ... node4.service. After quite a few times trying to reboot and restart nodes, then the nodes start to sync up. Since I was using the same command to start the node again and again and have no idea why it worked last time. The system is running on ubuntu 20.04. The slow sync up issue happened on 21.1 and it seems have something to do with the service. \r\n\r\n`ANTLR Tool version 4.7.1 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.1 used for parser compilation does not match the current runtime version 4.8ANTLR Tool version 4.7.1 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.1 used for parser compilation does not match the current runtime version 4.82021-08-26 05:53:25.550+08:00 | main | INFO | AbstractAltBnPrecompiledContract | Using LibEthPairings native alt bn128`\r\n\r\n### Acceptance Criteria\r\n* [Criteria 1]\r\n\r\n### Steps to Reproduce (Bug)\r\n1. systemctl start/restart node.service\r\n2. check log\r\n3. [Step ...]\r\n\r\n**Expected behavior:** [What you expect to happen]\r\nnodes sync up and running\r\n\r\n**Actual behavior:** [What actually happens]\r\nError in log and hard to sync up\r\n\r\n**Frequency:** [What percentage of the time does it occur?]\r\noften if restart the node\r\n\r\n### Versions (Add all that apply)\r\n* Software version: [`besu --version`] 21.7.2\r\n* Java version: [`java -version`] openjdk 14\r\n* OS Name & Version: [`cat /etc/*release`] ubuntu 20.04\r\n* Kernel Version: [`uname -a`]\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version: [`docker version`]\r\n* Cloud VM, type, size: [Amazon Web Services I3-large] 8GB instance\r\n\r\n### Additional Information\r\n\r\n",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2687/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2687/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/910595963",
    "html_url": "https://github.com/hyperledger/besu/issues/2687#issuecomment-910595963",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2687",
    "id": 910595963,
    "node_id": "IC_kwDODE2jmc42Rpd7",
    "user": {
      "login": "vmichalik",
      "id": 12459761,
      "node_id": "MDQ6VXNlcjEyNDU5NzYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12459761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vmichalik",
      "html_url": "https://github.com/vmichalik",
      "followers_url": "https://api.github.com/users/vmichalik/followers",
      "following_url": "https://api.github.com/users/vmichalik/following{/other_user}",
      "gists_url": "https://api.github.com/users/vmichalik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vmichalik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vmichalik/subscriptions",
      "organizations_url": "https://api.github.com/users/vmichalik/orgs",
      "repos_url": "https://api.github.com/users/vmichalik/repos",
      "events_url": "https://api.github.com/users/vmichalik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vmichalik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-01T19:01:43Z",
    "updated_at": "2021-09-01T19:01:43Z",
    "author_association": "NONE",
    "body": "Hey @emclab, we'll look into this, thanks for raising an issue!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/910595963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/910748705",
    "html_url": "https://github.com/hyperledger/besu/issues/2687#issuecomment-910748705",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2687",
    "id": 910748705,
    "node_id": "IC_kwDODE2jmc42SOwh",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-01T21:01:46Z",
    "updated_at": "2021-09-01T21:01:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suspect the ANTLR warning is a red herring, and the sync problem is related to failing to find peers #2662.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/910748705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/911327267",
    "html_url": "https://github.com/hyperledger/besu/issues/2687#issuecomment-911327267",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2687",
    "id": 911327267,
    "node_id": "IC_kwDODE2jmc42UcAj",
    "user": {
      "login": "dtourassis",
      "id": 22638038,
      "node_id": "MDQ6VXNlcjIyNjM4MDM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/22638038?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtourassis",
      "html_url": "https://github.com/dtourassis",
      "followers_url": "https://api.github.com/users/dtourassis/followers",
      "following_url": "https://api.github.com/users/dtourassis/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtourassis/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtourassis/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtourassis/subscriptions",
      "organizations_url": "https://api.github.com/users/dtourassis/orgs",
      "repos_url": "https://api.github.com/users/dtourassis/repos",
      "events_url": "https://api.github.com/users/dtourassis/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtourassis/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T07:42:49Z",
    "updated_at": "2021-09-02T07:42:49Z",
    "author_association": "NONE",
    "body": "@garyschulte That's my take on this as well. Got 8 nodes fully synced using 21.7.2 and still get the ANTLR warning when booting up.\r\n@emclab Try running besu with --logging=ALL and check for any new errors.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/911327267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1066408575",
    "html_url": "https://github.com/hyperledger/besu/issues/2687#issuecomment-1066408575",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2687",
    "id": 1066408575,
    "node_id": "IC_kwDODE2jmc4_kBp_",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-14T05:57:31Z",
    "updated_at": "2022-03-14T05:57:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @emclab I realise it's been a while but we have made some improvements in peering and syncing. And we are also beginning a holistic assessment of peering behavior including any outstanding issues. So we're hoping that it's either fixed already, or that you're able to give us some more info if you're still having related issues? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1066408575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1610",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1610/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1610/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1610/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1610",
  "id": 750796986,
  "node_id": "MDU6SXNzdWU3NTA3OTY5ODY=",
  "number": 1610,
  "title": "Invalid and wrong trace data",
  "user": {
    "login": "iFA88",
    "id": 18205395,
    "node_id": "MDQ6VXNlcjE4MjA1Mzk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/18205395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iFA88",
    "html_url": "https://github.com/iFA88",
    "followers_url": "https://api.github.com/users/iFA88/followers",
    "following_url": "https://api.github.com/users/iFA88/following{/other_user}",
    "gists_url": "https://api.github.com/users/iFA88/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iFA88/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iFA88/subscriptions",
    "organizations_url": "https://api.github.com/users/iFA88/orgs",
    "repos_url": "https://api.github.com/users/iFA88/repos",
    "events_url": "https://api.github.com/users/iFA88/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iFA88/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2051683573,
      "node_id": "MDU6TGFiZWwyMDUxNjgzNTcz",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/P3",
      "name": "P3",
      "color": "ffff00",
      "default": false,
      "description": "Medium (ex: JSON-RPC request not working with a specific client library due to loose spec assumtion)"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-11-25T13:00:17Z",
  "updated_at": "2020-12-16T14:11:49Z",
  "closed_at": "2020-12-16T14:11:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Greetings everyone.\r\n\r\nI'm currently syncing main net with Besu (`besu/v20.10.1/linux-x86_64/openjdk-java-11`), and I got weird trace data for a TX:\r\nTransaction:\r\n```\r\n{\r\n    \"blockHash\" : \"0xa895912b9fc9f1a0a18f970912e2dede27e4f0cb44802beb2f1b0ab557430bbf\",\r\n    \"blockNumber\" : \"0x23cf3\",\r\n    \"from\" : \"0x3dab6e047d342c7ab68febd12751abbee1780485\",\r\n    \"gas\" : \"0x493e0\",\r\n    \"gasPrice\" : \"0xba43b7400\",\r\n    \"hash\" : \"0x0fac4168103638e3a7e74362db2bbb0dd3095c6d26259a61debf164a9f616d05\",\r\n    \"input\" : \"0x60606040526040516102b43803806102b48339016040526060805160600190602001505b5b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b806001600050908051906020019082805482825590600052602060002090601f01602090048101928215609e579182015b82811115609d5782518260005055916020019190600101906081565b5b50905060c5919060a9565b8082111560c1576000818150600090555060010160a9565b5090565b50505b506101dc806100d86000396000f30060606040526000357c01000000000000000000000000000000000000000000000000000000009004806341c0e1b514610044578063cfae32171461005157610042565b005b61004f6004506100ca565b005b61005c60045061015e565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156100bc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561015b57600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60206040519081016040528060008152602001506001600050805480601f016020809104026020016040519081016040528092919081815260200182805480156101cd57820191906000526020600020905b8154815290600101906020018083116101b057829003601f168201915b505050505090506101d9565b90560000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001248656c6c6f204f6e652041646472657373210000000000000000000000000000\",\r\n    \"nonce\" : \"0x1c\",\r\n    \"to\" : \"0x0000000000000000000000000000000000000001\",\r\n    \"transactionIndex\" : \"0x2\",\r\n    \"value\" : \"0x0\",\r\n    \"v\" : \"0x1c\",\r\n    \"r\" : \"0xf0db2ccea38dc52f9c4bb38d45f11a14b7f967c700532cd830c29ba3cd6944d0\",\r\n    \"s\" : \"0x4c0698d57ea8183dc6e226b476dccf14d0a014e86a5434b9032b88cca2f446e0\"\r\n}\r\n```\r\n\r\nTransaction receipt:\r\n```\r\n{\r\n    \"blockHash\" : \"0xa895912b9fc9f1a0a18f970912e2dede27e4f0cb44802beb2f1b0ab557430bbf\",\r\n    \"blockNumber\" : \"0x23cf3\",\r\n    \"contractAddress\" : null,\r\n    \"cumulativeGasUsed\" : \"0x1b060\",\r\n    \"from\" : \"0x3dab6e047d342c7ab68febd12751abbee1780485\",\r\n    \"gasUsed\" : \"0x10c50\",\r\n    \"logs\" : [ ],\r\n    \"logsBloom\" : \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"root\" : \"0xb72be418c3a600e2bebf1045845e8e694512a521bff0c6ce1025438aba5462fe\",\r\n    \"to\" : \"0x0000000000000000000000000000000000000001\",\r\n    \"transactionHash\" : \"0x0fac4168103638e3a7e74362db2bbb0dd3095c6d26259a61debf164a9f616d05\",\r\n    \"transactionIndex\" : \"0x2\"\r\n}\r\n```\r\nTransaction trace:\r\n```\r\n[ {\r\n    \"action\" : {\r\n      \"callType\" : \"call\",\r\n      \"from\" : \"0x3dab6e047d342c7ab68febd12751abbee1780485\",\r\n      \"input\" : \"0x60606040526040516102b43803806102b48339016040526060805160600190602001505b5b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b806001600050908051906020019082805482825590600052602060002090601f01602090048101928215609e579182015b82811115609d5782518260005055916020019190600101906081565b5b50905060c5919060a9565b8082111560c1576000818150600090555060010160a9565b5090565b50505b506101dc806100d86000396000f30060606040526000357c01000000000000000000000000000000000000000000000000000000009004806341c0e1b514610044578063cfae32171461005157610042565b005b61004f6004506100ca565b005b61005c60045061015e565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156100bc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561015b57600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60206040519081016040528060008152602001506001600050805480601f016020809104026020016040519081016040528092919081815260200182805480156101cd57820191906000526020600020905b8154815290600101906020018083116101b057829003601f168201915b505050505090506101d9565b90560000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001248656c6c6f204f6e652041646472657373210000000000000000000000000000\",\r\n      \"to\" : \"0x0000000000000000000000000000000000000001\",\r\n      \"value\" : \"0x0\"\r\n    },\r\n    \"blockHash\" : \"0xa895912b9fc9f1a0a18f970912e2dede27e4f0cb44802beb2f1b0ab557430bbf\",\r\n    \"blockNumber\" : 146675,\r\n    \"result\" : {\r\n      \"gasUsed\" : \"0x0\",\r\n      \"output\" : \"0x\"\r\n    },\r\n    \"subtraces\" : 0,\r\n    \"traceAddress\" : [ ],\r\n    \"transactionHash\" : \"0x0fac4168103638e3a7e74362db2bbb0dd3095c6d26259a61debf164a9f616d05\",\r\n    \"transactionPosition\" : 2,\r\n    \"type\" : \"call\"\r\n} ]\r\n```\r\n\r\nFrom the `action` in the trace, the `gas` key is missing and even the `gasUsed` key value in the `result` is wrong. Other traces have the `gas` key in the `action`, thats why is weird.\r\n\r\nThere is the good trace from OpenEthereum:\r\n```\r\n[\r\n    {\r\n        \"blockHash\": \"0xa895912b9fc9f1a0a18f970912e2dede27e4f0cb44802beb2f1b0ab557430bbf\", \r\n        \"transactionHash\": \"0x0fac4168103638e3a7e74362db2bbb0dd3095c6d26259a61debf164a9f616d05\", \r\n        \"blockNumber\": 146675, \r\n        \"traceAddress\": [], \r\n        \"subtraces\": 0, \r\n        \"action\": {\r\n            \"callType\": \"call\", \r\n            \"from\": \"0x3dab6e047d342c7ab68febd12751abbee1780485\", \r\n            \"gas\": \"0x39348\", \r\n            \"value\": \"0x0\", \r\n            \"to\": \"0x0000000000000000000000000000000000000001\", \r\n            \"input\": \"0x60606040526040516102b43803806102b48339016040526060805160600190602001505b5b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055505b806001600050908051906020019082805482825590600052602060002090601f01602090048101928215609e579182015b82811115609d5782518260005055916020019190600101906081565b5b50905060c5919060a9565b8082111560c1576000818150600090555060010160a9565b5090565b50505b506101dc806100d86000396000f30060606040526000357c01000000000000000000000000000000000000000000000000000000009004806341c0e1b514610044578063cfae32171461005157610042565b005b61004f6004506100ca565b005b61005c60045061015e565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156100bc5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141561015b57600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b5b565b60206040519081016040528060008152602001506001600050805480601f016020809104026020016040519081016040528092919081815260200182805480156101cd57820191906000526020600020905b8154815290600101906020018083116101b057829003601f168201915b505050505090506101d9565b90560000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001248656c6c6f204f6e652041646472657373210000000000000000000000000000\"\r\n        }, \r\n        \"transactionPosition\": 2, \r\n        \"type\": \"call\", \r\n        \"result\": {\r\n            \"output\": \"0x\", \r\n            \"gasUsed\": \"0xbb8\"\r\n        }\r\n    }\r\n]\r\n```\r\n",
  "closed_by": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1610/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1610/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

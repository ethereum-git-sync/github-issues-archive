{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/5443",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/5443/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/5443/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/5443/events",
  "html_url": "https://github.com/hyperledger/besu/issues/5443",
  "id": 1699729342,
  "node_id": "I_kwDODE2jmc5lT8--",
  "number": 5443,
  "title": "Hive failure: withdrawals must not be null when Withdrawals are activated",
  "user": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1921587647,
      "node_id": "MDU6TGFiZWwxOTIxNTg3NjQ3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamGroot",
      "name": "TeamGroot",
      "color": "1d76db",
      "default": false,
      "description": "GH issues worked on by Groot Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-05-08T07:54:00Z",
  "updated_at": "2023-05-23T02:19:10Z",
  "closed_at": "2023-05-23T02:19:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "For some reason, there are a lot of hive-failures related to withdrawals. \r\n\r\nhttps://hivetests.ethdevops.io/viewer.html?suiteid=1683491496-762972274c1239a9d1e3167d512eb306.json&suitename=consensus&testid=3&file=%2Fresults%2Fbesu%2Fclient-9b008ddd0337a0a38b0031d1724689d8d2729b7f7a1921a5f2a164b3bef4a3d5.log#L57\r\n\r\n```\r\n2023-05-04 16:02:18.755+00:00 | main | INFO  | BlocksSubCommand | Importing from /blocks/0001.rlp\r\n2023-05-04 16:02:18.910+00:00 | pool-10-thread-1 | WARN  | WithdrawalsValidator$AllowedWithdrawals | withdrawals must not be null when Withdrawals are activated\r\n```\r\nBut afaict, the rlp for that test is here: https://github.com/ethereum/tests/blob/develop/BlockchainTests/GeneralStateTests/Shanghai/stEIP3651-warmcoinbase/coinbaseWarmAccountCallGas.json#L399 \r\n\r\n\r\nAnd the rlp does contain an empty withdrawals-list: \r\n```\r\n[\r\n  [\r\n    56cc24d2c939d00d7f2855600fe5be55b05bad4661b6198cd6b1d05f0f078988,\r\n    1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347,\r\n    2adc25665018aa1fe0e6bc666dac8fc2697ff9ba,\r\n    2b29d09b6c7aa1c87d49c20e8812c03ba780eb80a10f718f9ec6a786fc3af801,\r\n    7448d6a08919eafd6a797859e7a67889be5e7cd1f5b6029b836cdd9493f8afd2,\r\n    5aadb4d24dac17099f2c205d796ecf456083d412c0c25dd4078aa1eb55f5c133,\r\n    00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000,\r\n    \"\",\r\n    01,\r\n    05f5e100,\r\n    a9fb,\r\n    03e8,\r\n    00,\r\n    0000000000000000000000000000000000000000000000000000000000020000,\r\n    0000000000000000,\r\n    0a,\r\n    56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421,\r\n  ],\r\n  [\r\n    [\r\n      01,\r\n      0a,\r\n      013880,\r\n      cccccccccccccccccccccccccccccccccccccccc,\r\n      \"\",\r\n      693c61390000000000000000000000000000000000000000000000000000000000000000,\r\n      1c,\r\n      44203e8464c0a90a32a53f89baf180e7b4bd7eace546cdcbbdc43e97f637d5df,\r\n      22d3fa42cf3836232cd0044f129419d9d4496bdddc94c25eac0661967e16fac6,\r\n    ],\r\n  ],\r\n  [],\r\n  [],\r\n]\r\n\r\n```\r\nPTAL",
  "closed_by": {
    "login": "gfukushima",
    "id": 25556862,
    "node_id": "MDQ6VXNlcjI1NTU2ODYy",
    "avatar_url": "https://avatars.githubusercontent.com/u/25556862?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gfukushima",
    "html_url": "https://github.com/gfukushima",
    "followers_url": "https://api.github.com/users/gfukushima/followers",
    "following_url": "https://api.github.com/users/gfukushima/following{/other_user}",
    "gists_url": "https://api.github.com/users/gfukushima/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gfukushima/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gfukushima/subscriptions",
    "organizations_url": "https://api.github.com/users/gfukushima/orgs",
    "repos_url": "https://api.github.com/users/gfukushima/repos",
    "events_url": "https://api.github.com/users/gfukushima/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gfukushima/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/5443/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/5443/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1539091437",
    "html_url": "https://github.com/hyperledger/besu/issues/5443#issuecomment-1539091437",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5443",
    "id": 1539091437,
    "node_id": "IC_kwDODE2jmc5bvKvt",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-08T21:41:04Z",
    "updated_at": "2023-05-08T21:41:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Likely addressing root cause in #5442 - we will double check after and make sure. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1539091437/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1539589881",
    "html_url": "https://github.com/hyperledger/besu/issues/5443#issuecomment-1539589881",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5443",
    "id": 1539589881,
    "node_id": "IC_kwDODE2jmc5bxEb5",
    "user": {
      "login": "gfukushima",
      "id": 25556862,
      "node_id": "MDQ6VXNlcjI1NTU2ODYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/25556862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfukushima",
      "html_url": "https://github.com/gfukushima",
      "followers_url": "https://api.github.com/users/gfukushima/followers",
      "following_url": "https://api.github.com/users/gfukushima/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfukushima/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfukushima/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfukushima/subscriptions",
      "organizations_url": "https://api.github.com/users/gfukushima/orgs",
      "repos_url": "https://api.github.com/users/gfukushima/repos",
      "events_url": "https://api.github.com/users/gfukushima/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfukushima/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-09T07:16:41Z",
    "updated_at": "2023-05-09T07:16:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@holiman I can confirm the test passes when I run it locally. Didn't run all the consensus suite test, only the one you mentioned to ensure that we can now import that block (and all blocks containing withdrawals).",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1539589881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1558403655",
    "html_url": "https://github.com/hyperledger/besu/issues/5443#issuecomment-1558403655",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5443",
    "id": 1558403655,
    "node_id": "IC_kwDODE2jmc5c41pH",
    "user": {
      "login": "gfukushima",
      "id": 25556862,
      "node_id": "MDQ6VXNlcjI1NTU2ODYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/25556862?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfukushima",
      "html_url": "https://github.com/gfukushima",
      "followers_url": "https://api.github.com/users/gfukushima/followers",
      "following_url": "https://api.github.com/users/gfukushima/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfukushima/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfukushima/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfukushima/subscriptions",
      "organizations_url": "https://api.github.com/users/gfukushima/orgs",
      "repos_url": "https://api.github.com/users/gfukushima/repos",
      "events_url": "https://api.github.com/users/gfukushima/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfukushima/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-23T02:19:09Z",
    "updated_at": "2023-05-23T02:19:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Confirmed that this issue has been fixed and last run of the consensus suite is looking better although still 7000+ failures.\n15/05/2023, 20:47:36\tconsensus\tbesu\t✕ Fail (7470 / 89074)\nThere's an epic to handle the hive failures so I'm closing this issue that was related to the rlp of blocks with withdrawals.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1558403655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

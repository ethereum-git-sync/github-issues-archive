{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2308",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2308/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2308/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2308/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2308",
  "id": 896883961,
  "node_id": "MDU6SXNzdWU4OTY4ODM5NjE=",
  "number": 2308,
  "title": "Separate Listening and Discovery Ports in Node Configuration",
  "user": {
    "login": "ItayPodhajcer",
    "id": 19306955,
    "node_id": "MDQ6VXNlcjE5MzA2OTU1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19306955?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ItayPodhajcer",
    "html_url": "https://github.com/ItayPodhajcer",
    "followers_url": "https://api.github.com/users/ItayPodhajcer/followers",
    "following_url": "https://api.github.com/users/ItayPodhajcer/following{/other_user}",
    "gists_url": "https://api.github.com/users/ItayPodhajcer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ItayPodhajcer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ItayPodhajcer/subscriptions",
    "organizations_url": "https://api.github.com/users/ItayPodhajcer/orgs",
    "repos_url": "https://api.github.com/users/ItayPodhajcer/repos",
    "events_url": "https://api.github.com/users/ItayPodhajcer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ItayPodhajcer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362500,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNTAw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "7057ff",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 2129007612,
      "node_id": "MDU6TGFiZWwyMTI5MDA3NjEy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/dev%20experience",
      "name": "dev experience",
      "color": "2a0b89",
      "default": false,
      "description": "The build system, things that enable easier development etc."
    },
    {
      "id": 4164098293,
      "node_id": "LA_kwDODE2jmc74Mxj1",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/icebox",
      "name": "icebox",
      "color": "1D76DB",
      "default": false,
      "description": "items that need more consideration, time, or can wait"
    },
    {
      "id": 4328706977,
      "node_id": "LA_kwDODE2jmc8AAAABAgLToQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamChupa",
      "name": "TeamChupa",
      "color": "fbca04",
      "default": false,
      "description": "GH issues worked on by Chupacabara Team"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-05-20T14:08:31Z",
  "updated_at": "2022-07-14T21:41:14Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nAccording to the documentation on [P2P Port](https://besu.hyperledger.org/en/stable/Reference/CLI/CLI-Syntax/#p2p-port) configuration, the `--p2p-port` options/`BESU_P2P_PORT` environment variable/`p2p-port` configuration file option can be used to configure the listening port for the node, which is used for both the TCP listening port and the UDP discovery port.\r\n\r\nStrangely enough, there are sections in the documentation that describe a valid [Enode URL](https://besu.hyperledger.org/en/stable/Concepts/Node-Keys/#enode-url) that allows setting a different discovery port using a `discport` query parameter.\r\n\r\nThis brings the question of if those Enode URLs are supported, how can one configure a dedicated port for discovery, which has a different number than the listening port.\r\n\r\n### Acceptance Criteria\r\nAllow configuring the listening port and discovery port of the node separatly,\r\n\r\n### Additional Information\r\nIt might seem like a small issue, but in scenarios that require exposing both ports, it creates limitations such as the cloud services that can be used to run nodes (at the time of opening this issue, both Azure ACI and AWS ECS do not support opening the same port number for both TCP and UDP at the same time).\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2308/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2308/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/846959976",
    "html_url": "https://github.com/hyperledger/besu/issues/2308#issuecomment-846959976",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2308",
    "id": 846959976,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Njk1OTk3Ng==",
    "user": {
      "login": "NicolasMassart",
      "id": 4677568,
      "node_id": "MDQ6VXNlcjQ2Nzc1Njg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4677568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasMassart",
      "html_url": "https://github.com/NicolasMassart",
      "followers_url": "https://api.github.com/users/NicolasMassart/followers",
      "following_url": "https://api.github.com/users/NicolasMassart/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasMassart/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasMassart/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasMassart/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasMassart/orgs",
      "repos_url": "https://api.github.com/users/NicolasMassart/repos",
      "events_url": "https://api.github.com/users/NicolasMassart/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasMassart/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-24T10:52:58Z",
    "updated_at": "2021-05-24T10:52:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @ItayPodhajcer,\r\nHaving two different ports for listening and advertising is not available in the base CLI use case, but if you use Besu with Kubernetes for instance, you can do it by [setting services multiple port mappings and using the Besu Kubernetes NAT option](https://besu.hyperledger.org/en/latest/Tutorials/Examples/Nat-Manager-Kubernetes/).\r\n\r\nCould you tell me if your use case includes using Kubernetes?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/846959976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/846970251",
    "html_url": "https://github.com/hyperledger/besu/issues/2308#issuecomment-846970251",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2308",
    "id": 846970251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0Njk3MDI1MQ==",
    "user": {
      "login": "ItayPodhajcer",
      "id": 19306955,
      "node_id": "MDQ6VXNlcjE5MzA2OTU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19306955?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ItayPodhajcer",
      "html_url": "https://github.com/ItayPodhajcer",
      "followers_url": "https://api.github.com/users/ItayPodhajcer/followers",
      "following_url": "https://api.github.com/users/ItayPodhajcer/following{/other_user}",
      "gists_url": "https://api.github.com/users/ItayPodhajcer/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ItayPodhajcer/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ItayPodhajcer/subscriptions",
      "organizations_url": "https://api.github.com/users/ItayPodhajcer/orgs",
      "repos_url": "https://api.github.com/users/ItayPodhajcer/repos",
      "events_url": "https://api.github.com/users/ItayPodhajcer/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ItayPodhajcer/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-24T11:10:58Z",
    "updated_at": "2021-05-24T11:10:58Z",
    "author_association": "NONE",
    "body": "@NicolasMassart Kubernetes is such an overkill in so many cases, especially when ACI/ECS are enough to get the job done.\r\nAny plans to update the CLI in the near future? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/846970251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1029121393",
    "html_url": "https://github.com/hyperledger/besu/issues/2308#issuecomment-1029121393",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2308",
    "id": 1029121393,
    "node_id": "IC_kwDODE2jmc49VyVx",
    "user": {
      "login": "TrishamBP",
      "id": 91331117,
      "node_id": "MDQ6VXNlcjkxMzMxMTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/91331117?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TrishamBP",
      "html_url": "https://github.com/TrishamBP",
      "followers_url": "https://api.github.com/users/TrishamBP/followers",
      "following_url": "https://api.github.com/users/TrishamBP/following{/other_user}",
      "gists_url": "https://api.github.com/users/TrishamBP/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TrishamBP/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TrishamBP/subscriptions",
      "organizations_url": "https://api.github.com/users/TrishamBP/orgs",
      "repos_url": "https://api.github.com/users/TrishamBP/repos",
      "events_url": "https://api.github.com/users/TrishamBP/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TrishamBP/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-03T15:42:34Z",
    "updated_at": "2022-02-03T15:42:34Z",
    "author_association": "NONE",
    "body": "@NicolasMassart How can we tackle this issue and make changes in our code? I have also been facing a lot of trouble getting my ports configured.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1029121393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

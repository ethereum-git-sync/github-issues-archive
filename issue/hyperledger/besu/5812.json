{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/5812/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/5812/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/5812/events",
  "html_url": "https://github.com/hyperledger/besu/issues/5812",
  "id": 1869629274,
  "node_id": "I_kwDODE2jmc5vcEda",
  "number": 5812,
  "title": "Web3ValidatorError error when use sendSignedTransaction on HB blockchain",
  "user": {
    "login": "louloub",
    "id": 45354686,
    "node_id": "MDQ6VXNlcjQ1MzU0Njg2",
    "avatar_url": "https://avatars.githubusercontent.com/u/45354686?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/louloub",
    "html_url": "https://github.com/louloub",
    "followers_url": "https://api.github.com/users/louloub/followers",
    "following_url": "https://api.github.com/users/louloub/following{/other_user}",
    "gists_url": "https://api.github.com/users/louloub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/louloub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/louloub/subscriptions",
    "organizations_url": "https://api.github.com/users/louloub/orgs",
    "repos_url": "https://api.github.com/users/louloub/repos",
    "events_url": "https://api.github.com/users/louloub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/louloub/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 1921587647,
      "node_id": "MDU6TGFiZWwxOTIxNTg3NjQ3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamGroot",
      "name": "TeamGroot",
      "color": "1d76db",
      "default": false,
      "description": "GH issues worked on by Groot Team"
    },
    {
      "id": 5290172097,
      "node_id": "LA_kwDODE2jmc8AAAABO1GewQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/non%20mainnet%20(private%20networks)",
      "name": "non mainnet (private networks)",
      "color": "0052cc",
      "default": false,
      "description": "not related to mainnet features - covers privacy, permissioning, IBFT2, QBFT"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "joshuafernandes",
    "id": 3722503,
    "node_id": "MDQ6VXNlcjM3MjI1MDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joshuafernandes",
    "html_url": "https://github.com/joshuafernandes",
    "followers_url": "https://api.github.com/users/joshuafernandes/followers",
    "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
    "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
    "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
    "repos_url": "https://api.github.com/users/joshuafernandes/repos",
    "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "joshuafernandes",
      "id": 3722503,
      "node_id": "MDQ6VXNlcjM3MjI1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshuafernandes",
      "html_url": "https://github.com/joshuafernandes",
      "followers_url": "https://api.github.com/users/joshuafernandes/followers",
      "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
      "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
      "repos_url": "https://api.github.com/users/joshuafernandes/repos",
      "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2023-08-28T12:05:37Z",
  "updated_at": "2023-09-07T23:01:28Z",
  "closed_at": "2023-09-07T23:01:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nAs an blockchain developper, i'm actualy working on smart contract ERC-721 POC. I have a Hyperledger Besu blockchain working on my VM with 4 nodes, built with Qorum Quickstart (https://besu.hyperledger.org/stable/private-networks/tutorials/quickstart). This blockchain is configured for 0 fees.\r\nI can develop, build, deploy, use my contract on Remix connected on my Hyperldeger Besu blockchain, but when i want to deploy the same smart contract from Visual Studio Code i have some mistakes with the signature of my transaction for deploy the contract. \r\n\r\n### Acceptance Criteria\r\nCan build and sign my transaction for deploy the contract on my Hyperledger Besu blockchain.\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Launch Hyperledger Besu blockchain with ```./resume.sh``` from the blockchain folder\r\n2. Compile my smart contract and retrieve BIN, ABI and JSON files from bash script. Truffle dependencies on my VIsual Code had never worked, it's why i'm using this script. \r\nContract code on Test.sol :\r\n```\r\n// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.17;\r\n\r\ncontract Test {\r\n    uint public count;\r\n\r\n    function increment() external {\r\n        count += 1;\r\n    }\r\n}\r\n```\r\ncommand to launch the script : \r\n```./compile.sh contract.sol```\r\nbash script : \r\n\r\n```# retrieve file name without path\r\nfileNameWithoutpath=$(basename $1)\r\n#retrive file name without extension\r\nfileNameWithoutPathAndExtension=${fileNameWithoutpath%.*}\r\n\r\necho \"${bold}*************************************\"\r\necho \"Compile smart contract to BIN and ABI files from SOL files\"\r\necho \"*************************************${normal}\"\r\nsolcjs --bin --abi $1 -o ../../build/contracts/\r\necho \"fileNameWithoutPathAndExtension => $fileNameWithoutPathAndExtension\"\r\nsolc $1 --combined-json abi,bin > ../../build/contracts/$fileNameWithoutPathAndExtension.json\r\n\r\nfor file in ../../build/contracts/*; do\r\n    # Rename each file from this folder\r\n    mv \"$file\" \"../../build/contracts/${file##*_}\"\r\ndone \r\n```\r\n\r\n3. Once my contract was built, i want to create transaction to deploy it on my Heperldger Besu Blockchain. \r\n\r\nThis is the genesis file of it :\r\n```\r\n{\r\n    \"config\" : {\r\n      \"chainId\" : 1337,\r\n      \"homesteadBlock\": 0,\r\n      \"eip150Block\": 0,\r\n      \"eip155Block\": 0,\r\n      \"eip158Block\": 0,\r\n      \"byzantiumBlock\": 0,\r\n      \"constantinoplefixblock\" : 0,\r\n      \"qbft\": {\r\n        \"epochlength\": 30000,\r\n        \"blockperiodseconds\": 5,\r\n        \"requesttimeoutseconds\": 10\r\n      }\r\n    },\r\n    \"nonce\" : \"0x0\",\r\n    \"timestamp\" : \"0x58ee40ba\",\r\n    \"gasLimit\" : \"0x1fffffffffffff\",\r\n    \"difficulty\" : \"0x1\",\r\n    \"number\": \"0x0\",\r\n    \"gasUsed\": \"0x0\",\r\n    \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n    \"mixHash\" : \"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365\",\r\n    \"extraData\": \"0xf87aa00000000000000000000000000000000000000000000000000000000000000000f8549493917cadbace5dfce132b991732c6cda9bcc5b8a9427a97c9aaf04f18f3014c32e036dd0ac76da5f1894ce412f988377e31f4d0ff12d74df73b51c42d0ca9498c1334496614aed49d2e81526d089f7264fed9cc080c0\",\r\n    \"coinbase\" : \"0x0000000000000000000000000000000000000000\",\r\n    \"alloc\" : { DELETED FOR THE GITHUB ISSUE }\r\n  }\r\n```\r\n4. I create my transaction, sign it and send it from the file \"public_tx.js\" called from this command : ```node public_tx.js```\r\nThis is the content of the file :\r\n```\r\nconst { FeeMarketEIP1559Transaction } = require(\"@ethereumjs/tx\");\r\n// const Common = require(\"@ethereumjs/common\").default;\r\nconst { Common, Chain, Hardfork } = require(\"@ethereumjs/common\");\r\nconst ethUtil = require(\"ethereumjs-util\");\r\nconst {Web3} = require(\"web3\");\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs-extra\");\r\nconst web3 = new Web3(\"http://0.0.0.0:8545\");\r\nconst to = \"0x0000000000000000000000000000000000009999\"\r\n\r\n// Define the network parameters\r\nconst chainId = 1337; // The chain ID of your Besu network\r\nconst hardfork = \"london\"; // The hardfork name of your Besu network\r\n\r\nasync function publicTx() {\r\n  const customCommon = Common.custom({\r\n    chainId: chainId,\r\n    hardfork: hardfork\r\n  });\r\n  const account = web3.eth.accounts.privateKeyToAccount(\r\n    \"0x8f2a55949038a9610f50fb24b5883af3b4ecb3c3bb792cbcefbd1542c692be64\",\r\n    true\r\n  );\r\n\r\n  const contractJsonPath = path.resolve(\r\n    __dirname,\r\n    \"../../build/contracts/Test.json\"\r\n  );\r\n  const contractJson = JSON.parse(fs.readFileSync(contractJsonPath));\r\n  const contractAbi = contractJson.abi;\r\n  const contractBinPath = path.resolve(\r\n    __dirname,\r\n    \"../../build/contracts/Test.bin\"\r\n  );\r\n  const contractBin = fs.readFileSync(contractBinPath);\r\n  const contractConstructorInit =\r\n    \"000000000000000000000000000000000000000000000000000000000000002F\";\r\n\r\n  const txnCount = await web3.eth.getTransactionCount(account.address);\r\n  \r\n  const dataBuild = \"0x\" + contractBin + contractConstructorInit\r\n  console.log('dataBuild ==> ',dataBuild)\r\n\r\n  const rawTxOptions = {\r\n    nonce: web3.utils.numberToHex(txnCount),\r\n    maxPriorityFeePerGas: \"0x0\", // The max priority fee per gas in wei\r\n    maxFeePerGas: \"0x0\", // The max fee per gas in wei\r\n    gasLimit: \"0x186A0\", // The gas limit in wei\r\n    to: \"0x0000000000000000000000000000000000009999\", // The address of the contract you want to deploy\r\n    value: \"0x00\", // The value in wei\r\n    data: dataBuild\r\n  };\r\n\r\n  console.log('account ==> ', account)\r\n  const privateKeyBuff = Buffer.from(\r\n    account.privateKey,\r\n    'hex'\r\n  );\r\n\r\n  const tx = FeeMarketEIP1559Transaction.fromTxData(rawTxOptions, { customCommon });\r\n  \r\n  const signedTx = tx.sign(privateKeyBuff);\r\n  var serializedTx = signedTx.serialize();\r\n  console.log(\"serializedTx ==> \" ,serializedTx);\r\n\r\n  const pTx = await web3.eth.sendSignedTransaction(\r\n    \"0x\" + serializedTx.toString(\"hex\").toString(\"hex\")\r\n  , function(error, receipt) {\r\n    if (!error) {\r\n      console.log('receipt => ' ,receipt)\r\n    } else {\r\n      console.log('error => ' ,error)\r\n\r\n    }\r\n  });\r\n  console.log(\"tx transactionHash: \" + pTx.transactionHash);\r\n  console.log(\"tx contractAddress: \" + pTx.contractAddress);\r\n}\r\n\r\npublicTx();\r\n\r\n```\r\n\r\nresult of console.log for dataBuild : \r\n```0x608060405234801561000f575f80fd5b506101468061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610034575f3560e01c806306661abd14610038578063d09de08a14610056575b5f80fd5b610040610060565b60405161004d9190610097565b60405180910390f35b61005e610065565b005b5f5481565b60015f8082825461007691906100dd565b92505081905550565b5f819050919050565b6100918161007f565b82525050565b5f6020820190506100aa5f830184610088565b92915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f6100e78261007f565b91506100f28361007f565b925082820190508082111561010a576101096100b0565b5b9291505056fea26469706673582212201c3c48dec99e9cf77132e4073590b6c55580f5c057b9a16678a26b3bd45b716c64736f6c63430008150033000000000000000000000000000000000000000000000000000000000000002F```\r\n\r\nresult of console.log for account: \r\n```account ==>  {\r\n  address: '0xFE3B557E8Fb62b89F4916B721be55cEb828dBd73',\r\n  privateKey: '0x8f2a55949038a9610f50fb23b5884af3b4ecb3c3bb792cbcefbd1542c692be64',\r\n  signTransaction: [Function: signTransaction],\r\n  sign: [Function: sign],\r\n  encrypt: [Function: encrypt]\r\n}\r\n```\r\n\r\nresult of console.log for serializedTx: \r\n```\r\nUint8Array(492) [\r\n    2, 249,   1, 232,   1, 128, 128, 128, 131,   1, 134, 160,\r\n  148,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,\r\n    0,   0,   0,   0,   0,   0,   0, 153, 153, 128, 185,   1,\r\n  131,  96, 128,  96,  64,  82,  52, 128,  21,  97,   0,  15,\r\n   87,  95, 128, 253,  91,  80,  97,   1,  70, 128,  97,   0,\r\n   29,  95,  57,  95, 243, 254,  96, 128,  96,  64,  82,  52,\r\n  128,  21,  97,   0,  15,  87,  95, 128, 253,  91,  80,  96,\r\n    4,  54,  16,  97,   0,  52,  87,  95,  53,  96, 224,  28,\r\n  128,  99,   6, 102,\r\n  ... 392 more items\r\n```\r\n\r\nJust after these console.log i have a error : \r\n\r\n```\r\n/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-validator/lib/commonjs/validator.js:73\r\n                throw new errors_js_1.Web3ValidatorError(errors);\r\n                      ^\r\nWeb3ValidatorError: Web3 validator found 1 error[s]:\r\nvalue \"0x2,249,1,232,1,128,128,128,131,1,134,160,148,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,153,128,185,1,131,96,128,96,64,82,52,128,21,97,0,15,87,95,128,253,91,80,97,1,70,128,97,0,29,95,57,95,243,254,96,128,96,64,82,52,128,21,97,0,15,87,95,128,253,91,80,96,4,54,16,97,0,52,87,95,53,96,224,28,128,99,6,102,26,189,20,97,0,56,87,128,99,208,157,224,138,20,97,0,86,87,91,95,128,253,91,97,0,64,97,0,96,86,91,96,64,81,97,0,77,145,144,97,0,151,86,91,96,64,81,128,145,3,144,243,91,97,0,94,97,0,101,86,91,0,91,95,84,129,86,91,96,1,95,128,130,130,84,97,0,118,145,144,97,0,221,86,91,146,80,80,129,144,85,80,86,91,95,129,144,80,145,144,80,86,91,97,0,145,129,97,0,127,86,91,130,82,80,80,86,91,95,96,32,130,1,144,80,97,0,170,95,131,1,132,97,0,136,86,91,146,145,80,80,86,91,127,78,72,123,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,82,96,17,96,4,82,96,36,95,253,91,95,97,0,231,130,97,0,127,86,91,145,80,97,0,242,131,97,0,127,86,91,146,80,130,130,1,144,80,128,130,17,21,97,1,10,87,97,1,9,97,0,176,86,91,91,146,145,80,80,86,254,162,100,105,112,102,115,88,34,18,32,28,60,72,222,201,158,156,247,113,50,228,7,53,144,182,197,85,128,245,192,87,185,161,102,120,162,107,59,212,91,113,108,100,115,111,108,99,67,0,8,21,0,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,192,128,160,52,50,225,140,187,125,5,209,45,142,251,176,206,178,8,64,131,49,4,73,77,57,12,182,167,170,7,151,166,172,88,15,160,8,244,95,158,148,147,217,202,246,101,194,121,38,108,83,78,161,148,56,68,231,33,13,173,150,83,21,75,44,115,17,222\" at \"/0\" must pass \"bytes\" validation\r\n    at Validator.validate (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-validator/lib/commonjs/validator.js:73:23)\r\n    at Web3Validator.validate (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-validator/lib/commonjs/web3_validator.js:35:32)\r\n    at bytesToUint8Array (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/node_modules/web3-utils/lib/commonjs/converters.js:69:32)\r\n    at hexToBytes (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/node_modules/web3-utils/lib/commonjs/converters.js:114:42)\r\n    at Object.<anonymous> (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/rpc_method_wrappers.js:429:171)\r\n    at Generator.next (<anonymous>)\r\n    at /home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/rpc_method_wrappers.js:24:71\r\n    at new Promise (<anonymous>)\r\n    at __awaiter (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/rpc_method_wrappers.js:20:12)\r\n    at /home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/rpc_method_wrappers.js:426:20 {\r\n  innerError: undefined,\r\n  code: 1100,\r\n  errors: [\r\n    {\r\n      keyword: '0',\r\n      instancePath: '/0',\r\n      schemaPath: '#0',\r\n      params: {\r\n        value: '0x2,249,1,232,1,128,128,128,131,1,134,160,148,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,153,128,185,1,131,96,128,96,64,82,52,128,21,97,0,15,87,95,128,253,91,80,97,1,70,128,97,0,29,95,57,95,243,254,96,128,96,64,82,52,128,21,97,0,15,87,95,128,253,91,80,96,4,54,16,97,0,52,87,95,53,96,224,28,128,99,6,102,26,189,20,97,0,56,87,128,99,208,157,224,138,20,97,0,86,87,91,95,128,253,91,97,0,64,97,0,96,86,91,96,64,81,97,0,77,145,144,97,0,151,86,91,96,64,81,128,145,3,144,243,91,97,0,94,97,0,101,86,91,0,91,95,84,129,86,91,96,1,95,128,130,130,84,97,0,118,145,144,97,0,221,86,91,146,80,80,129,144,85,80,86,91,95,129,144,80,145,144,80,86,91,97,0,145,129,97,0,127,86,91,130,82,80,80,86,91,95,96,32,130,1,144,80,97,0,170,95,131,1,132,97,0,136,86,91,146,145,80,80,86,91,127,78,72,123,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,82,96,17,96,4,82,96,36,95,253,91,95,97,0,231,130,97,0,127,86,91,145,80,97,0,242,131,97,0,127,86,91,146,80,130,130,1,144,80,128,130,17,21,97,1,10,87,97,1,9,97,0,176,86,91,91,146,145,80,80,86,254,162,100,105,112,102,115,88,34,18,32,28,60,72,222,201,158,156,247,113,50,228,7,53,144,182,197,85,128,245,192,87,185,161,102,120,162,107,59,212,91,113,108,100,115,111,108,99,67,0,8,21,0,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,192,128,160,52,50,225,140,187,125,5,209,45,142,251,176,206,178,8,64,131,49,4,73,77,57,12,182,167,170,7,151,166,172,88,15,160,8,244,95,158,148,147,217,202,246,101,194,121,38,108,83,78,161,148,56,68,231,33,13,173,150,83,21,75,44,115,17,222'\r\n      },\r\n      message: 'value \"0x2,249,1,232,1,128,128,128,131,1,134,160,148,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,153,153,128,185,1,131,96,128,96,64,82,52,128,21,97,0,15,87,95,128,253,91,80,97,1,70,128,97,0,29,95,57,95,243,254,96,128,96,64,82,52,128,21,97,0,15,87,95,128,253,91,80,96,4,54,16,97,0,52,87,95,53,96,224,28,128,99,6,102,26,189,20,97,0,56,87,128,99,208,157,224,138,20,97,0,86,87,91,95,128,253,91,97,0,64,97,0,96,86,91,96,64,81,97,0,77,145,144,97,0,151,86,91,96,64,81,128,145,3,144,243,91,97,0,94,97,0,101,86,91,0,91,95,84,129,86,91,96,1,95,128,130,130,84,97,0,118,145,144,97,0,221,86,91,146,80,80,129,144,85,80,86,91,95,129,144,80,145,144,80,86,91,97,0,145,129,97,0,127,86,91,130,82,80,80,86,91,95,96,32,130,1,144,80,97,0,170,95,131,1,132,97,0,136,86,91,146,145,80,80,86,91,127,78,72,123,113,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,95,82,96,17,96,4,82,96,36,95,253,91,95,97,0,231,130,97,0,127,86,91,145,80,97,0,242,131,97,0,127,86,91,146,80,130,130,1,144,80,128,130,17,21,97,1,10,87,97,1,9,97,0,176,86,91,91,146,145,80,80,86,254,162,100,105,112,102,115,88,34,18,32,28,60,72,222,201,158,156,247,113,50,228,7,53,144,182,197,85,128,245,192,87,185,161,102,120,162,107,59,212,91,113,108,100,115,111,108,99,67,0,8,21,0,51,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,47,192,128,160,52,50,225,140,187,125,5,209,45,142,251,176,206,178,8,64,131,49,4,73,77,57,12,182,167,170,7,151,166,172,88,15,160,8,244,95,158,148,147,217,202,246,101,194,121,38,108,83,78,161,148,56,68,231,33,13,173,150,83,21,75,44,115,17,222\" at \"/0\" must pass \"bytes\" validation'\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nI maked some research on google but i don't find any topic with this error.\r\n\r\n**Expected behavior:** can deploy my contract\r\n\r\n**Actual behavior:** error displayed on console when sendSignedTransaction is used\r\n\r\n**Frequency:** Every time i use this function\r\n\r\n### Logs (if a bug)\r\nPlease post relevant logs from Besu (and the consensus client, if running proof of stake) from before and after the issue. \r\n\r\n### Versions (Add all that apply)\r\n* Software version: [`besu --version`] : using docker  ```image: hyperledger/besu:${BESU_VERSION:-latest}```\r\n* Java version: [`java -version`]\r\n* OS Name & Version: [`cat /etc/*release`] : Ubuntu 22.04.1 LTS\r\n* Kernel Version: [`uname -a`] : Linux blockchain 5.15.0-52-generic #58-Ubuntu SMP Thu Oct 13 08:03:55 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version: [`docker version`] : 20.10.12\r\n* Cloud VM, type, size: [Amazon Web Services I3-large]\r\n* Consensus Client & Version if using Proof of Stake: [e.g. Teku, Lighthouse, Prysm, Nimbus, Lodestar] : using QBFT\r\n\r\n### Smart contract information (If you're reporting an issue arising from deploying or calling a smart contract, please supply related information)\r\n* Solidity version [`solc --version`] : Version: 0.8.21+commit.d9974bed.Linux.g++\r\n* Repo with minimal set of deployable/reproducible contract code - please provide a link : can't provide link with my companie safety rules\r\n* Please include specifics on how you are deploying/calling the contract : step 3\r\n* Have you reproduced the issue on other eth clients : smart contract can be build / compil / deploy and use on Remix connected to my blockchain with remixd\r\n\r\n### Additional Information (Add any of the following or anything else that may be relevant)\r\n* Besu setup info - genesis file, config options : Genesis provided on top of the issue\r\n* System info - memory, CPU : VM with 4 CPU / Go RAM / 150Go SSD\r\n",
  "closed_by": {
    "login": "siladu",
    "id": 2893793,
    "node_id": "MDQ6VXNlcjI4OTM3OTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siladu",
    "html_url": "https://github.com/siladu",
    "followers_url": "https://api.github.com/users/siladu/followers",
    "following_url": "https://api.github.com/users/siladu/following{/other_user}",
    "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
    "organizations_url": "https://api.github.com/users/siladu/orgs",
    "repos_url": "https://api.github.com/users/siladu/repos",
    "events_url": "https://api.github.com/users/siladu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siladu/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/5812/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/5812/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696516153",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1696516153",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1696516153,
    "node_id": "IC_kwDODE2jmc5lHsg5",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-28T22:32:11Z",
    "updated_at": "2023-08-28T22:32:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@louloub The latest fork in your genesis file is `\"constantinoplefixblock\" : 0,`\r\nhowever the script uses `FeeMarketEIP1559Transaction` which requires the more recent `londonBlock` hard fork.\r\n\r\nI would recommend upgrading your genesis to london or later.\r\nNote, if you're using free gas with london, you need extra config:\r\nhttps://besu.hyperledger.org/stable/private-networks/how-to/configure/free-gas#4-enable-zero-base-fee-if-using-london-fork-or-later",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696516153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696518788",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1696518788",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1696518788,
    "node_id": "IC_kwDODE2jmc5lHtKE",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-28T22:35:20Z",
    "updated_at": "2023-08-28T22:35:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, are you using the latest version of quickstart? Because the latest version should already have this config built in https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/config/besu/QBFTgenesis.json#L14-L17",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696518788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1697026675",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1697026675",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1697026675,
    "node_id": "IC_kwDODE2jmc5lJpJz",
    "user": {
      "login": "louloub",
      "id": 45354686,
      "node_id": "MDQ6VXNlcjQ1MzU0Njg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/45354686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/louloub",
      "html_url": "https://github.com/louloub",
      "followers_url": "https://api.github.com/users/louloub/followers",
      "following_url": "https://api.github.com/users/louloub/following{/other_user}",
      "gists_url": "https://api.github.com/users/louloub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/louloub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/louloub/subscriptions",
      "organizations_url": "https://api.github.com/users/louloub/orgs",
      "repos_url": "https://api.github.com/users/louloub/repos",
      "events_url": "https://api.github.com/users/louloub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/louloub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T08:48:59Z",
    "updated_at": "2023-08-29T09:17:07Z",
    "author_association": "NONE",
    "body": "Hi @siladu thanks for your answers !\r\n\r\nI modified my genesis.json file like this and remove / run the blockchain, and i have the same error.\r\n\r\ngenesis.json : \r\n\r\n```\r\n\"config\" : {\r\n      \"chainId\": 1337,\r\n\t    \"homesteadBlock\": 0,\r\n\t    \"eip150Block\": 0,\r\n\t    \"eip150Hash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n\t    \"eip155Block\": 0,\r\n\t    \"eip158Block\": 0,\r\n\t    \"byzantiumBlock\": 0,\r\n\t    \"constantinopleBlock\": 0,\r\n\t    \"petersburgBlock\": 0,\r\n\t    \"istanbulBlock\": 0,\r\n\t    \"muirglacierblock\": 0,\r\n\t    \"berlinBlock\": 0,\r\n\t    \"londonBlock\": 0,\r\n\t    \"zeroBaseFee\": true,\r\n    \t    \"contractSizeLimit\": 2147483647,\r\n\t    \"qbft\": {\r\n\t      \"blockperiodseconds\": 5,\r\n\t      \"epochlength\": 30000,\r\n\t      \"requesttimeoutseconds\": 10\r\n\t    }\r\n    },\r\n    \"nonce\" : \"0x0\",\r\n    \"timestamp\" : \"0x58ee40ba\",\r\n    \"gasLimit\" : \"0x1fffffffffffff\",\r\n    \"difficulty\" : \"0x1\",\r\n    \"number\": \"0x0\",\r\n    \"gasUsed\": \"0x0\",\r\n(....)\r\n```\r\n\r\nJust after i had a error about signature length, fixed with this udpated code :\r\n```\r\nconst privateKeyBuff = Buffer.from(\r\n    account.privateKey.substring(2,66),\r\n    'hex'\r\n  );\r\n ```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1697026675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1699094120",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1699094120",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1699094120,
    "node_id": "IC_kwDODE2jmc5lRh5o",
    "user": {
      "login": "louloub",
      "id": 45354686,
      "node_id": "MDQ6VXNlcjQ1MzU0Njg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/45354686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/louloub",
      "html_url": "https://github.com/louloub",
      "followers_url": "https://api.github.com/users/louloub/followers",
      "following_url": "https://api.github.com/users/louloub/following{/other_user}",
      "gists_url": "https://api.github.com/users/louloub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/louloub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/louloub/subscriptions",
      "organizations_url": "https://api.github.com/users/louloub/orgs",
      "repos_url": "https://api.github.com/users/louloub/repos",
      "events_url": "https://api.github.com/users/louloub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/louloub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T12:39:46Z",
    "updated_at": "2023-08-30T12:39:46Z",
    "author_association": "NONE",
    "body": "Hello ! \r\n\r\nI thought I had solved the problem with this line of code, but I have a new problem after this modification.\r\n\r\ncode line : \r\n\r\n```\r\nconst result = Buffer.from(serializedTx).toString(\"hex\");\r\nconst pTx = await web3.eth.sendSignedTransaction(\r\n    result,\r\n    function (error, receipt) {\r\n      if (!error) {\r\n        console.log(\"receipt ==> \", receipt);\r\n      } else {\r\n        console.log(\"error ==> \", error);\r\n      }\r\n    }\r\n  );\r\n\r\n```\r\n\r\nnew issue :\r\n```\r\n/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/utils/get_transaction_error.js:48\r\n            error = new web3_errors_1.TransactionRevertInstructionError(_reason, undefined, transactionReceiptFormatted);\r\n                    ^\r\n\r\nTransactionRevertInstructionError: Transaction has been reverted by the EVM\r\n    at /home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/utils/get_transaction_error.js:48:21\r\n    at Generator.next (<anonymous>)\r\n    at /home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/utils/get_transaction_error.js:24:71\r\n    at new Promise (<anonymous>)\r\n    at __awaiter (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/utils/get_transaction_error.js:20:12)\r\n    at getTransactionError (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/utils/get_transaction_error.js:33:12)\r\n    at Object.<anonymous> (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/rpc_method_wrappers.js:441:100)\r\n    at Generator.next (<anonymous>)\r\n    at fulfilled (/home/adminlogin/BESU_NETWORK/v5/contracts/EOBLOCK v2/node_modules/web3-eth/lib/commonjs/rpc_method_wrappers.js:21:58)\r\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {\r\n  innerError: undefined,\r\n  reason: 'Internal error',\r\n  signature: undefined,\r\n  receipt: undefined,\r\n  data: undefined,\r\n  code: 402\r\n}\r\n```\r\n\r\n\r\nDoes i create new issue on github ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1699094120/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1700319510",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1700319510",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1700319510,
    "node_id": "IC_kwDODE2jmc5lWNEW",
    "user": {
      "login": "joshuafernandes",
      "id": 3722503,
      "node_id": "MDQ6VXNlcjM3MjI1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshuafernandes",
      "html_url": "https://github.com/joshuafernandes",
      "followers_url": "https://api.github.com/users/joshuafernandes/followers",
      "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
      "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
      "repos_url": "https://api.github.com/users/joshuafernandes/repos",
      "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-31T03:34:20Z",
    "updated_at": "2023-08-31T03:34:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hello @louloub \r\n\r\nKeep the thread here for now. I haven't quite figured out what's going on with web3, but have been ok deploying contracts with ethers.js\r\n\r\nSomething like this below works fine on Besu on the quickstart, hopefully will unblock you\r\n```\r\nconst path = require('path');\r\nconst fs = require('fs-extra');\r\nvar ethers = require('ethers');\r\n\r\n// RPCNODE details\r\nconst { tessera, besu } = require(\"../keys.js\");\r\nconst host = besu.rpcnode.url;\r\nconst accountPrivateKey = besu.rpcnode.accountPrivateKey;\r\n\r\n// abi and bytecode generated from simplestorage.sol:\r\n// > solcjs --bin --abi simplestorage.sol\r\nconst contractJsonPath = path.resolve(__dirname, '../../','contracts','Test.json');\r\nconst contractJson = JSON.parse(fs.readFileSync(contractJsonPath));\r\nconst contractAbi = contractJson.abi;\r\nconst contractBytecode = contractJson.evm.bytecode.object\r\n\r\nasync function main(){\r\n  const provider = new ethers.providers.JsonRpcProvider(host);\r\n  const wallet = new ethers.Wallet(accountPrivateKey, provider);\r\n  const nonce = await provider.getTransactionCount(wallet.address);\r\n  const feeData = await provider.getFeeData();\r\n  const gasLimit = await provider.estimateGas({from: wallet.address, value: ethers.utils.parseUnits(\"0.01\", \"ether\")});\r\n  var txn = {\r\n    chainId: 1337,\r\n    type: 2,\r\n    nonce: nonce,\r\n    to: \"0x0000000000000000000000000000000000009999\",\r\n    value: ethers.utils.parseEther(\"0.01\"),\r\n    data: '0x'+contractBytecode,\r\n    gasLimit: gasLimit,\r\n    maxPriorityFeePerGas: feeData[\"maxPriorityFeePerGas\"], \r\n    maxFeePerGas: feeData[\"maxFeePerGas\"], \r\n  };\r\n  const signedTx = await wallet.signTransaction(txn);\r\n  provider.sendTransaction(signedTx).then(console.log);\r\n}\r\n\r\nif (require.main === module) {\r\n  main();\r\n}\r\n\r\nmodule.exports = exports = main\r\n```\r\n\r\nCheers\r\nJosh",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1700319510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1706497185",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1706497185",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1706497185,
    "node_id": "IC_kwDODE2jmc5ltxSh",
    "user": {
      "login": "louloub",
      "id": 45354686,
      "node_id": "MDQ6VXNlcjQ1MzU0Njg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/45354686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/louloub",
      "html_url": "https://github.com/louloub",
      "followers_url": "https://api.github.com/users/louloub/followers",
      "following_url": "https://api.github.com/users/louloub/following{/other_user}",
      "gists_url": "https://api.github.com/users/louloub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/louloub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/louloub/subscriptions",
      "organizations_url": "https://api.github.com/users/louloub/orgs",
      "repos_url": "https://api.github.com/users/louloub/repos",
      "events_url": "https://api.github.com/users/louloub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/louloub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T12:06:24Z",
    "updated_at": "2023-09-06T07:25:57Z",
    "author_association": "NONE",
    "body": "Hi @joshuafernandes !\r\n\r\nThanks for your time :) \r\n\r\nI followed your code and modify some code line for finally deploy correctly my contract with ethers.js and can use one function ! (now i have another issue for using call function, i will create new issue i think)\r\n\r\nThis is my code : \r\n\r\n```\r\nconst { ethers, JsonRpcProvider } = require(\"ethers\");\r\nconst fs = require(\"fs\");\r\nconst solFile = fs.readFileSync(\"../Test.sol\", \"utf8\");\r\nconst solc = require(\"solc\");\r\n\r\nconst provider = new JsonRpcProvider(\"http://localhost:8545\");\r\nconst privateKey =\r\n  \"0x0ba970ff5e9b9c4ce2435fdf94a998af0b5892c4f6f7b9c3fcb0772ae98ab54\";\r\nconst wallet = new ethers.Wallet(privateKey, provider);\r\nconst receiver = \"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73\";\r\n\r\nbuildContract();\r\n\r\nasync function buildContract() {\r\n  const input = {\r\n    language: \"Solidity\",\r\n    sources: {\r\n      \"Test.sol\": {\r\n        content: solFile,\r\n      },\r\n    },\r\n    settings: {\r\n      outputSelection: {\r\n        \"*\": {\r\n          \"*\": [\"*\"],\r\n        },\r\n      },\r\n    },\r\n  };\r\n  const output = JSON.parse(solc.compile(JSON.stringify(input)));\r\n  const bytecode = output.contracts[\"Test.sol\"][\"Test\"].evm.bytecode.object;\r\n  const abi = output.contracts[\"Test.sol\"][\"Test\"].abi;\r\n\r\n  const factory3 = new ethers.ContractFactory(abi, bytecode, wallet);\r\n  const nonce = await provider.getTransactionCount(wallet)\r\n  const contractDeployed = await factory3.deploy({\r\n    gasLimit: \"0x4e85c\",\r\n    gasPrice: \"0x0\",\r\n    nonce: nonce\r\n  });\r\n\r\n  console.log(\"contractDeployed ==> \", contractDeployed);\r\n\r\n  const contractDeployedAddress = await contractDeployed.getAddress();\r\n  console.log(\"contractDeployedAddress ==> \", contractDeployedAddress);\r\n  \r\n  const sampleContract = new ethers.Contract(\r\n    contractDeployedAddress,\r\n    abi,\r\n    wallet\r\n  );\r\n  const tx = await sampleContract.increment({\r\n    gasLimit: \"0x4e85c\",\r\n    gasPrice: \"0x0\",\r\n  });\r\n\r\n  console.log(\"tx ==> \" ,tx); \r\n```\r\n\r\nEDIT : for this solution, i'm back to NO EIP1559 blockchain version, this is my genesis.json :\r\n\r\n```\r\n \"config\" : {\r\n      \"chainId\" : 1337,\r\n      \"homesteadBlock\": 0,\r\n      \"eip150Block\": 0,\r\n      \"eip155Block\": 0,\r\n      \"eip158Block\": 0,\r\n      \"byzantiumBlock\": 0,\r\n      \"constantinoplefixblock\" : 0,\r\n      \"qbft\": {\r\n        \"epochlength\": 30000,\r\n        \"blockperiodseconds\": 5,\r\n        \"requesttimeoutseconds\": 10\r\n      }\r\n    },\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1706497185/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707341862",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1707341862",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1707341862,
    "node_id": "IC_kwDODE2jmc5lw_gm",
    "user": {
      "login": "joshuafernandes",
      "id": 3722503,
      "node_id": "MDQ6VXNlcjM3MjI1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshuafernandes",
      "html_url": "https://github.com/joshuafernandes",
      "followers_url": "https://api.github.com/users/joshuafernandes/followers",
      "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
      "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
      "repos_url": "https://api.github.com/users/joshuafernandes/repos",
      "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T21:36:35Z",
    "updated_at": "2023-09-05T21:36:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @louloub \r\n\r\nReally good to hear :) I've added in some examples based on this specifically (EIP-1559) in the quickstart yesterday and got it to deploy & read + write https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/smart_contracts/scripts/public/hre_1559_public_tx.js\r\n\r\nHave also stuck to the ethers type of calls and contractfactory (I find this abstractions nicer to work with). Let me know if this works for your token as well and feel free to submit a PR if its lacking functionality\r\n\r\nCheers\r\nJosh",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707341862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707860345",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1707860345",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1707860345,
    "node_id": "IC_kwDODE2jmc5ly-F5",
    "user": {
      "login": "louloub",
      "id": 45354686,
      "node_id": "MDQ6VXNlcjQ1MzU0Njg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/45354686?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/louloub",
      "html_url": "https://github.com/louloub",
      "followers_url": "https://api.github.com/users/louloub/followers",
      "following_url": "https://api.github.com/users/louloub/following{/other_user}",
      "gists_url": "https://api.github.com/users/louloub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/louloub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/louloub/subscriptions",
      "organizations_url": "https://api.github.com/users/louloub/orgs",
      "repos_url": "https://api.github.com/users/louloub/repos",
      "events_url": "https://api.github.com/users/louloub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/louloub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T08:01:31Z",
    "updated_at": "2023-09-06T08:01:31Z",
    "author_association": "NONE",
    "body": "Hi @joshuafernandes \r\n\r\nThanks for your answer ! I just updated my previous comment because i forgot to preciss that i'm back to NO EIP1559 blockchain version.  Actualy i can use Ethers.js to deploy contract from .sol files and use \"increment\" function . But i have issue for simple \"call\" function. I'm working on it and i will create new issue for this :) \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707860345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1709232687",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1709232687",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1709232687,
    "node_id": "IC_kwDODE2jmc5l4NIv",
    "user": {
      "login": "joshuafernandes",
      "id": 3722503,
      "node_id": "MDQ6VXNlcjM3MjI1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshuafernandes",
      "html_url": "https://github.com/joshuafernandes",
      "followers_url": "https://api.github.com/users/joshuafernandes/followers",
      "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
      "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
      "repos_url": "https://api.github.com/users/joshuafernandes/repos",
      "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T22:58:13Z",
    "updated_at": "2023-09-06T22:58:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @louloub \r\n\r\nSounds good! This one should work in the future if you need one that is EIP-1559 https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/smart_contracts/scripts/public/hre_1559_public_tx.js#L69 .\r\n\r\nFor a normal one this should get you going https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/smart_contracts/scripts/public/hre_public_tx.js#L53 I have a get/set operation after deployment. Let me know if that works, else create a new issue \r\n\r\nCheers",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1709232687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1710867321",
    "html_url": "https://github.com/hyperledger/besu/issues/5812#issuecomment-1710867321",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5812",
    "id": 1710867321,
    "node_id": "IC_kwDODE2jmc5l-cN5",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-07T23:01:28Z",
    "updated_at": "2023-09-07T23:01:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @joshuafernandes and @louloub for your comments - I think this issue can be resolved now. If not, feel free to reopen. \r\n\r\n@louloub if the new issue is related to the quickstart scripts rather than Besu itself, then https://github.com/Consensys/quorum-dev-quickstart might be a better place for it",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1710867321/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4119/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4119/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4119/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4119",
  "id": 1307402863,
  "node_id": "I_kwDODE2jmc5N7WJv",
  "number": 4119,
  "title": "Increase default maximum size for p2p messages",
  "user": {
    "login": "pinges",
    "id": 16143240,
    "node_id": "MDQ6VXNlcjE2MTQzMjQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pinges",
    "html_url": "https://github.com/pinges",
    "followers_url": "https://api.github.com/users/pinges/followers",
    "following_url": "https://api.github.com/users/pinges/following{/other_user}",
    "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
    "organizations_url": "https://api.github.com/users/pinges/orgs",
    "repos_url": "https://api.github.com/users/pinges/repos",
    "events_url": "https://api.github.com/users/pinges/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pinges/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2152224197,
      "node_id": "MDU6TGFiZWwyMTUyMjI0MTk3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamRevenant",
      "name": "TeamRevenant",
      "color": "78e298",
      "default": false,
      "description": "GH issues worked on by Revenant Team"
    },
    {
      "id": 3805591260,
      "node_id": "LA_kwDODE2jmc7i1Lbc",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/peering",
      "name": "peering",
      "color": "006b75",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "pinges",
    "id": 16143240,
    "node_id": "MDQ6VXNlcjE2MTQzMjQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pinges",
    "html_url": "https://github.com/pinges",
    "followers_url": "https://api.github.com/users/pinges/followers",
    "following_url": "https://api.github.com/users/pinges/following{/other_user}",
    "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
    "organizations_url": "https://api.github.com/users/pinges/orgs",
    "repos_url": "https://api.github.com/users/pinges/repos",
    "events_url": "https://api.github.com/users/pinges/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pinges/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "pinges",
      "id": 16143240,
      "node_id": "MDQ6VXNlcjE2MTQzMjQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinges",
      "html_url": "https://github.com/pinges",
      "followers_url": "https://api.github.com/users/pinges/followers",
      "following_url": "https://api.github.com/users/pinges/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
      "organizations_url": "https://api.github.com/users/pinges/orgs",
      "repos_url": "https://api.github.com/users/pinges/repos",
      "events_url": "https://api.github.com/users/pinges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinges/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2022-07-18T04:49:50Z",
  "updated_at": "2022-07-28T14:07:47Z",
  "closed_at": "2022-07-20T05:05:50Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I have noticed that we are disconnecting peers that are responding to our requests on the p2p protocol during syncing because they are sending messages larger than the current max size of 10 MB.\r\nThis PR increases the default maximum size to 20 MB to make sure that we are not disconnecting useful peers.\r\nThis maximum size can be set using the experimental CLI argument \"--Xeth-max-message-size\"\r\n\r\nRelates To: https://github.com/hyperledger/besu/issues/3867",
  "closed_by": {
    "login": "pinges",
    "id": 16143240,
    "node_id": "MDQ6VXNlcjE2MTQzMjQw",
    "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pinges",
    "html_url": "https://github.com/pinges",
    "followers_url": "https://api.github.com/users/pinges/followers",
    "following_url": "https://api.github.com/users/pinges/following{/other_user}",
    "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
    "organizations_url": "https://api.github.com/users/pinges/orgs",
    "repos_url": "https://api.github.com/users/pinges/repos",
    "events_url": "https://api.github.com/users/pinges/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pinges/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4119/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4119/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186768820",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1186768820",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1186768820,
    "node_id": "IC_kwDODE2jmc5GvKe0",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T04:57:29Z",
    "updated_at": "2022-07-18T04:57:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "May be worth checking what the max size is for other clients as increasing the size here could open DoS vectors.  The other way to avoid this would be to reduce the size of block ranges we request.  And in either case we should ensure the size of responses to our block requests is well below whatever maximum size we set as block sizes are likely to grow in the future which could re-introduce this problem.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186768820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186795346",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1186795346",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1186795346,
    "node_id": "IC_kwDODE2jmc5GvQ9S",
    "user": {
      "login": "pinges",
      "id": 16143240,
      "node_id": "MDQ6VXNlcjE2MTQzMjQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinges",
      "html_url": "https://github.com/pinges",
      "followers_url": "https://api.github.com/users/pinges/followers",
      "following_url": "https://api.github.com/users/pinges/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
      "organizations_url": "https://api.github.com/users/pinges/orgs",
      "repos_url": "https://api.github.com/users/pinges/repos",
      "events_url": "https://api.github.com/users/pinges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T05:53:51Z",
    "updated_at": "2022-07-18T05:53:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "You are absolutely right. The current limit has probably been selected by calculating what was expected to be the maximum possible size plus a margin. The question is whether we want to change the number of block ranges that we are requesting or increase the max message size. \nI'm not sure if it is possible to adjust either of these in a way that we do not run into that problem as block sizes grow in the future, but that would be the best solution!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186795346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186799879",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1186799879",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1186799879,
    "node_id": "IC_kwDODE2jmc5GvSEH",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T06:03:27Z",
    "updated_at": "2022-07-18T06:03:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm more concerned about whether the message limit also applies to unsolicited messages. We don't want to increase the amount of data we'd read and try to process as that can open up DoS vulnerabilities.  I'm not sure if increasing from 10Mb would be an issue, but it's something to consider as it's not necessarily guaranteed to be safe to increase that limit.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186799879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1188445048",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1188445048",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1188445048,
    "node_id": "IC_kwDODE2jmc5G1jt4",
    "user": {
      "login": "iamhsk",
      "id": 2249367,
      "node_id": "MDQ6VXNlcjIyNDkzNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2249367?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamhsk",
      "html_url": "https://github.com/iamhsk",
      "followers_url": "https://api.github.com/users/iamhsk/followers",
      "following_url": "https://api.github.com/users/iamhsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamhsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamhsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamhsk/subscriptions",
      "organizations_url": "https://api.github.com/users/iamhsk/orgs",
      "repos_url": "https://api.github.com/users/iamhsk/repos",
      "events_url": "https://api.github.com/users/iamhsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamhsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T23:46:55Z",
    "updated_at": "2022-07-18T23:46:55Z",
    "author_association": "NONE",
    "body": "One approach is to investigate the message limit on other clients to decide on the limit ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1188445048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1189056102",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1189056102",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1189056102,
    "node_id": "IC_kwDODE2jmc5G345m",
    "user": {
      "login": "Gabriel-Trintinalia",
      "id": 14837672,
      "node_id": "MDQ6VXNlcjE0ODM3Njcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/14837672?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Gabriel-Trintinalia",
      "html_url": "https://github.com/Gabriel-Trintinalia",
      "followers_url": "https://api.github.com/users/Gabriel-Trintinalia/followers",
      "following_url": "https://api.github.com/users/Gabriel-Trintinalia/following{/other_user}",
      "gists_url": "https://api.github.com/users/Gabriel-Trintinalia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Gabriel-Trintinalia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Gabriel-Trintinalia/subscriptions",
      "organizations_url": "https://api.github.com/users/Gabriel-Trintinalia/orgs",
      "repos_url": "https://api.github.com/users/Gabriel-Trintinalia/repos",
      "events_url": "https://api.github.com/users/Gabriel-Trintinalia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Gabriel-Trintinalia/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T13:29:33Z",
    "updated_at": "2022-07-19T13:29:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is this relevant to this issue? Shouldn't we follow this limit? Got it from  the Ethereum Wire Protocol (ETH)\nhttps://github.com/ethereum/devp2p/blob/master/caps/eth.md\n> Client implementations should enforce limits on protocol message sizes. The underlying RLPx transport limits the size of a single message to 16.7 MiB. The practical limits for the eth protocol are lower, typically 10 MiB. If a received message is larger than the limit, the peer should be disconnected.\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1189056102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1189832855",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1189832855",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1189832855,
    "node_id": "IC_kwDODE2jmc5G62iX",
    "user": {
      "login": "pinges",
      "id": 16143240,
      "node_id": "MDQ6VXNlcjE2MTQzMjQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinges",
      "html_url": "https://github.com/pinges",
      "followers_url": "https://api.github.com/users/pinges/followers",
      "following_url": "https://api.github.com/users/pinges/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
      "organizations_url": "https://api.github.com/users/pinges/orgs",
      "repos_url": "https://api.github.com/users/pinges/repos",
      "events_url": "https://api.github.com/users/pinges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-20T05:04:22Z",
    "updated_at": "2022-07-20T05:04:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "PR https://github.com/hyperledger/besu/pull/4120",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1189832855/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1190397602",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1190397602",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1190397602,
    "node_id": "IC_kwDODE2jmc5G9Aai",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-20T15:00:41Z",
    "updated_at": "2022-07-20T15:00:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pinges - do you know which clients are sending large messages?  Just pushed a fix to limit besu's outgoing message size, but that has likely not propagated out to all besu nodes yet: https://github.com/hyperledger/besu/pull/4034",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1190397602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1190399381",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1190399381",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1190399381,
    "node_id": "IC_kwDODE2jmc5G9A2V",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-20T15:02:11Z",
    "updated_at": "2022-07-20T15:02:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "The 10MB limit is mentioned [here](https://github.com/ethereum/devp2p/blob/87c916174414d59ffd2195f207c5558154ff8e2a/caps/eth.md#basic-operation):\r\n```\r\nClient implementations should enforce limits on protocol message sizes. The underlying RLPx transport limits the size of a single message to 16.7 MiB. The practical limits for the eth protocol are lower, typically 10 MiB. If a received message is larger than the limit, the peer should be disconnected.\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1190399381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1194834581",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1194834581",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1194834581,
    "node_id": "IC_kwDODE2jmc5HN7qV",
    "user": {
      "login": "pinges",
      "id": 16143240,
      "node_id": "MDQ6VXNlcjE2MTQzMjQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinges",
      "html_url": "https://github.com/pinges",
      "followers_url": "https://api.github.com/users/pinges/followers",
      "following_url": "https://api.github.com/users/pinges/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
      "organizations_url": "https://api.github.com/users/pinges/orgs",
      "repos_url": "https://api.github.com/users/pinges/repos",
      "events_url": "https://api.github.com/users/pinges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T00:48:49Z",
    "updated_at": "2022-07-26T00:48:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Good question. I'm not sure what client did this, but as these limits in the p2p spec are only \"should\"s and the 10MB limit says \"typically\" I think there is a chance that other clients have not implemented that. \r\nLoosing these peers is really bad, as this happens on top of our problems finding peers in the first place. These peers are delivering useful data.\r\nI think it would be good to understand which clients are sending these big messages and I will add a debug log message to find out!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1194834581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1196160665",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1196160665",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1196160665,
    "node_id": "IC_kwDODE2jmc5HS_aZ",
    "user": {
      "login": "pinges",
      "id": 16143240,
      "node_id": "MDQ6VXNlcjE2MTQzMjQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinges",
      "html_url": "https://github.com/pinges",
      "followers_url": "https://api.github.com/users/pinges/followers",
      "following_url": "https://api.github.com/users/pinges/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
      "organizations_url": "https://api.github.com/users/pinges/orgs",
      "repos_url": "https://api.github.com/users/pinges/repos",
      "events_url": "https://api.github.com/users/pinges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T01:14:23Z",
    "updated_at": "2022-07-27T01:14:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Had a goerli node running for some time where I added a debug log to see which clients send messages that are bigger than 10MB\r\n2022-07-26 16:50:54.367+10:00 | nioEventLoopGroup-3-7 | DEBUG | EthProtocolManager | Peer PeerId 0xc80015ba29d42f15e7f0b3a4f9f8c38f447a080b537ac8165386e72b8d7b82c0b1aa0935ea6185deffb1de6f9c1e228e48e075aa3944637f8335ce4a703e1ccf, reputation PeerReputation 100, validated? true, disconnected? false, client: besu/v22.4.3/linux-x86_64/openjdk-java-17, connection 90281444, enode enode://c80015ba29d42f15e7f0b3a4f9f8c38f447a080b537ac8165386e72b8d7b82c0b1aa0935ea6185deffb1de6f9c1e228e48e075aa3944637f8335ce4a703e1ccf@45.8.223.230:58342 sent a message with size 12443552, larger than the max message size 10485760\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1196160665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1196164098",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1196164098",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1196164098,
    "node_id": "IC_kwDODE2jmc5HTAQC",
    "user": {
      "login": "pinges",
      "id": 16143240,
      "node_id": "MDQ6VXNlcjE2MTQzMjQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16143240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinges",
      "html_url": "https://github.com/pinges",
      "followers_url": "https://api.github.com/users/pinges/followers",
      "following_url": "https://api.github.com/users/pinges/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinges/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinges/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinges/subscriptions",
      "organizations_url": "https://api.github.com/users/pinges/orgs",
      "repos_url": "https://api.github.com/users/pinges/repos",
      "events_url": "https://api.github.com/users/pinges/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinges/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T01:22:07Z",
    "updated_at": "2022-07-27T01:22:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "22.4.3 was released on the 17th of June 2022, @mbaxter PR for limiting the size of outgoing messages was merged on the 6th of July!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1196164098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1198188452",
    "html_url": "https://github.com/hyperledger/besu/issues/4119#issuecomment-1198188452",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4119",
    "id": 1198188452,
    "node_id": "IC_kwDODE2jmc5Hauek",
    "user": {
      "login": "mbaxter",
      "id": 658601,
      "node_id": "MDQ6VXNlcjY1ODYwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/658601?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbaxter",
      "html_url": "https://github.com/mbaxter",
      "followers_url": "https://api.github.com/users/mbaxter/followers",
      "following_url": "https://api.github.com/users/mbaxter/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbaxter/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbaxter/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbaxter/subscriptions",
      "organizations_url": "https://api.github.com/users/mbaxter/orgs",
      "repos_url": "https://api.github.com/users/mbaxter/repos",
      "events_url": "https://api.github.com/users/mbaxter/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbaxter/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-28T14:04:25Z",
    "updated_at": "2022-07-28T14:07:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "If we're only seeing this problem with unpatched Besu nodes, we should probably re-enable this limit now or in a few months time.\r\n\r\nAnother safe option, which would allow us to re-enable this limit if needed, would be to:\r\n* Split up the [`--Xeth-max-message-size`](https://github.com/mbaxter/besu/blob/f3042590b11cb7b3fa6fce328f8b89232dd38f75/besu/src/main/java/org/hyperledger/besu/cli/options/unstable/EthProtocolOptions.java#L37-L44) flag into 2: `--Xeth-max-message-size-outbound` and `--Xeth-max-message-size-inbound`\r\n* We could then increase the inbound limit to the [16MB RLPx limit](https://github.com/hyperledger/besu/blob/93da04cf0050fbdeae22e27d4976807b8475d727/ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/rlpx/RlpxFrameConstants.java#L21) to effectively disable the inbound limit temporarily\r\n* After some time, we could then move the inbound limit back down the 10MB",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1198188452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

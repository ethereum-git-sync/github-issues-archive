{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2856",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2856/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2856/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2856/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2856",
  "id": 1017802572,
  "node_id": "I_kwDODE2jmc48qm9M",
  "number": 2856,
  "title": "JsonUtil.normalizeKeys should handle ArrayNodes",
  "user": {
    "login": "siladu",
    "id": 2893793,
    "node_id": "MDQ6VXNlcjI4OTM3OTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/siladu",
    "html_url": "https://github.com/siladu",
    "followers_url": "https://api.github.com/users/siladu/followers",
    "following_url": "https://api.github.com/users/siladu/following{/other_user}",
    "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
    "organizations_url": "https://api.github.com/users/siladu/orgs",
    "repos_url": "https://api.github.com/users/siladu/repos",
    "events_url": "https://api.github.com/users/siladu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/siladu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362500,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNTAw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "7057ff",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 1921587647,
      "node_id": "MDU6TGFiZWwxOTIxNTg3NjQ3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamGroot",
      "name": "TeamGroot",
      "color": "1d76db",
      "default": false,
      "description": "GH issues worked on by Groot Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "lucassaldanha",
    "id": 1766440,
    "node_id": "MDQ6VXNlcjE3NjY0NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1766440?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucassaldanha",
    "html_url": "https://github.com/lucassaldanha",
    "followers_url": "https://api.github.com/users/lucassaldanha/followers",
    "following_url": "https://api.github.com/users/lucassaldanha/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucassaldanha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucassaldanha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucassaldanha/subscriptions",
    "organizations_url": "https://api.github.com/users/lucassaldanha/orgs",
    "repos_url": "https://api.github.com/users/lucassaldanha/repos",
    "events_url": "https://api.github.com/users/lucassaldanha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucassaldanha/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "lucassaldanha",
      "id": 1766440,
      "node_id": "MDQ6VXNlcjE3NjY0NDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1766440?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lucassaldanha",
      "html_url": "https://github.com/lucassaldanha",
      "followers_url": "https://api.github.com/users/lucassaldanha/followers",
      "following_url": "https://api.github.com/users/lucassaldanha/following{/other_user}",
      "gists_url": "https://api.github.com/users/lucassaldanha/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lucassaldanha/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lucassaldanha/subscriptions",
      "organizations_url": "https://api.github.com/users/lucassaldanha/orgs",
      "repos_url": "https://api.github.com/users/lucassaldanha/repos",
      "events_url": "https://api.github.com/users/lucassaldanha/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lucassaldanha/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-10-06T08:40:54Z",
  "updated_at": "2021-11-09T04:58:44Z",
  "closed_at": "2021-11-09T04:58:44Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\nAs a besu user, I want the genesis file to be read correctly so that my transition config is not ignored if I forget to use lower case.\n\n### Steps to Reproduce (Bug)\n1. Start besu with a genesis file containing a transition with mixed case keys (see example below)\n2. Mine blocks until the transition should occur\n3. Verify the transition hasn't occurred\n\n**Expected behavior:** Mixed case keys should be ignored (normalised) and the transition should work\n\n**Actual behavior:** Transition isn't triggered\n### Additional Information\n\nProposed solution is to make JsonUtil.normalizeKeys support ArrayNodes.\n\nIn the following example, `validatorSelectionMode` and `validatorContractAddress` should be normalized and therefore read into the configuration in memory.\n\n```\n{\n  \"config\": {\n    \"chainid\": 1337,\n    \"homesteadBlock\": 0,\n    \"eip150Block\": 0,\n    \"eip155Block\": 0,\n    \"eip158Block\": 0,\n    \"byzantiumBlock\": 0,\n    \"qbft\": {\n      \"epochlength\": 30000,\n      \"blockperiodseconds\": 15,\n      \"requesttimeoutseconds\": 10\n    },\n    \"transitions\": {\n      \"qbft\": [\n        {\n          \"block\": 1,\n          \"validatorSelectionMode\": \"contract\",\n          \"validatorContractAddress\": \"0x0000000000000000000000000000000000008888\"\n        }\n      ]\n    }\n  },\n  \"nonce\": \"0x0\",\n  \"timestamp\": \"0x5b3d92d7\",\n  \"extraData\": \"0xf83aa00000000000000000000000000000000000000000000000000000000000000000d59489abefc83377592802c8e001e41143a7aed15347c080c0\",\n  \"gasLimit\": \"0x29b92700\",\n  \"difficulty\": \"0x1\",\n  \"mixHash\": \"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365\",\n  \"coinbase\": \"0x0000000000000000000000000000000000000000\",\n  \"alloc\" : {\n    \"fe3b557e8fb62b89f4916b721be55ceb828dbd73\" : {\n      \"privateKey\" : \"8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63\",\n      \"comment\" : \"private key and this comment are ignored.  In a real chain, the private key should NOT be stored\",\n      \"balance\" : \"0xad78ebc5ac6200000\"\n    },\n    \"627306090abaB3A6e1400e9345bC60c78a8BEf57\" : {\n      \"privateKey\" : \"c87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3\",\n      \"comment\" : \"private key and this comment are ignored.  In a real chain, the private key should NOT be stored\",\n      \"balance\" : \"90000000000000000000000\"\n    },\n    \"f17f52151EbEF6C7334FAD080c5704D77216b732\" : {\n      \"privateKey\" : \"ae6ae8e5ccbfb04590405997ee2d52d2b330726137b875053c36d94e974d162f\",\n      \"comment\" : \"private key and this comment are ignored.  In a real chain, the private key should NOT be stored\",\n      \"balance\" : \"90000000000000000000000\"\n    },\n    \"0x0000000000000000000000000000000000008888\": {\n      \"comment\": \"validator smart contract. This is compiled from validator_contract.sol using solc --evm-version byzantium --bin-runtime validator_contract.sol\",\n      \"balance\": \"0\",\n      \"code\": \"608060405234801561001057600080fd5b5060043610610048576000357c010000000000000000000000000000000000000000000000000000000090048063b7ab4db51461004d575b600080fd5b61005561006b565b604051610062919061017e565b60405180910390f35b606060008054806020026020016040519081016040528092919081815260200182805480156100ef57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116100a5575b5050505050905090565b60006101058383610111565b60208301905092915050565b61011a816101d9565b82525050565b600061012b826101b0565b61013581856101c8565b9350610140836101a0565b8060005b8381101561017157815161015888826100f9565b9750610163836101bb565b925050600181019050610144565b5085935050505092915050565b600060208201905081810360008301526101988184610120565b905092915050565b6000819050602082019050919050565b600081519050919050565b6000602082019050919050565b600082825260208201905092915050565b60006101e4826101eb565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff8216905091905056fea26469706673582212206d880cf012c1677c691bf6f2f0a0e4eadf57866ffe5cd2d9833d3cfdf27b15f664736f6c63430008060033\",\n      \"storage\": {\n        \"0000000000000000000000000000000000000000000000000000000000000000\": \"0000000000000000000000000000000000000000000000000000000000000001\",\n        \"290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563\": \"00000000000000000000000089abefc83377592802c8e001e41143a7aed15347\"\n      }\n    }\n  },\n  \"number\": \"0x0\",\n  \"gasUsed\": \"0x0\",\n  \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n}\n```",
  "closed_by": {
    "login": "lucassaldanha",
    "id": 1766440,
    "node_id": "MDQ6VXNlcjE3NjY0NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1766440?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lucassaldanha",
    "html_url": "https://github.com/lucassaldanha",
    "followers_url": "https://api.github.com/users/lucassaldanha/followers",
    "following_url": "https://api.github.com/users/lucassaldanha/following{/other_user}",
    "gists_url": "https://api.github.com/users/lucassaldanha/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lucassaldanha/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lucassaldanha/subscriptions",
    "organizations_url": "https://api.github.com/users/lucassaldanha/orgs",
    "repos_url": "https://api.github.com/users/lucassaldanha/repos",
    "events_url": "https://api.github.com/users/lucassaldanha/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lucassaldanha/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2856/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2856/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

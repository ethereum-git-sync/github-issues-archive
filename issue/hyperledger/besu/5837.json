{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/5837",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/5837/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/5837/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/5837/events",
  "html_url": "https://github.com/hyperledger/besu/issues/5837",
  "id": 1877108778,
  "node_id": "I_kwDODE2jmc5v4mgq",
  "number": 5837,
  "title": "Besu v23.7.1 does not synchronize with goerli",
  "user": {
    "login": "chichi13",
    "id": 25102234,
    "node_id": "MDQ6VXNlcjI1MTAyMjM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/25102234?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chichi13",
    "html_url": "https://github.com/chichi13",
    "followers_url": "https://api.github.com/users/chichi13/followers",
    "following_url": "https://api.github.com/users/chichi13/following{/other_user}",
    "gists_url": "https://api.github.com/users/chichi13/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chichi13/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chichi13/subscriptions",
    "organizations_url": "https://api.github.com/users/chichi13/orgs",
    "repos_url": "https://api.github.com/users/chichi13/repos",
    "events_url": "https://api.github.com/users/chichi13/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chichi13/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-09-01T09:48:28Z",
  "updated_at": "2023-09-07T08:29:09Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nI wanted to sync Goerli network with Besu `v23.7.1`, unfortunately the sync blocked 3 times on the block `0x928201` (9601537).\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Use `v23.7.1`\r\n2. Configuration used: \r\n\r\n```ini\r\nExecStart=/home/ethereum/bin/besu/bin/besu \\\r\n  --network=goerli \\\r\n  --logging=INFO \\\r\n  --host-allowlist=* \\\r\n  --metrics-enabled=true \\\r\n  --metrics-port=6061 \\\r\n  --metrics-host=0.0.0.0 \\\r\n  --rpc-http-enabled=true \\\r\n  --rpc-http-port=8545 \\\r\n  --rpc-ws-enabled=True \\\r\n  --rpc-ws-host=localhost \\\r\n  --rpc-ws-port=8554 \\\r\n  --max-peers=10 \\\r\n  --sync-mode=X_CHECKPOINT \\\r\n  --data-storage-format=BONSAI \\\r\n  --data-path=/home/ethereum/var/lib/besu \\\r\n  --Xplugin-rocksdb-high-spec-enabled \\\r\n  --engine-jwt-secret=/home/ethereum/secrets/jwtsecret \\\r\n  --api-gas-price-blocks=100 \\\r\n  --api-gas-price-percentile=99 \\\r\n  --min-gas-price=1\r\n```\r\n\r\n3. Sync the node\r\n\r\n**Expected behavior:** Node syncing well\r\n\r\n**Actual behavior:** Sync blocked at height 9601537 without any error.\r\n\r\n**Frequency:** Everytime with `v23.7.1`, tried with, `X_CHECKPOINT` and `X_SNAP`.\r\n\r\n### Logs (if a bug)\r\n\r\n- At the begining, no error:\r\n\r\n![image](https://github.com/hyperledger/besu/assets/25102234/1fd2e9eb-7da9-47d6-9214-db16f53cbc2e)\r\n\r\nWe can see, Besu will download the pivot block 9601537 (`Downloading world state from peers for pivot block 9601537`).\r\n\r\n- After a few minutes, we have a lot of DNS Errors:\r\n\r\n![image](https://github.com/hyperledger/besu/assets/25102234/7084f565-71e8-4a2c-8109-ae73b36d4caf)\r\n\r\n- After ~6h of syncing, we have no more info in the logs:\r\n\r\n![image](https://github.com/hyperledger/besu/assets/25102234/a158438a-fe7d-48c8-8b91-268c0049b8a0)\r\n\r\nAnd the RPC is not synced, the RPC return the same block height:\r\n\r\n```bash\r\n‚ùØ curl -sX POST -H \"Content-Type: application/json\" https://***** --data '{\"jsonrpc\": \"2.0\", \"id\": 42, \"method\": \"eth_blockNumber\", \"params\": []}'\r\n{\"jsonrpc\":\"2.0\",\"id\":42,\"result\":\"0x928201\"}%\r\n```\r\n\r\n### Versions (Add all that apply)\r\n* Software version: `v23.7.1`\r\n* Java version: `17.0.7`\r\n* OS Name & Version:\r\n\r\n```\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=20.04\r\nDISTRIB_CODENAME=focal\r\nDISTRIB_DESCRIPTION=\"Ubuntu 20.04.6 LTS\"\r\nNAME=\"Ubuntu\"\r\nVERSION=\"20.04.6 LTS (Focal Fossa)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 20.04.6 LTS\"\r\nVERSION_ID=\"20.04\"\r\nHOME_URL=\"https://www.ubuntu.com/\"\r\nSUPPORT_URL=\"https://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\r\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\r\nVERSION_CODENAME=focal\r\nUBUNTU_CODENAME=focal\r\n```\r\n\r\n* Kernel Version:\r\n\r\n```\r\nLinux devhub-rpc-server-02 5.4.0-153-generic #170-Ubuntu SMP Fri Jun 16 13:43:31 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\n* Cloud VM, type, size: Hetzner Bare Metal\r\n* Consensus Client & Version if using Proof of Stake: Teku `v23.6.1`\r\n\r\n### Additional Information (Add any of the following or anything else that may be relevant)\r\n\r\n* System info - 6 CPU / 64 Go RAM / 2 To SSD NVMe\r\n\r\n\r\n----------------------\r\n\r\n**I'd also like to point out that version `23.7.1` is marked as a release on Github. However in the Besu version `23.7.1-dev-2bced4eb`. What is the truth?**",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/5837/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/5837/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1703195635",
    "html_url": "https://github.com/hyperledger/besu/issues/5837#issuecomment-1703195635",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5837",
    "id": 1703195635,
    "node_id": "IC_kwDODE2jmc5lhLPz",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T18:55:15Z",
    "updated_at": "2023-09-01T18:55:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi there - thanks for the report. Can you provide logs from Teku as well? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1703195635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707396956",
    "html_url": "https://github.com/hyperledger/besu/issues/5837#issuecomment-1707396956",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5837",
    "id": 1707396956,
    "node_id": "IC_kwDODE2jmc5lxM9c",
    "user": {
      "login": "jframe",
      "id": 909467,
      "node_id": "MDQ6VXNlcjkwOTQ2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/909467?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jframe",
      "html_url": "https://github.com/jframe",
      "followers_url": "https://api.github.com/users/jframe/followers",
      "following_url": "https://api.github.com/users/jframe/following{/other_user}",
      "gists_url": "https://api.github.com/users/jframe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jframe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jframe/subscriptions",
      "organizations_url": "https://api.github.com/users/jframe/orgs",
      "repos_url": "https://api.github.com/users/jframe/repos",
      "events_url": "https://api.github.com/users/jframe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jframe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-05T22:30:21Z",
    "updated_at": "2023-09-05T22:30:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@matkt Any thoughts on this issue? Do you think your PR https://github.com/hyperledger/besu/pull/5838 will help with this?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707396956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707832410",
    "html_url": "https://github.com/hyperledger/besu/issues/5837#issuecomment-1707832410",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5837",
    "id": 1707832410,
    "node_id": "IC_kwDODE2jmc5ly3Ra",
    "user": {
      "login": "chichi13",
      "id": 25102234,
      "node_id": "MDQ6VXNlcjI1MTAyMjM0",
      "avatar_url": "https://avatars.githubusercontent.com/u/25102234?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chichi13",
      "html_url": "https://github.com/chichi13",
      "followers_url": "https://api.github.com/users/chichi13/followers",
      "following_url": "https://api.github.com/users/chichi13/following{/other_user}",
      "gists_url": "https://api.github.com/users/chichi13/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chichi13/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chichi13/subscriptions",
      "organizations_url": "https://api.github.com/users/chichi13/orgs",
      "repos_url": "https://api.github.com/users/chichi13/repos",
      "events_url": "https://api.github.com/users/chichi13/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chichi13/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T07:41:18Z",
    "updated_at": "2023-09-06T07:41:18Z",
    "author_association": "NONE",
    "body": "Hi!\r\n\r\nHere are some logs from Teku:\r\n\r\n![image](https://github.com/hyperledger/besu/assets/25102234/29fb08a7-9c34-4a25-9ecf-efc20c37a2ad)\r\n\r\n(same logs at an other time)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707832410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707963391",
    "html_url": "https://github.com/hyperledger/besu/issues/5837#issuecomment-1707963391",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5837",
    "id": 1707963391,
    "node_id": "IC_kwDODE2jmc5lzXP_",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-06T09:09:24Z",
    "updated_at": "2023-09-06T09:09:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "did you do a checkpoint sync with [teku](https://docs.teku.consensys.net/get-started/checkpoint-start) ? I see 8137 remaining blocks. if your CL is not close to the head the besu sync will not work because we need to have a recent pivot block",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1707963391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1709702834",
    "html_url": "https://github.com/hyperledger/besu/issues/5837#issuecomment-1709702834",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5837",
    "id": 1709702834,
    "node_id": "IC_kwDODE2jmc5l5_6y",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-07T08:29:09Z",
    "updated_at": "2023-09-07T08:29:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Trying to reproduce this issue, I was able to sync Besu on Goerli with no issues with version 23.7.1.\r\n@chichi13 What is the status from you side and had you a chance to test Karim's suggestion ?\r\n\r\n<img width=\"1659\" alt=\"image\" src=\"https://github.com/hyperledger/besu/assets/5099602/3109557b-0916-46e7-b7a2-eab30bc89f69\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1709702834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

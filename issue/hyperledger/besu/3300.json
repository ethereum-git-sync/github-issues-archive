{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3300/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3300/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3300/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3300",
  "id": 1107295906,
  "node_id": "I_kwDODE2jmc5B__6i",
  "number": 3300,
  "title": "Besu in docker loses sync and does not recover",
  "user": {
    "login": "yorickdowne",
    "id": 71337066,
    "node_id": "MDQ6VXNlcjcxMzM3MDY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yorickdowne",
    "html_url": "https://github.com/yorickdowne",
    "followers_url": "https://api.github.com/users/yorickdowne/followers",
    "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
    "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
    "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
    "repos_url": "https://api.github.com/users/yorickdowne/repos",
    "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3013559202,
      "node_id": "MDU6TGFiZWwzMDEzNTU5MjAy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/mainnet",
      "name": "mainnet",
      "color": "9D578C",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2022-01-18T19:41:44Z",
  "updated_at": "2022-02-01T17:50:26Z",
  "closed_at": "2022-02-01T17:37:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nOn Ethereum mainnet, Besu v21.10.7/linux-x86_64/openjdk-java-11, inside a docker volume. No IPv6 enabled inside docker.\r\n\r\nBesu loses sync, does not recover without a restart. This might be related to encountering IPv6 peers? See also PR #2883 \r\n\r\nIPv6 being the culprit is conjecture, since it's the only other error message I saw around the time this happened.\r\n\r\n```\r\nexecution_1  | 2022-01-16 09:02:57.813+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015604 (0x0b181636cd08ae2c56a3952d20558cab61f5d0d565cda77789c01a4173adadb2) for future import\r\nexecution_1  | 2022-01-16 09:03:16.299+00:00 | nioEventLoopGroup-3-9 | INFO  | BlockPropagationManager | Saving announced block 14015605 (0x87fecf94d51ed2f96a29ce518cfe2692e7125e04285b0879a17455eba00d2cf6) for future import\r\nexecution_1  | 2022-01-16 09:03:16.614+00:00 | nioEventLoopGroup-3-6 | INFO  | GetBlockFromPeerTask | Failed to download block 0x87fecf94d51ed2f96a29ce518cfe2692e7125e04285b0879a17455eba00d2cf6 from peer Peer 0x5bdae2119793434f48....\r\nexecution_1  | 2022-01-16 09:03:16.691+00:00 | nioEventLoopGroup-3-3 | INFO  | GetBlockFromPeerTask | Failed to download block 0x87fecf94d51ed2f96a29ce518cfe2692e7125e04285b0879a17455eba00d2cf6 from peer Peer 0x1242de91f43cbf7f21....\r\nexecution_1  | 2022-01-16 09:03:21.199+00:00 | nioEventLoopGroup-3-5 | INFO  | GetBlockFromPeerTask | Failed to download block 0x87fecf94d51ed2f96a29ce518cfe2692e7125e04285b0879a17455eba00d2cf6 from peer Peer 0x0502b874b046e5a892....\r\nexecution_1  | 2022-01-16 09:03:21.199+00:00 | nioEventLoopGroup-3-5 | INFO  | GetBlockFromPeerTask | Failed to download block 0x87fecf94d51ed2f96a29ce518cfe2692e7125e04285b0879a17455eba00d2cf6 from peer Peer 0x5c22800f3912ba14c0....\r\nexecution_1  | 2022-01-16 09:03:28.298+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015606 (0xe01af85e6383cf8b82e361c756546ae122cb3b61f3240e97845ca9d6a76748fa) for future import\r\nexecution_1  | 2022-01-16 09:03:31.546+00:00 | nioEventLoopGroup-3-9 | INFO  | BlockPropagationManager | Saving announced block 14015607 (0xbb0d1bc59cd26241e6657a99bb296ae1af35ddc33247ef52285043d609611a03) for future import\r\nexecution_1  | 2022-01-16 09:03:44.822+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015608 (0xc208ff8cf3a368d81b063e89ac857ded691bebcc5422a28b78177c5296cf9581) for future import\r\nexecution_1  | 2022-01-16 09:03:57.754+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015609 (0x1feee3a41d82542f1f4f32e421240ac864f6c679e6563d72078275723326a44c) for future import\r\nexecution_1  | 2022-01-16 09:04:03.610+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015610 (0xbd1067c61cb80c15c18edd3e5440cb32d973578bf8d42e5fd5ab060f81c07de1) for future import\r\nexecution_1  | 2022-01-16 09:04:13.469+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015612 (0x1060ea3553a905f8abbc3632e52464e8cdad26939c566514de61e8fe9f084171) for future import\r\nexecution_1  | 2022-01-16 09:04:14.124+00:00 | nioEventLoopGroup-3-5 | INFO  | BlockPropagationManager | Saving announced block 14015611 (0x77ae1f0f8b88598ad8be1f3383da7e0698b95e20009c3349f80d98d547454fd2) for future import\r\nexecution_1  | 2022-01-16 09:04:23.560+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015613 (0xf2069d30ea28a7416f5befd5c5d26d39c0d1121dcc2e8cc78b7ceb68b13b9026) for future import\r\nexecution_1  | 2022-01-16 09:04:23.644+00:00 | nioEventLoopGroup-3-5 | INFO  | GetBlockFromPeerTask | Failed to download block 0xf2069d30ea28a7416f5befd5c5d26d39c0d1121dcc2e8cc78b7ceb68b13b9026 from peer Peer 0x0502b874b046e5a892....\r\nexecution_1  | 2022-01-16 09:04:25.059+00:00 | nioEventLoopGroup-3-3 | INFO  | BlockPropagationManager | Saving announced block 14015614 (0xfc9384a2092e6d14931034c47d391a2abd5428bc303a3ff99cbda82f17f1230f) for future import\r\nexecution_1  | 2022-01-16 09:04:30.863+00:00 | nioEventLoopGroup-3-5 | INFO  | BlockPropagationManager | Saving announced block 14015615 (0x62b15e80c1148f7172518ed1e143c6d035dc72c44f95d6c83455b6ec5da2ed8d) for future import\r\nexecution_1  | 2022-01-16 09:04:31.921+00:00 | nioEventLoopGroup-3-6 | INFO  | BlockPropagationManager | Saving announced block 14015616 (0x6e02c478b14bba6168b46aad565e445423e1f8c22ce9878dde2bbfadae628bdf) for future import\r\nexecution_1  | 2022-01-16 09:33:49.719+00:00 | vert.x-eventloop-thread-3 | WARN  | PeerDiscoveryAgent | Unsupported address type exception when connecting to peer DiscoveryPeer{status=bonding, enode=enode://949423caff724a5e787b5c3622fe6f20635a9228d68aa90ac926b5859c04d6a8fbc26963314108243c591a867a294fc778bfb45b9ce16902ce958619bf85570f@[2a01:7a7:2:1467:ec4:7aff:fee2:568e]:30303, firstDiscovered=1642325629718, lastContacted=0, lastSeen=0}, this is likely due to ipv6 not being enabled at runtime. Set logging level to TRACE to see full stacktrace\r\n```\r\n\r\nNote it stopped importing 2022-01-16. It did not recover from this; on 2022-01-18 I restarted it and it picked back up where it lost sync:\r\n\r\n```\r\nexecution_1  | 2022-01-18 19:32:49.999+00:00 | nioEventLoopGroup-3-3 | INFO  | SyncTargetManager | Found common ancestor with peer Peer 0xc40b2405ed046daa34... at block 14015586\r\nexecution_1  | 2022-01-18 19:33:18.809+00:00 | EthScheduler-Services-5 (importBlock) | INFO  | FullImportBlockStep | Import reached block 14015600 (0x4abe25626fb6807eecad725cc36a6e2b5b372ebf0f057a03a4fbb7e919bf3081), - Mg/s, Peers: 15\r\nexecution_1  | 2022-01-18 19:36:16.505+00:00 | EthScheduler-Services-5 (importBlock) | INFO  | FullImportBlockStep | Import reached block 14015800 (0x5a9a2270a0151216561c7469a77ee8a4b67f92e2e407379ddb57492692261cea), 17.447 Mg/s, Peers: 23\r\nexecution_1  | 2022-01-18 19:38:51.245+00:00 | EthScheduler-Services-5 (importBlock) | INFO  | FullImportBlockStep | Import reached block 14016000 (0xdb06cddfcebf8cdca5683087b9b6f6b2c1f0e5558e182559ad8f1992ff25d2c1), 20.059 Mg/s, Peers: 25\r\nexecution_1  | 2022-01-18 19:41:30.309+00:00 | EthScheduler-Services-5 (importBlock) | INFO  | FullImportBlockStep | Import reached block 14016200 (0x05f4f1987971f00dcbc00d01ce5bc7be16c95b807b694b46155bbb4c5f2714a1), 19.238 Mg/s, Peers: 25\r\n```\r\n",
  "closed_by": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3300/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3300/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015845030",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1015845030",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1015845030,
    "node_id": "IC_kwDODE2jmc48jJCm",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T21:22:21Z",
    "updated_at": "2022-01-18T21:22:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "If it's related to #2883, that change is not in 21.10.7 (it will be in the 22.1.0-RC)\r\nhttps://github.com/hyperledger/besu/blob/1104f1b3ed85f26002dabd313c5a2c856dd27c37/ethereum/p2p/src/main/java/org/hyperledger/besu/ethereum/p2p/discovery/PeerDiscoveryAgent.java\r\n\r\nIf it's a possibility to enable IPv6 on docker that might make your life easier!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015845030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015950746",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1015950746",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1015950746,
    "node_id": "IC_kwDODE2jmc48ji2a",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-19T00:15:01Z",
    "updated_at": "2022-01-19T00:15:01Z",
    "author_association": "NONE",
    "body": "I do not know that it’s related to IPv6 at all. Docker and IPv6 are not a love affair, it’s a bit of a mess actually. The goal for me is to have a stable Besu in a docker environment, IPv4 only. Occasional error messages about v6 are okay, as long as they don’t stop sync.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015950746/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016429267",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1016429267",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1016429267,
    "node_id": "IC_kwDODE2jmc48lXrT",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-19T12:41:44Z",
    "updated_at": "2022-01-19T12:41:44Z",
    "author_association": "NONE",
    "body": "Restarting Besu allowed it to catch up again and it's been keeping up with head, will monitor. I am quite worried about the fact it lost sync and needed a restart. Root cause TBD, that's what this issue is for. It may be necessary to sync Bonsai trie Besu from scratch on mainnet multiple times to find the culprit.\r\n\r\nThe high-level background is that I am attempting to move away from my Geth monoculture. To do that, I need to gain confidence in alternatives, such as Besu.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016429267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016951152",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1016951152",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1016951152,
    "node_id": "IC_kwDODE2jmc48nXFw",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-19T23:04:28Z",
    "updated_at": "2022-01-19T23:04:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yorickdowne you're right, ipv6 peers is probably a red herring, even though we made a change to improve the logging situation to make it clearer. Are you using full sync or fast sync? We're working on improvements to fast sync which are in the current RC release\r\n\r\nCan you share your besu config?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016951152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016953387",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1016953387",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1016953387,
    "node_id": "IC_kwDODE2jmc48nXor",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-19T23:08:03Z",
    "updated_at": "2022-01-19T23:08:03Z",
    "author_association": "NONE",
    "body": "I am using fast sync. This is the config.\r\n\r\n```\r\n      - /opt/besu/bin/besu\r\n      - --data-path\r\n      - /var/lib/besu\r\n      - --p2p-port\r\n      - ${EC_P2P_PORT}\r\n      - --rpc-http-enabled\r\n      - --rpc-http-api\r\n      - \"WEB3,ETH,NET\"\r\n      - --rpc-http-host\r\n      - 0.0.0.0\r\n      - --rpc-http-port\r\n      - ${EC_RPC_PORT}\r\n      - --rpc-http-cors-origins=*\r\n      - --rpc-ws-enabled\r\n      - --rpc-ws-api\r\n      - \"WEB3,ETH,NET\"\r\n      - --rpc-ws-host\r\n      - 0.0.0.0\r\n      - --rpc-ws-port\r\n      - ${EC_WS_PORT}\r\n      - --host-allowlist=*\r\n      - --logging\r\n      - ${LOG_LEVEL}\r\n      - --network\r\n      - ${EC_NETWORK}\r\n      - --metrics-enabled\r\n      - --metrics-host\r\n      - 0.0.0.0\r\n      - --Xdata-storage-format=BONSAI\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016953387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017267955",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1017267955",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1017267955,
    "node_id": "IC_kwDODE2jmc48okbz",
    "user": {
      "login": "fab-10",
      "id": 91944855,
      "node_id": "U_kgDOBXr3lw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-10",
      "html_url": "https://github.com/fab-10",
      "followers_url": "https://api.github.com/users/fab-10/followers",
      "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-10/orgs",
      "repos_url": "https://api.github.com/users/fab-10/repos",
      "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T09:18:01Z",
    "updated_at": "2022-01-20T09:18:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "@yorickdowne we are investigation this issue, since it seldom happens to us as well, so collecting data is very useful in this phase, could you share, could you share the resources allocated to Besu, like cpu, memory, free disk space and verify if there are incoming peers?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017267955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017461237",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1017461237",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1017461237,
    "node_id": "IC_kwDODE2jmc48pTn1",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T12:42:44Z",
    "updated_at": "2022-01-20T12:42:44Z",
    "author_association": "NONE",
    "body": "@fab-10 Besu uses 1 to 2 cores on a 6-core, 12-thread machine. It uses 10 GiB of memory out of 32, total in use with other processes 24.5 GiB. There are ~700 GiB free on the NVMe.\r\n\r\nI'm on debug logging right now and grepped for incoming, looks like yes, as expected, incoming works fine: `Too many peers. Disconnect incoming connection`\r\n\r\nIf there's a way to query number of outgoing and incoming (established) peer connections, please share, I'll run it.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017461237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1020315924",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1020315924",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1020315924,
    "node_id": "IC_kwDODE2jmc480MkU",
    "user": {
      "login": "fab-10",
      "id": 91944855,
      "node_id": "U_kgDOBXr3lw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-10",
      "html_url": "https://github.com/fab-10",
      "followers_url": "https://api.github.com/users/fab-10/followers",
      "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-10/orgs",
      "repos_url": "https://api.github.com/users/fab-10/repos",
      "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T16:55:28Z",
    "updated_at": "2022-01-24T16:55:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "thanks for sharing @yorickdowne, resources allocated should be fine.\r\n\r\nTo discover if there are incoming connection, you can call this admin API: https://besu.hyperledger.org/en/stable/Reference/API-Methods/#admin_peers\r\nthen look in the response, if there are entries that have `\"localAddress\" : \"<private docker ip>:30303\"`, the important part is `30303` the standard port where Besu listen if you have not changed it.\r\n\r\nThere is an update about this issue, there is a PR to fix a possible cause, here https://github.com/hyperledger/besu/pull/3319\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1020315924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1020627706",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1020627706",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1020627706,
    "node_id": "IC_kwDODE2jmc481Yr6",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T22:49:00Z",
    "updated_at": "2022-01-24T22:49:52Z",
    "author_association": "NONE",
    "body": "Yep confirmed. This is right after restart, needed to enable the admin RPC space.\r\n\r\n```\r\ncurl -s -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"admin_peers\",\"params\":[],\"id\":1}' https://besu.example.com | grep localAddress | grep 30303\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n      \"localAddress\" : \"172.19.0.6:30303\",\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1020627706/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1027121401",
    "html_url": "https://github.com/hyperledger/besu/issues/3300#issuecomment-1027121401",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3300",
    "id": 1027121401,
    "node_id": "IC_kwDODE2jmc49OKD5",
    "user": {
      "login": "fab-10",
      "id": 91944855,
      "node_id": "U_kgDOBXr3lw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-10",
      "html_url": "https://github.com/fab-10",
      "followers_url": "https://api.github.com/users/fab-10/followers",
      "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-10/orgs",
      "repos_url": "https://api.github.com/users/fab-10/repos",
      "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T17:50:26Z",
    "updated_at": "2022-02-01T17:50:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "On main (22.1.0-RC4-SNAPSHOT version) there are more sync fixes, that we are currently testing, with good results, if you want to give it a try.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1027121401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

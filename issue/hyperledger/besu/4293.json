{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4293/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4293/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4293/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4293",
  "id": 1347157615,
  "node_id": "I_kwDODE2jmc5QS_5v",
  "number": 4293,
  "title": "Besu aborting zombie backend queries frequently",
  "user": {
    "login": "ColinCampbell",
    "id": 142777,
    "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ColinCampbell",
    "html_url": "https://github.com/ColinCampbell",
    "followers_url": "https://api.github.com/users/ColinCampbell/followers",
    "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
    "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
    "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
    "repos_url": "https://api.github.com/users/ColinCampbell/repos",
    "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3013559202,
      "node_id": "MDU6TGFiZWwzMDEzNTU5MjAy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/mainnet",
      "name": "mainnet",
      "color": "9D578C",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 45,
  "created_at": "2022-08-23T00:28:25Z",
  "updated_at": "2022-09-13T00:54:03Z",
  "closed_at": "2022-09-13T00:54:03Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi there! I recently started using Besu (initially on version 22.7.0) as an execution client alongside Teku. I've been running into issues with Besu aborting queries from Teku as \"Zombie backend query detected\" under both 22.7.0 and the recently released 22.7.1 which I'm running as of a few hours ago. Teku is on version 22.8.1 so both clients should have the mainnet merge configuration.\r\n\r\nThis issue seems distinct from #4221 given this is occurring for many types of queries, including simpler ones like getBlock rather than more complex ones like the deposit log queries. I am also running the version of Teku with the fix for #4221 (https://github.com/ConsenSys/teku/pull/6061).\r\n\r\nLogs and the docker compose configuration are in [this gist](https://gist.github.com/ColinCampbell/4eba6579efba0d3b905124e0a9e0adea).\r\n\r\n`iostat` and Grafana monitoring shows that I/O seems pretty reasonable (averages around 3.5%, spiking to 28% or so every few minutes).\r\n\r\n### Steps to Reproduce (Bug)\r\nThis doesn't seem very reproducible given other people don't seem to be running into this, but what I've done is:\r\n1. Clone eth-docker and set up using Besu\r\n2. Fully sync Besu using X_CHECKPOINT (provided by eth-docker)\r\n3. See these Zombie backend query issues.\r\n\r\nThis has persisted across restarting the services in question and restarting the staking computer.\r\n\r\n**Expected behavior:** Besu should  be responding to queries from Teku\r\n\r\n**Actual behavior:** Lots of log output saying that queries are being killed.\r\n\r\n**Frequency:** All the time as far as I can tell.\r\n\r\n### Versions (Add all that apply)\r\n* Software version: besu/v22.7.1/linux-x86_64/openjdk-java-11\r\n* Java version: openjdk 11.0.16 2022-07-19\r\nOpenJDK Runtime Environment (build 11.0.16+8-post-Ubuntu-0ubuntu120.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.16+8-post-Ubuntu-0ubuntu120.04, mixed mode, sharing)\r\n* OS Name & Version: Ubuntu 20.04.4 LTS\r\n* Kernel Version: `Linux 8b5bccac605d 5.4.0-124-generic #140-Ubuntu SMP Thu Aug 4 02:23:37 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux`\r\n* Docker Version: 20.10.12\r\n\r\n### Additional Information\r\n* System info - AMD Ryzen 7 4800U (8 cores, 1.8 GHz base clock, 4.2 GHz boost). 64 GB RAM. Samsung 970 EVO Plus 2TB SSD.\r\n* Besu setup info - This is the command which ends up executing Besu, full docker-compose is in the gist linked above:\r\n```\r\ndocker-entrypoint.sh /opt/besu/bin/besu --data-path /var/lib/besu --p2p-port 58932 --rpc-http-enabled --rpc-http-api WEB3,ETH,NET --rpc-http-host 0.0.0.0 --rpc-http-port 8545 --rpc-http-cors-origins=* --rpc-http-max-active-connections=65536 --rpc-ws-enabled --rpc-ws-api WEB3,ETH,NET --rpc-ws-host 0.0.0.0 --rpc-ws-port 8546 --max-peers 25 --fast-sync-min-peers 5 --host-allowlist=* --engine-host-allowlist=* --engine-jwt-secret=/var/lib/besu/ee-secret/jwtsecret --engine-rpc-port=8551 --logging info --network mainnet --metrics-enabled --metrics-host 0.0.0.0 --metrics-port 6060 --data-storage-format=BONSAI --sync-mode=X_CHECKPOINT\r\n```\r\nMy Besu setup is pretty much vanilla from eth-docker. JWT token is set up and Teku reports using the execution engine for its connection to the execution client. I'm using non-default P2P ports for both Besu and Teku. Command starting Teku is here:\r\n```\r\ndocker-entrypoint.sh /opt/teku/bin/teku --data-path=/var/lib/teku --log-destination=CONSOLE --network=mainnet --ee-endpoint=http://execution:8551 --ee-jwt-secret-file /var/lib/teku/ee-secret/jwtsecret --p2p-port=61991 --p2p-peer-upper-bound=100 --p2p-peer-lower-bound=90 --validators-keystore-locking-enabled=true --validator-keys=/var/lib/teku/validator-keys:/var/lib/teku/validator-passwords --validators-graffiti=eth-docker --logging=info --rest-api-host-allowlist=* --rest-api-enabled=true --rest-api-interface=0.0.0.0 --rest-api-port=5052 --metrics-enabled=true --metrics-port=8008 --metrics-interface=0.0.0.0 --metrics-host-allowlist=* --validator-api-enabled=true --validator-api-port=7500 --validator-api-host-allowlist=* --validator-api-cors-origins=* --validator-api-keystore-file=/var/lib/teku/teku-keyapi.keystore --validator-api-keystore-password-file=/var/lib/teku/teku-keyapi.password --validators-proposer-default-fee-recipient=REDACTED\r\n```\r\n\r\nEDIT: My Besu data is taking up 398GB of space, is this expected? From some Discord messages and some documentation I can find online this seems too small?",
  "closed_by": {
    "login": "ColinCampbell",
    "id": 142777,
    "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ColinCampbell",
    "html_url": "https://github.com/ColinCampbell",
    "followers_url": "https://api.github.com/users/ColinCampbell/followers",
    "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
    "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
    "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
    "repos_url": "https://api.github.com/users/ColinCampbell/repos",
    "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4293/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4293/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224431095",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1224431095",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1224431095,
    "node_id": "IC_kwDODE2jmc5I-1X3",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T17:37:55Z",
    "updated_at": "2022-08-23T17:37:55Z",
    "author_association": "NONE",
    "body": "Same here on an up to date vanilla setup of eth-docker",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224431095/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224599574",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1224599574",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1224599574,
    "node_id": "IC_kwDODE2jmc5I_egW",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T18:46:11Z",
    "updated_at": "2022-08-23T18:50:51Z",
    "author_association": "NONE",
    "body": "> Same here on an up to date vanilla setup of eth-docker\r\n\r\n@JeffOnGithub did you restart your Besu instance during its initial sync, by chance? I took mine down while restarting the staking computer and I'm wondering if that could have caused this issue\r\n\r\nEDIT: I should also mention that my initial sync of Besu only took it up to around block number 13700000, over a million and a bit blocks short of where it should have gotten. This took roughly 8 hours. Once I restarted Besu it began syncing all the way to the head block (~15390000 or around that, whatever it was a couple days ago), this also took around 8 hours.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224599574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224704330",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1224704330",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1224704330,
    "node_id": "IC_kwDODE2jmc5I_4FK",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T19:30:44Z",
    "updated_at": "2022-08-23T19:30:44Z",
    "author_association": "NONE",
    "body": "I did restart it at least once as i'm currently trying out eth-docker. \r\nI also have the same ''looks a bit small'' situation on Besu at around 400GB too.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224704330/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224719911",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1224719911",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1224719911,
    "node_id": "IC_kwDODE2jmc5I_74n",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T19:38:15Z",
    "updated_at": "2022-08-23T19:38:15Z",
    "author_association": "NONE",
    "body": "I found some discussion on Discord late last night that implies ~400GB should be expected for an X_CHECKPOINT sync so that might not be related.\r\n\r\nI'm wondering if Besu restarting during the sync is what caused the issues. I might resync and see if I can keep it up the whole time but I'm weary of doing that without knowing that's what caused the problem.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224719911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224751700",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1224751700",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1224751700,
    "node_id": "IC_kwDODE2jmc5JADpU",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T19:52:42Z",
    "updated_at": "2022-08-23T19:52:42Z",
    "author_association": "NONE",
    "body": "I just did a ./ethd terminate to restart from the ground up.\r\nI'll keep the checkpoint sync and resync without touching anything to see if i end up with a working situation.\r\nI'll keep the post updated.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1224751700/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226200462",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1226200462",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1226200462,
    "node_id": "IC_kwDODE2jmc5JFlWO",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-24T19:55:27Z",
    "updated_at": "2022-08-24T19:55:27Z",
    "author_association": "NONE",
    "body": "@JeffOnGithub how did the sync go?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226200462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226510524",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1226510524",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1226510524,
    "node_id": "IC_kwDODE2jmc5JGxC8",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-24T22:24:55Z",
    "updated_at": "2022-08-24T22:25:10Z",
    "author_association": "NONE",
    "body": "It completed like 20 minutes ago and i'm not seeing any errors in the logs (teku and besu). \r\n\r\nSo far, the delete everything, resync and don't touch anything seems to work.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226510524/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226600142",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1226600142",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1226600142,
    "node_id": "IC_kwDODE2jmc5JHG7O",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-24T23:33:33Z",
    "updated_at": "2022-08-24T23:33:33Z",
    "author_association": "NONE",
    "body": "Thanks for the info. Will try the same.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226600142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226632886",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1226632886",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1226632886,
    "node_id": "IC_kwDODE2jmc5JHO62",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T00:31:46Z",
    "updated_at": "2022-08-25T00:34:29Z",
    "author_association": "NONE",
    "body": "So, bizarrely, it seems like it's mended itself without needing to resync. I took Teku offline to provide it with an Infura `eth1-endpoint` flag so it could receive blocks while Besu was resyncing. When I started Teku back up and checked the Besu logs one last time before removing its docker volume, there were no more Zombie query warnings. \r\n\r\nhttps://gist.github.com/ColinCampbell/982d5d28ebb3bd9b5984f0c00f76c835\r\n\r\nThese are the most recent logs. I took Teku offline at roughly 00:10:25 UTC. Here are the full Besu logs since I started it a couple of days ago if anyone is curious. \r\n\r\nhttps://gist.github.com/ColinCampbell/804a5133e91b2c14b8d9ba2bede31886\r\n\r\nI'm going to keep monitoring, somewhat skeptical of it, but Besu might have healed itself at some point?\r\n\r\nEDIT: I think Teku might just be getting its data from the Infura API and not logging any warning about getting it from there instead of the `ee-engine`.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226632886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226637726",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1226637726",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1226637726,
    "node_id": "IC_kwDODE2jmc5JHQGe",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T00:39:28Z",
    "updated_at": "2022-08-25T00:39:28Z",
    "author_association": "NONE",
    "body": "Your idea that restarting caused the issue seems right. I just did a ./etd restart and the zombie process warning just started popping up in execution logs.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226637726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226641797",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1226641797",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1226641797,
    "node_id": "IC_kwDODE2jmc5JHRGF",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T00:45:22Z",
    "updated_at": "2022-08-25T00:45:22Z",
    "author_association": "NONE",
    "body": "Oh dang, that's a huge bummer. GIven Teku seems to be falling back on Infura it looks like I'll need to do a resync, but maybe I'll use X_SNAP and see if that works?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1226641797/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1227196528",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1227196528",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1227196528,
    "node_id": "IC_kwDODE2jmc5JJYhw",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T12:33:03Z",
    "updated_at": "2022-08-25T12:33:03Z",
    "author_association": "NONE",
    "body": "> Oh dang, that's a huge bummer. GIven Teku seems to be falling back on Infura it looks like I'll need to do a resync, but maybe I'll use X_SNAP and see if that works?\r\n\r\nI'll restarted the whole machine (reinstalled Ubuntu) and did not touch the Besu configuration and let it start in Snap Sync instead of Checkpoint. let's see!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1227196528/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1229225316",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1229225316",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1229225316,
    "node_id": "IC_kwDODE2jmc5JRH1k",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-27T16:45:23Z",
    "updated_at": "2022-08-27T16:45:23Z",
    "author_association": "NONE",
    "body": "Looks like it's working with a new install and snap sync.\r\n\r\nSince it's running in docker, i don't think it's the new install that solved the issue, i think it's maybe more about Checkpoint sync creating a partial database that can't be used for a consensus client?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1229225316/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1229281025",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1229281025",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1229281025,
    "node_id": "IC_kwDODE2jmc5JRVcB",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-27T22:33:23Z",
    "updated_at": "2022-08-27T22:33:23Z",
    "author_association": "NONE",
    "body": "I'm not sure to be honest. I doubt the new install fixed it, my guess is something seems to be broken with checkpoint syncing at the moment. Thanks for the update and I'll try an X_SNAP sync myself.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1229281025/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1231825248",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1231825248",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1231825248,
    "node_id": "IC_kwDODE2jmc5JbClg",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T15:28:04Z",
    "updated_at": "2022-08-30T15:33:30Z",
    "author_association": "NONE",
    "body": "I've just had something similar happen to me with Besu (`besu/v22.7.1/linux-x86_64/openjdk-java-17`) configured to run under a systemd service with:\r\n\r\n```ini\r\n[Unit]\r\nDescription=Besu Ethereum Client (Mainnet)\r\nAfter=network.target\r\nWants=network.target\r\n\r\n[Service]\r\nUser=besu\r\nGroup=besu\r\nType=simple\r\nRestart=always\r\nRestartSec=5\r\nExecStart=/usr/local/bin/besu/bin/besu \\\r\n    --network=mainnet \\\r\n    --sync-mode=X_CHECKPOINT \\\r\n    --rpc-http-enabled=true \\\r\n    --engine-rpc-port=8551 \\\r\n    --engine-host-allowlist=localhost,127.0.0.1 \\\r\n    --data-path=/var/lib/besu \\\r\n    --data-storage-format=BONSAI \\\r\n    --metrics-enabled=true \\\r\n    --engine-jwt-secret=/var/lib/ethereum/jwttoken\r\n\r\n[Install]\r\nWantedBy=default.target\r\n```\r\n\r\nBesu could not recover after a reboot. It would keep showing `WARN  | BackendQuery | Zombie backend query detected [ unnamed ], aborting process` messages.\r\n\r\nHere is the full logs: https://gist.github.com/remyroy/c87862a87c7bfe0515b914c66b8227a3\r\n\r\nMaybe Besu failed to properly stop because it needs more time to shutdown than the default systemd service allows for? I'll resync from scratch and add a `TimeoutStopSec=180` to that systemd service definition to test it out.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1231825248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232102947",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232102947",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232102947,
    "node_id": "IC_kwDODE2jmc5JcGYj",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T19:56:39Z",
    "updated_at": "2022-08-30T19:59:08Z",
    "author_association": "NONE",
    "body": "> I've just had something similar happen to me with Besu (`besu/v22.7.1/linux-x86_64/openjdk-java-17`) configured to run under a systemd service with:\r\n> \r\n> ```ini\r\n> [Unit]\r\n> Description=Besu Ethereum Client (Mainnet)\r\n> After=network.target\r\n> Wants=network.target\r\n> \r\n> [Service]\r\n> User=besu\r\n> Group=besu\r\n> Type=simple\r\n> Restart=always\r\n> RestartSec=5\r\n> ExecStart=/usr/local/bin/besu/bin/besu \\\r\n>     --network=mainnet \\\r\n>     --sync-mode=X_CHECKPOINT \\\r\n>     --rpc-http-enabled=true \\\r\n>     --engine-rpc-port=8551 \\\r\n>     --engine-host-allowlist=localhost,127.0.0.1 \\\r\n>     --data-path=/var/lib/besu \\\r\n>     --data-storage-format=BONSAI \\\r\n>     --metrics-enabled=true \\\r\n>     --engine-jwt-secret=/var/lib/ethereum/jwttoken\r\n> \r\n> [Install]\r\n> WantedBy=default.target\r\n> ```\r\n> \r\n> Besu could not recover after a reboot. It would keep showing `WARN | BackendQuery | Zombie backend query detected [ unnamed ], aborting process` messages.\r\n> \r\n> Here is the full logs: https://gist.github.com/remyroy/c87862a87c7bfe0515b914c66b8227a3\r\n> \r\n> Maybe Besu failed to properly stop because it needs more time to shutdown than the default systemd service allows for? I'll resync from scratch and add a `TimeoutStopSec=180` to that systemd service definition to test it out.\r\n\r\nLooks like my first failed correction try. When you use Checkpoint Sync, after the completion it don't throw errors as long as you don't restart Besu. The moment you restart, you're done.\r\n\r\nI did a clean ./ethd restart after the checkpoint sync (while Besu was not throwing errors) and got the errors right after. So it's not because of a ''failed stop'' that you got that.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232102947/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232112698",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232112698",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232112698,
    "node_id": "IC_kwDODE2jmc5JcIw6",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T20:06:32Z",
    "updated_at": "2022-08-30T20:06:32Z",
    "author_association": "NONE",
    "body": "@JeffOnGithub Are you saying you believe it silently fails during the initial checkpoint sync but that failure is only visible after a restart? If that's the case, it might be worth looking at my logs again to see if anything special came up during my initial sync. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232112698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232150993",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232150993",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232150993,
    "node_id": "IC_kwDODE2jmc5JcSHR",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-30T20:47:23Z",
    "updated_at": "2022-08-30T20:47:23Z",
    "author_association": "NONE",
    "body": "I just saw these messages on Discord which may or may not be related to this issue, it does mention restarts causing Besu to need to resync:\r\nhttps://discord.com/channels/905194001349627914/938504958909747250/1013053097842581504",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232150993/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232350994",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232350994",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232350994,
    "node_id": "IC_kwDODE2jmc5JdC8S",
    "user": {
      "login": "JeffOnGithub",
      "id": 8843414,
      "node_id": "MDQ6VXNlcjg4NDM0MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8843414?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeffOnGithub",
      "html_url": "https://github.com/JeffOnGithub",
      "followers_url": "https://api.github.com/users/JeffOnGithub/followers",
      "following_url": "https://api.github.com/users/JeffOnGithub/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeffOnGithub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeffOnGithub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeffOnGithub/subscriptions",
      "organizations_url": "https://api.github.com/users/JeffOnGithub/orgs",
      "repos_url": "https://api.github.com/users/JeffOnGithub/repos",
      "events_url": "https://api.github.com/users/JeffOnGithub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeffOnGithub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T01:41:37Z",
    "updated_at": "2022-08-31T01:41:37Z",
    "author_association": "NONE",
    "body": "> @JeffOnGithub Are you saying you believe it silently fails during the initial checkpoint sync but that failure is only visible after a restart? If that's the case, it might be worth looking at my logs again to see if anything special came up during my initial sync.\r\n\r\nI'm not sure about what's exactly happening, but if you do a snap sync, you can restart besu as much as you want without the zombie errors. With checkpoint sync, after 1 reboot you will have those zombie errors everytime. \r\n\r\nSo either Besu as a problem from the checkpoint sync and is just silent about it before the first reboot, or the first reboot break something.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232350994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232363739",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232363739",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232363739,
    "node_id": "IC_kwDODE2jmc5JdGDb",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T02:04:56Z",
    "updated_at": "2022-08-31T02:04:56Z",
    "author_association": "NONE",
    "body": "> I did a clean ./ethd restart after the checkpoint sync (while Besu was not throwing errors) and got the errors right after. So it's not because of a ''failed stop'' that you got that.\r\n\r\nCould this be the same timeout issue manifesting in a different situation? Docker gives services a default of 10 seconds to shut down, and if they aren't done by then it will SIGKILL. It could be that Besu just happened to get killed within 10 seconds in some cases and in other cases it could SIGKILLed leading to a corrupted DB.\r\n\r\nI had to restart Besu during the final parts of my X_SNAP sync for what seems like a different/recoverable issue. I made sure to use `docker-compose stop --timeout 900 execution` to give it more than enough time to gracefully shut off, and it definitely took longer than 10 seconds. Will report back once it's fully synced to see if I've avoided the Zombie query issue or not",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232363739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232376319",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232376319",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232376319,
    "node_id": "IC_kwDODE2jmc5JdJH_",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T02:26:33Z",
    "updated_at": "2022-08-31T02:26:33Z",
    "author_association": "NONE",
    "body": "Well, the `besu.yml` file in `eth-docker` specifies a `stop_grace_period` of 3 minutes. I'm 99% sure when I killed Besu during my sync I would have brought it down using `docker-compose stop execution` to ensure that the validator kept running, which might have been my undoing. Not sure if `docker-compose stop` would reference the service definition or just go with the default 10 seconds from the command line. If you guys were using `./ethd down` or equivalent then the timeout issue is likely not causing the Zombie queries",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232376319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232461704",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1232461704",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1232461704,
    "node_id": "IC_kwDODE2jmc5Jdd-I",
    "user": {
      "login": "ColinCampbell",
      "id": 142777,
      "node_id": "MDQ6VXNlcjE0Mjc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ColinCampbell",
      "html_url": "https://github.com/ColinCampbell",
      "followers_url": "https://api.github.com/users/ColinCampbell/followers",
      "following_url": "https://api.github.com/users/ColinCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/ColinCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ColinCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ColinCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/ColinCampbell/orgs",
      "repos_url": "https://api.github.com/users/ColinCampbell/repos",
      "events_url": "https://api.github.com/users/ColinCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ColinCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T04:54:13Z",
    "updated_at": "2022-08-31T04:54:13Z",
    "author_association": "NONE",
    "body": "After restarting Besu during the last part of the X_SNAP sync, it picked up syncing and finished. It seems to be working fine across restarts and Teku can connect to it just fine. It seems like my issues could have been (a) restarting during the initial sync which seems to be an undocumented big no-no and/or (b) no allowing for a longer timeout when stopping the docker container.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1232461704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1233172023",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1233172023",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1233172023,
    "node_id": "IC_kwDODE2jmc5JgLY3",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T16:39:02Z",
    "updated_at": "2022-08-31T16:40:06Z",
    "author_association": "NONE",
    "body": "I just did some more tests. I fully resynced from scratch on Mainnet using checkpoint sync. Everything went fine. I was even able to restart with no issue. However, I soon as I rebooted my machine, I got the `WARN  | BackendQuery | Zombie backend query detected [ matchingLogs - getBlockBody ], aborting process.` messages again and my Teku client would complain about Besu not being in sync or being down.\r\n\r\nHere are the full logs of this second try: https://gist.github.com/remyroy/aa2156d12b51a7784785a3b45234f7ce\r\nYou can see the restart at around `2022-08-31 16:08:10` and the full reboot at around `2022-08-31 16:24:33`",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1233172023/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234055931",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1234055931",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1234055931,
    "node_id": "IC_kwDODE2jmc5JjjL7",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T10:07:11Z",
    "updated_at": "2022-09-01T10:07:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm trying to reproduce, meanwhile, @ColinCampbell @remyroy could you share TCP connections graph if you have the grafana node exporter dashboard ?\r\nFrom my understanding, Besu received JSON RPC calls and when processing these calls, the underlying connections were closed. It could be also related to Max Open file descriptors, it you have a low limit.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234055931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234280923",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1234280923",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1234280923,
    "node_id": "IC_kwDODE2jmc5JkaHb",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T13:26:40Z",
    "updated_at": "2022-09-01T13:26:40Z",
    "author_association": "NONE",
    "body": "Here is my TCP connections graph from 2022-08-31 16:00:00 to 2022-08-31 17:00:00 during when I did a restart and a reboot for my second try. I'm mainly running a besu+teku combo on that machine:\r\n\r\n![tcp-connections](https://user-images.githubusercontent.com/303593/187925197-b87ba53e-6d55-453a-9342-5f8866e0482f.png)\r\n\r\n\r\nHere are my hard and soft limits for open file descriptors:\r\n```\r\n$ ulimit -Hn\r\n1048576\r\n$ ulimit -Sn\r\n1024\r\n``` ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234280923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234479324",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1234479324",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1234479324,
    "node_id": "IC_kwDODE2jmc5JlKjc",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T15:59:48Z",
    "updated_at": "2022-09-01T15:59:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "The soft limit is too low for Besu. Besu has a default setting to keep open up to 1024 RocksDB SST files, so you need to update this value to a higher value (ex. 4096 or even more), to handle other processes needs (ex. Teku), TCP connections, ..etc.\r\nYou can also check if you had this error : too many open files",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234479324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234482667",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1234482667",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1234482667,
    "node_id": "IC_kwDODE2jmc5JlLXr",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T16:02:36Z",
    "updated_at": "2022-09-01T16:02:36Z",
    "author_association": "NONE",
    "body": "I've updated my systemd service file to this:\r\n\r\n```ini\r\n[Unit]\r\nDescription=Besu Ethereum Client (Mainnet)\r\nAfter=network.target\r\nWants=network.target\r\n\r\n[Service]\r\nUser=besu\r\nGroup=besu\r\nType=simple\r\nRestart=always\r\nRestartSec=5\r\nTimeoutStopSec=180\r\nLimitNOFILE=8388608\r\nExecStart=/usr/local/bin/besu/bin/besu \\\r\n    --network=mainnet \\\r\n    --sync-mode=X_CHECKPOINT \\\r\n    --rpc-http-enabled=true \\\r\n    --engine-rpc-port=8551 \\\r\n    --engine-host-allowlist=localhost,127.0.0.1 \\\r\n    --data-path=/var/lib/besu \\\r\n    --data-storage-format=BONSAI \\\r\n    --metrics-enabled=true \\\r\n    --engine-jwt-secret=/var/lib/ethereum/jwttoken\r\n\r\n[Install]\r\nWantedBy=default.target\r\n```\r\n\r\nThat LimitNOFILE should help with the open file descriptors limit. I'll let you know if it helps.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1234482667/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1235850703",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1235850703",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1235850703,
    "node_id": "IC_kwDODE2jmc5JqZXP",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-02T19:56:27Z",
    "updated_at": "2022-09-02T19:56:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Unfortunately, I wasn't able to reproduce after several restarts, I will keep trying. I had only one \"Zombie\" log line.\r\n(https://gist.github.com/ahamlat/a07aa4b462bfd66fd894a6023a1b199d)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1235850703/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1236102276",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1236102276",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1236102276,
    "node_id": "IC_kwDODE2jmc5JrWyE",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-03T11:37:53Z",
    "updated_at": "2022-09-03T11:37:53Z",
    "author_association": "NONE",
    "body": "It does not seem related to open file descriptors limits. Even with `LimitNOFILE=8388608` in my service file, I still get a bunch of `Zombie backend query detected [ unnamed ], aborting process` messages in my logs after rebooting once Besu is fully in sync and Besu becomes unsuable for Teku.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1236102276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1236968244",
    "html_url": "https://github.com/hyperledger/besu/issues/4293#issuecomment-1236968244",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4293",
    "id": 1236968244,
    "node_id": "IC_kwDODE2jmc5JuqM0",
    "user": {
      "login": "ahamlat",
      "id": 5099602,
      "node_id": "MDQ6VXNlcjUwOTk2MDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5099602?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahamlat",
      "html_url": "https://github.com/ahamlat",
      "followers_url": "https://api.github.com/users/ahamlat/followers",
      "following_url": "https://api.github.com/users/ahamlat/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahamlat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahamlat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahamlat/subscriptions",
      "organizations_url": "https://api.github.com/users/ahamlat/orgs",
      "repos_url": "https://api.github.com/users/ahamlat/repos",
      "events_url": "https://api.github.com/users/ahamlat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahamlat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-05T12:45:52Z",
    "updated_at": "2022-09-05T12:45:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "I copied your configuration and did several tests, I still cannot reproduce. I'm running Teku inside docker and besu directly on the VM (without docker).\r\nCould you please enable ADMIN RPC methods (--rpc-http-api=ADMIN ), call this RPC method and share Besu logs\r\n```\r\ncurl -X POST --data '{\"jsonrpc\":\"2.0\", \"method\":\"admin_changeLogLevel\", \"params\":[\"DEBUG\", [\"org.hyperledger.besu.ethereum.api.jsonrpc\"]], \"id\":1}' http://127.0.0.1:8545\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1236968244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2253",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2253/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2253/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2253/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2253",
  "id": 882924758,
  "node_id": "MDU6SXNzdWU4ODI5MjQ3NTg=",
  "number": 2253,
  "title": "eth_syncing reports syncing when already at chain head",
  "user": {
    "login": "ajsutton",
    "id": 72675,
    "node_id": "MDQ6VXNlcjcyNjc1",
    "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ajsutton",
    "html_url": "https://github.com/ajsutton",
    "followers_url": "https://api.github.com/users/ajsutton/followers",
    "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
    "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
    "organizations_url": "https://api.github.com/users/ajsutton/orgs",
    "repos_url": "https://api.github.com/users/ajsutton/repos",
    "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ajsutton/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362500,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNTAw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "7057ff",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 3013559202,
      "node_id": "MDU6TGFiZWwzMDEzNTU5MjAy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/mainnet",
      "name": "mainnet",
      "color": "9D578C",
      "default": false,
      "description": ""
    },
    {
      "id": 4328706977,
      "node_id": "LA_kwDODE2jmc8AAAABAgLToQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamChupa",
      "name": "TeamChupa",
      "color": "fbca04",
      "default": false,
      "description": "GH issues worked on by Chupacabara Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-05-09T22:49:40Z",
  "updated_at": "2023-04-18T15:46:42Z",
  "closed_at": "2023-04-18T15:46:42Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nThe `eth_syncing` API sometimes returns results like:\r\n\r\n```\r\nlocalhost:8546 [2]: {\r\n  \"jsonrpc\" : \"2.0\",\r\n  \"id\" : 11759,\r\n  \"result\" : {\r\n    \"startingBlock\" : \"0x485abd\",\r\n    \"currentBlock\" : \"0x485abe\",\r\n    \"highestBlock\" : \"0x485abe\"\r\n  }\r\n}\r\n```\r\n\r\nThis suggests that the node is actually in sync (current block is the same as the highest block) but is reporting as still syncing.  Either there's a race condition and the JSON-RPC handler checked if it was syncing first, the sync completed and then it got the head block or it's actually syncing a fork but incorrectly reporting the head block instead of where the sync is up to.\r\n\r\n\r\n\r\n**Frequency:** [What percentage of the time does it occur?]\r\nVery rare - most often for an in-sync node it will either return false or be behind by a single block.\r\n\r\n\r\n### Versions (Add all that apply)\r\n* Software version: `besu/v21.1.2/linux-x86_64/corretto-java-11`\r\n* Java version: [`java -version`]\r\n```\r\nopenjdk version \"11.0.8\" 2020-07-14 LTS\r\nOpenJDK Runtime Environment Corretto-11.0.8.10.1 (build 11.0.8+10-LTS)\r\nOpenJDK 64-Bit Server VM Corretto-11.0.8.10.1 (build 11.0.8+10-LTS, mixed mode)\r\n```\r\n\r\n### Additional Information\r\nLow priority - the `eth_syncing` API is unfortunately pretty useless on all clients for actually determining if the node is suitably in sync since it will often return syncing while the latest block is being imported.\r\n",
  "closed_by": {
    "login": "non-fungible-nelson",
    "id": 85905982,
    "node_id": "MDQ6VXNlcjg1OTA1OTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/non-fungible-nelson",
    "html_url": "https://github.com/non-fungible-nelson",
    "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
    "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
    "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
    "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
    "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
    "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2253/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2253/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404818455",
    "html_url": "https://github.com/hyperledger/besu/issues/2253#issuecomment-1404818455",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2253",
    "id": 1404818455,
    "node_id": "IC_kwDODE2jmc5Tu9QX",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-26T10:35:34Z",
    "updated_at": "2023-01-26T10:35:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ajsutton - still relevant or can i close? I am presuming engine API changes have touched this or at least proven non-issue? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404818455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404827423",
    "html_url": "https://github.com/hyperledger/besu/issues/2253#issuecomment-1404827423",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2253",
    "id": 1404827423,
    "node_id": "IC_kwDODE2jmc5Tu_cf",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-26T10:44:23Z",
    "updated_at": "2023-01-26T10:44:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "We've worked around it in teku. I still suspect there's a race condition which can make it reply syncing but also indicate there's nothing remaining to sync. Not sure if that's an issue or not - it's just a bit weird. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404827423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1513393063",
    "html_url": "https://github.com/hyperledger/besu/issues/2253#issuecomment-1513393063",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2253",
    "id": 1513393063,
    "node_id": "IC_kwDODE2jmc5aNIun",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-18T15:46:41Z",
    "updated_at": "2023-04-18T15:46:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing as stale ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1513393063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2045/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2045/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2045/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2045",
  "id": 835358769,
  "node_id": "MDU6SXNzdWU4MzUzNTg3Njk=",
  "number": 2045,
  "title": "Test Besu -> Tessera TLS configuration",
  "user": {
    "login": "mark-terry",
    "id": 36909937,
    "node_id": "MDQ6VXNlcjM2OTA5OTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/36909937?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mark-terry",
    "html_url": "https://github.com/mark-terry",
    "followers_url": "https://api.github.com/users/mark-terry/followers",
    "following_url": "https://api.github.com/users/mark-terry/following{/other_user}",
    "gists_url": "https://api.github.com/users/mark-terry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mark-terry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mark-terry/subscriptions",
    "organizations_url": "https://api.github.com/users/mark-terry/orgs",
    "repos_url": "https://api.github.com/users/mark-terry/repos",
    "events_url": "https://api.github.com/users/mark-terry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mark-terry/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2152224197,
      "node_id": "MDU6TGFiZWwyMTUyMjI0MTk3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamRevenant",
      "name": "TeamRevenant",
      "color": "78e298",
      "default": false,
      "description": "GH issues worked on by Revenant Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2021-03-18T23:23:22Z",
  "updated_at": "2021-08-20T00:36:44Z",
  "closed_at": "2021-08-20T00:36:44Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\nThe Besu -> Tessera configuration needs to be verified and tested.\n\n### Acceptance Criteria\nVerify that the TLS connection works as expected.\n- [x] Tessera <> Tessera\n- [x] Tessera <> Besu\n- [x] instructions for how to generate certs for Tessera to use\n",
  "closed_by": {
    "login": "bgravenorst",
    "id": 50852695,
    "node_id": "MDQ6VXNlcjUwODUyNjk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/50852695?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bgravenorst",
    "html_url": "https://github.com/bgravenorst",
    "followers_url": "https://api.github.com/users/bgravenorst/followers",
    "following_url": "https://api.github.com/users/bgravenorst/following{/other_user}",
    "gists_url": "https://api.github.com/users/bgravenorst/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bgravenorst/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bgravenorst/subscriptions",
    "organizations_url": "https://api.github.com/users/bgravenorst/orgs",
    "repos_url": "https://api.github.com/users/bgravenorst/repos",
    "events_url": "https://api.github.com/users/bgravenorst/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bgravenorst/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2045/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2045/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/805430319",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-805430319",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 805430319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNTQzMDMxOQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-24T02:21:29Z",
    "updated_at": "2021-03-24T02:21:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "TLS - Generating certificates - Do you have instructions for how to generate certs for Tessera? eg here we have instructions for Orion generating certs - https://docs.orion.consensys.net/en/stable/Tutorials/Generating-Certificates/\n\nTessera team says:\nThese are instructions to generate any certificate - Tessera should be able to use them. I don’t think anything special need to be done although if running on localhost it’s likely you also need to include the port in the CN.\nBut let me try this and get back to you",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/805430319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/805433345",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-805433345",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 805433345,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNTQzMzM0NQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-24T02:28:45Z",
    "updated_at": "2021-03-24T02:28:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\n       {\n           \"app\":\"P2P\",\n           \"serverAddress\":\"https://localhost:8081\",\n           \"sslConfig\": {\n               \"tls\" : \"STRICT\",\n               \"generateKeyStoreIfNotExisted\" : \"true\",\n               \"serverTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/key.pem\",\n               \"serverTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/cert.pem\",\n               \"serverTrustMode\" : \"TOFU\",\n               \"clientTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/key.pem\",\n               \"clientTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/cert.pem\",\n               \"clientTrustMode\" : \"TOFU\",\n               \"knownClientsFile\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/knownClients\",\n               \"knownServersFile\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/knownServers\"\n           },\n           \"communicationType\" : \"REST\"\n       }\n```\n\nWhen I use cert.pem and key.pem from tessera/security/src/test/resources/ the above config runs ok, and 2 tessera nodes can communicate using SSL. However if I run with the certs generated by orion I get an error\n2021-03-22 11:29:29.849 [pool-3-thread-1] WARN  c.q.t.p.p.PartyInfoBroadcaster - Failed to connect to node https://localhost:9002/, due to javax.net.ssl.SSLHandshakeException: No name matching localhost found\nand if I replace localhost with 127.0.0.1 in the config I get this error:\n2021-03-22 11:20:52.312 [pool-3-thread-1] WARN  c.q.t.p.p.PartyInfoBroadcaster - Failed to connect to node https://127.0.0.1:9002/, due to javax.net.ssl.SSLHandshakeException: No subject alternative names present",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/805433345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/811581892",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-811581892",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 811581892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTU4MTg5Mg==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T01:58:48Z",
    "updated_at": "2021-04-01T01:58:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "From Tessera team:\nThe issue is Orion automatically generate the certificate with something like 127.0.0.1:8080 in the CN field of the certificate. When it comes to IP address Java is stricter that it enforces the certificate contains a SAN (Subject Alternative Names) entry for the IP as having the url in the CN has become obsolete.\nso - 2 ways you can get it working\nFollow the Orion instruction to generate certs here https://docs.orion.consensys.net/en/stable/Tutorials/Generating-Certificates/#public-dns-is-cn and ensure that the CN=localhost\nFollow instruction to generate certs https://docs.orion.consensys.net/en/stable/Tutorials/Generating-Certificates/#ip-address-is-cn and have the SAN configured to include 127.0.0.1\nand Tessera should be able to start with those certificates\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/811581892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/811581965",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-811581965",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 811581965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTU4MTk2NQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-01T01:59:01Z",
    "updated_at": "2021-04-01T01:59:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "I followed the instructions as suggested (I tried both ways, and orion can run with the certs generated) but Tessera gives this error:\ncom.quorum.tessera.ssl.exception.TesseraSecurityException: java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException : algid parse error, not a sequence\n\tat com.quorum.tessera.ssl.context.ServerSSLContextFactoryImpl.from(ServerSSLContextFactoryImpl.java:49)\n\tat com.jpmorgan.quorum.server.utils.ServerUtils.buildWebServer(ServerUtils.java:44)\n\tat com.quorum.tessera.server.JerseyServer.start(JerseyServer.java:88)\n\tat com.quorum.tessera.launcher.Launcher$1.launchServer(Launcher.java:58)\n\tat com.quorum.tessera.launcher.Main.main(Main.java:88)\nCaused by: java.security.spec.InvalidKeySpecException: ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/811581965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/820143198",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-820143198",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 820143198,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDE0MzE5OA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-15T06:10:07Z",
    "updated_at": "2021-04-15T06:10:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "need to verify whether we can use PKCS1 key or does it need to be converted to PKCS8",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/820143198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/841952094",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-841952094",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 841952094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTk1MjA5NA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T03:16:09Z",
    "updated_at": "2021-05-17T03:16:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "confirming the PKCS1 key works (as generated by instructions in Orion docs) https://docs.orion.consensys.net/en/latest/Tutorials/Generating-Certificates/\n\nPKCS1 key: \n```\n               \"serverTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer2.key\",\n               \"serverTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer2.pem\",\n```\nPKCS8 key generated by\n`openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in orion_cer2.key -out pkcs8-2.key`\n```\n               \"serverTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/pkcs8-2.key\",\n               \"serverTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer2.pem\",\n```\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/841952094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/842711224",
    "html_url": "https://github.com/hyperledger/besu/issues/2045#issuecomment-842711224",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2045",
    "id": 842711224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0MjcxMTIyNA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-17T23:32:47Z",
    "updated_at": "2021-05-17T23:32:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "A couple of things to make clear in the docs for \n\n1.  If running on localhost, you can follow the instructions for generating certs in Orion docs. You just need to make sure that the certificates are generated with \"localhost\" in the CN (ie when you answer the questions, make sure you specify localhost as CN) eg:\n```\n$ openssl x509 -in orion_cer.pem -text -noout\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 14652134239262280134 (0xcb56d675d49109c6)\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C=AU, ST=QLD, L=Brisbane, O=ConsenSys, CN=localhost\n        Validity\n            Not Before: Apr  1 01:49:10 2021 GMT\n            Not After : Aug 14 01:49:10 2022 GMT\n        Subject: C=AU, ST=QLD, L=Brisbane, O=ConsenSys, CN=localhost\n```\nThe issue is Orion automatically generate the certificate with something like 127.0.0.1:8080 in the CN field of the certificate. When it comes to IP address Java is stricter that it enforces the certificate contains a SAN (Subject Alternative Names) entry for the IP as having the url in the CN has become obsolete.\nso - 2 ways you can get it working\nFollow the Orion instruction to generate certs here https://docs.orion.consensys.net/en/stable/Tutorials/Generating-Certificates/#public-dns-is-cn and ensure that the CN=localhost\nFollow instruction to generate certs https://docs.orion.consensys.net/en/stable/Tutorials/Generating-Certificates/#ip-address-is-cn and have the SAN configured to include 127.0.0.1\nand Tessera should be able to start with those certificates\n\n2. If running multiple tessera/besu nodes on a single host - Use separate knownClients and knownServers for P2P and Q2T endpoints in Tessera config. eg\n```\n   \"serverConfigs\":[\n       {\n           \"app\":\"ThirdParty\",\n           \"serverAddress\": \"http://localhost:8581\",\n           \"communicationType\" : \"REST\"\n       },\n       {\n           \"app\":\"Q2T\",\n           \"serverAddress\":\"https://localhost:8881\",\n           \"sslConfig\": {\n               \"tls\" : \"STRICT\",\n               \"generateKeyStoreIfNotExisted\" : \"true\",\n               \"serverTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.key\",\n               \"serverTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.pem\",\n               \"serverTrustMode\" : \"TOFU\",\n               \"clientTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.key\",\n               \"clientTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.pem\",\n               \"clientTrustMode\" : \"TOFU\",\n               \"clientAuth\" : \"false\",\n               \"knownClientsFile\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/knownClients1\",\n               \"knownServersFile\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/knownServers1\"\n           },\n           \"communicationType\" : \"REST\"\n\n       },\n       {\n           \"app\":\"P2P\",\n           \"serverAddress\":\"https://localhost:8081\",\n           \"sslConfig\": {\n               \"tls\" : \"STRICT\",\n               \"generateKeyStoreIfNotExisted\" : \"true\",\n               \"serverTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.key\",\n               \"serverTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.pem\",\n               \"serverTrustMode\" : \"TOFU\",\n               \"clientTlsKeyPath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.key\",\n               \"clientTlsCertificatePath\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/orion_cer1.pem\",\n               \"clientTrustMode\" : \"TOFU\",\n               \"knownClientsFile\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/knownClients3\",\n               \"knownServersFile\" : \"/Users/sallymacfarlane/workspace/besu-local-nodes/knownServers3\"\n           },\n           \"communicationType\" : \"REST\"\n       }\n   ],\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/842711224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

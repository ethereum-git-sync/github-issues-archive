{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3045",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3045/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3045/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3045/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3045",
  "id": 1051210104,
  "node_id": "I_kwDODE2jmc4-qDF4",
  "number": 3045,
  "title": "Fix docker scan vulnerabilities",
  "user": {
    "login": "jmcruz1983",
    "id": 15966694,
    "node_id": "MDQ6VXNlcjE1OTY2Njk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/15966694?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jmcruz1983",
    "html_url": "https://github.com/jmcruz1983",
    "followers_url": "https://api.github.com/users/jmcruz1983/followers",
    "following_url": "https://api.github.com/users/jmcruz1983/following{/other_user}",
    "gists_url": "https://api.github.com/users/jmcruz1983/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jmcruz1983/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jmcruz1983/subscriptions",
    "organizations_url": "https://api.github.com/users/jmcruz1983/orgs",
    "repos_url": "https://api.github.com/users/jmcruz1983/repos",
    "events_url": "https://api.github.com/users/jmcruz1983/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jmcruz1983/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2152224197,
      "node_id": "MDU6TGFiZWwyMTUyMjI0MTk3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamRevenant",
      "name": "TeamRevenant",
      "color": "78e298",
      "default": false,
      "description": "GH issues worked on by Revenant Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-11-11T17:34:18Z",
  "updated_at": "2021-12-14T17:27:34Z",
  "closed_at": "2021-12-14T17:27:34Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Checking the [Dockerfile](https://github.com/hyperledger/besu/blob/master/docker/openjdk-11/Dockerfile) seems that base image `openjdk:11.0.7-jre-slim-buster` is bringing some vulnerabilities flagged by some image scanning tools like snyk or harbor.\r\n\r\nTo get list of vulnerabilities you can run following command:\r\n\r\n```\r\n docker scan -f docker/openjdk-11/Dockerfile hyperledger/besu:develop-openjdk-11 --severity high\r\n```\r\n\r\nProducing following output:\r\n```\r\nTested 91 dependencies for known issues, found 10 issues.\r\n\r\nBase Image                  Vulnerabilities  Severity\r\nopenjdk:11-jre-slim-buster  62               2 critical, 8 high, 6 medium, 46 low\r\n```\r\n\r\nIn addition some alternative base images are recommended:\r\n\r\n```\r\nRecommendations for base image upgrade:\r\n\r\nAlternative image types\r\nBase Image                         Vulnerabilities  Severity\r\nopenjdk:17-ea-22-jdk-oracle        0                0 critical, 0 high, 0 medium, 0 low\r\nopenjdk:16-ea-33                   0                0 critical, 0 high, 0 medium, 0 low\r\nopenjdk:17-ea-10-jdk-oracle        0                0 critical, 0 high, 0 medium, 0 low\r\nopenjdk:17-ea-26-jdk-oraclelinux8  0                0 critical, 0 high, 0 medium, 0 low\r\n```\r\n\r\nIt is not critical but some private docker registry won't allow to pull such images with high severity vulnerabilities.\r\n",
  "closed_by": {
    "login": "shemnon",
    "id": 38109,
    "node_id": "MDQ6VXNlcjM4MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shemnon",
    "html_url": "https://github.com/shemnon",
    "followers_url": "https://api.github.com/users/shemnon/followers",
    "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
    "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
    "organizations_url": "https://api.github.com/users/shemnon/orgs",
    "repos_url": "https://api.github.com/users/shemnon/repos",
    "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shemnon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3045/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3045/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/983273130",
    "html_url": "https://github.com/hyperledger/besu/issues/3045#issuecomment-983273130",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3045",
    "id": 983273130,
    "node_id": "IC_kwDODE2jmc46m46q",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-01T04:18:11Z",
    "updated_at": "2021-12-01T04:18:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "```\ndocker scan --login\n➜  besu git:(main) docker scan -f docker/openjdk-11/Dockerfile hyperledger/besu:develop-openjdk-latest --severity high\n\nTesting hyperledger/besu:develop-openjdk-latest...\n\n✗ High severity vulnerability found in libgcrypt20\n  Description: Information Exposure\n  Info: https://snyk.io/vuln/SNYK-DEBIAN11-LIBGCRYPT20-1297892\n  Introduced through: apt@2.2.4, openjdk-17/openjdk-17-jre-headless@17.0.1+12-1+deb11u2\n  From: apt@2.2.4 > apt/libapt-pkg6.0@2.2.4 > libgcrypt20@1.8.7-6\n  From: apt@2.2.4 > gnupg2/gpgv@2.2.27-2 > libgcrypt20@1.8.7-6\n  From: openjdk-17/openjdk-17-jre-headless@17.0.1+12-1+deb11u2 > cups/libcups2@2.3.3op2-3+deb11u1 > avahi/libavahi-client3@0.8-5 > dbus/libdbus-1-3@1.12.20-2 > systemd/libsystemd0@247.3-6 > libgcrypt20@1.8.7-6\n  Image layer: Introduced by your base image (openjdk:11-jre-slim-buster)\n\n✗ Critical severity vulnerability found in glibc/libc-bin\n  Description: Use After Free\n  Info: https://snyk.io/vuln/SNYK-DEBIAN11-GLIBC-1296898\n  Introduced through: glibc/libc-bin@2.31-13+deb11u2, meta-common-packages@meta\n  From: glibc/libc-bin@2.31-13+deb11u2\n  From: meta-common-packages@meta > glibc/libc6@2.31-13+deb11u2\n  Image layer: Introduced by your base image (openjdk:11-jre-slim-buster)\n\n\n\nOrganization:      macfarla\nPackage manager:   deb\nTarget file:       docker/openjdk-11/Dockerfile\nProject name:      docker-image|hyperledger/besu\nDocker image:      hyperledger/besu:develop-openjdk-latest\nPlatform:          linux/amd64\nBase image:        openjdk:11-jre-slim-buster\nLicenses:          enabled\n\nTested 127 dependencies for known issues, found 2 issues.\n\nBase Image                  Vulnerabilities  Severity\nopenjdk:11-jre-slim-buster  64               2 critical, 9 high, 5 medium, 48 low\n\nRecommendations for base image upgrade:\n\nAlternative image types\nBase Image                         Vulnerabilities  Severity\nopenjdk:17-ea-22-oraclelinux8      0                0 critical, 0 high, 0 medium, 0 low\nopenjdk:16-ea-33                   0                0 critical, 0 high, 0 medium, 0 low\nopenjdk:17-ea-10                   0                0 critical, 0 high, 0 medium, 0 low\nopenjdk:17-ea-26-jdk-oraclelinux8  0                0 critical, 0 high, 0 medium, 0 low\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/983273130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/985437175",
    "html_url": "https://github.com/hyperledger/besu/issues/3045#issuecomment-985437175",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3045",
    "id": 985437175,
    "node_id": "IC_kwDODE2jmc46vJP3",
    "user": {
      "login": "fab-10",
      "id": 91944855,
      "node_id": "U_kgDOBXr3lw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-10",
      "html_url": "https://github.com/fab-10",
      "followers_url": "https://api.github.com/users/fab-10/followers",
      "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-10/orgs",
      "repos_url": "https://api.github.com/users/fab-10/repos",
      "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-03T11:18:37Z",
    "updated_at": "2021-12-03T11:18:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "@macfarla since the vulnerabilities depends on the Debian based image used by openjdk-11 images, (even upgrading to Bullseye does not help,) I suggest to replace it with the OpenJDK distribution from Eclipse Temurin [(the evolution of the AdoptOpenJDK project](https://blog.adoptopenjdk.net/2021/03/transition-to-eclipse-an-update/)), that has no high/critical vulnerabilities, as you can see below\r\n\r\n```\r\nPS C:\\Users\\TWR> docker scan eclipse-temurin:11-jre --severity high\r\n\r\nTesting eclipse-temurin:11-jre...\r\n\r\nOrganization:      fab-10\r\nPackage manager:   deb\r\nProject name:      docker-image|eclipse-temurin\r\nDocker image:      eclipse-temurin:11-jre\r\nPlatform:          linux/amd64\r\nBase image:        ubuntu:20.04\r\nLicenses:          enabled\r\n\r\n✓ Tested 144 dependencies for known issues, no vulnerable paths found.\r\n\r\nBase Image    Vulnerabilities  Severity\r\nubuntu:20.04  19               0 critical, 0 high, 3 medium, 16 low\r\n\r\nRecommendations for base image upgrade:\r\n\r\nMajor upgrades\r\nBase Image              Vulnerabilities  Severity\r\nubuntu:impish-20211015  13               0 critical, 0 high, 2 medium, 11 low\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/985437175/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/987871941",
    "html_url": "https://github.com/hyperledger/besu/issues/3045#issuecomment-987871941",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3045",
    "id": 987871941,
    "node_id": "IC_kwDODE2jmc464brF",
    "user": {
      "login": "jmcruz1983",
      "id": 15966694,
      "node_id": "MDQ6VXNlcjE1OTY2Njk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/15966694?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jmcruz1983",
      "html_url": "https://github.com/jmcruz1983",
      "followers_url": "https://api.github.com/users/jmcruz1983/followers",
      "following_url": "https://api.github.com/users/jmcruz1983/following{/other_user}",
      "gists_url": "https://api.github.com/users/jmcruz1983/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jmcruz1983/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jmcruz1983/subscriptions",
      "organizations_url": "https://api.github.com/users/jmcruz1983/orgs",
      "repos_url": "https://api.github.com/users/jmcruz1983/repos",
      "events_url": "https://api.github.com/users/jmcruz1983/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jmcruz1983/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-07T12:16:28Z",
    "updated_at": "2021-12-07T12:16:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Any update about this?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/987871941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/988504196",
    "html_url": "https://github.com/hyperledger/besu/issues/3045#issuecomment-988504196",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3045",
    "id": 988504196,
    "node_id": "IC_kwDODE2jmc4662CE",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-08T05:09:44Z",
    "updated_at": "2021-12-08T05:09:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "PR using the suggested version https://github.com/hyperledger/besu/pull/3137",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/988504196/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1411",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1411/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1411/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1411/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1411",
  "id": 712787207,
  "node_id": "MDU6SXNzdWU3MTI3ODcyMDc=",
  "number": 1411,
  "title": "Don't continue on out of disk",
  "user": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2051684044,
      "node_id": "MDU6TGFiZWwyMDUxNjg0MDQ0",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/P4",
      "name": "P4",
      "color": "ccff33",
      "default": false,
      "description": "Low (ex: Node doesn't start up when the configuration file has unexpected \"end-of-line\" character)"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "davemec",
    "id": 1975126,
    "node_id": "MDQ6VXNlcjE5NzUxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1975126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davemec",
    "html_url": "https://github.com/davemec",
    "followers_url": "https://api.github.com/users/davemec/followers",
    "following_url": "https://api.github.com/users/davemec/following{/other_user}",
    "gists_url": "https://api.github.com/users/davemec/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davemec/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davemec/subscriptions",
    "organizations_url": "https://api.github.com/users/davemec/orgs",
    "repos_url": "https://api.github.com/users/davemec/repos",
    "events_url": "https://api.github.com/users/davemec/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davemec/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "davemec",
      "id": 1975126,
      "node_id": "MDQ6VXNlcjE5NzUxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1975126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davemec",
      "html_url": "https://github.com/davemec",
      "followers_url": "https://api.github.com/users/davemec/followers",
      "following_url": "https://api.github.com/users/davemec/following{/other_user}",
      "gists_url": "https://api.github.com/users/davemec/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davemec/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davemec/subscriptions",
      "organizations_url": "https://api.github.com/users/davemec/orgs",
      "repos_url": "https://api.github.com/users/davemec/repos",
      "events_url": "https://api.github.com/users/davemec/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davemec/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-10-01T12:17:03Z",
  "updated_at": "2020-11-17T21:00:34Z",
  "closed_at": "2020-11-17T21:00:34Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "It appears that if besu goes out of disk, it just keeps retrying and retrying, looping the errors below over and over again. Is that really meaningful? \r\nI'm thinking that when such an error occurs, it might be better to close shop and try to shut down as gracefully as possible. I may be wrong, just a suggestion. \r\n\r\n\r\n```\r\nOct 01 14:12:39 besu.ethdevops.io node Caused by: org.rocksdb.RocksDBException: While appending to file: /datadir/ddir/database/168996.sst: No space left on device\r\nOct 01 14:12:39 besu.ethdevops.io node at org.rocksdb.Transaction.commit(Native Method)\r\nOct 01 14:12:39 besu.ethdevops.io node at org.rocksdb.Transaction.commit(Transaction.java:206)\r\nOct 01 14:12:39 besu.ethdevops.io node at org.hyperledger.besu.plugin.services.storage.rocksdb.segmented.RocksDBColumnarKeyValueStorage$RocksDbTransaction.commit(RocksDBColumnarKeyValueStorage.java:263)\r\nOct 01 14:12:39 besu.ethdevops.io node ... 19 more\r\nOct 01 14:12:41 besu.ethdevops.io node 2020-10-01 12:12:41.430+00:00 | nioEventLoopGroup-3-10 | INFO | SyncTargetManager | Found common ancestor with peer 0xf8476ba925dbb53913... at block 10969038\r\nOct 01 14:12:46 besu.ethdevops.io node 2020-10-01 12:12:46.894+00:00 | EthScheduler-Services-17547 (importBlock) | ERROR | PipelineChainDownloader | Chain download failed. Restarting after short delay.\r\nOct 01 14:12:46 besu.ethdevops.io node java.util.concurrent.CompletionException: org.hyperledger.besu.plugin.services.exception.StorageException: org.rocksdb.RocksDBException: While appending to file: /datadir/ddir/database/168996.sst: No space left on device\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.CompletableFuture.encodeRelay(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.CompletableFuture.completeRelay(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.CompletableFuture$UniRelay.tryFire(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.CompletableFuture.postComplete(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.services.pipeline.Pipeline.abort(Pipeline.java:152)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:134)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node at java.base/java.lang.Thread.run(Unknown Source)\r\nOct 01 14:12:46 besu.ethdevops.io node Caused by: org.hyperledger.besu.plugin.services.exception.StorageException: org.rocksdb.RocksDBException: While appending to file: /datadir/ddir/database/168996.sst: No space left on device\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.plugin.services.storage.rocksdb.segmented.RocksDBColumnarKeyValueStorage$RocksDbTransaction.commit(RocksDBColumnarKeyValueStorage.java:265)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.services.kvstore.SegmentedKeyValueStorageTransactionTransitionValidatorDecorator.commit(SegmentedKeyValueStorageTransactionTransitionValidatorDecorator.java:49)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.services.kvstore.SegmentedKeyValueStorageAdapter$1.commit(SegmentedKeyValueStorageAdapter.java:90)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.storage.keyvalue.WorldStateKeyValueStorage$Updater.commit(WorldStateKeyValueStorage.java:185)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.worldstate.DefaultMutableWorldState.persist(DefaultMutableWorldState.java:193)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.mainnet.AbstractBlockProcessor.processBlock(AbstractBlockProcessor.java:182)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.mainnet.AbstractBlockProcessor.processBlock(AbstractBlockProcessor.java:39)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.mainnet.BlockProcessor.processBlock(BlockProcessor.java:61)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:88)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.mainnet.MainnetBlockImporter.importBlock(MainnetBlockImporter.java:45)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.core.BlockImporter.importBlock(BlockImporter.java:44)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:56)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:30)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.services.pipeline.CompleterStage.run(CompleterStage.java:37)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:130)\r\nOct 01 14:12:46 besu.ethdevops.io node ... 5 more\r\nOct 01 14:12:46 besu.ethdevops.io node Caused by: org.rocksdb.RocksDBException: While appending to file: /datadir/ddir/database/168996.sst: No space left on device\r\nOct 01 14:12:46 besu.ethdevops.io node at org.rocksdb.Transaction.commit(Native Method)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.rocksdb.Transaction.commit(Transaction.java:206)\r\nOct 01 14:12:46 besu.ethdevops.io node at org.hyperledger.besu.plugin.services.storage.rocksdb.segmented.RocksDBColumnarKeyValueStorage$RocksDbTransaction.commit(RocksDBColumnarKeyValueStorage.java:263)\r\nOct 01 14:12:46 besu.ethdevops.io node ... 19 more \r\n```",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1411/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1411/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

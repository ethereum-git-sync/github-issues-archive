{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2786",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2786/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2786/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2786/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2786",
  "id": 1001625079,
  "node_id": "I_kwDODE2jmc47s5X3",
  "number": 2786,
  "title": "--config-file does not resolve ~ for home directory",
  "user": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362500,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNTAw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "7057ff",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 2129007612,
      "node_id": "MDU6TGFiZWwyMTI5MDA3NjEy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/dev%20experience",
      "name": "dev experience",
      "color": "2a0b89",
      "default": false,
      "description": "The build system, things that enable easier development etc."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-09-21T01:04:29Z",
  "updated_at": "2021-09-21T07:37:16Z",
  "closed_at": "2021-09-21T07:37:16Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nAs a besu dev, I want --config-file CLI option to resolve ~ to my home directory so that I don't have to do it manually. \r\n\r\n### Acceptance Criteria\r\n`besu git:(fix-BESU_CONFIG_FILE) besu --config-file=~/path/to/besu.conf`\r\nshould resolve the ~ to user's home directory\r\n\r\n### Steps to Reproduce (Bug)\r\n`besu git:(fix-BESU_CONFIG_FILE) besu --config-file=~/path/to/besu.conf`\r\n\r\n\r\n**Expected behavior:** [What you expect to happen]\r\n`besu git:(fix-BESU_CONFIG_FILE) besu --config-file=~/path/to/besu.conf`\r\nshould resolve the ~ to user's home directory\r\n\r\n**Actual behavior:** [What actually happens]\r\n```\r\n➜  besu git:(fix-BESU_CONFIG_FILE) besu --config-file=~/workspace/besu-local-nodes/config/besu/besu1.conf\r\nUnable to read TOML configuration, file not found.\r\n\r\nTo display full help:\r\nbesu [COMMAND] --help\r\n➜  besu git:(fix-BESU_CONFIG_FILE) ll ~/workspace/besu-local-nodes/config/besu/besu1.conf\r\n-rw-r--r--  1 sallymacfarlane  staff   1.4K 21 Sep 10:55 /Users/sallymacfarlane/workspace/besu-local-nodes/config/besu/besu1.conf\r\n```\r\n\r\n**Frequency:** [What percentage of the time does it occur?]\r\n\r\n### Versions (Add all that apply)\r\n* Software version: [`besu --version`]\r\nbesu/v21.10.0-RC1-dev-2abc7074/osx-x86_64/oracle_openjdk-java-11\r\n* Java version: [`java -version`]\r\nopenjdk version \"11.0.10\" 2021-01-19\r\nOpenJDK Runtime Environment (build 11.0.10+9)\r\nOpenJDK 64-Bit Server VM (build 11.0.10+9, mixed mode)\r\n* OS Name & Version: [`cat /etc/*release`]\r\nMacOS 11.6\r\n* Kernel Version: [`uname -a`]\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version: [`docker version`]\r\n* Cloud VM, type, size: [Amazon Web Services I3-large]\r\n\r\n### Additional Information\r\n\r\n",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2786/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2786/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/923538905",
    "html_url": "https://github.com/hyperledger/besu/issues/2786#issuecomment-923538905",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2786",
    "id": 923538905,
    "node_id": "IC_kwDODE2jmc43DBXZ",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T02:22:41Z",
    "updated_at": "2021-09-21T02:22:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "The expansion of `~` is done by the shell and it explicitly doesn't expand it when it's in the middle of a CLI arg.  You can just use `--config-file ~/workspace/...` and it will be expanded - the `=` is not necessary and not recommended for exactly this reason.\r\n\r\nWhile some software does re-implement parts of the shell expansion logic, I wouldn't recommend it as it's significantly difficult to get right and can create other unexpected issues when the value was escaped on the command line and then expanded incorrectly by the software.  ie `--config-file \\~foo.xml` should use `~foo.xml` as the filename and not expand the `~` but that's impossible to get right within the program.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/923538905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/923719731",
    "html_url": "https://github.com/hyperledger/besu/issues/2786#issuecomment-923719731",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2786",
    "id": 923719731,
    "node_id": "IC_kwDODE2jmc43Dtgz",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T07:37:16Z",
    "updated_at": "2021-09-21T07:37:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "ok that makes sense",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/923719731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4052/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4052/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4052/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4052",
  "id": 1293588347,
  "node_id": "I_kwDODE2jmc5NGpd7",
  "number": 4052,
  "title": "Unable to process block because parent world state is not available",
  "user": {
    "login": "SeaMonkey82",
    "id": 20866869,
    "node_id": "MDQ6VXNlcjIwODY2ODY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SeaMonkey82",
    "html_url": "https://github.com/SeaMonkey82",
    "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
    "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
    "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
    "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
    "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
    "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3013559202,
      "node_id": "MDU6TGFiZWwzMDEzNTU5MjAy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/mainnet",
      "name": "mainnet",
      "color": "9D578C",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2022-07-04T21:51:15Z",
  "updated_at": "2022-07-18T14:12:39Z",
  "closed_at": "2022-07-07T16:27:44Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I ran into this error with ropsten-lodestar-besu, with besu on a commit from the main branch pushed within the last few days, and besu was unable to recover until I deleted the besu database and resynced.\r\n\r\n```\r\njava.util.NoSuchElementException: No value present\r\n        at java.base/java.util.Optional.get(Optional.java:148)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:214)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:100)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.validateBlock(MergeCoordinator.java:256)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.rememberBlock(MergeCoordinator.java:277)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.TransitionCoordinator.rememberBlock(TransitionCoordinator.java:137)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.engine.EngineNewPayload.syncResponse(EngineNewPayload.java:185)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.ExecutionEngineJsonRpcMethod.lambda$response$0(ExecutionEngineJsonRpcMethod.java:62)\r\n        at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)\r\n        at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)\r\n        at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)\r\n        at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\n2022-07-03 06:46:59.794-04:00 | vert.x-worker-thread-0 | ERROR | MainnetBlockValidator | Unable to process block because parent world state 0xea0a5af970e850f4760cd610a4bc1f741654f37cee92b9b630a7a733338dbb53 is not available. Block 12515901 (0x59c7b67917e9cc703e2887c03b1228f0f8b41da634f2a61b35df0219309990d0)\r\n2022-07-03 06:46:59.795-04:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Invalid new payload: number: 12515901, hash: 0x59c7b67917e9cc703e2887c03b1228f0f8b41da634f2a61b35df0219309990d0, parentHash: 0xc628202a04d296e51193571a60d786614014daaa4f30c492e9c2d1fd01d0f879, latestValidHash: 0xc628202a04d296e51193571a60d786614014daaa4f30c492e9c2d1fd01d0f879, status: INVALID, validationError: Unable to process block because parent world state 0xea0a5af970e850f4760cd610a4bc1f741654f37cee92b9b630a7a733338dbb53 is not available\r\n```",
  "closed_by": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4052/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4052/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1174684021",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1174684021",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1174684021,
    "node_id": "IC_kwDODE2jmc5GBEF1",
    "user": {
      "login": "parithosh",
      "id": 17509050,
      "node_id": "MDQ6VXNlcjE3NTA5MDUw",
      "avatar_url": "https://avatars.githubusercontent.com/u/17509050?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/parithosh",
      "html_url": "https://github.com/parithosh",
      "followers_url": "https://api.github.com/users/parithosh/followers",
      "following_url": "https://api.github.com/users/parithosh/following{/other_user}",
      "gists_url": "https://api.github.com/users/parithosh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/parithosh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/parithosh/subscriptions",
      "organizations_url": "https://api.github.com/users/parithosh/orgs",
      "repos_url": "https://api.github.com/users/parithosh/repos",
      "events_url": "https://api.github.com/users/parithosh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/parithosh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T06:50:23Z",
    "updated_at": "2022-07-05T06:50:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Are you running Besu in a docker container by any chance?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1174684021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1175604926",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1175604926",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1175604926,
    "node_id": "IC_kwDODE2jmc5GEk6-",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T23:40:51Z",
    "updated_at": "2022-07-05T23:40:51Z",
    "author_association": "NONE",
    "body": "> Are you running Besu in a docker container by any chance?\r\n\r\nNo.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1175604926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179333658",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1179333658",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1179333658,
    "node_id": "IC_kwDODE2jmc5GSzQa",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-08T20:22:22Z",
    "updated_at": "2022-07-08T20:22:22Z",
    "author_association": "NONE",
    "body": "Encountered this again on 93b877002272e76b24571eec8996ed595f52c905\r\n\r\n```\r\njava.lang.RuntimeException: java.lang.IllegalStateException: Address=0x134e62bd2ee247d4186a1fdbaa9e076cb26c1355 Prior Value in Rolling Change: Storage Roots differ\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:254)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:100)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.validateBlock(MergeCoordinator.java:256)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.rememberBlock(MergeCoordinator.java:277)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.TransitionCoordinator.rememberBlock(TransitionCoordinator.java:137)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.engine.EngineNewPayload.syncResponse(EngineNewPayload.java:188)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.ExecutionEngineJsonRpcMethod.lambda$response$0(ExecutionEngineJsonRpcMethod.java:62)\r\n        at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)\r\n        at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)\r\n        at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)\r\n        at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.IllegalStateException: Address=0x134e62bd2ee247d4186a1fdbaa9e076cb26c1355 Prior Value in Rolling Change: Storage Roots differ\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiAccount.assertCloseEnoughForDiffing(BonsaiAccount.java:309)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.rollAccountChange(BonsaiWorldStateUpdater.java:497)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.lambda$rollForward$9(BonsaiWorldStateUpdater.java:422)\r\n        at java.base/java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1764)\r\n        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.rollForward(BonsaiWorldStateUpdater.java:420)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:243)\r\n        ... 14 more\r\n2022-07-08 16:21:44.624-04:00 | vert.x-worker-thread-0 | ERROR | MainnetBlockValidator | Unable to process block because parent world state 0xad3c4abf128722b6ee0242b82a90fa050415787cab407953708309a076e678ab is not available. Block 12552253 (0x3426773b49d87c36f73730ffe57a638d14d7f440d038cbceec1ac38370384e6d)\r\n2022-07-08 16:21:44.624-04:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Invalid new payload: number: 12552253, hash: 0x3426773b49d87c36f73730ffe57a638d14d7f440d038cbceec1ac38370384e6d, parentHash: 0x95935a615a7e04a5d7cbd4151a6807fb516763a81a427fa8f244ec9e0c876c7f, latestValidHash: 0x95935a615a7e04a5d7cbd4151a6807fb516763a81a427fa8f244ec9e0c876c7f, status: INVALID, validationError: Unable to process block because parent world state 0xad3c4abf128722b6ee0242b82a90fa050415787cab407953708309a076e678ab is not available\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179333658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179481083",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1179481083",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1179481083,
    "node_id": "IC_kwDODE2jmc5GTXP7",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-09T05:08:03Z",
    "updated_at": "2022-07-09T07:58:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is it a new node completly synced with this commit or an old node? Is It failing after the reboot with this new version or long after?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179481083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179481413",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1179481413",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1179481413,
    "node_id": "IC_kwDODE2jmc5GTXVF",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-09T05:11:10Z",
    "updated_at": "2022-07-09T05:11:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "I say that because if it is a node that has been Synced before it is possible that it was already corrupted before. This fix does not fix an already corrupted node but it prevents a new node from becoming corrupted. If you have with a node that has been fully synced with this fix. So I will Say that this fix is ​​not enough ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179481413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179534727",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1179534727",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1179534727,
    "node_id": "IC_kwDODE2jmc5GTkWH",
    "user": {
      "login": "mcdee",
      "id": 511384,
      "node_id": "MDQ6VXNlcjUxMTM4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/511384?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcdee",
      "html_url": "https://github.com/mcdee",
      "followers_url": "https://api.github.com/users/mcdee/followers",
      "following_url": "https://api.github.com/users/mcdee/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcdee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcdee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcdee/subscriptions",
      "organizations_url": "https://api.github.com/users/mcdee/orgs",
      "repos_url": "https://api.github.com/users/mcdee/repos",
      "events_url": "https://api.github.com/users/mcdee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcdee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-09T12:23:31Z",
    "updated_at": "2022-07-09T12:23:31Z",
    "author_association": "CONTRIBUTOR",
    "body": ">  I say that because if it is a node that has been Synced before it is possible that it was already corrupted before.\r\n\r\nIs it possible to know if a node is corrupted, or is this basically saying \"you need to resync from scratch\" in case the node has this issue but not currently showing problems?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179534727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179548624",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1179548624",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1179548624,
    "node_id": "IC_kwDODE2jmc5GTnvQ",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-09T13:52:50Z",
    "updated_at": "2022-07-09T13:52:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "to know if a node is corrupted it would be necessary to look at the state of the last trielog and to see if they are valid. it is technically feasible but it is not currently available. if the problem persists we can implement an RPC method to replace a trielog with a valid trielog to avoid having to resync. But I prefer for the moment to not implement a feature for a bug. Knowing that we normally fixed it . But I am aware that this has an impact and if the problem persists we will certainly implement a method to avoid resync while trying to fix it (like RPC). But I'm very confident on our last fix regarding this",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179548624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179548826",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1179548826",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1179548826,
    "node_id": "IC_kwDODE2jmc5GTnya",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-09T13:54:28Z",
    "updated_at": "2022-07-09T13:54:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "After knowing that the depth of reorgs is limited on the mainnet. If a node works for a day with the new version I would say there is normally no risk. Unless we have a very deep reorg which is not normally possible ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1179548826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1181833570",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1181833570",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1181833570,
    "node_id": "IC_kwDODE2jmc5GcVli",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T14:30:21Z",
    "updated_at": "2022-07-12T14:30:21Z",
    "author_association": "NONE",
    "body": "This was supposedly fixed in 22.4.4, but I have since done a completely fresh sync with that version and encountered the same error.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1181833570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186592486",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1186592486",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1186592486,
    "node_id": "IC_kwDODE2jmc5Gufbm",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-17T19:18:16Z",
    "updated_at": "2022-07-17T19:18:16Z",
    "author_association": "NONE",
    "body": "Same error.  Different stacktrace. Commit f885c4671333168089a7b86ffedf985fce81954b\r\n```\r\njava.lang.RuntimeException: java.lang.IllegalStateException: Expected to create account, but the account exists.  Address=0xd48290f90578bf460e34bf33cac3d949d94e0237\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:254)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:100)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.validateBlock(MergeCoordinator.java:265)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.rememberBlock(MergeCoordinator.java:281)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.TransitionCoordinator.rememberBlock(TransitionCoordinator.java:137)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.engine.EngineNewPayload.syncResponse(EngineNewPayload.java:195)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.ExecutionEngineJsonRpcMethod.lambda$response$0(ExecutionEngineJsonRpcMethod.java:62)\r\n        at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)\r\n        at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)\r\n        at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)\r\n        at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.IllegalStateException: Expected to create account, but the account exists.  Address=0xd48290f90578bf460e34bf33cac3d949d94e0237\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.rollAccountChange(BonsaiWorldStateUpdater.java:493)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.lambda$rollForward$9(BonsaiWorldStateUpdater.java:422)\r\n        at java.base/java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1764)\r\n        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.rollForward(BonsaiWorldStateUpdater.java:420)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:243)\r\n        ... 14 more\r\n2022-07-17 15:16:22.621-04:00 | vert.x-worker-thread-0 | ERROR | MainnetBlockValidator | Unable to process block because parent world state 0x71f74b0e284276cf98ddbb58cd7eec545009d9ac394f744ef65f81b2acb7b7b0 is not available. Block 12611764 (0xcc4f02a668683f996f2976af7c96afab303b4752e56dc631f09a36f1c9a6134e)\r\n2022-07-17 15:16:22.621-04:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Invalid new payload: number: 12611764, hash: 0xcc4f02a668683f996f2976af7c96afab303b4752e56dc631f09a36f1c9a6134e, parentHash: 0xd55f875abf05751639ef5141e58bec392b63ced48152d2e7eea4a1f5eee3bef5, latestValidHash: 0xd55f875abf05751639ef5141e58bec392b63ced48152d2e7eea4a1f5eee3bef5, status: INVALID, validationError: Unable to process block because parent world state 0x71f74b0e284276cf98ddbb58cd7eec545009d9ac394f744ef65f81b2acb7b7b0 is not available\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186592486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186596768",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1186596768",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1186596768,
    "node_id": "IC_kwDODE2jmc5Gugeg",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-17T19:50:41Z",
    "updated_at": "2022-07-17T19:50:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "we are trying a fix that normally fix these issues. We'll keep you informed",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1186596768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1187537775",
    "html_url": "https://github.com/hyperledger/besu/issues/4052#issuecomment-1187537775",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4052",
    "id": 1187537775,
    "node_id": "IC_kwDODE2jmc5GyGNv",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T14:12:38Z",
    "updated_at": "2022-07-18T14:12:38Z",
    "author_association": "NONE",
    "body": "Yet another unique stack trace for this error.\r\n```\r\njava.lang.RuntimeException: java.lang.IllegalStateException: Address=0xa2e1d8dff9b33d986aee4e812f5652afa8f4b820 Prior Value in Rolling Change: nonces differ\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:254)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:100)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.validateBlock(MergeCoordinator.java:265)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.MergeCoordinator.rememberBlock(MergeCoordinator.java:281)\r\n        at org.hyperledger.besu.consensus.merge.blockcreation.TransitionCoordinator.rememberBlock(TransitionCoordinator.java:137)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.engine.EngineNewPayload.syncResponse(EngineNewPayload.java:195)\r\n        at org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.ExecutionEngineJsonRpcMethod.lambda$response$0(ExecutionEngineJsonRpcMethod.java:62)\r\n        at io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)\r\n        at io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)\r\n        at io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)\r\n        at io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: java.lang.IllegalStateException: Address=0xa2e1d8dff9b33d986aee4e812f5652afa8f4b820 Prior Value in Rolling Change: nonces differ\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiAccount.assertCloseEnoughForDiffing(BonsaiAccount.java:303)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.rollAccountChange(BonsaiWorldStateUpdater.java:497)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.lambda$rollBack$13(BonsaiWorldStateUpdater.java:447)\r\n        at java.base/java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1764)\r\n        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateUpdater.rollBack(BonsaiWorldStateUpdater.java:445)\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiWorldStateArchive.getMutable(BonsaiWorldStateArchive.java:239)\r\n        ... 14 more\r\n2022-07-18 10:11:14.603-04:00 | vert.x-worker-thread-0 | ERROR | MainnetBlockValidator | Unable to process block because parent world state 0x7e05b280e6fcb6f469f89df4d547e750eca25a2292a3804f7229e6ed9c9d5083 is not available. Block 12616596 (0x34ef8b3984f7f801a8aa48747997bf367126d0d80e9b1890c36b71ce6c90f48f)\r\n2022-07-18 10:11:14.603-04:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Invalid new payload: number: 12616596, hash: 0x34ef8b3984f7f801a8aa48747997bf367126d0d80e9b1890c36b71ce6c90f48f, parentHash: 0xcc7ded52c5b1e70a20b6fd6f9405c468fc0497df9ded2f7eb701b9ea3dcfdbac, latestValidHash: 0xcc7ded52c5b1e70a20b6fd6f9405c468fc0497df9ded2f7eb701b9ea3dcfdbac, status: INVALID, validationError: Unable to process block because parent world state 0x7e05b280e6fcb6f469f89df4d547e750eca25a2292a3804f7229e6ed9c9d5083 is not available\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1187537775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

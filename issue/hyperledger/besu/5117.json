{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/5117",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/5117/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/5117/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/5117/events",
  "html_url": "https://github.com/hyperledger/besu/issues/5117",
  "id": 1593855758,
  "node_id": "I_kwDODE2jmc5fAE8O",
  "number": 5117,
  "title": "Invalid `jsonl` in opcode output",
  "user": {
    "login": "holiman",
    "id": 142290,
    "node_id": "MDQ6VXNlcjE0MjI5MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/holiman",
    "html_url": "https://github.com/holiman",
    "followers_url": "https://api.github.com/users/holiman/followers",
    "following_url": "https://api.github.com/users/holiman/following{/other_user}",
    "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
    "organizations_url": "https://api.github.com/users/holiman/orgs",
    "repos_url": "https://api.github.com/users/holiman/repos",
    "events_url": "https://api.github.com/users/holiman/events{/privacy}",
    "received_events_url": "https://api.github.com/users/holiman/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-02-21T17:30:13Z",
  "updated_at": "2023-02-21T21:35:46Z",
  "closed_at": "2023-02-21T21:35:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "version: 532797fc1725d3264ca51d083cb2b8a89123f034\r\n\r\nargs: `/home/martin/workspace/besu-vm --json state-test  /tmp/00000000-mixed-1.json`\r\n\r\nfile: \r\n```json\r\n{\"00000000-mixed-1\":{\"env\":{\"currentCoinbase\":\"b94f5374fce5edbc8e2a8697c15331677e6ebf0b\",\"currentDifficulty\":\"0x20000\",\"currentRandom\":\"0x0000000000000000000000000000000000000000000000000000000000020000\",\"currentGasLimit\":\"0x26e1f476fe1e22\",\"currentNumber\":\"0x1\",\"currentTimestamp\":\"0x3e8\",\"previousHash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"currentBaseFee\":\"0x10\"},\"pre\":{\"0x00000000000000000000000000000000000000f1\":{\"code\":\"0x600060016001600260026101f461ffff8c41045f738c38b06c3b3e09351af05288076af06d8a14a1ffb116190960717b20609464fe9e3f7862338363398859073f808396111c433242543f9c9e97360af1ff9b43478b376d0304351d837c6153807b5718031b6e525f629d507f8e93639143697f05303c698a8d989b58653653fe450a39133f998b7f82a4659b587c195af0359180477e927df4205604a353a364626b74355b6677803f321c3d6b84461bfa9495429f8c5683046d400575a260093c5251a2016ff2857b16f4a23914a306423a37a3026b1092ff50b10a89920475993070449442693f9060597f3416395f62507cf195628e418e915a518411f55788365a8071668a20fe070450333a1a44f577f4a405585a7c9981fa96b145f2899f34a1391b3f9e151139a39d62613200913043546da201064844199c805118ff007c7a3611a41b188250a47e107219f5209490f3419f3277795f9b3796898081f096f4886576ff580b1c7e456187571b11a1fa0b7c6a9c53406d92358f7c33138c598d67921b41b19e518f63b0667f1d91447b12b030339d35a2340351b08e0965627860611812f494ffb1103e639f84901a643a8a661368891ca29b5967870772459a6af54889376f3533a1946a875a87f520307062b16456f3a416053a311a983558a213177003098e1d3a33f23b3c840450749a75707033716045181a1d48f2931966a14115343492b0643e9d5b6c6b40069575410a3386ff1c70a21a77331ca03c007cfe5276033330991183a23036650273766180170299f36e88728b079338149ff57e8486905899999a737f3a7878399a481b3c6c3b81979571397196f45000b175fd7b86367d93b09e5675a443750a8b9ff041725858400734833c505459309f165fa2f36170168d9606a0796047913fb006ff7a15b0b075685f6f5932039c57416c4453126e699244691bf1f3fa6c798c3df332325a03478c3a6554345912fe183f8e178d72085f9a1c3259669b3a8e03957c51fd3250f28c094148666b4679598082f3971714b1136d52745a787c70963d52543d8b51511aa0078a627d6a56696f008d6909507b9a846867689c571b55326da237760a3c07f36c118b35711850a359897a4074fd669a6d74906c6247511ca0879173fd8d8561413eb00810637510113b148a029c555886807c103537455440158a547b616f751840447d19a0fd46636283336e65a119357e786a5965a3576c75559a3959923f8ff2a30b3b3f7f78679c9e33f3674339444343f5a47f776811fe5b3f20951171373d1860745b85628c6e070a43669d7677758a569d963e45f579880532996f996205f03e1681130b9797669e880196817e638d9c3f887f92798a59443d7f845505a35f8d77969767157c54483986448585489e888f61f19d875a7142858467199806\",\"storage\":{\"0x0000000000000000000000000000000000000000000000000000000000000000\":\"0x0000000000000000000000000000000000000000000000000000000000000008\"},\"balance\":\"0x0\",\"nonce\":\"0x0\"},\"0xa94f5374fce5edbc8e2a8697c15331677e6ebf0b\":{\"code\":\"0x\",\"storage\":{},\"balance\":\"0xffffffffff\",\"nonce\":\"0x0\"}},\"transaction\":{\"gasPrice\":\"0x10\",\"nonce\":\"0x0\",\"to\":\"0x00000000000000000000000000000000000000f1\",\"data\":[\"0x5d8e31c39882094e4e6f155db71d4b23812428a6f81e9dca83900340cf\"],\"gasLimit\":[\"0x7a1200\"],\"value\":[\"0x47806c\"],\"secretKey\":\"0x45a915e4d060149eb4365960e6a7a45f334393093061116b197e3240065ff2d8\"},\"out\":\"0x\",\"post\":{\"Shanghai\":[{\"hash\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"logs\":\"0x0000000000000000000000000000000000000000000000000000000000000000\",\"indexes\":{\"data\":0,\"gas\":0,\"value\":0}}]}}}\r\n```\r\n\r\nOutput\r\n```\r\n{\"pc\":0,\"op\":96,\"gas\":\"0x79be28\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":2,\"op\":96,\"gas\":\"0x79be25\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":4,\"op\":96,\"gas\":\"0x79be22\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":6,\"op\":96,\"gas\":\"0x79be1f\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\",\"0x1\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":8,\"op\":96,\"gas\":\"0x79be1c\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\",\"0x1\",\"0x2\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":10,\"op\":97,\"gas\":\"0x79be19\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\",\"0x1\",\"0x2\",\"0x2\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH2\"}\r\n{\"pc\":13,\"op\":97,\"gas\":\"0x79be16\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\",\"0x1\",\"0x2\",\"0x2\",\"0x1f4\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH2\"}\r\n{\"pc\":16,\"op\":140,\"gas\":\"0x79be13\",\"gasCost\":\"0x0\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\",\"0x1\",\"0x2\",\"0x2\",\"0x1f4\",\"0xffff\"],\"depth\":1,\"refund\":0,\"opName\":\"DUP13\"\",error\":\"Stack underflow\"}\r\n{\"output\":\"\",\"gasUsed\":\"0x7a1200\",\"time\":30116032,\"Mgps\":\"265.639\",\"test\":\"00000000-mixed-1\",\"fork\":\"Shanghai\",\"d\":0,\"g\":0,\"v\":0,\"postHash\":\"0x6d2d1ae307d0c388eaf6f5b68cb28dd57f1ac6a0dcf2eb19599ef8c6f2e8b7c9\",\"postLogsHash\":\"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347\",\"pass\":false}\r\n\r\n```\r\nZooming in\r\n```\r\n{\"pc\":16,\"op\":140,\"gas\":\"0x79be13\",\"gasCost\":\"0x0\",\"memSize\":0,\"stack\":[\"0x0\",\"0x1\",\"0x1\",\"0x2\",\"0x2\",\"0x1f4\",\"0xffff\"],\"depth\":1,\"refund\":0,\"opName\":\"DUP13\"\",error\":\"Stack underflow\"}\r\n```\r\nSome more zoom\r\n```\r\n\"opName\":\"DUP13\"\",error\"\r\n```\r\nEnhance\r\n```\r\nDUP13\"\",error\r\n```\r\nA strange misplaced `\",` instead of `,\"`, causing json parsing problems. ",
  "closed_by": {
    "login": "shemnon",
    "id": 38109,
    "node_id": "MDQ6VXNlcjM4MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shemnon",
    "html_url": "https://github.com/shemnon",
    "followers_url": "https://api.github.com/users/shemnon/followers",
    "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
    "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
    "organizations_url": "https://api.github.com/users/shemnon/orgs",
    "repos_url": "https://api.github.com/users/shemnon/repos",
    "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shemnon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/5117/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/5117/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1438865327",
    "html_url": "https://github.com/hyperledger/besu/issues/5117#issuecomment-1438865327",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5117",
    "id": 1438865327,
    "node_id": "IC_kwDODE2jmc5Vw1ev",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-21T17:38:50Z",
    "updated_at": "2023-02-21T17:38:50Z",
    "author_association": "NONE",
    "body": "Cause:\r\n\r\nhttps://github.com/hyperledger/besu/pull/5030/files#diff-8089539ed07c546b78bb2ce3628908fe171f27da764a276e348a9624f7192ba9R160-R164 \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1438865327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1439072786",
    "html_url": "https://github.com/hyperledger/besu/issues/5117#issuecomment-1439072786",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5117",
    "id": 1439072786,
    "node_id": "IC_kwDODE2jmc5VxoIS",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-21T20:48:49Z",
    "updated_at": "2023-02-21T20:48:49Z",
    "author_association": "MEMBER",
    "body": "The fix - https://github.com/hyperledger/besu/pull/5118/files#diff-8089539ed07c546b78bb2ce3628908fe171f27da764a276e348a9624f7192ba9\r\n\r\nThe rest of the PR is testing support for EVMTool to validate this doesn't happen again.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1439072786/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

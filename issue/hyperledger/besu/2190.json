{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2190",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2190/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2190/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2190/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2190",
  "id": 867597599,
  "node_id": "MDU6SXNzdWU4Njc1OTc1OTk=",
  "number": 2190,
  "title": "Unit tests fail if system language is not English",
  "user": {
    "login": "daniel-iobuilders",
    "id": 44777168,
    "node_id": "MDQ6VXNlcjQ0Nzc3MTY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/44777168?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/daniel-iobuilders",
    "html_url": "https://github.com/daniel-iobuilders",
    "followers_url": "https://api.github.com/users/daniel-iobuilders/followers",
    "following_url": "https://api.github.com/users/daniel-iobuilders/following{/other_user}",
    "gists_url": "https://api.github.com/users/daniel-iobuilders/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/daniel-iobuilders/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/daniel-iobuilders/subscriptions",
    "organizations_url": "https://api.github.com/users/daniel-iobuilders/orgs",
    "repos_url": "https://api.github.com/users/daniel-iobuilders/repos",
    "events_url": "https://api.github.com/users/daniel-iobuilders/events{/privacy}",
    "received_events_url": "https://api.github.com/users/daniel-iobuilders/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362500,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNTAw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "7057ff",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 2129007612,
      "node_id": "MDU6TGFiZWwyMTI5MDA3NjEy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/dev%20experience",
      "name": "dev experience",
      "color": "2a0b89",
      "default": false,
      "description": "The build system, things that enable easier development etc."
    },
    {
      "id": 4164098293,
      "node_id": "LA_kwDODE2jmc74Mxj1",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/icebox",
      "name": "icebox",
      "color": "1D76DB",
      "default": false,
      "description": "items that need more consideration, time, or can wait"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "jflo",
    "id": 345937,
    "node_id": "MDQ6VXNlcjM0NTkzNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jflo",
    "html_url": "https://github.com/jflo",
    "followers_url": "https://api.github.com/users/jflo/followers",
    "following_url": "https://api.github.com/users/jflo/following{/other_user}",
    "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
    "organizations_url": "https://api.github.com/users/jflo/orgs",
    "repos_url": "https://api.github.com/users/jflo/repos",
    "events_url": "https://api.github.com/users/jflo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jflo/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "geekcharming",
      "id": 19409969,
      "node_id": "MDQ6VXNlcjE5NDA5OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19409969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geekcharming",
      "html_url": "https://github.com/geekcharming",
      "followers_url": "https://api.github.com/users/geekcharming/followers",
      "following_url": "https://api.github.com/users/geekcharming/following{/other_user}",
      "gists_url": "https://api.github.com/users/geekcharming/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geekcharming/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geekcharming/subscriptions",
      "organizations_url": "https://api.github.com/users/geekcharming/orgs",
      "repos_url": "https://api.github.com/users/geekcharming/repos",
      "events_url": "https://api.github.com/users/geekcharming/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geekcharming/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-04-26T11:24:46Z",
  "updated_at": "2022-07-14T16:16:15Z",
  "closed_at": "2022-07-14T16:16:15Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nThe tests `BesuCommandTest.privEnclaveKeyFileDoesNotExist` and `NetworkingServiceLifecycleTest.startDiscoveryPortInUse` fail if the system language of the operating system is another language than English. In `BesuCommandTest.privEnclaveKeyFileDoesNotExist` the test looks like this:\r\n\r\n```\r\n@Test\r\npublic void privEnclaveKeyFileDoesNotExist() {\r\n  parseCommand(\"--privacy-enabled=true\", \"--privacy-public-key-file\", \"/non/existent/file\");\r\n\r\n  assertThat(commandOutput.toString()).isEmpty();\r\n  assertThat(commandErrorOutput.toString()).startsWith(\"Problem with privacy-public-key-file\");\r\n  assertThat(commandErrorOutput.toString()).contains(\"No such file\");\r\n}\r\n```\r\n\r\nThe last assertion is the one that is failing. `No such file` is the error message coming directly from `IOException` when the file is not found. But the error messages of the exceptions thrown by the Java library are translated according to the system language. For example when the system language is set to Spanish the error looks like this:\r\n\r\n```\r\nProblem with privacy-public-key-file: /non/existent/file (No existe el archivo o el directorio)\r\n```\r\n\r\nIn this case `No such file` is not part of the output string and the assertion fails.\r\n\r\n `NetworkingServiceLifecycleTest.startDiscoveryPortInUse`  fails for the same reason:\r\n \r\n ```\r\ncatch (final Exception e) {\r\n          assertThat(e).hasCauseExactlyInstanceOf(PeerDiscoveryServiceException.class);\r\n          assertThat(e)\r\n              .hasMessageStartingWith(\r\n                  \"org.hyperledger.besu.ethereum.p2p.discovery.\"\r\n                      + \"PeerDiscoveryServiceException: Failed to bind Ethereum UDP discovery listener to 0.0.0.0:\");\r\n\r\n          assumeThat(System.getProperty(\"user.language\")).isEqualTo(\"en\");\r\n          assertThat(e).hasMessageContaining(\"Address already in use\");\r\n        } \r\n```\r\n\r\nHere again the last assertion fails, because it comes directly from an exception thrown by the Java library.\r\n\r\n### Expected behavior\r\nThe tests should either be successful or be skipped.\r\n\r\n### Possible solution\r\nThe tests could be skipped using [AssertJ Assume](https://assertj.github.io/doc/#assertj-core-assumptions) and testing if the system language is English or not. Like that they would not fail for developers with another system language. But they would still be executed in the CI / CD pipeline, to verify that the tested behavior has not been changed.\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Checkout `master` branch\r\n2. Change system language to any other than English\r\n3. Execute `./gradlew build` \r\n\r\n",
  "closed_by": {
    "login": "daniellehrner",
    "id": 6727189,
    "node_id": "MDQ6VXNlcjY3MjcxODk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6727189?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/daniellehrner",
    "html_url": "https://github.com/daniellehrner",
    "followers_url": "https://api.github.com/users/daniellehrner/followers",
    "following_url": "https://api.github.com/users/daniellehrner/following{/other_user}",
    "gists_url": "https://api.github.com/users/daniellehrner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/daniellehrner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/daniellehrner/subscriptions",
    "organizations_url": "https://api.github.com/users/daniellehrner/orgs",
    "repos_url": "https://api.github.com/users/daniellehrner/repos",
    "events_url": "https://api.github.com/users/daniellehrner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/daniellehrner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2190/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2190/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/932389950",
    "html_url": "https://github.com/hyperledger/besu/issues/2190#issuecomment-932389950",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2190",
    "id": 932389950,
    "node_id": "IC_kwDODE2jmc43kyQ-",
    "user": {
      "login": "geekcharming",
      "id": 19409969,
      "node_id": "MDQ6VXNlcjE5NDA5OTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19409969?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geekcharming",
      "html_url": "https://github.com/geekcharming",
      "followers_url": "https://api.github.com/users/geekcharming/followers",
      "following_url": "https://api.github.com/users/geekcharming/following{/other_user}",
      "gists_url": "https://api.github.com/users/geekcharming/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geekcharming/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geekcharming/subscriptions",
      "organizations_url": "https://api.github.com/users/geekcharming/orgs",
      "repos_url": "https://api.github.com/users/geekcharming/repos",
      "events_url": "https://api.github.com/users/geekcharming/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geekcharming/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T16:51:02Z",
    "updated_at": "2021-10-01T16:51:02Z",
    "author_association": "NONE",
    "body": "I would like to work on this issue",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/932389950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/932535666",
    "html_url": "https://github.com/hyperledger/besu/issues/2190#issuecomment-932535666",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2190",
    "id": 932535666,
    "node_id": "IC_kwDODE2jmc43lV1y",
    "user": {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T20:38:19Z",
    "updated_at": "2021-10-01T20:38:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is the localized message from the OS, or from the underlying JRE? @daniel-iobuilders was this test run with an internationalized JRE by any chance?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/932535666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/935838695",
    "html_url": "https://github.com/hyperledger/besu/issues/2190#issuecomment-935838695",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2190",
    "id": 935838695,
    "node_id": "IC_kwDODE2jmc43x8Pn",
    "user": {
      "login": "daniel-iobuilders",
      "id": 44777168,
      "node_id": "MDQ6VXNlcjQ0Nzc3MTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/44777168?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/daniel-iobuilders",
      "html_url": "https://github.com/daniel-iobuilders",
      "followers_url": "https://api.github.com/users/daniel-iobuilders/followers",
      "following_url": "https://api.github.com/users/daniel-iobuilders/following{/other_user}",
      "gists_url": "https://api.github.com/users/daniel-iobuilders/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/daniel-iobuilders/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daniel-iobuilders/subscriptions",
      "organizations_url": "https://api.github.com/users/daniel-iobuilders/orgs",
      "repos_url": "https://api.github.com/users/daniel-iobuilders/repos",
      "events_url": "https://api.github.com/users/daniel-iobuilders/events{/privacy}",
      "received_events_url": "https://api.github.com/users/daniel-iobuilders/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-06T09:31:16Z",
    "updated_at": "2021-10-06T09:31:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "The setup was:\r\nOS: Ubuntu 20.04\r\nJDK: [openjdk-11](https://packages.ubuntu.com/focal/openjdk-11-jdk)\r\n\r\nI looked for it, but I cannot find the information if this version of Java is internationalized or not.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/935838695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1019568973",
    "html_url": "https://github.com/hyperledger/besu/issues/2190#issuecomment-1019568973",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2190",
    "id": 1019568973,
    "node_id": "IC_kwDODE2jmc48xWNN",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T21:15:04Z",
    "updated_at": "2022-01-23T21:15:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "👋  Hi @geekcharming are you still interested in working on this?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1019568973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

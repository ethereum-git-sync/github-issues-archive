{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/5813/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/5813/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/5813/events",
  "html_url": "https://github.com/hyperledger/besu/issues/5813",
  "id": 1869682403,
  "node_id": "I_kwDODE2jmc5vcRbj",
  "number": 5813,
  "title": "Free gas network: upfront cost exceeds account balance",
  "user": {
    "login": "gomezgoiri",
    "id": 1846049,
    "node_id": "MDQ6VXNlcjE4NDYwNDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1846049?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gomezgoiri",
    "html_url": "https://github.com/gomezgoiri",
    "followers_url": "https://api.github.com/users/gomezgoiri/followers",
    "following_url": "https://api.github.com/users/gomezgoiri/following{/other_user}",
    "gists_url": "https://api.github.com/users/gomezgoiri/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gomezgoiri/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gomezgoiri/subscriptions",
    "organizations_url": "https://api.github.com/users/gomezgoiri/orgs",
    "repos_url": "https://api.github.com/users/gomezgoiri/repos",
    "events_url": "https://api.github.com/users/gomezgoiri/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gomezgoiri/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "joshuafernandes",
    "id": 3722503,
    "node_id": "MDQ6VXNlcjM3MjI1MDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/joshuafernandes",
    "html_url": "https://github.com/joshuafernandes",
    "followers_url": "https://api.github.com/users/joshuafernandes/followers",
    "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
    "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
    "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
    "repos_url": "https://api.github.com/users/joshuafernandes/repos",
    "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "joshuafernandes",
      "id": 3722503,
      "node_id": "MDQ6VXNlcjM3MjI1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshuafernandes",
      "html_url": "https://github.com/joshuafernandes",
      "followers_url": "https://api.github.com/users/joshuafernandes/followers",
      "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
      "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
      "repos_url": "https://api.github.com/users/joshuafernandes/repos",
      "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-08-28T12:37:54Z",
  "updated_at": "2023-09-01T09:14:51Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nI want to deploy a smart contract in a [free gas private network](https://besu.hyperledger.org/stable/private-networks/how-to/configure/free-gas) with Besu's latest stable version (23.7.1). Besu answers `Upfront cost exceeds account balance` error.\r\n\r\n### Acceptance Criteria\r\n* The private network uses London fork or later (I can deploy it if I modify the genesis file to use a previous fork)\r\n* The balance of the account used to deploy a contract has a balance of zero\r\n* The smart contract is successfully deployed\r\n\r\n### Steps to Reproduce (Bug)\r\nI've found this error with many configurations (IBFT2, QBFT, different Besu versions), but here I'll describe the simplest way to reproduce it:\r\n\r\n1. Create a free gas network using [Quorum-dev-quickstart](https://github.com/Consensys/quorum-dev-quickstart): `npx quorum-dev-quickstart@latest --clientType besu --orchestrate false --quorumKeyManager false --privacy false --monitoring none --blockscout false`\r\n2. Edit `.env` file to use `BESU_VERSION=23.7.1`.\r\n3. (Optional, doesn't make a difference) Adjust the [block size](https://besu.hyperledger.org/stable/private-networks/how-to/configure/free-gas#1-set-the-block-size) and [contract size](https://besu.hyperledger.org/stable/private-networks/how-to/configure/free-gas#2-set-the-contract-size) in the genesis file.\r\n4. Run the network: `docker compose up -d`\r\n5. Deploy a smart contract. To test it, you can use a sample Truffle project as suggested in the _SC info_ section.\r\n\r\n**Expected behavior:** Get information about the deployed contracts and their addresses.\r\n\r\n**Actual behavior:** Truffle returns the following error: `Upfront cost exceeds account balance`.\r\n\r\n**Frequency:** Always\r\n\r\n### Logs (if a bug)\r\n\r\nI haven't identify any relevant logs in Besu.\r\n\r\nIn the current _quorum-dev-quickstart_ Besu version (23.4.1) I saw [this error](https://github.com/hyperledger/besu/issues/5528), but it is apparently fixed.\r\n\r\n### Versions\r\n* Software version: 23.7.1\r\n\r\n### Smart contract information\r\n\r\nI've seen the error deploying many different smart contracts, but you could use this one to test it:\r\n\r\n* Solidity version: ^0.8.13\r\n* Repo with minimal set of deployable/reproducible contract code: [Metacoin](https://trufflesuite.com/boxes/metacoin/).\r\n\r\nConfiguration:\r\n\r\n1. Install [dotenv](https://www.npmjs.com/package/dotenv) and [HDWalletProvider](https://www.npmjs.com/package/@truffle/hdwallet-provider).\r\n2. Uncomment the two related lines in `truffle-config.js`\r\n3. Create a _.env_ file with a property called `DEPLOYER_MNEMONIC` and a random mnemonic.\r\n4. Add the following network to  `truffle-config.js` (with the recommended [configuration guidelines](https://besu.hyperledger.org/stable/private-networks/how-to/configure/free-gas#configure-free-gas-in-truffle) or not, it doesn't make a difference).\r\n5. Run  `npx truffle migrate --network local`\r\n\r\n```javascript\r\n    local: {\r\n      provider: () =>\r\n        new HDWalletProvider({\r\n          mnemonic: process.env.DEPLOYER_MNEMONIC,\r\n          providerOrUrl: \"http://localhost:8545\", // \"https://node1.ethereum.bclab.dev\"\r\n        }),\r\n      network_id: \"*\",\r\n    },\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/5813/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/5813/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696521072",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1696521072",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1696521072,
    "node_id": "IC_kwDODE2jmc5lHttw",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-28T22:38:02Z",
    "updated_at": "2023-08-28T22:38:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gomezgoiri Can you share the actual genesis file that is being used please?\r\n\r\nI suspect it's not got the `\"zeroBaseFee\": true` config, see https://besu.hyperledger.org/stable/private-networks/how-to/configure/free-gas#4-enable-zero-base-fee-if-using-london-fork-or-later\r\n\r\nNote, the latest version of quickstart should have it already: https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/config/besu/QBFTgenesis.json#L14-L17",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696521072/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696941714",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1696941714",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1696941714,
    "node_id": "IC_kwDODE2jmc5lJUaS",
    "user": {
      "login": "gomezgoiri",
      "id": 1846049,
      "node_id": "MDQ6VXNlcjE4NDYwNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1846049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gomezgoiri",
      "html_url": "https://github.com/gomezgoiri",
      "followers_url": "https://api.github.com/users/gomezgoiri/followers",
      "following_url": "https://api.github.com/users/gomezgoiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/gomezgoiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gomezgoiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gomezgoiri/subscriptions",
      "organizations_url": "https://api.github.com/users/gomezgoiri/orgs",
      "repos_url": "https://api.github.com/users/gomezgoiri/repos",
      "events_url": "https://api.github.com/users/gomezgoiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gomezgoiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T07:48:00Z",
    "updated_at": "2023-08-29T07:48:00Z",
    "author_association": "NONE",
    "body": "I haven't changed the genesis file.\r\n\r\nBy default, it takes the default genesis file [you commented](https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/config/besu/QBFTgenesis.json).\r\n\r\nAnyway, if you change `BESU_CONS_ALGO` to IBFT it will use [this one](https://github.com/Consensys/quorum-dev-quickstart/blob/master/files/besu/config/besu/IBFTgenesis.json) instead, with the same result.\r\n\r\nSo I'd say that either default genesis files in _quorum-dev-quickstart_ are not ok, or the problem lies somewhere else.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1696941714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1698207805",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1698207805",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1698207805,
    "node_id": "IC_kwDODE2jmc5lOJg9",
    "user": {
      "login": "joshuafernandes",
      "id": 3722503,
      "node_id": "MDQ6VXNlcjM3MjI1MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3722503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/joshuafernandes",
      "html_url": "https://github.com/joshuafernandes",
      "followers_url": "https://api.github.com/users/joshuafernandes/followers",
      "following_url": "https://api.github.com/users/joshuafernandes/following{/other_user}",
      "gists_url": "https://api.github.com/users/joshuafernandes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/joshuafernandes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/joshuafernandes/subscriptions",
      "organizations_url": "https://api.github.com/users/joshuafernandes/orgs",
      "repos_url": "https://api.github.com/users/joshuafernandes/repos",
      "events_url": "https://api.github.com/users/joshuafernandes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/joshuafernandes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T22:05:04Z",
    "updated_at": "2023-08-29T22:06:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @gomezgoiri I've got an example of doing this as well as extending the contract for use in a DApp. \r\n\r\nOn version 0.2.3 of the quickstart look up the `dapps/quorumToken` folder. Docs here https://besu.hyperledger.org/development/private-networks/tutorials/quickstart#smart-contract-and-dapp-usage \r\n\r\nAlso would recommend using hardhat instead of truffle. I've used the genesis file as is with out mods",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1698207805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1700824651",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1700824651",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1700824651,
    "node_id": "IC_kwDODE2jmc5lYIZL",
    "user": {
      "login": "gomezgoiri",
      "id": 1846049,
      "node_id": "MDQ6VXNlcjE4NDYwNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1846049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gomezgoiri",
      "html_url": "https://github.com/gomezgoiri",
      "followers_url": "https://api.github.com/users/gomezgoiri/followers",
      "following_url": "https://api.github.com/users/gomezgoiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/gomezgoiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gomezgoiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gomezgoiri/subscriptions",
      "organizations_url": "https://api.github.com/users/gomezgoiri/orgs",
      "repos_url": "https://api.github.com/users/gomezgoiri/repos",
      "events_url": "https://api.github.com/users/gomezgoiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gomezgoiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-31T10:59:09Z",
    "updated_at": "2023-08-31T10:59:28Z",
    "author_association": "NONE",
    "body": "Hi @joshuafernandes , thanks for the reference.\r\n\r\nSo far I've been using Truffle without problems with other versions of Besu (actually, even with the current one if london fork is not added to the genesis file), but I'll consider to migrate to hardhat if it is the only way to avoid issue I described above.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1700824651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1701726293",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1701726293",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1701726293,
    "node_id": "IC_kwDODE2jmc5lbkhV",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-31T20:19:43Z",
    "updated_at": "2023-08-31T20:19:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "> So far I've been using Truffle without problems with other versions of Besu (actually, even with the current one if london fork is not added to the genesis file), but I'll consider to migrate to hardhat if it is the only way to avoid issue I described above.\r\n\r\n@gomezgoiri Could you share the exact scripts/commands that are failing with truffle please so we can try to recreate? I believe the only issues we've seen so far have been with quickstart config/docs or the smart contract scripts. It is not clear there is an issue with Besu itself yet.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1701726293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1701729455",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1701729455",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1701729455,
    "node_id": "IC_kwDODE2jmc5lblSv",
    "user": {
      "login": "siladu",
      "id": 2893793,
      "node_id": "MDQ6VXNlcjI4OTM3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2893793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siladu",
      "html_url": "https://github.com/siladu",
      "followers_url": "https://api.github.com/users/siladu/followers",
      "following_url": "https://api.github.com/users/siladu/following{/other_user}",
      "gists_url": "https://api.github.com/users/siladu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/siladu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/siladu/subscriptions",
      "organizations_url": "https://api.github.com/users/siladu/orgs",
      "repos_url": "https://api.github.com/users/siladu/repos",
      "events_url": "https://api.github.com/users/siladu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/siladu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-31T20:22:31Z",
    "updated_at": "2023-08-31T20:22:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Could you share the exact scripts/commands that are failing with truffle please so we can try to recreate? \r\n\r\nMaybe you already did in the description, in which case ignore this :)\r\n\r\n@joshuafernandes can confirm but there might be an issue with the quickstart scripts when using solc 0.8+",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1701729455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1702291689",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1702291689",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1702291689,
    "node_id": "IC_kwDODE2jmc5ldujp",
    "user": {
      "login": "gomezgoiri",
      "id": 1846049,
      "node_id": "MDQ6VXNlcjE4NDYwNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1846049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gomezgoiri",
      "html_url": "https://github.com/gomezgoiri",
      "followers_url": "https://api.github.com/users/gomezgoiri/followers",
      "following_url": "https://api.github.com/users/gomezgoiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/gomezgoiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gomezgoiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gomezgoiri/subscriptions",
      "organizations_url": "https://api.github.com/users/gomezgoiri/orgs",
      "repos_url": "https://api.github.com/users/gomezgoiri/repos",
      "events_url": "https://api.github.com/users/gomezgoiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gomezgoiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T07:22:47Z",
    "updated_at": "2023-09-01T07:22:47Z",
    "author_association": "NONE",
    "body": "> @gomezgoiri Could you share the exact scripts/commands that are failing with truffle please so we can try to recreate?\r\n\r\nAs you said, I'd already shared the steps to reproduce it.\r\n\r\nAnyway, I've recreated and uploaded the sample Truffle project for your convenience  [here](https://github.com/gomezgoiri/metacoin_deployment_error).\r\n\r\nFor comparison, I've also added the Hardhat configuration to the project. Hardhat does allow to deploy the contract.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1702291689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1702432221",
    "html_url": "https://github.com/hyperledger/besu/issues/5813#issuecomment-1702432221",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5813",
    "id": 1702432221,
    "node_id": "IC_kwDODE2jmc5leQ3d",
    "user": {
      "login": "gomezgoiri",
      "id": 1846049,
      "node_id": "MDQ6VXNlcjE4NDYwNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1846049?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gomezgoiri",
      "html_url": "https://github.com/gomezgoiri",
      "followers_url": "https://api.github.com/users/gomezgoiri/followers",
      "following_url": "https://api.github.com/users/gomezgoiri/following{/other_user}",
      "gists_url": "https://api.github.com/users/gomezgoiri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gomezgoiri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gomezgoiri/subscriptions",
      "organizations_url": "https://api.github.com/users/gomezgoiri/orgs",
      "repos_url": "https://api.github.com/users/gomezgoiri/repos",
      "events_url": "https://api.github.com/users/gomezgoiri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gomezgoiri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-01T09:14:51Z",
    "updated_at": "2023-09-01T09:14:51Z",
    "author_association": "NONE",
    "body": "BTW, I'm also experimenting with [Polygon Supernet](https://wiki.polygon.technology/docs/category/build-a-supernet/) over the same Besu gas zero network and I've experienced this `Upfront cost exceeds account balance` error too.\r\n\r\nI was trying to send a transaction signed by an account with zero balance (note that `rootchain fund` sends a custom ERC20 token, not the native coin):\r\n\r\n```bash\r\npolygon-edge rootchain fund --private-key [priv-key-account-with-zero-balance]\r\n99 --json-rpc http://10.0.0.11:8545 --addresses 0x77C1eedFf656477462ce16084fE5Dc7F8a2507B9 --amounts 1000 --\r\nstake-token 0x67311C86194748CBb1F4f0d69E684Ab7FeE9C62E --mint\r\n```\r\n\r\nThis new scenario is more complex for me to explain, but what I want to suggest is that this error might be affecting more tools than Truffle (in this case, [polygon-edge](https://github.com/0xPolygon/polygon-edge)).",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1702432221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2905",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2905/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2905/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2905/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2905",
  "id": 1026166241,
  "node_id": "I_kwDODE2jmc49Kg3h",
  "number": 2905,
  "title": "Error: connect ECONNREFUSED 127.0.0.1:8545",
  "user": {
    "login": "damianlluch",
    "id": 1463804,
    "node_id": "MDQ6VXNlcjE0NjM4MDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1463804?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/damianlluch",
    "html_url": "https://github.com/damianlluch",
    "followers_url": "https://api.github.com/users/damianlluch/followers",
    "following_url": "https://api.github.com/users/damianlluch/following{/other_user}",
    "gists_url": "https://api.github.com/users/damianlluch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/damianlluch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/damianlluch/subscriptions",
    "organizations_url": "https://api.github.com/users/damianlluch/orgs",
    "repos_url": "https://api.github.com/users/damianlluch/repos",
    "events_url": "https://api.github.com/users/damianlluch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/damianlluch/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-10-14T09:21:50Z",
  "updated_at": "2021-10-18T07:57:32Z",
  "closed_at": "2021-10-18T07:57:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nI have set up Ethash nodes for public transactions, and even configured with Tessera for private transactions. Question, the API connection has stopped working.\r\n\r\n\r\n\r\n### Acceptance Criteria\r\n* [Criteria 1]\r\n\r\n### Steps to Reproduce (Bug)\r\nExecute with this commands\r\n\r\n**Nodes for public transactions:**\r\n\r\nNode 1\r\n```\r\n./bin/besu\r\n--data-path=data \\\r\n--genesis-file=ethash/privateNetworkGenesis.json \\\r\n--miner-enabled \\\r\n--miner-coinbase $1 \\\r\n--rpc-http-enabled \\\r\n--host-allowlist=\"*\" \\\r\n--rpc-http-cors-origins=\"all\"\r\n/\r\n```\r\nNode 2:\r\n``` \r\ncd bin\r\n./besu \\\r\n--data-path=data \\\r\n--genesis-file=../ethash/privateNetworkGenesis.json \\\r\n--bootnodes=$1 \\\r\n--p2p-port=30304\r\n/\r\n```\r\n\r\n**Nodes for private transactions:**\r\n\r\nNode 1\r\n```\r\n./bin/besu\r\n--data-path=data \\\r\n--rpc-http-api=[\"ADMIN\",\"ETH\",\"NET\",\"CLIQUE\",\"WEB3\",\"TXPOOL\"] \\\r\n--genesis-file=ethash/privateNetworkGenesis.json \\\r\n--miner-enabled \\\r\n--miner-coinbase $1 \\\r\n--rpc-http-enabled \\\r\n--rpc-http-host=\"127.0.0.1\" \\\r\n--rpc-http-port=8545 \\\r\n--host-allowlist=\"*\" \\\r\n--privacy-enabled \\\r\n--privacy-url=http://127.0.0.1:9102 \\\r\n--privacy-public-key-file=ethash/Node-1/Tessera/nodeKey.pub \\\r\n--min-gas-price=0 \\\r\n--rpc-http-cors-origins=\"all\"\r\n/\r\n```\r\n\r\nNode 2\r\n\r\n```\r\ncd bin\r\n./besu \\\r\n--data-path=data \\\r\n--genesis-file=../ethash/privateNetworkGenesis.json \\\r\n--bootnodes=$1 \\\r\n--p2p-port=30304 \\\r\n--rpc-http-enabled \\\r\n--rpc-http-host=\"127.0.0.1\" \\\r\n--rpc-http-api=ETH,NET,IBFT,EEA,PRIV \\\r\n--host-allowlist=\"*\" \\\r\n--rpc-http-cors-origins=\"all\" \\\r\n--rpc-http-port=8545 \\\r\n--privacy-enabled \\\r\n--privacy-url=http://127.0.0.1:9202 \\\r\n--privacy-public-key-file=../ethash/Node-1/Tessera/nodeKey.pub \\\r\n--min-gas-price=0\r\n/\r\n\r\n```\r\n\r\n\r\n\r\n**Expected behavior:** \r\n\r\nWhen I first set up the project, the API was working perfectly. Then I was adding all the Tessera part, and maybe I touched something that I shouldn't... but I think it must be in how the arguments are passed in the call to raise the node.\r\nThe nodes seem to work correctly, both the besu and the tessera ones.\r\n\r\n\r\n**Actual behavior:**\r\n\r\nI am refused connection to the API and Metamask on localhost.\r\n\r\n\r\n\r\n### Versions (Add all that apply)\r\n* Software version: 21.7.4\r\n* Java version: 11.0.11\r\n* OS Name & Version: Ubuntu 20.04.3 LTS\r\n* Kernel Version:5.11.0-37-generic\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version: [`docker version`]\r\n* Cloud VM, type, size: [Amazon Web Services I3-large]\r\n\r\n### Additional Information\r\n\r\n",
  "closed_by": {
    "login": "damianlluch",
    "id": 1463804,
    "node_id": "MDQ6VXNlcjE0NjM4MDQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1463804?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/damianlluch",
    "html_url": "https://github.com/damianlluch",
    "followers_url": "https://api.github.com/users/damianlluch/followers",
    "following_url": "https://api.github.com/users/damianlluch/following{/other_user}",
    "gists_url": "https://api.github.com/users/damianlluch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/damianlluch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/damianlluch/subscriptions",
    "organizations_url": "https://api.github.com/users/damianlluch/orgs",
    "repos_url": "https://api.github.com/users/damianlluch/repos",
    "events_url": "https://api.github.com/users/damianlluch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/damianlluch/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2905/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2905/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/943258309",
    "html_url": "https://github.com/hyperledger/besu/issues/2905#issuecomment-943258309",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2905",
    "id": 943258309,
    "node_id": "IC_kwDODE2jmc44OPrF",
    "user": {
      "login": "damianlluch",
      "id": 1463804,
      "node_id": "MDQ6VXNlcjE0NjM4MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1463804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/damianlluch",
      "html_url": "https://github.com/damianlluch",
      "followers_url": "https://api.github.com/users/damianlluch/followers",
      "following_url": "https://api.github.com/users/damianlluch/following{/other_user}",
      "gists_url": "https://api.github.com/users/damianlluch/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/damianlluch/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/damianlluch/subscriptions",
      "organizations_url": "https://api.github.com/users/damianlluch/orgs",
      "repos_url": "https://api.github.com/users/damianlluch/repos",
      "events_url": "https://api.github.com/users/damianlluch/events{/privacy}",
      "received_events_url": "https://api.github.com/users/damianlluch/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-14T11:14:49Z",
    "updated_at": "2021-10-14T11:14:49Z",
    "author_association": "NONE",
    "body": "I have been able to solve it, if you run nodes only with public transactions, stop the nodes, and then run the nodes with Tessera support, the API gives error, the same if you proceed the other way around. You have to delete the cache and data folders.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/943258309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

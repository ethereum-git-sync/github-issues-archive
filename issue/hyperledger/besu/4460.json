{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4460",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4460/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4460/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4460/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4460",
  "id": 1391701586,
  "node_id": "I_kwDODE2jmc5S865S",
  "number": 4460,
  "title": "Besu 22.7.4 created 2 blocks with 5-8% gas utilization",
  "user": {
    "login": "nhlroyrocks",
    "id": 83127437,
    "node_id": "MDQ6VXNlcjgzMTI3NDM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/83127437?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nhlroyrocks",
    "html_url": "https://github.com/nhlroyrocks",
    "followers_url": "https://api.github.com/users/nhlroyrocks/followers",
    "following_url": "https://api.github.com/users/nhlroyrocks/following{/other_user}",
    "gists_url": "https://api.github.com/users/nhlroyrocks/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nhlroyrocks/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nhlroyrocks/subscriptions",
    "organizations_url": "https://api.github.com/users/nhlroyrocks/orgs",
    "repos_url": "https://api.github.com/users/nhlroyrocks/repos",
    "events_url": "https://api.github.com/users/nhlroyrocks/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nhlroyrocks/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4328706977,
      "node_id": "LA_kwDODE2jmc8AAAABAgLToQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamChupa",
      "name": "TeamChupa",
      "color": "fbca04",
      "default": false,
      "description": "GH issues worked on by Chupacabara Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "fab-10",
    "id": 91944855,
    "node_id": "U_kgDOBXr3lw",
    "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fab-10",
    "html_url": "https://github.com/fab-10",
    "followers_url": "https://api.github.com/users/fab-10/followers",
    "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
    "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
    "organizations_url": "https://api.github.com/users/fab-10/orgs",
    "repos_url": "https://api.github.com/users/fab-10/repos",
    "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fab-10/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fab-10",
      "id": 91944855,
      "node_id": "U_kgDOBXr3lw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-10",
      "html_url": "https://github.com/fab-10",
      "followers_url": "https://api.github.com/users/fab-10/followers",
      "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-10/orgs",
      "repos_url": "https://api.github.com/users/fab-10/repos",
      "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-10/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-09-30T01:48:14Z",
  "updated_at": "2022-11-11T15:57:01Z",
  "closed_at": "2022-11-11T15:57:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nAs an validator, I want besu to create blocks at least in the ballpark of 50% full so that block space is not wasted and greater transaction fees may be collected. \r\n\r\n### Acceptance Criteria\r\nproduce blocks with 50-100% gas utilization\r\n\r\n### Steps to Reproduce (Bug)\r\n1. propose a block running besu execution client\r\n    a. [Nearly empty block](https://etherscan.io/block/15637228)\r\n    b. [Another nearly empty block within 12 hours of the first](https://etherscan.io/block/15640450)\r\n\r\n**Expected behavior:** [What you expect to happen]\r\nfuller blocks like the ones before and after my blocks.\r\nbefore:  https://etherscan.io/block/15637227\r\n   after:  https://etherscan.io/block/15637229\r\nbefore:  https://etherscan.io/block/15640449\r\n   after:  https://etherscan.io/block/15640451\r\n\r\n**Actual behavior:** [What actually happens]\r\n 1. [Nearly empty block](https://etherscan.io/block/15637228)\r\n 2. [Another nearly empty block within 12 hours of the first](https://etherscan.io/block/15640450)\r\n \r\n**Frequency:** [What percentage of the time does it occur?]\r\n100% 2/2\r\n\r\n### Versions (Add all that apply)\r\n* Software version: besu/v22.7.4/linux-x86_64/openjdk-java-11\r\n\r\n* Java version: \r\nopenjdk version \"11.0.16\" 2022-07-19\r\nOpenJDK Runtime Environment (build 11.0.16+8-post-Ubuntu-0ubuntu120.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.16+8-post-Ubuntu-0ubuntu120.04, mixed mode, sharing)\r\n\r\n* OS Name & Version: \r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=20.04\r\nDISTRIB_CODENAME=focal\r\nDISTRIB_DESCRIPTION=\"Ubuntu 20.04.4 LTS\"\r\nNAME=\"Ubuntu\"\r\nVERSION=\"20.04.4 LTS (Focal Fossa)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 20.04.4 LTS\"\r\nVERSION_ID=\"20.04\"\r\nHOME_URL=\"https://www.ubuntu.com/\"\r\nSUPPORT_URL=\"https://help.ubuntu.com/\"\r\nBUG_REPORT_URL=\"https://bugs.launchpad.net/ubuntu/\"\r\nPRIVACY_POLICY_URL=\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\"\r\nVERSION_CODENAME=focal\r\nUBUNTU_CODENAME=focal\r\n \r\n* Kernel Version: Linux ogserver 5.4.0-124-generic #140-Ubuntu SMP Thu Aug 4 02:23:37 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\r\n* \r\n\r\n### Additional Information (Add any of the following or anything else that may be relevant)\r\n* Besu setup info - genesis file, config options\r\n[Unit]\r\nDescription=Besu Execution Client (Mainnet)\r\nWants=network-online.target\r\nAfter=network-online.target\r\n[Service]\r\nUser=besu\r\nGroup=besu\r\nType=simple\r\nRestart=always\r\nRestartSec=5\r\nEnvironment=\"JAVA_OPTS=-Xmx8g\"\r\nExecStart=/usr/local/bin/besu/bin/besu \\\r\n   --network=mainnet \\\r\n  --sync-mode=X_SNAP \\\r\n  --data-path=/var/lib/besu \\\r\n  --data-storage-format=BONSAI \\\r\n  --engine-jwt-secret=/var/lib/jwtsecret/jwt.hex\r\n[Install]\r\nWantedBy=multi-user.target\r\n\r\n* System info - \r\n32 GB RAM\r\nIntel(R) Core(TM) i7-9700K CPU @ 3.60GHz",
  "closed_by": {
    "login": "fab-10",
    "id": 91944855,
    "node_id": "U_kgDOBXr3lw",
    "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fab-10",
    "html_url": "https://github.com/fab-10",
    "followers_url": "https://api.github.com/users/fab-10/followers",
    "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
    "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
    "organizations_url": "https://api.github.com/users/fab-10/orgs",
    "repos_url": "https://api.github.com/users/fab-10/repos",
    "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fab-10/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4460/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4460/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1263358291",
    "html_url": "https://github.com/hyperledger/besu/issues/4460#issuecomment-1263358291",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4460",
    "id": 1263358291,
    "node_id": "IC_kwDODE2jmc5LTVFT",
    "user": {
      "login": "vanjan",
      "id": 130294,
      "node_id": "MDQ6VXNlcjEzMDI5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/130294?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vanjan",
      "html_url": "https://github.com/vanjan",
      "followers_url": "https://api.github.com/users/vanjan/followers",
      "following_url": "https://api.github.com/users/vanjan/following{/other_user}",
      "gists_url": "https://api.github.com/users/vanjan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vanjan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vanjan/subscriptions",
      "organizations_url": "https://api.github.com/users/vanjan/orgs",
      "repos_url": "https://api.github.com/users/vanjan/repos",
      "events_url": "https://api.github.com/users/vanjan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vanjan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-30T09:51:48Z",
    "updated_at": "2022-09-30T09:51:48Z",
    "author_association": "NONE",
    "body": "I'm seeing the same issue, albeit with higher gas utilisation (but still unacceptably low)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1263358291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1307013958",
    "html_url": "https://github.com/hyperledger/besu/issues/4460#issuecomment-1307013958",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4460",
    "id": 1307013958,
    "node_id": "IC_kwDODE2jmc5N53NG",
    "user": {
      "login": "fab-10",
      "id": 91944855,
      "node_id": "U_kgDOBXr3lw",
      "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-10",
      "html_url": "https://github.com/fab-10",
      "followers_url": "https://api.github.com/users/fab-10/followers",
      "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-10/orgs",
      "repos_url": "https://api.github.com/users/fab-10/repos",
      "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-10/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-08T10:53:44Z",
    "updated_at": "2022-11-08T10:53:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Release 22.10.0 has a first improvements that result in bigger blocks, please report your exeperience.\r\nWe are currently monitoring and working on further improvements.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1307013958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1308022305",
    "html_url": "https://github.com/hyperledger/besu/issues/4460#issuecomment-1308022305",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4460",
    "id": 1308022305,
    "node_id": "IC_kwDODE2jmc5N9tYh",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-09T00:25:57Z",
    "updated_at": "2022-11-09T00:25:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can confirm that we're consistently seeing full blocks now.  Important note that EIP1559 targets an average of 50% full blocks. There can be variation around that so it's not unexpected to have some blocks with block 50% utilisation (the baseFee will then be reduced to allow lower priced transactions in and increase demand for block space), it just averages 50% over the long term.\r\n\r\nSince upgrading to 22.10.1 our teku nodes are seeing a range of 49%-95% full blocks which is significantly better than expected. I'd expect to see the average drop to around 50% over a longer period of time though.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1308022305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

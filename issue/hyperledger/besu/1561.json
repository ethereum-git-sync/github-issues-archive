{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1561",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1561/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1561/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1561/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1561",
  "id": 742060147,
  "node_id": "MDU6SXNzdWU3NDIwNjAxNDc=",
  "number": 1561,
  "title": "Full Loop ENR support",
  "user": {
    "login": "shemnon",
    "id": 38109,
    "node_id": "MDQ6VXNlcjM4MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shemnon",
    "html_url": "https://github.com/shemnon",
    "followers_url": "https://api.github.com/users/shemnon/followers",
    "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
    "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
    "organizations_url": "https://api.github.com/users/shemnon/orgs",
    "repos_url": "https://api.github.com/users/shemnon/repos",
    "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shemnon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "davemec",
    "id": 1975126,
    "node_id": "MDQ6VXNlcjE5NzUxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1975126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davemec",
    "html_url": "https://github.com/davemec",
    "followers_url": "https://api.github.com/users/davemec/followers",
    "following_url": "https://api.github.com/users/davemec/following{/other_user}",
    "gists_url": "https://api.github.com/users/davemec/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davemec/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davemec/subscriptions",
    "organizations_url": "https://api.github.com/users/davemec/orgs",
    "repos_url": "https://api.github.com/users/davemec/repos",
    "events_url": "https://api.github.com/users/davemec/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davemec/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "davemec",
      "id": 1975126,
      "node_id": "MDQ6VXNlcjE5NzUxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1975126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davemec",
      "html_url": "https://github.com/davemec",
      "followers_url": "https://api.github.com/users/davemec/followers",
      "following_url": "https://api.github.com/users/davemec/following{/other_user}",
      "gists_url": "https://api.github.com/users/davemec/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davemec/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davemec/subscriptions",
      "organizations_url": "https://api.github.com/users/davemec/orgs",
      "repos_url": "https://api.github.com/users/davemec/repos",
      "events_url": "https://api.github.com/users/davemec/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davemec/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-11-13T01:50:28Z",
  "updated_at": "2020-12-14T18:04:47Z",
  "closed_at": "2020-12-14T18:04:47Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "### Description\nAs a node operator, I want full loop ENR support with DNS and P2P discovery so that finding and becoming a Goerli node is less awful.\n\nEvery 8 hours the Ethereum Foundation runs a sweeper that polls the Distributed Hash Table of the DNS discovery and updates the ENR records in their DNS resolver, and the results are stored in https://github.com/ethereum/discv4-dns-lists\n\nUltimately we want to support ENS so we both gather nodes from that DNS list to boost our discovery efforts as well as add info to our discovery packets so that the EF adds us to that list of nodes.\n\n### Acceptance Criteria\n* Besu nodes start showing up on https://github.com/ethereum/discv4-dns-lists\n* Besu nodes use DNS lookup for mainnet, rinkeby, ropsten, and goerli to seed the p2p discovery pool and as initial peer candidates.\n\n### Relevant Standards \n* [EIP-778: Ethereum Node Records (ENR)](https://eips.ethereum.org/EIPS/eip-778)\n  * Probably implemented by https://github.com/ConsenSys/discovery already, just need to integrate\n* [EIP-868: Node Discovery v4 ENR Extension](https://eips.ethereum.org/EIPS/eip-868)\n* [EIP-1459: Node Discovery via DNS](https://eips.ethereum.org/EIPS/eip-1459)\n\nThere are roughly 3 things we need to do:\n\n1. Create and update local ENR entries for the node.  This will likely involve storing them in the key value store between runs and generating a new record in case things change.  There are likely corner cases around node keys changing between runs.\n1. Add the current ENR record information to the P2P discovery broadcasts (EIP-868).  \n1. Seed the discovery manager with results from the DNS entries  at the discv4-dns-lists.  Treat these as query responses, not as static nodes or boot nodes.  Although when we do a boot node refresh we may want to do a DNS refresh.  We my not want to dump all of them into discovery immediately but perhaps dribble them in 25 at a time or so.\n\n2 and 3 can swap order if desired\n",
  "closed_by": {
    "login": "davemec",
    "id": 1975126,
    "node_id": "MDQ6VXNlcjE5NzUxMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1975126?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/davemec",
    "html_url": "https://github.com/davemec",
    "followers_url": "https://api.github.com/users/davemec/followers",
    "following_url": "https://api.github.com/users/davemec/following{/other_user}",
    "gists_url": "https://api.github.com/users/davemec/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/davemec/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/davemec/subscriptions",
    "organizations_url": "https://api.github.com/users/davemec/orgs",
    "repos_url": "https://api.github.com/users/davemec/repos",
    "events_url": "https://api.github.com/users/davemec/events{/privacy}",
    "received_events_url": "https://api.github.com/users/davemec/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1561/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1561/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/726474506",
    "html_url": "https://github.com/hyperledger/besu/issues/1561#issuecomment-726474506",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1561",
    "id": 726474506,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjQ3NDUwNg==",
    "user": {
      "login": "atoulme",
      "id": 16758,
      "node_id": "MDQ6VXNlcjE2NzU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/atoulme",
      "html_url": "https://github.com/atoulme",
      "followers_url": "https://api.github.com/users/atoulme/followers",
      "following_url": "https://api.github.com/users/atoulme/following{/other_user}",
      "gists_url": "https://api.github.com/users/atoulme/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/atoulme/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/atoulme/subscriptions",
      "organizations_url": "https://api.github.com/users/atoulme/orgs",
      "repos_url": "https://api.github.com/users/atoulme/repos",
      "events_url": "https://api.github.com/users/atoulme/events{/privacy}",
      "received_events_url": "https://api.github.com/users/atoulme/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-13T02:54:32Z",
    "updated_at": "2020-11-13T02:54:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "I propose to adopt Tuweni DNS ENR reader and ENR classes.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/726474506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/726781244",
    "html_url": "https://github.com/hyperledger/besu/issues/1561#issuecomment-726781244",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1561",
    "id": 726781244,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjc4MTI0NA==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-13T14:02:14Z",
    "updated_at": "2020-11-13T14:02:14Z",
    "author_association": "MEMBER",
    "body": "What we get from teku's discovery library is (a) teku alignment and (b) a tested discovery v5 impl for Eth2 integration.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/726781244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/744612685",
    "html_url": "https://github.com/hyperledger/besu/issues/1561#issuecomment-744612685",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1561",
    "id": 744612685,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NDYxMjY4NQ==",
    "user": {
      "login": "davemec",
      "id": 1975126,
      "node_id": "MDQ6VXNlcjE5NzUxMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1975126?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davemec",
      "html_url": "https://github.com/davemec",
      "followers_url": "https://api.github.com/users/davemec/followers",
      "following_url": "https://api.github.com/users/davemec/following{/other_user}",
      "gists_url": "https://api.github.com/users/davemec/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davemec/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davemec/subscriptions",
      "organizations_url": "https://api.github.com/users/davemec/orgs",
      "repos_url": "https://api.github.com/users/davemec/repos",
      "events_url": "https://api.github.com/users/davemec/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davemec/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-14T18:04:35Z",
    "updated_at": "2020-12-14T18:04:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "This ticket has been split into 2 additional tickets, #1695 and #1696. This ticket handles step 1 from the description above.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/744612685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3785",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3785/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3785/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3785/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3785",
  "id": 1224962541,
  "node_id": "I_kwDODE2jmc5JA3Ht",
  "number": 3785,
  "title": "Latest Prepared Metadata blockhash does not align with proposed block",
  "user": {
    "login": "panicstyle",
    "id": 374322,
    "node_id": "MDQ6VXNlcjM3NDMyMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/374322?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/panicstyle",
    "html_url": "https://github.com/panicstyle",
    "followers_url": "https://api.github.com/users/panicstyle/followers",
    "following_url": "https://api.github.com/users/panicstyle/following{/other_user}",
    "gists_url": "https://api.github.com/users/panicstyle/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/panicstyle/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/panicstyle/subscriptions",
    "organizations_url": "https://api.github.com/users/panicstyle/orgs",
    "repos_url": "https://api.github.com/users/panicstyle/repos",
    "events_url": "https://api.github.com/users/panicstyle/events{/privacy}",
    "received_events_url": "https://api.github.com/users/panicstyle/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1921587647,
      "node_id": "MDU6TGFiZWwxOTIxNTg3NjQ3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamGroot",
      "name": "TeamGroot",
      "color": "1d76db",
      "default": false,
      "description": "GH issues worked on by Groot Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-05-04T06:15:33Z",
  "updated_at": "2022-05-23T00:09:04Z",
  "closed_at": "2022-05-23T00:09:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\"Latest Prepared Metadata blockhash does not align with proposed block\" INFO log called A appears, no more blocks are created.\r\n`\r\n{\"timestamp\":\"2022-04-20T10:12:58,656\",\"container\":\"fc53910ea2c3\",\"level\":\"INFO\",\"thread\":\"BftProcessorExecutor-QBFT-0\",\"class\":\"QbftBesuControllerBuilder\",\"message\":\"Imported #787,685 / 0 tx / 0 pending / 0 (0.0%) gas / (0xccee92b099f27035aae9e9b66c1fd5b5b7de8608065911fac40c225c16dbee57)\",\"throwable\":\"\"}\r\n{\"timestamp\":\"2022-04-20T10:13:06,284\",\"container\":\"fc53910ea2c3\",\"level\":\"INFO\",\"thread\":\"BftProcessorExecutor-QBFT-0\",\"class\":\"ProposalValidator\",\"message\":\"Invalid Proposal Payload: Latest Prepared Metadata blockhash does not align with proposed block\",\"throwable\":\"\"}\r\n`\r\n\r\nBesu Version : 22.1.3 with docker in AWS\r\nConsensus Algorithm : QBFT\r\nValidator Node : 8\r\nRPC Node : 2\r\n",
  "closed_by": {
    "login": "jframe",
    "id": 909467,
    "node_id": "MDQ6VXNlcjkwOTQ2Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/909467?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jframe",
    "html_url": "https://github.com/jframe",
    "followers_url": "https://api.github.com/users/jframe/followers",
    "following_url": "https://api.github.com/users/jframe/following{/other_user}",
    "gists_url": "https://api.github.com/users/jframe/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jframe/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jframe/subscriptions",
    "organizations_url": "https://api.github.com/users/jframe/orgs",
    "repos_url": "https://api.github.com/users/jframe/repos",
    "events_url": "https://api.github.com/users/jframe/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jframe/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3785/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3785/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1120588073",
    "html_url": "https://github.com/hyperledger/besu/issues/3785#issuecomment-1120588073",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3785",
    "id": 1120588073,
    "node_id": "IC_kwDODE2jmc5CytEp",
    "user": {
      "login": "jframe",
      "id": 909467,
      "node_id": "MDQ6VXNlcjkwOTQ2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/909467?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jframe",
      "html_url": "https://github.com/jframe",
      "followers_url": "https://api.github.com/users/jframe/followers",
      "following_url": "https://api.github.com/users/jframe/following{/other_user}",
      "gists_url": "https://api.github.com/users/jframe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jframe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jframe/subscriptions",
      "organizations_url": "https://api.github.com/users/jframe/orgs",
      "repos_url": "https://api.github.com/users/jframe/repos",
      "events_url": "https://api.github.com/users/jframe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jframe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-09T03:05:39Z",
    "updated_at": "2022-05-09T03:06:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "If there are no new blocks being created then QBFT is likely waiting on a round change to produce a valid block. This time exponentially increases until a valid block is proposed. You might need to consider restarting all your validators to get the network up and running again in a reasonable time frame.\r\n\r\nCan you share more of the logs from before and after you saw this log message? Ideally at debug level if you have it.\r\nAre you running just Besu with QBFT or do you also have GoQuorum as well?\r\nCan you also share your genesis file?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1120588073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1120645133",
    "html_url": "https://github.com/hyperledger/besu/issues/3785#issuecomment-1120645133",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3785",
    "id": 1120645133,
    "node_id": "IC_kwDODE2jmc5Cy7AN",
    "user": {
      "login": "panicstyle",
      "id": 374322,
      "node_id": "MDQ6VXNlcjM3NDMyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/374322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/panicstyle",
      "html_url": "https://github.com/panicstyle",
      "followers_url": "https://api.github.com/users/panicstyle/followers",
      "following_url": "https://api.github.com/users/panicstyle/following{/other_user}",
      "gists_url": "https://api.github.com/users/panicstyle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/panicstyle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/panicstyle/subscriptions",
      "organizations_url": "https://api.github.com/users/panicstyle/orgs",
      "repos_url": "https://api.github.com/users/panicstyle/repos",
      "events_url": "https://api.github.com/users/panicstyle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/panicstyle/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-09T05:03:54Z",
    "updated_at": "2022-05-09T05:03:54Z",
    "author_association": "NONE",
    "body": "Why are there no new blocks being created.\r\n\r\nI have no Debug Log because the Log level is set to INFO.\r\nI am not using GoQuorum, I am using Besu with QBFT.\r\nI share my genesis file. (Some data are marked with .... .)\r\n`{\r\n  \"config\" : {\r\n    \"chainId\" : 20000,\r\n    \"londonBlock\" : 0,\r\n    \"contractSizeLimit\": 2147483647,\r\n    \"qbft\" : {\r\n      \"blockperiodseconds\" : 1,\r\n      \"epochlength\" : 30000,\r\n      \"requesttimeoutseconds\" : 2,\r\n      \"blockreward\" : \"5000000000000000\"\r\n    }\r\n  },\r\n  \"nonce\" : \"0x0\",\r\n  \"timestamp\" : \"0x0\",\r\n  \"gasLimit\" : \"0xf7b760\",\r\n  \"difficulty\" : \"0x1\",\r\n  \"mixHash\" : \"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365\",\r\n  \"coinbase\" : \"0x0000000000000000000000000000000000000000\",\r\n  \"alloc\" : {\r\n    \"....\" : {\r\n      \"balance\" : \"....\"\r\n    }\r\n  },\r\n  \"extraData\" : \"0xf8....80c0\"\r\n}`",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1120645133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1121935540",
    "html_url": "https://github.com/hyperledger/besu/issues/3785#issuecomment-1121935540",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3785",
    "id": 1121935540,
    "node_id": "IC_kwDODE2jmc5C32C0",
    "user": {
      "login": "jframe",
      "id": 909467,
      "node_id": "MDQ6VXNlcjkwOTQ2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/909467?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jframe",
      "html_url": "https://github.com/jframe",
      "followers_url": "https://api.github.com/users/jframe/followers",
      "following_url": "https://api.github.com/users/jframe/following{/other_user}",
      "gists_url": "https://api.github.com/users/jframe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jframe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jframe/subscriptions",
      "organizations_url": "https://api.github.com/users/jframe/orgs",
      "repos_url": "https://api.github.com/users/jframe/repos",
      "events_url": "https://api.github.com/users/jframe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jframe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-10T05:04:39Z",
    "updated_at": "2022-05-10T06:03:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can you please share your log files? It's not possible for us to tell what's going without that.\n\nDon't see anything obvious in the genesis to explain what's gone wrong.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1121935540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

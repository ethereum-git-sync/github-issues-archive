{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4796/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4796/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4796/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4796",
  "id": 1484978170,
  "node_id": "I_kwDODE2jmc5Ygvf6",
  "number": 4796,
  "title": "Besu restarted complaining of \"pure virual method called\"",
  "user": {
    "login": "benjaminion",
    "id": 20796281,
    "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benjaminion",
    "html_url": "https://github.com/benjaminion",
    "followers_url": "https://api.github.com/users/benjaminion/followers",
    "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
    "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
    "organizations_url": "https://api.github.com/users/benjaminion/orgs",
    "repos_url": "https://api.github.com/users/benjaminion/repos",
    "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benjaminion/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-12-08T16:23:25Z",
  "updated_at": "2023-01-26T19:20:54Z",
  "closed_at": "2023-01-26T14:35:07Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Here's some log output. This seems distinct from #4765 since it did not happen at startup but after 2 days of stable running.\r\n\r\nThis is all the info I have, unfortunately. No `hs_err_*.log` file was generated. Heap space, memory, metrics all look nominal at the time of the crash. Besu restarted cleanly and was up and importing blocks again within a minute.\r\n\r\n```\r\n2022-12-08 08:00:49.730+00:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Imported #16,138,661 / 130 tx / base fee 12.80 gwei / 29,618,375 (98.7%) gas / (0xc270ddb34b98e977836df4ed9b821770f4a4cddc1811bf4fff031ec033e9b7da) in 1.570s. Peers: 30\r\n2022-12-08 08:01:00.036+00:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Imported #16,138,662 / 61 tx / base fee 14.35 gwei / 4,771,294 (15.9%) gas / (0xa94a5a5537fb211d8fac4c7688b4f3264ee6e19c2fe0f7d5cc9fb741a7e6feb3) in 0.179s. Peers: 30\r\n2022-12-08 08:01:12.497+00:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Imported #16,138,663 / 149 tx / base fee 13.13 gwei / 11,751,317 (39.2%) gas / (0x73936a0a676e04120027f3b019247d6369fe5215774f906cf58be1ab641a027d) in 0.487s. Peers: 30\r\n2022-12-08 08:01:12.578+00:00 | vert.x-worker-thread-0 | INFO  | EngineForkchoiceUpdated | VALID for fork-choice-update: head: 0x73936a0a676e04120027f3b019247d6369fe5215774f906cf58be1ab641a027d, finalized: 0x3c84b128bfe141a7d4cb9ba06e7551e085b3f3b6f67a249a72929df2cfb62c19, safeBlockHash: 0xe4dbe36b1cfe22a0c7818e7e52d57eb41e73926dffa1fa51ccf4a4eed4d64054\r\n2022-12-08 08:01:23.677+00:00 | vert.x-worker-thread-0 | INFO  | EngineNewPayload | Imported #16,138,664 / 15 tx / base fee 12.78 gwei / 4,693,947 (15.6%) gas / (0xc8032f25d340126443a75179bc17f9d93f54fae353e6cf2cc859826905b97bea) in 0.048s. Peers: 30\r\npure virtual method called\r\nterminate called without an active exception\r\npure virtual method called\r\npure virtual method called\r\nterminate called recursively\r\nterminate called recursively\r\npure virtual method called\r\npure virtual method called\r\nterminate called recursively\r\nterminate called recursively\r\nbesu.service: Main process exited, code=killed, status=6/ABRT\r\nbesu.service: Failed with result 'signal'.\r\nbesu.service: Consumed 11h 39min 47.094s CPU time.\r\nbesu.service: Scheduled restart job, restart counter is at 1.\r\nStopped Besu Client.\r\nbesu.service: Consumed 11h 39min 47.094s CPU time.\r\nStarted Besu Client.\r\n2022-12-08 08:01:31.534+00:00 | main | INFO  | Besu | Starting Besu\r\n2022-12-08 08:01:31.816+00:00 | main | INFO  | Besu |\r\n####################################################################################################\r\n#                                                                                                  #\r\n# Besu 22.10.2                                                                                     #\r\n#                                                                                                  #\r\n# Configuration:                                                                                   #\r\n# Network: Mainnet                                                                                 #\r\n# Data storage: Bonsai                                                                             #\r\n# Sync mode: Checkpoint                                                                            #\r\n# RPC HTTP APIs: ETH,NET,WEB3,DEBUG,ADMIN                                                          #\r\n# RPC HTTP port: 8545                                                                              #\r\n# Engine APIs: ENGINE,ETH                                                                          #\r\n# Engine port: 8551                                                                                #\r\n#                                                                                                  #\r\n# Host:                                                                                            #\r\n# Java: openjdk-java-17                                                                            #\r\n# Maximum heap size: 5.00 GB                                                                       #\r\n# OS: linux-x86_64                                                                                 #\r\n# glibc: 2.35                                                                                      #\r\n# Total memory: 15.50 GB                                                                           #\r\n# CPU cores: 6                                                                                     #\r\n#                                                                                                  #\r\n####################################################################################################\r\n```",
  "closed_by": {
    "login": "non-fungible-nelson",
    "id": 85905982,
    "node_id": "MDQ6VXNlcjg1OTA1OTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/non-fungible-nelson",
    "html_url": "https://github.com/non-fungible-nelson",
    "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
    "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
    "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
    "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
    "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
    "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4796/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4796/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1343690799",
    "html_url": "https://github.com/hyperledger/besu/issues/4796#issuecomment-1343690799",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
    "id": 1343690799,
    "node_id": "IC_kwDODE2jmc5QFxgv",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-09T00:53:02Z",
    "updated_at": "2022-12-09T00:53:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi Ben, this is very likely distinct from 4765.  \r\n\r\nAre you running with `--Xbonsai-use-snapshots=true` or rocketpool 1.7.0 ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1343690799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1344022567",
    "html_url": "https://github.com/hyperledger/besu/issues/4796#issuecomment-1344022567",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
    "id": 1344022567,
    "node_id": "IC_kwDODE2jmc5QHCgn",
    "user": {
      "login": "benjaminion",
      "id": 20796281,
      "node_id": "MDQ6VXNlcjIwNzk2Mjgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/20796281?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjaminion",
      "html_url": "https://github.com/benjaminion",
      "followers_url": "https://api.github.com/users/benjaminion/followers",
      "following_url": "https://api.github.com/users/benjaminion/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjaminion/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjaminion/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjaminion/subscriptions",
      "organizations_url": "https://api.github.com/users/benjaminion/orgs",
      "repos_url": "https://api.github.com/users/benjaminion/repos",
      "events_url": "https://api.github.com/users/benjaminion/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjaminion/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-09T08:52:37Z",
    "updated_at": "2022-12-09T08:52:37Z",
    "author_association": "NONE",
    "body": "Yes, running `Xbonsai-use-snapshots=true`.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1344022567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1344585642",
    "html_url": "https://github.com/hyperledger/besu/issues/4796#issuecomment-1344585642",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
    "id": 1344585642,
    "node_id": "IC_kwDODE2jmc5QJL-q",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-09T17:43:32Z",
    "updated_at": "2022-12-09T17:43:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @benjaminion - in 22.10.2, we are no longer advising this flag. We have ported over some of the behavior of snapshots to the default behavior and they can conflict. I might update the release notes.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1344585642/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1345626639",
    "html_url": "https://github.com/hyperledger/besu/issues/4796#issuecomment-1345626639",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
    "id": 1345626639,
    "node_id": "IC_kwDODE2jmc5QNKIP",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-11T18:37:54Z",
    "updated_at": "2022-12-11T18:37:54Z",
    "author_association": "NONE",
    "body": "I was seeing this with the following configuration\r\n```\r\n# Besu 22.10.4-dev-90064451                                                                        #\r\n#                                                                                                  #\r\n# Configuration:                                                                                   #\r\n# Network: Goerli                                                                                  #\r\n# Data storage: Bonsai                                                                             #\r\n# Sync mode: Checkpoint                                                                            #\r\n# RPC HTTP APIs: ETH,NET,WEB3                                                                      #\r\n# RPC HTTP port: 8579                                                                              #\r\n# Engine APIs: ENGINE,ETH                                                                          #\r\n# Engine port: 8580                                                                                #\r\n# High spec configuration enabled                                             \r\n```\r\n\r\nRemoved `Xbonsai-use-snapshots=true` and it allowed besu to resume importing blocks.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1345626639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1405095921",
    "html_url": "https://github.com/hyperledger/besu/issues/4796#issuecomment-1405095921",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
    "id": 1405095921,
    "node_id": "IC_kwDODE2jmc5TwA_x",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-26T14:35:07Z",
    "updated_at": "2023-01-26T14:35:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@SeaMonkey82 - you saw this on 22.10.4 pre-image _with_ snapshots enabled correct? If this is **not** the case, let me know and I will re-open the issue. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1405095921/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1405488897",
    "html_url": "https://github.com/hyperledger/besu/issues/4796#issuecomment-1405488897",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4796",
    "id": 1405488897,
    "node_id": "IC_kwDODE2jmc5Txg8B",
    "user": {
      "login": "SeaMonkey82",
      "id": 20866869,
      "node_id": "MDQ6VXNlcjIwODY2ODY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/20866869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SeaMonkey82",
      "html_url": "https://github.com/SeaMonkey82",
      "followers_url": "https://api.github.com/users/SeaMonkey82/followers",
      "following_url": "https://api.github.com/users/SeaMonkey82/following{/other_user}",
      "gists_url": "https://api.github.com/users/SeaMonkey82/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SeaMonkey82/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SeaMonkey82/subscriptions",
      "organizations_url": "https://api.github.com/users/SeaMonkey82/orgs",
      "repos_url": "https://api.github.com/users/SeaMonkey82/repos",
      "events_url": "https://api.github.com/users/SeaMonkey82/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SeaMonkey82/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-26T19:20:53Z",
    "updated_at": "2023-01-26T19:20:53Z",
    "author_association": "NONE",
    "body": "> @SeaMonkey82 - you saw this on 22.10.4 pre-image _with_ snapshots enabled correct? If this is **not** the case, let me know and I will re-open the issue.\r\n\r\nYes, that's correct.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1405488897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

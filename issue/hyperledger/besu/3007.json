{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3007",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3007/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3007/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3007/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3007",
  "id": 1044960928,
  "node_id": "I_kwDODE2jmc4-SNag",
  "number": 3007,
  "title": "Bonsai mainnet sync shows ` World State Root does not match expected value`",
  "user": {
    "login": "yorickdowne",
    "id": 71337066,
    "node_id": "MDQ6VXNlcjcxMzM3MDY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yorickdowne",
    "html_url": "https://github.com/yorickdowne",
    "followers_url": "https://api.github.com/users/yorickdowne/followers",
    "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
    "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
    "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
    "repos_url": "https://api.github.com/users/yorickdowne/repos",
    "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-11-04T16:32:05Z",
  "updated_at": "2022-05-19T13:49:39Z",
  "closed_at": "2022-05-19T13:49:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nSyncing mainnet with bonsai trie and the recent fix, the sync shows an error after importing world states.\r\n\r\nPivot block information:\r\n```\r\nubuntu@eth-testing:~$ grep -i pivot besu-logs\r\n2021-10-31 12:27:19.426+01:00 | EthScheduler-Timer-0 | INFO  | FastSyncActions | Selecting block number 13524471 as fast sync pivot block.\r\n2021-10-31 12:27:19.428+01:00 | EthScheduler-Timer-0 | INFO  | PivotBlockRetriever | Retrieve a pivot block that can be confirmed by at least 5 peers.\r\n2021-10-31 12:27:19.429+01:00 | EthScheduler-Timer-0 | INFO  | PivotBlockConfirmer | Confirm pivot block 13524471 with at least 5 peers.\r\n2021-10-31 12:27:19.437+01:00 | nioEventLoopGroup-3-5 | INFO  | PivotBlockConfirmer | Received 1 confirmation(s) for pivot block header 13524471: 0xdcfcf866c1b714f594957b92c71ab102e5432b4913f71f8d946a17ab903bd101\r\n2021-10-31 12:27:19.472+01:00 | nioEventLoopGroup-3-6 | INFO  | PivotBlockConfirmer | Received 2 confirmation(s) for pivot block header 13524471: 0xdcfcf866c1b714f594957b92c71ab102e5432b4913f71f8d946a17ab903bd101\r\n2021-10-31 12:27:19.525+01:00 | nioEventLoopGroup-3-8 | INFO  | PivotBlockConfirmer | Received 3 confirmation(s) for pivot block header 13524471: 0xdcfcf866c1b714f594957b92c71ab102e5432b4913f71f8d946a17ab903bd101\r\n2021-10-31 12:27:19.543+01:00 | nioEventLoopGroup-3-2 | INFO  | PivotBlockConfirmer | Received 4 confirmation(s) for pivot block header 13524471: 0xdcfcf866c1b714f594957b92c71ab102e5432b4913f71f8d946a17ab903bd101\r\n2021-10-31 12:27:19.548+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockConfirmer | Confirmed pivot block at 13524471: 0xdcfcf866c1b714f594957b92c71ab102e5432b4913f71f8d946a17ab903bd101\r\n2021-11-01 05:32:01.335+01:00 | nioEventLoopGroup-3-2 | INFO  | FastSyncDownloader | Re-pivoting to newer block.\r\n2021-11-01 05:32:01.387+01:00 | nioEventLoopGroup-3-2 | INFO  | FastSyncActions | Selecting block number 13529038 as fast sync pivot block.\r\n2021-11-01 05:32:01.387+01:00 | nioEventLoopGroup-3-2 | INFO  | PivotBlockRetriever | Retrieve a pivot block that can be confirmed by at least 5 peers.\r\n2021-11-01 05:32:01.388+01:00 | nioEventLoopGroup-3-2 | INFO  | PivotBlockConfirmer | Confirm pivot block 13529038 with at least 5 peers.\r\n2021-11-01 05:32:01.391+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockConfirmer | Received 1 confirmation(s) for pivot block header 13529038: 0xbf3c6eb4857543c8c97852591e7b1a4683f98d2ff2f140da050591f274b4a329\r\n2021-11-01 05:32:01.393+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockConfirmer | Received 2 confirmation(s) for pivot block header 13529038: 0xbf3c6eb4857543c8c97852591e7b1a4683f98d2ff2f140da050591f274b4a329\r\n2021-11-01 05:32:01.394+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockConfirmer | Received 3 confirmation(s) for pivot block header 13529038: 0xbf3c6eb4857543c8c97852591e7b1a4683f98d2ff2f140da050591f274b4a329\r\n2021-11-01 05:32:01.416+01:00 | nioEventLoopGroup-3-5 | INFO  | PivotBlockConfirmer | Received 4 confirmation(s) for pivot block header 13529038: 0xbf3c6eb4857543c8c97852591e7b1a4683f98d2ff2f140da050591f274b4a329\r\n2021-11-01 05:32:01.464+01:00 | nioEventLoopGroup-3-2 | INFO  | PivotBlockConfirmer | Confirmed pivot block at 13529038: 0xbf3c6eb4857543c8c97852591e7b1a4683f98d2ff2f140da050591f274b4a329\r\n2021-11-02 06:36:46.457+01:00 | nioEventLoopGroup-3-8 | INFO  | FastSyncDownloader | Re-pivoting to newer block.\r\n2021-11-02 06:36:46.699+01:00 | nioEventLoopGroup-3-8 | INFO  | FastSyncActions | Selecting block number 13535721 as fast sync pivot block.\r\n2021-11-02 06:36:46.699+01:00 | nioEventLoopGroup-3-8 | INFO  | PivotBlockRetriever | Retrieve a pivot block that can be confirmed by at least 5 peers.\r\n2021-11-02 06:36:46.699+01:00 | nioEventLoopGroup-3-8 | INFO  | PivotBlockConfirmer | Confirm pivot block 13535721 with at least 5 peers.\r\n2021-11-02 06:36:46.703+01:00 | nioEventLoopGroup-3-10 | INFO  | PivotBlockConfirmer | Received 1 confirmation(s) for pivot block header 13535721: 0xf0316ce9d063e5f1c4fdbd3831f9a3263787cca05dd5e43eeee4a166cbc601f2\r\n2021-11-02 06:36:46.724+01:00 | nioEventLoopGroup-3-8 | INFO  | PivotBlockConfirmer | Received 2 confirmation(s) for pivot block header 13535721: 0xf0316ce9d063e5f1c4fdbd3831f9a3263787cca05dd5e43eeee4a166cbc601f2\r\n2021-11-02 06:36:46.857+01:00 | nioEventLoopGroup-3-2 | INFO  | PivotBlockConfirmer | Received 3 confirmation(s) for pivot block header 13535721: 0xf0316ce9d063e5f1c4fdbd3831f9a3263787cca05dd5e43eeee4a166cbc601f2\r\n2021-11-02 06:36:46.985+01:00 | nioEventLoopGroup-3-1 | INFO  | PivotBlockConfirmer | Received 4 confirmation(s) for pivot block header 13535721: 0xf0316ce9d063e5f1c4fdbd3831f9a3263787cca05dd5e43eeee4a166cbc601f2\r\n2021-11-02 06:36:46.986+01:00 | nioEventLoopGroup-3-1 | INFO  | PivotBlockConfirmer | Confirmed pivot block at 13535721: 0xf0316ce9d063e5f1c4fdbd3831f9a3263787cca05dd5e43eeee4a166cbc601f2\r\n2021-11-03 06:56:15.208+01:00 | nioEventLoopGroup-3-4 | INFO  | FastSyncDownloader | Re-pivoting to newer block.\r\n2021-11-03 06:56:42.484+01:00 | nioEventLoopGroup-3-4 | INFO  | FastSyncActions | Selecting block number 13542125 as fast sync pivot block.\r\n2021-11-03 06:56:42.484+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockRetriever | Retrieve a pivot block that can be confirmed by at least 5 peers.\r\n2021-11-03 06:56:42.484+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockConfirmer | Confirm pivot block 13542125 with at least 5 peers.\r\n2021-11-03 06:56:42.488+01:00 | nioEventLoopGroup-3-1 | INFO  | PivotBlockConfirmer | Received 1 confirmation(s) for pivot block header 13542125: 0x3afdf2208391a258d3ab16a53f145fa1bcc48a990e033f8038c49c577dd2b9fa\r\n2021-11-03 06:56:42.502+01:00 | nioEventLoopGroup-3-9 | INFO  | PivotBlockConfirmer | Received 2 confirmation(s) for pivot block header 13542125: 0x3afdf2208391a258d3ab16a53f145fa1bcc48a990e033f8038c49c577dd2b9fa\r\n2021-11-03 06:56:42.519+01:00 | nioEventLoopGroup-3-6 | INFO  | PivotBlockConfirmer | Received 3 confirmation(s) for pivot block header 13542125: 0x3afdf2208391a258d3ab16a53f145fa1bcc48a990e033f8038c49c577dd2b9fa\r\n2021-11-03 06:56:42.535+01:00 | nioEventLoopGroup-3-4 | INFO  | PivotBlockConfirmer | Received 4 confirmation(s) for pivot block header 13542125: 0x3afdf2208391a258d3ab16a53f145fa1bcc48a990e033f8038c49c577dd2b9fa\r\n2021-11-03 06:57:20.803+01:00 | nioEventLoopGroup-3-9 | INFO  | PivotBlockConfirmer | Confirmed pivot block at 13542125: 0x3afdf2208391a258d3ab16a53f145fa1bcc48a990e033f8038c49c577dd2b9fa\r\n2021-11-03 23:12:34.128+01:00 | nioEventLoopGroup-3-6 | INFO  | FastSyncDownloader | Re-pivoting to newer block.\r\n2021-11-03 23:12:34.155+01:00 | nioEventLoopGroup-3-6 | INFO  | FastSyncActions | Selecting block number 13546439 as fast sync pivot block.\r\n2021-11-03 23:12:34.155+01:00 | nioEventLoopGroup-3-6 | INFO  | PivotBlockRetriever | Retrieve a pivot block that can be confirmed by at least 5 peers.\r\n2021-11-03 23:12:34.156+01:00 | nioEventLoopGroup-3-6 | INFO  | PivotBlockConfirmer | Confirm pivot block 13546439 with at least 5 peers.\r\n2021-11-03 23:12:34.194+01:00 | nioEventLoopGroup-3-3 | INFO  | PivotBlockConfirmer | Received 1 confirmation(s) for pivot block header 13546439: 0x457a39280e3fa9db5b421b26f76864e13fb6a8ebdb1412224aee7a24c3498ef1\r\n2021-11-03 23:12:34.220+01:00 | nioEventLoopGroup-3-1 | INFO  | PivotBlockConfirmer | Received 2 confirmation(s) for pivot block header 13546439: 0x457a39280e3fa9db5b421b26f76864e13fb6a8ebdb1412224aee7a24c3498ef1\r\n2021-11-03 23:12:34.264+01:00 | nioEventLoopGroup-3-6 | INFO  | PivotBlockConfirmer | Received 3 confirmation(s) for pivot block header 13546439: 0x457a39280e3fa9db5b421b26f76864e13fb6a8ebdb1412224aee7a24c3498ef1\r\n2021-11-03 23:12:34.282+01:00 | nioEventLoopGroup-3-6 | INFO  | PivotBlockConfirmer | Received 4 confirmation(s) for pivot block header 13546439: 0x457a39280e3fa9db5b421b26f76864e13fb6a8ebdb1412224aee7a24c3498ef1\r\n2021-11-03 23:12:34.368+01:00 | nioEventLoopGroup-3-2 | INFO  | PivotBlockConfirmer | Confirmed pivot block at 13546439: 0x457a39280e3fa9db5b421b26f76864e13fb6a8ebdb1412224aee7a24c3498ef1\r\n2021-11-04 15:59:44.001+01:00 | EthScheduler-Services-10 (requestCompleteTask) | INFO  | DefaultSynchronizer | Fast sync completed successfully with pivot block 13546439\r\n```\r\n\r\nError logs once fast sync completes, ongoing `Import reached block` logs every few minutes after this:\r\n\r\n```\r\nexecution_1  | 2021-11-04 17:20:01.499+01:00 | EthScheduler-Services-133 (importBlock) | INFO  | FullImportBlockStep | Import reached block 13549800 (0x2ae8c67497bdb8e4a9e9a9989c17a9d6106775b28d2f52d0f36a172fceb54c47), 11.550 Mg/s, Peers: 25\r\nexecution_1  | 2021-11-04 17:24:30.481+01:00 | EthScheduler-Services-133 (importBlock) | INFO  | FullImportBlockStep | Import reached block 13550000 (0x73d39c9ab8401d771d64a138a4bfb71514dd08b8ea8a620f7856fb10a6eeaf4e), 11.555 Mg/s, Peers: 25\r\nexecution_1  | 2021-11-04 17:24:35.289+01:00 | EthScheduler-Services-133 (importBlock) | ERROR | PipelineChainDownloader | Chain download failed. Restarting after short delay.\r\nexecution_1  | java.util.concurrent.CompletionException: java.lang.RuntimeException: World State Root does not match expected value, header 0xb9f7b6ac1f6185aa5cd1990bb1e4111587999632568ac7751d67fdd1f04e881c calculated 0x6209a3c82e5bd7a49ec88507528dbb79490f21b9a730eb3ca80938c6a07f9dea\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:368)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:377)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:1097)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.Pipeline.abort(Pipeline.java:180)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:159)\r\nexecution_1  |  at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\nexecution_1  |  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\nexecution_1  |  at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\nexecution_1  |  at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\nexecution_1  |  at java.base/java.lang.Thread.run(Thread.java:833)\r\nexecution_1  | Caused by: java.lang.RuntimeException: World State Root does not match expected value, header 0xb9f7b6ac1f6185aa5cd1990bb1e4111587999632568ac7751d67fdd1f04e881c calculated 0x6209a3c82e5bd7a49ec88507528dbb79490f21b9a730eb3ca80938c6a07f9dea\r\nexecution_1  |  at org.hyperledger.besu.ethereum.bonsai.BonsaiPersistedWorldState.persist(BonsaiPersistedWorldState.java:264)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.mainnet.AbstractBlockProcessor.processBlock(AbstractBlockProcessor.java:202)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.mainnet.AbstractBlockProcessor.processBlock(AbstractBlockProcessor.java:42)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.mainnet.BlockProcessor.processBlock(BlockProcessor.java:75)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.MainnetBlockValidator.processBlock(MainnetBlockValidator.java:150)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:108)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.mainnet.MainnetBlockImporter.importBlock(MainnetBlockImporter.java:45)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.core.BlockImporter.importBlock(BlockImporter.java:44)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:54)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:31)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.CompleterStage.run(CompleterStage.java:37)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:152)\r\nexecution_1  |  ... 5 more\r\nexecution_1  | 2021-11-04 17:24:37.336+01:00 | nioEventLoopGroup-3-2 | INFO  | SyncTargetManager | Found common ancestor with peer Peer 0x717d2edf75ea523c8f... at block 13550002\r\nexecution_1  | 2021-11-04 17:29:06.498+01:00 | EthScheduler-Services-137 (importBlock) | INFO  | FullImportBlockStep | Import reached block 13550200 (0x41d70acf950ff5103aa1125f5ea451c8e096574cd603cbdfb734d9f43b82df29), - Mg/s, Peers: 25\r\nexecution_1  | 2021-11-04 17:33:13.021+01:00 | EthScheduler-Services-137 (importBlock) | INFO  | FullImportBlockStep | Import reached block 13550400 (0xdce40a87e21ffeb58ae01c864683fd602dbb6291a15625678c5d78d90d60f0e1), 12.505 Mg/s, Peers: 25\r\n```\r\n\r\n### Versions\r\n\r\nBesu: `besu/v21.10.1-dev-93b556aa/linux-x86_64/openjdk-java-17`\r\nOS: Ubuntu 20.04",
  "closed_by": {
    "login": "non-fungible-nelson",
    "id": 85905982,
    "node_id": "MDQ6VXNlcjg1OTA1OTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/non-fungible-nelson",
    "html_url": "https://github.com/non-fungible-nelson",
    "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
    "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
    "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
    "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
    "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
    "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3007/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3007/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/961312526",
    "html_url": "https://github.com/hyperledger/besu/issues/3007#issuecomment-961312526",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3007",
    "id": 961312526,
    "node_id": "IC_kwDODE2jmc45THcO",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T18:34:28Z",
    "updated_at": "2021-11-04T18:34:28Z",
    "author_association": "NONE",
    "body": "Despite this scary-looking error message, sync does complete. Currently showing the below, which looks like Besu keeping up with head to me.\r\n\r\n```\r\nexecution_1  | 2021-11-04 19:33:05.284+01:00 | EthScheduler-Workers-2 | INFO  | PersistBlockTask | Imported #13,551,830 / 103 tx / 0 om / 6,050,593 (20.1%) gas / (0xe892e4995556f5c5a9a297ee51ee2ca61009faf9d9c1c37f39f1f7631c8dee70) in 0.395s. Peers: 25\r\nexecution_1  | 2021-11-04 19:33:10.757+01:00 | EthScheduler-Workers-3 | INFO  | PersistBlockTask | Imported #13,551,831 / 54 tx / 0 om / 3,182,253 (10.6%) gas / (0x2828c5ad8dee1f6d9d699a98ef86dfee17212236cb80f72d6bbad1c45e5cb7c7) in 0.194s. Peers: 25\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/961312526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/961315622",
    "html_url": "https://github.com/hyperledger/besu/issues/3007#issuecomment-961315622",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3007",
    "id": 961315622,
    "node_id": "IC_kwDODE2jmc45TIMm",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T18:38:52Z",
    "updated_at": "2021-11-04T18:40:33Z",
    "author_association": "NONE",
    "body": "Another \"failed to download\" but no resulting world state errors. Related or a separate issue? This happened after sync completed.\r\n\r\n```\r\nexecution_1  | 2021-11-04 18:15:13.334+01:00 | EthScheduler-Workers-3 | INFO  | BlockPropagationManager | Imported 1 pending blocks\r\nexecution_1  | 2021-11-04 18:15:24.327+01:00 | EthScheduler-Workers-0 | INFO  | PersistBlockTask | Imported #13,551,501 / 253 tx / 0 om / 29,980,142 (99.9%) gas / (0x738dd109657f88735d7c7afeeed08372cf1f63f079e46b3a18170b38beedc557) in 2.823s. Peers: 25\r\nexecution_1  | 2021-11-04 18:15:31.249+01:00 | nioEventLoopGroup-3-7 | INFO  | SyncTargetManager | Found common ancestor with peer Peer 0x9a487d7b7b5fe27833... at block 13551501\r\nexecution_1  | 2021-11-04 18:15:31.279+01:00 | EthScheduler-Services-157 (downloadHeaders) | ERROR | PipelineChainDownloader | Chain download failed. Restarting after short delay.\r\nexecution_1  | java.util.concurrent.CompletionException: java.lang.RuntimeException: Async operation failed. java.lang.IllegalArgumentException: Must have at least one header to import\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:368)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:377)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:1097)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.Pipeline.abort(Pipeline.java:180)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:159)\r\nexecution_1  |  at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\nexecution_1  |  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\nexecution_1  |  at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\nexecution_1  |  at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\nexecution_1  |  at java.base/java.lang.Thread.run(Thread.java:833)\r\nexecution_1  | Caused by: java.lang.RuntimeException: Async operation failed. java.lang.IllegalArgumentException: Must have at least one header to import\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.AsyncOperationProcessor.outputNextCompletedTask(AsyncOperationProcessor.java:86)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.AsyncOperationProcessor.attemptFinalization(AsyncOperationProcessor.java:70)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.ProcessingStage.run(ProcessingStage.java:43)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:152)\r\nexecution_1  |  ... 5 more\r\nexecution_1  | Caused by: java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: Must have at least one header to import\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2096)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.AsyncOperationProcessor.waitForAnyFutureToComplete(AsyncOperationProcessor.java:94)\r\nexecution_1  |  at org.hyperledger.besu.services.pipeline.AsyncOperationProcessor.outputNextCompletedTask(AsyncOperationProcessor.java:81)\r\nexecution_1  |  ... 8 more\r\nexecution_1  | Caused by: java.lang.IllegalArgumentException: Must have at least one header to import\r\nexecution_1  |  at com.google.common.base.Preconditions.checkArgument(Preconditions.java:144)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.sync.CheckpointRangeHeaders.<init>(CheckpointRangeHeaders.java:32)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.sync.DownloadHeadersStep.processHeaders(DownloadHeadersStep.java:118)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.sync.DownloadHeadersStep.lambda$apply$0(DownloadHeadersStep.java:67)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:646)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2147)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.task.AbstractPeerRequestTask.lambda$executeTask$2(AbstractPeerRequestTask.java:83)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\nexecution_1  |  at java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2147)\r\nexecution_1  |  at java.base/java.util.Optional.ifPresent(Optional.java:178)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.task.AbstractPeerRequestTask.handleMessage(AbstractPeerRequestTask.java:104)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.task.AbstractPeerRequestTask.lambda$executeTask$0(AbstractPeerRequestTask.java:67)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.RequestManager$ResponseStream.dispatchBufferedResponses(RequestManager.java:185)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.RequestManager$ResponseStream.processMessage(RequestManager.java:176)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.RequestManager.lambda$dispatchResponse$2(RequestManager.java:73)\r\nexecution_1  |  at java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.RequestManager.dispatchResponse(RequestManager.java:73)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.EthPeer.dispatch(EthPeer.java:294)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.EthPeers.dispatchMessage(EthPeers.java:131)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.eth.manager.EthProtocolManager.processMessage(EthProtocolManager.java:275)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.p2p.network.NetworkRunner.lambda$setupHandlers$0(NetworkRunner.java:135)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.p2p.rlpx.connections.PeerConnectionEvents.lambda$dispatchMessage$1(PeerConnectionEvents.java:64)\r\nexecution_1  |  at org.hyperledger.besu.util.Subscribers.lambda$forEach$0(Subscribers.java:112)\r\nexecution_1  |  at java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\nexecution_1  |  at org.hyperledger.besu.util.Subscribers.forEach(Subscribers.java:109)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.p2p.rlpx.connections.PeerConnectionEvents.dispatchMessage(PeerConnectionEvents.java:64)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.p2p.rlpx.connections.netty.ApiHandler.channelRead0(ApiHandler.java:99)\r\nexecution_1  |  at org.hyperledger.besu.ethereum.p2p.rlpx.connections.netty.ApiHandler.channelRead0(ApiHandler.java:33)\r\nexecution_1  |  at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\nexecution_1  |  at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\nexecution_1  |  at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324)\r\nexecution_1  |  at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:296)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\nexecution_1  |  at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nexecution_1  |  at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nexecution_1  |  at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\nexecution_1  |  at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\nexecution_1  |  at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)\r\nexecution_1  |  at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)\r\nexecution_1  |  at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)\r\nexecution_1  |  at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)\r\nexecution_1  |  at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)\r\nexecution_1  |  at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\nexecution_1  |  at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\nexecution_1  |  ... 1 more\r\nexecution_1  | 2021-11-04 18:15:33.373+01:00 | nioEventLoopGroup-3-7 | INFO  | SyncTargetManager | Found common ancestor with peer Peer 0x9a487d7b7b5fe27833... at block 13551501\r\nexecution_1  | 2021-11-04 18:15:33.956+01:00 | EthScheduler-Workers-2 | INFO  | PersistBlockTask | Imported #13,551,502 / 349 tx / 0 om / 29,971,658 (99.8%) gas / (0x05e25c7f9ea7f496aca60ca2a5b6e6a4e0c552da62917f02c5f7a9ee07809568) in 2.868s. Peers: 25\r\n```\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/961315622/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/961413408",
    "html_url": "https://github.com/hyperledger/besu/issues/3007#issuecomment-961413408",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3007",
    "id": 961413408,
    "node_id": "IC_kwDODE2jmc45TgEg",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T20:55:26Z",
    "updated_at": "2021-11-04T20:56:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll check the hash of the block that caused the problem in the first log tomorrow. But I think it's just that the peer wasn't giving out valid blocks. So it's a normal but scary log\r\nThe second stacktrace it's more a logging issue I will check that. But looking at your logs indeed your node is well synchronized and continues to import without problem. We will rework the logs",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/961413408/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1131717791",
    "html_url": "https://github.com/hyperledger/besu/issues/3007#issuecomment-1131717791",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3007",
    "id": 1131717791,
    "node_id": "IC_kwDODE2jmc5DdKSf",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-19T13:49:39Z",
    "updated_at": "2022-05-19T13:49:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "closed for consensus fixes. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1131717791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2382",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2382/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2382/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2382/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2382",
  "id": 913253458,
  "node_id": "MDU6SXNzdWU5MTMyNTM0NTg=",
  "number": 2382,
  "title": "v21.1.5",
  "user": {
    "login": "jimy74",
    "id": 6338426,
    "node_id": "MDQ6VXNlcjYzMzg0MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6338426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimy74",
    "html_url": "https://github.com/jimy74",
    "followers_url": "https://api.github.com/users/jimy74/followers",
    "following_url": "https://api.github.com/users/jimy74/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimy74/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimy74/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimy74/subscriptions",
    "organizations_url": "https://api.github.com/users/jimy74/orgs",
    "repos_url": "https://api.github.com/users/jimy74/repos",
    "events_url": "https://api.github.com/users/jimy74/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimy74/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-06-07T08:05:15Z",
  "updated_at": "2021-06-16T11:32:58Z",
  "closed_at": "2021-06-16T11:32:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nAs a client of JSON-RPC, I want to get the traces of a block but I get a internal error instead.\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Start the node by enabling tracing and with enough state retention for the next steps\r\n2. Sync the node\r\n2. Still have the state for the requested block 8703289 on Rinkeby\r\n3. Request as follow :\r\n`curl --data '{\"method\":\"trace_block\",\"params\":[\"84CD39\"],\"id\":1,\"jsonrpc\":\"2.0\"}' -H \"Content-Type: application/json\" -X POST http://besu:8545 | jq`\r\n\r\nThe erroneous result should be :\r\n\r\n```\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"error\": {\r\n    \"code\": -32603,\r\n    \"message\": \"Internal error\"\r\n  }\r\n}\r\n```\r\n\r\n\r\n**Expected behavior:**\r\n\r\nI should get the traces for all transaction in the requested block ( 8703289 hash: 0xf8de9b533ec39e66822a62f9498b7cb611c76351e7b5eb788f46513788c4db63 on Rinkeby).\r\n\r\n**Actual behavior:** \r\n\r\nI got the message \r\n```\r\n{\r\n  \"jsonrpc\" : \"2.0\",\r\n  \"id\" : 1,\r\n  \"error\" : {\r\n    \"code\" : -32603,\r\n    \"message\" : \"Internal error\"\r\n  }\r\n}\r\n```\r\n\r\n**Frequency:** 100%\r\n\r\n### Versions (Add all that apply)\r\n\r\nhttps://hub.docker.com/layers/hyperledger/besu/21.1.5-openjdk-11/images/sha256-7843e035ee9dbf0f95b91d92b64b43734ff784bb462f037c2f41c46ffa718bb9?context=explore\r\n\r\n`besu/v21.1.5/linux-x86_64/oracle_openjdk-java-11`\r\n\r\n### Additional Information\r\n\r\nThe Besu node is setup as follow :\r\n```\r\n\"BESU_HOST_ALLOWLIST\":\"*\"\r\n\"BESU_RPC_HTTP_ENABLED\":\"true\"\r\n\"BESU_RPC_HTTP_API\":\"ADMIN,WEB3,ETH,NET,TRACE\"\r\n\"BESU_RPC_HTTP_CORS_ORIGINS\":\"*\"\r\n\"BESU_SYNC_MODE\":\"FAST\"\r\n\"BESU_NETWORK\":\"rinkeby\"\r\n\"BESU_DATA_PATH\":\"/persistent-data/besu/rinkeby\"\r\n\"BESU_MIN_GAS_PRICE\":\"1000000000\"\r\n\"BESU_LOGGING\":\"INFO\"\r\n\"BESU_REVERT_REASON_ENABLED\":\"false\"\r\n\"BESU_METRICS_ENABLED\":\"true\"\r\n\"BESU_METRICS_HOST\":\"0.0.0.0\"\r\n\"BESU_OPTS\":\"-Xms2G -Xmx12G -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9001 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false\"\r\n```\r\n",
  "closed_by": {
    "login": "matkt",
    "id": 26581503,
    "node_id": "MDQ6VXNlcjI2NTgxNTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/matkt",
    "html_url": "https://github.com/matkt",
    "followers_url": "https://api.github.com/users/matkt/followers",
    "following_url": "https://api.github.com/users/matkt/following{/other_user}",
    "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
    "organizations_url": "https://api.github.com/users/matkt/orgs",
    "repos_url": "https://api.github.com/users/matkt/repos",
    "events_url": "https://api.github.com/users/matkt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/matkt/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2382/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2382/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

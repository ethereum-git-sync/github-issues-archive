{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2267",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2267/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2267/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2267/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2267",
  "id": 886275661,
  "node_id": "MDU6SXNzdWU4ODYyNzU2NjE=",
  "number": 2267,
  "title": "AT failures - incorrect node address being generated",
  "user": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2047214992,
      "node_id": "MDU6TGFiZWwyMDQ3MjE0OTky",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/flake",
      "name": "flake",
      "color": "ed9482",
      "default": false,
      "description": "60% of the time it works 100% of the time."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-05-11T07:04:50Z",
  "updated_at": "2021-05-13T08:11:35Z",
  "closed_at": "2021-05-13T08:11:35Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "This test run failed with SECP256R1AcceptanceTest and some privacy log ATs - but looking more closely at this failure\n\nhttps://app.circleci.com/pipelines/github/hyperledger/besu/8733/workflows/2f8a20e1-a061-41a8-90a9-27975add7e5d/jobs/44837/tests\norg.opentest4j.AssertionFailedError: \n```\nExpecting:\n <\"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73\">\nto be equal to:\n <\"0x91240f5b6994c7ed80f9f94b1aa847880ad3b150\">\nbut was not.\n```\n^ 0xfe3... is the one we use for everything (dev.json)\n0x912... is a new one and it's the one in crypto/secp256r1.json\nso... somehow the wires are crossed... ",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2267/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2267/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/837961958",
    "html_url": "https://github.com/hyperledger/besu/issues/2267#issuecomment-837961958",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2267",
    "id": 837961958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzk2MTk1OA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T07:08:13Z",
    "updated_at": "2021-05-11T07:08:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Similar issue here https://app.circleci.com/pipelines/github/hyperledger/besu/8743/workflows/acf097ba-2e00-4288-9c38-5c26aedbc9f1/jobs/44907\n\n```\nfield/property 'from' differ:\n- actual value   : \"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73\"\n- expected value : \"0x91240f5b6994c7ed80f9f94b1aa847880ad3b150\"\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/837961958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/837983221",
    "html_url": "https://github.com/hyperledger/besu/issues/2267#issuecomment-837983221",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2267",
    "id": 837983221,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzk4MzIyMQ==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T07:25:54Z",
    "updated_at": "2021-05-11T07:25:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "And again https://app.circleci.com/pipelines/github/hyperledger/besu/8739/workflows/965233d6-dc1b-4223-99d3-226b1e0cd595/jobs/44883 \n```\nmustReturn0xUsingInvalidContractAddress - org.hyperledger.besu.tests.web3j.privacy.PrivCallAcceptanceTest\norg.opentest4j.AssertionFailedError: \nExpecting:\n <\"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73\">\nto be equal to:\n <\"0x91240f5b6994c7ed80f9f94b1aa847880ad3b150\">\nbut was not.\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/837983221/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/837988170",
    "html_url": "https://github.com/hyperledger/besu/issues/2267#issuecomment-837988170",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2267",
    "id": 837988170,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNzk4ODE3MA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T07:29:50Z",
    "updated_at": "2021-05-11T07:29:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is the first one I think: https://app.circleci.com/pipelines/github/hyperledger/besu/8277/workflows/81e00426-bd7d-418d-b158-cf9f0ff1d809/jobs/41843\n```\nnodesInGroupShouldHaveSameStateRoot - org.hyperledger.besu.tests.acceptance.privacy.PrivDebugGetStateRootOnchainGroupAcceptanceTest\njava.lang.AssertionError: \nExpecting:\n  <TransactionReceipt{transactionHash='null', transactionIndex='0x0', blockHash='0x74cea6c10595a0be48ab8f5ed6ce3d8034924f5b96d55cb0ed00455365af1405', blockNumber='0x2a', cumulativeGasUsed='null', gasUsed='null', contractAddress='null', root='null', status='null', from='null', to='null', logs=null, logsBloom='0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000', revertReason='null'}>\nto be equal to:\n  <TransactionReceipt{transactionHash='null', transactionIndex='null', blockHash='null', blockNumber='null', cumulativeGasUsed='null', gasUsed='null', contractAddress='null', root='null', status='null', from='null', to='null', logs=null, logsBloom='null', revertReason='null'}>\nwhen recursively comparing field by field, but found the following difference:\n\nfield/property 'from' differ:\n- actual value   : \"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73\"\n- expected value : \"0x91240f5b6994c7ed80f9f94b1aa847880ad3b150\"\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/837988170/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/839157400",
    "html_url": "https://github.com/hyperledger/besu/issues/2267#issuecomment-839157400",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2267",
    "id": 839157400,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzOTE1NzQwMA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T20:52:24Z",
    "updated_at": "2021-05-11T20:52:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is because the same privateKey is used for both accounts, and the BesuNode line 155 loads the keyPair from the private key. This method is static in KeyPairUtil\n\ncrypto/secp256r1.json\n```\n  \"alloc\": {\n    \"91240f5b6994c7ed80f9f94b1aa847880ad3b150\": {\n      \"privateKey\": \"8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63\",\n```\ndev.json\n```\n  \"alloc\": {\n    \"fe3b557e8fb62b89f4916b721be55ceb828dbd73\": {\n      \"privateKey\": \"8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63\",\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/839157400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/839205654",
    "html_url": "https://github.com/hyperledger/besu/issues/2267#issuecomment-839205654",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2267",
    "id": 839205654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzOTIwNTY1NA==",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-11T21:52:25Z",
    "updated_at": "2021-05-11T21:52:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "and KeyPairUtil has a static reference to the signatureAlgorithm",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/839205654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

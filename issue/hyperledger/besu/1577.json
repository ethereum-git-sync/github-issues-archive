{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1577",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1577/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1577/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1577/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1577",
  "id": 744740854,
  "node_id": "MDU6SXNzdWU3NDQ3NDA4NTQ=",
  "number": 1577,
  "title": "Discussion: differences in graphQL responses between Besu and Geth due to number encoding ",
  "user": {
    "login": "renaynay",
    "id": 41963722,
    "node_id": "MDQ6VXNlcjQxOTYzNzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/41963722?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/renaynay",
    "html_url": "https://github.com/renaynay",
    "followers_url": "https://api.github.com/users/renaynay/followers",
    "following_url": "https://api.github.com/users/renaynay/following{/other_user}",
    "gists_url": "https://api.github.com/users/renaynay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/renaynay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/renaynay/subscriptions",
    "organizations_url": "https://api.github.com/users/renaynay/orgs",
    "repos_url": "https://api.github.com/users/renaynay/repos",
    "events_url": "https://api.github.com/users/renaynay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/renaynay/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-11-17T13:33:45Z",
  "updated_at": "2021-01-06T16:21:18Z",
  "closed_at": "2021-01-06T16:21:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The [hive](https://github.com/ethereum/hive) test suite GraphQL tests found inconsistencies in the responses between the besu and geth clients in the number encoding, where Geth returns hex for certain fields as opposed to Besu which returns number/float.\r\n\r\nI've created a gist documenting the queries for which the responses of Geth and Besu differ due to different number encoding [here](https://gist.github.com/renaynay/aa1d02c4039738325fd436d54acc22b5). _(The GraphQL test logs can also be viewed on our [hive test run visualizer](https://hivetests.ethdevops.io))._\r\n\r\nGeth uses hex strings because JSON numbers are often implemented as floats, which cannot reliably represent all possible 64-bit integers. It would be nice to have a discussion about this to see if Besu wants to potentially switch to using hex as well.\r\n\r\ncc @fjl\r\n",
  "closed_by": {
    "login": "renaynay",
    "id": 41963722,
    "node_id": "MDQ6VXNlcjQxOTYzNzIy",
    "avatar_url": "https://avatars.githubusercontent.com/u/41963722?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/renaynay",
    "html_url": "https://github.com/renaynay",
    "followers_url": "https://api.github.com/users/renaynay/followers",
    "following_url": "https://api.github.com/users/renaynay/following{/other_user}",
    "gists_url": "https://api.github.com/users/renaynay/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/renaynay/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/renaynay/subscriptions",
    "organizations_url": "https://api.github.com/users/renaynay/orgs",
    "repos_url": "https://api.github.com/users/renaynay/repos",
    "events_url": "https://api.github.com/users/renaynay/events{/privacy}",
    "received_events_url": "https://api.github.com/users/renaynay/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1577/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1577/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/728989062",
    "html_url": "https://github.com/hyperledger/besu/issues/1577#issuecomment-728989062",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1577",
    "id": 728989062,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODk4OTA2Mg==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T15:06:04Z",
    "updated_at": "2020-11-17T23:19:10Z",
    "author_association": "MEMBER",
    "body": "Any change to GraphQL output would involve changing the spec and the schema - https://eips.ethereum.org/EIPS/eip-1767.  Our GraphQL library strongly maps the types in the schema with it's output, and any change to the output requires a change in the schema.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/728989062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/734785857",
    "html_url": "https://github.com/hyperledger/besu/issues/1577#issuecomment-734785857",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1577",
    "id": 734785857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDc4NTg1Nw==",
    "user": {
      "login": "renaynay",
      "id": 41963722,
      "node_id": "MDQ6VXNlcjQxOTYzNzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/41963722?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/renaynay",
      "html_url": "https://github.com/renaynay",
      "followers_url": "https://api.github.com/users/renaynay/followers",
      "following_url": "https://api.github.com/users/renaynay/following{/other_user}",
      "gists_url": "https://api.github.com/users/renaynay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/renaynay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/renaynay/subscriptions",
      "organizations_url": "https://api.github.com/users/renaynay/orgs",
      "repos_url": "https://api.github.com/users/renaynay/repos",
      "events_url": "https://api.github.com/users/renaynay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/renaynay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T11:19:25Z",
    "updated_at": "2020-11-27T11:19:25Z",
    "author_association": "NONE",
    "body": "Okay thank you for your response @shemnon , we are working on fixing some query responses to align better with the spec. \r\n\r\nI noticed however that we're failing to serve a couple of queries on `Account`, but I do not see that queries on `Account` are defined in the spec. There was some discussion about it over a year ago in this thread: https://ethereum-magicians.org/t/graphql-interface-to-ethereum-node-data/2710/40 , but beyond that, I don't see that the spec has been formally updated to include queries on `Account`. \r\n\r\nDo you have any further insights on this?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/734785857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/739105222",
    "html_url": "https://github.com/hyperledger/besu/issues/1577#issuecomment-739105222",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1577",
    "id": 739105222,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczOTEwNTIyMg==",
    "user": {
      "login": "atoulme",
      "id": 16758,
      "node_id": "MDQ6VXNlcjE2NzU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16758?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/atoulme",
      "html_url": "https://github.com/atoulme",
      "followers_url": "https://api.github.com/users/atoulme/followers",
      "following_url": "https://api.github.com/users/atoulme/following{/other_user}",
      "gists_url": "https://api.github.com/users/atoulme/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/atoulme/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/atoulme/subscriptions",
      "organizations_url": "https://api.github.com/users/atoulme/orgs",
      "repos_url": "https://api.github.com/users/atoulme/repos",
      "events_url": "https://api.github.com/users/atoulme/events{/privacy}",
      "received_events_url": "https://api.github.com/users/atoulme/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-05T01:55:42Z",
    "updated_at": "2020-12-05T01:55:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I had a chat with Danno:\r\n-no need to move away from numbers, as most values are well within the valid range.\r\n-hive should update tests to remove queries to `Account`, replacing them by querying for account in the latest or pending block.\r\n-Besu will deprecate and remove the top level account query, with low priority.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/739105222/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/740633586",
    "html_url": "https://github.com/hyperledger/besu/issues/1577#issuecomment-740633586",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1577",
    "id": 740633586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDYzMzU4Ng==",
    "user": {
      "login": "renaynay",
      "id": 41963722,
      "node_id": "MDQ6VXNlcjQxOTYzNzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/41963722?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/renaynay",
      "html_url": "https://github.com/renaynay",
      "followers_url": "https://api.github.com/users/renaynay/followers",
      "following_url": "https://api.github.com/users/renaynay/following{/other_user}",
      "gists_url": "https://api.github.com/users/renaynay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/renaynay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/renaynay/subscriptions",
      "organizations_url": "https://api.github.com/users/renaynay/orgs",
      "repos_url": "https://api.github.com/users/renaynay/repos",
      "events_url": "https://api.github.com/users/renaynay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/renaynay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-08T13:55:36Z",
    "updated_at": "2020-12-08T13:55:36Z",
    "author_association": "NONE",
    "body": "Thanks @atoulme and @shemnon, will update hive to remove the queries on Account from the graphql tests.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/740633586/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/755402561",
    "html_url": "https://github.com/hyperledger/besu/issues/1577#issuecomment-755402561",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1577",
    "id": 755402561,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NTQwMjU2MQ==",
    "user": {
      "login": "renaynay",
      "id": 41963722,
      "node_id": "MDQ6VXNlcjQxOTYzNzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/41963722?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/renaynay",
      "html_url": "https://github.com/renaynay",
      "followers_url": "https://api.github.com/users/renaynay/followers",
      "following_url": "https://api.github.com/users/renaynay/following{/other_user}",
      "gists_url": "https://api.github.com/users/renaynay/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/renaynay/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/renaynay/subscriptions",
      "organizations_url": "https://api.github.com/users/renaynay/orgs",
      "repos_url": "https://api.github.com/users/renaynay/repos",
      "events_url": "https://api.github.com/users/renaynay/events{/privacy}",
      "received_events_url": "https://api.github.com/users/renaynay/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-06T16:21:18Z",
    "updated_at": "2021-01-06T16:21:18Z",
    "author_association": "NONE",
    "body": "Okay, closing this issue as geth has been working on getting spec-compliant. Thanks for your help @shemnon @atoulme",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/755402561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

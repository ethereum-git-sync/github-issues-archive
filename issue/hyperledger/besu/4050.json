{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4050/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4050/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4050/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4050",
  "id": 1293003452,
  "node_id": "I_kwDODE2jmc5NEaq8",
  "number": 4050,
  "title": "Unable to trace_block [0xbe70da] - error 500, blocks whole node",
  "user": {
    "login": "Jakeler",
    "id": 13378765,
    "node_id": "MDQ6VXNlcjEzMzc4NzY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/13378765?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Jakeler",
    "html_url": "https://github.com/Jakeler",
    "followers_url": "https://api.github.com/users/Jakeler/followers",
    "following_url": "https://api.github.com/users/Jakeler/following{/other_user}",
    "gists_url": "https://api.github.com/users/Jakeler/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Jakeler/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Jakeler/subscriptions",
    "organizations_url": "https://api.github.com/users/Jakeler/orgs",
    "repos_url": "https://api.github.com/users/Jakeler/repos",
    "events_url": "https://api.github.com/users/Jakeler/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Jakeler/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2051683573,
      "node_id": "MDU6TGFiZWwyMDUxNjgzNTcz",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/P3",
      "name": "P3",
      "color": "ffff00",
      "default": false,
      "description": "Medium (ex: JSON-RPC request not working with a specific client library due to loose spec assumtion)"
    },
    {
      "id": 2058129555,
      "node_id": "MDU6TGFiZWwyMDU4MTI5NTU1",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/performance",
      "name": "performance",
      "color": "d29ce2",
      "default": false,
      "description": ""
    },
    {
      "id": 2152224197,
      "node_id": "MDU6TGFiZWwyMTUyMjI0MTk3",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamRevenant",
      "name": "TeamRevenant",
      "color": "78e298",
      "default": false,
      "description": "GH issues worked on by Revenant Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mark-terry",
    "id": 36909937,
    "node_id": "MDQ6VXNlcjM2OTA5OTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/36909937?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mark-terry",
    "html_url": "https://github.com/mark-terry",
    "followers_url": "https://api.github.com/users/mark-terry/followers",
    "following_url": "https://api.github.com/users/mark-terry/following{/other_user}",
    "gists_url": "https://api.github.com/users/mark-terry/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mark-terry/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mark-terry/subscriptions",
    "organizations_url": "https://api.github.com/users/mark-terry/orgs",
    "repos_url": "https://api.github.com/users/mark-terry/repos",
    "events_url": "https://api.github.com/users/mark-terry/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mark-terry/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mark-terry",
      "id": 36909937,
      "node_id": "MDQ6VXNlcjM2OTA5OTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/36909937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mark-terry",
      "html_url": "https://github.com/mark-terry",
      "followers_url": "https://api.github.com/users/mark-terry/followers",
      "following_url": "https://api.github.com/users/mark-terry/following{/other_user}",
      "gists_url": "https://api.github.com/users/mark-terry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mark-terry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mark-terry/subscriptions",
      "organizations_url": "https://api.github.com/users/mark-terry/orgs",
      "repos_url": "https://api.github.com/users/mark-terry/repos",
      "events_url": "https://api.github.com/users/mark-terry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mark-terry/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2022-07-04T10:59:19Z",
  "updated_at": "2023-01-26T12:50:32Z",
  "closed_at": "2023-01-26T12:50:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\nBesu is unable to return traces for one specific block on ropsten, which makes it unusable for indexing transaction from traces.\r\n\r\n### Steps to Reproduce (Bug)\r\n1. launch Besu+Teku on ropsten\r\n2. wait for it to be fully synced (both Eth1 and beacon API return syncing = false)\r\n3. request traces for block https://ropsten.etherscan.io/block/12480730\r\n```\r\ncurl --request POST 'localhost:8545' \\\r\n        --header 'Content-Type: application/json' \\\r\n        --data-raw '{\r\n        \"jsonrpc\": \"2.0\",\r\n        \"method\": \"trace_block\",\r\n        \"params\": [\"0xbe70da\"],\r\n        \"id\": \"test\"\r\n        }' -v\r\n```\r\n```\r\nbesu-merge-besu-1  | 2022-07-04 09:52:46.551+00:00 | vert.x-worker-thread-16 | DEBUG | JsonRpcExecutor | JSON-RPC request -> trace_block [0xbe70da]\r\n```\r\n**Expected behavior:** \r\nShould return traces, continue to operate and respond to other RPC requests. \r\nLike it succesfully does for the previous and following blocks (0xbe70d9, 0xbe70db).\r\n\r\n**Actual behavior:**\r\nHTTP request blocks for multiple minutes, eventually finishes with error 500. \r\nIn that time all other RPC requests are blocked as well. The log is full with:\r\n```\r\nbesu-merge-besu-1  | 2022-07-04 09:53:51.409+00:00 | vertx-blocked-thread-checker | WARN  | BlockedThreadChecker | Thread Thread[vert.x-worker-thread-16,5,main] has been blocked for 64853 ms, time limit is 60000 ms\r\nbesu-merge-besu-1  | io.vertx.core.VertxException: Thread blocked\r\nbesu-merge-besu-1  |    at app//org.apache.tuweni.bytes.MutableBytes32.create(MutableBytes32.java:28)\r\nbesu-merge-besu-1  |    at app//org.apache.tuweni.bytes.Bytes32.leftPad(Bytes32.java:177)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.vm.DebugOperationTracer.captureStack(DebugOperationTracer.java:218)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.vm.DebugOperationTracer.traceExecution(DebugOperationTracer.java:59)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.evm.EVM.executeNextOperation(EVM.java:81)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.evm.EVM.runToHalt(EVM.java:74)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.evm.processor.AbstractMessageProcessor.codeExecute(AbstractMessageProcessor.java:161)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.evm.processor.AbstractMessageProcessor.process(AbstractMessageProcessor.java:173)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.mainnet.MainnetTransactionProcessor.process(MainnetTransactionProcessor.java:485)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.mainnet.MainnetTransactionProcessor.processTransaction(MainnetTransactionProcessor.java:397)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.mainnet.MainnetTransactionProcessor.processTransaction(MainnetTransactionProcessor.java:181)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockTracer.lambda$prepareReplayAction$0(BlockTracer.java:60)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockTracer$$Lambda$1369/0x0000000840703c40.performAction(Unknown Source)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockReplay.lambda$block$0(BlockReplay.java:60)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockReplay$$Lambda$1371/0x0000000840710440.apply(Unknown Source)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockReplay.lambda$block$1(BlockReplay.java:66)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockReplay$$Lambda$1370/0x0000000840710040.perform(Unknown Source)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockReplay.performActionWithBlock(BlockReplay.java:155)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockReplay.block(BlockReplay.java:52)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.BlockTracer.trace(BlockTracer.java:45)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.TraceBlock.traceBlock(TraceBlock.java:94)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.TraceBlock.lambda$resultByBlockNumber$0(TraceBlock.java:79)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.TraceBlock$$Lambda$1367/0x0000000840704440.apply(Unknown Source)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.Optional.map(Optional.java:265)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.TraceBlock.resultByBlockNumber(TraceBlock.java:79)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.AbstractBlockParameterMethod.findResultByParamType(AbstractBlockParameterMethod.java:88)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.AbstractBlockParameterMethod.response(AbstractBlockParameterMethod.java:102)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.execution.BaseJsonRpcProcessor.process(BaseJsonRpcProcessor.java:42)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.execution.TracedJsonRpcProcessor.process(TracedJsonRpcProcessor.java:41)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.execution.TimedJsonRpcProcessor.process(TimedJsonRpcProcessor.java:45)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.jsonrpc.execution.JsonRpcExecutor.execute(JsonRpcExecutor.java:91)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.handlers.JsonRpcExecutorHandler.lambda$handler$6(JsonRpcExecutorHandler.java:76)\r\nbesu-merge-besu-1  |    at app//org.hyperledger.besu.ethereum.api.handlers.JsonRpcExecutorHandler$$Lambda$731/0x00000008404b9440.handle(Unknown Source)\r\nbesu-merge-besu-1  |    at app//io.vertx.ext.web.impl.BlockingHandlerDecorator.lambda$handle$0(BlockingHandlerDecorator.java:48)\r\nbesu-merge-besu-1  |    at app//io.vertx.ext.web.impl.BlockingHandlerDecorator$$Lambda$1110/0x000000084068b440.handle(Unknown Source)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.ContextImpl.lambda$null$0(ContextImpl.java:159)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.ContextImpl$$Lambda$950/0x00000008405d6c40.handle(Unknown Source)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.AbstractContext.dispatch(AbstractContext.java:100)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.ContextImpl.lambda$executeBlocking$1(ContextImpl.java:157)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.ContextImpl$$Lambda$946/0x00000008405d4840.run(Unknown Source)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.TaskQueue.run(TaskQueue.java:76)\r\nbesu-merge-besu-1  |    at app//io.vertx.core.impl.TaskQueue$$Lambda$667/0x000000084048c040.run(Unknown Source)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\nbesu-merge-besu-1  |    at app//io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\nbesu-merge-besu-1  |    at java.base@11.0.15/java.lang.Thread.run(Thread.java:829)\r\n```\r\nAlso teku complains immediately and does not sync new blocks anymore:\r\n```\r\nbesu-merge-teku-1  | 2022-07-04 09:52:58.986 ERROR - Execution Client is offline\r\nbesu-merge-teku-1  | java.util.concurrent.TimeoutException: null\r\n```\r\n\r\nThe node recovers a few minutes after that and starts to respond again.\r\n\r\n**Frequency:**\r\n100% with this block/RPC\r\n\r\n### Versions (Add all that apply)\r\n* Software/Java version:  official docker imge: `hyperledger/besu:22.4.3-openjdk-11-amd64`\r\n* OS Name & Version:  Ubuntu 20.04.4 LTS\r\n* Kernel Version:  5.4.0-121-generic\r\n* Docker Version: 20.10.17\r\n\r\n### Additional Information\r\n* Besu setup info\r\n```\r\n  \"--data-path=/var/lib/besu/\",\r\n  \"--network=ropsten\",\r\n  \"--rpc-http-enabled=true\",\r\n  \"--rpc-http-host=0.0.0.0\",\r\n  \"--rpc-http-cors-origins=*\",\r\n  \"--host-allowlist=*\",\r\n  \"--engine-host-allowlist=*\",\r\n  \"--engine-jwt-enabled=true\",\r\n  \"--engine-rpc-http-port=8550\",\r\n  \"--Xmerge-support=true\",\r\n  \"--engine-jwt-secret=/run/secrets/jwtsecret\",\r\n  \"--override-genesis-config=terminalTotalDifficulty=50000000000000000\",\r\n  \"--logging=DEBUG\"\r\n```\r\n* System info - 64GB RAM, 1TB SSD\r\n* Not sure if it is related, but the debug level log regularly contains:  \r\n```\r\nbesu-merge-besu-1  | 2022-07-04 09:53:21.715+00:00 | nioEventLoopGroup-3-5 | DEBUG | DeFramer | Invalid incoming message\r\nbesu-merge-besu-1  | io.netty.handler.codec.DecoderException: org.hyperledger.besu.ethereum.rlp.RLPException: Expected current item to be a list, but it is: BYTE_ELEMENT (at bytes 0-1: [04])\r\nbesu-merge-besu-1  |    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:480)\r\nbesu-merge-besu-1  |    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:279)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.p2p.rlpx.connections.netty.AbstractHandshakeHandler.channelRead0(AbstractHandshakeHandler.java:135)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.p2p.rlpx.connections.netty.AbstractHandshakeHandler.channelRead0(AbstractHandshakeHandler.java:44)\r\nbesu-merge-besu-1  |    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\nbesu-merge-besu-1  |    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\nbesu-merge-besu-1  |    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\nbesu-merge-besu-1  |    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\nbesu-merge-besu-1  |    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\nbesu-merge-besu-1  |    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)\r\nbesu-merge-besu-1  |    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\r\nbesu-merge-besu-1  |    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\r\nbesu-merge-besu-1  |    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\nbesu-merge-besu-1  |    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)\r\nbesu-merge-besu-1  |    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\nbesu-merge-besu-1  |    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\nbesu-merge-besu-1  |    at java.base/java.lang.Thread.run(Thread.java:829)\r\nbesu-merge-besu-1  | Caused by: org.hyperledger.besu.ethereum.rlp.RLPException: Expected current item to be a list, but it is: BYTE_ELEMENT (at bytes 0-1: [04])\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.rlp.AbstractRLPInput.error(AbstractRLPInput.java:202)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.rlp.AbstractRLPInput.enterList(AbstractRLPInput.java:448)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.rlp.BytesValueRLPInput.enterList(BytesValueRLPInput.java:23)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.rlp.AbstractRLPInput.enterList(AbstractRLPInput.java:432)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.rlp.BytesValueRLPInput.enterList(BytesValueRLPInput.java:23)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.p2p.rlpx.wire.messages.DisconnectMessage$Data.readFrom(DisconnectMessage.java:83)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.p2p.rlpx.wire.messages.DisconnectMessage.getReason(DisconnectMessage.java:61)\r\nbesu-merge-besu-1  |    at org.hyperledger.besu.ethereum.p2p.rlpx.connections.netty.DeFramer.decode(DeFramer.java:180)\r\nbesu-merge-besu-1  |    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:510)\r\nbesu-merge-besu-1  |    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:449)\r\nbesu-merge-besu-1  |    ... 23 more\r\n```\r\n\r\n",
  "closed_by": {
    "login": "non-fungible-nelson",
    "id": 85905982,
    "node_id": "MDQ6VXNlcjg1OTA1OTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/non-fungible-nelson",
    "html_url": "https://github.com/non-fungible-nelson",
    "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
    "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
    "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
    "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
    "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
    "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4050/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4050/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1173698742",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1173698742",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1173698742,
    "node_id": "IC_kwDODE2jmc5F9Ti2",
    "user": {
      "login": "daniellehrner",
      "id": 6727189,
      "node_id": "MDQ6VXNlcjY3MjcxODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6727189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/daniellehrner",
      "html_url": "https://github.com/daniellehrner",
      "followers_url": "https://api.github.com/users/daniellehrner/followers",
      "following_url": "https://api.github.com/users/daniellehrner/following{/other_user}",
      "gists_url": "https://api.github.com/users/daniellehrner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/daniellehrner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daniellehrner/subscriptions",
      "organizations_url": "https://api.github.com/users/daniellehrner/orgs",
      "repos_url": "https://api.github.com/users/daniellehrner/repos",
      "events_url": "https://api.github.com/users/daniellehrner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/daniellehrner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-04T11:20:17Z",
    "updated_at": "2022-07-04T11:20:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looking at this block there is one VERY big transaction that uses more than 15 million gas and executes more than 1200 static calls: https://ropsten.etherscan.io/tx/0x877f7cfe8ac00ec1c87300d9d8890bb05692a429cbbfc973d39cf6155b5b67eb\r\n\r\nMy guess is creating the trace for it is very compute intense and is blocking the node. We need to look into this to confirm this theory and see if we can optimize that if this should indeed by the case.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1173698742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1174027281",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1174027281",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1174027281,
    "node_id": "IC_kwDODE2jmc5F-jwR",
    "user": {
      "login": "Jakeler",
      "id": 13378765,
      "node_id": "MDQ6VXNlcjEzMzc4NzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13378765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jakeler",
      "html_url": "https://github.com/Jakeler",
      "followers_url": "https://api.github.com/users/Jakeler/followers",
      "following_url": "https://api.github.com/users/Jakeler/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jakeler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jakeler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jakeler/subscriptions",
      "organizations_url": "https://api.github.com/users/Jakeler/orgs",
      "repos_url": "https://api.github.com/users/Jakeler/repos",
      "events_url": "https://api.github.com/users/Jakeler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jakeler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-04T17:33:27Z",
    "updated_at": "2022-07-04T17:33:27Z",
    "author_association": "NONE",
    "body": "Also something similar happened a while ago:\r\nhttps://ropsten.etherscan.io/block/12080598\r\nhttps://ropsten.etherscan.io/tx/0x249c9d5f2a5784d13bdae569f51f07298763fab2c3e2e842615e90e1095b52ba\r\nAlthough this was limited to 3 mio. gas and not a problem for the exact same node - it returned 177 MB of trace json. \r\n\r\nWe are also wondering, whoever tested this if he is planning to send something like this on mainnet. At current prices 15 mio gas would cost about 0.3 Eth and could be a DoS attack for node operators, at least if the app depends on traces.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1174027281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1197490172",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1197490172",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1197490172,
    "node_id": "IC_kwDODE2jmc5HYD_8",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T23:38:32Z",
    "updated_at": "2022-07-27T23:38:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "blocked by #4140 but the workaround to set fast-sync-min-peers=1 should help",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1197490172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1205987060",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1205987060",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1205987060,
    "node_id": "IC_kwDODE2jmc5H4eb0",
    "user": {
      "login": "mark-terry",
      "id": 36909937,
      "node_id": "MDQ6VXNlcjM2OTA5OTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/36909937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mark-terry",
      "html_url": "https://github.com/mark-terry",
      "followers_url": "https://api.github.com/users/mark-terry/followers",
      "following_url": "https://api.github.com/users/mark-terry/following{/other_user}",
      "gists_url": "https://api.github.com/users/mark-terry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mark-terry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mark-terry/subscriptions",
      "organizations_url": "https://api.github.com/users/mark-terry/orgs",
      "repos_url": "https://api.github.com/users/mark-terry/repos",
      "events_url": "https://api.github.com/users/mark-terry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mark-terry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-05T02:55:31Z",
    "updated_at": "2022-08-05T02:55:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Required fix from #4210",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1205987060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1294981643",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1294981643",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1294981643,
    "node_id": "IC_kwDODE2jmc5NL9oL",
    "user": {
      "login": "Jakeler",
      "id": 13378765,
      "node_id": "MDQ6VXNlcjEzMzc4NzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13378765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jakeler",
      "html_url": "https://github.com/Jakeler",
      "followers_url": "https://api.github.com/users/Jakeler/followers",
      "following_url": "https://api.github.com/users/Jakeler/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jakeler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jakeler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jakeler/subscriptions",
      "organizations_url": "https://api.github.com/users/Jakeler/orgs",
      "repos_url": "https://api.github.com/users/Jakeler/repos",
      "events_url": "https://api.github.com/users/Jakeler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jakeler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-28T13:09:50Z",
    "updated_at": "2022-10-28T13:09:50Z",
    "author_association": "NONE",
    "body": "Also 2 cases on mainnet now:\r\n1. https://etherscan.io/tx/0xb24837d52c3861c9ef77b13d1db801350f08387dc93b489b156bd2e62b9850b3 - 28 mio. gas\r\n2. https://etherscan.io/tx/0xe313192dce958b606b1bad21c8890c1cf52460fa745e5239ef6841f91b5e46aa - 23 mio. gas\r\n\r\nIn my testing besu takes over 200 seconds = 3 minutes to respond in both cases, for example 2 `\"method\": \"trace_block\", \"params\": [\"0xf1bde6\"]`, even on a fairly powerful machine (16 core, 128 GB RAM).\r\n\r\nThis makes it increasingly difficult to run in production, if applications depending on traces have lower http timeouts. We were only able to get around it with a custom caching proxy. Please reconsider prioritization of this issue.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1294981643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1296382651",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1296382651",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1296382651,
    "node_id": "IC_kwDODE2jmc5NRTq7",
    "user": {
      "login": "mark-terry",
      "id": 36909937,
      "node_id": "MDQ6VXNlcjM2OTA5OTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/36909937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mark-terry",
      "html_url": "https://github.com/mark-terry",
      "followers_url": "https://api.github.com/users/mark-terry/followers",
      "following_url": "https://api.github.com/users/mark-terry/following{/other_user}",
      "gists_url": "https://api.github.com/users/mark-terry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mark-terry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mark-terry/subscriptions",
      "organizations_url": "https://api.github.com/users/mark-terry/orgs",
      "repos_url": "https://api.github.com/users/mark-terry/repos",
      "events_url": "https://api.github.com/users/mark-terry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mark-terry/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-30T23:53:54Z",
    "updated_at": "2022-10-30T23:53:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Jakeler We're currently reviewing a few approaches to resolve this issue.\r\n\r\nAre you able to share your usecase that experiences this issue? Are you tracing every block?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1296382651/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1306066536",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1306066536",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1306066536,
    "node_id": "IC_kwDODE2jmc5N2P5o",
    "user": {
      "login": "Jakeler",
      "id": 13378765,
      "node_id": "MDQ6VXNlcjEzMzc4NzY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13378765?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jakeler",
      "html_url": "https://github.com/Jakeler",
      "followers_url": "https://api.github.com/users/Jakeler/followers",
      "following_url": "https://api.github.com/users/Jakeler/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jakeler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jakeler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jakeler/subscriptions",
      "organizations_url": "https://api.github.com/users/Jakeler/orgs",
      "repos_url": "https://api.github.com/users/Jakeler/repos",
      "events_url": "https://api.github.com/users/Jakeler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jakeler/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-07T19:10:50Z",
    "updated_at": "2022-11-07T19:10:50Z",
    "author_association": "NONE",
    "body": "Ok, thank you.\r\nYes, we are tracing every block, parsing the output to check for some calls/events on contracts/wallets we care about.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1306066536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404934149",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1404934149",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1404934149,
    "node_id": "IC_kwDODE2jmc5TvZgF",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-26T12:29:40Z",
    "updated_at": "2023-01-26T12:29:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "@daniellehrner - related to current work? or can i close as a duplicate ? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404934149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404948871",
    "html_url": "https://github.com/hyperledger/besu/issues/4050#issuecomment-1404948871",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4050",
    "id": 1404948871,
    "node_id": "IC_kwDODE2jmc5TvdGH",
    "user": {
      "login": "daniellehrner",
      "id": 6727189,
      "node_id": "MDQ6VXNlcjY3MjcxODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6727189?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/daniellehrner",
      "html_url": "https://github.com/daniellehrner",
      "followers_url": "https://api.github.com/users/daniellehrner/followers",
      "following_url": "https://api.github.com/users/daniellehrner/following{/other_user}",
      "gists_url": "https://api.github.com/users/daniellehrner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/daniellehrner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/daniellehrner/subscriptions",
      "organizations_url": "https://api.github.com/users/daniellehrner/orgs",
      "repos_url": "https://api.github.com/users/daniellehrner/repos",
      "events_url": "https://api.github.com/users/daniellehrner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/daniellehrner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-26T12:40:51Z",
    "updated_at": "2023-01-26T12:40:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @daniellehrner - related to current work? or can i close as a duplicate ?\r\n\r\nYes, that appears to a duplicate",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1404948871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

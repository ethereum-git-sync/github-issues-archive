{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3355",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3355/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3355/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3355/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3355",
  "id": 1121035933,
  "node_id": "I_kwDODE2jmc5C0aad",
  "number": 3355,
  "title": "Sync issue due to compactions triggered for ttl",
  "user": {
    "login": "fab-10",
    "id": 91944855,
    "node_id": "U_kgDOBXr3lw",
    "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fab-10",
    "html_url": "https://github.com/fab-10",
    "followers_url": "https://api.github.com/users/fab-10/followers",
    "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
    "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
    "organizations_url": "https://api.github.com/users/fab-10/orgs",
    "repos_url": "https://api.github.com/users/fab-10/repos",
    "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fab-10/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2022-02-01T18:05:47Z",
  "updated_at": "2022-02-02T11:13:11Z",
  "closed_at": "2022-02-02T11:13:11Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nRocksDB by default enables one specific kind of leveled compaction, that is called [TTL](https://github.com/facebook/rocksdb/wiki/Leveled-Compaction#ttl), and it is only useful in some specific use cases, that do not apply to Besu.\r\nBy default this TTL compaction, is triggered every 30 days, and compacts all the data files on disk, and could last for days, with a huge pression on I/O, and when Besu is running on EBS volumes, this could cause the node to lose the sync, because the amount of I/O spent on the TTL compaction.\r\n\r\nThe solution, to these sync issues, is to disable TTL compactions for Besu.\r\n\r\n\r\n**Expected behavior:** [What you expect to happen]\r\nRocksDB will not trigger TTL compactions\r\n\r\n\r\n### Versions (Add all that apply)\r\n* Software version: 22.1.0-RC4-SNAPSHOT\r\n* Java version: Java11\r\n* Cloud VM, type, size: AWS\r\n\r\n### Additional Information\r\n\r\n",
  "closed_by": {
    "login": "fab-10",
    "id": 91944855,
    "node_id": "U_kgDOBXr3lw",
    "avatar_url": "https://avatars.githubusercontent.com/u/91944855?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fab-10",
    "html_url": "https://github.com/fab-10",
    "followers_url": "https://api.github.com/users/fab-10/followers",
    "following_url": "https://api.github.com/users/fab-10/following{/other_user}",
    "gists_url": "https://api.github.com/users/fab-10/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fab-10/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fab-10/subscriptions",
    "organizations_url": "https://api.github.com/users/fab-10/orgs",
    "repos_url": "https://api.github.com/users/fab-10/repos",
    "events_url": "https://api.github.com/users/fab-10/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fab-10/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3355/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3355/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

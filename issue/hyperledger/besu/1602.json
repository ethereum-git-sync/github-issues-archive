{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1602/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1602/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1602/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1602",
  "id": 749047240,
  "node_id": "MDU6SXNzdWU3NDkwNDcyNDA=",
  "number": 1602,
  "title": "[Suggestion] Tracing",
  "user": {
    "login": "iFA88",
    "id": 18205395,
    "node_id": "MDQ6VXNlcjE4MjA1Mzk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/18205395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iFA88",
    "html_url": "https://github.com/iFA88",
    "followers_url": "https://api.github.com/users/iFA88/followers",
    "following_url": "https://api.github.com/users/iFA88/following{/other_user}",
    "gists_url": "https://api.github.com/users/iFA88/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iFA88/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iFA88/subscriptions",
    "organizations_url": "https://api.github.com/users/iFA88/orgs",
    "repos_url": "https://api.github.com/users/iFA88/repos",
    "events_url": "https://api.github.com/users/iFA88/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iFA88/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4164098293,
      "node_id": "LA_kwDODE2jmc74Mxj1",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/icebox",
      "name": "icebox",
      "color": "1D76DB",
      "default": false,
      "description": "items that need more consideration, time, or can wait"
    },
    {
      "id": 4328706977,
      "node_id": "LA_kwDODE2jmc8AAAABAgLToQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamChupa",
      "name": "TeamChupa",
      "color": "fbca04",
      "default": false,
      "description": "GH issues worked on by Chupacabara Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-11-23T18:56:26Z",
  "updated_at": "2022-07-19T17:34:33Z",
  "closed_at": "2022-07-19T17:34:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Greetings everyone!\r\n\r\nAs the docs says i should use full archive node for get block/tx traces : ( https://besu.hyperledger.org/en/stable/Reference/API-Methods/#trace_block )\r\n> Your node must be an archive node (that is, synchronized without pruning or fast sync) or the requested block must be within the number of pruning blocks retained (by default, 1024).\r\n\r\nThe Ethereum mainnet need more than **4 TB** (SSD) storage. OpenEthereum (Parity) has a switch (`--tracing on`) to store the traces to the DB. Is there any way to implement this for Besu? Traces are very important for me but I can not maintane so much storage for the archive node.\r\n\r\nThanks!",
  "closed_by": {
    "login": "non-fungible-nelson",
    "id": 85905982,
    "node_id": "MDQ6VXNlcjg1OTA1OTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/non-fungible-nelson",
    "html_url": "https://github.com/non-fungible-nelson",
    "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
    "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
    "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
    "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
    "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
    "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1602/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1602/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/732397346",
    "html_url": "https://github.com/hyperledger/besu/issues/1602#issuecomment-732397346",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
    "id": 732397346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjM5NzM0Ng==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T20:07:21Z",
    "updated_at": "2020-11-23T20:07:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for logging this, @iFA88!\r\n\r\nTo make sure I understand, you want a DB to persist traces on a full (e.g. **not** an archive) node? I assume the use case for this is tracing blocks close to the tip of the chain, is that right? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/732397346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/732459228",
    "html_url": "https://github.com/hyperledger/besu/issues/1602#issuecomment-732459228",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
    "id": 732459228,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjQ1OTIyOA==",
    "user": {
      "login": "iFA88",
      "id": 18205395,
      "node_id": "MDQ6VXNlcjE4MjA1Mzk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/18205395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iFA88",
      "html_url": "https://github.com/iFA88",
      "followers_url": "https://api.github.com/users/iFA88/followers",
      "following_url": "https://api.github.com/users/iFA88/following{/other_user}",
      "gists_url": "https://api.github.com/users/iFA88/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iFA88/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iFA88/subscriptions",
      "organizations_url": "https://api.github.com/users/iFA88/orgs",
      "repos_url": "https://api.github.com/users/iFA88/repos",
      "events_url": "https://api.github.com/users/iFA88/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iFA88/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T22:20:07Z",
    "updated_at": "2020-11-23T22:20:07Z",
    "author_association": "NONE",
    "body": "Hey!\r\n>To make sure I understand, you want a DB to persist traces on a full (e.g. not an archive) node?\r\n\r\nyes and\r\n> I assume the use case for this is tracing blocks close to the tip of the chain, is that right?\r\n\r\nthat i don't understand well. I need the old traces also for build a database with all calls which in EVM happens.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/732459228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/733094206",
    "html_url": "https://github.com/hyperledger/besu/issues/1602#issuecomment-733094206",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
    "id": 733094206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMzA5NDIwNg==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-24T16:33:29Z",
    "updated_at": "2020-11-24T16:33:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@iFA88 I'm trying to understand how your concern about DB size and saving the traces overlap :-) \r\n\r\nIt seems to be that if you want to store traces for \"old\" transactions (e.g. older than what you would get with Fast Sync/Warp Sync on OpenEthereum), then you need to run an Archive node, which is ~4TB, and will need even more storage for the trace DB. \r\n\r\nMaybe another way to ask this is what happens when you set the `--tracing on` flag in OpenEthereum? Does it warp sync and save the traces from the first block it has fully imported? How does the DB size grow? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/733094206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/733104057",
    "html_url": "https://github.com/hyperledger/besu/issues/1602#issuecomment-733104057",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
    "id": 733104057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMzEwNDA1Nw==",
    "user": {
      "login": "iFA88",
      "id": 18205395,
      "node_id": "MDQ6VXNlcjE4MjA1Mzk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/18205395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iFA88",
      "html_url": "https://github.com/iFA88",
      "followers_url": "https://api.github.com/users/iFA88/followers",
      "following_url": "https://api.github.com/users/iFA88/following{/other_user}",
      "gists_url": "https://api.github.com/users/iFA88/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iFA88/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iFA88/subscriptions",
      "organizations_url": "https://api.github.com/users/iFA88/orgs",
      "repos_url": "https://api.github.com/users/iFA88/repos",
      "events_url": "https://api.github.com/users/iFA88/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iFA88/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-24T16:50:30Z",
    "updated_at": "2020-11-24T16:50:30Z",
    "author_association": "NONE",
    "body": "@timbeiko Hey, I see now the problem. Lets first declare some concept that we don't misunderstand each other.\r\n\r\nArchive node:\r\nPruning mode is totally disabled, no old data will be removed from the database. With this feature we can get historical states from any blocks anytime, like an address balance on N block.\r\n\r\nFull node:\r\nPurning are enabled, all states will be removed from database which N block olds old (for Besu is that 1024 default).\r\n\r\nOn both mode fast sync are disabled like when you run OpenEthereum in archive or/and tracing mode. Every block/transaction are replayed and verified trough EVM. So traces will be generated, just the OpenEthereum when tracing mode is enabled they stores them and will not be pruned. An OpenEthereum full node with tracing uses about 550gb space on mainnet.\r\n\r\nBesu docs says that the traces is only available when I run in archive mode. An archive node uses at least 4TB storage.\r\n\r\nFor my project I need a node which ran in full mode with pruning which stores all historical traces.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/733104057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/733160936",
    "html_url": "https://github.com/hyperledger/besu/issues/1602#issuecomment-733160936",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
    "id": 733160936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMzE2MDkzNg==",
    "user": {
      "login": "timbeiko",
      "id": 9390255,
      "node_id": "MDQ6VXNlcjkzOTAyNTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/timbeiko",
      "html_url": "https://github.com/timbeiko",
      "followers_url": "https://api.github.com/users/timbeiko/followers",
      "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
      "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
      "organizations_url": "https://api.github.com/users/timbeiko/orgs",
      "repos_url": "https://api.github.com/users/timbeiko/repos",
      "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
      "received_events_url": "https://api.github.com/users/timbeiko/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-24T18:36:41Z",
    "updated_at": "2020-11-24T18:36:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, got it! Thank you for the clarification. I suspect something like this would require a fairly significant change to how we manage our database, which is in the works (see [this](https://wiki.hyperledger.org/pages/viewpage.action?pageId=39618796)). We may be able to start looking at storing traces while pruning old states in Q2/Q3 next year, but I don't think we will be able to before. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/733160936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1189369220",
    "html_url": "https://github.com/hyperledger/besu/issues/1602#issuecomment-1189369220",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1602",
    "id": 1189369220,
    "node_id": "IC_kwDODE2jmc5G5FWE",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T17:34:33Z",
    "updated_at": "2022-07-19T17:34:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Close as stale - can implement a plug-in or external approach. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1189369220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3725/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3725/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3725/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3725",
  "id": 1202683321,
  "node_id": "I_kwDODE2jmc5Hr325",
  "number": 3725,
  "title": "Receipts Root Mismatch",
  "user": {
    "login": "jflo",
    "id": 345937,
    "node_id": "MDQ6VXNlcjM0NTkzNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jflo",
    "html_url": "https://github.com/jflo",
    "followers_url": "https://api.github.com/users/jflo/followers",
    "following_url": "https://api.github.com/users/jflo/following{/other_user}",
    "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
    "organizations_url": "https://api.github.com/users/jflo/orgs",
    "repos_url": "https://api.github.com/users/jflo/repos",
    "events_url": "https://api.github.com/users/jflo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jflo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2022-04-13T02:53:30Z",
  "updated_at": "2022-04-25T18:05:33Z",
  "closed_at": "2022-04-25T18:05:33Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Investigation Ongoing\r\n\r\n### Description\r\n- The besu/teku pair halted at block 14564207 (TTD block)\r\n    - Thats the TTD block. Besu used it as the common ancestor with peers it gathered.\r\n    - Besu started a backward sync, before receiving its first fcu.\r\n ```\r\n2022-04-12 14:58:01.206+00:00 | vert.x-worker-thread-0 | INFO  | MergeCoordinator | appending block hash 0x0ef93f8924634cc54164f73dd1e5ccb1a33f3802f2f4071ef781067e4aaca271 to backward sync\r\n```\r\n\r\n- that has would end up being the first one Besu reported as not being able to find the header for:\r\n\r\n```\r\n2022-04-12 14:58:36.395+00:00 | nioEventLoopGroup-3-8 | WARN  | BackwardSyncContext | there was an uncaught exception during backward sync\r\njava.util.concurrent.CompletionException: org.hyperledger.besu.ethereum.eth.sync.backwardsync.BackwardSyncException: Did not receive a header for hash {}0x0ef93f8924634cc54164f73dd1e5ccb1a33f3802f2f4071ef781067e4aaca271\r\n```\r\n- Is the completion exception the result of a timeout on trying to find that hash from a peer?\r\n\r\n```\r\n2022-04-12 14:58:42.606+00:00 | EthScheduler-Timer-0 | ERROR | BackwardSyncLookupService | Failed to fetch blocks because java.util.concurrent.TimeoutException: Timeout after 5000 MILLISECONDS Current peers: 12.  Waiting for few seconds ...\r\n```\r\n\r\n```\r\n2022-04-12 21:20:38.008+00:00 | nioEventLoopGroup-3-8 | INFO  | BackwardSyncPhase | Backward Phase finished.\r\n```\r\n\r\n- Still getting messages of blocks being appended to backward sync\r\n\r\n```\r\n2022-04-12 21:21:52.780+00:00 | ForkJoinPool.commonPool-worker-19 | WARN  | MainnetBlockBodyValidator | Invalid block: receipts root mismatch (expected=0x93462180b146c740623116abbb976111c9c4ac3f6320ab0b0591ae65c1b6c073, actual=0x2f68c64cd2072bb7b19e5fa67\r\n8940a5c26219ec7f6b4d72469985af1a29503b1)\r\n2022-04-12 21:21:52.781+00:00 | ForkJoinPool.commonPool-worker-19 | ERROR | MainnetBlockValidator | Block body not valid. Block 14564235 (0x6bd5f7eaf8517616ab4cf4443eb19f451caa1f115ee39157baa035b7bb3afeee)\r\n```\r\n\r\n- About 6 hours later, Besu moved forward to block 14564234\r\n    - Probably because it found peers. Could confirm this with prometheus metrics.\r\n- Once it got to 14564235 (0x6bd5f7eaf8517616ab4cf4443eb19f451caa1f115ee39157baa035b7bb3afeee) it halted due to a receipts root mismatch. We are waiting on a block trace from Geth, which passed this block \r\n(14564235 (0xDE3B8B),  hash 0x6bd5f7eaf8517616ab4cf4443eb19f451caa1f115ee39157baa035b7bb3afeee) just fine.\r\n\r\n",
  "closed_by": {
    "login": "shemnon",
    "id": 38109,
    "node_id": "MDQ6VXNlcjM4MTA5",
    "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shemnon",
    "html_url": "https://github.com/shemnon",
    "followers_url": "https://api.github.com/users/shemnon/followers",
    "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
    "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
    "organizations_url": "https://api.github.com/users/shemnon/orgs",
    "repos_url": "https://api.github.com/users/shemnon/repos",
    "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shemnon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3725/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3725/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1097499698",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1097499698",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1097499698,
    "node_id": "IC_kwDODE2jmc5BaoQy",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-13T02:57:01Z",
    "updated_at": "2022-04-13T02:57:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "besu's trace of that (perceived bad) block:\r\n\r\n[trace-0xde3b8b.tar.gz](https://github.com/hyperledger/besu/files/8477851/trace-0xde3b8b.tar.gz)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1097499698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1097622822",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1097622822",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1097622822,
    "node_id": "IC_kwDODE2jmc5BbGUm",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-13T06:50:39Z",
    "updated_at": "2022-04-13T06:50:39Z",
    "author_association": "NONE",
    "body": "Geth trace: \r\n```\r\ncat block_0x6bd5f7ea-34-0x9a16559f-2615258477 \r\n{\"pc\":0,\"op\":96,\"gas\":\"0x10d88\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":2,\"op\":96,\"gas\":\"0x10d85\",\"gasCost\":\"0x3\",\"memSize\":0,\"stack\":[\"0x80\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":4,\"op\":82,\"gas\":\"0x10d82\",\"gasCost\":\"0xc\",\"memSize\":96,\"stack\":[\"0x80\",\"0x40\"],\"depth\":1,\"refund\":0,\"opName\":\"MSTORE\"}\r\n{\"pc\":5,\"op\":52,\"gas\":\"0x10d76\",\"gasCost\":\"0x2\",\"memSize\":96,\"stack\":[],\"depth\":1,\"refund\":0,\"opName\":\"CALLVALUE\"}\r\n{\"pc\":6,\"op\":128,\"gas\":\"0x10d74\",\"gasCost\":\"0x3\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\"],\"depth\":1,\"refund\":0,\"opName\":\"DUP1\"}\r\n{\"pc\":7,\"op\":21,\"gas\":\"0x10d71\",\"gasCost\":\"0x3\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\",\"0xc2db6b71da9000\"],\"depth\":1,\"refund\":0,\"opName\":\"ISZERO\"}\r\n{\"pc\":8,\"op\":97,\"gas\":\"0x10d6e\",\"gasCost\":\"0x3\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\",\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH2\"}\r\n{\"pc\":11,\"op\":87,\"gas\":\"0x10d6b\",\"gasCost\":\"0xa\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\",\"0x0\",\"0x10\"],\"depth\":1,\"refund\":0,\"opName\":\"JUMPI\"}\r\n{\"pc\":12,\"op\":96,\"gas\":\"0x10d61\",\"gasCost\":\"0x3\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\"],\"depth\":1,\"refund\":0,\"opName\":\"PUSH1\"}\r\n{\"pc\":14,\"op\":128,\"gas\":\"0x10d5e\",\"gasCost\":\"0x3\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\",\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"DUP1\"}\r\n{\"pc\":15,\"op\":253,\"gas\":\"0x10d5b\",\"gasCost\":\"0x0\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\",\"0x0\",\"0x0\"],\"depth\":1,\"refund\":0,\"opName\":\"REVERT\"}\r\n{\"pc\":15,\"op\":253,\"gas\":\"0x10d5b\",\"gasCost\":\"0x0\",\"memSize\":96,\"stack\":[\"0xc2db6b71da9000\"],\"depth\":1,\"refund\":0,\"opName\":\"REVERT\",\"error\":\"execution reverted\"}\r\n{\"output\":\"\",\"gasUsed\":\"0x2d\",\"time\":77271,\"error\":\"execution reverted\"}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1097622822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1099720860",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1099720860",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1099720860,
    "node_id": "IC_kwDODE2jmc5BjGic",
    "user": {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-14T23:37:35Z",
    "updated_at": "2022-04-14T23:37:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "geths trace of the same block\r\n[geth-trace.tar.gz](https://github.com/hyperledger/besu/files/8492879/geth-trace.tar.gz)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1099720860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1099792681",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1099792681",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1099792681,
    "node_id": "IC_kwDODE2jmc5BjYEp",
    "user": {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-15T02:26:42Z",
    "updated_at": "2022-04-15T03:07:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Transaction 30 in the block, at pc 5331 the stack differs between the two. The top value of the stack in 0x0 in geth, and 0x87e795ecd14675853ef0be2fd164477e6f8910cf in besu. Investigation continues.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1099792681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1100709731",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1100709731",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1100709731,
    "node_id": "IC_kwDODE2jmc5Bm39j",
    "user": {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-16T17:01:59Z",
    "updated_at": "2022-04-16T17:01:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Am so far unable to confirm that tx 30 is the one that is breaking the receipts root. Prior theories that the block traces were relevant, no longer hold water; I attached a debugger to the mainnet-shadowfork1 host, which is looping on the bad block. With a breakpoint before the error is emitted, I can evaluate all other methods in `MainnetBlockBodyValidator` used to validate the block:\r\n```\r\nvalidateStateRoot\r\nvalidateTransactionsRoot\r\nvalidateGasUsed\r\nvalidateLogsBloom\r\nvalidateEthHash\r\n```\r\nThey all pass. Would love for someone to check my work, because if that is all correct, and our traces are also out of line with Geth, then the traces cannot be trusted. If besus traces were correct, state root should not have validated.\r\n\r\nI've isolated where the receipts are hashed, and if I can get a list of receipts from Geth, I could compare them to find the problem ones. The hash is based on RLP encoded receipts though, and I haven't found a way to get those receipts from Geth in RLP, only in json. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1100709731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1100907935",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1100907935",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1100907935,
    "node_id": "IC_kwDODE2jmc5BnoWf",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-17T16:09:29Z",
    "updated_at": "2022-04-17T16:09:29Z",
    "author_association": "NONE",
    "body": "109  has a really long trace in geth, while besu doesn't have any trace (in the tar that you send)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1100907935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1105256180",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1105256180",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1105256180,
    "node_id": "IC_kwDODE2jmc5B4N70",
    "user": {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-21T14:04:22Z",
    "updated_at": "2022-04-21T14:04:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "after gathering receipts for all transactions in the block from both geth and besu, and normalizing them, we find that the transaction at index 73 emits different values in the data field of its logs. Attaching the normalized receipts json for each, as well as a jsondiff.\r\n\r\n[tx73_receipts_diff.zip](https://github.com/hyperledger/besu/files/8531623/tx73_receipts_diff.zip)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1105256180/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1108879126",
    "html_url": "https://github.com/hyperledger/besu/issues/3725#issuecomment-1108879126",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3725",
    "id": 1108879126,
    "node_id": "IC_kwDODE2jmc5CGCcW",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-25T18:05:33Z",
    "updated_at": "2022-04-25T18:05:33Z",
    "author_association": "MEMBER",
    "body": "To close the loop on this - \r\n* The Difficulty Operation was still in place, rather than the PREVRANDAOHASH operation\r\n* the difficulty reported zero on a tx that was doing may calculations on a quasi-random number\r\n* The value was not stored in steate, but was instead emitted as a log message\r\n* Hence, the state root was fine (all the same operations occurred and not state was written) but the logs were different (different data for the math) and hence the receipt root was different (because logs are part of the receipt).\r\n\r\nFixed by PR #3748",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1108879126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4835",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4835/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4835/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4835/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4835",
  "id": 1500259277,
  "node_id": "I_kwDODE2jmc5ZbCPN",
  "number": 4835,
  "title": "Variable number of transactions received before returning \"Transaction nonce is too distant from current sender nonce\" error",
  "user": {
    "login": "francescomiliani",
    "id": 75777914,
    "node_id": "MDQ6VXNlcjc1Nzc3OTE0",
    "avatar_url": "https://avatars.githubusercontent.com/u/75777914?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/francescomiliani",
    "html_url": "https://github.com/francescomiliani",
    "followers_url": "https://api.github.com/users/francescomiliani/followers",
    "following_url": "https://api.github.com/users/francescomiliani/following{/other_user}",
    "gists_url": "https://api.github.com/users/francescomiliani/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/francescomiliani/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/francescomiliani/subscriptions",
    "organizations_url": "https://api.github.com/users/francescomiliani/orgs",
    "repos_url": "https://api.github.com/users/francescomiliani/repos",
    "events_url": "https://api.github.com/users/francescomiliani/events{/privacy}",
    "received_events_url": "https://api.github.com/users/francescomiliani/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-12-16T13:55:58Z",
  "updated_at": "2022-12-21T10:56:23Z",
  "closed_at": "2022-12-21T10:56:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nWe are performing a performance test on Besu 22.10.2, IBFT2 consensus protocol, on a private network, gas price free, with 4 validators, 4 nodes, block time 2 sec.\r\n\r\nBy sending a burst of transactions to the node, from the same wallet, increasing the nonce by tx, we get the error \"Transaction nonce is too distant from current sender nonce\" for all transactions greater than 5 pending not yet mined (i.e., from 0 to 4, are received correctly by the node and managed, the others are immediately discarded with the previous error message).\r\n\r\nOur question would be: is it possible to change this parameter (this value before the discard, currently equal to 5), and if so, how?\r\n\r\n### Acceptance Criteria\r\n* Variable number of transactions received before returning \"Transaction nonce is too distant from current sender nonce\" error\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Start 4 validators, ibft 2 consensus protocol, gas price 0\r\n2. Start 4 nodes, ibft 2 consensus protocol, gas price 0\r\n3. Send 10 000 TXs to a node, non-validator, same wallet, varying the nonce in an increasing way: 0, 1, 2, ...\r\n4. Check the answers\r\n\r\n**Expected behavior:** \r\nReceipt of all txs without errors, or, be able to modify this parameter in the configuration\r\n\r\n**Actual behavior:** \r\nReturns \"Transaction nonce is too distant from current sender nonce\" after 5th tx from same wallet\r\n\r\n**Frequency:** \r\nEvery time we perform this kind of test\r\n\r\n### Versions\r\n* Software version: 22.10.2\r\n* Java version: \r\njava version \"17.0.5\" 2022-10-18 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.5+9-LTS-191)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.5+9-LTS-191, mixed mode, sharing)\r\n\r\n* OS Name & Version:\r\nNAME=\"Red Hat Enterprise Linux Server\"\r\nVERSION=\"7.6 (Maipo)\"\r\nID=\"rhel\"\r\nID_LIKE=\"fedora\"\r\nVARIANT=\"Server\"\r\nVARIANT_ID=\"server\"\r\nVERSION_ID=\"7.6\"\r\nPRETTY_NAME=\"Red Hat Enterprise Linux Server 7.6 (Maipo)\"\r\nANSI_COLOR=\"0;31\"\r\nCPE_NAME=\"cpe:/o:redhat:enterprise_linux:7.6:GA:server\"\r\nHOME_URL=\"https://www.redhat.com/\"\r\nBUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\r\n\r\nREDHAT_BUGZILLA_PRODUCT=\"Red Hat Enterprise Linux 7\"\r\nREDHAT_BUGZILLA_PRODUCT_VERSION=7.6\r\nREDHAT_SUPPORT_PRODUCT=\"Red Hat Enterprise Linux\"\r\nREDHAT_SUPPORT_PRODUCT_VERSION=\"7.6\"\r\nRed Hat Enterprise Linux Server release 7.6 (Maipo)\r\nRed Hat Enterprise Linux Server release 7.6 (Maipo)\r\n\r\n* Kernel Version: Linux ethsv-ethval-p001 3.10.0-957.el7.x86_64 #1 SMP Thu Oct 4 20:48:51 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version:\r\nClient:\r\n Version:         1.13.1\r\n API version:     1.26\r\n Package version: docker-1.13.1-96.gitb2f74b2.el7.x86_64\r\n Go version:      go1.10.8\r\n Git commit:      b2f74b2/1.13.1\r\n Built:           Tue Apr  2 21:01:07 2019\r\n OS/Arch:         linux/amd64\r\n\r\nServer:\r\n Version:         1.13.1\r\n API version:     1.26 (minimum version 1.12)\r\n Package version: docker-1.13.1-96.gitb2f74b2.el7.x86_64\r\n Go version:      go1.10.8\r\n Git commit:      b2f74b2/1.13.1\r\n Built:           Tue Apr  2 21:01:07 2019\r\n OS/Arch:         linux/amd64\r\n Experimental:    false\r\n\r\n\r\n* Cloud VM, type, size: N/A\r\n\r\n### Smart contract information: N/A\r\n\r\n### Additional Information (Add any of the following or anything else that may be relevant)\r\n* Besu setup info - genesis file, config options\r\n{\r\n  \"config\": {\r\n    \"chainId\": 1111,\r\n    \"constantinopleFixBlock\": 0,\r\n    \"ibft2\": {\r\n      \"blockperiodseconds\": 2,\r\n      \"epochlength\": 30000,\r\n      \"requesttimeoutseconds\": 8\r\n    },\r\n    \"contractSizeLimit\": 2147483647\r\n  },\r\n  \"nonce\": \"0x0\",\r\n  \"timestamp\": \"0x58ee40ba\",\r\n  \"extraData\": \"f853a00000000000000000000000000000000000000000000000000000000000000000ea94fe3b557e8fb62b89f4916b721be55ceb828dbd7394627306090abab3a6e1400e9345bc60c78a8bef57808400000000c0\",\r\n  \"gasLimit\": \"0x1fffffffffffff\",\r\n  \"difficulty\": \"0x1\",\r\n  \"mixHash\": \"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365\",\r\n  \"coinbase\": \"0x0000000000000000000000000000000000000000\"\r\n}\r\n\r\n* System info - memory, CPU\r\n\r\nmemory:\r\nRANGE                                 SIZE  STATE REMOVABLE BLOCK\r\n0x0000000000000000-0x00000000bfffffff   3G online        no  0-23\r\n0x0000000100000000-0x000000013fffffff   1G online        no 32-39\r\n\r\nMemory block size:       128M\r\nTotal online memory:       4G\r\nTotal offline memory:      0B\r\n\r\ncpu:\r\n\r\nArchitecture:          x86_64\r\nCPU op-mode(s):        32-bit, 64-bit\r\nByte Order:            Little Endian\r\nCPU(s):                8\r\nOn-line CPU(s) list:   0-7\r\nThread(s) per core:    1\r\nCore(s) per socket:    1\r\nSocket(s):             8\r\nNUMA node(s):          1\r\nVendor ID:             GenuineIntel\r\nCPU family:            6\r\nModel:                 63\r\nModel name:            Intel(R) Xeon(R) Gold 6152 CPU @ 2.10GHz\r\nStepping:              0\r\nCPU MHz:               2095.077\r\nBogoMIPS:              4190.15\r\nHypervisor vendor:     VMware\r\nVirtualization type:   full\r\nL1d cache:             32K\r\nL1i cache:             32K\r\nL2 cache:              1024K\r\nL3 cache:              30976K\r\nNUMA node0 CPU(s):     0-7",
  "closed_by": {
    "login": "francescomiliani",
    "id": 75777914,
    "node_id": "MDQ6VXNlcjc1Nzc3OTE0",
    "avatar_url": "https://avatars.githubusercontent.com/u/75777914?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/francescomiliani",
    "html_url": "https://github.com/francescomiliani",
    "followers_url": "https://api.github.com/users/francescomiliani/followers",
    "following_url": "https://api.github.com/users/francescomiliani/following{/other_user}",
    "gists_url": "https://api.github.com/users/francescomiliani/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/francescomiliani/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/francescomiliani/subscriptions",
    "organizations_url": "https://api.github.com/users/francescomiliani/orgs",
    "repos_url": "https://api.github.com/users/francescomiliani/repos",
    "events_url": "https://api.github.com/users/francescomiliani/events{/privacy}",
    "received_events_url": "https://api.github.com/users/francescomiliani/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4835/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4835/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1361164791",
    "html_url": "https://github.com/hyperledger/besu/issues/4835#issuecomment-1361164791",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4835",
    "id": 1361164791,
    "node_id": "IC_kwDODE2jmc5RIbn3",
    "user": {
      "login": "francescomiliani",
      "id": 75777914,
      "node_id": "MDQ6VXNlcjc1Nzc3OTE0",
      "avatar_url": "https://avatars.githubusercontent.com/u/75777914?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/francescomiliani",
      "html_url": "https://github.com/francescomiliani",
      "followers_url": "https://api.github.com/users/francescomiliani/followers",
      "following_url": "https://api.github.com/users/francescomiliani/following{/other_user}",
      "gists_url": "https://api.github.com/users/francescomiliani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/francescomiliani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/francescomiliani/subscriptions",
      "organizations_url": "https://api.github.com/users/francescomiliani/orgs",
      "repos_url": "https://api.github.com/users/francescomiliani/repos",
      "events_url": "https://api.github.com/users/francescomiliani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/francescomiliani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-21T10:56:11Z",
    "updated_at": "2022-12-21T10:56:11Z",
    "author_association": "NONE",
    "body": "Merge reference: https://github.com/hyperledger/besu/pull/4417\r\n\r\nSame of: \r\n- https://github.com/hyperledger/besu/issues/4611\r\n- https://github.com/hyperledger/besu/issues/4739\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1361164791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

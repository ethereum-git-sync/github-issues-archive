{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2389",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2389/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2389/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2389/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2389",
  "id": 915278859,
  "node_id": "MDU6SXNzdWU5MTUyNzg4NTk=",
  "number": 2389,
  "title": "1559-Tx Null-Pointer-Exception",
  "user": {
    "login": "MariusVanDerWijden",
    "id": 16664698,
    "node_id": "MDQ6VXNlcjE2NjY0Njk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MariusVanDerWijden",
    "html_url": "https://github.com/MariusVanDerWijden",
    "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
    "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
    "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
    "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
    "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
    "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-06-08T17:28:40Z",
  "updated_at": "2021-06-24T20:15:24Z",
  "closed_at": "2021-06-24T20:15:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nWhen sending eip-1559 transactions without gas price over RPC, the RPC fails with an null pointer exception\r\n```\r\n2021-06-08 19:20:55.914+02:00 | vert.x-worker-thread-18 | ERROR | JsonRpcHttpService | Error processing JSON-RPC requestBody\r\njava.lang.NullPointerException: Cannot invoke \"org.hyperledger.besu.ethereum.core.Wei.toLong()\" because the return value of \"org.hyperledger.besu.ethereum.core.Transaction.getGasPrice()\" is null\r\n\tat org.hyperledger.besu.ethereum.api.query.BlockchainQueries.lambda$gasPrice$29(BlockchainQueries.java:821)\r\n\tat java.base/java.util.stream.ReferencePipeline$5$1.accept(ReferencePipeline.java:229)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n\tat java.base/java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:274)\r\n\tat java.base/java.util.stream.LongPipeline$1$1.accept(LongPipeline.java:177)\r\n\tat java.base/java.util.stream.Streams$RangeLongSpliterator.forEachRemaining(Streams.java:228)\r\n\tat java.base/java.util.Spliterator$OfLong.forEachRemaining(Spliterator.java:763)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:550)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260)\r\n\tat java.base/java.util.stream.LongPipeline.toArray(LongPipeline.java:521)\r\n\tat org.hyperledger.besu.ethereum.api.query.BlockchainQueries.gasPrice(BlockchainQueries.java:823)\r\n\tat org.hyperledger.besu.ethereum.api.jsonrpc.internal.methods.EthGasPrice.response(EthGasPrice.java:54)\r\n\tat org.hyperledger.besu.ethereum.api.jsonrpc.JsonRpcHttpService.process(JsonRpcHttpService.java:725)\r\n\tat org.hyperledger.besu.ethereum.api.jsonrpc.JsonRpcHttpService.lambda$handleJsonSingleRequest$13(JsonRpcHttpService.java:579)\r\n\tat io.vertx.core.impl.ContextImpl.lambda$executeBlocking$2(ContextImpl.java:313)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:832)\r\n```\r\n\r\n### Acceptance Criteria\r\n* [Criteria 1]\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Send a tx (e.g. ```0xf9105782012785174876e8008307a120800ab910007fb3690dd869699d197eed755b0d4589a30264bb0c7da1c441954cb9e7a8be96e163421c6cb7527f03e246c2aad91273e66ed6a221a389bbf4cd2ea3560352a36becddb21a6998a963421c6cd7527f0764d9ee8f36916ffd7d5afa860bd4ffe966bcbf03b8b4e42017ef8eace018ab63421c6cf7527f5a666cf1819fecb622c1a894d1c36770761d654aa8148ab01c12df373180ce1d63421c6d17527f2f52f1099c31851b5c08b07a28220d2d79b1af7514fa8a8f440075cabdafaa4963421c6d3752604c63421c6d5753609463421c6d5853609563421c6d5953606063421c6d5a5360dc63421c6d5b5360b363421c6d5c53606f63421c6d5d5360ee63421c6d5e5360fd63421c6d5f5360eb63421c6d6053602963421c6d6153604c63421c6d625360c363421c6d635360c263421c6d6453605e63421c6d6553601763421c6d665360fd63421c6d6753609e63421c6d6853606963421c6d6953607f63421c6d6a53602b63421c6d6b5360c863421c6d6c53606c63421c6d6d53603b63421c6d6e5360b263421c6d6f53601563421c6d7053603563421c6d7153603c63421c6d7253607a63421c6d735360dd63421c6d7453601f63421c6d7553497460003560007fb24f96801dad0e647cf76ed1a8d8a70af111ea5e842cce36b7effb80f2cdf1ab63c80ff803527f1495079187b76535d4987103864a44c578bfc8b8603fe7f0c1ed846b29498d5663c80ff8235260c963c80ff8435360a263c80ff8445360aa63c80ff8455360a063c80ff8465360de63c80ff8475360e063c80ff84853600563c80ff84953600463c80ff84a5360ff63c80ff84b53601463c80ff84c5360a063c80ff84d5360b763c80ff84e53601c63c80ff84f5360fb63c80ff85053602563c80ff85153605063c80ff85253607163c80ff8535360e063c80ff85453601363c80ff85553608163c80ff8565360d263c80ff8575360ff63c80ff85853603f63c80ff85953609d63c80ff85a53603763c80ff85b5360ed63c80ff85c5360b463c80ff85d53606063c80ff85e53607e63c80ff85f53605063c80ff86053de797fe6d83d2a9c0703ce9613b7593cb59f76123eeec9b2284f611cab53d08dab12f663409f1780527f5966f964903d28794510686d3f63cd06cd9199eae458d9db4a485df7cfcc6b7b63409f17a0527f168a96d5e07d070b085cc2556116b3b7a98f54c1041f6dc2ec6fb89658e231d363409f17c0527f0ed6ea02fd690dd7672762e2897ce2685df6f0f11554de7342c20ac831dcf8cf63409f17e0527f844f096e2bb984d087bb3bbf3d810458a64deb12ea4f3498e21079d14e2ed20e63409f180052601f63409f18205360c463409f18215360003f7f0750bfac87370bd6cfce729d384ed648032ebc0a51f60b54f750a97d5bac282a635e5eb5c1527ff2858610d8a90baf7808f5b266fca91fd280a0f35a093f2a19d727ad06f43027635e5eb5e1527f3ac50a80f194f6baf5a5749e3572e6236fd27af3b7bde1c44eb90c7757004b72635e5eb601527f0da5ed88017f960ea5f114ec10b6d68660b3c20962441ffc6e4f2e39b40d4128635e5eb621527fec1be7e051ccb14c24c842f68341e1c1d595a1592c71082f75f90b818ec9b741635e5eb64152600a635e5eb66153601a635e5eb662536007635e5eb663536007635e5eb6645360b4635e5eb665536062635e5eb6665360a3635e5eb6675360f5635e5eb6685360a9635e5eb669536074635e5eb66a536060635e5eb66b5360bf635e5eb66c5360ad635e5eb66d5360a3635e5eb66e53601a635e5eb66f536025635e5eb670536001635e5eb671536015635e5eb67253602a635e5eb673536050635e5eb67453600060006000de7f02eb58ff940bccceaeefc95c771f3e00abf71434d342397a62536cf77401d7f763ff86c583527fc04b4d0c903bd5d34db1cb78d72b373e54200b5cd00e9fffe21d9afa19e2687763ff86c5a3527f03d5941503d8cc593dac7b568fc74df064b7def91e1b1d24706ed9026656444863ff86c5c3527f8f9d074a09cbb66e418a6bb5a578daf4c671c28809f16097911eae17485c05b463ff86c5e3527fc4a1bd25080802b713652aaf220f1013f1d8a81d5bd28997699119193e0515a463ff86c603527f0c00702b74de94895b9b3c0d676254b9642baadca3efcf1216fa3f53523102a963ff86c623527f4989cd0ebff5a8daf6483abe64ca93610187f1a3ecf5af4b018cf5109c29d3af63ff86c64352607163ff86c66353604e63ff86c6645360d463ff86c66553609163ff86c6665360a363ff86c6675360c963ff86c66853601763ff86c66953609263ff86c66a5360a563ff86c66b53609363ff86c66c53608c63ff86c66d5360f363ff86c66e53603a63ff86c66f53605e63ff86c67053603263ff86c67153608263ff86c67253604963ff86c67353603163ff86c6745360ba63ff86c67553606363ff86c6765360b663ff86c67753601e63ff86c67853607463ff86c67953605763ff86c67a5360f763ff86c67b5360ed63ff86c67c53602a63ff86c67d5360ba63ff86c67e537f26103b93eaa4d52b8a283b2b81adb2b1cc8571a446269cf3a85fa7fac9271a6563dfb40b39527f79a6a06600c61c7cd1e249117838ebf2ff27f6760c12d2a1d85c832609de86d963dfb40b59527fc1da39b16173958b2fc6546c7ac0d8fa14f705a61879b4ae894fba0ff609007b63dfb40b79527f1ef5226708c6a0495d2111652688aafcc8d4e28894e3012dc8c5bddf1b0e801b63dfb40b99527f90928727f748ab8d16238ccc346f2535df69b8da191c3caecb579ce441a5470963dfb40bb95260ec63dfb40bd953608963dfb40bda53608e63dfb40bdb5360b863dfb40bdc5360f563dfb40bdd5360e063dfb40bde53600863dfb40bdf53608763dfb40be053603f63dfb40be153602663dfb40be25360c863dfb40be35360be63dfb40be453601d63dfb40be553609d63dfb40be653603c63dfb40be75360cd63dfb40be853600e63dfb40be953608c63dfb40bea53609363dfb40beb53600a63dfb40bec53606c63dfb40bed53602563dfb40bee5360a863dfb40bef53606c63dfb40bf05360f463dfb40bf15360c463dfb40bf253600463dfb40bf353601f63dfb40bf45360e163dfb40bf5537f9f548d219f194322fde978227672a098de7ba6dc1d7f82823aae6b86a01f483463c2a9d833527fb65535b47de1881c097b307a02476c31a57049397c30b0d7128a0eb3c8af4a9163c2a9d853527f63f86095faf83295e18b4ce760734660444ec6ae2f455c9021ffa0d513631a3e63c2a9d873527f1c1e77179c29f66afa66f4b8096c965add198f835b10343fd48a7b30164baa5863c2a9d893527f19a864a1c2ee84b0247df6a3a637805db4dc62fd53d4ffe2c3b7dcf28598cd3263c2a9d8b352609a63c2a9d8d353604263c2a9d8d453605e63c2a9d8d55360fc63c2a9d8d653606963c2a9d8d75360b063c2a9d8d8537f6b2ee6f4a8a37e285526059bec4dd4c7a8f7fe0c631b43148331e265fabb3e7563b405f27f527f4d6cea1c4262de5ba07b478b43f28d0cfd04c97833c096e5f07166b053efbb2863b405f29f527f21292b779b34526a4f79abc1632c8b6196fc507a811936ffe3357c5a7b8ed61463b405f2bf5260ab63b405f2df5360ac63b405f2e053603363b405f2e153600b63b405f2e253604263b405f2e353605763b405f2e453608463b405f2e553603d63b405f2e653609863b405f2e75360a863b405f2e853608e63b405f2e953608f63b405f2ea53609963b405f2eb53602363b405f2ec53602863b405f2ed53604c63b405f2ee53608963b405f2ef53604663b405f2f053609a63b405f2f15360f163b405f2f253602663b405f2f353608263b405f2f4537f56d3803eda4ec4dc7eee476193d849c841e726c276a1b319458775bc6b0baf5463e133cc9552607463e133ccb55360b263e133ccb653603363e133ccb75360e563e133ccb853600a63e133ccb95360f163e133ccba53609763e133ccbb53609c63e133ccbc5360a863e133ccbd5360b063e133ccbe5360a063e133ccbf53604463e133ccc05360f063e133ccc15360d263e133ccc25360ef63e133ccc353608c63e133ccc45360b263e133ccc553600863e133ccc65360cc63e133ccc753605f63e133ccc853607e63e133ccc95360bc63e133ccca5360a363e133cccb53600063e133cccc5360ae63e133cccd53603763e133ccce53603c63e133cccf5360dd63e133ccd053604263e133ccd153607263e133ccd253600060007f2de6da6431bf65d2f3ba3402b0b49c1508712d90e35c2e279a04bc1a1a40555f6368df5f0a527f71d29cf84c69e8d9247beaaef60392b5fbb4e6304b39977b820a52159d6aed076368df5f2a5260406368df5f4a5360ab6368df5f4b53604a6368df5f4c5360386368df5f4d53609f6368df5f4e5360826368df5f4f53603763a3c9620d53600463a3c9620e53600e63a3c9620f5360e163a3c9621053605d63a3c9621153602d63a3c962125360db63a3c9621353605d63a3c9621453608663a3c9621553603063a3c962165360f363a3c96217537f2196662b8a6a462a2be8534a74f5ac392dec9734549f7115ba9b3c512638408963aced88f9527f9d74631ec06ef2c276fe011355a063f88343c3fa3be858f28763d3b7be5152b963aced891952607463aced893953603563aced893a53604d63aced893b53608163aced893c5360ea63aced893d53609d63aced893e53601b63aced893f53604363aced894053605463aced894153603363aced89425360f963aced894353603263aced89445360a863aced894553604a63aced894653607863aced894753607563aced894853609d63aced894953605d63aced894a5360d963aced894b53609f63aced894c53605963aced894d53609963aced894e5360f463aced894f5360ef63aced89505360003f7f7b68ff7f9b6897214a0e97c00ed75d4e395b285bb047c60f0cef0c1d4ec3b8d7639ac1f0d352602a639ac1f0f35360ff639ac1f0f45360e5639ac1f0f553603f639ac1f0f653601a639ac1f0f75360d6639ac1f0f85360ca639ac1f0f9536017639ac1f0fa53607a639ac1f0fb536068639ac1f0fc536085639ac1f0fd536056639ac1f0fe537f60b69b595ee02a4e1167963af71127a4d7a9174ec099a896e4e38942a012480763df0093af527f38cf23a9a5d604514b546e97ed3775923982e8be56c92128465f2c627bba462363df0093cf527f405b46624f2e13859787a73620ff041d629567c674c33b9d9d6a00d979d8888a63df0093ef527fc5e2fbd021ad62cdaa96543da962a6038c823e0a8b8122191d7e7a03031ffc4063df00940f527f772df9cd601d19686ce4d0d6fc5e1a1eab67d1dbf4e8d04225adfc001d740d5f63df00942f527f9796f8e0a4ab85b43375180d8e5c41461771a06b25a8032d754ba81f5f5f09bf63df00944f527fb02d84cdf60141133f0ff06f8427637245a8f4cbb01caddcae178723a362e8db63df00946f5260bf63df00948f5360a963df00949053601763df0094915360b063df0094925360f363df00949353602563df0094945360c963df00949553606d63df00949653607963df00949753606b63df009498535a600060416358b48da25360f86358b48da35360b46358b48da45360996358b482011aa089c36b08ed4d86fa257175668d7ddfe17f948a51575a8eed9882ef839e9f3200a039e74a11438676311d960ead64f139aa98fd6bc2ece8c3c184d8cc422de038db``` )\r\n\r\n**Expected behavior:** Transaction is executed\r\n\r\n### Versions (Add all that apply)\r\n* Software version: ` besu/v21.7.0-RC1-dev-3e864234/linux-x86_64/openjdk-java-15`",
  "closed_by": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2389/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2389/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

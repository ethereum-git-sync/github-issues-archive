{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/2753/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/2753/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/2753/events",
  "html_url": "https://github.com/hyperledger/besu/issues/2753",
  "id": 994684834,
  "node_id": "MDU6SXNzdWU5OTQ2ODQ4MzQ=",
  "number": 2753,
  "title": "Sync never finishes",
  "user": {
    "login": "petehall73",
    "id": 44462277,
    "node_id": "MDQ6VXNlcjQ0NDYyMjc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/44462277?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/petehall73",
    "html_url": "https://github.com/petehall73",
    "followers_url": "https://api.github.com/users/petehall73/followers",
    "following_url": "https://api.github.com/users/petehall73/following{/other_user}",
    "gists_url": "https://api.github.com/users/petehall73/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/petehall73/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/petehall73/subscriptions",
    "organizations_url": "https://api.github.com/users/petehall73/orgs",
    "repos_url": "https://api.github.com/users/petehall73/repos",
    "events_url": "https://api.github.com/users/petehall73/events{/privacy}",
    "received_events_url": "https://api.github.com/users/petehall73/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    },
    {
      "id": 2051683248,
      "node_id": "MDU6TGFiZWwyMDUxNjgzMjQ4",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/P2",
      "name": "P2",
      "color": "ff9900",
      "default": false,
      "description": "High (ex: Degrading performance issues, unexpected behavior of core features (DevP2P, syncing, etc))"
    },
    {
      "id": 3013559202,
      "node_id": "MDU6TGFiZWwzMDEzNTU5MjAy",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/mainnet",
      "name": "mainnet",
      "color": "9D578C",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "frankisawesome",
    "id": 39414003,
    "node_id": "MDQ6VXNlcjM5NDE0MDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/39414003?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frankisawesome",
    "html_url": "https://github.com/frankisawesome",
    "followers_url": "https://api.github.com/users/frankisawesome/followers",
    "following_url": "https://api.github.com/users/frankisawesome/following{/other_user}",
    "gists_url": "https://api.github.com/users/frankisawesome/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frankisawesome/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frankisawesome/subscriptions",
    "organizations_url": "https://api.github.com/users/frankisawesome/orgs",
    "repos_url": "https://api.github.com/users/frankisawesome/repos",
    "events_url": "https://api.github.com/users/frankisawesome/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frankisawesome/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "frankisawesome",
      "id": 39414003,
      "node_id": "MDQ6VXNlcjM5NDE0MDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39414003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankisawesome",
      "html_url": "https://github.com/frankisawesome",
      "followers_url": "https://api.github.com/users/frankisawesome/followers",
      "following_url": "https://api.github.com/users/frankisawesome/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankisawesome/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankisawesome/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankisawesome/subscriptions",
      "organizations_url": "https://api.github.com/users/frankisawesome/orgs",
      "repos_url": "https://api.github.com/users/frankisawesome/repos",
      "events_url": "https://api.github.com/users/frankisawesome/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankisawesome/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2021-09-13T09:52:38Z",
  "updated_at": "2022-01-17T08:29:05Z",
  "closed_at": "2022-01-17T06:36:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n\r\n### Description\r\nA new node will not complete sync.  \r\nThe following is an extract from the logs.  I started the node a few weeks ago and it seemed to import all of the blocks but then dropped into a state where the logs only showed 'Downloaded <x number of > world state nodes. At least <another increasing number>.  I restarted the node on Friday to capture the logs.  After a short period I saw this in the logs:\r\n\r\nSep 10 07:04:16 OHGtxpoolEUS01 besu[6904]: 2021-09-10 07:04:16.651+00:00 | nioEventLoopGroup-3-4 | INFO  | SyncTargetManager | Found common ancestor with peer Peer 0x012f5d89b0481df885... at block 13171439\r\nSep 10 07:04:18 OHGtxpoolEUS01 besu[6904]: 2021-09-10 07:04:18.662+00:00 | EthScheduler-Services-10 (importBlock) | INFO  | PipelineChainDownloader | Chain download complete\r\nSep 10 07:08:45 OHGtxpoolEUS01 besu[6904]: 2021-09-10 07:08:45.561+00:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 100000 world state nodes. At least 1499124 nodes remaining.\r\n\r\nIt then only shows increasing number of world state nodes as shown here, some 3 days later:\r\nbesu[6904]: 2021-09-13 08:56:09.807+00:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 204500000 world state nodes. At least 40443713\r\n\r\nThese entries never stop.\r\n\r\n \r\n### Acceptance Criteria\r\nA fully sync'd node on mainnet.\r\n\r\n\r\n**Expected behavior:** I would expect to see blocks being imported from mainnet as per a normally sync'd node.\r\n\r\n**Actual behavior:** See above\r\n\r\n**Frequency:** I looked at issue 2156 and restarted the node a number of times but I'm still seeing this issue.\r\n\r\n### Versions (Add all that apply)\r\n* Software version: besu/v21.7.3/linux-x86_64/openjdk-java-11\r\n* Java version: openjdk version \"11.0.11\" 2021-04-20\r\n* OS Name & Version: 18.04.5 LTS\r\n* Kernel Version: 5.4.0-1055-azure #57~18.04.1-Ubuntu SMP Fri Jul 16 19:40:19 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux\r\n* Virtual Machine software & version: [`vmware -v`]\r\n* Docker Version: N/A\r\n* Cloud VM, type, size: Azure Standard_D4s_v3\r\n\r\n### Additional Information\r\nI have restarted this node several times but end up in the same position, with the number of downloaded world state nodes forever increasing, the number of 'at least increasing' and the sync never completing.  \r\n",
  "closed_by": {
    "login": "frankisawesome",
    "id": 39414003,
    "node_id": "MDQ6VXNlcjM5NDE0MDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/39414003?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/frankisawesome",
    "html_url": "https://github.com/frankisawesome",
    "followers_url": "https://api.github.com/users/frankisawesome/followers",
    "following_url": "https://api.github.com/users/frankisawesome/following{/other_user}",
    "gists_url": "https://api.github.com/users/frankisawesome/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/frankisawesome/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/frankisawesome/subscriptions",
    "organizations_url": "https://api.github.com/users/frankisawesome/orgs",
    "repos_url": "https://api.github.com/users/frankisawesome/repos",
    "events_url": "https://api.github.com/users/frankisawesome/events{/privacy}",
    "received_events_url": "https://api.github.com/users/frankisawesome/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/2753/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/2753/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/918566205",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-918566205",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 918566205,
    "node_id": "IC_kwDODE2jmc42wDU9",
    "user": {
      "login": "vmichalik",
      "id": 12459761,
      "node_id": "MDQ6VXNlcjEyNDU5NzYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12459761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vmichalik",
      "html_url": "https://github.com/vmichalik",
      "followers_url": "https://api.github.com/users/vmichalik/followers",
      "following_url": "https://api.github.com/users/vmichalik/following{/other_user}",
      "gists_url": "https://api.github.com/users/vmichalik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vmichalik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vmichalik/subscriptions",
      "organizations_url": "https://api.github.com/users/vmichalik/orgs",
      "repos_url": "https://api.github.com/users/vmichalik/repos",
      "events_url": "https://api.github.com/users/vmichalik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vmichalik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-13T20:51:47Z",
    "updated_at": "2021-09-13T20:51:47Z",
    "author_association": "NONE",
    "body": "Hey @petehall73, sorry to hear you're having problems! We'll investigate this shortly. What options are you running Besu with?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/918566205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/918578877",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-918578877",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 918578877,
    "node_id": "IC_kwDODE2jmc42wGa9",
    "user": {
      "login": "vmichalik",
      "id": 12459761,
      "node_id": "MDQ6VXNlcjEyNDU5NzYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12459761?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vmichalik",
      "html_url": "https://github.com/vmichalik",
      "followers_url": "https://api.github.com/users/vmichalik/followers",
      "following_url": "https://api.github.com/users/vmichalik/following{/other_user}",
      "gists_url": "https://api.github.com/users/vmichalik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vmichalik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vmichalik/subscriptions",
      "organizations_url": "https://api.github.com/users/vmichalik/orgs",
      "repos_url": "https://api.github.com/users/vmichalik/repos",
      "events_url": "https://api.github.com/users/vmichalik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vmichalik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-13T21:09:26Z",
    "updated_at": "2021-09-13T21:09:26Z",
    "author_association": "NONE",
    "body": "Just in case this solves your problem, the default sync mode is FULL for Besu, which takes a very long time. You might be looking for fast sync which usually completes in 2-3 days, see docs here https://besu.hyperledger.org/en/stable/Reference/CLI/CLI-Syntax/#sync-mode\n\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/918578877/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/918926879",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-918926879",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 918926879,
    "node_id": "IC_kwDODE2jmc42xbYf",
    "user": {
      "login": "petehall73",
      "id": 44462277,
      "node_id": "MDQ6VXNlcjQ0NDYyMjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/44462277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petehall73",
      "html_url": "https://github.com/petehall73",
      "followers_url": "https://api.github.com/users/petehall73/followers",
      "following_url": "https://api.github.com/users/petehall73/following{/other_user}",
      "gists_url": "https://api.github.com/users/petehall73/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petehall73/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petehall73/subscriptions",
      "organizations_url": "https://api.github.com/users/petehall73/orgs",
      "repos_url": "https://api.github.com/users/petehall73/repos",
      "events_url": "https://api.github.com/users/petehall73/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petehall73/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-14T08:22:22Z",
    "updated_at": "2021-09-14T08:50:37Z",
    "author_association": "NONE",
    "body": "Hi @vmichalik,\r\n\r\nThanks for the reply.  Interesting point about fast versus full.  I am using a config file but in it I specified mainnet with the network flag.  If the default is fast when connecting to ethereum mainnet when not specifying the chain, would it use full if I did use the network flag even when specifying mainnet?\r\n\r\nThe options I have are:\r\n\r\ndata-path=\"/data\" \r\n\r\nnetwork = \"mainnet\" - this is now commented out but after the sync process had ran for a few days\r\n\r\nrpc-http-enabled=true\r\nrpc-http-port=\"8590\"\r\nrpc-http-api=[\"ADMIN\",\"ETH\",\"NET\",\"CLIQUE\",\"WEB3\",\"TXPOOL\"]\r\nrpc-http-host=\"x.x.x.x\"\r\nhost-allowlist=[\"*\"]\r\nrpc-http-cors-origins=[\"all\"]\r\nrevert-reason-enabled=true\r\n\r\nThe documentation says: \r\n'The default is FAST when using the --network option with named networks, except for the dev development network. FAST is also the default if Ethereum mainnet is being connected to by not specifying the --network and --genesis-file options'.  I read that as fast would be used.\r\n\r\nRegards\r\nPete\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/918926879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/960464789",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-960464789",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 960464789,
    "node_id": "IC_kwDODE2jmc45P4eV",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T05:13:00Z",
    "updated_at": "2021-11-04T05:13:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "besu definitely should do fast sync with network=\"mainnet\" on cmd line or in config file. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/960464789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/960503979",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-960503979",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 960503979,
    "node_id": "IC_kwDODE2jmc45QCCr",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T07:01:43Z",
    "updated_at": "2021-11-04T07:02:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@petehall73  Specs look perfectly fine and no reason to fail. I'd suggest checking disk space and set the log level to debug or trace perhaps and restarting\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/960503979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/964587763",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-964587763",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 964587763,
    "node_id": "IC_kwDODE2jmc45fnDz",
    "user": {
      "login": "adean-consensys",
      "id": 83668448,
      "node_id": "MDQ6VXNlcjgzNjY4NDQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/83668448?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adean-consensys",
      "html_url": "https://github.com/adean-consensys",
      "followers_url": "https://api.github.com/users/adean-consensys/followers",
      "following_url": "https://api.github.com/users/adean-consensys/following{/other_user}",
      "gists_url": "https://api.github.com/users/adean-consensys/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adean-consensys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adean-consensys/subscriptions",
      "organizations_url": "https://api.github.com/users/adean-consensys/orgs",
      "repos_url": "https://api.github.com/users/adean-consensys/repos",
      "events_url": "https://api.github.com/users/adean-consensys/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adean-consensys/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-09T22:04:01Z",
    "updated_at": "2021-11-09T22:05:51Z",
    "author_association": "NONE",
    "body": "I'm experiencing this as well.  The fast sync appears to complete with reasonably good speed and now we're in a state where it may take months to complete:\r\n\r\nUsing Besu version `21.7.2` Docker image in Kubernetes, provided 2 CPUs and 10Gi of memory, 3Ti disk space on an SSD (Azure Managed Disk PV)\r\n\r\nFast Sync ends, Full Sync begins:\r\n\r\n```\r\n2021-10-29 17:30:23.026+00:00 | EthScheduler-Services-32 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 13107201 to 13107400, Peers: 26\r\n2021-10-29 17:30:25.216+00:00 | EthScheduler-Services-32 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 13107401 to 13107500, Peers: 26\r\n2021-10-29 17:30:25.216+00:00 | EthScheduler-Services-32 (importBlock) | INFO  | PipelineChainDownloader | Chain download complete\r\n2021-10-29 17:35:28.895+00:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 254000000 world state nodes. At least 32296960 nodes remaining.\r\n2021-10-29 17:41:00.407+00:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 254100000 world state nodes. At least 32307134 nodes remaining.\r\n```\r\n\r\nBlocks level off right at the same time as these log messages\r\n\r\n![image](https://user-images.githubusercontent.com/83668448/141011994-85c73c28-c000-4e95-a0a0-184b3b3adcc0.png)\r\n\r\nCPU holding steady but not as active as before:\r\n\r\n![image](https://user-images.githubusercontent.com/83668448/141012117-61c19310-7d8a-46b5-9b73-1e977838b2ac.png)\r\n\r\nAlso mentioned here, related: https://github.com/hyperledger/besu/issues/2932",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/964587763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/964790635",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-964790635",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 964790635,
    "node_id": "IC_kwDODE2jmc45gYlr",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T05:03:52Z",
    "updated_at": "2021-11-10T05:03:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "there is a lot of state to download. It's a bit confusing because we expect fast sync to increase block numbers until it’s close to head, then stall in terms of block numbers - it needs to download the world state before it can continue. On our canary nodes the \"stall\" period is 5 days + at current mainnet size.\r\n\r\nThere are metrics around fast sync eg `besu_synchronizer_fast_sync_pivot_block_current`, `besu_synchronizer_world_state_completed_requests_total` and `besu_synchronizer_world_state_pending_requests_current`\r\n\r\nIf you can add these metrics to your dash, you can see progress of the \"download state\" step even while \"block number\" seems stuck.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/964790635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/964832179",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-964832179",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 964832179,
    "node_id": "IC_kwDODE2jmc45giuz",
    "user": {
      "login": "petehall73",
      "id": 44462277,
      "node_id": "MDQ6VXNlcjQ0NDYyMjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/44462277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petehall73",
      "html_url": "https://github.com/petehall73",
      "followers_url": "https://api.github.com/users/petehall73/followers",
      "following_url": "https://api.github.com/users/petehall73/following{/other_user}",
      "gists_url": "https://api.github.com/users/petehall73/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petehall73/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petehall73/subscriptions",
      "organizations_url": "https://api.github.com/users/petehall73/orgs",
      "repos_url": "https://api.github.com/users/petehall73/repos",
      "events_url": "https://api.github.com/users/petehall73/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petehall73/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T06:44:34Z",
    "updated_at": "2021-11-10T06:44:34Z",
    "author_association": "NONE",
    "body": "Glad it's not just me.  Unfortunately I 've not been able to find a solution\n________________________________\nFrom: Aaron Dean ***@***.***>\nSent: Tuesday, November 9, 2021 10:04 PM\nTo: hyperledger/besu ***@***.***>\nCc: Peter Hall ***@***.***>; Mention ***@***.***>\nSubject: Re: [hyperledger/besu] Sync never finishes (#2753)\n\n\nI'm experiencing this as well. The fast sync appears to complete with reasonably good speed and now we're in a state where it may take months to complete:\n\nUsing Besu version 21.7.2 Docker image in Kubernetes, provided 2 CPUs and 10Gi of memory\n\nFast Sync ends, Full Sync begins:\n\n2021-10-29 17:30:23.026+00:00 | EthScheduler-Services-32 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 13107201 to 13107400, Peers: 26\n2021-10-29 17:30:25.216+00:00 | EthScheduler-Services-32 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 13107401 to 13107500, Peers: 26\n2021-10-29 17:30:25.216+00:00 | EthScheduler-Services-32 (importBlock) | INFO  | PipelineChainDownloader | Chain download complete\n2021-10-29 17:35:28.895+00:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 254000000 world state nodes. At least 32296960 nodes remaining.\n2021-10-29 17:41:00.407+00:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 254100000 world state nodes. At least 32307134 nodes remaining.\n\n\nBlocks level off right at the same time as these log messages\n\n[image]<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fuser-images.githubusercontent.com%2F83668448%2F141011994-85c73c28-c000-4e95-a0a0-184b3b3adcc0.png&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C15e81576b2154f290bcc08d9a3ccdd65%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637720922586852990%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=nfUAMj3Xfn9d8pPeu9u0gbPwVqXgWjbqy2gmE3BZapI%3D&reserved=0>\n\nCPU holding steady but not as active as before:\n\n[image]<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fuser-images.githubusercontent.com%2F83668448%2F141012117-61c19310-7d8a-46b5-9b73-1e977838b2ac.png&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C15e81576b2154f290bcc08d9a3ccdd65%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637720922586862985%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=ESFmwnQkAqF%2BCSiEyfqsC%2BScTT%2B0XIo6Jn%2Bb5k2EWyI%3D&reserved=0>\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fhyperledger%2Fbesu%2Fissues%2F2753%23issuecomment-964587763&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C15e81576b2154f290bcc08d9a3ccdd65%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637720922586862985%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=9a2mcqSdhcRJhvTWWCZxNpo0l%2BdevTS9FRDrEDgP0Vw%3D&reserved=0>, or unsubscribe<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAKTHBRPYEXMMKCYFBAZ4VPTULGLFXANCNFSM5D5NPREQ&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C15e81576b2154f290bcc08d9a3ccdd65%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637720922586872987%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=b%2BAwRk02CRLzj4b4Ipm2P4NpJxW%2FGNHL9JDWUbnGf3M%3D&reserved=0>.\nTriage notifications on the go with GitHub Mobile for iOS<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fapps.apple.com%2Fapp%2Fapple-store%2Fid1477376905%3Fct%3Dnotification-email%26mt%3D8%26pt%3D524675&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C15e81576b2154f290bcc08d9a3ccdd65%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637720922586882974%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=%2F5uzT2IWj626phi80O8pAFpFGHjPdQh0vJ9rt3jGapY%3D&reserved=0> or Android<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.github.android%26referrer%3Dutm_campaign%253Dnotification-email%2526utm_medium%253Demail%2526utm_source%253Dgithub&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C15e81576b2154f290bcc08d9a3ccdd65%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637720922586882974%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=SqjaPAo%2F6qgFlrnKba2B4jPkP5CLI3BRzX512KbUguU%3D&reserved=0>.\n\n\n________________________________\n\nThis message contains confidential information and is intended for the addressee only. If you are not the named addressee you should not disseminate, distribute or copy this email. Please notify the sender immediately if you have received this email by mistake and delete the message from your system.\n\nEmail transmission cannot be guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or contain viruses. Therefore the sender does not accept liability for any errors or omissions in the contents of this message, which arise as a result of transmission. Furthermore, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by a virus transmitted by this email.\n\nHorizon Globex headquarters: Tierney Building - T1017, University of Limerick, Limerick, Ireland\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/964832179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/989672930",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-989672930",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 989672930,
    "node_id": "IC_kwDODE2jmc46_TXi",
    "user": {
      "login": "frankisawesome",
      "id": 39414003,
      "node_id": "MDQ6VXNlcjM5NDE0MDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39414003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankisawesome",
      "html_url": "https://github.com/frankisawesome",
      "followers_url": "https://api.github.com/users/frankisawesome/followers",
      "following_url": "https://api.github.com/users/frankisawesome/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankisawesome/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankisawesome/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankisawesome/subscriptions",
      "organizations_url": "https://api.github.com/users/frankisawesome/orgs",
      "repos_url": "https://api.github.com/users/frankisawesome/repos",
      "events_url": "https://api.github.com/users/frankisawesome/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankisawesome/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-12-09T09:35:23Z",
    "updated_at": "2021-12-09T09:35:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "@petehall73 according to Sally's comment above, the world state download should finish in a few days, was that the case for you?\r\n\r\nProposed solution here would be to add some additional logging when the world state download is happening so it's more intuitive that Besu is not just 'stuck'",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/989672930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014258825",
    "html_url": "https://github.com/hyperledger/besu/issues/2753#issuecomment-1014258825",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/2753",
    "id": 1014258825,
    "node_id": "IC_kwDODE2jmc48dFyJ",
    "user": {
      "login": "petehall73",
      "id": 44462277,
      "node_id": "MDQ6VXNlcjQ0NDYyMjc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/44462277?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petehall73",
      "html_url": "https://github.com/petehall73",
      "followers_url": "https://api.github.com/users/petehall73/followers",
      "following_url": "https://api.github.com/users/petehall73/following{/other_user}",
      "gists_url": "https://api.github.com/users/petehall73/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petehall73/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petehall73/subscriptions",
      "organizations_url": "https://api.github.com/users/petehall73/orgs",
      "repos_url": "https://api.github.com/users/petehall73/repos",
      "events_url": "https://api.github.com/users/petehall73/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petehall73/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T08:29:05Z",
    "updated_at": "2022-01-17T08:29:05Z",
    "author_association": "NONE",
    "body": "Hi Frank,\n\nIt did not and in the end I had to move away from Besu as my client.\n\nRegards\nPete\n\n________________________________\nFrom: Frank Li ***@***.***>\nSent: Thursday, December 9, 2021 9:35 AM\nTo: hyperledger/besu ***@***.***>\nCc: Peter Hall ***@***.***>; Mention ***@***.***>\nSubject: Re: [hyperledger/besu] Sync never finishes (#2753)\n\n\n@petehall73<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fpetehall73&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C6be49a61536f4546623d08d9baf7408b%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637746393377955849%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=gI0Lz5sY1XhL%2FtCPpBr3MIBeqxLqTubx2wDN4J9%2BPPM%3D&reserved=0> according to Sally's comment above, the world state download should finish in a few days, was that the case for you?\n\nProposed solution here would be to add some additional logging when the world state download is happening so it's more intuitive that Besu is not just 'stuck'\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fhyperledger%2Fbesu%2Fissues%2F2753%23issuecomment-989672930&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C6be49a61536f4546623d08d9baf7408b%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637746393377965833%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=TAMTW2kXIPRRNfMVJasLMc8cZJ1s9%2Br%2FMi3uylGYJyU%3D&reserved=0>, or unsubscribe<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAKTHBRNFBWNLNJ4BYF5FICDUQBZ6NANCNFSM5D5NPREQ&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C6be49a61536f4546623d08d9baf7408b%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637746393377975832%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=FAxyMW68Y2BXyh8Cd5WtfG2cITNgvsaCwTrAu8Dh5BU%3D&reserved=0>.\nTriage notifications on the go with GitHub Mobile for iOS<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fapps.apple.com%2Fapp%2Fapple-store%2Fid1477376905%3Fct%3Dnotification-email%26mt%3D8%26pt%3D524675&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C6be49a61536f4546623d08d9baf7408b%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637746393377975832%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=DQotbEMY3bXsCL2qanCP0SrMuUarC%2FV2gkGAcxl8zrY%3D&reserved=0> or Android<https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.github.android%26referrer%3Dutm_campaign%253Dnotification-email%2526utm_medium%253Demail%2526utm_source%253Dgithub&data=04%7C01%7Cpeter.hall%40horizonfintex.com%7C6be49a61536f4546623d08d9baf7408b%7C87c6cf4134234938a5f6562d06935134%7C0%7C0%7C637746393377985823%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=bRvfoY7FiosVp4M2aAxSpf1uJg8wVZbRfVnOZuJrEps%3D&reserved=0>.\n\n\n________________________________\n\nThis message contains confidential information and is intended for the addressee only. If you are not the named addressee you should not disseminate, distribute or copy this email. Please notify the sender immediately if you have received this email by mistake and delete the message from your system.\n\nEmail transmission cannot be guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or contain viruses. Therefore the sender does not accept liability for any errors or omissions in the contents of this message, which arise as a result of transmission. Furthermore, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by a virus transmitted by this email.\n\nHorizon Globex headquarters: Tierney Building - T1017, University of Limerick, Limerick, Ireland\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014258825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3868",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3868/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3868/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3868/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3868",
  "id": 1242021729,
  "node_id": "I_kwDODE2jmc5KB79h",
  "number": 3868,
  "title": "JSON-RPC: Besu does not follow the standard API for eth_getTransactionByHash",
  "user": {
    "login": "Neurone",
    "id": 562943,
    "node_id": "MDQ6VXNlcjU2Mjk0Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/562943?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Neurone",
    "html_url": "https://github.com/Neurone",
    "followers_url": "https://api.github.com/users/Neurone/followers",
    "following_url": "https://api.github.com/users/Neurone/following{/other_user}",
    "gists_url": "https://api.github.com/users/Neurone/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Neurone/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Neurone/subscriptions",
    "organizations_url": "https://api.github.com/users/Neurone/orgs",
    "repos_url": "https://api.github.com/users/Neurone/repos",
    "events_url": "https://api.github.com/users/Neurone/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Neurone/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "sharad-develop",
    "id": 23285242,
    "node_id": "MDQ6VXNlcjIzMjg1MjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/23285242?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sharad-develop",
    "html_url": "https://github.com/sharad-develop",
    "followers_url": "https://api.github.com/users/sharad-develop/followers",
    "following_url": "https://api.github.com/users/sharad-develop/following{/other_user}",
    "gists_url": "https://api.github.com/users/sharad-develop/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sharad-develop/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sharad-develop/subscriptions",
    "organizations_url": "https://api.github.com/users/sharad-develop/orgs",
    "repos_url": "https://api.github.com/users/sharad-develop/repos",
    "events_url": "https://api.github.com/users/sharad-develop/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sharad-develop/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "sharad-develop",
      "id": 23285242,
      "node_id": "MDQ6VXNlcjIzMjg1MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/23285242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sharad-develop",
      "html_url": "https://github.com/sharad-develop",
      "followers_url": "https://api.github.com/users/sharad-develop/followers",
      "following_url": "https://api.github.com/users/sharad-develop/following{/other_user}",
      "gists_url": "https://api.github.com/users/sharad-develop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sharad-develop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sharad-develop/subscriptions",
      "organizations_url": "https://api.github.com/users/sharad-develop/orgs",
      "repos_url": "https://api.github.com/users/sharad-develop/repos",
      "events_url": "https://api.github.com/users/sharad-develop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sharad-develop/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-05-19T16:21:47Z",
  "updated_at": "2022-05-31T06:52:05Z",
  "closed_at": "2022-05-27T05:27:48Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\nAs a developer, I want to call `eth_getTransactionByHash` so that I can get all transaction attributes defined by the standard API.\r\n\r\nCurrently, Besu does not return correctly the `blockNumber`, `blockHash` and `transactionIndex` fields when responding for pending transactions.\r\n\r\nThis causes some clients to fail during normal operations (i.e. [Deploy SmartContract to local Hyperledger-Besu network using Brownie](https://ethereum.stackexchange.com/questions/127948/deploy-smartcontract-to-local-hyperledger-besu-network-using-brownie)).\r\n\r\n### Acceptance Criteria\r\n* Send a request for a pending tx\r\n* Result JSON contains all mandatory fields specified by the API\r\n\r\n### Steps to Reproduce (Bug)\r\n1. Send a request for a pending tx:\r\n`curl -X POST --data '{\"jsonrpc\": \"2.0\", \"method\": \"eth_getTransactionByHash\", \"params\": [\"0xfe6f9abeacbe186f6ee5edd811228e0710631c3569ee8bd45ca67c46146c762c\"], \"id\": 6}' localhost:8545`\r\n2. Result does not contain `blockNumber`, `blockHash` or `transactionIndex` field: \r\n```json\r\n{\r\n  \"jsonrpc\" : \"2.0\",\r\n  \"id\" : 6,\r\n  \"result\" : {\r\n    \"from\" : \"0x627306090abab3a6e1400e9345bc60c78a8bef57\",\r\n    \"gas\" : \"0x5208\",\r\n    \"gasPrice\" : \"0x2540be400\",\r\n    \"hash\" : \"0xfe6f9abeacbe186f6ee5edd811228e0710631c3569ee8bd45ca67c46146c762c\",\r\n    \"input\" : \"0x\",\r\n    \"nonce\" : \"0x32\",\r\n    \"to\" : \"0xf12b5dd4ead5f743c6baa640b0216200e89b60da\",\r\n    \"value\" : \"0x2\",\r\n    \"v\" : \"0xa96\",\r\n    \"r\" : \"0x325fd22b695b5f8e54cab34ae558373a9a15229a6cf8614d60fa7bcdc1493abf\",\r\n    \"s\" : \"0xf1c739e11f356c7a59e8b37e36f91c423ce0298bfd089780415c60ed2652f3c\",\r\n    \"chainId\" : \"0x539\",\r\n    \"publicKey\" : \"0xaf80b90d25145da28c583359beb47b21796b2fe1a23c1511e443e7a64dfdb27d7434c380f0aa4c500e220aa1a9d068514b1ff4d5019e624e7ba1efe82b340a59\",\r\n    \"raw\" : \"0xf866328502540be40082520894f12b5dd4ead5f743c6baa640b0216200e89b60da0280820a96a0325fd22b695b5f8e54cab34ae558373a9a15229a6cf8614d60fa7bcdc1493abfa00f1c739e11f356c7a59e8b37e36f91c423ce0298bfd089780415c60ed2652f3c\"\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior:**\r\nBesu should include the following fields in the response:\r\n\r\n> blockHash: DATA, 32 Bytes - hash of the block where this transaction was in. null when its pending.\r\n> blockNumber: QUANTITY - block number where this transaction was in. null when its pending.\r\n> transactionIndex: QUANTITY - integer of the transactions index position in the block. null when its pending.\r\n\r\nAs stated in the [official schema](https://github.com/ethereum/execution-apis/blob/4ce0ff08fa298fe963a066bc54615dbe4b4faf37/src/schemas/transaction.json#L275), they are mandatory fields, so they should be set to `null` if they are without value.\r\n\r\nReturned JSON should look like this:\r\n\r\n```json\r\n{\r\n  \"jsonrpc\" : \"2.0\",\r\n  \"id\" : 6,\r\n  \"result\" : {\r\n    \"blockHash\": null,\r\n    \"blockNumber\": null,\r\n    \"from\" : \"0x627306090abab3a6e1400e9345bc60c78a8bef57\",\r\n    \"gas\" : \"0x5208\",\r\n    \"gasPrice\" : \"0x2540be400\",\r\n    \"hash\" : \"0xfe6f9abeacbe186f6ee5edd811228e0710631c3569ee8bd45ca67c46146c762c\",\r\n    \"input\" : \"0x\",\r\n    \"nonce\" : \"0x32\",\r\n    \"to\" : \"0xf12b5dd4ead5f743c6baa640b0216200e89b60da\",\r\n    \"transactionIndex\": null,\r\n    \"value\" : \"0x2\",\r\n    \"v\" : \"0xa96\",\r\n    \"r\" : \"0x325fd22b695b5f8e54cab34ae558373a9a15229a6cf8614d60fa7bcdc1493abf\",\r\n    \"s\" : \"0xf1c739e11f356c7a59e8b37e36f91c423ce0298bfd089780415c60ed2652f3c\",\r\n    \"chainId\" : \"0x539\",\r\n    \"publicKey\" : \"0xaf80b90d25145da28c583359beb47b21796b2fe1a23c1511e443e7a64dfdb27d7434c380f0aa4c500e220aa1a9d068514b1ff4d5019e624e7ba1efe82b340a59\",\r\n    \"raw\" : \"0xf866328502540be40082520894f12b5dd4ead5f743c6baa640b0216200e89b60da0280820a96a0325fd22b695b5f8e54cab34ae558373a9a15229a6cf8614d60fa7bcdc1493abfa00f1c739e11f356c7a59e8b37e36f91c423ce0298bfd089780415c60ed2652f3c\"\r\n  }\r\n}\r\n```\r\n\r\n**Actual behavior:**\r\nResult does not contain `blockNumber`, `blockHash` or `transactionIndex` field\r\n\r\n**Frequency:**\r\n100%\r\n\r\n### Versions\r\n* Software version: `besu/v22.4.1-dev-3835cb72/linux-x86_64/openjdk-java-17`",
  "closed_by": {
    "login": "macfarla",
    "id": 2627919,
    "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/macfarla",
    "html_url": "https://github.com/macfarla",
    "followers_url": "https://api.github.com/users/macfarla/followers",
    "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
    "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
    "organizations_url": "https://api.github.com/users/macfarla/orgs",
    "repos_url": "https://api.github.com/users/macfarla/repos",
    "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
    "received_events_url": "https://api.github.com/users/macfarla/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3868/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3868/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1131998848",
    "html_url": "https://github.com/hyperledger/besu/issues/3868#issuecomment-1131998848",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3868",
    "id": 1131998848,
    "node_id": "IC_kwDODE2jmc5DeO6A",
    "user": {
      "login": "sharad-develop",
      "id": 23285242,
      "node_id": "MDQ6VXNlcjIzMjg1MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/23285242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sharad-develop",
      "html_url": "https://github.com/sharad-develop",
      "followers_url": "https://api.github.com/users/sharad-develop/followers",
      "following_url": "https://api.github.com/users/sharad-develop/following{/other_user}",
      "gists_url": "https://api.github.com/users/sharad-develop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sharad-develop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sharad-develop/subscriptions",
      "organizations_url": "https://api.github.com/users/sharad-develop/orgs",
      "repos_url": "https://api.github.com/users/sharad-develop/repos",
      "events_url": "https://api.github.com/users/sharad-develop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sharad-develop/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-19T17:36:56Z",
    "updated_at": "2022-05-19T17:36:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "This will affect - txpool_besuPendingTransactions too, as  eth_getTransactionByHash and txpool_besuPendingTransactions share the same result type - TransactionPendingResult. Do we want to apply the changes to txpool_besuPendingTransactions too or create a new result type ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1131998848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1136464224",
    "html_url": "https://github.com/hyperledger/besu/issues/3868#issuecomment-1136464224",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3868",
    "id": 1136464224,
    "node_id": "IC_kwDODE2jmc5DvRFg",
    "user": {
      "login": "sharad-develop",
      "id": 23285242,
      "node_id": "MDQ6VXNlcjIzMjg1MjQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/23285242?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sharad-develop",
      "html_url": "https://github.com/sharad-develop",
      "followers_url": "https://api.github.com/users/sharad-develop/followers",
      "following_url": "https://api.github.com/users/sharad-develop/following{/other_user}",
      "gists_url": "https://api.github.com/users/sharad-develop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sharad-develop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sharad-develop/subscriptions",
      "organizations_url": "https://api.github.com/users/sharad-develop/orgs",
      "repos_url": "https://api.github.com/users/sharad-develop/repos",
      "events_url": "https://api.github.com/users/sharad-develop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sharad-develop/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-24T21:49:52Z",
    "updated_at": "2022-05-25T01:34:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Neurone I can take this up, if you assign this to me",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1136464224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1136953001",
    "html_url": "https://github.com/hyperledger/besu/issues/3868#issuecomment-1136953001",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3868",
    "id": 1136953001,
    "node_id": "IC_kwDODE2jmc5DxIap",
    "user": {
      "login": "Neurone",
      "id": 562943,
      "node_id": "MDQ6VXNlcjU2Mjk0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/562943?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Neurone",
      "html_url": "https://github.com/Neurone",
      "followers_url": "https://api.github.com/users/Neurone/followers",
      "following_url": "https://api.github.com/users/Neurone/following{/other_user}",
      "gists_url": "https://api.github.com/users/Neurone/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Neurone/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Neurone/subscriptions",
      "organizations_url": "https://api.github.com/users/Neurone/orgs",
      "repos_url": "https://api.github.com/users/Neurone/repos",
      "events_url": "https://api.github.com/users/Neurone/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Neurone/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-25T08:31:44Z",
    "updated_at": "2022-05-25T08:31:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @Neurone I can take this up, if you assign this to me\r\n\r\n@sharad-develop I'm not part of the Besu team so I cannot assign tasks to others :) but I think you can start working on this with a draft PR and reference this issue in the description, so others can see that there's a WIP.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1136953001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1141725863",
    "html_url": "https://github.com/hyperledger/besu/issues/3868#issuecomment-1141725863",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3868",
    "id": 1141725863,
    "node_id": "IC_kwDODE2jmc5EDVqn",
    "user": {
      "login": "Sky0711",
      "id": 73522966,
      "node_id": "MDQ6VXNlcjczNTIyOTY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/73522966?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sky0711",
      "html_url": "https://github.com/Sky0711",
      "followers_url": "https://api.github.com/users/Sky0711/followers",
      "following_url": "https://api.github.com/users/Sky0711/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sky0711/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sky0711/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sky0711/subscriptions",
      "organizations_url": "https://api.github.com/users/Sky0711/orgs",
      "repos_url": "https://api.github.com/users/Sky0711/repos",
      "events_url": "https://api.github.com/users/Sky0711/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sky0711/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-31T06:41:36Z",
    "updated_at": "2022-05-31T06:42:00Z",
    "author_association": "NONE",
    "body": "This issue has been solved? HyperLeger-Besu will now work with a brownie? (When will be able to get and test the new changes?)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1141725863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1141733589",
    "html_url": "https://github.com/hyperledger/besu/issues/3868#issuecomment-1141733589",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3868",
    "id": 1141733589,
    "node_id": "IC_kwDODE2jmc5EDXjV",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-31T06:52:04Z",
    "updated_at": "2022-05-31T06:52:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "> This issue has been solved? HyperLeger-Besu will now work with a brownie? (When will be able to get and test the new changes?)\r\n\r\n@Sky0711 this is in the latest release https://github.com/hyperledger/besu/releases/tag/22.4.2 - let us know how you go!",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1141733589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

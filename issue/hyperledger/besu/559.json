{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/559",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/559/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/559/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/559/events",
  "html_url": "https://github.com/hyperledger/besu/issues/559",
  "id": 586002019,
  "node_id": "MDU6SXNzdWU1ODYwMDIwMTk=",
  "number": 559,
  "title": "Invalid JSON RPC response: \"\"",
  "user": {
    "login": "ppoliani",
    "id": 1389619,
    "node_id": "MDQ6VXNlcjEzODk2MTk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1389619?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ppoliani",
    "html_url": "https://github.com/ppoliani",
    "followers_url": "https://api.github.com/users/ppoliani/followers",
    "following_url": "https://api.github.com/users/ppoliani/following{/other_user}",
    "gists_url": "https://api.github.com/users/ppoliani/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ppoliani/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ppoliani/subscriptions",
    "organizations_url": "https://api.github.com/users/ppoliani/orgs",
    "repos_url": "https://api.github.com/users/ppoliani/repos",
    "events_url": "https://api.github.com/users/ppoliani/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ppoliani/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1537362490,
      "node_id": "MDU6TGFiZWwxNTM3MzYyNDkw",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "abdelhamidbakhta",
    "id": 45264458,
    "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/abdelhamidbakhta",
    "html_url": "https://github.com/abdelhamidbakhta",
    "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
    "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
    "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
    "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
    "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
    "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
    "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 10,
  "created_at": "2020-03-23T07:51:47Z",
  "updated_at": "2020-05-12T17:37:18Z",
  "closed_at": "2020-05-12T17:37:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/master/CODE-OF-CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging wiki: https://github.com/hyperledger/besu/wiki/debugging -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nSending many transactions to the RPC endpoint doesn't always end up running smoothly. I have a script that concurrently sends 1000-5000 transactions. The challenge in this case is to get the nonce right; so I've implemented a local nonce tracker that periodically re-syncs with the remote nonce.\r\n\r\nThe issue is that some of my transactions return:\r\n\r\n`Invalid JSON RPC response: \"\"`\r\n\r\nI use web3.js to send the transactions and more specifically the following function:\r\n\r\n```\r\nweb3.eth.sendSignedTransaction(signedTx)\r\n  .once('transactionHash', onData)\r\n  .on('error', onError));\r\n```\r\n\r\nI find it hard to understand that the meaning of that error. I understand that regarding the nonce management. three thing can go wrong:\r\n\r\n1. Send a tx with a low nonce. \r\n2. Send a tx with the same nonce as a previously submitted tx\r\n3. Send a tx with a higher nonce than the current account nonce.\r\n\r\nIn the first situation, typically I should get `Nonce too low`. Second case should emit `replacement transaction underpriced`. Now regarding the third case, I'm not sure if it will cause `Invalid JSON RPC response: \"\"`. I know that it will result in a nonce gap and some transactions will be stack in the transaction pool. The error message doesn't give me a hint if that's the case or if there is something else causing this issue.\r\n\r\n**Frequency:** [What percentage of the time does it occur?]\r\n\r\nEvery time I send too many transactions in a concurrent way. \r\n\r\n### Versions (Add all that apply)\r\nSoftware version:\r\nbesu/v1.3.8/linux-x86_64/oracle_openjdk-java-11\r\n\r\nJava version: [java -version]\r\n\r\nopenjdk 11.0.2 2019-01-15\r\nOpenJDK Runtime Environment (build 11.0.2+9-Debian-3bpo91)\r\nOpenJDK 64-Bit Server VM (build 11.0.2+9-Debian-3bpo91, mixed mode, sharing\r\nOS Name & Version:\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=16.04\r\nDISTRIB_CODENAME=xenial\r\nKernel Version:\r\nLinux staging1 4.4.0-171-generic #200-Ubuntu SMP Tue Dec 3 11:04:55 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/559/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/559/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/603104175",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-603104175",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 603104175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzEwNDE3NQ==",
    "user": {
      "login": "roderik",
      "id": 16780,
      "node_id": "MDQ6VXNlcjE2Nzgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16780?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/roderik",
      "html_url": "https://github.com/roderik",
      "followers_url": "https://api.github.com/users/roderik/followers",
      "following_url": "https://api.github.com/users/roderik/following{/other_user}",
      "gists_url": "https://api.github.com/users/roderik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/roderik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/roderik/subscriptions",
      "organizations_url": "https://api.github.com/users/roderik/orgs",
      "repos_url": "https://api.github.com/users/roderik/repos",
      "events_url": "https://api.github.com/users/roderik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/roderik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T08:38:57Z",
    "updated_at": "2020-03-24T08:38:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Historically this error is a sign your json rpc did not answer. are you sure you are not overloading the node or hitting some other os limits? ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/603104175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614713436",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-614713436",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 614713436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNDcxMzQzNg==",
    "user": {
      "login": "ppoliani",
      "id": 1389619,
      "node_id": "MDQ6VXNlcjEzODk2MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1389619?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ppoliani",
      "html_url": "https://github.com/ppoliani",
      "followers_url": "https://api.github.com/users/ppoliani/followers",
      "following_url": "https://api.github.com/users/ppoliani/following{/other_user}",
      "gists_url": "https://api.github.com/users/ppoliani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ppoliani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ppoliani/subscriptions",
      "organizations_url": "https://api.github.com/users/ppoliani/orgs",
      "repos_url": "https://api.github.com/users/ppoliani/repos",
      "events_url": "https://api.github.com/users/ppoliani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ppoliani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-16T15:10:04Z",
    "updated_at": "2020-04-16T15:10:04Z",
    "author_association": "NONE",
    "body": "I tried to minimise the number of concurrent call to just two. I also checked what happens what happens when I use the same nonce. \r\n\r\nI sent the following two transactions:\r\n\r\n```\r\n{ nonce: '0x15c8',\r\n  gasPrice: '0x0',\r\n  gasLimit: '0x24ada',\r\n  to: '0xDA35f4cb13a6ea0144469b23C0fE2F025bD4663B',\r\n  value: '0x0',\r\n  data: '0x0'\r\n}\r\n\r\n{ nonce: '0x15c8',\r\n  gasPrice: '0x0',\r\n  gasLimit: '0x24ada',\r\n  to: '0xDA35f4cb13a6ea0144469b23C0fE2F025bD4663B',\r\n  value: '0x0'\r\n  data:'0x0' \r\n}\r\n```\r\n\r\nThe expected behaviour is to receive replacement transaction underpriced error, however I receive 400 Bard Request and an empty response instead.\r\n\r\nI don't think a 400 bad request with an empty text is a very helpful response. There is not much information to know how to deal with the error.\r\n\r\nI wonder if the fact that I use a fee free network causes this behaviour as you can see gasPrice is 0 so I wonder if that's make Besu believe that it's not an underpriced transaction. I'm just guessing here\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/614713436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/625238737",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-625238737",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 625238737,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTIzODczNw==",
    "user": {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T12:57:05Z",
    "updated_at": "2020-05-07T12:57:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I tried to minimise the number of concurrent call to just two. I also checked what happens what happens when I use the same nonce.\r\n> \r\n> I sent the following two transactions:\r\n> \r\n> ```\r\n> { nonce: '0x15c8',\r\n>   gasPrice: '0x0',\r\n>   gasLimit: '0x24ada',\r\n>   to: '0xDA35f4cb13a6ea0144469b23C0fE2F025bD4663B',\r\n>   value: '0x0',\r\n>   data: '0x0'\r\n> }\r\n> \r\n> { nonce: '0x15c8',\r\n>   gasPrice: '0x0',\r\n>   gasLimit: '0x24ada',\r\n>   to: '0xDA35f4cb13a6ea0144469b23C0fE2F025bD4663B',\r\n>   value: '0x0'\r\n>   data:'0x0' \r\n> }\r\n> ```\r\n> \r\n> The expected behaviour is to receive replacement transaction underpriced error, however I receive 400 Bard Request and an empty response instead.\r\n> \r\n> I don't think a 400 bad request with an empty text is a very helpful response. There is not much information to know how to deal with the error.\r\n> \r\n> I wonder if the fact that I use a fee free network causes this behaviour as you can see gasPrice is 0 so I wonder if that's make Besu believe that it's not an underpriced transaction. I'm just guessing here\r\n\r\nCould you attach a sample of the configuration you are using including:\r\n- command line options\r\n- extract of the genesis file without any account information",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/625238737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626675212",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-626675212",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 626675212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjY3NTIxMg==",
    "user": {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T12:38:02Z",
    "updated_at": "2020-05-11T12:38:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I tried to minimise the number of concurrent call to just two. I also checked what happens what happens when I use the same nonce.\r\n> \r\n> I sent the following two transactions:\r\n> \r\n> ```\r\n> { nonce: '0x15c8',\r\n>   gasPrice: '0x0',\r\n>   gasLimit: '0x24ada',\r\n>   to: '0xDA35f4cb13a6ea0144469b23C0fE2F025bD4663B',\r\n>   value: '0x0',\r\n>   data: '0x0'\r\n> }\r\n> \r\n> { nonce: '0x15c8',\r\n>   gasPrice: '0x0',\r\n>   gasLimit: '0x24ada',\r\n>   to: '0xDA35f4cb13a6ea0144469b23C0fE2F025bD4663B',\r\n>   value: '0x0'\r\n>   data:'0x0' \r\n> }\r\n> ```\r\n> \r\n> The expected behaviour is to receive replacement transaction underpriced error, however I receive 400 Bard Request and an empty response instead.\r\n> \r\n> I don't think a 400 bad request with an empty text is a very helpful response. There is not much information to know how to deal with the error.\r\n> \r\n> I wonder if the fact that I use a fee free network causes this behaviour as you can see gasPrice is 0 so I wonder if that's make Besu believe that it's not an underpriced transaction. I'm just guessing here\r\n\r\n@ppoliani  If i run your scenario with the 2 transactions at the same nonce and a non zero gas price I don't get any error. The first and the second attempts return both a success response containing the transaction hash.\r\n\r\n```json\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"result\": \"0x8cdf5653a7847acee44dd93024d83ce56ccb696de614ac044bd57bf08638730e\"\r\n}\r\n```\r\n\r\nNow if i send a zero gas price transaction with defaults options iu get the following error:\r\n```json\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"error\": {\r\n    \"code\": -32009,\r\n    \"message\": \"Gas price below configured minimum gas price\"\r\n  }\r\n}\r\n```\r\nWhich is the intended behaviour since the default minimum gas price is 1000 (can be changed with `--min-gas-price`, value expressed in WEI).\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626675212/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626743727",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-626743727",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 626743727,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjc0MzcyNw==",
    "user": {
      "login": "ppoliani",
      "id": 1389619,
      "node_id": "MDQ6VXNlcjEzODk2MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1389619?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ppoliani",
      "html_url": "https://github.com/ppoliani",
      "followers_url": "https://api.github.com/users/ppoliani/followers",
      "following_url": "https://api.github.com/users/ppoliani/following{/other_user}",
      "gists_url": "https://api.github.com/users/ppoliani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ppoliani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ppoliani/subscriptions",
      "organizations_url": "https://api.github.com/users/ppoliani/orgs",
      "repos_url": "https://api.github.com/users/ppoliani/repos",
      "events_url": "https://api.github.com/users/ppoliani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ppoliani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T14:38:07Z",
    "updated_at": "2020-05-11T14:38:07Z",
    "author_association": "NONE",
    "body": "@abdelhamidbakhta Thanks for getting back.\r\n\r\n I deployed my network on a K8s cluster. The pod start via the following command\r\n\r\n```\r\n             exec /opt/besu/bin/besu \\\r\n              --genesis-file=/configs/genesis.json \\\r\n              --rpc-http-authentication-enabled \\\r\n              --data-path=/var/besu/data \\\r\n              --rpc-ws-authentication-enabled \\\r\n              --rpc-http-authentication-credentials-file=/configs/creds.toml \\\r\n              --rpc-ws-authentication-credentials-file=/configs/creds.toml \\\r\n              --min-gas-price=0 \\\r\n              --rpc-http-enabled \\\r\n              --rpc-http-host=0.0.0.0 \\\r\n              --rpc-http-port=8545 \\\r\n              --rpc-http-cors-origins=${NODES_HTTP_CORS_ORIGINS} \\\r\n              --rpc-http-api=ETH,NET,CLIQUE,ADMIN,WEB3 \\\r\n              --graphql-http-enabled \\\r\n              --graphql-http-host=0.0.0.0 \\\r\n              --graphql-http-port=8547 \\\r\n              --graphql-http-cors-origins=${NODES_HTTP_CORS_ORIGINS} \\\r\n              --rpc-ws-enabled \\\r\n              --rpc-ws-host=0.0.0.0 \\\r\n              --rpc-ws-port=8546 \\\r\n              --metrics-enabled=true \\\r\n              --metrics-host=0.0.0.0 \\\r\n              --metrics-port=9545 \\\r\n              --host-whitelist=${NODES_HOST_WHITELIST} \\\r\n              --bootnodes=enode://${VALIDATOR1_PUBKEY}@${VALIDATOR1_SERVICE_HOST}:30303\r\n```\r\nBelow is the content of the genesis file (modified to hide some parts)\r\n\r\n```\r\n    {\r\n      \"config\": {\r\n        \"chainId\": 1111,\r\n        \"constantinoplefixblock\": 0,\r\n        \"contractSizeLimit\": 2147483647,\r\n        \"clique\": {\r\n          \"blockperiodseconds\": 5,\r\n          \"epochlength\": 30000\r\n        }\r\n      },\r\n      \"coinbase\": \"0x0000000000000000000000000000000000000000\",\r\n      \"difficulty\": \"0x1\",\r\n      \"gasLimit\": \"0x1fffffffffffff\",\r\n      \"extraData\": \"0x0000000000000000000000000000000000000000000000000000000000000000<extra data>0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"mixHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\",\r\n      \"nonce\": \"0x0\",\r\n      \"timestamp\": \"0x0\",\r\n      \"alloc\": {\r\n        \"0xxxxxxxxxxxxxxxxxxx\": {\r\n          \"balance\": \"0xad78ebc5ac6200000\"\r\n        }\r\n      },\r\n      \"number\": \"0x0\",\r\n      \"gasUsed\": \"0x0\",\r\n      \"parentHash\": \"0x0000000000000000000000000000000000000000000000000000000000000000\"\r\n    }\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626743727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626746195",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-626746195",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 626746195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjc0NjE5NQ==",
    "user": {
      "login": "ppoliani",
      "id": 1389619,
      "node_id": "MDQ6VXNlcjEzODk2MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1389619?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ppoliani",
      "html_url": "https://github.com/ppoliani",
      "followers_url": "https://api.github.com/users/ppoliani/followers",
      "following_url": "https://api.github.com/users/ppoliani/following{/other_user}",
      "gists_url": "https://api.github.com/users/ppoliani/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ppoliani/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ppoliani/subscriptions",
      "organizations_url": "https://api.github.com/users/ppoliani/orgs",
      "repos_url": "https://api.github.com/users/ppoliani/repos",
      "events_url": "https://api.github.com/users/ppoliani/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ppoliani/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T14:42:18Z",
    "updated_at": "2020-05-11T14:42:18Z",
    "author_association": "NONE",
    "body": "> @ppoliani If i run your scenario with the 2 transactions at the same nonce and a non zero gas price I don't get any error. The first and the second attempts return both a success response containing the transaction hash.\r\n\r\n> Now if i send a zero gas price transaction with defaults options iu get the following error:\r\n\r\nThis is not the case in my setup because I have explicitly created a free-gas network.\r\nI don't believe this is an accurate behaviour though. You can't use the same nonce in any Ethereum based client. Most of the clients I worked for use a clear message error which is as I mentioned earlier is something along these lines \r\n\r\n> replacement transaction underpriced\r\n\r\nIn any case this is an error that should be reported by the rpc client.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626746195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626774038",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-626774038",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 626774038,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjc3NDAzOA==",
    "user": {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T15:26:10Z",
    "updated_at": "2020-05-11T15:26:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ppoliani Ok you are right, the behaviour is confusing. I will work on it to align with other clients implementations.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626774038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626780547",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-626780547",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 626780547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjc4MDU0Nw==",
    "user": {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T15:37:14Z",
    "updated_at": "2020-05-11T15:38:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "Actually with your scenario Geth would return (exact same transaction):\r\n```json\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"error\": {\r\n        \"code\": -32000,\r\n        \"message\": \"known transaction: 6e5bd3806b90881721d5c92ccb8ec3abb9dbb3942e1513d10cb8e7e8a6015c6b\"\r\n    }\r\n}\r\n```\r\nRight ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626780547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626781425",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-626781425",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 626781425,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjc4MTQyNQ==",
    "user": {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T15:38:38Z",
    "updated_at": "2020-05-11T15:51:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "And with a gas price slightly higher  but not sufficient to match the minimum price bump (or lower gas price):\r\n```json\r\n{\r\n    \"jsonrpc\": \"2.0\",\r\n    \"id\": 1,\r\n    \"error\": {\r\n        \"code\": -32000,\r\n        \"message\": \"replacement transaction underpriced\"\r\n    }\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/626781425/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/627424689",
    "html_url": "https://github.com/hyperledger/besu/issues/559#issuecomment-627424689",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/559",
    "id": 627424689,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzQyNDY4OQ==",
    "user": {
      "login": "abdelhamidbakhta",
      "id": 45264458,
      "node_id": "MDQ6VXNlcjQ1MjY0NDU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45264458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/abdelhamidbakhta",
      "html_url": "https://github.com/abdelhamidbakhta",
      "followers_url": "https://api.github.com/users/abdelhamidbakhta/followers",
      "following_url": "https://api.github.com/users/abdelhamidbakhta/following{/other_user}",
      "gists_url": "https://api.github.com/users/abdelhamidbakhta/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/abdelhamidbakhta/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/abdelhamidbakhta/subscriptions",
      "organizations_url": "https://api.github.com/users/abdelhamidbakhta/orgs",
      "repos_url": "https://api.github.com/users/abdelhamidbakhta/repos",
      "events_url": "https://api.github.com/users/abdelhamidbakhta/events{/privacy}",
      "received_events_url": "https://api.github.com/users/abdelhamidbakhta/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-12T15:40:53Z",
    "updated_at": "2020-05-12T15:40:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ppoliani I added explicit error message in #904 ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/627424689/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

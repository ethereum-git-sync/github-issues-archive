{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/1627",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/1627/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/1627/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/1627/events",
  "html_url": "https://github.com/hyperledger/besu/issues/1627",
  "id": 752104475,
  "node_id": "MDU6SXNzdWU3NTIxMDQ0NzU=",
  "number": 1627,
  "title": "benchmarking besu - optimal hardware specs",
  "user": {
    "login": "AndreiD",
    "id": 542665,
    "node_id": "MDQ6VXNlcjU0MjY2NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/542665?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndreiD",
    "html_url": "https://github.com/AndreiD",
    "followers_url": "https://api.github.com/users/AndreiD/followers",
    "following_url": "https://api.github.com/users/AndreiD/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndreiD/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndreiD/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndreiD/subscriptions",
    "organizations_url": "https://api.github.com/users/AndreiD/orgs",
    "repos_url": "https://api.github.com/users/AndreiD/repos",
    "events_url": "https://api.github.com/users/AndreiD/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndreiD/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-11-27T09:21:09Z",
  "updated_at": "2020-12-16T18:24:17Z",
  "closed_at": "2020-12-16T18:24:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Greetings,\r\n\r\nWe've run some benchmarks for besu (besu/v20.10.1/linux-x86_64/openjdk-java-11)  on the following hardware:\r\n\r\n4 nodes (each one a separate VM), ubuntu 18.04, 2 seconds block interval, ~infinite gas limit, IBFT2.0\r\n\r\n4 x 32 core CPU (CPU optimized VM), 256GB, NVME SSD 7500 to 15000 IOPS, 3Gbps internal network, accelerated networking on\r\nand\r\n4 x   4 core core CPU(CPU optimized VM) , 64GB, P50 - 7500 IOPS, 250 Mbps, 3Gbps internal network, accelerated networking off\r\n\r\nand the results are similar, about 1900 TPS, while the hardware difference is huge\r\n\r\nTheoretically  TPS = (GAS Limit ) / (TxGas * BlockTime)\r\n\r\nso we were wondering what is the limiting factor and how we can optimise our tests to get more TPS\r\n\r\nis there a testing procedure that we can follow to get accurate benchmarking results ?",
  "closed_by": {
    "login": "timbeiko",
    "id": 9390255,
    "node_id": "MDQ6VXNlcjkzOTAyNTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9390255?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/timbeiko",
    "html_url": "https://github.com/timbeiko",
    "followers_url": "https://api.github.com/users/timbeiko/followers",
    "following_url": "https://api.github.com/users/timbeiko/following{/other_user}",
    "gists_url": "https://api.github.com/users/timbeiko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/timbeiko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/timbeiko/subscriptions",
    "organizations_url": "https://api.github.com/users/timbeiko/orgs",
    "repos_url": "https://api.github.com/users/timbeiko/repos",
    "events_url": "https://api.github.com/users/timbeiko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/timbeiko/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/1627/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/1627/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/734886163",
    "html_url": "https://github.com/hyperledger/besu/issues/1627#issuecomment-734886163",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1627",
    "id": 734886163,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDg4NjE2Mw==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T15:29:28Z",
    "updated_at": "2020-11-27T15:29:28Z",
    "author_association": "MEMBER",
    "body": "Transaction processing is still single threaded.  Each TX can be influenced entirely by each previous tx.  There are internal discussions on how to parallelize that step but haven't been implemented yet.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/734886163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/734886239",
    "html_url": "https://github.com/hyperledger/besu/issues/1627#issuecomment-734886239",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1627",
    "id": 734886239,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDg4NjIzOQ==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T15:29:40Z",
    "updated_at": "2020-11-27T15:29:40Z",
    "author_association": "MEMBER",
    "body": "also, is your test harness public?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/734886239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/735251825",
    "html_url": "https://github.com/hyperledger/besu/issues/1627#issuecomment-735251825",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1627",
    "id": 735251825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTI1MTgyNQ==",
    "user": {
      "login": "AndreiD",
      "id": 542665,
      "node_id": "MDQ6VXNlcjU0MjY2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/542665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndreiD",
      "html_url": "https://github.com/AndreiD",
      "followers_url": "https://api.github.com/users/AndreiD/followers",
      "following_url": "https://api.github.com/users/AndreiD/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndreiD/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndreiD/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndreiD/subscriptions",
      "organizations_url": "https://api.github.com/users/AndreiD/orgs",
      "repos_url": "https://api.github.com/users/AndreiD/repos",
      "events_url": "https://api.github.com/users/AndreiD/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndreiD/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-28T16:23:46Z",
    "updated_at": "2020-11-28T16:23:46Z",
    "author_association": "NONE",
    "body": "thanks for the response. what do you mean by test harness ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/735251825/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/735290865",
    "html_url": "https://github.com/hyperledger/besu/issues/1627#issuecomment-735290865",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1627",
    "id": 735290865,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTI5MDg2NQ==",
    "user": {
      "login": "shemnon",
      "id": 38109,
      "node_id": "MDQ6VXNlcjM4MTA5",
      "avatar_url": "https://avatars.githubusercontent.com/u/38109?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shemnon",
      "html_url": "https://github.com/shemnon",
      "followers_url": "https://api.github.com/users/shemnon/followers",
      "following_url": "https://api.github.com/users/shemnon/following{/other_user}",
      "gists_url": "https://api.github.com/users/shemnon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shemnon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shemnon/subscriptions",
      "organizations_url": "https://api.github.com/users/shemnon/orgs",
      "repos_url": "https://api.github.com/users/shemnon/repos",
      "events_url": "https://api.github.com/users/shemnon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shemnon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-28T21:10:01Z",
    "updated_at": "2020-11-28T21:10:01Z",
    "author_association": "MEMBER",
    "body": "The code you are running to (a) set up the System Under Test (the nodes) if automated, and (b) the code that runs the transactions and loads them into the sytem.  and possibly (c) gathers the stats and reports for the test.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/735290865/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/735356215",
    "html_url": "https://github.com/hyperledger/besu/issues/1627#issuecomment-735356215",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/1627",
    "id": 735356215,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTM1NjIxNQ==",
    "user": {
      "login": "AndreiD",
      "id": 542665,
      "node_id": "MDQ6VXNlcjU0MjY2NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/542665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndreiD",
      "html_url": "https://github.com/AndreiD",
      "followers_url": "https://api.github.com/users/AndreiD/followers",
      "following_url": "https://api.github.com/users/AndreiD/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndreiD/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndreiD/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndreiD/subscriptions",
      "organizations_url": "https://api.github.com/users/AndreiD/orgs",
      "repos_url": "https://api.github.com/users/AndreiD/repos",
      "events_url": "https://api.github.com/users/AndreiD/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndreiD/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-29T07:39:21Z",
    "updated_at": "2020-11-29T07:39:21Z",
    "author_association": "NONE",
    "body": "I'll have to ask if I can show the code but, in short I do the following:\r\n\r\n- install manually binary in 4 VMs following your tutorial\r\n- transfer the ETH to 10k accounts by a simple script\r\n- from as many RPC nodes as possible (I think I tested with 4 separate VMs) I transfer eth between the accounts.\r\nthis is not optimized like, auto incrementing the nonce, it's just how you would do it in a real program. I'm thinking for it to be more \"real\" I should send just the signed transactions.... maybe I'll do that in the next version of the test program.\r\n- I look in the blockchain explorer how many blocks were included\r\n\r\nThe idea is to have as many RPC nodes as possible, because if you ...try too hard.. you would get some TCP errrors address not found. So some auto devops tool like terraform, ansible, chef etc. should be used to create the VMs and destroy them after.... but I didn't reach that part yet. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/735356215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

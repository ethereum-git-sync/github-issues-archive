{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/5368",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/5368/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/5368/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/5368/events",
  "html_url": "https://github.com/hyperledger/besu/issues/5368",
  "id": 1674652928,
  "node_id": "I_kwDODE2jmc5j0S0A",
  "number": 5368,
  "title": "Error \"Invalid params\" when send a big mount of transaction(old versions before 21.10.9 dont have this issue)",
  "user": {
    "login": "cai-dclab",
    "id": 93506280,
    "node_id": "U_kgDOBZLK6A",
    "avatar_url": "https://avatars.githubusercontent.com/u/93506280?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cai-dclab",
    "html_url": "https://github.com/cai-dclab",
    "followers_url": "https://api.github.com/users/cai-dclab/followers",
    "following_url": "https://api.github.com/users/cai-dclab/following{/other_user}",
    "gists_url": "https://api.github.com/users/cai-dclab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cai-dclab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cai-dclab/subscriptions",
    "organizations_url": "https://api.github.com/users/cai-dclab/orgs",
    "repos_url": "https://api.github.com/users/cai-dclab/repos",
    "events_url": "https://api.github.com/users/cai-dclab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cai-dclab/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-04-19T10:48:01Z",
  "updated_at": "2023-06-02T03:19:55Z",
  "closed_at": "2023-05-08T22:26:06Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!-- Have you done the following? -->\r\n<!--   * read the Code of Conduct? By filing an Issue, you are expected to -->  \r\n<!--     comply with it, including treating everyone with respect: -->\r\n<!--     https://github.com/hyperledger/besu/blob/main/CODE_OF_CONDUCT.md -->\r\n<!--   * Reproduced the issue in the latest version of the software -->\r\n<!--   * Read the debugging docs: https://besu.hyperledger.org/en/stable/HowTo/Monitor/Logging/ -->\r\n<!--   * Duplicate Issue check:  https://github.com/search?q=+is%3Aissue+repo%3Ahyperledger/Besu -->\r\n<!-- Note:  Not all sections will apply to all issue types. -->\r\n\r\n### Description\r\nI am using Caliper to test the performance of besu(IBFT2.0 and Clique). However, there is one transaction in the middle of it was failed with error \"Invalid params\". It cause the nonce gap because Caliper sends consecutive nonce number of transaction. All the transactions after the failed transaction will stuck in the txpool.\r\n\r\nI found an exactly same issue form Caliper repo's  issue: \r\nhttps://github.com/hyperledger/caliper/issues/1474\r\n\r\nBut, the old version of Besu(before 21.10.9) doesn't have this issue. So I assume the new version's update triggered it. \r\n\r\nCan anyone help?\r\n\r\n### Steps to Reproduce (Bug)\r\nhttps://github.com/hyperledger/caliper/issues/1474 \r\nHere is the reproduce process someone posted. I guess it will happen when there is a huge amount of transactions send the the node. \r\n\r\n### Versions (Add all that apply)\r\n* Software version: [`besu --version`]\r\nabove besu-22.10.1\r\n",
  "closed_by": {
    "login": "non-fungible-nelson",
    "id": 85905982,
    "node_id": "MDQ6VXNlcjg1OTA1OTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/non-fungible-nelson",
    "html_url": "https://github.com/non-fungible-nelson",
    "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
    "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
    "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
    "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
    "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
    "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/5368/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/5368/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1530440307",
    "html_url": "https://github.com/hyperledger/besu/issues/5368#issuecomment-1530440307",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5368",
    "id": 1530440307,
    "node_id": "IC_kwDODE2jmc5bOKpz",
    "user": {
      "login": "non-fungible-nelson",
      "id": 85905982,
      "node_id": "MDQ6VXNlcjg1OTA1OTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/85905982?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/non-fungible-nelson",
      "html_url": "https://github.com/non-fungible-nelson",
      "followers_url": "https://api.github.com/users/non-fungible-nelson/followers",
      "following_url": "https://api.github.com/users/non-fungible-nelson/following{/other_user}",
      "gists_url": "https://api.github.com/users/non-fungible-nelson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/non-fungible-nelson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/non-fungible-nelson/subscriptions",
      "organizations_url": "https://api.github.com/users/non-fungible-nelson/orgs",
      "repos_url": "https://api.github.com/users/non-fungible-nelson/repos",
      "events_url": "https://api.github.com/users/non-fungible-nelson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/non-fungible-nelson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-01T22:24:20Z",
    "updated_at": "2023-05-01T22:24:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "I see that you found the issue around the tx-pool limit flag. In our next release we also have a new transaction pool that would not cause these transactions to be stuck. OK to close this issue? With the right config it should allow Caliper to continue ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1530440307/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1563912695",
    "html_url": "https://github.com/hyperledger/besu/issues/5368#issuecomment-1563912695",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5368",
    "id": 1563912695,
    "node_id": "IC_kwDODE2jmc5dN2n3",
    "user": {
      "login": "chenqping",
      "id": 5651810,
      "node_id": "MDQ6VXNlcjU2NTE4MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5651810?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chenqping",
      "html_url": "https://github.com/chenqping",
      "followers_url": "https://api.github.com/users/chenqping/followers",
      "following_url": "https://api.github.com/users/chenqping/following{/other_user}",
      "gists_url": "https://api.github.com/users/chenqping/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chenqping/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chenqping/subscriptions",
      "organizations_url": "https://api.github.com/users/chenqping/orgs",
      "repos_url": "https://api.github.com/users/chenqping/repos",
      "events_url": "https://api.github.com/users/chenqping/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chenqping/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-26T07:11:11Z",
    "updated_at": "2023-05-26T07:15:16Z",
    "author_association": "NONE",
    "body": "configuration doesn't help oh, @non-fungible-nelson @cai-dclab did you solve this issue, as it exists in 23.1.3 when I benchmark with caliper",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1563912695/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1573081770",
    "html_url": "https://github.com/hyperledger/besu/issues/5368#issuecomment-1573081770",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/5368",
    "id": 1573081770,
    "node_id": "IC_kwDODE2jmc5dw1Kq",
    "user": {
      "login": "cai-dclab",
      "id": 93506280,
      "node_id": "U_kgDOBZLK6A",
      "avatar_url": "https://avatars.githubusercontent.com/u/93506280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cai-dclab",
      "html_url": "https://github.com/cai-dclab",
      "followers_url": "https://api.github.com/users/cai-dclab/followers",
      "following_url": "https://api.github.com/users/cai-dclab/following{/other_user}",
      "gists_url": "https://api.github.com/users/cai-dclab/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cai-dclab/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cai-dclab/subscriptions",
      "organizations_url": "https://api.github.com/users/cai-dclab/orgs",
      "repos_url": "https://api.github.com/users/cai-dclab/repos",
      "events_url": "https://api.github.com/users/cai-dclab/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cai-dclab/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-02T03:19:55Z",
    "updated_at": "2023-06-02T03:19:55Z",
    "author_association": "NONE",
    "body": "@chenqping yes, I also still have this error even with version 23.1.4. But I noticed if I set it to a lower txNumber(txNumber: 1500), there is no error. This error is occurring around 1700~1900 tx.  \r\n@non-fungible-nelson Would you please send me the pool limit flag fix issue number or code commit? The error still there. ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1573081770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/4151/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/4151/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/4151/events",
  "html_url": "https://github.com/hyperledger/besu/issues/4151",
  "id": 1314873602,
  "node_id": "I_kwDODE2jmc5OX2EC",
  "number": 4151,
  "title": "World State Root does not match expected value -> Error processing block/Failed to import block: Invalid block",
  "user": {
    "login": "howardrcc",
    "id": 43438994,
    "node_id": "MDQ6VXNlcjQzNDM4OTk0",
    "avatar_url": "https://avatars.githubusercontent.com/u/43438994?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/howardrcc",
    "html_url": "https://github.com/howardrcc",
    "followers_url": "https://api.github.com/users/howardrcc/followers",
    "following_url": "https://api.github.com/users/howardrcc/following{/other_user}",
    "gists_url": "https://api.github.com/users/howardrcc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/howardrcc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/howardrcc/subscriptions",
    "organizations_url": "https://api.github.com/users/howardrcc/orgs",
    "repos_url": "https://api.github.com/users/howardrcc/repos",
    "events_url": "https://api.github.com/users/howardrcc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/howardrcc/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4328706977,
      "node_id": "LA_kwDODE2jmc8AAAABAgLToQ",
      "url": "https://api.github.com/repos/hyperledger/besu/labels/TeamChupa",
      "name": "TeamChupa",
      "color": "fbca04",
      "default": false,
      "description": "GH issues worked on by Chupacabara Team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 17,
  "created_at": "2022-07-22T11:13:00Z",
  "updated_at": "2024-01-06T19:41:23Z",
  "closed_at": "2022-11-05T17:43:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\nHi there. I successfully synced to mainnet a few day using snapsync. I am getting Errors now. Here is a snippet of the log (I'm not seeing other usefull messages in TRACE/DEBUG). I'm not sure what is happing. I tried restart and upgrading besu as suggested in other Issues but thats not working for me.\r\n\r\nAny suggestions?\r\n\r\n\r\n``` \r\n2022-07-22 10:52:28.053+00:00 | EthScheduler-Services-3 (importBlock) | ERROR | AbstractBlockProcessor | failed persisting block\r\njava.lang.RuntimeException: World State Root does not match expected value, header 0xe821a58beda94f8ff6b230b1933235f365c52a90a590e09bfda7a89c95991939 calculated 0xe50fb371f71f4d01e127f68c8d8f99b5cd638d3ac4ffb7cf46c9378c9b49de2d\r\n        at org.hyperledger.besu.ethereum.bonsai.BonsaiPersistedWorldState.persist(BonsaiPersistedWorldState.java:255)\r\n        at org.hyperledger.besu.ethereum.mainnet.AbstractBlockProcessor.processBlock(AbstractBlockProcessor.java:201)\r\n        at org.hyperledger.besu.ethereum.mainnet.AbstractBlockProcessor.processBlock(AbstractBlockProcessor.java:42)\r\n        at org.hyperledger.besu.ethereum.mainnet.BlockProcessor.processBlock(BlockProcessor.java:75)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.processBlock(MainnetBlockValidator.java:158)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:112)\r\n        at org.hyperledger.besu.ethereum.MainnetBlockValidator.validateAndProcessBlock(MainnetBlockValidator.java:71)\r\n        at org.hyperledger.besu.ethereum.mainnet.MainnetBlockImporter.importBlock(MainnetBlockImporter.java:44)\r\n        at org.hyperledger.besu.ethereum.core.BlockImporter.importBlock(BlockImporter.java:44)\r\n        at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:61)\r\n        at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:31)\r\n        at org.hyperledger.besu.services.pipeline.CompleterStage.run(CompleterStage.java:37)\r\n        at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:152)\r\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n2022-07-22 10:52:28.054+00:00 | EthScheduler-Services-3 (importBlock) | ERROR | MainnetBlockValidator | Error processing block. Block 15183764 (0x91e647c6c047632c7ca649ab28600f68de9a4e76d58cff4772d77e7b36decb4f)\r\n2022-07-22 10:52:28.060+00:00 | EthScheduler-Services-3 (importBlock) | WARN  | PipelineChainDownloader | Invalid block detected. Disconnecting from sync target. Failed to import block: Invalid block at #15183764 (0x91e647c6c047632c7ca649ab28600f68de9a4e76d58cff4772d77e7b36decb4f)\r\n2022-07-22 10:52:28.061+00:00 | EthScheduler-Services-3 (importBlock) | WARN  | PipelineChainDownloader | Chain download failed. Restarting after short delay.\r\njava.util.concurrent.CompletionException: org.hyperledger.besu.ethereum.eth.sync.tasks.exceptions.InvalidBlockException: Failed to import block: Invalid block at #15183764 (0x91e647c6c047632c7ca649ab28600f68de9a4e76d58cff4772d77e7b36decb4f)\r\n        at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:368)\r\n        at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:377)\r\n        at java.base/java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:1097)\r\n        at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\r\n        at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)\r\n        at org.hyperledger.besu.services.pipeline.Pipeline.abort(Pipeline.java:180)\r\n        at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:159)\r\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.hyperledger.besu.ethereum.eth.sync.tasks.exceptions.InvalidBlockException: Failed to import block: Invalid block at #15183764 (0x91e647c6c047632c7ca649ab28600f68de9a4e76d58cff4772d77e7b36decb4f)\r\n        at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:62)\r\n        at org.hyperledger.besu.ethereum.eth.sync.fullsync.FullImportBlockStep.accept(FullImportBlockStep.java:31)\r\n        at org.hyperledger.besu.services.pipeline.CompleterStage.run(CompleterStage.java:37)\r\n        at org.hyperledger.besu.services.pipeline.Pipeline.lambda$runWithErrorHandling$3(Pipeline.java:152)\r\n        ... 5 more\r\n2022-07-22 10:52:58.913+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-07-22 10:53:58.913+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-07-22 10:54:58.913+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n2022-07-22 10:55:58.913+00:00 | Timer-0 | INFO  | DNSTimerTask | Refreshing DNS records with enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net\r\n```\r\n\r\n \r\n### Versions (Add all that apply)\r\n* Software version: [`besu --version [22.4.4] and tried 22.7.0 snapshot`]\r\n* Java version: [`java -version openjdk 11`]\r\n* OS Name & Version: [`NixOS 22.11`] \r\n* Kernel Version: [`Linux home 5.15.49`]\r\n\r\n* Docker Version: [`docker version 20.10.17`]\r\n\r\n ### Additional Information (Add any of the following or anything else that may be relevant)\r\n* Besu setup info - Mainnet/Snapsync Datastorage: Bonsai, using docker\r\n* System info - 16GB, I5-3570K\r\n",
  "closed_by": {
    "login": "garyschulte",
    "id": 1238512,
    "node_id": "MDQ6VXNlcjEyMzg1MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyschulte",
    "html_url": "https://github.com/garyschulte",
    "followers_url": "https://api.github.com/users/garyschulte/followers",
    "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
    "organizations_url": "https://api.github.com/users/garyschulte/orgs",
    "repos_url": "https://api.github.com/users/garyschulte/repos",
    "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyschulte/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/4151/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/4151/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1192780167",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1192780167",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1192780167,
    "node_id": "IC_kwDODE2jmc5HGGGH",
    "user": {
      "login": "ronaldjmaas",
      "id": 32280203,
      "node_id": "MDQ6VXNlcjMyMjgwMjAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32280203?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ronaldjmaas",
      "html_url": "https://github.com/ronaldjmaas",
      "followers_url": "https://api.github.com/users/ronaldjmaas/followers",
      "following_url": "https://api.github.com/users/ronaldjmaas/following{/other_user}",
      "gists_url": "https://api.github.com/users/ronaldjmaas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ronaldjmaas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ronaldjmaas/subscriptions",
      "organizations_url": "https://api.github.com/users/ronaldjmaas/orgs",
      "repos_url": "https://api.github.com/users/ronaldjmaas/repos",
      "events_url": "https://api.github.com/users/ronaldjmaas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ronaldjmaas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-22T17:14:33Z",
    "updated_at": "2022-07-22T17:16:56Z",
    "author_association": "NONE",
    "body": "I experienced same issue with 22.4.4. There are some fixes to mitigate this issue included in the 22.7.0-rc2 release of Besu. I discarded the database and retesting the sync from scratch using 22.7.0-rc2. Note when you see the 'World State Root does not match expected value' exception, your database is corrupted and cannot be recovered.\r\n\r\nHope you can do the same. The more testing the better.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1192780167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1194394569",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1194394569",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1194394569,
    "node_id": "IC_kwDODE2jmc5HMQPJ",
    "user": {
      "login": "howardrcc",
      "id": 43438994,
      "node_id": "MDQ6VXNlcjQzNDM4OTk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/43438994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/howardrcc",
      "html_url": "https://github.com/howardrcc",
      "followers_url": "https://api.github.com/users/howardrcc/followers",
      "following_url": "https://api.github.com/users/howardrcc/following{/other_user}",
      "gists_url": "https://api.github.com/users/howardrcc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/howardrcc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/howardrcc/subscriptions",
      "organizations_url": "https://api.github.com/users/howardrcc/orgs",
      "repos_url": "https://api.github.com/users/howardrcc/repos",
      "events_url": "https://api.github.com/users/howardrcc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/howardrcc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T17:34:37Z",
    "updated_at": "2022-07-25T17:35:59Z",
    "author_association": "NONE",
    "body": "Thanks for the tips. I tried 22.7.0-snapshot (latest) and the db got corrupted again.... Gonna try -rc2 now. funny thing it kind of synced (somewhere until 15.200.000) . Then I saw number of blocks behind going up again (in grafana). Restarted besu then the number of blocks starting to decrease again. 15 minutes later i get the world state root not match error. I think that at some point it switched from snap sync to full sync in the logs. Don't know if that's a clue but I'll guess we'll know more soon.\r\n\r\nafter this I'm switching to fastsync :-)",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1194394569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1195439744",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1195439744",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1195439744,
    "node_id": "IC_kwDODE2jmc5HQPaA",
    "user": {
      "login": "jflo",
      "id": 345937,
      "node_id": "MDQ6VXNlcjM0NTkzNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/345937?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jflo",
      "html_url": "https://github.com/jflo",
      "followers_url": "https://api.github.com/users/jflo/followers",
      "following_url": "https://api.github.com/users/jflo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jflo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jflo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jflo/subscriptions",
      "organizations_url": "https://api.github.com/users/jflo/orgs",
      "repos_url": "https://api.github.com/users/jflo/repos",
      "events_url": "https://api.github.com/users/jflo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jflo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T12:49:49Z",
    "updated_at": "2022-07-26T12:49:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "@howardrcc Did you delete your data fir and resync from empty with 22.7? That would be required.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1195439744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1195454515",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1195454515",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1195454515,
    "node_id": "IC_kwDODE2jmc5HQTAz",
    "user": {
      "login": "howardrcc",
      "id": 43438994,
      "node_id": "MDQ6VXNlcjQzNDM4OTk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/43438994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/howardrcc",
      "html_url": "https://github.com/howardrcc",
      "followers_url": "https://api.github.com/users/howardrcc/followers",
      "following_url": "https://api.github.com/users/howardrcc/following{/other_user}",
      "gists_url": "https://api.github.com/users/howardrcc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/howardrcc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/howardrcc/subscriptions",
      "organizations_url": "https://api.github.com/users/howardrcc/orgs",
      "repos_url": "https://api.github.com/users/howardrcc/repos",
      "events_url": "https://api.github.com/users/howardrcc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/howardrcc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T13:02:39Z",
    "updated_at": "2022-07-26T13:02:39Z",
    "author_association": "NONE",
    "body": "I did delete the data dir and also deleted after trying the (non-rc2) 22.7.0 snapshot. It's still syncing for a day or two I think. I'll report back in a few days.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1195454515/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1198359374",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1198359374",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1198359374,
    "node_id": "IC_kwDODE2jmc5HbYNO",
    "user": {
      "login": "howardrcc",
      "id": 43438994,
      "node_id": "MDQ6VXNlcjQzNDM4OTk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/43438994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/howardrcc",
      "html_url": "https://github.com/howardrcc",
      "followers_url": "https://api.github.com/users/howardrcc/followers",
      "following_url": "https://api.github.com/users/howardrcc/following{/other_user}",
      "gists_url": "https://api.github.com/users/howardrcc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/howardrcc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/howardrcc/subscriptions",
      "organizations_url": "https://api.github.com/users/howardrcc/orgs",
      "repos_url": "https://api.github.com/users/howardrcc/repos",
      "events_url": "https://api.github.com/users/howardrcc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/howardrcc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-28T16:14:35Z",
    "updated_at": "2022-07-28T16:14:35Z",
    "author_association": "NONE",
    "body": "another fail/corrupted when database was more or less synced. Found out the db got corrupted while grafana reporting it was running about 12000 blocks behind. So it's seems to be happening when all blocks are imported and when new blocks/ the worldstate is being calculated or retrieved.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1198359374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1304598699",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1304598699",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1304598699,
    "node_id": "IC_kwDODE2jmc5Nwpir",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-05T17:43:28Z",
    "updated_at": "2022-11-05T17:43:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "closing as fixed by #4409 ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1304598699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879674989",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879674989",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879674989,
    "node_id": "IC_kwDODE2jmc5wCZBt",
    "user": {
      "login": "JanKalin",
      "id": 18305372,
      "node_id": "MDQ6VXNlcjE4MzA1Mzcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/18305372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JanKalin",
      "html_url": "https://github.com/JanKalin",
      "followers_url": "https://api.github.com/users/JanKalin/followers",
      "following_url": "https://api.github.com/users/JanKalin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JanKalin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JanKalin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JanKalin/subscriptions",
      "organizations_url": "https://api.github.com/users/JanKalin/orgs",
      "repos_url": "https://api.github.com/users/JanKalin/repos",
      "events_url": "https://api.github.com/users/JanKalin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JanKalin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T12:58:09Z",
    "updated_at": "2024-01-06T13:09:10Z",
    "author_association": "NONE",
    "body": "I would like to reopen this issue. It cropped up today at around 12:29. Besu v23.10.2 running on a Debian machine, 32GB RAM, 536GB free out of 1.8T SSD, validating for about a year without problems. To free up space I have resynced with the checkpoint option (see the attached sync.log)\r\n[sync.log](https://github.com/hyperledger/besu/files/13849728/sync.log)\r\n\r\nEverything was going fine until today when I got missed attestation messages and checked the PC. This is the log from today (with quite a few lines delete, since the file would otherwise be too big)\r\n[besu.log](https://github.com/hyperledger/besu/files/13849745/besu.log)\r\n\r\nI will now reboot the machine and, if it does not work, will delete the Besu data and resync. Will keep you updated.\r\n\r\nThis is the `besu.service` file:\r\n```\r\n[Unit]\r\nDescription=Besu Execution Client (Mainnet)\r\nWants=network-online.target\r\nAfter=network-online.target\r\n\r\n[Service]\r\nUser=eth1\r\nGroup=eth1\r\nType=simple\r\nRestart=always\r\nRestartSec=5\r\nTimeoutStopSec=180\r\nEnvironment=\"JAVA_OPTS=-Xmx8g\"\r\nExecStart=/srv/besu/besu/bin/besu \\\r\n  --network=mainnet \\\r\n  --sync-mode=X_CHECKPOINT  \\\r\n  --data-path=/mnt/rpdata/besu_data \\\r\n  --data-storage-format=BONSAI \\\r\n  --engine-jwt-secret=/secrets/jwtsecret \\\r\n  --rpc-http-enabled=true \\\r\n  --rpc-http-port=8545 \\\r\n  --max-peers=40 \\\r\n  --metrics-enabled \\\r\n  --Xplugin-rocksdb-high-spec-enabled\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\nUPDATE1:\r\n\r\nReboot does not fix it.\r\n[post_reboot.log](https://github.com/hyperledger/besu/files/13849785/post_reboot.log)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879674989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879689762",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879689762",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879689762,
    "node_id": "IC_kwDODE2jmc5wCcoi",
    "user": {
      "login": "MikeJerred",
      "id": 17481425,
      "node_id": "MDQ6VXNlcjE3NDgxNDI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17481425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MikeJerred",
      "html_url": "https://github.com/MikeJerred",
      "followers_url": "https://api.github.com/users/MikeJerred/followers",
      "following_url": "https://api.github.com/users/MikeJerred/following{/other_user}",
      "gists_url": "https://api.github.com/users/MikeJerred/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MikeJerred/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MikeJerred/subscriptions",
      "organizations_url": "https://api.github.com/users/MikeJerred/orgs",
      "repos_url": "https://api.github.com/users/MikeJerred/repos",
      "events_url": "https://api.github.com/users/MikeJerred/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MikeJerred/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T13:36:48Z",
    "updated_at": "2024-01-06T13:36:48Z",
    "author_association": "NONE",
    "body": "I also got this error at around 11:30 GMT today. Reboot did not fix",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879689762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879690967",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879690967",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879690967,
    "node_id": "IC_kwDODE2jmc5wCc7X",
    "user": {
      "login": "JanKalin",
      "id": 18305372,
      "node_id": "MDQ6VXNlcjE4MzA1Mzcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/18305372?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JanKalin",
      "html_url": "https://github.com/JanKalin",
      "followers_url": "https://api.github.com/users/JanKalin/followers",
      "following_url": "https://api.github.com/users/JanKalin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JanKalin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JanKalin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JanKalin/subscriptions",
      "organizations_url": "https://api.github.com/users/JanKalin/orgs",
      "repos_url": "https://api.github.com/users/JanKalin/repos",
      "events_url": "https://api.github.com/users/JanKalin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JanKalin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T13:41:14Z",
    "updated_at": "2024-01-06T13:41:14Z",
    "author_association": "NONE",
    "body": "I forgot to mention that my localtime is CET, thus GMT+1. So apparently it happened more or less at the same time. Which was your last successfully synced block? Mine is apparently 18,947,892\r\n\r\n```\r\nJan 06 12:29:13 rp besu[2257214]: 2024-01-06 12:29:13.134+01:00 | vert.x-worker-thread-0 | INFO  | AbstractEngineNewPayload | Imported #18,947,891 / 125 tx / 16 ws / base fee 12.21 gwei / 11,071,834 (36.9%) gas / (0xa\r\n9ddaf079c9b5ed5baece459d7b7e2866983566bbb08f92c3134798eb0e67597) in 0.333s. Peers: 40\r\nJan 06 12:29:26 rp besu[2257214]: 2024-01-06 12:29:26.246+01:00 | vert.x-worker-thread-0 | INFO  | AbstractEngineNewPayload | Imported #18,947,892 / 187 tx / 16 ws / base fee 11.81 gwei / 17,562,696 (58.5%) gas / (0xc\r\n1141d53490d3b8ba41c88ef6db4256fbddc77db8cbb03afaeb5b94e52ee42f3) in 0.496s. Peers: 40\r\nJan 06 12:29:36 rp besu[2257214]: 2024-01-06 12:29:36.735+01:00 | vert.x-worker-thread-0 | ERROR | AbstractBlockProcessor | failed persisting block\r\nJan 06 12:29:36 rp besu[2257214]: java.lang.RuntimeException: World State Root does not match expected value, header 0xf9029a6ce0a53e912643642e3458967dd2e38edd60d77e312156d8b1c432a433 calculated 0xf26bfa5c260e327582633c0c77d8dbe900a4877ab57e067ec814acd81d4b98ba\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879690967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879691747",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879691747",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879691747,
    "node_id": "IC_kwDODE2jmc5wCdHj",
    "user": {
      "login": "MikeJerred",
      "id": 17481425,
      "node_id": "MDQ6VXNlcjE3NDgxNDI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/17481425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MikeJerred",
      "html_url": "https://github.com/MikeJerred",
      "followers_url": "https://api.github.com/users/MikeJerred/followers",
      "following_url": "https://api.github.com/users/MikeJerred/following{/other_user}",
      "gists_url": "https://api.github.com/users/MikeJerred/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MikeJerred/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MikeJerred/subscriptions",
      "organizations_url": "https://api.github.com/users/MikeJerred/orgs",
      "repos_url": "https://api.github.com/users/MikeJerred/repos",
      "events_url": "https://api.github.com/users/MikeJerred/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MikeJerred/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T13:43:54Z",
    "updated_at": "2024-01-06T13:43:54Z",
    "author_association": "NONE",
    "body": "Same block for me. Devs in the discord say they are working on it.\r\n```\r\nInvalid block 18947893 (0xb41fc83658a61504771fa9904d67f89b57c531cb902335358ff94c0680f05f07): Optional[World State Root does not match expected value, header 0xf9029a6ce0a53e912643642e3458967dd2e38edd60d77e312156d8b1c432a433 calculated 0xf26bfa5c260e327582633c0c77d8dbe900a4877ab57e067ec814acd81d4b98ba]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879691747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879693085",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879693085",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879693085,
    "node_id": "IC_kwDODE2jmc5wCdcd",
    "user": {
      "login": "dhigby",
      "id": 1316912,
      "node_id": "MDQ6VXNlcjEzMTY5MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1316912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhigby",
      "html_url": "https://github.com/dhigby",
      "followers_url": "https://api.github.com/users/dhigby/followers",
      "following_url": "https://api.github.com/users/dhigby/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhigby/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhigby/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhigby/subscriptions",
      "organizations_url": "https://api.github.com/users/dhigby/orgs",
      "repos_url": "https://api.github.com/users/dhigby/repos",
      "events_url": "https://api.github.com/users/dhigby/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhigby/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T13:48:55Z",
    "updated_at": "2024-01-06T13:48:55Z",
    "author_association": "NONE",
    "body": "I have the same issue and at the same time as @JanKalin .  Just started this morning, but maybe it has been going on longer until I ran out of free credits on infura backup.  I'm not as tech savvy, but I can post the same info JanKalin did above.\r\n\r\nbesu service file:\r\n\r\n    [Unit]\r\n    Description=Besu Execution Client (Mainnet)\r\n    Wants=network-online.target\r\n    After=network-online.target\r\n    [Service]\r\n    User=besu\r\n    Group=besu\r\n    Type=simple\r\n    Restart=always\r\n    RestartSec=5\r\n    ExecStart=/usr/local/bin/besu/bin/besu \\\r\n      --network=mainnet \\\r\n      --sync-mode=X_SNAP \\\r\n      --data-path=/var/lib/besu \\\r\n      --data-storage-format=BONSAI \\\r\n      --engine-jwt-secret=/var/lib/jwtsecret/jwt.hex \\\r\n      --metrics-enabled\r\n    [Install]\r\n    WantedBy=multi-user.target\r\n\r\nAnd... I'll wait to supply more info since a lot of people seem to have the same problem.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879693085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879698874",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879698874",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879698874,
    "node_id": "IC_kwDODE2jmc5wCe26",
    "user": {
      "login": "sfbahr",
      "id": 6777080,
      "node_id": "MDQ6VXNlcjY3NzcwODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6777080?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sfbahr",
      "html_url": "https://github.com/sfbahr",
      "followers_url": "https://api.github.com/users/sfbahr/followers",
      "following_url": "https://api.github.com/users/sfbahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/sfbahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sfbahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sfbahr/subscriptions",
      "organizations_url": "https://api.github.com/users/sfbahr/orgs",
      "repos_url": "https://api.github.com/users/sfbahr/repos",
      "events_url": "https://api.github.com/users/sfbahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sfbahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T14:12:28Z",
    "updated_at": "2024-01-06T14:12:28Z",
    "author_association": "NONE",
    "body": "More discussion of the recent issue in https://github.com/hyperledger/besu/issues/6357",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879698874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879715601",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879715601",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879715601,
    "node_id": "IC_kwDODE2jmc5wCi8R",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T14:37:52Z",
    "updated_at": "2024-01-06T14:37:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Could you try to upgrade to the version 23.10.3 ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879715601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879734081",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879734081",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879734081,
    "node_id": "IC_kwDODE2jmc5wCndB",
    "user": {
      "login": "dhigby",
      "id": 1316912,
      "node_id": "MDQ6VXNlcjEzMTY5MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1316912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhigby",
      "html_url": "https://github.com/dhigby",
      "followers_url": "https://api.github.com/users/dhigby/followers",
      "following_url": "https://api.github.com/users/dhigby/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhigby/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhigby/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhigby/subscriptions",
      "organizations_url": "https://api.github.com/users/dhigby/orgs",
      "repos_url": "https://api.github.com/users/dhigby/repos",
      "events_url": "https://api.github.com/users/dhigby/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhigby/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T15:45:46Z",
    "updated_at": "2024-01-06T15:45:46Z",
    "author_association": "NONE",
    "body": "I upgraded from 23.10.1 to pre-release 23.10.3 and am currently doing the backward sync.  We'll see if it completes.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879734081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879741810",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879741810",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879741810,
    "node_id": "IC_kwDODE2jmc5wCpVy",
    "user": {
      "login": "dhigby",
      "id": 1316912,
      "node_id": "MDQ6VXNlcjEzMTY5MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1316912?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhigby",
      "html_url": "https://github.com/dhigby",
      "followers_url": "https://api.github.com/users/dhigby/followers",
      "following_url": "https://api.github.com/users/dhigby/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhigby/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhigby/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhigby/subscriptions",
      "organizations_url": "https://api.github.com/users/dhigby/orgs",
      "repos_url": "https://api.github.com/users/dhigby/repos",
      "events_url": "https://api.github.com/users/dhigby/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhigby/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T16:12:08Z",
    "updated_at": "2024-01-06T16:12:08Z",
    "author_association": "NONE",
    "body": "Backward sync worked! besu is up and running after the upgrade to 23.10.3",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879741810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879742026",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879742026",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879742026,
    "node_id": "IC_kwDODE2jmc5wCpZK",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T16:12:59Z",
    "updated_at": "2024-01-06T16:15:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "I recommend to follow this https://discord.com/channels/905194001349627914/938504958909747250/1193223408058630295 for people having the problem ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879742026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879795760",
    "html_url": "https://github.com/hyperledger/besu/issues/4151#issuecomment-1879795760",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/4151",
    "id": 1879795760,
    "node_id": "IC_kwDODE2jmc5wC2gw",
    "user": {
      "login": "NessDan",
      "id": 304269,
      "node_id": "MDQ6VXNlcjMwNDI2OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/304269?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NessDan",
      "html_url": "https://github.com/NessDan",
      "followers_url": "https://api.github.com/users/NessDan/followers",
      "following_url": "https://api.github.com/users/NessDan/following{/other_user}",
      "gists_url": "https://api.github.com/users/NessDan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NessDan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NessDan/subscriptions",
      "organizations_url": "https://api.github.com/users/NessDan/orgs",
      "repos_url": "https://api.github.com/users/NessDan/repos",
      "events_url": "https://api.github.com/users/NessDan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NessDan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-06T19:32:04Z",
    "updated_at": "2024-01-06T19:41:23Z",
    "author_association": "NONE",
    "body": "> I recommend to follow this https://discord.com/channels/905194001349627914/938504958909747250/1193223408058630295 for people having the problem\r\n\r\nThis link doesn't go anywhere, I assume because I'm not in the server it was posted? Can you share whatever is in there here in the Github discussion?\r\n\r\nFound the solution I think in the Ethstaker Discord. ([Link to message.](https://discord.com/channels/694822223575384095/694822223575384099/1193223769372762112))\r\n\r\n> Besu world state issue recap.\r\n> \r\n> Around `2024-01-06T11:29:36 UTC`, Besu started reporting errors like this one: \r\n> `World State Root does not match expected value, header 0xf9029a6ce0a53e912643642e3458967dd2e38edd60d77e312156d8b1c432a433 calculated 0xf26bfa5c260e327582633c0c77d8dbe900a4877ab57e067ec814acd81d4b98ba followed by many Invalid new payload messages, with the effect that Besu is not in sync and the CL client is stuck too and not able to publish attestations or blocks.`\r\n> \r\n> The cause of this issue are still under investigation, but after collecting feedback from user and testing some options, there are some workarounds to recover you node, until a proper fix is released.\r\n> \r\n> Recovering options:\r\n> If you are still running Besu with version 23.10.2 or lower, then upgrade to 23.10.3 https://github.com/hyperledger/besu/releases/tag/untagged-8a32de7a7280bb003d79\r\n> If you are already on version 23.10.3, then keep Besu running, and operate on your CL client, removing its beacon db and restarting, this will trigger a backward sync in Besu that could help healing the worldstate. Instructions on how to delete the beacon db, depends on your client, for example for Teku you need to remove the `beacon` folder in the Teku data path, for other client refer to their documentation.\r\n> If after the backward sync session the issue is still there then try point 3.\r\n> If that fails, try the same process again, but force Besu to set its head back to a block prior to the problem block. This will require API access, and for this to work you have to enabled the DEBUG API:\r\n> \r\n> `--rpc-http-api=ETH,NET,WEB3,DEBUG`\r\n> \r\n> see https://besu.hyperledger.org/public-networks/reference/cli/options#rpc-http-api for more details, changes to that param will require Besu to be restarted.\r\n> \r\n> Once Besu is up and you have access to DEBUG apis, you can shutdown your CL client and clear its DB. With Besu still up, set its head back to block 18947892 (0x1211F34 in hex) using the following API call:\r\n> `curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"debug_setHead\",\"params\":[\"0x1211F34\"],\"id\":1}' http://localhost:8545`\r\n> Then restart your CL. Your CL should optimistically sync the beacon chain using a checkpoint from the network, and this will trigger a backward sync in Besu. \r\n> \r\n> If after the backward sync session the issue is still there then try point 4.\r\n> \r\n> If previous options have not worked then, you can try to resync only the world state, it can takes some hours, but it is faster from a resync from scratch `curl -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"debug_resyncWorldState\",\"params\":[],\"id\":1}' http://localhost:8545`\r\n\r\n![image](https://github.com/hyperledger/besu/assets/304269/1e3ee92c-00a2-40a4-a4bf-b08cfcc277a9)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1879795760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

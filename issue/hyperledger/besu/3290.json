{
  "url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
  "repository_url": "https://api.github.com/repos/hyperledger/besu",
  "labels_url": "https://api.github.com/repos/hyperledger/besu/issues/3290/labels{/name}",
  "comments_url": "https://api.github.com/repos/hyperledger/besu/issues/3290/comments",
  "events_url": "https://api.github.com/repos/hyperledger/besu/issues/3290/events",
  "html_url": "https://github.com/hyperledger/besu/issues/3290",
  "id": 1106014403,
  "node_id": "I_kwDODE2jmc5B7HDD",
  "number": 3290,
  "title": "Besu on Goerli struggles to find peers",
  "user": {
    "login": "yorickdowne",
    "id": 71337066,
    "node_id": "MDQ6VXNlcjcxMzM3MDY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yorickdowne",
    "html_url": "https://github.com/yorickdowne",
    "followers_url": "https://api.github.com/users/yorickdowne/followers",
    "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
    "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
    "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
    "repos_url": "https://api.github.com/users/yorickdowne/repos",
    "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 20,
  "created_at": "2022-01-17T15:47:33Z",
  "updated_at": "2022-01-21T12:59:01Z",
  "closed_at": "2022-01-21T12:59:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nBesu `/v21.10.8/linux-x86_64/openjdk-java-11` in Docker, with default `--nat-method` and with `--nat-method=DOCKER`, struggles to find peers. 30303 tcp/udp is open, tested with yougetsignal.\r\n\r\n```\r\nexecution_1           | 2022-01-17 16:41:59.195+01:00 | EthScheduler-Services-10 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 4383001 to 4383200, Peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.290+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.291+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.292+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.292+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.293+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.293+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.293+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.294+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.296+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.296+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.297+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:41:59.297+01:00 | nioEventLoopGroup-3-3 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1           | 2022-01-17 16:42:01.710+01:00 | nioEventLoopGroup-3-3 | INFO  | SyncTargetManager | Found common ancestor with peer Peer 0xa03f4447809bb24a62... at block 4383200\r\nexecution_1           | 2022-01-17 16:42:10.080+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1           | 2022-01-17 16:42:10.083+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\n```\r\n\r\nIt does not recover from this, at least not during the time I observed it, maybe half an hour.\r\n\r\n**Frequency:** Consistently this morning, though Besu had peers the previous day when it was first started.\r\n\r\n",
  "closed_by": {
    "login": "yorickdowne",
    "id": 71337066,
    "node_id": "MDQ6VXNlcjcxMzM3MDY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yorickdowne",
    "html_url": "https://github.com/yorickdowne",
    "followers_url": "https://api.github.com/users/yorickdowne/followers",
    "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
    "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
    "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
    "repos_url": "https://api.github.com/users/yorickdowne/repos",
    "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/3290/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/hyperledger/besu/issues/3290/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014712672",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1014712672",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1014712672,
    "node_id": "IC_kwDODE2jmc48e0lg",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T16:26:18Z",
    "updated_at": "2022-01-17T16:41:44Z",
    "author_association": "NONE",
    "body": "This resolved to a degree by clearing the DB and starting over. Curious. Will monitor this new sync attempt.\r\n\r\nIt's syncing but it's at 4/5 peers, instead of 25-50 like Geth on the same machine. That feels like a peering issue on Goerli, still.\r\n\r\nHard-coding `--p2p-host` to the host IP did not improve peering. Since the P2P ports are open, this might suggest the issue isn't with the advertised address and lack of incoming peers, but somewhere else.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014712672/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014729674",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1014729674",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1014729674,
    "node_id": "IC_kwDODE2jmc48e4vK",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-17T16:48:43Z",
    "updated_at": "2022-01-17T16:54:04Z",
    "author_association": "NONE",
    "body": "Debug gives me a clue.\r\n\r\nPeering with Geth fails.\r\n\r\n```\r\nexecution_1  | 2022-01-17 17:46:12.416+01:00 | nioEventLoopGroup-3-4 | DEBUG | EthProtocolManager | Disconnect - Outbound - 0x10 SUBPROTOCOL_TRIGGERED - PeerInfo{version=5, clientId='Geth/v1.10.14-stable-11a3a350/linux-amd64/go1.17.5', capabilities=[eth/66, snap/1], port=0, nodeId=0x3057ff59534df145961b0261d84e9f9c6e3268b77f73f464ed5b3ff95ab331668e7533e28e118504f95b77356bc08eb9e8dd42b48bb94b5a80c51d44a676acbb} - 13 peers left\r\n```\r\n\r\nInbound peering works generally: `Inbound connection established`\r\n\r\nInbound \"too many peers\" - is that by Besu?\r\n\r\n```\r\nDisconnect - Inbound - 0x04 TOO_MANY_PEERS - PeerInfo{version=5, clientId='besu/PegaSys/v21.10.2/linux-x86_64/corretto-java-11', capabilities=[eth/63, eth/64, eth/65, eth/66], port=30303, nodeId=0xb5948a2d3e9d486c4d75bf32713221c2bd6cf86463302339299bd227dc2e276cd5a1c7ca4f43a0e9122fe9af884efed563bd2a1fd28661f3b5f5ad7bf1de5949} - 0 peers left\r\n```\r\n\r\nThe 0x10 and 0x04 are the bulk of it, with some 0x05, which I am assuming are benign:\r\n\r\n```\r\nDisconnect - Outbound - 0x05 ALREADY_CONNECTED - PeerInfo{version=5, clientId='besu/v21.1.4/linux-x86_64/openjdk-java-11', capabilities=[eth/62, eth/63, eth/64, eth/65, IBF/1], port=30303, nodeId=0x1621b0cc3cbe3842cd01bb8395a4b66b2e4c7a601a5f8424a8f7a8198369e53bce14fd6667a1a81de5006464475023e0c5051d4dee3fc4a8ac880a545de127d1} - 7 peers left\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014729674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014966497",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1014966497",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1014966497,
    "node_id": "IC_kwDODE2jmc48fyjh",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T00:11:47Z",
    "updated_at": "2022-01-18T00:11:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems to be showing besu disconnecting with \"too many peers\" reason even when that leaves it with 0 peers\r\n`Disconnect - Inbound - 0x04 TOO_MANY_PEERS - PeerInfo{version=5, clientId='besu/PegaSys/v21.10.2/linux-x86_64/corretto-java-11', capabilities=[eth/63, eth/64, eth/65, eth/66], port=30303, nodeId=0xb5948a2d3e9d486c4d75bf32713221c2bd6cf86463302339299bd227dc2e276cd5a1c7ca4f43a0e9122fe9af884efed563bd2a1fd28661f3b5f5ad7bf1de5949} - 0 peers left`",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1014966497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015083397",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015083397",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015083397,
    "node_id": "IC_kwDODE2jmc48gPGF",
    "user": {
      "login": "frankisawesome",
      "id": 39414003,
      "node_id": "MDQ6VXNlcjM5NDE0MDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39414003?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/frankisawesome",
      "html_url": "https://github.com/frankisawesome",
      "followers_url": "https://api.github.com/users/frankisawesome/followers",
      "following_url": "https://api.github.com/users/frankisawesome/following{/other_user}",
      "gists_url": "https://api.github.com/users/frankisawesome/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/frankisawesome/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/frankisawesome/subscriptions",
      "organizations_url": "https://api.github.com/users/frankisawesome/orgs",
      "repos_url": "https://api.github.com/users/frankisawesome/repos",
      "events_url": "https://api.github.com/users/frankisawesome/events{/privacy}",
      "received_events_url": "https://api.github.com/users/frankisawesome/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T05:27:47Z",
    "updated_at": "2022-01-18T05:27:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "What's the best approach to replicate this @yorickdowne ? I'm thinking if you can isolate some of the peers that you think should be connecting but are throwing errors, we can use the node addresses as static nodes and see if we can replicate the errors that way?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015083397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015416698",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015416698",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015416698,
    "node_id": "IC_kwDODE2jmc48hgd6",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T13:33:18Z",
    "updated_at": "2022-01-18T13:33:18Z",
    "author_association": "NONE",
    "body": "> What's the best approach to replicate this @yorickdowne ? I'm thinking if you can isolate some of the peers that you think should be connecting but are throwing errors, we can use the node addresses as static nodes and see if we can replicate the errors that way?\r\n\r\nThat's an interesting idea. I'd need some help from you guys to understand which of these disconnects are spurious. Is \"too many peers\" on the Besu side or remote side? If Besu, then that's something to look at.\r\n\r\nHow about subprotocol triggered? What is that, why does it connect to a peer then disconnect? Geth 1.10.14 seems a perfectly suitable peer to me - if you say to me that one should work, I can grep for it and we can make a short-list of a few of those.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015416698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015554846",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015554846",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015554846,
    "node_id": "IC_kwDODE2jmc48iCMe",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T15:59:07Z",
    "updated_at": "2022-01-18T15:59:07Z",
    "author_association": "NONE",
    "body": "After trying a fresh sync, back to the same spot: `execution_1  | 2022-01-18 16:55:29.105+01:00 | nioEventLoopGroup-3-9 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 4`\r\n\r\nHere's two peers with that too many peers message\r\n```\r\nexecution_1  | 2022-01-18 16:57:02.217+01:00 | nioEventLoopGroup-3-7 | DEBUG | DeFramer | Peer enode://6b83a6d38da08610afaa55f04d51cf6cf6aed58b07cb69c4fd0f0ef05deab2ae7ff9fce64af6d61d1b78b0f9f0bee192c0f24e15f084e92f3386fb61bf226a44@13.212.206.198:30303 disconnected before sending HELLO.  Reason: 0x04 TOO_MANY_PEERS\r\nexecution_1  | 2022-01-18 16:57:02.217+01:00 | nioEventLoopGroup-3-7 | DEBUG | RlpxAgent | Failed to connect to peer 0x6b83a6d38da08610afaa55f04d51cf6cf6aed58b07cb69c4fd0f0ef05deab2ae7ff9fce64af6d61d1b78b0f9f0bee192c0f24e15f084e92f3386fb61bf226a44: org.hyperledger.besu.ethereum.p2p.network.exceptions.PeerDisconnectedException: Peer disconnected for reason: 0x04 TOO_MANY_PEERS\r\nexecution_1  | 2022-01-18 16:57:02.652+01:00 | nioEventLoopGroup-3-2 | DEBUG | HandshakeHandlerOutbound | Wrote initial crypto handshake message to /159.138.233.243:30303.\r\nexecution_1  | 2022-01-18 16:57:02.880+01:00 | nioEventLoopGroup-3-2 | DEBUG | DeFramer | Peer enode://9cb643adadd5b46efce8562224515bee14c79b481f1df74412f7259c94e159671c645a4535601ad10f8d664de750da07e7e2c9cb2421e434d03a33cf2693b757@159.138.233.243:30303 disconnected before sending HELLO.  Reason: 0x04 TOO_MANY_PEERS\r\nexecution_1  | 2022-01-18 16:57:02.880+01:00 | nioEventLoopGroup-3-2 | DEBUG | RlpxAgent | Failed to connect to peer 0x9cb643adadd5b46efce8562224515bee14c79b481f1df74412f7259c94e159671c645a4535601ad10f8d664de750da07e7e2c9cb2421e434d03a33cf2693b757: org.hyperledger.besu.ethereum.p2p.network.exceptions.PeerDisconnectedException: Peer disconnected for reason: 0x04 TOO_MANY_PEERS\r\n```\r\n\r\nReproduction could be as simple as cloning an eth-docker with `COMPOSE_FILE=besu.yml:ec-shared.yml` in `.env`, then `./ethd up` and let it sync Goerli and observe. Log level can be set in `.env` as well.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015554846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015565250",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015565250",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015565250,
    "node_id": "IC_kwDODE2jmc48iEvC",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T16:09:56Z",
    "updated_at": "2022-01-18T18:56:40Z",
    "author_association": "NONE",
    "body": "Here's a couple subprotocol triggered that seem perfectly suitable for Goerli:\r\n```\r\nexecution_1  | 2022-01-18 17:25:24.703+01:00 | nioEventLoopGroup-3-4 | DEBUG | EthProtocolManager | Disconnect - Outbound - 0x10 SUBPROTOCOL_TRIGGERED - PeerInfo{version=5, clientId='erigon/v2021.11.4-beta-ec4eb263/linux-amd64/go1.17.3', capabilities=[eth/66], port=0, nodeId=0xc1eb17dbf56c9ae2f67bea1d8f0ab6e9f064b7a94c748d68a307526060c83712dbd47f400a74d56c58cbc1e8f7dc8e0c5fd9794adccd75293fe776e1ae4f8fb3} - 9 peers left\r\nexecution_1  | 2022-01-18 17:25:21.085+01:00 | nioEventLoopGroup-3-6 | DEBUG | EthProtocolManager | Disconnect - Inbound - 0x10 SUBPROTOCOL_TRIGGERED - PeerInfo{version=5, clientId='Geth/v1.10.15-stable-8be800ff/linux-amd64/go1.17.5', capabilities=[eth/66, snap/1], port=0, nodeId=0x0f89c6468e669ccdd1766dd8a95ad2d812b1b0d13c1f4c209139148a972412db78d942bdc29fa2f75139d8555454cb8abc73fcb2994ecf3fd046646be3df67de} - 10 peers left\r\nexecution_1  | 2022-01-18 17:27:45.478+01:00 | nioEventLoopGroup-3-3 | DEBUG | EthProtocolManager | Disconnect - Outbound - 0x10 SUBPROTOCOL_TRIGGERED - PeerInfo{version=5, clientId='Nethermind/v1.12.4-0-1c8b669ae-20220117/X64-Linux/6.0.1', capabilities=[eth/62, eth/63, eth/64, eth/65, eth/66], port=30303, nodeId=0x9125584010e3eac04eaa35771e0ed1381876881771885cb81747c2648da323b3fdc9c7cd6952d330f1b8619c7e410f36cdabd2af5360d3e5ec6c59dc8665966a} - 10 peers left\r\n```\r\n\r\nThese aren't hard to find - basically just run on Goerli and grep for SUBPROTOCOL, then look for reasonably recent clients to rule out ones that are genuinely pre-London.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015565250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015588340",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015588340",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015588340,
    "node_id": "IC_kwDODE2jmc48iKX0",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T16:34:04Z",
    "updated_at": "2022-01-18T16:36:25Z",
    "author_association": "NONE",
    "body": "Peering seems somewhat independent of maxpeers. Tried it with default 25 and then with a bumped 100. Even with maxpeers 100 I see 1-7 peers while catching up with chain, and a steady flow of 0x04 TOO_MANY_PEERS.\r\n\r\nIt's possible this is related to 0x10. If, for example, there's a steady queue of peers, but very few to none of them result in connections because of some mismatched logic about subprotocol, that could trigger TOO_MANY_PEERS on additional ones, while still not actually ever getting to a good number of peers.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015588340/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015885776",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015885776",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015885776,
    "node_id": "IC_kwDODE2jmc48jS_Q",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T22:19:34Z",
    "updated_at": "2022-01-18T22:19:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "`0x04 TOO_MANY_PEERS` is being sent to Besu by the remote node.  Basically all the other nodes on Görli are already at their max peers and have formed a pretty stable network so it's hard for new clients to actually find peers.  Ensuring ports are open may help but my experience is that Görli can be quite difficult to find peers in general.\r\n\r\nI'm not sure what's causing the `SUBPROTOCOL_TRIGGERED` messages though.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015885776/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015899447",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015899447",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015899447,
    "node_id": "IC_kwDODE2jmc48jWU3",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T22:42:16Z",
    "updated_at": "2022-01-18T22:42:16Z",
    "author_association": "NONE",
    "body": "Thanks for chiming in. So 0x04 is expected, but that Besu can't keep peers at all after initial sync, that's not expected. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015899447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015901938",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1015901938",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1015901938,
    "node_id": "IC_kwDODE2jmc48jW7y",
    "user": {
      "login": "ajsutton",
      "id": 72675,
      "node_id": "MDQ6VXNlcjcyNjc1",
      "avatar_url": "https://avatars.githubusercontent.com/u/72675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajsutton",
      "html_url": "https://github.com/ajsutton",
      "followers_url": "https://api.github.com/users/ajsutton/followers",
      "following_url": "https://api.github.com/users/ajsutton/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajsutton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajsutton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajsutton/subscriptions",
      "organizations_url": "https://api.github.com/users/ajsutton/orgs",
      "repos_url": "https://api.github.com/users/ajsutton/repos",
      "events_url": "https://api.github.com/users/ajsutton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajsutton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-18T22:46:33Z",
    "updated_at": "2022-01-18T22:46:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, I would expect that once you can connect to a useful peer you should be able to hold onto them. You may find some peers connect and fairly quickly disconnect - that tends to happen if they're actually on a different chain or for some other reason are found to not be useful.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1015901938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016058666",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1016058666",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1016058666,
    "node_id": "IC_kwDODE2jmc48j9Mq",
    "user": {
      "login": "macfarla",
      "id": 2627919,
      "node_id": "MDQ6VXNlcjI2Mjc5MTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2627919?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/macfarla",
      "html_url": "https://github.com/macfarla",
      "followers_url": "https://api.github.com/users/macfarla/followers",
      "following_url": "https://api.github.com/users/macfarla/following{/other_user}",
      "gists_url": "https://api.github.com/users/macfarla/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/macfarla/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/macfarla/subscriptions",
      "organizations_url": "https://api.github.com/users/macfarla/orgs",
      "repos_url": "https://api.github.com/users/macfarla/repos",
      "events_url": "https://api.github.com/users/macfarla/events{/privacy}",
      "received_events_url": "https://api.github.com/users/macfarla/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-19T04:02:17Z",
    "updated_at": "2022-01-19T04:02:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Re the `SUBPROCOL_TRIGGERED` disconnect - looking at the code there's a few different reasons. If you enable DEBUG logging you should see the actual reason in the logs. eg `matching network id ({}), but non-matching genesis hash`\r\n\r\nhttps://github.com/hyperledger/besu/blob/97bad4a7b76e1728ad6b392763ebc419d953d2f8/ethereum/eth/src/main/java/org/hyperledger/besu/ethereum/eth/manager/EthProtocolManager.java#L350",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016058666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016439738",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1016439738",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1016439738,
    "node_id": "IC_kwDODE2jmc48laO6",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-19T12:56:18Z",
    "updated_at": "2022-01-19T12:56:18Z",
    "author_association": "NONE",
    "body": "Right, I see a bunch of \"mismatched network ID\", which is legitimate. Stepping back, the issue is that Besu has 0 peers on Goerli after sync, and this is, as far as I can tell, not just a \"well it's Goerli\" problem: Geth on the same machine has peers.\r\n\r\nGoing through all 0x10 manually is extremely tedious. Let me see whether I can whip up something that counts disconnect reasons.",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016439738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016989395",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1016989395",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1016989395,
    "node_id": "IC_kwDODE2jmc48ngbT",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T00:16:52Z",
    "updated_at": "2022-01-20T00:16:52Z",
    "author_association": "NONE",
    "body": "Okay, I can go through the logs and get all peers where I see a 0x10 disconnect, but no `has mismatched` or `has matching` line, so ones where there's not much information as to why 0x10. Which might mean in that case, the reason code was received from the other end?\r\n\r\nNot sure where to go from here.\r\n\r\nThis issue of not having Goerli peers after initial sync completes is quite reproduceable here. Have you been able to reproduce it?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1016989395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017273901",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1017273901",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1017273901,
    "node_id": "IC_kwDODE2jmc48ol4t",
    "user": {
      "login": "matkt",
      "id": 26581503,
      "node_id": "MDQ6VXNlcjI2NTgxNTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/26581503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matkt",
      "html_url": "https://github.com/matkt",
      "followers_url": "https://api.github.com/users/matkt/followers",
      "following_url": "https://api.github.com/users/matkt/following{/other_user}",
      "gists_url": "https://api.github.com/users/matkt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matkt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matkt/subscriptions",
      "organizations_url": "https://api.github.com/users/matkt/orgs",
      "repos_url": "https://api.github.com/users/matkt/repos",
      "events_url": "https://api.github.com/users/matkt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matkt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T09:24:39Z",
    "updated_at": "2022-01-20T09:24:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "just to find out. Do you have logs on startup (dns error) that are displayed in the console ?",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017273901/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017719114",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1017719114",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1017719114,
    "node_id": "IC_kwDODE2jmc48qSlK",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T17:01:50Z",
    "updated_at": "2022-01-20T17:13:08Z",
    "author_association": "NONE",
    "body": "This is an example of a peer with 0x10 triggered but no indication as to why, which suggests it may have come from the remote end. Any way to dig further?\r\n\r\n```\r\nexecution_1  | 2022-01-20 17:39:12.093+01:00 | nioEventLoopGroup-3-10 | DEBUG | RlpxAgent | Outbound connection established to peer: 0x6aea9a11e3da24058605f4edeb581dab349f553d651854faecd20d1d9e41b5660737c9bd9c19b421c7ada9db34565ee7f48c3f7fcdb30be16ba41c40bec3b4d3\r\nexecution_1  | 2022-01-20 17:39:12.094+01:00 | nioEventLoopGroup-3-10 | DEBUG | EthProtocolManager | Sending status message to Peer 0x6aea9a11e3da240586....\r\nexecution_1  | 2022-01-20 17:39:12.515+01:00 | nioEventLoopGroup-3-10 | DEBUG | EthProtocolManager | Disconnect - Inbound - 0x10 SUBPROTOCOL_TRIGGERED - PeerInfo{version=5, clientId='Geth/v1.6.0-EthoProtocol--NewHorizon-2728a9b7-20211212/linux-amd64/go1.16.11', capabilities=[eth/65, eth/66, snap/1], port=0, nodeId=0x6aea9a11e3da24058605f4edeb581dab349f553d651854faecd20d1d9e41b5660737c9bd9c19b421c7ada9db34565ee7f48c3f7fcdb30be16ba41c40bec3b4d3} - 3 peers left\r\n```\r\n\r\n@matkt , restarted Besu to check. Grepping for DNS, case-insensitive:\r\n```\r\nexecution_1  | 2022-01-20 17:55:51.384+01:00 | main | DEBUG | DefaultDnsServerAddressStreamProvider | Default DNS servers: [/127.0.0.11:53] (sun.net.dns.ResolverConfiguration)\r\nexecution_1  | 2022-01-20 17:59:18.210+01:00 | main | INFO  | DefaultP2PNetwork | Starting DNS discovery with URL enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net\r\nexecution_1  | 2022-01-20 17:59:18.999+01:00 | Timer-0 | DEBUG | NioClient | Starting dnsjava NIO selector thread\r\nexecution_1  | 2022-01-20 17:59:19.990+01:00 | Timer-0 | DEBUG | DNSResolver | No TXT record for SLWUZVAPYAXRAKF4XLAW5Z.all.goerli.ethdisco.net\r\nexecution_1  | 2022-01-20 17:59:20.888+01:00 | Timer-0 | DEBUG | DNSResolver | No TXT record for YDPEDSKLHD6GXTSNBDCSOW.all.goerli.ethdisco.net\r\nexecution_1  | 2022-01-20 17:59:21.310+01:00 | Timer-0 | DEBUG | DNSResolver | No TXT record for NQZFU4T7LLLLSNDATAXLBN.all.goerli.ethdisco.net\r\n.... A few more like that\r\nexecution_1  | 2022-01-20 18:00:18.814+01:00 | Timer-0 | DEBUG | DNSResolver | ENR tree root seq enrtree-root:v1 e=DVMXKO4F3H6GHW2TX6YCKNSZJ4 l=FDXN3SN67NA5DKA4J2GOK7BVQI seq=2860 sig=asB1DIVPm1o_l2q04GrIsETEkvs9WblXlWC_lhCX1BtbAcqE4EofEjZxCwyuJd9nbtgvmicYcM2otedoi-M0bAE=.seq is not higher than 2860, aborting\r\n... That repeats verbatim\r\n```\r\n\r\nWill attach startup log, going as far as the first few peer negotiations\r\n[startuplog.txt](https://github.com/hyperledger/besu/files/7907131/startuplog.txt)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017719114/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017724836",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1017724836",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1017724836,
    "node_id": "IC_kwDODE2jmc48qT-k",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T17:07:26Z",
    "updated_at": "2022-01-20T17:58:24Z",
    "author_association": "NONE",
    "body": "High-level, the pattern is:\r\n\r\n- Besu finds peers on startup and starts sync\r\n- Besu cannot keep peers, before sync completes\r\n- Besu falls behind because of this\r\n- Rinse/Repeat on restart of Besu\r\n\r\nWill retry with ` --fast-sync-min-peers=1`. Update: Setting min-peers to 1 did not improve the issue.\r\n\r\n```\r\nexecution_1  | 2022-01-20 18:14:51.382+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5309982 to 5310181, Peers: 1\r\nexecution_1  | 2022-01-20 18:14:52.397+01:00 | EthScheduler-Services-7 (requestCompleteTask) | INFO  | CompleteTaskStep | Downloaded 1300000 world state nodes. At least 3874984 nodes remaining.\r\nexecution_1  | 2022-01-20 18:14:53.291+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5310182 to 5310381, Peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.287+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:00.361+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:00.365+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:00.369+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:00.406+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.468+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.476+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.478+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.478+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.478+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.479+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:00.488+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:01.163+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 2\r\nexecution_1  | 2022-01-20 18:15:01.480+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5310382 to 5310581, Peers: 0\r\nexecution_1  | 2022-01-20 18:15:01.481+01:00 | EthScheduler-Services-12 (downloadReceipts) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:01.482+01:00 | EthScheduler-Services-11 (downloadBodies) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:01.496+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:03.304+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5310582 to 5310781, Peers: 0\r\nexecution_1  | 2022-01-20 18:15:04.374+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5310782 to 5310981, Peers: 1\r\nexecution_1  | 2022-01-20 18:15:05.376+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.378+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.380+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.382+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5310982 to 5311181, Peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.459+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.468+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.477+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.478+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.480+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.484+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.485+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.488+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:05.491+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:06.165+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:06.565+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:06.566+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:06.567+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:07.267+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5311182 to 5311381, Peers: 0\r\nexecution_1  | 2022-01-20 18:15:11.258+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.258+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.258+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.259+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.281+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:11.285+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.285+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.286+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.288+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.291+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.292+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.294+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.295+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.566+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.571+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.572+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:11.888+01:00 | EthScheduler-Services-13 (importBlock) | INFO  | FastImportBlocksStep | Completed importing chain segment 5311382 to 5311581, Peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.258+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.259+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.259+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.259+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.285+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.286+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.286+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.287+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.295+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.296+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.298+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:16.566+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:18.301+01:00 | EthScheduler-Timer-0 | INFO  | FastSyncTargetManager | No sync target, waiting for peers: 1\r\nexecution_1  | 2022-01-20 18:15:21.268+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.268+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.269+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.270+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.287+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.289+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.290+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.300+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.302+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:21.302+01:00 | EthScheduler-Services-4 (batchDownloadData) | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:23.302+01:00 | EthScheduler-Timer-0 | INFO  | FastSyncTargetManager | No sync target, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:26.269+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\nexecution_1  | 2022-01-20 18:15:26.271+01:00 | EthScheduler-Timer-0 | INFO  | AbstractRetryingPeerTask | No peers available, waiting for peers: 0\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017724836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017825090",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1017825090",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1017825090,
    "node_id": "IC_kwDODE2jmc48qsdC",
    "user": {
      "login": "garyschulte",
      "id": 1238512,
      "node_id": "MDQ6VXNlcjEyMzg1MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1238512?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyschulte",
      "html_url": "https://github.com/garyschulte",
      "followers_url": "https://api.github.com/users/garyschulte/followers",
      "following_url": "https://api.github.com/users/garyschulte/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyschulte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyschulte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyschulte/subscriptions",
      "organizations_url": "https://api.github.com/users/garyschulte/orgs",
      "repos_url": "https://api.github.com/users/garyschulte/repos",
      "events_url": "https://api.github.com/users/garyschulte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyschulte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T19:01:35Z",
    "updated_at": "2022-01-20T19:02:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "To echo @matkt - are you seeing any DNS errors on startup?  \r\n\r\nOne of the avenues Besu uses to find peers is to recursively query the dns TXT record for the network you are attempting to join, e.g. for goerli enrtree://...@all.goerli.ethdisco.net.  For details see: \r\nhttps://eips.ethereum.org/EIPS/eip-1459\r\nhttps://github.com/ethereum/discv4-dns-lists\r\n\r\nWithout this, besu has to rely on discv4 discovery to sift through every p2p node in the DHT, and connect to each to find goerli nodes amongst them.  That can be a very slow and unreliable process when you are not on mainnet (most nodes are ethereum mainnet).\r\n\r\nThe first place I would look when diagnosing peering issues would be with DNS.  Figure out what your upstream dns server is and make sure it support TCP based dns lookups, and is not rate-limiting your lookups.  ",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017825090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017906291",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1017906291",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1017906291,
    "node_id": "IC_kwDODE2jmc48rARz",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-20T20:35:40Z",
    "updated_at": "2022-01-20T20:38:30Z",
    "author_association": "NONE",
    "body": "Interesting, thank you. I'll move this test to a few different hosts and will report. Thanks for your patience while that is done.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1017906291/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1018483013",
    "html_url": "https://github.com/hyperledger/besu/issues/3290#issuecomment-1018483013",
    "issue_url": "https://api.github.com/repos/hyperledger/besu/issues/3290",
    "id": 1018483013,
    "node_id": "IC_kwDODE2jmc48tNFF",
    "user": {
      "login": "yorickdowne",
      "id": 71337066,
      "node_id": "MDQ6VXNlcjcxMzM3MDY2",
      "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yorickdowne",
      "html_url": "https://github.com/yorickdowne",
      "followers_url": "https://api.github.com/users/yorickdowne/followers",
      "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
      "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
      "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
      "repos_url": "https://api.github.com/users/yorickdowne/repos",
      "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-21T12:59:01Z",
    "updated_at": "2022-01-21T12:59:01Z",
    "author_association": "NONE",
    "body": "Closing this issue. I tried it on a host with the exact same DNS but more CPU, and it could get and hold peers just fine. I'll chalk this up to \"Besu needs more compute than Geth, and if you starve it, nothing good happens\".\r\n\r\nThank you for working through it with me. If nothing else, this boosted my confidence in Besu. Now to track down the sync snafu on main ...",
    "reactions": {
      "url": "https://api.github.com/repos/hyperledger/besu/issues/comments/1018483013/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

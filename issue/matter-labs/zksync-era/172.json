{
  "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/172",
  "repository_url": "https://api.github.com/repos/matter-labs/zksync-era",
  "labels_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/172/labels{/name}",
  "comments_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/172/comments",
  "events_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/172/events",
  "html_url": "https://github.com/matter-labs/zksync-era/issues/172",
  "id": 1931729209,
  "node_id": "I_kwDOI-FneM5zI9k5",
  "number": 172,
  "title": "Failed to load proof: KeyNotFound",
  "user": {
    "login": "cppfuns",
    "id": 7980920,
    "node_id": "MDQ6VXNlcjc5ODA5MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7980920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cppfuns",
    "html_url": "https://github.com/cppfuns",
    "followers_url": "https://api.github.com/users/cppfuns/followers",
    "following_url": "https://api.github.com/users/cppfuns/following{/other_user}",
    "gists_url": "https://api.github.com/users/cppfuns/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cppfuns/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cppfuns/subscriptions",
    "organizations_url": "https://api.github.com/users/cppfuns/orgs",
    "repos_url": "https://api.github.com/users/cppfuns/repos",
    "events_url": "https://api.github.com/users/cppfuns/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cppfuns/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5157016638,
      "node_id": "LA_kwDOI-FneM8AAAABM2HUPg",
      "url": "https://api.github.com/repos/matter-labs/zksync-era/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-10-08T09:30:24Z",
  "updated_at": "2023-10-08T09:35:48Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I get an error when launching the following command\r\n\r\n`zk server --components=api,eth,tree,state_keeper,housekeeper,proof_data_handler`\r\n\r\nIs my configuration incorrect?\r\n```\r\nETH_SENDER_SENDER_PROOF_LOADING_MODE=FriProofFromGcs\r\nETH_SENDER_SENDER_PROOF_SENDING_MODE=OnlyRealProofs\r\nOBJECT_STORE_FILE_BACKED_BASE_PATH=server/artifacts\r\nPROVER_OBJECT_STORE_FILE_BACKED_BASE_PATH=prover/artifacts\r\nFRI_PROVER_SETUP_DATA_PATH=above-generated/gpu-setup-data\r\n\r\nOBJECT_STORE_BUCKET_BASE_URL=base_url\r\nOBJECT_STORE_MODE=FileBacked\r\nOBJECT_STORE_FILE_BACKED_BASE_PATH=server/artifacts\r\nOBJECT_STORE_GCS_CREDENTIAL_FILE_PATH=gcs_credentials.json\r\nOBJECT_STORE_MAX_RETRIES=5\r\nPUBLIC_OBJECT_STORE_BUCKET_BASE_URL=public_base_url\r\nPUBLIC_OBJECT_STORE_MODE=FileBacked\r\nPUBLIC_OBJECT_STORE_FILE_BACKED_BASE_PATH=artifacts\r\nPUBLIC_OBJECT_STORE_GCS_CREDENTIAL_FILE_PATH=gcs_credentials.json\r\nPUBLIC_OBJECT_STORE_MAX_RETRIES=5\r\nPROVER_OBJECT_STORE_BUCKET_BASE_URL=prover_base_url\r\nPROVER_OBJECT_STORE_MODE=FileBacked\r\nPROVER_OBJECT_STORE_FILE_BACKED_BASE_PATH=prover/artifacts\r\nPROVER_OBJECT_STORE_GCS_CREDENTIAL_FILE_PATH=gcs_credentials.json\r\n```\r\nI refer to this document https://github.com/matter-labs/zksync-era/blob/main/prover/prover_fri/README.md\r\n```\r\n2023-10-08T08:44:23.427914Z  INFO zksync_server: Running 33 core task handlers\r\n2023-10-08T08:44:23.427940Z DEBUG zksync_core::api_server::healthcheck: Starting healthcheck server with checks {\"http_api\", \"connection_pool\", \"prometheus_exporter\", \"tree\", \"ws_api\"} on 0.0.0.0:3071\r\n2023-10-08T08:44:23.428924Z DEBUG zksync_core::metadata_calculator::metrics: Metadata calculator stage `save_postgres` completed in 7.176295ms\r\n2023-10-08T08:44:23.428940Z  INFO zksync_core::metadata_calculator::updater: Updated metadata for L1 batch #1 in Postgres\r\n2023-10-08T08:44:23.428983Z  INFO zksync_merkle_tree::domain: Flushing L1 batches #[1] to RocksDB\r\n2023-10-08T08:44:23.429278Z DEBUG zksync_core::metadata_calculator::metrics: Metadata calculator stage `save_rocksdb` completed in 283.288Âµs\r\n2023-10-08T08:44:23.429310Z  INFO zksync_core::metadata_calculator::metrics: L1 batches #1..=1 processed in tree\r\n2023-10-08T08:44:23.429334Z DEBUG zksync_health_check: changed health from Health { status: Ready, details: Some(Object {\"mode\": String(\"full\"), \"next_l1_batch_to_seal\": Number(1)}) } to Health { status: Ready, details: Some(Object {\"mode\": String(\"full\"), \"next_l1_batch_to_seal\": Number(2)}) }\r\n2023-10-08T08:44:23.501969Z  INFO zksync_core::state_keeper::io::mempool: Got previous L1 batch hash: 47285510d7a3cf037e0f2d855a089a06006071099590c1375346e966aa974adc for L1 batch #2\r\n2023-10-08T08:44:23.502611Z  INFO zksync_core::state_keeper::io::mempool: Current timestamp 2023-10-08 08:44:23 UTC for miniblock #3 is equal to previous miniblock timestamp; waiting until timestamp increases\r\nthread 'tokio-runtime-worker' panicked at 'Failed to load proof: KeyNotFound(Os { code: 2, kind: NotFound, message: \"No such file or directory\" })', /mnt/md0/zksync-era/core/lib/prover_utils/src/gcs_proof_fetcher.rs:16:14\r\nstack backtrace:\r\n   0:     0x55881621f2b1 - std::backtrace_rs::backtrace::libunwind::trace::h66dc1c6acf794faa\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x55881621f2b1 - std::backtrace_rs::backtrace::trace_unsynchronized::ha80d20099a67f790\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x55881621f2b1 - std::sys_common::backtrace::_print_fmt::h7b959d43f35f16d4\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x55881621f2b1 - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::hdaa196410d9ee0b9\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x55881624e00f - core::fmt::rt::Argument::fmt::h0ddfbbe8be3f80d0\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/core/src/fmt/rt.rs:138:9\r\n   5:     0x55881624e00f - core::fmt::write::h66b3c629f3d623e4\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/core/src/fmt/mod.rs:1094:21\r\n   6:     0x55881621b077 - std::io::Write::write_fmt::hb6d80fba4115e0c2\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/io/mod.rs:1714:15\r\n   7:     0x55881621f0c5 - std::sys_common::backtrace::_print::h1a49cfb0cf3cce17\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/sys_common/backtrace.rs:47:5\r\n   8:     0x55881621f0c5 - std::sys_common::backtrace::print::hca95c2d0055e42a2\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/sys_common/backtrace.rs:34:9\r\n   9:     0x558816220a23 - std::panicking::default_hook::{{closure}}::hc03c01c56bca600c\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/panicking.rs:269:22\r\n  10:     0x5588162207b4 - std::panicking::default_hook::hb2cb5315b6634f1c\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/panicking.rs:288:9\r\n  11:     0x558816220fa9 - std::panicking::rust_panic_with_hook::h75cd912a39a34e8a\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/panicking.rs:705:13\r\n  12:     0x558816220ea7 - std::panicking::begin_panic_handler::{{closure}}::h1498b46f7849e167\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/panicking.rs:597:13\r\n  13:     0x55881621f716 - std::sys_common::backtrace::__rust_end_short_backtrace::hd36a39b27b98086b\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/sys_common/backtrace.rs:151:18\r\n  14:     0x558816220bf2 - rust_begin_unwind\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/panicking.rs:593:5\r\n  15:     0x558813e557c3 - core::panicking::panic_fmt::h98ef273141454c23\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/core/src/panicking.rs:67:14\r\n  16:     0x558813e55c63 - core::result::unwrap_failed::h26e7d1a596cddd61\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/core/src/result.rs:1651:5\r\n  17:     0x558813ed1535 - zksync_core::eth_sender::aggregator::Aggregator::load_real_proof_operation::{{closure}}::hdea8fa96b94c06e3\r\n  18:     0x558813ec6942 - zksync_core::eth_sender::aggregator::Aggregator::get_proof_operation::{{closure}}::he9902845b57ee1bb\r\n  19:     0x558813ee4dfb - zksync_core::eth_sender::eth_tx_aggregator::EthTxAggregator::loop_iteration::{{closure}}::{{closure}}::h430c10a153e94c33\r\n  20:     0x558813f6bf80 - <tracing::instrument::Instrumented<T> as core::future::future::Future>::poll::hef6f0900d094b2e6\r\n  21:     0x558814363e38 - zksync_core::eth_sender::eth_tx_aggregator::EthTxAggregator::run::{{closure}}::hf3ce6994bf2fab99\r\n  22:     0x5588143e14b1 - tokio::loom::std::unsafe_cell::UnsafeCell<T>::with_mut::hdab3c5b4328a828b\r\n  23:     0x558814491a42 - tokio::runtime::task::core::Core<T,S>::poll::h33ec31f5f5579073\r\n  24:     0x55881458673b - tokio::runtime::task::harness::Harness<T,S>::poll::h60d4501314fce3a5\r\n  25:     0x558816063dff - tokio::runtime::scheduler::multi_thread::worker::Context::run_task::he7802d05bad18b50\r\n  26:     0x558816063215 - tokio::runtime::scheduler::multi_thread::worker::Context::run::h0e2b23a549003944\r\n  27:     0x55881606d06d - tokio::macros::scoped_tls::ScopedKey<T>::set::hc17d40d8e4651d69\r\n  28:     0x55881606304b - tokio::runtime::scheduler::multi_thread::worker::run::h20b476a42e3d4a8b\r\n  29:     0x558816065c2b - tokio::loom::std::unsafe_cell::UnsafeCell<T>::with_mut::hcf45e6262ee82264\r\n  30:     0x558816086d19 - tokio::runtime::task::core::Core<T,S>::poll::hae86cc32bae477b4\r\n  31:     0x55881605a52f - tokio::runtime::task::harness::Harness<T,S>::poll::hb10d21d3b2f4458c\r\n  32:     0x5588160697e9 - tokio::runtime::blocking::pool::Inner::run::hcb99cd3d497dfaae\r\n  33:     0x55881605bf06 - std::sys_common::backtrace::__rust_begin_short_backtrace::h06f19780f565e72d\r\n  34:     0x55881606baf9 - core::ops::function::FnOnce::call_once{{vtable.shim}}::h1f8fbaf8818a469d\r\n  35:     0x558816223e25 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hde6e666388faa495\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/alloc/src/boxed.rs:1993:9\r\n  36:     0x558816223e25 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::h9b6389e489a4842f\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/alloc/src/boxed.rs:1993:9\r\n  37:     0x558816223e25 - std::sys::unix::thread::Thread::new::thread_start::hcab660740b858b1f\r\n                               at /rustc/d5c2e9c342b358556da91d61ed4133f6f50fc0c3/library/std/src/sys/unix/thread.rs:108:17\r\n  38:     0x7f79eb41e609 - start_thread\r\n  39:     0x7f79eb1ee133 - clone\r\n  40:                0x0 - <unknown>\r\n2023-10-08T08:44:23.551697Z  INFO zksync_utils::wait_for_tasks: One of the tokio actors unexpectedly finished with error: Failed to load proof: KeyNotFound(Os { code: 2, kind: NotFound, message: \"No such file or directory\" })\r\n2023-10-08T08:44:23.551754Z  INFO vise_exporter: Stop signal received, Prometheus metrics exporter is shutting down\r\n2023-10-08T08:44:23.551769Z  INFO zksync_core::proof_data_handler: Stop signal received, proof data handler server is shutting down\r\n2023-10-08T08:44:23.551775Z  INFO zksync_storage::db: Waiting for all the RocksDB instances to be dropped, 1 remaining\r\n2023-10-08T08:44:23.551768Z  INFO zksync_core::metadata_calculator::updater: Stop signal received, metadata_calculator is shutting down\r\n2023-10-08T08:44:23.551811Z  INFO vise_exporter: Prometheus metrics exporter server shut down\r\n2023-10-08T08:44:23.551813Z  INFO zksync_core::proof_data_handler: Proof data handler server shut down\r\n2023-10-08T08:44:23.551789Z  INFO zksync_core::api_server::web3: Stop signal received, HTTP JSON-RPC server is shutting down\r\n2023-10-08T08:44:23.551869Z  INFO zksync_core::api_server::execution_sandbox: VM concurrency limiter closed\r\n2023-10-08T08:44:23.551960Z  INFO zksync_core::api_server::web3: HTTP JSON-RPC server stopped\r\n2023-10-08T08:44:23.551987Z DEBUG zksync_core::api_server::execution_sandbox: Waiting until all VM permits are dropped; currently remaining: 0 / 2048\r\n2023-10-08T08:44:23.552001Z  INFO zksync_core::api_server::web3: VM execution on HTTP JSON-RPC server stopped\r\n2023-10-08T08:44:23.553954Z  INFO zksync_storage::db: All the RocksDB instances are dropped\r\n2023-10-08T08:44:23.555863Z  INFO zksync_core::state_keeper::mempool_actor: Stop signal received, mempool is shutting down\r\n2023-10-08T08:44:23.555095Z  INFO zksync_core::api_server::web3: Stop signal received, WS JSON-RPC server is shutting down\r\n2023-10-08T08:44:23.557759Z  INFO zksync_core::api_server::execution_sandbox: VM concurrency limiter closed\r\n2023-10-08T08:44:23.558678Z DEBUG zksync_core::api_server::web3::state: Stopping latest sealed miniblock updates\r\n2023-10-08T08:44:23.563520Z  INFO zksync_core::api_server::web3: WS JSON-RPC server stopped\r\n2023-10-08T08:44:23.563540Z DEBUG zksync_core::api_server::execution_sandbox: Waiting until all VM permits are dropped; currently remaining: 0 / 2048\r\n2023-10-08T08:44:23.563550Z  INFO zksync_core::api_server::web3: VM execution on WS JSON-RPC server stopped\r\n2023-10-08T08:44:23.585310Z DEBUG zksync_core::api_server::web3::state: Stopping latest sealed miniblock updates\r\n2023-10-08T08:44:23.732235Z  INFO zksync_core::api_server::web3::pubsub_notifier: Stop signal received, pubsub_tx_notifier is shutting down\r\n2023-10-08T08:44:23.733983Z  INFO zksync_core::api_server::web3::pubsub_notifier: Stop signal received, pubsub_block_notifier is shutting down\r\n2023-10-08T08:44:23.737106Z  INFO zksync_core::api_server::web3::pubsub_notifier: Stop signal received, pubsub_logs_notifier is shutting down\r\n2023-10-08T08:44:23.830149Z  INFO zksync_core::eth_watch: Stop signal received, eth_watch is shutting down\r\n2023-10-08T08:44:24.002506Z  INFO zksync_core::state_keeper::io::mempool: (l1_gas_price, fair_l2_gas_price) for L1 batch #2 is (1200800000000, 250000000)\r\n2023-10-08T08:44:24.016444Z DEBUG zksync_state::rocksdb: loading storage for l1 batch number 1\r\n2023-10-08T08:44:24.016531Z DEBUG zksync_state::rocksdb: loading state changes for l1 batch 1\r\n2023-10-08T08:44:24.017672Z DEBUG zksync_state::rocksdb: loading factory deps for l1 batch 1\r\n2023-10-08T08:44:24.019016Z  INFO zksync_state::rocksdb: Secondary storage for L1 batch #1 initialized, size is 37\r\n2023-10-08T08:44:24.019048Z  INFO zksync_core::state_keeper::keeper: Stop signal received, state keeper is shutting down\r\n2023-10-08T08:44:24.019057Z  INFO zksync_core::state_keeper::batch_executor: Starting executing batch #L1BatchNumber(2)\r\n2023-10-08T08:44:24.019564Z  INFO zksync_core::state_keeper::batch_executor: State keeper exited with an unfinished batch\r\n2023-10-08T08:44:24.374057Z  INFO zksync_core::eth_sender::eth_tx_manager: Stop signal received, eth_tx_manager is shutting down\r\n2023-10-08T08:44:28.429358Z  INFO zksync_core::l1_gas_price::gas_adjuster: Stop signal received, gas_adjuster is shutting down\r\n2023-10-08T08:44:28.555865Z  INFO zksync_core::api_server::healthcheck: Stop signal received, healthcheck server is shutting down\r\n2023-10-08T08:44:28.555907Z  INFO zksync_core::api_server::healthcheck: Healthcheck server shut down\r\n2023-10-08T08:44:28.555938Z  INFO zksync_server: Stopped\r\n```\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/172/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/172/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

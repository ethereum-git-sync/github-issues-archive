{
  "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50",
  "repository_url": "https://api.github.com/repos/matter-labs/zksync-era",
  "labels_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50/labels{/name}",
  "comments_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50/comments",
  "events_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50/events",
  "html_url": "https://github.com/matter-labs/zksync-era/issues/50",
  "id": 1766662228,
  "node_id": "I_kwDOI-FneM5pTSBU",
  "number": 50,
  "title": "error in running external node",
  "user": {
    "login": "cliff0412",
    "id": 13556363,
    "node_id": "MDQ6VXNlcjEzNTU2MzYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/13556363?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cliff0412",
    "html_url": "https://github.com/cliff0412",
    "followers_url": "https://api.github.com/users/cliff0412/followers",
    "following_url": "https://api.github.com/users/cliff0412/following{/other_user}",
    "gists_url": "https://api.github.com/users/cliff0412/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cliff0412/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cliff0412/subscriptions",
    "organizations_url": "https://api.github.com/users/cliff0412/orgs",
    "repos_url": "https://api.github.com/users/cliff0412/repos",
    "events_url": "https://api.github.com/users/cliff0412/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cliff0412/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-06-21T04:36:59Z",
  "updated_at": "2023-10-16T14:01:40Z",
  "closed_at": "2023-10-16T14:01:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "i am trying to run a external node. however, it throws error \r\n```\r\nerror: The following required arguments were not provided:\r\n    --database-url <DATABASE_URL>\r\n```\r\n\r\ni have specificlly set the env of DATABASE_URL in my command; but it still throws such error\r\nmy docker command is\r\n```\r\ndocker run matterlabs/external-node-public:v0.0.4 --env-file /root/zksync_nodes/mainnet-config.env --mount type=bind,source=/data/rocksdb/,target=./db/ext-node/ --env DATABASE_URL=postgres://postgres@localhost/zksync_local_ext_node\r\n```",
  "closed_by": {
    "login": "hatemosphere",
    "id": 14997418,
    "node_id": "MDQ6VXNlcjE0OTk3NDE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/14997418?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hatemosphere",
    "html_url": "https://github.com/hatemosphere",
    "followers_url": "https://api.github.com/users/hatemosphere/followers",
    "following_url": "https://api.github.com/users/hatemosphere/following{/other_user}",
    "gists_url": "https://api.github.com/users/hatemosphere/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hatemosphere/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hatemosphere/subscriptions",
    "organizations_url": "https://api.github.com/users/hatemosphere/orgs",
    "repos_url": "https://api.github.com/users/hatemosphere/repos",
    "events_url": "https://api.github.com/users/hatemosphere/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hatemosphere/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 2
  },
  "timeline_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/comments/1635483326",
    "html_url": "https://github.com/matter-labs/zksync-era/issues/50#issuecomment-1635483326",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50",
    "id": 1635483326,
    "node_id": "IC_kwDOI-FneM5he36-",
    "user": {
      "login": "tonynguyen-ccl",
      "id": 115619462,
      "node_id": "U_kgDOBuQ2hg",
      "avatar_url": "https://avatars.githubusercontent.com/u/115619462?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tonynguyen-ccl",
      "html_url": "https://github.com/tonynguyen-ccl",
      "followers_url": "https://api.github.com/users/tonynguyen-ccl/followers",
      "following_url": "https://api.github.com/users/tonynguyen-ccl/following{/other_user}",
      "gists_url": "https://api.github.com/users/tonynguyen-ccl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tonynguyen-ccl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tonynguyen-ccl/subscriptions",
      "organizations_url": "https://api.github.com/users/tonynguyen-ccl/orgs",
      "repos_url": "https://api.github.com/users/tonynguyen-ccl/repos",
      "events_url": "https://api.github.com/users/tonynguyen-ccl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tonynguyen-ccl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T08:17:40Z",
    "updated_at": "2023-07-14T08:17:40Z",
    "author_association": "NONE",
    "body": "You should have all the config flags in front of the image name.\r\n```\r\ndocker run --env-file /root/zksync_nodes/mainnet-config.env --mount type=bind,source=/data/rocksdb/,target=./db/ext-node/ --env DATABASE_URL=postgres://postgres@localhost/zksync_local_ext_node matterlabs/external-node-public:v0.0.4\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/comments/1635483326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/comments/1678576900",
    "html_url": "https://github.com/matter-labs/zksync-era/issues/50#issuecomment-1678576900",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50",
    "id": 1678576900,
    "node_id": "IC_kwDOI-FneM5kDQ0E",
    "user": {
      "login": "qingxueyunfeng",
      "id": 23069178,
      "node_id": "MDQ6VXNlcjIzMDY5MTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/23069178?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qingxueyunfeng",
      "html_url": "https://github.com/qingxueyunfeng",
      "followers_url": "https://api.github.com/users/qingxueyunfeng/followers",
      "following_url": "https://api.github.com/users/qingxueyunfeng/following{/other_user}",
      "gists_url": "https://api.github.com/users/qingxueyunfeng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qingxueyunfeng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qingxueyunfeng/subscriptions",
      "organizations_url": "https://api.github.com/users/qingxueyunfeng/orgs",
      "repos_url": "https://api.github.com/users/qingxueyunfeng/repos",
      "events_url": "https://api.github.com/users/qingxueyunfeng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qingxueyunfeng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-15T08:18:57Z",
    "updated_at": "2023-08-15T08:18:57Z",
    "author_association": "NONE",
    "body": "Crash happens when I start external node. @tonynguyen-ccl Would you please help to check this issue? Thanks.\r\n\r\nthread 'tokio-runtime-worker' panicked at 'Reject requested because of the following error: virtual machine entered unexpected state. Please contact developers and provide transaction details that caused this error. Error description: Assertion error: Tx data offset is incorrect.\r\n Transaction hash is: 0xe9a1a8601bc9199c80c97169fdc9e1fc7c307185a0c9fa2cfab04098a7840645', core/bin/zksync_core/src/sync_layer/external_io.rs:322:9\r\nstack backtrace:\r\n   0:     0x561d4aeac75a - std::backtrace_rs::backtrace::libunwind::trace::h79937bc171ada62c\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:     0x561d4aeac75a - std::backtrace_rs::backtrace::trace_unsynchronized::h2292bca8571cb919\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\r\n   2:     0x561d4aeac75a - std::sys_common::backtrace::_print_fmt::h9c461f248e4ae90d\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/sys_common/backtrace.rs:65:5\r\n   3:     0x561d4aeac75a - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::he9fe6bf1a39182e1\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/sys_common/backtrace.rs:44:22\r\n   4:     0x561d4aed207e - core::fmt::write::h032658c119c720d7\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/core/src/fmt/mod.rs:1208:17\r\n   5:     0x561d4aea6bf5 - std::io::Write::write_fmt::h299fc90dfae41c0d\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/io/mod.rs:1682:15\r\n   6:     0x561d4aeac525 - std::sys_common::backtrace::_print::heb70d25df9937e3f\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/sys_common/backtrace.rs:47:5\r\n   7:     0x561d4aeac525 - std::sys_common::backtrace::print::had745c0a76b8b521\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/sys_common/backtrace.rs:34:9\r\n   8:     0x561d4aeae17f - std::panicking::default_hook::{{closure}}::h1ea782cdfa2fd097\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/panicking.rs:267:22\r\n   9:     0x561d4aeadebb - std::panicking::default_hook::h1cc3af63455a163c\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/panicking.rs:286:9\r\n  10:     0x561d4aeae88c - std::panicking::rust_panic_with_hook::h5cafdc4b3bfd5528\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/panicking.rs:688:13\r\n  11:     0x561d4aeae629 - std::panicking::begin_panic_handler::{{closure}}::hf31c60f40775892c\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/panicking.rs:579:13\r\n  12:     0x561d4aeacc0c - std::sys_common::backtrace::__rust_end_short_backtrace::h28a5c7be595826cd\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/sys_common/backtrace.rs:137:18\r\n  13:     0x561d4aeae332 - rust_begin_unwind\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/panicking.rs:575:5\r\n  14:     0x561d494db1b3 - core::panicking::panic_fmt::h8fa27a0b37dd98b7\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/core/src/panicking.rs:64:14\r\n  15:     0x561d49eb09d7 - <zksync_core::sync_layer::external_io::ExternalIO as zksync_core::state_keeper::io::StateKeeperIO>::reject::{{closure}}::h22bbef9aa3281cc5\r\n  16:     0x561d495530c0 - zksync_core::state_keeper::keeper::ZkSyncStateKeeper::process_l1_batch::{{closure}}::h8d6ff528e0ae9295\r\n  17:     0x561d49556fb7 - zksync_core::state_keeper::keeper::ZkSyncStateKeeper::run_inner::{{closure}}::h2cc521af44106701\r\n  18:     0x561d49555552 - zksync_core::state_keeper::keeper::ZkSyncStateKeeper::run::{{closure}}::hbe6563a42d068a0b\r\n  19:     0x561d49620075 - tokio::loom::std::unsafe_cell::UnsafeCell<T>::with_mut::h7217d411eb6e2c76\r\n  20:     0x561d499b6c3d - tokio::runtime::task::core::Core<T,S>::poll::hd881e093e0ecf594\r\n  21:     0x561d496bf787 - tokio::runtime::task::harness::Harness<T,S>::poll::h5b23b07bcbd12157\r\n  22:     0x561d4ae75ee2 - tokio::runtime::scheduler::multi_thread::worker::Context::run_task::h19b6518ddc92f424\r\n  23:     0x561d4ae75173 - tokio::runtime::scheduler::multi_thread::worker::Context::run::hbb60c4d64f743a3a\r\n  24:     0x561d4ae630b9 - tokio::macros::scoped_tls::ScopedKey<T>::set::h71c47b8b6cd8382d\r\n  25:     0x561d4ae74e79 - tokio::runtime::scheduler::multi_thread::worker::run::h2d4d2c64c49912b7\r\n  26:     0x561d4ae7e238 - tokio::runtime::task::core::Core<T,S>::poll::h4b2be6578950b765\r\n  27:     0x561d4ae56daf - tokio::runtime::task::harness::Harness<T,S>::poll::hde3555b7fd1a7309\r\n  28:     0x561d4ae64a38 - tokio::runtime::blocking::pool::Inner::run::h4c35e4a50b52eba6\r\n  29:     0x561d4ae6517a - std::sys_common::backtrace::__rust_begin_short_backtrace::hc2338904a70d789f\r\n  30:     0x561d4ae7753b - core::ops::function::FnOnce::call_once{{vtable.shim}}::h33cea3111e0469fb\r\n  31:     0x561d4aeb1403 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hb77d8d72ebcf79c4\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/alloc/src/boxed.rs:2000:9\r\n  32:     0x561d4aeb1403 - <alloc::boxed::Box<F,A> as core::ops::function::FnOnce<Args>>::call_once::hc08c3353e1568487\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/alloc/src/boxed.rs:2000:9\r\n  33:     0x561d4aeb1403 - std::sys::unix::thread::Thread::new::thread_start::h7168e596cd5e5ce6\r\n                               at /rustc/d5a82bbd26e1ad8b7401f6a718a9c57c96905483/library/std/src/sys/unix/thread.rs:108:17\r\n  34:     0x7f62c0ffffa3 - start_thread\r\n  35:     0x7f62c0da706f - clone\r\n  36:                0x0 - <unknown>\r\n2023-08-15T08:08:22.982603Z  INFO zksync_core::state_keeper::batch_executor: State keeper exited with an unfinished batch\r\n2023-08-15T08:08:22.982673Z  INFO zksync_utils::wait_for_tasks: One of the tokio actors unexpectedly finished with error: Reject requested because of the following error: virtual machine entered unexpected state. Please contact developers and provide transaction details that caused this error. Error description: Assertion error: Tx data offset is incorrect.\r\n Transaction hash is: 0xe9a1a8601bc9199c80c97169fdc9e1fc7c307185a0c9fa2cfab04098a7840645\r\n2023-08-15T08:08:22.982745Z  INFO zksync_core::metadata_calculator::updater: Stop signal received, metadata_calculator is shutting down",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/comments/1678576900/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/comments/1764550740",
    "html_url": "https://github.com/matter-labs/zksync-era/issues/50#issuecomment-1764550740",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync-era/issues/50",
    "id": 1764550740,
    "node_id": "IC_kwDOI-FneM5pLOhU",
    "user": {
      "login": "hatemosphere",
      "id": 14997418,
      "node_id": "MDQ6VXNlcjE0OTk3NDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/14997418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hatemosphere",
      "html_url": "https://github.com/hatemosphere",
      "followers_url": "https://api.github.com/users/hatemosphere/followers",
      "following_url": "https://api.github.com/users/hatemosphere/following{/other_user}",
      "gists_url": "https://api.github.com/users/hatemosphere/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hatemosphere/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hatemosphere/subscriptions",
      "organizations_url": "https://api.github.com/users/hatemosphere/orgs",
      "repos_url": "https://api.github.com/users/hatemosphere/repos",
      "events_url": "https://api.github.com/users/hatemosphere/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hatemosphere/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-16T14:01:40Z",
    "updated_at": "2023-10-16T14:01:40Z",
    "author_association": "MEMBER",
    "body": "external node is not yet fully open, please follow announcements and releases in this repo",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync-era/issues/comments/1764550740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

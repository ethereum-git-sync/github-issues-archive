{
  "url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
  "repository_url": "https://api.github.com/repos/matter-labs/zksync",
  "labels_url": "https://api.github.com/repos/matter-labs/zksync/issues/322/labels{/name}",
  "comments_url": "https://api.github.com/repos/matter-labs/zksync/issues/322/comments",
  "events_url": "https://api.github.com/repos/matter-labs/zksync/issues/322/events",
  "html_url": "https://github.com/matter-labs/zksync/issues/322",
  "id": 956734175,
  "node_id": "MDU6SXNzdWU5NTY3MzQxNzU=",
  "number": 322,
  "title": "zk init fails",
  "user": {
    "login": "julianlen",
    "id": 14999400,
    "node_id": "MDQ6VXNlcjE0OTk5NDAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/14999400?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/julianlen",
    "html_url": "https://github.com/julianlen",
    "followers_url": "https://api.github.com/users/julianlen/followers",
    "following_url": "https://api.github.com/users/julianlen/following{/other_user}",
    "gists_url": "https://api.github.com/users/julianlen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/julianlen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/julianlen/subscriptions",
    "organizations_url": "https://api.github.com/users/julianlen/orgs",
    "repos_url": "https://api.github.com/users/julianlen/repos",
    "events_url": "https://api.github.com/users/julianlen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/julianlen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "StanislavBreadless",
    "id": 52464764,
    "node_id": "MDQ6VXNlcjUyNDY0NzY0",
    "avatar_url": "https://avatars.githubusercontent.com/u/52464764?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/StanislavBreadless",
    "html_url": "https://github.com/StanislavBreadless",
    "followers_url": "https://api.github.com/users/StanislavBreadless/followers",
    "following_url": "https://api.github.com/users/StanislavBreadless/following{/other_user}",
    "gists_url": "https://api.github.com/users/StanislavBreadless/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/StanislavBreadless/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/StanislavBreadless/subscriptions",
    "organizations_url": "https://api.github.com/users/StanislavBreadless/orgs",
    "repos_url": "https://api.github.com/users/StanislavBreadless/repos",
    "events_url": "https://api.github.com/users/StanislavBreadless/events{/privacy}",
    "received_events_url": "https://api.github.com/users/StanislavBreadless/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "StanislavBreadless",
      "id": 52464764,
      "node_id": "MDQ6VXNlcjUyNDY0NzY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/52464764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StanislavBreadless",
      "html_url": "https://github.com/StanislavBreadless",
      "followers_url": "https://api.github.com/users/StanislavBreadless/followers",
      "following_url": "https://api.github.com/users/StanislavBreadless/following{/other_user}",
      "gists_url": "https://api.github.com/users/StanislavBreadless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StanislavBreadless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StanislavBreadless/subscriptions",
      "organizations_url": "https://api.github.com/users/StanislavBreadless/orgs",
      "repos_url": "https://api.github.com/users/StanislavBreadless/repos",
      "events_url": "https://api.github.com/users/StanislavBreadless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StanislavBreadless/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-07-30T13:12:12Z",
  "updated_at": "2021-08-05T05:11:02Z",
  "closed_at": "2021-08-05T05:11:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi, when I run `zk init`, in the last step this happens:\r\n\r\n```\r\n[100%] Built target wasm-opt\r\nwasm2js(38848,0x114345e00) malloc: *** error for object 0x7fd9b7820000: pointer being freed was not allocated\r\nwasm2js(38848,0x114345e00) malloc: *** set a breakpoint in malloc_error_break to debug\r\n./build.sh: line 24: 38848 Abort trap: 6           ../binaryen/bin/wasm2js ./dist/zksync-crypto-bundler_bg.wasm -o $ASM\r\n```\r\n\r\nAnother prove I did:\r\n\r\nwithin the `sdk/binaryen` folder, run: \r\n\r\n`python3 check.py`\r\n\r\n```\r\n[ checking wasm-opt -o notation... ]\r\n\r\nexecuting:  /Users/julian/workspace/rskj-projects/zk/zksync/sdk/binaryen/bin/wasm-opt /Users/julian/workspace/rskj-projects/zk/zksync/sdk/binaryen/test/hello_world.wat -o a.wat -S\r\nwarning: no passes specified, not doing any work\r\nwasm-opt(39600,0x1062f5e00) malloc: *** error for object 0x7f92b1c0ab60: pointer being freed was not allocated\r\nwasm-opt(39600,0x1062f5e00) malloc: *** set a breakpoint in malloc_error_break to debug\r\nTraceback (most recent call last):\r\n```\r\n\r\n\r\nHere my clang version:\r\n```\r\nclang --version\r\nApple clang version 12.0.5 (clang-1205.0.22.11)\r\nTarget: x86_64-apple-darwin20.5.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n```\r\n\r\n```\r\ngcc --version\r\nConfigured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\r\nApple clang version 12.0.5 (clang-1205.0.22.11)\r\nTarget: x86_64-apple-darwin20.5.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n```\r\n\r\n\r\nThe OS is MacOS Big Sur 11.5.1\r\n\r\n```\r\n(lldb) target create \"bin/wasm-opt\"\r\nCurrent executable set to '/Users/julian/workspace/rskj-projects/zk/zksync/sdk/binaryen/bin/wasm-opt' (x86_64).\r\n(lldb) b malloc_error_break\r\nBreakpoint 1: where = libsystem_malloc.dylib`malloc_error_break, address = 0x00007fff2014f9ab\r\n(lldb) run test/hello_world.wat -o a.wat -S\r\nProcess 5197 launched: '/Users/julian/workspace/rskj-projects/zk/zksync/sdk/binaryen/bin/wasm-opt' (x86_64)\r\nwarning: no passes specified, not doing any work\r\nwasm-opt(5197,0x100920e00) malloc: *** error for object 0x107015e00: pointer being freed was not allocated\r\nwasm-opt(5197,0x100920e00) malloc: *** set a breakpoint in malloc_error_break to debug\r\nProcess 5197 stopped\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\r\n    frame #0: 0x00007fff2034b9ab libsystem_malloc.dylib`malloc_error_break\r\nlibsystem_malloc.dylib`malloc_error_break:\r\n->  0x7fff2034b9ab <+0>: pushq  %rbp\r\n    0x7fff2034b9ac <+1>: movq   %rsp, %rbp\r\n    0x7fff2034b9af <+4>: nop\r\n    0x7fff2034b9b0 <+5>: nopl   (%rax)\r\nTarget 0: (wasm-opt) stopped.\r\n```",
  "closed_by": {
    "login": "popzxc",
    "id": 12111581,
    "node_id": "MDQ6VXNlcjEyMTExNTgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/12111581?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/popzxc",
    "html_url": "https://github.com/popzxc",
    "followers_url": "https://api.github.com/users/popzxc/followers",
    "following_url": "https://api.github.com/users/popzxc/following{/other_user}",
    "gists_url": "https://api.github.com/users/popzxc/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/popzxc/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/popzxc/subscriptions",
    "organizations_url": "https://api.github.com/users/popzxc/orgs",
    "repos_url": "https://api.github.com/users/popzxc/repos",
    "events_url": "https://api.github.com/users/popzxc/events{/privacy}",
    "received_events_url": "https://api.github.com/users/popzxc/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/322/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/matter-labs/zksync/issues/322/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/890814704",
    "html_url": "https://github.com/matter-labs/zksync/issues/322#issuecomment-890814704",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
    "id": 890814704,
    "node_id": "IC_kwDOC0aUls41GMDw",
    "user": {
      "login": "gosgos11",
      "id": 82885740,
      "node_id": "MDQ6VXNlcjgyODg1NzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/82885740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gosgos11",
      "html_url": "https://github.com/gosgos11",
      "followers_url": "https://api.github.com/users/gosgos11/followers",
      "following_url": "https://api.github.com/users/gosgos11/following{/other_user}",
      "gists_url": "https://api.github.com/users/gosgos11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gosgos11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gosgos11/subscriptions",
      "organizations_url": "https://api.github.com/users/gosgos11/orgs",
      "repos_url": "https://api.github.com/users/gosgos11/repos",
      "events_url": "https://api.github.com/users/gosgos11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gosgos11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T08:06:39Z",
    "updated_at": "2021-08-02T08:06:39Z",
    "author_association": "NONE",
    "body": "I meet another error when run ./zk init\r\n\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/wasm-type.h:538:12: error: 'hash' defined as a class template here but previously declared as a\r\n      struct template [-Werror,-Wmismatched-tags]\r\ntemplate<> class hash<wasm::Rtt> {\r\n           ^\r\n/usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/system_error:134:5: note: did you mean class here?\r\n    struct hash;\r\n    ^\r\n/usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/stl_bvector.h:548:31: note: did you mean class here?\r\n    template<typename> friend struct hash;\r\n                              ^\r\n/usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/functional_hash.h:58:5: note: did you mean class here?\r\n    struct hash;\r\n    ^\r\n8 errors generated.\r\nsrc/ir/CMakeFiles/ir.dir/build.make:101: recipe for target 'src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o' failed\r\nmake[2]: *** [src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o] Error 1\r\nCMakeFiles/Makefile2:504: recipe for target 'src/ir/CMakeFiles/ir.dir/all' failed\r\n\r\nHere my env version:\r\nos: ubuntu 16.04\r\n\r\nclang: \r\nclang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)\r\nTarget: x86_64-pc-linux-gnu\r\nThread model: posix\r\nInstalledDir: /usr/bin\r\n\r\ngcc: \r\ngcc --version\r\ngcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/890814704/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/891690897",
    "html_url": "https://github.com/matter-labs/zksync/issues/322#issuecomment-891690897",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
    "id": 891690897,
    "node_id": "IC_kwDOC0aUls41Jh-R",
    "user": {
      "login": "StanislavBreadless",
      "id": 52464764,
      "node_id": "MDQ6VXNlcjUyNDY0NzY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/52464764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StanislavBreadless",
      "html_url": "https://github.com/StanislavBreadless",
      "followers_url": "https://api.github.com/users/StanislavBreadless/followers",
      "following_url": "https://api.github.com/users/StanislavBreadless/following{/other_user}",
      "gists_url": "https://api.github.com/users/StanislavBreadless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StanislavBreadless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StanislavBreadless/subscriptions",
      "organizations_url": "https://api.github.com/users/StanislavBreadless/orgs",
      "repos_url": "https://api.github.com/users/StanislavBreadless/repos",
      "events_url": "https://api.github.com/users/StanislavBreadless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StanislavBreadless/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T09:30:02Z",
    "updated_at": "2021-08-03T09:30:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I meet another error when run ./zk init\r\n> \r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/wasm-type.h:538:12: error: 'hash' defined as a class template here but previously declared as a\r\n> struct template [-Werror,-Wmismatched-tags]\r\n> template<> class hashwasm::Rtt {\r\n> ^\r\n> /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/system_error:134:5: note: did you mean class here?\r\n> struct hash;\r\n> ^\r\n> /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/stl_bvector.h:548:31: note: did you mean class here?\r\n> template friend struct hash;\r\n> ^\r\n> /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/functional_hash.h:58:5: note: did you mean class here?\r\n> struct hash;\r\n> ^\r\n> 8 errors generated.\r\n> src/ir/CMakeFiles/ir.dir/build.make:101: recipe for target 'src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o' failed\r\n> make[2]: *** [src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o] Error 1\r\n> CMakeFiles/Makefile2:504: recipe for target 'src/ir/CMakeFiles/ir.dir/all' failed\r\n> \r\n> Here my env version:\r\n> os: ubuntu 16.04\r\n> \r\n> clang:\r\n> clang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)\r\n> Target: x86_64-pc-linux-gnu\r\n> Thread model: posix\r\n> InstalledDir: /usr/bin\r\n> \r\n> gcc:\r\n> gcc --version\r\n> gcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\n> Copyright (C) 2015 Free Software Foundation, Inc.\r\n> This is free software; see the source for copying conditions. There is NO\r\n> warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\nHi! Thank you for reaching out. On my PC:\r\n\r\n```\r\ngcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\n```\r\n\r\n```\r\nclang version 10.0.0 (git@github.com:apple/llvm-project.git 3093af41dd65ad466dcd5603e9289244edfee4f5)\r\nTarget: x86_64-unknown-linux-gnu\r\nThread model: posix\r\n```\r\n\r\nCould you please try installing the same versions as on my PC?",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/891690897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/891896605",
    "html_url": "https://github.com/matter-labs/zksync/issues/322#issuecomment-891896605",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
    "id": 891896605,
    "node_id": "IC_kwDOC0aUls41KUMd",
    "user": {
      "login": "julianlen",
      "id": 14999400,
      "node_id": "MDQ6VXNlcjE0OTk5NDAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/14999400?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/julianlen",
      "html_url": "https://github.com/julianlen",
      "followers_url": "https://api.github.com/users/julianlen/followers",
      "following_url": "https://api.github.com/users/julianlen/following{/other_user}",
      "gists_url": "https://api.github.com/users/julianlen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/julianlen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/julianlen/subscriptions",
      "organizations_url": "https://api.github.com/users/julianlen/orgs",
      "repos_url": "https://api.github.com/users/julianlen/repos",
      "events_url": "https://api.github.com/users/julianlen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/julianlen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-03T14:31:39Z",
    "updated_at": "2021-08-03T14:40:14Z",
    "author_association": "NONE",
    "body": "Solved (again),  what I did was the following:\r\n1. Uninstalled rust `rustup self uninstall`\r\n2. Uninstalled [xcode](https://dzone.com/articles/how-to-completely-uninstall-xcode-from-mac)\r\n3. Uninstalled cmake `brew uninstall cmake`\r\n4. Looked if I had another version of LLVM installed and I found that it was installed through Brew so I ran `brew uninstall llvm`.\r\n\r\nThen, I reinstalled rust, xcode and cmake and when I ran `zk init` again, there were no errors.",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/891896605/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/892321168",
    "html_url": "https://github.com/matter-labs/zksync/issues/322#issuecomment-892321168",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
    "id": 892321168,
    "node_id": "IC_kwDOC0aUls41L72Q",
    "user": {
      "login": "gosgos11",
      "id": 82885740,
      "node_id": "MDQ6VXNlcjgyODg1NzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/82885740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gosgos11",
      "html_url": "https://github.com/gosgos11",
      "followers_url": "https://api.github.com/users/gosgos11/followers",
      "following_url": "https://api.github.com/users/gosgos11/following{/other_user}",
      "gists_url": "https://api.github.com/users/gosgos11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gosgos11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gosgos11/subscriptions",
      "organizations_url": "https://api.github.com/users/gosgos11/orgs",
      "repos_url": "https://api.github.com/users/gosgos11/repos",
      "events_url": "https://api.github.com/users/gosgos11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gosgos11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-04T02:57:56Z",
    "updated_at": "2021-08-04T03:22:15Z",
    "author_association": "NONE",
    "body": "> > I meet another error when run ./zk init\r\n> > /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/wasm-type.h:538:12: error: 'hash' defined as a class template here but previously declared as a\r\n> > struct template [-Werror,-Wmismatched-tags]\r\n> > template<> class hashwasm::Rtt {\r\n> > ^\r\n> > /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/system_error:134:5: note: did you mean class here?\r\n> > struct hash;\r\n> > ^\r\n> > /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/stl_bvector.h:548:31: note: did you mean class here?\r\n> > template friend struct hash;\r\n> > ^\r\n> > /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/functional_hash.h:58:5: note: did you mean class here?\r\n> > struct hash;\r\n> > ^\r\n> > 8 errors generated.\r\n> > src/ir/CMakeFiles/ir.dir/build.make:101: recipe for target 'src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o' failed\r\n> > make[2]: *** [src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o] Error 1\r\n> > CMakeFiles/Makefile2:504: recipe for target 'src/ir/CMakeFiles/ir.dir/all' failed\r\n> > Here my env version:\r\n> > os: ubuntu 16.04\r\n> > clang:\r\n> > clang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)\r\n> > Target: x86_64-pc-linux-gnu\r\n> > Thread model: posix\r\n> > InstalledDir: /usr/bin\r\n> > gcc:\r\n> > gcc --version\r\n> > gcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\n> > Copyright (C) 2015 Free Software Foundation, Inc.\r\n> > This is free software; see the source for copying conditions. There is NO\r\n> > warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n> \r\n> Hi! Thank you for reaching out. On my PC:\r\n> \r\n> ```\r\n> gcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\n> ```\r\n> \r\n> ```\r\n> clang version 10.0.0 (git@github.com:apple/llvm-project.git 3093af41dd65ad466dcd5603e9289244edfee4f5)\r\n> Target: x86_64-unknown-linux-gnu\r\n> Thread model: posix\r\n> ```\r\n> \r\n> Could you please try installing the same versions as on my PC?\r\n\r\nThanks for your reply, I change gcc from 5.5 to 7.5, there is another error:\r\n\r\n-- Build files have been written to: /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen\r\n[  0%] Building CXX object src/ir/CMakeFiles/ir.dir/module-splitting.cpp.o\r\n[  1%] Built target asmjs\r\n[  1%] Building CXX object src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/optimizer-shared.cpp.o\r\n[  2%] Built target cfg\r\n[ 35%] Built target llvm_dwarf\r\n[ 36%] Building CXX object src/passes/CMakeFiles/passes.dir/Print.cpp.o\r\n[ 37%] Building CXX object src/passes/CMakeFiles/passes.dir/RoundTrip.cpp.o\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:208:11: error: unknown attribute 'fallthrough' ignored\r\n      [-Werror,-Wunknown-attributes]\r\n        [[fallthrough]];\r\n          ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:210:7: error: unannotated fall-through between switch\r\n      labels [-Werror,-Wimplicit-fallthrough]\r\n      case '|':\r\n      ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:210:7: note: insert '[[clang::fallthrough]];' to silence\r\n      this warning\r\n      case '|':\r\n      ^\r\n      [[clang::fallthrough]]; \r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:210:7: note: insert 'break;' to avoid fall-through\r\n      case '|':\r\n      ^\r\n      break; \r\n2 errors generated.\r\nsrc/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/build.make:62: recipe for target 'src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/optimizer-shared.cpp.o' failed\r\nmake[2]: *** [src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/optimizer-shared.cpp.o] Error 1\r\nCMakeFiles/Makefile2:669: recipe for target 'src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/all' failed\r\nmake[1]: *** [src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/all] Error 2\r\nmake[1]: *** Waiting for unfinished jobs....\r\n[ 38%] Building CXX object src/passes/CMakeFiles/passes.dir/StackIR.cpp.o\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/ir/module-splitting.cpp:615:10: error: moving a temporary object prevents copy elision\r\n      [-Werror,-Wpessimizing-move]\r\n  return std::move(ModuleSplitter(primary, config).secondaryPtr);\r\n         ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/ir/module-splitting.cpp:615:10: note: remove std::move call here\r\n  return std::move(ModuleSplitter(primary, config).secondaryPtr);\r\n         ^~~~~~~~~~                                            ~\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3056:11: error: unknown attribute 'fallthrough' ignored\r\n      [-Werror,-Wunknown-attributes]\r\n        [[fallthrough]];\r\n          ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3068:11: error: unknown attribute 'fallthrough' ignored\r\n      [-Werror,-Wunknown-attributes]\r\n        [[fallthrough]];\r\n          ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3057:7: error: unannotated fall-through between switch labels\r\n      [-Werror,-Wimplicit-fallthrough]\r\n      case StackInst::BlockBegin:\r\n      ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3057:7: note: insert '[[clang::fallthrough]];' to silence this warning\r\n      case StackInst::BlockBegin:\r\n      ^\r\n      [[clang::fallthrough]]; \r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3057:7: note: insert 'break;' to avoid fall-through\r\n      case StackInst::BlockBegin:\r\n      ^\r\n      break; \r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3069:7: error: unannotated fall-through between switch labels\r\n      [-Werror,-Wimplicit-fallthrough]\r\n      case StackInst::BlockEnd:\r\n      ^\r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3069:7: note: insert '[[clang::fallthrough]];' to silence this warning\r\n      case StackInst::BlockEnd:\r\n      ^\r\n      [[clang::fallthrough]]; \r\n/mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3069:7: note: insert 'break;' to avoid fall-through\r\n      case StackInst::BlockEnd:\r\n      ^\r\n      break; \r\n1 error generated.\r\nsrc/ir/CMakeFiles/ir.dir/build.make:127: recipe for target 'src/ir/CMakeFiles/ir.dir/module-splitting.cpp.o' failed\r\nmake[2]: *** [src/ir/CMakeFiles/ir.dir/module-splitting.cpp.o] Error 1\r\nCMakeFiles/Makefile2:504: recipe for target 'src/ir/CMakeFiles/ir.dir/all' failed\r\nmake[1]: *** [src/ir/CMakeFiles/ir.dir/all] Error 2\r\n[ 38%] Building CXX object src/passes/CMakeFiles/passes.dir/Strip.cpp.o\r\n[ 39%] Building CXX object src/passes/CMakeFiles/passes.dir/StripTargetFeatures.cpp.o\r\n4 errors generated.\r\nsrc/passes/CMakeFiles/passes.dir/build.make:652: recipe for target 'src/passes/CMakeFiles/passes.dir/Print.cpp.o' failed\r\nmake[2]: *** [src/passes/CMakeFiles/passes.dir/Print.cpp.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\nCMakeFiles/Makefile2:724: recipe for target 'src/passes/CMakeFiles/passes.dir/all' failed\r\nmake[1]: *** [src/passes/CMakeFiles/passes.dir/all] Error 2\r\nMakefile:129: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\nerror Command failed with exit code 2.\r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\nerror Command failed.\r\nExit code: 2\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/892321168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/892425417",
    "html_url": "https://github.com/matter-labs/zksync/issues/322#issuecomment-892425417",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
    "id": 892425417,
    "node_id": "IC_kwDOC0aUls41MVTJ",
    "user": {
      "login": "StanislavBreadless",
      "id": 52464764,
      "node_id": "MDQ6VXNlcjUyNDY0NzY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/52464764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/StanislavBreadless",
      "html_url": "https://github.com/StanislavBreadless",
      "followers_url": "https://api.github.com/users/StanislavBreadless/followers",
      "following_url": "https://api.github.com/users/StanislavBreadless/following{/other_user}",
      "gists_url": "https://api.github.com/users/StanislavBreadless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/StanislavBreadless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/StanislavBreadless/subscriptions",
      "organizations_url": "https://api.github.com/users/StanislavBreadless/orgs",
      "repos_url": "https://api.github.com/users/StanislavBreadless/repos",
      "events_url": "https://api.github.com/users/StanislavBreadless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/StanislavBreadless/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-04T07:17:05Z",
    "updated_at": "2021-08-04T07:17:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > > I meet another error when run ./zk init\r\n> > > /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/wasm-type.h:538:12: error: 'hash' defined as a class template here but previously declared as a\r\n> > > struct template [-Werror,-Wmismatched-tags]\r\n> > > template<> class hashwasm::Rtt {\r\n> > > ^\r\n> > > /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/system_error:134:5: note: did you mean class here?\r\n> > > struct hash;\r\n> > > ^\r\n> > > /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/stl_bvector.h:548:31: note: did you mean class here?\r\n> > > template friend struct hash;\r\n> > > ^\r\n> > > /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../../include/c++/5.4.0/bits/functional_hash.h:58:5: note: did you mean class here?\r\n> > > struct hash;\r\n> > > ^\r\n> > > 8 errors generated.\r\n> > > src/ir/CMakeFiles/ir.dir/build.make:101: recipe for target 'src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o' failed\r\n> > > make[2]: *** [src/ir/CMakeFiles/ir.dir/ReFinalize.cpp.o] Error 1\r\n> > > CMakeFiles/Makefile2:504: recipe for target 'src/ir/CMakeFiles/ir.dir/all' failed\r\n> > > Here my env version:\r\n> > > os: ubuntu 16.04\r\n> > > clang:\r\n> > > clang version 3.8.0-2ubuntu4 (tags/RELEASE_380/final)\r\n> > > Target: x86_64-pc-linux-gnu\r\n> > > Thread model: posix\r\n> > > InstalledDir: /usr/bin\r\n> > > gcc:\r\n> > > gcc --version\r\n> > > gcc (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\r\n> > > Copyright (C) 2015 Free Software Foundation, Inc.\r\n> > > This is free software; see the source for copying conditions. There is NO\r\n> > > warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n> > \r\n> > \r\n> > Hi! Thank you for reaching out. On my PC:\r\n> > ```\r\n> > gcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > ```\r\n> > clang version 10.0.0 (git@github.com:apple/llvm-project.git 3093af41dd65ad466dcd5603e9289244edfee4f5)\r\n> > Target: x86_64-unknown-linux-gnu\r\n> > Thread model: posix\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > Could you please try installing the same versions as on my PC?\r\n> \r\n> Thanks for your reply, I change gcc from 5.5 to 7.5, there is another error:\r\n> \r\n> -- Build files have been written to: /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen\r\n> [ 0%] Building CXX object src/ir/CMakeFiles/ir.dir/module-splitting.cpp.o\r\n> [ 1%] Built target asmjs\r\n> [ 1%] Building CXX object src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/optimizer-shared.cpp.o\r\n> [ 2%] Built target cfg\r\n> [ 35%] Built target llvm_dwarf\r\n> [ 36%] Building CXX object src/passes/CMakeFiles/passes.dir/Print.cpp.o\r\n> [ 37%] Building CXX object src/passes/CMakeFiles/passes.dir/RoundTrip.cpp.o\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:208:11: error: unknown attribute 'fallthrough' ignored\r\n> [-Werror,-Wunknown-attributes]\r\n> [[fallthrough]];\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:210:7: error: unannotated fall-through between switch\r\n> labels [-Werror,-Wimplicit-fallthrough]\r\n> case '|':\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:210:7: note: insert '[[clang::fallthrough]];' to silence\r\n> this warning\r\n> case '|':\r\n> ^\r\n> [[clang::fallthrough]];\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/emscripten-optimizer/optimizer-shared.cpp:210:7: note: insert 'break;' to avoid fall-through\r\n> case '|':\r\n> ^\r\n> break;\r\n> 2 errors generated.\r\n> src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/build.make:62: recipe for target 'src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/optimizer-shared.cpp.o' failed\r\n> make[2]: *** [src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/optimizer-shared.cpp.o] Error 1\r\n> CMakeFiles/Makefile2:669: recipe for target 'src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/all' failed\r\n> make[1]: *** [src/emscripten-optimizer/CMakeFiles/emscripten-optimizer.dir/all] Error 2\r\n> make[1]: *** Waiting for unfinished jobs....\r\n> [ 38%] Building CXX object src/passes/CMakeFiles/passes.dir/StackIR.cpp.o\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/ir/module-splitting.cpp:615:10: error: moving a temporary object prevents copy elision\r\n> [-Werror,-Wpessimizing-move]\r\n> return std::move(ModuleSplitter(primary, config).secondaryPtr);\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/ir/module-splitting.cpp:615:10: note: remove std::move call here\r\n> return std::move(ModuleSplitter(primary, config).secondaryPtr);\r\n> ^~~~~~~~~~ ~\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3056:11: error: unknown attribute 'fallthrough' ignored\r\n> [-Werror,-Wunknown-attributes]\r\n> [[fallthrough]];\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3068:11: error: unknown attribute 'fallthrough' ignored\r\n> [-Werror,-Wunknown-attributes]\r\n> [[fallthrough]];\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3057:7: error: unannotated fall-through between switch labels\r\n> [-Werror,-Wimplicit-fallthrough]\r\n> case StackInst::BlockBegin:\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3057:7: note: insert '[[clang::fallthrough]];' to silence this warning\r\n> case StackInst::BlockBegin:\r\n> ^\r\n> [[clang::fallthrough]];\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3057:7: note: insert 'break;' to avoid fall-through\r\n> case StackInst::BlockBegin:\r\n> ^\r\n> break;\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3069:7: error: unannotated fall-through between switch labels\r\n> [-Werror,-Wimplicit-fallthrough]\r\n> case StackInst::BlockEnd:\r\n> ^\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3069:7: note: insert '[[clang::fallthrough]];' to silence this warning\r\n> case StackInst::BlockEnd:\r\n> ^\r\n> [[clang::fallthrough]];\r\n> /mnt/docker-root/dockerapp/zksync/zksync/sdk/binaryen/src/passes/Print.cpp:3069:7: note: insert 'break;' to avoid fall-through\r\n> case StackInst::BlockEnd:\r\n> ^\r\n> break;\r\n> 1 error generated.\r\n> src/ir/CMakeFiles/ir.dir/build.make:127: recipe for target 'src/ir/CMakeFiles/ir.dir/module-splitting.cpp.o' failed\r\n> make[2]: *** [src/ir/CMakeFiles/ir.dir/module-splitting.cpp.o] Error 1\r\n> CMakeFiles/Makefile2:504: recipe for target 'src/ir/CMakeFiles/ir.dir/all' failed\r\n> make[1]: *** [src/ir/CMakeFiles/ir.dir/all] Error 2\r\n> [ 38%] Building CXX object src/passes/CMakeFiles/passes.dir/Strip.cpp.o\r\n> [ 39%] Building CXX object src/passes/CMakeFiles/passes.dir/StripTargetFeatures.cpp.o\r\n> 4 errors generated.\r\n> src/passes/CMakeFiles/passes.dir/build.make:652: recipe for target 'src/passes/CMakeFiles/passes.dir/Print.cpp.o' failed\r\n> make[2]: *** [src/passes/CMakeFiles/passes.dir/Print.cpp.o] Error 1\r\n> make[2]: *** Waiting for unfinished jobs....\r\n> CMakeFiles/Makefile2:724: recipe for target 'src/passes/CMakeFiles/passes.dir/all' failed\r\n> make[1]: *** [src/passes/CMakeFiles/passes.dir/all] Error 2\r\n> Makefile:129: recipe for target 'all' failed\r\n> make: *** [all] Error 2\r\n> error Command failed with exit code 2.\r\n> info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n> error Command failed.\r\n> Exit code: 2\r\n\r\nMaybe try doing the same as @gosgos11 did? Reinstalling as much dev stuff as possible",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/892425417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/893133658",
    "html_url": "https://github.com/matter-labs/zksync/issues/322#issuecomment-893133658",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/322",
    "id": 893133658,
    "node_id": "IC_kwDOC0aUls41PCNa",
    "user": {
      "login": "gosgos11",
      "id": 82885740,
      "node_id": "MDQ6VXNlcjgyODg1NzQw",
      "avatar_url": "https://avatars.githubusercontent.com/u/82885740?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gosgos11",
      "html_url": "https://github.com/gosgos11",
      "followers_url": "https://api.github.com/users/gosgos11/followers",
      "following_url": "https://api.github.com/users/gosgos11/following{/other_user}",
      "gists_url": "https://api.github.com/users/gosgos11/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gosgos11/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gosgos11/subscriptions",
      "organizations_url": "https://api.github.com/users/gosgos11/orgs",
      "repos_url": "https://api.github.com/users/gosgos11/repos",
      "events_url": "https://api.github.com/users/gosgos11/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gosgos11/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-05T03:23:18Z",
    "updated_at": "2021-08-05T03:26:55Z",
    "author_association": "NONE",
    "body": "I change OS to ubuntu 20.04 and compile successfully.\r\nOS: ubuntu 20.04\r\ngcc: gcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0\r\nclang:  clang version 10.0.0-4ubuntu1\r\nrustc: rustc 1.54.0 (a178d0322 2021-07-26)\r\nnode: v14.17.4\r\nsqlx-cli: 0.5.5\r\n\r\nthanks for all of your reply.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/893133658/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

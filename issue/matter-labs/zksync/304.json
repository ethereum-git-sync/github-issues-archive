{
  "url": "https://api.github.com/repos/matter-labs/zksync/issues/304",
  "repository_url": "https://api.github.com/repos/matter-labs/zksync",
  "labels_url": "https://api.github.com/repos/matter-labs/zksync/issues/304/labels{/name}",
  "comments_url": "https://api.github.com/repos/matter-labs/zksync/issues/304/comments",
  "events_url": "https://api.github.com/repos/matter-labs/zksync/issues/304/events",
  "html_url": "https://github.com/matter-labs/zksync/issues/304",
  "id": 854106921,
  "node_id": "MDU6SXNzdWU4NTQxMDY5MjE=",
  "number": 304,
  "title": "usize ints and ARM Compilation break the library",
  "user": {
    "login": "ControlCplusControlV",
    "id": 44706811,
    "node_id": "MDQ6VXNlcjQ0NzA2ODEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/44706811?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ControlCplusControlV",
    "html_url": "https://github.com/ControlCplusControlV",
    "followers_url": "https://api.github.com/users/ControlCplusControlV/followers",
    "following_url": "https://api.github.com/users/ControlCplusControlV/following{/other_user}",
    "gists_url": "https://api.github.com/users/ControlCplusControlV/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ControlCplusControlV/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ControlCplusControlV/subscriptions",
    "organizations_url": "https://api.github.com/users/ControlCplusControlV/orgs",
    "repos_url": "https://api.github.com/users/ControlCplusControlV/repos",
    "events_url": "https://api.github.com/users/ControlCplusControlV/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ControlCplusControlV/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-04-09T02:59:20Z",
  "updated_at": "2021-10-01T19:10:18Z",
  "closed_at": "2021-10-01T19:10:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "To get a better understanding of this - I was compiling golem which uses this library for ARM, in hopes of running it on a Raspberry Pi. I was using - target - target.arm-unknown-linux-musleabi linker - arm-linux-gnueabihf-ld for my target and linker. \r\n\r\nWhen doing this I'd run into various issues in this library caused with integers being different lengths, which appeared to be from usize ints basing int size off of architecture, thus not working well with ARM.\r\n\r\nI raised this issue on stackoverflow where I go a little more in depth on the issue - https://stackoverflow.com/questions/67013986/usize-breaking-zksync-when-compiling-for-arm\r\n\r\n\r\nThis helpful answer suggested I put this here - \r\n\r\nstat is a Statvfs structure, the return type of Statvfs::blocks_available() is fsblkcnt_t, and the return type of Statvfs::fragment_size() is c_ulong. These two types are defined in the libc package, which is a paper-thin wrapper around the low-level C OS-calls. The types are equivalent to the C types in the OS-specific *.h files. The sizes of the types vary from platform to platform.\r\n\r\nThe library you're compiling appears to have some assumptions baked in about these sizes and their arithmetic compatibility.\r\n\r\nSo in short, fix ARM compilation for this library by reworking how int lengths are handled, if this can't be done in one body of code to support all platforms, forking out may be necessary to work with ARM.",
  "closed_by": {
    "login": "ControlCplusControlV",
    "id": 44706811,
    "node_id": "MDQ6VXNlcjQ0NzA2ODEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/44706811?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ControlCplusControlV",
    "html_url": "https://github.com/ControlCplusControlV",
    "followers_url": "https://api.github.com/users/ControlCplusControlV/followers",
    "following_url": "https://api.github.com/users/ControlCplusControlV/following{/other_user}",
    "gists_url": "https://api.github.com/users/ControlCplusControlV/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ControlCplusControlV/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ControlCplusControlV/subscriptions",
    "organizations_url": "https://api.github.com/users/ControlCplusControlV/orgs",
    "repos_url": "https://api.github.com/users/ControlCplusControlV/repos",
    "events_url": "https://api.github.com/users/ControlCplusControlV/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ControlCplusControlV/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/304/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/matter-labs/zksync/issues/304/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/816397962",
    "html_url": "https://github.com/matter-labs/zksync/issues/304#issuecomment-816397962",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/304",
    "id": 816397962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjM5Nzk2Mg==",
    "user": {
      "login": "popzxc",
      "id": 12111581,
      "node_id": "MDQ6VXNlcjEyMTExNTgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12111581?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/popzxc",
      "html_url": "https://github.com/popzxc",
      "followers_url": "https://api.github.com/users/popzxc/followers",
      "following_url": "https://api.github.com/users/popzxc/following{/other_user}",
      "gists_url": "https://api.github.com/users/popzxc/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/popzxc/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/popzxc/subscriptions",
      "organizations_url": "https://api.github.com/users/popzxc/orgs",
      "repos_url": "https://api.github.com/users/popzxc/repos",
      "events_url": "https://api.github.com/users/popzxc/events{/privacy}",
      "received_events_url": "https://api.github.com/users/popzxc/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T04:44:42Z",
    "updated_at": "2021-04-09T04:44:42Z",
    "author_association": "MEMBER",
    "body": "Thanks for the report! Unfortunately, we currently consider 64-bit linux as the main target and have no plans in making the code compatible with Raspberry Pi.\r\n\r\nHowever, if you are willing to help, you can file a PR with a fix, and we'll be happy to merge it.",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/816397962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/816651732",
    "html_url": "https://github.com/matter-labs/zksync/issues/304#issuecomment-816651732",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/304",
    "id": 816651732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjY1MTczMg==",
    "user": {
      "login": "shamatar",
      "id": 6467575,
      "node_id": "MDQ6VXNlcjY0Njc1NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6467575?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shamatar",
      "html_url": "https://github.com/shamatar",
      "followers_url": "https://api.github.com/users/shamatar/followers",
      "following_url": "https://api.github.com/users/shamatar/following{/other_user}",
      "gists_url": "https://api.github.com/users/shamatar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shamatar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shamatar/subscriptions",
      "organizations_url": "https://api.github.com/users/shamatar/orgs",
      "repos_url": "https://api.github.com/users/shamatar/repos",
      "events_url": "https://api.github.com/users/shamatar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shamatar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T12:37:04Z",
    "updated_at": "2021-04-09T12:37:04Z",
    "author_association": "MEMBER",
    "body": "@popzxc Even though we do not aim to support anything other than x86-64 at the moment I think we can change a signature of the function and casts in this expression to usize as it's logical not to have more countable elements then assessable memory can handle",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/816651732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/816736510",
    "html_url": "https://github.com/matter-labs/zksync/issues/304#issuecomment-816736510",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/304",
    "id": 816736510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNjczNjUxMA==",
    "user": {
      "login": "Deniallugo",
      "id": 8031374,
      "node_id": "MDQ6VXNlcjgwMzEzNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8031374?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Deniallugo",
      "html_url": "https://github.com/Deniallugo",
      "followers_url": "https://api.github.com/users/Deniallugo/followers",
      "following_url": "https://api.github.com/users/Deniallugo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Deniallugo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Deniallugo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Deniallugo/subscriptions",
      "organizations_url": "https://api.github.com/users/Deniallugo/orgs",
      "repos_url": "https://api.github.com/users/Deniallugo/repos",
      "events_url": "https://api.github.com/users/Deniallugo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Deniallugo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-09T14:47:23Z",
    "updated_at": "2021-04-09T14:47:23Z",
    "author_association": "COLLABORATOR",
    "body": "Thanks for the report! The task was created in the internal tracker.",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/816736510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

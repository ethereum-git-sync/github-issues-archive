{
  "url": "https://api.github.com/repos/matter-labs/zksync/issues/222",
  "repository_url": "https://api.github.com/repos/matter-labs/zksync",
  "labels_url": "https://api.github.com/repos/matter-labs/zksync/issues/222/labels{/name}",
  "comments_url": "https://api.github.com/repos/matter-labs/zksync/issues/222/comments",
  "events_url": "https://api.github.com/repos/matter-labs/zksync/issues/222/events",
  "html_url": "https://github.com/matter-labs/zksync/issues/222",
  "id": 552889670,
  "node_id": "MDU6SXNzdWU1NTI4ODk2NzA=",
  "number": 222,
  "title": "[Question] Local environment readiness - Failing zksync redeploy",
  "user": {
    "login": "DefiCake",
    "id": 46090742,
    "node_id": "MDQ6VXNlcjQ2MDkwNzQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/46090742?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DefiCake",
    "html_url": "https://github.com/DefiCake",
    "followers_url": "https://api.github.com/users/DefiCake/followers",
    "following_url": "https://api.github.com/users/DefiCake/following{/other_user}",
    "gists_url": "https://api.github.com/users/DefiCake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DefiCake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DefiCake/subscriptions",
    "organizations_url": "https://api.github.com/users/DefiCake/orgs",
    "repos_url": "https://api.github.com/users/DefiCake/repos",
    "events_url": "https://api.github.com/users/DefiCake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DefiCake/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "furkhat",
    "id": 4961905,
    "node_id": "MDQ6VXNlcjQ5NjE5MDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4961905?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/furkhat",
    "html_url": "https://github.com/furkhat",
    "followers_url": "https://api.github.com/users/furkhat/followers",
    "following_url": "https://api.github.com/users/furkhat/following{/other_user}",
    "gists_url": "https://api.github.com/users/furkhat/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/furkhat/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/furkhat/subscriptions",
    "organizations_url": "https://api.github.com/users/furkhat/orgs",
    "repos_url": "https://api.github.com/users/furkhat/repos",
    "events_url": "https://api.github.com/users/furkhat/events{/privacy}",
    "received_events_url": "https://api.github.com/users/furkhat/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "furkhat",
      "id": 4961905,
      "node_id": "MDQ6VXNlcjQ5NjE5MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4961905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furkhat",
      "html_url": "https://github.com/furkhat",
      "followers_url": "https://api.github.com/users/furkhat/followers",
      "following_url": "https://api.github.com/users/furkhat/following{/other_user}",
      "gists_url": "https://api.github.com/users/furkhat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/furkhat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/furkhat/subscriptions",
      "organizations_url": "https://api.github.com/users/furkhat/orgs",
      "repos_url": "https://api.github.com/users/furkhat/repos",
      "events_url": "https://api.github.com/users/furkhat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/furkhat/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-01-21T13:50:48Z",
  "updated_at": "2020-02-02T13:15:55Z",
  "closed_at": "2020-02-02T13:15:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi!\r\n\r\nI am following the local dev environment instructions. I am trying to familiarize with how L2 implementations work and this one seems the friendliest of them all. That said, although there are pretty clear instructions about how to deploy a dev environment, I have been unable to do it.\r\n\r\nThere is a message `TODO: fix minikube local dev` when issuing `zksync redeploy`. That leads me to think that this is still work in progress. Am I wrong?\r\n\r\nIn any case, I will leave here my current issues if it were of any help:\r\n\r\n- When firing `zksync redeploy` as per the instructions, I got the following error\r\n```\r\nTODO: fix minikube local dev\r\nredeploying for the db postgres://postgres@localhost/plasma\r\nmake[1]: Entering directory '/home/mad/zksync'\r\nmake[1]: Leaving directory '/home/mad/zksync'\r\nyarn run v1.21.1\r\nwarning package.json: No license field                                                                                                                        \r\n$ yarn build && ts-node scripts/testnet-deploy.ts --deploy --publish\r\nwarning package.json: No license field                                                                                                                        \r\n$ waffle config.json && waffle config_flat.json\r\ncontracts/Franklin.sol:196:9: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n        address _genesisAccAddress,\r\n        ^------------------------^\r\n\r\ncontracts/Franklin.sol:697:47: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n    function verifyBlock(uint32 _blockNumber, uint256[8] calldata _proof)\r\n                                              ^------------------------^\r\n\r\nflat/Franklin.sol:1026:9: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n        address _genesisAccAddress,\r\n        ^------------------------^\r\n\r\nflat/Franklin.sol:1527:47: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n    function verifyBlock(uint32 _blockNumber, uint256[8] calldata _proof)\r\n                                              ^------------------------^\r\n\r\nError: Cannot find module '../build/FranklinTest'\r\n    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:649:15)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:575:25)\r\n    at Module.require (internal/modules/cjs/loader.js:705:19)\r\n    at require (internal/modules/cjs/helpers.js:14:16)\r\n    at Object.<anonymous> (/home/mad/zksync/contracts/src.ts/deploy.ts:64:36)\r\n    at Module._compile (internal/modules/cjs/loader.js:799:30)\r\n    at Module.m._compile (/home/mad/zksync/contracts/node_modules/ts-node/src/index.ts:473:23)\r\n    at Module._extensions..js (internal/modules/cjs/loader.js:810:10)\r\n    at Object.require.extensions.(anonymous function) [as .ts] (/home/mad/zksync/contracts/node_modules/ts-node/src/index.ts:476:12)\r\n    at Module.load (internal/modules/cjs/loader.js:666:32)\r\n    at tryModuleLoad (internal/modules/cjs/loader.js:606:12)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:598:3)\r\n    at Module.require (internal/modules/cjs/loader.js:705:19)\r\n    at require (internal/modules/cjs/helpers.js:14:16)\r\n    at Object.<anonymous> (/home/mad/zksync/contracts/scripts/testnet-deploy.ts:40:16)\r\n    at Module._compile (internal/modules/cjs/loader.js:799:30)\r\n    at Module.m._compile (/home/mad/zksync/contracts/node_modules/ts-node/src/index.ts:473:23)\r\n    at Module._extensions..js (internal/modules/cjs/loader.js:810:10)\r\n    at Object.require.extensions.(anonymous function) [as .ts] (/home/mad/zksync/contracts/node_modules/ts-node/src/index.ts:476:12)\r\n    at Module.load (internal/modules/cjs/loader.js:666:32)\r\n    at tryModuleLoad (internal/modules/cjs/loader.js:606:12)\r\n    at Function.Module._load (internal/modules/cjs/loader.js:598:3)\r\nerror Command failed with exit code 1.                                                                                                                        \r\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\nContract deployment failed\r\nMakefile:143: recipe for target 'deploy-contracts' failed\r\nmake: *** [deploy-contracts] Error 1\r\n```\r\n\r\nI managed to solve it by tinkering a bit with the src and found `prepare-test-contracts.sh`, which is not pointed in the instructions.\r\n\r\n- After running the above mentioned script, the `zksync redeploy` command still gives me an error, which I am currently trying to troubleshoot (will update if I manage to get past it)\r\n\r\n```\r\nTODO: fix minikube local dev\r\nredeploying for the db postgres://postgres@localhost/plasma\r\nmake[1]: Entering directory '/home/mad/zksync'\r\nmake[1]: Leaving directory '/home/mad/zksync'\r\nyarn run v1.21.1\r\nwarning package.json: No license field                                                                                                                        \r\n$ yarn build && ts-node scripts/testnet-deploy.ts --deploy --publish\r\nwarning package.json: No license field                                                                                                                        \r\n$ waffle config.json && waffle config_flat.json\r\ncontracts/Franklin.sol:196:9: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n        address _genesisAccAddress,\r\n        ^------------------------^\r\n\r\ncontracts/Franklin.sol:697:47: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n    function verifyBlock(uint32 _blockNumber, uint256[8] calldata _proof)\r\n                                              ^------------------------^\r\n\r\ncontracts/generated/FranklinTest.sol:196:9: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n        address _genesisAccAddress,\r\n        ^------------------------^\r\n\r\ncontracts/generated/FranklinTest.sol:697:47: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n    function verifyBlock(uint32 _blockNumber, uint256[8] calldata _proof)\r\n                                              ^------------------------^\r\n\r\nflat/Franklin.sol:1026:9: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n        address _genesisAccAddress,\r\n        ^------------------------^\r\n\r\nflat/Franklin.sol:1527:47: Warning: Unused function parameter. Remove or comment out the variable name to silence this warning.\r\n    function verifyBlock(uint32 _blockNumber, uint256[8] calldata _proof)\r\n                                              ^------------------------^\r\n\r\nGOVERNANCE_ADDR=0x5E6D086F5eC079ADFF4FB3774CDf3e8D6a34F7E9\r\nPRIORITY_QUEUE_ADDR=0x572b9410D9a14Fa729F3af92cB83A07aaA472dE0\r\nVERIFIER_ADDR=0xc56E79CAA94C96DE01eF36560ac215cC7A4F0F47\r\nCONTRACT_ADDR=0x70a0F165d6f8054d0d0CF8dFd4DD2005f0AF6B55\r\nTEST_ERC20=0x54FCb2405EE4f574C4F09333d25c401E68aD3408\r\nDone in 36.77s.\r\nCONTRACT_ADDR=0x70a0F165d6f8054d0d0CF8dFd4DD2005f0AF6B55\r\npsql: FATAL:  database \"plasma\" does not exist\r\nMakefile:45: recipe for target 'db-insert-contract' failed\r\nmake: *** [db-insert-contract] Error 1\r\n```\r\n\r\nRegards!",
  "closed_by": {
    "login": "DefiCake",
    "id": 46090742,
    "node_id": "MDQ6VXNlcjQ2MDkwNzQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/46090742?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DefiCake",
    "html_url": "https://github.com/DefiCake",
    "followers_url": "https://api.github.com/users/DefiCake/followers",
    "following_url": "https://api.github.com/users/DefiCake/following{/other_user}",
    "gists_url": "https://api.github.com/users/DefiCake/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DefiCake/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DefiCake/subscriptions",
    "organizations_url": "https://api.github.com/users/DefiCake/orgs",
    "repos_url": "https://api.github.com/users/DefiCake/repos",
    "events_url": "https://api.github.com/users/DefiCake/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DefiCake/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/222/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/matter-labs/zksync/issues/222/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/581125612",
    "html_url": "https://github.com/matter-labs/zksync/issues/222#issuecomment-581125612",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/222",
    "id": 581125612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTEyNTYxMg==",
    "user": {
      "login": "furkhat",
      "id": 4961905,
      "node_id": "MDQ6VXNlcjQ5NjE5MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4961905?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furkhat",
      "html_url": "https://github.com/furkhat",
      "followers_url": "https://api.github.com/users/furkhat/followers",
      "following_url": "https://api.github.com/users/furkhat/following{/other_user}",
      "gists_url": "https://api.github.com/users/furkhat/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/furkhat/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/furkhat/subscriptions",
      "organizations_url": "https://api.github.com/users/furkhat/orgs",
      "repos_url": "https://api.github.com/users/furkhat/repos",
      "events_url": "https://api.github.com/users/furkhat/events{/privacy}",
      "received_events_url": "https://api.github.com/users/furkhat/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-02T11:22:26Z",
    "updated_at": "2020-02-02T11:22:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi,\r\n> psql: FATAL:  database \"plasma\" does not exist\r\n\r\nThis means database is not created. You probably forgot to do `zksync init`. That is required initial step to configure environment.\r\n\r\nI just tested setup institutions on latest master from clean clone of the repo, seems to be no problem. Let me know if you have more questions otherwise feel free to close the issue!\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/581125612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/581134507",
    "html_url": "https://github.com/matter-labs/zksync/issues/222#issuecomment-581134507",
    "issue_url": "https://api.github.com/repos/matter-labs/zksync/issues/222",
    "id": 581134507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTEzNDUwNw==",
    "user": {
      "login": "DefiCake",
      "id": 46090742,
      "node_id": "MDQ6VXNlcjQ2MDkwNzQy",
      "avatar_url": "https://avatars.githubusercontent.com/u/46090742?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DefiCake",
      "html_url": "https://github.com/DefiCake",
      "followers_url": "https://api.github.com/users/DefiCake/followers",
      "following_url": "https://api.github.com/users/DefiCake/following{/other_user}",
      "gists_url": "https://api.github.com/users/DefiCake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DefiCake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DefiCake/subscriptions",
      "organizations_url": "https://api.github.com/users/DefiCake/orgs",
      "repos_url": "https://api.github.com/users/DefiCake/repos",
      "events_url": "https://api.github.com/users/DefiCake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DefiCake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-02T13:15:37Z",
    "updated_at": "2020-02-02T13:15:55Z",
    "author_association": "NONE",
    "body": "Hi @furkhat , thanks, you are right. I was actually running `zksync init`, but this was the message I was getting:\r\n\r\n```\r\nChecking environment\r\nNode version 10 is supported\r\n```\r\n\r\nTo make something useful out of this, I 'd request to be more explicit about these messages and change it to `Unsupported version of node detected, please use version 10` or something along the line. I was reading the current ones just as regular debug, not errors, so I went ahead with the rest. I think it would be also helpful to specify the node version in https://github.com/matter-labs/zksync/blob/master/docs/setup-dev.md .\r\n\r\nI will close the issue. Thank you again! :)",
    "reactions": {
      "url": "https://api.github.com/repos/matter-labs/zksync/issues/comments/581134507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

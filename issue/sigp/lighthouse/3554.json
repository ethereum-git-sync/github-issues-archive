{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3554",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3554/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3554/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3554/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3554",
  "id": 1365298796,
  "node_id": "I_kwDOCFeAzc5RYM5s",
  "number": 3554,
  "title": "Error updating deposit contract cache: BadTransaction WrongNonce",
  "user": {
    "login": "chaseadam",
    "id": 333031,
    "node_id": "MDQ6VXNlcjMzMzAzMQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/333031?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chaseadam",
    "html_url": "https://github.com/chaseadam",
    "followers_url": "https://api.github.com/users/chaseadam/followers",
    "following_url": "https://api.github.com/users/chaseadam/following{/other_user}",
    "gists_url": "https://api.github.com/users/chaseadam/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chaseadam/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chaseadam/subscriptions",
    "organizations_url": "https://api.github.com/users/chaseadam/orgs",
    "repos_url": "https://api.github.com/users/chaseadam/repos",
    "events_url": "https://api.github.com/users/chaseadam/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chaseadam/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-07T23:17:40Z",
  "updated_at": "2022-09-14T00:09:48Z",
  "closed_at": "2022-09-14T00:09:48Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSyncing fresh prater beacon using Goerli Akula execution node. Get the following error after Akula is synced:\r\n\r\n```\r\nSep 07 23:06:54.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier   Sep 07 23:06:59.671 ERRO Error updating deposit contract cache   error: Failed to update deposit cache: \"All fallbacks errored: http://\r\n127.0.0.1:8552/, auth=true => GetDepositLogsFailed(\\\"eth_getLogs call failed ServerMessage { code: -32000, message: \\\\\\\"BadTransaction \r\n{ index: 0, error: WrongNonce { account: 0x45b224f0cd64ed5179502da42ed4e32228485b3b, expected: 539662, got: 89626 } }\\\\\\\" }\\\")\", retry_millis: 60000, service: deposit_contract_rpc\r\n```\r\n\r\nThis may be a bad sync or an Akula problem. I am syncing another fresh instance of Akula to see if I can reproduce.\r\n\r\n## Version\r\n\r\nCommit 18c61a5e8be3e54226a86a69b96f8f4f7fd790e4 container build with `podman` running in rootless `podman` container\r\n\r\n## Present Behaviour\r\n\r\nSynced fresh prater node\r\nSynced fresh Goerli Akula node\r\nLighthouse WrongNonce error\r\n\r\n## Expected Behaviour\r\n\r\nExpect success of \"Syncing deposit contract block cache\" stage.\r\n\r\n## Steps to resolve\r\n\r\nUnknown at this time\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3554/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3554/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1240315801",
    "html_url": "https://github.com/sigp/lighthouse/issues/3554#issuecomment-1240315801",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3554",
    "id": 1240315801,
    "node_id": "IC_kwDOCFeAzc5J7beZ",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-08T07:09:37Z",
    "updated_at": "2022-09-08T07:09:37Z",
    "author_association": "MEMBER",
    "body": "I suspect this is an issue on Akula's side, as far as I know we've never seen this error from any other execution client. If you want to check whether it resolved itself after Akula synced some more you could try purging Lighthouse's view of Akula's logs using `--eth1-purge-cache` as an argument to `lighthouse bn`.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1240315801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1246074984",
    "html_url": "https://github.com/sigp/lighthouse/issues/3554#issuecomment-1246074984",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3554",
    "id": 1246074984,
    "node_id": "IC_kwDOCFeAzc5KRZho",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-14T00:09:48Z",
    "updated_at": "2022-09-14T00:09:48Z",
    "author_association": "MEMBER",
    "body": "I'll close this assuming this is an Akula bug. Feel free to re-open if new info emerges to suggest otherwise",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1246074984/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

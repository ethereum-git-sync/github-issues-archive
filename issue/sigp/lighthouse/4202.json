{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4202",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4202/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4202/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4202/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4202",
  "id": 1671379437,
  "node_id": "I_kwDOCFeAzc5jnznt",
  "number": 4202,
  "title": "Forget to update lighthouse before hard-fork",
  "user": {
    "login": "ethers-master",
    "id": 84904123,
    "node_id": "MDQ6VXNlcjg0OTA0MTIz",
    "avatar_url": "https://avatars.githubusercontent.com/u/84904123?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ethers-master",
    "html_url": "https://github.com/ethers-master",
    "followers_url": "https://api.github.com/users/ethers-master/followers",
    "following_url": "https://api.github.com/users/ethers-master/following{/other_user}",
    "gists_url": "https://api.github.com/users/ethers-master/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ethers-master/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ethers-master/subscriptions",
    "organizations_url": "https://api.github.com/users/ethers-master/orgs",
    "repos_url": "https://api.github.com/users/ethers-master/repos",
    "events_url": "https://api.github.com/users/ethers-master/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ethers-master/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-04-17T14:56:20Z",
  "updated_at": "2023-04-17T17:39:11Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI forget to update lighthouse before hard-fork, so now I try to update lighthouse and purge-db with --checkpoint-sync-url, but I see it display very much error and warnings. Please help.\r\n\r\nMy lighthouse script: \r\n```\r\n\r\n/usr/local/bin/lighthouse beacon_node --datadir /home/ethfullnode/lighthouse/beacon-node --http --eth1-endpoints http://127.0.0.1:8545 -\r\n-execution-endpoint http://localhost:8551 --execution-jwt /home/ethfullnode/eth/jwtsecret --metrics --checkpoint-sync-url https://mainnet-checkpoint-sync.stakely.io --purge-db\r\n\r\n```\r\nLighthouse error logs:\r\n\r\n```\r\nApr 17 16:47:04 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:04.699 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:47:04 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:04.699 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\nApr 17 16:47:05 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:05.001 INFO Syncing                                 est_time: --, distance: 65 slots (13 mins), peers: 78, service: slot_notifier\r\nApr 17 16:47:05 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:05.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nApr 17 16:47:12 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:12.185 WARN Execution endpoint is not synced        last_seen_block_unix_timestamp: 1681331507, endpoint: http://localhost:8551/, auth=true, service: deposit_contract_rpc\r\nApr 17 16:47:12 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:12.185 ERRO Error updating deposit contract cache   error: Failed to get remote head and new block ranges: EndpointError(FarBehind), retry_millis: 60000, service: deposit_contract_rpc\r\nApr 17 16:47:15 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:15.299 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:47:15 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:15.299 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\nApr 17 16:47:17 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:17.001 INFO Syncing                                 est_time: --, distance: 66 slots (13 mins), peers: 77, service: slot_notifier\r\nApr 17 16:47:17 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:17.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nApr 17 16:47:19 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:19.743 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:47:19 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:19.743 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\nApr 17 16:47:29 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:29.001 INFO Syncing                                 est_time: --, distance: 67 slots (13 mins), peers: 78, service: slot_notifier\r\nApr 17 16:47:29 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:29.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nApr 17 16:47:33 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:33.847 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:47:33 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:33.847 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\nApr 17 16:47:41 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:41.001 INFO Syncing                                 est_time: --, distance: 68 slots (13 mins), peers: 78, service: slot_notifier\r\nApr 17 16:47:41 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:41.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nApr 17 16:47:41 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:41.350 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:47:41 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:41.350 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\nApr 17 16:47:48 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:48.718 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:47:48 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:48.718 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\nApr 17 16:47:53 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:53.001 INFO Syncing                                 est_time: --, distance: 69 slots (13 mins), peers: 77, service: slot_notifier\r\nApr 17 16:47:53 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:47:53.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nApr 17 16:48:00 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:48:00.432 WARN Execution engine call failed            error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }), service: exec\r\nApr 17 16:48:00 Ubuntu-2004-focal-64-minimal-hwe lighthouse[684739]: Apr 17 14:48:00.432 WARN Error whilst processing payload status  error: Api { error: Reqwest(reqwest::Error { kind: Request, url: Url { scheme: \"http\", cannot_be_a_base: false, username: \"\", password: None, host: Some(Domain(\"localhost\")), port: Some(8551), path: \"/\", query: None, fragment: None }, source: TimedOut }) }, service: exec\r\n```\r\n\r\nGeth node display warning:\r\n\r\n`Beacon client online, but no consensus updates received in a while. Please fix your beacon client to follow the chain!\r\n`\r\n## Version\r\n\r\nPlease provide your Lighthouse and Rust version. Are you building from\r\n`stable` or `unstable`, which commit?\r\n\r\nLighthouse version\r\n\r\n```\r\nLighthouse v4.0.1-a53830f\r\nBLS library: blst\r\nSHA256 hardware acceleration: true\r\nAllocator: jemalloc\r\nSpecs: mainnet (true), minimal (false), gnosis (false)\r\n```\r\n\r\nGETH version\r\n\r\n`geth version 1.11.5-stable-a38f4108`\r\n\r\nGeth still syncing\r\n```\r\n\r\n> eth.blockNumber\r\n17038218\r\n```\r\n\r\n\r\nI don't know what the error is with lighthouse start script, please help me check.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4202/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4202/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1511804637",
    "html_url": "https://github.com/sigp/lighthouse/issues/4202#issuecomment-1511804637",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4202",
    "id": 1511804637,
    "node_id": "IC_kwDOCFeAzc5aHE7d",
    "user": {
      "login": "pawanjay176",
      "id": 9890508,
      "node_id": "MDQ6VXNlcjk4OTA1MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9890508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pawanjay176",
      "html_url": "https://github.com/pawanjay176",
      "followers_url": "https://api.github.com/users/pawanjay176/followers",
      "following_url": "https://api.github.com/users/pawanjay176/following{/other_user}",
      "gists_url": "https://api.github.com/users/pawanjay176/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pawanjay176/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pawanjay176/subscriptions",
      "organizations_url": "https://api.github.com/users/pawanjay176/orgs",
      "repos_url": "https://api.github.com/users/pawanjay176/repos",
      "events_url": "https://api.github.com/users/pawanjay176/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pawanjay176/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T17:39:10Z",
    "updated_at": "2023-04-17T17:39:10Z",
    "author_association": "MEMBER",
    "body": "Please use the latest lighthouse patch fix release https://github.com/sigp/lighthouse/releases/tag/v4.0.2-rc.0\r\n\r\nRestart both geth and lighthouse, not sure if you have tried this, but this should get you on the right chain. If this does not work, then please let me know, you might have to manually rewind geth to a pre capella block.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1511804637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

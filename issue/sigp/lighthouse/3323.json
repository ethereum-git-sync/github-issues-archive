{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3323",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3323",
  "id": 1300403046,
  "node_id": "I_kwDOCFeAzc5NgpNm",
  "number": 3323,
  "title": "SSE subscription issue for head events",
  "user": {
    "login": "metachris",
    "id": 116939,
    "node_id": "MDQ6VXNlcjExNjkzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/metachris",
    "html_url": "https://github.com/metachris",
    "followers_url": "https://api.github.com/users/metachris/followers",
    "following_url": "https://api.github.com/users/metachris/following{/other_user}",
    "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
    "organizations_url": "https://api.github.com/users/metachris/orgs",
    "repos_url": "https://api.github.com/users/metachris/repos",
    "events_url": "https://api.github.com/users/metachris/events{/privacy}",
    "received_events_url": "https://api.github.com/users/metachris/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-07-11T08:50:28Z",
  "updated_at": "2022-07-11T12:07:32Z",
  "closed_at": "2022-07-11T10:27:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI'm doing a SSE subscription on the `head` event, and all 5-10 events it's getting a colon, which is invald:\r\n\r\nsubscribing like this:\r\n\r\n```\r\ncurl localhost:5052/eth/v1/events?topics=head\r\n```\r\n\r\noutput:\r\n```\r\nevent:head\r\ndata:{\"slot\":\"876797\",\"block\":\"0x8a43b69b4c7a141f7bec563809cda35b85deaf15f1faafe3dc224dafcc02ef01\",\"state\":\"0xe8d7e7a9367149a700ec2b0b405f5f1137d18c2ea15256358640d04ba1c72d3b\",\"current_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"previous_duty_dependent_root\":\"0x4b7bbda923a69778bb111cb7d58a4c170a061e1f372ffffbe8bc8d5461562b6e\",\"epoch_transition\":false}\r\n\r\n:\r\n\r\nevent:head\r\ndata:{\"slot\":\"876799\",\"block\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"state\":\"0xdc369c3b6885e232b77b249b95969f1268dc04e324a773fe1f771564c0805809\",\"current_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"previous_duty_dependent_root\":\"0x4b7bbda923a69778bb111cb7d58a4c170a061e1f372ffffbe8bc8d5461562b6e\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876800\",\"block\":\"0x43c474dd99ed5364fd1e94280dbeba4572f74f035b23b93e5106492f4b1a278b\",\"state\":\"0xf77d31226a03bc1d44b976cbfb79dc0a8ed2864c188d3055d463791a3b1dfceb\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":true}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876801\",\"block\":\"0xf4e7fa7263da788175b92d5057e6eaa3ca93f673d8b904f67ccfebcfbb215764\",\"state\":\"0xfcebffc0da8168c4fffac69c4de22265f6468eaed0a0bfa2329df02f2e087fa6\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876802\",\"block\":\"0xa1b9a01c8883646bf35575bf5ee9f58b037de778c582b9be0984d2a24db1996a\",\"state\":\"0x697f24fbc523182217a8d2b0b06e05694c0e3c5750c75ac8d71430edb4c03b3c\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876803\",\"block\":\"0x586408138e1ef37195106f3c02058d699e0e4b9214dfc8b685c2bdafe1e5b324\",\"state\":\"0x2e2b4b8edce78d80d4befe1369611d62fdb2a33894af749c078f08243430bfa0\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876804\",\"block\":\"0x981371d1596747bbd29149e39b37950cf090a9b3aa806053ee5565d13975d1fc\",\"state\":\"0xd54c6c0a38f2d6431c84e60a6a7888586d6824a2a909fbfee811da24dfe42634\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876805\",\"block\":\"0x3b05d42df4d389d67ad81e3a72595da990ca5de49cb427ec66243c4167d681ee\",\"state\":\"0xc3c0f6175cfa6f3d82bf2c429fc816e57c7af1be470740753065b93ff67dfc29\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876806\",\"block\":\"0x898912ba64f5ae72d6607cbf9ad917ecf6225bef9f6d2dc75bb74a37d20d704a\",\"state\":\"0x706be149c0b30be029100b1d8635472b1821f186aefc639d1b6381311b3a6455\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876807\",\"block\":\"0x6e001868bdb6a87f0c4c240e08b4bd0248a3f75d2bba6b115bcaa782760c5748\",\"state\":\"0x29a8a04422bbe887e556d6c6e8417c32cd4f9f3a2f1ebee3d7ab55cec125851e\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876808\",\"block\":\"0x6a12d25bdfc1f13521516a6b5d935ba83dcfb31ee47129e0e4d9241587ab00b4\",\"state\":\"0x5f524d93486744386175da1640641076e359de1f5afe41633eb4b4e3b8110104\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\n:\r\n\r\nevent:head\r\ndata:{\"slot\":\"876810\",\"block\":\"0x0da4142e08b0fb8a80d8f159b756f2d4c74c338346bc5d312fb00265bc63200d\",\"state\":\"0x10158a8fbf62ae563934cf921bcdfcc07231bda0c9015342d38b2158fbe48bad\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\nevent:head\r\ndata:{\"slot\":\"876811\",\"block\":\"0x5c6015bc3aff6f0e8a5d0cb83ec3a5123c46216ef77131e5a710d49b54721468\",\"state\":\"0x89235e81c298944920f6edb7d1edf2e1a9d98166fdcdc8f86914bef2deea1d24\",\"current_duty_dependent_root\":\"0xbb3103040fbf26a6048b973e2418c1c0a89439e61cd2aedb731a046702515aa5\",\"previous_duty_dependent_root\":\"0x3ea56429cf2e3f29b208c883daf65daec15d85ffea0b053cde388b707990c256\",\"epoch_transition\":false}\r\n\r\n:\r\n```\r\n\r\n## Version\r\n\r\nPlease provide your Lighthouse and Rust version. Are you building from\r\n`stable` or `unstable`, which commit?\r\n\r\nfff4dd631\r\n\r\n## Present Behaviour\r\n\r\nReceiving invalid lines with colon\r\n\r\n## Expected Behaviour\r\n\r\nNot receiving any lines with colon\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3323/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1180224219",
    "html_url": "https://github.com/sigp/lighthouse/issues/3323#issuecomment-1180224219",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323",
    "id": 1180224219,
    "node_id": "IC_kwDOCFeAzc5GWMrb",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T10:25:09Z",
    "updated_at": "2022-07-11T10:25:09Z",
    "author_association": "MEMBER",
    "body": "The `:` characters signal the start of a comment per the SSE spec, and are explicitly allowed by the beacon-APIs spec. Please see https://github.com/sigp/lighthouse/issues/2681 for the previous discussion",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1180224219/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1180322655",
    "html_url": "https://github.com/sigp/lighthouse/issues/3323#issuecomment-1180322655",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323",
    "id": 1180322655,
    "node_id": "IC_kwDOCFeAzc5GWktf",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T12:00:29Z",
    "updated_at": "2022-07-11T12:00:29Z",
    "author_association": "NONE",
    "body": "Thanks for the context! Missed the previous conversation and just noticed that https://github.com/r3labs/sse reports an error",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1180322655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1180329318",
    "html_url": "https://github.com/sigp/lighthouse/issues/3323#issuecomment-1180329318",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3323",
    "id": 1180329318,
    "node_id": "IC_kwDOCFeAzc5GWmVm",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T12:07:32Z",
    "updated_at": "2022-07-11T12:07:32Z",
    "author_association": "MEMBER",
    "body": "No prob! Hopefully the issue with `r3labs/sse` is straightforward to fix :pray:",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1180329318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

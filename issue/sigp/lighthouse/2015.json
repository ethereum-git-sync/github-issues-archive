{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2015",
  "id": 753271744,
  "node_id": "MDU6SXNzdWU3NTMyNzE3NDQ=",
  "number": 2015,
  "title": "Restart after power outage throws validator into a boot-up loop due to existing lock file.",
  "user": {
    "login": "judasbenhur",
    "id": 9494330,
    "node_id": "MDQ6VXNlcjk0OTQzMzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9494330?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/judasbenhur",
    "html_url": "https://github.com/judasbenhur",
    "followers_url": "https://api.github.com/users/judasbenhur/followers",
    "following_url": "https://api.github.com/users/judasbenhur/following{/other_user}",
    "gists_url": "https://api.github.com/users/judasbenhur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/judasbenhur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/judasbenhur/subscriptions",
    "organizations_url": "https://api.github.com/users/judasbenhur/orgs",
    "repos_url": "https://api.github.com/users/judasbenhur/repos",
    "events_url": "https://api.github.com/users/judasbenhur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/judasbenhur/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-11-30T08:33:18Z",
  "updated_at": "2020-11-30T09:35:25Z",
  "closed_at": "2020-11-30T08:52:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI just had a short power outage. After power was back the beacon node runs normally while validator client gets stuck in a init loop with the following log:\r\n\r\n```\r\nNov 30 08:26:37 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:37.445 INFO Lighthouse started                      version: Lighthouse/v1.0.0-c6baa0e\r\nNov 30 08:26:37 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:37.445 INFO Configured for testnet                  name: mainnet\r\nNov 30 08:26:37 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:37.445 WARN The mainnet specification is being used. This not recommended (yet).\r\nNov 30 08:26:37 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:37.449 INFO Starting validator client               validator_dir: \"/var/lib/lighthouse/validators\", beacon_node: http://localhost:5052/\r\nNov 30 08:26:37 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:37.452 INFO Completed validator discovery           new_validators: 0\r\nNov 30 08:26:39 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:39.170 ERRO Failed to initialize validator          validator: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx, error: LockfileExists(\"/var/lib/lighthouse/validators/xxxxxxxxxxxxxxxxxxxxxxx/keystore-m_12381_3600_0_0_0-1606216636.json.lock\")\r\nNov 30 08:26:39 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:39.170 CRIT Failed to start validator client        reason: Unable to initialize validators: LockfileExists(\"/var/lib/lighthouse/validators/xxxxxxxxxxxxxxxxxxxxxx/keystore-m_12381_3600_0_0_0-1606216636.json.lock\")\r\nNov 30 08:26:39 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:39.170 INFO Internal shutdown received              reason: Failed to start validator client\r\nNov 30 08:26:39 ethnode-135d9bfbd lighthouse[4671]: Nov 30 08:26:39.170 INFO Shutting down..\r\nNov 30 08:26:39 ethnode-135d9bfbd systemd[1]: lighthouse-validator.service: Succeeded.\r\nNov 30 08:26:44 ethnode-135d9bfbd systemd[1]: lighthouse-validator.service: Scheduled restart job, restart counter is at 139.\r\n\r\n```\r\n\r\n## Version\r\n\r\nv1.0.0-c6baa0e\r\n\r\n## Present Behaviour\r\n\r\nValidator client gets stuck in an infinite loop trying to initialize.\r\n\r\n## Expected Behaviour\r\n\r\nThere should be an automatic way handle lockfiles when the system didn't shut down gracefully. From power outage or other issues.\r\n\r\n## Steps to resolve\r\n\r\nManually removing the lockfile?\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2015/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735639801",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735639801",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735639801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTYzOTgwMQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T08:36:32Z",
    "updated_at": "2020-11-30T08:36:32Z",
    "author_association": "MEMBER",
    "body": "Use the command `lighthouse vc --delete-lockfiles` to resolve this",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735639801/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735641162",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735641162",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735641162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTY0MTE2Mg==",
    "user": {
      "login": "judasbenhur",
      "id": 9494330,
      "node_id": "MDQ6VXNlcjk0OTQzMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9494330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/judasbenhur",
      "html_url": "https://github.com/judasbenhur",
      "followers_url": "https://api.github.com/users/judasbenhur/followers",
      "following_url": "https://api.github.com/users/judasbenhur/following{/other_user}",
      "gists_url": "https://api.github.com/users/judasbenhur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/judasbenhur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/judasbenhur/subscriptions",
      "organizations_url": "https://api.github.com/users/judasbenhur/orgs",
      "repos_url": "https://api.github.com/users/judasbenhur/repos",
      "events_url": "https://api.github.com/users/judasbenhur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/judasbenhur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T08:39:39Z",
    "updated_at": "2020-11-30T08:39:39Z",
    "author_association": "NONE",
    "body": "thanks for the fast response. Is this something I can keep in the boot config for better unattended stability or is this not recommended?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735641162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735643887",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735643887",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735643887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTY0Mzg4Nw==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T08:45:22Z",
    "updated_at": "2020-11-30T08:45:22Z",
    "author_association": "MEMBER",
    "body": "It's not recommended. The lockfiles exist to prevent multiple validators running at once which can cause slashable offenses. \r\n\r\nWe have these here to protect your validators from being slashed. You can add it to your start up scripts but you may slash your validators if you accidentally run the application twice or have two instances running.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735643887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735647167",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735647167",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735647167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTY0NzE2Nw==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T08:51:54Z",
    "updated_at": "2020-11-30T08:52:22Z",
    "author_association": "MEMBER",
    "body": "Upgrading to v1.0.2 will fix this entirely. Lockfiles are (safely) no longer respected across power outages or sudden crashes",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735647167/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735647981",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735647981",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735647981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTY0Nzk4MQ==",
    "user": {
      "login": "judasbenhur",
      "id": 9494330,
      "node_id": "MDQ6VXNlcjk0OTQzMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9494330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/judasbenhur",
      "html_url": "https://github.com/judasbenhur",
      "followers_url": "https://api.github.com/users/judasbenhur/followers",
      "following_url": "https://api.github.com/users/judasbenhur/following{/other_user}",
      "gists_url": "https://api.github.com/users/judasbenhur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/judasbenhur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/judasbenhur/subscriptions",
      "organizations_url": "https://api.github.com/users/judasbenhur/orgs",
      "repos_url": "https://api.github.com/users/judasbenhur/repos",
      "events_url": "https://api.github.com/users/judasbenhur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/judasbenhur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T08:53:28Z",
    "updated_at": "2020-11-30T08:53:28Z",
    "author_association": "NONE",
    "body": "ok got it. So treat it as a manual process until future fix. Thanks everyone.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735647981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735649373",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735649373",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735649373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTY0OTM3Mw==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T08:56:11Z",
    "updated_at": "2020-11-30T08:56:11Z",
    "author_association": "MEMBER",
    "body": "v1.0.2 is already released, you can download it here: https://github.com/sigp/lighthouse/releases/tag/v1.0.2\n\nThe lock file thing was fixed in v1.0.1 too",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735649373/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735670102",
    "html_url": "https://github.com/sigp/lighthouse/issues/2015#issuecomment-735670102",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2015",
    "id": 735670102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTY3MDEwMg==",
    "user": {
      "login": "judasbenhur",
      "id": 9494330,
      "node_id": "MDQ6VXNlcjk0OTQzMzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9494330?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/judasbenhur",
      "html_url": "https://github.com/judasbenhur",
      "followers_url": "https://api.github.com/users/judasbenhur/followers",
      "following_url": "https://api.github.com/users/judasbenhur/following{/other_user}",
      "gists_url": "https://api.github.com/users/judasbenhur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/judasbenhur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/judasbenhur/subscriptions",
      "organizations_url": "https://api.github.com/users/judasbenhur/orgs",
      "repos_url": "https://api.github.com/users/judasbenhur/repos",
      "events_url": "https://api.github.com/users/judasbenhur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/judasbenhur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T09:35:17Z",
    "updated_at": "2020-11-30T09:35:25Z",
    "author_association": "NONE",
    "body": "Thank you Michael!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735670102/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

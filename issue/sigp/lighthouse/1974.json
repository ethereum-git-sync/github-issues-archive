{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1974",
  "id": 750925967,
  "node_id": "MDU6SXNzdWU3NTA5MjU5Njc=",
  "number": 1974,
  "title": "1.0.0: \"Address updated\" notification with bogus port",
  "user": {
    "login": "SjonHortensius",
    "id": 1684987,
    "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SjonHortensius",
    "html_url": "https://github.com/SjonHortensius",
    "followers_url": "https://api.github.com/users/SjonHortensius/followers",
    "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
    "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
    "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
    "repos_url": "https://api.github.com/users/SjonHortensius/repos",
    "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-11-25T15:43:42Z",
  "updated_at": "2020-11-27T08:02:13Z",
  "closed_at": "2020-11-27T08:02:12Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\n`lighthouse beacon_node` logs two \"Address updated\" entries, of which the second one seems bogus/random\r\n\r\nThis happens every time the \"Address updated\" message is printed. Funnily enough it used to print `1813`. I'm not sure what triggers the printing at all, the output is constant.\r\n\r\n## Version\r\n\r\nBuild from `v1.0.0`\r\n\r\n## Present Behaviour\r\n\r\n```\r\nINFO Address updated                         udp_port: 9000, ip: ***, service: libp2p\r\nINFO Address updated                         udp_port: 1814, ip: ***, service: libp2p\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nOnly a single line printed\r\n\r\n## Steps to resolve\r\n\r\nNone\r\n",
  "closed_by": {
    "login": "SjonHortensius",
    "id": 1684987,
    "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SjonHortensius",
    "html_url": "https://github.com/SjonHortensius",
    "followers_url": "https://api.github.com/users/SjonHortensius/followers",
    "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
    "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
    "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
    "repos_url": "https://api.github.com/users/SjonHortensius/repos",
    "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1974/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734008311",
    "html_url": "https://github.com/sigp/lighthouse/issues/1974#issuecomment-734008311",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
    "id": 734008311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDAwODMxMQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T00:36:40Z",
    "updated_at": "2020-11-26T00:36:40Z",
    "author_association": "MEMBER",
    "body": "This is not much to worry about and seems to happen on a few routers. \r\n\r\nIt means that outbound your router is sending packets with an external port 1814 and well as 9000. Your canonical address is chosen via a majority of peers who witness your outbound packets. \r\n\r\nThis indicates half of your packets are sent outbound on 1814 and half on 9000 and the majority is oscillating.\r\n\r\nI'll look further into either suppressing the warnings or adjusting the majority calculation to favour the 9000 port. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734008311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734011810",
    "html_url": "https://github.com/sigp/lighthouse/issues/1974#issuecomment-734011810",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
    "id": 734011810,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDAxMTgxMA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T00:50:21Z",
    "updated_at": "2020-11-26T00:59:18Z",
    "author_association": "MEMBER",
    "body": "Could you also provide further information about current UPnP set up? I.e in your router does it have established routes or specific port forwards?\r\n\r\nPotentially this may occur if there are multiple port forwards for a single host. \r\n\r\nAlso could you elaborate on your set up.  Are you using a local home router or using a cloud service? Do you have any NAT configuration in the router at the moment?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734011810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734145073",
    "html_url": "https://github.com/sigp/lighthouse/issues/1974#issuecomment-734145073",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
    "id": 734145073,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDE0NTA3Mw==",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T08:14:59Z",
    "updated_at": "2020-11-26T08:14:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AgeManning thanks for your reply. I'm not worried but I do like to investigate where this originates.\r\n\r\nAs I prefer to punch the holes in my firewall myself, I have UPnP disabled and port 9000 has been manually mapped.\r\nThis is a local setup with a NAT router and a manual port forward.\r\n\r\nI'd prefer to disable upnp in lighthouse for consistency but couldn't find the cli argument to do so, is this supported?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734145073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734242756",
    "html_url": "https://github.com/sigp/lighthouse/issues/1974#issuecomment-734242756",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
    "id": 734242756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDI0Mjc1Ng==",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T11:25:26Z",
    "updated_at": "2020-11-26T11:25:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "I just noticed something else; in my portmapping I only setup port 9000 for tcp traffic so the other port was \"magically\"? chosen for udp.\r\n\r\nI've reconfigured the forward to apply to both tcp and udp.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734242756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734500526",
    "html_url": "https://github.com/sigp/lighthouse/issues/1974#issuecomment-734500526",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
    "id": 734500526,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDUwMDUyNg==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-26T22:49:40Z",
    "updated_at": "2020-11-26T22:49:40Z",
    "author_association": "MEMBER",
    "body": "Interesting. Let me know if the behaviour persists with the UDP port mapping. I've seen this happen with other users. \r\n\r\nI still find it strange the router would use alternating ports to send outbound UDP traffic. \r\n\r\nYou can use the `--disable-upnp` flag to prevent lighthouse from attempting to use UPnP",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734500526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734700821",
    "html_url": "https://github.com/sigp/lighthouse/issues/1974#issuecomment-734700821",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1974",
    "id": 734700821,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDcwMDgyMQ==",
    "user": {
      "login": "SjonHortensius",
      "id": 1684987,
      "node_id": "MDQ6VXNlcjE2ODQ5ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1684987?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SjonHortensius",
      "html_url": "https://github.com/SjonHortensius",
      "followers_url": "https://api.github.com/users/SjonHortensius/followers",
      "following_url": "https://api.github.com/users/SjonHortensius/following{/other_user}",
      "gists_url": "https://api.github.com/users/SjonHortensius/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SjonHortensius/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SjonHortensius/subscriptions",
      "organizations_url": "https://api.github.com/users/SjonHortensius/orgs",
      "repos_url": "https://api.github.com/users/SjonHortensius/repos",
      "events_url": "https://api.github.com/users/SjonHortensius/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SjonHortensius/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T08:02:12Z",
    "updated_at": "2020-11-27T08:02:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for your help. After updating the portmapping (and coincidentally; updating the firmware of the router) I no longer get any messages and all traffic goes through port 9000 as expected. If I run into this again I'll start with looking at tcpdump and my local setup first - I don't think lighthouse needs to change anything",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/734700821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

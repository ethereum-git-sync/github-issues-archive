{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1500",
  "id": 676234744,
  "node_id": "MDU6SXNzdWU2NzYyMzQ3NDQ=",
  "number": 1500,
  "title": "Missed Attestation despite lighthouse claiming otherwise",
  "user": {
    "login": "vogelito",
    "id": 1325863,
    "node_id": "MDQ6VXNlcjEzMjU4NjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vogelito",
    "html_url": "https://github.com/vogelito",
    "followers_url": "https://api.github.com/users/vogelito/followers",
    "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
    "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
    "organizations_url": "https://api.github.com/users/vogelito/orgs",
    "repos_url": "https://api.github.com/users/vogelito/repos",
    "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vogelito/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-08-10T15:44:04Z",
  "updated_at": "2020-08-11T13:47:54Z",
  "closed_at": "2020-08-11T09:20:34Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nAccording to my lighthouse node, we successfully published our first attestation, but both beaconcha.in and beaconscan claim otherwise.\r\n\r\nThe lighthouse logs say:\r\n```\r\nAug 10 15:16:12 medalla-testnet lighthouse[4836]: Aug 10 15:16:12.084 INFO Successfully published attestations     type: unaggregated, slot: 43880, committee_index: 5, head_block: 0x89ca\r\n```\r\nHowever, [beaconcha.in](https://lighthouse-testnet3.beaconcha.in/validator/88b7135468cc0a04cf0f5653cc63880edb3ea9f21a997d2a4cc7e122db1b0f8689b1eff7202baf04bbc21b505f01af77#attestations) and [beaconscan](https://beaconscan.com/validator/0x88b7135468cc0a04cf0f5653cc63880edb3ea9f21a997d2a4cc7e122db1b0f8689b1eff7202baf04bbc21b505f01af77#attestations) say **did-not-attest** and **missed**, respectively.\r\n\r\n![image](https://user-images.githubusercontent.com/1325863/89833950-89c7c680-db27-11ea-885a-741717634bfb.png)\r\n![image](https://user-images.githubusercontent.com/1325863/89833985-951af200-db27-11ea-8d94-257d09e22ffd.png)\r\n\r\n## Version\r\n\r\n```\r\nether@medalla-testnet:~/lighthouse$ git branch\r\n* master\r\nether@medalla-testnet:~/lighthouse$ git log --oneline | head -1\r\n6206d8e7 Ensure .git is copied into docker (#1462)\r\n```\r\n\r\n## Present Behaviour\r\n\r\nUntil the time of writing, new attestations are working.\r\n\r\n## Expected Behaviour\r\n\r\nI would've expected the first attestation to have worked. New attestations have been working even though we didn't even touch the node.\r\n\r\n## Steps to resolve\r\n\r\nI have no idea. I would love to understand why I got slashed (even if it was a very small amount).\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1500/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671646881",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671646881",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671646881,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTY0Njg4MQ==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-10T23:55:30Z",
    "updated_at": "2020-08-10T23:55:30Z",
    "author_association": "MEMBER",
    "body": "Hey @vogelito, thanks for the report!\r\n\r\nWhat has happened here is that your attestation was signed and published by your node, but then the other nodes on the network failed to include it in a block (which is what the block explorer shows). This could happen for a number of reasons -- it could be that your node didn't have enough peers at the time, and so the attestation didn't make it to one of the (randomly selected) attestation aggregators, or it could have arrived too late, or been dropped by faulty aggregators. We are working hard to improve our attestation inclusion metrics, e.g. in https://github.com/sigp/lighthouse/pull/1415. At the moment it's normal to miss an attestation from time to time, but if you feel like you're missing lots, please let us know!\r\n\r\nIf you're satisfied with that resolution, I'll close this issue",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671646881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671662933",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671662933",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671662933,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTY2MjkzMw==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T00:57:09Z",
    "updated_at": "2020-08-11T00:57:09Z",
    "author_association": "MEMBER",
    "body": "One more thing! You should update Lighthouse to v0.2.2 and keep an eye on the [Discord announcements channel](https://discord.com/channels/605577013327167508/711866597308104745) for important info -- things are moving quickly with improvements landing all the time!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671662933/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671674946",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671674946",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671674946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTY3NDk0Ng==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T01:41:29Z",
    "updated_at": "2020-08-11T01:41:29Z",
    "author_association": "MEMBER",
    "body": "Yep. Missing attestations is a complicated issue which is not isolated to just Lighthouse. \r\n\r\nIn a lighthouse-only network, we see 100% attestation inclusions. There are some more complicated network-dynamics happening involving multiple clients, various interoperability issues and the fact that we have 20,000+ validators all at once trying to be included in every block. \r\n\r\nAll the eth2 client developers are working together to try and get the attestation inclusion rate to 100% on the public testnet, and will likely be continuously improving until mainnet. \r\n\r\nAs @michaelsproul said, the best thing to do is to keep up to date with the improvements we will be continually adding to lighthouse.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671674946/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671811620",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671811620",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671811620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTgxMTYyMA==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T08:35:40Z",
    "updated_at": "2020-08-11T08:35:40Z",
    "author_association": "NONE",
    "body": "Understood, thank you very much.\r\n\r\nWe've missed out on a few attestations in the last 24 hours, but we'll continue to monitor the situation as the updates come.\r\n\r\nI've subscribed to the rss feed at https://github.com/sigp/lighthouse/releases.atom and will keep lighthouse updated as per the releases there.\r\n\r\nQuestion: is there a best practice to upgrade lighthouse? I assume it's something like:\r\n\r\n1. build the new binary\r\n2. shutdown old validator\r\n3. shutdown old beacon\r\n4. start new beacon\r\n5. start new validator\r\n\r\nThanks!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671811620/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671826051",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671826051",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671826051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTgyNjA1MQ==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T09:04:46Z",
    "updated_at": "2020-08-11T09:04:46Z",
    "author_association": "NONE",
    "body": "Now running `Lighthouse/v0.2.2-48fd312/x86_64-linux`",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671826051/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671833592",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671833592",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671833592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTgzMzU5Mg==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T09:20:34Z",
    "updated_at": "2020-08-11T09:20:34Z",
    "author_association": "MEMBER",
    "body": "Yep! That's a pretty good upgrade procedure!\r\n\r\nClosing now, feel free to open another issue or ping us if you run into trouble ☺️ ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671833592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671957605",
    "html_url": "https://github.com/sigp/lighthouse/issues/1500#issuecomment-671957605",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1500",
    "id": 671957605,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MTk1NzYwNQ==",
    "user": {
      "login": "vogelito",
      "id": 1325863,
      "node_id": "MDQ6VXNlcjEzMjU4NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1325863?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vogelito",
      "html_url": "https://github.com/vogelito",
      "followers_url": "https://api.github.com/users/vogelito/followers",
      "following_url": "https://api.github.com/users/vogelito/following{/other_user}",
      "gists_url": "https://api.github.com/users/vogelito/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vogelito/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vogelito/subscriptions",
      "organizations_url": "https://api.github.com/users/vogelito/orgs",
      "repos_url": "https://api.github.com/users/vogelito/repos",
      "events_url": "https://api.github.com/users/vogelito/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vogelito/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T13:47:54Z",
    "updated_at": "2020-08-11T13:47:54Z",
    "author_association": "NONE",
    "body": "Completely circumstantial, but I think my attestation effectiveness is actually down after the upgrade. I was at 96% before and now at 91%. I didn't miss any attestations during the upgrade, but many since.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/671957605/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1782",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1782",
  "id": 723802809,
  "node_id": "MDU6SXNzdWU3MjM4MDI4MDk=",
  "number": 1782,
  "title": "Disk usage accelerates under non-finality",
  "user": {
    "login": "nickoneill",
    "id": 49688,
    "node_id": "MDQ6VXNlcjQ5Njg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/49688?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickoneill",
    "html_url": "https://github.com/nickoneill",
    "followers_url": "https://api.github.com/users/nickoneill/followers",
    "following_url": "https://api.github.com/users/nickoneill/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickoneill/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickoneill/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickoneill/subscriptions",
    "organizations_url": "https://api.github.com/users/nickoneill/orgs",
    "repos_url": "https://api.github.com/users/nickoneill/repos",
    "events_url": "https://api.github.com/users/nickoneill/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickoneill/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-10-17T16:57:45Z",
  "updated_at": "2020-11-09T00:18:21Z",
  "closed_at": "2020-11-09T00:18:21Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSince medalla started having finality issues on October 12th, disk usage for lighthouse has sharply increased.\r\n\r\n## Version\r\n\r\n0.3.0, `rustc 1.46.0 (04488afe3 2020-08-24)`\r\n\r\n## Present Behaviour\r\n\r\nSee the grafana graph for available space on-disk below. Usage is steady until the 12th when it starts to accelerate. This can potentially make non-finality issues worse as nodes that do not anticipate rapidly increasing disk space requirements can be knocked offline, further decreasing participation rates.\r\n\r\n## Expected Behaviour\r\n\r\nDisk usage should not significantly change during periods of non-finality.\r\n\r\n![photo_2020-10-17 09 55 17](https://user-images.githubusercontent.com/49688/96348605-e4692b80-105e-11eb-924b-f19e967ae620.jpeg)\r\n",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1782/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/711090966",
    "html_url": "https://github.com/sigp/lighthouse/issues/1782#issuecomment-711090966",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782",
    "id": 711090966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTA5MDk2Ng==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-17T22:59:17Z",
    "updated_at": "2020-10-17T22:59:17Z",
    "author_association": "MEMBER",
    "body": "There's talk amongst the client teams of adopting a more aggressive pruning strategy to prune even without finality. The logic is that we can prune heads with very few votes, because they are unlikely to be built upon. If someone does try to build upon a pruned head, we can use the existing parent-block-not-found code to resync it",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/711090966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/711425642",
    "html_url": "https://github.com/sigp/lighthouse/issues/1782#issuecomment-711425642",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782",
    "id": 711425642,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTQyNTY0Mg==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-18T21:22:20Z",
    "updated_at": "2020-10-18T21:22:20Z",
    "author_association": "MEMBER",
    "body": "> Disk usage should not significantly change during periods of non-finality.\r\n\r\nI agree we could probably do better, but I suspect disk usage will *always* increase to some degree under finality.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/711425642/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/723688965",
    "html_url": "https://github.com/sigp/lighthouse/issues/1782#issuecomment-723688965",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1782",
    "id": 723688965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzY4ODk2NQ==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-09T00:18:20Z",
    "updated_at": "2020-11-09T00:18:20Z",
    "author_association": "MEMBER",
    "body": "I'm going to close this since \"reducing DB usage\" is a well-known goal and this issue doesn't identify a specific issue that we need to fix. Thank you for raising it and providing detail :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/723688965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4536",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4536/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4536/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4536/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4536",
  "id": 1818729975,
  "node_id": "I_kwDOCFeAzc5sZ533",
  "number": 4536,
  "title": "Failed to run local testnet: No valid eth1_data votes",
  "user": {
    "login": "BastienFaivre",
    "id": 57015770,
    "node_id": "MDQ6VXNlcjU3MDE1Nzcw",
    "avatar_url": "https://avatars.githubusercontent.com/u/57015770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BastienFaivre",
    "html_url": "https://github.com/BastienFaivre",
    "followers_url": "https://api.github.com/users/BastienFaivre/followers",
    "following_url": "https://api.github.com/users/BastienFaivre/following{/other_user}",
    "gists_url": "https://api.github.com/users/BastienFaivre/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BastienFaivre/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BastienFaivre/subscriptions",
    "organizations_url": "https://api.github.com/users/BastienFaivre/orgs",
    "repos_url": "https://api.github.com/users/BastienFaivre/repos",
    "events_url": "https://api.github.com/users/BastienFaivre/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BastienFaivre/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-07-24T16:11:38Z",
  "updated_at": "2023-11-10T04:08:12Z",
  "closed_at": "2023-11-10T04:08:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI'm trying to run the local testnet provided in the repository. Without doing any modifications to the configurations, I executed `./start_local_testnet.sh genesis.json`. Everything seems to work fine except the beacon nodes. Indeed, I still get this error:\r\n```\r\nJul 24 16:01:15.009 ERRO No valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote, genesis_time: 1690214400, earliest_block_timestamp: None, lowest_block_number: None, service: deposit_contract_rpc\r\n```\r\nI read issue #1066 and tried to change the genesis.json timestamp to something more recent, or `0`. I also tried to change the `GENESIS_DELAY` variable. But I still get this error.\r\n\r\n## Version\r\n\r\nI'm using the currently [last stable commit](https://github.com/sigp/lighthouse/tree/dfcb3363c757671eb19d5f8e519b4b94ac74677a)\r\n\r\n## Present Behaviour\r\n\r\nHere is the error in context:\r\n```\r\nJul 24 16:01:10.503 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nJul 24 16:01:10.503 INFO Ready for Capella                       info: ensure the execution endpoint is updated to the latest Capella/Shanghai release, service: slot_notifier\r\nJul 24 16:01:12.003 INFO Prepared beacon proposer                parent_root: 0x05d6e384a17790d9acb921d373e0839f34af0ffd1e6d84676b5486a3a2934445, validator: 75, prepare_slot: 25, service: beacon\r\nJul 24 16:01:12.058 INFO New block received                      root: 0x380c5ff3e7d7756423c4fd1b5fde951874f1d613224ac27811a992c40ebb3662, slot: 24\r\nJul 24 16:01:12.100 INFO Prepared beacon proposer                parent_root: 0x380c5ff3e7d7756423c4fd1b5fde951874f1d613224ac27811a992c40ebb3662, validator: 75, prepare_slot: 25, service: beacon\r\nJul 24 16:01:13.501 INFO Synced                                  slot: 24, block: 0x380c…3662, epoch: 0, finalized_epoch: 0, finalized_root: 0x850f…0a2e, exec_hash: 0x216b…f436 (verified), peers: 3, service: slot_notifier\r\nJul 24 16:01:13.501 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nJul 24 16:01:13.501 INFO Ready for Capella                       info: ensure the execution endpoint is updated to the latest Capella/Shanghai release, service: slot_notifier\r\nJul 24 16:01:15.009 ERRO No valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote, genesis_time: 1690214400, earliest_block_timestamp: None, lowest_block_number: None, service: deposit_contract_rpc\r\nJul 24 16:01:15.046 INFO Signed block published to network via HTTP API, publish_delay: 1.947929ms, slot: 25\r\nJul 24 16:01:15.072 INFO Valid block from HTTP API               slot: 25, proposer_index: 75, root: 0xa494…f166, block_delay: 44.935485ms\r\nJul 24 16:01:16.502 INFO Synced                                  slot: 25, block: 0xa494…f166, epoch: 0, finalized_epoch: 0, finalized_root: 0x850f…0a2e, exec_hash: 0xa47a…6baa (verified), peers: 3, service: slot_notifier\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nNo error\r\n\r\n## Steps to resolve\r\n\r\nGiven a freshly cloned repository, I would like to know what changes should be applied to the actual code to get a fully functional testnet. Also, how do these changes make the testnet work compared to the current state. Thank you in advance for your help\r\n",
  "closed_by": {
    "login": "jimmygchen",
    "id": 742762,
    "node_id": "MDQ6VXNlcjc0Mjc2Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/742762?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimmygchen",
    "html_url": "https://github.com/jimmygchen",
    "followers_url": "https://api.github.com/users/jimmygchen/followers",
    "following_url": "https://api.github.com/users/jimmygchen/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimmygchen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimmygchen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimmygchen/subscriptions",
    "organizations_url": "https://api.github.com/users/jimmygchen/orgs",
    "repos_url": "https://api.github.com/users/jimmygchen/repos",
    "events_url": "https://api.github.com/users/jimmygchen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimmygchen/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4536/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4536/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1738290836",
    "html_url": "https://github.com/sigp/lighthouse/issues/4536#issuecomment-1738290836",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4536",
    "id": 1738290836,
    "node_id": "IC_kwDOCFeAzc5nnDaU",
    "user": {
      "login": "chong-he",
      "id": 44791194,
      "node_id": "MDQ6VXNlcjQ0NzkxMTk0",
      "avatar_url": "https://avatars.githubusercontent.com/u/44791194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chong-he",
      "html_url": "https://github.com/chong-he",
      "followers_url": "https://api.github.com/users/chong-he/followers",
      "following_url": "https://api.github.com/users/chong-he/following{/other_user}",
      "gists_url": "https://api.github.com/users/chong-he/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chong-he/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chong-he/subscriptions",
      "organizations_url": "https://api.github.com/users/chong-he/orgs",
      "repos_url": "https://api.github.com/users/chong-he/repos",
      "events_url": "https://api.github.com/users/chong-he/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chong-he/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-28T00:48:47Z",
    "updated_at": "2023-09-28T00:49:37Z",
    "author_association": "MEMBER",
    "body": "We found that a `ETH1_FOLLOW_DISTANCE` of 1 as defined in `setup.sh` is too low, and revised it to 128. We also revise SECONDS_PER_ETH1_BLOCK and set it to be the same as the consensus layer slot time (3 seconds)\r\n\r\nAfter testing, the error\r\n```\r\nERRO No valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote, genesis_time: 1690214400, earliest_block_timestamp: None, lowest_block_number: None, service: deposit_contract_rpc\r\n```\r\n\r\nwill go away after ~2 hours and the local blockchain is progressing normally. \r\n\r\nThe fix is in #4749, feel free to try it out and let us know how it goes",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1738290836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1805055783",
    "html_url": "https://github.com/sigp/lighthouse/issues/4536#issuecomment-1805055783",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4536",
    "id": 1805055783,
    "node_id": "IC_kwDOCFeAzc5rlvcn",
    "user": {
      "login": "jimmygchen",
      "id": 742762,
      "node_id": "MDQ6VXNlcjc0Mjc2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/742762?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmygchen",
      "html_url": "https://github.com/jimmygchen",
      "followers_url": "https://api.github.com/users/jimmygchen/followers",
      "following_url": "https://api.github.com/users/jimmygchen/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmygchen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmygchen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmygchen/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmygchen/orgs",
      "repos_url": "https://api.github.com/users/jimmygchen/repos",
      "events_url": "https://api.github.com/users/jimmygchen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmygchen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-10T04:08:12Z",
    "updated_at": "2023-11-10T04:08:12Z",
    "author_association": "MEMBER",
    "body": "Fixed in #4749  🎉 ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1805055783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

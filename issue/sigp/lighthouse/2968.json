{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2968",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2968",
  "id": 1116128916,
  "node_id": "I_kwDOCFeAzc5ChsaU",
  "number": 2968,
  "title": "VC - At the end of each epoch, VC should report in the logs the list of validators, and their balances",
  "user": {
    "login": "mrabino1",
    "id": 4902221,
    "node_id": "MDQ6VXNlcjQ5MDIyMjE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4902221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mrabino1",
    "html_url": "https://github.com/mrabino1",
    "followers_url": "https://api.github.com/users/mrabino1/followers",
    "following_url": "https://api.github.com/users/mrabino1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mrabino1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mrabino1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mrabino1/subscriptions",
    "organizations_url": "https://api.github.com/users/mrabino1/orgs",
    "repos_url": "https://api.github.com/users/mrabino1/repos",
    "events_url": "https://api.github.com/users/mrabino1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mrabino1/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 985647284,
      "node_id": "MDU6TGFiZWw5ODU2NDcyODQ=",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/enhancement",
      "name": "enhancement",
      "color": "a2eeef",
      "default": true,
      "description": "New feature or request"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-01-27T12:03:59Z",
  "updated_at": "2022-02-09T08:39:41Z",
  "closed_at": "2022-02-09T08:39:41Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The VC log at the end of epoch should report which are the active validators and the start and end balance during that epoch\r\n",
  "closed_by": {
    "login": "mrabino1",
    "id": 4902221,
    "node_id": "MDQ6VXNlcjQ5MDIyMjE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4902221?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mrabino1",
    "html_url": "https://github.com/mrabino1",
    "followers_url": "https://api.github.com/users/mrabino1/followers",
    "following_url": "https://api.github.com/users/mrabino1/following{/other_user}",
    "gists_url": "https://api.github.com/users/mrabino1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mrabino1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mrabino1/subscriptions",
    "organizations_url": "https://api.github.com/users/mrabino1/orgs",
    "repos_url": "https://api.github.com/users/mrabino1/repos",
    "events_url": "https://api.github.com/users/mrabino1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mrabino1/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2968/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1030952216",
    "html_url": "https://github.com/sigp/lighthouse/issues/2968#issuecomment-1030952216",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968",
    "id": 1030952216,
    "node_id": "IC_kwDOCFeAzc49cxUY",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-07T00:24:44Z",
    "updated_at": "2022-02-07T00:24:44Z",
    "author_association": "MEMBER",
    "body": "If this were implemented, I suggest putting it behind a flag. Otherwise, users with a lot of validators will create large logs, which can be a headache when using an external log ingesting service.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1030952216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1030954971",
    "html_url": "https://github.com/sigp/lighthouse/issues/2968#issuecomment-1030954971",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968",
    "id": 1030954971,
    "node_id": "IC_kwDOCFeAzc49cx_b",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-07T00:31:14Z",
    "updated_at": "2022-02-07T00:31:14Z",
    "author_association": "MEMBER",
    "body": "Oh, the other challenge with this is that the VC doesn't actually know the validator balances. It would need to do a query to the BN to pull the info. That's why we haven't done anything like this in the past.\r\n\r\nI propose that the `--validator-monitor` on the BN is used, if this info is to be printed.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1030954971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1032365478",
    "html_url": "https://github.com/sigp/lighthouse/issues/2968#issuecomment-1032365478",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968",
    "id": 1032365478,
    "node_id": "IC_kwDOCFeAzc49iKWm",
    "user": {
      "login": "mrabino1",
      "id": 4902221,
      "node_id": "MDQ6VXNlcjQ5MDIyMjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4902221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mrabino1",
      "html_url": "https://github.com/mrabino1",
      "followers_url": "https://api.github.com/users/mrabino1/followers",
      "following_url": "https://api.github.com/users/mrabino1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mrabino1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mrabino1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mrabino1/subscriptions",
      "organizations_url": "https://api.github.com/users/mrabino1/orgs",
      "repos_url": "https://api.github.com/users/mrabino1/repos",
      "events_url": "https://api.github.com/users/mrabino1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mrabino1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-08T08:58:38Z",
    "updated_at": "2022-02-08T08:58:38Z",
    "author_association": "NONE",
    "body": "Curious question. I get that the VC has no clue as to the balance, only the BN knows that. However, the BN can run independently (or one might have 3 of them for redundancy). Point being, shouldn't the flag still be at the VC level to know that data in the log even though we know it has to query the BN to get that data? thx.. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1032365478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1033439551",
    "html_url": "https://github.com/sigp/lighthouse/issues/2968#issuecomment-1033439551",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968",
    "id": 1033439551,
    "node_id": "IC_kwDOCFeAzc49mQk_",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-09T07:43:19Z",
    "updated_at": "2022-02-09T07:43:58Z",
    "author_association": "MEMBER",
    "body": "> Point being, shouldn't the flag still be at the VC level to know that data in the log even though we know it has to query the BN to get that data?\r\n\r\nLighthouse has opted to provide information about validators at the BN-level, via the [Validator Monitor](https://lighthouse-book.sigmaprime.io/validator-monitoring.html). It has the advantages of:\r\n\r\n1. Keeps the VC small and simple, since it's holding private keys.\r\n1. The BN has *a lot* more information about the chain, so it's able to report on that quite easily without needing to expose (and standardise) a whole bunch of APIs.\r\n1. It allows for monitoring arbitrary validators, not just ones you have the private keys for. E.g., you can run a completely separate BN that monitors the performance of your VC+BN from a third-party perspective.\r\n\r\nDoes this answer your question @mrabino1?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1033439551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1033496762",
    "html_url": "https://github.com/sigp/lighthouse/issues/2968#issuecomment-1033496762",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2968",
    "id": 1033496762,
    "node_id": "IC_kwDOCFeAzc49mei6",
    "user": {
      "login": "mrabino1",
      "id": 4902221,
      "node_id": "MDQ6VXNlcjQ5MDIyMjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4902221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mrabino1",
      "html_url": "https://github.com/mrabino1",
      "followers_url": "https://api.github.com/users/mrabino1/followers",
      "following_url": "https://api.github.com/users/mrabino1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mrabino1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mrabino1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mrabino1/subscriptions",
      "organizations_url": "https://api.github.com/users/mrabino1/orgs",
      "repos_url": "https://api.github.com/users/mrabino1/repos",
      "events_url": "https://api.github.com/users/mrabino1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mrabino1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-09T08:39:41Z",
    "updated_at": "2022-02-09T08:39:41Z",
    "author_association": "NONE",
    "body": "gotcha.. thank you. \r\n\r\nRE point #1.. as you pointed it out, VC has access to the private keys. What are your thoughts on having it check the permissions of those keys and throw a warning if they are too exposed.. without getting into the weeds here.. but if the unix permissions are XYZ (where X should be 7.. Y could be whatever.. but Z should be 0).. curious your thoughts....\r\n\r\nand I totally get #3... my only objective was to streamline #3 with VC as it knows which validators the operator is using.. but it is easy enough to query the BN from another front on a nightly basis.. appreciated. !",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1033496762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

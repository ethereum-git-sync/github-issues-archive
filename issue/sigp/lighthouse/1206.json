{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1206",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1206/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1206/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1206/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1206",
  "id": 625410188,
  "node_id": "MDU6SXNzdWU2MjU0MTAxODg=",
  "number": 1206,
  "title": "Discovery as a service",
  "user": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2336800125,
      "node_id": "MDU6TGFiZWwyMzM2ODAwMTI1",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/t%20Networking",
      "name": "t Networking",
      "color": "40E0D0",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-05-27T06:15:22Z",
  "updated_at": "2022-10-20T17:09:26Z",
  "closed_at": "2020-06-19T04:20:55Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nIn the early days the discovery behaved as a libp2p behaviour which handled finding new peers and connecting to them. \r\n\r\nWith the upcoming PeerManager which should be running the show and with discv5 being its own standalone service, it makes more sense that discovery behaves as its own task, which has channels two and from the peer manager. This way, requests to discover peers, dial peers and manage subscriptions can all be handled solely by the peer manager, which delegates tasks to the discovery service. \r\n\r\nFurthermore, discovery opens its own udp socket and sends/receives on it and should reside in it's own task anyway. \r\n\r\nThis issue involves a few things. \r\n\r\n1. Updating the `events` that discovery spit out, to be a `DiscoveryEvent`. \r\n2. Shifting the `discovery` behaviour to its own service/task\r\n3. Connecting it to the peer manager and having the peer manager handle all its external APIs. \r\n\r\n#1203 introduces more complex logic around discovering peers and it often has to write to the peer_db. These modifications should be handled by the peer manager also. ",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1206/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1206/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/646426520",
    "html_url": "https://github.com/sigp/lighthouse/issues/1206#issuecomment-646426520",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1206",
    "id": 646426520,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjQyNjUyMA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-19T04:20:55Z",
    "updated_at": "2020-06-19T04:20:55Z",
    "author_association": "MEMBER",
    "body": "Resolved in #1274 ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/646426520/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

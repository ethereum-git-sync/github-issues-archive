{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4788",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4788/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4788/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4788/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4788",
  "id": 1916690278,
  "node_id": "I_kwDOCFeAzc5yPl9m",
  "number": 4788,
  "title": "State reconstruction API doesn't work if genesis backfill hasn't been enabled",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1803692313,
      "node_id": "MDU6TGFiZWwxODAzNjkyMzEz",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/docs",
      "name": "docs",
      "color": "b8ffaa",
      "default": false,
      "description": "Documentation"
    },
    {
      "id": 2336798682,
      "node_id": "MDU6TGFiZWwyMzM2Nzk4Njgy",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/database",
      "name": "database",
      "color": "C01C9D",
      "default": false,
      "description": ""
    },
    {
      "id": 2336800343,
      "node_id": "MDU6TGFiZWwyMzM2ODAwMzQz",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/HTTP-API",
      "name": "HTTP-API",
      "color": "5A63A2",
      "default": false,
      "description": ""
    },
    {
      "id": 2336802021,
      "node_id": "MDU6TGFiZWwyMzM2ODAyMDIx",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/UX-and-logs",
      "name": "UX-and-logs",
      "color": "DB9046",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-09-28T04:44:44Z",
  "updated_at": "2023-09-28T04:45:28Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe `/lighthouse/database/reconstruct` API is currently faulty in the case where the node was started without `--genesis-backfill` or `--reconstruct-historic-states`. The API will only attempt to trigger reconstruction, it won't trigger block backfill.\r\n\r\nThe error logged is:\r\n\r\n> ERRO State reconstruction failed             error: MissingHistoricBlocks { oldest_block_slot: Slot(6225249) }, service: beacon\r\n\r\n## Version\r\n\r\nv4.5.0\r\n\r\n## Present Behaviour\r\n\r\nThe reconstruct API only works if block backfill is enabled & complete.\r\n\r\n## Expected Behaviour\r\n\r\nWe should either:\r\n\r\nA) Make it so that the reconstruct API triggers block backfill by flipping that var (I think it's immutable currently), or\r\nB) Clarify in the docs and the API response that this isn't supported.\r\n\r\n## Workaround\r\n\r\nRestart the BN with `--reconstruct-historic-states`.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4788/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4788/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1738424767",
    "html_url": "https://github.com/sigp/lighthouse/issues/4788#issuecomment-1738424767",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4788",
    "id": 1738424767,
    "node_id": "IC_kwDOCFeAzc5nnkG_",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-28T04:45:27Z",
    "updated_at": "2023-09-28T04:45:27Z",
    "author_association": "MEMBER",
    "body": "I think we may as well fix the docs first (option B), and then think about option A (harder).",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1738424767/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

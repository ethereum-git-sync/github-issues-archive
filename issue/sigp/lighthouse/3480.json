{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3480",
  "id": 1343465759,
  "node_id": "I_kwDOCFeAzc5QE6kf",
  "number": 3480,
  "title": "Prater does not merge with goerli when goerli is syncing, even if goerli has reached TTD",
  "user": {
    "login": "wjmelements",
    "id": 799573,
    "node_id": "MDQ6VXNlcjc5OTU3Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wjmelements",
    "html_url": "https://github.com/wjmelements",
    "followers_url": "https://api.github.com/users/wjmelements/followers",
    "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
    "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
    "organizations_url": "https://api.github.com/users/wjmelements/orgs",
    "repos_url": "https://api.github.com/users/wjmelements/repos",
    "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wjmelements/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2022-08-18T18:37:24Z",
  "updated_at": "2022-08-26T01:39:17Z",
  "closed_at": "2022-08-26T01:38:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nPrater does not merge with goerli\r\n\r\n## Version\r\n\r\nrust 1.63\r\nstable 2.5.1\r\ngeth 1.10.21\r\n\r\n## Present Behaviour\r\nPrater:\r\n```\r\nAug 18 13:17:30 pine lighthouse[2071394]: Aug 18 18:17:30.000 INFO Syncing                                 est_time: 5 days 22 hrs, speed: 5.33 slots/sec, distance: 2741735 slots (54 weeks 2 days), peers: 65, service: slot_notifier\r\nAug 18 13:17:30 pine lighthouse[2071394]: Aug 18 18:17:30.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nAug 18 13:17:30 pine lighthouse[2071394]: Aug 18 18:17:30.001 WARN Not ready for merge                     info: The execution endpoint is connected and configured, however it is not yet synced, service: slot_notifier\r\n```\r\nGörli:\r\n```\r\nAug 18 13:18:00 pine geth[2071393]: INFO [08-18|13:18:00.696] Legacy sync reached merge threshold      number=7,382,819 hash=7c38fc..3fd3cd td=10,790,002 ttd=10,790,000\r\nAug 18 13:18:01 pine geth[2071393]: INFO [08-18|13:18:01.036] Legacy sync reached merge threshold      number=7,382,819 hash=7c38fc..3fd3cd td=10,790,002 ttd=10,790,000\r\nAug 18 13:18:02 pine geth[2071393]: INFO [08-18|13:18:02.259] Legacy sync reached merge threshold      number=7,382,819 hash=7c38fc..3fd3cd td=10,790,002 ttd=10,790,000\r\nAug 18 13:18:02 pine geth[2071393]: WARN [08-18|13:18:02.259] Local chain is post-merge, waiting for beacon client sync switch-over...\r\n```\r\nGörli `eth_syncing`:\r\n```\r\n> eth.syncing\r\n{\r\n  currentBlock: 7382818,\r\n  healedBytecodeBytes: 0,\r\n  healedBytecodes: 0,\r\n  healedTrienodeBytes: 0,\r\n  healedTrienodes: 0,\r\n  healingBytecode: 0,\r\n  healingTrienodes: 0,\r\n  highestBlock: 7382822,\r\n  startingBlock: 7382810,\r\n  syncedAccountBytes: 0,\r\n  syncedAccounts: 0,\r\n  syncedBytecodeBytes: 0,\r\n  syncedBytecodes: 0,\r\n  syncedStorage: 0,\r\n  syncedStorageBytes: 0\r\n}\r\n```\r\n\r\n\r\n## Expected Behaviour\r\n\r\nIt should merge.\r\n\r\n## Steps to resolve\r\n\r\nSync goerli and try to merge with prater. Seems that it won't work if goerli has ever heard of a post-merge block before.",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3480/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219820239",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1219820239",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1219820239,
    "node_id": "IC_kwDOCFeAzc5ItPrP",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T18:46:58Z",
    "updated_at": "2022-08-18T18:46:58Z",
    "author_association": "NONE",
    "body": "Seems to be because Prater is not synced, but weird that the error calls out the execution client as not synced when it doesn't get any more synced than that.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219820239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219830720",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1219830720",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1219830720,
    "node_id": "IC_kwDOCFeAzc5ItSPA",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T18:53:15Z",
    "updated_at": "2022-08-18T18:53:15Z",
    "author_association": "NONE",
    "body": "Interestingly it starts out saying it is ready. Here is where it goes from saying it is ready for the merge to where it says it is not ready:\r\n```\r\nAug 18 13:48:42 pine lighthouse[2085637]: Aug 18 18:48:42.001 INFO Syncing                                 est_time: --, distance: 2739427 slots (54 weeks 2 days), peers: 59, service: slot_notifier\r\nAug 18 13:48:42 pine lighthouse[2085637]: Aug 18 18:48:42.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nAug 18 13:48:42 pine lighthouse[2085637]: Aug 18 18:48:42.004 INFO Ready for the merge                     current_difficulty: 10790001, terminal_total_difficulty: 10790000, service: slot_notifier\r\nAug 18 13:48:51 pine lighthouse[2085637]: Aug 18 18:48:51.033 WARN Execution endpoint is not synced        action: trying fallback, last_seen_block_unix_timestamp: 1660182298, endpoint: http://localhost:8555/, auth=true, service: deposit_contract_rpc\r\nAug 18 13:48:51 pine lighthouse[2085637]: Aug 18 18:48:51.033 ERRO No synced execution endpoint            advice: ensure you have an execution node configured via --execution-endpoint or if pre-merge, --eth1-endpoints, service: deposit_contract_rpc\r\nAug 18 13:48:51 pine lighthouse[2085637]: Aug 18 18:48:51.033 ERRO Error updating deposit contract cache   error: \"All fallbacks errored: http://localhost:8555/, auth=true => EndpointError(FarBehind)\", retry_millis: 60000, service: deposit_contract_rpc\r\nAug 18 13:48:54 pine lighthouse[2085637]: Aug 18 18:48:54.001 INFO Syncing                                 est_time: --, distance: 2739428 slots (54 weeks 2 days), peers: 61, service: slot_notifier\r\nAug 18 13:48:54 pine lighthouse[2085637]: Aug 18 18:48:54.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nAug 18 13:48:54 pine lighthouse[2085637]: Aug 18 18:48:54.004 INFO Ready for the merge                     current_difficulty: 10790001, terminal_total_difficulty: 10790000, service: slot_notifier\r\nAug 18 13:49:06 pine lighthouse[2085637]: Aug 18 18:49:06.001 INFO Syncing                                 est_time: --, distance: 2739429 slots (54 weeks 2 days), peers: 55, service: slot_notifier\r\nAug 18 13:49:06 pine lighthouse[2085637]: Aug 18 18:49:06.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nAug 18 13:49:06 pine lighthouse[2085637]: Aug 18 18:49:06.004 INFO Ready for the merge                     current_difficulty: 10790001, terminal_total_difficulty: 10790000, service: slot_notifier\r\nAug 18 13:49:18 pine lighthouse[2085637]: Aug 18 18:49:18.001 INFO Syncing                                 est_time: --, distance: 2739430 slots (54 weeks 2 days), peers: 56, service: slot_notifier\r\nAug 18 13:49:18 pine lighthouse[2085637]: Aug 18 18:49:18.001 WARN Syncing deposit contract block cache    est_blocks_remaining: initializing deposits, service: slot_notifier\r\nAug 18 13:49:18 pine lighthouse[2085637]: Aug 18 18:49:18.002 WARN Not ready for merge                     info: The execution endpoint is connected and configured, however it is not yet synced, service: slot_notifier\r\nAug 18 13:49:30 pine lighthouse[2085637]: Aug 18 18:49:30.001 INFO Syncing                                 est_time: --, distance: 2739431 slots (54 weeks 2 days), peers: 66, service: slot_notifier\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219830720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219844528",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1219844528",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1219844528,
    "node_id": "IC_kwDOCFeAzc5ItVmw",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T19:06:24Z",
    "updated_at": "2022-08-18T19:06:24Z",
    "author_association": "NONE",
    "body": "I have verified that your code will prevent merging on any non-false value, so this is the issue. I am working around by treating all values as synced but this won't work for others.\r\n\r\n```\r\ndiff --git a/beacon_node/execution_layer/src/engine_api/http.rs b/beacon_node/execution_layer/src/engine_api/http.rs\r\nindex a8eb4297..320bc499 100644\r\n--- a/beacon_node/execution_layer/src/engine_api/http.rs\r\n+++ b/beacon_node/execution_layer/src/engine_api/http.rs\r\n@@ -602,7 +602,7 @@ impl HttpJsonRpc {\r\n          */\r\n         match result.as_bool() {\r\n             Some(false) => Ok(()),\r\n-            _ => Err(Error::IsSyncing),\r\n+            _ => Ok(()),\r\n         }\r\n     }\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219844528/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219971319",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1219971319",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1219971319,
    "node_id": "IC_kwDOCFeAzc5It0j3",
    "user": {
      "login": "pawanjay176",
      "id": 9890508,
      "node_id": "MDQ6VXNlcjk4OTA1MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9890508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pawanjay176",
      "html_url": "https://github.com/pawanjay176",
      "followers_url": "https://api.github.com/users/pawanjay176/followers",
      "following_url": "https://api.github.com/users/pawanjay176/following{/other_user}",
      "gists_url": "https://api.github.com/users/pawanjay176/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pawanjay176/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pawanjay176/subscriptions",
      "organizations_url": "https://api.github.com/users/pawanjay176/orgs",
      "repos_url": "https://api.github.com/users/pawanjay176/repos",
      "events_url": "https://api.github.com/users/pawanjay176/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pawanjay176/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-18T21:14:59Z",
    "updated_at": "2022-08-18T21:14:59Z",
    "author_association": "MEMBER",
    "body": "This is normal with genesis sync. The merge will happen when lighthouse also reaches the slot corresponding to the ttd. Right now, your geth node is synced upto ttd but lighthouse is still catching up. Once lighthouse reaches ttd, it will start feeding execution payloads to geth which will result in lighthouse and EE syncing in lockstep from that point onwards.\r\n\r\nAn alternative is to use checkpoint sync https://lighthouse-book.sigmaprime.io/checkpoint-sync.html . With checkpoint sync, it will proceed as follows:\r\n1. Lighthouse checkpoint syncs to the weak subjectivity checkpoint\r\n2. Lighthouse sends a `forkChoiceUpdated` to geth with the head of the chain.\r\n3. Geth starts reverse syncing from head to the genesis block\r\n4. Lighthouse starts downloading historical blocks while continuing to follow head in optimistic sync mode https://github.com/ethereum/consensus-specs/blob/dev/sync/optimistic.md\r\n\r\nThis is way faster as execution clients can use their highly optimised sync strategies like snap sync to sync faster without needing to go in lockstep with CL clients. Lighthouse syncs faster too as backfilling blocks from a checkpoint requires fewer checks to be secure.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1219971319/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1222523911",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1222523911",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1222523911,
    "node_id": "IC_kwDOCFeAzc5I3jwH",
    "user": {
      "login": "SwaroopH",
      "id": 62628,
      "node_id": "MDQ6VXNlcjYyNjI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/62628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SwaroopH",
      "html_url": "https://github.com/SwaroopH",
      "followers_url": "https://api.github.com/users/SwaroopH/followers",
      "following_url": "https://api.github.com/users/SwaroopH/following{/other_user}",
      "gists_url": "https://api.github.com/users/SwaroopH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SwaroopH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SwaroopH/subscriptions",
      "organizations_url": "https://api.github.com/users/SwaroopH/orgs",
      "repos_url": "https://api.github.com/users/SwaroopH/repos",
      "events_url": "https://api.github.com/users/SwaroopH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SwaroopH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-22T15:31:57Z",
    "updated_at": "2022-08-22T15:31:57Z",
    "author_association": "NONE",
    "body": "Ran into this issue a week agowhen my geth db got corrupted post sync. A fresh sync was waiting for beacon client sync switch-over after reaching TTD. And Lighthouse wouldn't proceed since execution endpoint wasn't up to date.\r\n\r\nRunning a `--purge-db` and using `--checkpoint-sync-url` from a 3rd party helped get back into sync",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1222523911/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1224458160",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1224458160",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1224458160,
    "node_id": "IC_kwDOCFeAzc5I-7-w",
    "user": {
      "login": "SwaroopH",
      "id": 62628,
      "node_id": "MDQ6VXNlcjYyNjI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/62628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SwaroopH",
      "html_url": "https://github.com/SwaroopH",
      "followers_url": "https://api.github.com/users/SwaroopH/followers",
      "following_url": "https://api.github.com/users/SwaroopH/following{/other_user}",
      "gists_url": "https://api.github.com/users/SwaroopH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SwaroopH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SwaroopH/subscriptions",
      "organizations_url": "https://api.github.com/users/SwaroopH/orgs",
      "repos_url": "https://api.github.com/users/SwaroopH/repos",
      "events_url": "https://api.github.com/users/SwaroopH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SwaroopH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T17:49:22Z",
    "updated_at": "2022-08-23T17:49:22Z",
    "author_association": "NONE",
    "body": "Unfortunately, it looks like our geth <> lighthouse keeps going out of sync. I need to keep forcing the checkpoint to get back in sync.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1224458160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1224982429",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1224982429",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1224982429,
    "node_id": "IC_kwDOCFeAzc5JA7-d",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T23:16:16Z",
    "updated_at": "2022-08-23T23:16:16Z",
    "author_association": "MEMBER",
    "body": "@SwaroopH There's a bug in the latest Geth release that causes it to mark valid blocks as invalid, and Lighthouse currently isn't designed to recover from this. Lighthouse remembers the invalid blocks and refuses to re-process them as valid. It's implemented this way as a defensive measure against execution layer consensus faults, which we expect to be rare and in need of manual attention (e.g. resyncing the node).\n\nWe might make some changes to Lighthouse to better support resetting the head on an EL, as it seems like a useful feature. There's more discussion of that in this thread on the Eth R&D Discord: https://discord.com/channels/595666850260713488/892088344438255616/1011594089847869440",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1224982429/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1224984058",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1224984058",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1224984058,
    "node_id": "IC_kwDOCFeAzc5JA8X6",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-23T23:18:52Z",
    "updated_at": "2022-08-23T23:18:52Z",
    "author_association": "MEMBER",
    "body": "@wjmelements Do you mind if I close this issue? It seems there's no actionable change required by Lighthouse in response to what you observed, except maybe to change the \"Ready for the merge\" log to indicate that Lighthouse isn't ready to merge until it has finished syncing (and I would prefer to open a targeted issue for that).",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1224984058/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226837593",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1226837593",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1226837593,
    "node_id": "IC_kwDOCFeAzc5JIA5Z",
    "user": {
      "login": "SwaroopH",
      "id": 62628,
      "node_id": "MDQ6VXNlcjYyNjI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/62628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SwaroopH",
      "html_url": "https://github.com/SwaroopH",
      "followers_url": "https://api.github.com/users/SwaroopH/followers",
      "following_url": "https://api.github.com/users/SwaroopH/following{/other_user}",
      "gists_url": "https://api.github.com/users/SwaroopH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SwaroopH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SwaroopH/subscriptions",
      "organizations_url": "https://api.github.com/users/SwaroopH/orgs",
      "repos_url": "https://api.github.com/users/SwaroopH/repos",
      "events_url": "https://api.github.com/users/SwaroopH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SwaroopH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T06:36:40Z",
    "updated_at": "2022-08-25T06:36:40Z",
    "author_association": "NONE",
    "body": "> @SwaroopH There's a bug in the latest Geth release that causes it to mark valid blocks as invalid, and Lighthouse currently isn't designed to recover from this. Lighthouse remembers the invalid blocks and refuses to re-process them as valid. It's implemented this way as a defensive measure against execution layer consensus faults, which we expect to be rare and in need of manual attention (e.g. resyncing the node).\r\n> \r\n> We might make some changes to Lighthouse to better support resetting the head on an EL, as it seems like a useful feature. There's more discussion of that in this thread on the Eth R&D Discord: https://discord.com/channels/595666850260713488/892088344438255616/1011594089847869440\r\n\r\nI was using an older version. Anyway, I did use the new hotfix from today and that too runs into the same issue eventually and I have to purge lighthouse db to kickstart syncing.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226837593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226839787",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1226839787",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1226839787,
    "node_id": "IC_kwDOCFeAzc5JIBbr",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T06:39:19Z",
    "updated_at": "2022-08-25T06:39:19Z",
    "author_association": "MEMBER",
    "body": "> Anyway, I did use the new hotfix from today and that too runs into the same issue eventually and I have to purge lighthouse db to kickstart syncing.\r\n\r\nIs your Geth database getting continuously corrupted? If so, Lighthouse needs to re-sync when that happens",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226839787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226844070",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1226844070",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1226844070,
    "node_id": "IC_kwDOCFeAzc5JICem",
    "user": {
      "login": "SwaroopH",
      "id": 62628,
      "node_id": "MDQ6VXNlcjYyNjI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/62628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SwaroopH",
      "html_url": "https://github.com/SwaroopH",
      "followers_url": "https://api.github.com/users/SwaroopH/followers",
      "following_url": "https://api.github.com/users/SwaroopH/following{/other_user}",
      "gists_url": "https://api.github.com/users/SwaroopH/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SwaroopH/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SwaroopH/subscriptions",
      "organizations_url": "https://api.github.com/users/SwaroopH/orgs",
      "repos_url": "https://api.github.com/users/SwaroopH/repos",
      "events_url": "https://api.github.com/users/SwaroopH/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SwaroopH/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T06:44:35Z",
    "updated_at": "2022-08-25T06:44:35Z",
    "author_association": "NONE",
    "body": "> > Anyway, I did use the new hotfix from today and that too runs into the same issue eventually and I have to purge lighthouse db to kickstart syncing.\r\n> \r\n> Is your Geth database getting continuously corrupted? If so, Lighthouse needs to re-sync when that happens\r\n\r\nNo, the corruption was a one off. I have a freshly synced node that stops syncing after a few hours of consensus updates from lighthouse.\r\n\r\nGeth warning:\r\n`Beacon client online, but no consensus updates received in a while. Please fix your beacon client to follow the chain!` \r\n\r\nLighthouse error:\r\n`ERRO No synced execution endpoint`\r\n\r\nAt this stage, the only option I have is to purge lighthouse db use checkpoint sync to get geth to start syncing again.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226844070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226849579",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1226849579",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1226849579,
    "node_id": "IC_kwDOCFeAzc5JID0r",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T06:51:42Z",
    "updated_at": "2022-08-25T06:51:42Z",
    "author_association": "MEMBER",
    "body": "> No, the corruption was a one off. I have a freshly synced node that stops syncing after a few hours of consensus updates from lighthouse.\r\n\r\nOk this is more interesting. Can you please DM or email me Lighthouse's debug logs from when this occurred? You can find debug logs in `$datadir/beacon/logs/beacon.log`. You can DM me on Discord (`@sproul#3907`) or my email is `<firstname>@sigmaprime.io`.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1226849579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1227687133",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1227687133",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1227687133,
    "node_id": "IC_kwDOCFeAzc5JLQTd",
    "user": {
      "login": "wjmelements",
      "id": 799573,
      "node_id": "MDQ6VXNlcjc5OTU3Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/799573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wjmelements",
      "html_url": "https://github.com/wjmelements",
      "followers_url": "https://api.github.com/users/wjmelements/followers",
      "following_url": "https://api.github.com/users/wjmelements/following{/other_user}",
      "gists_url": "https://api.github.com/users/wjmelements/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wjmelements/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wjmelements/subscriptions",
      "organizations_url": "https://api.github.com/users/wjmelements/orgs",
      "repos_url": "https://api.github.com/users/wjmelements/repos",
      "events_url": "https://api.github.com/users/wjmelements/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wjmelements/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-25T19:42:14Z",
    "updated_at": "2022-08-25T19:42:14Z",
    "author_association": "NONE",
    "body": "> @wjmelements Do you mind if I close this issue? It seems there's no actionable change required by Lighthouse in response to what you observed, except maybe to change the \"Ready for the merge\" log to indicate that Lighthouse isn't ready to merge until it has finished syncing (and I would prefer to open a targeted issue for that).\r\n\r\nSounds fine to me so long as you do open that targeted issue. It should be clear why the merge isn't happening in this situation, and mis-attribution can waste a lot of time.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1227687133/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1227920086",
    "html_url": "https://github.com/sigp/lighthouse/issues/3480#issuecomment-1227920086",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3480",
    "id": 1227920086,
    "node_id": "IC_kwDOCFeAzc5JMJLW",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-26T01:38:55Z",
    "updated_at": "2022-08-26T01:38:55Z",
    "author_association": "MEMBER",
    "body": "Ah, there's already an issue for the logging issue here: https://github.com/sigp/lighthouse/issues/3398\r\n\r\nI'll close this issue now so we can keep it focussed.\r\n\r\nIt seems @SwaroopH's issues stem from a reverse proxy getting in the way, and I'm helping him debug that via Discord DMs.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1227920086/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

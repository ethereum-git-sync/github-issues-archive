{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3196",
  "id": 1242990961,
  "node_id": "I_kwDOCFeAzc5KFolx",
  "number": 3196,
  "title": "Beacon Node not updating new timezone and not syncing",
  "user": {
    "login": "donkodimov",
    "id": 3957948,
    "node_id": "MDQ6VXNlcjM5NTc5NDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3957948?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/donkodimov",
    "html_url": "https://github.com/donkodimov",
    "followers_url": "https://api.github.com/users/donkodimov/followers",
    "following_url": "https://api.github.com/users/donkodimov/following{/other_user}",
    "gists_url": "https://api.github.com/users/donkodimov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/donkodimov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/donkodimov/subscriptions",
    "organizations_url": "https://api.github.com/users/donkodimov/orgs",
    "repos_url": "https://api.github.com/users/donkodimov/repos",
    "events_url": "https://api.github.com/users/donkodimov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/donkodimov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-05-20T11:06:40Z",
  "updated_at": "2022-05-22T08:48:48Z",
  "closed_at": "2022-05-21T02:29:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nAfter manually changing the timezone,  lighthouse client logs still showing the old timezone.\r\n\r\n## Version\r\n\r\nPlease provide your Lighthouse and Rust version. Are you building from\r\n`stable` or `unstable`, which commit?\r\n\r\nLighthouse v2.2.1-2291a14\r\nrustc 1.61.0 (fe5b13d68 2022-05-18)\r\n\r\n## Present Behaviour\r\n\r\nDescribe the present behaviour of the application, with regards to this\r\nissue.\r\n\r\nclient not syncing the beacon chain\r\n```\r\nMay 20 11:02:05.302 INFO Sync state updated                      new_state: Syncing Finalized Chain, old_state: Stalled, service: sync [17/1875]\r\nthread 'tokio-runtime-worker' panicked at 'Cannot start a runtime from within a runtime. This happens because a function (like `block_on`) attem\r\npted to block the current thread while the thread is being used to drive asynchronous tasks.', /home/toni/.cargo/registry/src/github.com-1ecc629\r\n9db9ec823/tokio-1.17.0/src/runtime/enter.rs:39:9\r\nstack backtrace:\r\n   0: std::panicking::begin_panic\r\n   1: tokio::runtime::enter::enter\r\n   2: tokio::runtime::handle::Handle::block_on\r\n   3: execution_layer::ExecutionLayer::block_on_generic\r\n   4: beacon_chain::beacon_chain::BeaconChain<T>::update_execution_engine_forkchoice_blocking\r\n   5: beacon_chain::beacon_chain::BeaconChain<T>::fork_choice_at_slot\r\n   6: beacon_chain::beacon_chain::BeaconChain<T>::per_slot_task\r\n   7: <core::future::from_generator::GenFuture<T> as core::future::future::Future>::poll\r\n   8: <futures_util::future::select::Select<A,B> as core::future::future::Future>::poll\r\n   9: <futures_util::future::future::map::Map<Fut,F> as core::future::future::Future>::poll\r\n  10: <futures_util::future::future::flatten::Flatten<Fut,<Fut as core::future::future::Future>::Output> as core::future::future::Future>::poll   11: tokio::runtime::task::harness::poll_future\r\n  12: tokio::runtime::task::harness::Harness<T,S>::poll\r\n  13: std::thread::local::LocalKey<T>::with\r\n  14: tokio::runtime::thread_pool::worker::Context::run_task\r\n  15: tokio::runtime::thread_pool::worker::Context::run\r\n  16: tokio::macros::scoped_tls::ScopedKey<T>::set\r\n  17: tokio::runtime::thread_pool::worker::run\r\n  18: <tokio::runtime::blocking::task::BlockingTask<T> as core::future::future::Future>::poll\r\n  19: tokio::runtime::task::harness::Harness<T,S>::poll\r\n  20: tokio::runtime::blocking::pool::Inner::run\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nMay 20 11:02:12.402 CRIT Task panic. This is a bug!              advice: Please check above for a backtrace and notify the developers, message:\r\nCannot start a runtime from within a runtime. This happens because a function (like `block_on`) attempted to block the current thread while the\r\nthread is being used to drive asynchronous tasks., task_name: timer, service: node_timer\r\nMay 20 11:02:12.403 INFO Internal shutdown received              reason: Panic (fatal error)\r\nMay 20 11:02:12.404 INFO Shutting down..                         reason: Failure(\"Panic (fatal error)\")\r\nMay 20 11:02:12.404 INFO Saved DHT state                         service: network\r\nMay 20 11:02:12.404 INFO Network service shutdown                service: network\r\nMay 20 11:02:13.986 CRIT Failed to update execution head         error: ForkchoiceUpdate(ShuttingDown), service: beacon\r\nMay 20 11:02:13.989 CRIT Failed to prepare proposers after fork choice, error: PrepareProposerBlockingFailed(ShuttingDown), service: beacon\r\nMay 20 11:02:13.989 WARN Unable to free worker                   error: channel closed, msg: did not free worker, shutdown may be underway\r\nMay 20 11:02:14.214 INFO Saved beacon chain to disk              service: beacon\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nHow _should_ the application behave?\r\n\r\nsyncing the beacon chain\r\n\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3196/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132782552",
    "html_url": "https://github.com/sigp/lighthouse/issues/3196#issuecomment-1132782552",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
    "id": 1132782552,
    "node_id": "IC_kwDOCFeAzc5DhOPY",
    "user": {
      "login": "pawanjay176",
      "id": 9890508,
      "node_id": "MDQ6VXNlcjk4OTA1MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9890508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pawanjay176",
      "html_url": "https://github.com/pawanjay176",
      "followers_url": "https://api.github.com/users/pawanjay176/followers",
      "following_url": "https://api.github.com/users/pawanjay176/following{/other_user}",
      "gists_url": "https://api.github.com/users/pawanjay176/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pawanjay176/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pawanjay176/subscriptions",
      "organizations_url": "https://api.github.com/users/pawanjay176/orgs",
      "repos_url": "https://api.github.com/users/pawanjay176/repos",
      "events_url": "https://api.github.com/users/pawanjay176/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pawanjay176/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-20T11:18:21Z",
    "updated_at": "2022-05-20T11:18:21Z",
    "author_association": "MEMBER",
    "body": "Are you trying to sync one of the merge testnets? This issue is known and we are working on a fix which should be merged to the `unstable` branch soon.\r\n\r\nThe logging issue is already known, unfortunately it's an issue in one of our upstream logging libraries. See https://github.com/sigp/lighthouse/issues/3130 for details.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132782552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132795478",
    "html_url": "https://github.com/sigp/lighthouse/issues/3196#issuecomment-1132795478",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
    "id": 1132795478,
    "node_id": "IC_kwDOCFeAzc5DhRZW",
    "user": {
      "login": "donkodimov",
      "id": 3957948,
      "node_id": "MDQ6VXNlcjM5NTc5NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3957948?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkodimov",
      "html_url": "https://github.com/donkodimov",
      "followers_url": "https://api.github.com/users/donkodimov/followers",
      "following_url": "https://api.github.com/users/donkodimov/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkodimov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkodimov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkodimov/subscriptions",
      "organizations_url": "https://api.github.com/users/donkodimov/orgs",
      "repos_url": "https://api.github.com/users/donkodimov/repos",
      "events_url": "https://api.github.com/users/donkodimov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkodimov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-20T11:34:38Z",
    "updated_at": "2022-05-20T11:35:58Z",
    "author_association": "NONE",
    "body": "Yes, I am following this [guide](https://github.com/remyroy/ethstaker/blob/main/merge-devnet.md)  and trying to sync to kiln testnet. \r\nSo the error has nothing to do with the timezone?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132795478/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132801121",
    "html_url": "https://github.com/sigp/lighthouse/issues/3196#issuecomment-1132801121",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
    "id": 1132801121,
    "node_id": "IC_kwDOCFeAzc5DhSxh",
    "user": {
      "login": "pawanjay176",
      "id": 9890508,
      "node_id": "MDQ6VXNlcjk4OTA1MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9890508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pawanjay176",
      "html_url": "https://github.com/pawanjay176",
      "followers_url": "https://api.github.com/users/pawanjay176/followers",
      "following_url": "https://api.github.com/users/pawanjay176/following{/other_user}",
      "gists_url": "https://api.github.com/users/pawanjay176/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pawanjay176/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pawanjay176/subscriptions",
      "organizations_url": "https://api.github.com/users/pawanjay176/orgs",
      "repos_url": "https://api.github.com/users/pawanjay176/repos",
      "events_url": "https://api.github.com/users/pawanjay176/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pawanjay176/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-20T11:41:51Z",
    "updated_at": "2022-05-20T11:41:51Z",
    "author_association": "MEMBER",
    "body": "Yep this is an issue on merge networks which is related to the async runtime we use in Lighthouse. The timezone issue is a logging issue.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132801121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132823698",
    "html_url": "https://github.com/sigp/lighthouse/issues/3196#issuecomment-1132823698",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
    "id": 1132823698,
    "node_id": "IC_kwDOCFeAzc5DhYSS",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-20T12:06:43Z",
    "updated_at": "2022-05-20T12:06:43Z",
    "author_association": "MEMBER",
    "body": "Ah, @pawanjay176 I think this is a regression introduced by my recent PR https://github.com/sigp/lighthouse/pull/3168. The previous panic was already fixed in https://github.com/sigp/lighthouse/pull/3165.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1132823698/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1133511871",
    "html_url": "https://github.com/sigp/lighthouse/issues/3196#issuecomment-1133511871",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
    "id": 1133511871,
    "node_id": "IC_kwDOCFeAzc5DkAS_",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-21T02:29:12Z",
    "updated_at": "2022-05-21T02:29:12Z",
    "author_association": "MEMBER",
    "body": "The fix has been merged to unstable now 🎉 ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1133511871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1133847076",
    "html_url": "https://github.com/sigp/lighthouse/issues/3196#issuecomment-1133847076",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3196",
    "id": 1133847076,
    "node_id": "IC_kwDOCFeAzc5DlSIk",
    "user": {
      "login": "donkodimov",
      "id": 3957948,
      "node_id": "MDQ6VXNlcjM5NTc5NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3957948?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donkodimov",
      "html_url": "https://github.com/donkodimov",
      "followers_url": "https://api.github.com/users/donkodimov/followers",
      "following_url": "https://api.github.com/users/donkodimov/following{/other_user}",
      "gists_url": "https://api.github.com/users/donkodimov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donkodimov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donkodimov/subscriptions",
      "organizations_url": "https://api.github.com/users/donkodimov/orgs",
      "repos_url": "https://api.github.com/users/donkodimov/repos",
      "events_url": "https://api.github.com/users/donkodimov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donkodimov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-22T08:48:48Z",
    "updated_at": "2022-05-22T08:48:48Z",
    "author_association": "NONE",
    "body": "Great!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1133847076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

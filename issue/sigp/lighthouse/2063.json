{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2063",
  "id": 758669328,
  "node_id": "MDU6SXNzdWU3NTg2NjkzMjg=",
  "number": 2063,
  "title": "We experienced some missed attestations this morning (Raspberry Pi 4 8 GB)",
  "user": {
    "login": "diglos",
    "id": 16838272,
    "node_id": "MDQ6VXNlcjE2ODM4Mjcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/16838272?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/diglos",
    "html_url": "https://github.com/diglos",
    "followers_url": "https://api.github.com/users/diglos/followers",
    "following_url": "https://api.github.com/users/diglos/following{/other_user}",
    "gists_url": "https://api.github.com/users/diglos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/diglos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/diglos/subscriptions",
    "organizations_url": "https://api.github.com/users/diglos/orgs",
    "repos_url": "https://api.github.com/users/diglos/repos",
    "events_url": "https://api.github.com/users/diglos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/diglos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2020-12-07T16:42:59Z",
  "updated_at": "2021-06-25T06:43:57Z",
  "closed_at": "2021-06-25T06:43:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWe’ve experienced some missed attestations a few hours ago. It appears to be related to libp2p.\r\n\r\n## Version\r\n\r\nLighthouse ARM64 1.0.3 official binary\r\nHW: Raspberry Pi 4 8 GB + 1 TB Crucial SSD\r\nRunning Geth 1.9.24 + Lighthouse in the same node.\r\n\r\nHardware and performance seems fine and the validator has been doing great for 5 days in a row.\r\n\r\n## Present Behaviour\r\n\r\nWe've been experiencing some missing attestations in the last hours. In particular, 10 out of 50. In every failed attestation, this message shows up before \"INFO Successfully published attestations\": \r\n\r\n**WARN Could not publish message      error: InsufficientPeers, service: libp2p**\r\n\r\nLog of one missing attestation:\r\n\r\n```\r\nDec  7 11:50:50 ethnode-f3b2bb7ac geth[2101]: INFO [12-07|11:50:50.188] Imported new chain segment               blocks=1  txs=185  mgas=12.491 elapsed=6.631s    mgasps=1.883   number=11405488 hash=\"8e8d95…225e43\" dirty=644.38MiB\r\nDec  7 11:50:51 ethnode-f3b2bb7ac lighthouse[113993]: Dec 07 11:50:51.318 WARN Could not publish message               error: InsufficientPeers, service: libp2p\r\nDec  7 11:50:51 ethnode-f3b2bb7ac lighthouse[396483]: Dec 07 11:50:51.320 INFO Successfully published attestations     type: unaggregated, slot: 43152, committee_index: 2, head_block: 0xaa8eda0b0958896cd6e450facbac4f32d9f834d31bb005e39b864c66139a7b16, count: 1, service: attestation\r\nDec  7 11:50:53 ethnode-f3b2bb7ac lighthouse[113993]: Dec 07 11:50:53.000 INFO Synced                                  slot: 43152, block: 0xaa8e…7b16, epoch: 1348, finalized_epoch: 1346, finalized_root: 0xed0e…be0a, peers: 51, service: slot_notifier\r\nDec  7 11:50:53 ethnode-f3b2bb7ac lighthouse[396483]: Dec 07 11:50:53.010 INFO All validators active                   slot: 43152, epoch: 1348, total_validators: 1, active_validators: 1, proposers: 0, service: notifier\r\nDec  7 11:50:55 ethnode-f3b2bb7ac lighthouse[396483]: Dec 07 11:50:55.084 INFO Successfully published attestations     type: aggregated, slot: 43152, committee_index: 2, head_block: 0xaa8eda0b0958896cd6e450facbac4f32d9f834d31bb005e39b864c66139a7b16, signatures: 2, aggregator: 8271, service: attestation\r\nDec  7 11:50:56 ethnode-f3b2bb7ac geth[2101]: INFO [12-07|11:50:56.312] Deep froze chain segment\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nPublish all the attestations\r\n\r\n## Steps to resolve\r\n\r\nWe did a validator restart that seemed to solve the issue but after 13 correct attestations, it got back.\r\n\r\nA Beacon chain restart, though, seems to solve the problem (it is working fine now, at least for the last 40 attestations).\r\n\r\nIf you need us to enable debug mode or other tests, please let us know.\r\n",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2063/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740177600",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-740177600",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 740177600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDE3NzYwMA==",
    "user": {
      "login": "glamperd",
      "id": 5004980,
      "node_id": "MDQ6VXNlcjUwMDQ5ODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5004980?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glamperd",
      "html_url": "https://github.com/glamperd",
      "followers_url": "https://api.github.com/users/glamperd/followers",
      "following_url": "https://api.github.com/users/glamperd/following{/other_user}",
      "gists_url": "https://api.github.com/users/glamperd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glamperd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glamperd/subscriptions",
      "organizations_url": "https://api.github.com/users/glamperd/orgs",
      "repos_url": "https://api.github.com/users/glamperd/repos",
      "events_url": "https://api.github.com/users/glamperd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glamperd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-07T21:01:29Z",
    "updated_at": "2020-12-07T21:01:29Z",
    "author_association": "NONE",
    "body": "I'm seeing similar behaviour, and I have a very similar hardware and software configuration. \r\nSeems to be related to a sudden drop in number of peers:\r\n![image](https://user-images.githubusercontent.com/5004980/101404899-5fe2ad00-392b-11eb-82ad-3ed2396b400a.png)\r\n\r\nThe drop corresponds to these log messages from the beacon node:\r\n```\r\nDec 08 03:15:33 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:33.756 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:33 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:33.756 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:33 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:33.756 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:33 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:33.756 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:33 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:33.757 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:33 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:33.857 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:34 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:34.097 INFO New block received                      hash: 0x5732…408e, slot: 44473\r\nDec 08 03:15:34 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:34.264 WARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\nDec 08 03:15:34 ethnode-21eca8bd5 lighthouse[1547]: Dec 08 03:15:34.404 WARN Banning peer that is currently disconnecting, peer_id: 16Uiu2HAmESDcfBVYAtb4dJM9mWRbAzM4RrU3SjWtUVU3rsciiPBf, service: lib\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740177600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740200575",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-740200575",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 740200575,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDIwMDU3NQ==",
    "user": {
      "login": "diglos",
      "id": 16838272,
      "node_id": "MDQ6VXNlcjE2ODM4Mjcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/16838272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diglos",
      "html_url": "https://github.com/diglos",
      "followers_url": "https://api.github.com/users/diglos/followers",
      "following_url": "https://api.github.com/users/diglos/following{/other_user}",
      "gists_url": "https://api.github.com/users/diglos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diglos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diglos/subscriptions",
      "organizations_url": "https://api.github.com/users/diglos/orgs",
      "repos_url": "https://api.github.com/users/diglos/repos",
      "events_url": "https://api.github.com/users/diglos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diglos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-07T21:49:35Z",
    "updated_at": "2020-12-07T21:49:35Z",
    "author_association": "NONE",
    "body": "Ummh, I can't see that in the logs or the Grafana Dashboard either. Libp2p shows a consistent peers connection (the missed attestations happened between 9-12 in the morning. The sudden lost of peers at 14:00 is because of the Beacon chain restart (which resolved the issue).\r\n\r\n![image](https://user-images.githubusercontent.com/16838272/101409390-259eee80-38de-11eb-9f14-757a786ebdfd.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740200575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740436427",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-740436427",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 740436427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDQzNjQyNw==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-08T07:25:23Z",
    "updated_at": "2020-12-08T07:30:05Z",
    "author_association": "MEMBER",
    "body": "@glamperd - Your issue is distinct from this one. It looks like either your network has gone down, or your node froze for some reason (potentially processing something external). \r\n\r\n@diglos - The WARN message you are seeing, occurs when you don't have any peers that are also subscribed to your specific subnet. The INFO log you are seeing is from the validator client informing that it successfully set the attestations to the beacon node. (If you are using a systemd script, in the future the logs will be cleaner if you output just the beacon node logs via `journalctl -u <bn-service-name> -o cat`) Under normal operation this should be unlikely but there are number of things that can potentially cause it. I can't know for sure without debug logs what has happened to you. \r\n\r\nIt would good to always save debug logs so we can diagnose these issues. One thing to check is to ensure your clock is kept to sync with ntp. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740436427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740553894",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-740553894",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 740553894,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MDU1Mzg5NA==",
    "user": {
      "login": "diglos",
      "id": 16838272,
      "node_id": "MDQ6VXNlcjE2ODM4Mjcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/16838272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diglos",
      "html_url": "https://github.com/diglos",
      "followers_url": "https://api.github.com/users/diglos/followers",
      "following_url": "https://api.github.com/users/diglos/following{/other_user}",
      "gists_url": "https://api.github.com/users/diglos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diglos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diglos/subscriptions",
      "organizations_url": "https://api.github.com/users/diglos/orgs",
      "repos_url": "https://api.github.com/users/diglos/repos",
      "events_url": "https://api.github.com/users/diglos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diglos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-08T11:08:53Z",
    "updated_at": "2020-12-08T11:08:53Z",
    "author_association": "NONE",
    "body": "Thanks!. We will enable debug mode and report here as soon as the issue comes back.\r\n\r\nI would discard NTP as the Beacon restart solved the problem (it's been ok for more than 1 day now)\r\n\r\nRegards!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/740553894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/743346038",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-743346038",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 743346038,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzM0NjAzOA==",
    "user": {
      "login": "pawanjay176",
      "id": 9890508,
      "node_id": "MDQ6VXNlcjk4OTA1MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9890508?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pawanjay176",
      "html_url": "https://github.com/pawanjay176",
      "followers_url": "https://api.github.com/users/pawanjay176/followers",
      "following_url": "https://api.github.com/users/pawanjay176/following{/other_user}",
      "gists_url": "https://api.github.com/users/pawanjay176/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pawanjay176/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pawanjay176/subscriptions",
      "organizations_url": "https://api.github.com/users/pawanjay176/orgs",
      "repos_url": "https://api.github.com/users/pawanjay176/repos",
      "events_url": "https://api.github.com/users/pawanjay176/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pawanjay176/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-11T18:12:03Z",
    "updated_at": "2020-12-11T18:12:03Z",
    "author_association": "MEMBER",
    "body": "@diglos for the duration of the issue, were all attestations missed? or did you also get some successful attestations with a higher inclusion distance?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/743346038/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/743364601",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-743364601",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 743364601,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0MzM2NDYwMQ==",
    "user": {
      "login": "diglos",
      "id": 16838272,
      "node_id": "MDQ6VXNlcjE2ODM4Mjcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/16838272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/diglos",
      "html_url": "https://github.com/diglos",
      "followers_url": "https://api.github.com/users/diglos/followers",
      "following_url": "https://api.github.com/users/diglos/following{/other_user}",
      "gists_url": "https://api.github.com/users/diglos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/diglos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/diglos/subscriptions",
      "organizations_url": "https://api.github.com/users/diglos/orgs",
      "repos_url": "https://api.github.com/users/diglos/repos",
      "events_url": "https://api.github.com/users/diglos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/diglos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-11T18:53:21Z",
    "updated_at": "2020-12-11T18:53:21Z",
    "author_association": "NONE",
    "body": "Not all were missing, some of them went through, even with 0 distance. See the screenshots below:\r\n\r\nFirst missing attestations:\r\n\r\n![image](https://user-images.githubusercontent.com/16838272/101942650-28555880-3bea-11eb-86e8-fedab5598739.png)\r\n\r\nThen, it continues to miss some more until a Beacon restart is performed:\r\n\r\n![image](https://user-images.githubusercontent.com/16838272/101942754-4f138f00-3bea-11eb-8b23-2d5aee34a471.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/743364601/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/747150514",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-747150514",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 747150514,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NzE1MDUxNA==",
    "user": {
      "login": "riversyang",
      "id": 4645231,
      "node_id": "MDQ6VXNlcjQ2NDUyMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4645231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/riversyang",
      "html_url": "https://github.com/riversyang",
      "followers_url": "https://api.github.com/users/riversyang/followers",
      "following_url": "https://api.github.com/users/riversyang/following{/other_user}",
      "gists_url": "https://api.github.com/users/riversyang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/riversyang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/riversyang/subscriptions",
      "organizations_url": "https://api.github.com/users/riversyang/orgs",
      "repos_url": "https://api.github.com/users/riversyang/repos",
      "events_url": "https://api.github.com/users/riversyang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/riversyang/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-17T01:47:14Z",
    "updated_at": "2020-12-17T01:47:14Z",
    "author_association": "NONE",
    "body": "I'm also facing the issue. After upgraded to v1.0.4, my bn node can only connected up to 3 ~ 6 peers, which caused only a few attestations can be published. The warning message is exactly the same as this issue.\r\n\r\nWARN Could not publish message error: InsufficientPeers, service: libp2p \r\n\r\nI'm running lighthouse bn in a NAS server(in docker) which already made port forwarding(9000 tcp/udp) in my router.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/747150514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748692336",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-748692336",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 748692336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0ODY5MjMzNg==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-21T00:09:30Z",
    "updated_at": "2020-12-21T00:09:30Z",
    "author_association": "MEMBER",
    "body": "We addressed some issues that could cause this in `v1.0.4`. If you could reach out to one of us on the discord server and provide some debug logs, we might be able to identify the issue. \r\nYou should always find more than 3~6 peers and if not something is wrong.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748692336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748715265",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-748715265",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 748715265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0ODcxNTI2NQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-21T01:59:13Z",
    "updated_at": "2020-12-21T01:59:13Z",
    "author_association": "MEMBER",
    "body": "I've noticed a similar thing initially. \r\n\r\nIt looks like there are a lot of prysm peers in the DHT. So when your node tries to discover new peers, it finds a lot of prysm peers. Prysm, once they have reached their target peers do not accept new connections. So you discover lots of peers but just can never connect to them. And you must cycle through many peers until you find other client peers or peers that aren't full. \r\n\r\nI think I'll modify the Lighthouse DHT to remove peers that don't take on new peers so it should be easier to find non-full prysm peers. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748715265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748715381",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-748715381",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 748715381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0ODcxNTM4MQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-21T01:59:46Z",
    "updated_at": "2020-12-21T01:59:46Z",
    "author_association": "MEMBER",
    "body": "I found after about 10-15 mins, I find some lighthouse nodes and easy reach the 50 peer target that I expect however. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748715381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748716643",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-748716643",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 748716643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0ODcxNjY0Mw==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-21T02:05:10Z",
    "updated_at": "2020-12-21T02:05:10Z",
    "author_association": "MEMBER",
    "body": "Will try and improve initial discovery by filtering out the \"full\" peers from the DHT: https://github.com/sigp/lighthouse/issues/2107",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/748716643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/760521188",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-760521188",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 760521188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDUyMTE4OA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-14T22:37:39Z",
    "updated_at": "2021-01-21T23:56:40Z",
    "author_association": "MEMBER",
    "body": "The sudden drops in peer count are ~~potentially~~ most likely related to #2155.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/760521188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/868264728",
    "html_url": "https://github.com/sigp/lighthouse/issues/2063#issuecomment-868264728",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2063",
    "id": 868264728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2ODI2NDcyOA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-25T06:43:56Z",
    "updated_at": "2021-06-25T06:43:56Z",
    "author_association": "MEMBER",
    "body": "I'm going to close this since it seems stale and unlikely to progress from here. Please re-open if you feel differently.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/868264728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

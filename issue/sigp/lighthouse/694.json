{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/694",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/694/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/694/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/694/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/694",
  "id": 535532741,
  "node_id": "MDU6SXNzdWU1MzU1MzI3NDE=",
  "number": 694,
  "title": "API additions required for blockchain explorers",
  "user": {
    "login": "peterbitfly",
    "id": 1674920,
    "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/peterbitfly",
    "html_url": "https://github.com/peterbitfly",
    "followers_url": "https://api.github.com/users/peterbitfly/followers",
    "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
    "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
    "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
    "repos_url": "https://api.github.com/users/peterbitfly/repos",
    "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
    "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1141293876,
      "node_id": "MDU6TGFiZWwxMTQxMjkzODc2",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/work-started",
      "name": "work-started",
      "color": "e072ab",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/sigp/lighthouse/milestones/4",
    "html_url": "https://github.com/sigp/lighthouse/milestone/4",
    "labels_url": "https://api.github.com/repos/sigp/lighthouse/milestones/4/labels",
    "id": 4933087,
    "node_id": "MDk6TWlsZXN0b25lNDkzMzA4Nw==",
    "number": 4,
    "title": "v0.1.1",
    "description": "This should contain patches to known bugs and improvements to the API.",
    "creator": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 42,
    "state": "closed",
    "created_at": "2019-12-15T02:10:11Z",
    "updated_at": "2020-01-19T23:45:41Z",
    "due_on": "2020-01-10T08:00:00Z",
    "closed_at": "2020-01-19T23:45:41Z"
  },
  "comments": 4,
  "created_at": "2019-12-10T06:53:07Z",
  "updated_at": "2019-12-19T00:45:29Z",
  "closed_at": "2019-12-19T00:45:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I had a look on your REST API in order to evaluate the feasibility to plug lighthouse into our open source block explorer beaconcha.in. Most of the API already provides most of the information required for the explorer but some crucial details are still missing:\r\n\r\n- The blocks object should also include the block root hash alongside the state root hash and parent root hash\r\n- Currently I could not find any call that returns the current balance of a validator, it would be great if it is included in the get_beacon_validators response alongside the effective balance\r\n- The get_beacon_validators should include the validator index alongside the validator public key\r\n- Add a get_beacon_validators_duties that returns the duties of all validators for a given epoch, otherwise we will have to call get_beacon_validator_duties with all public keys which might be not that performant (but I haven't tested this up to now)\r\n- In order to de-aggregate attestations and associate an attestation with the included validators we will need the beacon committees for each epoch. I couldn't find any call that returns the committees by epoch\r\n- In order to show participation statistics for each epoch add a call that shows the eligible ether, voted ether and the participation rate for each epoch\r\n\r\nWith those few changes we should be able to write a thin compatibility wrapper and have a dedicated instance of the lighthouse testnet available at https://beaconcha.in/\r\n\r\nFor optimal compatibility see the protobuf definitions provided by prysmaticlabs at https://github.com/prysmaticlabs/ethereumapis/ ",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/694/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/694/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564282184",
    "html_url": "https://github.com/sigp/lighthouse/issues/694#issuecomment-564282184",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/694",
    "id": 564282184,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NDI4MjE4NA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-10T22:10:13Z",
    "updated_at": "2019-12-10T22:10:13Z",
    "author_association": "MEMBER",
    "body": "Thank you, I will get onto this ASAP.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564282184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564332324",
    "html_url": "https://github.com/sigp/lighthouse/issues/694#issuecomment-564332324",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/694",
    "id": 564332324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NDMzMjMyNA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-11T01:12:34Z",
    "updated_at": "2019-12-11T01:12:34Z",
    "author_association": "MEMBER",
    "body": "Hey, thanks for this @ppratscher! I am starting to work on this over in #702. I have had a quick run though the list and had the following comments. Let me know what you think :)\r\n\r\n-----\r\n\r\n> The blocks object should also include the block root hash alongside the state root hash and parent root hash\r\n\r\nWe return `BlockResponse { root: Hash256, beacon_block: BeaconBlock }`. Unless I'm misunderstanding, I think all the info is there. It seems that the [Prysm API](https://github.com/prysmaticlabs/ethereumapis/blob/5287ac0973a9dd56285b8758ef7469705ba12966/eth/v1alpha1/beacon_chain.proto#L286-L292) does the same thing.\r\n\r\n> Add a get_beacon_validators_duties that returns the duties of all validators for a given epoch, otherwise we will have to call get_beacon_validator_duties with all public keys which might be not that performant (but I haven't tested this up to now)\r\n\r\nThis would boil down to a call of \"give me all duties for all active validators\", which currently would be over 16k. This sounds quite heavy, my first instinct would be to allow a filter by pubkey. If we do filter by pubkey, we end up at the `POST /beacon/validator/duties` endpoint where the request body is a list of pubkeys and the response body is their validators.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564332324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564461017",
    "html_url": "https://github.com/sigp/lighthouse/issues/694#issuecomment-564461017",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/694",
    "id": 564461017,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NDQ2MTAxNw==",
    "user": {
      "login": "peterbitfly",
      "id": 1674920,
      "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterbitfly",
      "html_url": "https://github.com/peterbitfly",
      "followers_url": "https://api.github.com/users/peterbitfly/followers",
      "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
      "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
      "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
      "repos_url": "https://api.github.com/users/peterbitfly/repos",
      "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-11T09:43:38Z",
    "updated_at": "2019-12-11T09:43:38Z",
    "author_association": "NONE",
    "body": "Hm, according to your api docs at https://app.swaggerhub.com/apis-docs/spble/lighthouse_rest_api/0.2.0#/Phase0/get_beacon_blocks the response does not contain the block root or I might have missed it. I did not yet try it with the live api.\r\n\r\nFor a block explorer we need all duties for a given epoch, otherwise we are unable to identify missed blocks and potentially down validators. We cache the epoch duties locally so as long as the RPC call returns within a few seconds it should not affect our indexer performance.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564461017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564804391",
    "html_url": "https://github.com/sigp/lighthouse/issues/694#issuecomment-564804391",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/694",
    "id": 564804391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2NDgwNDM5MQ==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-12T01:11:20Z",
    "updated_at": "2019-12-12T01:11:44Z",
    "author_association": "MEMBER",
    "body": "> Hm, according to your api docs at https://app.swaggerhub.com/apis-docs/spble/lighthouse_rest_api/0.2.0#/Phase0/get_beacon_blocks the response does not contain the block root or I might have missed it. I did not yet try it with the live api.\r\n\r\nAh yes, we had to stop maintaining the OpenAPI docs because they were too burdensome and fiddly to update as the spec kept changing. Apologies we did not reflect this in the docs.\r\n\r\nI have started a refactor of the docs in #702. You can preview the work here:\r\n\r\nhttps://github.com/sigp/lighthouse/blob/7bbc82458a17015a624addcd849a76c0181d82e7/book/src/http.md\r\n\r\n> For a block explorer we need all duties for a given epoch, otherwise we are unable to identify missed blocks and potentially down validators. We cache the epoch duties locally so as long as the RPC call returns within a few seconds it should not affect our indexer performance.\r\n\r\nSure, I will make sure we can do a call to get all validator duties.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/564804391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

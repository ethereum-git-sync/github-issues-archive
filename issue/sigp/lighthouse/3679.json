{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3679",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3679/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3679/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3679/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3679",
  "id": 1433878066,
  "node_id": "I_kwDOCFeAzc5Vdz4y",
  "number": 3679,
  "title": "`publish-crate` CI is failing",
  "user": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-11-02T22:38:13Z",
  "updated_at": "2023-07-21T05:56:41Z",
  "closed_at": "2023-07-21T05:56:40Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI just pushed the `eth2-ssz-v0.4.1` tag to trigger a publish to crates.io, however the [run failed](https://github.com/sigp/lighthouse/actions/runs/3381566007/jobs/5615610385) with:\r\n\r\n```\r\nRun ./scripts/ci/publish.sh consensus/ssz eth2_ssz \"$TAG\"\r\nVerifying if eth2_ssz v0.4.1 can be released\r\nexpected to release version 0.4.1, but Cargo.toml contained ///home/runner/work/lighthouse/lighthouse/consensus/ssz#eth2_ssz@0.4.1\r\nError: Process completed with exit code 1.\r\n```\r\n\r\nI think it's an issue with [this line](https://github.com/sigp/lighthouse/blob/6d5a2b509fac7b6ffe693866f58ba49989f946d7/scripts/ci/publish.sh#L29). Locally, I get:\r\n\r\n```\r\ncargo pkgid | sed -n 's/.*:\\(.*\\)/\\1/p'\r\n///home/paul/development/lighthouse/consensus/ssz#eth2_ssz@0.4.1\r\n```\r\n\r\nI suspect that we need to modify the regex to capture what's following the the `@`. However, when looking at the structure of the current regex, I'm wondering what has changed to break this :thinking:",
  "closed_by": {
    "login": "jimmygchen",
    "id": 742762,
    "node_id": "MDQ6VXNlcjc0Mjc2Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/742762?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimmygchen",
    "html_url": "https://github.com/jimmygchen",
    "followers_url": "https://api.github.com/users/jimmygchen/followers",
    "following_url": "https://api.github.com/users/jimmygchen/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimmygchen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimmygchen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimmygchen/subscriptions",
    "organizations_url": "https://api.github.com/users/jimmygchen/orgs",
    "repos_url": "https://api.github.com/users/jimmygchen/repos",
    "events_url": "https://api.github.com/users/jimmygchen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimmygchen/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3679/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3679/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1301464251",
    "html_url": "https://github.com/sigp/lighthouse/issues/3679#issuecomment-1301464251",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3679",
    "id": 1301464251,
    "node_id": "IC_kwDOCFeAzc5NksS7",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-02T22:50:06Z",
    "updated_at": "2022-11-02T22:50:06Z",
    "author_association": "MEMBER",
    "body": "I wonder if we should add crate publishing to the release CI?\n\nWe could version the deps by Lighthouse's version and bump them all in one go. It would violate semantic versioning for the deps and lead to some versions with the same content and different version numbers, but at least the crates would get published consistently. Users downstream might also like the match between Lighthouse versions and crate versions.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1301464251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1645021894",
    "html_url": "https://github.com/sigp/lighthouse/issues/3679#issuecomment-1645021894",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3679",
    "id": 1645021894,
    "node_id": "IC_kwDOCFeAzc5iDQrG",
    "user": {
      "login": "jimmygchen",
      "id": 742762,
      "node_id": "MDQ6VXNlcjc0Mjc2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/742762?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimmygchen",
      "html_url": "https://github.com/jimmygchen",
      "followers_url": "https://api.github.com/users/jimmygchen/followers",
      "following_url": "https://api.github.com/users/jimmygchen/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimmygchen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimmygchen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimmygchen/subscriptions",
      "organizations_url": "https://api.github.com/users/jimmygchen/orgs",
      "repos_url": "https://api.github.com/users/jimmygchen/repos",
      "events_url": "https://api.github.com/users/jimmygchen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimmygchen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-21T05:56:40Z",
    "updated_at": "2023-07-21T05:56:40Z",
    "author_association": "MEMBER",
    "body": "Closing this as the publish crate workflow no longer exists in this repo, and is now in individual repos with its own CI workflows.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1645021894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

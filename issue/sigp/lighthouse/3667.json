{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3667",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3667",
  "id": 1426294075,
  "node_id": "I_kwDOCFeAzc5VA4U7",
  "number": 3667,
  "title": "Beacon node fails to send metrics to remote endpoint",
  "user": {
    "login": "gsvpers",
    "id": 89644625,
    "node_id": "MDQ6VXNlcjg5NjQ0NjI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/89644625?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gsvpers",
    "html_url": "https://github.com/gsvpers",
    "followers_url": "https://api.github.com/users/gsvpers/followers",
    "following_url": "https://api.github.com/users/gsvpers/following{/other_user}",
    "gists_url": "https://api.github.com/users/gsvpers/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gsvpers/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gsvpers/subscriptions",
    "organizations_url": "https://api.github.com/users/gsvpers/orgs",
    "repos_url": "https://api.github.com/users/gsvpers/repos",
    "events_url": "https://api.github.com/users/gsvpers/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gsvpers/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-10-27T21:37:02Z",
  "updated_at": "2022-11-16T17:54:26Z",
  "closed_at": "2022-10-28T02:59:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nBeacon node configuration that used to be capable of sending metrics to beaconcha.in now fails. Validator uses the same configuration and works fine.\r\n\r\n## Version\r\n3.1.2, 3.2.0, 3.2.1\r\n\r\n## Present Behaviour\r\n\r\nERRO Failed to send metrics to remote endpoint, error: StatusCode(400), service: monitoring_client\r\n\r\n## Expected Behaviour\r\n\r\nShould only be seeing the log: INFO Sending metrics to remote endpoint.   endpoint: https://beaconcha.in\r\n\r\n## Steps to resolve\r\n\r\nValidated this configuration: \r\n\r\nlighthouse bn \\\r\n  --staking \\\r\n  --validator-monitor-auto \\\r\n  --metrics \\\r\n  --network mainnet \\\r\n  --datadir /home/me/thedir \\\r\n  --builder http://127.0.0.1:18550 \\\r\n  --execution-endpoint http://127.0.0.1:8551 \\\r\n  --jwt-secrets=\"/the/secret\" \\\r\n  --monitoring-endpoint https://beaconcha.in/api/v1/client/metrics?apikey=THEKEY\r\n\r\nLooks like it should work. Minor issue given that there is no impact to staking.\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3667/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1294384798",
    "html_url": "https://github.com/sigp/lighthouse/issues/3667#issuecomment-1294384798",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667",
    "id": 1294384798,
    "node_id": "IC_kwDOCFeAzc5NJr6e",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-28T02:59:03Z",
    "updated_at": "2022-10-28T02:59:03Z",
    "author_association": "MEMBER",
    "body": "The beaconcha.in devs have indicated that the free plan only includes one process worth of metrics, and they occasionally change how they meter this.\r\n\r\nThe workaround is to reduce the frequency that Lighthouse sends metrics: https://lighthouse-book.sigmaprime.io/advanced_metrics.html#update-period",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1294384798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1317350963",
    "html_url": "https://github.com/sigp/lighthouse/issues/3667#issuecomment-1317350963",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667",
    "id": 1317350963,
    "node_id": "IC_kwDOCFeAzc5OhS4z",
    "user": {
      "login": "brddd",
      "id": 20145206,
      "node_id": "MDQ6VXNlcjIwMTQ1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/20145206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brddd",
      "html_url": "https://github.com/brddd",
      "followers_url": "https://api.github.com/users/brddd/followers",
      "following_url": "https://api.github.com/users/brddd/following{/other_user}",
      "gists_url": "https://api.github.com/users/brddd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brddd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brddd/subscriptions",
      "organizations_url": "https://api.github.com/users/brddd/orgs",
      "repos_url": "https://api.github.com/users/brddd/repos",
      "events_url": "https://api.github.com/users/brddd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brddd/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-16T16:58:44Z",
    "updated_at": "2022-11-16T16:58:44Z",
    "author_association": "NONE",
    "body": "> The beaconcha.in devs have indicated that the free plan only includes one process worth of metrics, and they occasionally change how they meter this.\r\n> \r\n> The workaround is to reduce the frequency that Lighthouse sends metrics: https://lighthouse-book.sigmaprime.io/advanced_metrics.html#update-period\r\n\r\nWhile this is true, I'm part of the \"goldfish\" plan which allows monitoring of two machines, and still seeing this while monitoring only one machine.\r\n\r\nButta mentioned a lighthouse double send bug today in the beaconcha.in discord:   https://discord.com/channels/1020286473938927627/1020286475352424482/1042358746883555338 \r\n\r\n```\r\nIs your app reflecting the data correctly regardless?\r\nit's possible that this is similar to the Lighthouse-monitoring \"bug\" where it sends the requests twice and causes this error; but the mobile app just displays everything as expected\r\nthe limit is 1req/min , so maybe you can adjust the publish interval flag?\r\n```\r\n\r\nI have tweaked the metrics update period to reduce the number of errors, but still see it.   Is the above lighthouse monitoring \"bug\" known?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1317350963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1317425660",
    "html_url": "https://github.com/sigp/lighthouse/issues/3667#issuecomment-1317425660",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3667",
    "id": 1317425660,
    "node_id": "IC_kwDOCFeAzc5OhlH8",
    "user": {
      "login": "gsvpers",
      "id": 89644625,
      "node_id": "MDQ6VXNlcjg5NjQ0NjI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/89644625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gsvpers",
      "html_url": "https://github.com/gsvpers",
      "followers_url": "https://api.github.com/users/gsvpers/followers",
      "following_url": "https://api.github.com/users/gsvpers/following{/other_user}",
      "gists_url": "https://api.github.com/users/gsvpers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gsvpers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gsvpers/subscriptions",
      "organizations_url": "https://api.github.com/users/gsvpers/orgs",
      "repos_url": "https://api.github.com/users/gsvpers/repos",
      "events_url": "https://api.github.com/users/gsvpers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gsvpers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-16T17:54:26Z",
    "updated_at": "2022-11-16T17:54:26Z",
    "author_association": "NONE",
    "body": "same.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1317425660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4543",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4543/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4543/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4543/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4543",
  "id": 1821650788,
  "node_id": "I_kwDOCFeAzc5slC9k",
  "number": 4543,
  "title": "Assimilate libp2p banning and connection limits into our peer manager",
  "user": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2336800125,
      "node_id": "MDU6TGFiZWwyMzM2ODAwMTI1",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/t%20Networking",
      "name": "t Networking",
      "color": "40E0D0",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "jxs",
    "id": 1204690,
    "node_id": "MDQ6VXNlcjEyMDQ2OTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1204690?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jxs",
    "html_url": "https://github.com/jxs",
    "followers_url": "https://api.github.com/users/jxs/followers",
    "following_url": "https://api.github.com/users/jxs/following{/other_user}",
    "gists_url": "https://api.github.com/users/jxs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jxs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jxs/subscriptions",
    "organizations_url": "https://api.github.com/users/jxs/orgs",
    "repos_url": "https://api.github.com/users/jxs/repos",
    "events_url": "https://api.github.com/users/jxs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jxs/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "jxs",
      "id": 1204690,
      "node_id": "MDQ6VXNlcjEyMDQ2OTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1204690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jxs",
      "html_url": "https://github.com/jxs",
      "followers_url": "https://api.github.com/users/jxs/followers",
      "following_url": "https://api.github.com/users/jxs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jxs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jxs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jxs/subscriptions",
      "organizations_url": "https://api.github.com/users/jxs/orgs",
      "repos_url": "https://api.github.com/users/jxs/repos",
      "events_url": "https://api.github.com/users/jxs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jxs/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-26T06:10:16Z",
  "updated_at": "2023-10-09T21:16:53Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe Lighthouse `PeerManager` has historically behaved as a wrapper around a libp2p swarm managing high-level logic about our peers. \r\n\r\nThe newer versions of libp2p allow greater control over peers through added messages being sent to behaviours. In particular, a behaviour can now handle banned peers as well as connection limits and greater control over whether connections can be established or not. \r\n\r\nCurrently we are relying on the swarm for banning peers and a separate connection limit behaviour to handle connection limits. As the PeerManager is now a fully fledged behaviour, it makes sense to just unify these into our own implementation. More specifically, implement the connection limit behaviour inside the peer manager. Also implement the banning of peers inside the behaviour, rather than passing messages back up to the swarm. \r\n\r\nI imagine this should simplify a bit of our code and the cognitive overhead of tracing messages around all over the place.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4543/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4543/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1663644088",
    "html_url": "https://github.com/sigp/lighthouse/issues/4543#issuecomment-1663644088",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4543",
    "id": 1663644088,
    "node_id": "IC_kwDOCFeAzc5jKTG4",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T09:41:01Z",
    "updated_at": "2023-08-03T09:41:01Z",
    "author_association": "MEMBER",
    "body": "The peer manager is a behaviour. Our composite behaviour is found here: https://github.com/sigp/lighthouse/blob/stable/beacon_node/lighthouse_network/src/service/behaviour.rs#L32\n\nIt has its own module here: https://github.com/sigp/lighthouse/blob/stable/beacon_node/lighthouse_network/src/peer_manager/mod.rs\n\nThe network behaviour trait is implemented here: https://github.com/sigp/lighthouse/blob/stable/beacon_node/lighthouse_network/src/peer_manager/mod.rs\n\nIts worth having a look through the higher level struct and trying to figure out what it does. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1663644088/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/933",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/933/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/933/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/933/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/933",
  "id": 583617144,
  "node_id": "MDU6SXNzdWU1ODM2MTcxNDQ=",
  "number": 933,
  "title": "ERRO Failed to update eth1 deposit cache     error: GetBlockNumberFailed(\"Failed to get block number: Request failed: Error(Url(RelativeUrlWithoutBase))\"), service: beacon",
  "user": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-03-18T10:13:56Z",
  "updated_at": "2020-03-18T10:16:29Z",
  "closed_at": "2020-03-18T10:16:29Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Description\r\n\r\nI try to run a custom testnet but it fails to connect to my local Parity Görli node.\r\n\r\n### Present Behaviour\r\n\r\nI run a local Parity Görli node with all RPC APIs exposed:\r\n\r\n```\r\n~\r\n❯ parity --chain görli --ports-shift 1234 --jsonrpc-apis all\r\n2020-03-18 11:06:52  Starting Parity-Ethereum/v2.7.2-stable-2662d1925e-20200206/x86_64-unknown-linux-gnu/rustc1.41.0\r\n2020-03-18 11:06:52  Keys path /home/user/.local/share/io.parity.ethereum/keys/goerli\r\n2020-03-18 11:06:52  DB path /home/user/.local/share/io.parity.ethereum/chains/goerli/db/b1d518969eab529d\r\n2020-03-18 11:06:52  State DB configuration: fast\r\n2020-03-18 11:06:52  Operating mode: active\r\n2020-03-18 11:06:53  Configured for Görli Testnet using Clique engine\r\n2020-03-18 11:06:55  NAT mapped to external address 192.168.1.100:31537\r\n2020-03-18 11:06:55  Public node URL: enode://e2ea472bcbf28c3a5784e34f6ca05cca9c87779885af013eaf3ecc4d0f213e19a20f4170b83945631507b84187368df51dcb15011da4f2c125e9a1e58f258934@192.168.1.100:31537\r\n2020-03-18 11:07:00  Syncing #2356636 0x7466…4808     0.00 blk/s    0.0 tx/s    0.0 Mgas/s      0+  379 Qed  #2359175    8/25 peers   0 bytes chain 60 MiB db 2 MiB queue 19 MiB sync  RPC:  0 conn,    0 req/s,    0 µs\r\n2020-03-18 11:07:04  Reorg to #2356637 0xb176…7eeb (0x7466…4808 #2356635 0xa50a…0559 0x2e71…7d20)\r\n2020-03-18 11:07:05  Syncing #2356694 0x4293…3db2    11.59 blk/s   14.6 tx/s    4.8 Mgas/s      0+ 9597 Qed  #2366294    8/25 peers   88 KiB chain 60 MiB db 44 MiB queue 7 MiB sync  RPC:  0 conn,    0 req/s,    0 µs\r\n2020-03-18 11:07:10  Syncing #2356912 0x55bb…212c    43.57 blk/s   70.2 tx/s   24.2 Mgas/s      0+ 9381 Qed  #2366294    8/25 peers   184 KiB chain 68 MiB db 42 MiB queue 7 MiB sync  RPC:  0 conn,    0 req/s,    0 µs\r\n2020-03-18 11:07:15  Syncing #2357245 0x4b92…a9db    66.60 blk/s  114.4 tx/s   38.3 Mgas/s      0+ 9045 Qed  #2366294    8/25 peers   299 KiB chain 68 MiB db 41 MiB queue 7 MiB sync  RPC:  0 conn,    0 req/s,    0 µs\r\n2020-03-18 11:07:20  Syncing #2357649 0x2831…a339    80.80 blk/s  146.8 tx/s   39.4 Mgas/s      0+ 8640 Qed  #2366291    8/25 peers   438 KiB chain 65 MiB db 39 MiB queue 7 MiB sync  RPC:  0 conn,    0 req/s,    0 µs\r\n```\r\n\r\nAnd I run a Lighthouse custom beacon chain node that fails to connect to Görli on Port 9779:\r\n\r\n```\r\n~/.opt/lighthouse master ⇣\r\n❯ target/release/lighthouse b --testnet-dir ~/.lighthouse/schlesi --spec mainnet --eth1-endpoint 127.0.0.1:9779\r\nMar 18 11:08:00.836 WARN Ethereum 2.0 is pre-release. This software is experimental.\r\nMar 18 11:08:00.837 INFO Starting from an empty database         data_dir: \"/home/user/.lighthouse/beacon\"\r\nMar 18 11:08:00.887 INFO Waiting for eth2 genesis from eth1      eth1_node: 127.0.0.1:9779, service: beacon\r\nMar 18 11:08:07.931 ERRO Failed to update eth1 deposit cache     error: GetBlockNumberFailed(\"Failed to get block number: Request failed: Error(Url(RelativeUrlWithoutBase))\"), service: beacon\r\nMar 18 11:08:14.945 ERRO Failed to update eth1 deposit cache     error: GetBlockNumberFailed(\"Failed to get block number: Request failed: Error(Url(RelativeUrlWithoutBase))\"), service: beacon\r\nMar 18 11:08:21.966 ERRO Failed to update eth1 deposit cache     error: GetBlockNumberFailed(\"Failed to get block number: Request failed: Error(Url(RelativeUrlWithoutBase))\"), service: beacon\r\nMar 18 11:08:28.990 ERRO Failed to update eth1 deposit cache     error: GetBlockNumberFailed(\"Failed to get block number: Request failed: Error(Url(RelativeUrlWithoutBase))\"), service: beacon\r\nMar 18 11:08:36.014 ERRO Failed to update eth1 deposit cache     error: GetBlockNumberFailed(\"Failed to get block number: Request failed: Error(Url(RelativeUrlWithoutBase))\"), service: beacon\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nI was assuming that connecting to a local Görli node should work smoothly.\r\n\r\n## Steps to resolve\r\n\r\nThis is my testnet config: https://gist.github.com/q9f/d6eea3ea3356e41bde81864143284ce9\r\n\r\nAnd my field notes: https://hackmd.io/GIwaFeGaQn6q7VYb_n94LA?both\r\n\r\nI'm unable to resolve this on my own. Why would it fail to update the eth1 deposit cache?\r\n\r\nThe contract does not have any deposits yet. But that shouldn't be of an issue? https://goerli.etherscan.io/address/0xaa888248144bc5d584a7f400839d0d912f21c39a\r\n",
  "closed_by": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/933/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/933/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/600536780",
    "html_url": "https://github.com/sigp/lighthouse/issues/933#issuecomment-600536780",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/933",
    "id": 600536780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMDUzNjc4MA==",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-18T10:16:29Z",
    "updated_at": "2020-03-18T10:16:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, sorry for the buzz, I forgot to pass the protocol (HTTP)\r\n\r\n```\r\n--eth1-endpoint http://127.0.0.1:9779\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/600536780/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

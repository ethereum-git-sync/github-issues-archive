{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3338",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3338",
  "id": 1306175688,
  "node_id": "I_kwDOCFeAzc5N2qjI",
  "number": 3338,
  "title": "Goerli / Prater network alias",
  "user": {
    "login": "realbigsean",
    "id": 5160426,
    "node_id": "MDQ6VXNlcjUxNjA0MjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5160426?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/realbigsean",
    "html_url": "https://github.com/realbigsean",
    "followers_url": "https://api.github.com/users/realbigsean/followers",
    "following_url": "https://api.github.com/users/realbigsean/following{/other_user}",
    "gists_url": "https://api.github.com/users/realbigsean/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/realbigsean/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/realbigsean/subscriptions",
    "organizations_url": "https://api.github.com/users/realbigsean/orgs",
    "repos_url": "https://api.github.com/users/realbigsean/repos",
    "events_url": "https://api.github.com/users/realbigsean/events{/privacy}",
    "received_events_url": "https://api.github.com/users/realbigsean/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3743113288,
      "node_id": "LA_kwDOCFeAzc7fG2BI",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/bellatrix",
      "name": "bellatrix",
      "color": "A906A4",
      "default": false,
      "description": "Required to support the Bellatrix Upgrade"
    },
    {
      "id": 4340714867,
      "node_id": "LA_kwDOCFeAzc8AAAABAroNcw",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/v2.4.0",
      "name": "v2.4.0",
      "color": "2CCFB3",
      "default": false,
      "description": "Required for releasing v2.4.0"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-07-15T15:33:43Z",
  "updated_at": "2022-07-22T01:48:59Z",
  "closed_at": "2022-07-22T01:48:59Z",
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThis was brought up in Discord by @yorickdowne. It feels like we should support `--network goerli` because it's the longer-standing network name and it's not intuitive to have a different EL and CL network name. We've had a discrepancy in EL/CL names the past but not on testnets that are planned for long-term use.\r\n\r\nIt's not as easy as I originally thought to support both names though. A few things we could maybe do:\r\n\r\n1. [Alias](https://docs.rs/clap/latest/clap/struct.PossibleValue.html#method.alias) the `prater` value in `clap` unfortunately it isn't possible to alias values until we upgrade to `clap` `v3.0`. This also would lead to some weird behavior. Value aliases are hidden (I think) so we could only display one of the two names. You would also potentially have the default datadir's name be different from the network name you provided.\r\n2. Add a built in network config named `goerli` that's just a duplicate of the `prater` config. This would be easy to do but more of a pain to maintain. You would also instantiate a different datadir based on which network name you are using which is.. weird.\r\n3. Support aliases in `Eth2NetworkConfig::constant` - this seems like it might be a decent solution but we'd have to create something like a new `HARDCODED_NET_NAMES_WITH_ALIASES` array and use that with `clap` possible values. We would then *also* have to update `get_network_dir` to make sure aliases are used there because we are directly getting the network dir from the `network` flag\r\n4. Leave everything as-is, I'm not totally sure it's worth the trouble\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3338/reactions",
    "total_count": 3,
    "+1": 3,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1186450099",
    "html_url": "https://github.com/sigp/lighthouse/issues/3338#issuecomment-1186450099",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338",
    "id": 1186450099,
    "node_id": "IC_kwDOCFeAzc5Gt8qz",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-17T08:54:46Z",
    "updated_at": "2022-07-17T08:54:46Z",
    "author_association": "MEMBER",
    "body": "I have a feeling that other consensus clients will adopt this alias and that we'll be expected to as well. I would lean towards (3), I'm not exactly sure how to go about it though. I suspect it's possible but it'll involve fiddling with some macros.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1186450099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1188444083",
    "html_url": "https://github.com/sigp/lighthouse/issues/3338#issuecomment-1188444083",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338",
    "id": 1188444083,
    "node_id": "IC_kwDOCFeAzc5G1jez",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-18T23:45:01Z",
    "updated_at": "2022-07-18T23:45:01Z",
    "author_association": "MEMBER",
    "body": "I'm going to have a play around and see if I can make this work now.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1188444083/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1188502834",
    "html_url": "https://github.com/sigp/lighthouse/issues/3338#issuecomment-1188502834",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338",
    "id": 1188502834,
    "node_id": "IC_kwDOCFeAzc5G1x0y",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T01:42:21Z",
    "updated_at": "2022-07-19T01:42:21Z",
    "author_association": "MEMBER",
    "body": "I didn't consider this properly, but if we just use an alias then users will use `--network goerli` and end up with a `.lighthouse/prater` data directory. That might be a bit challenging for our documentation.\r\n\r\nI'm going to have a look at making a unique Goerli network that shares the same genesis state as Prater. I think the only real downside to just having Prater/Goerli separate is the duplication of the genesis state.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1188502834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1188723019",
    "html_url": "https://github.com/sigp/lighthouse/issues/3338#issuecomment-1188723019",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338",
    "id": 1188723019,
    "node_id": "IC_kwDOCFeAzc5G2nlL",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-19T07:54:56Z",
    "updated_at": "2022-07-19T07:54:56Z",
    "author_association": "MEMBER",
    "body": "I have two competing implementations at:\r\n\r\n- #3346\r\n- #3348",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1188723019/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1189976253",
    "html_url": "https://github.com/sigp/lighthouse/issues/3338#issuecomment-1189976253",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3338",
    "id": 1189976253,
    "node_id": "IC_kwDOCFeAzc5G7Zi9",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-20T08:22:19Z",
    "updated_at": "2022-07-20T08:23:29Z",
    "author_association": "MEMBER",
    "body": "Regarding option A (#3346) vs option B (#3348), it seems that we have consensus among LH developers that option A is preferred. I am also of that mind.\r\n\r\nThe difference between the two is:\r\n\r\n- Option A: use `--network goerli` and get a datadir in `~/.lighthouse/goerli`\r\n- Option B: use `--network goerli` and get a datadir in `~/.lighthouse/prater`\r\n\r\nI think the nice things about option B is that it:\r\n\r\n1. Allows *existing* users to start using `--network goerli` today without requiring any extra effort.\r\n2. Whilst it has the weirdness of `--network goerli` creating a `./lighthouse/prater` directory, we leave the door open to an automatic migration in the future.\r\n\r\nRegarding (1), I don't see a huge amount of value in getting *existing* users to switch from \"prater\" to \"goerli\". I think they already have a very good understanding that the two networks are related and merging together. The idea that your Prater CL connects to a Goerli EL is well understood for existing users.\r\n\r\nRegarding (2), it would be nice to do an automatic directory migration. However, I'm aware that this is not as simple as `mv prater goerli`. Since the `validator_definitions.yml` file (regretfully) uses absolute paths we're going to need to do some YAML twiddling as well. I'm also concerned about the scenario where someone with an automated devops environment switches to `--network goerli` but leaves their scripts to assume the datadir is at `.lighthouse/prater`. Then, we come along with the automatic-migration release and move that directory on them.\r\n\r\nSo, with option B we are saying:\r\n\r\n*\"You can change your `--network` flag now and but we'll leave your datadir where it is. However, we might or might not move that datadir in the future.\"*\r\n\r\nWhereas with option A we are saying:\r\n\r\n*\"If you want to keep everything the same, don't touch your `--network` flag. If you want to change your `--network` flag, then you're going to need to manually migrate your datadir.\"*\r\n\r\nAlso with option A we know the following facts:\r\n\r\n1. All *existing* Prater devops setups are necessarily compatible with supplying \"prater\" to their CL and \"goerli\" to their EL.\r\n1. All *new* devops setups can use \"--network goerli\" they'll get an entirely predictable datadir that we're not planning to move.\r\n\r\nGiven that \"prater\" isn't an offensive or damaging word and it's totally OK if it lingers in existing setups, I'm much more partial to the idea that option A is consistent, stable and doesn't suggest we *might* do something later.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1189976253/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

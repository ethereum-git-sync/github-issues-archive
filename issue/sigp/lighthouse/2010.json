{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2010",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2010/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2010/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2010/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2010",
  "id": 752912894,
  "node_id": "MDU6SXNzdWU3NTI5MTI4OTQ=",
  "number": 2010,
  "title": "Discv5 update causes build failures on rust <1.47",
  "user": {
    "login": "alexandervdm",
    "id": 74738,
    "node_id": "MDQ6VXNlcjc0NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/74738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexandervdm",
    "html_url": "https://github.com/alexandervdm",
    "followers_url": "https://api.github.com/users/alexandervdm/followers",
    "following_url": "https://api.github.com/users/alexandervdm/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexandervdm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexandervdm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexandervdm/subscriptions",
    "organizations_url": "https://api.github.com/users/alexandervdm/orgs",
    "repos_url": "https://api.github.com/users/alexandervdm/repos",
    "events_url": "https://api.github.com/users/alexandervdm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexandervdm/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2490305065,
      "node_id": "MDU6TGFiZWwyNDkwMzA1MDY1",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/A1",
      "name": "A1",
      "color": "223184",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-11-29T13:06:18Z",
  "updated_at": "2020-11-30T13:34:12Z",
  "closed_at": "2020-11-30T13:34:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe recent upgrades to discv5 in commit a567f788bdd9c521211f8d5c754cae8e0ee97edf have inadvertently caused compilation with rustc versions below 1.47 to fail. The code in question seems to rely on [improvements](https://blog.rust-lang.org/2020/10/08/Rust-1.47.html#traits-on-larger-arrays)  for traits on larger arrays that were introduced in rustc 1.47. \r\n\r\n## Version\r\n\r\nLighthouse 1.0.2 tag with rustc 1.46.0\r\n\r\n## Present Behaviour\r\n\r\n```\r\nerror[E0277]: arrays only have std trait implementations for lengths 0..=32\r\n   --> /home/alexander/.cargo/registry/src/github.com-1ecc6299db9ec823/discv5-0.1.0-beta.2/src/packet/mod.rs:52:37\r\n    |\r\n52  |         write!(f, \"{}\", hex::encode(&self.0))\r\n    |                                     ^^^^^^^ the trait `std::array::LengthAtMost32` is not implemented for `[u8; 63]`\r\n    | \r\n   ::: /home/alexander/.cargo/registry/src/github.com-1ecc6299db9ec823/hex-0.4.2/src/lib.rs:246:18\r\n    |\r\n246 | pub fn encode<T: AsRef<[u8]>>(data: T) -> String {\r\n    |                  ----------- required by this bound in `hex::encode`\r\n    |\r\n    = note: required because of the requirements on the impl of `std::convert::AsRef<[u8]>` for `[u8; 63]`\r\n    = note: required because of the requirements on the impl of `std::convert::AsRef<[u8]>` for `&[u8; 63]`\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0277`.\r\nerror: could not compile `discv5`.\r\n```\r\n\r\n## Expected Behaviour\r\n\r\nExit code 0\r\n\r\n## Steps to resolve\r\n\r\nThis issue seems to be related to #2003 where another build problem for the v1.0.1 release is described when building with rustc <1.47. I'm hoping you are willing to keep lighthouse compatible with older versions like rustc 1.46 since upgrading the toolchain so close to launch would be a pain.\r\n",
  "closed_by": {
    "login": "alexandervdm",
    "id": 74738,
    "node_id": "MDQ6VXNlcjc0NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/74738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexandervdm",
    "html_url": "https://github.com/alexandervdm",
    "followers_url": "https://api.github.com/users/alexandervdm/followers",
    "following_url": "https://api.github.com/users/alexandervdm/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexandervdm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexandervdm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexandervdm/subscriptions",
    "organizations_url": "https://api.github.com/users/alexandervdm/orgs",
    "repos_url": "https://api.github.com/users/alexandervdm/repos",
    "events_url": "https://api.github.com/users/alexandervdm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexandervdm/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2010/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2010/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735457015",
    "html_url": "https://github.com/sigp/lighthouse/issues/2010#issuecomment-735457015",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2010",
    "id": 735457015,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTQ1NzAxNQ==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-29T21:33:36Z",
    "updated_at": "2020-11-29T21:34:18Z",
    "author_association": "MEMBER",
    "body": "Historically, we haven't attempted to maintain compatibility with previous versions of Rust. The new features added to the language can be very useful and I'm not convinced of the benefits of supporting older toolchains when that means missing out on new, stable features.\r\n\r\n> upgrading the toolchain so close to launch would be a pain.\r\n\r\nIn my experience, this is a simple `rustup update`. Perhaps understanding why this is so painful in your case would help me understand why we should support older toolchains.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735457015/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735788794",
    "html_url": "https://github.com/sigp/lighthouse/issues/2010#issuecomment-735788794",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2010",
    "id": 735788794,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTc4ODc5NA==",
    "user": {
      "login": "alexandervdm",
      "id": 74738,
      "node_id": "MDQ6VXNlcjc0NzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/74738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexandervdm",
      "html_url": "https://github.com/alexandervdm",
      "followers_url": "https://api.github.com/users/alexandervdm/followers",
      "following_url": "https://api.github.com/users/alexandervdm/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexandervdm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexandervdm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexandervdm/subscriptions",
      "organizations_url": "https://api.github.com/users/alexandervdm/orgs",
      "repos_url": "https://api.github.com/users/alexandervdm/repos",
      "events_url": "https://api.github.com/users/alexandervdm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexandervdm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-30T13:34:12Z",
    "updated_at": "2020-11-30T13:34:12Z",
    "author_association": "NONE",
    "body": "That's understandable. I maintain a custom (and I realize unsupported) build for [lighthouse](https://github.com/alexandervdm/ethereum-openbsd/blob/master/net/lighthouse/Makefile) on OpenBSD. Don't think rustup works, but it being a pain to upgrade was overstated and a poor choice of words on my part.\r\n\r\nI aim to stay compatible with what OpenBSD provides in its stable channel as much as possible, but have diverged wrt rustc and future builds will track whatever your build env is using. Thank you for a very performant client.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735788794/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

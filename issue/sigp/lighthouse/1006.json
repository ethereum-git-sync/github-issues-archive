{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1006",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1006",
  "id": 599892956,
  "node_id": "MDU6SXNzdWU1OTk4OTI5NTY=",
  "number": 1006,
  "title": "datadir not working consistently",
  "user": {
    "login": "ethers",
    "id": 6937903,
    "node_id": "MDQ6VXNlcjY5Mzc5MDM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6937903?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ethers",
    "html_url": "https://github.com/ethers",
    "followers_url": "https://api.github.com/users/ethers/followers",
    "following_url": "https://api.github.com/users/ethers/following{/other_user}",
    "gists_url": "https://api.github.com/users/ethers/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ethers/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ethers/subscriptions",
    "organizations_url": "https://api.github.com/users/ethers/orgs",
    "repos_url": "https://api.github.com/users/ethers/repos",
    "events_url": "https://api.github.com/users/ethers/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ethers/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 985647281,
      "node_id": "MDU6TGFiZWw5ODU2NDcyODE=",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/bug",
      "name": "bug",
      "color": "d73a4a",
      "default": true,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-04-14T22:18:22Z",
  "updated_at": "2020-09-09T01:19:05Z",
  "closed_at": "2020-09-09T01:19:05Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nFrom https://lighthouse-book.sigmaprime.io/become-a-validator-source.html\r\nRun all the lighthouse commands but specify a `-d someDataDir`\r\n\r\nThere appears to be some implied paths because when you get to\r\n`lighthouse -d someDataDir validator`\r\nYou get:\r\n`error: Unable to get voting keypair: Keypair file does not exist`\r\n\r\n## Version\r\n\r\nLighthouse 0.1.1\r\ntestnet5 branch\r\n\r\n## Present Behaviour\r\n\r\nAs above\r\n\r\n## Expected Behaviour\r\n\r\n`lighthouse validator -d someDataDir` shoud just work.\r\n\r\nFrom user perspective, the different lighthouse commands should NOT require different datadir parameters.\r\n\r\nRunning \r\n`lighthouse -d someDataDir beacon ...`\r\n`lighthouse -d someDataDir account ...`\r\n`lighthouse -d someDataDir validator ...`\r\n\r\nAlso, the placement of `-d someDataDir` in the command line should not matter.  Does it matter?\r\n\r\n## Steps to resolve\r\n\r\nPlease describe the steps required to resolve this issue, if known.\r\n",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1006/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/615968559",
    "html_url": "https://github.com/sigp/lighthouse/issues/1006#issuecomment-615968559",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006",
    "id": 615968559,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNTk2ODU1OQ==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-18T22:46:25Z",
    "updated_at": "2020-04-18T22:46:25Z",
    "author_association": "MEMBER",
    "body": "I agree that the datadir is quite confusing as it is.\r\n\r\nSo there's two approaches to this:\r\n\r\n1. `--datadir` is always `~/.lighthouse` (@ethers suggested this)\r\n1. `--datadir` is application dependent (e.g., `~/.lighthouse/validator`, `~/lighthouse/beacon`)\r\n\r\n(2) is completely un-opinionated, each component has its own directory. (1) is somewhat opinionated since it optimizes for the case where there's either 1 or 0 beacon nodes (BN) for each validator client (VC).\r\n\r\nLet's assume the case where a system has 1x BN and 2x VC (violating the condition that (1) is optimized for). Their directory structure and commands might look like this:\r\n\r\n#### Scenario (1)\r\n\r\nFilesystem:\r\n```\r\n~/.lighthouse\r\n  - validators\r\n  - beacon\r\n~/.lighthouse-2\r\n  - validators\r\n```\r\n\r\nShell:\r\n```bash\r\nlighthouse bn\r\nlighthouse vc\r\nlighthouse vc --datadir ~/.lighthouse-2\r\n```\r\n\r\n#### Scenario (2)\r\n\r\nFilesystem:\r\n```\r\n~/.lighthouse\r\n  - validators_1\r\n  - validators_2\r\n  - beacon\r\n```\r\n\r\nShell:\r\n```bash\r\nlighthouse bn\r\nlighthouse vc --datadir ~/.lighthouse/validators_1\r\nlighthouse vc --datadir ~/.lighthouse/validators_2\r\n```\r\n\r\nIn this scenario I think (2) looks better since there's no weird scenario where only one VC shares its datadir with the BN.\r\n\r\nI just ran out of time, so I'll come back to this. I'll leave this here for now though.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/615968559/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/616023496",
    "html_url": "https://github.com/sigp/lighthouse/issues/1006#issuecomment-616023496",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006",
    "id": 616023496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjAyMzQ5Ng==",
    "user": {
      "login": "ethers",
      "id": 6937903,
      "node_id": "MDQ6VXNlcjY5Mzc5MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6937903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ethers",
      "html_url": "https://github.com/ethers",
      "followers_url": "https://api.github.com/users/ethers/followers",
      "following_url": "https://api.github.com/users/ethers/following{/other_user}",
      "gists_url": "https://api.github.com/users/ethers/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ethers/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ethers/subscriptions",
      "organizations_url": "https://api.github.com/users/ethers/orgs",
      "repos_url": "https://api.github.com/users/ethers/repos",
      "events_url": "https://api.github.com/users/ethers/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ethers/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-19T04:06:07Z",
    "updated_at": "2020-04-19T04:06:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "app dependent datadir looks better for multiple validator scenario.  Main issue is documenting datadir well as scenario2 does.  It wasn't obvious bn and vc datadir should share a common parent dir but actually have different subdirs. Thanks",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/616023496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/689239226",
    "html_url": "https://github.com/sigp/lighthouse/issues/1006#issuecomment-689239226",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1006",
    "id": 689239226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTIzOTIyNg==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-09T01:19:05Z",
    "updated_at": "2020-09-09T01:19:05Z",
    "author_association": "MEMBER",
    "body": "We have updated the datadir handling. Closing this issue for now. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/689239226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

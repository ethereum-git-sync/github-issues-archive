{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1145",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1145",
  "id": 617781840,
  "node_id": "MDU6SXNzdWU2MTc3ODE4NDA=",
  "number": 1145,
  "title": "Unsolicited UDP packets coming from Lighthouse Node",
  "user": {
    "login": "jrhea",
    "id": 5555162,
    "node_id": "MDQ6VXNlcjU1NTUxNjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5555162?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jrhea",
    "html_url": "https://github.com/jrhea",
    "followers_url": "https://api.github.com/users/jrhea/followers",
    "following_url": "https://api.github.com/users/jrhea/following{/other_user}",
    "gists_url": "https://api.github.com/users/jrhea/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jrhea/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jrhea/subscriptions",
    "organizations_url": "https://api.github.com/users/jrhea/orgs",
    "repos_url": "https://api.github.com/users/jrhea/repos",
    "events_url": "https://api.github.com/users/jrhea/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jrhea/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-05-13T21:59:16Z",
  "updated_at": "2020-05-18T13:00:10Z",
  "closed_at": "2020-05-18T11:47:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\ni noticed that the IP address [redacted] has been sending me unsolicited UDP packets.  I did a whois and got:\r\n\r\n```\r\nAS      | IP               | BGP Prefix          | CC | Registry | Allocated  | AS Name\r\n16509   | xxxxxx    | xxxxx       | US | arin     | 2018-06-29 | AMAZON-02, US\r\n```\r\nUsing some data that I collected from crawling testnet DHTs, I was able to match the IP address to nodeid: `02daa24c13fd5e4dbdbba9bc866b38e182cfbc0e16f4deecd64275e912fd55c8`\r\nwhich is a Lighthouse node that @protolambda runs.\r\n\r\nThings to note:\r\n- I have no clients or crawlers currently running so my machine replies with an ICMP packet to notify the sender that the port is unreachable \r\n- I noticed that the UDP packet data has a prefix that alternates between two hex values and if i take the time difference between packets with matching prefixes....it is 300 seconds.  Coincidentally, 300 default value that lighthouse uses for the discv5 config param `ping_interval`.\r\n\r\nhttps://github.com/sigp/lighthouse/blob/637ba8120b95adc508f40899d5415d5dc77e5b89/beacon_node/eth2-libp2p/src/config.rs#L120\r\n\r\nI realize the evidence is circumstantial, but it seemed worth noting.   I'm wondering if this is some weird edge case that one of my crawlers triggered and now this node is stuck in a state where it is calling send_ping() every 300 seconds.  If needed, I can provide a packet capture to help diagnose.",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1145/reactions",
    "total_count": 3,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/630128087",
    "html_url": "https://github.com/sigp/lighthouse/issues/1145#issuecomment-630128087",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145",
    "id": 630128087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMDEyODA4Nw==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-18T11:47:22Z",
    "updated_at": "2020-05-18T11:47:22Z",
    "author_association": "MEMBER",
    "body": "I have made changes to discv5. However I could not reproduce this. \r\n\r\nI suspect these are packets coming from other nodes who are checking if this peer is still alive. The packets you were receiving were encrypted, so i could not determine their contents. Discv5 modifications will now terminate a session for a dead node, so these will now be unencrypted, and I suspect will be random packets of other nodes trying to establish or find more peers in a small DHT. \r\n\r\nI will close this for now, but it will be interesting to continue to track as we continue with testnets. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/630128087/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/630147882",
    "html_url": "https://github.com/sigp/lighthouse/issues/1145#issuecomment-630147882",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145",
    "id": 630147882,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMDE0Nzg4Mg==",
    "user": {
      "login": "jrhea",
      "id": 5555162,
      "node_id": "MDQ6VXNlcjU1NTUxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5555162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrhea",
      "html_url": "https://github.com/jrhea",
      "followers_url": "https://api.github.com/users/jrhea/followers",
      "following_url": "https://api.github.com/users/jrhea/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrhea/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrhea/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrhea/subscriptions",
      "organizations_url": "https://api.github.com/users/jrhea/orgs",
      "repos_url": "https://api.github.com/users/jrhea/repos",
      "events_url": "https://api.github.com/users/jrhea/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrhea/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-18T12:25:48Z",
    "updated_at": "2020-05-18T12:25:48Z",
    "author_association": "NONE",
    "body": "Is this the PR that contains the changes u made?\r\n\r\nhttps://github.com/sigp/discv5/pull/9",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/630147882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/630166460",
    "html_url": "https://github.com/sigp/lighthouse/issues/1145#issuecomment-630166460",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1145",
    "id": 630166460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMDE2NjQ2MA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-18T13:00:10Z",
    "updated_at": "2020-05-18T13:00:10Z",
    "author_association": "MEMBER",
    "body": "Yep",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/630166460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

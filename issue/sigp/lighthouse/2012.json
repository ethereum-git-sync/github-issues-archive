{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2012",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2012",
  "id": 752948369,
  "node_id": "MDU6SXNzdWU3NTI5NDgzNjk=",
  "number": 2012,
  "title": "Insecure filesystem permissions on validator key files",
  "user": {
    "login": "bo0ohXae",
    "id": 6789152,
    "node_id": "MDQ6VXNlcjY3ODkxNTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6789152?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bo0ohXae",
    "html_url": "https://github.com/bo0ohXae",
    "followers_url": "https://api.github.com/users/bo0ohXae/followers",
    "following_url": "https://api.github.com/users/bo0ohXae/following{/other_user}",
    "gists_url": "https://api.github.com/users/bo0ohXae/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bo0ohXae/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bo0ohXae/subscriptions",
    "organizations_url": "https://api.github.com/users/bo0ohXae/orgs",
    "repos_url": "https://api.github.com/users/bo0ohXae/repos",
    "events_url": "https://api.github.com/users/bo0ohXae/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bo0ohXae/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-11-29T16:05:59Z",
  "updated_at": "2020-11-29T21:10:07Z",
  "closed_at": "2020-11-29T21:05:49Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Just tried importing validator keys on the latest version 1.02 using the official docker images.  The keystore files were created with pretty insane permissions:\r\n\r\n-rwxrwxrwx 1 root root  710 Nov 29 10:56 keystore-m_12381_3600_0_0_0-1604513689.json\r\n-rwxrwxrwx 1 root root  710 Nov 29 10:56 keystore-m_12381_3600_1_0_0-1604513690.json\r\n\r\nWhile I don't like that any user can read the files, I suppose its 'ok' since they are encrypted.  However any user on the system can write to the files, delete them or overwrite them!  The execute bit is just.. unnecessary.\r\n\r\nIdeally it should be the same as the validator definitions file:\r\n-rw------- 1 root root   855 Nov 29 10:56 validator_definitions.yml\r\n\r\n",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2012/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735425888",
    "html_url": "https://github.com/sigp/lighthouse/issues/2012#issuecomment-735425888",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012",
    "id": 735425888,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTQyNTg4OA==",
    "user": {
      "login": "ChuckNorrison",
      "id": 2964146,
      "node_id": "MDQ6VXNlcjI5NjQxNDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2964146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ChuckNorrison",
      "html_url": "https://github.com/ChuckNorrison",
      "followers_url": "https://api.github.com/users/ChuckNorrison/followers",
      "following_url": "https://api.github.com/users/ChuckNorrison/following{/other_user}",
      "gists_url": "https://api.github.com/users/ChuckNorrison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ChuckNorrison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ChuckNorrison/subscriptions",
      "organizations_url": "https://api.github.com/users/ChuckNorrison/orgs",
      "repos_url": "https://api.github.com/users/ChuckNorrison/repos",
      "events_url": "https://api.github.com/users/ChuckNorrison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ChuckNorrison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-29T17:12:24Z",
    "updated_at": "2020-11-29T17:12:24Z",
    "author_association": "NONE",
    "body": "My imported keystores inherit permissions from parent folder, seems fine to me",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735425888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735453779",
    "html_url": "https://github.com/sigp/lighthouse/issues/2012#issuecomment-735453779",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012",
    "id": 735453779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTQ1Mzc3OQ==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-29T21:05:49Z",
    "updated_at": "2020-11-29T21:05:49Z",
    "author_association": "MEMBER",
    "body": "The Lighthouse import command maintains the file permissions of the original keystores. I think this is quite reasonable behaviour.\r\n\r\nThe [`eth2.0-deposit-cli`](https://github.com/ethereum/eth2.0-deposit-cli) sets permissions that are, in my opinion, too wide but I've never seen them with `-rwxrwxrwx` before.\r\n\r\nI suggest checking the permissions on the keystores generated by `eth2.0-deposit-cli`. If they are not to your satisfaction, I suggestion opening an issue on [that repo](https://github.com/ethereum/eth2.0-deposit-cli). If the permissions are different to the ones that Lighthouse imported (i.e., you believe Lighthouse *changed* the permissions) then please reopen this issue.\r\n\r\nThanks for raising this.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735453779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735454291",
    "html_url": "https://github.com/sigp/lighthouse/issues/2012#issuecomment-735454291",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2012",
    "id": 735454291,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTQ1NDI5MQ==",
    "user": {
      "login": "bo0ohXae",
      "id": 6789152,
      "node_id": "MDQ6VXNlcjY3ODkxNTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6789152?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bo0ohXae",
      "html_url": "https://github.com/bo0ohXae",
      "followers_url": "https://api.github.com/users/bo0ohXae/followers",
      "following_url": "https://api.github.com/users/bo0ohXae/following{/other_user}",
      "gists_url": "https://api.github.com/users/bo0ohXae/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bo0ohXae/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bo0ohXae/subscriptions",
      "organizations_url": "https://api.github.com/users/bo0ohXae/orgs",
      "repos_url": "https://api.github.com/users/bo0ohXae/repos",
      "events_url": "https://api.github.com/users/bo0ohXae/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bo0ohXae/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-29T21:10:07Z",
    "updated_at": "2020-11-29T21:10:07Z",
    "author_association": "NONE",
    "body": "Oh I see.  I guess that makes sense.  In this case the original keystore was read from a USB stick (I think FAT32) which doesn't support file permissions, so the permissions were set that way.  \r\n\r\nMight not hurt to do a sanity check, or just default to -rw------- as I suspect many people will store their keys offline.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/735454291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

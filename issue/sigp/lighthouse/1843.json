{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1843",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1843/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1843/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1843/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1843",
  "id": 733830090,
  "node_id": "MDU6SXNzdWU3MzM4MzAwOTA=",
  "number": 1843,
  "title": "Latest lighthouse does not respect target-peers",
  "user": {
    "login": "torfbolt",
    "id": 233423,
    "node_id": "MDQ6VXNlcjIzMzQyMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/233423?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/torfbolt",
    "html_url": "https://github.com/torfbolt",
    "followers_url": "https://api.github.com/users/torfbolt/followers",
    "following_url": "https://api.github.com/users/torfbolt/following{/other_user}",
    "gists_url": "https://api.github.com/users/torfbolt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/torfbolt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/torfbolt/subscriptions",
    "organizations_url": "https://api.github.com/users/torfbolt/orgs",
    "repos_url": "https://api.github.com/users/torfbolt/repos",
    "events_url": "https://api.github.com/users/torfbolt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/torfbolt/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-10-31T23:54:13Z",
  "updated_at": "2020-11-02T04:27:15Z",
  "closed_at": "2020-11-02T04:27:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nMost or all of the recent lighthouse builds do not seem to respect the peer number target. Looking at https://eth2stats.io/medalla-testnet, there are lots of clients in the 400-500 peer range. At least in my case this results in severely degraded performance of my internet connection.\r\n\r\n## Version\r\n\r\nRegression, at least since 0.3.1\r\n\r\n## Present Behaviour\r\n\r\nThe beacon node seems to connect to as many peers as it can find.\r\n\r\n## Expected Behaviour\r\n\r\nLimit connections to roughly the target value (default 50).\r\n\r\n## Steps to resolve\r\n\r\nRun lighthouse on the medalla testnet. Setting an explicit value of `--target-peers 30` does not help.\r\n",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1843/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1843/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/720014052",
    "html_url": "https://github.com/sigp/lighthouse/issues/1843#issuecomment-720014052",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1843",
    "id": 720014052,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDAxNDA1Mg==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-01T01:49:42Z",
    "updated_at": "2020-11-01T01:49:42Z",
    "author_association": "MEMBER",
    "body": "The problem is actually in the eth2 stats client rather than Lighthouse itself. Eth2 stats reports all the peers the node has ever seen, rather than just the ones that it is connected to (more info: https://github.com/Alethio/eth2stats-client/issues/66)\n\nIf you check your BN logs, you'll see that the peer count reported is still ~50",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/720014052/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/720229022",
    "html_url": "https://github.com/sigp/lighthouse/issues/1843#issuecomment-720229022",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1843",
    "id": 720229022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDIyOTAyMg==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-02T04:27:15Z",
    "updated_at": "2020-11-02T04:27:15Z",
    "author_association": "MEMBER",
    "body": "This is an eth2-stats issue. \r\n\r\nLighthouse has implemented the eth2-api's for this endpoint as the spec describes, eth2-stats is consuming it incorrectly. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/720229022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/560/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/560/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/560/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/560",
  "id": 505111327,
  "node_id": "MDU6SXNzdWU1MDUxMTEzMjc=",
  "number": 560,
  "title": "[Discv5] Update table connection status every ping",
  "user": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2336800125,
      "node_id": "MDU6TGFiZWwyMzM2ODAwMTI1",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/t%20Networking",
      "name": "t Networking",
      "color": "40E0D0",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "b-m-f",
    "id": 2843450,
    "node_id": "MDQ6VXNlcjI4NDM0NTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2843450?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/b-m-f",
    "html_url": "https://github.com/b-m-f",
    "followers_url": "https://api.github.com/users/b-m-f/followers",
    "following_url": "https://api.github.com/users/b-m-f/following{/other_user}",
    "gists_url": "https://api.github.com/users/b-m-f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/b-m-f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/b-m-f/subscriptions",
    "organizations_url": "https://api.github.com/users/b-m-f/orgs",
    "repos_url": "https://api.github.com/users/b-m-f/repos",
    "events_url": "https://api.github.com/users/b-m-f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/b-m-f/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "b-m-f",
      "id": 2843450,
      "node_id": "MDQ6VXNlcjI4NDM0NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2843450?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b-m-f",
      "html_url": "https://github.com/b-m-f",
      "followers_url": "https://api.github.com/users/b-m-f/followers",
      "following_url": "https://api.github.com/users/b-m-f/following{/other_user}",
      "gists_url": "https://api.github.com/users/b-m-f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b-m-f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b-m-f/subscriptions",
      "organizations_url": "https://api.github.com/users/b-m-f/orgs",
      "repos_url": "https://api.github.com/users/b-m-f/repos",
      "events_url": "https://api.github.com/users/b-m-f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b-m-f/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-10-10T08:17:04Z",
  "updated_at": "2022-10-20T17:14:11Z",
  "closed_at": "2019-10-29T01:55:32Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nCurrently, a Node's status in the routing table is only updated when a new session is established. The status should be updated every time a PING returns to increase it's liveness in the local view of the DHT.",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/560/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/560/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/541030065",
    "html_url": "https://github.com/sigp/lighthouse/issues/560#issuecomment-541030065",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
    "id": 541030065,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTAzMDA2NQ==",
    "user": {
      "login": "b-m-f",
      "id": 2843450,
      "node_id": "MDQ6VXNlcjI4NDM0NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2843450?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b-m-f",
      "html_url": "https://github.com/b-m-f",
      "followers_url": "https://api.github.com/users/b-m-f/followers",
      "following_url": "https://api.github.com/users/b-m-f/following{/other_user}",
      "gists_url": "https://api.github.com/users/b-m-f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b-m-f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b-m-f/subscriptions",
      "organizations_url": "https://api.github.com/users/b-m-f/orgs",
      "repos_url": "https://api.github.com/users/b-m-f/repos",
      "events_url": "https://api.github.com/users/b-m-f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b-m-f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-11T11:43:31Z",
    "updated_at": "2019-10-11T11:43:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, can I pick this one up? Would be free to do it on tuesday :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/541030065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/541275741",
    "html_url": "https://github.com/sigp/lighthouse/issues/560#issuecomment-541275741",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
    "id": 541275741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTI3NTc0MQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-12T02:36:36Z",
    "updated_at": "2019-10-12T02:36:36Z",
    "author_association": "MEMBER",
    "body": "Hey,\r\n\r\nThis was like a placeholder issue to remind myself to add this is. The changes will actually be in our `rust-libp2p` fork on the `discv5` branch here: https://github.com/sigp/rust-libp2p/tree/discv5/misc/discv5\r\n\r\nThere is a function, `connection_updated` https://github.com/sigp/rust-libp2p/blob/discv5/misc/discv5/src/behaviour.rs#L625\r\nwhich needs to get called when we receive a successful `PING`. \r\n\r\nWhen we get at PONG, this function should be called:\r\nhttps://github.com/sigp/rust-libp2p/blob/discv5/misc/discv5/src/behaviour.rs#L310\r\n\r\nI think all we need to do is use the connection_updated function in this function. \r\n\r\nIf you are interested in understanding how this all works, it would also be useful to have a few tests to check that PING's update the state in the DHT (which would involve looking at the buckets construction). \r\n\r\nLet me know if you need anything further for this :)\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/541275741/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/542191772",
    "html_url": "https://github.com/sigp/lighthouse/issues/560#issuecomment-542191772",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
    "id": 542191772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjE5MTc3Mg==",
    "user": {
      "login": "b-m-f",
      "id": 2843450,
      "node_id": "MDQ6VXNlcjI4NDM0NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2843450?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b-m-f",
      "html_url": "https://github.com/b-m-f",
      "followers_url": "https://api.github.com/users/b-m-f/followers",
      "following_url": "https://api.github.com/users/b-m-f/following{/other_user}",
      "gists_url": "https://api.github.com/users/b-m-f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b-m-f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b-m-f/subscriptions",
      "organizations_url": "https://api.github.com/users/b-m-f/orgs",
      "repos_url": "https://api.github.com/users/b-m-f/repos",
      "events_url": "https://api.github.com/users/b-m-f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b-m-f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-15T12:41:47Z",
    "updated_at": "2019-10-15T12:42:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @AgeManning,\r\n\r\nI have opened https://github.com/sigp/rust-libp2p/pull/6 and put two questions in there:\r\n- Should the `connection_updated` also be called when **ENR** sequence that was received? Or will this be done when the requested new **ENR** is returned?\r\n- Could it happen that a **PING** is received for which no **ENR** can be found?\r\n\r\nAnd Id be happy to learn more and implement some tests.\r\n- Should these go into the same file with the normal Rust testing methodology?\r\n- How would you say I should go about testing this? Set up all the necessary environment and then fake a **PING** and observe the **DHT** for the correct change? Or is there an easier way I dont see yet?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/542191772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/542465600",
    "html_url": "https://github.com/sigp/lighthouse/issues/560#issuecomment-542465600",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
    "id": 542465600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MjQ2NTYwMA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-16T01:03:02Z",
    "updated_at": "2019-10-16T01:03:02Z",
    "author_association": "MEMBER",
    "body": "Responded on the rust-libp2p repo :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/542465600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/546889674",
    "html_url": "https://github.com/sigp/lighthouse/issues/560#issuecomment-546889674",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
    "id": 546889674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0Njg4OTY3NA==",
    "user": {
      "login": "b-m-f",
      "id": 2843450,
      "node_id": "MDQ6VXNlcjI4NDM0NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2843450?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b-m-f",
      "html_url": "https://github.com/b-m-f",
      "followers_url": "https://api.github.com/users/b-m-f/followers",
      "following_url": "https://api.github.com/users/b-m-f/following{/other_user}",
      "gists_url": "https://api.github.com/users/b-m-f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b-m-f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b-m-f/subscriptions",
      "organizations_url": "https://api.github.com/users/b-m-f/orgs",
      "repos_url": "https://api.github.com/users/b-m-f/repos",
      "events_url": "https://api.github.com/users/b-m-f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b-m-f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-28T10:42:20Z",
    "updated_at": "2019-10-28T10:42:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AgeManning guess this one can be closed now? Or should the revision number in https://github.com/sigp/lighthouse/blob/2399b9bbe0e521fa092fef8bcf592b7b82f7ce3f/beacon_node/eth2-libp2p/Cargo.toml be updated?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/546889674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/547221004",
    "html_url": "https://github.com/sigp/lighthouse/issues/560#issuecomment-547221004",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/560",
    "id": 547221004,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NzIyMTAwNA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-29T01:55:32Z",
    "updated_at": "2019-10-29T01:55:32Z",
    "author_association": "MEMBER",
    "body": "Yep, this is complete. \r\nThere are number of updates in the rust-libp2p crate that we will be updating all in one hit.  We've made some changes to gossipsub also. \r\nI have a large network update, which will include all of these.\r\n\r\nThanks for the help :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/547221004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

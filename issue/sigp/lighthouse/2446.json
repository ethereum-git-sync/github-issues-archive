{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2446",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2446",
  "id": 942329261,
  "node_id": "MDU6SXNzdWU5NDIzMjkyNjE=",
  "number": 2446,
  "title": "Increased 'WARN' rate due to 'Single block lookup failed'",
  "user": {
    "login": "gotzl",
    "id": 12870237,
    "node_id": "MDQ6VXNlcjEyODcwMjM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/12870237?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gotzl",
    "html_url": "https://github.com/gotzl",
    "followers_url": "https://api.github.com/users/gotzl/followers",
    "following_url": "https://api.github.com/users/gotzl/following{/other_user}",
    "gists_url": "https://api.github.com/users/gotzl/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gotzl/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gotzl/subscriptions",
    "organizations_url": "https://api.github.com/users/gotzl/orgs",
    "repos_url": "https://api.github.com/users/gotzl/repos",
    "events_url": "https://api.github.com/users/gotzl/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gotzl/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-07-12T18:26:00Z",
  "updated_at": "2021-07-13T08:07:17Z",
  "closed_at": "2021-07-13T08:07:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\nMy two lighthouse beacon nodes frequently report a warning in the logs:\r\n```\r\nJul 10 23:21:40.821 WARN Single block lookup failed              outcome: Err(WouldRevertFinalizedSlot { block_slot: Slot(1594432), finalized_slot: Slot(1594528) }), service: sync\r\n```\r\nI am not sure what it means and what I can/should do to get rid of it.\r\n\r\n## Version\r\nv1.4.0-3b600ac\r\n\r\n## Present Behaviour\r\nI run two lighthouse beacon nodes on two separate devices. I monitor the warn rate of these instances, which is usually ~1/h. However, since approx 10.07., both instances report a significantly higher warn rate (~20/h). Most (or all) of the warnings are messages as quoted above.\r\nI cannot classify this warning nor do I know how to counteract. A google search didn't help, so I would like to ask here for enlightenment.\r\n\r\nThe nodes are on mainnet, I use `openethereum` for eth1.\r\n\r\n## Expected Behaviour\r\nNo warnings should be logged.\r\n\r\n## Steps to resolve\r\nUnknown.\r\n",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2446/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/878674654",
    "html_url": "https://github.com/sigp/lighthouse/issues/2446#issuecomment-878674654",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446",
    "id": 878674654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODY3NDY1NA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-12T23:58:27Z",
    "updated_at": "2021-07-13T00:43:39Z",
    "author_association": "MEMBER",
    "body": "Thanks for raising this.\r\n\r\nRest assured this warning is no fault of your lighthouse nodes. We are also seeing this on our lh nodes.\r\n\r\nThe issue appears to be a collection of prysm nodes (of the ones I checked, were running this version: `Prysm/v1.3.10/5ae6e83c7f6238593c6dfa3a8e05fc7c3778783f`) that are not validating correctly on the network. It appears they have not synced their time correctly and are referencing old blocks in attestations. \r\n\r\nWe have this behaviour as a warning in lighthouse, mainly to help us track malicious behaviour on the networks. The warn's stand out. Your lighthouse node will recognise this bad behaviour and kick the bad peer, however it seems there are a few bad peers so they seem to recycle and reconnect and reproduce the same behaviour. \r\n\r\nAlthough Lighthouse does ban these nodes, our ban's eventually get lifted. We will likely increase the length of the ban to prevent nodes like this from eventually reconnecting (and hence reduce/eliminate the warnings you are noticing)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/878674654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/878836087",
    "html_url": "https://github.com/sigp/lighthouse/issues/2446#issuecomment-878836087",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446",
    "id": 878836087,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODgzNjA4Nw==",
    "user": {
      "login": "gotzl",
      "id": 12870237,
      "node_id": "MDQ6VXNlcjEyODcwMjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/12870237?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gotzl",
      "html_url": "https://github.com/gotzl",
      "followers_url": "https://api.github.com/users/gotzl/followers",
      "following_url": "https://api.github.com/users/gotzl/following{/other_user}",
      "gists_url": "https://api.github.com/users/gotzl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gotzl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gotzl/subscriptions",
      "organizations_url": "https://api.github.com/users/gotzl/orgs",
      "repos_url": "https://api.github.com/users/gotzl/repos",
      "events_url": "https://api.github.com/users/gotzl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gotzl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T07:08:45Z",
    "updated_at": "2021-07-13T07:08:45Z",
    "author_association": "NONE",
    "body": "Thanks for confirmation and the detailed explanation, and the 'fix' ;)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/878836087/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/878871971",
    "html_url": "https://github.com/sigp/lighthouse/issues/2446#issuecomment-878871971",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2446",
    "id": 878871971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODg3MTk3MQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T08:07:16Z",
    "updated_at": "2021-07-13T08:07:16Z",
    "author_association": "MEMBER",
    "body": "I'm going to mark this as closed. The ban length increase should reduce the occurrence. The operators of the bad nodes should be losing eth and I imagine they will discover and remedy their nodes soon. If these warnings persist we can downgrade the log to a debug. \r\nThe ban-timeout will be released in the upcoming `1.5` release.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/878871971/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4364",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4364/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4364/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4364/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4364",
  "id": 1737023825,
  "node_id": "I_kwDOCFeAzc5niOFR",
  "number": 4364,
  "title": "`--reuse-password` fails to check if the reused password is correct",
  "user": {
    "login": "remyroy",
    "id": 303593,
    "node_id": "MDQ6VXNlcjMwMzU5Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/remyroy",
    "html_url": "https://github.com/remyroy",
    "followers_url": "https://api.github.com/users/remyroy/followers",
    "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
    "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
    "organizations_url": "https://api.github.com/users/remyroy/orgs",
    "repos_url": "https://api.github.com/users/remyroy/repos",
    "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/remyroy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-06-01T20:17:51Z",
  "updated_at": "2023-06-06T16:23:16Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWhen using the `account validator import` command with `--reuse-password` flag, the password will be reused and the keystores will be imported even if the password is wrong after the first successful keystore import.\r\n\r\n## Version\r\n\r\nLighthouse v4.2.0-c547a11 (from v4.2.0 stable release on Ubuntu 22.04)\r\n\r\n## Present Behaviour\r\n\r\nIf you create multiple keystores with different passwords and import them all with a command like:\r\n```\r\nsudo ./lighthouse account validator import --reuse-password \\\r\n    --directory /home/remyroy/staking_deposit-cli-d7b5304-linux-amd64/validator_keys \\\r\n    --datadir /var/lib/lighthouse \\\r\n    --network mainnet\r\n```\r\nit will prompt for the first keystore password and if that password is correct, the import command will import all the keystores with the same password not matter if the password is correct or not.\r\n\r\n## Expected Behaviour\r\n\r\nThe import command should check each keystore to make sure the imported password is correct. If one password check fails, it should prompt for a new password (ideal for most use cases) or stop with an error message.\r\n\r\n## Steps to resolve\r\n\r\nModify the behavior of the `account validator import` command with `--reuse-password` flag to check for each keystore to make sure the password is working and prompt for a new password if not.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4364/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4364/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1579082345",
    "html_url": "https://github.com/sigp/lighthouse/issues/4364#issuecomment-1579082345",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4364",
    "id": 1579082345,
    "node_id": "IC_kwDOCFeAzc5eHuJp",
    "user": {
      "login": "remyroy",
      "id": 303593,
      "node_id": "MDQ6VXNlcjMwMzU5Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/303593?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyroy",
      "html_url": "https://github.com/remyroy",
      "followers_url": "https://api.github.com/users/remyroy/followers",
      "following_url": "https://api.github.com/users/remyroy/following{/other_user}",
      "gists_url": "https://api.github.com/users/remyroy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remyroy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remyroy/subscriptions",
      "organizations_url": "https://api.github.com/users/remyroy/orgs",
      "repos_url": "https://api.github.com/users/remyroy/repos",
      "events_url": "https://api.github.com/users/remyroy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remyroy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-06T16:23:16Z",
    "updated_at": "2023-06-06T16:23:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "As a comparison, Nimbus will keep reusing the last entered password as long as it's the correct password when importing keystores. If it fails to decrypt the keystore, it will prompt for a new password and it will keep reusing it as long as it is the correct password. That behavior seems the be a good and efficient way to import a random list of keystores in an interactive way.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1579082345/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

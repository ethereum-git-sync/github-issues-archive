{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1575",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1575",
  "id": 687296526,
  "node_id": "MDU6SXNzdWU2ODcyOTY1MjY=",
  "number": 1575,
  "title": "Key files loading is slow and key management is difficult",
  "user": {
    "login": "ghost",
    "id": 10137,
    "node_id": "MDQ6VXNlcjEwMTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ghost",
    "html_url": "https://github.com/ghost",
    "followers_url": "https://api.github.com/users/ghost/followers",
    "following_url": "https://api.github.com/users/ghost/following{/other_user}",
    "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
    "organizations_url": "https://api.github.com/users/ghost/orgs",
    "repos_url": "https://api.github.com/users/ghost/repos",
    "events_url": "https://api.github.com/users/ghost/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ghost/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2336802021,
      "node_id": "MDU6TGFiZWwyMzM2ODAyMDIx",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/UX-and-logs",
      "name": "UX-and-logs",
      "color": "DB9046",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-08-27T14:38:01Z",
  "updated_at": "2020-10-13T01:05:25Z",
  "closed_at": "2020-10-13T01:05:25Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Problem: \r\n1. loading takes 4 minutes for 500 validator, when validator process start up\r\n2. hard to manage a few thousand files for 500 validators\r\n\r\nProbable Cause: \r\n1. key store is file base\r\n2. each key file is on its own folder\r\n3. each key file has a lock file, a secret file, and other files\r\n\r\nPossible Solution:\r\n-> check prysm's current solution\r\ninstant loading\r\njust one file - all key stores and passwords are merged into one small text file\r\nsimple, clean, easy to manage\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1575/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/685262804",
    "html_url": "https://github.com/sigp/lighthouse/issues/1575#issuecomment-685262804",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575",
    "id": 685262804,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTI2MjgwNA==",
    "user": {
      "login": "danielschonfeld",
      "id": 522598,
      "node_id": "MDQ6VXNlcjUyMjU5OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/522598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/danielschonfeld",
      "html_url": "https://github.com/danielschonfeld",
      "followers_url": "https://api.github.com/users/danielschonfeld/followers",
      "following_url": "https://api.github.com/users/danielschonfeld/following{/other_user}",
      "gists_url": "https://api.github.com/users/danielschonfeld/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/danielschonfeld/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/danielschonfeld/subscriptions",
      "organizations_url": "https://api.github.com/users/danielschonfeld/orgs",
      "repos_url": "https://api.github.com/users/danielschonfeld/repos",
      "events_url": "https://api.github.com/users/danielschonfeld/events{/privacy}",
      "received_events_url": "https://api.github.com/users/danielschonfeld/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T03:13:07Z",
    "updated_at": "2020-09-02T03:13:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "üëç to everything OP said, however, one advantage I believe lighthouse has that should and must be preserved is the notion of which accounts out of a given list, has had it's deposit go through.  Making running the 'deposit' functionality safe to run multiple times over the same given list of validator public keys.  \r\n\r\nExample where that is useful, is if using geth, and the account locks on you cause you didn't know you had to specify an endless unlock timeout using '0' as the parameter.  ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/685262804/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/685270383",
    "html_url": "https://github.com/sigp/lighthouse/issues/1575#issuecomment-685270383",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575",
    "id": 685270383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTI3MDM4Mw==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-02T03:35:21Z",
    "updated_at": "2020-09-02T03:35:21Z",
    "author_association": "MEMBER",
    "body": "The reason the loading is slow, is because there is a large `scrypt` parameter used in each of the keystores which adds to the keyfile's security. This could be reduced which would reduce loading times to next to nothing, but at the cost of the security of the keystore. \r\n\r\nAs I understand, prysm decrypt all the keys and the resulting decrypted keys they combine into a single key file. The thing to be weary of is moving validator keys. If a key is then moved, it must also be removed from the grouped file as if you forget to remove from both, you could run two validators and get slashed. \r\n\r\n@paulhauner has been dealing with a lot of key management and may want to weigh in here as to the approach we should take going forward. \r\n\r\nWe are particularly concerned with preventing any possible slashing scenarios with validators that use lighthouse, however there is a tradeoff for very large staking users UX and might we want to help accommodate this. ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/685270383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/687804376",
    "html_url": "https://github.com/sigp/lighthouse/issues/1575#issuecomment-687804376",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575",
    "id": 687804376,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzgwNDM3Ng==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-06T14:28:08Z",
    "updated_at": "2020-09-06T14:28:08Z",
    "author_association": "NONE",
    "body": "prysm provides a delete function to remove keys from the single combined key file.\r\nIt also does de-dup when adding new keys or importing keys from launchpad / lighthouse.\r\n\r\nAll 3clients i tested, prysm, lighthouse and teku, have the mechanism in place to avoid duplicate keys.\r\n\r\nTo avoid key duplication across multiple clients, I created a shell script to detect duplicate between clients. The script is not complicated.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/687804376/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/707422845",
    "html_url": "https://github.com/sigp/lighthouse/issues/1575#issuecomment-707422845",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1575",
    "id": 707422845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzQyMjg0NQ==",
    "user": {
      "login": "ghost",
      "id": 10137,
      "node_id": "MDQ6VXNlcjEwMTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ghost",
      "html_url": "https://github.com/ghost",
      "followers_url": "https://api.github.com/users/ghost/followers",
      "following_url": "https://api.github.com/users/ghost/following{/other_user}",
      "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
      "organizations_url": "https://api.github.com/users/ghost/orgs",
      "repos_url": "https://api.github.com/users/ghost/repos",
      "events_url": "https://api.github.com/users/ghost/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ghost/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-13T01:05:25Z",
    "updated_at": "2020-10-13T01:05:25Z",
    "author_association": "NONE",
    "body": "cached keys works great. 1st time loading takes time, subsequent loading is instant.\r\nbetter than prysm now. prysm has to keep wallet and its password online, not safe. lighthouse does not.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/707422845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4630",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4630/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4630/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4630/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4630",
  "id": 1853105060,
  "node_id": "I_kwDOCFeAzc5udCOk",
  "number": 4630,
  "title": "The wait time for fetching historical data about validator states is too lengthy",
  "user": {
    "login": "filips121",
    "id": 102794933,
    "node_id": "U_kgDOBiCGtQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/102794933?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/filips121",
    "html_url": "https://github.com/filips121",
    "followers_url": "https://api.github.com/users/filips121/followers",
    "following_url": "https://api.github.com/users/filips121/following{/other_user}",
    "gists_url": "https://api.github.com/users/filips121/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/filips121/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/filips121/subscriptions",
    "organizations_url": "https://api.github.com/users/filips121/orgs",
    "repos_url": "https://api.github.com/users/filips121/repos",
    "events_url": "https://api.github.com/users/filips121/events{/privacy}",
    "received_events_url": "https://api.github.com/users/filips121/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 985647288,
      "node_id": "MDU6TGFiZWw5ODU2NDcyODg=",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/question",
      "name": "question",
      "color": "d876e3",
      "default": true,
      "description": "Further information is requested"
    },
    {
      "id": 5636045869,
      "node_id": "LA_kwDOCFeAzc8AAAABT-88LQ",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/tree-states",
      "name": "tree-states",
      "color": "91FCA5",
      "default": false,
      "description": "Upcoming state and database overhaul"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-08-16T12:07:55Z",
  "updated_at": "2023-08-16T12:14:55Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWhen you try to fetch validator states from blocks that aren't the latest (head), the wait times can be extremely long. \r\nFor some blocks you only get the result after making multiple attempts.\r\n\r\nFor example, the next request takes too much time to retrieve the results:\r\ncurl -X GET \"http://public-mainnet-node.ethereum.org/eth/v1/beacon/states/4768640/validators\" -H  \"accept: application/json\" | jq",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4630/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4630/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1680494747",
    "html_url": "https://github.com/sigp/lighthouse/issues/4630#issuecomment-1680494747",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4630",
    "id": 1680494747,
    "node_id": "IC_kwDOCFeAzc5kKlCb",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-16T12:14:46Z",
    "updated_at": "2023-08-16T12:14:46Z",
    "author_association": "MEMBER",
    "body": "We're aware of this and have a new alpha version that overhauls the database and state representation to make it faster. You can build the `tree-states` branch (this PR: https://github.com/sigp/lighthouse/pull/3206) to try it out. There are release notes for a previous alpha [here](https://github.com/sigp/lighthouse/releases/tag/v4.2.990-exp) although I would recommend running the latest branch as we've fixed a few bugs.\r\n\r\nThe alternative running stable Lighthouse is to configure the `--slots-per-restore-point` lower. But this will use _a lot_ of disk space, 4TB+ for the fastest setting of `--slots-per-restore-point 32`. More on that here: https://lighthouse-book.sigmaprime.io/advanced_database.html\r\n\r\nOur schedule for releasing tree-states is sometime shortly after the Deneb hard fork.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1680494747/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

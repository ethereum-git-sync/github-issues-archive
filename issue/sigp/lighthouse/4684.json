{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4684",
  "id": 1873677824,
  "node_id": "I_kwDOCFeAzc5vrg4A",
  "number": 4684,
  "title": "Request: VC option to submit messages to all connected beacon nodes",
  "user": {
    "login": "xrchz",
    "id": 181254,
    "node_id": "MDQ6VXNlcjE4MTI1NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xrchz",
    "html_url": "https://github.com/xrchz",
    "followers_url": "https://api.github.com/users/xrchz/followers",
    "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
    "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
    "organizations_url": "https://api.github.com/users/xrchz/orgs",
    "repos_url": "https://api.github.com/users/xrchz/repos",
    "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xrchz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 985647284,
      "node_id": "MDU6TGFiZWw5ODU2NDcyODQ=",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/enhancement",
      "name": "enhancement",
      "color": "a2eeef",
      "default": true,
      "description": "New feature or request"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2023-08-30T13:24:57Z",
  "updated_at": "2023-11-27T06:52:08Z",
  "closed_at": "2023-11-27T06:52:08Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSometimes to maximise the chance of timely inclusion a node operator may want to have their validator client submit duties (attestations and proposals) to all connected beacon nodes, for redundancy. (This should be safe since only one validator client is operating so all submitted attestations should be the same and compatible, even if they are seen by different parts of the network initially.) \r\n\r\n## Version\r\n\r\nAll versions so far (up to 4.3.0).\r\n\r\n## Present Behaviour\r\n\r\nCurrently Lighthouse does not support broadcasting to all connected beacon nodes, and instead seems to only submit to the first/best node it knows about.\r\n\r\nThis seems to be the behaviour despite the existence of the `--disable-run-on-all` option.\r\n\r\n## Expected Behaviour\r\n\r\nWhen provided with an appropriate option (e.g. `--broadcast-duties`), submit duties to all connected beacon nodes.\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 3,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1699174883",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1699174883",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1699174883,
    "node_id": "IC_kwDOCFeAzc5lR1nj",
    "user": {
      "login": "xrchz",
      "id": 181254,
      "node_id": "MDQ6VXNlcjE4MTI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrchz",
      "html_url": "https://github.com/xrchz",
      "followers_url": "https://api.github.com/users/xrchz/followers",
      "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
      "organizations_url": "https://api.github.com/users/xrchz/orgs",
      "repos_url": "https://api.github.com/users/xrchz/repos",
      "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrchz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T13:26:24Z",
    "updated_at": "2023-08-30T13:26:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems related to https://github.com/sigp/lighthouse/issues/3001",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1699174883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1755575572",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1755575572",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1755575572,
    "node_id": "IC_kwDOCFeAzc5oo_UU",
    "user": {
      "login": "xrchz",
      "id": 181254,
      "node_id": "MDQ6VXNlcjE4MTI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrchz",
      "html_url": "https://github.com/xrchz",
      "followers_url": "https://api.github.com/users/xrchz/followers",
      "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
      "organizations_url": "https://api.github.com/users/xrchz/orgs",
      "repos_url": "https://api.github.com/users/xrchz/repos",
      "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrchz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T14:39:24Z",
    "updated_at": "2023-10-10T14:39:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm guessing the place to edit for this would be `validator_client/src/beacon_node_fallback.rs`, in particular the `first_success` function could be changed (or another version added) that runs on all successes instead of stopping as soon as it finds one.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1755575572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756200616",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1756200616",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1756200616,
    "node_id": "IC_kwDOCFeAzc5orX6o",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T20:39:32Z",
    "updated_at": "2023-10-10T20:39:32Z",
    "author_association": "MEMBER",
    "body": "@xrchz There are functions in there called run, and run_on_all that have that behaviour. They don't support gathering data from all endpoints (e.g. forming attestations), but could be used for broadcasts",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756200616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756210104",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1756210104",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1756210104,
    "node_id": "IC_kwDOCFeAzc5oraO4",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T20:44:06Z",
    "updated_at": "2023-10-10T20:44:06Z",
    "author_association": "MEMBER",
    "body": "How it works at the moment is that subscriptions for duties are broadcast, but the messages themselves (blocks + attestations) are not. We could add a new flag to replace `--disable-run-on-all` called `--broadcast-subscriptions` (taking a bool) and a new flag/flags to control the broadcast of messages, e.g. `--broadcast-attestations`, `--broadcast-blocks`, etc",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756210104/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756248402",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1756248402",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1756248402,
    "node_id": "IC_kwDOCFeAzc5orjlS",
    "user": {
      "login": "xrchz",
      "id": 181254,
      "node_id": "MDQ6VXNlcjE4MTI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrchz",
      "html_url": "https://github.com/xrchz",
      "followers_url": "https://api.github.com/users/xrchz/followers",
      "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
      "organizations_url": "https://api.github.com/users/xrchz/orgs",
      "repos_url": "https://api.github.com/users/xrchz/repos",
      "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrchz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T20:59:56Z",
    "updated_at": "2023-10-10T20:59:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes I like those flag suggestions.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756248402/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801413417",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1801413417",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1801413417,
    "node_id": "IC_kwDOCFeAzc5rX2Mp",
    "user": {
      "login": "uvizhe",
      "id": 1889712,
      "node_id": "MDQ6VXNlcjE4ODk3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1889712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/uvizhe",
      "html_url": "https://github.com/uvizhe",
      "followers_url": "https://api.github.com/users/uvizhe/followers",
      "following_url": "https://api.github.com/users/uvizhe/following{/other_user}",
      "gists_url": "https://api.github.com/users/uvizhe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/uvizhe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/uvizhe/subscriptions",
      "organizations_url": "https://api.github.com/users/uvizhe/orgs",
      "repos_url": "https://api.github.com/users/uvizhe/repos",
      "events_url": "https://api.github.com/users/uvizhe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/uvizhe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T09:33:00Z",
    "updated_at": "2023-11-08T09:33:00Z",
    "author_association": "NONE",
    "body": "Hi, I'm ready to make a PR for this issue.\r\n\r\nI've a few questions, however:\r\n\r\n1. Am I correct that broadcasting is only required for these API calls: `publish_signed_block_contents` and `post_beacon_pool_attestations`?\r\n2. Currently `--disable-run-on-all` flag affects these calls: `post_validator_beacon_committee_subscriptions`, `post_validator_sync_committee_subscriptions`, and `post_validator_prepare_beacon_proposer`. Is it right to attribute all three to `--broadcast-subscriptions` flag? I'm not sure about the latter one.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801413417/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801535973",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1801535973",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1801535973,
    "node_id": "IC_kwDOCFeAzc5rYUHl",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T10:18:30Z",
    "updated_at": "2023-11-08T10:18:30Z",
    "author_association": "MEMBER",
    "body": "Hey @uvizhe thanks for working on this\r\n\r\n1. Those 2 are the main ones, but there's also `post_beacon_pool_sync_committee_signatures`\r\n2. Good point about `post_validator_prepare_beacon_proposer`. I think grouping it with the subscriptions is fine for now, we can always add a distinct flag for it later if that proves useful.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801535973/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801652852",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1801652852",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1801652852,
    "node_id": "IC_kwDOCFeAzc5rYwp0",
    "user": {
      "login": "uvizhe",
      "id": 1889712,
      "node_id": "MDQ6VXNlcjE4ODk3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1889712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/uvizhe",
      "html_url": "https://github.com/uvizhe",
      "followers_url": "https://api.github.com/users/uvizhe/followers",
      "following_url": "https://api.github.com/users/uvizhe/following{/other_user}",
      "gists_url": "https://api.github.com/users/uvizhe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/uvizhe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/uvizhe/subscriptions",
      "organizations_url": "https://api.github.com/users/uvizhe/orgs",
      "repos_url": "https://api.github.com/users/uvizhe/repos",
      "events_url": "https://api.github.com/users/uvizhe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/uvizhe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T11:02:24Z",
    "updated_at": "2023-11-08T11:02:24Z",
    "author_association": "NONE",
    "body": "Thanks for a quick response, @michaelsproul!\r\n\r\n So, to which of new flags `post_beacon_pool_sync_committee_signatures` is related? :)\r\n\r\nAlso, I'd like to have some integration tests for this, but I'm not familiar with your code base. Can you tell me if it's possible to quickly add such tests and where should I look for a reference, or should I abandon this idea (I don't really want to create new test harnesses, looks out of scope of this issue).",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801652852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801775467",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1801775467",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1801775467,
    "node_id": "IC_kwDOCFeAzc5rZOlr",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T12:16:42Z",
    "updated_at": "2023-11-08T12:16:42Z",
    "author_association": "MEMBER",
    "body": "> So, to which of new flags post_beacon_pool_sync_committee_signatures is related?\r\n\r\nI think it would be best as its own flag: `--broadcast-sync-committee-messages`.\r\n\r\n> Also, I'd like to have some integration tests for this, but I'm not familiar with your code base.\r\n\r\nThe validator client tests are a bit weird at the moment. You could try adding something in `testing/simulator`, or we can leave it for a follow-up issue.\r\n\r\nThere are also CLI tests in `lighthouse/tests` that just confirm the CLI plumbing",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801775467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801794971",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1801794971",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1801794971,
    "node_id": "IC_kwDOCFeAzc5rZTWb",
    "user": {
      "login": "uvizhe",
      "id": 1889712,
      "node_id": "MDQ6VXNlcjE4ODk3MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1889712?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/uvizhe",
      "html_url": "https://github.com/uvizhe",
      "followers_url": "https://api.github.com/users/uvizhe/followers",
      "following_url": "https://api.github.com/users/uvizhe/following{/other_user}",
      "gists_url": "https://api.github.com/users/uvizhe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/uvizhe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/uvizhe/subscriptions",
      "organizations_url": "https://api.github.com/users/uvizhe/orgs",
      "repos_url": "https://api.github.com/users/uvizhe/repos",
      "events_url": "https://api.github.com/users/uvizhe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/uvizhe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T12:29:19Z",
    "updated_at": "2023-11-08T14:21:27Z",
    "author_association": "NONE",
    "body": "Got it, thanks.\r\n\r\nSo we got:\r\n\r\n- `--broadcast-attestations` for `post_beacon_pool_attestations`\r\n- `--broadcast-blocks` for `publish_signed_block_contents`\r\n- `--broadcast-sync-committee-messages` for `post_beacon_pool_sync_committee_signatures`\r\n- `--broadcast-subscriptions` for `post_validator_beacon_committee_subscriptions`, `post_validator_sync_committee_subscriptions`, and `post_validator_prepare_beacon_proposer`\r\n\r\nMaybe it would be more convenient to have a single `--broadcast` flag, which accepts multiple keywords like `blocks`, `subscriptions`? (This makes a code more complex however)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1801794971/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1802784224",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1802784224",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1802784224,
    "node_id": "IC_kwDOCFeAzc5rdE3g",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T22:32:20Z",
    "updated_at": "2023-11-08T22:32:20Z",
    "author_association": "MEMBER",
    "body": "I like the single broadcast flag option actually! If you use `strum` on the enum it should be OK from a complexity PoV. Just splitting the commas might be a bit annoying.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1802784224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1827222195",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1827222195",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1827222195,
    "node_id": "IC_kwDOCFeAzc5s6TKz",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-27T06:52:08Z",
    "updated_at": "2023-11-27T06:52:08Z",
    "author_association": "MEMBER",
    "body": "Closed by #4920.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1827222195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4684",
  "id": 1873677824,
  "node_id": "I_kwDOCFeAzc5vrg4A",
  "number": 4684,
  "title": "Request: VC option to submit messages to all connected beacon nodes",
  "user": {
    "login": "xrchz",
    "id": 181254,
    "node_id": "MDQ6VXNlcjE4MTI1NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xrchz",
    "html_url": "https://github.com/xrchz",
    "followers_url": "https://api.github.com/users/xrchz/followers",
    "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
    "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
    "organizations_url": "https://api.github.com/users/xrchz/orgs",
    "repos_url": "https://api.github.com/users/xrchz/repos",
    "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xrchz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-08-30T13:24:57Z",
  "updated_at": "2023-10-26T07:35:46Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nSometimes to maximise the chance of timely inclusion a node operator may want to have their validator client submit duties (attestations and proposals) to all connected beacon nodes, for redundancy. (This should be safe since only one validator client is operating so all submitted attestations should be the same and compatible, even if they are seen by different parts of the network initially.) \r\n\r\n## Version\r\n\r\nAll versions so far (up to 4.3.0).\r\n\r\n## Present Behaviour\r\n\r\nCurrently Lighthouse does not support broadcasting to all connected beacon nodes, and instead seems to only submit to the first/best node it knows about.\r\n\r\nThis seems to be the behaviour despite the existence of the `--disable-run-on-all` option.\r\n\r\n## Expected Behaviour\r\n\r\nWhen provided with an appropriate option (e.g. `--broadcast-duties`), submit duties to all connected beacon nodes.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 3,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1699174883",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1699174883",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1699174883,
    "node_id": "IC_kwDOCFeAzc5lR1nj",
    "user": {
      "login": "xrchz",
      "id": 181254,
      "node_id": "MDQ6VXNlcjE4MTI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrchz",
      "html_url": "https://github.com/xrchz",
      "followers_url": "https://api.github.com/users/xrchz/followers",
      "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
      "organizations_url": "https://api.github.com/users/xrchz/orgs",
      "repos_url": "https://api.github.com/users/xrchz/repos",
      "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrchz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T13:26:24Z",
    "updated_at": "2023-08-30T13:26:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems related to https://github.com/sigp/lighthouse/issues/3001",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1699174883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1755575572",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1755575572",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1755575572,
    "node_id": "IC_kwDOCFeAzc5oo_UU",
    "user": {
      "login": "xrchz",
      "id": 181254,
      "node_id": "MDQ6VXNlcjE4MTI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrchz",
      "html_url": "https://github.com/xrchz",
      "followers_url": "https://api.github.com/users/xrchz/followers",
      "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
      "organizations_url": "https://api.github.com/users/xrchz/orgs",
      "repos_url": "https://api.github.com/users/xrchz/repos",
      "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrchz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T14:39:24Z",
    "updated_at": "2023-10-10T14:39:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm guessing the place to edit for this would be `validator_client/src/beacon_node_fallback.rs`, in particular the `first_success` function could be changed (or another version added) that runs on all successes instead of stopping as soon as it finds one.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1755575572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756200616",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1756200616",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1756200616,
    "node_id": "IC_kwDOCFeAzc5orX6o",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T20:39:32Z",
    "updated_at": "2023-10-10T20:39:32Z",
    "author_association": "MEMBER",
    "body": "@xrchz There are functions in there called run, and run_on_all that have that behaviour. They don't support gathering data from all endpoints (e.g. forming attestations), but could be used for broadcasts",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756200616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756210104",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1756210104",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1756210104,
    "node_id": "IC_kwDOCFeAzc5oraO4",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T20:44:06Z",
    "updated_at": "2023-10-10T20:44:06Z",
    "author_association": "MEMBER",
    "body": "How it works at the moment is that subscriptions for duties are broadcast, but the messages themselves (blocks + attestations) are not. We could add a new flag to replace `--disable-run-on-all` called `--broadcast-subscriptions` (taking a bool) and a new flag/flags to control the broadcast of messages, e.g. `--broadcast-attestations`, `--broadcast-blocks`, etc",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756210104/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756248402",
    "html_url": "https://github.com/sigp/lighthouse/issues/4684#issuecomment-1756248402",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4684",
    "id": 1756248402,
    "node_id": "IC_kwDOCFeAzc5orjlS",
    "user": {
      "login": "xrchz",
      "id": 181254,
      "node_id": "MDQ6VXNlcjE4MTI1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/181254?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xrchz",
      "html_url": "https://github.com/xrchz",
      "followers_url": "https://api.github.com/users/xrchz/followers",
      "following_url": "https://api.github.com/users/xrchz/following{/other_user}",
      "gists_url": "https://api.github.com/users/xrchz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xrchz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xrchz/subscriptions",
      "organizations_url": "https://api.github.com/users/xrchz/orgs",
      "repos_url": "https://api.github.com/users/xrchz/repos",
      "events_url": "https://api.github.com/users/xrchz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xrchz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T20:59:56Z",
    "updated_at": "2023-10-10T20:59:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes I like those flag suggestions.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1756248402/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

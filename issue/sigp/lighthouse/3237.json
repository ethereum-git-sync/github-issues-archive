{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/3237",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/3237/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/3237/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/3237/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/3237",
  "id": 1259230419,
  "node_id": "I_kwDOCFeAzc5LDlTT",
  "number": 3237,
  "title": "Remove deficit gossipsub scoring during topic transition",
  "user": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2336800125,
      "node_id": "MDU6TGFiZWwyMzM2ODAwMTI1",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/t%20Networking",
      "name": "t Networking",
      "color": "40E0D0",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-06-03T02:16:38Z",
  "updated_at": "2023-07-02T05:15:26Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nWhen we fork, we transition between gossipsub topics. We remain subscribed to old topics to keep track of any stragglers. As the optimal case involves everyone shifting to new topics, we would expect little to no messages being sent along the old topics.\r\n\r\nThis poses an issue for gossipsub scoring which expects a minimum number of messages to be sent on a given topic. Thus peers that left on the mesh on old topics get penalized for not sending us the expected minimum number of messages. This can result in disconnecting and potentially banning of honest peers.\r\n\r\nIn the event of a fork or topic transition, we should adjust the scoring parameters such that we eliminate the minimum deficit value indicating that it is perfectly fine to receive no messages on that topic. We can use this function: https://github.com/libp2p/rust-libp2p/blob/master/protocols/gossipsub/src/behaviour.rs#L900 to achieve this.\r\n\r\nThe `network` crate mainly controls the fork-switching logic, so it may need to inform the behaviour of when to adjust the scoring for topics.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/3237/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/3237/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1616376056",
    "html_url": "https://github.com/sigp/lighthouse/issues/3237#issuecomment-1616376056",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/3237",
    "id": 1616376056,
    "node_id": "IC_kwDOCFeAzc5gV_D4",
    "user": {
      "login": "ackintosh",
      "id": 1885716,
      "node_id": "MDQ6VXNlcjE4ODU3MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1885716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ackintosh",
      "html_url": "https://github.com/ackintosh",
      "followers_url": "https://api.github.com/users/ackintosh/followers",
      "following_url": "https://api.github.com/users/ackintosh/following{/other_user}",
      "gists_url": "https://api.github.com/users/ackintosh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ackintosh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ackintosh/subscriptions",
      "organizations_url": "https://api.github.com/users/ackintosh/orgs",
      "repos_url": "https://api.github.com/users/ackintosh/repos",
      "events_url": "https://api.github.com/users/ackintosh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ackintosh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-02T05:15:26Z",
    "updated_at": "2023-07-02T05:15:26Z",
    "author_association": "MEMBER",
    "body": "> We can use this function: https://github.com/libp2p/rust-libp2p/blob/master/protocols/gossipsub/src/behaviour.rs#L900 to achieve this.\r\n\r\n@AgeManning Now the link might be pointing to a different place than you intended at the time. Is `set_application_score` the function?\r\nhttps://github.com/libp2p/rust-libp2p/blob/master/protocols/gossipsub/src/behaviour.rs#L935",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1616376056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

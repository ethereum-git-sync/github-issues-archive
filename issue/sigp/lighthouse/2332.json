{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/2332",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/2332",
  "id": 876488272,
  "node_id": "MDU6SXNzdWU4NzY0ODgyNzI=",
  "number": 2332,
  "title": "a lot of warning messages or error messages",
  "user": {
    "login": "GerardBri",
    "id": 83615406,
    "node_id": "MDQ6VXNlcjgzNjE1NDA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/83615406?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GerardBri",
    "html_url": "https://github.com/GerardBri",
    "followers_url": "https://api.github.com/users/GerardBri/followers",
    "following_url": "https://api.github.com/users/GerardBri/following{/other_user}",
    "gists_url": "https://api.github.com/users/GerardBri/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GerardBri/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GerardBri/subscriptions",
    "organizations_url": "https://api.github.com/users/GerardBri/orgs",
    "repos_url": "https://api.github.com/users/GerardBri/repos",
    "events_url": "https://api.github.com/users/GerardBri/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GerardBri/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2021-05-05T14:05:12Z",
  "updated_at": "2021-05-31T07:47:24Z",
  "closed_at": "2021-05-31T07:47:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI monitor all logs from beacon and validators binaries, then if a log doesnt respect a pattern like \"INFO\", i raise an alert.  \r\n\r\nAnd time to time, i 've got some alert on warning messages like :   \r\n\r\n```\r\nWARN Timed out to a peer's request. Likely too many resources, reduce peer count, service: libp2p\r\n```\r\nor\r\n```\r\nWARN Listener error                          error: Custom { kind: Other, error: Other(A(A(Underlying(Os { code: 103, kind: ConnectionAborted, message: \"Software caused connection abort\" })))) }, service: libp2p\r\n```\r\n\r\nsome of \r\n```\r\nERRO Fork choice failed                      location: block gossip, error: CanonicalHeadLockTimeout\r\n```\r\n\r\nand \r\n```\r\nWARN Did not advance head state              reason: Err(HeadMissingFromSnapshotCache(0x032cd19c1ff1ca9714f6d52b6acd9f57d7d1f13dd8c5f536e6c9a5c29ba085b0)), service: state_advance\r\n```\r\n\r\nIs there any fix possible or my beacon node had issues ?\r\n\r\n## Version\r\n\r\nLighthouse v1.3.0-3a24ca5\r\n\r\n## Present Behaviour\r\n\r\na lot of WARNING message, i've already set a list of  \"normal warning\" (which shouldn't exist from my point of view)\r\n- `WARN Block arrived early`\r\n- `WARN Banning peer that is currently disconnecting, peer_id:`\r\n- `WARN Beacon chain re-org`\r\n- `WARN Proposer duties re-org                  msg: this may happen from time to time, dependent_root: 0x..., prior_dependent_root: 0x..., service: duties`\r\n\r\n## Expected Behaviour\r\n\r\nLess of warning, error message or fix them ?\r\n\r\n## Steps to resolve\r\n\r\nrun beacon node + validator for a long time.\r\n",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/2332/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/834003361",
    "html_url": "https://github.com/sigp/lighthouse/issues/2332#issuecomment-834003361",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332",
    "id": 834003361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNDAwMzM2MQ==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-07T02:02:16Z",
    "updated_at": "2021-05-07T02:02:16Z",
    "author_association": "MEMBER",
    "body": "These occur if your computer's CPU is overloaded. I.e it cannot process the required amount data in the time frame needed. \r\n\r\nWhat is the CPU usage on your machine and what are its specs?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/834003361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/834643994",
    "html_url": "https://github.com/sigp/lighthouse/issues/2332#issuecomment-834643994",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332",
    "id": 834643994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNDY0Mzk5NA==",
    "user": {
      "login": "GerardBri",
      "id": 83615406,
      "node_id": "MDQ6VXNlcjgzNjE1NDA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/83615406?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GerardBri",
      "html_url": "https://github.com/GerardBri",
      "followers_url": "https://api.github.com/users/GerardBri/followers",
      "following_url": "https://api.github.com/users/GerardBri/following{/other_user}",
      "gists_url": "https://api.github.com/users/GerardBri/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GerardBri/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GerardBri/subscriptions",
      "organizations_url": "https://api.github.com/users/GerardBri/orgs",
      "repos_url": "https://api.github.com/users/GerardBri/repos",
      "events_url": "https://api.github.com/users/GerardBri/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GerardBri/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-07T17:35:20Z",
    "updated_at": "2021-05-07T17:38:35Z",
    "author_association": "NONE",
    "body": "I don't think the computer's CPU is overloaded, it's moreover underload\r\n\r\n- I've got an max of **120%** CPU usage with `openethereum` running   (avg 40-80%)\r\n- and `lighthouse` use about **~20%**,   \r\nso **140%** usage with a 6x core CPU, we 're far from a full 600% usage.  \r\n\r\nIn addition :  \r\n`load average: 0.72, 1.14, 1.43` which seems to be normal and underused with a 6x core CPU and 16GB of RAM\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/834643994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/834864887",
    "html_url": "https://github.com/sigp/lighthouse/issues/2332#issuecomment-834864887",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332",
    "id": 834864887,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNDg2NDg4Nw==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-07T23:38:19Z",
    "updated_at": "2021-05-07T23:38:19Z",
    "author_association": "MEMBER",
    "body": "Some of the logs you've posted are warnings to do with node performance and are legitimate cause for investigation, but you're right that some of the others are not. The ones that indicate real problems are:\n\n- Timing out to a node's request. This shouldn't happen if your node is performing well. This often involves reading blocks from disk to serve to a peer, so it could be your I/O letting you down (or too many peers).\n- Fork choice failing due to a lock timeout. This is indicative of something taking too long with the head lock, again could be I/O related (or maybe just bad luck and the lock getting starved).\n\nThe others about network status (re-orgs, proposer duty changes, early blocks) are to be expected from time to time and are usually nothing to worry about.\n\nThe reason we have these as warnings is that in some way it makes sense to have an alert level between `INFO` (everything is fine) and `ERRO`/`CRIT` (things are definitely screwed). Until we re-assess how we log in all of Lighthouse, I would disable alerts for warnings and instead treat them as meaning \"something slightly interesting or strange happened\". These warnings about network events also *could* be indicative of issues if they happened frequently (e.g. repeated re-orgs), and we currently shift that judgement onto the user rather than trying to codify rules about which kinds of re-orgs are allowable.\n\nAs another example, a user on Reddit recently found some invalid blocks on mainnet due to a warning:\n\nhttps://www.reddit.com/r/ethstaker/comments/n31tkq/lighthouse_did_not_advance_head_state_reason/",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/834864887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/851280747",
    "html_url": "https://github.com/sigp/lighthouse/issues/2332#issuecomment-851280747",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/2332",
    "id": 851280747,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTI4MDc0Nw==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-31T07:47:24Z",
    "updated_at": "2021-05-31T07:47:24Z",
    "author_association": "MEMBER",
    "body": "I'm going to close this once since I can't see anything actionable here. Thank you for reaching out though :)\r\n\r\n`WARN` logs don't always indicate an error. They're letting the user know that something sub-optimal is happening, which is not a cause for alarm itself. On our nodes, `CRIT` gets me out of bed and `ERRO` gets investigated next time I'm online. `WARN` gets added to todo list.\r\n\r\nHere are all your `WARN`s detailed:\r\n\r\n- `WARN Timed out to a peer's request.`: I don't see this one much, we'll keep an eye on it.\r\n- `WARN Listener error `: I've never seen this before, but it's unsurprising that the OS occasionally does things we don't expect (but are able to handle gracefully).\r\n- `WARN Did not advance head state`: this can happen occasionally with re-orgs. I wouldn't expect to see this much at all.\r\n- `WARN Block arrived early`: a block arrived early, it might be because your clock is wrong or it might be someone else. Time is squishy and relative, if you see a lot of these, check your clock (as per error message).\r\n- `WARN Banning peer that is currently disconnecting, peer_id:` this should be fixed in the next release, was sub-optimal behaviour on our end.\r\n- `WARN Beacon chain re-org`: indicates that there's some disagreement among nodes on the network. Occasionally this will happen, but if you see a lot of these (e.g., multiple per minute) start to be concerned about the network.\r\n- `WARN Proposer duties re-org`: as above.\r\n\r\nI wish we could straight-up declare \"this is ok\" and \"this is bad\", but on a decentralized network that relies on a lot of different people it can be hard to make that call. This is why it's nice to have `WARN`, we can indicate that something isn't great but it might just be due to network irregularities. \r\n\r\nI hope this helps! :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/851280747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

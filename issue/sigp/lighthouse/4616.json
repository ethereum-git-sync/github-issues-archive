{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4616",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4616/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4616/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4616/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4616",
  "id": 1848887045,
  "node_id": "I_kwDOCFeAzc5uM8cF",
  "number": 4616,
  "title": "Spurious failures in `validator_manager` tests",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1245875191,
      "node_id": "MDU6TGFiZWwxMjQ1ODc1MTkx",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/val-client",
      "name": "val-client",
      "color": "9cd6fc",
      "default": false,
      "description": "Relates to the validator client binary"
    },
    {
      "id": 2336803064,
      "node_id": "MDU6TGFiZWwyMzM2ODAzMDY0",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/infra-ci",
      "name": "infra-ci",
      "color": "7365BC",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-08-14T02:30:36Z",
  "updated_at": "2023-08-14T02:31:42Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI just had a spurious failure when running the `validator_manager` tests locally. Weirdly, it's an invalid password failure:\r\n\r\n```\r\n---- move_validators::test::three_validators_move_two stdout ----\r\nStarting derivation of 3 keystores. Each keystore may take several seconds.\r\nCompleted 1/3: 0x88b6b3a9b391fa5593e8bce8d06102df1a56248368086929709fbb4a8570dc6a560febeef8159b19789e9c1fd13572f0\r\nCompleted 2/3: 0xa33ab9d93fb53c4f027944aaa11a13be0c150b7cc2e379d85d1ed4db38d178b4e4ebeae05832158b8c746c1961da00ce\r\nCompleted 3/3: 0x807d7219776c5460dd30851ed869ad0636d20fc27046d153870c2696dea7e114c60cd02fac0d71387ef7f00042c5f2a8\r\nKeystore generation complete\r\nWriting \"/tmp/.tmpKCG18e/validators.json\"\r\nWriting \"/tmp/.tmpKCG18e/deposits.json\"\r\nValidator client is reachable at http://127.0.0.1:34623/ and reports 0 validators\r\nStarting to submit 3 validators to VC, each validator may take several seconds\r\nUploaded keystore 1 of 3 to the VC\r\nUpload of keystore 2 of 3 failed with message: Some(\"failed to initialize validator: \\\"Unable to add definition: UnableToDecryptKeystore(InvalidPassword)\\\"\"). A potential solution is run this command again using the --ignore-duplicates flag, however care should be taken to ensure that there are no duplicate deposits submitted.\r\nthread 'move_validators::test::three_validators_move_two' panicked at 'assertion failed: import_test_result.result.is_ok()', validator_manager/src/move_validators.rs:915:17\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\n## Steps to resolve\r\n\r\nAt first blush I'm not sure how this is possible without memory corruption or some other nastiness. I'm using `mold` as my linker, I'll see if I can also reproduce this failure without it. Platform tested on is Linux.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4616/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4616/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1676584752",
    "html_url": "https://github.com/sigp/lighthouse/issues/4616#issuecomment-1676584752",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4616",
    "id": 1676584752,
    "node_id": "IC_kwDOCFeAzc5j7qcw",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-14T02:31:42Z",
    "updated_at": "2023-08-14T02:31:42Z",
    "author_association": "MEMBER",
    "body": "I guess it could be a tmp file collision between multiple tests running in parallel. One would hope that `tempfile` guards against that though.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1676584752/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

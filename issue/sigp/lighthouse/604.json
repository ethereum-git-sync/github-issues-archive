{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/604",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/604/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/604/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/604/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/604",
  "id": 523941361,
  "node_id": "MDU6SXNzdWU1MjM5NDEzNjE=",
  "number": 604,
  "title": "Onboarding testnet validators",
  "user": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1141293876,
      "node_id": "MDU6TGFiZWwxMTQxMjkzODc2",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/work-started",
      "name": "work-started",
      "color": "e072ab",
      "default": false,
      "description": ""
    },
    {
      "id": 1232620456,
      "node_id": "MDU6TGFiZWwxMjMyNjIwNDU2",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/RFC",
      "name": "RFC",
      "color": "4aaa19",
      "default": false,
      "description": "Request for comment"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/sigp/lighthouse/milestones/2",
    "html_url": "https://github.com/sigp/lighthouse/milestone/2",
    "labels_url": "https://api.github.com/repos/sigp/lighthouse/milestones/2/labels",
    "id": 4868268,
    "node_id": "MDk6TWlsZXN0b25lNDg2ODI2OA==",
    "number": 2,
    "title": "Public Testnet",
    "description": null,
    "creator": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 33,
    "state": "closed",
    "created_at": "2019-11-21T23:13:44Z",
    "updated_at": "2019-12-18T07:13:57Z",
    "due_on": null,
    "closed_at": "2019-12-18T07:13:57Z"
  },
  "comments": 1,
  "created_at": "2019-11-17T05:58:08Z",
  "updated_at": "2019-11-25T04:48:25Z",
  "closed_at": "2019-11-25T04:48:25Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Here I propose a workflow for on-boarding validators to Goerli testnets (but it should also work for mainnet tetsnets).\r\n\r\n## Proposal\r\n\r\n### Components\r\n\r\nThere are two software components:\r\n\r\n1. the `account_manager` crate, executed via the monolithic `lighthouse` binary.\r\n    - Generates cryptographic keys, initializes validator slashing databases and produces eth1 deposit data.\r\n1.  a single-page web application, served from some sigp domain but also available locally\r\n    - allows users to submit their validator deposit transactions via a browser (e.g., using metamask).\r\n\r\n(1) already exists, however it requires additional features to suit this workflow. (2) does not exist yet.\r\n\r\n### Workflow\r\n\r\nA user wishes to become a validator:\r\n\r\n1. The user downloads, builds and installs lighthouse from this repo.\r\n1. The user runs the following command `$ lighthouse account_manager validator new`\r\n    - A new directory is created for that validator in `~/.lighthouse/validators`\r\n    - Deposit and withdrawal BLS keystores are created (see #596).\r\n    - An empty slashing database is created (see #588).\r\n    - An `eth1_tx_data` file is created (this is described later).\r\n1. The user starts the validator (and any other validators in the datadir) by running `$ lighthouse validator_client`\r\n    - the logs of the validator client inform the user that their validator is not yet included in the beacon state (the validator is \"unknown\").\r\n1. The user goes to the \"deposit website\" and uploads their `eth1_tx_data` file and uses metamask to create a deposit transaction. It provides some feedback once the deposit is confirmed.\r\n1. The user watches the logs of the validator client (started earlier) to see the validator transition from unknown, to deposited and then to active.\r\n\r\n\r\n#### The `eth1_tx_data` file\r\n\r\nThis file is simply the inputs to the [`deposit`](https://github.com/ethereum/eth2.0-specs/blob/03fb0979485a204890053ae0b5dcbbe06c7f1f5c/deposit_contract/contracts/validator_registration.v.py#L67-L70) function on the deposit contract.\r\n\r\nIt contains a simple, bytes representation of `(pubkey, withdrawal_credentials, signature, deposit_data_root)`.\r\n\r\n#### The deposit website\r\n\r\nThis just needs to be a static, single-page webpage acting as a shim between metamask and the `eth1_tx_data` file.\r\n\r\nIt only really needs three features:\r\n- A button to upload the `eth1_tx_data`\r\n- A button to create a deposit transaction using the `eth1_tx_data`.\r\n- Some feedback about whether or not the transaction was mined and successful.\r\n",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/604/reactions",
    "total_count": 3,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 3,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/604/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/557314980",
    "html_url": "https://github.com/sigp/lighthouse/issues/604#issuecomment-557314980",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/604",
    "id": 557314980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1NzMxNDk4MA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-21T23:14:52Z",
    "updated_at": "2019-11-21T23:14:52Z",
    "author_association": "MEMBER",
    "body": "FYI, I have built this website and am working on the necessary changes to Lighthouse.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/557314980/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 2,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

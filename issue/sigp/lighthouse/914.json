{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/914",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/914/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/914/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/914/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/914",
  "id": 581957992,
  "node_id": "MDU6SXNzdWU1ODE5NTc5OTI=",
  "number": 914,
  "title": "Add REST API tests for new API functions",
  "user": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 985647286,
      "node_id": "MDU6TGFiZWw5ODU2NDcyODY=",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/good%20first%20issue",
      "name": "good first issue",
      "color": "7057ff",
      "default": true,
      "description": "Good for newcomers"
    },
    {
      "id": 1078831612,
      "node_id": "MDU6TGFiZWwxMDc4ODMxNjEy",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/test%20improvement",
      "name": "test improvement",
      "color": "9ce542",
      "default": false,
      "description": "Improve tests"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-03-16T02:53:44Z",
  "updated_at": "2020-07-20T06:06:45Z",
  "closed_at": "2020-07-20T06:06:45Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe REST Api functions have been modified for the network upgrade. Unit tests need to be created to ensure they function as expected. \r\n\r\nThe new API's are on the `v0.2.0` branch. \r\n\r\nIf anyone wants to pick this up, let me know and I can detail this further. \r\n",
  "closed_by": {
    "login": "AgeManning",
    "id": 7454587,
    "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgeManning",
    "html_url": "https://github.com/AgeManning",
    "followers_url": "https://api.github.com/users/AgeManning/followers",
    "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
    "organizations_url": "https://api.github.com/users/AgeManning/orgs",
    "repos_url": "https://api.github.com/users/AgeManning/repos",
    "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgeManning/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/914/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/914/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/616074987",
    "html_url": "https://github.com/sigp/lighthouse/issues/914#issuecomment-616074987",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/914",
    "id": 616074987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjA3NDk4Nw==",
    "user": {
      "login": "ackintosh",
      "id": 1885716,
      "node_id": "MDQ6VXNlcjE4ODU3MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1885716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ackintosh",
      "html_url": "https://github.com/ackintosh",
      "followers_url": "https://api.github.com/users/ackintosh/followers",
      "following_url": "https://api.github.com/users/ackintosh/following{/other_user}",
      "gists_url": "https://api.github.com/users/ackintosh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ackintosh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ackintosh/subscriptions",
      "organizations_url": "https://api.github.com/users/ackintosh/orgs",
      "repos_url": "https://api.github.com/users/ackintosh/repos",
      "events_url": "https://api.github.com/users/ackintosh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ackintosh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-19T08:25:32Z",
    "updated_at": "2020-04-19T08:25:32Z",
    "author_association": "MEMBER",
    "body": "Hi, I would love to address this issue! ðŸ˜ƒ ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/616074987/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/623952870",
    "html_url": "https://github.com/sigp/lighthouse/issues/914#issuecomment-623952870",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/914",
    "id": 623952870,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMzk1Mjg3MA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-05T09:31:43Z",
    "updated_at": "2020-05-05T09:31:43Z",
    "author_association": "MEMBER",
    "body": "Hey @ackintosh \r\nThanks for your interest.\r\n\r\nThis issue is about extending our current test suite for the rest api. We are undergoing a refactor to stable futures, but I believe this shouldn't effect this issue too much. \r\n\r\nCurrently we have a series of tests here:\r\nhttps://github.com/sigp/lighthouse/blob/master/beacon_node/rest_api/tests/test.rs\r\n\r\nHowever these are lacking a number of endpoints. The tests use a `remote_beacon_node` which provides public functions for the rest http api endpoints. See this file:\r\nhttps://github.com/sigp/lighthouse/blob/master/eth2/utils/remote_beacon_node/src/lib.rs\r\n\r\nThe actual endpoints are listed here: https://github.com/sigp/lighthouse/blob/master/beacon_node/rest_api/src/router.rs#L62\r\n\r\nI think a few are not tested. The main ones I was concerned about are:\r\n- \"/validator/subscribe\"\r\n- \"/validator/aggregate_attestation\"\r\n- \"/validator/attestations\"\r\n- \"/validator/aggregate_and_proofs\"\r\n\r\nHopefully this is enough information to start digging around. Please let me know of any further questions :)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/623952870/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/625738169",
    "html_url": "https://github.com/sigp/lighthouse/issues/914#issuecomment-625738169",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/914",
    "id": 625738169,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTczODE2OQ==",
    "user": {
      "login": "ackintosh",
      "id": 1885716,
      "node_id": "MDQ6VXNlcjE4ODU3MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1885716?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ackintosh",
      "html_url": "https://github.com/ackintosh",
      "followers_url": "https://api.github.com/users/ackintosh/followers",
      "following_url": "https://api.github.com/users/ackintosh/following{/other_user}",
      "gists_url": "https://api.github.com/users/ackintosh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ackintosh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ackintosh/subscriptions",
      "organizations_url": "https://api.github.com/users/ackintosh/orgs",
      "repos_url": "https://api.github.com/users/ackintosh/repos",
      "events_url": "https://api.github.com/users/ackintosh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ackintosh/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-08T09:54:11Z",
    "updated_at": "2020-05-08T09:54:11Z",
    "author_association": "MEMBER",
    "body": "Thank you for the details! I'll start on this issue on this weekend and will let you know if I have any questions. ðŸ˜ƒ \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/625738169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/626423625",
    "html_url": "https://github.com/sigp/lighthouse/issues/914#issuecomment-626423625",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/914",
    "id": 626423625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjQyMzYyNQ==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T01:22:27Z",
    "updated_at": "2020-05-11T01:22:27Z",
    "author_association": "MEMBER",
    "body": "> I think a few are not tested. The main ones I was concerned about are:\r\n> \r\n>     * \"/validator/subscribe\"\r\n> \r\n>     * \"/validator/aggregate_attestation\"\r\n> \r\n>     * \"/validator/attestations\"\r\n> \r\n>     * \"/validator/aggregate_and_proofs\"\r\n\r\nFYI the test below covers all of these endpoints accept `validator/subscribe`. It could probably do with some more comprehensive coverage but they do have _some_ coverage presently:\r\n\r\nhttps://github.com/sigp/lighthouse/blob/294d007f648db6784b6f93e48990228585f418b8/beacon_node/rest_api/tests/test.rs#L80-L260\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/626423625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/660823344",
    "html_url": "https://github.com/sigp/lighthouse/issues/914#issuecomment-660823344",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/914",
    "id": 660823344,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDgyMzM0NA==",
    "user": {
      "login": "AgeManning",
      "id": 7454587,
      "node_id": "MDQ6VXNlcjc0NTQ1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7454587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AgeManning",
      "html_url": "https://github.com/AgeManning",
      "followers_url": "https://api.github.com/users/AgeManning/followers",
      "following_url": "https://api.github.com/users/AgeManning/following{/other_user}",
      "gists_url": "https://api.github.com/users/AgeManning/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AgeManning/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AgeManning/subscriptions",
      "organizations_url": "https://api.github.com/users/AgeManning/orgs",
      "repos_url": "https://api.github.com/users/AgeManning/repos",
      "events_url": "https://api.github.com/users/AgeManning/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AgeManning/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-20T06:06:45Z",
    "updated_at": "2020-07-20T06:06:45Z",
    "author_association": "MEMBER",
    "body": "Closed in #1189 ",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/660823344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

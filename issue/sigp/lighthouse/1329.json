{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1329",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1329/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1329/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1329/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1329",
  "id": 651143471,
  "node_id": "MDU6SXNzdWU2NTExNDM0NzE=",
  "number": 1329,
  "title": "Prevent double sending deposit tx if response was not received from eth1 node",
  "user": {
    "login": "ethDreamer",
    "id": 37123614,
    "node_id": "MDQ6VXNlcjM3MTIzNjE0",
    "avatar_url": "https://avatars.githubusercontent.com/u/37123614?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ethDreamer",
    "html_url": "https://github.com/ethDreamer",
    "followers_url": "https://api.github.com/users/ethDreamer/followers",
    "following_url": "https://api.github.com/users/ethDreamer/following{/other_user}",
    "gists_url": "https://api.github.com/users/ethDreamer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ethDreamer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ethDreamer/subscriptions",
    "organizations_url": "https://api.github.com/users/ethDreamer/orgs",
    "repos_url": "https://api.github.com/users/ethDreamer/repos",
    "events_url": "https://api.github.com/users/ethDreamer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ethDreamer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2336802021,
      "node_id": "MDU6TGFiZWwyMzM2ODAyMDIx",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/UX-and-logs",
      "name": "UX-and-logs",
      "color": "DB9046",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-07-05T20:51:06Z",
  "updated_at": "2020-11-08T23:33:15Z",
  "closed_at": "2020-11-08T23:33:15Z",
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "## Description\r\nUnder most circumstances, when a deposit transaction is sent to an eth1 node (either via IPC or RPC), the node responds immediately with either an error or the tx hash. This is NOT true when the tx is signed with a hardware wallet; the node has to wait for the user to confirm.\r\n\r\nWhen Altona launched, I used my ledger to sign the deposit transactions that lighthouse sent to my geth node. After confirming the first successful transaction with my ledger, I hit ctrl+c to stop lighthouse. BUT I didn't realize that lighthouse had received the first successful response from geth and sent a second transaction before I hit ctrl+c.\r\n\r\nAfter I stopped lighthouse, my ledger was sitting on the confirm screen, and I confirmed the second transaction without realizing it.\r\n\r\nThen the next time I ran the deposit subcommand, lighthouse re-sent the deposit transaction for that validator because it never received the successful response from geth.\r\n\r\nThis was the result:\r\nhttps://altona.beaconcha.in/validator/1014#deposits\r\n\r\n## Present Behaviour\r\n\r\nLighthouse doesn't remember that it sent a deposit tx and didn't record a response, so it'll just send another one :/\r\n\r\n## Expected Behaviour\r\n\r\nShould use a trap file and alert the user to check that the tx wasn't confirmed and remove it before sending another one.",
  "closed_by": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1329/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1329/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/723683030",
    "html_url": "https://github.com/sigp/lighthouse/issues/1329#issuecomment-723683030",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1329",
    "id": 723683030,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzY4MzAzMA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-08T23:33:15Z",
    "updated_at": "2020-11-08T23:33:15Z",
    "author_association": "MEMBER",
    "body": "Closing this since we removed the `lighthouse account validator deposit` command.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/723683030/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

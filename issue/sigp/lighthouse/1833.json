{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1833",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1833/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1833/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1833/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1833",
  "id": 730080745,
  "node_id": "MDU6SXNzdWU3MzAwODA3NDU=",
  "number": 1833,
  "title": "\"Failed to decode ProtoArrayForkChoice: InvalidByteLength { len: 168, expected: 184 }\"",
  "user": {
    "login": "jamescbury",
    "id": 25110585,
    "node_id": "MDQ6VXNlcjI1MTEwNTg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/25110585?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jamescbury",
    "html_url": "https://github.com/jamescbury",
    "followers_url": "https://api.github.com/users/jamescbury/followers",
    "following_url": "https://api.github.com/users/jamescbury/following{/other_user}",
    "gists_url": "https://api.github.com/users/jamescbury/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jamescbury/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jamescbury/subscriptions",
    "organizations_url": "https://api.github.com/users/jamescbury/orgs",
    "repos_url": "https://api.github.com/users/jamescbury/repos",
    "events_url": "https://api.github.com/users/jamescbury/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jamescbury/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-10-27T03:53:55Z",
  "updated_at": "2020-10-27T04:30:11Z",
  "closed_at": "2020-10-27T04:30:10Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\nIssue starting lighthouse beacon node after the upgrade to v0.3.1.  I've tried rebuilding several times, but no luck.  I've been following the steps on 'https://someresat.medium.com/guide-to-staking-on-ethereum-2-0-ubuntu-medalla-lighthouse-c6f3c34597a8'\r\n\r\n## Version\r\n\r\nlighthouse/v0.3.1-92c8eba8\r\nrustc 1.47.0 (18bf6b4f0 2020-10-07)\r\n\r\n## Present Behaviour\r\n\r\n> Oct 26 23:45:49 house-computer-2 systemd[1]: Started Lighthouse Beacon Node.\r\n> Oct 26 23:45:49 house-computer-2 lighthouse[9440]: Oct 26 23:45:49.844 WARN Ethereum 2.0 is pre-release. This software is experimental.\r\n> Oct 26 23:45:49 house-computer-2 lighthouse[9440]: Oct 26 23:45:49.844 INFO Lighthouse started                      version: Lighthouse/v0.3.1-92c8eba8\r\n> Oct 26 23:45:49 house-computer-2 lighthouse[9440]: Oct 26 23:45:49.844 INFO Configured for testnet                  name: medalla\r\n> Oct 26 23:45:49 house-computer-2 lighthouse[9440]: Oct 26 23:45:49.844 INFO Data directory initialised              datadir: /var/lib/lighthouse/beacon-node\r\n> Oct 26 23:45:50 house-computer-2 lighthouse[9440]: Oct 26 23:45:50.154 INFO Starting beacon chain                   method: resume, service: beacon\r\n> Oct 26 23:45:50 house-computer-2 lighthouse[9440]: Oct 26 23:45:50.603 CRIT Failed to start beacon node             reason: Unable to parse persisted fork choice from disk: InvalidProtoArrayBytes(\"Failed to decode ProtoArrayForkChoice: InvalidByteLength { len: 168, expected: 184 }\")\r\n> Oct 26 23:45:50 house-computer-2 lighthouse[9440]: Oct 26 23:45:50.603 INFO Internal shutdown received              reason: Failed to start beacon node\r\n> Oct 26 23:45:50 house-computer-2 lighthouse[9440]: Oct 26 23:45:50.603 INFO Shutting down..\r\n> Oct 26 23:45:53 house-computer-2 systemd[1]: lighthousebeacon.service: Succeeded.\r\n> Oct 26 23:45:58 house-computer-2 systemd[1]: lighthousebeacon.service: Scheduled restart job, restart counter is at 55.\r\n> Oct 26 23:45:58 house-computer-2 systemd[1]: Stopped Lighthouse Beacon Node.\r\n> \r\n\r\n## Expected Behaviour\r\n\r\nNormally lighthouse beacon starts syncing after this.\r\n\r\n## Steps to resolve\r\n\r\nPlease describe the steps required to resolve this issue, if known.\r\n",
  "closed_by": {
    "login": "jamescbury",
    "id": 25110585,
    "node_id": "MDQ6VXNlcjI1MTEwNTg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/25110585?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jamescbury",
    "html_url": "https://github.com/jamescbury",
    "followers_url": "https://api.github.com/users/jamescbury/followers",
    "following_url": "https://api.github.com/users/jamescbury/following{/other_user}",
    "gists_url": "https://api.github.com/users/jamescbury/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jamescbury/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jamescbury/subscriptions",
    "organizations_url": "https://api.github.com/users/jamescbury/orgs",
    "repos_url": "https://api.github.com/users/jamescbury/repos",
    "events_url": "https://api.github.com/users/jamescbury/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jamescbury/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1833/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1833/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/716963861",
    "html_url": "https://github.com/sigp/lighthouse/issues/1833#issuecomment-716963861",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1833",
    "id": 716963861,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjk2Mzg2MQ==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-27T03:58:05Z",
    "updated_at": "2020-10-27T03:58:05Z",
    "author_association": "MEMBER",
    "body": "Hey @jamescbury, this is a bit of an obscure looking error, but it means your data directory still has files lying around from v0.2.x. You need to delete them and resync to run v0.3.1.\r\n\r\nYou could manually `rm -r /var/lib/lighthouse/beacon-node/beacon`, or run the Lighthouse beacon node command with `--purge-db` (just once).\r\n\r\nAs you're running with a custom datadir, no other migration steps should be necessary, but if you run into trouble the release notes for v0.3.0 contain some more info about migrating: https://github.com/sigp/lighthouse/releases/tag/v0.3.0",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/716963861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/716973165",
    "html_url": "https://github.com/sigp/lighthouse/issues/1833#issuecomment-716973165",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1833",
    "id": 716973165,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjk3MzE2NQ==",
    "user": {
      "login": "jamescbury",
      "id": 25110585,
      "node_id": "MDQ6VXNlcjI1MTEwNTg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/25110585?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamescbury",
      "html_url": "https://github.com/jamescbury",
      "followers_url": "https://api.github.com/users/jamescbury/followers",
      "following_url": "https://api.github.com/users/jamescbury/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamescbury/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamescbury/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamescbury/subscriptions",
      "organizations_url": "https://api.github.com/users/jamescbury/orgs",
      "repos_url": "https://api.github.com/users/jamescbury/repos",
      "events_url": "https://api.github.com/users/jamescbury/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamescbury/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-27T04:30:10Z",
    "updated_at": "2020-10-27T04:30:10Z",
    "author_association": "NONE",
    "body": "@michaelsproul fantastic - it worked.  I had removed the build files, but not the datadir.  Thanks for the quick response.\r\n\r\nAnd thanks for all the hard work you've put into this - lighthouse is great, can't wait to run it on the mainnet.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/716973165/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

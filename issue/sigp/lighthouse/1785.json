{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1785",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1785/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1785/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1785/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1785",
  "id": 724294684,
  "node_id": "MDU6SXNzdWU3MjQyOTQ2ODQ=",
  "number": 1785,
  "title": "Remove head tracker in favour of fork choice",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2034355093,
      "node_id": "MDU6TGFiZWwyMDM0MzU1MDkz",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/consensus",
      "name": "consensus",
      "color": "5e59bf",
      "default": false,
      "description": "An issue/PR that touches consensus code, such as state_processing or block verification."
    },
    {
      "id": 2490305065,
      "node_id": "MDU6TGFiZWwyNDkwMzA1MDY1",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/A1",
      "name": "A1",
      "color": "223184",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-10-19T06:05:40Z",
  "updated_at": "2022-11-09T05:03:44Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe head tracker contains redundant information that is already present in the fork choice block DAG. This is undesirable as it means there isn't just \"one source of truth\", and the two data structures need to be kept in sync across concurrent executions, which is highly non-trivial (see #1771 for more)\r\n\r\n## Steps to resolve\r\n\r\n* Write code to derive the list of heads from fork choice\r\n* Remove the `HeadTracker` struct from the beacon chain\r\n* Port the migration code to use the head data from fork choice\r\n* Work out how to reconcile the pruning of fork choice with pruning of the database. Possible approaches:\r\n     * Mark blocks deleted from disk as `deleted` in fork choice, until they are cleaned up by fork choice's own pruning mechanism\r\n     * Mirror the pruning of the on-disk database in fork choice (i.e. prune the two structures together)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1785/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1785/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

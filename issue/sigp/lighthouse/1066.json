{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/1066",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/1066/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/1066/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/1066/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/1066",
  "id": 607509147,
  "node_id": "MDU6SXNzdWU2MDc1MDkxNDc=",
  "number": 1066,
  "title": "No valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote",
  "user": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-04-27T12:29:24Z",
  "updated_at": "2020-04-30T10:07:10Z",
  "closed_at": "2020-04-30T10:07:10Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI'm unsure this is an actual issue, but reporting it here because my beacon node on Schlesi keeps reporting it as `ERRO`.\r\n\r\n```\r\nNo valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote, genesis_time: 1587981600, earliest_block_timestamp: 1587974284, lowest_block_number: 2596126, service: beacon\r\n```\r\n\r\n## Version\r\n\r\nUsing Lighthouse from this branch #1052 @ 310cc4fb504f6b3d6f4b0e9a5f53715a0c848138\r\n\r\nUsing Schlesi config: https://github.com/goerli/schlesi\r\n\r\n## Present Behavior\r\n\r\nConnected a validator client to a beacon node locally.\r\n\r\n```\r\nApr 27 11:12:37.439 INFO Beacon chain initialized                head_slot: 0, head_block: 0xc9cb…db82, head_state: 0x55f8…c2fc, service: beacon\r\nApr 27 11:12:37.439 INFO Libp2p Service                          peer_id: PeerId(\"16Uiu2HAmP2QxXy9hgzC52faSZrhqJVXK3uakEWA7xxDXXNMfz9ZL\"), service: network\r\nApr 27 11:12:37.440 INFO ENR Initialised                         tcp: Some(9000), udp: Some(9000), ip: Some(127.0.0.1), id: 0xfdf9..be7c, seq: 1, enr: enr:-LK4QBewQubLzZvDu7ZHKFZspEy-zG8ODc67ip1vfuV4UagqL7PaxgGUGvjZy9mgE4X0ALGQ8KwT60_Mp-OJHX4vF5sBh2F0dG5ldHOIAAAAAAAAAACEZXRoMpCZJe_WAAAAAP__________gmlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQOaEePmecbj4Y1ONUa4TtS21fRyIUlKwEVfa5BZJPtMe4N0Y3CCIyiDdWRwgiMo, service: network\r\nApr 27 11:12:37.440 INFO Listening established                   address: /ip4/0.0.0.0/tcp/9000/p2p/16Uiu2HAmP2QxXy9hgzC52faSZrhqJVXK3uakEWA7xxDXXNMfz9ZL, service: network\r\nApr 27 11:12:37.440 INFO Subscribed to topics                    topics: [BeaconBlock, BeaconAggregateAndProof, VoluntaryExit, ProposerSlashing, AttesterSlashing], service: network\r\nApr 27 11:12:37.440 INFO HTTP API started                        port: 5052, address: 127.0.0.1, service: http\r\nApr 27 11:12:37.447 WARN Received old metadata                   new_seq_no: 0, known_seq_no: 0, peer_id: 16Uiu2HAmEHdW4czXphgYtFsbK1zyUrvHW23AEYxym6e5uftA6bV5, service: network\r\nApr 27 11:12:37.469 INFO Address updated                         udp_port: 9000, ip: 192.168.0.121, service: network\r\nApr 27 11:12:37.470 WARN Received old metadata                   new_seq_no: 0, known_seq_no: 0, peer_id: 16Uiu2HAm3PGdRXquDUWF52L13n9WwY2zMcrLrctEbV3AUMKQJLQQ, service: network\r\nApr 27 11:12:38.620 INFO Address updated                         udp_port: 9000, ip: 87.180.198.9, service: network\r\nApr 27 11:54:28.882 INFO Sync state updated                      new_state: Synced, old_state: Stalled, service: sync, service: network\r\nApr 27 12:00:06.001 INFO Synced                                  slot: 0, epoch: 0, finalized_epoch: 0, finalized_root: 0x0000…0000, peers: 3, service: slot_notifier\r\nApr 27 12:00:18.001 INFO Synced                                  slot: 1, epoch: 0, finalized_epoch: 0, finalized_root: 0x0000…0000, peers: 3, service: slot_notifier\r\nApr 27 12:00:24.158 ERRO No valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote, genesis_time: 1587981600, earliest_block_timestamp: 1587974284, lowest_block_number: 2596126, service: beacon\r\nApr 27 12:00:24.181 INFO Block from local validator              block_slot: 2, block_root: 0x4a7f…774a, service: http\r\nApr 27 12:00:30.001 INFO Synced                                  slot: 2, epoch: 0, finalized_epoch: 0, finalized_root: 0x0000…0000, peers: 3, service: slot_notifier\r\nApr 27 12:00:36.185 ERRO No valid eth1_data votes, `votes_to_consider` empty, outcome: casting `state.eth1_data` as eth1 vote, genesis_time: 1587981600, earliest_block_timestamp: 1587974284, lowest_block_number: 2596126, service: beacon\r\nApr 27 12:00:36.206 INFO Block from local validator              block_slot: 3, block_root: 0xfc21…3d6e, service: http\r\nApr 27 12:00:42.001 INFO Synced                                  slot: 3, epoch: 0, finalized_epoch: 0, finalized_root: 0x0000…0000, peers: 3, service: slot_notifier\r\n```\r\n\r\n## Expected Behavior\r\n\r\nShould not ERROR :)\r\n\r\nI can't actually tell what the implications are.\r\n\r\n## Steps to resolve\r\n\r\nN/A\r\n\r\n---\r\n\r\nThis only happens on the beacon node where the validator client is connected to.",
  "closed_by": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/1066/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/1066/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/620271962",
    "html_url": "https://github.com/sigp/lighthouse/issues/1066#issuecomment-620271962",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1066",
    "id": 620271962,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDI3MTk2Mg==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-27T22:37:40Z",
    "updated_at": "2020-04-27T22:37:40Z",
    "author_association": "MEMBER",
    "body": "I think this is an issue we've seen a few times which stems from a configuration problem. If the warning eventually goes away then it would be consistent with what I've observed.\r\n\r\nThe issue is when the time between eth1 genesis and eth2 genesis is shorter than `ETH1_FOLLOW_DISTANCE`. What will happen is the node will reach back prior to genesis (or even contract deployment) when it tries to vote making it impossible to cast a valid vote.\r\n\r\nThis issue can even result in a chain-stopping bug where the node becomes unable to produce a valid block because the eth1 vote would cause the deposit count to go backwards (I swear I raised an issue on the spec for this, but I can't find it; will follow up).\r\n\r\nFor testnets with short `MIN_GENESIS_TIME` I would recommend setting `ETH1_FOLLOW_DISTANCE` to something appropriately short.\r\n\r\nI think we can close this as a \"configuration issue\" if you can confirm:\r\n- `MIN_GENESIS_TIME < ETH1_FOLLOW_DISTANCE * SECONDS_PER_ETH1_BLOCK`\r\n- The node eventually stopped showing this error.\r\n\r\nPerhaps it would be nice if we added a warning when this is the case. If you think this would be sensible, feel free to make a feature-request issue :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/620271962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/620466342",
    "html_url": "https://github.com/sigp/lighthouse/issues/1066#issuecomment-620466342",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/1066",
    "id": 620466342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDQ2NjM0Mg==",
    "user": {
      "login": "q9f",
      "id": 58883403,
      "node_id": "MDQ6VXNlcjU4ODgzNDAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/q9f",
      "html_url": "https://github.com/q9f",
      "followers_url": "https://api.github.com/users/q9f/followers",
      "following_url": "https://api.github.com/users/q9f/following{/other_user}",
      "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
      "organizations_url": "https://api.github.com/users/q9f/orgs",
      "repos_url": "https://api.github.com/users/q9f/repos",
      "events_url": "https://api.github.com/users/q9f/events{/privacy}",
      "received_events_url": "https://api.github.com/users/q9f/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-28T08:40:44Z",
    "updated_at": "2020-04-28T08:40:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> `MIN_GENESIS_TIME < ETH1_FOLLOW_DISTANCE * SECONDS_PER_ETH1_BLOCK`\r\n\r\n`MIN_GENESIS_TIME` or `MIN_GENESIS_DELAY`?\r\n\r\n> The node eventually stopped showing this error.\r\n\r\nI can confirm this.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/620466342/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

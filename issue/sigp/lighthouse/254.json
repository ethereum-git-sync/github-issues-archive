{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/254/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/254/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/254/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/254",
  "id": 413745169,
  "node_id": "MDU6SXNzdWU0MTM3NDUxNjk=",
  "number": 254,
  "title": "Implement slash protection",
  "user": {
    "login": "paulhauner",
    "id": 6660660,
    "node_id": "MDQ6VXNlcjY2NjA2NjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/paulhauner",
    "html_url": "https://github.com/paulhauner",
    "followers_url": "https://api.github.com/users/paulhauner/followers",
    "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
    "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
    "organizations_url": "https://api.github.com/users/paulhauner/orgs",
    "repos_url": "https://api.github.com/users/paulhauner/repos",
    "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/paulhauner/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1245875191,
      "node_id": "MDU6TGFiZWwxMjQ1ODc1MTkx",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/val-client",
      "name": "val-client",
      "color": "9cd6fc",
      "default": false,
      "description": "Relates to the validator client binary"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2019-02-23T21:51:00Z",
  "updated_at": "2020-05-18T06:25:17Z",
  "closed_at": "2020-05-18T06:25:17Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nThe validator client does not store the messages it signs and is therefore vulnerable to generating slashable messages\r\n\r\n## Steps to resolve\r\n\r\n- Determine a suitable database format. \r\n- Ensure all signed messages are stored in the database.\r\n- Ensure that newly signed messages are not in conflict with any previously signed messages.\r\n\r\n### Additional Info\r\n\r\n#### Database formats\r\n\r\nWe want this database to be validator specific and portable. For example, I want to be able to move my validator from one machine to another, whilst maintaining that validators message history. As such, I suggest each validator has their own database, stored alongside their keys and config info (see #253 for suggestions on directory structure).\r\n\r\nWe should choose some single-process database that has high resistance to corruption.",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/254/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/254/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/531498511",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-531498511",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 531498511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMTQ5ODUxMQ==",
    "user": {
      "login": "g-r-a-n-t",
      "id": 32600263,
      "node_id": "MDQ6VXNlcjMyNjAwMjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32600263?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g-r-a-n-t",
      "html_url": "https://github.com/g-r-a-n-t",
      "followers_url": "https://api.github.com/users/g-r-a-n-t/followers",
      "following_url": "https://api.github.com/users/g-r-a-n-t/following{/other_user}",
      "gists_url": "https://api.github.com/users/g-r-a-n-t/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g-r-a-n-t/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g-r-a-n-t/subscriptions",
      "organizations_url": "https://api.github.com/users/g-r-a-n-t/orgs",
      "repos_url": "https://api.github.com/users/g-r-a-n-t/repos",
      "events_url": "https://api.github.com/users/g-r-a-n-t/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g-r-a-n-t/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-14T17:34:49Z",
    "updated_at": "2019-09-14T17:34:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @paulhauner, this something I could pick up?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/531498511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532509940",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-532509940",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 532509940,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjUwOTk0MA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-18T04:08:36Z",
    "updated_at": "2019-09-18T04:08:36Z",
    "author_association": "MEMBER",
    "body": "Hey, thanks for reaching out.\r\n\r\n@AgeManning is about to start a refactor of the validator client (primarily making it more async) so it's perhaps not the best time to start coding on this.\r\n\r\nHowever, there's a bit of research that needs to happen first. Primarily about designing the schema of the database so it's space and time efficient. I'd be happy to work with you if you want to start thinking about data structures?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532509940/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532823914",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-532823914",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 532823914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjgyMzkxNA==",
    "user": {
      "login": "g-r-a-n-t",
      "id": 32600263,
      "node_id": "MDQ6VXNlcjMyNjAwMjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32600263?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g-r-a-n-t",
      "html_url": "https://github.com/g-r-a-n-t",
      "followers_url": "https://api.github.com/users/g-r-a-n-t/followers",
      "following_url": "https://api.github.com/users/g-r-a-n-t/following{/other_user}",
      "gists_url": "https://api.github.com/users/g-r-a-n-t/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g-r-a-n-t/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g-r-a-n-t/subscriptions",
      "organizations_url": "https://api.github.com/users/g-r-a-n-t/orgs",
      "repos_url": "https://api.github.com/users/g-r-a-n-t/repos",
      "events_url": "https://api.github.com/users/g-r-a-n-t/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g-r-a-n-t/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-18T19:06:52Z",
    "updated_at": "2019-09-18T19:06:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@paulhauner Yeah, that sounds good. Maybe after I've done a bit of digging on my own we could hop on a call and discuss what makes sense.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532823914/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532899480",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-532899480",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 532899480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjg5OTQ4MA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-18T23:03:20Z",
    "updated_at": "2019-09-18T23:03:20Z",
    "author_association": "MEMBER",
    "body": "Sounds good!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532899480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532913540",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-532913540",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 532913540,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjkxMzU0MA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T00:12:33Z",
    "updated_at": "2019-09-19T00:12:33Z",
    "author_association": "MEMBER",
    "body": "I had a think about this. I think we can make a maximally safe (but not profit maximizing) system given the following rules:\r\n\r\n- Unless it is the validators first attestation, every attestation must have an `attestation.data.target.epoch` that is greater than it's previous attestation.\r\n\r\n- Unless it is the validators first block proposal, every `block.slot` must be in a greater epoch than it's previous block proposal.\r\n\r\nI'm in favor of using this solution for now, unless we can easily think of a better solution.\r\n\r\nTo suit this, we only need to store:\r\n\r\n```rust\r\nstruct ValidatorHistory {\r\n  /// The `attestation.data.target.epoch` of the validators most recent attestation.\r\n  previous_attestation_target_epoch: Option<Epoch>,\r\n  /// The `epoch(block.slot)` of the validators most recent block proposal.\r\n  previous_block_proposal_epoch: Option<Epoch>\r\n}\r\n```\r\n\r\nI think we should store these parameters in a very simple file, perhaps just the SSZ representation of the above struct.\r\n\r\nThe validator client current stores it's keys in `~/.lighthouse-validator`, one directory per validator. I think we should put that `ValidatorHistory` file in there, along with a lockfile. The lockfile should effectively restrict read/write of a validators directory to only one running lighthouse process.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532913540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532913588",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-532913588",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 532913588,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMjkxMzU4OA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T00:12:47Z",
    "updated_at": "2019-09-19T00:12:47Z",
    "author_association": "MEMBER",
    "body": "@michaelsproul you might find this interesting :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/532913588/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/533028580",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-533028580",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 533028580,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzMzAyODU4MA==",
    "user": {
      "login": "g-r-a-n-t",
      "id": 32600263,
      "node_id": "MDQ6VXNlcjMyNjAwMjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32600263?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g-r-a-n-t",
      "html_url": "https://github.com/g-r-a-n-t",
      "followers_url": "https://api.github.com/users/g-r-a-n-t/followers",
      "following_url": "https://api.github.com/users/g-r-a-n-t/following{/other_user}",
      "gists_url": "https://api.github.com/users/g-r-a-n-t/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g-r-a-n-t/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g-r-a-n-t/subscriptions",
      "organizations_url": "https://api.github.com/users/g-r-a-n-t/orgs",
      "repos_url": "https://api.github.com/users/g-r-a-n-t/repos",
      "events_url": "https://api.github.com/users/g-r-a-n-t/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g-r-a-n-t/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-19T08:35:28Z",
    "updated_at": "2019-09-19T08:35:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Would it be an improvement to only read the file upon initialization of the client and then use a threadsafe `ValidatorHistory` object stored in memory from then on, only writing to the file when it's updated or upon termination. I would imagine blocking messages on reading and writing to this file could be slow. Looking at the client code tho, I'm not sure where this would be stored.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/533028580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/534051542",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-534051542",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 534051542,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDA1MTU0Mg==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-23T10:59:58Z",
    "updated_at": "2019-09-23T10:59:58Z",
    "author_association": "MEMBER",
    "body": "This sounds like a sensible optimization!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/534051542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/534900581",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-534900581",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 534900581,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDkwMDU4MQ==",
    "user": {
      "login": "g-r-a-n-t",
      "id": 32600263,
      "node_id": "MDQ6VXNlcjMyNjAwMjYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/32600263?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/g-r-a-n-t",
      "html_url": "https://github.com/g-r-a-n-t",
      "followers_url": "https://api.github.com/users/g-r-a-n-t/followers",
      "following_url": "https://api.github.com/users/g-r-a-n-t/following{/other_user}",
      "gists_url": "https://api.github.com/users/g-r-a-n-t/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/g-r-a-n-t/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/g-r-a-n-t/subscriptions",
      "organizations_url": "https://api.github.com/users/g-r-a-n-t/orgs",
      "repos_url": "https://api.github.com/users/g-r-a-n-t/repos",
      "events_url": "https://api.github.com/users/g-r-a-n-t/events{/privacy}",
      "received_events_url": "https://api.github.com/users/g-r-a-n-t/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-25T07:55:16Z",
    "updated_at": "2019-09-25T07:55:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Alright, well, sounds like that's pretty much set :) I'll get to coding this whenever the time is right.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/534900581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/543644565",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-543644565",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 543644565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzY0NDU2NQ==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T09:57:45Z",
    "updated_at": "2019-10-18T09:58:57Z",
    "author_association": "MEMBER",
    "body": "Re: @paulhauner \r\n\r\n> I had a think about this. I think we can make a maximally safe (but not profit maximizing) system given the following rules:\r\n> \r\n> * Unless it is the validators first attestation, every attestation must have an `attestation.data.target.epoch` that is greater than it's previous attestation.\r\n> \r\n> * Unless it is the validators first block proposal, every `block.slot` must be in a greater epoch than it's previous block proposal.\r\n\r\nI agree with these two maxims, but we need an extra one to guard against surround votes:\r\n\r\n* Every attestation must have an `attestation.data.source.epoch` that is greater than or equal to its previous attestation.\r\n\r\nOtherwise you might sign an attestation which surrounds a previous one. The existing rules only guard against signing a new attestation surrounded by a previous one.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/543644565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/543649544",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-543649544",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 543649544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzY0OTU0NA==",
    "user": {
      "login": "paulhauner",
      "id": 6660660,
      "node_id": "MDQ6VXNlcjY2NjA2NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6660660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paulhauner",
      "html_url": "https://github.com/paulhauner",
      "followers_url": "https://api.github.com/users/paulhauner/followers",
      "following_url": "https://api.github.com/users/paulhauner/following{/other_user}",
      "gists_url": "https://api.github.com/users/paulhauner/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paulhauner/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paulhauner/subscriptions",
      "organizations_url": "https://api.github.com/users/paulhauner/orgs",
      "repos_url": "https://api.github.com/users/paulhauner/repos",
      "events_url": "https://api.github.com/users/paulhauner/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paulhauner/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T10:07:18Z",
    "updated_at": "2019-10-18T10:07:18Z",
    "author_association": "MEMBER",
    "body": "@michaelsproul, agreed. I was wrong.\r\n\r\nI think it's safe to invalidate anything I've said here and work off the docs created by @pscott (I linked you to them in chat) :)",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/543649544/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/543657532",
    "html_url": "https://github.com/sigp/lighthouse/issues/254#issuecomment-543657532",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/254",
    "id": 543657532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MzY1NzUzMg==",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-18T10:24:02Z",
    "updated_at": "2019-10-18T10:24:02Z",
    "author_association": "MEMBER",
    "body": "No worries, I just necrobumped this issue while trying to remember what the minimal safe algorithm was when reviewing Scott's algo.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/543657532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

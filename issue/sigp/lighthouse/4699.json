{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4699",
  "id": 1880992838,
  "node_id": "I_kwDOCFeAzc5wHaxG",
  "number": 4699,
  "title": "Handle unknown head block during attestation publishing",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 985647284,
      "node_id": "MDU6TGFiZWw5ODU2NDcyODQ=",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/enhancement",
      "name": "enhancement",
      "color": "a2eeef",
      "default": true,
      "description": "New feature or request"
    },
    {
      "id": 2336800343,
      "node_id": "MDU6TGFiZWwyMzM2ODAwMzQz",
      "url": "https://api.github.com/repos/sigp/lighthouse/labels/HTTP-API",
      "name": "HTTP-API",
      "color": "5A63A2",
      "default": false,
      "description": ""
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2023-09-05T00:28:08Z",
  "updated_at": "2024-01-17T22:11:09Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nPresently if an attestation is POSTed to the beacon node for a head block that hasn't finished being imported, Lighthouse will log a nasty `ERRO`:\r\n\r\n> ERRO Failure verifying attestation for gossip, attestation_slot: XX, committee_index: XX, request_index: X, error: UnknownHeadBlock { beacon_block_root: 0xa98ce8635c5493907d6536905b46eb09db54f8465a82d95aae90650509884f4a }\r\n\r\nIt will also return a `400 BAD REQUEST` to the VC, which creates a knock-on effect. There's an old issue about this here #1971, which was closed because we started queueing attestations _from gossip_ in #635. We still don't have any queueing for attestations from the HTTP API, which is why this error occurs.\r\n\r\nIn practice, this will often be encountered by users running Vouch – which broadcasts attestations to all nodes, regardless of whether they already know the head block.\r\n\r\n## Version\r\n\r\nLighthouse v4.4.1 and older\r\n\r\n## Present Behaviour\r\n\r\n- Lighthouse rejects any attestation received on the HTTP API that doesn't immediately pass gossip validation. This includes attestations for blocks that are in the process of being imported.\r\n\r\n## Expected Behaviour\r\n\r\n- Lighthouse queues attestations received on the HTTP API so that it can:\r\n  - Return a 200 OK to the caller, and\r\n  - Not log an error message\r\n\r\n## Steps to resolve\r\n\r\nIn terms of implementation I think we could use the reprocessing queue. The hard part is blocking the HTTP handler waiting for the attestation to be dequeued and processed. I had a go at implementing something similar for blocks in #4643, which wasn't merged because it ended up being poorly suited to the problem it was trying to solve. We could probably adapt that code, particularly the use of a channel to send back the completion message, and use it for attestations. We could even extend the existing attestation reprocessing logic with an optional channel that gets initialized (and waited on) only for HTTP attestations.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4699/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 1
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1749623721",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1749623721",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1749623721,
    "node_id": "IC_kwDOCFeAzc5oSSOp",
    "user": {
      "login": "eserilev",
      "id": 7217615,
      "node_id": "MDQ6VXNlcjcyMTc2MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eserilev",
      "html_url": "https://github.com/eserilev",
      "followers_url": "https://api.github.com/users/eserilev/followers",
      "following_url": "https://api.github.com/users/eserilev/following{/other_user}",
      "gists_url": "https://api.github.com/users/eserilev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eserilev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eserilev/subscriptions",
      "organizations_url": "https://api.github.com/users/eserilev/orgs",
      "repos_url": "https://api.github.com/users/eserilev/repos",
      "events_url": "https://api.github.com/users/eserilev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eserilev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-05T20:51:52Z",
    "updated_at": "2023-10-05T20:51:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'd like to take a stab at this one",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1749623721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1841477023",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1841477023",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1841477023,
    "node_id": "IC_kwDOCFeAzc5twrWf",
    "user": {
      "login": "ricardolyn",
      "id": 1945557,
      "node_id": "MDQ6VXNlcjE5NDU1NTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1945557?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ricardolyn",
      "html_url": "https://github.com/ricardolyn",
      "followers_url": "https://api.github.com/users/ricardolyn/followers",
      "following_url": "https://api.github.com/users/ricardolyn/following{/other_user}",
      "gists_url": "https://api.github.com/users/ricardolyn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ricardolyn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ricardolyn/subscriptions",
      "organizations_url": "https://api.github.com/users/ricardolyn/orgs",
      "repos_url": "https://api.github.com/users/ricardolyn/repos",
      "events_url": "https://api.github.com/users/ricardolyn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ricardolyn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T19:22:52Z",
    "updated_at": "2023-12-05T19:22:52Z",
    "author_association": "NONE",
    "body": "@michaelsproul will this issue be fixed in the `4.6.0` release, by a future PR or other unrelated one?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1841477023/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1841553770",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1841553770",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1841553770,
    "node_id": "IC_kwDOCFeAzc5tw-Fq",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-05T20:20:13Z",
    "updated_at": "2023-12-05T20:20:13Z",
    "author_association": "MEMBER",
    "body": "@ricardolyn We don't have an implementation yet, so probably not in 4.6",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1841553770/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1852574187",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1852574187",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1852574187,
    "node_id": "IC_kwDOCFeAzc5ubAnr",
    "user": {
      "login": "eserilev",
      "id": 7217615,
      "node_id": "MDQ6VXNlcjcyMTc2MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eserilev",
      "html_url": "https://github.com/eserilev",
      "followers_url": "https://api.github.com/users/eserilev/followers",
      "following_url": "https://api.github.com/users/eserilev/following{/other_user}",
      "gists_url": "https://api.github.com/users/eserilev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eserilev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eserilev/subscriptions",
      "organizations_url": "https://api.github.com/users/eserilev/orgs",
      "repos_url": "https://api.github.com/users/eserilev/repos",
      "events_url": "https://api.github.com/users/eserilev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eserilev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-12T18:19:38Z",
    "updated_at": "2023-12-12T18:19:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@michaelsproul i didn't end up getting a chance to work on this, feel free to take it. thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1852574187/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1853105693",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1853105693",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1853105693,
    "node_id": "IC_kwDOCFeAzc5udCYd",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-13T01:07:54Z",
    "updated_at": "2023-12-13T01:07:54Z",
    "author_association": "MEMBER",
    "body": "Thanks. I'll start on this now. Will aim to get it in for 4.7.0/5.0.0 ( :eyes: )",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1853105693/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1854878598",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1854878598",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1854878598,
    "node_id": "IC_kwDOCFeAzc5ujzOG",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-14T00:03:26Z",
    "updated_at": "2023-12-14T00:03:26Z",
    "author_association": "MEMBER",
    "body": "Implemented, but I haven't had a chance to test yet and probably won't get to until after the holidays. We are all hands on deck trying to ship v4.6.0.\r\n\r\nhttps://github.com/sigp/lighthouse/pull/5010",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1854878598/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895559741",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1895559741",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1895559741,
    "node_id": "IC_kwDOCFeAzc5w-_I9",
    "user": {
      "login": "koraykoska",
      "id": 11356621,
      "node_id": "MDQ6VXNlcjExMzU2NjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11356621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/koraykoska",
      "html_url": "https://github.com/koraykoska",
      "followers_url": "https://api.github.com/users/koraykoska/followers",
      "following_url": "https://api.github.com/users/koraykoska/following{/other_user}",
      "gists_url": "https://api.github.com/users/koraykoska/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/koraykoska/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/koraykoska/subscriptions",
      "organizations_url": "https://api.github.com/users/koraykoska/orgs",
      "repos_url": "https://api.github.com/users/koraykoska/repos",
      "events_url": "https://api.github.com/users/koraykoska/events{/privacy}",
      "received_events_url": "https://api.github.com/users/koraykoska/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T10:50:30Z",
    "updated_at": "2024-01-17T10:50:30Z",
    "author_association": "NONE",
    "body": "@michaelsproul Is it scheduled to be included in v4.6.0? Obol users face this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895559741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895605357",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1895605357",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1895605357,
    "node_id": "IC_kwDOCFeAzc5w_KRt",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T11:20:01Z",
    "updated_at": "2024-01-17T11:20:01Z",
    "author_association": "MEMBER",
    "body": "No it won't make 4.6. Needs more testing\n\nObol users should still be able to attest successfully via the BN that created the attestation, or am I mistaken?",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895605357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895614126",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1895614126",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1895614126,
    "node_id": "IC_kwDOCFeAzc5w_Mau",
    "user": {
      "login": "koraykoska",
      "id": 11356621,
      "node_id": "MDQ6VXNlcjExMzU2NjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11356621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/koraykoska",
      "html_url": "https://github.com/koraykoska",
      "followers_url": "https://api.github.com/users/koraykoska/followers",
      "following_url": "https://api.github.com/users/koraykoska/following{/other_user}",
      "gists_url": "https://api.github.com/users/koraykoska/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/koraykoska/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/koraykoska/subscriptions",
      "organizations_url": "https://api.github.com/users/koraykoska/orgs",
      "repos_url": "https://api.github.com/users/koraykoska/repos",
      "events_url": "https://api.github.com/users/koraykoska/events{/privacy}",
      "received_events_url": "https://api.github.com/users/koraykoska/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T11:26:08Z",
    "updated_at": "2024-01-17T11:26:08Z",
    "author_association": "NONE",
    "body": "@michaelsproul Obol is a middleware between the CL and the VC. So basically Obol is the \"BN that created the attestation\", but they are not distributing. So if Lighthouse drops it, the attestation is missed. Which is what we have seen.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895614126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895709643",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1895709643",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1895709643,
    "node_id": "IC_kwDOCFeAzc5w_jvL",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T12:27:53Z",
    "updated_at": "2024-01-17T12:28:42Z",
    "author_association": "MEMBER",
    "body": "@koraykoska Where does Obol get the attestation from though? My point is that at least one of the BNs in the cluster must have produced it, and that BN should succeed in publishing it. Obol should _not_ be attesting to blocks that aren't validated by any of the BNs in its cluster.\r\n\r\nTo be clear, we have something like this, don't we?:\r\n\r\n```\r\nVC1 -> Obol1 -> BN1\r\nVC2 -> Obol2 -> BN2\r\nVC3 -> Obol3 -> BN3\r\n```\r\n\r\nIf BN2 produces the attestation, but BN1 and BN3 haven't processed the block yet, then when it gets published can't BN2 publish the full attestation with signatures from VC1+VC2+VC3? It shouldn't matter if BN1 and BN3 can't publish\r\n\r\nCC @xenowits\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895709643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895791406",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1895791406",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1895791406,
    "node_id": "IC_kwDOCFeAzc5w_3su",
    "user": {
      "login": "koraykoska",
      "id": 11356621,
      "node_id": "MDQ6VXNlcjExMzU2NjIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/11356621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/koraykoska",
      "html_url": "https://github.com/koraykoska",
      "followers_url": "https://api.github.com/users/koraykoska/followers",
      "following_url": "https://api.github.com/users/koraykoska/following{/other_user}",
      "gists_url": "https://api.github.com/users/koraykoska/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/koraykoska/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/koraykoska/subscriptions",
      "organizations_url": "https://api.github.com/users/koraykoska/orgs",
      "repos_url": "https://api.github.com/users/koraykoska/repos",
      "events_url": "https://api.github.com/users/koraykoska/events{/privacy}",
      "received_events_url": "https://api.github.com/users/koraykoska/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T13:15:48Z",
    "updated_at": "2024-01-17T13:15:48Z",
    "author_association": "NONE",
    "body": "The cluster can submit the attestation but the node with this bug misses\r\nits duty. In a 3/4 cluster this means if 2 are in this state at the same\r\ntime, the cluster misses its attestation duty. I don't know the internals,\r\nbut that's our observation.\r\n\r\nOn Wed, 17 Jan 2024 at 13:28, Michael Sproul ***@***.***>\r\nwrote:\r\n\r\n> @koraykoska <https://github.com/koraykoska> Where does Obol get the\r\n> attestation from though? My point is that at least one of the BNs in the\r\n> cluster must have produced it, and that BN should succeed in publishing it.\r\n> Obol should *not* be attesting to blocks that aren't validated by any of\r\n> the BNs in its cluster.\r\n>\r\n> To be clear, we have something like this, don't we?:\r\n>\r\n> VC1 -> Obol1 -> BN1\r\n> VC2 -> Obol2 -> BN2\r\n> VC3 -> Obol3 -> BN3\r\n>\r\n> If BN2 produces the attestation, but BN1 and BN3 haven't processed the\r\n> block yet, then when it gets published can't BN2 publish the full\r\n> attestation with signatures from VC1+VC2+VC3?\r\n>\r\n> CC @xenowits <https://github.com/xenowits>\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/sigp/lighthouse/issues/4699#issuecomment-1895709643>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ACWUTTKBMTBNDLIRXJV4DR3YO67VJAVCNFSM6AAAAAA4K7N2P2VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTQOJVG4YDSNRUGM>\r\n> .\r\n> You are receiving this because you were mentioned.Message ID:\r\n> ***@***.***>\r\n>\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1895791406/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1897066706",
    "html_url": "https://github.com/sigp/lighthouse/issues/4699#issuecomment-1897066706",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4699",
    "id": 1897066706,
    "node_id": "IC_kwDOCFeAzc5xEvDS",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T22:11:08Z",
    "updated_at": "2024-01-17T22:11:08Z",
    "author_association": "MEMBER",
    "body": "Thanks @koraykoska. That seems strange to me, so I'll ask the Obol guys to clarify. My understanding was that once the cluster had produced a \"full\" attestation with aggregated signatures from all participants, it would be able to publish it using any single beacon node.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1897066706/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

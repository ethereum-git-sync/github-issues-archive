{
  "url": "https://api.github.com/repos/sigp/lighthouse/issues/4346",
  "repository_url": "https://api.github.com/repos/sigp/lighthouse",
  "labels_url": "https://api.github.com/repos/sigp/lighthouse/issues/4346/labels{/name}",
  "comments_url": "https://api.github.com/repos/sigp/lighthouse/issues/4346/comments",
  "events_url": "https://api.github.com/repos/sigp/lighthouse/issues/4346/events",
  "html_url": "https://github.com/sigp/lighthouse/issues/4346",
  "id": 1730953993,
  "node_id": "I_kwDOCFeAzc5nLEMJ",
  "number": 4346,
  "title": "Backfill stuck on target 171444",
  "user": {
    "login": "zheli",
    "id": 157039,
    "node_id": "MDQ6VXNlcjE1NzAzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/157039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zheli",
    "html_url": "https://github.com/zheli",
    "followers_url": "https://api.github.com/users/zheli/followers",
    "following_url": "https://api.github.com/users/zheli/following{/other_user}",
    "gists_url": "https://api.github.com/users/zheli/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zheli/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zheli/subscriptions",
    "organizations_url": "https://api.github.com/users/zheli/orgs",
    "repos_url": "https://api.github.com/users/zheli/repos",
    "events_url": "https://api.github.com/users/zheli/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zheli/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-05-29T15:33:51Z",
  "updated_at": "2023-05-29T23:03:56Z",
  "closed_at": "2023-05-29T23:03:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Description\r\n\r\nI have a fresh installation of lighthouse and it started to spawn lots of error message after the initial checkpoint sync:\r\n```\r\nMay 29 15:21:00.125 INFO New block received                      root: 0x6d26b12b08b0921b39ba7231c22b6e3ed1371a73b8a1d96a21e0e51c78f78773, slot: 6545803\r\nMay 29 15:21:05.000 INFO Synced                                  slot: 6545803, block: 0x6d26…8773, epoch: 204556, finalized_epoch: 204554, finalized_root: 0x5b3b…64f6, exec_hash: 0x6595…a1a9 (verified), peers: 110, service: slot_notifier\r\nMay 29 15:21:08.700 ERRO Backfill out of sync with beacon chain  service: sync\r\nMay 29 15:21:08.701 ERRO Backfill sync failed                    error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\r\nMay 29 15:21:08.701 ERRO Backfill sync failed                    error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\r\nMay 29 15:21:08.701 INFO Sync state updated                      new_state: Synced, old_state: Syncing Historical Blocks, service: sync\r\nMay 29 15:21:10.856 INFO Sync state updated                      new_state: Syncing Historical Blocks, old_state: Synced, service: sync\r\nMay 29 15:21:13.388 INFO New block received                      root: 0xf0168b48bdffcf6cbf3db2e76d6cb0489dedd625739b0f52978dbd2fcf0740bc, slot: 6545804\r\nMay 29 15:21:14.068 INFO New RPC block received                  hash: 0xf016…40bc, slot: 6545804\r\nMay 29 15:21:17.000 INFO Downloading historical blocks           est_time: --, distance: 1 slots (0 mins), service: slot_notifier\r\nMay 29 15:21:17.000 INFO Synced                                  slot: 6545804, block: 0xf016…40bc, epoch: 204556, finalized_epoch: 204554, finalized_root: 0x5b3b…64f6, exec_hash: 0x9a21…9cc0 (verified), peers: 108, service: slot_notifier\r\nMay 29 15:21:20.701 ERRO Backfill out of sync with beacon chain  service: sync\r\nMay 29 15:21:20.701 ERRO Backfill sync failed                    error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\r\nMay 29 15:21:20.701 ERRO Backfill sync failed                    error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\r\nMay 29 15:21:20.701 INFO Sync state updated                      new_state: Synced, old_state: Syncing Historical Blocks, service: sync\r\nMay 29 15:21:24.525 INFO New block received                      root: 0xf09e0e930bbe8861811d643e30573f9c6d4d35c8a2781345f6c1b26f33c7df4b, slot: 6545805\r\nMay 29 15:21:29.000 INFO Historical block download complete      service: slot_notifier\r\nMay 29 15:21:29.000 INFO Synced                                  slot: 6545805, block: 0xf09e…df4b, epoch: 204556, finalized_epoch: 204554, finalized_root: 0x5b3b…64f6, exec_hash: 0xc202…ba51 (verified), peers: 110, service: slot_notifier\r\nMay 29 15:21:35.941 INFO Sync state updated                      new_state: Syncing Historical Blocks, old_state: Synced, service: sync\r\nMay 29 15:21:36.072 INFO New block received                      root: 0xaa7c848e2c1541b41220a5a95f7c02390dfe97a073b566f3f22b96481c346035, slot: 6545806\r\nMay 29 15:21:41.001 INFO Downloading historical blocks           est_time: --, distance: 1 slots (0 mins), service: slot_notifier\r\nMay 29 15:21:41.001 INFO Synced                                  slot: 6545806, block: 0xaa7c…6035, epoch: 204556, finalized_epoch: 204554, finalized_root: 0x5b3b…64f6, exec_hash: 0x1307…aedf (verified), peers: 105, service: slot_notifier\r\nMay 29 15:21:49.276 INFO New block received                      root: 0xafd0047ea189efca1396107a0ccb4f18e3a97792b6f403d22179959f22ca4b60, slot: 6545807\r\nMay 29 15:21:53.000 INFO Synced                                  slot: 6545807, block: 0xafd0…4b60, epoch: 204556, finalized_epoch: 204554, finalized_root: 0x5b3b…64f6, exec_hash: 0x450b…e1a0 (verified), peers: 110, service: slot_notifier\r\nMay 29 15:21:55.167 ERRO Backfill out of sync with beacon chain  service: sync\r\nMay 29 15:21:55.173 ERRO Backfill sync failed                    error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\r\nMay 29 15:21:55.173 ERRO Backfill sync failed                    error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\r\n```\r\n## Version\r\nLighthouse v4.2.0\r\n\r\n## Present Behaviour\r\nBackfill sync failed with error message \"error: InvalidSyncState(\"Batch not found for current processing target 171444\"), service: sync\"\r\n\r\n## Expected Behaviour\r\nBackfill sync proceeds successfully after initial checkpoint sync.\r\n\r\n\r\n## Steps to resolve\r\nCreate a fresh install of ligthhouse 4.20 and set the checkpoint sync to https://mainnet-checkpoint-sync.attestant.io. Use nethermind v1.18.2 as EL.\r\n",
  "closed_by": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/4346/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/sigp/lighthouse/issues/4346/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1567583021",
    "html_url": "https://github.com/sigp/lighthouse/issues/4346#issuecomment-1567583021",
    "issue_url": "https://api.github.com/repos/sigp/lighthouse/issues/4346",
    "id": 1567583021,
    "node_id": "IC_kwDOCFeAzc5db2st",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-29T23:03:52Z",
    "updated_at": "2023-05-29T23:03:52Z",
    "author_association": "MEMBER",
    "body": "Thanks, we're aware of the issue and fixing it for the next release. If you restart the BN it will realise it has finished.\r\n\r\nI'll close this in favour of https://github.com/sigp/lighthouse/issues/4331.",
    "reactions": {
      "url": "https://api.github.com/repos/sigp/lighthouse/issues/comments/1567583021/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

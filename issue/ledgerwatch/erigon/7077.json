{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7077",
  "id": 1619047935,
  "node_id": "I_kwDOC0FsAM5ggLX_",
  "number": 7077,
  "title": "Erigon client stops syncing intermittently until it's restarted",
  "user": {
    "login": "Adewagold",
    "id": 19472085,
    "node_id": "MDQ6VXNlcjE5NDcyMDg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/19472085?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Adewagold",
    "html_url": "https://github.com/Adewagold",
    "followers_url": "https://api.github.com/users/Adewagold/followers",
    "following_url": "https://api.github.com/users/Adewagold/following{/other_user}",
    "gists_url": "https://api.github.com/users/Adewagold/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Adewagold/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Adewagold/subscriptions",
    "organizations_url": "https://api.github.com/users/Adewagold/orgs",
    "repos_url": "https://api.github.com/users/Adewagold/repos",
    "events_url": "https://api.github.com/users/Adewagold/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Adewagold/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 42,
  "created_at": "2023-03-10T14:13:06Z",
  "updated_at": "2023-06-25T16:35:20Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello, we are experiencing some issues with our erigon node in Goerli, where the node stops syncing and continues after a restart. We are wondering if this is a general issue or if there's a fix or flag for this that we are not setting. Below are the logs for the time it got stuck.\r\n```\r\n[WARN] [03-09|07:30:10.875] no log dir set, console logging only\r\n[INFO] [03-09|07:30:10.875] Starting metrics server                  addr=http://0.0.0.0:6060/debug/metrics/prometheus\r\n[INFO] [03-09|07:30:10.875] Starting pprof server                    cpu=\"go tool pprof -lines -http=: http://0.0.0.0:6061/debug/pprof/profile?seconds=20\" heap=\"go tool pprof -lines -http=: http://0.0.0.0:6061/debug/pprof/heap\"\r\n[WARN] [03-09|07:30:10.892] no log dir set, console logging only\r\n[INFO] [03-09|07:30:10.893] Build info                               git_branch=heads/v2.39.0 git_tag=v2.39.0 git_commit=b5891e2c8a91a99511223fe9370a951106aa208e\r\n[INFO] [03-09|07:30:10.893] Starting Erigon on Görli testnet...\r\n[INFO] [03-09|07:30:10.896] Maximum peer count                       ETH=100 total=100\r\n[INFO] [03-09|07:30:10.897] starting HTTP APIs                       APIs=eth,erigon,engine\r\n[INFO] [03-09|07:30:10.897] torrent verbosity                        level=WRN\r\n[INFO] [03-09|07:30:12.999] Set global gas cap                       cap=50000000\r\n[INFO] [03-09|07:30:13.001] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=16mb upload.rate=4mb\r\n[INFO] [03-09|07:30:13.002] Opening Database                         label=chaindata path=/home/adewale/.local/share/erigon/chaindata\r\n[INFO] [03-09|07:30:13.017] Initialised chain configuration          config=\"{ChainID: 5, Homestead: 0, DAO: <nil>, DAO Support: true, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 0, Petersburg: 0, Istanbul: 1561651, Muir Glacier: <nil>, Berlin: 4460644, London: 5062605, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: 10790000, Merge Netsplit: <nil>, Shanghai: <nil>, Cancun: <nil>, Engine: clique}\" genesis=0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a\r\n[INFO] [03-09|07:30:13.017] Effective                                prune_flags= snapshot_flags= history.v3=false\r\n[INFO] [03-09|07:30:13.017] Initialising Ethereum protocol           network=5\r\n[INFO] [03-09|07:30:13.041] Starting private RPC server              on=0.0.0.0:9090\r\n[INFO] [03-09|07:30:13.041] new subscription to logs established\r\n[INFO] [03-09|07:30:13.041] rpc filters: subscribing to Erigon events\r\n[INFO] [03-09|07:30:13.041] New txs subscriber joined\r\n[INFO] [03-09|07:30:13.042] new subscription to newHeaders established\r\n[INFO] [03-09|07:30:13.042] Reading JWT secret                       path=/tmp/.jwt/jwt.hex\r\n[INFO] [03-09|07:30:13.042] HTTP endpoint opened for Engine API      url=0.0.0.0:8551 ws=true ws.compression=true\r\n[INFO] [03-09|07:30:13.043] HTTP endpoint opened                     url=localhost:8545 ws=false ws.compression=true grpc=false\r\n[INFO] [03-09|07:30:13.052] [2/15 Headers] Waiting for Consensus Layer...\r\n[INFO] [03-09|07:30:13.053] [txpool] Started\r\n[INFO] [03-09|07:30:13.077] Started P2P networking                   version=67 self=enode://635862a06b72f6543a11e89fe5cb89f9029f223ffe37f3388bb7b1e97495bca21d2b25471ed421d50b1416c8614b5bdfb3e8cd7cb25114a92046c4d6a5a90607@127.0.0.1:30303 name=erigon/v2.39.0-stable-b5891e2c/linux-amd64/go1.19.6\r\n[INFO] [03-09|07:30:13.086] Started P2P networking                   version=68 self=enode://635862a06b72f6543a11e89fe5cb89f9029f223ffe37f3388bb7b1e97495bca21d2b25471ed421d50b1416c8614b5bdfb3e8cd7cb25114a92046c4d6a5a90607@127.0.0.1:30304 name=erigon/v2.39.0-stable-b5891e2c/linux-amd64/go1.19.6\r\n[WARN] [03-09|07:30:20.845] no log dir set, console logging only\r\n[WARN] [03-09|07:30:20.845] no log dir set, console logging only\r\n[INFO] [03-09|07:30:20.847] DB schemas compatible                    reader=6.0.0 database=6.0.0\r\n[INFO] [03-09|07:30:20.848] Use --snapshots=false\r\n[INFO] [03-09|07:30:20.865] rpc filters: subscribing to Erigon events\r\n[INFO] [03-09|07:30:20.866] HTTP endpoint opened                     url=0.0.0.0:8845 ws=true ws.compression=false grpc=false\r\n[INFO] [03-09|07:30:20.868] New txs subscriber joined\r\n[INFO] [03-09|07:30:20.869] interfaces compatible                    remote_db= client=6.2.0 server=6.2.0\r\n[INFO] [03-09|07:30:20.870] interfaces compatible                    remote_service=eth_backend client=3.2.0 server=3.2.0\r\n[INFO] [03-09|07:30:20.870] interfaces compatible                    remote_service=mining client=1.0.0 server=1.0.0\r\n[INFO] [03-09|07:30:20.871] interfaces compatible                    remote_service=tx_pool client=1.0.0 server=1.0.0\r\n[INFO] [03-09|07:30:20.871] new subscription to newHeaders established\r\n[INFO] [03-09|07:31:13.042] [txpool] stat                            block=0 pending=0 baseFee=0 queued=4 alloc=121.3MB sys=150.3MB\r\n\r\n[INFO] [03-09|07:32:13.018] [p2p] GoodPeers                          eth67=16 eth66=1 eth68=1\r\n[INFO] [03-09|07:32:13.043] [txpool] stat                            block=0 pending=0 baseFee=0 queued=4 alloc=122.2MB sys=194.6MB\r\n```\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077/reactions",
    "total_count": 6,
    "+1": 6,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1465555236",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1465555236",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1465555236,
    "node_id": "IC_kwDOC0FsAM5XWpkk",
    "user": {
      "login": "MrLouzao",
      "id": 10439162,
      "node_id": "MDQ6VXNlcjEwNDM5MTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10439162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrLouzao",
      "html_url": "https://github.com/MrLouzao",
      "followers_url": "https://api.github.com/users/MrLouzao/followers",
      "following_url": "https://api.github.com/users/MrLouzao/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrLouzao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrLouzao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrLouzao/subscriptions",
      "organizations_url": "https://api.github.com/users/MrLouzao/orgs",
      "repos_url": "https://api.github.com/users/MrLouzao/repos",
      "events_url": "https://api.github.com/users/MrLouzao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrLouzao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-13T05:53:42Z",
    "updated_at": "2023-03-13T05:53:42Z",
    "author_association": "NONE",
    "body": "Hello. I have the same error. I started a new client with Goerli network and even if this is connected to a Lighthouse client that is in sync, the process of downloading blocks seems to be stuck at block 0.\r\n\r\nI am deploying the node on Kubernetes with the following settings:\r\n\r\n```\r\nErigon version: v2.40.1\r\nDocker image: FROM docker.io/library/alpine:3.16\r\n```\r\n\r\nI build the image and everything seems to be ok. When I start the container the sync process should start and I can see the same traces but remains the txpool on block 0, and no sync process has started. I have peers too.\r\n\r\nThis is the command that I use to start the Erigon process:\r\n\r\n```\r\n\"erigon --chain goerli --datadir='/home/node/.local/share/erigon' --snapshots=false \\\r\n        --private.api.addr=0.0.0.0:9090 \\\r\n        --metrics --metrics.addr=0.0.0.0 \\\r\n        --pprof --pprof.addr=0.0.0.0 --pprof.port=6061 \\\r\n        --authrpc.addr=0.0.0.0 --authrpc.port=8551 --authrpc.vhosts=* --authrpc.jwtsecret='/tmp/.jwt/jwt.hex' \\\r\n        --externalcl & \\\r\n        sleep 10 && \\\r\n        rpcdaemon --datadir='/home/node/.local/share/erigon' --snapshot=false \\\r\n        --private.api.addr=0.0.0.0:9090 \\\r\n        --http.addr=0.0.0.0 --http.port=8845 --http.vhosts=* --http.corsdomain=* --http.api=eth,erigon,web3,net,debug,trace,txpool,engine \\\r\n        --ws\"\r\n```\r\n\r\nIs the txpool process making the node to stop? Should I remove it from the API list?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1465555236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467158259",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1467158259",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1467158259,
    "node_id": "IC_kwDOC0FsAM5Xcw7z",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-14T00:20:20Z",
    "updated_at": "2023-03-14T00:20:20Z",
    "author_association": "COLLABORATOR",
    "body": "not enough logs",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467158259/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467299544",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1467299544",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1467299544,
    "node_id": "IC_kwDOC0FsAM5XdTbY",
    "user": {
      "login": "MrLouzao",
      "id": 10439162,
      "node_id": "MDQ6VXNlcjEwNDM5MTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10439162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrLouzao",
      "html_url": "https://github.com/MrLouzao",
      "followers_url": "https://api.github.com/users/MrLouzao/followers",
      "following_url": "https://api.github.com/users/MrLouzao/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrLouzao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrLouzao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrLouzao/subscriptions",
      "organizations_url": "https://api.github.com/users/MrLouzao/orgs",
      "repos_url": "https://api.github.com/users/MrLouzao/repos",
      "events_url": "https://api.github.com/users/MrLouzao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrLouzao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-14T03:34:02Z",
    "updated_at": "2023-03-14T03:34:02Z",
    "author_association": "NONE",
    "body": "> not enough logs\r\n\r\nWhat kind of logs are useful? This ones? https://github.com/ledgerwatch/erigon#logging",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467299544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467374487",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1467374487",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1467374487,
    "node_id": "IC_kwDOC0FsAM5XdluX",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-14T05:16:35Z",
    "updated_at": "2023-03-14T05:16:35Z",
    "author_association": "COLLABORATOR",
    "body": "erigon has only one logs now, just usual output. first message has some: https://github.com/ledgerwatch/erigon/issues/7077#issue-1619047935 - but it's not enough.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467374487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467483148",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1467483148",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1467483148,
    "node_id": "IC_kwDOC0FsAM5XeAQM",
    "user": {
      "login": "MrLouzao",
      "id": 10439162,
      "node_id": "MDQ6VXNlcjEwNDM5MTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10439162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrLouzao",
      "html_url": "https://github.com/MrLouzao",
      "followers_url": "https://api.github.com/users/MrLouzao/followers",
      "following_url": "https://api.github.com/users/MrLouzao/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrLouzao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrLouzao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrLouzao/subscriptions",
      "organizations_url": "https://api.github.com/users/MrLouzao/orgs",
      "repos_url": "https://api.github.com/users/MrLouzao/repos",
      "events_url": "https://api.github.com/users/MrLouzao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrLouzao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-14T07:01:24Z",
    "updated_at": "2023-03-14T07:01:24Z",
    "author_association": "NONE",
    "body": "> erigon has only one logs now, just usual output. first message has some: [#7077 (comment)](https://github.com/ledgerwatch/erigon/issues/7077#issue-1619047935) - but it's not enough.\r\n\r\nI have similar traces to @Adewagold . The process is showing always that txpool has no data and is not syncing. But I can't find any error on logs.\r\n\r\n```\r\n[WARN] [03-14|06:48:37.556] no log dir set, console logging only\r\n[INFO] [03-14|06:48:37.557] Starting metrics server                  addr=http://0.0.0.0:6060/debug/metrics/prometheus\r\n[INFO] [03-14|06:48:37.557] Starting pprof server                    cpu=\"go tool pprof -lines -http=: http://0.0.0.0:6061/debug/pprof/profile?seconds=20\" heap=\"go tool pprof -lines -http=: http://0.0.0.0:6061/debug/pprof/heap\"\r\n[WARN] [03-14|06:48:37.570] no log dir set, console logging only\r\n[INFO] [03-14|06:48:37.570] Build info                               git_branch=heads/v2.40.1 git_tag=v2.40.1 git_commit=94b4cee5a898a47b9241ce824622af6350e5dc5b\r\n[INFO] [03-14|06:48:37.570] Starting Erigon on Görli testnet...\r\n[INFO] [03-14|06:48:37.575] Maximum peer count                       ETH=100 total=100\r\n[INFO] [03-14|06:48:37.575] starting HTTP APIs                       APIs=eth,erigon,engine\r\n[INFO] [03-14|06:48:37.575] torrent verbosity                        level=WRN\r\n[INFO] [03-14|06:48:39.678] Set global gas cap                       cap=50000000\r\n[INFO] [03-14|06:48:39.680] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=16mb upload.rate=4mb\r\n[INFO] [03-14|06:48:39.680] Opening Database                         label=chaindata path=/home/node/.local/share/erigon/chaindata\r\n[INFO] [03-14|06:48:39.697] Initialised chain configuration          config=\"{ChainID: 5, Homestead: 0, DAO: <nil>, DAO Support: true, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 0, Petersburg: 0, Istanbul: 1561651, Muir Glacier: <nil>, Berlin: 4460644, London: 5062605, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: 10790000, Merge Netsplit: <nil>, Shanghai: 1678832736, Cancun: <nil>, Sharding: <nil>, Prague: <nil>, Engine: clique}\" genesis=0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a\r\n[INFO] [03-14|06:48:39.697] Effective                                prune_flags= snapshot_flags= history.v3=false\r\n[INFO] [03-14|06:48:39.710] Initialising Ethereum protocol           network=5\r\n[INFO] [03-14|06:48:39.733] Starting private RPC server              on=0.0.0.0:9090\r\n[INFO] [03-14|06:48:39.733] new subscription to logs established\r\n[INFO] [03-14|06:48:39.734] rpc filters: subscribing to Erigon events\r\n[INFO] [03-14|06:48:39.734] new subscription to newHeaders established\r\n[INFO] [03-14|06:48:39.734] New txs subscriber joined\r\n[INFO] [03-14|06:48:39.735] Reading JWT secret                       path=/tmp/.jwt/jwt.hex\r\n[INFO] [03-14|06:48:39.735] HTTP endpoint opened for Engine API      url=[::]:8551 ws=true ws.compression=true\r\n[INFO] [03-14|06:48:39.735] HTTP endpoint opened                     url=127.0.0.1:8545 ws=false ws.compression=true grpc=false\r\n[INFO] [03-14|06:48:39.746] [txpool] Started\r\n[INFO] [03-14|06:48:39.774] Started P2P networking                   version=68 self=enode://635862a06b72f6543a11e89fe5cb89f9029f223ffe37f3388bb7b1e97495bca21d2b25471ed421d50b1416c8614b5bdfb3e8cd7cb25114a92046c4d6a5a90607@127.0.0.1:30304 name=erigon/v2.40.1-stable-94b4cee5/linux-amd64/go1.19.7\r\n[INFO] [03-14|06:48:39.783] Started P2P networking                   version=67 self=enode://635862a06b72f6543a11e89fe5cb89f9029f223ffe37f3388bb7b1e97495bca21d2b25471ed421d50b1416c8614b5bdfb3e8cd7cb25114a92046c4d6a5a90607@127.0.0.1:30303 name=erigon/v2.40.1-stable-94b4cee5/linux-amd64/go1.19.7\r\n[INFO] [03-14|06:48:39.784] [2/15 Headers] Waiting for Consensus Layer...\r\n[WARN] [03-14|06:48:47.493] no log dir set, console logging only\r\n[WARN] [03-14|06:48:47.493] no log dir set, console logging only\r\n[INFO] [03-14|06:48:47.495] DB schemas compatible                    reader=6.0.0 database=6.0.0\r\n[INFO] [03-14|06:48:47.496] Use --snapshots=false\r\n[INFO] [03-14|06:48:47.496] [snapshots] Blocks Stat                  blocks=0k indices=0k alloc=20.6MB sys=35.9MB\r\n[INFO] [03-14|06:48:47.498] [snapshots] Blocks Stat                  blocks=0k indices=0k alloc=20.8MB sys=35.9MB\r\n[INFO] [03-14|06:48:47.516] rpc filters: subscribing to Erigon events\r\n[INFO] [03-14|06:48:47.518] new subscription to newHeaders established\r\n[INFO] [03-14|06:48:47.518] HTTP endpoint opened                     url=[::]:8845 ws=true ws.compression=false grpc=false\r\n[INFO] [03-14|06:48:47.518] interfaces compatible                    remote_db= client=6.2.0 server=6.2.0\r\n[INFO] [03-14|06:48:47.519] New txs subscriber joined\r\n[INFO] [03-14|06:48:47.519] interfaces compatible                    remote_service=eth_backend client=3.2.0 server=3.2.0\r\n[INFO] [03-14|06:48:47.519] [snapshots] Blocks Stat                  blocks=0k indices=0k alloc=21.7MB sys=39.9MB\r\n[INFO] [03-14|06:48:47.520] interfaces compatible                    remote_service=mining client=1.0.0 server=1.0.0\r\n[INFO] [03-14|06:48:47.520] interfaces compatible                    remote_service=tx_pool client=1.0.0 server=1.0.0\r\n[INFO] [03-14|06:49:39.735] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=97.1MB sys=123.7MB\r\n[INFO] [03-14|06:50:39.710] [p2p] GoodPeers                          eth66=2 eth67=7 eth68=6\r\n[INFO] [03-14|06:50:39.735] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=152.5MB sys=182.6MB\r\n\r\n[INFO] [03-14|06:51:39.735] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=149.7MB sys=211.8MB\r\n[INFO] [03-14|06:52:39.710] [p2p] GoodPeers                          eth67=11 eth66=1 eth68=11\r\n[INFO] [03-14|06:52:39.734] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=185.3MB sys=238.0MB\r\n[INFO] [03-14|06:53:39.734] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=128.0MB sys=266.4MB\r\n[INFO] [03-14|06:54:39.711] [p2p] GoodPeers                          eth67=13 eth66=2 eth68=16\r\n[INFO] [03-14|06:54:39.735] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=207.1MB sys=270.7MB\r\n[INFO] [03-14|06:55:39.734] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=186.0MB sys=308.9MB\r\n[INFO] [03-14|06:56:39.710] [p2p] GoodPeers                          eth66=2 eth67=15 eth68=18\r\n[INFO] [03-14|06:56:39.734] [txpool] stat                            block=0 pending=0 baseFee=0 queued=22 alloc=206.2MB sys=309.2MB\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1467483148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1468111693",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1468111693",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1468111693,
    "node_id": "IC_kwDOC0FsAM5XgZtN",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-14T13:32:28Z",
    "updated_at": "2023-03-14T13:32:28Z",
    "author_association": "NONE",
    "body": "Same issue for us, but even restart is not fixing it, it's still stuck here:\r\n\r\n```\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":{\"currentBlock\":\"0xf4263a\",\"highestBlock\":\"0x1006711\",\"stages\":[{\"stage_name\":\"Snapshots\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"Headers\",\"block_number\":\"0x1006711\"},{\"stage_name\":\"BlockHashes\",\"block_number\":\"0x1006711\"},{\"stage_name\":\"Bodies\",\"block_number\":\"0x1006711\"},{\"stage_name\":\"Senders\",\"block_number\":\"0x1006711\"},{\"stage_name\":\"Execution\",\"block_number\":\"0xf8dd17\"},{\"stage_name\":\"Translation\",\"block_number\":\"0x0\"},{\"stage_name\":\"HashState\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"IntermediateHashes\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"AccountHistoryIndex\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"StorageHistoryIndex\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"LogIndex\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"CallTraces\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"TxLookup\",\"block_number\":\"0xf4263a\"},{\"stage_name\":\"Finish\",\"block_number\":\"0xf4263a\"}]}}\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1468111693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1470587625",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1470587625",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1470587625,
    "node_id": "IC_kwDOC0FsAM5Xp2Lp",
    "user": {
      "login": "ybstaked",
      "id": 85460995,
      "node_id": "MDQ6VXNlcjg1NDYwOTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/85460995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ybstaked",
      "html_url": "https://github.com/ybstaked",
      "followers_url": "https://api.github.com/users/ybstaked/followers",
      "following_url": "https://api.github.com/users/ybstaked/following{/other_user}",
      "gists_url": "https://api.github.com/users/ybstaked/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ybstaked/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ybstaked/subscriptions",
      "organizations_url": "https://api.github.com/users/ybstaked/orgs",
      "repos_url": "https://api.github.com/users/ybstaked/repos",
      "events_url": "https://api.github.com/users/ybstaked/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ybstaked/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-15T18:46:27Z",
    "updated_at": "2023-03-15T18:46:27Z",
    "author_association": "NONE",
    "body": "any update here and/or new release?  we have an erigon node that is still unable to sync to tip.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1470587625/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471082225",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1471082225",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1471082225,
    "node_id": "IC_kwDOC0FsAM5Xru7x",
    "user": {
      "login": "MrLouzao",
      "id": 10439162,
      "node_id": "MDQ6VXNlcjEwNDM5MTYy",
      "avatar_url": "https://avatars.githubusercontent.com/u/10439162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrLouzao",
      "html_url": "https://github.com/MrLouzao",
      "followers_url": "https://api.github.com/users/MrLouzao/followers",
      "following_url": "https://api.github.com/users/MrLouzao/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrLouzao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrLouzao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrLouzao/subscriptions",
      "organizations_url": "https://api.github.com/users/MrLouzao/orgs",
      "repos_url": "https://api.github.com/users/MrLouzao/repos",
      "events_url": "https://api.github.com/users/MrLouzao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrLouzao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T00:43:15Z",
    "updated_at": "2023-03-16T00:43:15Z",
    "author_association": "NONE",
    "body": "Just to clarify, this only affects us on Goerli. We haven't seen this behaviour configuring Ropsten (until it was deprecated) or in Mainnet.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471082225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471844731",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1471844731",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1471844731,
    "node_id": "IC_kwDOC0FsAM5XupF7",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T12:13:44Z",
    "updated_at": "2023-03-16T12:19:26Z",
    "author_association": "NONE",
    "body": "same for me for some months already (since v2.39 or smth like that). Looks like not enough nodes for Consensus layer (i'm using internal consensus client):\r\n\r\nwarning: read logs from bottom to top.\r\n```\r\n  |   | [INFO] [03-16\\|11:54:25.048] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|11:54:25.048] [txpool] stat                            block=8664571 pending=3396 baseFee=677 queued=3228 alloc=1.4GB sys=1.6GB\r\n  |   | [INFO] [03-16\\|11:53:25.050] [txpool] stat                            block=8664571 pending=3238 baseFee=638 queued=3062 alloc=1.5GB sys=1.6GB\r\n  |   | [INFO] [03-16\\|11:53:25.048] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|11:53:14.283] [p2p] GoodPeers                          eth68=26 eth67=20\r\n  |   | [INFO] [03-16\\|11:52:25.048] [txpool] stat                            block=8664571 pending=3032 baseFee=629 queued=2354 alloc=1.0GB sys=1.6GB\r\n  |   | [INFO] [03-16\\|11:52:25.048] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|11:51:25.050] [txpool] stat                            block=8664571 pending=2822 baseFee=619 queued=2205 alloc=1.3GB sys=1.6GB\r\n  |   | [INFO] [03-16\\|11:51:25.048] [LightClient] P2P                        peers=1\r\n  |   | [INFO] [03-16\\|11:51:14.284] [p2p] GoodPeers                          eth67=8 eth68=21\r\n  |   | [INFO] [03-16\\|11:50:25.048] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|11:50:25.048] [txpool] stat                            block=8664571 pending=2621 baseFee=562 queued=2062 alloc=874.4MB sys=1.6GB\r\n  |   | [INFO] [03-16\\|11:49:25.050] [txpool] stat                            block=8664571 pending=2432 baseFee=505 queued=1888 alloc=983.9MB sys=1.5GB\r\n  |   | [INFO] [03-16\\|11:49:25.049] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|11:49:14.283] [p2p] GoodPeers                          eth67=4 eth68=12\r\n  |   | [INFO] [03-16\\|11:48:25.049] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|11:48:25.048] [txpool] stat                            block=8664571 pending=258 baseFee=146 queued=303 alloc=954.5MB sys=1.5GB\r\n  |   | [INFO] [03-16\\|11:47:25.064] [2/15 Headers] Waiting for Consensus Layer...\r\n  |   | [INFO] [03-16\\|11:47:25.063] [snapshots] Blocks Stat                  blocks=8574k indices=8574k alloc=1.2GB sys=1.5GB\r\n  |   | [INFO] [03-16\\|11:47:25.060] [1/15 Snapshots] Fetching torrent files metadata\r\n  |   | [INFO] [03-16\\|11:47:25.058] [txpool] Started\r\n...\r\n```\r\npending blocks count increasing, but no blocks downloaded\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471844731/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471847696",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1471847696",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1471847696,
    "node_id": "IC_kwDOC0FsAM5Xup0Q",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T12:15:19Z",
    "updated_at": "2023-03-16T12:15:19Z",
    "author_association": "NONE",
    "body": "Yesterday my patience was over because restarts didn't help for a long time and I've created an issue :-D\r\nhttps://github.com/ledgerwatch/erigon/issues/7114",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471847696/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471857990",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1471857990",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1471857990,
    "node_id": "IC_kwDOC0FsAM5XusVG",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T12:20:48Z",
    "updated_at": "2023-03-16T12:21:34Z",
    "author_association": "NONE",
    "body": "I have had the same issue for quite a while now, since v2.37, and decided to look into this again today. After enabling the firewall to allow the TCP and UDP ports for the light client, I can now see healthy looking peers count, and both goerli and mainnet sync is much better. Don't know if this is co-incidence (I tweaked a few other things), so will keep monitoring. In the meantime, perhaps you can also give this a  go and let us know if it helps.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471857990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471906126",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1471906126",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1471906126,
    "node_id": "IC_kwDOC0FsAM5Xu4FO",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T12:56:36Z",
    "updated_at": "2023-03-16T13:09:52Z",
    "author_association": "NONE",
    "body": "@keithchew which ports needs to be opened for Goerli? (ports for incoming connections (listening ports)?)",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471906126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471950867",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1471950867",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1471950867,
    "node_id": "IC_kwDOC0FsAM5XvDAT",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T13:25:44Z",
    "updated_at": "2023-03-16T13:25:44Z",
    "author_association": "NONE",
    "body": "port 4000/4001? I've not exposing this ports even on mainnet, but lightclient has 16-18 peers on mainnet...",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1471950867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1472186992",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1472186992",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1472186992,
    "node_id": "IC_kwDOC0FsAM5Xv8pw",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T15:21:02Z",
    "updated_at": "2023-03-16T15:21:02Z",
    "author_association": "NONE",
    "body": "setting --lightclient.discovery.port=10500 and --lightclient.discovery.tcpport=10500 and opening 10500 tcp/udp to public doesn't solve problem on Goerli (peers=0 almost always)\r\n\r\n\r\n```\r\n  |   | [INFO] [03-16\\|15:19:11.664] [p2p] GoodPeers                          eth67=34 eth68=35\r\n  |   | [INFO] [03-16\\|15:19:01.178] [txpool] stat                            block=8665467 pending=1676 baseFee=1214 queued=8209 alloc=1.1GB sys=2.9GB\r\n  |   | [INFO] [03-16\\|15:19:01.177] [LightClient] P2P                        peers=0\r\n  |   | [INFO] [03-16\\|15:18:01.178] [txpool] stat                            block=8665467 pending=1391 baseFee=1148 queued=8161 alloc=1.6GB sys=2.9GB\r\n  |   | [INFO] [03-16\\|15:18:01.177] [LightClient] P2P                        peers=1\r\n  |   | [INFO] [03-16\\|15:17:11.665] [p2p] GoodPeers                          eth68=35 eth67=34\r\n  |   | [INFO] [03-16\\|15:17:01.179] [txpool] stat                            block=8665467 pending=1150 baseFee=1114 queued=8096 alloc=1.2GB sys=2.9GB\r\n  |   | [INFO] [03-16\\|15:17:01.177] [LightClient] P2P                        peers=3\r\n  |   | [INFO] [03-16\\|15:16:01.178] [txpool] stat                            block=8665467 pending=936 baseFee=1039 queued=8039 alloc=1.7GB sys=2.9GB\r\n  |   | [INFO] [03-16\\|15:16:01.178] [LightClient] P2P                        peers=0\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1472186992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1472587465",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1472587465",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1472587465,
    "node_id": "IC_kwDOC0FsAM5XxebJ",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T19:00:46Z",
    "updated_at": "2023-03-16T20:23:47Z",
    "author_association": "NONE",
    "body": "Did u check the network traffic to see that they are used? Sticking to erigon's port convention, I would keep the ports separate, eg 10500 and 10501 in your example. I have not checked the p2p protocol implementation, but back in the days, it is common for p2p protocols to use both types when fallback is needed. So, just to eliminate that possibility, keep them separate while troubleshooting your issue.\r\n\r\nHere's are my Goerli logs (grep'ing just peers) after starting up for 30mins from cold boot::\r\n```\r\n[INFO] [03-16|18:44:53.978] [p2p] GoodPeers                          eth67=33 eth68=33\r\n[INFO] [03-16|18:45:16.364] [LightClient] P2P                        peers=5\r\n[INFO] [03-16|18:46:16.364] [LightClient] P2P                        peers=6\r\n[INFO] [03-16|18:46:53.978] [p2p] GoodPeers                          eth67=33 eth68=33\r\n[INFO] [03-16|18:47:16.656] [LightClient] P2P                        peers=5\r\n[INFO] [03-16|18:48:16.363] [LightClient] P2P                        peers=5\r\n[INFO] [03-16|18:48:53.978] [p2p] GoodPeers                          eth67=33 eth68=33\r\n[INFO] [03-16|18:49:16.363] [LightClient] P2P                        peers=5\r\n[INFO] [03-16|18:50:16.366] [LightClient] P2P                        peers=7\r\n[INFO] [03-16|18:50:53.978] [p2p] GoodPeers                          eth67=33 eth68=33\r\n[INFO] [03-16|18:51:16.363] [LightClient] P2P                        peers=7\r\n[INFO] [03-16|18:52:16.364] [LightClient] P2P                        peers=10\r\n[INFO] [03-16|18:52:53.978] [p2p] GoodPeers                          eth67=33 eth68=33\r\n[INFO] [03-16|18:53:16.369] [LightClient] P2P                        peers=11\r\n[INFO] [03-16|18:54:16.364] [LightClient] P2P                        peers=12\r\n```\r\n\r\nPS: peers count goes up to around 25 later on, and mainnet, around 130 peers... \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1472587465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473467275",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1473467275",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1473467275,
    "node_id": "IC_kwDOC0FsAM5X01OL",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T09:08:40Z",
    "updated_at": "2023-03-17T09:08:57Z",
    "author_association": "NONE",
    "body": "@keithchew if you opened ports for lightclient, then what's your setting for `--lightclient.discovery.addr`? Because by default it is '127.0.0.1' and it not listening for external world connections",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473467275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473500457",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1473500457",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1473500457,
    "node_id": "IC_kwDOC0FsAM5X09Up",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T09:24:39Z",
    "updated_at": "2023-03-17T09:24:39Z",
    "author_association": "NONE",
    "body": "Mine is set to 0.0.0.0 and sitting within a docker container. External traffic is port forwarded to the docker host server. You can use Wireshark or tcpdump to verify traffic is flowing through those ports.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473500457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473553173",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1473553173",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1473553173,
    "node_id": "IC_kwDOC0FsAM5X1KMV",
    "user": {
      "login": "whidrasl",
      "id": 14200104,
      "node_id": "MDQ6VXNlcjE0MjAwMTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/14200104?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/whidrasl",
      "html_url": "https://github.com/whidrasl",
      "followers_url": "https://api.github.com/users/whidrasl/followers",
      "following_url": "https://api.github.com/users/whidrasl/following{/other_user}",
      "gists_url": "https://api.github.com/users/whidrasl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/whidrasl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/whidrasl/subscriptions",
      "organizations_url": "https://api.github.com/users/whidrasl/orgs",
      "repos_url": "https://api.github.com/users/whidrasl/repos",
      "events_url": "https://api.github.com/users/whidrasl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/whidrasl/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T09:50:02Z",
    "updated_at": "2023-03-17T09:50:28Z",
    "author_association": "NONE",
    "body": "finally thanks, @keithchew! Exposing lightclient ports solves the problem. `--lightclient.discovery.addr` must be exposed too (0.0.0.0 for example) :-) Even if ports are non-default (like 10500/10501) lightclient peers count is quickly incrementing :-)",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473553173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473619088",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1473619088",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1473619088,
    "node_id": "IC_kwDOC0FsAM5X1aSQ",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T10:24:02Z",
    "updated_at": "2023-03-17T10:24:02Z",
    "author_association": "NONE",
    "body": "Perfect, you are most welcome! Yup, definitely a great feeling watching erigon sync up and keep up with the chain.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1473619088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1481712601",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1481712601",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1481712601,
    "node_id": "IC_kwDOC0FsAM5YUSPZ",
    "user": {
      "login": "fenidik",
      "id": 1121966,
      "node_id": "MDQ6VXNlcjExMjE5NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1121966?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fenidik",
      "html_url": "https://github.com/fenidik",
      "followers_url": "https://api.github.com/users/fenidik/followers",
      "following_url": "https://api.github.com/users/fenidik/following{/other_user}",
      "gists_url": "https://api.github.com/users/fenidik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fenidik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fenidik/subscriptions",
      "organizations_url": "https://api.github.com/users/fenidik/orgs",
      "repos_url": "https://api.github.com/users/fenidik/repos",
      "events_url": "https://api.github.com/users/fenidik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fenidik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T18:38:50Z",
    "updated_at": "2023-03-23T18:38:50Z",
    "author_association": "NONE",
    "body": "I have same issue\r\n\r\n```\r\n[INFO] [03-23|18:23:09.578] [p2p] GoodPeers                          eth67=30 eth66=3 eth68=33\r\n[INFO] [03-23|18:23:55.310] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=4.2GB sys=8.6GB\r\n[INFO] [03-23|18:24:55.310] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=4.5GB sys=8.6GB\r\n[INFO] [03-23|18:25:09.579] [p2p] GoodPeers                          eth67=30 eth66=3 eth68=33\r\n[INFO] [03-23|18:25:55.310] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=3.1GB sys=8.6GB\r\n[INFO] [03-23|18:26:55.310] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=3.4GB sys=8.6GB\r\n[INFO] [03-23|18:27:09.579] [p2p] GoodPeers                          eth66=3 eth67=30 eth68=33\r\n[INFO] [03-23|18:27:55.310] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=3.0GB sys=8.6GB\r\n[INFO] [03-23|18:28:55.309] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=3.4GB sys=8.6GB\r\n[INFO] [03-23|18:29:09.579] [p2p] GoodPeers                          eth68=33 eth67=30 eth66=3\r\n[INFO] [03-23|18:29:56.196] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=3.0GB sys=8.6GB\r\n[INFO] [03-23|18:30:55.318] [txpool] stat                            block=16865544 pending=10000 baseFee=30000 queued=30000 alloc=4.2GB sys=8.6GB\r\n[INFO] [03-23|18:31:09.583] [p2p] GoodPeers                          eth67=30 eth66=3 eth68=33\r\n```\r\n\r\nJust stuck. erigon:v2.40.1\r\n\r\nrun options:  --http --http.api=engine,eth,erigon,web3,net,debug,trace,txpool,shh --bodies.cache=21474836480\r\n\r\nlast logs before stuck\r\n\r\n```\r\n[INFO] [03-20|01:13:38.671] RPC Daemon notified of new headers       from=16865540 to=16865541 hash=0x145ef732c53a748ebeaf623c462f2a568abc556d55e18695523173a161f624c8 header sending=15.754µs log sending=257ns\r\n[INFO] [03-20|01:13:40.585] [2/15 Headers] Waiting for Consensus Layer...\r\n[WARN] [03-20|01:13:40.840] Could not send beacon block to ETH1      err=\"missing attestation data\"\r\n[INFO] [03-20|01:13:48.471] [2/15 Headers] Handling new payload      height=16865542 hash=0x8608eac1159aee186155a726056ef75c148f821a2cf68c369325b5c882ce8251\r\n[INFO] [03-20|01:13:49.350] [2/15 Headers] Waiting for Consensus Layer...\r\n[INFO] [03-20|01:13:49.851] [2/15 Headers] Fork choice update: flushing in-memory state (built by previous newPayload)\r\n[INFO] [03-20|01:13:50.855] Commit cycle                             in=225.823477ms\r\n[INFO] [03-20|01:13:50.855] Timings (slower than 50ms)               Headers=639ms CallTraces=128ms AccountHistoryIndex=92ms StorageHistoryIndex=196ms LogIndex=105ms TxLookup=116ms\r\n[INFO] [03-20|01:13:50.855] Tables                                   PlainState=88.0GB AccountChangeSet=184.4GB StorageChangeSet=281.3GB BlockTransaction=9.7GB TransactionLog=546.2GB FreeList=35.2MB ReclaimableSpace=35.2GB\r\n[INFO] [03-20|01:13:50.855] RPC Daemon notified of new headers       from=16865541 to=16865542 hash=0x8608eac1159aee186155a726056ef75c148f821a2cf68c369325b5c882ce8251 header sending=17.543µs log sending=221ns\r\n[INFO] [03-20|01:13:53.421] [2/15 Headers] Waiting for Consensus Layer...\r\n[WARN] [03-20|01:13:53.674] Could not send beacon block to ETH1      err=\"missing attestation data\"\r\n[INFO] [03-20|01:13:55.307] [LightClient] P2P                        peers=2\r\n[INFO] [03-20|01:13:55.320] [txpool] stat                            block=16865542 pending=6629 baseFee=6643 queued=29751 alloc=3.5GB sys=8.6GB\r\n[INFO] [03-20|01:14:00.334] [2/15 Headers] Handling new payload      height=16865543 hash=0xef6b83881fff7b427f9b0264c282bd0c6ddd79948fc12a9df2d7bf5306d52e3c\r\n[INFO] [03-20|01:14:01.368] [2/15 Headers] Waiting for Consensus Layer...\r\n[INFO] [03-20|01:14:01.868] [2/15 Headers] Fork choice update: flushing in-memory state (built by previous newPayload)\r\n[INFO] [03-20|01:14:02.974] Commit cycle                             in=299.037612ms\r\n[INFO] [03-20|01:14:02.974] Timings (slower than 50ms)               Headers=671ms CallTraces=124ms AccountHistoryIndex=71ms StorageHistoryIndex=221ms LogIndex=110ms TxLookup=107ms\r\n[INFO] [03-20|01:14:02.974] Tables                                   PlainState=88.0GB AccountChangeSet=184.4GB StorageChangeSet=281.3GB BlockTransaction=9.7GB TransactionLog=546.2GB FreeList=35.2MB ReclaimableSpace=35.2GB\r\n[INFO] [03-20|01:14:02.974] RPC Daemon notified of new headers       from=16865542 to=16865543 hash=0xef6b83881fff7b427f9b0264c282bd0c6ddd79948fc12a9df2d7bf5306d52e3c header sending=17.971µs log sending=405ns\r\n[INFO] [03-20|01:14:05.541] [2/15 Headers] Waiting for Consensus Layer...\r\n[INFO] [03-20|01:14:12.370] [2/15 Headers] Handling new payload      height=16865544 hash=0x5a7f473d8f38a62877ba113a20a20dadc4f62b59c7b44075d478aef7b071981c\r\n[INFO] [03-20|01:14:13.801] [2/15 Headers] Waiting for Consensus Layer...\r\n[INFO] [03-20|01:14:14.302] [2/15 Headers] Fork choice update: flushing in-memory state (built by previous newPayload)\r\n[INFO] [03-20|01:14:15.723] Commit cycle                             in=201.655616ms\r\n[INFO] [03-20|01:14:15.723] Timings (slower than 50ms)               Headers=717ms CallTraces=274ms AccountHistoryIndex=223ms StorageHistoryIndex=124ms LogIndex=170ms TxLookup=207ms\r\n[INFO] [03-20|01:14:15.723] Tables                                   PlainState=88.0GB AccountChangeSet=184.4GB StorageChangeSet=281.3GB BlockTransaction=9.7GB TransactionLog=546.2GB FreeList=35.2MB ReclaimableSpace=35.2GB\r\n[INFO] [03-20|01:14:15.723] RPC Daemon notified of new headers       from=16865543 to=16865544 hash=0x5a7f473d8f38a62877ba113a20a20dadc4f62b59c7b44075d478aef7b071981c header sending=24.134µs log sending=243ns\r\n[INFO] [03-20|01:14:19.056] [2/15 Headers] Waiting for Consensus Layer...\r\n[WARN] [03-20|01:14:19.356] Could not send beacon block to ETH1      err=\"missing attestation data\"\r\n[INFO] [03-20|01:14:19.556] [Lightclient] Fetching Sync Committee Period period=737\r\n[INFO] [03-20|01:14:55.309] [txpool] stat                            block=16865544 pending=6976 baseFee=6669 queued=29755 alloc=3.9GB sys=8.6GB\r\n[INFO] [03-20|01:15:09.579] [p2p] GoodPeers                          eth66=5 eth67=27 eth68=32\r\n[INFO] [03-20|01:15:55.317] [txpool] stat                            block=16865544 pending=7574 baseFee=6718 queued=29787 alloc=3.3GB sys=8.6GB\r\n[INFO] [03-20|01:16:55.306] [txpool] stat                            block=16865544 pending=8003 baseFee=6746 queued=29856 alloc=3.6GB sys=8.6GB\r\n[INFO] [03-20|01:17:09.579] [p2p] GoodPeers                          eth67=27 eth68=32 eth66=5\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1481712601/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1482210219",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1482210219",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1482210219,
    "node_id": "IC_kwDOC0FsAM5YWLur",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-24T03:50:22Z",
    "updated_at": "2023-03-24T03:50:22Z",
    "author_association": "NONE",
    "body": "Your logs above look like a different issue, in particular it stops after:\r\n\r\n```\r\n[INFO] [03-20|01:14:19.556] [Lightclient] Fetching Sync Committee Period period=737\r\n```\r\n\r\nI have reported this in #7162 ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1482210219/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485849698",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1485849698",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1485849698,
    "node_id": "IC_kwDOC0FsAM5YkERi",
    "user": {
      "login": "tanmng",
      "id": 4823728,
      "node_id": "MDQ6VXNlcjQ4MjM3Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4823728?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tanmng",
      "html_url": "https://github.com/tanmng",
      "followers_url": "https://api.github.com/users/tanmng/followers",
      "following_url": "https://api.github.com/users/tanmng/following{/other_user}",
      "gists_url": "https://api.github.com/users/tanmng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tanmng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tanmng/subscriptions",
      "organizations_url": "https://api.github.com/users/tanmng/orgs",
      "repos_url": "https://api.github.com/users/tanmng/repos",
      "events_url": "https://api.github.com/users/tanmng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tanmng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-27T20:56:50Z",
    "updated_at": "2023-03-27T21:09:13Z",
    "author_association": "NONE",
    "body": " Hello everyone,\r\n\r\nIt appears I have the same issue, despite already setting all the necessary values\r\n\r\n```\r\n--lightclient.discovery.port 10500 --lightclient.discovery.tcpport 10501 --lightclient.discovery.addr 0.0.0.0\r\n```\r\n\r\nLog:\r\n\r\n```\r\nMar 27 20:40:06 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:06.685] [Checkpoint Sync] P2P                    peers=0\r\nMar 27 20:40:16 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:16.685] [Checkpoint Sync] P2P                    peers=0\r\nMar 27 20:40:26 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:26.685] [Checkpoint Sync] P2P                    peers=0\r\nMar 27 20:40:36 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:36.686] [Checkpoint Sync] P2P                    peers=0\r\nMar 27 20:40:46 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:46.685] [Checkpoint Sync] P2P                    peers=0\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] Store Initialized successfully           slot=6093664 root=fc3b0af3ad33dcded22e7b5d9492444cf99e85f2ee80d0cc\r\n521b60b4facf2d21\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] rpc filters: subscribing to Erigon events\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] [Lightclient] Fetching Sync Committee Period period=743\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] New txs subscriber joined\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] new subscription to newHeaders established\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] [LightClient Gossip] Started Gossip\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.308] Reading JWT secret                       path=/data/ethereum/jwt.hex\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.309] HTTP endpoint opened for Engine API      url=127.0.0.1:8551 ws=true ws.compression=true\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.309] HTTP endpoint opened                     url=[::]:8545 ws=true ws.compression=true grpc=false\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.312] Started P2P networking                   version=68 self=enode://a00e2279dd9679269696c1b9d83d3da2b30e0bb5070c99899fe4114a71f914df73c45fcdf443989d3cef5ef0f0184671de29d45a32ad561ec3f8d871bb09edc0@127.0.0.1:0 name=erigon/v2.41.0-stable-52d5f37b/linux-amd64/go1.19.4\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.314] Started P2P networking                   version=67 self=enode://a00e2279dd9679269696c1b9d83d3da2b30e0bb507\r\n0c99899fe4114a71f914df73c45fcdf443989d3cef5ef0f0184671de29d45a32ad561ec3f8d871bb09edc0@127.0.0.1:0 name=erigon/v2.41.0-stable-52d5f37b/linux-amd64/go1.19.4\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.321] [1/15 Snapshots] Fetching torrent files metadata\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.325] [snapshots] Blocks Stat                  blocks=16767k indices=16767k alloc=2.8GB sys=3.7GB\r\nMar 27 20:40:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:40:48.377] [2/15 Headers] Waiting for Consensus Layer...\r\nMar 27 20:41:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:41:48.197] [p2p] GoodPeers                          eth66=9 eth67=3 eth68=4\r\nMar 27 20:41:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:41:48.309] [LightClient] P2P                        peers=0\r\nMar 27 20:42:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:42:48.308] [LightClient] P2P                        peers=0\r\nMar 27 20:43:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:43:48.197] [p2p] GoodPeers                          eth66=10 eth67=12 eth68=8\r\nMar 27 20:43:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:43:48.308] [LightClient] P2P                        peers=0\r\nMar 27 20:44:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:44:48.309] [LightClient] P2P                        peers=1\r\nMar 27 20:45:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:45:48.197] [p2p] GoodPeers                          eth67=18 eth66=10 eth68=13\r\nMar 27 20:45:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:45:48.308] [LightClient] P2P                        peers=1\r\nMar 27 20:46:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:46:48.309] [LightClient] P2P                        peers=1\r\nMar 27 20:47:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:47:48.197] [p2p] GoodPeers                          eth67=22 eth66=10 eth68=13\r\nMar 27 20:47:48 HOST_NAME erigon[836115]: [INFO] [03-27|20:47:48.309] [LightClient] P2P                        peers=0\r\n```\r\n\r\nWe are using Erigon `2.41.0-stable`, the machine is an EC2 instance running inside of a VPC in AWS. Security groups allow access to both port 10500 and 10501 (UDP and TCP). I verified that the traffic works by `nc`-ing from my machine into the public IP address of the instance.\r\n\r\nI believe the network is somewhat similar to what @keithchew  has.\r\n\r\nThe problem only started since `2.37`, earlier the node worked perfectly.\r\n\r\nAny help is greatly appreciated.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485849698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485863513",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1485863513",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1485863513,
    "node_id": "IC_kwDOC0FsAM5YkHpZ",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-27T21:07:31Z",
    "updated_at": "2023-03-27T21:07:31Z",
    "author_association": "NONE",
    "body": "I can confirm that although exposing the ports on the firewall does help gather peers on startup, I can never get my nodes (goerli and mainnet) lasting (keeping up with the latest block) more than a few days. They will either (1) get stuck after \"Fetching Sync Committee Period\" (in #7162), or (2) peers count dropping to 0, as described by @tanmng.\r\n\r\nCurrently looking at running a dedicated external CL, to see if we can narrow this issue down to erigon's internal CL, or something else within erigon's EL logic.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485863513/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485867460",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1485867460",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1485867460,
    "node_id": "IC_kwDOC0FsAM5YkInE",
    "user": {
      "login": "tanmng",
      "id": 4823728,
      "node_id": "MDQ6VXNlcjQ4MjM3Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4823728?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tanmng",
      "html_url": "https://github.com/tanmng",
      "followers_url": "https://api.github.com/users/tanmng/followers",
      "following_url": "https://api.github.com/users/tanmng/following{/other_user}",
      "gists_url": "https://api.github.com/users/tanmng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tanmng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tanmng/subscriptions",
      "organizations_url": "https://api.github.com/users/tanmng/orgs",
      "repos_url": "https://api.github.com/users/tanmng/repos",
      "events_url": "https://api.github.com/users/tanmng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tanmng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-27T21:10:54Z",
    "updated_at": "2023-03-27T21:10:54Z",
    "author_association": "NONE",
    "body": "Thanks for the confirmation @keithchew. In that case I'll try to enable lighthouse for my node and see if that help resolves the issue. Will be a long time to wait for lighthouse to sync and catch up though.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485867460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485880258",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1485880258",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1485880258,
    "node_id": "IC_kwDOC0FsAM5YkLvC",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-27T21:22:51Z",
    "updated_at": "2023-03-27T21:23:25Z",
    "author_association": "NONE",
    "body": "Yeah, I started up prysm on both goerli and mainnet last Friday, and they are around 50% sycned. Will post any updates here, and would also be good if you can report your progress with lighthouse.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1485880258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487500354",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1487500354",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1487500354,
    "node_id": "IC_kwDOC0FsAM5YqXRC",
    "user": {
      "login": "winchell",
      "id": 425064,
      "node_id": "MDQ6VXNlcjQyNTA2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/425064?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winchell",
      "html_url": "https://github.com/winchell",
      "followers_url": "https://api.github.com/users/winchell/followers",
      "following_url": "https://api.github.com/users/winchell/following{/other_user}",
      "gists_url": "https://api.github.com/users/winchell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winchell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winchell/subscriptions",
      "organizations_url": "https://api.github.com/users/winchell/orgs",
      "repos_url": "https://api.github.com/users/winchell/repos",
      "events_url": "https://api.github.com/users/winchell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winchell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-28T19:44:05Z",
    "updated_at": "2023-03-28T20:55:30Z",
    "author_association": "NONE",
    "body": "I'm in GKE container and maybe need something like this? https://docs.prylabs.network/docs/prysm-usage/p2p-host-ip#broadcast-your-public-ip-address. Easy to expose any port on a public IP but there doesn't seem to be a way to tell the native Erigon CL about an address other than the ones it wants to bind directly. \r\n\r\nhttps://github.com/ethereum/consensus-specs/blob/dev/specs/phase0/p2p-interface.md\r\n\r\n\"Nodes operating behind a NAT, or otherwise undialable by default (e.g. container runtime, firewall, etc.), MUST have their infrastructure configured to enable inbound traffic on the announced public listening endpoint.\"\r\n\r\nIs the \"announced public listening endpoint\" configurable in Erigon CL, separate from the service bound IP?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487500354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487584485",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1487584485",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1487584485,
    "node_id": "IC_kwDOC0FsAM5Yqrzl",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-28T20:59:55Z",
    "updated_at": "2023-03-28T20:59:55Z",
    "author_association": "NONE",
    "body": "From my observation, I only need to expose the p2p tcp/udp ports on the firewall. When exposed correctly, you can observe (using tcpdump/wireshark/etc) traffic on the ports, and the peer count in erigon/prysm will be healthy. For example in prysm, without ports exposed you will only see 1 sided peer count (ie you are not a seeder), but when ports exposed you will see bi-directional peers.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487584485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487591070",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1487591070",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1487591070,
    "node_id": "IC_kwDOC0FsAM5Yqtae",
    "user": {
      "login": "winchell",
      "id": 425064,
      "node_id": "MDQ6VXNlcjQyNTA2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/425064?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winchell",
      "html_url": "https://github.com/winchell",
      "followers_url": "https://api.github.com/users/winchell/followers",
      "following_url": "https://api.github.com/users/winchell/following{/other_user}",
      "gists_url": "https://api.github.com/users/winchell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winchell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winchell/subscriptions",
      "organizations_url": "https://api.github.com/users/winchell/orgs",
      "repos_url": "https://api.github.com/users/winchell/repos",
      "events_url": "https://api.github.com/users/winchell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winchell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-28T21:05:55Z",
    "updated_at": "2023-03-28T21:05:55Z",
    "author_association": "NONE",
    "body": "> From my observation, I only need to expose the p2p tcp/udp ports on the firewall. When exposed correctly, you can observe (using tcpdump/wireshark/etc) traffic on the ports, and the peer count in erigon/prysm will be healthy. For example in prysm, without ports exposed you will only see 1 sided peer count (ie you are not a seeder), but when ports exposed you will see bi-directional peers.\r\n\r\nDoesn't work like that in a K8s environment.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487591070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487600184",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1487600184",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1487600184,
    "node_id": "IC_kwDOC0FsAM5Yqvo4",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-28T21:14:16Z",
    "updated_at": "2023-03-28T21:25:41Z",
    "author_association": "NONE",
    "body": "Even if you you could announce your IP in a swarm, how do you control/map the port assignments? I currently have a machines (combination of baremetal and docker containers), and to keep things simple for now, I am NAT'ing unique ports across the cluster. Eventually I will be looking at mapping to different source/dest ports, once I have stable setup (need to establish a baseline before making improvements).\r\n\r\nWhen you get it going, please post here, it would certainly be useful knowledge for all.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487600184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487633308",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7077#issuecomment-1487633308",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7077",
    "id": 1487633308,
    "node_id": "IC_kwDOC0FsAM5Yq3uc",
    "user": {
      "login": "winchell",
      "id": 425064,
      "node_id": "MDQ6VXNlcjQyNTA2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/425064?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/winchell",
      "html_url": "https://github.com/winchell",
      "followers_url": "https://api.github.com/users/winchell/followers",
      "following_url": "https://api.github.com/users/winchell/following{/other_user}",
      "gists_url": "https://api.github.com/users/winchell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/winchell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/winchell/subscriptions",
      "organizations_url": "https://api.github.com/users/winchell/orgs",
      "repos_url": "https://api.github.com/users/winchell/repos",
      "events_url": "https://api.github.com/users/winchell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/winchell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-28T21:44:15Z",
    "updated_at": "2023-03-28T21:44:15Z",
    "author_association": "NONE",
    "body": "> Even if you you could announce your IP in a swarm, how do you control/map the port assignments? I currently have a machines (combination of baremetal and docker containers), and to keep things simple for now, I am NAT'ing unique ports across the cluster. Eventually I will be looking at mapping to different source/dest ports, once I have stable setup.\r\n> \r\n> When you get it going, please post here, it would certainly be useful knowledge for all.\r\n\r\nWithout getting into details of K8s, it's just a situation where the Erigon container doesn't know its public IP and isn't binding to its public IP, so I would have to give that info at runtime. You're right, it doesn't know its public port either so that would be part of it. `--lightclient.discovery.addr` seems close but Erigon is actually binding to this IP so it's not the config I need. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487633308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7320",
  "id": 1670349816,
  "node_id": "I_kwDOC0FsAM5jj4P4",
  "number": 7320,
  "title": "memory leak problem",
  "user": {
    "login": "sundafa",
    "id": 24621599,
    "node_id": "MDQ6VXNlcjI0NjIxNTk5",
    "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sundafa",
    "html_url": "https://github.com/sundafa",
    "followers_url": "https://api.github.com/users/sundafa/followers",
    "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
    "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
    "organizations_url": "https://api.github.com/users/sundafa/orgs",
    "repos_url": "https://api.github.com/users/sundafa/repos",
    "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sundafa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2023-04-17T03:44:27Z",
  "updated_at": "2023-06-11T02:53:39Z",
  "closed_at": "2023-06-11T02:53:39Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\nErigon version: v2.42.0\r\nOS & Version: Ubuntu 20.04\r\nCommit hash: 2.42.0-stable-beb97784\r\nErigon Command (with flags/config): `erigon -chain=mainnet --prune=disabled --authrpc.jwtsecret=/node/archive/eth/erigon/jwt.hex --db.read.concurrency 10000 --rpc.batch.concurrency 30000 --externalcl --rpc.gascap=600000000 --rpc.evmtimeout=30s --rpc.batch.limit=100 --rpc.returndata.limit=104857600 --http=true --http.api 'eth,net,web3,debug,trace,txpool'`\r\nConcensus Layer: lighthouse\r\nConcensus Layer Command (with flags/config): `lighthouse bn -d /node/archive/eth/lighthouse --network mainnet --execution-jwt '/node/archive/eth/erigon/jwt.hex' --checkpoint-sync-url=https://sync-mainnet.beaconcha.in`\r\nChain/Network: eth\r\n\r\n#### Expected behaviour\r\nNormal operation and stable memory\r\n\r\n#### Actual behaviour\r\nThe memory usage suddenly increases until it is killed by the system\r\n\r\n#### Steps to reproduce the behaviour\r\nno real reason found.\r\nYou can try using rpc to continuously request\r\nBelow are some of the methods and quantities we request\r\n![image](https://user-images.githubusercontent.com/24621599/232372879-b767bd96-4ac3-4dcf-80c4-14f39a059b7c.png)\r\n\r\n#### Backtrace\r\n\r\n````\r\n[backtrace]\r\n````\r\n![image](https://user-images.githubusercontent.com/24621599/232372715-ff94a28f-f477-4627-960a-88e58db05ead.png)\r\n\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510779935",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1510779935",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1510779935,
    "node_id": "IC_kwDOC0FsAM5aDKwf",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T06:30:31Z",
    "updated_at": "2023-04-17T06:30:55Z",
    "author_association": "NONE",
    "body": "In my setup, I have erigon <-> prysm, and multiple indexers hammering erigon's API, scraping all blocks (from genesis) and all transactions/receipts per block. So far, erigon's memory (for mainnet) stays under 25GB. I do have these setup in my environment:\r\n```\r\nGOGC=50\r\nGOMEMLIMIT=16000MiB\r\nGOMAXPROCS=4\r\n```\r\nIf the above don't help you, maybe you can add a rate limiter in front of your node to help isolate the issue.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510779935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510808716",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1510808716",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1510808716,
    "node_id": "IC_kwDOC0FsAM5aDRyM",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T07:01:17Z",
    "updated_at": "2023-04-17T07:01:17Z",
    "author_association": "COLLABORATOR",
    "body": "If you again will see the leak: \r\nadd flag `--pprof`\r\n```\r\ngo tool pprof -inuse_space -png http://127.0.0.1:6060/debug/pprof/heap > mem.png\r\n```\r\nshow this file",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510808716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510809941",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1510809941",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1510809941,
    "node_id": "IC_kwDOC0FsAM5aDSFV",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T07:02:06Z",
    "updated_at": "2023-04-17T07:02:06Z",
    "author_association": "COLLABORATOR",
    "body": "also maybe you have logs of erigon for this period of time",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510809941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515778595",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1515778595",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1515778595,
    "node_id": "IC_kwDOC0FsAM5aWPIj",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T06:26:04Z",
    "updated_at": "2023-04-20T06:26:04Z",
    "author_association": "NONE",
    "body": "Sorry, ETH nodes are prone to being killed by the host. Due to insufficient memory, the time to observe information after restarting is very short.\r\nThe following is the memory information of the BSC archive node. After 30 minutes of activation, the memory reaches over 60GB.\r\nThe startup method and request method are similar, perhaps providing some information.\r\nAnd I noticed that the top display occupies 60% of the memory, but the memory displayed as used in the free command is not as large.\r\n\r\n[profile.pb.gz](https://github.com/ledgerwatch/erigon/files/11280481/profile.pb.gz)\r\n![mem-60](https://user-images.githubusercontent.com/24621599/233276275-3669c8d8-b7e4-4739-aa91-1dd3e85b8352.png)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515778595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515781189",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1515781189",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1515781189,
    "node_id": "IC_kwDOC0FsAM5aWPxF",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T06:29:17Z",
    "updated_at": "2023-04-20T06:29:17Z",
    "author_association": "NONE",
    "body": "Information when the BSC archive node occupies 20G of memory.\r\n![mem-17](https://user-images.githubusercontent.com/24621599/233277196-4608ff3b-ba3e-4462-a804-d60362c32c1d.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515781189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515785809",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1515785809",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1515785809,
    "node_id": "IC_kwDOC0FsAM5aWQ5R",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T06:34:54Z",
    "updated_at": "2023-04-20T06:34:54Z",
    "author_association": "NONE",
    "body": "docker mem usage for my erigon-goerli and erigon-mainnet:\r\n```\r\nCONTAINER ID   NAME                    CPU %     MEM USAGE / LIMIT   MEM %     NET I/O           BLOCK I/O         PIDS\r\n2a083fa6f4b6   erigon-goerli           15.60%    8.927GiB / 16GiB    55.79%    616GB / 448GB     996GB / 2.36TB    47\r\nc69900338261   erigon-mainnet          350.22%   17.64GiB / 25GiB    70.54%    591GB / 494GB     5.94TB / 1.9TB    51\r\n```\r\ngoerli under 16GB and mainnet under 25GB, uptime for 2 processes above is 20 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515785809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515902048",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1515902048",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1515902048,
    "node_id": "IC_kwDOC0FsAM5aWtRg",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T08:06:12Z",
    "updated_at": "2023-04-20T08:06:12Z",
    "author_association": "NONE",
    "body": "These settings cannot control memory growth.\r\n```\r\nGOGC=50\r\nGOMEMLIMIT=16000MiB\r\nGOMAXPROCS=4\r\n```\r\n\r\nI do not deny that there are nodes that are functioning properly, but there are also nodes that are not functioning properly.\r\nMost nodes operate normally, but sometimes memory usage suddenly increases continuously.\r\n\r\nFor the BSC node, the memory has increased and requests have not been closed. After restarting without requesting, the memory continues to increase to 60GB",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515902048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515908383",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1515908383",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1515908383,
    "node_id": "IC_kwDOC0FsAM5aWu0f",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-20T08:10:45Z",
    "updated_at": "2023-04-20T08:18:59Z",
    "author_association": "NONE",
    "body": "The settings limit the number of procs, which in turn limit the number of external memory used by each proc. In the past when I did not set them (on a 24-core machine), I used to get unpredictable/unbounded memory increases and erigon nodes kept getting killed by OOM reaper. But granted, my conditions are most likely different from yours, do keep us posted.\r\n\r\nReference issue: #6646",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1515908383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1517184243",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1517184243",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1517184243,
    "node_id": "IC_kwDOC0FsAM5abmTz",
    "user": {
      "login": "sundafa",
      "id": 24621599,
      "node_id": "MDQ6VXNlcjI0NjIxNTk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/24621599?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sundafa",
      "html_url": "https://github.com/sundafa",
      "followers_url": "https://api.github.com/users/sundafa/followers",
      "following_url": "https://api.github.com/users/sundafa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sundafa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sundafa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sundafa/subscriptions",
      "organizations_url": "https://api.github.com/users/sundafa/orgs",
      "repos_url": "https://api.github.com/users/sundafa/repos",
      "events_url": "https://api.github.com/users/sundafa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sundafa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T02:50:50Z",
    "updated_at": "2023-04-21T02:50:50Z",
    "author_association": "NONE",
    "body": "@keithchew Thank you for your suggestion and resolving some of the issues.\r\nThrough observation, some of the nodes that set the memory limit are effective, while some nodes may experience high memory levels and gradually decrease. However, it takes a long time, about 2 hours, to return to the 20% value above the limit and no longer decrease",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1517184243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1517200333",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1517200333",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1517200333,
    "node_id": "IC_kwDOC0FsAM5abqPN",
    "user": {
      "login": "keithchew",
      "id": 5557929,
      "node_id": "MDQ6VXNlcjU1NTc5Mjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5557929?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/keithchew",
      "html_url": "https://github.com/keithchew",
      "followers_url": "https://api.github.com/users/keithchew/followers",
      "following_url": "https://api.github.com/users/keithchew/following{/other_user}",
      "gists_url": "https://api.github.com/users/keithchew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/keithchew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/keithchew/subscriptions",
      "organizations_url": "https://api.github.com/users/keithchew/orgs",
      "repos_url": "https://api.github.com/users/keithchew/repos",
      "events_url": "https://api.github.com/users/keithchew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/keithchew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-21T03:16:29Z",
    "updated_at": "2023-04-21T03:16:29Z",
    "author_association": "NONE",
    "body": "@sundafa you are welcome! Although the settings are generally effective, they don't give us a quantitative/explicit control of the memory usage. This is likely due to the memory usage being dependent on the number of transactions per block, which explains why (using same settings) goerli uses less memory than mainnet. At the moment, I am very happy with using the settings, it gives a \"good enough\" control to let me plan/provision/manage the docker containers within a server. But eventually, I will be looking at getting more fine-grained control, and will post here if I find anything useful.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1517200333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1518944289",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1518944289",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1518944289,
    "node_id": "IC_kwDOC0FsAM5aiUAh",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-23T05:03:12Z",
    "updated_at": "2023-04-23T05:03:12Z",
    "author_association": "COLLABORATOR",
    "body": "> Information when the BSC archive node occupies 20G of memory.\r\n> ![mem-17](https://user-images.githubusercontent.com/24621599/233277196-4608ff3b-ba3e-4462-a804-d60362c32c1d.png)\r\n\r\nThis mem-profile shows that Erigon using 2GB, not 20GB. See also: https://github.com/ledgerwatch/erigon#htop-shows-incorrect-memory-usage",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1518944289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1574578560",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1574578560",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1574578560,
    "node_id": "IC_kwDOC0FsAM5d2imA",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-06-03T02:36:59Z",
    "updated_at": "2023-06-03T02:36:59Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1574578560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1585982930",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7320#issuecomment-1585982930",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7320",
    "id": 1585982930,
    "node_id": "IC_kwDOC0FsAM5eiC3S",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-06-11T02:53:38Z",
    "updated_at": "2023-06-11T02:53:38Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1585982930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

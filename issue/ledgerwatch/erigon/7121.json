{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7121",
  "id": 1627315309,
  "node_id": "I_kwDOC0FsAM5g_txt",
  "number": 7121,
  "title": "[rpcdaemon] rpc response slowly when start rpcdaemon on different server.",
  "user": {
    "login": "AgoL5866",
    "id": 104971045,
    "node_id": "U_kgDOBkG7JQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/104971045?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AgoL5866",
    "html_url": "https://github.com/AgoL5866",
    "followers_url": "https://api.github.com/users/AgoL5866/followers",
    "following_url": "https://api.github.com/users/AgoL5866/following{/other_user}",
    "gists_url": "https://api.github.com/users/AgoL5866/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AgoL5866/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AgoL5866/subscriptions",
    "organizations_url": "https://api.github.com/users/AgoL5866/orgs",
    "repos_url": "https://api.github.com/users/AgoL5866/repos",
    "events_url": "https://api.github.com/users/AgoL5866/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AgoL5866/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-16T11:52:50Z",
  "updated_at": "2023-05-10T02:19:56Z",
  "closed_at": "2023-05-10T02:19:56Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version:  v2.40.1\r\n\r\nOS & Version: Linux\r\n\r\nCommit hash: \r\n\r\nErigon Command (with flags/config):\r\n\r\nrpcdaemon running on remote server:\r\n```\r\nbin/rpcdaemon --http.api=eth,erigon,web3,net,debug,trace,txpool --http.corsdomain=* --http.vhosts=* --http.trace --ws --http.port=8545 --private.api.addr=x.x.x.x:9090 --rpc.batch.concurrency 100 --rpc.returndata.limit 1024000 --db.read.concurrency 100\r\n```\r\nrpcdaemon running on erigon same server:\r\n```\r\nbin/rpcdaemon --http.api=eth,erigon,web3,net,debug,trace,txpool --http.corsdomain=* --http.vhosts=* --http.trace --ws --http.port=18545 --private.api.addr=127.0.0.1:9090 --rpc.batch.concurrency 100 --rpc.returndata.limit 1024000 --db.read.concurrency 100\r\n```\r\n\r\nrunning test curl command on remote rpcdaemon server:\r\n\r\n```\r\ncurl -w \"@curl_time.txt\" -k -X POST -H \"Content-Type:application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"debug_traceBlockByNumber\",\"params\":[\"16837744\", {\"tracer\":\"callTracer\"}],\"id\":1}' --url http://x.x.x.x:8545  -o /dev/null\r\n```\r\n\r\nConcensus Layer:\r\n\r\nConcensus Layer Command (with flags/config):\r\n\r\nChain/Network:  eth mainnet\r\n\r\n#### Expected behaviour\r\nThe cost time maybe similar\r\n\r\n#### Actual behaviour\r\n\r\nThe rpc on remote will cost about 10s, but on the same server it's only cost 0.9s,  btw the 2 servers ping is about 1ms.\r\nWhat's the problem?\r\nThanks~\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n\r\nlocal rpcdaemon:\r\n```\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  819k    0  819k  100   107   838k    109 --:--:-- --:--:-- --:--:--  837k\r\n\r\n     time_namelookup:  0.000019s\r\n        time_connect:  0.001094s\r\n     time_appconnect:  0.000000s\r\n    time_pretransfer:  0.001128s\r\n       time_redirect:  0.000000s\r\n  time_starttransfer:  0.059523s\r\n                     ----------\r\n          time_total:  0.977890s\r\n```\r\n\r\nremote rpcdaemon:\r\n```\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100  819k    0  819k  100   107  80774     10  0:00:10  0:00:10 --:--:-- 95792\r\n\r\n     time_namelookup:  0.000018s\r\n        time_connect:  0.000646s\r\n     time_appconnect:  0.000000s\r\n    time_pretransfer:  0.000682s\r\n       time_redirect:  0.000000s\r\n  time_starttransfer:  0.204754s\r\n                     ----------\r\n          time_total:  10.386650s\r\n```\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1532379241",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7121#issuecomment-1532379241",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121",
    "id": 1532379241,
    "node_id": "IC_kwDOC0FsAM5bVkBp",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-05-03T02:19:37Z",
    "updated_at": "2023-05-03T02:19:37Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1532379241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1541195126",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7121#issuecomment-1541195126",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7121",
    "id": 1541195126,
    "node_id": "IC_kwDOC0FsAM5b3MV2",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-05-10T02:19:55Z",
    "updated_at": "2023-05-10T02:19:55Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1541195126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

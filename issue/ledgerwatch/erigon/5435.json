{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5435",
  "id": 1378714454,
  "node_id": "I_kwDOC0FsAM5SLYNW",
  "number": 5435,
  "title": "How to gracefully remove the limit on the number of selected transactions in mining",
  "user": {
    "login": "Fynes",
    "id": 11804958,
    "node_id": "MDQ6VXNlcjExODA0OTU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Fynes",
    "html_url": "https://github.com/Fynes",
    "followers_url": "https://api.github.com/users/Fynes/followers",
    "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
    "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
    "organizations_url": "https://api.github.com/users/Fynes/orgs",
    "repos_url": "https://api.github.com/users/Fynes/repos",
    "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Fynes/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4406003490,
      "node_id": "LA_kwDOC0FsAM8AAAABBp5HIg",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/gateway",
      "name": "gateway",
      "color": "62DB33",
      "default": false,
      "description": "Issue assigned to gateway team"
    },
    {
      "id": 4479226498,
      "node_id": "LA_kwDOC0FsAM8AAAABCvuSgg",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/status:in-progress",
      "name": "status:in-progress",
      "color": "1DDFDF",
      "default": false,
      "description": "Actively being worked on (picked up by developer)"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "hexoscott",
    "id": 70711990,
    "node_id": "MDQ6VXNlcjcwNzExOTkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hexoscott",
    "html_url": "https://github.com/hexoscott",
    "followers_url": "https://api.github.com/users/hexoscott/followers",
    "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
    "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
    "organizations_url": "https://api.github.com/users/hexoscott/orgs",
    "repos_url": "https://api.github.com/users/hexoscott/repos",
    "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hexoscott/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 19,
  "created_at": "2022-09-20T02:00:15Z",
  "updated_at": "2023-01-30T14:06:31Z",
  "closed_at": "2023-01-30T14:06:31Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "See above code. 200 txns a block is hard code and not user friendly.\r\n`cfg.txPool2.Best(200, &txSlots, poolTx)`\r\n\r\n",
  "closed_by": {
    "login": "revitteth",
    "id": 693995,
    "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/revitteth",
    "html_url": "https://github.com/revitteth",
    "followers_url": "https://api.github.com/users/revitteth/followers",
    "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
    "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
    "organizations_url": "https://api.github.com/users/revitteth/orgs",
    "repos_url": "https://api.github.com/users/revitteth/repos",
    "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/revitteth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1253361474",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1253361474",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1253361474,
    "node_id": "IC_kwDOC0FsAM5KtMdC",
    "user": {
      "login": "PeaStew",
      "id": 34198053,
      "node_id": "MDQ6VXNlcjM0MTk4MDUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/34198053?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PeaStew",
      "html_url": "https://github.com/PeaStew",
      "followers_url": "https://api.github.com/users/PeaStew/followers",
      "following_url": "https://api.github.com/users/PeaStew/following{/other_user}",
      "gists_url": "https://api.github.com/users/PeaStew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PeaStew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PeaStew/subscriptions",
      "organizations_url": "https://api.github.com/users/PeaStew/orgs",
      "repos_url": "https://api.github.com/users/PeaStew/repos",
      "events_url": "https://api.github.com/users/PeaStew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PeaStew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T08:15:52Z",
    "updated_at": "2022-09-21T08:15:52Z",
    "author_association": "NONE",
    "body": "https://github.com/ledgerwatch/erigon/blob/68cc6e461264cb63c4e8fb332ae528478db74279/eth/stagedsync/stage_mining_create_block.go#L133 for reference",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1253361474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1253463493",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1253463493",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1253463493,
    "node_id": "IC_kwDOC0FsAM5KtlXF",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T09:45:23Z",
    "updated_at": "2022-09-21T09:45:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "There is a similar issue around this #5451, which suggest an unlimited cap.  I'd put the question forwards on discord about defaulting to unlimited or using a flag to set the cap which should satisfy both cases.  I'm just unsure about the implications of increasing this number, surely there is a cap to how large a new block can be so we'd need code to ensure we don't go about this which I don't think we currently have.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1253463493/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254553680",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254553680",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254553680,
    "node_id": "IC_kwDOC0FsAM5KxvhQ",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T05:41:43Z",
    "updated_at": "2022-09-22T05:42:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "We already adjust it to unlimited cap(Uint64.MAX) for our test.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254553680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254620791",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254620791",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254620791,
    "node_id": "IC_kwDOC0FsAM5Kx_53",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T07:11:52Z",
    "updated_at": "2022-09-22T07:11:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok brilliant, and no issues?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254620791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254717025",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254717025",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254717025,
    "node_id": "IC_kwDOC0FsAM5KyXZh",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T08:46:36Z",
    "updated_at": "2022-09-22T08:46:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Ok brilliant, and no issues?\r\n\r\nbad idea. The gas of the mined block will exceed the GasLimit.\r\n\r\n```\r\nVerify header fail:                      height=1342 diffculty=1 err=\"invalid gasUsed: have 204564298, gasLimit 200000000\"\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254717025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254718970",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254718970",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254718970,
    "node_id": "IC_kwDOC0FsAM5KyX36",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T08:48:23Z",
    "updated_at": "2022-09-22T08:49:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "That was my worry, there is no \"stop here\" switch in the code, other than checking for an individual transaction having a high gas fee there is nothing to stop it just adding 1000s of transactions to a block if they were available.\r\n\r\nNot to say we couldn't add this, but I'd need guidance from core team on how best to achieve this.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254718970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254722882",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254722882",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254722882,
    "node_id": "IC_kwDOC0FsAM5KyY1C",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T08:51:28Z",
    "updated_at": "2022-09-22T08:52:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "The way I'd see it would be:\r\n- no flag set, unlimited transactions allowed but capped at gas limit\r\n- flag set, transactions capped at gas limit or by the flag set by the user\r\n\r\n^ unlimited in this case would be uint16 maximum number",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254722882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254732442",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254732442",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254732442,
    "node_id": "IC_kwDOC0FsAM5KybKa",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T08:59:25Z",
    "updated_at": "2022-09-22T08:59:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "> That was my worry, there is no \"stop here\" switch in the code, other than checking for an individual transaction having a high gas fee there is nothing to stop it just adding 1000s of transactions to a block if they were available.\r\n> \r\n> Not to say we couldn't add this, but I'd need guidance from core team on how best to achieve this.\r\n\r\n```\r\n\t\t// Start executing the transaction\r\n\t\tlogs, err := miningCommitTx(txn, coinbase, vmConfig, chainConfig, ibs, current)\r\n\r\n\t\tif errors.Is(err, core.ErrGasLimitReached) {\r\n\t\t\t// Pop the env out-of-gas transaction without shifting in the next from the account\r\n\t\t\tlog.Debug(fmt.Sprintf(\"[%s] Gas limit exceeded for env block\", logPrefix), \"hash\", txn.Hash(), \"sender\", from)\r\n\t\t\ttxs.Pop()\r\n\t\t} else if errors.Is(err, core.ErrNonceTooLow) {\r\n\t\t\t// New head notification data race between the transaction pool and miner, shift\r\n\t\t\tlog.Debug(fmt.Sprintf(\"[%s] Skipping transaction with low nonce\", logPrefix), \"hash\", txn.Hash(), \"sender\", from, \"nonce\", txn.GetNonce())\r\n\t\t\ttxs.Shift()\r\n\t\t} else if errors.Is(err, core.ErrNonceTooHigh) {\r\n\t\t\t// Reorg notification data race between the transaction pool and miner, skip account =\r\n\t\t\tlog.Debug(fmt.Sprintf(\"[%s] Skipping transaction with high nonce\", logPrefix), \"hash\", txn.Hash(), \"sender\", from, \"nonce\", txn.GetNonce())\r\n\t\t\ttxs.Pop()\r\n\t\t} else if err == nil {\r\n\t\t\t// Everything ok, collect the logs and shift in the next transaction from the same account\r\n\t\t\tlog.Debug(fmt.Sprintf(\"[%s] addTransactionsToMiningBlock Successful\", logPrefix), \"sender\", from, \"nonce\", txn.GetNonce())\r\n\t\t\tcoalescedLogs = append(coalescedLogs, logs...)\r\n\t\t\ttcount++\r\n\t\t\ttxs.Shift()\r\n\t\t} else {\r\n\t\t\t// Strange error, discard the transaction and get the next in line (note, the\r\n\t\t\t// nonce-too-high clause will prevent us from executing in vain).\r\n\t\t\tlog.Debug(fmt.Sprintf(\"[%s] Skipping transaction\", logPrefix), \"hash\", txn.Hash(), \"sender\", from, \"err\", err)\r\n\t\t\ttxs.Shift()\r\n\t\t}\r\n```\r\nIt seems that the txn will not pop out when Gas limit reached during the mining exec. Geth will pop out. So i think it's a bug",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254732442/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254744295",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254744295",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254744295,
    "node_id": "IC_kwDOC0FsAM5KyeDn",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T09:09:05Z",
    "updated_at": "2022-09-22T09:10:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "> The way I'd see it would be:\r\n> \r\n> * no flag set, unlimited transactions allowed but capped at gas limit\r\n> * flag set, transactions capped at gas limit or by the flag set by the user\r\n> \r\n> ^ unlimited in this case would be uint16 maximum number\r\n\r\nit can pick more txns from txpool, but in mining exec, Txns should be filtered when GasLimit reached. Obviously erigon didn't. \r\n\r\n```\r\n[INFO] [09-22|08:40:52.548] [5/5 MiningFinish] block ready for seal  block_num=1342 transactions=3462 gas_used=283505560 gas_limit=200000000 difficulty=1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254744295/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254746029",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254746029",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254746029,
    "node_id": "IC_kwDOC0FsAM5Kyeet",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T09:10:41Z",
    "updated_at": "2022-09-22T09:10:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > The way I'd see it would be:\r\n> > \r\n> > * no flag set, unlimited transactions allowed but capped at gas limit\r\n> > * flag set, transactions capped at gas limit or by the flag set by the user\r\n> > \r\n> > ^ unlimited in this case would be uint16 maximum number\r\n> \r\n> it can pick more txns from txpool, but in mining exec, Txns should be filtered when GasLimit reached. Obviously erigon didn't.\r\n> \r\n> ```\r\n> [INFO] [09-22|08:40:52.548] [5/5 MiningFinish] block ready for seal  block_num=1342 transactions=3462 gas_used=283505560 gas_limit=200000000 difficulty=1\r\n> ```\r\n\r\nMaybe @AskAlexSharov can help us?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254746029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254752719",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254752719",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254752719,
    "node_id": "IC_kwDOC0FsAM5KygHP",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T09:16:28Z",
    "updated_at": "2022-09-22T09:16:28Z",
    "author_association": "COLLABORATOR",
    "body": "In my head: \r\n- mined block does apply to current state\r\n- after apply it send event to txpoolÂ \r\n- at this time txpool pop txs (which are in this mined block) - see `removeMined()` func\r\n\r\nIf you want to pop transactions earlier - right after block construction - likely you need some method in TxPool for this",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254752719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254778595",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1254778595",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1254778595,
    "node_id": "IC_kwDOC0FsAM5Kymbj",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-22T09:39:30Z",
    "updated_at": "2022-09-22T09:42:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> In my head:\r\n> \r\n> * mined block does apply to current state\r\n> * after apply it send event to txpool\r\n> * at this time txpool pop txs (which are in this mined block) - see `removeMined()` func\r\n> \r\n> If you want to pop transactions earlier - right after block construction - likely you need some method in TxPool for this\r\n\r\nI find the reason why it occurs.\r\n\r\n```\r\n\t// BSC always gave gas bailout due to system transactions that set 2^256/2 gas limit and\r\n\t// for Parlia consensus this flag should be always be set\r\n\tif st.isParlia {\r\n\t\tgasBailout = true\r\n\t}\r\n\r\n....\r\n\tif err := st.gp.SubGas(st.msg.Gas()); err != nil {\r\n\t\tif !gasBailout {\r\n\t\t\treturn err\r\n\t\t}\r\n\t}\r\n```\r\nIt will not return err in bsc.\r\n\r\nthen in mining exec stage, it will not pop the txns.\r\n\r\n```\r\n\t\t// Start executing the transaction\r\n\t\tlogs, err := miningCommitTx(txn, coinbase, vmConfig, chainConfig, ibs, current)\r\n\r\n\t\tif errors.Is(err, core.ErrGasLimitReached) {\r\n\t\t\t// Pop the env out-of-gas transaction without shifting in the next from the account\r\n\t\t\tlog.Debug(fmt.Sprintf(\"[%s] Gas limit exceeded for env block\", logPrefix), \"hash\", txn.Hash(), \"sender\", from)\r\n\t\t\ttxs.Pop()\r\n\t\t}\r\n```\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1254778595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1265496184",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1265496184",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1265496184,
    "node_id": "IC_kwDOC0FsAM5LbfB4",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-03T14:06:03Z",
    "updated_at": "2022-10-03T14:06:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "So I've got some code changes in flight from Erigon to take in a new flag to control maximum amount of TXs in a block, nothing exciting other than these lines in `stage_mining_create_block.go` which use the config value if set or just use the default 1000 TX limit hard coded:\r\n```\r\n\tif err = cfg.txPool2DB.View(context.Background(), func(poolTx kv.Tx) error {\r\n\t\ttxSlots := types2.TxsRlp{}\r\n\t\ttxLimit := maxTransactions\r\n\t\tif cfg.miner.MiningConfig.TxLimit != 0 {\r\n\t\t\ttxLimit = uint16(cfg.miner.MiningConfig.TxLimit)\r\n\t\t}\r\n\t\tif err := cfg.txPool2.Best(txLimit, &txSlots, poolTx); err != nil {\r\n\t\t\treturn err\r\n\t\t}\r\n```\r\n\r\nIn Erigon lib the call to `Best` in the txpool looks like it could be a good place to handle gas limits, we're already skipping transactions with really large gas here anyway, edited code:\r\n```\r\nfunc (p *TxPool) Best(n uint16, txs *types.TxsRlp, tx kv.Tx) error {\r\n\tp.lock.RLock()\r\n\tdefer p.lock.RUnlock()\r\n\r\n\ttxs.Resize(uint(cmp.Min(int(n), len(p.pending.best.ms))))\r\n\r\n\tvar gasCum uint64 = 0\r\n\tbest := p.pending.best\r\n\tj := 0\r\n\tfor i := 0; j < int(n) && i < len(best.ms); i++ {\r\n\t\tmt := best.ms[i]\r\n\t\tif mt.Tx.Gas >= p.blockGasLimit.Load() {\r\n\t\t\t// Skip transactions with very large gas limit\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\tif gasCum+mt.Tx.Gas >= p.blockGasLimit.Load() {\r\n\t\t\t// transactions would exceed the gas limit so continue, we might find a smaller\r\n\t\t\t// transaction that would fit so need to continue rather than break\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\tgasCum += mt.Tx.Gas\r\n\t\trlpTx, sender, isLocal, err := p.getRlpLocked(tx, mt.Tx.IDHash[:])\r\n\t\tif err != nil {\r\n\t\t\treturn err\r\n\t\t}\r\n\t\tif len(rlpTx) == 0 {\r\n\t\t\tp.pending.Remove(mt)\r\n\t\t\tcontinue\r\n\t\t}\r\n\t\ttxs.Txs[j] = rlpTx\r\n\t\tcopy(txs.Senders.At(j), sender)\r\n\t\ttxs.IsLocal[j] = isLocal\r\n\t\tj++\r\n\t}\r\n\ttxs.Resize(uint(j))\r\n\treturn nil\r\n}\r\n\r\n```\r\n\r\nbasically take a cumulative count of gas as we grab transactions and when getting close to exceeding the limit we continue on trying to find smaller transactions that would fit into the block.  So in theory get as close to the gas limit as we can but don't exceed the maximum number of transactions.....\r\n\r\nAny thoughts @AskAlexSharov?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1265496184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1272204914",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1272204914",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1272204914,
    "node_id": "IC_kwDOC0FsAM5L1E5y",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-08T02:43:44Z",
    "updated_at": "2022-10-08T02:43:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "But we can't get the real gas used in Txpool, except in the execution stage. @hexoscott ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1272204914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1273238346",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1273238346",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1273238346,
    "node_id": "IC_kwDOC0FsAM5L5BNK",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-10T12:26:48Z",
    "updated_at": "2022-10-10T12:26:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, that shows my lack of understanding there... I saw the line checking for a TX with gas over the gas limit and continuing and made an incorrect assumption, makes sense now though considering multiple transactions for the same account and other logic in the execution phase.  Will continue having a look into the chicken/egg problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1273238346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1332223014",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1332223014",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1332223014,
    "node_id": "IC_kwDOC0FsAM5PaBwm",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-30T14:21:26Z",
    "updated_at": "2022-11-30T14:21:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Raised PR #6160 to tackle this",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1332223014/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1341064209",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1341064209",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1341064209,
    "node_id": "IC_kwDOC0FsAM5P7wQR",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-07T14:39:45Z",
    "updated_at": "2022-12-07T14:39:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @fynn-z, a long time in the making, but in devel there is a fix for this hopefully now.  Transactions are pulled 50 at a time in the execution phase and run until the block is out of gas or the CL wants the block back, whichever comes first.  We're looking at testing this our side, but if you wanted to check it our yourself it's there for you.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1341064209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1341840739",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1341840739",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1341840739,
    "node_id": "IC_kwDOC0FsAM5P-t1j",
    "user": {
      "login": "Fynes",
      "id": 11804958,
      "node_id": "MDQ6VXNlcjExODA0OTU4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11804958?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Fynes",
      "html_url": "https://github.com/Fynes",
      "followers_url": "https://api.github.com/users/Fynes/followers",
      "following_url": "https://api.github.com/users/Fynes/following{/other_user}",
      "gists_url": "https://api.github.com/users/Fynes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Fynes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Fynes/subscriptions",
      "organizations_url": "https://api.github.com/users/Fynes/orgs",
      "repos_url": "https://api.github.com/users/Fynes/repos",
      "events_url": "https://api.github.com/users/Fynes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Fynes/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T01:22:54Z",
    "updated_at": "2022-12-08T01:22:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Hi @fynn-z, a long time in the making, but in devel there is a fix for this hopefully now. Transactions are pulled 50 at a time in the execution phase and run until the block is out of gas or the CL wants the block back, whichever comes first. We're looking at testing this our side, but if you wanted to check it our yourself it's there for you.\r\n\r\nGood job @hexoscott. I'll check later based on your PR.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1341840739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1342257983",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5435#issuecomment-1342257983",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5435",
    "id": 1342257983,
    "node_id": "IC_kwDOC0FsAM5QATs_",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-08T08:24:06Z",
    "updated_at": "2022-12-08T08:24:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "There were some follow up PRs to fix some issues in the original work so worth checking those out too.  All in devel now.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1342257983/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

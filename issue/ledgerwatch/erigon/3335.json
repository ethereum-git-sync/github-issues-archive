{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/3335",
  "id": 1112018510,
  "node_id": "I_kwDOC0FsAM5CSA5O",
  "number": 3335,
  "title": "eth_getTransactionByHash on unknown transaction causes error",
  "user": {
    "login": "mikeshultz",
    "id": 1048089,
    "node_id": "MDQ6VXNlcjEwNDgwODk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1048089?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mikeshultz",
    "html_url": "https://github.com/mikeshultz",
    "followers_url": "https://api.github.com/users/mikeshultz/followers",
    "following_url": "https://api.github.com/users/mikeshultz/following{/other_user}",
    "gists_url": "https://api.github.com/users/mikeshultz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mikeshultz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mikeshultz/subscriptions",
    "organizations_url": "https://api.github.com/users/mikeshultz/orgs",
    "repos_url": "https://api.github.com/users/mikeshultz/repos",
    "events_url": "https://api.github.com/users/mikeshultz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mikeshultz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 17,
  "created_at": "2022-01-23T23:30:56Z",
  "updated_at": "2022-07-16T09:15:26Z",
  "closed_at": "2022-07-16T09:15:25Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `2021.11.3-alpha`\r\n\r\nOS & Version: Linux\r\n\r\nCommit hash : 9c1b5f8f0cd3a89a9f763c7b66737ea1c9256e20\r\n\r\n#### Expected behaviour\r\n\r\n    $ curl -v -X POST -H 'Content-Type: application/json' --data '{ \"id\": 123, \"method\": \"eth_getTransactionByHash\", \"params\": [\"0x16c55d9e9ca5b673cafaa112195a5ad78ceb104e612ff2afbf34c233d6e7482b\"] }' http://localhost:8545/\r\n    {\r\n        \"jsonrpc\": \"2.0\",\r\n        \"id\": 123,\r\n        \"result\": null\r\n    }\r\n\r\n#### Actual behaviour\r\n\r\n    $ curl -v -X POST -H 'Content-Type: application/json' --data '{ \"id\": 123, \"method\": \"eth_getTransactionByHash\", \"params\": [\"0x16c55d9e9ca5b673cafaa112195a5ad78ceb104e612ff2afbf34c233d6e7482b\"] }' http://localhost:8545/\r\n    {\r\n        \"jsonrpc\": \"2.0\",\r\n        \"id\": 123,\r\n        \"error\":\r\n        {\r\n            \"code\": -32000,\r\n            \"message\": \"rpc error: code = Internal desc = grpc: error while marshaling: proto: Marshal called with nil\"\r\n        }\r\n    }\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n    $ curl -v -X POST -H 'Content-Type: application/json' --data '{ \"id\": 123, \"method\": \"eth_getTransactionByHash\", \"params\": [\"0x16c55d9e9ca5b673cafaa112195a5ad78ceb104e612ff2afbf34c233d6e7482b\"] }' http://localhost:8545/\r\n\r\n#### Backtrace\r\n\r\nNo crash so trace, but here's logs:\r\n\r\n    Jan 23 16:32:21 node erigon[141748]: 2022/01/23 16:32:21 ERROR: [core] grpc: server failed to encode response:  rpc error: code = Internal desc = grpc: error while marshaling: proto: Marshal called with nil\r\n    Jan 23 16:32:21 node rpcdaemon[142028]: [WARN] [01-23|16:32:21.602] Served                                   conn=127.0.0.1:44192 method=eth_getTransactionByHash reqid=123 t=771.081Âµs err=\"rpc error: code = Internal desc = grpc: error while marshaling: proto: Marshal called with nil\"",
  "closed_by": {
    "login": "mandrigin",
    "id": 466427,
    "node_id": "MDQ6VXNlcjQ2NjQyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mandrigin",
    "html_url": "https://github.com/mandrigin",
    "followers_url": "https://api.github.com/users/mandrigin/followers",
    "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
    "organizations_url": "https://api.github.com/users/mandrigin/orgs",
    "repos_url": "https://api.github.com/users/mandrigin/repos",
    "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mandrigin/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1019592949",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1019592949",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1019592949,
    "node_id": "IC_kwDOC0FsAM48xcD1",
    "user": {
      "login": "mikeshultz",
      "id": 1048089,
      "node_id": "MDQ6VXNlcjEwNDgwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1048089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeshultz",
      "html_url": "https://github.com/mikeshultz",
      "followers_url": "https://api.github.com/users/mikeshultz/followers",
      "following_url": "https://api.github.com/users/mikeshultz/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeshultz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeshultz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeshultz/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeshultz/orgs",
      "repos_url": "https://api.github.com/users/mikeshultz/repos",
      "events_url": "https://api.github.com/users/mikeshultz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeshultz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T23:38:45Z",
    "updated_at": "2022-01-23T23:38:45Z",
    "author_association": "NONE",
    "body": "This may also occur with local transactions in the txpool (but I'm not sure of a way to confirm this using another method than this RPC endpoint).",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1019592949/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1023696310",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1023696310",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1023696310,
    "node_id": "IC_kwDOC0FsAM49BF22",
    "user": {
      "login": "enriavil1",
      "id": 19207637,
      "node_id": "MDQ6VXNlcjE5MjA3NjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19207637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enriavil1",
      "html_url": "https://github.com/enriavil1",
      "followers_url": "https://api.github.com/users/enriavil1/followers",
      "following_url": "https://api.github.com/users/enriavil1/following{/other_user}",
      "gists_url": "https://api.github.com/users/enriavil1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enriavil1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enriavil1/subscriptions",
      "organizations_url": "https://api.github.com/users/enriavil1/orgs",
      "repos_url": "https://api.github.com/users/enriavil1/repos",
      "events_url": "https://api.github.com/users/enriavil1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enriavil1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T22:21:52Z",
    "updated_at": "2022-01-27T22:21:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "What erigon branch are you using? I put in a fix in devel, which will return nil if the tx pool doesn't find the tx hash.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1023696310/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1023701031",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1023701031",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1023701031,
    "node_id": "IC_kwDOC0FsAM49BHAn",
    "user": {
      "login": "enriavil1",
      "id": 19207637,
      "node_id": "MDQ6VXNlcjE5MjA3NjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19207637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enriavil1",
      "html_url": "https://github.com/enriavil1",
      "followers_url": "https://api.github.com/users/enriavil1/followers",
      "following_url": "https://api.github.com/users/enriavil1/following{/other_user}",
      "gists_url": "https://api.github.com/users/enriavil1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enriavil1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enriavil1/subscriptions",
      "organizations_url": "https://api.github.com/users/enriavil1/orgs",
      "repos_url": "https://api.github.com/users/enriavil1/repos",
      "events_url": "https://api.github.com/users/enriavil1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enriavil1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T22:29:10Z",
    "updated_at": "2022-01-27T22:29:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is the commit where it avoid that error ef180848f0c01c58351233eb535f975f2fd14a54\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1023701031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030741851",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030741851",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030741851,
    "node_id": "IC_kwDOC0FsAM49b99b",
    "user": {
      "login": "mikeshultz",
      "id": 1048089,
      "node_id": "MDQ6VXNlcjEwNDgwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1048089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeshultz",
      "html_url": "https://github.com/mikeshultz",
      "followers_url": "https://api.github.com/users/mikeshultz/followers",
      "following_url": "https://api.github.com/users/mikeshultz/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeshultz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeshultz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeshultz/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeshultz/orgs",
      "repos_url": "https://api.github.com/users/mikeshultz/repos",
      "events_url": "https://api.github.com/users/mikeshultz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeshultz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T03:08:32Z",
    "updated_at": "2022-02-06T03:08:32Z",
    "author_association": "NONE",
    "body": "Sorry for the delay.\r\n\r\n> What erigon branch are you using? I put in a fix in devel, which will return nil if the tx pool doesn't find the tx hash.\r\n\r\n@enriavil1  I've been running off devel and my current build includes the commit you referenced.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030741851/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030743544",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030743544",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030743544,
    "node_id": "IC_kwDOC0FsAM49b-X4",
    "user": {
      "login": "mikeshultz",
      "id": 1048089,
      "node_id": "MDQ6VXNlcjEwNDgwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1048089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeshultz",
      "html_url": "https://github.com/mikeshultz",
      "followers_url": "https://api.github.com/users/mikeshultz/followers",
      "following_url": "https://api.github.com/users/mikeshultz/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeshultz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeshultz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeshultz/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeshultz/orgs",
      "repos_url": "https://api.github.com/users/mikeshultz/repos",
      "events_url": "https://api.github.com/users/mikeshultz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeshultz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T03:25:19Z",
    "updated_at": "2022-02-06T03:25:19Z",
    "author_association": "NONE",
    "body": "Updated to `erigon version 2022.99.99-dev` (2cc49f454ffecd9e17d5b04c1cd68b393cd0bbe7) and same behavior.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030743544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030773308",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030773308",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030773308,
    "node_id": "IC_kwDOC0FsAM49cFo8",
    "user": {
      "login": "enriavil1",
      "id": 19207637,
      "node_id": "MDQ6VXNlcjE5MjA3NjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19207637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enriavil1",
      "html_url": "https://github.com/enriavil1",
      "followers_url": "https://api.github.com/users/enriavil1/followers",
      "following_url": "https://api.github.com/users/enriavil1/following{/other_user}",
      "gists_url": "https://api.github.com/users/enriavil1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enriavil1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enriavil1/subscriptions",
      "organizations_url": "https://api.github.com/users/enriavil1/orgs",
      "repos_url": "https://api.github.com/users/enriavil1/repos",
      "events_url": "https://api.github.com/users/enriavil1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enriavil1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T08:05:35Z",
    "updated_at": "2022-02-06T08:05:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Updated to `erigon version 2022.99.99-dev` (2cc49f454ffecd9e17d5b04c1cd68b393cd0bbe7) and same behavior.\n\nWhich chain are you using, so I could try recreating the issue. Only suggestion I have is to try it on stable.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030773308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030887937",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030887937",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030887937,
    "node_id": "IC_kwDOC0FsAM49choB",
    "user": {
      "login": "mikeshultz",
      "id": 1048089,
      "node_id": "MDQ6VXNlcjEwNDgwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1048089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeshultz",
      "html_url": "https://github.com/mikeshultz",
      "followers_url": "https://api.github.com/users/mikeshultz/followers",
      "following_url": "https://api.github.com/users/mikeshultz/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeshultz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeshultz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeshultz/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeshultz/orgs",
      "repos_url": "https://api.github.com/users/mikeshultz/repos",
      "events_url": "https://api.github.com/users/mikeshultz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeshultz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T18:29:18Z",
    "updated_at": "2022-02-06T18:29:18Z",
    "author_association": "NONE",
    "body": "Ethereum mainnet, nothing fancy.  Have you tried my curl repro above?  It's a hash that doesn't exist, and I'd imagine would cause the same error.  If you can't reproduce it, I'll try a completely clean clone and build from devel. \r\n\r\nNot sure about moving to stable.  Wouldn't that potentially cause issues due to migrations run or other DB incompatibilities?  I'd prefer not to have to resync if I can avoid it.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030887937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030911890",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030911890",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030911890,
    "node_id": "IC_kwDOC0FsAM49cneS",
    "user": {
      "login": "enriavil1",
      "id": 19207637,
      "node_id": "MDQ6VXNlcjE5MjA3NjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19207637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enriavil1",
      "html_url": "https://github.com/enriavil1",
      "followers_url": "https://api.github.com/users/enriavil1/followers",
      "following_url": "https://api.github.com/users/enriavil1/following{/other_user}",
      "gists_url": "https://api.github.com/users/enriavil1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enriavil1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enriavil1/subscriptions",
      "organizations_url": "https://api.github.com/users/enriavil1/orgs",
      "repos_url": "https://api.github.com/users/enriavil1/repos",
      "events_url": "https://api.github.com/users/enriavil1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enriavil1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T20:51:37Z",
    "updated_at": "2022-02-06T20:51:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'll check it out, but syncing would take a while for me. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030911890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030913016",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030913016",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030913016,
    "node_id": "IC_kwDOC0FsAM49cnv4",
    "user": {
      "login": "enriavil1",
      "id": 19207637,
      "node_id": "MDQ6VXNlcjE5MjA3NjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19207637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enriavil1",
      "html_url": "https://github.com/enriavil1",
      "followers_url": "https://api.github.com/users/enriavil1/followers",
      "following_url": "https://api.github.com/users/enriavil1/following{/other_user}",
      "gists_url": "https://api.github.com/users/enriavil1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enriavil1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enriavil1/subscriptions",
      "organizations_url": "https://api.github.com/users/enriavil1/orgs",
      "repos_url": "https://api.github.com/users/enriavil1/repos",
      "events_url": "https://api.github.com/users/enriavil1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enriavil1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T20:58:41Z",
    "updated_at": "2022-02-06T20:58:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I believe id should be 1 so the call should look something like this \r\n`curl -s --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getTransactionByHash\",\"params\":[\"0xb2fea9c4b24775af6990237aa90228e5e092c56bdaee74496992a53c208da1ee\"],\"id\":\"1\"}' -H \"Content-Type: application/json\" -X POST http://localhost:8545`",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030913016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030938764",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1030938764",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1030938764,
    "node_id": "IC_kwDOC0FsAM49cuCM",
    "user": {
      "login": "mikeshultz",
      "id": 1048089,
      "node_id": "MDQ6VXNlcjEwNDgwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1048089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mikeshultz",
      "html_url": "https://github.com/mikeshultz",
      "followers_url": "https://api.github.com/users/mikeshultz/followers",
      "following_url": "https://api.github.com/users/mikeshultz/following{/other_user}",
      "gists_url": "https://api.github.com/users/mikeshultz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mikeshultz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mikeshultz/subscriptions",
      "organizations_url": "https://api.github.com/users/mikeshultz/orgs",
      "repos_url": "https://api.github.com/users/mikeshultz/repos",
      "events_url": "https://api.github.com/users/mikeshultz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mikeshultz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-06T23:22:13Z",
    "updated_at": "2022-02-06T23:22:13Z",
    "author_association": "NONE",
    "body": "`id` in JSON-RPC is arbitrary and generally only used to match a response to a request.  It should not have any affect on what response is given.  \r\n\r\nI tried it anyway and included the version (`\"jsonrpc\": \"2.0\"`) to no effect.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1030938764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1049980784",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1049980784",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1049980784,
    "node_id": "IC_kwDOC0FsAM4-lW9w",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-24T15:33:34Z",
    "updated_at": "2022-02-24T15:33:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "@enriavil1 I have been just reviewing this. I think the `nil` transaction is actually happening here: https://github.com/ledgerwatch/erigon-lib/blob/2fc62cd2f54e77751e64d1e88c55dbd94c0f7017/txpool/grpc_server.go#L268\r\n\r\nI saw the clue in the error message, taking about `proto`, to suggest it was not JSON marshalling, but GRPC (protobuf) marshalling that causes the issues. Another clue is that it appears in the Erigon log, not RPC daemon log",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1049980784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1133775999",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1133775999",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1133775999,
    "node_id": "IC_kwDOC0FsAM5DlAx_",
    "user": {
      "login": "gfxlabs",
      "id": 86091021,
      "node_id": "MDQ6VXNlcjg2MDkxMDIx",
      "avatar_url": "https://avatars.githubusercontent.com/u/86091021?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gfxlabs",
      "html_url": "https://github.com/gfxlabs",
      "followers_url": "https://api.github.com/users/gfxlabs/followers",
      "following_url": "https://api.github.com/users/gfxlabs/following{/other_user}",
      "gists_url": "https://api.github.com/users/gfxlabs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gfxlabs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gfxlabs/subscriptions",
      "organizations_url": "https://api.github.com/users/gfxlabs/orgs",
      "repos_url": "https://api.github.com/users/gfxlabs/repos",
      "events_url": "https://api.github.com/users/gfxlabs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gfxlabs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-21T22:13:40Z",
    "updated_at": "2022-05-21T22:13:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "i'm still getting this issue on v2022.05.04\r\n\r\nmore specifically, \r\n```method=eth_getTransactionByHash reqid=12 t=3.829001ms err=\"rpc error: code = Internal desc = grpc: error while marshaling: proto: Marshal called with nil\"``` \r\non the rpcdaemon logs  and \r\n```2022/05/21 21:39:38 ERROR: [core] [Server #1] grpc: server failed to encode response: rpc error: code = Internal desc = grpc: error while marshaling: proto: Marshal called with nil``` \r\non the erigon logs. this is my ropsten node.\r\n\r\nso it's something with the grpc marshaling, but im not 100% sure if the patch fixed it?\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1133775999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141108795",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1141108795",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1141108795,
    "node_id": "IC_kwDOC0FsAM5EA_A7",
    "user": {
      "login": "KaiRo-at",
      "id": 824140,
      "node_id": "MDQ6VXNlcjgyNDE0MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KaiRo-at",
      "html_url": "https://github.com/KaiRo-at",
      "followers_url": "https://api.github.com/users/KaiRo-at/followers",
      "following_url": "https://api.github.com/users/KaiRo-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/KaiRo-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KaiRo-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KaiRo-at/subscriptions",
      "organizations_url": "https://api.github.com/users/KaiRo-at/orgs",
      "repos_url": "https://api.github.com/users/KaiRo-at/repos",
      "events_url": "https://api.github.com/users/KaiRo-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KaiRo-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-30T12:37:44Z",
    "updated_at": "2022-05-30T12:37:44Z",
    "author_association": "NONE",
    "body": "@AlexeyAkhunov it looks like this regressed recently, I guess with the changes that also moved from beta to alpha. From what I remember, the beta versions gave a correct response there but now we are seeing this issue.\r\nWe have even seen it when Web3.py is waiting for a receipt for a transaction it just posted (I guess it just polls for the transaction by hash there), which is actually breaking code as it errors out instead of waiting longer when a transaction has not been included yet.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141108795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141182548",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1141182548",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1141182548,
    "node_id": "IC_kwDOC0FsAM5EBRBU",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-30T13:48:52Z",
    "updated_at": "2022-05-30T13:48:52Z",
    "author_association": "COLLABORATOR",
    "body": "@KaiRo-at what is your erigon version?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141182548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141211553",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1141211553",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1141211553,
    "node_id": "IC_kwDOC0FsAM5EBYGh",
    "user": {
      "login": "KaiRo-at",
      "id": 824140,
      "node_id": "MDQ6VXNlcjgyNDE0MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KaiRo-at",
      "html_url": "https://github.com/KaiRo-at",
      "followers_url": "https://api.github.com/users/KaiRo-at/followers",
      "following_url": "https://api.github.com/users/KaiRo-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/KaiRo-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KaiRo-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KaiRo-at/subscriptions",
      "organizations_url": "https://api.github.com/users/KaiRo-at/orgs",
      "repos_url": "https://api.github.com/users/KaiRo-at/repos",
      "events_url": "https://api.github.com/users/KaiRo-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KaiRo-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-30T14:16:48Z",
    "updated_at": "2022-05-30T15:09:49Z",
    "author_association": "NONE",
    "body": "> @KaiRo-at what is your erigon version?\r\n\r\nThis was on v2022.05.06, I haven't tested on .05.08 yet as that one keeps crashing every hour or so on our Goerli test machine (but that crash is probably unrelated - actually, seems to match https://github.com/ledgerwatch/erigon/issues/4240#issuecomment-1141001609 so hopefully fixed in next release).",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141211553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141288042",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1141288042",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1141288042,
    "node_id": "IC_kwDOC0FsAM5EBqxq",
    "user": {
      "login": "KaiRo-at",
      "id": 824140,
      "node_id": "MDQ6VXNlcjgyNDE0MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/824140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/KaiRo-at",
      "html_url": "https://github.com/KaiRo-at",
      "followers_url": "https://api.github.com/users/KaiRo-at/followers",
      "following_url": "https://api.github.com/users/KaiRo-at/following{/other_user}",
      "gists_url": "https://api.github.com/users/KaiRo-at/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/KaiRo-at/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/KaiRo-at/subscriptions",
      "organizations_url": "https://api.github.com/users/KaiRo-at/orgs",
      "repos_url": "https://api.github.com/users/KaiRo-at/repos",
      "events_url": "https://api.github.com/users/KaiRo-at/events{/privacy}",
      "received_events_url": "https://api.github.com/users/KaiRo-at/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-30T15:36:15Z",
    "updated_at": "2022-05-30T15:36:15Z",
    "author_association": "NONE",
    "body": "And it looks like it's probably fine again in v2022.05.08, actually :)",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1141288042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1186128668",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3335#issuecomment-1186128668",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3335",
    "id": 1186128668,
    "node_id": "IC_kwDOC0FsAM5GsuMc",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-16T09:15:25Z",
    "updated_at": "2022-07-16T09:15:25Z",
    "author_association": "COLLABORATOR",
    "body": "closing this one, if that behaviour repeats please reopen",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1186128668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

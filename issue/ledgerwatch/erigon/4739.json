{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4739",
  "id": 1308618311,
  "node_id": "I_kwDOC0FsAM5N_-5H",
  "number": 4739,
  "title": "eth_estimateGas sporadically returns 0 on a custom testnet (DEV_CHAIN)",
  "user": {
    "login": "zippoxer",
    "id": 859015,
    "node_id": "MDQ6VXNlcjg1OTAxNQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/859015?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zippoxer",
    "html_url": "https://github.com/zippoxer",
    "followers_url": "https://api.github.com/users/zippoxer/followers",
    "following_url": "https://api.github.com/users/zippoxer/following{/other_user}",
    "gists_url": "https://api.github.com/users/zippoxer/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zippoxer/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zippoxer/subscriptions",
    "organizations_url": "https://api.github.com/users/zippoxer/orgs",
    "repos_url": "https://api.github.com/users/zippoxer/repos",
    "events_url": "https://api.github.com/users/zippoxer/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zippoxer/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-07-18T20:57:55Z",
  "updated_at": "2022-08-04T17:44:17Z",
  "closed_at": "2022-08-04T17:44:16Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `erigon version 2022.07.2-alpha-c7a94eee`\r\n\r\nOS & Version: Linux & OSX\r\n\r\nReproduced with the version above, but also with a more recent commit hash: `58628999793ed22891f30bfe15c09a7b96b7b271`\r\n\r\n#### Expected behaviour\r\n\r\nRequest:\r\n```bash\r\ncurl -s -H \"Content-Type: application/json\" -X POST http://localhost:8545 \\\r\n  --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B\",\"from\":\"0x67b1d87101671b127f5f8714789C7192f7ad340e\",\"value\":\"0x1\"}],\"id\":\"1\"}'\r\n```\r\n\r\nExpected response:\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"id\":\"1\",\"result\":\"0x5208\"}\r\n```\r\n\r\n#### Actual behaviour\r\n\r\nSometimes I get this response:\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"id\":\"1\",\"result\":\"0x5208\"}\r\n```\r\n\r\nSometimes I get this reponse:\r\n```json\r\n{\"jsonrpc\":\"2.0\",\"id\":\"1\",\"result\":\"0x0\"}\r\n```\r\n\r\nThe response is correct in the first 2 or so blocks post-genesis, but then it starts to return `0x0` more often.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n1. * Option A: Spin up a single [DEV_CHAIN.md](https://github.com/ledgerwatch/erigon/blob/devel/DEV_CHAIN.md) node without rpcdaemon:\r\n\r\n    ```bash\r\n    ./build/bin/erigon --verbosity 5 --datadir ~/erigon-data --chain dev --private.api.addr=localhost:9090 --mine --dev.period 5\r\n    ```\r\n\r\n    * Option B: `erigon init` to initialize a custom testnet with a `genesis.json` file, then start an Erigon node for it.\r\n    *(This is my end goal, and currently this also reproduces the bug)*\r\n2. Wait for it to start.\r\n3. Call `eth_estimateGas` for a transfer from a pre-allocated dev address:\r\n    ```bash\r\n    curl -s -H \"Content-Type: application/json\" -X POST http://localhost:8545 \\\r\n      --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_estimateGas\",\"params\":[{\"to\":\"0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B\",\"from\":\"0x67b1d87101671b127f5f8714789C7192f7ad340e\",\"value\":\"0x1\"}],\"id\":\"1\"}'\r\n    ```\r\n\r\nBy the way, I reproduced the bug with `rpcdaemon` as well. However, if I don't pass it a `--private.api.addr`, then the bug is gone (it will always return the correct gas and without latency.)\r\n\r\nSo `rpcdaemon` reproduces this bug only when it has communication with the node. Could it be because it fails to query the \"pending\" block at which it should to estimate the gas?\r\n\r\n#### Backtrace\r\n\r\nI ran a DEV_CHAIN node and requested `eth_estimateGas` 3 times. The first 2 responses were `0x5208` (correct), but the 3rd was `0x0`, at which point I stopped the node.\r\n\r\nHere are the logs:\r\n````\r\nINFO[07-18|23:54:36.591] Build info                               git_branch=HEAD git_tag=v2022.07.02 git_commit=c7a94eeea05d7c0d569c811399642a7d108d8c82\r\nINFO[07-18|23:54:36.591] Starting Erigon in ephemeral dev mode... \r\nINFO[07-18|23:54:36.592] Maximum peer count                       ETH=100 total=100\r\nINFO[07-18|23:54:36.592] Development chain flags set              --nodiscover=true --v5disc=false --port=:0\r\nINFO[07-18|23:54:36.592] torrent verbosity                        level=2\r\nINFO[07-18|23:54:38.911] [torrent] Public IP                      ip=79.176.171.58\r\nINFO[07-18|23:54:38.911] Set global gas cap                       cap=50000000\r\nINFO[07-18|23:54:38.911] Using developer account                  address=0x67b1d87101671b127f5f8714789C7192f7ad340e\r\nINFO[07-18|23:54:38.911] Using custom developer period            seconds=5\r\nINFO[07-18|23:54:38.911] Opening Database                         label=chaindata path=/home/zippo/Downloads/erigon-datadir/chaindata\r\nINFO[07-18|23:54:38.919] Re-Opening DB in exclusive mode to apply migrations \r\nINFO[07-18|23:54:38.921] Apply migration                          name=db_schema_version5\r\nINFO[07-18|23:54:38.924] Applied migration                        name=db_schema_version5\r\nINFO[07-18|23:54:38.924] Apply migration                          name=txs_begin_end\r\nINFO[07-18|23:54:38.928] Applied migration                        name=txs_begin_end\r\nINFO[07-18|23:54:38.928] Apply migration                          name=reset_blocks_3\r\nINFO[07-18|23:54:38.928] Applied migration                        name=reset_blocks_3\r\nINFO[07-18|23:54:38.931] Updated DB schema to                     version=6.0.0\r\nINFO[07-18|23:54:38.942] Writing custom genesis block             hash=0xc493151b4991dd1bf459952509bba9bc3fb2b706299e18e36e6b78781835065d\r\nINFO[07-18|23:54:38.946] Initialised chain configuration          config=\"{ChainID: 1337, Homestead: 0, DAO: <nil>, DAO Support: false, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 0, Petersburg: 0, Istanbul: 0, Muir Glacier: 0, Berlin: 0, London: 0, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: <nil>, Engine: clique}\" genesis=0xc493151b4991dd1bf459952509bba9bc3fb2b706299e18e36e6b78781835065d\r\nINFO[07-18|23:54:38.946] Initialising Ethereum protocol           network=1337\r\nINFO[07-18|23:54:38.946] Using snapshots                          on=false\r\nINFO[07-18|23:54:38.946] Effective                                prune_flags= snapshot_flags=\r\nINFO[07-18|23:54:38.962] Starting private RPC server              on=localhost:9090\r\nINFO[07-18|23:54:38.962] new subscription to logs established \r\n[TRACE] [07-18|23:54:38.963] [Messages] new subscriber                to=\"[NEW_POOLED_TRANSACTION_HASHES_66 GET_POOLED_TRANSACTIONS_66 TRANSACTIONS_66 POOLED_TRANSACTIONS_66]\"\r\nINFO[07-18|23:54:38.963] rpc filters: subscribing to Erigon events \r\nINFO[07-18|23:54:38.963] New txs subscriber joined \r\nTraceRequests = false\r\nDBUG[07-18|23:54:38.963] Establishing event subscription channel with the RPC daemon ... \r\nINFO[07-18|23:54:38.963] new subscription to newHeaders established \r\nINFO[07-18|23:54:38.964] Reading JWT secret                       path=/home/zippo/Downloads/erigon-datadir/jwt.hex\r\nINFO[07-18|23:54:38.964] Generated JWT secret                     path=/home/zippo/Downloads/erigon-datadir/jwt.hex\r\nINFO[07-18|23:54:38.964] HTTP endpoint opened for Engine API      url=localhost:8551 ws=false\r\nINFO[07-18|23:54:38.964] HTTP endpoint opened                     url=localhost:8545 ws=false ws.compression=true grpc=false\r\n[TRACE] [07-18|23:54:38.972] TCP listener up                          addr=[::]:39593\r\n[TRACE] [07-18|23:54:38.972] [Messages] new subscriber                to=\"[GET_BLOCK_BODIES_66 GET_RECEIPTS_66]\"\r\nINFO[07-18|23:54:38.973] [txpool] Started \r\n[TRACE] [07-18|23:54:38.973] Translation disabled. Enable by adding `tevm` to --experiments \r\n[TRACE] [07-18|23:54:38.973] [14/16 TxLookup] Extraction finished     took=15.181µs\r\n[TRACE] [07-18|23:54:38.973] [14/16 TxLookup] ETL Load done           bucket=BlockTransactionLookup records=0\r\n[TRACE] [07-18|23:54:38.973] [14/16 TxLookup] Load finished           took=23.87µs\r\n[TRACE] [07-18|23:54:38.976] Prune...                                 stage=Finish\r\n[TRACE] [07-18|23:54:38.976] Prune...                                 stage=TxLookup\r\n[TRACE] [07-18|23:54:38.976] Prune...                                 stage=LogIndex\r\n[TRACE] [07-18|23:54:38.976] Prune...                                 stage=StorageHistoryIndex\r\n[TRACE] [07-18|23:54:38.976] Prune...                                 stage=AccountHistoryIndex\r\n[TRACE] [07-18|23:54:38.976] Prune...                                 stage=CallTraces\r\n[TRACE] [07-18|23:54:38.977] New local node record                    seq=1 id=db74f4033991e388cdef06c89650a39daf9685754ca7c861e1b6394381ce96a2 ip=127.0.0.1 udp=0 tcp=39593\r\nINFO[07-18|23:54:38.977] Started P2P networking                   version=66 self=\"enode://8658fa7b3ba136a077d87e82cfcdde53663135e934063a3d778db2754d6847523e54ee208307ff13e4401411fd6fb126d0537cac0d1479b89bd11da1f4bedd33@127.0.0.1:39593?discport=0\" name=erigon/v2022.07.2-alpha-c7a94eee/linux-amd64/go1.18.4\r\n[TRACE] [07-18|23:54:38.977] [Messages] new subscriber                to=\"[BLOCK_HEADERS_66 BLOCK_BODIES_66 NEW_BLOCK_HASHES_66 NEW_BLOCK_66]\"\r\n[TRACE] [07-18|23:54:38.977] [Messages] new subscriber                to=[GET_BLOCK_HEADERS_66]\r\n[TRACE] [07-18|23:54:38.978] Prune...                                 stage=HashState\r\n[TRACE] [07-18|23:54:38.978] Prune...                                 stage=IntermediateHashes\r\n[TRACE] [07-18|23:54:38.979] Prune...                                 stage=Execution\r\n[TRACE] [07-18|23:54:38.981] Prune...                                 stage=Senders\r\n[TRACE] [07-18|23:54:38.981] Prune...                                 stage=Bodies\r\n[TRACE] [07-18|23:54:38.981] Prune...                                 stage=BlockHashes\r\n[TRACE] [07-18|23:54:38.981] Prune...                                 stage=Headers\r\nINFO[07-18|23:54:38.981] RPC Daemon notified of new headers       from=0 to=1 header sending=13.181µs log sending=170ns\r\nINFO[07-18|23:54:38.981] [1/16 Headers] Waiting for headers...    from=0\r\n[TRACE] [07-18|23:54:38.981] Empty anchor queue \r\nDBUG[07-18|23:54:38.981] Request skeleton                         anchors=0 top seen height=0 highestInDb=0\r\nINFO[07-18|23:54:39.616] Mapped network port                      proto=tcp extport=39593 intport=39593 interface=\"UPNP IGDv1-IP1\"\r\n[TRACE] [07-18|23:54:39.982] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:39.982] Empty anchor queue \r\nDBUG[07-18|23:54:39.982] Request skeleton                         anchors=0 top seen height=0 highestInDb=0\r\n[TRACE] [07-18|23:54:40.983] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:40.983] Empty anchor queue \r\nDBUG[07-18|23:54:40.983] Request skeleton                         anchors=0 top seen height=0 highestInDb=0\r\nDBUG[07-18|23:54:41.968] [1/5 MiningCreateBlock] Candidate txs    amount=0\r\nINFO[07-18|23:54:41.968] [1/5 MiningCreateBlock] Start mine       block=1 baseFee=875000000 gasLimit=11511229\r\nINFO[07-18|23:54:41.971] [Clique] Stored checkpoint snapshot to disk number=0 hash=0xc493151b4991dd1bf459952509bba9bc3fb2b706299e18e36e6b78781835065d\r\n[TRACE] [07-18|23:54:41.971] [3/5 HashState] Extraction finished      took=25.471µs\r\n[TRACE] [07-18|23:54:41.971] [3/5 HashState] ETL Load done            bucket=HashedAccount records=11\r\n[TRACE] [07-18|23:54:41.972] [3/5 HashState] ETL Load done            bucket=HashedStorage records=0\r\n[TRACE] [07-18|23:54:41.972] [3/5 HashState] Load finished            took=66.092µs\r\n[TRACE] [07-18|23:54:41.972] [3/5 HashState] Extraction finished      took=6.841µs\r\n[TRACE] [07-18|23:54:41.972] [3/5 HashState] ETL Load done            bucket=HashedCodeHash records=0\r\n[TRACE] [07-18|23:54:41.972] [3/5 HashState] Load finished            took=16.37µs\r\nINFO[07-18|23:54:41.972] [4/5 IntermediateHashes] Regeneration trie hashes started \r\nINFO[07-18|23:54:41.972] [4/5 IntermediateHashes] Trie root       hash=0x6a0673c691edfa4c4528323986bb43c579316f436ff6f8b4ac70854bbd95340b\r\n[TRACE] [07-18|23:54:41.972] [4/5 IntermediateHashes] ETL Load done   bucket=TrieAccount records=2\r\n[TRACE] [07-18|23:54:41.972] [4/5 IntermediateHashes] ETL Load done   bucket=TrieStorage records=0\r\nINFO[07-18|23:54:41.972] [4/5 IntermediateHashes] Regeneration ended \r\n[TRACE] [07-18|23:54:41.972] Waiting for slot to sign and propagate   delay=-972.229ms\r\n[TRACE] [07-18|23:54:41.972] Link queue                               size=0\r\n[TRACE] [07-18|23:54:41.972] headerLoop woken up by the incoming request \r\n[TRACE] [07-18|23:54:41.972] Empty anchor queue \r\nDBUG[07-18|23:54:41.972] Request skeleton                         anchors=0 top seen height=0 highestInDb=0\r\nINFO[07-18|23:54:41.972] [1/16 Headers] Processed                 highest inserted=1 age=0\r\n[TRACE] [07-18|23:54:41.972] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:41.972] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:41.972] [3/16 BlockHashes] Extraction finished   took=8.69µs\r\n[TRACE] [07-18|23:54:41.972] [3/16 BlockHashes] ETL Load done         bucket=HeaderNumber records=2\r\n[TRACE] [07-18|23:54:41.972] [3/16 BlockHashes] Load finished         took=23.6µs\r\n[TRACE] [07-18|23:54:41.973] [5/16 Senders] Read canonical hashes     amount=1\r\n[TRACE] [07-18|23:54:41.973] [5/16 Senders] ETL Load done             bucket=TxSender records=1\r\n[TRACE] [07-18|23:54:41.973] [] ETL Load done                         bucket=SyncStage records=1\r\nINFO[07-18|23:54:41.973] [6/16 Execution] Completed on            block=1\r\n[TRACE] [07-18|23:54:41.973] Translation disabled. Enable by adding `tevm` to --experiments \r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] Extraction finished     took=14.33µs\r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] ETL Load done           bucket=HashedAccount records=11\r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] ETL Load done           bucket=HashedStorage records=0\r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] Load finished           took=21.591µs\r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] Extraction finished     took=2.24µs\r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] ETL Load done           bucket=HashedCodeHash records=0\r\n[TRACE] [07-18|23:54:41.973] [8/16 HashState] Load finished           took=8.051µs\r\nINFO[07-18|23:54:41.973] [9/16 IntermediateHashes] Regeneration trie hashes started \r\nINFO[07-18|23:54:41.973] [9/16 IntermediateHashes] Trie root      hash=0x6a0673c691edfa4c4528323986bb43c579316f436ff6f8b4ac70854bbd95340b\r\n[TRACE] [07-18|23:54:41.973] [9/16 IntermediateHashes] ETL Load done  bucket=TrieAccount records=2\r\n[TRACE] [07-18|23:54:41.973] [9/16 IntermediateHashes] ETL Load done  bucket=TrieStorage records=0\r\nINFO[07-18|23:54:41.973] [9/16 IntermediateHashes] Regeneration ended \r\n[TRACE] [07-18|23:54:41.973] [10/16 CallTraces] ETL Load done         bucket=CallFromIndex records=0\r\n[TRACE] [07-18|23:54:41.973] [10/16 CallTraces] ETL Load done         bucket=CallToIndex records=1\r\n[TRACE] [07-18|23:54:41.973] [11/16 AccountHistoryIndex] ETL Load done bucket=AccountHistory records=11\r\n[TRACE] [07-18|23:54:41.973] [12/16 StorageHistoryIndex] ETL Load done bucket=StorageHistory records=0\r\n[TRACE] [07-18|23:54:41.973] [13/16 LogIndex] ETL Load done           bucket=LogTopicIndex records=0\r\n[TRACE] [07-18|23:54:41.973] [13/16 LogIndex] ETL Load done           bucket=LogAddressIndex records=0\r\n[TRACE] [07-18|23:54:41.973] [14/16 TxLookup] Extraction finished     took=9.84µs\r\n[TRACE] [07-18|23:54:41.973] [14/16 TxLookup] ETL Load done           bucket=BlockTransactionLookup records=0\r\n[TRACE] [07-18|23:54:41.973] [14/16 TxLookup] Load finished           took=8.221µs\r\n[TRACE] [07-18|23:54:41.973] Prune...                                 stage=Finish\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=TxLookup\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=LogIndex\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=StorageHistoryIndex\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=AccountHistoryIndex\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=CallTraces\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=HashState\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=IntermediateHashes\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=Execution\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=Senders\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=Bodies\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=BlockHashes\r\n[TRACE] [07-18|23:54:41.974] Prune...                                 stage=Headers\r\nINFO[07-18|23:54:41.974] Timings (slower than 50ms)               Headers=2.991s\r\nINFO[07-18|23:54:41.974] Tables                                   PlainState=4.0KB AccountChangeSet=4.0KB StorageChangeSet=0B BlockTransaction=0B TransactionLog=0B FreeList=4.0KB ReclaimableSpace=4.0MB\r\nINFO[07-18|23:54:41.979] Commit cycle                             in=5.109094ms\r\nINFO[07-18|23:54:41.979] RPC Daemon notified of new headers       from=0 to=1 header sending=4.99µs log sending=150ns\r\nINFO[07-18|23:54:41.979] [1/16 Headers] Waiting for headers...    from=1\r\n[TRACE] [07-18|23:54:41.979] Empty anchor queue \r\nDBUG[07-18|23:54:41.979] Request skeleton                         anchors=0 top seen height=0 highestInDb=1\r\n[TRACE] [07-18|23:54:42.979] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:42.979] Empty anchor queue \r\nDBUG[07-18|23:54:42.979] Request skeleton                         anchors=0 top seen height=0 highestInDb=1\r\n[TRACE] [07-18|23:54:43.057] Served                                   conn=127.0.0.1:46676 t=1.170672936s method=eth_estimateGas reqid=1 params=\"[{\\\"to\\\":\\\"0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B\\\",\\\"from\\\":\\\"0x67b1d87101671b127f5f8714789C7192f7ad340e\\\",\\\"value\\\":\\\"0x1\\\"}]\"\r\n[TRACE] [07-18|23:54:43.980] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:43.980] Empty anchor queue \r\nDBUG[07-18|23:54:43.980] Request skeleton                         anchors=0 top seen height=0 highestInDb=1\r\n[TRACE] [07-18|23:54:44.980] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:44.980] Empty anchor queue \r\nDBUG[07-18|23:54:44.980] Request skeleton                         anchors=0 top seen height=0 highestInDb=1\r\nDBUG[07-18|23:54:44.981] [1/5 MiningCreateBlock] Candidate txs    amount=0\r\nINFO[07-18|23:54:44.981] [1/5 MiningCreateBlock] Start mine       block=2 baseFee=765625000 gasLimit=11522469\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] Extraction finished      took=6.81µs\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] ETL Load done            bucket=HashedCodeHash records=0\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] Load finished            took=20.37µs\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] Extraction finished      took=11.53µs\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] ETL Load done            bucket=HashedAccount records=0\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] Load finished            took=13.37µs\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] Extraction finished      took=6.97µs\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] ETL Load done            bucket=HashedStorage records=0\r\n[TRACE] [07-18|23:54:44.981] [3/5 HashState] Load finished            took=16.99µs\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] Incremental state promotion of intermediate hashes from=1 to=2 csbucket=AccountChangeSet\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] Extraction finished took=3.44µs\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] ETL Load done   bucket= records=0\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] Load finished   took=7.741µs\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] Incremental state promotion of intermediate hashes from=1 to=2 csbucket=StorageChangeSet\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] Extraction finished took=4.79µs\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] ETL Load done   bucket= records=0\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] Load finished   took=19.881µs\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] ETL Load done   bucket=TrieAccount records=4\r\n[TRACE] [07-18|23:54:44.981] [4/5 IntermediateHashes] ETL Load done   bucket=TrieStorage records=0\r\n[TRACE] [07-18|23:54:44.981] Waiting for slot to sign and propagate   delay=1.018s\r\n[TRACE] [07-18|23:54:45.069] Served                                   conn=127.0.0.1:55822 t=1.168402971s method=eth_estimateGas reqid=1 params=\"[{\\\"to\\\":\\\"0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B\\\",\\\"from\\\":\\\"0x67b1d87101671b127f5f8714789C7192f7ad340e\\\",\\\"value\\\":\\\"0x1\\\"}]\"\r\n[TRACE] [07-18|23:54:45.606] Served                                   conn=127.0.0.1:55830 t=81.842µs method=eth_estimateGas reqid=1 params=\"[{\\\"to\\\":\\\"0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B\\\",\\\"from\\\":\\\"0x67b1d87101671b127f5f8714789C7192f7ad340e\\\",\\\"value\\\":\\\"0x1\\\"}]\"\r\n[TRACE] [07-18|23:54:45.981] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:45.981] Empty anchor queue \r\nDBUG[07-18|23:54:45.981] Request skeleton                         anchors=0 top seen height=0 highestInDb=1\r\n[TRACE] [07-18|23:54:46.000] Link queue                               size=1\r\n[TRACE] [07-18|23:54:46.000] headerLoop woken up by the incoming request \r\n[TRACE] [07-18|23:54:46.000] Empty anchor queue \r\nDBUG[07-18|23:54:46.000] Request skeleton                         anchors=0 top seen height=0 highestInDb=1\r\nINFO[07-18|23:54:46.000] [1/16 Headers] Processed                 highest inserted=2 age=0\r\n[TRACE] [07-18|23:54:46.000] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:46.000] RequestQueueTime (header) ticked \r\n[TRACE] [07-18|23:54:46.000] [3/16 BlockHashes] Extraction finished   took=8µs\r\n[TRACE] [07-18|23:54:46.000] [3/16 BlockHashes] ETL Load done         bucket=HeaderNumber records=2\r\n[TRACE] [07-18|23:54:46.000] [3/16 BlockHashes] Load finished         took=18.261µs\r\n[TRACE] [07-18|23:54:46.000] [5/16 Senders] Read canonical hashes     amount=1\r\n[TRACE] [07-18|23:54:46.001] [5/16 Senders] ETL Load done             bucket=TxSender records=1\r\n[TRACE] [07-18|23:54:46.001] [] ETL Load done                         bucket=SyncStage records=1\r\nINFO[07-18|23:54:46.001] [6/16 Execution] Completed on            block=2\r\n[TRACE] [07-18|23:54:46.001] Translation disabled. Enable by adding `tevm` to --experiments \r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] Extraction finished     took=4.14µs\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] ETL Load done           bucket=HashedCodeHash records=0\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] Load finished           took=12.691µs\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] Extraction finished     took=2.62µs\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] ETL Load done           bucket=HashedAccount records=0\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] Load finished           took=10.12µs\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] Extraction finished     took=2.15µs\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] ETL Load done           bucket=HashedStorage records=0\r\n[TRACE] [07-18|23:54:46.001] [8/16 HashState] Load finished           took=11.02µs\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] Incremental state promotion of intermediate hashes from=1 to=2 csbucket=AccountChangeSet\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] Extraction finished took=2.79µs\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] ETL Load done  bucket= records=0\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] Load finished  took=11.451µs\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] Incremental state promotion of intermediate hashes from=1 to=2 csbucket=StorageChangeSet\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] Extraction finished took=1.94µs\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] ETL Load done  bucket= records=0\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] Load finished  took=6.911µs\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] ETL Load done  bucket=TrieAccount records=4\r\n[TRACE] [07-18|23:54:46.001] [9/16 IntermediateHashes] ETL Load done  bucket=TrieStorage records=0\r\n[TRACE] [07-18|23:54:46.001] [10/16 CallTraces] ETL Load done         bucket=CallFromIndex records=0\r\n[TRACE] [07-18|23:54:46.001] [10/16 CallTraces] ETL Load done         bucket=CallToIndex records=1\r\n[TRACE] [07-18|23:54:46.001] [11/16 AccountHistoryIndex] ETL Load done bucket=AccountHistory records=0\r\n[TRACE] [07-18|23:54:46.001] [12/16 StorageHistoryIndex] ETL Load done bucket=StorageHistory records=0\r\n[TRACE] [07-18|23:54:46.001] [13/16 LogIndex] ETL Load done           bucket=LogTopicIndex records=0\r\n[TRACE] [07-18|23:54:46.001] [13/16 LogIndex] ETL Load done           bucket=LogAddressIndex records=0\r\n[TRACE] [07-18|23:54:46.001] [14/16 TxLookup] Extraction finished     took=4.46µs\r\n[TRACE] [07-18|23:54:46.001] [14/16 TxLookup] ETL Load done           bucket=BlockTransactionLookup records=0\r\n[TRACE] [07-18|23:54:46.001] [14/16 TxLookup] Load finished           took=6.34µs\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=Finish\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=TxLookup\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=LogIndex\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=StorageHistoryIndex\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=AccountHistoryIndex\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=CallTraces\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=HashState\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=IntermediateHashes\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=Execution\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=Senders\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=Bodies\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=BlockHashes\r\n[TRACE] [07-18|23:54:46.001] Prune...                                 stage=Headers\r\nINFO[07-18|23:54:46.001] Timings (slower than 50ms)               Headers=4.021s\r\nINFO[07-18|23:54:46.001] Tables                                   PlainState=4.0KB AccountChangeSet=4.0KB StorageChangeSet=0B BlockTransaction=0B TransactionLog=0B FreeList=4.0KB ReclaimableSpace=4.0MB\r\nINFO[07-18|23:54:46.007] Commit cycle                             in=6.050482ms\r\nINFO[07-18|23:54:46.007] RPC Daemon notified of new headers       from=1 to=2 header sending=6.21µs log sending=230ns\r\nINFO[07-18|23:54:46.007] [1/16 Headers] Waiting for headers...    from=2\r\n[TRACE] [07-18|23:54:46.007] Empty anchor queue \r\nDBUG[07-18|23:54:46.007] Request skeleton                         anchors=0 top seen height=0 highestInDb=2\r\n^CINFO[07-18|23:54:46.868] Got interrupt, shutting down... \r\nDBUG[07-18|23:54:46.868] rpcdaemon: the subscription to pending blocks channel was closed \r\n[TRACE] [07-18|23:54:46.868] Deleting port mapping                    proto=tcp extport=39593 intport=39593 interface=\"UPNP IGDv1-IP1\"\r\n[TRACE] [07-18|23:54:46.868] P2P networking is spinning down \r\nINFO[07-18|23:54:46.868] Exiting... \r\nINFO[07-18|23:54:46.869] RPC server shutting down \r\nINFO[07-18|23:54:46.869] RPC server shutting down \r\nINFO[07-18|23:54:46.870] HTTP endpoint closed                     url=localhost:8545\r\nINFO[07-18|23:54:46.871] Engine HTTP endpoint close               url=localhost:8551\r\n````\r\n",
  "closed_by": {
    "login": "mandrigin",
    "id": 466427,
    "node_id": "MDQ6VXNlcjQ2NjQyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mandrigin",
    "html_url": "https://github.com/mandrigin",
    "followers_url": "https://api.github.com/users/mandrigin/followers",
    "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
    "organizations_url": "https://api.github.com/users/mandrigin/orgs",
    "repos_url": "https://api.github.com/users/mandrigin/repos",
    "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mandrigin/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1205575106",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4739#issuecomment-1205575106",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4739",
    "id": 1205575106,
    "node_id": "IC_kwDOC0FsAM5H253C",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-04T17:44:16Z",
    "updated_at": "2022-08-04T17:44:16Z",
    "author_association": "COLLABORATOR",
    "body": "Fixed in the latest devel",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1205575106/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 2,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

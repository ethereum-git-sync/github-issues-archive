{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7938",
  "id": 1826037426,
  "node_id": "I_kwDOC0FsAM5s1x6y",
  "number": 7938,
  "title": "debug_traceBlockByHash returns \"method handler crashed\" for certain blocks",
  "user": {
    "login": "Andrei-sys",
    "id": 74613889,
    "node_id": "MDQ6VXNlcjc0NjEzODg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/74613889?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Andrei-sys",
    "html_url": "https://github.com/Andrei-sys",
    "followers_url": "https://api.github.com/users/Andrei-sys/followers",
    "following_url": "https://api.github.com/users/Andrei-sys/following{/other_user}",
    "gists_url": "https://api.github.com/users/Andrei-sys/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Andrei-sys/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Andrei-sys/subscriptions",
    "organizations_url": "https://api.github.com/users/Andrei-sys/orgs",
    "repos_url": "https://api.github.com/users/Andrei-sys/repos",
    "events_url": "https://api.github.com/users/Andrei-sys/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Andrei-sys/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-07-28T09:09:16Z",
  "updated_at": "2023-09-17T02:05:03Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `./erigon --version`\r\nerigon version 2.48.1-stable-674b77f0\r\nOS & Version: Windows/Linux/OSX\r\nUbuntu\r\n\r\nFor Goerli:\r\n\r\nExample RPC Call:\r\n\r\ncurl -X POST  -H \"Content-Type: application/json\"  --data '{\"jsonrpc\":\"2.0\", \"id\":2, \"method\": \"debug_traceBlockByHash\", \"params\": [ \"0x8f57b9dbebf86d3d7dd6c8ab751d496ed73bbf9f0124d46326d9b1c1efbd2d9f\" , {\"tracer\": \"callTracer\", \"tracerConfig\": {\"onlyTopCall\": false, \"withLog\": true}}] }' localhost:8545\r\n{\"jsonrpc\":\"2.0\",\"id\":2,\"result\":[{\"result\":null,\"error\":{\"code\":-32000,\"message\":\"method handler crashed\"}}\r\n\r\nOn a side note, a similar problem appeared on Nodereal's implementation of BSC and it has been fixed some time ago: https://github.com/node-real/bsc-erigon/issues/140.\r\n\r\nWe were wondering whether anyone else has seen this problem before or not. Any ideas would be highly appreciated. Thanks in advance!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1655384697",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7938#issuecomment-1655384697",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938",
    "id": 1655384697,
    "node_id": "IC_kwDOC0FsAM5iqyp5",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-28T09:39:11Z",
    "updated_at": "2023-07-28T09:39:11Z",
    "author_association": "COLLABORATOR",
    "body": "Logs?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1655384697/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1655449333",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7938#issuecomment-1655449333",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938",
    "id": 1655449333,
    "node_id": "IC_kwDOC0FsAM5irCb1",
    "user": {
      "login": "Andrei-sys",
      "id": 74613889,
      "node_id": "MDQ6VXNlcjc0NjEzODg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/74613889?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Andrei-sys",
      "html_url": "https://github.com/Andrei-sys",
      "followers_url": "https://api.github.com/users/Andrei-sys/followers",
      "following_url": "https://api.github.com/users/Andrei-sys/following{/other_user}",
      "gists_url": "https://api.github.com/users/Andrei-sys/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Andrei-sys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Andrei-sys/subscriptions",
      "organizations_url": "https://api.github.com/users/Andrei-sys/orgs",
      "repos_url": "https://api.github.com/users/Andrei-sys/repos",
      "events_url": "https://api.github.com/users/Andrei-sys/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Andrei-sys/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-28T10:24:19Z",
    "updated_at": "2023-07-28T10:24:19Z",
    "author_association": "NONE",
    "body": "Jul 28 10:23:26 archive-eth-goerli-0 erigon[985219]: [EROR] [07-28|10:23:26.775] RPC method debug_traceBlockByHash crashed: runtime error: index out of range [-1]\r\nJul 28 10:23:26 archive-eth-goerli-0 erigon[985219]: [service.go:219 panic.go:884 panic.go:113 call.go:177 interpreter.go:234 interpreter.go:262 evm.go:57 evm.go:395 evm.go:443 state_transition.go:416 state_transition.go:185 tracing.go:198 tracing.go:144 tracing.go:37 value.go:586 value.go:370 service.go:224 handler.go:511 handler.go:444 handler.go:392 handler.go:223 handler.go:316 asm_amd64.s:1598]\r\nJul 28 10:23:26 archive-eth-goerli-0 erigon[985219]: [INFO] [07-28|10:23:26.837] local tx propagated                      tx_hash=c34bd8760b62d1fc0e3af486a1d3685cd7c364a13a7bcd8b1e7c9b5cfdce8215 announced to peers=127 broadcast to peers=5 baseFee=8106305162\r\nJul 28 10:23:27 archive-eth-goerli-0 erigon[985219]: [WARN] [07-28|10:23:27.117] Served                                   conn=162.19.232.109:1206 method=eth_estimateGas reqid=1072 t=6.942498ms err=\"execution reverted\"\r\nJul 28 10:23:27 archive-eth-goerli-0 erigon[985219]: [EROR] [07-28|10:23:27.503] RPC method debug_traceBlockByHash crashed: runtime error: index out of range [-1]\r\nJul 28 10:23:27 archive-eth-goerli-0 erigon[985219]: [service.go:219 panic.go:884 panic.go:113 call.go:177 interpreter.go:234 interpreter.go:262 evm.go:57 evm.go:395 evm.go:443 state_transition.go:416 state_transition.go:185 tracing.go:198 tracing.go:144 tracing.go:37 value.go:586 value.go:370 service.go:224 handler.go:511 handler.go:444 handler.go:392 handler.go:223 handler.go:316 asm_amd64.s:1598]\r\nJul 28 10:23:27 archive-eth-goerli-0 erigon[985219]: [WARN] [07-28|10:23:27.704] Served                                   conn=162.19.232.109:1206 method=eth_estimateGas reqid=1076 t=4.957702ms err=\"execution reverted\"\r\nJul 28 10:23:28 archive-eth-goerli-0 erigon[985219]: [EROR] [07-28|10:23:28.036] RPC method debug_traceBlockByHash crashed: runtime error: index out of range [-1]\r\nJul 28 10:23:28 archive-eth-goerli-0 erigon[985219]: [service.go:219 panic.go:884 panic.go:113 call.go:177 interpreter.go:234 interpreter.go:262 evm.go:57 evm.go:395 evm.go:443 state_transition.go:416 state_transition.go:185 tracing.go:198 tracing.go:144 tracing.go:37 value.go:586 value.go:370 service.go:224 handler.go:511 handler.go:444 handler.go:392 handler.go:223 handler.go:316 asm_amd64.s:1598]\r\nJul 28 10:23:28 archive-eth-goerli-0 erigon[985219]: [WARN] [07-28|10:23:28.298] Served                                   conn=162.19.232.109:1206 method=eth_estimateGas reqid=1080 t=6.665425ms err=\"execution reverted\"",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1655449333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1667643475",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7938#issuecomment-1667643475",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938",
    "id": 1667643475,
    "node_id": "IC_kwDOC0FsAM5jZjhT",
    "user": {
      "login": "Andrei-sys",
      "id": 74613889,
      "node_id": "MDQ6VXNlcjc0NjEzODg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/74613889?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Andrei-sys",
      "html_url": "https://github.com/Andrei-sys",
      "followers_url": "https://api.github.com/users/Andrei-sys/followers",
      "following_url": "https://api.github.com/users/Andrei-sys/following{/other_user}",
      "gists_url": "https://api.github.com/users/Andrei-sys/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Andrei-sys/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Andrei-sys/subscriptions",
      "organizations_url": "https://api.github.com/users/Andrei-sys/orgs",
      "repos_url": "https://api.github.com/users/Andrei-sys/repos",
      "events_url": "https://api.github.com/users/Andrei-sys/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Andrei-sys/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-07T10:59:32Z",
    "updated_at": "2023-08-07T10:59:32Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov Do you have any updates on the above? ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1667643475/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1722368918",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7938#issuecomment-1722368918",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7938",
    "id": 1722368918,
    "node_id": "IC_kwDOC0FsAM5mqUOW",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-09-17T02:05:03Z",
    "updated_at": "2023-09-17T02:05:03Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1722368918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/3795",
  "id": 1185862851,
  "node_id": "I_kwDOC0FsAM5GrtTD",
  "number": 3795,
  "title": "Remote sentry fails to find peers",
  "user": {
    "login": "limhyesook",
    "id": 95172590,
    "node_id": "U_kgDOBaw37g",
    "avatar_url": "https://avatars.githubusercontent.com/u/95172590?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/limhyesook",
    "html_url": "https://github.com/limhyesook",
    "followers_url": "https://api.github.com/users/limhyesook/followers",
    "following_url": "https://api.github.com/users/limhyesook/following{/other_user}",
    "gists_url": "https://api.github.com/users/limhyesook/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/limhyesook/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/limhyesook/subscriptions",
    "organizations_url": "https://api.github.com/users/limhyesook/orgs",
    "repos_url": "https://api.github.com/users/limhyesook/repos",
    "events_url": "https://api.github.com/users/limhyesook/events{/privacy}",
    "received_events_url": "https://api.github.com/users/limhyesook/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-03-30T04:35:47Z",
  "updated_at": "2022-03-30T21:22:33Z",
  "closed_at": "2022-03-30T21:22:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: 2022.99.99-dev-11087864\r\n\r\nOS & Version: Linux\r\n\r\nCommit hash : devel / [816ad30]\r\n\r\n#### Expected behaviour\r\nSentry is launched on separate server and works as a separate p2p endpoint.\r\n\r\n#### Actual behaviour\r\nSentry connects to main server but fails to find any peers. Multiple problems are reported in logs like these:\r\n\r\n[TRACE] [03-21|10:32:47.968] >> PING/v4                               id=666463730f556d41d6cf2bbf4c28f5d0d0d8ae26a205e8bd6f42d88c945bc23e addr=65.108.7.37:30311 err=nil\r\n[TRACE] [03-21|10:32:47.968] Removed dead node                        b=16 id=666463730f556d41d6cf2bbf4c28f5d0d0d8ae26a205e8bd6f42d88c945bc23e ip=65.108.7.37 checks=0\r\n[TRACE] [03-21|10:32:48.128] << PONG/v4                               id=666463730f556d41d6cf2bbf4c28f5d0d0d8ae26a205e8bd6f42d88c945bc23e addr=65.108.7.37:30311 err=\"unsolicited reply\"\r\n[TRACE] [03-21|10:32:54.939] >> PING/v4                               id=b909c30dc9bde6b61c2004fc0c18b7caef01f71df878d341a8d2f4f987d04129 addr=162.55.240.202:30311 err=nil\r\n[TRACE] [03-21|10:32:54.939] Removed dead node                        b=15 id=b909c30dc9bde6b61c2004fc0c18b7caef01f71df878d341a8d2f4f987d04129 ip=162.55.240.202 checks=0\r\n[TRACE] [03-21|10:32:55.090] << PONG/v4                               id=b909c30dc9bde6b61c2004fc0c18b7caef01f71df878d341a8d2f4f987d04129 addr=162.55.240.202:30311 err=\"unsolicited reply\"\r\n\r\nSome debugging has shown that the problem is connected to the fact that SetStatus function gets nil context. Then Done() channel is added which is closed already. So, ping commands (and others probably) are shut down immediately after launch and are not waiting for the reply.\r\n\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "limhyesook",
    "id": 95172590,
    "node_id": "U_kgDOBaw37g",
    "avatar_url": "https://avatars.githubusercontent.com/u/95172590?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/limhyesook",
    "html_url": "https://github.com/limhyesook",
    "followers_url": "https://api.github.com/users/limhyesook/followers",
    "following_url": "https://api.github.com/users/limhyesook/following{/other_user}",
    "gists_url": "https://api.github.com/users/limhyesook/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/limhyesook/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/limhyesook/subscriptions",
    "organizations_url": "https://api.github.com/users/limhyesook/orgs",
    "repos_url": "https://api.github.com/users/limhyesook/repos",
    "events_url": "https://api.github.com/users/limhyesook/events{/privacy}",
    "received_events_url": "https://api.github.com/users/limhyesook/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1082636489",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3795#issuecomment-1082636489",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795",
    "id": 1082636489,
    "node_id": "IC_kwDOC0FsAM5Ah7jJ",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-30T05:27:19Z",
    "updated_at": "2022-03-30T05:27:19Z",
    "author_association": "COLLABORATOR",
    "body": "plz check if this helps: https://github.com/ledgerwatch/erigon/pull/3796",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1082636489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1083637625",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3795#issuecomment-1083637625",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3795",
    "id": 1083637625,
    "node_id": "IC_kwDOC0FsAM5Alv95",
    "user": {
      "login": "limhyesook",
      "id": 95172590,
      "node_id": "U_kgDOBaw37g",
      "avatar_url": "https://avatars.githubusercontent.com/u/95172590?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/limhyesook",
      "html_url": "https://github.com/limhyesook",
      "followers_url": "https://api.github.com/users/limhyesook/followers",
      "following_url": "https://api.github.com/users/limhyesook/following{/other_user}",
      "gists_url": "https://api.github.com/users/limhyesook/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/limhyesook/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/limhyesook/subscriptions",
      "organizations_url": "https://api.github.com/users/limhyesook/orgs",
      "repos_url": "https://api.github.com/users/limhyesook/repos",
      "events_url": "https://api.github.com/users/limhyesook/events{/privacy}",
      "received_events_url": "https://api.github.com/users/limhyesook/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-30T21:22:22Z",
    "updated_at": "2022-03-30T21:22:22Z",
    "author_association": "NONE",
    "body": "Yes, it works now. I have replaced my workaround with the latest devel and multiple sentries now work!",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1083637625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

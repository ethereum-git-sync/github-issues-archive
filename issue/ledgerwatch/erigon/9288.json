{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/9288",
  "id": 2096171482,
  "node_id": "I_kwDOC0FsAM588Qna",
  "number": 9288,
  "title": "[Sepolia] Erigon v2.57.0 broken after upgrading from v2.55.1 version",
  "user": {
    "login": "luarx",
    "id": 22997139,
    "node_id": "MDQ6VXNlcjIyOTk3MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/22997139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luarx",
    "html_url": "https://github.com/luarx",
    "followers_url": "https://api.github.com/users/luarx/followers",
    "following_url": "https://api.github.com/users/luarx/following{/other_user}",
    "gists_url": "https://api.github.com/users/luarx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luarx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luarx/subscriptions",
    "organizations_url": "https://api.github.com/users/luarx/orgs",
    "repos_url": "https://api.github.com/users/luarx/repos",
    "events_url": "https://api.github.com/users/luarx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luarx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2024-01-23T14:07:22Z",
  "updated_at": "2024-01-24T01:10:32Z",
  "closed_at": "2024-01-24T01:10:32Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: v2.57.0\r\n\r\nOS & Version: Docker\r\n\r\nConsensus Layer: v4.4.1\r\n\r\nChain/Network: Sepolia\r\n\r\n#### Actual behaviour\r\nNode breaks when it starts\r\n```\r\n[INFO] [01-23|13:58:55.318] [EngineBlockDownloader] Downloading PoS headers... hash=0x1a8621ae1236acde99afae7c351d39aa4fe1dd1f0718110684fa46564f9308a2 requestId=0\r\nunexpected fault address 0x77b17650d020\r\nfatal error: fault\r\n[signal SIGBUS: bus error code=0x2 addr=0x77b17650d020 pc=0x49bc0e]\r\n\r\ngoroutine 21677 [running]:\r\nruntime.throw({0x2a2cc9b?, 0x0?})\r\n        runtime/panic.go:1047 +0x5d fp=0xc0097a4c28 sp=0xc0097a4bf8 pc=0x46309d\r\nruntime.sigpanic()\r\n        runtime/signal_unix.go:838 +0x125 fp=0xc0097a4c88 sp=0xc0097a4c28 pc=0x47a3c5\r\nruntime.memmove()\r\n        runtime/memmove_amd64.s:372 +0x42e fp=0xc0097a4c90 sp=0xc0097a4c88 pc=0x49bc0e\r\ngithub.com/anacrolix/torrent/mmap_span.copyBytes(...)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/mmap_span/mmap_span.go:79\r\ngithub.com/anacrolix/torrent/mmap_span.(*MMapSpan).locateCopy.func1(0x482dde?, {0x425b5c0?, 0x49b36e0?})\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/mmap_span/mmap_span.go:86 +0xdf fp=0xc0097a4d20 sp=0xc0097a4c90 pc=0xc248df\r\ngithub.com/anacrolix/torrent/segments.Index.Locate.func2(0x0?, {0xc0097a4d80?, 0x4a33e8?})\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/segments/index.go:43 +0x24 fp=0xc0097a4d48 sp=0xc0097a4d20 pc=0xc23a24\r\ngithub.com/anacrolix/torrent/segments.Scan(0xc0097a4db0, {0xc0097a4df0?, 0xc8b365?}, 0xc0097a4dd8)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/segments/segments.go:43 +0xdc fp=0xc0097a4d90 sp=0xc0097a4d48 pc=0xc23c3c\r\ngithub.com/anacrolix/torrent/segments.Index.Locate({{0xc0008fdef0, 0x1, 0x1}}, {0xcc00000, 0x40000}, 0xc0097a4e50)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/segments/index.go:42 +0x190 fp=0xc0097a4e18 sp=0xc0097a4d90 pc=0xc23990\r\ngithub.com/anacrolix/torrent/mmap_span.(*MMapSpan).locateCopy(0xc00b33dda0?, 0xc0097a4f80?, {0xc00ab32000, 0x40000, 0x40000}, 0xc27194?)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/mmap_span/mmap_span.go:83 +0x94 fp=0xc0097a4e88 sp=0xc0097a4e18 pc=0xc24794\r\ngithub.com/anacrolix/torrent/mmap_span.(*MMapSpan).WriteAt(0x100c001282980?, {0xc00ab32000?, 0x40000, 0x10?}, 0xc009767400?)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/mmap_span/mmap_span.go:102 +0xe8 fp=0xc0097a4f08 sp=0xc0097a4e88 pc=0xc24b08\r\ngithub.com/anacrolix/missinggo/v2.(*SectionWriter).WriteAt(0x6?, {0xc00ab32000?, 0xc008b6aac0?, 0x251d9e0?}, 0xc008b6aac8?)\r\n        github.com/anacrolix/missinggo/v2@v2.7.2-0.20230527121029-a582b4f397b9/section_writer.go:22 +0x56 fp=0xc0097a4f40 sp=0xc0097a4f08 pc=0xb98916\r\ngithub.com/anacrolix/torrent/storage.(*mmapStoragePiece).WriteAt(0x251d9e0?, {0xc00ab32000?, 0xc0097a4fb0?, 0xc001282980?}, 0x66?)\r\n        <autogenerated>:1 +0x30 fp=0xc0097a4f78 sp=0xc0097a4f40 pc=0xc2a490\r\ngithub.com/anacrolix/torrent/storage.Piece.WriteAt({{0x32abc00?, 0xc00b33dda0?}, {0xc001282980?, 0x1010000032862e0?}}, {0xc00ab32000, 0x40000, 0x40000}, 0x0)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/storage/wrappers.go:68 +0x199 fp=0xc0097a5040 sp=0xc0097a4f78 pc=0xc28af9\r\ngithub.com/anacrolix/torrent.(*Torrent).writeChunk(0xc001fdb500, 0x66, 0xc0097a5110?, {0xc00ab32000, 0x40000, 0x40000})\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/torrent.go:949 +0xe7 fp=0xc0097a50e8 sp=0xc0097a5040 pc=0xe4eae7\r\ngithub.com/anacrolix/torrent.(*Peer).receiveChunk.func5(0xc0013ca500, 0xc00b36a5b8?, 0xc007864b60)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/peer.go:695 +0xee fp=0xc0097a5178 sp=0xc0097a50e8 pc=0xe303ae\r\ngithub.com/anacrolix/torrent.(*Peer).receiveChunk(0xc007f1d500, 0xc007864b60)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/peer.go:696 +0x7c5 fp=0xc0097a54b0 sp=0xc0097a5178 pc=0xe2fd45\r\ngithub.com/anacrolix/torrent.(*PeerConn).mainReadLoop(0xc007f1d500)\r\n        github.com/anacrolix/torrent@v1.52.6-0.20231201115409-7ea994b6bbd8/peerconn.go:790 +0x9da fp=0xc0097a5980 sp=0xc0097a54b0 pc=0xe35f1a\r\ngithub.com/anacrolix/torrent.(*Client).runHandshookConn(0xc0013ca500, 0xc007f1d500, 0xc001fdb500)\r\n```\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\nUpgrade from Erigon v2.55.1 version to v2.57.0\r\nI tried to downgrade to v2.55.1 again but same issue around\r\n\r\n",
  "closed_by": {
    "login": "luarx",
    "id": 22997139,
    "node_id": "MDQ6VXNlcjIyOTk3MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/22997139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luarx",
    "html_url": "https://github.com/luarx",
    "followers_url": "https://api.github.com/users/luarx/followers",
    "following_url": "https://api.github.com/users/luarx/following{/other_user}",
    "gists_url": "https://api.github.com/users/luarx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luarx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luarx/subscriptions",
    "organizations_url": "https://api.github.com/users/luarx/orgs",
    "repos_url": "https://api.github.com/users/luarx/repos",
    "events_url": "https://api.github.com/users/luarx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luarx/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1906150743",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9288#issuecomment-1906150743",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288",
    "id": 1906150743,
    "node_id": "IC_kwDOC0FsAM5xnY1X",
    "user": {
      "login": "luarx",
      "id": 22997139,
      "node_id": "MDQ6VXNlcjIyOTk3MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/22997139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luarx",
      "html_url": "https://github.com/luarx",
      "followers_url": "https://api.github.com/users/luarx/followers",
      "following_url": "https://api.github.com/users/luarx/following{/other_user}",
      "gists_url": "https://api.github.com/users/luarx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luarx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luarx/subscriptions",
      "organizations_url": "https://api.github.com/users/luarx/orgs",
      "repos_url": "https://api.github.com/users/luarx/repos",
      "events_url": "https://api.github.com/users/luarx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luarx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-23T14:17:03Z",
    "updated_at": "2024-01-23T14:17:03Z",
    "author_association": "NONE",
    "body": "This is was because it increased the used disk spasce almost 100gb all of a sudden\r\n![image](https://github.com/ledgerwatch/erigon/assets/22997139/861466c5-d81b-418b-856a-fa98dc805513)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1906150743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1907181511",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9288#issuecomment-1907181511",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9288",
    "id": 1907181511,
    "node_id": "IC_kwDOC0FsAM5xrUfH",
    "user": {
      "login": "luarx",
      "id": 22997139,
      "node_id": "MDQ6VXNlcjIyOTk3MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/22997139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luarx",
      "html_url": "https://github.com/luarx",
      "followers_url": "https://api.github.com/users/luarx/followers",
      "following_url": "https://api.github.com/users/luarx/following{/other_user}",
      "gists_url": "https://api.github.com/users/luarx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luarx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luarx/subscriptions",
      "organizations_url": "https://api.github.com/users/luarx/orgs",
      "repos_url": "https://api.github.com/users/luarx/repos",
      "events_url": "https://api.github.com/users/luarx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luarx/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-24T01:10:32Z",
    "updated_at": "2024-01-24T01:10:32Z",
    "author_association": "NONE",
    "body": "Because of my last comment, I will open a new issue as it is more related with a disk usage spike",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1907181511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

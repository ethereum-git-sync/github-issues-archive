{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8362",
  "id": 1925771140,
  "node_id": "I_kwDOC0FsAM5yyO-E",
  "number": 8362,
  "title": "[After Upgrade to v2.50] ReadBodyWithTransactions can't find block num ",
  "user": {
    "login": "c0deright",
    "id": 20477825,
    "node_id": "MDQ6VXNlcjIwNDc3ODI1",
    "avatar_url": "https://avatars.githubusercontent.com/u/20477825?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/c0deright",
    "html_url": "https://github.com/c0deright",
    "followers_url": "https://api.github.com/users/c0deright/followers",
    "following_url": "https://api.github.com/users/c0deright/following{/other_user}",
    "gists_url": "https://api.github.com/users/c0deright/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/c0deright/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/c0deright/subscriptions",
    "organizations_url": "https://api.github.com/users/c0deright/orgs",
    "repos_url": "https://api.github.com/users/c0deright/repos",
    "events_url": "https://api.github.com/users/c0deright/events{/privacy}",
    "received_events_url": "https://api.github.com/users/c0deright/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2023-10-04T09:20:09Z",
  "updated_at": "2024-01-22T09:08:24Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `2.50.1`\r\n\r\nOS & Version: Ubuntu 20.04\r\n\r\nErigon Command (with flags/config):\r\n\r\n```\r\n[..]\r\n[Service]\r\nType=simple\r\nExecStart=erigon-client --datadir /data/goerli2/erigon --port 30305 --p2p.allowed-ports 30306 --http --http.addr 0.0.0.0 --http.port 8547 --http.api \"trace,eth,net,web3\" --http.vhosts='*' --maxpeers 30 --private.api.addr '' --torrent.port 42069 --torrent.download.rate 100mb --prune hrtc --prune.h.older 2300000 --prune.r.older 2300000 --prune.t.older 2300000 --prune.c.older 2300000 --authrpc.port 8553 --chain goerli --authrpc.jwtsecret /data/goerli2/jwtsecret\r\nKillSignal=SIGINT\r\n\r\nRestart=always\r\nPrivateTmp=true\r\nTimeoutStopSec=3600s\r\nTimeoutStartSec=10s\r\nStartLimitInterval=120s\r\nStartLimitBurst=5\r\n```\r\n\r\nConcensus Layer: `prysm v4.0.8`\r\n\r\nConcensus Layer Command (with flags/config):\r\n\r\n```\r\n[..]\r\n[Service]\r\nType=simple\r\nExecStart=prysm-client --datadir=/data/goerli2/prysm --grpc-gateway-port 3502 --rpc-port 4002 --p2p-tcp-port 13002 --p2p-udp-port 12002 --monitoring-port 8082 --execution-endpoint=http://localhost:8553 --jwt-secret=/data/goerli2/jwtsecret --block-batch-limit 1024 --goerli --genesis-state=/data/goerli2/prysm/genesis.ssz --checkpoint-sync-url https://goerli-sync.invis.tools/\r\nStandardOutput=append:/data/goerli2/prysm/log.txt\r\n```\r\n\r\nChain/Network: goerli\r\n\r\n#### Expected behaviour\r\n\r\nErigon does sync like it did with `v2.48.1` before we upgraded to `v2.50.0`\r\n\r\n#### Actual behaviour\r\n\r\nErigon doesn't sync with `v2.50.0` and `v2.50.1` and reports errors\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nUpgrade from `v2.48.1` to `v2.50.0` on goerli testnet\r\n\r\n#### Backtrace\r\n\r\n```\r\n[INFO] [10-04|11:12:25.526] logging to file system                   log dir=/data/goerli2/erigon/logs file prefix=erigon log level=info json=false\r\n[INFO] [10-04|11:12:25.526] Build info                               git_branch= git_tag= git_commit=\r\n[INFO] [10-04|11:12:25.526] Starting Erigon on GÃ¶rli testnet... \r\n[INFO] [10-04|11:12:25.529] Maximum peer count                       ETH=30 total=30\r\n[INFO] [10-04|11:12:25.529] starting HTTP APIs                       APIs=trace,eth,net,web3\r\n[INFO] [10-04|11:12:25.529] torrent verbosity                        level=WRN\r\n[INFO] [10-04|11:12:27.633] Set global gas cap                       cap=50000000\r\n[INFO] [10-04|11:12:27.635] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=100mb upload.rate=4mb\r\n[INFO] [10-04|11:12:27.635] Opening Database                         label=chaindata path=/data/goerli2/erigon/chaindata\r\n[INFO] [10-04|11:12:30.037] Initialised chain configuration          config=\"{ChainID: 5, Homestead: 0, DAO: <nil>, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 0, Petersburg: 0, Istanbul: 1561651, Muir Glacier: <nil>, Berlin: 4460644, London: 5062605, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: 10790000, Merge Netsplit: <nil>, Shanghai: 1678832736, Cancun: <nil>, Prague: <nil>, Engine: clique}\" genesis=0xbf7e331f7f7c1dd2e05159666b3bf8bc7a8a3a9eb1d518969eab529dd9b88c1a\r\n[INFO] [10-04|11:12:50.044] [snapshots] Creating .torrent files      progress=56/56 alloc=812.3MB sys=860.4MB\r\n[INFO] [10-04|11:12:51.826] Initialising Ethereum protocol           network=5\r\n[INFO] [10-04|11:12:51.826] Opening Database                         label=clique path=/data/goerli2/erigon/clique/db/clique\r\n[INFO] [10-04|11:13:03.913] new subscription to logs established \r\n[INFO] [10-04|11:13:03.913] rpc filters: subscribing to Erigon events \r\n[INFO] [10-04|11:13:03.913] new subscription to newHeaders established \r\n[INFO] [10-04|11:13:03.913] New txs subscriber joined \r\n[INFO] [10-04|11:13:03.915] HTTP endpoint opened                     url=[::]:8547 ws=false ws.compression=true grpc=false\r\n[INFO] [10-04|11:13:03.915] Reading JWT secret                       path=/data/goerli2/jwtsecret\r\n[INFO] [10-04|11:13:03.919] HTTP endpoint opened for Engine API      url=127.0.0.1:8553 ws=true ws.compression=true\r\n[WARN] [10-04|11:13:03.923] NAT ExternalIP resolution has failed, try to pass a different --nat option err=\"no UPnP or NAT-PMP router discovered\"\r\n[INFO] [10-04|11:13:03.924] Started P2P networking                   version=67 self=enode://344895ebf2c1ebe18298b2f189054ec7aaf673b6d3bab908f2c5f2179e098a93c69c89be9a1565c459a7694bcaad1ba8f0532d8d8b4e549e76f5941d2bc02a32@127.0.0.1:0 name=erigon/v2.50.1/linux-amd64/go1.20.7\r\n[WARN] [10-04|11:13:03.926] NAT ExternalIP resolution has failed, try to pass a different --nat option err=\"no UPnP or NAT-PMP router discovered\"\r\n[INFO] [10-04|11:13:03.927] [1/12 Snapshots] Fetching torrent files metadata \r\n[INFO] [10-04|11:13:03.927] Started P2P networking                   version=68 self=enode://344895ebf2c1ebe18298b2f189054ec7aaf673b6d3bab908f2c5f2179e098a93c69c89be9a1565c459a7694bcaad1ba8f0532d8d8b4e549e76f5941d2bc02a32@127.0.0.1:0 name=erigon/v2.50.1/linux-amd64/go1.20.7\r\n[INFO] [10-04|11:13:03.928] [txpool] Started \r\n[INFO] [10-04|11:13:04.745] [snapshots] Blocks Stat                  blocks=9509k indices=9509k alloc=1.5GB sys=1.6GB\r\n[INFO] [10-04|11:13:06.034] [snapshots] Retire Blocks                range=9509k-9510k\r\n[INFO] [10-04|11:13:06.081] [EngineBlockDownloader] Downloading PoS headers... height=unknown hash=0xa529bea74782d3153eb7b16dd0e970361827267ea54fb48bb8f88de029c494ba requestId=0\r\n[INFO] [10-04|11:13:11.846] [snapshots] Creating .torrent files      progress=56/56 alloc=1.1GB sys=1.6GB\r\n[INFO] [10-04|11:13:24.506] [snapshots] Compression                  ratio=0.00 file=v1-009509-009510-transactions\r\n[INFO] [10-04|11:13:51.450] [snapshots] Blocks Stat                  blocks=9510k indices=9510k alloc=1.0GB sys=1.9GB\r\n[INFO] [10-04|11:15:42.535] [EngineBlockDownloader] Processed        highest=9806982\r\n[INFO] [10-04|11:15:42.535] Beginning downloaded blocks insertion \r\n[INFO] [10-04|11:15:42.606] [EngineBlockDownloader] Finished downloading blocks from=9806977 to=9806982\r\n[INFO] [10-04|11:15:48.762] [NewPayload] Handling new payload        height=9806999 hash=0xbcccd53d416fd77b3211b2b30b93b377db5651b1c280a42cb8233d8614fc0f9d\r\n[INFO] [10-04|11:15:48.762] [EngineBlockDownloader] Downloading PoS headers... height=unknown hash=0xf8ba2490abd913dd21b8d3dfa5f1ca9ce1db914e518adca3c11afe76120977d2 requestId=0\r\n[INFO] [10-04|11:15:50.162] [EngineBlockDownloader] Processed        highest=9806998\r\n[INFO] [10-04|11:15:50.162] Beginning downloaded blocks insertion \r\n[INFO] [10-04|11:15:50.243] [EngineBlockDownloader] Finished downloading blocks from=9806982 to=9806998\r\n[INFO] [10-04|11:15:50.308] [EngineBlockDownloader] block verification skipped \r\n[INFO] [10-04|11:15:51.817] [p2p] GoodPeers                          eth68=1\r\n[INFO] [10-04|11:16:00.597] [NewPayload] Handling new payload        height=9807000 hash=0x8c578fbbbeb01014f97dfa8c9552c0a8cc39c908ad5aebe4c91adda23f3d62cd\r\n[INFO] [10-04|11:16:01.691] [3/12 Senders] Started                   from=9636433 to=9807000\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636434 hash=0xeab6c3d821a81851bb4f4486e0cd08e859ce46ea33966500be37f021d3b2ec47\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636435 hash=0x4cf39ef158b918873824a556350e76298fd2485ba4715d28b23b2d6c0f641755\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636436 hash=0x0164c85f1d145b740000a6382ac4436c585f6cdfd4ea33ca45f33caf13612233\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636437 hash=0xdca0a245da80cd68ff0e8c64d1bb7d51419e733d554f883657292f6eb89efc1f\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636438 hash=0xce65598e79b7584cf3318f13eecda7653ebbd47eefb63936e5558ef4eb6f7871\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636439 hash=0xf171ff90a324f685e3710de3fc5270d128741718292d482ca68e35fb78f6cd5a\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636440 hash=0x5a261ff39e60adb2c78accf67179a3a37b9bb7aab85a50af461534569ab0b852\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636441 hash=0x58920a16da68b62c0b4fc16796ec1c6b58258582896098aaca51c249de8b4c6c\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636442 hash=0xbb7d121415a15dfbff5a45aa8b45ea92dc95fa86c3886232773c946e5a9ea9cd\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636443 hash=0xfd5dca55f8044cc50d6fc25c7f5dc5541bda4ebdf20ce03c77e60deffc8c38d6\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636444 hash=0xd284fc0f8e3a7bf5c27e5ed58d9ff77a2fcefc154ab69b0c7f35ffd87dcae8a6\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636445 hash=0x2740b437c8b741e9109b8b9014440ddcc3b62ef9a44339509b881a8290432a6b\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636446 hash=0x1f62f97d55ba3a023797bd6a1acb06730ee8a926546d83a8a8912257bc966ed8\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636447 hash=0x2d5588dff5c67f10b9cb2f74923bc9340c860ea0b0259965936ef6a35588e8fa\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636448 hash=0x3842bfd4329f392db3c966ac947b39c7d4c639543a3f37a867bd9188df421deb\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636449 hash=0x5085794194479cb7e583c141c67141c343c2c8396a2253fb6ce1ae76f7de1ed5\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636450 hash=0x21af93ff4dba4b14c7ebe4d683f5bccaaedc2686055114f48e7d06a49a61aaee\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636451 hash=0xcaa68ddb2be0620f826d041594ba96e6d69165311831169fe107ad2f442c022d\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636452 hash=0x2fba86935e0990bdec49f777fd7bc9f36415abd2d9c33032c1323ad48fcb851b\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636453 hash=0x13b13930a5cb1ffc19603e42926fbb37d77544d8ac908b3b71ba69bc7c076865\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636454 hash=0x4eeb03e1674f80a3a678817d9b894cf6a7f6c72131e2be5441d2644b763fe5be\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636455 hash=0x122266657947172547f16c6b699e907c519f9bdedb943795d1bc673b2625581d\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636456 hash=0x754187821768b0983f23c1791bd81616d55bc39e865b62acebd29b92d32a6b96\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636457 hash=0xd3a88d402a1d47b1454b43b6b3727ae3da1b7f001adefeec04bcaf8f93507601\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636458 hash=0x66bba50b7520392e976126697763556ef375c86de3e12d111fbcae59c3310e0d\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636459 hash=0xb97e595e686db546bc5d96f548c1f0252fc4447c1c055e252b17d5251afbf5ff\r\n[WARN] [10-04|11:16:01.691] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636460 hash=0x05bd34ba89c1f7d722009eb060b96ae79b22a43d48f6d7108ce577ecbd56cb1c\r\n[..]\r\n[WARN] [10-04|11:16:01.709] [3/12 Senders] ReadBodyWithTransactions can't find block num=9637608 hash=0xa90d6dbb534205674a3097c5c8bc45b92a0df12cfdf124416f42bcf50d5848a2\r\n[WARN] [10-04|11:16:01.709] [3/12 Senders] ReadBodyWithTransactions can't find block num=9637609 hash=0x71cd2e538c042fe0f8b35552e09553cb3fe9657485fea87c209e7386075be4ce\r\n[WARN] [10-04|11:16:01.709] [3/12 Senders] ReadBodyWithTransactions can't find block num=9637610 hash=0x36d3c2228f4298da39dbcf5f60c46c96856f6ea7046f4b75d0d2c154259c91dd\r\n[WARN] [10-04|11:16:01.709] [3/12 Senders] ReadBodyWithTransactions can't find block num=9637611 hash=0x30fa4e745396662a8fa6601df5e8cfa71576f80dae9b2d3c232ec2d6338bc2e3\r\n[WARN] [10-04|11:16:01.709] [3/12 Senders] ReadBodyWithTransactions can't find block num=9637612 hash=0xa99aed1cdaf9840e44fa460d597767b6299af60d5f432f4e90fa6b284dc07701\r\n[INFO] [10-04|11:16:03.916] [txpool] stat                            pending=5 baseFee=0 queued=140 alloc=1.8GB sys=2.7GB\r\n[INFO] [10-04|11:16:31.691] [3/12 Senders] Recovery                  block_number=9667512 ch=9997/10000\r\n[INFO] [10-04|11:17:01.702] [3/12 Senders] Recovery                  block_number=9695818 ch=9984/10000\r\n[INFO] [10-04|11:17:31.706] [3/12 Senders] Recovery                  block_number=9726165 ch=9977/10000\r\n[INFO] [10-04|11:18:01.703] [3/12 Senders] Recovery                  block_number=9755516 ch=10000/10000\r\n[INFO] [10-04|11:18:31.691] [3/12 Senders] Recovery                  block_number=9784332 ch=10000/10000\r\n[INFO] [10-04|11:18:50.964] [3/12 Senders] DONE                      in=2m49.273216585s\r\n[INFO] [10-04|11:18:50.964] [4/12 Execution] Blocks execution        from=9636433 to=9807000\r\n[EROR] [10-04|11:18:50.964] [4/12 Execution] Empty block             blocknum=9636434\r\n[INFO] [10-04|11:18:50.964] [4/12 Execution] Completed on            block=9636433\r\n[WARN] [10-04|11:18:50.964] bad forkchoice                           head=0xce85d8afa5a910884025de9c3098fded14c06dbabfcca26e9838117c651e08f7 hash=0x8c578fbbbeb01014f97dfa8c9552c0a8cc39c908ad5aebe4c91adda23f3d62cd\r\n[INFO] [10-04|11:18:51.817] [p2p] GoodPeers                          eth67=1 eth68=1\r\n[INFO] [10-04|11:19:00.580] [NewPayload] Handling new payload        height=9807013 hash=0x36ee3e2568179e7b1c38363bbc919c97fd62e41089955f8363451dac72089451\r\n[INFO] [10-04|11:19:00.581] [EngineBlockDownloader] Downloading PoS headers... height=unknown hash=0x765003b61f017c45602b83a71fd76a5484fffcb2f099ef2b9dad8ce52943071d requestId=0\r\n[INFO] [10-04|11:19:02.830] [EngineBlockDownloader] Processed        highest=9807012\r\n[INFO] [10-04|11:19:02.830] Beginning downloaded blocks insertion \r\n[INFO] [10-04|11:19:02.925] [EngineBlockDownloader] Finished downloading blocks from=9807000 to=9807012\r\n[INFO] [10-04|11:19:02.998] [EngineBlockDownloader] block verification skipped \r\n[INFO] [10-04|11:19:03.914] [txpool] stat                            pending=11 baseFee=0 queued=554 alloc=3.7GB sys=7.2GB\r\n[INFO] [10-04|11:19:16.075] [NewPayload] Handling new payload        height=9807014 hash=0xb11d93573acca80f29a9c7c20043b51400548d5cde52b88ab03ea3c4e781a054\r\n[INFO] [10-04|11:19:17.122] [3/12 Senders] Started                   from=9636433 to=9807014\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636434 hash=0xeab6c3d821a81851bb4f4486e0cd08e859ce46ea33966500be37f021d3b2ec47\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636435 hash=0x4cf39ef158b918873824a556350e76298fd2485ba4715d28b23b2d6c0f641755\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636436 hash=0x0164c85f1d145b740000a6382ac4436c585f6cdfd4ea33ca45f33caf13612233\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636437 hash=0xdca0a245da80cd68ff0e8c64d1bb7d51419e733d554f883657292f6eb89efc1f\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636438 hash=0xce65598e79b7584cf3318f13eecda7653ebbd47eefb63936e5558ef4eb6f7871\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636439 hash=0xf171ff90a324f685e3710de3fc5270d128741718292d482ca68e35fb78f6cd5a\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636440 hash=0x5a261ff39e60adb2c78accf67179a3a37b9bb7aab85a50af461534569ab0b852\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636441 hash=0x58920a16da68b62c0b4fc16796ec1c6b58258582896098aaca51c249de8b4c6c\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636442 hash=0xbb7d121415a15dfbff5a45aa8b45ea92dc95fa86c3886232773c946e5a9ea9cd\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636443 hash=0xfd5dca55f8044cc50d6fc25c7f5dc5541bda4ebdf20ce03c77e60deffc8c38d6\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636444 hash=0xd284fc0f8e3a7bf5c27e5ed58d9ff77a2fcefc154ab69b0c7f35ffd87dcae8a6\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636445 hash=0x2740b437c8b741e9109b8b9014440ddcc3b62ef9a44339509b881a8290432a6b\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636446 hash=0x1f62f97d55ba3a023797bd6a1acb06730ee8a926546d83a8a8912257bc966ed8\r\n[WARN] [10-04|11:19:17.123] [3/12 Senders] ReadBodyWithTransactions can't find block num=9636447 hash=0x2d5588dff5c67f10b9cb2f74923bc9340c860ea0b0259965936ef6a35588e8fa\r\n[..]\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1747451913",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1747451913",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1747451913,
    "node_id": "IC_kwDOC0FsAM5oKAAJ",
    "user": {
      "login": "matcra587",
      "id": 28843561,
      "node_id": "MDQ6VXNlcjI4ODQzNTYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/28843561?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matcra587",
      "html_url": "https://github.com/matcra587",
      "followers_url": "https://api.github.com/users/matcra587/followers",
      "following_url": "https://api.github.com/users/matcra587/following{/other_user}",
      "gists_url": "https://api.github.com/users/matcra587/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matcra587/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matcra587/subscriptions",
      "organizations_url": "https://api.github.com/users/matcra587/orgs",
      "repos_url": "https://api.github.com/users/matcra587/repos",
      "events_url": "https://api.github.com/users/matcra587/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matcra587/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-04T18:47:34Z",
    "updated_at": "2023-10-05T12:48:04Z",
    "author_association": "NONE",
    "body": "We've observed that this issue arises when the node is **not** set as an archive node. On the other hand, when configured as an archive node, version `2.50.2` runs without any problems",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1747451913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1755541148",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1755541148",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1755541148,
    "node_id": "IC_kwDOC0FsAM5oo26c",
    "user": {
      "login": "qwertzlbert",
      "id": 19959427,
      "node_id": "MDQ6VXNlcjE5OTU5NDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19959427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qwertzlbert",
      "html_url": "https://github.com/qwertzlbert",
      "followers_url": "https://api.github.com/users/qwertzlbert/followers",
      "following_url": "https://api.github.com/users/qwertzlbert/following{/other_user}",
      "gists_url": "https://api.github.com/users/qwertzlbert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qwertzlbert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qwertzlbert/subscriptions",
      "organizations_url": "https://api.github.com/users/qwertzlbert/orgs",
      "repos_url": "https://api.github.com/users/qwertzlbert/repos",
      "events_url": "https://api.github.com/users/qwertzlbert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qwertzlbert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-10T14:28:19Z",
    "updated_at": "2023-10-10T14:28:19Z",
    "author_association": "NONE",
    "body": "We observed the same issue on mainnet with version `2.51.0` , but only with nodes running with a pruned config and started like the following:\r\n```\r\n--chain=mainnet --datadir=/srv/ethereum/erigon/mainnet/data --private.api.addr=localhost:9090 --metrics --metrics.port=26660 --http.addr 0.0.0.0 --ws --http --rpc.batch.concurrency=12 --db.pagesize=16kb --prune=htc --prune.r.before=11184524 --http.api=eth,erigon,web3,net,trace,txpool\r\n```\r\n\r\nAny update on that topic would be  appreciated. Thanks",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1755541148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1759291619",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1759291619",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1759291619,
    "node_id": "IC_kwDOC0FsAM5o3Kjj",
    "user": {
      "login": "RatanRSur",
      "id": 4733314,
      "node_id": "MDQ6VXNlcjQ3MzMzMTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4733314?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RatanRSur",
      "html_url": "https://github.com/RatanRSur",
      "followers_url": "https://api.github.com/users/RatanRSur/followers",
      "following_url": "https://api.github.com/users/RatanRSur/following{/other_user}",
      "gists_url": "https://api.github.com/users/RatanRSur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RatanRSur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RatanRSur/subscriptions",
      "organizations_url": "https://api.github.com/users/RatanRSur/orgs",
      "repos_url": "https://api.github.com/users/RatanRSur/repos",
      "events_url": "https://api.github.com/users/RatanRSur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RatanRSur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-12T09:50:18Z",
    "updated_at": "2023-10-12T09:51:16Z",
    "author_association": "NONE",
    "body": "I'm seeing the same issue on mainnet. Version:\r\n`erigon version 2.51.0-a952e91f`\r\n\r\nMy config:\r\n\r\n```\r\nprune.r.before: \"11052984\"\r\nprune: \"htc\"\r\nhttp: \"true\"\r\nhttp.api: [\"eth\",\"erigon\",\"engine\", \"debug\", \"net\"]\r\ndatadir: \"/home/val/mnt\"\r\n```\r\n\r\nlogs:\r\n\r\n```\r\n[INFO] [10-11|13:36:11.748] [NewPayload] Handling new payload        height=18328723 hash=0x057bcab966f2552622cedcb299f2601063dbf5e613fad2a48497a8ea3a1aef3c\r\n[INFO] [10-11|13:36:11.748] [EngineBlockDownloader] Downloading PoS headers... height=unknown hash=0x6361abb0101a440c0d165768cdc8ebe594d1a3955bd793e3281f9e0cc671af30 requestId=0\r\n[INFO] [10-11|13:36:45.393] [EngineBlockDownloader] Processed        highest=18328722\r\n[INFO] [10-11|13:36:45.393] Beginning downloaded blocks insertion \r\n[INFO] [10-11|13:36:45.397] [EngineBlockDownloader] Finished downloading blocks from=18328720 to=18328722\r\n[INFO] [10-11|13:36:52.914] [EngineBlockDownloader] blocks verification successful \r\n[INFO] [10-11|13:36:58.032] [p2p] GoodPeers                          eth68=3 eth66=2 eth67=2\r\n[INFO] [10-11|13:37:00.822] [NewPayload] Handling new payload        height=18328727 hash=0x96c03ad08abf2695c559d212a0ac3aca88b1654b5e9f402edcd36b649edcedee\r\n[INFO] [10-11|13:37:00.822] [EngineBlockDownloader] Downloading PoS headers... height=unknown hash=0x1258e0b4f2fe3f10c208b23e6720311fd5456d226c2856b4797e8d49731bff6e requestId=0\r\n[INFO] [10-11|13:37:01.401] [txpool] stat                            pending=9784 baseFee=0 queued=667 alloc=4.0GB sys=4.5GB\r\n[INFO] [10-11|13:37:05.022] [EngineBlockDownloader] Processed        highest=18328726\r\n[INFO] [10-11|13:37:05.022] Beginning downloaded blocks insertion \r\n[INFO] [10-11|13:37:05.034] [EngineBlockDownloader] Finished downloading blocks from=18328723 to=18328726\r\n[INFO] [10-11|13:37:05.038] [EngineBlockDownloader] block verification skipped \r\n[INFO] [10-11|13:37:11.458] [NewPayload] Handling new payload        height=18328728 hash=0x0aabc6c9ef80263d243c48092d13802fc31640d167c7a78dc34619fb64d96e01\r\n[INFO] [10-11|13:37:11.680] [3/12 Senders] Started                   from=18328692 to=18328728\r\n[WARN] [10-11|13:37:11.681] [3/12 Senders] ReadBodyWithTransactions can't find block num=18328693 hash=0xdd01e15b1d59cb7bb69406849857c707317d8494422fb15338c81eefe1bb5340\r\n[INFO] [10-11|13:37:11.780] [4/12 Execution] Blocks execution        from=18328692 to=18328728\r\n[EROR] [10-11|13:37:11.780] [4/12 Execution] Empty block             blocknum=18328693\r\n[INFO] [10-11|13:37:11.780] [4/12 Execution] Completed on            block=18328692\r\n[WARN] [10-11|13:37:11.780] bad forkchoice                           head=0xf0ac68f1db375d345d0dd303267febcb142e5f768a2b25a7f70c1175f301f71b hash=0x0aabc6c9ef80263d243c48092d13802fc31640d167c7a78dc34619fb64d96e01\r\n[INFO] [10-11|13:37:11.858] [3/12 Senders] Started                   from=18328692 to=18328727\r\n[WARN] [10-11|13:37:11.858] [3/12 Senders] ReadBodyWithTransactions can't find block num=18328693 hash=0xdd01e15b1d59cb7bb69406849857c707317d8494422fb15338c81eefe1bb5340\r\n[INFO] [10-11|13:37:12.013] [4/12 Execution] Blocks execution        from=18328692 to=18328727\r\n[EROR] [10-11|13:37:12.013] [4/12 Execution] Empty block             blocknum=18328693\r\n[INFO] [10-11|13:37:12.013] [4/12 Execution] Completed on            block=18328692\r\n[WARN] [10-11|13:37:12.013] bad forkchoice                           head=0xf0ac68f1db375d345d0dd303267febcb142e5f768a2b25a7f70c1175f301f71b hash=0x96c03ad08abf2695c559d212a0ac3aca88b1654b5e9f402edcd36b649edcedee\r\n[INFO] [10-11|13:37:12.089] [3/12 Senders] Started                   from=18328692 to=18328726\r\n[WARN] [10-11|13:37:12.089] [3/12 Senders] ReadBodyWithTransactions can't find block num=18328693 hash=0xdd01e15b1d59cb7bb69406849857c707317d8494422fb15338c81eefe1bb5340\r\n[INFO] [10-11|13:37:12.237] [4/12 Execution] Blocks execution        from=18328692 to=18328726\r\n[EROR] [10-11|13:37:12.237] [4/12 Execution] Empty block             blocknum=18328693\r\n[INFO] [10-11|13:37:12.238] [4/12 Execution] Completed on            block=18328692\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1759291619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1761331639",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1761331639",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1761331639,
    "node_id": "IC_kwDOC0FsAM5o-8m3",
    "user": {
      "login": "qwertzlbert",
      "id": 19959427,
      "node_id": "MDQ6VXNlcjE5OTU5NDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19959427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qwertzlbert",
      "html_url": "https://github.com/qwertzlbert",
      "followers_url": "https://api.github.com/users/qwertzlbert/followers",
      "following_url": "https://api.github.com/users/qwertzlbert/following{/other_user}",
      "gists_url": "https://api.github.com/users/qwertzlbert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qwertzlbert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qwertzlbert/subscriptions",
      "organizations_url": "https://api.github.com/users/qwertzlbert/orgs",
      "repos_url": "https://api.github.com/users/qwertzlbert/repos",
      "events_url": "https://api.github.com/users/qwertzlbert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qwertzlbert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-13T11:05:58Z",
    "updated_at": "2023-10-13T13:09:59Z",
    "author_association": "NONE",
    "body": "Since `2.52.0` the status has changed, instead of the `ReadBodyWithTransactions can't find block` the node will start to sync again, but will never finish and seems to be stuck at  block `0x10f2076` and the consensus client won't be able to use it (`teku` in our case).\r\n\r\nErigon log:\r\n```\r\nOct 13 10:57:48 erigon[2701335]: [INFO] [10-13|10:57:48.165] [EngineBlockDownloader] Processed        highest=18341021\r\nOct 13 10:57:48 erigon[2701335]: [INFO] [10-13|10:57:48.165] Beginning downloaded blocks insertion\r\nOct 13 10:57:48 erigon[2701335]: [INFO] [10-13|10:57:48.165] [EngineBlockDownloader] Finished downloading blocks from=18341020 to=18341021\r\nOct 13 10:57:48 erigon[2701335]: [INFO] [10-13|10:57:48.166] [EngineBlockDownloader] block verification skipped\r\nOct 13 10:58:00 erigon[2701335]: [INFO] [10-13|10:58:00.241] [NewPayload] Handling new payload        height=18341023 hash=0x5509b0c6feee955843659c25adb82289d6f7125f8bfef994dfc8854db8371e67\r\nOct 13 10:58:12 erigon[2701335]: [INFO] [10-13|10:58:12.089] [NewPayload] Handling new payload        height=18341024 hash=0x3638f064c1edc17453653d4a4d8148458e35eecbcde2dc17f0d06d40381a7046\r\nOct 13 10:58:24 erigon[2701335]: [INFO] [10-13|10:58:24.897] [NewPayload] Handling new payload        height=18341025 hash=0x6b0701eae1bf5697dfef5c2fc5e75d0af04be947d82b13bb9df80f281cf2f0d9\r\nOct 13 10:58:36 erigon[2701335]: [INFO] [10-13|10:58:36.035] [NewPayload] Handling new payload        height=18341026 hash=0xbcda834a3bf1df27d698f06baf44fefb375346174daf671963cd6ac1f789e0d9\r\nOct 13 10:58:48 erigon[2701335]: [INFO] [10-13|10:58:48.102] [NewPayload] Handling new payload        height=18341027 hash=0x3e0d94a0e75b212dea8e5c92c92655b09ebeb88abae62011cc7cf99fbdfa21db\r\nOct 13 10:58:59 erigon[2701335]: [INFO] [10-13|10:58:59.606] [NewPayload] Handling new payload        height=18341028 hash=0xdf3d45bce1aec7b871a60ec5825ff7af30a4a5347885b35471b1a1942f9b294a\r\nOct 13 10:59:11 erigon[2701335]: [INFO] [10-13|10:59:11.849] [NewPayload] Handling new payload        height=18341029 hash=0x7410c2678ac1f69f05f4d01eda77a9e0fc468fb0961f9dd1d79e4d11eb265556\r\nOct 13 10:59:24 erigon[2701335]: [INFO] [10-13|10:59:24.712] [NewPayload] Handling new payload        height=18341030 hash=0x954c34f25ea89a8a18b1084f7a09f31782d42c0b8fa8f183572b17f5b11ffcc4\r\nOct 13 10:59:31 erigon[2701335]: [INFO] [10-13|10:59:31.555] [p2p] GoodPeers                          eth68=32 eth67=32 eth66=1\r\nOct 13 10:59:32 erigon[2701335]: [INFO] [10-13|10:59:32.560] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=3.3GB sys=9.7GB\r\nOct 13 10:59:37 erigon[2701335]: [INFO] [10-13|10:59:37.003] [NewPayload] Handling new payload        height=18341031 hash=0x983c08b0b1d66e89e4512ae900a5cbcc8405ff99d773f4ee584b403d909e7b51\r\n```\r\nTeku log (for reference only): \r\n```\r\nOct 13 10:57:48 teku[3223992]: 10:57:48.298 INFO  - Syncing completed\r\nOct 13 10:58:00 teku[3223992]: 10:58:00.345 WARN  - Unable to execute the current chain head block payload because the Execution Client is syncing. Activating optimistic sync of the beacon chain node\r\nOct 13 10:58:00 teku[3223992]: 10:58:00.707 INFO  - Syncing     *** Target slot: 7530888, Head slot: 7530888, Waiting for execution layer sync, Connected peers: 50\r\nOct 13 10:58:11 teku[3223992]: 10:58:11.021 INFO  - Syncing     *** Target slot: 7530889, Head slot: 7530888, Waiting for execution layer sync, Connected peers: 69\r\nOct 13 10:58:23 teku[3223992]: 10:58:23.046 INFO  - Syncing     *** Target slot: 7530890, Head slot: 7530889, Waiting for execution layer sync, Connected peers: 82\r\nOct 13 10:58:35 teku[3223992]: 10:58:35.048 INFO  - Syncing     *** Target slot: 7530891, Head slot: 7530890, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 10:58:47 teku[3223992]: 10:58:47.051 INFO  - Syncing     *** Target slot: 7530892, Head slot: 7530891, Waiting for execution layer sync, Connected peers: 98\r\nOct 13 10:58:59 teku[3223992]: 10:58:59.054 INFO  - Syncing     *** Target slot: 7530893, Head slot: 7530892, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 10:59:11 teku[3223992]: 10:59:11.062 INFO  - Syncing     *** Target slot: 7530894, Head slot: 7530893, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 10:59:23 teku[3223992]: 10:59:23.057 INFO  - Syncing     *** Target slot: 7530895, Head slot: 7530894, Waiting for execution layer sync, Connected peers: 98\r\nOct 13 10:59:35 teku[3223992]: 10:59:35.057 INFO  - Syncing     *** Target slot: 7530896, Head slot: 7530895, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 10:59:47 teku[3223992]: 10:59:47.062 INFO  - Syncing     *** Target slot: 7530897, Head slot: 7530896, Waiting for execution layer sync, Connected peers: 100\r\nOct 13 10:59:59 teku[3223992]: 10:59:59.067 INFO  - Syncing     *** Target slot: 7530898, Head slot: 7530897, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:00:11 teku[3223992]: 11:00:11.064 INFO  - Syncing     *** Target slot: 7530899, Head slot: 7530898, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:00:23 teku[3223992]: 11:00:23.061 INFO  - Syncing     *** Target slot: 7530900, Head slot: 7530899, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:00:35 teku[3223992]: 11:00:35.066 INFO  - Syncing     *** Target slot: 7530901, Head slot: 7530900, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:00:47 teku[3223992]: 11:00:47.075 INFO  - Syncing     *** Target slot: 7530902, Head slot: 7530901, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:00:59 teku[3223992]: 11:00:59.069 INFO  - Syncing     *** Target slot: 7530903, Head slot: 7530902, Waiting for execution layer sync, Connected peers: 98\r\nOct 13 11:01:11 teku[3223992]: 11:01:11.070 INFO  - Syncing     *** Target slot: 7530904, Head slot: 7530903, Waiting for execution layer sync, Connected peers: 98\r\nOct 13 11:01:23 teku[3223992]: 11:01:23.105 INFO  - Syncing     *** Target slot: 7530905, Head slot: 7530904, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:01:35 teku[3223992]: 11:01:35.080 INFO  - Syncing     *** Target slot: 7530906, Head slot: 7530905, Waiting for execution layer sync, Connected peers: 100\r\nOct 13 11:01:47 teku[3223992]: 11:01:47.070 INFO  - Syncing     *** Target slot: 7530907, Head slot: 7530906, Waiting for execution layer sync, Connected peers: 100\r\nOct 13 11:01:59 teku[3223992]: 11:01:59.072 INFO  - Syncing     *** Target slot: 7530908, Head slot: 7530907, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:02:11 teku[3223992]: 11:02:11.092 INFO  - Syncing     *** Target slot: 7530909, Head slot: 7530908, Waiting for execution layer sync, Connected peers: 98\r\nOct 13 11:02:23 teku[3223992]: 11:02:23.076 INFO  - Syncing     *** Target slot: 7530910, Head slot: 7530909, Waiting for execution layer sync, Connected peers: 100\r\nOct 13 11:02:35 teku[3223992]: 11:02:35.078 INFO  - Syncing     *** Target slot: 7530911, Head slot: 7530910, Waiting for execution layer sync, Connected peers: 100\r\nOct 13 11:02:35 teku[3223992]: 11:02:35.502 INFO  - Epoch Event *** Epoch: 235341, Justified checkpoint: 235339, Finalized checkpoint: 235338, Finalized root: f1be2435874a7238e2e3e499f9780c3150f78238ba8e793badab021f65e77db0\r\nOct 13 11:02:51 teku[3223992]: 11:02:51.927 INFO  - Syncing     *** Target slot: 7530912, Head slot: 7530911, Waiting for execution layer sync, Connected peers: 100\r\nOct 13 11:02:59 teku[3223992]: 11:02:59.082 INFO  - Syncing     *** Target slot: 7530913, Head slot: 7530912, Waiting for execution layer sync, Connected peers: 99\r\nOct 13 11:03:00 teku[3223992]: 11:03:00.575 INFO  - Syncing completed\r\nOct 13 11:03:12 teku[3223992]: 11:03:12.138 WARN  - Unable to execute the current chain head block payload because the Execution Client is syncing. Activating optimistic sync of the beacon chain node\r\n\r\n```\r\n\r\nAs new versions were released in the meantime we will continue to try these...\r\n\r\n---\r\nUpdate:\r\n-  same as above also happens with `2.52.4` \r\n- We will update Teku now as `23.10.0` added support for certain messages and above issue might be related to that\r\n\r\nUpdate 2:\r\n- after upgrading Teku to `23.10.0` the `full` nodes are still not able to sync and teku won't connect, but normal `archive` nodes are able to work again though. This however seems to be unrelated to the issue in this ticket and I just updated the comment in case others face similar issues\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1761331639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1761589100",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1761589100",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1761589100,
    "node_id": "IC_kwDOC0FsAM5o_7ds",
    "user": {
      "login": "RatanRSur",
      "id": 4733314,
      "node_id": "MDQ6VXNlcjQ3MzMzMTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4733314?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RatanRSur",
      "html_url": "https://github.com/RatanRSur",
      "followers_url": "https://api.github.com/users/RatanRSur/followers",
      "following_url": "https://api.github.com/users/RatanRSur/following{/other_user}",
      "gists_url": "https://api.github.com/users/RatanRSur/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RatanRSur/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RatanRSur/subscriptions",
      "organizations_url": "https://api.github.com/users/RatanRSur/orgs",
      "repos_url": "https://api.github.com/users/RatanRSur/repos",
      "events_url": "https://api.github.com/users/RatanRSur/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RatanRSur/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-13T14:10:32Z",
    "updated_at": "2023-10-13T14:10:32Z",
    "author_association": "NONE",
    "body": "also seeing same new behavior after updating",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1761589100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1779189640",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1779189640",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1779189640,
    "node_id": "IC_kwDOC0FsAM5qDEeI",
    "user": {
      "login": "c0deright",
      "id": 20477825,
      "node_id": "MDQ6VXNlcjIwNDc3ODI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/20477825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/c0deright",
      "html_url": "https://github.com/c0deright",
      "followers_url": "https://api.github.com/users/c0deright/followers",
      "following_url": "https://api.github.com/users/c0deright/following{/other_user}",
      "gists_url": "https://api.github.com/users/c0deright/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/c0deright/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/c0deright/subscriptions",
      "organizations_url": "https://api.github.com/users/c0deright/orgs",
      "repos_url": "https://api.github.com/users/c0deright/repos",
      "events_url": "https://api.github.com/users/c0deright/events{/privacy}",
      "received_events_url": "https://api.github.com/users/c0deright/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-25T12:41:56Z",
    "updated_at": "2023-10-25T12:41:56Z",
    "author_association": "NONE",
    "body": "Still not syncing with `v.2.52.5`.\r\n\r\nThe error is gone, the log indicates erigon is downloading recent blocks but it skips block verification and the `eth_blockNumber` api call returns a block number from 3 weeks ago when we upgraded from `v2.48.1` to `2.50.x`.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1779189640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1785447917",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1785447917",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1785447917,
    "node_id": "IC_kwDOC0FsAM5qa8Xt",
    "user": {
      "login": "qwertzlbert",
      "id": 19959427,
      "node_id": "MDQ6VXNlcjE5OTU5NDI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19959427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qwertzlbert",
      "html_url": "https://github.com/qwertzlbert",
      "followers_url": "https://api.github.com/users/qwertzlbert/followers",
      "following_url": "https://api.github.com/users/qwertzlbert/following{/other_user}",
      "gists_url": "https://api.github.com/users/qwertzlbert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qwertzlbert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qwertzlbert/subscriptions",
      "organizations_url": "https://api.github.com/users/qwertzlbert/orgs",
      "repos_url": "https://api.github.com/users/qwertzlbert/repos",
      "events_url": "https://api.github.com/users/qwertzlbert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qwertzlbert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-30T15:19:08Z",
    "updated_at": "2023-10-30T15:19:08Z",
    "author_association": "NONE",
    "body": "I just upgrade to `v2.53.2` and it seems like the nodes are working again. Erigon is syncing again and Consensus layer client is also able to connect again. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1785447917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1903527934",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8362#issuecomment-1903527934",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8362",
    "id": 1903527934,
    "node_id": "IC_kwDOC0FsAM5xdYf-",
    "user": {
      "login": "odilatinam",
      "id": 157356405,
      "node_id": "U_kgDOCWERdQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/157356405?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/odilatinam",
      "html_url": "https://github.com/odilatinam",
      "followers_url": "https://api.github.com/users/odilatinam/followers",
      "following_url": "https://api.github.com/users/odilatinam/following{/other_user}",
      "gists_url": "https://api.github.com/users/odilatinam/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/odilatinam/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/odilatinam/subscriptions",
      "organizations_url": "https://api.github.com/users/odilatinam/orgs",
      "repos_url": "https://api.github.com/users/odilatinam/repos",
      "events_url": "https://api.github.com/users/odilatinam/events{/privacy}",
      "received_events_url": "https://api.github.com/users/odilatinam/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-22T08:57:25Z",
    "updated_at": "2024-01-22T09:08:24Z",
    "author_association": "NONE",
    "body": "I had a backup pruned node crash in mid December. When I upgraded from v2.48.1 to v2.57.0 I ran into a similar issue, except it doesn't resolve itself and just keeps going in a loop. My main archive node was ok with the same upgrade (but it didn't crash in mid December and was up to date before upgrading on January 20).\r\n\r\n```\r\nJan 22 08:37:46 p5530 erigon[2600]: [INFO] [01-22|08:37:46.215] [3/12 Senders] Recovery                  block_number=19044799 ch=0/10000\r\nJan 22 08:38:16 p5530 erigon[2600]: [INFO] [01-22|08:38:16.215] [3/12 Senders] Recovery                  block_number=19051026 ch=0/10000\r\nJan 22 08:38:46 p5530 erigon[2600]: [INFO] [01-22|08:38:46.215] [3/12 Senders] Recovery                  block_number=19057009 ch=0/10000\r\nJan 22 08:39:04 p5530 erigon[2600]: [INFO] [01-22|08:39:04.800] [3/12 Senders] Flushed buffer file       name=erigon-sortable-buf-4049101880\r\nJan 22 08:39:06 p5530 erigon[2600]: [INFO] [01-22|08:39:06.260] [3/12 Senders] DONE                      in=17m20.046197842s\r\nJan 22 08:39:06 p5530 erigon[2600]: [INFO] [01-22|08:39:06.262] [4/12 Execution] Blocks execution        from=18799999 to=19061054\r\nJan 22 08:39:06 p5530 erigon[2600]: [EROR] [01-22|08:39:06.265] [4/12 Execution] Empty block             blocknum=18800000\r\nJan 22 08:39:06 p5530 erigon[2600]: [INFO] [01-22|08:39:06.266] [4/12 Execution] Completed on            block=18799999\r\nJan 22 08:39:06 p5530 erigon[2600]: [WARN] [01-22|08:39:06.268] bad forkchoice                           head=0xf144cf0a6aaca8f32498d659ef7c58f4256d2397dca536b47bd0cb7a8290fa4b hash=0x5b84253ced73b9334fae258dd0ad2fcb89bc8ce07492165eb1305f9815e36fef\r\nJan 22 08:39:14 p5530 erigon[2600]: [INFO] [01-22|08:39:14.145] [NewPayload] Handling new payload        height=19061142 hash=0x22ea0222c3785fe5e4ef492f70932bd3076c89848924de2261b329813e6799ab\r\nJan 22 08:39:14 p5530 erigon[2600]: [INFO] [01-22|08:39:14.146] [EngineBlockDownloader] Downloading PoS headers... hash=0x7b39cc0da80fe360d870cfae80584fd80dbb85615b8fab9e73cbc24ad9ab3fc3 requestId=0\r\nJan 22 08:40:12 p5530 erigon[2600]: [INFO] [01-22|08:40:12.983] [NewPayload] Handling new payload        height=19061143 hash=0x5520b0e749e538ca8e07c6d32e66f7c37b8c23c9de8ae34e03589e178ef32966\r\nJan 22 08:40:12 p5530 erigon[2600]: [INFO] [01-22|08:40:12.983] [NewPayload] Handling new payload        height=19061144 hash=0x9c5d061944495dc797e0c87907607a2e116ffd43fb9cb29ddbe3c321606f1275\r\nJan 22 08:40:12 p5530 erigon[2600]: [INFO] [01-22|08:40:12.984] [NewPayload] Handling new payload        height=19061145 hash=0xc9077d37f3e1a6b136bfcdc104a546c3bccb002e2b102ffcef31337cb56a58cb\r\nJan 22 08:40:13 p5530 erigon[2600]: [INFO] [01-22|08:40:13.006] [EngineBlockDownloader] Processing bodies... from=19061054 to=19061141\r\nJan 22 08:40:13 p5530 erigon[2600]: [INFO] [01-22|08:40:13.040] [NewPayload] Handling new payload        height=19061146 hash=0x050f353169056d46d8e7693a749069ee5e0e8f5590eb7d5d100ddb14c9be14f0\r\nJan 22 08:40:13 p5530 erigon[2600]: [INFO] [01-22|08:40:13.299] [NewPayload] Handling new payload        height=19061147 hash=0xc22bf81aef535c6b8df157f6e23c080ab985d82bfecb52ed9898e329a4fb373a\r\nJan 22 08:40:18 p5530 erigon[2600]: [INFO] [01-22|08:40:18.586] [p2p] GoodPeers                          eth67=1 eth68=1\r\nJan 22 08:40:20 p5530 erigon[2600]: [INFO] [01-22|08:40:20.787] [EngineBlockDownloader] Processed        highest=19061141\r\nJan 22 08:40:20 p5530 erigon[2600]: [INFO] [01-22|08:40:20.787] Beginning downloaded blocks insertion\r\nJan 22 08:40:20 p5530 erigon[2600]: [INFO] [01-22|08:40:20.941] [EngineBlockDownloader] Finished downloading blocks from=19061054 to=19061141\r\nJan 22 08:40:21 p5530 erigon[2600]: [INFO] [01-22|08:40:21.003] [EngineBlockDownloader] block verification skipped\r\nJan 22 08:40:21 p5530 erigon[2600]: [INFO] [01-22|08:40:21.756] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=4.9GB sys=9.5GB\r\nJan 22 08:40:25 p5530 erigon[2600]: [INFO] [01-22|08:40:25.730] [NewPayload] Handling new payload        height=19061148 hash=0x346cf410087d59d0c0eeac81ac68c5491d3ff4e6e74201e932c273cc470883f4\r\nJan 22 08:40:25 p5530 erigon[2600]: [INFO] [01-22|08:40:25.730] [EngineBlockDownloader] Downloading PoS headers... hash=0xc22bf81aef535c6b8df157f6e23c080ab985d82bfecb52ed9898e329a4fb373a requestId=0\r\nJan 22 08:40:29 p5530 erigon[2600]: [INFO] [01-22|08:40:29.018] [EngineBlockDownloader] Processed        highest=19061147\r\nJan 22 08:40:29 p5530 erigon[2600]: [INFO] [01-22|08:40:29.018] Beginning downloaded blocks insertion\r\nJan 22 08:40:29 p5530 erigon[2600]: [INFO] [01-22|08:40:29.087] [EngineBlockDownloader] Finished downloading blocks from=19061142 to=19061147\r\nJan 22 08:40:29 p5530 erigon[2600]: [INFO] [01-22|08:40:29.149] [EngineBlockDownloader] block verification skipped\r\nJan 22 08:40:36 p5530 erigon[2600]: [INFO] [01-22|08:40:36.432] [NewPayload] Handling new payload        height=19061149 hash=0xa3e1203c47a31d11eb504b3f24eff245e443073514b3b9255656076e1b4ab505\r\nJan 22 08:40:46 p5530 erigon[2600]: [INFO] [01-22|08:40:46.962] [3/12 Senders] Started                   from=18799999 to=19061149\r\nJan 22 08:40:46 p5530 erigon[2600]: [WARN] [01-22|08:40:46.962] [3/12 Senders] ReadBodyWithTransactions can't find block num=18800000 hash=0x15fca36cac3a1adddc81cd5032b748d883cad94dc1fe192af5ab3779e8375511\r\nJan 22 08:40:46 p5530 erigon[2600]: [WARN] [01-22|08:40:46.962] [3/12 Senders] ReadBodyWithTransactions can't find block num=18800001 hash=0xe68ce66b7c72b67c6a7628829c8ffa71bed7914da025cbd10e127dc1cc40355a\r\nJan 22 08:40:46 p5530 erigon[2600]: [WARN] [01-22|08:40:46.962] [3/12 Senders] ReadBodyWithTransactions can't find block num=18800002 hash=0xcc9dc5f7b2b90758471f494bab7c615ac0073ff758026c2966408462dbfcd3d6\r\n```\r\n\r\nBefore I delete the chaindata and rebuild it from snapshots, is there something you want me to try? This is the backup pruned node service\r\n\r\n```\r\n[Service]\r\nUser=erigon\r\nGroup=erigon\r\nType=simple\r\nRestart=always\r\nRestartSec=5\r\nExecStart=/usr/local/bin/erigon \\\r\n  --chain=mainnet \\\r\n  --datadir=/var/lib/eth/erigon \\\r\n  --http.api=engine,eth,net \\\r\n  --authrpc.jwtsecret=/var/lib/jwtsecret/jwt.hex \\\r\n  --private.api.addr= \\\r\n  --torrent.port=42068 \\\r\n  --torrent.upload.rate=25mb \\\r\n  --torrent.download.rate=200mb \\\r\n  --torrent.staticpeers=enode://669772c10d9bdbea9096abb904608f23954c7e50c6fc5d23c255ad2137de3b1869c4d7ed073097c1c2bff98ab9285bae99ca342bee935ee72793dcaab0fd6752@192.168.8.22:42069 \\\r\n  --torrent.maxpeers=1 \\\r\n  --staticpeers=enode://669772c10d9bdbea9096abb904608f23954c7e50c6fc5d23c255ad2137de3b1869c4d7ed073097c1c2bff98ab9285bae99ca342bee935ee72793dcaab0fd6752@192.168.8.22:30303 \\\r\n  --maxpeers=1 \\\r\n  --port=30301 \\\r\n  --p2p.allowed-ports=30301,30302 \\\r\n  --prune=htcr \\\r\n  --metrics\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1903527934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8360",
  "id": 1925399044,
  "node_id": "I_kwDOC0FsAM5yw0IE",
  "number": 8360,
  "title": "`eth_syncing` returns `false` when syncing",
  "user": {
    "login": "shunsukew",
    "id": 28953860,
    "node_id": "MDQ6VXNlcjI4OTUzODYw",
    "avatar_url": "https://avatars.githubusercontent.com/u/28953860?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shunsukew",
    "html_url": "https://github.com/shunsukew",
    "followers_url": "https://api.github.com/users/shunsukew/followers",
    "following_url": "https://api.github.com/users/shunsukew/following{/other_user}",
    "gists_url": "https://api.github.com/users/shunsukew/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shunsukew/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shunsukew/subscriptions",
    "organizations_url": "https://api.github.com/users/shunsukew/orgs",
    "repos_url": "https://api.github.com/users/shunsukew/repos",
    "events_url": "https://api.github.com/users/shunsukew/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shunsukew/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-10-04T04:48:22Z",
  "updated_at": "2023-10-13T06:35:04Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `./erigon --version`\r\n`erigon version 2.49.2-stable`\r\n\r\nOS & Version: Windows/Linux/OSX\r\n`Linux`\r\n\r\nErigon Command (with flags/config):\r\n```\r\n/usr/local/bin/erigon --chain=sepolia \\\r\n  --identity=beaver-dev-ba2bd1c4 \\\r\n  --datadir=/data/sepolia \\\r\n  --torrent.download.rate=20mb \\\r\n  --maxpeers 15 \\\r\n  --private.api.addr=localhost:9090 \\\r\n  --metrics.addr=0.0.0.0 \\\r\n  --metrics.port=6060 \\\r\n  --pprof \\\r\n  --pprof.addr=0.0.0.0 \\\r\n  --pprof.port=6061 \\\r\n  --internalcl\r\n```\r\n\r\nConcensus Layer:\r\n- Internal CL (Caplin)\r\n- Also, with Lighthouse, encountering the same\r\n\r\nConcensus Layer Command (with flags/config):\r\n```\r\n/usr/local/bin/lighthouse bn --network=sepolia \\\r\n  --datadir=/data/lighthouse \\\r\n  --http \\\r\n  --http-port 5052 \\\r\n  --execution-endpoint http://localhost:8551 \\\r\n  --execution-jwt /data/erigon/jwt.hex \\\r\n  --checkpoint-sync-url https://checkpoint-sync.sepolia.ethpandaops.io \\\r\n  --disable-deposit-contract-sync \\\r\n  --target-peers 15\r\n```\r\n\r\nChain/Network: Sepolia\r\n\r\n#### Expected behaviour\r\nAs defined [RPC API spec](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_syncing), `eth_syncing` should return syncing status (e.g. `currentBlock`, `highestBlock `).\r\n\r\n#### Actual behaviour\r\nAPI returns `false` even though the node is still syncing.\r\n\r\n#### Steps to reproduce the behaviour\r\n`curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\": \"2.0\", \"method\": \"eth_syncing\", \"params\": [], \"id\":1}' $NODE_ENDPONT`\r\n\r\n<img width=\"1455\" alt=\"Screen Shot 2023-10-04 at 13 52 50\" src=\"https://github.com/ledgerwatch/erigon/assets/28953860/aff5a007-8ada-440e-9723-0ede6b0c4e07\">\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1752007036",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8360#issuecomment-1752007036",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360",
    "id": 1752007036,
    "node_id": "IC_kwDOC0FsAM5obYF8",
    "user": {
      "login": "mbwmbw1337",
      "id": 6092663,
      "node_id": "MDQ6VXNlcjYwOTI2NjM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6092663?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mbwmbw1337",
      "html_url": "https://github.com/mbwmbw1337",
      "followers_url": "https://api.github.com/users/mbwmbw1337/followers",
      "following_url": "https://api.github.com/users/mbwmbw1337/following{/other_user}",
      "gists_url": "https://api.github.com/users/mbwmbw1337/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mbwmbw1337/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mbwmbw1337/subscriptions",
      "organizations_url": "https://api.github.com/users/mbwmbw1337/orgs",
      "repos_url": "https://api.github.com/users/mbwmbw1337/repos",
      "events_url": "https://api.github.com/users/mbwmbw1337/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mbwmbw1337/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-08T11:45:44Z",
    "updated_at": "2023-10-08T11:45:44Z",
    "author_association": "NONE",
    "body": "I believe this only happens *after* the initial sync, i.e. if you sync once reach the chain head then fall behind and re-sync it'll show as false. I have observed the same behaviour you are reporting.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1752007036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1756712042",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8360#issuecomment-1756712042",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360",
    "id": 1756712042,
    "node_id": "IC_kwDOC0FsAM5otUxq",
    "user": {
      "login": "shunsukew",
      "id": 28953860,
      "node_id": "MDQ6VXNlcjI4OTUzODYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/28953860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shunsukew",
      "html_url": "https://github.com/shunsukew",
      "followers_url": "https://api.github.com/users/shunsukew/followers",
      "following_url": "https://api.github.com/users/shunsukew/following{/other_user}",
      "gists_url": "https://api.github.com/users/shunsukew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shunsukew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shunsukew/subscriptions",
      "organizations_url": "https://api.github.com/users/shunsukew/orgs",
      "repos_url": "https://api.github.com/users/shunsukew/repos",
      "events_url": "https://api.github.com/users/shunsukew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shunsukew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-11T03:34:07Z",
    "updated_at": "2023-10-11T03:39:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "I just started new node process from 0 block and now getting below response.\r\nPlease let me see after some time again.\r\n<img width=\"1512\" alt=\"Screen Shot 2023-10-11 at 12 29 33\" src=\"https://github.com/ledgerwatch/erigon/assets/28953860/54ee94ee-80fa-4dd7-b46f-ca34962d655c\">\r\n\r\n> I believe this only happens after the initial sync, i.e. if you sync once reach the chain head then fall behind and re-sync it'll show as false. I have observed the same behaviour you are reporting.\r\n\r\nI see, response is expected to be syncing status whenever node is syncing blocks (not reaching to the top).\r\nThis should be remained as an issue ticket, I will update info once finding something new. Thank you.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1756712042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1760979976",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8360#issuecomment-1760979976",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8360",
    "id": 1760979976,
    "node_id": "IC_kwDOC0FsAM5o9mwI",
    "user": {
      "login": "shunsukew",
      "id": 28953860,
      "node_id": "MDQ6VXNlcjI4OTUzODYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/28953860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shunsukew",
      "html_url": "https://github.com/shunsukew",
      "followers_url": "https://api.github.com/users/shunsukew/followers",
      "following_url": "https://api.github.com/users/shunsukew/following{/other_user}",
      "gists_url": "https://api.github.com/users/shunsukew/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shunsukew/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shunsukew/subscriptions",
      "organizations_url": "https://api.github.com/users/shunsukew/orgs",
      "repos_url": "https://api.github.com/users/shunsukew/repos",
      "events_url": "https://api.github.com/users/shunsukew/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shunsukew/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-13T06:35:04Z",
    "updated_at": "2023-10-13T06:35:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Even if the node hasn't reached to the chain head once, RPC returns `false` when still syncing blocks.\r\n<img width=\"1512\" alt=\"Screen Shot 2023-10-13 at 12 22 45\" src=\"https://github.com/ledgerwatch/erigon/assets/28953860/d85d6b1e-c3c4-469e-99c6-2effa5edc122\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1760979976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

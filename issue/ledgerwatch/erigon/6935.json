{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/6935",
  "id": 1596132554,
  "node_id": "I_kwDOC0FsAM5fIwzK",
  "number": 6935,
  "title": "Downloading/Processing block bodies - Performance really bad with latest version 9c9449a on Eth/Mainnet",
  "user": {
    "login": "J-A-M-E-5",
    "id": 26421539,
    "node_id": "MDQ6VXNlcjI2NDIxNTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/J-A-M-E-5",
    "html_url": "https://github.com/J-A-M-E-5",
    "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
    "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
    "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
    "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
    "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
    "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-02-23T02:56:46Z",
  "updated_at": "2023-02-23T16:23:51Z",
  "closed_at": "2023-02-23T16:23:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Has been working fine apart from some internal consensus layer issues which led me to switch back to external CL. Normally on external CL being a few hundred blocks behind would catch up in a couple of minutes. After pulling and compiling latest version today it is really terrible performance. Seems to be 5/15 Downloading/processing block bodies that is bad. Have seen a few mentions in code of P2P changes etc... Logs attached.\r\n\r\n#### System information\r\n\r\nErigon version: erigon version 2.39.0-dev-9c9449a0\r\n\r\nOS & Version: Linux\r\n\r\nCommit hash: 9c9449a0\r\n\r\nConsensus Layer: External Nimbus, working fine with Geth.\r\n\r\nChain/Network: Mainnet/Eth.\r\n\r\n#### Expected behaviour\r\nCatch up to head within a few minutes max.\r\n\r\n#### Actual behaviour\r\nIt never catches up.\r\n\r\n#### Log\r\n\r\n````\r\n[INFO] [02-23|02:00:27.288] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:00:27.289] [2/15 Headers] Fork choice: chain extension from=16687857 to=16687992\r\n[INFO] [02-23|02:00:27.290] [5/15 Bodies] Processing bodies...       from=16687857 to=16687992\r\n[INFO] [02-23|02:00:54.968] [txpool] stat                            block=16687857 pending=8595 baseFee=1262 queued=29633 alloc=3.6GB sys=5.9GB\r\n[INFO] [02-23|02:01:52.350] [p2p] GoodPeers                          eth66=15 eth67=74 eth68=72\r\n[INFO] [02-23|02:01:54.974] [txpool] stat                            block=16687857 pending=8892 baseFee=1270 queued=29806 alloc=2.8GB sys=5.9GB\r\n[INFO] [02-23|02:02:54.967] [txpool] stat                            block=16687857 pending=9167 baseFee=1283 queued=29958 alloc=3.3GB sys=5.9GB\r\n[INFO] [02-23|02:03:52.350] [p2p] GoodPeers                          eth67=75 eth66=16 eth68=73\r\n[INFO] [02-23|02:03:54.990] [txpool] stat                            block=16687857 pending=9528 baseFee=1296 queued=30000 alloc=2.8GB sys=5.9GB\r\n[INFO] [02-23|02:04:54.968] [txpool] stat                            block=16687857 pending=9980 baseFee=1311 queued=30000 alloc=3.6GB sys=5.9GB\r\n[INFO] [02-23|02:05:52.352] [p2p] GoodPeers                          eth66=16 eth67=75 eth68=74\r\n[INFO] [02-23|02:05:54.980] [txpool] stat                            block=16687857 pending=10000 baseFee=1318 queued=30000 alloc=2.8GB sys=5.9GB\r\n[INFO] [02-23|02:06:54.970] [txpool] stat                            block=16687857 pending=10000 baseFee=1317 queued=30000 alloc=3.4GB sys=5.9GB\r\n[INFO] [02-23|02:07:52.349] [p2p] GoodPeers                          eth67=76 eth66=16 eth68=72\r\n[INFO] [02-23|02:07:54.968] [txpool] stat                            block=16687857 pending=10000 baseFee=1317 queued=30000 alloc=2.8GB sys=5.9GB\r\n[INFO] [02-23|02:08:54.960] [txpool] stat                            block=16687857 pending=10000 baseFee=1322 queued=30000 alloc=3.4GB sys=5.9GB\r\n[INFO] [02-23|02:09:52.349] [p2p] GoodPeers                          eth67=78 eth66=13 eth68=71\r\n[INFO] [02-23|02:09:54.976] [txpool] stat                            block=16687857 pending=10000 baseFee=1330 queued=30000 alloc=2.8GB sys=5.9GB\r\n[INFO] [02-23|02:10:54.970] [txpool] stat                            block=16687857 pending=10000 baseFee=1334 queued=30000 alloc=4.1GB sys=5.9GB\r\n[INFO] [02-23|02:11:34.041] [5/15 Bodies] Writing block bodies       block_num=16687863 remaining=129 alloc=4.7GB sys=5.9GB\r\n[INFO] [02-23|02:11:47.291] [5/15 Bodies] Downloading block bodies   block_num=16687974 delivery/sec=674.7KB wasted/sec=0B remaining=35 delivered=121 cache=1.2MB alloc=5.0GB sys=5.9GB\r\n[INFO] [02-23|02:11:48.868] [5/15 Bodies] Processed                  highest=16687992\r\n[INFO] [02-23|02:11:48.869] [5/15 Bodies] DONE                       in=11m21.578073636s\r\n[INFO] [02-23|02:11:48.869] [6/15 Senders] Started                   from=16687857 to=16687992\r\n[INFO] [02-23|02:11:49.440] [7/15 Execution] Blocks execution        from=16687857 to=16687992\r\n[INFO] [02-23|02:11:52.349] [p2p] GoodPeers                          eth68=70 eth67=79 eth66=11\r\n[INFO] [02-23|02:11:55.056] [txpool] stat                            block=16687857 pending=10000 baseFee=1338 queued=30000 alloc=5.3GB sys=5.9GB\r\n[INFO] [02-23|02:12:09.679] [7/15 Execution] Executed blocks         number=16687963 blk/s=5.2 tx/s=640.7 Mgas/s=78.9 gasState=0.00 batch=2.0MB alloc=3.5GB sys=5.9GB\r\n[INFO] [02-23|02:12:15.218] [7/15 Execution] Completed on            block=16687992\r\n[INFO] [02-23|02:12:15.218] [8/15 HashState] Promoting plain state   from=16687857 to=16687992\r\n[INFO] [02-23|02:12:15.218] [8/15 HashState] Incremental promotion   from=16687857 to=16687992 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-23|02:12:15.904] [8/15 HashState] Incremental promotion   from=16687857 to=16687992 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-23|02:12:17.999] [8/15 HashState] Incremental promotion   from=16687857 to=16687992 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-23|02:12:23.021] [9/15 IntermediateHashes] Generating intermediate hashes from=16687857 to=16687992\r\n[INFO] [02-23|02:12:39.120] [10/15 CallTraces] Pruned call trace intermediate table from=16597857 to=16597991\r\n[INFO] [02-23|02:12:52.348] [13/15 LogIndex] processing              from=16687858 to=16687992\r\n[INFO] [02-23|02:12:54.969] [txpool] stat                            block=16687857 pending=10000 baseFee=1393 queued=30000 alloc=5.1GB sys=6.0GB\r\n[INFO] [02-23|02:13:00.621] Commit cycle                             in=2.308544886s\r\n[INFO] [02-23|02:13:00.621] Timings (slower than 50ms)               Bodies=11m21.578s Senders=571ms Execution=25.777s HashState=7.802s IntermediateHashes=15.926s CallTraces=4.563s AccountHistoryIndex=3.208s StorageHistoryIndex=5.629s LogIndex=3.67s TxLookup=2.292s\r\n[INFO] [02-23|02:13:00.621] Tables                                   PlainState=86.6GB AccountChangeSet=181.5GB StorageChangeSet=276.0GB BlockTransaction=62.0GB TransactionLog=531.6GB FreeList=120.5MB ReclaimableSpace=120.5GB\r\n[INFO] [02-23|02:13:00.621] RPC Daemon notified of new headers       from=16687857 to=16687992 hash=0x208d0c93904487df9433cc23445438686b539d25e130d05f1f88521ea5c18582 header sending=262.637Âµs log sending=576ns\r\n[INFO] [02-23|02:13:08.210] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:13:12.109] [2/15 Headers] Handling new payload      height=16688055 hash=0x259ab2d0a7f1c729ce0e566ad1f00fc7dd6e6a2dbeeb01fd83d14185d8661162\r\n[INFO] [02-23|02:13:12.368] [2/15 Headers] Downloading PoS headers... height=16688054 hash=0xb48ce0edff71f0bc771c105bc68f19287df151f5918d4528797ef957f95b9d4a requestId=73\r\n[INFO] [02-23|02:13:14.664] PoS headers verified and saved           requestId=73 fork head=0x49b6f8eff075448ac8d22d732baaacf017d9951b5f053f000d819305c67e2e18\r\n[INFO] [02-23|02:13:14.674] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:13:14.674] [2/15 Headers] Handling new payload      height=16688055 hash=0x259ab2d0a7f1c729ce0e566ad1f00fc7dd6e6a2dbeeb01fd83d14185d8661162\r\n[INFO] [02-23|02:13:14.676] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:13:37.104] [2/15 Headers] Handling new payload      height=16688056 hash=0x1810cc19d836cd75d59e6798c81c3e398e8a534a3fd4675fbcccfe53e5143e79\r\n[INFO] [02-23|02:13:37.111] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:13:37.557] [2/15 Headers] Fork choice: chain extension from=16687992 to=16688056\r\n[INFO] [02-23|02:13:37.559] [5/15 Bodies] Processing bodies...       from=16687992 to=16688056\r\n[INFO] [02-23|02:13:52.349] [p2p] GoodPeers                          eth67=75 eth66=11 eth68=70\r\n[INFO] [02-23|02:14:09.380] [5/15 Bodies] Writing block bodies       block_num=16687993 remaining=63 alloc=3.2GB sys=6.0GB\r\n[INFO] [02-23|02:14:24.409] [txpool] stat                            block=16687992 pending=7570 baseFee=961 queued=27992 alloc=3.3GB sys=6.0GB\r\n[INFO] [02-23|02:14:54.968] [txpool] stat                            block=16687992 pending=7928 baseFee=968 queued=28102 alloc=3.9GB sys=6.0GB\r\n[INFO] [02-23|02:15:52.350] [p2p] GoodPeers                          eth66=12 eth67=75 eth68=74\r\n[INFO] [02-23|02:15:54.983] [txpool] stat                            block=16687992 pending=8379 baseFee=975 queued=28241 alloc=3.0GB sys=6.0GB\r\n[INFO] [02-23|02:16:54.983] [txpool] stat                            block=16687992 pending=9319 baseFee=981 queued=28388 alloc=3.7GB sys=6.0GB\r\n[INFO] [02-23|02:17:52.349] [p2p] GoodPeers                          eth66=13 eth68=74 eth67=82\r\n[INFO] [02-23|02:18:21.856] [txpool] stat                            block=16687992 pending=9665 baseFee=987 queued=28492 alloc=3.1GB sys=6.0GB\r\n[INFO] [02-23|02:18:54.971] [txpool] stat                            block=16687992 pending=9928 baseFee=989 queued=28593 alloc=3.6GB sys=6.0GB\r\n[INFO] [02-23|02:19:52.349] [p2p] GoodPeers                          eth66=13 eth68=74 eth67=83\r\n[INFO] [02-23|02:19:54.967] [txpool] stat                            block=16687992 pending=10000 baseFee=991 queued=28690 alloc=3.0GB sys=6.0GB\r\n[INFO] [02-23|02:20:54.968] [txpool] stat                            block=16687992 pending=10000 baseFee=994 queued=28877 alloc=3.8GB sys=6.0GB\r\n[INFO] [02-23|02:21:52.349] [p2p] GoodPeers                          eth66=13 eth68=75 eth67=84\r\n[INFO] [02-23|02:21:54.966] [txpool] stat                            block=16687992 pending=10000 baseFee=1003 queued=29033 alloc=3.0GB sys=6.0GB\r\n[INFO] [02-23|02:23:10.548] [txpool] stat                            block=16687992 pending=10000 baseFee=1005 queued=29223 alloc=3.7GB sys=6.0GB\r\n[INFO] [02-23|02:23:52.349] [p2p] GoodPeers                          eth67=84 eth66=13 eth68=75\r\n[INFO] [02-23|02:23:54.974] [txpool] stat                            block=16687992 pending=10000 baseFee=1005 queued=29370 alloc=3.0GB sys=6.0GB\r\n[INFO] [02-23|02:24:54.969] [txpool] stat                            block=16687992 pending=10000 baseFee=1010 queued=29512 alloc=3.6GB sys=6.0GB\r\n[INFO] [02-23|02:24:59.640] [5/15 Bodies] Writing block bodies       block_num=16687997 remaining=59 alloc=3.6GB sys=6.0GB\r\n[INFO] [02-23|02:25:04.998] [5/15 Bodies] Processed                  highest=16688056\r\n[INFO] [02-23|02:25:04.998] [5/15 Bodies] DONE                       in=11m27.439523356s\r\n[INFO] [02-23|02:25:04.999] [6/15 Senders] Started                   from=16687992 to=16688056\r\n[INFO] [02-23|02:25:05.304] [7/15 Execution] Blocks execution        from=16687992 to=16688056\r\n[INFO] [02-23|02:25:16.702] [7/15 Execution] Completed on            block=16688056\r\n[INFO] [02-23|02:25:16.702] [8/15 HashState] Promoting plain state   from=16687992 to=16688056\r\n[INFO] [02-23|02:25:16.702] [8/15 HashState] Incremental promotion   from=16687992 to=16688056 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-23|02:25:16.979] [8/15 HashState] Incremental promotion   from=16687992 to=16688056 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-23|02:25:18.149] [8/15 HashState] Incremental promotion   from=16687992 to=16688056 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-23|02:25:19.882] [9/15 IntermediateHashes] Generating intermediate hashes from=16687992 to=16688056\r\n[INFO] [02-23|02:25:27.985] [10/15 CallTraces] Pruned call trace intermediate table from=16597992 to=16598055\r\n[INFO] [02-23|02:25:40.234] Commit cycle                             in=1.610835137s\r\n[INFO] [02-23|02:25:40.234] Timings (slower than 50ms)               Headers=447ms Bodies=11m27.439s Senders=305ms Execution=11.398s HashState=3.179s IntermediateHashes=8.021s CallTraces=2.472s AccountHistoryIndex=2.074s StorageHistoryIndex=2.469s LogIndex=2.365s TxLookup=1.338s\r\n[INFO] [02-23|02:25:40.234] Tables                                   PlainState=86.6GB AccountChangeSet=181.5GB StorageChangeSet=276.0GB BlockTransaction=62.0GB TransactionLog=531.6GB FreeList=120.4MB ReclaimableSpace=120.4GB\r\n[INFO] [02-23|02:25:40.234] RPC Daemon notified of new headers       from=16687992 to=16688056 hash=0x1810cc19d836cd75d59e6798c81c3e398e8a534a3fd4675fbcccfe53e5143e79 header sending=161.071Âµs log sending=517ns\r\n[INFO] [02-23|02:25:45.321] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:25:47.864] [2/15 Headers] Handling new payload      height=16688115 hash=0x3a8b50bce3eec6ce5e1ca44241f7d39e6caf6a2f713a8e614b2de282d125d0ec\r\n[INFO] [02-23|02:25:48.124] [2/15 Headers] Downloading PoS headers... height=16688114 hash=0xc83845f29aaf6900bb05656acc0280324b9be625ae24cbc45a850dbcc1df60a8 requestId=76\r\n[INFO] [02-23|02:25:48.821] PoS headers verified and saved           requestId=76 fork head=0x9a3c347df35fdb52aba6ce78a1c16ac512f6f8bac76bc8d9834963cf5d49b09e\r\n[INFO] [02-23|02:25:48.832] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:25:48.832] [2/15 Headers] Handling new payload      height=16688115 hash=0x3a8b50bce3eec6ce5e1ca44241f7d39e6caf6a2f713a8e614b2de282d125d0ec\r\n[INFO] [02-23|02:25:48.835] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:25:52.349] [p2p] GoodPeers                          eth67=79 eth66=13 eth68=76\r\n[INFO] [02-23|02:25:54.964] [txpool] stat                            block=16688056 pending=2029 baseFee=5375 queued=28728 alloc=3.6GB sys=6.2GB\r\n[INFO] [02-23|02:26:00.412] [2/15 Headers] Handling new payload      height=16688116 hash=0xde01bde997bc4bdeaf445f6481cb57b8b755326c73758a7bcdff175bd2d8843e\r\n[INFO] [02-23|02:26:00.415] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:26:00.756] [2/15 Headers] Fork choice: chain extension from=16688056 to=16688116\r\n[INFO] [02-23|02:26:00.758] [5/15 Bodies] Processing bodies...       from=16688056 to=16688116\r\n[INFO] [02-23|02:26:54.962] [txpool] stat                            block=16688056 pending=2054 baseFee=5772 queued=28872 alloc=4.6GB sys=6.3GB\r\n[INFO] [02-23|02:27:14.541] [snapshots] Blocks Stat                  blocks=16598k indices=16598k alloc=5.1GB sys=6.4GB\r\n[INFO] [02-23|02:27:52.350] [p2p] GoodPeers                          eth67=82 eth66=14 eth68=76\r\n[INFO] [02-23|02:27:54.970] [txpool] stat                            block=16688056 pending=2074 baseFee=6129 queued=28995 alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:28:54.963] [txpool] stat                            block=16688056 pending=2086 baseFee=6490 queued=29148 alloc=3.6GB sys=6.4GB\r\n[INFO] [02-23|02:29:52.349] [p2p] GoodPeers                          eth67=83 eth66=14 eth68=76\r\n[INFO] [02-23|02:29:54.967] [txpool] stat                            block=16688056 pending=2097 baseFee=6842 queued=29287 alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:30:54.967] [txpool] stat                            block=16688056 pending=2113 baseFee=7376 queued=29446 alloc=3.8GB sys=6.4GB\r\n[INFO] [02-23|02:31:52.350] [p2p] GoodPeers                          eth67=83 eth66=14 eth68=76\r\n[INFO] [02-23|02:31:54.968] [txpool] stat                            block=16688056 pending=2129 baseFee=7786 queued=29577 alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:32:54.962] [txpool] stat                            block=16688056 pending=2140 baseFee=8064 queued=29678 alloc=3.6GB sys=6.4GB\r\n[INFO] [02-23|02:33:52.349] [p2p] GoodPeers                          eth66=13 eth67=84 eth68=75\r\n[INFO] [02-23|02:33:54.969] [txpool] stat                            block=16688056 pending=2153 baseFee=8414 queued=29810 alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:34:54.961] [txpool] stat                            block=16688056 pending=2161 baseFee=8729 queued=29934 alloc=3.6GB sys=6.4GB\r\n[INFO] [02-23|02:35:52.350] [p2p] GoodPeers                          eth67=85 eth66=12 eth68=76\r\n[INFO] [02-23|02:35:54.966] [txpool] stat                            block=16688056 pending=2178 baseFee=9075 queued=30000 alloc=3.1GB sys=6.4GB\r\n[INFO] [02-23|02:36:54.963] [txpool] stat                            block=16688056 pending=2193 baseFee=9449 queued=30000 alloc=4.2GB sys=6.4GB\r\n[INFO] [02-23|02:37:11.592] [5/15 Bodies] Writing block bodies       block_num=16688059 remaining=57 alloc=4.4GB sys=6.4GB\r\n[INFO] [02-23|02:37:20.759] [5/15 Bodies] Downloading block bodies   block_num=16688081 delivery/sec=112.3KB wasted/sec=0B remaining=34 delivered=25 cache=789.3KB alloc=4.5GB sys=6.4GB\r\n[INFO] [02-23|02:37:40.758] [5/15 Bodies] No block bodies to write in this log period block number=16688081\r\n[INFO] [02-23|02:37:52.349] [p2p] GoodPeers                          eth67=83 eth66=12 eth68=77\r\n[INFO] [02-23|02:37:54.967] [txpool] stat                            block=16688056 pending=2211 baseFee=9785 queued=30000 alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:38:00.758] [5/15 Bodies] No block bodies to write in this log period block number=16688081\r\n[INFO] [02-23|02:38:20.759] [5/15 Bodies] Downloading block bodies   block_num=16688102 delivery/sec=112.3KB wasted/sec=0B remaining=34 delivered=46 cache=789.3KB alloc=3.2GB sys=6.4GB\r\n[INFO] [02-23|02:38:21.613] [5/15 Bodies] Processed                  highest=16688116\r\n[INFO] [02-23|02:38:21.614] [5/15 Bodies] DONE                       in=12m20.855534882s\r\n[INFO] [02-23|02:38:21.614] [6/15 Senders] Started                   from=16688056 to=16688116\r\n[INFO] [02-23|02:38:21.899] [7/15 Execution] Blocks execution        from=16688056 to=16688116\r\n[INFO] [02-23|02:38:30.897] [7/15 Execution] Completed on            block=16688116\r\n[INFO] [02-23|02:38:30.897] [8/15 HashState] Promoting plain state   from=16688056 to=16688116\r\n[INFO] [02-23|02:38:30.897] [8/15 HashState] Incremental promotion   from=16688056 to=16688116 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-23|02:38:31.146] [8/15 HashState] Incremental promotion   from=16688056 to=16688116 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-23|02:38:32.216] [8/15 HashState] Incremental promotion   from=16688056 to=16688116 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-23|02:38:33.903] [9/15 IntermediateHashes] Generating intermediate hashes from=16688056 to=16688116\r\n[INFO] [02-23|02:38:40.735] [10/15 CallTraces] Pruned call trace intermediate table from=16598056 to=16598115\r\n[INFO] [02-23|02:38:50.221] Commit cycle                             in=1.320156744s\r\n[INFO] [02-23|02:38:50.221] Timings (slower than 50ms)               Headers=342ms Bodies=12m20.855s Senders=284ms Execution=8.998s HashState=3.005s IntermediateHashes=6.78s CallTraces=1.917s AccountHistoryIndex=1.331s StorageHistoryIndex=2.022s LogIndex=1.684s TxLookup=1.261s\r\n[INFO] [02-23|02:38:50.221] Tables                                   PlainState=86.6GB AccountChangeSet=181.5GB StorageChangeSet=276.0GB BlockTransaction=62.0GB TransactionLog=531.6GB FreeList=120.4MB ReclaimableSpace=120.4GB\r\n[INFO] [02-23|02:38:50.222] RPC Daemon notified of new headers       from=16688056 to=16688116 hash=0xde01bde997bc4bdeaf445f6481cb57b8b755326c73758a7bcdff175bd2d8843e header sending=118.29Âµs log sending=613ns\r\n[INFO] [02-23|02:38:54.966] [txpool] stat                            block=16688116 pending=7023 baseFee=1185 queued=28942 alloc=4.4GB sys=6.4GB\r\n[INFO] [02-23|02:38:57.073] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:00.525] [2/15 Headers] Handling new payload      height=16688181 hash=0x1d99b3e19b3900483b8280a7fd682d6db619952708bec2c3deaa4047aa31c0e1\r\n[INFO] [02-23|02:39:00.783] [2/15 Headers] Downloading PoS headers... height=16688180 hash=0x48084faa345f496590d81091cc309b5f28537cab54d62ed0e769bdf3a1041e3f requestId=79\r\n[INFO] [02-23|02:39:03.789] PoS headers verified and saved           requestId=79 fork head=0x9273ac73f1da9fbced146184d6f71b92f8714d31a8f815dc3fefa07b3853712a\r\n[INFO] [02-23|02:39:05.932] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:05.932] [2/15 Headers] Handling new payload      height=16688181 hash=0x1d99b3e19b3900483b8280a7fd682d6db619952708bec2c3deaa4047aa31c0e1\r\n[INFO] [02-23|02:39:08.036] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:12.356] [2/15 Headers] Handling new payload      height=16688182 hash=0x4984c3ccf1eb4ba734657a3af626c50aa95fae6cd6053de604904946aa139338\r\n[INFO] [02-23|02:39:14.505] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:25.340] [2/15 Headers] Handling new payload      height=16688183 hash=0x58b22a0f1b6c11736cea899069cfbaf39bfe6b6addd7ad18a0087408aab81271\r\n[INFO] [02-23|02:39:27.576] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:36.578] [2/15 Headers] Handling new payload      height=16688184 hash=0x2113c2170c98b1606b11b67dae21335384eb82a4c40841c7e2a568cac1c89cde\r\n[INFO] [02-23|02:39:38.712] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:49.161] [2/15 Headers] Handling new payload      height=16688185 hash=0x0f4f4c61bd49193226b19e15ee25a1a55eaf73eb0ef9d9b016d3c894f18311a7\r\n[INFO] [02-23|02:39:51.126] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:39:52.349] [p2p] GoodPeers                          eth66=13 eth67=79 eth68=79\r\n[INFO] [02-23|02:39:54.966] [txpool] stat                            block=16688116 pending=7385 baseFee=1199 queued=29064 alloc=3.3GB sys=6.4GB\r\n[INFO] [02-23|02:39:59.792] [2/15 Headers] Handling new payload      height=16688186 hash=0x272f7de746989e69b0999379464aed1ca5f31b805cdd835831f4d1176ad5997f\r\n[INFO] [02-23|02:40:01.828] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:40:12.144] [2/15 Headers] Handling new payload      height=16688187 hash=0x1cde4cffb8db9f0de3e578771ba53b6a13f04b9a06ba29c7a3d521f32debbb12\r\n[INFO] [02-23|02:40:14.353] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:40:24.530] [2/15 Headers] Handling new payload      height=16688188 hash=0x000642726c5d408fa3d5f854ba34200ba3e6fba4f47fa6859c08be41cf0fd01b\r\n[INFO] [02-23|02:40:24.537] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:40:25.073] [2/15 Headers] Fork choice: chain extension from=16688116 to=16688188\r\n[INFO] [02-23|02:40:25.075] [5/15 Bodies] Processing bodies...       from=16688116 to=16688188\r\n[INFO] [02-23|02:40:54.970] [txpool] stat                            block=16688116 pending=7737 baseFee=1210 queued=29190 alloc=4.1GB sys=6.4GB\r\n[INFO] [02-23|02:41:52.350] [p2p] GoodPeers                          eth68=80 eth67=81 eth66=13\r\n[INFO] [02-23|02:41:54.984] [txpool] stat                            block=16688116 pending=8074 baseFee=1220 queued=29327 alloc=3.0GB sys=6.4GB\r\n[INFO] [02-23|02:43:04.236] [txpool] stat                            block=16688116 pending=8422 baseFee=1232 queued=29467 alloc=3.9GB sys=6.4GB\r\n[INFO] [02-23|02:43:52.349] [p2p] GoodPeers                          eth67=83 eth66=11 eth68=80\r\n[INFO] [02-23|02:43:54.966] [txpool] stat                            block=16688116 pending=8851 baseFee=1244 queued=29607 alloc=3.0GB sys=6.4GB\r\n[INFO] [02-23|02:44:54.961] [txpool] stat                            block=16688116 pending=9214 baseFee=1252 queued=29721 alloc=3.8GB sys=6.4GB\r\n[INFO] [02-23|02:45:52.349] [p2p] GoodPeers                          eth66=11 eth67=85 eth68=79\r\n[INFO] [02-23|02:45:54.967] [txpool] stat                            block=16688116 pending=9569 baseFee=1258 queued=29930 alloc=3.0GB sys=6.4GB\r\n[INFO] [02-23|02:46:54.974] [txpool] stat                            block=16688116 pending=9936 baseFee=1263 queued=30000 alloc=3.7GB sys=6.4GB\r\n[INFO] [02-23|02:47:52.349] [p2p] GoodPeers                          eth66=11 eth67=85 eth68=79\r\n[INFO] [02-23|02:48:03.478] [txpool] stat                            block=16688116 pending=10000 baseFee=1267 queued=30000 alloc=3.1GB sys=6.4GB\r\n[INFO] [02-23|02:48:54.972] [txpool] stat                            block=16688116 pending=10000 baseFee=1272 queued=30000 alloc=3.7GB sys=6.4GB\r\n[INFO] [02-23|02:49:15.175] [5/15 Bodies] Writing block bodies       block_num=16688117 remaining=71 alloc=3.9GB sys=6.4GB\r\n[INFO] [02-23|02:49:52.349] [p2p] GoodPeers                          eth68=78 eth66=11 eth67=84\r\n[INFO] [02-23|02:49:54.967] [txpool] stat                            block=16688116 pending=10000 baseFee=1275 queued=30000 alloc=3.0GB sys=6.4GB\r\n[INFO] [02-23|02:50:54.969] [txpool] stat                            block=16688116 pending=10000 baseFee=1281 queued=30000 alloc=3.5GB sys=6.4GB\r\n[INFO] [02-23|02:51:42.126] [5/15 Bodies] Writing block bodies       block_num=16688119 remaining=69 alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:51:45.076] [5/15 Bodies] Downloading block bodies   block_num=16688156 delivery/sec=211.8KB wasted/sec=0B remaining=51 delivered=40 cache=1.6MB alloc=2.9GB sys=6.4GB\r\n[INFO] [02-23|02:51:52.350] [p2p] GoodPeers                          eth68=80 eth66=11 eth67=84\r\n[INFO] [02-23|02:51:54.972] [txpool] stat                            block=16688116 pending=10000 baseFee=1286 queued=30000 alloc=3.0GB sys=6.4GB\r\n[INFO] [02-23|02:52:05.076] [5/15 Bodies] Downloading block bodies   block_num=16688174 delivery/sec=102.7KB wasted/sec=0B remaining=13 delivered=58 cache=1.6MB alloc=3.2GB sys=6.4GB\r\n[INFO] [02-23|02:52:18.258] [5/15 Bodies] Processed                  highest=16688188\r\n[INFO] [02-23|02:52:18.259] [5/15 Bodies] DONE                       in=11m53.183445029s\r\n[INFO] [02-23|02:52:18.259] [6/15 Senders] Started                   from=16688116 to=16688188\r\n[INFO] [02-23|02:52:18.634] [7/15 Execution] Blocks execution        from=16688116 to=16688188\r\n[INFO] [02-23|02:52:33.797] [7/15 Execution] Completed on            block=16688188\r\n[INFO] [02-23|02:52:33.797] [8/15 HashState] Promoting plain state   from=16688116 to=16688188\r\n[INFO] [02-23|02:52:33.797] [8/15 HashState] Incremental promotion   from=16688116 to=16688188 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-23|02:52:34.188] [8/15 HashState] Incremental promotion   from=16688116 to=16688188 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-23|02:52:35.390] [8/15 HashState] Incremental promotion   from=16688116 to=16688188 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-23|02:52:38.074] [9/15 IntermediateHashes] Generating intermediate hashes from=16688116 to=16688188\r\n[INFO] [02-23|02:52:45.741] [10/15 CallTraces] Pruned call trace intermediate table from=16598116 to=16598187\r\n[INFO] [02-23|02:52:54.972] [txpool] stat                            block=16688116 pending=10000 baseFee=1297 queued=30000 alloc=4.7GB sys=6.4GB\r\n[INFO] [02-23|02:52:58.480] Commit cycle                             in=1.631158112s\r\n[INFO] [02-23|02:52:58.480] Timings (slower than 50ms)               Headers=537ms Bodies=11m53.183s Senders=375ms Execution=15.162s HashState=4.276s IntermediateHashes=7.597s CallTraces=2.274s AccountHistoryIndex=1.768s StorageHistoryIndex=3.766s LogIndex=2.385s TxLookup=980ms\r\n[INFO] [02-23|02:52:58.480] Tables                                   PlainState=86.6GB AccountChangeSet=181.5GB StorageChangeSet=276.0GB BlockTransaction=62.0GB TransactionLog=531.6GB FreeList=120.4MB ReclaimableSpace=120.4GB\r\n[INFO] [02-23|02:52:58.480] RPC Daemon notified of new headers       from=16688116 to=16688188 hash=0x000642726c5d408fa3d5f854ba34200ba3e6fba4f47fa6859c08be41cf0fd01b header sending=177.201Âµs log sending=491ns\r\n[INFO] [02-23|02:53:03.749] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:53:12.985] [2/15 Headers] Handling new payload      height=16688251 hash=0x21b610ead83d7448b9fc58425d7b1696ec058b6d361bf7f0db4a3f8204ce9a3d\r\n[INFO] [02-23|02:53:13.268] [2/15 Headers] Downloading PoS headers... height=16688250 hash=0xcfef6be6952507aff3d397d4c91706299a070290e84c9db7b190e5eedbb1b173 requestId=88\r\n[INFO] [02-23|02:53:13.521] PoS headers verified and saved           requestId=88 fork head=0xafa78c94a2cbf8454166ce8cb9747dbf0d6a23a502e20985193b5a1765d1d59d\r\n[INFO] [02-23|02:53:13.524] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:53:13.524] [2/15 Headers] Handling new payload      height=16688251 hash=0x21b610ead83d7448b9fc58425d7b1696ec058b6d361bf7f0db4a3f8204ce9a3d\r\n[INFO] [02-23|02:53:13.528] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-23|02:53:13.796] [2/15 Headers] Fork choice: chain extension from=16688188 to=16688251\r\n[INFO] [02-23|02:53:13.797] [5/15 Bodies] Processing bodies...       from=16688188 to=16688251\r\n[INFO] [02-23|02:53:52.349] [p2p] GoodPeers                          eth66=11 eth67=81 eth68=80\r\n[INFO] [02-23|02:53:54.964] [txpool] stat                            block=16688188 pending=6160 baseFee=1354 queued=29439 alloc=3.0GB sys=6.4GB\r\n````\r\n",
  "closed_by": {
    "login": "J-A-M-E-5",
    "id": 26421539,
    "node_id": "MDQ6VXNlcjI2NDIxNTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/J-A-M-E-5",
    "html_url": "https://github.com/J-A-M-E-5",
    "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
    "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
    "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
    "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
    "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
    "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1441173313",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6935#issuecomment-1441173313",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935",
    "id": 1441173313,
    "node_id": "IC_kwDOC0FsAM5V5o9B",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-23T03:27:39Z",
    "updated_at": "2023-02-23T03:28:18Z",
    "author_association": "NONE",
    "body": "Here's a log running version from 2 days ago ( Commit: 3a4ad0c61 ) of how it normally works fine and quickly catches up after a few minutes down.\r\n\r\n```\r\n[INFO] [02-21|03:40:39.006] [p2p] GoodPeers                          eth67=10 eth68=1\r\n[INFO] [02-21|03:40:40.276] [txpool] stat                            block=16673543 pending=2506 baseFee=36 queued=2769 alloc=2.2GB sys=2.7GB\r\n[INFO] [02-21|03:41:13.667] [2/15 Headers] Handling new payload      height=16674174 hash=0x0ea9084bd1e748a412d45a67a40becb0dc4d8d7d81298bfe68a578ca80c0cce0\r\n[INFO] [02-21|03:41:14.424] [2/15 Headers] Downloading PoS headers... height=16674173 hash=0x3dd8d270deb91b2abd5c5ec1be1c19ee8aed6b99db88cfa2ee6f16640ac6e6dc requestId=1\r\n[INFO] [02-21|03:41:14.424] [2/15 Headers] DONE                      in=4m34.118438425s\r\n[INFO] [02-21|03:41:20.222] PoS headers verified and saved           requestId=1 fork head=0xd36674d552e61a25b6fe2044c586a64de6f2d5d033032deab9796b23d9ba4787\r\n[INFO] [02-21|03:41:20.225] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:41:20.225] [2/15 Headers] Handling new payload      height=16674174 hash=0x0ea9084bd1e748a412d45a67a40becb0dc4d8d7d81298bfe68a578ca80c0cce0\r\n[INFO] [02-21|03:41:20.229] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:41:20.316] [2/15 Headers] Handling new payload      height=16674176 hash=0x1e73cc51e5666c4449cfe4024ca1b19b719d23411d42bf9a2652a4628e35617c\r\n[INFO] [02-21|03:41:20.651] [2/15 Headers] Downloading PoS headers... height=16674175 hash=0x1c9386404d6b54438d19eafc379ee6ab2f27d1ca7a3c4faf3c0b8302a706d248 requestId=2\r\n[INFO] [02-21|03:41:20.733] PoS headers verified and saved           requestId=2 fork head=0x0ea9084bd1e748a412d45a67a40becb0dc4d8d7d81298bfe68a578ca80c0cce0\r\n[INFO] [02-21|03:41:20.736] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:41:20.736] [2/15 Headers] Handling new payload      height=16674176 hash=0x1e73cc51e5666c4449cfe4024ca1b19b719d23411d42bf9a2652a4628e35617c\r\n[INFO] [02-21|03:41:20.741] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:41:21.166] [2/15 Headers] Fork choice: chain extension from=16673543 to=16674176\r\n[INFO] [02-21|03:41:21.183] [5/15 Bodies] Processing bodies...       from=16673543 to=16674176\r\n[INFO] [02-21|03:41:37.684] [5/15 Bodies] Processed                  highest=16674176\r\n[INFO] [02-21|03:41:37.684] [6/15 Senders] Started                   from=16673543 to=16674176\r\n[INFO] [02-21|03:41:40.142] [7/15 Execution] Blocks execution        from=16673543 to=16674176\r\n[INFO] [02-21|03:41:44.234] [txpool] stat                            block=16673543 pending=3251 baseFee=36 queued=3456 alloc=3.8GB sys=4.1GB\r\n[INFO] [02-21|03:42:00.316] [7/15 Execution] Executed blocks         number=16673607 blk/s=3.2 tx/s=428.1 Mgas/s=48.1 gasState=0.00 batch=1.5MB alloc=2.3GB sys=4.3GB\r\n[INFO] [02-21|03:42:20.208] [7/15 Execution] Executed blocks         number=16673687 blk/s=4.0 tx/s=568.0 Mgas/s=60.9 gasState=0.00 batch=3.6MB alloc=2.9GB sys=4.3GB\r\n[INFO] [02-21|03:42:39.006] [p2p] GoodPeers                          eth67=10 eth66=1 eth68=2\r\n[INFO] [02-21|03:42:40.245] [7/15 Execution] Executed blocks         number=16673780 blk/s=4.6 tx/s=666.7 Mgas/s=72.9 gasState=0.01 batch=6.0MB alloc=3.5GB sys=4.3GB\r\n[INFO] [02-21|03:42:40.316] [txpool] stat                            block=16673543 pending=3361 baseFee=41 queued=3587 alloc=3.5GB sys=4.3GB\r\n[INFO] [02-21|03:43:00.193] [7/15 Execution] Executed blocks         number=16673874 blk/s=4.7 tx/s=628.1 Mgas/s=70.3 gasState=0.01 batch=8.2MB alloc=4.1GB sys=4.3GB\r\n[INFO] [02-21|03:43:20.256] [7/15 Execution] Executed blocks         number=16673983 blk/s=5.4 tx/s=716.1 Mgas/s=80.9 gasState=0.01 batch=11.1MB alloc=3.0GB sys=4.5GB\r\n[INFO] [02-21|03:43:40.183] [7/15 Execution] Executed blocks         number=16674104 blk/s=6.1 tx/s=827.9 Mgas/s=92.1 gasState=0.02 batch=14.6MB alloc=3.7GB sys=4.5GB\r\n[INFO] [02-21|03:43:40.272] [txpool] stat                            block=16673543 pending=3769 baseFee=51 queued=4356 alloc=3.7GB sys=4.5GB\r\n[INFO] [02-21|03:43:57.058] [7/15 Execution] Completed on            block=16674176\r\n[INFO] [02-21|03:43:57.058] [7/15 Execution] DONE                    in=2m16.916504836s\r\n[INFO] [02-21|03:43:57.058] [8/15 HashState] Promoting plain state   from=16673543 to=16674176\r\n[INFO] [02-21|03:43:57.058] [8/15 HashState] Incremental promotion   from=16673543 to=16674176 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-21|03:44:03.553] [8/15 HashState] Incremental promotion   from=16673543 to=16674176 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-21|03:44:24.444] [8/15 HashState] Incremental promotion   from=16673543 to=16674176 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-21|03:44:39.006] [p2p] GoodPeers                          eth67=16 eth66=2 eth68=2\r\n[INFO] [02-21|03:44:40.280] [txpool] stat                            block=16673543 pending=4011 baseFee=53 queued=4713 alloc=2.6GB sys=4.9GB\r\n[INFO] [02-21|03:44:58.473] [8/15 HashState] ETL [2/2] Loading       into=HashedStorage current_prefix=9082abbc\r\n[INFO] [02-21|03:45:18.490] [8/15 HashState] DONE                    in=1m21.431797034s\r\n[INFO] [02-21|03:45:18.490] [9/15 IntermediateHashes] Generating intermediate hashes from=16673543 to=16674176\r\n[INFO] [02-21|03:45:40.273] [txpool] stat                            block=16673543 pending=4240 baseFee=56 queued=5062 alloc=3.3GB sys=5.0GB\r\n[INFO] [02-21|03:45:51.355] [9/15 IntermediateHashes] Calculating Merkle root current key=4c1bd65c\r\n[INFO] [02-21|03:46:21.762] [9/15 IntermediateHashes] Calculating Merkle root current key=a5b0eff8\r\n[INFO] [02-21|03:46:39.006] [p2p] GoodPeers                          eth66=2 eth68=3 eth67=20\r\n[INFO] [02-21|03:46:42.536] [txpool] stat                            block=16673543 pending=4450 baseFee=65 queued=5335 alloc=2.9GB sys=5.5GB\r\n[INFO] [02-21|03:46:52.478] [9/15 IntermediateHashes] Calculating Merkle root current key=fbd1592b\r\n[INFO] [02-21|03:47:31.202] [9/15 IntermediateHashes] DONE           in=2m12.712433141s\r\n[INFO] [02-21|03:47:31.821] [10/15 CallTraces] Pruned call trace intermediate table from=16583543 to=16584175\r\n[INFO] [02-21|03:47:40.275] [txpool] stat                            block=16673543 pending=4660 baseFee=66 queued=5564 alloc=3.3GB sys=5.5GB\r\n[INFO] [02-21|03:48:39.005] [p2p] GoodPeers                          eth67=24 eth66=2 eth68=4\r\n[INFO] [02-21|03:48:40.276] [txpool] stat                            block=16673543 pending=4886 baseFee=67 queued=5824 alloc=2.6GB sys=5.5GB\r\n[INFO] [02-21|03:49:15.499] [12/15 StorageHistoryIndex] ETL [2/2] Loading into=StorageHistory current_prefix=8252df1d\r\n[INFO] [02-21|03:49:40.274] [txpool] stat                            block=16673543 pending=5379 baseFee=70 queued=6292 alloc=3.4GB sys=5.5GB\r\n[INFO] [02-21|03:49:41.289] [13/15 LogIndex] processing              from=16673544 to=16674176\r\n[INFO] [02-21|03:50:39.006] [p2p] GoodPeers                          eth66=2 eth68=4 eth67=26\r\n[INFO] [02-21|03:50:40.276] [txpool] stat                            block=16673543 pending=5777 baseFee=74 queued=6663 alloc=2.4GB sys=5.5GB\r\n[INFO] [02-21|03:50:41.235] Commit cycle                             in=5.921175003s\r\n[INFO] [02-21|03:50:41.235] Timings (slower than 50ms)               Headers=433ms Bodies=16.5s Senders=2.457s Execution=2m16.916s HashState=1m21.431s IntermediateHashes=2m12.712s CallTraces=43.928s AccountHistoryIndex=29.081s StorageHistoryIndex=57.075s LogIndex=31.523s TxLookup=22.501s\r\n[INFO] [02-21|03:50:41.235] Tables                                   PlainState=86.4GB AccountChangeSet=181.3GB StorageChangeSet=275.5GB BlockTransaction=60.3GB TransactionLog=530.4GB FreeList=125.9MB ReclaimableSpace=125.9GB\r\n[INFO] [02-21|03:50:41.236] RPC Daemon notified of new headers       from=16673543 to=16674176 hash=0x1e73cc51e5666c4449cfe4024ca1b19b719d23411d42bf9a2652a4628e35617c header sending=1.057405ms log sending=790ns\r\n[INFO] [02-21|03:50:54.561] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:50:55.000] [2/15 Headers] Downloading PoS headers... height=unknown hash=0x1a80702f73f6bacbaaac3582853fd817cc0138c06f440582d509ee4d09ee29db requestId=4\r\n[INFO] [02-21|03:51:19.488] PoS headers verified and saved           requestId=4 fork head=0xa478f9966629baeb6df4ae3f2dc3e3d5078574ad0428b425703de3f586fd067d\r\n[INFO] [02-21|03:51:19.491] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:51:19.492] [2/15 Headers] Fork choice: chain extension from=16674176 to=16674233\r\n[INFO] [02-21|03:51:19.493] [5/15 Bodies] Processing bodies...       from=16674176 to=16674233\r\n[INFO] [02-21|03:51:39.494] [5/15 Bodies] No block bodies to write in this log period block number=16674176\r\n[INFO] [02-21|03:51:40.279] [txpool] stat                            block=16674176 pending=8619 baseFee=181 queued=3050 alloc=3.9GB sys=5.5GB\r\n[INFO] [02-21|03:51:59.494] [5/15 Bodies] No block bodies to write in this log period block number=16674176\r\n[INFO] [02-21|03:52:19.493] [5/15 Bodies] No block bodies to write in this log period block number=16674176\r\n[INFO] [02-21|03:52:26.854] [5/15 Bodies] Processed                  highest=16674233\r\n[INFO] [02-21|03:52:26.854] [5/15 Bodies] DONE                       in=1m7.361069166s\r\n[INFO] [02-21|03:52:26.854] [6/15 Senders] Started                   from=16674176 to=16674233\r\n[INFO] [02-21|03:52:27.167] [7/15 Execution] Blocks execution        from=16674176 to=16674233\r\n[INFO] [02-21|03:52:37.445] [snapshots] Blocks Stat                  blocks=16584k indices=16584k alloc=2.9GB sys=5.5GB\r\n[INFO] [02-21|03:52:39.006] [p2p] GoodPeers                          eth67=22 eth66=2 eth68=4\r\n[INFO] [02-21|03:52:40.278] [txpool] stat                            block=16674176 pending=8880 baseFee=188 queued=3202 alloc=3.0GB sys=5.5GB\r\n[INFO] [02-21|03:52:40.566] [7/15 Execution] Completed on            block=16674233\r\n[INFO] [02-21|03:52:40.567] [8/15 HashState] Promoting plain state   from=16674176 to=16674233\r\n[INFO] [02-21|03:52:40.567] [8/15 HashState] Incremental promotion   from=16674176 to=16674233 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-21|03:52:41.220] [8/15 HashState] Incremental promotion   from=16674176 to=16674233 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-21|03:52:42.359] [8/15 HashState] Incremental promotion   from=16674176 to=16674233 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-21|03:52:45.488] [9/15 IntermediateHashes] Generating intermediate hashes from=16674176 to=16674233\r\n[INFO] [02-21|03:52:54.603] [10/15 CallTraces] Pruned call trace intermediate table from=16584176 to=16584232\r\n[INFO] [02-21|03:53:07.997] Commit cycle                             in=2.38404645s\r\n[INFO] [02-21|03:53:07.997] Timings (slower than 50ms)               Bodies=1m7.361s Senders=312ms Execution=13.399s HashState=4.92s IntermediateHashes=9.05s CallTraces=2.825s AccountHistoryIndex=1.541s StorageHistoryIndex=3.269s LogIndex=2.012s TxLookup=1.426s\r\n[INFO] [02-21|03:53:07.997] Tables                                   PlainState=86.4GB AccountChangeSet=181.3GB StorageChangeSet=275.5GB BlockTransaction=60.3GB TransactionLog=530.4GB FreeList=125.7MB ReclaimableSpace=125.7GB\r\n[INFO] [02-21|03:53:07.997] RPC Daemon notified of new headers       from=16674176 to=16674233 hash=0x1a80702f73f6bacbaaac3582853fd817cc0138c06f440582d509ee4d09ee29db header sending=115.209Âµs log sending=674ns\r\n[INFO] [02-21|03:53:15.285] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:53:15.285] [2/15 Headers] Handling new payload      height=16674281 hash=0x296b2f1831f7d0b23facbe8ee6cbf107643156c197f74927c96426548087b39b\r\n[INFO] [02-21|03:53:15.656] [2/15 Headers] Downloading PoS headers... height=16674280 hash=0x16cd43c69dd4ee63c029b8dc4c0230b599f24aec80e6ac21ac713d5833824c97 requestId=5\r\n[INFO] [02-21|03:53:33.539] PoS headers verified and saved           requestId=5 fork head=0x833e2057aff06cfc414cb3fc21e7d8db7c8788763c3d75b4a334a887ae12dd3a\r\n[INFO] [02-21|03:53:36.212] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:53:36.212] [2/15 Headers] Handling new payload      height=16674281 hash=0x296b2f1831f7d0b23facbe8ee6cbf107643156c197f74927c96426548087b39b\r\n[INFO] [02-21|03:53:38.918] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:53:39.327] [2/15 Headers] Downloading PoS headers... height=unknown hash=0x5bf149833217b903ea40b361335d69ff49f15de3c4f6b5144a5ce39824acdb23 requestId=6\r\n[INFO] [02-21|03:53:40.280] [txpool] stat                            block=16674233 pending=7448 baseFee=465 queued=2453 alloc=4.0GB sys=5.5GB\r\n[INFO] [02-21|03:53:41.902] PoS headers verified and saved           requestId=6 fork head=0xdde1dfee0fe55f4aab485cad877b6b4736db6ba09bb929c765bf1b42d9be06a9\r\n[INFO] [02-21|03:53:44.194] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:53:44.194] [2/15 Headers] Fork choice: chain extension from=16674233 to=16674286\r\n[INFO] [02-21|03:53:44.195] [5/15 Bodies] Processing bodies...       from=16674233 to=16674286\r\n[INFO] [02-21|03:54:04.195] [5/15 Bodies] No block bodies to write in this log period block number=16674233\r\n[INFO] [02-21|03:54:24.196] [5/15 Bodies] Downloading block bodies   block_num=16674253 delivery/sec=103.8KB wasted/sec=0B remaining=32 delivered=20 cache=46.6KB alloc=4.1GB sys=5.5GB\r\n[INFO] [02-21|03:54:39.006] [p2p] GoodPeers                          eth67=22 eth66=2 eth68=5\r\n[INFO] [02-21|03:54:40.279] [txpool] stat                            block=16674233 pending=7824 baseFee=504 queued=2590 alloc=2.3GB sys=5.5GB\r\n[INFO] [02-21|03:54:44.195] [5/15 Bodies] No block bodies to write in this log period block number=16674253\r\n[INFO] [02-21|03:55:04.196] [5/15 Bodies] No block bodies to write in this log period block number=16674253\r\n[INFO] [02-21|03:55:22.418] [5/15 Bodies] Processed                  highest=16674286\r\n[INFO] [02-21|03:55:22.418] [5/15 Bodies] DONE                       in=1m38.222560618s\r\n[INFO] [02-21|03:55:22.418] [6/15 Senders] Started                   from=16674233 to=16674286\r\n[INFO] [02-21|03:55:22.602] [7/15 Execution] Blocks execution        from=16674233 to=16674286\r\n[INFO] [02-21|03:55:33.969] [7/15 Execution] Completed on            block=16674286\r\n[INFO] [02-21|03:55:33.970] [8/15 HashState] Promoting plain state   from=16674233 to=16674286\r\n[INFO] [02-21|03:55:33.970] [8/15 HashState] Incremental promotion   from=16674233 to=16674286 codes=true csbucket=AccountChangeSet\r\n[INFO] [02-21|03:55:34.506] [8/15 HashState] Incremental promotion   from=16674233 to=16674286 codes=false csbucket=AccountChangeSet\r\n[INFO] [02-21|03:55:35.742] [8/15 HashState] Incremental promotion   from=16674233 to=16674286 codes=false csbucket=StorageChangeSet\r\n[INFO] [02-21|03:55:38.895] [9/15 IntermediateHashes] Generating intermediate hashes from=16674233 to=16674286\r\n[INFO] [02-21|03:55:40.279] [txpool] stat                            block=16674233 pending=8197 baseFee=510 queued=2719 alloc=2.9GB sys=5.5GB\r\n[INFO] [02-21|03:55:48.240] [10/15 CallTraces] Pruned call trace intermediate table from=16584233 to=16584285\r\n[INFO] [02-21|03:56:00.335] Commit cycle                             in=2.45058405s\r\n[INFO] [02-21|03:56:00.335] Timings (slower than 50ms)               Bodies=1m38.222s Senders=184ms Execution=11.367s HashState=4.925s IntermediateHashes=9.284s CallTraces=2.562s AccountHistoryIndex=1.499s StorageHistoryIndex=3.277s LogIndex=1.62s TxLookup=744ms\r\n[INFO] [02-21|03:56:00.335] Tables                                   PlainState=86.4GB AccountChangeSet=181.3GB StorageChangeSet=275.5GB BlockTransaction=60.4GB TransactionLog=530.4GB FreeList=125.6MB ReclaimableSpace=125.6GB\r\n[INFO] [02-21|03:56:00.335] RPC Daemon notified of new headers       from=16674233 to=16674286 hash=0x5bf149833217b903ea40b361335d69ff49f15de3c4f6b5144a5ce39824acdb23 header sending=183.915Âµs log sending=695ns\r\n[INFO] [02-21|03:56:05.479] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:56:05.479] [2/15 Headers] Handling new payload      height=16674290 hash=0xd1f43f510b35d75f634cc65ba2d2170beef13898fdc56c5c2b778b407c903fa5\r\n[INFO] [02-21|03:56:05.797] [2/15 Headers] Downloading PoS headers... height=16674289 hash=0x4d54e682c825cd2682f4c2852c3a0d53562034159c9173b39327d06af33b95b1 requestId=7\r\n[INFO] [02-21|03:56:08.400] PoS headers verified and saved           requestId=7 fork head=0x74b31a16fcbc6890269b4885ee033f56eab7424f0717ffebc3331433d7343cff\r\n[INFO] [02-21|03:56:10.632] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:56:10.632] [2/15 Headers] Handling new payload      height=16674290 hash=0xd1f43f510b35d75f634cc65ba2d2170beef13898fdc56c5c2b778b407c903fa5\r\n[INFO] [02-21|03:56:13.053] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:56:13.053] [2/15 Headers] Handling new payload      height=16674291 hash=0x83e6e8fef0f44d690e274f3b1b6fac04597073d725a024188e224725d9d0a22f\r\n[INFO] [02-21|03:56:13.056] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:56:13.086] [2/15 Headers] Handling new payload      height=16674292 hash=0x114e2adadfbb6529113a170b662717dc53f53dee3b74210dc2aca94e7bae9fb5\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1441173313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1441404523",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6935#issuecomment-1441404523",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935",
    "id": 1441404523,
    "node_id": "IC_kwDOC0FsAM5V6hZr",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-23T09:02:15Z",
    "updated_at": "2023-02-23T09:02:45Z",
    "author_association": "NONE",
    "body": "Further extract of logs showing how time just dropped off real bad 22 Feb @ 16:41 I've checked system logs for things like SSD RAID error etc.. hardware seems to be performing as normal.\r\n\r\n```\r\n$ tail -n 10000 erigon_mainnet.log | grep \"s Bodies=\"\r\n\r\n[INFO] [02-22|11:30:00.878] Timings (slower than 50ms)               Headers=297ms Bodies=889ms Senders=127ms Execution=1.521s HashState=518ms IntermediateHashes=1.458s CallTraces=256ms AccountHistoryIndex=211ms StorageHistoryIndex=288ms LogIndex=256ms TxLookup=134ms\r\n[INFO] [02-22|13:30:31.263] Timings (slower than 50ms)               Headers=498ms Bodies=1.563s Senders=131ms Execution=1.126s HashState=512ms IntermediateHashes=1.193s CallTraces=499ms AccountHistoryIndex=264ms StorageHistoryIndex=408ms LogIndex=270ms TxLookup=131ms\r\n[INFO] [02-22|13:31:58.359] Timings (slower than 50ms)               Headers=498ms Bodies=2.667s Senders=57ms Execution=1.256s HashState=499ms IntermediateHashes=1.369s CallTraces=316ms AccountHistoryIndex=199ms StorageHistoryIndex=386ms LogIndex=224ms TxLookup=88ms\r\n[INFO] [02-22|13:34:37.202] Timings (slower than 50ms)               Headers=497ms Bodies=1.448s Senders=89ms Execution=2.28s HashState=932ms IntermediateHashes=2.095s CallTraces=679ms AccountHistoryIndex=446ms StorageHistoryIndex=708ms LogIndex=424ms TxLookup=174ms\r\n[INFO] [02-22|13:36:59.651] Timings (slower than 50ms)               Headers=498ms Bodies=947ms Senders=78ms Execution=1.809s HashState=880ms IntermediateHashes=2.193s CallTraces=619ms AccountHistoryIndex=399ms StorageHistoryIndex=647ms LogIndex=426ms TxLookup=170ms\r\n[INFO] [02-22|13:37:17.259] Timings (slower than 50ms)               Headers=391ms Bodies=551ms Execution=394ms HashState=149ms IntermediateHashes=375ms CallTraces=99ms AccountHistoryIndex=67ms StorageHistoryIndex=120ms LogIndex=91ms\r\n[INFO] [02-22|13:37:41.050] Timings (slower than 50ms)               Headers=402ms Bodies=367ms Execution=349ms HashState=171ms IntermediateHashes=448ms CallTraces=118ms AccountHistoryIndex=83ms StorageHistoryIndex=121ms LogIndex=84ms\r\n[INFO] [02-22|13:39:59.492] Timings (slower than 50ms)               Headers=497ms Bodies=669ms Senders=140ms Execution=2.216s HashState=908ms IntermediateHashes=2.091s CallTraces=573ms AccountHistoryIndex=395ms StorageHistoryIndex=710ms LogIndex=475ms TxLookup=211ms\r\n[INFO] [02-22|13:41:20.517] Timings (slower than 50ms)               Headers=497ms Bodies=1.019s Senders=81ms Execution=943ms HashState=405ms IntermediateHashes=1.072s CallTraces=357ms AccountHistoryIndex=222ms StorageHistoryIndex=321ms LogIndex=251ms TxLookup=93ms\r\n[INFO] [02-22|13:42:03.837] Timings (slower than 50ms)               Headers=351ms Bodies=480ms Execution=333ms HashState=148ms IntermediateHashes=334ms CallTraces=83ms AccountHistoryIndex=59ms StorageHistoryIndex=92ms LogIndex=62ms\r\n[INFO] [02-22|16:38:30.423] Timings (slower than 50ms)               Headers=325ms Bodies=49.658s Senders=3.566s Execution=2m15.337s HashState=1m25.372s IntermediateHashes=2m16.212s CallTraces=56.511s AccountHistoryIndex=34.651s StorageHistoryIndex=55.605s LogIndex=35.702s TxLookup=29.272s\r\n[INFO] [02-22|16:41:40.632] Timings (slower than 50ms)               Headers=364ms Bodies=2m19.211s Senders=369ms Execution=9.138s HashState=4.028s IntermediateHashes=7.187s CallTraces=2.395s AccountHistoryIndex=1.549s StorageHistoryIndex=2.886s LogIndex=1.474s TxLookup=1.223s\r\n[INFO] [02-22|17:16:11.979] Timings (slower than 50ms)               Headers=499ms Bodies=16m25.281s Senders=172ms Execution=12m51.169s HashState=3.671s IntermediateHashes=7.424s CallTraces=1.558s AccountHistoryIndex=1.035s StorageHistoryIndex=1.891s LogIndex=1.048s TxLookup=511ms\r\n[INFO] [02-22|17:36:00.962] Timings (slower than 50ms)               Headers=142ms Bodies=16m54.822s Senders=707ms Execution=25.081s HashState=12.11s IntermediateHashes=22.502s CallTraces=6.523s AccountHistoryIndex=4.761s StorageHistoryIndex=7.355s LogIndex=3.967s TxLookup=1.945s\r\n[INFO] [02-22|17:53:22.264] Timings (slower than 50ms)               Headers=499ms Bodies=15m40s Senders=126ms Execution=4.914s HashState=2.001s IntermediateHashes=4.318s CallTraces=1.167s AccountHistoryIndex=839ms StorageHistoryIndex=1.455s LogIndex=884ms TxLookup=384ms\r\n[INFO] [02-22|18:08:43.842] Timings (slower than 50ms)               Headers=11.808s Bodies=14m18.685s Senders=464ms Execution=13.416s HashState=5.818s IntermediateHashes=11.856s CallTraces=3.786s AccountHistoryIndex=2.517s StorageHistoryIndex=4.494s LogIndex=2.44s TxLookup=1.182s\r\n[INFO] [02-22|18:24:45.598] Timings (slower than 50ms)               Headers=499ms Bodies=13m50.598s Senders=806ms Execution=27.283s HashState=10.833s IntermediateHashes=22.917s CallTraces=7.215s AccountHistoryIndex=5.286s StorageHistoryIndex=9.277s LogIndex=6.532s TxLookup=2.359s\r\n[INFO] [02-22|18:42:35.113] Timings (slower than 50ms)               Headers=499ms Bodies=15m31.762s Senders=498ms Execution=14.105s HashState=5.363s IntermediateHashes=12.046s CallTraces=3.686s AccountHistoryIndex=3.277s StorageHistoryIndex=4.13s LogIndex=2.735s TxLookup=1.399s\r\n[INFO] [02-22|19:12:24.877] Timings (slower than 50ms)               Headers=500ms Bodies=13m19.785s Senders=373ms Execution=13.658s HashState=4.867s IntermediateHashes=10.717s CallTraces=2.858s AccountHistoryIndex=2.279s StorageHistoryIndex=4.278s LogIndex=2.342s TxLookup=2.123s\r\n[INFO] [02-22|19:26:47.771] Timings (slower than 50ms)               Headers=499ms Bodies=13m2.463s Senders=392ms Execution=12.595s HashState=4.842s IntermediateHashes=9.781s CallTraces=2.98s AccountHistoryIndex=2.018s StorageHistoryIndex=3.641s LogIndex=2.108s TxLookup=1.423s\r\n[INFO] [02-22|19:41:26.735] Timings (slower than 50ms)               Headers=499ms Bodies=13m20.226s Senders=266ms Execution=11.977s HashState=4.475s IntermediateHashes=10.22s CallTraces=2.924s AccountHistoryIndex=2.073s StorageHistoryIndex=4.035s LogIndex=2.235s TxLookup=1.448s\r\n[INFO] [02-22|20:44:20.790] Timings (slower than 50ms)               BlockHashes=61ms Bodies=12m15.309s Senders=1.364s Execution=1m3.129s HashState=31.589s IntermediateHashes=56.364s CallTraces=18.115s AccountHistoryIndex=12.501s StorageHistoryIndex=19.466s LogIndex=14.117s TxLookup=8.992s\r\n[INFO] [02-22|20:59:47.682] Timings (slower than 50ms)               Headers=368ms Bodies=14m40s Senders=161ms Execution=4.753s HashState=2.113s IntermediateHashes=4.977s CallTraces=1.492s AccountHistoryIndex=1.012s StorageHistoryIndex=1.464s LogIndex=945ms TxLookup=738ms\r\n[INFO] [02-22|21:13:24.839] Timings (slower than 50ms)               Headers=257ms Bodies=13m6.261s Senders=232ms Execution=7.239s HashState=3.297s IntermediateHashes=6.446s CallTraces=2.619s AccountHistoryIndex=1.68s StorageHistoryIndex=2.222s LogIndex=1.425s TxLookup=1.071s\r\n[INFO] [02-22|21:41:51.237] Timings (slower than 50ms)               Headers=528ms Bodies=12m31.181s Senders=512ms Execution=12.133s HashState=5.196s IntermediateHashes=10.655s CallTraces=3.019s AccountHistoryIndex=2.2s StorageHistoryIndex=4.283s LogIndex=2.015s TxLookup=1.593s\r\n[INFO] [02-22|21:57:04.349] Timings (slower than 50ms)               Headers=341ms Bodies=14m16.767s Senders=252ms Execution=9.966s HashState=3.786s IntermediateHashes=8.317s CallTraces=2.659s AccountHistoryIndex=1.726s StorageHistoryIndex=3.34s LogIndex=1.806s TxLookup=1.438s\r\n[INFO] [02-22|22:11:55.859] Timings (slower than 50ms)               Headers=399ms Bodies=13m48.646s Senders=477ms Execution=11.955s HashState=4.924s IntermediateHashes=10.284s CallTraces=3.837s AccountHistoryIndex=2.057s StorageHistoryIndex=3.62s LogIndex=2.23s TxLookup=1.572s\r\n[INFO] [02-22|23:06:48.755] Timings (slower than 50ms)               Headers=396ms Bodies=12m34.479s Senders=346ms Execution=13.159s HashState=3.613s IntermediateHashes=8.011s CallTraces=2.344s AccountHistoryIndex=1.544s StorageHistoryIndex=2.932s LogIndex=2.472s TxLookup=1.308s\r\n[INFO] [02-22|23:20:38.581] Timings (slower than 50ms)               Headers=307ms Bodies=12m26.685s Senders=360ms Execution=12.347s HashState=4.284s IntermediateHashes=9.201s CallTraces=2.631s AccountHistoryIndex=1.758s StorageHistoryIndex=3.341s LogIndex=2.607s TxLookup=1.445s\r\n[INFO] [02-22|23:37:06.625] Timings (slower than 50ms)               Headers=460ms Bodies=14m12.622s Senders=468ms Execution=12.961s HashState=4.423s IntermediateHashes=10.781s CallTraces=3.129s AccountHistoryIndex=1.954s StorageHistoryIndex=3.343s LogIndex=2.133s TxLookup=1.031s\r\n[INFO] [02-22|23:50:51.496] Timings (slower than 50ms)               Headers=549ms Bodies=12m16.817s Senders=271ms Execution=16.627s HashState=4.581s IntermediateHashes=10.175s CallTraces=2.616s AccountHistoryIndex=1.861s StorageHistoryIndex=3.693s LogIndex=2.371s TxLookup=1.167s\r\n[INFO] [02-23|00:05:11.603] Timings (slower than 50ms)               Headers=482ms Bodies=13m7.917s Senders=249ms Execution=14.303s HashState=3.82s IntermediateHashes=8.371s CallTraces=2.537s AccountHistoryIndex=1.559s StorageHistoryIndex=2.788s LogIndex=1.838s TxLookup=862ms\r\n[INFO] [02-23|00:21:47.540] Timings (slower than 50ms)               Headers=375ms Bodies=15m19.539s Senders=337ms Execution=13.644s HashState=4.217s IntermediateHashes=9.031s CallTraces=2.856s AccountHistoryIndex=1.548s StorageHistoryIndex=3.085s LogIndex=2.061s TxLookup=861ms\r\n[INFO] [02-23|00:39:56.633] Timings (slower than 50ms)               Headers=354ms Bodies=17m0s Senders=454ms Execution=15.492s HashState=4.747s IntermediateHashes=9.267s CallTraces=2.903s AccountHistoryIndex=1.942s StorageHistoryIndex=4.3s LogIndex=2.086s TxLookup=948ms\r\n[INFO] [02-23|00:51:28.139] Timings (slower than 50ms)               Headers=254ms Bodies=11m22.191s Execution=1.011s HashState=270ms IntermediateHashes=772ms CallTraces=192ms AccountHistoryIndex=112ms StorageHistoryIndex=247ms LogIndex=199ms TxLookup=67ms\r\n[INFO] [02-23|01:32:52.239] Timings (slower than 50ms)               Headers=622ms Bodies=11m53.378s Senders=323ms Execution=14.7s HashState=4.269s IntermediateHashes=9.294s CallTraces=2.516s AccountHistoryIndex=1.877s StorageHistoryIndex=3.572s LogIndex=2.469s TxLookup=1.636s\r\n[INFO] [02-23|01:46:45.502] Timings (slower than 50ms)               Headers=1.01s Bodies=13m20s Senders=100ms Execution=3.839s HashState=1.118s IntermediateHashes=2.627s CallTraces=736ms AccountHistoryIndex=533ms StorageHistoryIndex=811ms LogIndex=619ms TxLookup=351ms\r\n[INFO] [02-23|01:59:41.179] Timings (slower than 50ms)               Headers=244ms Bodies=12m26.992s Senders=247ms Execution=8.684s HashState=2.754s IntermediateHashes=6.19s CallTraces=1.849s AccountHistoryIndex=1.173s StorageHistoryIndex=1.937s LogIndex=1.271s TxLookup=950ms\r\n[INFO] [02-23|02:25:40.234] Timings (slower than 50ms)               Headers=447ms Bodies=11m27.439s Senders=305ms Execution=11.398s HashState=3.179s IntermediateHashes=8.021s CallTraces=2.472s AccountHistoryIndex=2.074s StorageHistoryIndex=2.469s LogIndex=2.365s TxLookup=1.338s\r\n[INFO] [02-23|02:38:50.221] Timings (slower than 50ms)               Headers=342ms Bodies=12m20.855s Senders=284ms Execution=8.998s HashState=3.005s IntermediateHashes=6.78s CallTraces=1.917s AccountHistoryIndex=1.331s StorageHistoryIndex=2.022s LogIndex=1.684s TxLookup=1.261s\r\n[INFO] [02-23|02:52:58.480] Timings (slower than 50ms)               Headers=537ms Bodies=11m53.183s Senders=375ms Execution=15.162s HashState=4.276s IntermediateHashes=7.597s CallTraces=2.274s AccountHistoryIndex=1.768s StorageHistoryIndex=3.766s LogIndex=2.385s TxLookup=980ms\r\n[INFO] [02-23|03:06:04.309] Timings (slower than 50ms)               Headers=268ms Bodies=12m18.313s Senders=286ms Execution=11.735s HashState=3.682s IntermediateHashes=6.927s CallTraces=1.78s AccountHistoryIndex=1.251s StorageHistoryIndex=2.592s LogIndex=1.738s TxLookup=872ms\r\n[INFO] [02-23|03:18:44.749] Timings (slower than 50ms)               Headers=604ms Bodies=11m40.85s Senders=393ms Execution=13.299s HashState=3.747s IntermediateHashes=9.131s CallTraces=2.448s AccountHistoryIndex=1.863s StorageHistoryIndex=3.09s LogIndex=2.146s TxLookup=1.001s\r\n[INFO] [02-23|03:32:32.785] Timings (slower than 50ms)               Headers=476ms Bodies=12m33.5s Senders=278ms Execution=11.564s HashState=3.472s IntermediateHashes=8.323s CallTraces=2.027s AccountHistoryIndex=1.503s StorageHistoryIndex=2.787s LogIndex=1.958s TxLookup=903ms\r\n[INFO] [02-23|03:52:13.461] Timings (slower than 50ms)               Headers=416ms Bodies=11m27.985s Senders=441ms Execution=21.753s HashState=7.414s IntermediateHashes=16.298s CallTraces=4.154s AccountHistoryIndex=3.456s StorageHistoryIndex=6.966s LogIndex=3.87s TxLookup=1.767s\r\n[INFO] [02-23|04:04:26.935] Timings (slower than 50ms)               Headers=648ms Bodies=11m6.488s Senders=329ms Execution=12.828s HashState=4.828s IntermediateHashes=11.534s CallTraces=2.924s AccountHistoryIndex=2.301s StorageHistoryIndex=4.327s LogIndex=2.158s TxLookup=973ms\r\n[INFO] [02-23|04:18:42.357] Timings (slower than 50ms)               Headers=522ms Bodies=13m14.771s Senders=279ms Execution=12.283s HashState=4.327s IntermediateHashes=8.417s CallTraces=2.936s AccountHistoryIndex=1.941s StorageHistoryIndex=3.66s LogIndex=2.48s TxLookup=1.072s\r\n[INFO] [02-23|04:32:34.305] Timings (slower than 50ms)               Headers=515ms Bodies=13m20.001s Senders=101ms Execution=4.163s HashState=1.343s IntermediateHashes=2.832s CallTraces=854ms AccountHistoryIndex=576ms StorageHistoryIndex=1.126s LogIndex=815ms TxLookup=289ms\r\n[INFO] [02-23|04:46:53.099] Timings (slower than 50ms)               Headers=72ms Bodies=13m37.549s Senders=223ms Execution=12.385s HashState=4.215s IntermediateHashes=9.355s CallTraces=2.266s AccountHistoryIndex=1.747s StorageHistoryIndex=3.415s LogIndex=2.578s TxLookup=1.143s\r\n[INFO] [02-23|05:33:12.301] Timings (slower than 50ms)               Headers=5.12s Bodies=12m55.541s Senders=282ms Execution=11.014s HashState=4.705s IntermediateHashes=9.895s CallTraces=2.92s AccountHistoryIndex=2.843s StorageHistoryIndex=3.532s LogIndex=2.652s TxLookup=1.337s\r\n[INFO] [02-23|05:49:11.704] Timings (slower than 50ms)               Headers=532ms Bodies=13m28.854s Senders=781ms Execution=32.952s HashState=14.116s IntermediateHashes=29.02s CallTraces=8.153s AccountHistoryIndex=4.979s StorageHistoryIndex=10.435s LogIndex=6.877s TxLookup=3.406s\r\n[INFO] [02-23|06:03:52.234] Timings (slower than 50ms)               Headers=377ms Bodies=13m4.525s Senders=480ms Execution=16.982s HashState=6.734s IntermediateHashes=13.944s CallTraces=4.31s AccountHistoryIndex=2.579s StorageHistoryIndex=5.107s LogIndex=3.105s TxLookup=1.696s\r\n[INFO] [02-23|06:48:39.950] Timings (slower than 50ms)               Headers=562ms Bodies=12m22.13s Senders=358ms Execution=18.289s HashState=7.453s IntermediateHashes=17.175s CallTraces=4.612s AccountHistoryIndex=3.802s StorageHistoryIndex=6.023s LogIndex=3.826s TxLookup=1.399s\r\n[INFO] [02-23|07:02:05.080] Timings (slower than 50ms)               Headers=472ms Bodies=12m1.818s Senders=367ms Execution=15.196s HashState=6.215s IntermediateHashes=12.662s CallTraces=3.985s AccountHistoryIndex=2.491s StorageHistoryIndex=4.272s LogIndex=3.025s TxLookup=1.024s\r\n[INFO] [02-23|07:31:05.964] Timings (slower than 50ms)               Headers=645ms Bodies=13m7.706s Senders=485ms Execution=16.405s HashState=6.559s IntermediateHashes=16.141s CallTraces=4.03s AccountHistoryIndex=2.358s StorageHistoryIndex=4.426s LogIndex=2.685s TxLookup=1.313s\r\n[INFO] [02-23|08:01:31.708] Timings (slower than 50ms)               Headers=235ms Bodies=13m58.334s Senders=378ms Execution=6.5s HashState=3.35s IntermediateHashes=7.956s CallTraces=2.007s AccountHistoryIndex=1.785s StorageHistoryIndex=3.338s LogIndex=1.952s TxLookup=1.041s\r\n[INFO] [02-23|08:31:44.733] Timings (slower than 50ms)               Headers=424ms Bodies=14m0s Senders=303ms Execution=4.36s HashState=2.179s IntermediateHashes=5.385s CallTraces=1.748s AccountHistoryIndex=1.406s StorageHistoryIndex=1.361s LogIndex=1.592s TxLookup=878ms\r\n[INFO] [02-23|08:49:03.444] Timings (slower than 50ms)               Headers=1.768s Bodies=15m46.184s Senders=818ms Execution=25.974s HashState=9.791s IntermediateHashes=19.019s CallTraces=6.303s AccountHistoryIndex=5.785s StorageHistoryIndex=7.464s LogIndex=6.262s TxLookup=3.412s\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1441404523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1442067003",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6935#issuecomment-1442067003",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6935",
    "id": 1442067003,
    "node_id": "IC_kwDOC0FsAM5V9DI7",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-23T16:23:50Z",
    "updated_at": "2023-02-23T16:23:50Z",
    "author_association": "NONE",
    "body": "OK this is strange. I did the following change and restarted it, to see if I could catch up. I changed this value to 2048M, I normally run it at default.\r\n\r\n` --batchSize value                                        Batch size for the execution stage (default: \"256M\")`\r\n\r\nI went away and when I came back I saw it was keeping up every block. So I changed this back to 256M, restarted node and it caught up again in a couple of minutes just like it always used to.\r\n\r\nI reanalysed my logs and found the following without timestamps (I must remember to grep to extract these errors, if I grep using dates I miss them as they are not timestamped):-\r\n\r\n`setup_dxb:17866 opening after an unclean shutdown, but boot-id(8a98ec1d610fd8f9-aff293f99c4e4152) is MATCH: rollback NOT needed, steady-sync NEEDED`\r\n\r\nThis message was there the 2 times I restarted. Now when I restart it isn't there anymore.\r\n\r\nSo I am guessing catching up with \"batch sync\" and then syncing 1 by 1 at chain tip somehow fixed this error. Is 1-by-1 a steady sync? Impressed at how it fixed itself!. What's not good is these sorts of errors being output without the normal logging timestamps cause they are easy to miss!\r\n \r\nI remember my node crashing specifically with an error related to internal CL when I was trying the internal CL for the nth time trying to see if it is finally stable. \r\n\r\nGonna close as it seems stable now, I'm still scared to try internal CL again though! Going back through the logs this is the CL-related crash which I think put my database in the unclean state.\r\n\r\n```\r\n[INFO] [02-21|03:17:57.767] [2/15 Headers] Waiting for Consensus Layer... \r\n[INFO] [02-21|03:17:58.268] [2/15 Headers] Fork choice: chain extension from=16673543 to=16674156\r\n[INFO] [02-21|03:17:58.280] [5/15 Bodies] Processing bodies...       from=16673543 to=16674156\r\n[INFO] [02-21|03:18:12.296] [p2p] GoodPeers                          eth67=27 eth66=3 eth68=7\r\n[INFO] [02-21|03:18:18.290] [5/15 Bodies] Downloading block bodies   block_num=16673564 delivery/sec=599.4KB wasted/sec=0B remaining=591 delivered=113 cache=9.9MB alloc=2.5GB sys=3.4GB\r\n[INFO] [02-21|03:18:38.290] [5/15 Bodies] Downloading block bodies   block_num=16673815 delivery/sec=1.4MB wasted/sec=0B remaining=340 delivered=380 cache=11.4MB alloc=2.8GB sys=3.5GB\r\n[INFO] [02-21|03:18:45.756] [txpool] stat                            block=16673543 pending=2092 baseFee=32 queued=3296 alloc=2.9GB sys=3.6GB\r\n[INFO] [02-21|03:18:58.282] [5/15 Bodies] Downloading block bodies   block_num=16673815 delivery/sec=609.3KB wasted/sec=0B remaining=340 delivered=490 cache=23.3MB alloc=3.0GB sys=3.6GB\r\n[INFO] [02-21|03:19:18.282] [5/15 Bodies] Downloading block bodies   block_num=16673855 delivery/sec=212.7KB wasted/sec=0B remaining=300 delivered=530 cache=23.3MB alloc=3.2GB sys=3.6GB\r\n[INFO] [02-21|03:19:38.282] [5/15 Bodies] Downloading block bodies   block_num=16673876 delivery/sec=167.8KB wasted/sec=0B remaining=279 delivered=558 cache=24.2MB alloc=2.3GB sys=3.6GB\r\n[INFO] [02-21|03:19:45.755] [txpool] stat                            block=16673543 pending=3685 baseFee=37 queued=3815 alloc=2.3GB sys=3.6GB\r\n[INFO] [02-21|03:19:57.315] [5/15 Bodies] Processed                  highest=16674156\r\n[INFO] [02-21|03:19:57.315] [5/15 Bodies] DONE                       in=1m59.034793754s\r\n[INFO] [02-21|03:19:57.315] [6/15 Senders] Started                   from=16673543 to=16674156\r\n[WARN] [02-21|03:19:58.666] received error                           err=\"ï¿½sNaPpYï¿½zï¿½EQUEST_ERROR_RATE_LIMITED\"\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x155dc51]\r\n\r\ngoroutine 7554 [running]:\r\ngithub.com/ledgerwatch/erigon/cmd/lightclient/lightclient.(*ChainTipSubscriber).StartLoop.func1()\r\n\tgithub.com/ledgerwatch/erigon/cmd/lightclient/lightclient/subscriber.go:72 +0x151\r\ncreated by github.com/ledgerwatch/erigon/cmd/lightclient/lightclient.(*ChainTipSubscriber).StartLoop\r\n\tgithub.com/ledgerwatch/erigon/cmd/lightclient/lightclient/subscriber.go:60 +0x1aa\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1442067003/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

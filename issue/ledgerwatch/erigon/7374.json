{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7374",
  "id": 1680273839,
  "node_id": "I_kwDOC0FsAM5kJvGv",
  "number": 7374,
  "title": "blocked with panic :runtime error: index out of range [0] with length 0",
  "user": {
    "login": "justforfunya",
    "id": 7145447,
    "node_id": "MDQ6VXNlcjcxNDU0NDc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7145447?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/justforfunya",
    "html_url": "https://github.com/justforfunya",
    "followers_url": "https://api.github.com/users/justforfunya/followers",
    "following_url": "https://api.github.com/users/justforfunya/following{/other_user}",
    "gists_url": "https://api.github.com/users/justforfunya/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/justforfunya/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/justforfunya/subscriptions",
    "organizations_url": "https://api.github.com/users/justforfunya/orgs",
    "repos_url": "https://api.github.com/users/justforfunya/repos",
    "events_url": "https://api.github.com/users/justforfunya/events{/privacy}",
    "received_events_url": "https://api.github.com/users/justforfunya/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-04-24T01:11:12Z",
  "updated_at": "2023-06-22T03:11:45Z",
  "closed_at": "2023-06-12T02:45:06Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `./erigon --version`\r\nv2.43.0\r\nOS & Version: Windows/Linux/OSX\r\nubuntu 20.04\r\nCommit hash: \r\nhttps://github.com/ledgerwatch/erigon/commit/1106475e345d936aa1220ace3e95d746ec361fa4\r\nErigon Command (with flags/config):\r\n./erigon  --chain=bor-mainnet --datadir  matic_data_archive --http.addr 0.0.0.0  --http.port 8547 --http.vhosts=192.168.0.108   --ws --http.api=eth,debug,net,trace,web3,erigon --authrpc.port=8553   --torrent.port=62071   --private.api.addr=0.0.0.0:9092 --port=3330 --bor.heimdall=https://heimdall-api.polygon.technology/   --snapshots=true --p2p.protocol=66\r\nConcensus Layer:\r\n\r\nConcensus Layer Command (with flags/config):\r\n\r\nChain/Network: \r\npolygon\r\n#### Expected behaviour\r\n\r\n\r\n#### Actual behaviour\r\ndie loop  while downloading headers,says \"runtime error: index out of range [0] with length 0, trace: [stageloop.go:132 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392\r\ntage_headers.go:822 stage_headers.go:144 default_stages.go:36 sync.go:358 sync.go:260 stageloop.go:166 stageloop.go:94 asm_amd64.s:1598]\"\r\n\r\n\r\nthis is log:\r\nEROR[04-24|08:58:55.108] Staged Sync                              err=\"runtime error: index out of range [0] with length 0, trace: [stageloop.go:132 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392\r\ntage_headers.go:822 stage_headers.go:144 default_stages.go:36 sync.go:358 sync.go:260 stageloop.go:166 stageloop.go:94 asm_amd64.s:1598]\"\r\nINFO[04-24|08:59:05.099] [txpool] stat                            pending=4224 baseFee=18861 queued=30000 alloc=3.0GB sys=5.3GB\r\nINFO[04-24|08:59:17.547] [2/15 Headers] Waiting for headers...    from=39881103\r\nINFO[04-24|08:59:37.539] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|08:59:57.539] [2/15 Headers] Wrote block headers       number=39889401 blk/second=414.900 alloc=3.5GB sys=5.3GB\r\nINFO[04-24|09:00:04.768] [p2p] GoodPeers                          eth66=7\r\nINFO[04-24|09:00:05.109] [txpool] stat                            pending=4225 baseFee=18865 queued=30000 alloc=3.5GB sys=5.3GB\r\nINFO[04-24|09:00:17.539] [2/15 Headers] No block headers to write in this log period block number=39889401\r\nINFO[04-24|09:00:37.539] [2/15 Headers] Wrote block headers       number=39889787 blk/second=19.300 alloc=3.1GB sys=5.3GB\r\nINFO[04-24|09:00:57.539] [2/15 Headers] Wrote block headers       number=39891716 blk/second=96.450 alloc=3.2GB sys=5.3GB\r\nINFO[04-24|09:01:05.099] [txpool] stat                            pending=4256 baseFee=18866 queued=30000 alloc=3.2GB sys=5.3GB\r\nINFO[04-24|09:01:17.539] [2/15 Headers] No block headers to write in this log period block number=39891716\r\nINFO[04-24|09:01:37.539] [2/15 Headers] No block headers to write in this log period block number=39891716\r\nEROR[04-24|09:01:42.662] Staged Sync                              err=\"runtime error: index out of range [0] with length 0, trace: [stageloop.go:132 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392\r\ntage_headers.go:822 stage_headers.go:144 default_stages.go:36 sync.go:358 sync.go:260 stageloop.go:166 stageloop.go:94 asm_amd64.s:1598]\"\r\nINFO[04-24|09:01:43.362] [2/15 Headers] Waiting for headers...    from=39881103\r\nINFO[04-24|09:02:03.362] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|09:02:04.769] [p2p] GoodPeers                          eth66=8\r\nINFO[04-24|09:02:05.108] [txpool] stat                            pending=4256 baseFee=18866 queued=30000 alloc=3.4GB sys=5.3GB\r\nINFO[04-24|09:02:23.362] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|09:02:43.362] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|09:03:03.362] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|09:03:12.172] [txpool] stat                            pending=4259 baseFee=18875 queued=30000 alloc=3.0GB sys=5.3GB\r\nINFO[04-24|09:03:23.362] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|09:03:23.362] Req/resp stats                           req=156 reqMin=39899823 reqMax=41883941 skel=7 skelMin=39881102 skelMax=39918158 resp=94 respMin=39914685 respMax=41883941 dups=191\r\nINFO[04-24|09:03:43.362] [2/15 Headers] Wrote block headers       number=39881294 blk/second=9.550 alloc=3.1GB sys=5.3GB\r\nINFO[04-24|09:04:03.362] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:04:04.769] [p2p] GoodPeers                          eth66=6\r\nINFO[04-24|09:04:05.112] [txpool] stat                            pending=4260 baseFee=18877 queued=30000 alloc=3.1GB sys=5.3GB\r\nINFO[04-24|09:04:23.362] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:04:43.363] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:05:03.362] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:05:05.098] [txpool] stat                            pending=4260 baseFee=18877 queued=30000 alloc=3.0GB sys=5.3GB\r\nINFO[04-24|09:05:23.362] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:05:43.363] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:06:03.362] [2/15 Headers] No block headers to write in this log period block number=39881294\r\nINFO[04-24|09:06:04.768] [p2p] GoodPeers                          eth66=7\r\nINFO[04-24|09:06:05.109] [txpool] stat                            pending=4260 baseFee=18877 queued=30000 alloc=3.1GB sys=5.3GB\r\nINFO[04-24|09:06:23.362] [2/15 Headers] No block headers to write in this log period block number=39881294\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n     pending=4256 baseFee=18866 queued=30000 alloc=3.2GB sys=5.3GB\r\nINFO[04-24|09:01:17.539] [2/15 Headers] No block headers to write in this log period block number=39891716\r\nINFO[04-24|09:01:37.539] [2/15 Headers] No block headers to write in this log period block number=39891716\r\nEROR[04-24|09:01:42.662] Staged Sync                              err=\"runtime error: index out of range [0] with length 0, trace: [stageloop.go:132 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392\r\ntage_headers.go:822 stage_headers.go:144 default_stages.go:36 sync.go:358 sync.go:260 stageloop.go:166 stageloop.go:94 asm_amd64.s:1598]\"\r\nINFO[04-24|09:01:43.362] [2/15 Headers] Waiting for headers...    from=39881103\r\nINFO[04-24|09:02:03.362] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|09:02:04.769] [p2p] GoodPeers                          eth66=8\r\nINFO[04-24|09:02:05.108] [txpool] stat                            pending=4256 baseFee=18866 queued=30000 alloc=3.4GB sys=5.3GB\r\n````\r\n[backtrace]\r\n````\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1519320104",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7374#issuecomment-1519320104",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374",
    "id": 1519320104,
    "node_id": "IC_kwDOC0FsAM5ajvwo",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-24T03:11:54Z",
    "updated_at": "2023-04-24T03:11:54Z",
    "author_association": "COLLABORATOR",
    "body": "@justforfunya looks like a race-condition. if you can help us by run erigon as `go run -race ./cmd/erigon <your_cli_flags>` and see if there is any `WARNING: DATA RACE` output - feel free. If not - it's ok - we will try to reproduce by self. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1519320104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1519529541",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7374#issuecomment-1519529541",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374",
    "id": 1519529541,
    "node_id": "IC_kwDOC0FsAM5aki5F",
    "user": {
      "login": "justforfunya",
      "id": 7145447,
      "node_id": "MDQ6VXNlcjcxNDU0NDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7145447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/justforfunya",
      "html_url": "https://github.com/justforfunya",
      "followers_url": "https://api.github.com/users/justforfunya/followers",
      "following_url": "https://api.github.com/users/justforfunya/following{/other_user}",
      "gists_url": "https://api.github.com/users/justforfunya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/justforfunya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/justforfunya/subscriptions",
      "organizations_url": "https://api.github.com/users/justforfunya/orgs",
      "repos_url": "https://api.github.com/users/justforfunya/repos",
      "events_url": "https://api.github.com/users/justforfunya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/justforfunya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-24T07:26:15Z",
    "updated_at": "2023-04-24T07:26:48Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov Hi I try go run cmd ,the error is the same with above and no other warnnings.\r\n\r\n\r\nEROR[04-24|15:20:54.377] Staged Sync                              err=\"runtime error: index out of range [0] with length 0, trace: [stageloop.go:132 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392 stage_headers.go:822 stage_headers.go:144 default_stages.go:36 sync.go:358 sync.go:260 stageloop.go:166 stageloop.go:94 asm_amd64.s:1598]\"\r\nINFO[04-24|15:20:58.588] [2/15 Headers] Waiting for headers...    from=39881103\r\n\r\n\r\ngo run -race ./cmd/erigon --chain=bor-mainnet --datadir  /xxxx/matic_data_archive --http.addr 0.0.0.0  --http.port 8547 --http.vhosts=192.168.0.108 --ws --http.api=eth,debug,net,trace,web3,erigon --authrpc.port=8553   --torrent.port=62071   --private.api.addr=0.0.0.0:9092 --port=3330 --bor.heimdall=https://heimdall-api.polygon.technology/   --snapshots=true --p2p.protocol=66\r\nINFO[04-24|15:05:59.287] logging to file system                   log dir=/xxx/matic_data_archive/logs file prefix=erigon log level=info json=false\r\nINFO[04-24|15:05:59.383] Build info                               git_branch= git_tag= git_commit=\r\nINFO[04-24|15:05:59.383] Starting Erigon on Bor Mainnet...\r\nINFO[04-24|15:05:59.393] Maximum peer count                       ETH=100 total=100\r\nINFO[04-24|15:05:59.394] starting HTTP APIs                       APIs=eth,debug,net,trace,web3,erigon\r\nINFO[04-24|15:05:59.395] torrent verbosity                        level=WRN\r\nINFO[04-24|15:05:59.395] [torrent] Public IP                      ip=x.x.x.x\r\nINFO[04-24|15:05:59.408] Set global gas cap                       cap=50000000\r\nINFO[04-24|15:05:59.419] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=50m upload.rate=100kb\r\nINFO[04-24|15:05:59.419] Opening Database                         label=chaindata path=/xxx/matic_data_archive/chaindata\r\nINFO[04-24|15:05:59.419] [db] params: growStep=2GB, mapsSize=7TB, shrinkThreshold=-1, pageSize=4KB, label=chaindata, WriteMap=false, Durable=false, NoReadahead=true,\r\nINFO[04-24|15:05:59.456] Initialised chain configuration          config=\"{ChainID: 137, Homestead: 0, DAO: <nil>, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 0, Petersburg: 0, Istanbul: 3395000, Muir Glacier: 3395000, Berlin: 14750000, London: 23850000, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: <nil>, Merge Netsplit: <nil>, Shanghai: <nil>, Cancun: <nil>, Prague: <nil>, Engine: bor}\" genesis=xxxxxxx\r\nINFO[04-24|15:05:59.456] Effective                                prune_flags= snapshot_flags=\"--snapshots=true\" history.v3=false\r\nINFO[04-24|15:06:12.719] Initialising Ethereum protocol           network=137\r\nINFO[04-24|15:06:18.045] new subscription to logs established\r\nINFO[04-24|15:06:18.045] Starting private RPC server              on=0.0.0.0:9092\r\nINFO[04-24|15:06:18.046] rpc filters: subscribing to Erigon events\r\nINFO[04-24|15:06:18.046] new subscription to newHeaders established\r\nINFO[04-24|15:06:18.046] New txs subscriber joined\r\nINFO[04-24|15:06:18.048] Reading JWT secret                       path=/xxxx/matic_data_archive/jwt.hex\r\nINFO[04-24|15:06:18.048] HTTP endpoint opened for Engine API      url=127.0.0.1:8553 ws=true ws.compression=true\r\nINFO[04-24|15:06:18.049] HTTP endpoint opened                     url=[::]:8547 ws=true ws.compression=true grpc=false\r\nINFO[04-24|15:06:18.065] Started P2P networking                   version=66 self=enode://XXXXXXXXX@127.0.0.1:0 name=erigon/v2.43.0/linux-amd64/go1.x.xxx\r\nINFO[04-24|15:06:18.073] [1/15 Snapshots] Fetching torrent files metadata\r\nINFO[04-24|15:06:18.089] [snapshots] Blocks Stat                  blocks=39780k indices=39780k alloc=3.5GB sys=3.7GB\r\nINFO[04-24|15:06:18.089] [2/15 Headers] Waiting for headers...    from=39881103\r\nINFO[04-24|15:06:38.090] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|15:06:45.725] [txpool] Started\r\nINFO[04-24|15:06:58.089] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|15:07:18.046] [txpool] stat                            pending=7791 baseFee=23557 queued=30000 alloc=4.3GB sys=4.5GB\r\nINFO[04-24|15:07:18.089] [2/15 Headers] Inserting headers         progress=39896097 queue=1\r\nINFO[04-24|15:07:38.090] [2/15 Headers] Wrote block headers       number=39920859 blk/second=1987.800 alloc=3.4GB sys=5.0GB\r\nINFO[04-24|15:07:58.090] [2/15 Headers] Wrote block headers       number=39921052 blk/second=9.650 alloc=3.5GB sys=5.0GB\r\nINFO[04-24|15:08:12.720] [p2p] GoodPeers                          eth66=6\r\nINFO[04-24|15:08:18.090] [2/15 Headers] Wrote block headers       number=39960616 blk/second=1978.200 alloc=4.7GB sys=5.0GB\r\nINFO[04-24|15:08:19.204] [txpool] stat                            pending=7803 baseFee=23558 queued=30000 alloc=4.8GB sys=5.1GB\r\nINFO[04-24|15:08:38.090] [2/15 Headers] Wrote block headers       number=39970459 blk/second=492.150 alloc=5.2GB sys=5.5GB\r\nINFO[04-24|15:08:58.090] [2/15 Headers] Wrote block headers       number=39971810 blk/second=67.550 alloc=5.4GB sys=5.7GB\r\nINFO[04-24|15:09:18.056] [txpool] stat                            pending=7811 baseFee=23591 queued=30000 alloc=3.9GB sys=6.1GB\r\nINFO[04-24|15:09:18.090] [2/15 Headers] Inserting headers         progress=40007788 queue=1\r\nINFO[04-24|15:09:38.090] [2/15 Headers] Wrote block headers       number=40028936 blk/second=2856.300 alloc=4.8GB sys=6.1GB\r\nINFO[04-24|15:09:58.091] [2/15 Headers] Wrote block headers       number=40041251 blk/second=615.750 alloc=5.4GB sys=6.1GB\r\nINFO[04-24|15:10:12.719] [p2p] GoodPeers                          eth66=8\r\nINFO[04-24|15:10:18.088] [txpool] stat                            pending=7850 baseFee=23591 queued=30000 alloc=3.8GB sys=6.2GB\r\nINFO[04-24|15:10:18.089] [2/15 Headers] Wrote block headers       number=40079270 blk/second=1900.950 alloc=3.8GB sys=6.2GB\r\nINFO[04-24|15:10:38.090] [2/15 Headers] Wrote block headers       number=40086797 blk/second=376.350 alloc=4.2GB sys=6.2GB\r\nINFO[04-24|15:10:58.095] [2/15 Headers] Inserting headers         progress=40097669 queue=1\r\nINFO[04-24|15:11:18.091] [2/15 Headers] Wrote block headers       number=40114395 blk/second=1379.900 alloc=5.4GB sys=6.2GB\r\nINFO[04-24|15:11:18.468] [txpool] stat                            pending=7864 baseFee=23595 queued=30000 alloc=5.4GB sys=6.2GB\r\nINFO[04-24|15:11:38.090] [2/15 Headers] Wrote block headers       number=40139291 blk/second=1244.800 alloc=3.4GB sys=6.2GB\r\nINFO[04-24|15:11:58.090] [2/15 Headers] Wrote block headers       number=40143923 blk/second=231.600 alloc=3.8GB sys=6.2GB\r\nINFO[04-24|15:12:12.719] [p2p] GoodPeers                          eth66=13\r\nINFO[04-24|15:12:18.090] [2/15 Headers] Inserting headers         progress=40171474 queue=1\r\nINFO[04-24|15:12:18.096] [txpool] stat                            pending=8029 baseFee=23595 queued=30000 alloc=4.8GB sys=6.3GB\r\nINFO[04-24|15:12:38.090] [2/15 Headers] Wrote block headers       number=40183679 blk/second=1987.800 alloc=5.3GB sys=6.3GB\r\nINFO[04-24|15:12:58.090] [2/15 Headers] Wrote block headers       number=40192364 blk/second=434.250 alloc=5.8GB sys=6.3GB\r\nINFO[04-24|15:13:18.053] [txpool] stat                            pending=8061 baseFee=23605 queued=30000 alloc=3.5GB sys=6.3GB\r\nINFO[04-24|15:13:18.090] [2/15 Headers] Wrote block headers       number=40200277 blk/second=395.650 alloc=3.5GB sys=6.3GB\r\nINFO[04-24|15:13:38.090] [2/15 Headers] Inserting headers         progress=40233462 queue=1\r\nINFO[04-24|15:13:58.090] [2/15 Headers] Wrote block headers       number=40243701 blk/second=2171.200 alloc=5.3GB sys=6.3GB\r\nINFO[04-24|15:14:12.720] [p2p] GoodPeers                          eth66=15\r\nINFO[04-24|15:14:18.093] [txpool] stat                            pending=8074 baseFee=23605 queued=30000 alloc=3.0GB sys=6.3GB\r\nINFO[04-24|15:14:18.189] [2/15 Headers] Inserting headers         progress=40257536 queue=1\r\nINFO[04-24|15:14:38.090] [2/15 Headers] Wrote block headers       number=40275159 blk/second=1572.900 alloc=3.8GB sys=6.3GB\r\nINFO[04-24|15:14:58.090] [2/15 Headers] Wrote block headers       number=40287124 blk/second=598.250 alloc=4.4GB sys=6.3GB\r\nINFO[04-24|15:15:18.046] [txpool] stat                            pending=8086 baseFee=23605 queued=30000 alloc=5.1GB sys=6.3GB\r\nINFO[04-24|15:15:18.090] [2/15 Headers] Inserting headers         progress=40304889 queue=1\r\nINFO[04-24|15:15:38.090] [2/15 Headers] Wrote block headers       number=40319741 blk/second=1630.850 alloc=5.7GB sys=6.3GB\r\nINFO[04-24|15:15:58.090] [2/15 Headers] Inserting headers         progress=40321592 queue=1\r\nINFO[04-24|15:16:12.719] [p2p] GoodPeers                          eth66=14\r\nINFO[04-24|15:16:18.087] [txpool] stat                            pending=8113 baseFee=23605 queued=30000 alloc=3.4GB sys=6.4GB\r\nINFO[04-24|15:16:18.090] [2/15 Headers] Wrote block headers       number=40331127 blk/second=569.300 alloc=3.4GB sys=6.4GB\r\nINFO[04-24|15:16:38.090] [2/15 Headers] Inserting headers         progress=40342689 queue=1\r\nINFO[04-24|15:16:58.091] [2/15 Headers] Wrote block headers       number=40358918 blk/second=1389.550 alloc=4.6GB sys=6.4GB\r\nINFO[04-24|15:17:18.047] [txpool] stat                            pending=8116 baseFee=23605 queued=30000 alloc=5.2GB sys=6.4GB\r\nINFO[04-24|15:17:18.090] [2/15 Headers] Wrote block headers       number=40376867 blk/second=897.450 alloc=5.2GB sys=6.4GB\r\nINFO[04-24|15:17:38.090] [2/15 Headers] Wrote block headers       number=40379375 blk/second=125.400 alloc=5.4GB sys=6.4GB\r\nINFO[04-24|15:17:58.090] [2/15 Headers] Wrote block headers       number=40397517 blk/second=907.100 alloc=3.1GB sys=6.4GB\r\nINFO[04-24|15:18:12.720] [p2p] GoodPeers                          eth66=15\r\nINFO[04-24|15:18:18.089] [txpool] stat                            pending=8312 baseFee=23608 queued=30000 alloc=3.3GB sys=6.4GB\r\nINFO[04-24|15:18:18.090] [2/15 Headers] No block headers to write in this log period block number=40397517\r\nINFO[04-24|15:18:38.090] [2/15 Headers] Wrote block headers       number=40402148 blk/second=231.550 alloc=3.6GB sys=6.4GB\r\nINFO[04-24|15:18:58.090] [2/15 Headers] Wrote block headers       number=40405043 blk/second=144.750 alloc=3.9GB sys=6.4GB\r\nINFO[04-24|15:19:18.046] [txpool] stat                            pending=8348 baseFee=23610 queued=30000 alloc=4.2GB sys=6.4GB\r\nINFO[04-24|15:19:18.091] [2/15 Headers] Wrote block headers       number=40410061 blk/second=250.900 alloc=4.2GB sys=6.4GB\r\nINFO[04-24|15:19:38.090] [2/15 Headers] No block headers to write in this log period block number=40410061\r\nINFO[04-24|15:19:58.090] [2/15 Headers] No block headers to write in this log period block number=40410061\r\nINFO[04-24|15:20:12.719] [p2p] GoodPeers                          eth66=12\r\nINFO[04-24|15:20:18.087] [txpool] stat                            pending=8348 baseFee=23610 queued=30000 alloc=3.2GB sys=6.4GB\r\nINFO[04-24|15:20:18.090] [2/15 Headers] Wrote block headers       number=40414113 blk/second=202.600 alloc=3.2GB sys=6.4GB\r\nINFO[04-24|15:20:38.090] [2/15 Headers] Wrote block headers       number=40416815 blk/second=135.100 alloc=3.4GB sys=6.4GB\r\nEROR[04-24|15:20:54.377] Staged Sync                              err=\"runtime error: index out of range [0] with length 0, trace: [stageloop.go:132 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392 stage_headers.go:822 stage_headers.go:144 default_stages.go:36 sync.go:358 sync.go:260 stageloop.go:166 stageloop.go:94 asm_amd64.s:1598]\"\r\nINFO[04-24|15:20:58.588] [2/15 Headers] Waiting for headers...    from=39881103\r\nINFO[04-24|15:21:18.047] [txpool] stat                            pending=8348 baseFee=23610 queued=30000 alloc=3.6GB sys=6.4GB\r\nINFO[04-24|15:21:18.589] [2/15 Headers] No block headers to write in this log period block number=39881103\r\nINFO[04-24|15:21:38.589] [2/15 Headers] No block headers to write in this log period block number=39881103",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1519529541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1575348765",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7374#issuecomment-1575348765",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374",
    "id": 1575348765,
    "node_id": "IC_kwDOC0FsAM5d5eod",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-06-04T02:58:03Z",
    "updated_at": "2023-06-04T02:58:03Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1575348765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1586490384",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7374#issuecomment-1586490384",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374",
    "id": 1586490384,
    "node_id": "IC_kwDOC0FsAM5ej-wQ",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-06-12T02:45:05Z",
    "updated_at": "2023-06-12T02:45:05Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1586490384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1601955838",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7374#issuecomment-1601955838",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7374",
    "id": 1601955838,
    "node_id": "IC_kwDOC0FsAM5fe-f-",
    "user": {
      "login": "SuperEdison",
      "id": 84554944,
      "node_id": "MDQ6VXNlcjg0NTU0OTQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/84554944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SuperEdison",
      "html_url": "https://github.com/SuperEdison",
      "followers_url": "https://api.github.com/users/SuperEdison/followers",
      "following_url": "https://api.github.com/users/SuperEdison/following{/other_user}",
      "gists_url": "https://api.github.com/users/SuperEdison/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SuperEdison/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SuperEdison/subscriptions",
      "organizations_url": "https://api.github.com/users/SuperEdison/orgs",
      "repos_url": "https://api.github.com/users/SuperEdison/repos",
      "events_url": "https://api.github.com/users/SuperEdison/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SuperEdison/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-22T03:11:44Z",
    "updated_at": "2023-06-22T03:11:44Z",
    "author_association": "NONE",
    "body": "i met the same error\r\nerigon verison:2.46.0\r\nstartup param erigon --datadir=/mnt/polygon/polygondata --http.api=eth,erigon,engine,trace,web3,txpool --http.addr=0.0.0.0 --http.port=80 --http.vhosts=* --chain=bor-mainnet --rpc.batch.concurrency=32 --db.read.concurrency=256 --bor.heimdall=http://localhost:1317 --batchSize=1g\r\n\r\n```shell\r\n[INFO] [06-22|11:04:00.065] HTTP endpoint opened                     url=[::]:80 ws=false ws.compression=true grpc=false\r\n[INFO] [06-22|11:04:00.073] Started P2P networking                   version=67 self=enode://b7141d7c0ec4a1132fa094355663f8a758edd91fd253538a712933f93e2b4e650e8c38db69fccd2aef41c4204c92018c5bc6a220bec0e4248337e60a070e11eb@127.0.0.1:0 name=erigon/v2.46.0-dev-6755f7e1/linux-amd64/go1.20.4\r\n[INFO] [06-22|11:04:00.074] Started P2P networking                   version=68 self=enode://b7141d7c0ec4a1132fa094355663f8a758edd91fd253538a712933f93e2b4e650e8c38db69fccd2aef41c4204c92018c5bc6a220bec0e4248337e60a070e11eb@127.0.0.1:0 name=erigon/v2.46.0-dev-6755f7e1/linux-amd64/go1.20.4\r\n[INFO] [06-22|11:04:00.099] [txpool] Started \r\n[INFO] [06-22|11:04:00.104] [1/15 Snapshots] Fetching torrent files metadata \r\n[INFO] [06-22|11:04:00.111] [snapshots] Blocks Stat                  blocks=43926k indices=43926k alloc=3.9GB sys=4.1GB\r\n[INFO] [06-22|11:04:00.111] [2/15 Headers] Waiting for headers...    from=44018615\r\n[INFO] [06-22|11:04:20.112] [2/15 Headers] No block headers to write in this log period block number=44018615\r\n[INFO] [06-22|11:04:40.112] [2/15 Headers] No block headers to write in this log period block number=44018615\r\n[INFO] [06-22|11:04:57.544] Span with given block number is not loaded fetching span=6878\r\n[INFO] [06-22|11:05:00.065] [txpool] stat                            pending=0 baseFee=0 queued=32 alloc=4.1GB sys=4.4GB\r\n[INFO] [06-22|11:05:00.112] [2/15 Headers] Wrote block headers       number=44018807 blk/second=9.600 alloc=4.1GB sys=4.4GB\r\n[INFO] [06-22|11:05:20.112] [2/15 Headers] Wrote block headers       number=44019386 blk/second=28.950 alloc=4.3GB sys=4.5GB\r\n[INFO] [06-22|11:05:40.112] [2/15 Headers] No block headers to write in this log period block number=44019386\r\n[INFO] [06-22|11:05:59.200] [p2p] GoodPeers                          eth66=5\r\n[INFO] [06-22|11:06:00.065] [txpool] stat                            pending=1077 baseFee=1 queued=1391 alloc=3.0GB sys=4.6GB\r\n[INFO] [06-22|11:06:00.111] [2/15 Headers] No block headers to write in this log period block number=44019386\r\n[INFO] [06-22|11:06:20.112] [2/15 Headers] No block headers to write in this log period block number=44019386\r\n[INFO] [06-22|11:06:40.111] [2/15 Headers] No block headers to write in this log period block number=44019386\r\n[INFO] [06-22|11:06:47.846] Span with given block number is not loaded fetching span=6879\r\n[INFO] [06-22|11:07:00.066] [txpool] stat                            pending=1123 baseFee=2 queued=2209 alloc=3.4GB sys=4.6GB\r\n[INFO] [06-22|11:07:00.112] [2/15 Headers] Wrote block headers       number=44022473 blk/second=154.350 alloc=3.4GB sys=4.6GB\r\n[INFO] [06-22|11:07:15.649] Span with given block number is not loaded fetching span=6880\r\n[INFO] [06-22|11:07:16.545] Span with given block number is not loaded fetching span=6881\r\n[INFO] [06-22|11:07:20.112] [2/15 Headers] Wrote block headers       number=44037141 blk/second=733.400 alloc=3.9GB sys=4.6GB\r\n[INFO] [06-22|11:07:24.030] Span with given block number is not loaded fetching span=6882\r\n[INFO] [06-22|11:07:25.327] Span with given block number is not loaded fetching span=6883\r\n[INFO] [06-22|11:07:31.697] Span with given block number is not loaded fetching span=6884\r\n[INFO] [06-22|11:07:38.451] Span with given block number is not loaded fetching span=6885\r\n[INFO] [06-22|11:07:40.113] [2/15 Headers] Wrote block headers       number=44061845 blk/second=1235.200 alloc=4.7GB sys=5.0GB\r\n[INFO] [06-22|11:07:43.033] Span with given block number is not loaded fetching span=6886\r\n[INFO] [06-22|11:07:48.409] Span with given block number is not loaded fetching span=6887\r\n[INFO] [06-22|11:07:49.989] Span with given block number is not loaded fetching span=6888\r\n[INFO] [06-22|11:07:51.699] Span with given block number is not loaded fetching span=6889\r\n[INFO] [06-22|11:07:54.584] Span with given block number is not loaded fetching span=6890\r\n[INFO] [06-22|11:07:55.817] Span with given block number is not loaded fetching span=6891\r\n[INFO] [06-22|11:07:56.583] Span with given block number is not loaded fetching span=6892\r\n[INFO] [06-22|11:07:59.200] [p2p] GoodPeers                          eth68=1 eth66=9\r\n[INFO] [06-22|11:08:00.068] [txpool] stat                            pending=1187 baseFee=2 queued=3610 alloc=3.5GB sys=6.0GB\r\n[INFO] [06-22|11:08:00.112] [2/15 Headers] Wrote block headers       number=44103725 blk/second=2094.000 alloc=3.5GB sys=6.0GB\r\n[INFO] [06-22|11:08:00.771] Span with given block number is not loaded fetching span=6893\r\n[INFO] [06-22|11:08:13.264] Span with given block number is not loaded fetching span=6894\r\n[INFO] [06-22|11:08:14.013] Span with given block number is not loaded fetching span=6895\r\n[INFO] [06-22|11:08:15.002] Span with given block number is not loaded fetching span=6896\r\n[INFO] [06-22|11:08:15.770] Span with given block number is not loaded fetching span=6897\r\n[INFO] [06-22|11:08:20.112] [2/15 Headers] Wrote block headers       number=44136341 blk/second=1630.800 alloc=4.5GB sys=6.0GB\r\n[INFO] [06-22|11:08:33.117] Span with given block number is not loaded fetching span=6898\r\n[INFO] [06-22|11:08:33.875] Span with given block number is not loaded fetching span=6899\r\n[INFO] [06-22|11:08:40.112] [2/15 Headers] Wrote block headers       number=44149850 blk/second=675.450 alloc=5.0GB sys=6.0GB\r\n[INFO] [06-22|11:09:00.066] [txpool] stat                            pending=1288 baseFee=3 queued=5089 alloc=5.2GB sys=6.0GB\r\n[INFO] [06-22|11:09:00.112] [2/15 Headers] Wrote block headers       number=44152938 blk/second=154.400 alloc=5.2GB sys=6.0GB\r\n[INFO] [06-22|11:09:13.264] Span with given block number is not loaded fetching span=6900\r\n[INFO] [06-22|11:09:14.023] Span with given block number is not loaded fetching span=6901\r\n[INFO] [06-22|11:09:20.112] [2/15 Headers] Wrote block headers       number=44166255 blk/second=665.850 alloc=5.9GB sys=6.3GB\r\n[INFO] [06-22|11:09:26.059] Span with given block number is not loaded fetching span=6902\r\n[INFO] [06-22|11:09:40.112] [2/15 Headers] Wrote block headers       number=44169535 blk/second=164.000 alloc=3.1GB sys=6.4GB\r\n[INFO] [06-22|11:09:59.201] [p2p] GoodPeers                          eth66=10\r\n[INFO] [06-22|11:10:00.067] [txpool] stat                            pending=1416 baseFee=3 queued=6297 alloc=3.2GB sys=6.4GB\r\n[INFO] [06-22|11:10:00.112] [2/15 Headers] No block headers to write in this log period block number=44169535\r\n[INFO] [06-22|11:10:20.112] [2/15 Headers] No block headers to write in this log period block number=44169535\r\n[EROR] [06-22|11:10:26.373] Staged Sync                              err=\"runtime error: index out of range [0] with length 0, trace: [stageloop.go:130 panic.go:890 panic.go:113 btree_generic.go:522 btree_generic.go:779 header_algos.go:392 stage_headers.go:840 stage_headers.go:145 default_stages.go:37 sync.go:360 sync.go:262 stageloop.go:168 stageloop.go:92 asm_amd64.s:1598]\"\r\n[INFO] [06-22|11:10:27.493] [2/15 Headers] Waiting for headers...    from=44018615\r\n[INFO] [06-22|11:10:47.493] [2/15 Headers] No block headers to write in this log period block number=44018615\r\n[INFO] [06-22|11:11:00.065] [txpool] stat                            pending=1512 baseFee=4 queued=7585 alloc=3.7GB sys=6.4GB\r\n[INFO] [06-22|11:11:07.494] [2/15 Headers] No block headers to write in this log period block number=44018615\r\n[INFO] [06-22|11:11:27.493] [2/15 Headers] No block headers to write in this log period block number=44018615\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1601955838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7355",
  "id": 1676020240,
  "node_id": "I_kwDOC0FsAM5j5goQ",
  "number": 7355,
  "title": "Erigon Stuck at same block due to \"mismatched receipt headers\" error",
  "user": {
    "login": "manjeet-thadani",
    "id": 29771798,
    "node_id": "MDQ6VXNlcjI5NzcxNzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/29771798?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/manjeet-thadani",
    "html_url": "https://github.com/manjeet-thadani",
    "followers_url": "https://api.github.com/users/manjeet-thadani/followers",
    "following_url": "https://api.github.com/users/manjeet-thadani/following{/other_user}",
    "gists_url": "https://api.github.com/users/manjeet-thadani/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/manjeet-thadani/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/manjeet-thadani/subscriptions",
    "organizations_url": "https://api.github.com/users/manjeet-thadani/orgs",
    "repos_url": "https://api.github.com/users/manjeet-thadani/repos",
    "events_url": "https://api.github.com/users/manjeet-thadani/events{/privacy}",
    "received_events_url": "https://api.github.com/users/manjeet-thadani/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-04-20T05:21:16Z",
  "updated_at": "2023-05-08T08:45:36Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\nI'm facing an issue with Erigon client. It's continuously failing with following error:\r\n\r\nErigon Logs:\r\n```\r\nApr 20 05:04:01 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:01.356] [5/15 Bodies] Downloading block bodies   block_num=41733208 delivery/sec=13.0MB wasted/sec=0B remaining=1620 delivered=653204 cache=57.7MB alloc=5.7GB sys=8.4GB\r\nApr 20 05:04:13 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:13.742] [5/15 Bodies] Processed                  highest=41734829\r\nApr 20 05:04:13 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:13.742] [5/15 Bodies] DONE                       in=9m12.386756416s\r\nApr 20 05:04:13 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:13.745] [6/15 Senders] Started                   from=41569600 to=41734829\r\nApr 20 05:04:43 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:43.745] [6/15 Senders] Recovery                  block_number=41707843 ch=10000/10000\r\nApr 20 05:04:49 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:49.773] [7/15 Execution] Blocks execution        from=41569600 to=41734829\r\nApr 20 05:04:49 polygon-archive-3 erigon[99610]: [WARN] [04-20|05:04:49.820] [7/15 Execution] Execution failed        block=41569601 hash=0x00201757e091a17b6bcf62bd8a6cba065ec4c981b57fd8aafd6fa7c4dbb98e40 err=\"mismatched receipt headers for block 41569601 (0xec461c036632f54def4ed7afd61375ef67ba30e2823f74796b1cab3447a533bb != 0x2bf9f37c8d481904cb529de6cbb9ca908b5f9ca920fb36c84c09be4c156c698c)\"\r\nApr 20 05:04:49 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:49.820] UnwindTo                                 block=41569600 bad_block_hash=0x00201757e091a17b6bcf62bd8a6cba065ec4c981b57fd8aafd6fa7c4dbb98e40\r\nApr 20 05:04:49 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:49.821] [7/15 Execution] Completed on            block=41569600\r\nApr 20 05:04:57 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:57.108] Timings (slower than 50ms)               Headers=1m59.33s CumulativeIndex=168ms BlockHashes=1.316s Bodies=9m12.386s Senders=36.031s Unwind Bodies=6.412s Unwind Headers=874ms\r\nApr 20 05:04:57 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:57.176] RPC Daemon notified of new headers       from=41569567 to=41734829 hash=0x0000000000000000000000000000000000000000000000000000000000000000 header sending=68.013961ms log sending=181ns\r\nApr 20 05:04:57 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:57.176] [2/15 Headers] Waiting for headers...    from=41569600\r\nApr 20 05:04:59 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:04:59.912] [p2p] GoodPeers                          eth66=98 eth67=1 eth68=7\r\nApr 20 05:05:00 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:05:00.532] [txpool] stat                            block=41569567 pending=10000 baseFee=34 queued=30000 alloc=8.2GB sys=9.7GB\r\nApr 20 05:05:17 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:05:17.176] [2/15 Headers] No block headers to write in this log period block number=41569600\r\nApr 20 05:05:37 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:05:37.176] [2/15 Headers] No block headers to write in this log period block number=41569600\r\nApr 20 05:05:57 polygon-archive-3 erigon[99610]: [INFO] [04-20|05:05:57.176] [2/15 Headers] No block headers to write in this log period block number=41569600\r\n```\r\n\r\nErigon client is stuck on same block for last few days. I have checked heimdall is working fine and is complety synced and heimdall-rest-server is also working fine. Here are some logs from them:\r\n\r\nHeimdall logs:\r\n```\r\nApr 20 05:06:23 polygon-archive-3 heimdalld[62313]: INFO [2023-04-20|05:06:23.425] Executed block                               module=state height=13642725 validTxs=0 invalidTxs=0\r\nApr 20 05:06:23 polygon-archive-3 heimdalld[62313]: INFO [2023-04-20|05:06:23.440] Committed state                              module=state height=13642725 txs=0 appHash=223D8E920C98FBA2FA186F4DCE25307495581E2D060F283502EAC9692741FC50\r\nApr 20 05:06:29 polygon-archive-3 heimdalld[62313]: INFO [2023-04-20|05:06:29.866] Executed block                               module=state height=13642726 validTxs=0 invalidTxs=0\r\nApr 20 05:06:29 polygon-archive-3 heimdalld[62313]: INFO [2023-04-20|05:06:29.883] Committed state                              module=state height=13642726 txs=0 appHash=223D8E920C98FBA2FA186F4DCE25307495581E2D060F283502EAC9692741FC50\r\n```\r\n\r\nHeimdall Rest Server Logs:\r\n```\r\nApr 18 14:46:28 polygon-archive-3 heimdalld[62282]: INFO [2023-04-18|14:46:28.203] Starting application REST service (chain-id: \"137\")... module=rest-server\r\nApr 18 14:46:28 polygon-archive-3 heimdalld[62282]: INFO [2023-04-18|14:46:28.203] GRPC Server started                          module=gRPC-server addr=0.0.0.0:3132\r\nApr 18 14:46:28 polygon-archive-3 heimdalld[62282]: INFO [2023-04-18|14:46:28.203] Starting RPC HTTP server on [::]:1317        module=rest-server\r\n```\r\n\r\nErigon version: `v2.42.0`\r\n\r\nOS & Version: Linux\r\n\r\nErigon Command (with flags/config):\r\n```\r\nerigon \\\r\n\t--chain=bor-mainnet \\\r\n\t--datadir=/root/.local/share/erigon/datadir \\\r\n\t--ethash.dagdir=/root/.local/share/erigon/datadir/ethash \\\r\n\t--snapshots=false \\\r\n\t--bor.heimdall=http://localhost:1317 \\\r\n\t--http --http.addr=0.0.0.0 \\\r\n\t--http.port=8545 --http.compression \\\r\n\t--http.vhosts=* --http.corsdomain=* \\\r\n\t--http.api=eth,debug,net,trace,web3,erigon,bor \\\r\n\t--ws --ws.compression \\\r\n\t--rpc.gascap=300000000 \\\r\n\t--metrics --metrics.addr=0.0.0.0 --metrics.port=6969 \\\r\n\t--torrent.upload.rate=\"512mb\" \\\r\n\t--torrent.download.rate=\"512mb\" \r\n```\r\n\r\nConcensus Layer: Hrimdall\r\n\r\nConcensus Layer Command (with flags/config):\r\n```\r\nheimdalld --home /root/.local/share/heimdall/ start\r\n```\r\n\r\nChain/Network:  Polygon Mainnet\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1537983405",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7355#issuecomment-1537983405",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7355",
    "id": 1537983405,
    "node_id": "IC_kwDOC0FsAM5bq8Ot",
    "user": {
      "login": "jajaislanina",
      "id": 3975615,
      "node_id": "MDQ6VXNlcjM5NzU2MTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3975615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jajaislanina",
      "html_url": "https://github.com/jajaislanina",
      "followers_url": "https://api.github.com/users/jajaislanina/followers",
      "following_url": "https://api.github.com/users/jajaislanina/following{/other_user}",
      "gists_url": "https://api.github.com/users/jajaislanina/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jajaislanina/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jajaislanina/subscriptions",
      "organizations_url": "https://api.github.com/users/jajaislanina/orgs",
      "repos_url": "https://api.github.com/users/jajaislanina/repos",
      "events_url": "https://api.github.com/users/jajaislanina/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jajaislanina/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-08T08:45:36Z",
    "updated_at": "2023-05-08T08:45:36Z",
    "author_association": "NONE",
    "body": "Having the same issue on Polygon only different block. Same version of Erigon.\r\n\r\n`[WARN] [05-04|22:52:39.908] [7/15 Execution] Execution failed        block=40905266 hash=0x66e1b904d8768ca6cdcc161ff01bb42aadab6c5943c15d3c200970ff29de416d err=\"mismatched receipt headers for block 40905266 (0x262618555ab2f10e747ebec4fc3c4fbc92b82de26ffb5c657dda9302614e4ce7 != 0x98ce84a76ed90b55fa4a7514590f65ee6d7ee0d5cf37d116ccdbae9c8c0da7bb)\"`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1537983405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/293",
  "id": 543551417,
  "node_id": "MDU6SXNzdWU1NDM1NTE0MTc=",
  "number": 293,
  "title": "THIN_HISTORY: Incorrect rewinding",
  "user": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "b00ris",
    "id": 4943570,
    "node_id": "MDQ6VXNlcjQ5NDM1NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4943570?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/b00ris",
    "html_url": "https://github.com/b00ris",
    "followers_url": "https://api.github.com/users/b00ris/followers",
    "following_url": "https://api.github.com/users/b00ris/following{/other_user}",
    "gists_url": "https://api.github.com/users/b00ris/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/b00ris/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/b00ris/subscriptions",
    "organizations_url": "https://api.github.com/users/b00ris/orgs",
    "repos_url": "https://api.github.com/users/b00ris/repos",
    "events_url": "https://api.github.com/users/b00ris/events{/privacy}",
    "received_events_url": "https://api.github.com/users/b00ris/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "b00ris",
      "id": 4943570,
      "node_id": "MDQ6VXNlcjQ5NDM1NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943570?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b00ris",
      "html_url": "https://github.com/b00ris",
      "followers_url": "https://api.github.com/users/b00ris/followers",
      "following_url": "https://api.github.com/users/b00ris/following{/other_user}",
      "gists_url": "https://api.github.com/users/b00ris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b00ris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b00ris/subscriptions",
      "organizations_url": "https://api.github.com/users/b00ris/orgs",
      "repos_url": "https://api.github.com/users/b00ris/repos",
      "events_url": "https://api.github.com/users/b00ris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b00ris/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-12-29T20:17:11Z",
  "updated_at": "2020-02-03T21:31:03Z",
  "closed_at": "2020-02-03T21:31:03Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I managed to sync to the head of the mainnet. And then I hit the reorg issue:\r\n````\r\nNFO [12-29|02:22:47.180] Imported new chain segment               blocks=1   txs=231   mgas=9.885   elapsed=135.432ms mgasps=72.987  number=9178709 ha\r\nsh=96e228…950b65 batch=1242\r\nINFO [12-29|02:22:47.436] Memory                                   nodes=4999936 alloc=9203434  sys=15762285 numGC=2230\r\nINFO [12-29|02:22:47.436] Database                                 size=504395386880 written=19656705\r\nINFO [12-29|02:22:59.067] Inserting chain                          start=9178710 end=9178710\r\nINFO [12-29|02:22:59.098] Imported new chain segment               blocks=1   txs=62    mgas=2.077   elapsed=30.320ms  mgasps=68.498  number=9178710 ha\r\nsh=a72991…b684c6 batch=247\r\nINFO [12-29|02:22:59.178] Memory                                   nodes=4999960 alloc=9262505  sys=15762285 numGC=2230\r\nINFO [12-29|02:22:59.178] Database                                 size=504395386880 written=5935105\r\nINFO [12-29|02:23:28.069] Inserting chain                          start=9178711 end=9178711\r\nINFO [12-29|02:23:28.194] Imported new chain segment               blocks=1   txs=169   mgas=9.869   elapsed=124.691ms mgasps=79.150  number=9178711 ha\r\nsh=df87f5…e92883 batch=1158\r\nINFO [12-29|02:23:28.424] Memory                                   nodes=4999900 alloc=8825084  sys=15762285 numGC=2231\r\nINFO [12-29|02:23:28.424] Database                                 size=504395386880 written=18243585\r\nINFO [12-29|02:23:32.547] Inserting chain                          start=9178711 end=9178711\r\nWARN [12-29|02:23:32.555] Ignoring the chain segment because of insufficient difficulty external=13472139851710989130122 local=13472139851710989130122\r\nWARN [12-29|02:23:32.555] Saving                                   block=9178711 hash=cb8e9d…0143a4\r\nINFO [12-29|02:23:48.653] Inserting chain                          start=9178712 end=9178712\r\nWARN [12-29|02:23:48.660] Chain segment's parent not on canonical hash, adding to pre-blocks block=9178711 hash=cb8e9d…0143a4\r\nINFO [12-29|02:23:48.661] Rewinding from                           block=9178711 to block=9178710\r\nERROR[12-29|02:23:48.749] Incorrect rewinding                      root=4344d9a3d7103c23cbc1ee526d63c5198bc6d8a19cbf2f1b37f22c9c022d1a6a expected=c5a0a\r\nb189f77bf3e5735af335157121a78e2a132aadd9ef57bfb37705c178871\r\nINFO [12-29|02:23:58.304] Inserting chain                          start=9178712 end=9178714\r\nWARN [12-29|02:23:58.315] Chain segment's parent not on canonical hash, adding to pre-blocks block=9178711 hash=cb8e9d…0143a4\r\nINFO [12-29|02:23:58.342] Creating IntraBlockState from latest state block=9178711\r\nINFO [12-29|02:31:21.367] Rebuilt top of account trie and verified root hash=\"<dfd5f763d4fecc6ea988258adfbcc8331ca525765c17aaa45b1d21b19d77af91> \"\r\nINFO [12-29|02:31:21.391] Memory after rebuild                     nodes=69905   alloc=191491   sys=15770733 numGC=2601\r\nINFO [12-29|02:31:21.391] Creation complete. \r\nINFO [12-29|02:31:21.391] Creation complete. \r\nINFO [12-29|02:31:21.391] Rewinding from                           block=9178711 to block=9178710\r\nERROR[12-29|02:33:21.734] Incorrect rewinding                      root=4344d9a3d7103c23cbc1ee526d63c5198bc6d8a19cbf2f1b37f22c9c022d1a6a expected=c5a0a\r\nb189f77bf3e5735af335157121a78e2a132aadd9ef57bfb37705c178871\r\n\r\n````",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/569814938",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/293#issuecomment-569814938",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293",
    "id": 569814938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTgxNDkzOA==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-30T22:28:12Z",
    "updated_at": "2019-12-30T22:28:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "It looks like the problem happens when rewinding any contract that has been changed in the block (it should be easy to write test for it). Here is the excerpt from the `diff_9178710.txt` file that I produced by comparing that supposed to be the state at block `9178710` and what we got after the rewinding:\r\n````\r\nfull(\r\n0:full(\r\n  0:full(\r\n    0:hash(b8238bf47734b29a3e7b8a37bfb6471ea3bbc6843a8b6ae87f0f1f018efb25d4)\r\n    1:hash(254bfc323ac354c1c25e67567d17ceee417e6e6549a81b0230bbe117518d57a7)\r\n    2:hash(01889a1001a5715011e2aaffb101ba31083a9856c840c5e2692afab0c20f6d7c)\r\n    3:hash(231d4b7f873db8a3649c55fe682938d483edc07f8b7ce0a6b00bea8f74f718f7)\r\n    4:hash(46c3b3dd5ccd5d57b11bf454fefaa28bcd8307c48a110d53b17ba48fa799cf74)\r\n    5:hash(ab37c057b3c6567419788dfe2b77c4438361ef28bb6287fd81595c537a2e2ff7)\r\n    6:hash(d54782dc802affdeaffbbd859d62e2440f3b30b5b85af32bf51b1442ebdba7cc)\r\n    7:hash(b39c65239c743d2edfea49408795af26b739584f682e738ff5eba58dd19d6e5b)\r\n    8:hash(cbbe8833cfc722961fea3abf04870d7a3c652d272dd8637e3b20a798bcefa0b9)\r\n    9:hash(49de3232c966dd8e2ae239081e90f97119994a0a1be1a0b4cb267bca3dd3c672)\r\n    a:hash(672f701047c7bf3850ac32a83cac20af0a144089527507214a5122b263403f1e)\r\n    b:hash(98f69a55de4654dd72c6bb5f616df166b8db62756866f6e83d734562949810bf)\r\n    c:full(\r\n      0:hash(374d9717a8f9bfd42857828f9645debfda095d56d6ec48b31f0cd1d3b3aed064)\r\n      1:hash(66a632410d91b30608f1edab861be08c3a7b1d0e75fe3eb98118c53dfb27d89b)\r\n      2:hash(a14c6dd2ec23778767ce83cf6e5878607d7dec8e63b9faba3eda9cb818ffa0ae)\r\n      3:hash(d3117029346bb7394272e1cea4ed2d03f68c492f74dde7acc8b6dd5ad63334a9)\r\n      4:hash(da1069495f58fc5322452fbc481a1b68b3646e264bb87d4c7c84cfeb1f019335)\r\n      5:hash(45d435e6e545e3173e6ebfebd2a017a161f629a211c082e9e49472bc7fccb40c)\r\n      6:full(\r\n        0:hash(69121935974c67d261c45eb5e5d69d1ffb32d2db14e139e94e186c8a1dc09156)\r\n        1:hash(4141e18ac9e81110c36fb12a6aa57abf87a8aa4d94a54f42afb674bf572c9fd9)\r\n        2:hash(99c165af2eaf26362eaf58b7babf60c5fca4278dc321eb7a3352d8c409dd2cb2)\r\n        3:hash(e845d117943f3e1e42cb04baca4b04b8d402f60e06aee4d90d90bd10cc297818)\r\n        4:hash(226a7f0cded10569176cedfcbec3f1886c71f875a38b4382c674dbd1c9c5cc04)\r\n        5:hash(2efa505aba7fac8da0643ef87a71b44b2e743a5f485ecb374fd15cea018787dd)\r\n        6:hash(d0d799af1cd75621e5abe0129079aff819a32e0852b78224c70d6999d9cda592)\r\n        7:hash(d75e2308a7f63a645e54b8e930a1d0ff447260c6b01d58821e9fabebd9765fd8)\r\n        8:hash(fd85d5cf941f981b73974169f6a1a563b0ef2555c38f1687067ad791a12798b5)\r\n        9:hash(bcd42ea87e799614d65da15341c71f494136ca59438fcb32c0977d0a006acf7b)\r\n        a:hash(b2820694a71eb43b424f54aaab00e142cee745c21fea2ba0559d22e93531c8a0)\r\n        b:full(\r\n          0:hash(e41a4e481e3288f659cf7e67dae72d654403591cfd3e78edddfc8298c743ae33)\r\n          1:hash(09fe13378b94cd9fa294fbfc8749f82a6c28ded578cacdcb1f3197e0583fb649)\r\n          2:hash(a75d5117ca2eec1050c1a35e7bb946c2f6a801ce2a730c1031d4fabdcf8667e1)\r\n          3:hash(bad39b45035a07ffeacd4577a9a9518d04a57f5dea1e6b76580ad8083cf9008d)\r\n          4:hash(a673a0bc474670935786306e78311d73de0419422124a9c762ead8305d41650f)\r\n          5:hash(43bfaa52a305bc4f061f6beb7c67f442f0860d81210d138f41ca5ad38c017a51)\r\n          6:hash(10ae26ad9e3561055f9160b61b03048c70529d0855ed96832b736f05847fa08e)\r\n          7:hash(19f1167a074d3a57a9b0c2f987f90e56192980e7aa524160a5330d7c9b84db45)\r\n          8:hash(619f148c771f0f4b908707c4d7a1ea46ae871d9e74a588e011e759b85ac538cb)\r\n          9:full(\r\n            2:hash(ea9edf3cde65c6ce860fb50c50190c181e41b364c97fc956f8b8d346c2ed8893)\r\n            7:hash(){0b0f0603070a090c080a060108030a0b0f0f0e04040f0f020c020e01040b0904030a0401060c000706010d0302000f0f000a0406060a07020410: f8440180a08f32103bf7e80a9943\r\n6a6ff0c15e9af7d6803c1ebc0c2f8de404b971e22d67fda0c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470 } /{0b0f0603070a090c080a060108030a0b0f0f0e04040f0f020c\r\n020e01040b0904030a0401060c000706010d0302000f0f000a0406060a07020410: f8440180a08f32103bf7e80a99436a6ff0c15e9af7d6803c1ebc0c2f8de404b971e22d67fda0e570966a31fa5dbb7feb762\r\n59ba3aec50fed190527be28162d65e4169d128a88 } \r\n            d:hash(a24ad40c921948619f0bed396d4acfeade17f5fe07fea154ad08e8b46a777d13)\r\n            )\r\n          a:hash(50a95700f46c17e3ea3d056ccbfb37686629c1ce90d9d9d21b08d0212bdd87a2)\r\n          b:hash(5da44bc8ccb7146361ff25610a911fed7265aae9efde64bad8fbd49e2d5d07a4)\r\n          c:hash(){030d080208030e0e0504080507000407070409050a050a04010a03000a0904070c0c030d0b06040a0e0f000000080303010f0907080c0e010e0310: f8440180a056e81f171bcc55a6ff\r\n8345e692c0f86e5b48e01b996cadc001622fb5e363b421a0c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470 } /{030d080208030e0e0504080507000407070409050a050a0401\r\n0a03000a0904070c0c030d0b06040a0e0f000000080303010f0907080c0e010e0310: f8440180a056e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421a0c5d2460186f7233c927e7\r\ndb2dcc703c0e500b653ca82273b7bfad8045d85a470 } \r\n          d:hash(3a92f769d724d6b5c09ffcb7920b2e704b9432460bf98fcfd8cff643da7770c0)\r\n          e:hash(4505d2a6eecbbf7ac149cfe86fd19c4c3720687fa1639c34daf703c699384ef9)\r\n          f:hash(3981d515632eab71f0a177c2b2af38ba4be808cc1c416a5cecada05e3cba69ab)\r\n          )\r\n        c:hash(e7b8b52986c1f80a039858c3597a78e8faac8ad17ebdb8ecb59b1cf589217053)\r\n        d:hash(a7383db61d5fbe4a1f05719cdd4d7c6a6372a75b63e6c8bf3c3672d31c61168e)\r\n        e:hash(e909b5f996d1d0a011a8d9d0e41f526da244b1ca6597a3b6057cf93f4cc142cb)\r\n        f:hash(012f52bcf314ca6a2e7388b659dd2b5cd3e1751e3e6b3d751ce185585940da39)\r\n        )\r\n      7:hash(009060686422f04d09a06a02f62503d4ab95772bd4f03df4e6329840eba722f7)\r\n      8:hash(807313e8c5c15852b66f9e04cfc0c2bf9030ad376393b1a93d7e332a578fb20c)\r\n      9:hash(5d4823b7a81ce102d4ca9b95c27acb7cc45f4cf6f97d78208fa4db9c77a455bc)\r\n      a:hash(1bf3e49f864d7553b1e2801584486248d7d38adb9666a81e3cace73762914f1d)\r\n      b:hash(660e5a35b76392f58438f1b71c5876c06ba6df1d16a48caac84e5d989f18d837)\r\n      c:hash(799743222019e1e4f73d8c4d1f4489960cce07f63cb25f62f9c506d84bc28ad8)\r\n      d:hash(cbe05908ee1fc5eb818169b9cf9f03931e2b9c3012cf442c545e0f29ee72c3d8)\r\n      e:hash(d507ecb2f7e4862a8a6e4d052d3bea1cb9b379300f4f3d82c5dafcade756d24a)\r\n      f:hash(9031ed1472ab9b54fed4e8320fc0e6f08cdd21d6259102b236c82f5cd86df8e3)\r\n      )\r\n    d:hash(ac8bf230059597077e52ce03e12e8ddff7ce621b8acc2aee023a70dc4b594949)\r\n    e:hash(e81eda405d9ea9570a94b0d2bbf5f412ff9c4b4541ad72d4197e2ddb14cb04fe)\r\n    f:hash(13bd3454c9f58917816ab6b58298e729eeac52596654950f10645411d54855fe)\r\n    )\r\n  1:hash(6a2ac2594b15cfeb08f606de98138191fb8183e125fd021f596ca5bb03ac5ac1)\r\n  2:hash(6bb4a075c1d8f781dd54cad3f76d769d9413486e0fcb970b37d62087fb7f9eee)\r\n````\r\n\r\nThe interesting bit is here:\r\n````\r\n7:hash(){0b0f0603070a090c080a060108030a0b0f0f0e04040f0f020c020e01040b0904030a0401060c000706010d0302000f0f000a0406060a07020410: f8440180a08f32103bf7e80a9943\r\n6a6ff0c15e9af7d6803c1ebc0c2f8de404b971e22d67fda0c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470 } /{0b0f0603070a090c080a060108030a0b0f0f0e04040f0f020c\r\n020e01040b0904030a0401060c000706010d0302000f0f000a0406060a07020410: f8440180a08f32103bf7e80a99436a6ff0c15e9af7d6803c1ebc0c2f8de404b971e22d67fda0e570966a31fa5dbb7feb76259ba3aec50fed190527be28162d65e4169d128a88 } \r\n````\r\n\r\nThe wrong RLP representation of this account is f8440180a08f32103bf7e80a9943\r\n6a6ff0c15e9af7d6803c1ebc0c2f8de404b971e22d67fda0**c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470** (the hash of empty code is in bold), whereas the correct representation is this: f8440180a08f32103bf7e80a99436a6ff0c15e9af7d6803c1ebc0c2f8de404b971e22d67fda0**e570966a31fa5dbb7feb76259ba3aec50fed190527be28162d65e4169d128a88**\r\n\r\nSo during the unwind, code hashes of contracts are being wiped out, it seems",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/569814938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/569881693",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/293#issuecomment-569881693",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293",
    "id": 569881693,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTg4MTY5Mw==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-31T07:36:20Z",
    "updated_at": "2019-12-31T07:36:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Next instance of incorrect rewinding:\r\n````\r\nINFO [12-31|05:44:22.002] Imported new chain segment               blocks=1  txs=180  mgas=9.978   elapsed=146.142ms mgasps=68.277  number=9189449 hash=c2d927…dcae8a b\r\natch=1248\r\nINFO [12-31|05:44:22.210] Memory                                   nodes=2375651 alloc=4317685 sys=8661032 numGC=1134\r\nINFO [12-31|05:44:22.211] Database                                 size=505383419904 written=19378177\r\nINFO [12-31|05:44:28.304] Inserting chain                          start=9189450 end=9189450\r\nINFO [12-31|05:44:28.492] Imported new chain segment               blocks=1  txs=197  mgas=9.969   elapsed=187.834ms mgasps=53.075  number=9189450 hash=0028d8…d7f281 b\r\natch=1232\r\nINFO [12-31|05:44:28.701] Memory                                   nodes=2375877 alloc=4452958 sys=8661032 numGC=1134\r\nINFO [12-31|05:44:28.701] Database                                 size=505383419904 written=19648513\r\nINFO [12-31|05:44:31.661] Inserting chain                          start=9189450 end=9189450\r\nWARN [12-31|05:44:31.666] Ignoring the chain segment because of insufficient difficulty external=13499563796368075965174 local=13499563796368075965174\r\nWARN [12-31|05:44:31.666] Saving                                   block=9189450 hash=2f7354…1ca889\r\nINFO [12-31|05:44:37.601] Inserting chain                          start=9189451 end=9189451\r\nWARN [12-31|05:44:37.610] Chain segment's parent not on canonical hash, adding to pre-blocks block=9189450 hash=2f7354…1ca889\r\nINFO [12-31|05:44:37.612] Rewinding from                           block=9189450 to block=9189449\r\nWARN [12-31|05:44:37.659] Generating deep snapshot of the wrong tries... file=root_9189449.txt\r\nERROR[12-31|05:45:18.539] Incorrect rewinding                      root=b1e14963c998099ea337384ae9c94ce4105a1330293122d30ec530e73862c0c6 expected=4b9dbcb63021221da74d8\r\n399c163db5d4d9ba03dc5262cfdbde2c5051009a764\r\nINFO \r\n````",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/569881693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/569900011",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/293#issuecomment-569900011",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293",
    "id": 569900011,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU2OTkwMDAxMQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-12-31T09:54:07Z",
    "updated_at": "2019-12-31T09:54:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "the next instance is a bit more interesting\r\nit is with this contract: https://etherscan.io/address/0xd892417556ae4a316b2064eb7b6acb7d09a9f30b\r\nThe transaction that deployed it first got into a block 9189450, then got reverted by the reorg, and then got re-done in block 9189455",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/569900011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/570086389",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/293#issuecomment-570086389",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293",
    "id": 570086389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDA4NjM4OQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-01T21:52:00Z",
    "updated_at": "2020-01-01T21:52:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "the function CreateAccount in the InterBlockState can be called in 2 different contexts\r\n\r\n1) simply sending ETH to an account. Called from core/vm/evm/go:226\r\n2) creating contracts. Called from core/vm/evm.go:405\r\n\r\nbut we always do newObj.created = true\r\nwhich means that all incarnations are now 1, for all accounts\r\nnot just for contracts",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/570086389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/570787447",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/293#issuecomment-570787447",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/293",
    "id": 570787447,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MDc4NzQ0Nw==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-04T13:55:11Z",
    "updated_at": "2020-01-04T14:11:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "and now the sync blew up:\r\n````\r\nINFO [01-04|13:53:18.928] Memory                                   nodes=4999937 alloc=12155554 sys=24220025 numGC=24766\r\nINFO [01-04|13:53:18.928] Database                                 size=161037811712 written=740528129\r\nINFO [01-04|13:53:19.029] Imported new chain segment               blocks=1    txs=245   mgas=7.982    elapsed=14.950s   mgasps=0.534   number=5543933 hash=4fc1ba…ae6b\r\n15 batch=963    age=1y8mo1w\r\nKey: 050a000e0b090b090e0b080c020d040a0d070a02030f0a0904020704040005010a0701070500070c0403020f040b02080c040a0e07030a0c040e060006010c030209000d0e0c0d090504080b06020a080d\r\n06000304050a0908080308060f0c08040b0a060b0c09050408040000080f060306020f09030106000e0f030e05060310, Pos: 64\r\npanic: trie.hashNode: invalid node: <4b13057b5a6042f32427fa9f4a0ce2eab139009a3a56996b2924dd7d2a2c3529> \r\ngoroutine 3592105 [running]:\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000ba4360, 0x14a05e0, 0xc1db1deb00, 0xc4f6891170, 0x81, 0x81, 0x40, 0x14a0620, 0xc07feea220, 0x421601, ...)\r\n        /home/akhounov/workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:513 +0x17ff\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000ba4360, 0x149ffa0, 0xc01bfbcd20, 0xc4f6891170, 0x81, 0x81, 0x40, 0x14a0620, 0xc07feea220, 0x4216c9, ...)\r\n        /home/akhounov/workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:395 +0x1258\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000ba4360, 0x14a0060, 0xc14f984840, 0xc4f6891170, 0x81, 0x81, 0x8, 0x14a0620, 0xc07feea220, 0x4216c9, ...)\r\n        /home/akhounov/workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:406 +0x21f\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000ba4360, 0x14a0020, 0xc2e760a280, 0xc4f6891170, 0x81, 0x81, 0x7, 0x14a0620, 0xc07feea220, 0x421601, ...)\r\n        /home/akhounov/workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:503 +0x1162\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000ba4360, 0x14a0020, 0xc3000d2dc0, 0xc4f6891170, 0x81, 0x81, 0x6, 0x14a0620, 0xc07feea220, 0x4216c9, ...)\r\n        /home/akhounov/workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:503 +0x1162\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000ba4360, 0x14a0020, 0xc36587e500, 0xc4f6891170, 0x81, 0x81, 0x5, 0x14a0620, 0xc07feea220, 0xb917016229a4942,\r\n ...)\r\n````\r\n\r\nMost likely application of this transaction: https://etherscan.io/tx/0xbe401c7829a56d0201fd13967b117073d6de708fee3bf360e4a3676edd1d4d7e\r\n\r\nto the account `0xe435391e399a35e4875cfc7e26ae1c89d72a247a` and storage index 0.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/570787447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

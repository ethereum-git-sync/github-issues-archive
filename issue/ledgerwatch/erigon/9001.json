{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/9001",
  "id": 2044729491,
  "node_id": "I_kwDOC0FsAM554BiT",
  "number": 9001,
  "title": "RPC method engine_getPayloadBodiesByHashV1 crashed: runtime error: index out of range [0] with length 0",
  "user": {
    "login": "Cybourgeoisie",
    "id": 301326,
    "node_id": "MDQ6VXNlcjMwMTMyNg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/301326?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Cybourgeoisie",
    "html_url": "https://github.com/Cybourgeoisie",
    "followers_url": "https://api.github.com/users/Cybourgeoisie/followers",
    "following_url": "https://api.github.com/users/Cybourgeoisie/following{/other_user}",
    "gists_url": "https://api.github.com/users/Cybourgeoisie/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Cybourgeoisie/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Cybourgeoisie/subscriptions",
    "organizations_url": "https://api.github.com/users/Cybourgeoisie/orgs",
    "repos_url": "https://api.github.com/users/Cybourgeoisie/repos",
    "events_url": "https://api.github.com/users/Cybourgeoisie/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Cybourgeoisie/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-12-16T12:19:03Z",
  "updated_at": "2023-12-23T13:03:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nBuild Info:\r\n`git_branch=stable git_tag=v2.49.2-1-ga8ae8a031-dirty git_commit=a8ae8a031144e009ca26bc59cd978752cfa1646b`\r\n\r\nOS & Version:\r\n\r\nLinux\r\n\r\nCommit hash: \r\n\r\n`a8ae8a031144e009ca26bc59cd978752cfa1646b`\r\n\r\nErigon Command (with flags/config):\r\n\r\nN/A, syncing from start.\r\n\r\nConsensus Layer:\r\n\r\nPrysm\r\n\r\nConsensus Layer Command (with flags/config):\r\n\r\nN/A\r\n\r\nChain/Network: \r\n\r\nEthereum Mainnet\r\n\r\n#### Expected behaviour\r\n\r\nContinue to sync from start.\r\n\r\n#### Actual behaviour\r\n\r\nSyncing stopped at some point due to a panic.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n1. Use eth-docker\r\n2. Set up .env to use archive node\r\n3. Set up eth-docker to use Prysm and Erigon\r\n4. Start syncing erigon\r\n\r\nNotes:\r\n- Prysm was already synced. Erigon was syncing from scratch.\r\n- Used eth-docker\r\n- Used archive mode\r\n- Disk space was not limited (2.1TB free)\r\n- Machine has 32GB of RAM\r\n\r\nRestarting the node seems to work, though the error continues without taking down the node.\r\n\r\n#### Backtrace\r\n\r\n````\r\n[INFO] [12-16|06:41:24.491] [4/12 Execution] Executed blocks         number=4949870 blk/s=22.3 tx/s=2643.4 Mgas/s=167.5 gasState=0.00 batch=0B alloc=4.0GB sys=14.7GB\r\n[INFO] [12-16|06:41:25.166] [4/12 Execution] Executed blocks         number=4949966 blk/s=142.3 tx/s=15998.3 Mgas/s=996.0 gasState=0.00 batch=1.1MB alloc=4.1GB sys=14.7GB\r\n[INFO] [12-16|06:41:28.810] [p2p] GoodPeers                          eth68=33 eth66=1 eth67=31\r\n[INFO] [12-16|06:41:28.817] [txpool] stat                            pending=0 baseFee=0 queued=2156 alloc=4.9GB sys=14.7GB\r\n[INFO] [12-16|06:41:45.159] [4/12 Execution] Executed blocks         number=4952135 blk/s=108.5 tx/s=17093.5 Mgas/s=759.9 gasState=0.03 batch=32.2MB alloc=3.4GB sys=14.7GB\r\n[EROR] [12-16|06:41:50.432] RPC method engine_getPayloadBodiesByHashV1 crashed: runtime error: index out of range [0] with length 0\r\n[service.go:219 panic.go:884 panic.go:113 engine_server.go:497 engine_server.go:609 value.go:586 value.go:370 service.go:224 handler.go:494 handler.go:444 handler.go:392 handler.go:223 handler.go:316 asm_amd64.s:1598] \r\n[WARN] [12-16|06:41:50.432] Served                                   conn=172.18.0.2:44134 method=engine_getPayloadBodiesByHashV1 reqid=9 t=928.441Âµs err=\"method handler crashed\"\r\n[EROR] [12-16|06:42:01.175] RPC method engine_getPayloadBodiesByHashV1 crashed: runtime error: index out of range [0] with length 0\r\n[service.go:219 panic.go:884 panic.go:113 engine_server.go:497 engine_server.go:609 value.go:586 value.go:370 service.go:224 handler.go:494 handler.go:444 handler.go:392 handler.go:223 handler.go:316 asm_amd64.s:1598] \r\n````\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1868290309",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9001#issuecomment-1868290309",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9001",
    "id": 1868290309,
    "node_id": "IC_kwDOC0FsAM5vW9kF",
    "user": {
      "login": "HappyBerrysBoy",
      "id": 7401650,
      "node_id": "MDQ6VXNlcjc0MDE2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7401650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HappyBerrysBoy",
      "html_url": "https://github.com/HappyBerrysBoy",
      "followers_url": "https://api.github.com/users/HappyBerrysBoy/followers",
      "following_url": "https://api.github.com/users/HappyBerrysBoy/following{/other_user}",
      "gists_url": "https://api.github.com/users/HappyBerrysBoy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HappyBerrysBoy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HappyBerrysBoy/subscriptions",
      "organizations_url": "https://api.github.com/users/HappyBerrysBoy/orgs",
      "repos_url": "https://api.github.com/users/HappyBerrysBoy/repos",
      "events_url": "https://api.github.com/users/HappyBerrysBoy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HappyBerrysBoy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-23T13:03:15Z",
    "updated_at": "2023-12-23T13:03:15Z",
    "author_association": "NONE",
    "body": "I got same error.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1868290309/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

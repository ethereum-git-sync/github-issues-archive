{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/176",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/176/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/176/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/176/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/176",
  "id": 524634013,
  "node_id": "MDU6SXNzdWU1MjQ2MzQwMTM=",
  "number": 176,
  "title": "Separate data structures for readSet, writeSet, and effects (intermediate and aggregate)",
  "user": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1688665690,
      "node_id": "MDU6TGFiZWwxNjg4NjY1Njkw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/stateless",
      "name": "stateless",
      "color": "98ff70",
      "default": false,
      "description": "Related to Stateless Ethereum research"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2019-11-18T21:36:40Z",
  "updated_at": "2020-04-20T22:31:18Z",
  "closed_at": "2020-04-20T22:31:18Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "This concerns the type `TrieDbState` in `core/state/database.go`. The member fields `currentBuffer` and `aggregateBuffer` (with their own sub-fields) are having double purpose. Firstly, the accumulate effects of each transaction (before Byzantium HF), and of the block (`aggregateBuffer`). Secondly, fields of `aggregateBuffer` (to be specific, only the keys of their maps) are used as read sets and write sets so that we know which part of the state trie cache to resolve (expand) before the execution (the resolution happens in the function `ResolveStateTrie`). These two purposes are already somewhat at conflict - some of the intermediate effects can cancel each other and `aggregateBuffer` should not have these effects. However, they need to be present to perform the second function correctly.\r\n\r\nThis separation also becomes important in the context of the changes for https://github.com/ledgerwatch/turbo-geth/issues/111\r\n",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/176/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/176/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

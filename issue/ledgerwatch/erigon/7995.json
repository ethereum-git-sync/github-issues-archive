{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7995",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7995/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7995/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7995/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7995",
  "id": 1846317462,
  "node_id": "I_kwDOC0FsAM5uDJGW",
  "number": 7995,
  "title": "`eth_getFilterLogs` returns empty array in v2.48.1",
  "user": {
    "login": "igiagkiozis",
    "id": 24444941,
    "node_id": "MDQ6VXNlcjI0NDQ0OTQx",
    "avatar_url": "https://avatars.githubusercontent.com/u/24444941?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/igiagkiozis",
    "html_url": "https://github.com/igiagkiozis",
    "followers_url": "https://api.github.com/users/igiagkiozis/followers",
    "following_url": "https://api.github.com/users/igiagkiozis/following{/other_user}",
    "gists_url": "https://api.github.com/users/igiagkiozis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/igiagkiozis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/igiagkiozis/subscriptions",
    "organizations_url": "https://api.github.com/users/igiagkiozis/orgs",
    "repos_url": "https://api.github.com/users/igiagkiozis/repos",
    "events_url": "https://api.github.com/users/igiagkiozis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/igiagkiozis/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-08-11T07:10:36Z",
  "updated_at": "2023-08-11T07:31:52Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `erigon version 2.48.1-stable-674b77f0`\r\n\r\nOS & Version: Ubuntu 22.04.3 LTS\r\n\r\nCommit hash: 674b77f08d71e834c3908d967482b6136c370ebd\r\n\r\nErigon Command (with flags/config): \r\n```bash\r\nerigon --datadir=/store/eth_mainnet --authrpc.jwtsecret=/store/mainnet_jwt.hex --private.api.addr=localhost:9090 --http.api=engine,eth,erigon,web3,net,debug,trace,txpool,shh --ws\r\n```\r\n\r\nConcensus Layer: Lighthouse v4.3.0-dfcb336\r\n\r\nConcensus Layer Command (with flags/config): \r\n```bash\r\nlighthouse beacon_node --datadir /store/eth_mainnet_lighthouse --network mainnet --http --execution-endpoint http://localhost:8551 --execution-jwt /store/mainnet_jwt.hex --checkpoint-sync-url https://beaconstate.ethstaker.cc\r\n```\r\n\r\nChain/Network: eth mainnet\r\n\r\n#### Expected behaviour\r\n\r\nNon-empty array\r\n\r\n#### Actual behaviour\r\n\r\nEmpty array\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nCreate a filter\r\n```bash\r\ncurl http://127.0.0.1:8545 -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"eth_newFilter\",\"params\":[{\"fromBlock\":\"0x10f73d9\",\"toBlock\":\"0x10f743c\",\"address\":[\"0xb08E16cFc07C684dAA2f93C70323BAdb2A6CBFd2\",\"0x03407772F5EBFB9B10Df007A2DD6FFf4EdE47B53\",\"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f\",\"0xbAF9A5d4b0052359326A6CDAb54BABAa3a3A9643\",\"0x0Ba2e75FE1368d8d517BE1Db5C39ca50a1429441\",\"0xD7FAD3bd59D6477cbe1BE7f646F7f1BA25b230f8\",\"0x4ade0e57Bc2E129f62547af4d620fB40d28EA269\",\"0x75e48C954594d64ef9613AeEF97Ad85370F13807\",\"0x8E9aa87E45e92bad84D5F8DD1bff34Fb92637dE9\",\"0x67d27634E44793fE63c467035E31ea8635117cd4\",\"0x9DEB29c9a4c7A88a3C0257393b7f3335338D9A9D\",\"0x5FA0060FcfEa35B31F7A5f6025F0fF399b98Edf1\",\"0x1F98431c8aD98523631AE4a59f267346ea31F984\",\"0x115934131916C8b277DD010Ee02de363c09d037c\",\"0x48767F9F868a4A7b86A90736632F6E44C2df7fa9\",\"0x4eef5746ED22A2fD368629C1852365bf5dcb79f1\",\"0x0F3e0c4218b7b0108a3643cFe9D3ec0d4F57c54e\",\"0xf8062Eedf80D8D2527cE89435f670cb996aB4e54\",\"0x5D8d3bbE66076e844C82B989F8430Fa92Cf67DBA\",\"0xA5bf2ddF098bb0Ef6d120C98217dD6B141c74EE0\",\"0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac\",\"0x592f70cE43a310D15fF59BE1460F38Ab6DF3Fe65\",\"0x69bd16aE6F507bd3Fc9eCC984d50b04F029EF677\",\"0xc66Ba2B6595D3613CCab350C886aCE23866EDe24\",\"0x9424B1412450D0f8Fc2255FAf6046b98213B76Bd\",\"0xF14421F0BCf9401d8930872C2d44d8e67e40529a\",\"0x3A97247DF274a17C59A3bd12735ea3FcDFb49950\",\"0x751A0bC0e3f75b38e01Cf25bFCE7fF36DE1C87DE\",\"0x833e4083B7ae46CeA85695c4f7ed25CDAd8886dE\",\"0x90E00ACe148ca3b23Ac1bC8C240C2a7Dd9c2d7f5\"]}],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n```\r\n\r\nGet the logs\r\n```bash\r\ncurl http://127.0.0.1:8545 -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"eth_getFilterLogs\",\"params\":[\"<FILTER ID FROM PREVIOUS STEP>\"]}'\r\n```\r\n\r\nComparing to Alchemy\r\n```bash\r\ncurl https://eth-mainnet.g.alchemy.com/v2/<ALCHEMY_KEY> -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"eth_newFilter\",\"params\":[{\"fromBlock\":\"0x10f73d9\",\"toBlock\":\"0x10f743c\",\"address\":[\"0xb08E16cFc07C684dAA2f93C70323BAdb2A6CBFd2\",\"0x03407772F5EBFB9B10Df007A2DD6FFf4EdE47B53\",\"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f\",\"0xbAF9A5d4b0052359326A6CDAb54BABAa3a3A9643\",\"0x0Ba2e75FE1368d8d517BE1Db5C39ca50a1429441\",\"0xD7FAD3bd59D6477cbe1BE7f646F7f1BA25b230f8\",\"0x4ade0e57Bc2E129f62547af4d620fB40d28EA269\",\"0x75e48C954594d64ef9613AeEF97Ad85370F13807\",\"0x8E9aa87E45e92bad84D5F8DD1bff34Fb92637dE9\",\"0x67d27634E44793fE63c467035E31ea8635117cd4\",\"0x9DEB29c9a4c7A88a3C0257393b7f3335338D9A9D\",\"0x5FA0060FcfEa35B31F7A5f6025F0fF399b98Edf1\",\"0x1F98431c8aD98523631AE4a59f267346ea31F984\",\"0x115934131916C8b277DD010Ee02de363c09d037c\",\"0x48767F9F868a4A7b86A90736632F6E44C2df7fa9\",\"0x4eef5746ED22A2fD368629C1852365bf5dcb79f1\",\"0x0F3e0c4218b7b0108a3643cFe9D3ec0d4F57c54e\",\"0xf8062Eedf80D8D2527cE89435f670cb996aB4e54\",\"0x5D8d3bbE66076e844C82B989F8430Fa92Cf67DBA\",\"0xA5bf2ddF098bb0Ef6d120C98217dD6B141c74EE0\",\"0xC0AEe478e3658e2610c5F7A4A2E1777cE9e4f2Ac\",\"0x592f70cE43a310D15fF59BE1460F38Ab6DF3Fe65\",\"0x69bd16aE6F507bd3Fc9eCC984d50b04F029EF677\",\"0xc66Ba2B6595D3613CCab350C886aCE23866EDe24\",\"0x9424B1412450D0f8Fc2255FAf6046b98213B76Bd\",\"0xF14421F0BCf9401d8930872C2d44d8e67e40529a\",\"0x3A97247DF274a17C59A3bd12735ea3FcDFb49950\",\"0x751A0bC0e3f75b38e01Cf25bFCE7fF36DE1C87DE\",\"0x833e4083B7ae46CeA85695c4f7ed25CDAd8886dE\",\"0x90E00ACe148ca3b23Ac1bC8C240C2a7Dd9c2d7f5\"]}],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n```\r\n```bash\r\ncurl https://eth-mainnet.g.alchemy.com/v2/<ALCHEMY_KEY> -X POST -H \"Content-Type: application/json\" --data '{\"method\":\"eth_getFilterLogs\",\"params\":[\"<FILTER ID FROM PREVIOUS STEP>\"]}'\r\n```\r\nIn this case the result is \r\n```json\r\n{\"jsonrpc\":\"2.0\",\"id\":null,\"result\":[{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x68f240057b12c1a23e2908d0bdf377c221e6e1e0e767bbef8c7a39312563dcc8\",\"blockNumber\":\"0x10f73e1\",\"data\":\"0x00000000000000000000000086125dfc3cd2cc3a7175a7425c5e94938e2135b70000000000000000000000000000000000000000000000000000000000036f3a\",\"logIndex\":\"0x102\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x000000000000000000000000245f58ead9945b36809ed0de3b6b0685dad28e11\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0x619b1a93236714a23d88fe4e77657ff7cafc8102d50b3580b25769a50fa5d0f3\",\"transactionIndex\":\"0x69\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x0b75d81fcd9a5b18f8f28f79900684b6b25017fb17434b1dc638462d9f1b9c57\",\"blockNumber\":\"0x10f73e3\",\"data\":\"0x000000000000000000000000ce7b1723a926265a52618db140f9f943ec5efd470000000000000000000000000000000000000000000000000000000000036f3b\",\"logIndex\":\"0x1c2\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x0000000000000000000000000eb3ad3cf3105a83e2bd8c329134b33c6c69632f\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0x93a17c62f85b59953349194eb0c34bd095f1cbdd8a998cb43033c633a6cdd432\",\"transactionIndex\":\"0x1ad\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x984abe293bfa66d1723512725ac7cac1961a9b44090ecd261ca55d1b9609100d\",\"blockNumber\":\"0x10f73f0\",\"data\":\"0x000000000000000000000000c54a11e859e31fabe0a4b1bedf1f55dc81fcf68f0000000000000000000000000000000000000000000000000000000000036f3c\",\"logIndex\":\"0x115\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x00000000000000000000000000ca8450a22dd899e3a1cf0bf0286b20a6de4c91\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0x4d637b60d829f9e7df167295c36671cec07dc29711a10517be5e84c616a0846a\",\"transactionIndex\":\"0x5e\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x78bb4154b317e3df48acdd6b0e39596b949a0c5787031b1d34f8333d7ac2f1af\",\"blockNumber\":\"0x10f73f5\",\"data\":\"0x0000000000000000000000008fedb67d8e103a429b41aa5fb30f390a3d0aea190000000000000000000000000000000000000000000000000000000000036f3d\",\"logIndex\":\"0xf1\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x00000000000000000000000035d1e9b85c5bf4e6dac25b68b649e4d134719b88\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0x354e3a1e9755d79df07b11eae08f3633f8b893792b59575f06c9fad1a7417be3\",\"transactionIndex\":\"0x4c\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x3d55a8c1725af3f40147a8bada2514f8eb28bcdf05f9ee561806d3575c5bf4be\",\"blockNumber\":\"0x10f740e\",\"data\":\"0x000000000000000000000000f83f59d76411fbddd117c1d4ed3d91129a4526770000000000000000000000000000000000000000000000000000000000036f3e\",\"logIndex\":\"0xa5\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x0000000000000000000000009a899b98870ed01fa27a802fb5714999cda9df53\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0xb8f0cf37f90af5bee5d1deff7169ed768142b99a31b3ef28ba4ecf23e71f3e65\",\"transactionIndex\":\"0x1c\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0xe74d62c5945fb8a25cac218336fca6dbbb5e4b2507f272a231138d1b6e9f308d\",\"blockNumber\":\"0x10f7420\",\"data\":\"0x0000000000000000000000001c2c95a77f0ba67deb5d564bbb1b41a21f36731f0000000000000000000000000000000000000000000000000000000000036f3f\",\"logIndex\":\"0x39\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x000000000000000000000000373ffc7c2c72175fc933f4a003208d3651dc43fe\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0xaf3f9d3fee5257477f93af8f988e6180745b6eaaf22b02c1e8af4dce3bd359da\",\"transactionIndex\":\"0x7\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0xf4525a1401853995993e43e6b10833e8008ebb9aa4b5e32db7d3913c21f75794\",\"blockNumber\":\"0x10f742c\",\"data\":\"0x000000000000000000000000c9ad435f9bb0be2eebddd907fd66ecbf326bed6d0000000000000000000000000000000000000000000000000000000000036f40\",\"logIndex\":\"0x164\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x0000000000000000000000000511f97be1982d2c434f95b0c754f504a8e166a5\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0x616ca636f7ec144237a844b9f1cd764317813f30768a21256143b77ba579678d\",\"transactionIndex\":\"0x7b\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x7ebac309bcfba698cd396261603327bbd675f685153fea965750ab8623b61a02\",\"blockNumber\":\"0x10f7430\",\"data\":\"0x000000000000000000000000b9c85fb8394a151690368c9a9e6530f8ee4552ed0000000000000000000000000000000000000000000000000000000000036f41\",\"logIndex\":\"0x1\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",\"0x000000000000000000000000c58ae35de246598613680dd9f7af3b66b5ec5bc5\"],\"transactionHash\":\"0xa52b5c5b9e71fbd1fc50fecac928bf31ad8f4ade1d31cec6ce9a6c53baad7b8c\",\"transactionIndex\":\"0x0\"},{\"address\":\"0x5c69bee701ef814a2b6a3edd4b1652cb9cc5aa6f\",\"blockHash\":\"0x6348539badd5279dd6dbc9d8e5b36b4174e1a2122507314da64506255b174916\",\"blockNumber\":\"0x10f7438\",\"data\":\"0x0000000000000000000000002271886de3ad4cba4a596b5a712fae4f46b4679b0000000000000000000000000000000000000000000000000000000000036f42\",\"logIndex\":\"0x17b\",\"removed\":false,\"topics\":[\"0x0d3648bd0f6ba80134a33ba9275ac585d9d315f0ad8355cddefde31afa28d0e9\",\"0x0000000000000000000000002074145dd26a78a25471ace3ad06650a7ee9adb7\",\"0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\"],\"transactionHash\":\"0xbee570e9126e1f649886fa9ddb54bcd1b047830a250c30f12fb1891bee0facb7\",\"transactionIndex\":\"0x7f\"}]}\r\n```\r\n\r\n### Temporary Workaround\r\n\r\nUse `eth_getLogs`.\r\n\r\n### Related Issues\r\n- https://github.com/ledgerwatch/erigon/issues/7903\r\n- https://github.com/ledgerwatch/erigon/issues/6598\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7995/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7995/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/343",
  "id": 557759407,
  "node_id": "MDU6SXNzdWU1NTc3NTk0MDc=",
  "number": 343,
  "title": "Sync issue at block 9383377",
  "user": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-01-30T21:19:27Z",
  "updated_at": "2020-02-01T16:24:39Z",
  "closed_at": "2020-02-01T16:24:39Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "````\r\nNumber: 9383377\r\nHash: 0x67d3dc287e96bdc644c29c980ef9e8dbde3b94ded9f2ebb1874501eb7acf597c\r\n...\r\n         49: cumulative: 5059149 gas: 24148 contract: 0x0000000000000000000000000000000000000000 status: 0 tx: 0xb20689381a3a7f7e032da146264acee6cf4a53d71d1f15f1b54dd6d97c1b8589 logs: [] bloom: 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 state: \r\n...\r\n\r\n\r\nError: invalid gas used (remote: 9976233 local: 9954718); invalid bloom (remote: 1050850d90020e82835d20004018480880b8204491024a2c82801ac4345a820d0c4820494100001397040040018e0388b1420e0c850198030242c040002c8034114061239102000310108228072040000193233688392a41901e0a000324b45982c4980406a00518300003c000a038140c085105400c00922728407a22400082958008bd814020024900d41181ec4004140a8851000811e7043200638c90300002202b0091c84140044802ca0846402123740cb02c4620a941098401988082800808802b9042a1100c483201102f006064002a890192000f2c3000a1884130048a5264a890a024280830021100311cd948020491010f01d08106300262803038  local: 1050850d90020e82835d20004018480880b8204491024a2c80801ac4345a820d0c4820494100001397040040018e0388b1420e0c850198030242c040002c8034114061239102000310108228072040000193233688392a41901e0a000324b45982c4980406a00518300003c000a038140c085105400c00922728407a22400082958008bd814020024900d41181ec4004140a8851000810e7043200628c90300002202b0091c84140044802ca0846402123740cb02c4620a841098401988082800808802b9042a1100c483201102f006064002a890192000f2c3000a1884130048a5064a890a024280830021100311cd948020491010f01d08106300262803038); invalid receipt root hash (remote: 5b3db0992f377aa18c5c996346346bc14b54d4900a12fed617226e8293991274 local: e999b0ae2ffb28862b723730cd3595bb08c525bcc834918c51807f24c38454fd); invalid merkle root (remote: 37cc307c308b903e5e5a9a914ae2be2174e00acd067e35d6aa7016cf4403a36f local: 5ab34ecc7775d54e7799d4a50c50307690776ce42258dc4e9053de41e13bb063)\r\nCallers: [github.com/ledgerwatch/turbo-geth/core.(*BlockChain).reportBlock github.com/ledgerwatch/turbo-geth/core.(*BlockChain).insertChain github.com/ledgerwatch/turbo-geth/core.(*BlockChain).InsertChain github.com/ledgerwatch/turbo-geth/eth.NewProtocolManager.func3 github.com/ledgerwatch/turbo-geth/eth/fetcher.(*Fetcher).insert.func1 runtime.goexit]\r\n````\r\n\r\nError seems to be in the transaction 49, https://etherscan.io/tx/0xb20689381a3a7f7e032da146264acee6cf4a53d71d1f15f1b54dd6d97c1b8589 , which should have gas spent 126965 instead of 24148\r\n",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/580472871",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/343#issuecomment-580472871",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343",
    "id": 580472871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MDQ3Mjg3MQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-30T21:40:13Z",
    "updated_at": "2020-01-30T21:40:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like it has managed to recover by itself:\r\n````\r\nINFO [01-30|12:51:12.558] Inserting chain                          start=9383377 end=9383377\r\nINFO [01-30|12:51:12.564] Creating IntraBlockState from latest state block=9383376\r\nINFO [01-30|12:55:20.746] Rebuilt top of account trie and verified root hash=\"<ebd8dc3bff358937edba424db235b7015792cd5a7fefade494abd03c049427fd> \"\r\nINFO [01-30|12:55:20.747] Memory after rebuild                     nodes=69905   alloc=270242   sys=15999539 numGC=2287\r\nINFO [01-30|12:55:20.747] Creation complete. \r\nINFO [01-30|12:55:20.747] Creation complete. \r\nINFO [01-30|12:55:30.496] Got interrupt, shutting down... \r\nINFO [01-30|12:55:30.498] IPC endpoint closed                      url=/home/dappnode/.ethereum/geth.ipc\r\nINFO [01-30|12:55:42.840] Imported new chain segment               blocks=1   txs=134   mgas=9.976    elapsed=4m30.282s mgasps=0.037   number=9383377 hash=67d3dcâ€¦cf597c batch=67099  age=5m26s\r\nINFO [01-30|12:55:43.011] Memory                                   nodes=71537   alloc=282603   sys=15999539 numGC=2320\r\nINFO [01-30|12:55:43.011] Database                                 size=345491357696 written=11145217\r\n````",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/580472871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/580809648",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/343#issuecomment-580809648",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/343",
    "id": 580809648,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MDgwOTY0OA==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-31T16:38:07Z",
    "updated_at": "2020-01-31T16:38:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "eventually, after failing and recovering, it seems to have corrupted its database\r\n````\r\nINFO [01-31|16:59:03.886] Creating IntraBlockState from latest state block=9390905\r\nWARN [01-31|17:00:58.470] Checkpoint challenge timed out, dropping id=6121da935ccfec4c conn=dyndial addr=100.24.116.235:30301  type=Geth/v1.9.9-stable/linux-amd64/go1.13.4\r\nINFO [01-31|17:01:14.750] Got interrupt, shutting down... \r\nINFO [01-31|17:01:14.750] IPC endpoint closed                      url=/home/dappnode/.ethereum/geth.ipc\r\nERROR[01-31|17:01:39.828] Rebuiling aborted                        error=\"mismatching hash: <67ba087f3e6256626455540ddcb307f0e1d42bd29fe0f9add1e8306ae8aba0ff>  eb7d7cd2df52ab4daf5bdf572fb7138ee4aaeda0bc13c0d9a77f4e6e9c177077 for prefix , resolveHex , resolvePos 0\"\r\n````\r\n\r\nI have run the snapshot verification on it:\r\n````\r\nBlock number: 9390904\r\nBlock root hash: eb7d7cd2df52ab4daf5bdf572fb7138ee4aaeda0bc13c0d9a77f4e6e9c177077\r\nnew resolve request for root block with hash eb7d7cd2df52ab4daf5bdf572fb7138ee4aaeda0bc13c0d9a77f4e6e9c177077\r\nTrie computation took 2m15.052294679s\r\nIncarnation map: map[0:167 1:9921574]\r\nd33c272b0aa214bbdd0d40fdedca08b359cf54b2f802bab29e04b3951f3fb64a: mismatching hash: <faa2ee85618e20c82496b3574d90d182f6d6ff9a3f17b73482bf9ec7baedea09>  079c0323ba2b833ec884e470071b142cdda59500367057410e450f451a169603 for prefix d33c272b0aa214bbdd0d40fdedca08b359cf54b2f802bab29e04b3951f3fb64afffffffffffffffe, resolveHex , resolvePos 0\r\nincarnation: 1, account.Root: faa2ee85618e20c82496b3574d90d182f6d6ff9a3f17b73482bf9ec7baedea09\r\nc1c9d20beb18a70e33e62a2533f5407b99779eeaf15f42bbb19ccefddd8b4c14: mismatching hash: <6506e27c14cebca1a6c67157c6f4d6574829706a9f302e4c96d4285b5244efbd>  bcb556e369942ba14de0ba10d3bc64fede6beb9a036797825d391946e1d8b073 for prefix c1c9d20beb18a70e33e62a2533f5407b99779eeaf15f42bbb19ccefddd8b4c14fffffffffffffffe, resolveHex , resolvePos 0\r\nincarnation: 1, account.Root: 6506e27c14cebca1a6c67157c6f4d6574829706a9f302e4c96d4285b5244efbd\r\nbecbf51686a6cc2ab288e158cb03310fc9e4c72e85ee041ebaecb7cce5236e96: mismatching hash: <26133050a62233a799174437d42293b86b2df16c92abf9144ed514628090dcfb>  ce5fe9a0337397159d041457c8cd67b30f580e9be000d667bb56b29b1b3609a6 for prefix becbf51686a6cc2ab288e158cb03310fc9e4c72e85ee041ebaecb7cce5236e96fffffffffffffffe, resolveHex , resolvePos 0\r\nincarnation: 1, account.Root: 26133050a62233a799174437d42293b86b2df16c92abf9144ed514628090dcfb\r\neddb7eeecafa3c50b7b2958a56286dab14dbff9b3ca65c2ac30592c7f7da860d: mismatching hash: <294925f22ac714360ce671d4aef887bbefc8c96e491949535c6242ea9b627365>  9d20d8ca7693ecade1fafe7d1b0227415a007aefba1997e0a1fc7c9b84cae9c9 for prefix eddb7eeecafa3c50b7b2958a56286dab14dbff9b3ca65c2ac30592c7f7da860dfffffffffffffffe, resolveHex , resolvePos 0\r\nincarnation: 1, account.Root: 294925f22ac714360ce671d4aef887bbefc8c96e491949535c6242ea9b627365\r\nStorage trie computation took 27m13.616759521s\r\nINFO [01-31|17:33:19.117] Database closed                          database=/home/dappnode/.ethereum/geth/chaindata\r\n````",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/580809648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

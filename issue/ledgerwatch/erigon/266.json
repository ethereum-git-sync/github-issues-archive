{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/266",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/266/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/266/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/266/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/266",
  "id": 537437718,
  "node_id": "MDU6SXNzdWU1Mzc0Mzc3MTg=",
  "number": 266,
  "title": "Orchestrate scalability test for RPC daemon",
  "user": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2019-12-13T09:24:07Z",
  "updated_at": "2020-04-04T15:23:06Z",
  "closed_at": "2020-04-04T15:23:06Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "We would like to establish early on whether the idea of RPC daemon makes sense in terms of scalability.\r\nWe analyse the performance degradation for a group of RPC test drivers (it terms of the response roundtrip times) in two scenarios: scenario A, scenario B and perhaps scenario C. In both scenarios, we run multiple benchmark runs. In the run 1, we use only one RPC test driver, and measure the completion time (how long did it take the entire benchmark to complete), lets call it `A_time_1`. In the run 2, we use 2 RPC test drivers, running concurrently, and again we measure the completion time of both test drivers, lets call it `A_time_2`. Hopefully, `A_time_2` is very close to `A_time_1`. Then, we keep adding RPC drivers and record `A_time_3`, ... At some point we notice that `A_time_N` >= `A_time_N-1` + `A_time_1`, which means we got to the point where the RPC server stopped scaling completely and a new server needs to be added. Lets call this point the scalability breaking point for scenario A, `N` = `A_break`.\r\n\r\nIn the scenario B, we use 2 RPC daemons connected to one turbo-geth instance, and the RPC test drivers are evenly split among them. We measure `B_time_1`, `B_time_2`, etc., and eventually, `B_break`. We hope that adding RPC daemons shifted the scalability breaking point, i.e. `B_break` > `A_break`.\r\n\r\nTo further explore the behaviour of the RPC daemon scaling, we might want to add scenario C, which is the same as scenario B, but with 3 RPC daemons instead of 2.\r\n\r\n![image](https://user-images.githubusercontent.com/13686139/70789154-64ad6900-1d8a-11ea-9b29-e5458a45b8f4.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13686139/70789309-ab02c800-1d8a-11ea-8f93-c56da82fca6f.png)\r\n",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/266/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/266/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

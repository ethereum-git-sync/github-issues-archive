{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7793",
  "id": 1771088372,
  "node_id": "I_kwDOC0FsAM5pkKn0",
  "number": 7793,
  "title": "Erigon currently stops syncing, but no errors are reported",
  "user": {
    "login": "zlxadata",
    "id": 91585370,
    "node_id": "U_kgDOBXV7Wg",
    "avatar_url": "https://avatars.githubusercontent.com/u/91585370?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zlxadata",
    "html_url": "https://github.com/zlxadata",
    "followers_url": "https://api.github.com/users/zlxadata/followers",
    "following_url": "https://api.github.com/users/zlxadata/following{/other_user}",
    "gists_url": "https://api.github.com/users/zlxadata/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zlxadata/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zlxadata/subscriptions",
    "organizations_url": "https://api.github.com/users/zlxadata/orgs",
    "repos_url": "https://api.github.com/users/zlxadata/repos",
    "events_url": "https://api.github.com/users/zlxadata/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zlxadata/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-06-23T09:00:16Z",
  "updated_at": "2023-06-24T02:41:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version：erigon version 2.43.0-stable\r\n\r\nOS & Version：Linux - Ubuntu 22.10\r\n\r\nCommit hash: \r\n\r\nErigon Command (with flags/config)：\r\n--datadir=/node2/data-erigon\r\n--torrent.download.rate=20mb \r\n--http --http.addr 0.0.0.0 \r\n--authrpc.jwtsecret /node2/data-erigon/jwt.hex\r\n\r\n\r\nConcensus Layer：Prysm v4.0.5\r\n\r\nConcensus Layer Command (with flags/config):\r\n--datadir=/node2/data-prysm \r\n--jwt-secret=/node2/data-erigon/jwt.hex \r\n--rpc-host=0.0.0.0 \r\n--grpc-gateway-host=0.0.0.0 \r\n--monitoring-host=0.0.0.0 -\r\n-execution-endpoint=http://127.0.0.1:8551 \r\n--accept-terms-of-use=true\r\n\r\n\r\nChain/Network: \r\n\r\nExpected behaviour\r\nErigon data is continuously synchronized, and the mdbx.data file in the chaindata directory should continue to grow.\r\n\r\nActual behaviour\r\nErigon currently stops syncing, but no errors are reported.The capacity of the mdbx.data file in chaindata is 1486058684416 bytes, which has not changed for two days.\r\n\r\nSteps to reproduce the behaviour\r\nerigon does not currently have continuous sync data，but no errors are reported.\r\n\r\ndiagnostic info 1：logs info\r\n[INFO] [06-23|16:25:30.126] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.6GB sys=3.1GB\r\n[INFO] [06-23|16:26:30.121] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.3GB sys=3.1GB\r\n[INFO] [06-23|16:27:30.118] [p2p] GoodPeers                          eth67=29 eth68=21\r\n[INFO] [06-23|16:27:30.126] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.6GB sys=3.1GB\r\n[INFO] [06-23|16:28:30.121] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.4GB sys=3.1GB\r\n[INFO] [06-23|16:29:30.118] [p2p] GoodPeers                          eth67=29 eth68=21\r\n[INFO] [06-23|16:29:30.125] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.6GB sys=3.1GB\r\n[INFO] [06-23|16:30:30.121] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.5GB sys=3.1GB\r\n[INFO] [06-23|16:31:30.117] [p2p] GoodPeers                          eth68=23 eth67=28\r\n[INFO] [06-23|16:31:30.126] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.8GB sys=3.1GB\r\n\r\ndiagnostic info 1：stack trace\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0xd9f315        github.com/anacrolix/torrent.(*Client).initiateProtocolHandshakes+0x195        /root/go/pkg/mod/github.com/anacrolix/torrent@v1.48.1-0.20230219022425-e8971ea0f1bf/cli>\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0xd9f72f        github.com/anacrolix/torrent.(*Client).establishOutgoingConnEx+0x30f        /root/go/pkg/mod/github.com/anacrolix/torrent@v1.48.1-0.20230219022425-e8971ea0f1bf/client>\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0xd9fbd7        github.com/anacrolix/torrent.(*Client).establishOutgoingConn+0x77        /root/go/pkg/mod/github.com/anacrolix/torrent@v1.48.1-0.20230219022425-e8971ea0f1bf/client.go>\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0xd9fdc4        github.com/anacrolix/torrent.(*Client).outgoingConnection+0xc4                /root/go/pkg/mod/github.com/anacrolix/torrent@v1.48.1-0.20230219022425-e8971ea0f1bf/clie>\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: 1 @ 0x459e16 0x48ae95 0x13f03ed 0x48e0a1\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0x48ae94        time.Sleep+0x134                                                                /usr/local/go/src/runtime/time.go:195\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0x13f03ec        github.com/ledgerwatch/erigon-lib/downloader.(*Downloader).mainLoop.func1+0x4c        /root/go/pkg/mod/github.com/ledgerwatch/erigon-lib@v0.0.0-20230423044930-fc9dd7>\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: 1 @ 0x459e16 0x48ae95 0x8b3436 0x48e0a1\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0x48ae94        time.Sleep+0x134                                                /usr/local/go/src/runtime/time.go:195\r\n6月 23 16:34:10 zlaxdata erigon[1873737]: #        0x8b3435        github.com/VictoriaMetrics/metrics.summariesSwapCron+0x35        /root/go/pkg/mod/github.com/!victoria!metrics/metrics@v1.23.1/summary.go:237\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1603979950",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7793#issuecomment-1603979950",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793",
    "id": 1603979950,
    "node_id": "IC_kwDOC0FsAM5fmsqu",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-23T09:12:35Z",
    "updated_at": "2023-06-23T09:12:35Z",
    "author_association": "COLLABORATOR",
    "body": "- let's try to upgrade erigon? \r\n- also can provide next info: `curl -sK -v http://localhost:6060/debug/pprof/goroutine?debug=1 > goroutines.txt`\r\n- what is prysm version?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1603979950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1604275521",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7793#issuecomment-1604275521",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793",
    "id": 1604275521,
    "node_id": "IC_kwDOC0FsAM5fn01B",
    "user": {
      "login": "zlxadata",
      "id": 91585370,
      "node_id": "U_kgDOBXV7Wg",
      "avatar_url": "https://avatars.githubusercontent.com/u/91585370?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zlxadata",
      "html_url": "https://github.com/zlxadata",
      "followers_url": "https://api.github.com/users/zlxadata/followers",
      "following_url": "https://api.github.com/users/zlxadata/following{/other_user}",
      "gists_url": "https://api.github.com/users/zlxadata/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zlxadata/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zlxadata/subscriptions",
      "organizations_url": "https://api.github.com/users/zlxadata/orgs",
      "repos_url": "https://api.github.com/users/zlxadata/repos",
      "events_url": "https://api.github.com/users/zlxadata/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zlxadata/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-23T13:18:31Z",
    "updated_at": "2023-06-23T13:18:31Z",
    "author_association": "NONE",
    "body": "Thanks for your answer！\r\n1.My prysm version is：V 4.0.5\r\n2.The Command：curl -sK -v http://localhost:6060/debug/pprof/goroutine?debug=1 > goroutines.txt\r\n\r\ncurl: option -sK: error encountered when reading a file\r\ncurl: try 'curl --help' or 'curl --manual' for more information\r\n\r\n3.How to upgrade while erigon is running？",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1604275521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1604956091",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7793#issuecomment-1604956091",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793",
    "id": 1604956091,
    "node_id": "IC_kwDOC0FsAM5fqa-7",
    "user": {
      "login": "icculp",
      "id": 57159226,
      "node_id": "MDQ6VXNlcjU3MTU5MjI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/57159226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/icculp",
      "html_url": "https://github.com/icculp",
      "followers_url": "https://api.github.com/users/icculp/followers",
      "following_url": "https://api.github.com/users/icculp/following{/other_user}",
      "gists_url": "https://api.github.com/users/icculp/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/icculp/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/icculp/subscriptions",
      "organizations_url": "https://api.github.com/users/icculp/orgs",
      "repos_url": "https://api.github.com/users/icculp/repos",
      "events_url": "https://api.github.com/users/icculp/events{/privacy}",
      "received_events_url": "https://api.github.com/users/icculp/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-23T20:57:29Z",
    "updated_at": "2023-06-23T20:58:43Z",
    "author_association": "NONE",
    "body": "Maybe unrelated, but mumbai on 2.47 doesn't keep up and keeps thinking it's synced when it's is in fact not. The node in the blue line shows synced rn but you can see it's fallen behind again and again\r\n![image](https://github.com/ledgerwatch/erigon/assets/57159226/82739b56-51b0-428b-b2d7-b64e65374d28)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1604956091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1605239641",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7793#issuecomment-1605239641",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793",
    "id": 1605239641,
    "node_id": "IC_kwDOC0FsAM5frgNZ",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-24T02:37:29Z",
    "updated_at": "2023-06-24T02:37:29Z",
    "author_association": "COLLABORATOR",
    "body": "@icculp hi. your comment is not related to this issue. please create another issue with logs, hardware info, disk type, etc... ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1605239641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1605240088",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7793#issuecomment-1605240088",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7793",
    "id": 1605240088,
    "node_id": "IC_kwDOC0FsAM5frgUY",
    "user": {
      "login": "zlxadata",
      "id": 91585370,
      "node_id": "U_kgDOBXV7Wg",
      "avatar_url": "https://avatars.githubusercontent.com/u/91585370?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zlxadata",
      "html_url": "https://github.com/zlxadata",
      "followers_url": "https://api.github.com/users/zlxadata/followers",
      "following_url": "https://api.github.com/users/zlxadata/following{/other_user}",
      "gists_url": "https://api.github.com/users/zlxadata/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zlxadata/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zlxadata/subscriptions",
      "organizations_url": "https://api.github.com/users/zlxadata/orgs",
      "repos_url": "https://api.github.com/users/zlxadata/repos",
      "events_url": "https://api.github.com/users/zlxadata/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zlxadata/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-24T02:40:03Z",
    "updated_at": "2023-06-24T02:41:16Z",
    "author_association": "NONE",
    "body": "I use this command：curl -H \"Content-Type: application/json\" -X POST --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[],\"id\":1}' http://127.0.0.1:8545\r\nGet the current latest synchronized block height：0xfbc51f（blockno：16499999）and stop syncing。\r\n\r\nAnd after I upgrade erigon version from 2.43.0 to 2.47.0, the capacity of the mdbx.data file in chaindata is changed from1486058684416 bytes to 1484386635776 bytes。On the contrary, it has become less。\r\n\r\nI don't know what to do now\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1605240088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

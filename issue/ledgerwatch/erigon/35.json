{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/35",
  "id": 453504333,
  "node_id": "MDU6SXNzdWU0NTM1MDQzMzM=",
  "number": 35,
  "title": "Fix concurrent map writes error",
  "user": {
    "login": "JekaMas",
    "id": 3192700,
    "node_id": "MDQ6VXNlcjMxOTI3MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3192700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JekaMas",
    "html_url": "https://github.com/JekaMas",
    "followers_url": "https://api.github.com/users/JekaMas/followers",
    "following_url": "https://api.github.com/users/JekaMas/following{/other_user}",
    "gists_url": "https://api.github.com/users/JekaMas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JekaMas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JekaMas/subscriptions",
    "organizations_url": "https://api.github.com/users/JekaMas/orgs",
    "repos_url": "https://api.github.com/users/JekaMas/repos",
    "events_url": "https://api.github.com/users/JekaMas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JekaMas/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-06-07T13:06:26Z",
  "updated_at": "2019-06-08T14:01:16Z",
  "closed_at": "2019-06-08T14:01:16Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "```\r\n\r\ngoroutine 48 [running]:\r\nruntime.throw(0x72f8b2, 0x15)\r\n\t/usr/local/go/src/runtime/panic.go:617 +0x72 fp=0xc00011a758 sp=0xc00011a728 pc=0x42f862\r\nruntime.mapassign_fast64(0x6cffe0, 0xc000013050, 0x0, 0x5dfd9e)\r\n\t/usr/local/go/src/runtime/map_fast64.go:101 +0x35f fp=0xc00011a798 sp=0xc00011a758 pc=0x4135cf\r\ngithub.com/ledgerwatch/turbo-geth/core/state.(*TrieDbState).leftGeneration(...)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/database.go:686\r\ngithub.com/ledgerwatch/turbo-geth/core/state.(*TrieDbState).leftGeneration-fm(0x0)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/database.go:684 +0x49 fp=0xc00011a7c8 sp=0xc00011a798 pc=0x6747d9\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*duoNode).updateT(0xc0005269c0, 0x1, 0xc0005120d0, 0xc0005120e0)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/trie/node.go:334 +0x48 fp=0xc00011a7e0 sp=0xc00011a7c8 pc=0x5dfc68\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000108100, 0x7a8d00, 0xc0005269c0, 0xc00082acd0, 0x41, 0x41, 0x2, 0x7a8f40, 0xc000820c20, 0xc00011ae90, ...)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:1227 +0xa43 fp=0xc00011a9e8 sp=0xc00011a7e0 pc=0x5fb103\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000108100, 0x7a8d60, 0xc0005d6c60, 0xc00082acd0, 0x41, 0x41, 0x1, 0x7a8f40, 0xc000820c20, 0xc00011ae90, ...)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:1329 +0x633 fp=0xc00011abf0 sp=0xc00011a9e8 pc=0x5facf3\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).insert(0xc000108100, 0x7a8d60, 0xc000511760, 0xc00082acd0, 0x41, 0x41, 0x0, 0x7a8f40, 0xc000820c20, 0xc00011ae90, ...)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:1329 +0x633 fp=0xc00011adf8 sp=0xc00011abf0 pc=0x5facf3\r\ngithub.com/ledgerwatch/turbo-geth/trie.(*Trie).Update(0xc000108100, 0xc00011b200, 0x20, 0x20, 0xc00082ac80, 0x48, 0x48, 0x1)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/trie/trie.go:808 +0x178 fp=0xc00011af30 sp=0xc00011adf8 pc=0x5f7c28\r\ngithub.com/ledgerwatch/turbo-geth/core/state.(*TrieDbState).computeTrieRoots(0xc000718c60, 0xc000501901, 0x0, 0x3e, 0x8060104, 0x3e, 0xffffffffffffffff)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/database.go:498 +0x1a57 fp=0xc000131c10 sp=0xc00011af30 pc=0x656977\r\ngithub.com/ledgerwatch/turbo-geth/core/state.(*TrieDbState).ComputeTrieRoots(0xc000718c60, 0xc000010201, 0x7a7e80, 0xc000010200, 0x0, 0x0)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/database.go:286 +0x34 fp=0xc000131c58 sp=0xc000131c10 pc=0x654b84\r\ngithub.com/ledgerwatch/turbo-geth/core/state.TestCopy(0xc00010a300)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/statedb_test.go:190 +0x98f fp=0xc000131fa8 sp=0xc000131c58 pc=0x66c71f\r\ntesting.tRunner(0xc00010a300, 0x73aec0)\r\n\t/usr/local/go/src/testing/testing.go:865 +0xc0 fp=0xc000131fd0 sp=0xc000131fa8 pc=0x4e2250\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:1337 +0x1 fp=0xc000131fd8 sp=0xc000131fd0 pc=0x45da11\r\ncreated by testing.(*T).Run\r\n\t/usr/local/go/src/testing/testing.go:916 +0x35a\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.(*T).Run(0xc00010a300, 0x72bbd6, 0x8, 0x73aec0, 0x479101)\r\n\t/usr/local/go/src/testing/testing.go:917 +0x381\r\ntesting.runTests.func1(0xc00010a200)\r\n\t/usr/local/go/src/testing/testing.go:1157 +0x78\r\ntesting.tRunner(0xc00010a200, 0xc0000e1e30)\r\n\t/usr/local/go/src/testing/testing.go:865 +0xc0\r\ntesting.runTests(0xc00000f120, 0xbad040, 0xc, 0xc, 0x0)\r\n\t/usr/local/go/src/testing/testing.go:1155 +0x2a9\r\ntesting.(*M).Run(0xc000108180, 0x0)\r\n\t/usr/local/go/src/testing/testing.go:1072 +0x162\r\nmain.main()\r\n\t_testmain.go:64 +0x13e\r\n\r\ngoroutine 49 [runnable]:\r\ngithub.com/ledgerwatch/turbo-geth/rlp.(*encbuf).encodeString(0xc00082c000, 0xc0004a867e, 0x2, 0x2)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:201 +0x1ba\r\ngithub.com/ledgerwatch/turbo-geth/rlp.writeBigInt(0xc00038c7c0, 0xc00082c000, 0x196, 0x40e801)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:435 +0x199\r\ngithub.com/ledgerwatch/turbo-geth/rlp.writeBigIntPtr(0x728320, 0xc000297e20, 0x196, 0xc00082c000, 0x728320, 0xc000297e20)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:421 +0x10d\r\ngithub.com/ledgerwatch/turbo-geth/rlp.makeStructWriter.func1(0x6fc7c0, 0xc000297e18, 0x199, 0xc00082c000, 0xc000297e18, 0x199)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:535 +0x149\r\ngithub.com/ledgerwatch/turbo-geth/rlp.makePtrWriter.func4(0x6ab120, 0xc000297e18, 0x16, 0xc00082c000, 0x0, 0x0)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:578 +0xb1\r\ngithub.com/ledgerwatch/turbo-geth/rlp.(*encbuf).encode(0xc00082c000, 0x6ab120, 0xc000297e18, 0x706b00, 0xc00082c000)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:187 +0x135\r\ngithub.com/ledgerwatch/turbo-geth/rlp.EncodeToBytes(0x6ab120, 0xc000297e18, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/rlp/encode.go:101 +0xe4\r\ngithub.com/ledgerwatch/turbo-geth/core/state.(*TrieDbState).computeTrieRoots(0xc000184000, 0xc0004f2001, 0x0, 0x13, 0x7060107, 0x13, 0xffffffffffffffff)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/database.go:494 +0x19ee\r\ngithub.com/ledgerwatch/turbo-geth/core/state.(*TrieDbState).ComputeTrieRoots(0xc000184000, 0xc000398001, 0x7a7e80, 0xc000398000, 0x0, 0x0)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/database.go:286 +0x34\r\ngithub.com/ledgerwatch/turbo-geth/core/state.TestCopy.func1(0xc000506000, 0xc000184000, 0xc0003f6120)\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/statedb_test.go:184 +0x7e\r\ncreated by github.com/ledgerwatch/turbo-geth/core/state.TestCopy\r\n\t/go/src/github.com/ledgerwatch/turbo-geth/build/_workspace/src/github.com/ledgerwatch/turbo-geth/core/state/statedb_test.go:182 +0x929\r\n```",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/500126470",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/35#issuecomment-500126470",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/35",
    "id": 500126470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMDEyNjQ3MA==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-08T14:01:16Z",
    "updated_at": "2019-06-08T14:01:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Should be disabled by this: https://github.com/ledgerwatch/turbo-geth/pull/36",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/500126470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

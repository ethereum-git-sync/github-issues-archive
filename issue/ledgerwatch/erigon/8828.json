{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8828",
  "id": 2010457362,
  "node_id": "I_kwDOC0FsAM531SUS",
  "number": 8828,
  "title": "How to faster sync on mainnet",
  "user": {
    "login": "BananaLF",
    "id": 30020812,
    "node_id": "MDQ6VXNlcjMwMDIwODEy",
    "avatar_url": "https://avatars.githubusercontent.com/u/30020812?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/BananaLF",
    "html_url": "https://github.com/BananaLF",
    "followers_url": "https://api.github.com/users/BananaLF/followers",
    "following_url": "https://api.github.com/users/BananaLF/following{/other_user}",
    "gists_url": "https://api.github.com/users/BananaLF/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/BananaLF/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/BananaLF/subscriptions",
    "organizations_url": "https://api.github.com/users/BananaLF/orgs",
    "repos_url": "https://api.github.com/users/BananaLF/repos",
    "events_url": "https://api.github.com/users/BananaLF/events{/privacy}",
    "received_events_url": "https://api.github.com/users/BananaLF/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-11-25T03:41:53Z",
  "updated_at": "2023-11-26T07:09:09Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "We started a new Erigon nodes ~ 3 days ago and it's still sync and sync slowed down in time\r\n\r\n# Information\r\nerigon version:  `2.54.0-aeec5221`\r\nhareware: aws\r\ncpu:  \r\n```\r\nCPU(s):                8\r\nModel name:            Intel(R) Xeon(R) Platinum 8375C CPU @ 2.90GHz\r\n```\r\nram : 32G\r\ndisk: \r\n```\r\nFilesystem     Type  1K-blocks      Used  Available Use% Mounted on\r\n/dev/nvme0n1p1 ext4 2081739676 982968864 1098754428  48% /\r\n```\r\n\r\nI watch the time of between executeblocks is long，how to speed up  it。\r\n# Log\r\n\r\n```\r\n[INFO] [11-25|02:54:37.584] [4/12 Execution] Executed blocks         number=11403778 blk/s=22.8 tx/s=3657.8 Mgas/s=277.9 gasState=0.16 batch=241.9MB alloc=3.1GB sys=13.7GB\r\n[INFO] [11-25|02:54:53.639] Committed State                          gas reached=93988694947 gasTarget=549755813888\r\n[INFO] [11-25|02:55:23.770] [] ETL [2/2] Loading                     into=PlainCodeHash current_prefix=6281ab20\r\n[INFO] [11-25|02:55:53.770] [] ETL [2/2] Loading                     into=PlainCodeHash current_prefix=c4a64039\r\n[INFO] [11-25|02:56:11.282] Write to db                              progress=0.1M/3.9M current table=IncarnationMap\r\n[INFO] [11-25|02:56:38.868] [p2p] GoodPeers                          eth68=33 eth67=26 eth66=7\r\n[INFO] [11-25|02:56:39.265] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=3.5GB sys=13.7GB\r\n[INFO] [11-25|02:56:47.866] [] ETL [2/2] Loading                     into=PlainState current_prefix=af4bc792\r\n[INFO] [11-25|02:57:19.464] [] ETL [2/2] Loading                     into=PlainState current_prefix=d9d51627\r\n[INFO] [11-25|02:57:49.618] [] ETL [2/2] Loading                     into=PlainState current_prefix=ffbb1d3e\r\n[INFO] [11-25|02:57:49.705] Write to db                              progress=1.8M/3.9M current table=Code\r\n[INFO] [11-25|02:58:19.794] [] ETL [2/2] Loading                     into=Code current_prefix=e65ee186\r\n[INFO] [11-25|02:59:38.868] [p2p] GoodPeers                          eth68=33 eth67=26 eth66=7\r\n[INFO] [11-25|02:59:38.914] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=3.4GB sys=13.7GB\r\n[INFO] [11-25|03:00:26.716] [4/12 Execution] Executed blocks         number=11404183 blk/s=1.2 tx/s=193.4 Mgas/s=14.1 gasState=0.00 batch=0B alloc=2.6GB sys=13.7GB\r\n[INFO] [11-25|03:00:37.572] [4/12 Execution] Executed blocks         number=11404521 blk/s=31.1 tx/s=6209.4 Mgas/s=382.1 gasState=0.01 batch=9.6MB alloc=3.9GB sys=13.7GB\r\n[INFO] [11-25|03:00:57.588] [4/12 Execution] Executed blocks         number=11405095 blk/s=28.7 tx/s=5654.5 Mgas/s=351.9 gasState=0.02 batch=28.1MB alloc=3.5GB sys=13.7GB\r\n[INFO] [11-25|03:01:17.581] [4/12 Execution] Executed blocks         number=11405651 blk/s=27.8 tx/s=4940.5 Mgas/s=338.7 gasState=0.03 batch=46.9MB alloc=3.0GB sys=13.7GB\r\n[INFO] [11-25|03:01:37.576] [4/12 Execution] Executed blocks         number=11406219 blk/s=28.4 tx/s=5028.9 Mgas/s=346.9 gasState=0.05 batch=66.6MB alloc=4.9GB sys=13.7GB\r\n[INFO] [11-25|03:01:57.588] [4/12 Execution] Executed blocks         number=11406770 blk/s=27.5 tx/s=4916.2 Mgas/s=335.2 gasState=0.06 batch=85.9MB alloc=4.4GB sys=13.7GB\r\n[INFO] [11-25|03:02:17.583] [4/12 Execution] Executed blocks         number=11407313 blk/s=27.2 tx/s=4323.0 Mgas/s=331.9 gasState=0.07 batch=104.8MB alloc=3.7GB sys=13.7GB\r\n[INFO] [11-25|03:02:37.585] [4/12 Execution] Executed blocks         number=11407805 blk/s=24.6 tx/s=4077.5 Mgas/s=299.7 gasState=0.08 batch=121.4MB alloc=2.8GB sys=13.7GB\r\n[INFO] [11-25|03:02:38.868] [p2p] GoodPeers                          eth68=33 eth67=26 eth66=7\r\n[INFO] [11-25|03:02:38.877] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.9GB sys=13.7GB\r\n[INFO] [11-25|03:02:57.570] [4/12 Execution] Executed blocks         number=11408348 blk/s=27.2 tx/s=4193.9 Mgas/s=331.3 gasState=0.09 batch=140.0MB alloc=4.6GB sys=13.7GB\r\n[INFO] [11-25|03:03:17.600] [4/12 Execution] Executed blocks         number=11408901 blk/s=27.6 tx/s=4175.3 Mgas/s=332.7 gasState=0.10 batch=158.7MB alloc=3.8GB sys=13.7GB\r\n[INFO] [11-25|03:03:37.591] [4/12 Execution] Executed blocks         number=11409413 blk/s=25.6 tx/s=4089.7 Mgas/s=312.1 gasState=0.12 batch=176.3MB alloc=3.0GB sys=13.7GB\r\n[INFO] [11-25|03:03:57.633] [4/12 Execution] Executed blocks         number=11409988 blk/s=28.7 tx/s=5151.1 Mgas/s=350.5 gasState=0.13 batch=195.6MB alloc=4.9GB sys=13.7GB\r\n[INFO] [11-25|03:04:17.600] [4/12 Execution] Executed blocks         number=11410540 blk/s=27.6 tx/s=4999.7 Mgas/s=341.0 gasState=0.14 batch=215.2MB alloc=4.2GB sys=13.7GB\r\n[INFO] [11-25|03:04:37.577] [4/12 Execution] Executed blocks         number=11411134 blk/s=29.7 tx/s=5755.0 Mgas/s=362.1 gasState=0.15 batch=235.5MB alloc=3.7GB sys=13.7GB\r\n[INFO] [11-25|03:04:57.582] [4/12 Execution] Executed blocks         number=11411690 blk/s=27.8 tx/s=5601.6 Mgas/s=339.4 gasState=0.17 batch=255.0MB alloc=3.0GB sys=13.7GB\r\n[INFO] [11-25|03:04:58.608] Committed State                          gas reached=91955952384 gasTarget=549755813888\r\n[INFO] [11-25|03:05:31.432] [] ETL [2/2] Loading                     into=PlainState current_prefix=e72752f5\r\n[INFO] [11-25|03:05:38.868] [p2p] GoodPeers                          eth68=33 eth66=7 eth67=26\r\n[INFO] [11-25|03:05:38.888] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=4.2GB sys=13.7GB\r\n[INFO] [11-25|03:05:45.510] Write to db                              progress=1.6M/4.0M current table=Code\r\n[INFO] [11-25|03:06:15.525] [] ETL [2/2] Loading                     into=Code current_prefix=d5dc7cf5\r\n[INFO] [11-25|03:06:21.464] Write to db                              progress=1.6M/4.0M current table=PlainCodeHash\r\n[INFO] [11-25|03:06:51.490] [] ETL [2/2] Loading                     into=PlainCodeHash current_prefix=0b226cb4\r\n[INFO] [11-25|03:07:21.490] [] ETL [2/2] Loading                     into=PlainCodeHash current_prefix=19feebbf\r\n[INFO] [11-25|03:07:51.480] [] ETL [2/2] Loading                     into=PlainCodeHash current_prefix=5cc8a292\r\n[INFO] [11-25|03:07:58.934] Write to db                              progress=1.6M/4.0M current table=IncarnationMap\r\n[INFO] [11-25|03:08:38.869] [p2p] GoodPeers                          eth68=33 eth67=26 eth66=7\r\n[INFO] [11-25|03:09:11.137] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=2.6GB sys=13.7GB\r\n[INFO] [11-25|03:09:11.150] [4/12 Execution] Executed blocks         number=11411717 blk/s=0.1 tx/s=24.2 Mgas/s=1.3 gasState=0.00 batch=0B alloc=2.6GB sys=13.7GB\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1826397627",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8828#issuecomment-1826397627",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828",
    "id": 1826397627,
    "node_id": "IC_kwDOC0FsAM5s3J27",
    "user": {
      "login": "mans17",
      "id": 18549430,
      "node_id": "MDQ6VXNlcjE4NTQ5NDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/18549430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mans17",
      "html_url": "https://github.com/mans17",
      "followers_url": "https://api.github.com/users/mans17/followers",
      "following_url": "https://api.github.com/users/mans17/following{/other_user}",
      "gists_url": "https://api.github.com/users/mans17/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mans17/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mans17/subscriptions",
      "organizations_url": "https://api.github.com/users/mans17/orgs",
      "repos_url": "https://api.github.com/users/mans17/repos",
      "events_url": "https://api.github.com/users/mans17/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mans17/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-25T18:52:57Z",
    "updated_at": "2023-11-25T18:52:57Z",
    "author_association": "NONE",
    "body": "Hi, sync can be VERY long.\r\nExecution is mùost of the time, though.\r\n\r\nhttps://github.com/ledgerwatch/erigon/blob/devel/eth/stagedsync/README.md",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1826397627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1826461700",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8828#issuecomment-1826461700",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828",
    "id": 1826461700,
    "node_id": "IC_kwDOC0FsAM5s3ZgE",
    "user": {
      "login": "BananaLF",
      "id": 30020812,
      "node_id": "MDQ6VXNlcjMwMDIwODEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/30020812?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BananaLF",
      "html_url": "https://github.com/BananaLF",
      "followers_url": "https://api.github.com/users/BananaLF/followers",
      "following_url": "https://api.github.com/users/BananaLF/following{/other_user}",
      "gists_url": "https://api.github.com/users/BananaLF/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BananaLF/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BananaLF/subscriptions",
      "organizations_url": "https://api.github.com/users/BananaLF/orgs",
      "repos_url": "https://api.github.com/users/BananaLF/repos",
      "events_url": "https://api.github.com/users/BananaLF/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BananaLF/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-26T01:32:38Z",
    "updated_at": "2023-11-26T01:32:38Z",
    "author_association": "NONE",
    "body": "> Hi, sync can be VERY long. Execution is mùost of the time, though.\r\n> \r\n> https://github.com/ledgerwatch/erigon/blob/devel/eth/stagedsync/README.md\r\n\r\nThanks for you reply. \r\n\r\nHave any way speed up sync? like change some config, upgrade hardware,etc...",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1826461700/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1826690708",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8828#issuecomment-1826690708",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8828",
    "id": 1826690708,
    "node_id": "IC_kwDOC0FsAM5s4RaU",
    "user": {
      "login": "mans17",
      "id": 18549430,
      "node_id": "MDQ6VXNlcjE4NTQ5NDMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/18549430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mans17",
      "html_url": "https://github.com/mans17",
      "followers_url": "https://api.github.com/users/mans17/followers",
      "following_url": "https://api.github.com/users/mans17/following{/other_user}",
      "gists_url": "https://api.github.com/users/mans17/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mans17/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mans17/subscriptions",
      "organizations_url": "https://api.github.com/users/mans17/orgs",
      "repos_url": "https://api.github.com/users/mans17/repos",
      "events_url": "https://api.github.com/users/mans17/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mans17/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-26T07:09:08Z",
    "updated_at": "2023-11-26T07:09:08Z",
    "author_association": "NONE",
    "body": "First, you need to make sure your 'pruning' is fine since it CANNOT be changed. \r\nThen, it's mostly a CPU and I/O on your drive. \r\nRAM, big CPU and fast drive will help. Some people fine tune the mempool during sync, it might help a bit.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1826690708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4540",
  "id": 1284757503,
  "node_id": "I_kwDOC0FsAM5Mk9f_",
  "number": 4540,
  "title": "(Re)Build Erigon 2 Ethereum Mainnet Archive Node from Snapshots",
  "user": {
    "login": "Texnomic",
    "id": 1648586,
    "node_id": "MDQ6VXNlcjE2NDg1ODY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1648586?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Texnomic",
    "html_url": "https://github.com/Texnomic",
    "followers_url": "https://api.github.com/users/Texnomic/followers",
    "following_url": "https://api.github.com/users/Texnomic/following{/other_user}",
    "gists_url": "https://api.github.com/users/Texnomic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Texnomic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Texnomic/subscriptions",
    "organizations_url": "https://api.github.com/users/Texnomic/orgs",
    "repos_url": "https://api.github.com/users/Texnomic/repos",
    "events_url": "https://api.github.com/users/Texnomic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Texnomic/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-06-26T00:39:17Z",
  "updated_at": "2022-09-04T14:09:58Z",
  "closed_at": "2022-07-06T02:02:43Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "May be I'm confused but I'm not able to rebuild my Erigon 2 node to be `Archive` node again. I've the `snapshots` folder but every time it starts syncing from last snapshot. \r\n\r\nRPC Methods that targets historical state or WatchTheBurn don't work anymore.\r\n\r\nThe older `Alpha` releases was simply skipping the `download` stages (because the data is available in snapshot files) and then start the insertion and execution from block 0.\r\n\r\nFlags like `--snapshot false` and `--syncmode archive` are completely ignored. ",
  "closed_by": {
    "login": "Texnomic",
    "id": 1648586,
    "node_id": "MDQ6VXNlcjE2NDg1ODY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1648586?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Texnomic",
    "html_url": "https://github.com/Texnomic",
    "followers_url": "https://api.github.com/users/Texnomic/followers",
    "following_url": "https://api.github.com/users/Texnomic/following{/other_user}",
    "gists_url": "https://api.github.com/users/Texnomic/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Texnomic/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Texnomic/subscriptions",
    "organizations_url": "https://api.github.com/users/Texnomic/orgs",
    "repos_url": "https://api.github.com/users/Texnomic/repos",
    "events_url": "https://api.github.com/users/Texnomic/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Texnomic/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166433796",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4540#issuecomment-1166433796",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
    "id": 1166433796,
    "node_id": "IC_kwDOC0FsAM5Fhl4E",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-26T07:00:41Z",
    "updated_at": "2022-06-26T07:00:41Z",
    "author_association": "COLLABORATOR",
    "body": "1. Do “—snapshots=false” instead of “—snapshots false”\r\n2. I don’t understand problem, show some logs ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166433796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166434232",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4540#issuecomment-1166434232",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
    "id": 1166434232,
    "node_id": "IC_kwDOC0FsAM5Fhl-4",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-26T07:03:06Z",
    "updated_at": "2022-06-26T07:03:06Z",
    "author_association": "COLLABORATOR",
    "body": "Important: —snapshots=true producing Archive node! It’s just algorithm of sync. If you don’t set —prune flags, you will still have Archive node - just part of data will located in snapshots instead of db, but RPC can read them. \r\n\r\n—syncmode flag were removed to reduce confusion ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166434232/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166656983",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4540#issuecomment-1166656983",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
    "id": 1166656983,
    "node_id": "IC_kwDOC0FsAM5FicXX",
    "user": {
      "login": "Texnomic",
      "id": 1648586,
      "node_id": "MDQ6VXNlcjE2NDg1ODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1648586?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Texnomic",
      "html_url": "https://github.com/Texnomic",
      "followers_url": "https://api.github.com/users/Texnomic/followers",
      "following_url": "https://api.github.com/users/Texnomic/following{/other_user}",
      "gists_url": "https://api.github.com/users/Texnomic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Texnomic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Texnomic/subscriptions",
      "organizations_url": "https://api.github.com/users/Texnomic/orgs",
      "repos_url": "https://api.github.com/users/Texnomic/repos",
      "events_url": "https://api.github.com/users/Texnomic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Texnomic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-26T22:00:34Z",
    "updated_at": "2022-06-26T22:00:34Z",
    "author_association": "NONE",
    "body": "Okay, I've started it from a clean directory with only the `snapshots` folder.  It is now stuck at block `14501535`. Erigon Release `2022.06.06`.\r\n\r\n<details>\r\n  <summary>Loop</summary>\r\n\r\n  ```shell\r\nINFO[06-26|23:37:57.771] [p2p] GoodPeers                          eth66=9\r\nINFO[06-26|23:37:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.9GB sys=4.8GB\r\nINFO[06-26|23:38:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:38:39.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:38:59.396] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:39:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:39:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:39:57.770] [p2p] GoodPeers                          eth66=9\r\nINFO[06-26|23:39:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:40:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:40:39.396] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:40:59.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:41:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:41:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:41:57.770] [p2p] GoodPeers                          eth66=8\r\nINFO[06-26|23:41:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.6GB sys=4.8GB\r\nINFO[06-26|23:42:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:42:39.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:42:59.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:43:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:43:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:43:57.770] [p2p] GoodPeers                          eth66=8\r\nINFO[06-26|23:43:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:44:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:44:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:44:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.6GB sys=4.8GB\r\nINFO[06-26|23:45:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.7GB sys=4.8GB\r\nINFO[06-26|23:45:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.7GB sys=4.8GB\r\nINFO[06-26|23:45:57.770] [p2p] GoodPeers                          eth66=8\r\nINFO[06-26|23:45:59.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.7GB sys=4.8GB\r\nINFO[06-26|23:46:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:46:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:46:59.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:47:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.6GB sys=4.8GB\r\nINFO[06-26|23:47:39.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.6GB sys=4.8GB\r\nINFO[06-26|23:47:57.771] [p2p] GoodPeers                          eth66=8\r\nINFO[06-26|23:47:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.7GB sys=4.8GB\r\nINFO[06-26|23:48:19.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:48:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:48:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.6GB sys=4.8GB\r\nINFO[06-26|23:49:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.7GB sys=4.8GB\r\nINFO[06-26|23:49:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.8GB sys=4.8GB\r\nINFO[06-26|23:49:57.771] [p2p] GoodPeers                          eth66=8\r\nINFO[06-26|23:49:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.8GB sys=4.8GB\r\nINFO[06-26|23:50:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.3GB sys=4.8GB\r\nINFO[06-26|23:50:39.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|23:50:59.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:51:19.395] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:51:39.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\nINFO[06-26|23:51:57.770] [p2p] GoodPeers                          eth66=9\r\nINFO[06-26|23:51:59.394] [1/16 Headers] Wrote block headers       number=14501535 blk/second=0.000 alloc=2.5GB sys=4.8GB\r\n```\r\n</details>\r\n\r\n\r\n<details>\r\n  <summary>Full Output</summary>\r\n\r\n```shell\r\n/home/texnomic/erigon/build/bin/erigon --chain=mainnet --datadir=/mnt/data --metrics.addr=0.0.0.0 --private.api.addr=0.0.0.0:9090 --pprof.addr=0.0.0.0 --http.addr=0.0.0.0 --metrics.addr=0.0.0.0 --metrics.port=6060 --pprof.port=6061 --metrics.port=6070 --http.port=8545 --pprof.port=6062 --http.api=eth,erigon,web3,net,debug,trace,txpool,db,parity --http.vhosts='*' --watch-the-burn --metrics --metrics.expensive --pprof --ws --http --state.cache=4000000 --db.pagesize=64kb --trustedpeers=\"enode://9f506ac130465425c71014d34f9f3fde6b077b7048e72c74d470ed08bc11585cce0a24ab0eb31f2ec9f92271e88400f0147cb5644afb5415c302882cfe228995@10.0.0.100:30303\" --snapshots=true\r\nINFO[06-26|20:57:11.398] Starting metrics server                  addr=http://0.0.0.0:6070/debug/metrics/prometheus\r\nINFO[06-26|20:57:11.398] Starting pprof server                    cpu=\"go tool pprof -lines -http=: http://0.0.0.0:6062/debug/pprof/profile?seconds=20\" heap=\"go tool pprof -lines -http=: http://0.0.0.0:6062/debug/pprof/heap\"\r\nINFO[06-26|20:57:11.398] Build info                               git_branch=HEAD git_tag=v2022.06.06 git_commit=7724089985bf9cb8bb7d1bde92892256a6af859f\r\nINFO[06-26|20:57:11.398] Starting Erigon on Ethereum mainnet...\r\nINFO[06-26|20:57:11.400] Maximum peer count                       ETH=100 total=100\r\nINFO[06-26|20:57:13.503] Set global gas cap                       cap=50000000\r\nINFO[06-26|20:57:13.639] Opening Database                         label=chaindata path=/mnt/data/chaindata\r\nINFO[06-26|20:57:13.645] Re-Opening DB in exclusive mode to apply migrations\r\nINFO[06-26|20:57:13.650] Apply migration                          name=reset_blocks_3\r\nWARN[06-26|20:57:13.650] NOTE: this migration will remove recent blocks (and senders) to fix several recent bugs. Your node will re-download last ~400K blocks, should not take very long\r\n\r\nINFO[06-26|20:59:57.673] Applied migration                        name=reset_blocks_3\r\nINFO[06-26|20:59:57.673] Updated DB schema to                     version=6.0.0\r\nINFO[06-26|20:59:57.770] Initialised chain configuration          config=\"{ChainID: 1, Homestead: 1150000, DAO: 1920000, DAO Support: true, Tangerine Whistle: 2463000, Spurious Dragon: 2675000, Byzantium: 4370000, Constantinople: 7280000, Petersburg: 7280000, Istanbul: 9069000, Muir Glacier: 9200000, Berlin: 12244000, London: 12965000, Arrow Glacier: 13773000, Gray Glacier: 15050000, Terminal Total Difficulty: <nil>, Engine: ethash}\" genesis=0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\r\nINFO[06-26|20:59:57.770] Initialising Ethereum protocol           network=1\r\nINFO[06-26|20:59:57.770] Using snapshots                          on=true\r\nINFO[06-26|20:59:57.770] Effective                                prune_flags= snapshot_flags=\"--snapshots=true\"\r\nINFO[06-26|21:00:07.782] Disk storage enabled for ethash DAGs     dir=/mnt/data/ethash-dags count=2\r\nINFO[06-26|21:00:07.790] Starting private RPC server              on=0.0.0.0:9090\r\nINFO[06-26|21:00:07.791] rpc filters: subscribing to Erigon events\r\nINFO[06-26|21:00:07.791] new subscription to logs established\r\nTraceRequests = false\r\nINFO[06-26|21:00:07.791] new subscription to newHeaders established\r\nINFO[06-26|21:00:07.791] New txs subscriber joined\r\nINFO[06-26|21:00:07.793] HTTP endpoint opened                     url=0.0.0.0:8545 ws=true ws.compression=true grpc=false\r\nINFO[06-26|21:00:07.801] [Snapshots] Fetching torrent files metadata\r\nINFO[06-26|21:00:07.804] Started P2P networking                   version=66 self=enode://fcff3670c5d19030f8b76b004dbf418a9de9ae2d37712b5f5e2239836904e5a3b8d4455ac2ae14675a0bc31ae0fad0e5fe264318e1bedde9f89400bcf6bfc3e2@127.0.0.1:30303 name=erigon/v2022.06.6-alpha-77240899/linux-amd64/go1.18.3\r\nINFO[06-26|21:00:11.625] [Snapshots] Stat                         blocks=14499999 segments=14499999 indices=14499999 alloc=2.3GB sys=2.8GB\r\nINFO[06-26|21:00:31.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=1041621\r\nINFO[06-26|21:00:51.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=2172102\r\nINFO[06-26|21:01:11.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=3287901\r\nINFO[06-26|21:01:31.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=3807769\r\nINFO[06-26|21:01:51.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=5030395\r\nINFO[06-26|21:01:57.770] [p2p] GoodPeers                          eth66=1\r\nINFO[06-26|21:02:11.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=6272799\r\nINFO[06-26|21:02:42.447] [1/16 Headers] Writing total difficulty index for snapshots block_num=7456541\r\nINFO[06-26|21:02:51.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=7982820\r\nINFO[06-26|21:03:11.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=9181874\r\nINFO[06-26|21:03:31.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=10351324\r\nINFO[06-26|21:03:56.918] [1/16 Headers] Writing total difficulty index for snapshots block_num=11184812\r\nINFO[06-26|21:03:57.770] [p2p] GoodPeers                          eth66=1\r\nINFO[06-26|21:04:11.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=12052726\r\nINFO[06-26|21:04:31.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=13235111\r\nINFO[06-26|21:04:51.625] [1/16 Headers] Writing total difficulty index for snapshots block_num=14351730\r\nINFO[06-26|21:05:19.394] [1/16 Headers] Waiting for headers...    from=14499999\r\nINFO[06-26|21:05:39.395] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=2.4GB sys=4.8GB\r\nINFO[06-26|21:05:57.770] [p2p] GoodPeers                          eth66=4\r\nINFO[06-26|21:05:59.395] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=2.6GB sys=4.8GB\r\nINFO[06-26|21:06:19.395] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=2.7GB sys=4.8GB\r\nINFO[06-26|21:06:39.395] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=2.8GB sys=4.8GB\r\nINFO[06-26|21:06:59.395] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=2.8GB sys=4.8GB\r\nINFO[06-26|21:06:59.395] Req/resp stats                           req=589 reqMin=14501342 reqMax=15012613 skel=17 skelMin=14501535 skelMax=14796255 resp=396 respMin=12964999 respMax=15012614 dups=8671\r\nINFO[06-26|21:06:59.396] Queue sizes                              anchors=193 links=11551 persisted=65536\r\nINFO[06-26|21:06:59.396] {14501535-14501535 links=1 (14501535)} => b7a39709db6ffeef20a7bef57bceb59e2d501a4e5c451b18089904857539b8c0, anchorQueue.idx=134, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.396] {14503071-14503071 links=1 (14503071)} => 123b0bc1fecda5bffe76bcd24820e47a7a8001e7377063178b0d6a51fb41fc03, anchorQueue.idx=130, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14504607-14504607 links=1 (14504607)} => 2f8c7e8deeaa91e675b6628e75f48998eeea8357f30678e353d85e5092226ac2, anchorQueue.idx=63, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14506143-14506143 links=1 (14506143)} => d0edacf24a28798df821330bcb771209c937f4540cf31ba6c420e7acfdec7332, anchorQueue.idx=25, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14507679-14507679 links=1 (14507679)} => 8aef750171b46eaa886f5afeaeeeaa44aa486610e1e2b50126576a622e978839, anchorQueue.idx=71, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14509215-14509215 links=1 (14509215)} => 13701ad869e90f02faf0ff3c440a89ed83b29095e503068e90b198ab9bf84515, anchorQueue.idx=39, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14510751-14510751 links=1 (14510751)} => eeeda13c74335e0f38298136299371e28d0d9f2af82ab688c85fe7c51a812f68, anchorQueue.idx=24, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14512287-14512287 links=1 (14512287)} => 30fd64db29b78b1bcf42d4aa7dcf98187b1787ff1012c4070e13b2a031aa6dd2, anchorQueue.idx=50, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14513823-14513823 links=1 (14513823)} => 11ee91b795e9c9d3212ad6102c4915596d8b35cef5858848f24985fae989bef5, anchorQueue.idx=80, next retry in 2.827699203s\r\nINFO[06-26|21:06:59.396] {14515359-14515359 links=1 (14515359)} => 2de4a4cd3fd277deb09f76c8d4c53ad569d02bdb0ab5a4b3b03c0c5659318d9a, anchorQueue.idx=42, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.396] {14516895-14516895 links=1 (14516895)} => 8152fea142e8f382f8c1ee8b68359449d502d08d65c8bc2d31ffd461df3d0068, anchorQueue.idx=85, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.396] {14518429-14518621 links=193 (14518429-14518621)} => ad68ce82062e68ab91662a0a9028ed3daa8b3e657e890b0a01b0fa61ee3a3e78, anchorQueue.idx=115, next retry in 4.343700631s\r\nINFO[06-26|21:06:59.396] {14519965-14520157 links=193 (14519965-14520157)} => 20f82d58efe48c0e958f2e89a5a8a5dca32f357de43cc1aff41ddda2fc84a1b7, anchorQueue.idx=142, next retry in 4.515822967s\r\nINFO[06-26|21:06:59.396] {14521501-14521693 links=193 (14521501-14521693)} => f0c82e429005692152481543f241128cc0cf4f89f1648380cf933b4d1f87d617, anchorQueue.idx=132, next retry in 4.515822967s\r\nINFO[06-26|21:06:59.396] {14523037-14523229 links=193 (14523037-14523229)} => 4583da3167684c96eaa27e7dcfd8f846f135c72375783b2cde8e6cf168635c3b, anchorQueue.idx=102, next retry in 4.573117656s\r\nINFO[06-26|21:06:59.396] {14524573-14524765 links=193 (14524573-14524765)} => e76c66d3d8ed29e2a4b9c5a23f4713ef040ed64dc6ddc0ecd92183d3616ccac5, anchorQueue.idx=182, next retry in 4.65889769s\r\nINFO[06-26|21:06:59.397] {14526109-14526301 links=193 (14526109-14526301)} => cb2a7d2d5d39ad3dc499075e02e61bdbde20872f1c9b527c0eea9d097e704f0c, anchorQueue.idx=146, next retry in 4.716586997s\r\nINFO[06-26|21:06:59.397] {14527645-14527837 links=193 (14527645-14527837)} => 5b67e76a0b5f4fe193a38cf50778e98441a64b46336dcf422e5599b8bb209ae1, anchorQueue.idx=183, next retry in 4.810051964s\r\nINFO[06-26|21:06:59.397] {14529181-14529373 links=193 (14529181-14529373)} => 5b19f375bd66baf084aeee4dd05c0427f6e1bbfa9bd10b94c4368431dea00d9b, anchorQueue.idx=122, next retry in 4.866096149s\r\nINFO[06-26|21:06:59.397] {14530719-14530719 links=1 (14530719)} => 4c42a11cffc8182a38b96b3abb821bdc4d406d62da6fa73502144e2f88a2fb11, anchorQueue.idx=84, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14532255-14532255 links=1 (14532255)} => 7cb4b098b05beb012c4009c7e0bd5145cb6c99a1361b6dc71ff98b30c11ba8f5, anchorQueue.idx=170, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14533791-14533791 links=1 (14533791)} => 194f3b99d3ccb135272f8e39b2d16ece2cd32afaaf57ee943279cf462ca2d269, anchorQueue.idx=79, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14535327-14535327 links=1 (14535327)} => b758a718ee185026c09fc748d78451749f6eeaa5850422d6206c5ca72d70f9bb, anchorQueue.idx=161, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14536863-14536863 links=1 (14536863)} => a89f7586d52e5ca181fa42dd917ca9d0c09b9fb771439da1a7a45ebe07b403b5, anchorQueue.idx=43, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14538399-14538399 links=1 (14538399)} => a46d209ffb73c9a5909196775601ea12a3f164aa1a9040ae3b2f8d98c3f75456, anchorQueue.idx=88, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14539935-14539935 links=1 (14539935)} => 25b1cf11454c42042232d5eeb141dadc25c81f96813b0a9b95f4652f46c4529f, anchorQueue.idx=46, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14541471-14541471 links=1 (14541471)} => bfe5077875d6a7c75f21ad269d4f4df38d1c4244e0ff777dd7324390ccf67871, anchorQueue.idx=93, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14543007-14543007 links=1 (14543007)} => 379b04db92c6a3a3fb4969d829f2f5132e9a98d4198d86c9adb2a80de7f0ebef, anchorQueue.idx=45, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14544543-14544543 links=1 (14544543)} => f2abd71889687ff174f1f050e1e35f77ae643087c7ed74448c0653b68fe31ea3, anchorQueue.idx=92, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14546079-14546079 links=1 (14546079)} => f4bd3f6708eee5e9092c77b5630e7b91f0bc18893cdad0a1e04e218c4ebed3ea, anchorQueue.idx=87, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14547615-14547615 links=1 (14547615)} => 4488c751d34cbe80b05146b8519b4a8a470af3b38c9e34ff45b9c72f67ce892f, anchorQueue.idx=177, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14549151-14549151 links=1 (14549151)} => 8c1146354d8ff5dcb1c2366cdb3012d5eb3b4416abc37da33d818df379207be6, anchorQueue.idx=82, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14550687-14550687 links=1 (14550687)} => a1ae34b13ad966da72db2255dfee780a5b615554576deba7098a4bbb985db29e, anchorQueue.idx=166, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14552223-14552223 links=1 (14552223)} => fd566bca645b0f36fa6cfd910968b22e64957511a3e9953716a70697463c5845, anchorQueue.idx=65, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14553759-14553759 links=1 (14553759)} => 63ffe258125b0524a6b93f1aebb655da19d2169066716b44b9304e751f3f68b3, anchorQueue.idx=133, next retry in 4.22559675s\r\nINFO[06-26|21:06:59.397] {14554718-14555295 links=578 (14554718-14555295)} => ae60158500974b5655f0c90fd74d114d00d62623adaf7768806d9f8ea97b6e74, anchorQueue.idx=36, next retry in 935.325439ms\r\n```\r\n</details>\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166656983/reactions",
      "total_count": 3,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1171901015",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4540#issuecomment-1171901015",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
    "id": 1171901015,
    "node_id": "IC_kwDOC0FsAM5F2cpX",
    "user": {
      "login": "lcgogo",
      "id": 8175573,
      "node_id": "MDQ6VXNlcjgxNzU1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8175573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lcgogo",
      "html_url": "https://github.com/lcgogo",
      "followers_url": "https://api.github.com/users/lcgogo/followers",
      "following_url": "https://api.github.com/users/lcgogo/following{/other_user}",
      "gists_url": "https://api.github.com/users/lcgogo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lcgogo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lcgogo/subscriptions",
      "organizations_url": "https://api.github.com/users/lcgogo/orgs",
      "repos_url": "https://api.github.com/users/lcgogo/repos",
      "events_url": "https://api.github.com/users/lcgogo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lcgogo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-01T03:48:45Z",
    "updated_at": "2022-07-01T03:48:45Z",
    "author_association": "NONE",
    "body": "> May be I'm confused but I'm not able to rebuild my Erigon 2 node to be `Archive` node again. I've the `snapshots` folder but every time it starts syncing from last snapshot.\r\n> \r\n> RPC Methods that targets historical state or WatchTheBurn don't work anymore.\r\n> \r\n> The older `Alpha` releases was simply skipping the `download` stages (because the data is available in snapshot files) and then start the insertion and execution from block 0.\r\n> \r\n> Flags like `--snapshot false` and `--syncmode archive` are completely ignored.\r\n\r\n\r\n\r\n> ```shell\r\n> INFO[06-26|20:59:57.770] Using snapshots                          on=true\r\n> ```\r\n\r\nYour log shows:\r\nINFO[06-26|20:59:57.770] Using snapshots                          on=true\r\n\r\nBelow is my startup options \r\n```shell\r\nerigon --datadir=\"/data/eth-erigon\" --http.addr=\"0.0.0.0\" --http.corsdomain=\"*\" --http.compression --http.vhosts=\"*\" --http.api=\"eth,net,web3,debug\" --snapshots=false\r\n```\r\n\r\nand my log shows\r\n```shell\r\n[INFO] [07-01|03:36:39.429] Using snapshots                          on=false\r\n[INFO] [07-01|03:36:39.430] Effective                                prune_flags= snapshot_flags=\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1171901015/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1171923575",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4540#issuecomment-1171923575",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
    "id": 1171923575,
    "node_id": "IC_kwDOC0FsAM5F2iJ3",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-01T04:31:18Z",
    "updated_at": "2022-07-01T04:31:18Z",
    "author_association": "COLLABORATOR",
    "body": "FYI: can't change --snapshots flag value after node creation",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1171923575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1236349941",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4540#issuecomment-1236349941",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4540",
    "id": 1236349941,
    "node_id": "IC_kwDOC0FsAM5JsTP1",
    "user": {
      "login": "ytrezq",
      "id": 3824869,
      "node_id": "MDQ6VXNlcjM4MjQ4Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3824869?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ytrezq",
      "html_url": "https://github.com/ytrezq",
      "followers_url": "https://api.github.com/users/ytrezq/followers",
      "following_url": "https://api.github.com/users/ytrezq/following{/other_user}",
      "gists_url": "https://api.github.com/users/ytrezq/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ytrezq/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ytrezq/subscriptions",
      "organizations_url": "https://api.github.com/users/ytrezq/orgs",
      "repos_url": "https://api.github.com/users/ytrezq/repos",
      "events_url": "https://api.github.com/users/ytrezq/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ytrezq/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-04T14:09:58Z",
    "updated_at": "2022-09-04T14:09:58Z",
    "author_association": "NONE",
    "body": "@Texnomic hi, sorry but, I m unable to succeed at building Erigon2. May you share your binary please.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1236349941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

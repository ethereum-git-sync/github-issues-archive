{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/9170",
  "id": 2071532463,
  "node_id": "I_kwDOC0FsAM57eROv",
  "number": 9170,
  "title": "[Erigon 2.56.0] Caplin restarts DownloadHistoricalBlocks and doesnt save state",
  "user": {
    "login": "AndrewMohawk",
    "id": 1465995,
    "node_id": "MDQ6VXNlcjE0NjU5OTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1465995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndrewMohawk",
    "html_url": "https://github.com/AndrewMohawk",
    "followers_url": "https://api.github.com/users/AndrewMohawk/followers",
    "following_url": "https://api.github.com/users/AndrewMohawk/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndrewMohawk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndrewMohawk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndrewMohawk/subscriptions",
    "organizations_url": "https://api.github.com/users/AndrewMohawk/orgs",
    "repos_url": "https://api.github.com/users/AndrewMohawk/repos",
    "events_url": "https://api.github.com/users/AndrewMohawk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndrewMohawk/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 6340819067,
      "node_id": "LA_kwDOC0FsAM8AAAABefE4ew",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/caplin",
      "name": "caplin",
      "color": "6391B7",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2024-01-09T02:47:08Z",
  "updated_at": "2024-01-24T04:12:24Z",
  "closed_at": "2024-01-19T13:07:02Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `./erigon --version`\r\n\r\nOS & Version: Ubuntu server 20.04\r\n\r\nCommit hash: \r\n\r\nErigon Command (with flags/config):  https://github.com/ledgerwatch/erigon/issues/9046#issuecomment-1874304946\r\nCurrent docker-compose:\r\n```\r\n# Connections: erigon -> (sentries, downloader), rpcdaemon -> (erigon, txpool), txpool -> erigon\r\nversion: '2.2'\r\n\r\n# Basic erigon's service\r\nx-erigon-service: &default-erigon-service\r\n  image: thorax/erigon:${TAG:-latest}\r\n  pid: service:erigon # Use erigon's PID namespace. It's required to open Erigon's DB from another process (RPCDaemon local-mode)\r\n  volumes_from: [ erigon ]\r\n  restart: unless-stopped\r\n  mem_swappiness: 0\r\n  user: 1000:1000\r\nservices:\r\n  erigon:\r\n    image: thorax/erigon:${TAG:-latest}\r\n    build:\r\n      args:\r\n        UID: 1000\r\n        GID: 1000\r\n      context: .\r\n    command: |\r\n      --private.api.addr=0.0.0.0:9090 --internalcl\r\n      --sentry.api.addr=sentry:9091 --downloader.api.addr=downloader:9093 --txpool.disable\r\n      --metrics --metrics.addr=0.0.0.0 --metrics.port=6060 --pprof --pprof.addr=0.0.0.0 --pprof.port=6061\r\n      --nat \"extip:<mylocalip>\"\r\n      --authrpc.jwtsecret=/home/erigon/.local/share/erigon/jwt.hex --datadir=/home/erigon/.local/share/erigon\r\n      --http.api \"eth,erigon,ots,web3,net,debug,trace,txpool\"\r\n      --verbosity 4\r\n    ports: [ \"4000:4000/udp\", \"6060:6060\",\"6061:6061\",\"9090:9090\",\"7777:7777\",\"4001:4001\",\"8551:8551\",\"40517:40517\"]\r\n\r\n    volumes:\r\n      # It's ok to mount sub-dirs of \"datadir\" to different drives\r\n      - \"/mnt/nvme/erigon-data/:/home/erigon/.local/share/erigon\"\r\n    restart: unless-stopped\r\n    mem_swappiness: 0\r\n    user: 1000:1000\r\n\r\n  sentry:\r\n    <<: *default-erigon-service\r\n    entrypoint: sentry\r\n    command: --sentry.api.addr=0.0.0.0:9091 --datadir=/home/erigon/.local/share/erigon\r\n    ports: [ \"30303:30303/tcp\", \"30303:30303/udp\",\"30304:30304/tcp\", \"30304:30304/udp\", \"9091:9091\" ]\r\n\r\n  downloader:\r\n    <<: *default-erigon-service\r\n    entrypoint: downloader\r\n    command: --downloader.api.addr=0.0.0.0:9093 --datadir=/home/erigon/.local/share/erigon  --torrent.download.rate=5000mb  --torrent.maxpeers 300 --verbosity 4 --torrent.verbosity=4 --torrent.port 42069\r\n    ports: [ \"42069:42069/tcp\", \"42069:42069/udp\", \"9093:9093\"  ]\r\n\r\n\r\n  txpool:\r\n    <<: *default-erigon-service\r\n    entrypoint: txpool\r\n    command: --private.api.addr=erigon:9090 --txpool.api.addr=0.0.0.0:9094 --sentry.api.addr=sentry:9091 --datadir=/home/erigon/.local/share/erigon\r\n    ports: [ \"9094:9094\"  ]\r\n\r\n  rpcdaemon:\r\n    <<: *default-erigon-service\r\n    entrypoint: rpcdaemon\r\n    command: |\r\n      --http.addr=0.0.0.0 --http.vhosts=any --http.corsdomain=* --ws\r\n      --private.api.addr=erigon:9090 --txpool.api.addr=txpool:9094 --datadir=/home/erigon/.local/share/erigon\r\n    ports: [ \"8545:8545\" ]\r\n\r\n\r\n\r\n\r\n  prometheus:\r\n    image: prom/prometheus:v2.47.2\r\n    user: 1000:1000 # Uses erigon user from Dockerfile\r\n    command: --log.level=warn --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/prometheus --storage.tsdb.retention.time=150d --web.console.libraries=/usr/share/prometheus/console_libraries --web.console.templates=/usr/share/prometheus/consoles\r\n\r\n    volumes:\r\n      - \"/mnt/nvme/erigon-data/cmd/prometheus/prometheus.yml:/etc/prometheus/prometheus.yml\"\r\n      - \"/mnt/nvme/erigon-data/erigon-prometheus:/prometheus\"\r\n    restart: unless-stopped\r\n\r\n  grafana:\r\n    image: grafana/grafana:10.2.1\r\n    user: \"472:0\" # required for grafana version >= 7.3\r\n    ports: [ \"3000:3000\" ]\r\n    volumes:\r\n      - \"/mnt/nvme/erigon-data/cmd/prometheus/grafana.ini:/etc/grafana/grafana.ini\"\r\n      - \"/mnt/nvme/erigon-data/cmd/prometheus/datasources:/etc/grafana/provisioning/datasources\"\r\n      - \"/mnt/nvme/erigon-data/cmd/prometheus/dashboards:/etc/grafana/provisioning/dashboards\"\r\n      - \"/mnt/nvme/erigon-data/erigon-grafana:/var/lib/grafana\"\r\n    restart: unless-stopped\r\n```\r\nConsensus Layer: --internalcl\r\n\r\nConsensus Layer Command (with flags/config):\r\n\r\nChain/Network: mainnet\r\n\r\n#### Expected behaviour\r\nCaplin saves state for DownloadHistoricalBlocks stage\r\n\r\n\r\n#### Actual behaviour\r\nDuring the \"DownloadHistoricalBlocks\" stage if caplin is interrupted, restarting the service will start again even after multiple days :'( \r\n\r\n#### Steps to reproduce the behaviour\r\nStop erigon\r\nRestart\r\n\r\n#### Backtrace\r\n\r\n````\r\n[INFO] [01-09|02:26:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8041963 blockNumber=18847942 blk/sec=22.6 mbps/sec=4.8600 peers=6 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:27:13.056] P2P                                      app=caplin peers=6\r\n[INFO] [01-09|02:27:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8041317 blockNumber=18847300 blk/sec=21.5 mbps/sec=4.3568 peers=4 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:27:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8040651 blockNumber=18846644 blk/sec=22.2 mbps/sec=4.2335 peers=6 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:28:13.055] P2P                                      app=caplin peers=5\r\n[INFO] [01-09|02:28:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8039787 blockNumber=18845792 blk/sec=28.8 mbps/sec=5.4138 peers=4 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:28:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8038763 blockNumber=18844775 blk/sec=34.1 mbps/sec=6.3248 peers=8 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:29:13.055] P2P                                      app=caplin peers=5\r\n[INFO] [01-09|02:29:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8037771 blockNumber=18843794 blk/sec=33.1 mbps/sec=5.7389 peers=9 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:29:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8036971 blockNumber=18843000 blk/sec=26.7 mbps/sec=4.8400 peers=7 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:30:13.055] P2P                                      app=caplin peers=3\r\n[INFO] [01-09|02:30:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8035916 blockNumber=18841957 blk/sec=35.2 mbps/sec=6.7064 peers=7 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:30:51.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8034700 blockNumber=18840751 blk/sec=40.5 mbps/sec=8.1204 peers=6 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:31:13.056] P2P                                      app=caplin peers=2\r\n[INFO] [01-09|02:31:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8033825 blockNumber=18839885 blk/sec=29.2 mbps/sec=5.9488 peers=9 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:31:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8033100 blockNumber=18839167 blk/sec=24.2 mbps/sec=4.6647 peers=4 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:32:13.056] P2P                                      app=caplin peers=10\r\n[INFO] [01-09|02:32:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8032364 blockNumber=18838438 blk/sec=24.5 mbps/sec=4.3391 peers=6 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:32:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8032012 blockNumber=18838089 blk/sec=11.7 mbps/sec=1.9874 peers=3 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:33:13.056] P2P                                      app=caplin peers=5\r\n[INFO] [01-09|02:33:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8031244 blockNumber=18837326 blk/sec=25.6 mbps/sec=4.2630 peers=4 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:33:51.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8030508 blockNumber=18836594 blk/sec=24.5 mbps/sec=4.1443 peers=3 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:34:13.055] P2P                                      app=caplin peers=5\r\n[INFO] [01-09|02:34:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8029356 blockNumber=18835449 blk/sec=38.4 mbps/sec=6.4211 peers=6 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:34:51.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8027980 blockNumber=18834082 blk/sec=45.9 mbps/sec=8.4402 peers=5 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:35:13.056] P2P                                      app=caplin peers=2\r\n[INFO] [01-09|02:35:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8027597 blockNumber=18833701 blk/sec=12.8 mbps/sec=2.3753 peers=2 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:35:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8027117 blockNumber=18833228 blk/sec=16.0 mbps/sec=3.0002 peers=5 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:36:13.056] P2P                                      app=caplin peers=5\r\n[INFO] [01-09|02:36:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8026925 blockNumber=18833040 blk/sec=6.4 mbps/sec=1.2206 peers=5 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:36:51.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8026797 blockNumber=18832915 blk/sec=4.3 mbps/sec=0.7744 peers=2 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:37:13.056] P2P                                      app=caplin peers=4\r\n[INFO] [01-09|02:37:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8026669 blockNumber=18832789 blk/sec=4.3 mbps/sec=0.7820 peers=5 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:37:51.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8026249 blockNumber=18832370 blk/sec=14.0 mbps/sec=2.6405 peers=9 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:38:13.055] P2P                                      app=caplin peers=9\r\n[INFO] [01-09|02:38:21.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8025054 blockNumber=18831188 blk/sec=39.8 mbps/sec=6.7539 peers=9 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:38:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8024229 blockNumber=18830372 blk/sec=27.5 mbps/sec=6.3786 peers=3 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:39:13.055] P2P                                      app=caplin peers=3\r\n[INFO] [01-09|02:39:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8022831 blockNumber=18828991 blk/sec=46.6 mbps/sec=10.9799 peers=3 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:39:51.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8022319 blockNumber=18828487 blk/sec=17.1 mbps/sec=2.9919 peers=5 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:40:13.055] P2P                                      app=caplin peers=9\r\n[INFO] [01-09|02:40:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8021775 blockNumber=18827951 blk/sec=18.1 mbps/sec=3.3315 peers=3 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:40:51.931] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8021551 blockNumber=18827727 blk/sec=7.5 mbps/sec=1.3844 peers=3 snapshots=0 reconnected=false\r\n[INFO] [01-09|02:41:13.055] P2P                                      app=caplin peers=9\r\n[INFO] [01-09|02:41:21.932] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=8020847 blockNumber=18827029 blk/sec=23.5 mbps/sec=4.3340 peers=5 snapshots=0 reconnected=false\r\n\r\n````\r\n\r\nSystem is Xeon Gold 6138 20C/40T\r\n196 gb DDR4 2666\r\nWD_BLACK 4TB SN850X NVMe Internal Gaming SSD Solid State Drive - Gen4 PCIe, M.2 2280\r\nUbuntu server 20.04 LTS",
  "closed_by": {
    "login": "Giulio2002",
    "id": 29233688,
    "node_id": "MDQ6VXNlcjI5MjMzNjg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/29233688?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Giulio2002",
    "html_url": "https://github.com/Giulio2002",
    "followers_url": "https://api.github.com/users/Giulio2002/followers",
    "following_url": "https://api.github.com/users/Giulio2002/following{/other_user}",
    "gists_url": "https://api.github.com/users/Giulio2002/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Giulio2002/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Giulio2002/subscriptions",
    "organizations_url": "https://api.github.com/users/Giulio2002/orgs",
    "repos_url": "https://api.github.com/users/Giulio2002/repos",
    "events_url": "https://api.github.com/users/Giulio2002/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Giulio2002/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1885168493",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9170#issuecomment-1885168493",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170",
    "id": 1885168493,
    "node_id": "IC_kwDOC0FsAM5wXWNt",
    "user": {
      "login": "Giulio2002",
      "id": 29233688,
      "node_id": "MDQ6VXNlcjI5MjMzNjg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29233688?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Giulio2002",
      "html_url": "https://github.com/Giulio2002",
      "followers_url": "https://api.github.com/users/Giulio2002/followers",
      "following_url": "https://api.github.com/users/Giulio2002/following{/other_user}",
      "gists_url": "https://api.github.com/users/Giulio2002/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Giulio2002/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Giulio2002/subscriptions",
      "organizations_url": "https://api.github.com/users/Giulio2002/orgs",
      "repos_url": "https://api.github.com/users/Giulio2002/repos",
      "events_url": "https://api.github.com/users/Giulio2002/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Giulio2002/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-10T16:18:09Z",
    "updated_at": "2024-01-10T16:18:20Z",
    "author_association": "COLLABORATOR",
    "body": "I think I have an easssyyyy solution for this, thanks for the report :)",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1885168493/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 2,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1895039722",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9170#issuecomment-1895039722",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170",
    "id": 1895039722,
    "node_id": "IC_kwDOC0FsAM5w9ALq",
    "user": {
      "login": "AndrewMohawk",
      "id": 1465995,
      "node_id": "MDQ6VXNlcjE0NjU5OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1465995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndrewMohawk",
      "html_url": "https://github.com/AndrewMohawk",
      "followers_url": "https://api.github.com/users/AndrewMohawk/followers",
      "following_url": "https://api.github.com/users/AndrewMohawk/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndrewMohawk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndrewMohawk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndrewMohawk/subscriptions",
      "organizations_url": "https://api.github.com/users/AndrewMohawk/orgs",
      "repos_url": "https://api.github.com/users/AndrewMohawk/repos",
      "events_url": "https://api.github.com/users/AndrewMohawk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndrewMohawk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-17T06:30:48Z",
    "updated_at": "2024-01-17T06:30:48Z",
    "author_association": "NONE",
    "body": "@Giulio2002 any idea of what I could do for now, I'm currently syncing these very slowly and worried something might happen and it will have to start all over again ;_; \r\n\r\n```\r\n[INFO] [01-17|06:26:50.589] P2P                                      app=caplin peers=30\r\n[INFO] [01-17|06:27:29.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6346678 blockNumber=17169277 blk/sec=1.1 mbps/sec=0.1136 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-17|06:27:50.589] P2P                                      app=caplin peers=27\r\n[INFO] [01-17|06:27:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6346678 blockNumber=17169277 blk/sec=0.0 mbps/sec=0.0000 peers=32 snapshots=0 reconnected=false\r\n[INFO] [01-17|06:28:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6346678 blockNumber=17169277 blk/sec=0.0 mbps/sec=0.0000 peers=40 snapshots=0 reconnected=false\r\n[INFO] [01-17|06:28:50.597] P2P                                      app=caplin peers=31\r\n[INFO] [01-17|06:28:59.028] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6346678 blockNumber=17169277 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1895039722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1899287354",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9170#issuecomment-1899287354",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170",
    "id": 1899287354,
    "node_id": "IC_kwDOC0FsAM5xNNM6",
    "user": {
      "login": "benjamindamm",
      "id": 6748924,
      "node_id": "MDQ6VXNlcjY3NDg5MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6748924?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benjamindamm",
      "html_url": "https://github.com/benjamindamm",
      "followers_url": "https://api.github.com/users/benjamindamm/followers",
      "following_url": "https://api.github.com/users/benjamindamm/following{/other_user}",
      "gists_url": "https://api.github.com/users/benjamindamm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benjamindamm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benjamindamm/subscriptions",
      "organizations_url": "https://api.github.com/users/benjamindamm/orgs",
      "repos_url": "https://api.github.com/users/benjamindamm/repos",
      "events_url": "https://api.github.com/users/benjamindamm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benjamindamm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-18T21:57:38Z",
    "updated_at": "2024-01-18T21:57:38Z",
    "author_association": "NONE",
    "body": "Same issue I am experiencing. No solution so far? Seems like there are no peers for the latest data.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1899287354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1900398360",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9170#issuecomment-1900398360",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170",
    "id": 1900398360,
    "node_id": "IC_kwDOC0FsAM5xRccY",
    "user": {
      "login": "Giulio2002",
      "id": 29233688,
      "node_id": "MDQ6VXNlcjI5MjMzNjg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/29233688?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Giulio2002",
      "html_url": "https://github.com/Giulio2002",
      "followers_url": "https://api.github.com/users/Giulio2002/followers",
      "following_url": "https://api.github.com/users/Giulio2002/following{/other_user}",
      "gists_url": "https://api.github.com/users/Giulio2002/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Giulio2002/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Giulio2002/subscriptions",
      "organizations_url": "https://api.github.com/users/Giulio2002/orgs",
      "repos_url": "https://api.github.com/users/Giulio2002/repos",
      "events_url": "https://api.github.com/users/Giulio2002/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Giulio2002/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-19T13:07:02Z",
    "updated_at": "2024-01-19T13:07:02Z",
    "author_association": "COLLABORATOR",
    "body": "It does remember it now, the no peer issue fix will be on the next release",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1900398360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1907345919",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/9170#issuecomment-1907345919",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/9170",
    "id": 1907345919,
    "node_id": "IC_kwDOC0FsAM5xr8n_",
    "user": {
      "login": "AndrewMohawk",
      "id": 1465995,
      "node_id": "MDQ6VXNlcjE0NjU5OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1465995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndrewMohawk",
      "html_url": "https://github.com/AndrewMohawk",
      "followers_url": "https://api.github.com/users/AndrewMohawk/followers",
      "following_url": "https://api.github.com/users/AndrewMohawk/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndrewMohawk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndrewMohawk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndrewMohawk/subscriptions",
      "organizations_url": "https://api.github.com/users/AndrewMohawk/orgs",
      "repos_url": "https://api.github.com/users/AndrewMohawk/repos",
      "events_url": "https://api.github.com/users/AndrewMohawk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndrewMohawk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-24T04:10:41Z",
    "updated_at": "2024-01-24T04:12:24Z",
    "author_association": "NONE",
    "body": "@Giulio2002 do you have any idea how long this will take? Mine has been on this one stage for 10 days, what does it need to get to to be completed? Is there a way I can save the state right now and then upgrade erigon and then restart from here?\r\n\r\n```\r\n[INFO] [01-24|03:41:50.589] P2P                                      app=caplin peers=26\r\n[INFO] [01-24|03:41:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=1.1 mbps/sec=0.1317 peers=26 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:42:29.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=29 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:42:50.591] P2P                                      app=caplin peers=27\r\n[INFO] [01-24|03:42:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:43:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=26 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:43:50.589] P2P                                      app=caplin peers=26\r\n[INFO] [01-24|03:43:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:44:29.028] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=24 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:44:50.589] P2P                                      app=caplin peers=25\r\n[INFO] [01-24|03:44:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=25 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:45:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=26 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:45:50.590] P2P                                      app=caplin peers=28\r\n[INFO] [01-24|03:45:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:46:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:46:50.589] P2P                                      app=caplin peers=26\r\n[INFO] [01-24|03:46:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:47:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=26 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:47:50.589] P2P                                      app=caplin peers=30\r\n[INFO] [01-24|03:47:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=25 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:48:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=25 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:48:50.589] P2P                                      app=caplin peers=27\r\n[INFO] [01-24|03:48:59.028] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:49:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:49:50.589] P2P                                      app=caplin peers=29\r\n[INFO] [01-24|03:49:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=29 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:50:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:50:50.590] P2P                                      app=caplin peers=30\r\n[INFO] [01-24|03:50:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=30 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:51:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:51:50.590] P2P                                      app=caplin peers=30\r\n[INFO] [01-24|03:51:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=30 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:52:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=35 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:52:50.590] P2P                                      app=caplin peers=37\r\n[INFO] [01-24|03:52:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:53:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:53:50.589] P2P                                      app=caplin peers=30\r\n[INFO] [01-24|03:53:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:54:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=29 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:54:50.600] P2P                                      app=caplin peers=32\r\n[INFO] [01-24|03:54:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=31 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:55:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:55:50.589] P2P                                      app=caplin peers=26\r\n[INFO] [01-24|03:55:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:56:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=29 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:56:50.589] P2P                                      app=caplin peers=29\r\n[INFO] [01-24|03:56:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:57:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:57:50.589] P2P                                      app=caplin peers=26\r\n[INFO] [01-24|03:57:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:58:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=22 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:58:50.590] P2P                                      app=caplin peers=22\r\n[INFO] [01-24|03:58:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=24 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:59:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=24 snapshots=0 reconnected=false\r\n[INFO] [01-24|03:59:50.589] P2P                                      app=caplin peers=33\r\n[INFO] [01-24|03:59:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=24 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:00:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:00:50.590] P2P                                      app=caplin peers=27\r\n[INFO] [01-24|04:00:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:01:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:01:50.589] P2P                                      app=caplin peers=28\r\n[INFO] [01-24|04:01:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=30 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:02:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=27 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:02:50.589] P2P                                      app=caplin peers=27\r\n[INFO] [01-24|04:02:59.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=28 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:03:29.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=26 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:03:50.589] P2P                                      app=caplin peers=24\r\n[INFO] [01-24|04:03:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=25 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:04:29.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=25 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:04:50.589] P2P                                      app=caplin peers=21\r\n[INFO] [01-24|04:04:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=22 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:05:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=22 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:05:50.590] P2P                                      app=caplin peers=22\r\n[INFO] [01-24|04:05:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=21 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:06:29.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294727 blockNumber=17117917 blk/sec=0.0 mbps/sec=0.0000 peers=19 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:06:50.590] P2P                                      app=caplin peers=19\r\n[INFO] [01-24|04:06:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294695 blockNumber=17117885 blk/sec=1.1 mbps/sec=0.1415 peers=20 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:07:29.027] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294695 blockNumber=17117885 blk/sec=0.0 mbps/sec=0.0000 peers=21 snapshots=0 reconnected=false\r\n[INFO] [01-24|04:07:50.590] P2P                                      app=caplin peers=32\r\n[INFO] [01-24|04:07:59.026] Downloading History                      app=caplin stage=DownloadHistoricalBlocks slot=6294695 blockNumber=17117885 blk/sec=0.0 mbps/sec=0.0000 peers=22 snapshots=0 reconnected=false\r\n```\r\n\r\nEth syncing returns false and blocknumber hasnt moved in week and a half or so :( \r\n```\r\n» curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[],\"id\":1}' http://<rpc>:8545                                                                 \r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x1173c5f\"}\r\n\r\n» curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_syncing\",\"params\":[],\"id\":1}' http://<rpc>:8545\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":false}\r\n```\r\n\r\nSystem is Xeon Gold 6138 20C/40T\r\n196 gb DDR4 2666\r\nWD_BLACK 4TB SN850X NVMe Internal Gaming SSD Solid State Drive - Gen4 PCIe, M.2 2280\r\nUbuntu server 20.04 LTS",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1907345919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

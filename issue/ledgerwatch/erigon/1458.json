{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/1458",
  "id": 795382161,
  "node_id": "MDU6SXNzdWU3OTUzODIxNjE=",
  "number": 1458,
  "title": "RPCDaemon Out of Memory Error",
  "user": {
    "login": "relyt29",
    "id": 4326714,
    "node_id": "MDQ6VXNlcjQzMjY3MTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4326714?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/relyt29",
    "html_url": "https://github.com/relyt29",
    "followers_url": "https://api.github.com/users/relyt29/followers",
    "following_url": "https://api.github.com/users/relyt29/following{/other_user}",
    "gists_url": "https://api.github.com/users/relyt29/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/relyt29/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/relyt29/subscriptions",
    "organizations_url": "https://api.github.com/users/relyt29/orgs",
    "repos_url": "https://api.github.com/users/relyt29/repos",
    "events_url": "https://api.github.com/users/relyt29/events{/privacy}",
    "received_events_url": "https://api.github.com/users/relyt29/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2021-01-27T19:29:42Z",
  "updated_at": "2021-05-06T17:38:06Z",
  "closed_at": "2021-05-06T17:38:06Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nTurbogeth version: `tg version 2021.01.2-alpha` commit \r\nOS & Version: Debian GNU/Linux 10 (buster)\r\nCommit hash : 58c4e038613e895768409467cdab7eff4dc802a9\r\n\r\n#### Expected behaviour\r\nRpcdaemon probably should not try to use 2234 GB of virtual memory lol\r\n\r\n#### Actual behaviour\r\nRPCDaemon is killed by the OOM manager on Linux\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\n./tg running in anothe terminal, tmux pane etc\r\n\r\n./rpcdaemon --chaindata /path/to/turbogeth/datadir/tg/chaindata --http.api=eth,debug,net --http.addr=\"127.0.0.1\" --http.port=8646 --http.vhosts=\"*\" --http.corsdomain=\"*\"\r\n\r\nopen another terminal, tmux pane etc\r\n\r\ncurl -X POST  -H 'Content-Type: application/json' --data '{\"jsonrpc\":\"2.0\",\"method\":\"debug_traceTransaction\",\"params\":[\"0xd80a10106f2a8fb76cf6db6b9f7a64f08257b4952c94c888e1ac41ceb80733c9\"],\"id\":1}' \"http://127.0.0.1:8646\"\r\n```\r\n\r\n#### Backtrace\r\n\r\n\r\n\r\n````\r\npretty easy to reproduce, let me know if you really need a backtrace from me\r\n````\r\n\r\n\r\n#### OOM Killer output in Dmesg\r\n\r\n```\r\n[Wed Jan 27 19:26:46 2021] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=1048576kB                          \r\n[Wed Jan 27 19:26:46 2021] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB                             \r\n[Wed Jan 27 19:26:46 2021] 3281 total pagecache pages                                                                                   \r\n[Wed Jan 27 19:26:46 2021] 586 pages in swap cache                                                                                      \r\n[Wed Jan 27 19:26:46 2021] Swap cache stats: add 32727081, delete 32744125, find 783569039/785482007                                    \r\n[Wed Jan 27 19:26:46 2021] Free swap  = 4kB                                                                                             \r\n[Wed Jan 27 19:26:46 2021] Total swap = 33520636kB                                                                                      \r\n[Wed Jan 27 19:26:46 2021] 16753828 pages RAM                                                                                           \r\n[Wed Jan 27 19:26:46 2021] 0 pages HighMem/MovableOnly                                                                                  \r\n[Wed Jan 27 19:26:46 2021] 284482 pages reserved                                                                                        \r\n[Wed Jan 27 19:26:46 2021] 0 pages hwpoisoned                                                                                           \r\n[Wed Jan 27 19:26:46 2021] Tasks state (memory values in pages):                                                                        \r\n[Wed Jan 27 19:26:46 2021] [  pid  ]   uid  tgid total_vm      rss pgtables_bytes swapents oom_score_adj name                           \r\n[Wed Jan 27 19:26:46 2021] [    441]     0   441    21749        0   167936      319             0 systemd-journal                      \r\n... redacted for privacy and brevity\r\n[Wed Jan 27 19:26:46 2021] [  22318]  1000 22318 539467873   348959 2110885888   235305             0 tg\r\n...   \r\n[Wed Jan 27 19:56:39 2021] [  30572]  1000 30572 558542091 13423083 186310656  7681362             0 rpcdaemon\r\n\r\n[Wed Jan 27 19:56:39 2021] Out of memory: Kill process 30572 (rpcdaemon) score 851 or sacrifice child                                   \r\n[Wed Jan 27 19:56:39 2021] Killed process 30572 (rpcdaemon) total-vm:2234168364kB, anon-rss:53692332kB, file-rss:0kB, shmem-rss:0kB \r\n```\r\nI think this is separate from https://github.com/ledgerwatch/turbo-geth/issues/1119  \r\n\r\n\r\n\r\nI had @MysticRyuujin repro the bug on his machine and he can confirm it is a bug as well:\r\n```\r\nfwiw I have logging enabled at debug on the rpcdaemon and I didn't get any crash\r\nIt crashed\r\nbut it produced no logs\r\n```",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/768524908",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-768524908",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 768524908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODUyNDkwOA==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-27T19:33:27Z",
    "updated_at": "2021-01-27T19:33:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "This debug also kills Geth with the same behavior. There are no logs, just straight killed :smile: ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/768524908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/768551168",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-768551168",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 768551168,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2ODU1MTE2OA==",
    "user": {
      "login": "Haaroon",
      "id": 7131194,
      "node_id": "MDQ6VXNlcjcxMzExOTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7131194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Haaroon",
      "html_url": "https://github.com/Haaroon",
      "followers_url": "https://api.github.com/users/Haaroon/followers",
      "following_url": "https://api.github.com/users/Haaroon/following{/other_user}",
      "gists_url": "https://api.github.com/users/Haaroon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Haaroon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Haaroon/subscriptions",
      "organizations_url": "https://api.github.com/users/Haaroon/orgs",
      "repos_url": "https://api.github.com/users/Haaroon/repos",
      "events_url": "https://api.github.com/users/Haaroon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Haaroon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-27T20:19:17Z",
    "updated_at": "2021-01-27T20:19:17Z",
    "author_association": "NONE",
    "body": "I concur with tyler that this tx indeed causes a crash",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/768551168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/769827301",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-769827301",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 769827301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc2OTgyNzMwMQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-29T14:10:29Z",
    "updated_at": "2021-01-29T14:10:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Got you, thank you for reporting, will try to figure out what is going on",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/769827301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/772828750",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-772828750",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 772828750,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MjgyODc1MA==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-03T21:15:39Z",
    "updated_at": "2021-02-03T21:15:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "It doesn't sound like the Geth team will fix this. Their answer is don't expose the debug. 🤷‍♂️ \r\n\r\nNethermind won't fix the 2GB limit on their end, just say \"disable memory dump\" lol",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/772828750/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/773529145",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-773529145",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 773529145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MzUyOTE0NQ==",
    "user": {
      "login": "relyt29",
      "id": 4326714,
      "node_id": "MDQ6VXNlcjQzMjY3MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4326714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/relyt29",
      "html_url": "https://github.com/relyt29",
      "followers_url": "https://api.github.com/users/relyt29/followers",
      "following_url": "https://api.github.com/users/relyt29/following{/other_user}",
      "gists_url": "https://api.github.com/users/relyt29/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/relyt29/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/relyt29/subscriptions",
      "organizations_url": "https://api.github.com/users/relyt29/orgs",
      "repos_url": "https://api.github.com/users/relyt29/repos",
      "events_url": "https://api.github.com/users/relyt29/events{/privacy}",
      "received_events_url": "https://api.github.com/users/relyt29/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-04T18:51:52Z",
    "updated_at": "2021-02-04T18:51:52Z",
    "author_association": "NONE",
    "body": "well so in https://github.com/ethereum/go-ethereum/issues/22244#issuecomment-772804809 @holiman suggests that `debug_standardTracetransaction` is an option for complex VM traces (granted, if you have filesystem support) I am not familiar with that specific call, but an attempt to call it on turbo-geth fails:\r\n\r\n```\r\n(venv) user@Debian-101-buster-64-minimal:~/folder$ cat tester.sh\r\ncurl -X POST  -H 'Content-Type: application/json' --data '{\"jsonrpc\":\"2.0\",\"method\":\"debug_standardTracetransaction\",\"params\":[\"0xa009fb5190b8dd3c14ecf33c9f081d02e62fd8d81399e679b86c4701aede0b42\"],\"id\":1}' \"http://127.0.0.1:8646\"                         \r\n(venv) user@Debian-101-buster-64-minimal:~/folder$ bash tester.sh\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"error\":{\"code\":-32601,\"message\":\"the method debug_standardTracetransaction does not exist/is not available\"}}  \r\n```\r\n\r\n\r\nI found a number more of these crashing transactions just in the process of the work I was doing, e.g.\r\n```\r\n\"skip_list\": [\"0xf70ba0055e36842991735d92990d6a3cd3a312604848310b755d31d6ccc8a9b5\", \"0xd80a10106f2a8fb76cf6db6b9f7a64f08257b4952c94c888e1ac41ceb80733c9\", \"0x98db24ba4df916ef3b1f152bf32bd885277c80c1bf70923906a902e0d68ea6be\",\r\n\"0xc8223b985ac63c69cfe1bdf70a61707e0e5ffa37534fc3582b6059fe5cc46253\", \"0xcc9602725fea678892c7a6b65dedac9e29b64c39679553b992fd3891f6334abf\"]\r\n```\r\n\r\n\r\nGiven that the average turbo-geth user is going to be wanting to use turbogeth probably for archive node purposes, maybe analysis of some kind, I think it probably makes sense to expose at least some API like the geth developers are doing that allows you to get at the VM traces for these complex transactions, especially since these more complex transactions are likely the most interesting ones to look at for analysis",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/773529145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/776891981",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-776891981",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 776891981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3Njg5MTk4MQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T17:46:08Z",
    "updated_at": "2021-02-10T17:46:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "As one may suspect, the issue is that this transaction has a very large trace, and internal representation of such traces is probably quite inefficient. This was captured while the processing was still on-going.\r\n![image](https://user-images.githubusercontent.com/13686139/107549522-d5872580-6bc7-11eb-91ef-7bc28522d8c7.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/776891981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/776957373",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-776957373",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 776957373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3Njk1NzM3Mw==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T19:25:41Z",
    "updated_at": "2021-02-10T19:25:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "I suspect that the problem is that the `Geth` -style tracing repeats the memory and stack content at each step, and for some transactions like that this really blows out of proportion. Even if we could make a stream out of it and still squeeze out that enormous JSON response, would it be super useful (it will probably be hundred gigabytes in size or something)?\r\nMaybe the way to go is to expose `DisableMemory`, `DisableStack`, `DisableStorage` and `DisableReturnData` to the API?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/776957373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/776993029",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-776993029",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 776993029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3Njk5MzAyOQ==",
    "user": {
      "login": "relyt29",
      "id": 4326714,
      "node_id": "MDQ6VXNlcjQzMjY3MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4326714?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/relyt29",
      "html_url": "https://github.com/relyt29",
      "followers_url": "https://api.github.com/users/relyt29/followers",
      "following_url": "https://api.github.com/users/relyt29/following{/other_user}",
      "gists_url": "https://api.github.com/users/relyt29/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/relyt29/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/relyt29/subscriptions",
      "organizations_url": "https://api.github.com/users/relyt29/orgs",
      "repos_url": "https://api.github.com/users/relyt29/repos",
      "events_url": "https://api.github.com/users/relyt29/events{/privacy}",
      "received_events_url": "https://api.github.com/users/relyt29/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T20:11:46Z",
    "updated_at": "2021-02-10T20:11:46Z",
    "author_association": "NONE",
    "body": "> Maybe the way to go is to expose DisableMemory, DisableStack, DisableStorage and DisableReturnData to the API?\r\n\r\nI think this is useful in that it allows users to finer-tune the debugTraces and also might make pulling out many traces at once faster (as I was doing, iterating over every transaction in specific blocks for example). I also think it's a useful short term solution to the problem.\r\n\r\nBut it does concern me if that's all that's done, that it is possible to have transactions that we just can't find out what those TXs did post-facto without crashing the node. Maybe you just have to turn to another piece of software (e.g. parity, whatever) to get traces for those transactions, maybe that's fine... But if you want to know using TurboGeth what contracts a transaction triggered (e.g. contract `A.functionA() calls B.functionB()`, I don't know how you can get that without a successful non-crashing  debug_TraceTransaction.\r\n\r\n(If you have the memory and stack, the second item on the stack in the `CALL` output will be the address of the contract called (i.e. `B`) and the input parameters are stored in memory at pointers pointed to in the stack). So that's an example of where you might need/want to have debug_traceTransaction and you really can't disable memory or stack, which are both going to be the largest sources of the blowup in data size. \r\n\r\nAnd of course the biggest most complicated transactions are likely to be the most interesting and juicy to look at for analysis...",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/776993029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/777299235",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-777299235",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 777299235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzI5OTIzNQ==",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-11T09:12:52Z",
    "updated_at": "2021-02-11T09:12:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "> But it does concern me if that's all that's done, that it is possible to have transactions that we just can't find out what those TXs did post-facto without crashing the node\r\n\r\nThat's the exact reason why geth have `debug_standardtraceblocktofile`. Has that been removed from turbo-geth ?\r\n\r\nhttps://geth.ethereum.org/docs/rpc/ns-debug#debug_standardtraceblocktofile ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/777299235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/777313908",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-777313908",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 777313908,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzMxMzkwOA==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-11T09:37:10Z",
    "updated_at": "2021-02-11T09:37:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "> That's the exact reason why geth have `debug_standardtraceblocktofile`. Has that been removed from turbo-geth ?\r\n\r\nNo, we just need to specifically port every new method when it is added to `Geth`. Because our API lives in `cmd/rpcdaemon` now. Will try to port for the next release, thank you for the pointer!",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/777313908/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/833485541",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1458#issuecomment-833485541",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1458",
    "id": 833485541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMzQ4NTU0MQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-06T12:32:53Z",
    "updated_at": "2021-05-06T12:32:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "Will be fixed by this: https://github.com/ledgerwatch/turbo-geth/pull/1880\r\nIt works in my tests, I can download result via `curl` And RPC daemon's memory keeps stable",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/833485541/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

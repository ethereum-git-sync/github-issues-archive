{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7954",
  "id": 1831988691,
  "node_id": "I_kwDOC0FsAM5tMe3T",
  "number": 7954,
  "title": "Snapshot verification process triggered after a restart",
  "user": {
    "login": "wmitsuda",
    "id": 28685,
    "node_id": "MDQ6VXNlcjI4Njg1",
    "avatar_url": "https://avatars.githubusercontent.com/u/28685?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wmitsuda",
    "html_url": "https://github.com/wmitsuda",
    "followers_url": "https://api.github.com/users/wmitsuda/followers",
    "following_url": "https://api.github.com/users/wmitsuda/following{/other_user}",
    "gists_url": "https://api.github.com/users/wmitsuda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wmitsuda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wmitsuda/subscriptions",
    "organizations_url": "https://api.github.com/users/wmitsuda/orgs",
    "repos_url": "https://api.github.com/users/wmitsuda/repos",
    "events_url": "https://api.github.com/users/wmitsuda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wmitsuda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-08-01T20:33:08Z",
  "updated_at": "2023-10-02T14:08:41Z",
  "closed_at": "2023-09-19T02:05:09Z",
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "Using devel from a few days ago.\r\n\r\nAfter a restart, for some reason it decided that the snapshot download process should be activated (although it already had 100% as logs shows) and it triggered the verification process (no forced verification on cli flags).\r\n\r\n```\r\nINFO[08-01|17:22:57.459] HTTP endpoint opened                     url=[::]:8545 ws=true ws.compression=true grpc=false\r\nINFO[08-01|17:22:57.468] [txpool] Started\r\nINFO[08-01|17:22:57.468] Started P2P networking                   version=68 self=enode://b69f5e6bb7943d4fed7d6505e81aa666dac2605144e35de8845552e23ec8adc67b07568c0287b97ab15c45d082722b3a9571fd50781dcb39f0b31a32f312b00c@127.0.0.1:0 name=erigon/v2.49.0-dev-6088efa4/darwin-amd64/go1.20.6\r\nINFO[08-01|17:22:57.476] [1/14 Snapshots] Fetching torrent files metadata\r\nINFO[08-01|17:22:57.478] Started P2P networking                   version=67 self=enode://b69f5e6bb7943d4fed7d6505e81aa666dac2605144e35de8845552e23ec8adc67b07568c0287b97ab15c45d082722b3a9571fd50781dcb39f0b31a32f312b00c@127.0.0.1:0 name=erigon/v2.49.0-dev-6088efa4/darwin-amd64/go1.20.6\r\nINFO[08-01|17:23:14.908] Started Ethereum 2.0 Gossip Service\r\nINFO[08-01|17:23:17.480] [1/14 Snapshots] download                progress=\"100.00% 355.2GB/355.2GB\" download-time-left=999hrs:99m total-download-time=20s download=0B/s upload=0B/s\r\nINFO[08-01|17:23:17.480] [1/14 Snapshots] download                peers=3 connections=4 files=105 alloc=3.9GB sys=4.6GB\r\nWARN[08-01|17:23:33.311] newPayload failed                        err=\"status: SYNCING\"\r\nWARN[08-01|17:23:33.311] Could not download block                 reason=\"status: SYNCING\" slot=7008115\r\nINFO[08-01|17:23:34.717] Caplin is sending forkchoice\r\nWARN[08-01|17:23:37.472] newPayload failed                        err=\"status: SYNCING\"\r\nINFO[08-01|17:23:37.477] [snapshots] Verify start\r\nINFO[08-01|17:23:39.020] Caplin is sending forkchoice\r\nINFO[08-01|17:23:42.505] Caplin is sending forkchoice\r\n```\r\n\r\n```\r\nINFO[08-01|17:29:14.949] [Caplin] P2P                             peers=35\r\nWARN[08-01|17:29:16.561] newPayload failed                        err=\"status: SYNCING\"\r\nINFO[08-01|17:29:16.847] Caplin is sending forkchoice\r\nINFO[08-01|17:29:17.484] [snapshots] Verify                       progress=10.87%\r\nWARN[08-01|17:29:25.702] newPayload failed                        err=\"status: SYNCING\"\r\nINFO[08-01|17:29:26.836] Caplin is sending forkchoice\r\nINFO[08-01|17:29:37.489] [snapshots] Verify                       progress=11.44%\r\n```\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1661437853",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7954#issuecomment-1661437853",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954",
    "id": 1661437853,
    "node_id": "IC_kwDOC0FsAM5jB4ed",
    "user": {
      "login": "wmitsuda",
      "id": 28685,
      "node_id": "MDQ6VXNlcjI4Njg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/28685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wmitsuda",
      "html_url": "https://github.com/wmitsuda",
      "followers_url": "https://api.github.com/users/wmitsuda/followers",
      "following_url": "https://api.github.com/users/wmitsuda/following{/other_user}",
      "gists_url": "https://api.github.com/users/wmitsuda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wmitsuda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wmitsuda/subscriptions",
      "organizations_url": "https://api.github.com/users/wmitsuda/orgs",
      "repos_url": "https://api.github.com/users/wmitsuda/repos",
      "events_url": "https://api.github.com/users/wmitsuda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wmitsuda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-02T03:33:10Z",
    "updated_at": "2023-08-02T03:33:10Z",
    "author_association": "COLLABORATOR",
    "body": "I just rebased to latest devel, then snapshot indexing was triggered for an old snapshot.\r\n\r\nOnly thing I did was rebase my branch to latest devel, rebuild all binaries and restart.\r\n\r\n```\r\nINFO[08-02|00:26:53.115] HTTP endpoint opened                     url=[::]:8545 ws=true ws.compression=true grpc=false\r\nINFO[08-02|00:26:53.115] HTTP endpoint opened for Engine API      url=[::]:8551 ws=true ws.compression=true\r\nINFO[08-02|00:26:53.132] [txpool] Started\r\nINFO[08-02|00:26:53.133] [1/14 Snapshots] Fetching torrent files metadata\r\nINFO[08-02|00:26:53.149] Started P2P networking                   version=67 self=enode://b69f5e6bb7943d4fed7d6505e81aa666dac2605144e35de8845552e23ec8adc67b07568c0287b97ab15c45d082722b3a9571fd50781dcb39f0b31a32f312b00c@127.0.0.1:0 name=erigon/v2.49.0-dev-11882a03/darwin-amd64/go1.20.6\r\nINFO[08-02|00:26:53.155] Started P2P networking                   version=68 self=enode://b69f5e6bb7943d4fed7d6505e81aa666dac2605144e35de8845552e23ec8adc67b07568c0287b97ab15c45d082722b3a9571fd50781dcb39f0b31a32f312b00c@127.0.0.1:0 name=erigon/v2.49.0-dev-11882a03/darwin-amd64/go1.20.6\r\nINFO[08-02|00:26:55.177] [snapshots] Blocks Stat                  blocks=9500k indices=9500k alloc=4.2GB sys=4.6GB\r\nWARN[08-02|00:26:55.247] Index file has timestamp before segment file, will be recreated segfile=/Volumes/erigon2-mainnet/snapshots/v1-009500-010000-transactions.seg segtime=2023-08-01T17:23:12-0300 idxfile=v1-009500-010000-transactions.idx idxtime=2023-06-28T13:48:38-0300\r\nWARN[08-02|00:26:55.248] Index file has timestamp before segment file, will be recreated segfile=/Volumes/erigon2-mainnet/snapshots/v1-009500-010000-transactions.seg segtime=2023-08-01T17:23:12-0300 idxfile=v1-009500-010000-transactions-to-block.idx idxtime=2023-06-28T13:54:42-0300\r\nINFO[08-02|00:27:12.487] Started Ethereum 2.0 Gossip Service\r\nINFO[08-02|00:27:15.269] [1/14 Snapshots] Indexing                progress=\"v1-009500-010000-transactions.seg=3%\" total-indexing-time=20s alloc=5.8GB sys=6.6GB\r\nINFO[08-02|00:27:35.269] [1/14 Snapshots] Indexing                progress=\"v1-009500-010000-transactions.seg=6%\" total-indexing-time=40s alloc=4.7GB sys=6.6GB\r\nINFO[08-02|00:27:53.114] [txpool] stat                            pending=180 baseFee=116 queued=311 alloc=5.2GB sys=6.6GB\r\nINFO[08-02|00:27:55.269] [1/14 Snapshots] Indexing                progress=\"v1-009500-010000-transactions.seg=7%\" total-indexing-time=1m0s alloc=5.3GB sys=6.6GB\r\nINFO[08-02|00:28:12.489] [Caplin] P2P                             peers=8\r\nINFO[08-02|00:28:15.426] [1/14 Snapshots] Indexing                progress=\"v1-009500-010000-transactions.seg=8%\" total-indexing-time=1m20s alloc=5.7GB sys=6.6GB\r\nINFO[08-02|00:28:26.853] [p2p] GoodPeers                          eth68=3 eth67=1\r\nINFO[08-02|00:28:35.270] [1/14 Snapshots] Indexing                progress=\"v1-009500-010000-transactions.seg=8%\" total-indexing-time=1m40s alloc=6.2GB sys=6.6GB\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1661437853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1714853631",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7954#issuecomment-1714853631",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954",
    "id": 1714853631,
    "node_id": "IC_kwDOC0FsAM5mNpb_",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-09-12T02:02:13Z",
    "updated_at": "2023-09-12T02:02:13Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1714853631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1724723967",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7954#issuecomment-1724723967",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954",
    "id": 1724723967,
    "node_id": "IC_kwDOC0FsAM5mzTL_",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-09-19T02:05:08Z",
    "updated_at": "2023-09-19T02:05:08Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1724723967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1743087494",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7954#issuecomment-1743087494",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7954",
    "id": 1743087494,
    "node_id": "IC_kwDOC0FsAM5n5WeG",
    "user": {
      "login": "tzumby",
      "id": 301162,
      "node_id": "MDQ6VXNlcjMwMTE2Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/301162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tzumby",
      "html_url": "https://github.com/tzumby",
      "followers_url": "https://api.github.com/users/tzumby/followers",
      "following_url": "https://api.github.com/users/tzumby/following{/other_user}",
      "gists_url": "https://api.github.com/users/tzumby/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tzumby/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tzumby/subscriptions",
      "organizations_url": "https://api.github.com/users/tzumby/orgs",
      "repos_url": "https://api.github.com/users/tzumby/repos",
      "events_url": "https://api.github.com/users/tzumby/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tzumby/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-02T14:08:41Z",
    "updated_at": "2023-10-02T14:08:41Z",
    "author_association": "NONE",
    "body": "@wmitsuda Did you figure out why this happened ?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1743087494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

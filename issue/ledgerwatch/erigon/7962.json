{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7962",
  "id": 1834316455,
  "node_id": "I_kwDOC0FsAM5tVXKn",
  "number": 7962,
  "title": "Erigon Sync very slow",
  "user": {
    "login": "10xc0ffee",
    "id": 3822934,
    "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/10xc0ffee",
    "html_url": "https://github.com/10xc0ffee",
    "followers_url": "https://api.github.com/users/10xc0ffee/followers",
    "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
    "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
    "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
    "repos_url": "https://api.github.com/users/10xc0ffee/repos",
    "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
    "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 32,
  "created_at": "2023-08-03T05:45:38Z",
  "updated_at": "2023-09-09T14:19:26Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Erigon Version\r\n*erigon version 2.48.1-stable-674b77f0*\r\n\r\nCommand\r\n```\r\n~/code/erigonlog/erigon --log.dir.path ~/code/erigonlog/ --log.dir.verbosity 3 \\\r\n       --datadir /Volumes/blockchain/erigon/ \\\r\n       --chain mainnet \\\r\n       --http --ws --http.trace --http.api eth,debug,net,trace,web3,erigon,txpool --http.addr \"192.168.0.16\" --http.vhosts \"192.168.0.13\" --http.port 8545 --graphql \\\r\n       --authrpc.addr localhost --authrpc.port 8551 --authrpc.vhosts localhost --authrpc.jwtsecret /Volumes/blockchain/erigon/jwtsecret \\\r\n       --private.api.addr localhost:9090 \\\r\n       --metrics --metrics.addr \"192.168.0.16\" --metrics.port 6060 \\\r\n       --pprof --pprof.addr \"192.168.0.16\" --pprof.port 6060\r\n\r\n```\r\n\r\n# Chain data Sync\r\n\r\nOnly 10+blk/s.\r\n\r\n```\r\nINFO[08-02|22:41:46.573] [snapshots] Blocks Stat                  blocks=17000k indices=17000k alloc=4.1GB sys=4.3GB\r\nINFO[08-02|22:41:48.585] [7/15 Execution] Blocks execution        from=10751279 to=16999999\r\nINFO[08-02|22:42:08.608] [7/15 Execution] Executed blocks         number=10751483 blk/s=10.2 tx/s=1475.4 Mgas/s=123.8 gasState=0.00 batch=5.6MB alloc=3.2GB sys=4.3GB\r\nINFO[08-02|22:42:29.208] [7/15 Execution] Executed blocks         number=10751810 blk/s=16.4 tx/s=2309.2 Mgas/s=197.4 gasState=0.01 batch=15.5MB alloc=2.5GB sys=4.3GB\r\nINFO[08-02|22:42:43.883] [txpool] stat                            pending=0 baseFee=0 queued=42 alloc=2.9GB sys=4.3GB\r\nINFO[08-02|22:42:49.223] [7/15 Execution] Executed blocks         number=10752018 blk/s=10.4 tx/s=1503.4 Mgas/s=125.8 gasState=0.02 batch=21.9MB alloc=3.2GB sys=4.3GB\r\n```\r\n\r\n# Hardware\r\n\r\n<img width=\"256\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/d9af295a-5fd0-4aca-a1f8-3a018c46b609\">\r\n\r\n<img width=\"397\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/c2119a8f-d8f2-4296-aa3f-29951008c347\">\r\n\r\n<img width=\"422\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/7eba6484-f67b-464e-85b4-9eb69540cc8e\">\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1663328145",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1663328145",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1663328145,
    "node_id": "IC_kwDOC0FsAM5jJF-R",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T05:48:19Z",
    "updated_at": "2023-08-03T05:48:19Z",
    "author_association": "NONE",
    "body": "The very first day, the speed of sync is hundreds of blk/s, now it becomes 10blk/s. Not sure what's going on.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1663328145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1663901632",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1663901632",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1663901632,
    "node_id": "IC_kwDOC0FsAM5jLR_A",
    "user": {
      "login": "tjayrush",
      "id": 5417918,
      "node_id": "MDQ6VXNlcjU0MTc5MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5417918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tjayrush",
      "html_url": "https://github.com/tjayrush",
      "followers_url": "https://api.github.com/users/tjayrush/followers",
      "following_url": "https://api.github.com/users/tjayrush/following{/other_user}",
      "gists_url": "https://api.github.com/users/tjayrush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tjayrush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tjayrush/subscriptions",
      "organizations_url": "https://api.github.com/users/tjayrush/orgs",
      "repos_url": "https://api.github.com/users/tjayrush/repos",
      "events_url": "https://api.github.com/users/tjayrush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tjayrush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T12:32:15Z",
    "updated_at": "2023-08-03T12:32:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not an expert nor am I part of the Erigon team, but I suspect two things are happening.\r\n\r\nRemember, the sync happens from block zero forward in time.\r\n\r\n1. The number of transactions per block increases massively over time and\r\n2. The complexity of the transactions increases massively over time. \r\n\r\nThese two combine to slow things down the later in the chain's history the sync gets.\r\n\r\nI would close this issue as you're describing expected behavior, but perhaps someone else can chime in.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1663901632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1664243721",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1664243721",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1664243721,
    "node_id": "IC_kwDOC0FsAM5jMlgJ",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T15:58:40Z",
    "updated_at": "2023-08-03T15:58:40Z",
    "author_association": "NONE",
    "body": "> I'm not an expert nor am I part of the Erigon team, but I suspect two things are happening.\r\n> \r\n> Remember, the sync happens from block zero forward in time.\r\n> \r\n> 1. The number of transactions per block increases massively over time and\r\n> 2. The complexity of the transactions increases massively over time.\r\n> \r\n> These two combine to slow things down the later in the chain's history the sync gets.\r\n> \r\n> I would close this issue as you're describing expected behavior, but perhaps someone else can chime in.\r\n\r\nThank you @tjayrush. It makes sense, though the doc says it takes ~4 days to do a sync in archive mode, but for me it is already a week and I guess it will need another week to finish the sync.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1664243721/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1664696276",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1664696276",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1664696276,
    "node_id": "IC_kwDOC0FsAM5jOT_U",
    "user": {
      "login": "wmitsuda",
      "id": 28685,
      "node_id": "MDQ6VXNlcjI4Njg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/28685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wmitsuda",
      "html_url": "https://github.com/wmitsuda",
      "followers_url": "https://api.github.com/users/wmitsuda/followers",
      "following_url": "https://api.github.com/users/wmitsuda/following{/other_user}",
      "gists_url": "https://api.github.com/users/wmitsuda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wmitsuda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wmitsuda/subscriptions",
      "organizations_url": "https://api.github.com/users/wmitsuda/orgs",
      "repos_url": "https://api.github.com/users/wmitsuda/repos",
      "events_url": "https://api.github.com/users/wmitsuda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wmitsuda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-03T21:59:14Z",
    "updated_at": "2023-08-03T21:59:14Z",
    "author_association": "COLLABORATOR",
    "body": "I think the 4 days estimate is outdated, also blocks/s is not a good measure for the reasons TJ has explained above, I think mgas/s is more accurate over time, and also it may say something about how performant is your disk.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1664696276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1664902953",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1664902953",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1664902953,
    "node_id": "IC_kwDOC0FsAM5jPGcp",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-04T02:57:21Z",
    "updated_at": "2023-08-04T02:57:21Z",
    "author_association": "NONE",
    "body": "\r\n> I think the 4 days estimate is outdated, also blocks/s is not a good measure for the reasons TJ has explained above, I think mgas/s is more accurate over time, and also it may say something about how performant is your disk.\r\n\r\nInitially,\r\n```\r\n[INFO] [07-30|10:42:19.717] [7/15 Execution] Executed blocks         number=2064674 blk/s=2988.9 tx/s=22050.1 Mgas/s=724.2 gasState=0.16 batch=186.7MB alloc=3.7GB sys=12.6GB\r\n```\r\nNow,\r\n\r\n```\r\n[INFO] [08-03|19:50:06.738] [7/15 Execution] Executed blocks         number=11402476 blk/s=11.8 tx/s=1831.6 Mgas/s=144.3 gasState=0.13 batch=196.6MB alloc=3.9GB sys=6.7GB\r\n\r\n```\r\n\r\nDrop from 700 to 140 MGas/s",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1664902953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666058853",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1666058853",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1666058853,
    "node_id": "IC_kwDOC0FsAM5jTgpl",
    "user": {
      "login": "wmitsuda",
      "id": 28685,
      "node_id": "MDQ6VXNlcjI4Njg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/28685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wmitsuda",
      "html_url": "https://github.com/wmitsuda",
      "followers_url": "https://api.github.com/users/wmitsuda/followers",
      "following_url": "https://api.github.com/users/wmitsuda/following{/other_user}",
      "gists_url": "https://api.github.com/users/wmitsuda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wmitsuda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wmitsuda/subscriptions",
      "organizations_url": "https://api.github.com/users/wmitsuda/orgs",
      "repos_url": "https://api.github.com/users/wmitsuda/repos",
      "events_url": "https://api.github.com/users/wmitsuda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wmitsuda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-04T19:09:31Z",
    "updated_at": "2023-08-04T19:09:31Z",
    "author_association": "COLLABORATOR",
    "body": "that's a little odd... don't know why it dropped so much,\r\n\r\nUSB drive? I also use an external USB + mac, don't remember how much mgas/s it was the last time I synced from scratch, but the total process is slower than in an optimal hardware, i.e., at least 2 weeks in total.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666058853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666061233",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1666061233",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1666061233,
    "node_id": "IC_kwDOC0FsAM5jThOx",
    "user": {
      "login": "wmitsuda",
      "id": 28685,
      "node_id": "MDQ6VXNlcjI4Njg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/28685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wmitsuda",
      "html_url": "https://github.com/wmitsuda",
      "followers_url": "https://api.github.com/users/wmitsuda/followers",
      "following_url": "https://api.github.com/users/wmitsuda/following{/other_user}",
      "gists_url": "https://api.github.com/users/wmitsuda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wmitsuda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wmitsuda/subscriptions",
      "organizations_url": "https://api.github.com/users/wmitsuda/orgs",
      "repos_url": "https://api.github.com/users/wmitsuda/repos",
      "events_url": "https://api.github.com/users/wmitsuda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wmitsuda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-04T19:12:05Z",
    "updated_at": "2023-08-04T19:12:05Z",
    "author_association": "COLLABORATOR",
    "body": "also, mine is a 2019 macbook, I see yours is a 2015 model, so slower CPU, it'll probably affect performance during execution stage.\r\n\r\nI also have an older macbook, 2016 model and it's pretty much slower using same USB drive.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666061233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666186546",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1666186546",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1666186546,
    "node_id": "IC_kwDOC0FsAM5jT_0y",
    "user": {
      "login": "wmitsuda",
      "id": 28685,
      "node_id": "MDQ6VXNlcjI4Njg1",
      "avatar_url": "https://avatars.githubusercontent.com/u/28685?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wmitsuda",
      "html_url": "https://github.com/wmitsuda",
      "followers_url": "https://api.github.com/users/wmitsuda/followers",
      "following_url": "https://api.github.com/users/wmitsuda/following{/other_user}",
      "gists_url": "https://api.github.com/users/wmitsuda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wmitsuda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wmitsuda/subscriptions",
      "organizations_url": "https://api.github.com/users/wmitsuda/orgs",
      "repos_url": "https://api.github.com/users/wmitsuda/repos",
      "events_url": "https://api.github.com/users/wmitsuda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wmitsuda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-04T21:13:25Z",
    "updated_at": "2023-08-04T21:13:25Z",
    "author_association": "COLLABORATOR",
    "body": "I just remembered this tweet from @MysticRyuujin : https://twitter.com/mysticryuujin/status/1662432277773844485\r\n\r\nI think there is not much to hope from a 2015 CPU, no matter which client you use.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666186546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666365676",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1666365676",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1666365676,
    "node_id": "IC_kwDOC0FsAM5jUrjs",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-05T03:02:42Z",
    "updated_at": "2023-08-05T03:04:01Z",
    "author_association": "NONE",
    "body": "@wmitsuda Do you think could be memory? Erigon only uses 8GB of memory, and I only have 16GB memory in total.\r\n\r\nFor CPU, I does notice a very wired behavior: periodically, the odd CPU ID are getting very idle. Any thoughts?\r\n<img width=\"245\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/25634765-a649-4e59-85cc-fd0f15ec098f\">\r\n\r\nMemory:\r\n<img width=\"336\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/88388d9e-e3c2-4c13-8ee1-f5cd3784c56f\">\r\n\r\nErigon process:\r\n<img width=\"521\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/8838e326-10be-421e-8631-1eb243c1dc2a\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1666365676/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1667254096",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1667254096",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1667254096,
    "node_id": "IC_kwDOC0FsAM5jYEdQ",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-07T06:21:21Z",
    "updated_at": "2023-08-07T06:21:21Z",
    "author_association": "NONE",
    "body": "I found that the current stage is \"execute blocks\" -- per doc, this stage is single threaded and IO heavy.\r\n\r\nthe blk/s is very slow, so does the SSD throughput (see disk3, it periodically dump at 15MB/s and then drop to 0)\r\n<img width=\"432\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/9bb800d8-d9ff-40d0-9d2f-2fecd7becc4f\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1667254096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1670520233",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1670520233",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1670520233,
    "node_id": "IC_kwDOC0FsAM5jkh2p",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T01:22:25Z",
    "updated_at": "2023-08-09T01:53:37Z",
    "author_association": "NONE",
    "body": "Need help.. I tried the following things but not helping:\r\n1. renice the Erigon process to -20.\r\n2. run 'sudo taskpolicy -B -t 0 -p `pgrep erigon``\r\n3. change GOMAXPROCS to 104. \r\n4. disable swap\r\nAlso attaching the go pprof of the CPU \r\n<img width=\"455\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/5a1bd6bb-d2d6-401c-8e34-f8312dbdc6d7\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1670520233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1671022366",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1671022366",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1671022366,
    "node_id": "IC_kwDOC0FsAM5jmcce",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T09:55:16Z",
    "updated_at": "2023-08-09T09:55:16Z",
    "author_association": "COLLABORATOR",
    "body": "Show logs",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1671022366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1671616431",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1671616431",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1671616431,
    "node_id": "IC_kwDOC0FsAM5jotev",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T15:21:36Z",
    "updated_at": "2023-08-09T15:21:36Z",
    "author_association": "NONE",
    "body": "> Show logs\r\n\r\n@AskAlexSharov Anything else needed?\r\n```\r\nINFO[08-09|07:34:55.674] [] ETL [2/2] Loading                     into=PlainState current_prefix=f1d13c40\r\nINFO[08-09|07:35:01.283] [Caplin] P2P                             peers=17\r\nINFO[08-09|07:35:18.054] [p2p] GoodPeers                          eth68=90 eth67=72 eth66=13\r\nINFO[08-09|07:35:22.503] [] ETL [2/2] Loading                     into=PlainState current_prefix=f1d13c40\r\nINFO[08-09|07:35:41.457] [] ETL [2/2] Loading                     into=PlainState current_prefix=f55041e3\r\nINFO[08-09|07:35:57.649] Write to db                              progress=2.8M/4.0M current table=Code\r\nINFO[08-09|07:36:01.283] [Caplin] P2P                             peers=17\r\nINFO[08-09|07:36:43.661] [7/15 Execution] Executed blocks         number=13346893 blk/s=0.1 tx/s=15.1 Mgas/s=1.3 gasState=0.00 batch=0B alloc=6.1GB sys=11.8GB\r\nINFO[08-09|07:37:01.283] [Caplin] P2P                             peers=18\r\nINFO[08-09|07:37:10.636] [7/15 Execution] Executed blocks         number=13346932 blk/s=1.4 tx/s=252.1 Mgas/s=21.7 gasState=0.00 batch=838.0KB alloc=6.7GB sys=11.8GB\r\nINFO[08-09|07:37:18.053] [p2p] GoodPeers                          eth68=89 eth66=13 eth67=72\r\nINFO[08-09|07:37:22.059] [7/15 Execution] Executed blocks         number=13346989 blk/s=5.0 tx/s=921.4 Mgas/s=79.6 gasState=0.00 batch=2.1MB alloc=7.1GB sys=11.8GB\r\nINFO[08-09|07:37:42.035] [7/15 Execution] Executed blocks         number=13347023 blk/s=1.7 tx/s=302.8 Mgas/s=25.3 gasState=0.00 batch=3.0MB alloc=7.6GB sys=11.8GB\r\nINFO[08-09|07:38:01.283] [Caplin] P2P                             peers=19\r\nEROR[08-09|07:38:05.999] [pubsubhandler] stream handler           name=/eth2/beacon_chain/req/status/1/ssz_snappy err=\"unable to read varint from message prefix: stream reset\"\r\nINFO[08-09|07:38:11.674] [7/15 Execution] Executed blocks         number=13347109 blk/s=2.9 tx/s=534.6 Mgas/s=44.2 gasState=0.01 batch=5.4MB alloc=5.3GB sys=11.8GB\r\nINFO[08-09|07:38:22.137] [7/15 Execution] Executed blocks         number=13347182 blk/s=7.0 tx/s=1348.2 Mgas/s=113.5 gasState=0.01 batch=7.5MB alloc=5.9GB sys=11.8GB\r\nINFO[08-09|07:38:42.255] [7/15 Execution] Executed blocks         number=13347234 blk/s=2.6 tx/s=442.0 Mgas/s=39.6 gasState=0.01 batch=8.8MB alloc=6.4GB sys=11.8GB\r\nINFO[08-09|07:39:01.283] [Caplin] P2P                             peers=20\r\nINFO[08-09|07:39:11.119] [7/15 Execution] Executed blocks         number=13347358 blk/s=4.3 tx/s=769.9 Mgas/s=66.7 gasState=0.01 batch=12.2MB alloc=7.6GB sys=11.8GB\r\nINFO[08-09|07:39:18.052] [p2p] GoodPeers                          eth67=72 eth66=13 eth68=89\r\nINFO[08-09|07:39:22.075] [7/15 Execution] Executed blocks         number=13347453 blk/s=8.7 tx/s=1474.0 Mgas/s=128.1 gasState=0.02 batch=14.9MB alloc=8.3GB sys=11.8GB\r\nINFO[08-09|07:39:42.219] [7/15 Execution] Executed blocks         number=13347514 blk/s=3.0 tx/s=626.3 Mgas/s=51.6 gasState=0.02 batch=16.3MB alloc=8.9GB sys=11.8GB\r\nINFO[08-09|07:40:01.283] [Caplin] P2P                             peers=20\r\nINFO[08-09|07:40:10.433] [7/15 Execution] Executed blocks         number=13347659 blk/s=5.1 tx/s=822.5 Mgas/s=78.0 gasState=0.02 batch=20.1MB alloc=5.5GB sys=11.8GB\r\nINFO[08-09|07:40:22.039] [7/15 Execution] Executed blocks         number=13347815 blk/s=13.4 tx/s=2047.3 Mgas/s=213.5 gasState=0.03 batch=23.8MB alloc=6.4GB sys=11.8GB\r\nINFO[08-09|07:40:42.200] [7/15 Execution] Executed blocks         number=13347892 blk/s=3.8 tx/s=562.8 Mgas/s=56.6 gasState=0.03 batch=25.6MB alloc=7.1GB sys=11.8GB\r\nINFO[08-09|07:41:01.283] [Caplin] P2P                             peers=20\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1671616431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1671771457",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1671771457",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1671771457,
    "node_id": "IC_kwDOC0FsAM5jpTVB",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T16:38:28Z",
    "updated_at": "2023-08-09T16:38:28Z",
    "author_association": "COLLABORATOR",
    "body": "Then it’s expected speed on 16gb RAM machine. State is ~80gb. And no much of disk reads parallelization here (disk random read latency - is the bottleneck).\r\n\r\nyou can try add env variable WRITE_MAP=true\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1671771457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1672166612",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1672166612",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1672166612,
    "node_id": "IC_kwDOC0FsAM5jqzzU",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-09T21:20:43Z",
    "updated_at": "2023-08-09T21:37:46Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov Thanks! some follow up questions:\r\n\r\n1. What is provided by WRITE_MAP=true? (I couldn't find the keyword in the erigon@stable branch)\r\n2. One thing I notice the Erigon process in my instance is that the CPU usage spikes every 10s-15s -- looks like Erigon is working hard for couple of seconds and then become very idle for another couple of seconds. Same thing happens on the disk io, the disk throughput increases along with the CPU usage spike. But I don't understand why the system becomes idle periodically (I couldn't correlate it with the disk read speed). Do you have any ideas?\r\n\r\nDisk 3 is the SSD used.\r\n<img width=\"430\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/64ee1c69-5ea7-4d97-957d-32d70bfd6531\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1672166612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1690832811",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1690832811",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1690832811,
    "node_id": "IC_kwDOC0FsAM5kyA-r",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T01:00:46Z",
    "updated_at": "2023-08-24T01:05:04Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov As suggested, I have changed my server to 23 cores (2.93 Ghz) with 144 GB memory and 4TB SSD. The Linux version is 3.10.0-1160.el7.x86_64. The erigon is run with WRITE_MAP=true.\r\n\r\nI am still having issues with the same pattern.\r\nDo you have any estimation about how long it takes to sync with archive mode? For me, it is already one week and it will take another two weeks if the speed doesn't drop further.\r\n\r\nI wonder if it is expected and if there is any code-level optimization we can do to speed up the archive mode sync.\r\n\r\n<img width=\"566\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/3534611c-a1d0-4206-9caa-a1b9b1134bbf\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1690832811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1690929427",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1690929427",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1690929427,
    "node_id": "IC_kwDOC0FsAM5kyYkT",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T03:16:24Z",
    "updated_at": "2023-08-24T03:16:24Z",
    "author_association": "COLLABORATOR",
    "body": "currently bottleneck is at disk latency (not throughput) - so, hard to recommend something without knowing disk type. \r\n\r\nWith 144Gb RAM you can add --batchSize=1G and can try run (without stoping erigon):\r\n```\r\n./build/bin/integration warmup --bucket=PlainState --datadir=<your_datadir>\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1690929427/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1691291878",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1691291878",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1691291878,
    "node_id": "IC_kwDOC0FsAM5kzxDm",
    "user": {
      "login": "farmage",
      "id": 82975149,
      "node_id": "MDQ6VXNlcjgyOTc1MTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/82975149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/farmage",
      "html_url": "https://github.com/farmage",
      "followers_url": "https://api.github.com/users/farmage/followers",
      "following_url": "https://api.github.com/users/farmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/farmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/farmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/farmage/subscriptions",
      "organizations_url": "https://api.github.com/users/farmage/orgs",
      "repos_url": "https://api.github.com/users/farmage/repos",
      "events_url": "https://api.github.com/users/farmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/farmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T09:00:40Z",
    "updated_at": "2023-08-24T09:00:40Z",
    "author_association": "NONE",
    "body": "leave here my 5c )\r\nenv variable WRITE_MAP=true\r\nhelps a little. after restart the b/s rises from 16-20 to 70-80, but after 10 minutes everything goes back to the old values.\r\niotop shows that the disk load is minimal. sometimes there are spikes about 10mb/s of Disk Write , but most load is no more than 1mb/s ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1691291878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1691308544",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1691308544",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1691308544,
    "node_id": "IC_kwDOC0FsAM5kz1IA",
    "user": {
      "login": "farmage",
      "id": 82975149,
      "node_id": "MDQ6VXNlcjgyOTc1MTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/82975149?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/farmage",
      "html_url": "https://github.com/farmage",
      "followers_url": "https://api.github.com/users/farmage/followers",
      "following_url": "https://api.github.com/users/farmage/following{/other_user}",
      "gists_url": "https://api.github.com/users/farmage/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/farmage/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/farmage/subscriptions",
      "organizations_url": "https://api.github.com/users/farmage/orgs",
      "repos_url": "https://api.github.com/users/farmage/repos",
      "events_url": "https://api.github.com/users/farmage/events{/privacy}",
      "received_events_url": "https://api.github.com/users/farmage/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T09:11:03Z",
    "updated_at": "2023-08-24T09:13:41Z",
    "author_association": "NONE",
    "body": "restarted once again. the speed degradation is now even faster\r\n![Screenshot from 2023-08-24 11-12-16](https://github.com/ledgerwatch/erigon/assets/82975149/6ccbc781-29fc-4fdc-9065-14649b1c7e45)\r\n\r\n![Screenshot from 2023-08-24 11-13-16](https://github.com/ledgerwatch/erigon/assets/82975149/17c2300c-56b6-4536-81d6-668991b0dee4)\r\n\r\nCPU is 16 core, loaded minimum\r\nRAM 32Gb",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1691308544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1692009395",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1692009395",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1692009395,
    "node_id": "IC_kwDOC0FsAM5k2gOz",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-24T16:17:45Z",
    "updated_at": "2023-08-24T16:17:45Z",
    "author_association": "NONE",
    "body": "> leave here my 5c ) env variable WRITE_MAP=true helps a little. after restart the b/s rises from 16-20 to 70-80, but after 10 minutes everything goes back to the old values. iotop shows that the disk load is minimal. sometimes there are spikes about 10mb/s of Disk Write , but most load is no more than 1mb/s\r\n\r\n@farmage  In my case, the disk write is ~20MB/s for couple of seconds, then reduces to less than 1MB/s for couple of seconds. Not sure what's going on.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1692009395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1692778267",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1692778267",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1692778267,
    "node_id": "IC_kwDOC0FsAM5k5b8b",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-25T05:24:34Z",
    "updated_at": "2023-08-25T05:24:34Z",
    "author_association": "COLLABORATOR",
    "body": "\"RAM 32Gb\" - no magic, mainnet state is ~80gb and when it grows over RAM - you will start face more and more page-faults (page cache misses). \"read-ahead strategy\" is not easy for turing-complete-smart-contracts, we have some - but very limited. and page-cache-miss speed is limited by disk-latency (not by throughput): faster disk or bigger ram will help.\r\n\r\n\"after 10 minutes everything goes back\" - it's also about page-cache-misses - when you re-start you re-execution some last blocks - and you see it as \"fast speed\" because no page-misses (same blocks was just executed). \r\n\r\ncan a bit optimize state size by - manual db compaction: \"integration mdbx_to_mdbx\" or \"mdbx_dump|mdbx_load\" (see ./cmd/integraion/readme.md).\r\n\r\nAs an experiment (likely will not help much) - you can try: \r\n- stop erigon\r\n- run: integration stage_exec --batchSize=1g ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1692778267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694140961",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1694140961",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1694140961,
    "node_id": "IC_kwDOC0FsAM5k-ooh",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-26T03:26:32Z",
    "updated_at": "2023-08-26T03:26:32Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov  I tried the --batchSize=1g\r\n```\r\nINFO[08-25|23:06:14.762] [7/15 Execution] Executed blocks         number=14660536 blk/s=14.5 tx/s=2731.2 Mgas/s=226.0 gasState=0.22 batch=932.4MB alloc=9.5GB sys=15.7GB\r\nINFO[08-25|23:06:34.748] [7/15 Execution] Executed blocks         number=14660856 blk/s=16.0 tx/s=3001.7 Mgas/s=248.9 gasState=0.22 batch=943.1MB alloc=11.5GB sys=15.7GB\r\nINFO[08-25|23:06:54.808] [7/15 Execution] Executed blocks         number=14661148 blk/s=14.6 tx/s=2859.8 Mgas/s=224.8 gasState=0.22 batch=953.0MB alloc=7.5GB sys=15.7GB\r\nINFO[08-25|23:07:05.639] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=8.6GB sys=15.7GB\r\nINFO[08-25|23:07:07.343] [Caplin] P2P                             peers=33\r\nINFO[08-25|23:07:14.773] [7/15 Execution] Executed blocks         number=14661430 blk/s=14.1 tx/s=2607.6 Mgas/s=216.0 gasState=0.23 batch=962.4MB alloc=9.2GB sys=15.7GB\r\nINFO[08-25|23:07:27.235] [p2p] GoodPeers                          eth67=33 eth68=33\r\nINFO[08-25|23:07:34.815] [7/15 Execution] Executed blocks         number=14661728 blk/s=14.9 tx/s=2897.8 Mgas/s=231.4 gasState=0.23 batch=972.0MB alloc=11.1GB sys=15.7GB\r\nEROR[08-25|23:07:45.057] [pubsubhandler] stream handler           name=/eth2/beacon_chain/req/status/1/ssz_snappy err=\"unable to read varint from message prefix: stream reset\"\r\nINFO[08-25|23:07:54.779] [7/15 Execution] Executed blocks         number=14662038 blk/s=15.5 tx/s=2947.2 Mgas/s=241.3 gasState=0.23 batch=981.7MB alloc=7.1GB sys=15.7GB\r\nINFO[08-25|23:08:05.635] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=8.1GB sys=15.7GB\r\nINFO[08-25|23:08:07.343] [Caplin] P2P                             peers=33\r\nINFO[08-25|23:08:14.767] [7/15 Execution] Executed blocks         number=14662349 blk/s=15.6 tx/s=2721.1 Mgas/s=238.7 gasState=0.23 batch=991.4MB alloc=8.9GB sys=15.7GB\r\nINFO[08-25|23:08:34.774] [7/15 Execution] Executed blocks         number=14662629 blk/s=14.0 tx/s=2448.0 Mgas/s=212.7 gasState=0.23 batch=1000.0MB alloc=10.6GB sys=15.7GB\r\nINFO[08-25|23:08:54.766] [7/15 Execution] Executed blocks         number=14662926 blk/s=14.9 tx/s=2483.5 Mgas/s=229.9 gasState=0.24 batch=1009.3MB alloc=6.5GB sys=15.7GB\r\nINFO[08-25|23:09:05.634] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=7.3GB sys=15.7GB\r\n```\r\n\r\nSeems doesn't help. I want to try the integration warmup. I wonder what does it do and what's the different between integration warmup and the page cache. Because the erigon process already uses a large amount of caches (I suppose those are state of the chain?).\r\n\r\nGood news is if I wait for 3 more days, probably it will finish...",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694140961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694160367",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1694160367",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1694160367,
    "node_id": "IC_kwDOC0FsAM5k-tXv",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-26T04:50:34Z",
    "updated_at": "2023-08-26T04:50:34Z",
    "author_association": "COLLABORATOR",
    "body": "https://github.com/ledgerwatch/erigon#htop-shows-incorrect-memory-usage",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694160367/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694547968",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1694547968",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1694547968,
    "node_id": "IC_kwDOC0FsAM5lAMAA",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-27T02:07:38Z",
    "updated_at": "2023-08-27T02:09:06Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov Could you elaborate? I read that section but I still don't understand the difference between page cache and the cache maintained by \"integration warmup\". Are you inferring that the cache organized by the integration process is more efficient?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694547968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694561187",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1694561187",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1694561187,
    "node_id": "IC_kwDOC0FsAM5lAPOj",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-27T03:43:35Z",
    "updated_at": "2023-08-27T03:43:35Z",
    "author_association": "COLLABORATOR",
    "body": "No difference. But when Data >> Ram - PageCache is evicting and more pressure comes to disk latency.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1694561187/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1697600964",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1697600964",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1697600964,
    "node_id": "IC_kwDOC0FsAM5lL1XE",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-29T14:51:39Z",
    "updated_at": "2023-08-29T15:10:57Z",
    "author_association": "NONE",
    "body": "Thanks @AskAlexSharov \r\n\r\nFinally the stage 7 is done. But I am hitting another issue:\r\n```\r\nCould not download block                 reason=\"replay block, code: 2\" slot=7207173\r\n```\r\ndetails:\r\n```\r\n[DBUG] [08-29|10:48:35.581] AddChainSegment: missing segment         block=0x2e969d7f7a4bb76a9801269d246a8acd1e6e6af2a309d0a33aeb74884a37bad4\r\n[WARN] [08-29|10:48:35.581] Could not download block                 reason=\"replay block, code: 2\" slot=7207173\r\n[DBUG] [08-29|10:48:35.581] [Sentinel Peers] bad peers has been banned peer-id=16Uiu2HAkwunNci6hjgLWPCbESq3vxNimpLjYBS6DxYruzffoMJmw reason=\r\n[DBUG] [08-29|10:48:35.581] [Sentinel Peers] disconnecting from peer peer-id=16Uiu2HAkwunNci6hjgLWPCbESq3vxNimpLjYBS6DxYruzffoMJmw reason=\r\n[DBUG] [08-29|10:48:39.769] [Sentinel Peers] peer replied            peer-id=16Uiu2HAm1znM7oSwbrvXFrPCy168ARr37TTyUK71FwiMQyhP64bX uses=2 success=1\r\n[DBUG] [08-29|10:48:39.903] Could not retrieve state: Missing header missing=0x08e3fe01c63fd35a3ee6faf0fb27f12d7a2d8571acbd258c5f3e39f3944bff14 longRecconection=0xdd32161da4b48e94b7bdcfbe4a02f62eac580711acd3e68be5b25d344747cf45 shortRecconection=0x3d055f938315c4e62f4757e6fb055ae3881f18faa59c78e7bd33ec38af79e0e7\r\n[DBUG] [08-29|10:48:39.903] AddChainSegment: missing segment         block=0x2e969d7f7a4bb76a9801269d246a8acd1e6e6af2a309d0a33aeb74884a37bad4\r\n[WARN] [08-29|10:48:39.903] Could not download block                 reason=\"replay block, code: 2\" slot=7207173\r\n[DBUG] [08-29|10:48:39.903] [Sentinel Peers] bad peers has been banned peer-id=16Uiu2HAm1znM7oSwbrvXFrPCy168ARr37TTyUK71FwiMQyhP64bX reason=\r\n[DBUG] [08-29|10:48:39.904] [Sentinel Peers] disconnecting from peer peer-id=16Uiu2HAm1znM7oSwbrvXFrPCy168ARr37TTyUK71FwiMQyhP64bX reason=\r\n[DBUG] [08-29|10:48:45.525] [txpool] Commit                          written_kb=524 in=74.395459ms\r\n[DBUG] [08-29|10:48:50.257] [Sentinel Peers] disconnecting from peer peer-id=16Uiu2HAm4327iRHEd6xFQ2UoDyL8T6xxkHaBoaBNALQEYYNCDiX9 reason=\"failed to dial 16Uiu2HAm4327iRHEd6xFQ2UoDyL8T6xxkHaBoaBNALQEYYNCDiX9:\\n  * [/ip4/54.160.240.242/tcp/9000] dial tcp4 54.160.240.242:9000: i/o timeout\"\r\n[DBUG] [08-29|10:48:50.741] [p2p] Handshake failure                  peer=3e226ffa60b7b28fa675 err=\"genesis hash does not match: theirs c5404f768c212b3ebbabb02a5ca45926322fc9a6f24f5e57d2cba5434b1c7980, ours d4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\"\r\n[DBUG] [08-29|10:49:06.289] [txpool] Commit                          written_kb=668 in=5.073956067s\r\n[INFO] [08-29|10:49:06.290] [txpool] stat                            pending=0 baseFee=0 queued=30000 alloc=5.8GB sys=16.3GB\r\n[INFO] [08-29|10:49:07.343] [Caplin] P2P                             peers=22\r\n[DBUG] [08-29|10:49:16.269] [Sentinel Peers] peer replied            peer-id=16Uiu2HAkurZR8uYXw1xd2khrcBcYma98UpDp719PiMrJUifu3cqF uses=2 success=1\r\n[DBUG] [08-29|10:49:16.401] Could not retrieve state: Missing header missing=0x08e3fe01c63fd35a3ee6faf0fb27f12d7a2d8571acbd258c5f3e39f3944bff14 longRecconection=0xdd32161da4b48e94b7bdcfbe4a02f62eac580711acd3e68be5b25d344747cf45 shortRecconection=0x3d055f938315c4e62f4757e6fb055ae3881f18faa59c78e7bd33ec38af79e0e7\r\n[DBUG] [08-29|10:49:16.401] AddChainSegment: missing segment         block=0x2e969d7f7a4bb76a9801269d246a8acd1e6e6af2a309d0a33aeb74884a37bad4\r\n[WARN] [08-29|10:49:16.401] Could not download block                 reason=\"replay block, code: 2\" slot=7207173\r\n```\r\n\r\nAfter restart, it is making progress but really slow.\r\n```\r\n[DBUG] [08-29|11:00:44.049] AddChainSegment: missing segment         block=0x6e6c2b6721a8d7c53b968ae8336dc06ae16a37be0cfb4ed0d0479db59a7aa5a9\r\n[DBUG] [08-29|11:00:44.049] [Beacon Gossip] Recoverable Error        at=\"block process\" err=\"replay block, code: 2\" slot=7208096\r\n[DBUG] [08-29|11:00:44.051] Received block via gossip                peers=7 slot=7208097 alloc/sys=3.9GB/5.7GB numGC=19\r\n[DBUG] [08-29|11:00:48.428] [txpool] Commit                          written_kb=884 in=58.483846ms\r\n[INFO] [08-29|11:00:49.469] [p2p] GoodPeers                          eth68=1 eth67=1\r\n[DBUG] [08-29|11:01:04.272] [txpool] Commit                          written_kb=1048 in=2.348491ms\r\n[DBUG] [08-29|11:01:07.860] Could not retrieve state: Missing header missing=0x6e6c2b6721a8d7c53b968ae8336dc06ae16a37be0cfb4ed0d0479db59a7aa5a9 longRecconection=0x90953afb7260985f79b18d2b0eaff4caf8b5f3b2509e72aefcde2e9d55555ca0 shortRecconection=0x90953afb7260985f79b18d2b0eaff4caf8b5f3b2509e72aefcde2e9d55555ca0\r\n[DBUG] [08-29|11:01:07.860] AddChainSegment: missing segment         block=0xe0b30903bb90f223a9993933185f856ab1c2872530bf02e522c519c738cf79d1\r\n[DBUG] [08-29|11:01:07.860] [Beacon Gossip] Recoverable Error        at=\"block process\" err=\"replay block, code: 2\" slot=7208097\r\n[DBUG] [08-29|11:01:07.862] Received block via gossip                peers=6 slot=7208099 alloc/sys=4.1GB/5.7GB numGC=19\r\n[DBUG] [08-29|11:01:15.787] Error in DNS random node sync            tree=all.mainnet.ethdisco.net err=\"lookup FWMVR4CJZFIG6VOWSNNJVGPYBI.all.mainnet.ethdisco.net on 75.75.76.76:53: no such host\"\r\n[INFO] [08-29|11:01:16.231] [Caplin] P2P                             peers=6\r\n...\r\n[DBUG] [08-29|11:08:36.918] AddChainSegment: missing segment         block=0xc580ce7a0c7a333ab11797af8be2edf9429ab7e7a068d32effc5406ad2174c31\r\n[DBUG] [08-29|11:08:36.918] [Beacon Gossip] Recoverable Error        slot=7208139 at=\"block process\" err=\"replay block, code: 2\"\r\n[DBUG] [08-29|11:08:45.425] [txpool] Commit                          written_kb=632 in=44.060953ms\r\n[DBUG] [08-29|11:08:48.256] Received block via gossip                peers=21 slot=7208142 alloc/sys=4.9GB/5.8GB numGC=23\r\n[INFO] [08-29|11:08:49.469] [p2p] GoodPeers                          eth68=2 eth67=2 eth66=1\r\n[DBUG] [08-29|11:09:00.827] [Beacon Gossip] Recoverable Error        slot=7208142 at=\"block process\" err=\"block is too early compared to current_slot\"\r\n[DBUG] [08-29|11:09:01.283] [txpool] Commit                          written_kb=636 in=1.825515ms\r\n[DBUG] [08-29|11:09:12.589] Received block via gossip                peers=21 slot=7208144 alloc/sys=5.2GB/5.8GB numGC=23\r\n[INFO] [08-29|11:09:16.231] [Caplin] P2P                             peers=20\r\n[DBUG] [08-29|11:09:17.319] [txpool] Commit                          written_kb=992 in=136.702774ms\r\n[INFO] [08-29|11:09:21.667] [txpool] stat                            pending=0 baseFee=0 queued=6496 alloc=5.2GB sys=5.8GB\r\n[DBUG] [08-29|11:09:24.456] [Beacon Gossip] Recoverable Error        slot=7208144 at=\"block process\" err=\"block is too early compared to current_slot\"\r\n[DBUG] [08-29|11:09:24.809] Received block via gossip                peers=19 slot=7208145 alloc/sys=5.3GB/5.8GB numGC=23\r\n[DBUG] [08-29|11:09:33.085] [txpool] Commit                          written_kb=824 in=2.099563ms\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1697600964/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1698367893",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1698367893",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1698367893,
    "node_id": "IC_kwDOC0FsAM5lOwmV",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-30T01:45:05Z",
    "updated_at": "2023-08-30T01:45:05Z",
    "author_association": "COLLABORATOR",
    "body": "I don’t know current state of your node",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1698367893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1709307937",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1709307937",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1709307937,
    "node_id": "IC_kwDOC0FsAM5l4fgh",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-07T00:51:10Z",
    "updated_at": "2023-09-07T00:51:10Z",
    "author_association": "NONE",
    "body": "Update:\r\nThank god. Almost there.. \r\n```\r\nINFO[09-06|12:58:39.157] [7/15 Execution] Executed blocks         number=18055589 blk/s=6.6 tx/s=1011.3 Mgas/s=99.1 gasState=0.07 batch=319.5MB alloc=9.8GB sys=17.1GB\r\nINFO[09-06|12:58:59.158] [7/15 Execution] Executed blocks         number=18055817 blk/s=11.4 tx/s=1694.0 Mgas/s=172.1 gasState=0.08 batch=326.4MB alloc=11.1GB sys=17.1GB\r\n```\r\nCPU/MEM\r\n<img width=\"495\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/d2627a68-8527-4609-a13d-ea24db70d5b3\">\r\n\r\nIO\r\n\r\n<img width=\"507\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/9121f28b-da33-4af5-a05e-9cd2fd14321f\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1709307937/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1711056469",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1711056469",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1711056469,
    "node_id": "IC_kwDOC0FsAM5l_KZV",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-08T04:26:51Z",
    "updated_at": "2023-09-08T04:26:51Z",
    "author_association": "NONE",
    "body": "Update:\r\nAlmost there...\r\n\r\n```\r\nINFO[09-08|00:21:45.607] [13/15 LogIndex] ETL [2/2] Loading       into=LogTopicIndex current_prefix=000000000000000000000000c3d6be6a3703bf34859fd949235995ce754418cdffffffff\r\nINFO[09-08|00:22:15.606] [13/15 LogIndex] ETL [2/2] Loading       into=LogTopicIndex current_prefix=000000000000000000000000c4d7aa60e74d25211d8a40441fb3440e5ff2e483ffffffff\r\nINFO[09-08|00:22:45.615] [13/15 LogIndex] ETL [2/2] Loading       into=LogTopicIndex current_prefix=000000000000000000000000c5c3bb3fed7d880350a5e62b1c34bede0c936c3affffffff\r\n```\r\n\r\nCPU/MEM\r\n<img width=\"512\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/b6eb2317-4788-4381-b2c1-9e400bd55d61\">\r\n\r\n\r\nIO\r\n<img width=\"376\" alt=\"image\" src=\"https://github.com/ledgerwatch/erigon/assets/3822934/aea22a8c-5e40-4a7d-aaa4-26e393167908\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1711056469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1711877799",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7962#issuecomment-1711877799",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7962",
    "id": 1711877799,
    "node_id": "IC_kwDOC0FsAM5mCS6n",
    "user": {
      "login": "10xc0ffee",
      "id": 3822934,
      "node_id": "MDQ6VXNlcjM4MjI5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3822934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/10xc0ffee",
      "html_url": "https://github.com/10xc0ffee",
      "followers_url": "https://api.github.com/users/10xc0ffee/followers",
      "following_url": "https://api.github.com/users/10xc0ffee/following{/other_user}",
      "gists_url": "https://api.github.com/users/10xc0ffee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/10xc0ffee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/10xc0ffee/subscriptions",
      "organizations_url": "https://api.github.com/users/10xc0ffee/orgs",
      "repos_url": "https://api.github.com/users/10xc0ffee/repos",
      "events_url": "https://api.github.com/users/10xc0ffee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/10xc0ffee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-08T15:50:52Z",
    "updated_at": "2023-09-08T15:50:52Z",
    "author_association": "NONE",
    "body": "Update: \r\n\r\n```\r\nINFO[09-08|11:48:47.720] [5/15 Bodies] Downloading block bodies   block_num=18061942 delivery/sec=3.3MB wasted/sec=0B remaining=30697 delivered=5351 cache=2.9MB alloc=6.6GB sys=7.5GB\r\nINFO[09-08|11:49:07.724] [5/15 Bodies] Writing block bodies       block_num=18062467 remaining=30173 alloc=3.9GB sys=7.5GB\r\nINFO[09-08|11:49:27.722] [5/15 Bodies] Writing block bodies       block_num=18062657 remaining=29983 alloc=4.2GB sys=7.5GB\r\nINFO[09-08|11:49:47.726] [5/15 Bodies] Writing block bodies       block_num=18063214 remaining=29426 alloc=4.8GB sys=7.5GB\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1711877799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

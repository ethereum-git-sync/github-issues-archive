{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4787",
  "id": 1314466781,
  "node_id": "I_kwDOC0FsAM5OWSvd",
  "number": 4787,
  "title": "cant read chain config from core db",
  "user": {
    "login": "bert2002",
    "id": 1042226,
    "node_id": "MDQ6VXNlcjEwNDIyMjY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1042226?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bert2002",
    "html_url": "https://github.com/bert2002",
    "followers_url": "https://api.github.com/users/bert2002/followers",
    "following_url": "https://api.github.com/users/bert2002/following{/other_user}",
    "gists_url": "https://api.github.com/users/bert2002/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bert2002/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bert2002/subscriptions",
    "organizations_url": "https://api.github.com/users/bert2002/orgs",
    "repos_url": "https://api.github.com/users/bert2002/repos",
    "events_url": "https://api.github.com/users/bert2002/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bert2002/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-07-22T07:00:07Z",
  "updated_at": "2022-07-25T04:30:58Z",
  "closed_at": "2022-07-25T04:30:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `erigon version 2022.07.2-alpha-c7a94eee`\r\n\r\nOS & Version: Ubuntu Linux + Docker 20.10.17\r\n\r\nCommit tag : v2022.07.02\r\n\r\n#### Actual behavior\r\n\r\n```\r\nJul 22 06:48:44 erigon erigon[22221]: txpool_1      | [EROR] [07-22|06:48:44.752] cant read chain config from core db      err=\"rpc error: code = Unavailable desc = connection error: desc = \\\"transport: Error while dialing dial tcp 172.18.0.4:9090: connect: connection refused\\\"\"\r\nJul 22 06:48:49 erigon erigon[22221]: txpool_1      | [EROR] [07-22|06:48:49.753] cant read chain config from core db      err=\"rpc error: code = Unavailable desc = connection error: desc = \\\"transport: Error while dialing dial tcp 172.18.0.4:9090: connect: connection refused\\\"\"\r\nJul 22 06:48:54 erigon erigon[22221]: txpool_1      | [EROR] [07-22|06:48:54.754] cant read chain config from core db      err=\"rpc error: code = Unavailable desc = connection error: desc = \\\"transport: Error while dialing dial tcp 172.18.0.4:9090: connect: connection refused\\\"\"\r\n```\r\nI am seeing the above error, but when I curl the port I actually get a response. My node is not syncing as well, not sure if these are two problems or if they are related.\r\n\r\n```\r\nJul 22 06:56:00 erigon erigon[22221]: downloader_1  | [INFO] [07-22|06:56:00.506] [Snapshots] Seeding                      up=0B/s peers=0 connections=0 files=87\r\nJul 22 06:56:18 erigon erigon[22221]: erigon_1      | [INFO] [07-22|06:56:18.787] TruncateBlocks                           block=14983819\r\nJul 22 06:56:20 erigon erigon[22221]: downloader_1  | [INFO] [07-22|06:56:20.506] [Snapshots] Seeding                      up=0B/s peers=0 connections=0 files=87\r\nJul 22 06:56:38 erigon erigon[22221]: erigon_1      | [INFO] [07-22|06:56:38.762] TruncateBlocks                           block=14981605\r\nJul 22 06:56:40 erigon erigon[22221]: downloader_1  | [INFO] [07-22|06:56:40.506] [Snapshots] Seeding                      up=0B/s peers=0 connections=0 files=87\r\nJul 22 06:56:58 erigon erigon[22221]: erigon_1      | [INFO] [07-22|06:56:58.778] TruncateBlocks                           block=14979537\r\nJul 22 06:57:00 erigon erigon[22221]: downloader_1  | [INFO] [07-22|06:57:00.505] [Snapshots] Seeding                      up=0B/s peers=0 connections=0 files=87\r\n```\r\nNot sure why its truncating either, because I didnt enabled pruning in the hope that it will produce a full archive, but this is confusing me.\r\n\r\nAny input and help is appreciated :)\r\n\r\nbert",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1192329626",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4787#issuecomment-1192329626",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787",
    "id": 1192329626,
    "node_id": "IC_kwDOC0FsAM5HEYGa",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-22T08:40:04Z",
    "updated_at": "2022-07-22T08:40:04Z",
    "author_association": "COLLABORATOR",
    "body": "We had bug related to db migration. I think your node does migrating. I advise you switch to “devel” branch in this case. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1192329626/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193483084",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4787#issuecomment-1193483084",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787",
    "id": 1193483084,
    "node_id": "IC_kwDOC0FsAM5HIxtM",
    "user": {
      "login": "bert2002",
      "id": 1042226,
      "node_id": "MDQ6VXNlcjEwNDIyMjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1042226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bert2002",
      "html_url": "https://github.com/bert2002",
      "followers_url": "https://api.github.com/users/bert2002/followers",
      "following_url": "https://api.github.com/users/bert2002/following{/other_user}",
      "gists_url": "https://api.github.com/users/bert2002/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bert2002/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bert2002/subscriptions",
      "organizations_url": "https://api.github.com/users/bert2002/orgs",
      "repos_url": "https://api.github.com/users/bert2002/repos",
      "events_url": "https://api.github.com/users/bert2002/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bert2002/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T02:20:38Z",
    "updated_at": "2022-07-25T02:20:38Z",
    "author_association": "NONE",
    "body": "Hi @AskAlexSharov, it seems it finished the db migration\r\n```\r\nJul 25 01:52:48 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:48.898] Commit cycle                             in=44.383633ms\r\nJul 25 01:52:48 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:48.899] RPC Daemon notified of new headers       from=15208882 to=15208883 header sending=8.363µs log sending=204ns\r\nJul 25 01:52:48 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:48.899] [1/16 Headers] Waiting for headers...    from=15208883\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.986] [1/16 Headers] Processed                 highest inserted=15208884 age=1s\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.988] [6/16 Execution] Completed on            block=15208884\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.990] Timings (slower than 50ms)               Headers=1.087s\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.990] Tables                                   PlainState=70.3GB AccountChangeSet=157.1GB StorageChangeSet=230.7GB BlockTransaction=8.4GB TransactionLog=422.0GB FreeList=91.4MB ReclaimableSpace=91.4GB\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.993] Commit cycle                             in=3.72672ms\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.994] RPC Daemon notified of new headers       from=15208883 to=15208884 header sending=10.097µs log sending=399ns\r\nJul 25 01:52:49 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:52:49.994] [1/16 Headers] Waiting for headers...    from=15208884\r\nJul 25 01:53:00 erigon erigon[22221]: downloader_1  | [INFO] [07-25|01:53:00.506] [Snapshots] Seeding                      up=0B/s peers=0 connections=0 files=87\r\nJul 25 01:53:06 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:06.310] [1/16 Headers] Processed                 highest inserted=15208885 age=16s\r\nJul 25 01:53:06 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:06.821] [6/16 Execution] Completed on            block=15208885\r\nJul 25 01:53:07 erigon erigon[22221]: txpool_1      | [INFO] [07-25|01:53:07.955] [txpool] stat                            block=15208884 pending=0 baseFee=1 queued=0 cache_keys=1000000 alloc=434.6MB sys=919.9MB\r\nJul 25 01:53:09 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:09.014] Timings (slower than 50ms)               Headers=16.316s Execution=483ms HashState=405ms IntermediateHashes=766ms CallTraces=260ms AccountHistoryIndex=179ms StorageHistoryIndex=277ms LogIndex=160ms TxLookup=142ms\r\nJul 25 01:53:09 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:09.014] Tables                                   PlainState=70.3GB AccountChangeSet=157.1GB StorageChangeSet=230.7GB BlockTransaction=8.4GB TransactionLog=422.0GB FreeList=91.4MB ReclaimableSpace=91.4GB\r\nJul 25 01:53:12 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:12.686] Commit cycle                             in=3.671502094s\r\nJul 25 01:53:12 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:12.686] RPC Daemon notified of new headers       from=15208884 to=15208885 header sending=12.789µs log sending=223ns\r\nJul 25 01:53:12 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:12.686] [1/16 Headers] Waiting for headers...    from=15208885\r\nJul 25 01:53:12 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:12.692] [1/16 Headers] Processed                 highest inserted=15208886 age=6s\r\nJul 25 01:53:12 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:12.792] [6/16 Execution] Completed on            block=15208886\r\nJul 25 01:53:13 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:13.174] Timings (slower than 50ms)               Execution=92ms HashState=73ms IntermediateHashes=133ms\r\nJul 25 01:53:13 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:13.174] Tables                                   PlainState=70.3GB AccountChangeSet=157.1GB StorageChangeSet=230.7GB BlockTransaction=8.4GB TransactionLog=422.0GB FreeList=91.4MB ReclaimableSpace=91.4GB\r\nJul 25 01:53:13 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:13.953] Commit cycle                             in=778.781696ms\r\nJul 25 01:53:13 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:13.953] RPC Daemon notified of new headers       from=15208885 to=15208886 header sending=11.008µs log sending=263ns\r\nJul 25 01:53:13 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:13.953] [1/16 Headers] Waiting for headers...    from=15208886\r\nJul 25 01:53:20 erigon erigon[22221]: downloader_1  | [INFO] [07-25|01:53:20.506] [Snapshots] Seeding                      up=0B/s peers=0 connections=0 files=87\r\nJul 25 01:53:25 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:25.345] [1/16 Headers] Processed                 highest inserted=15208887 age=15s\r\nJul 25 01:53:25 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:25.641] [6/16 Execution] Completed on            block=15208887\r\nJul 25 01:53:26 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:26.752] Timings (slower than 50ms)               Headers=11.391s Execution=281ms HashState=221ms IntermediateHashes=358ms CallTraces=112ms AccountHistoryIndex=79ms StorageHistoryIndex=167ms LogIndex=89ms TxLookup=81ms\r\nJul 25 01:53:26 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:26.752] Tables                                   PlainState=70.3GB AccountChangeSet=157.1GB StorageChangeSet=230.7GB BlockTransaction=8.4GB TransactionLog=422.0GB FreeList=91.4MB ReclaimableSpace=91.4GB\r\nJul 25 01:53:28 erigon erigon[22221]: erigon_1      | [INFO] [07-25|01:53:28.151] Commit cycle                             in=1.398599379s\r\n``` ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193483084/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193564970",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4787#issuecomment-1193564970",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4787",
    "id": 1193564970,
    "node_id": "IC_kwDOC0FsAM5HJFsq",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T04:30:58Z",
    "updated_at": "2022-07-25T04:30:58Z",
    "author_association": "COLLABORATOR",
    "body": "ok, closing then",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193564970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

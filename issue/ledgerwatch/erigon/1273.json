{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/1273",
  "id": 726138532,
  "node_id": "MDU6SXNzdWU3MjYxMzg1MzI=",
  "number": 1273,
  "title": "Unable to query anything",
  "user": {
    "login": "igorline",
    "id": 1465430,
    "node_id": "MDQ6VXNlcjE0NjU0MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1465430?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/igorline",
    "html_url": "https://github.com/igorline",
    "followers_url": "https://api.github.com/users/igorline/followers",
    "following_url": "https://api.github.com/users/igorline/following{/other_user}",
    "gists_url": "https://api.github.com/users/igorline/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/igorline/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/igorline/subscriptions",
    "organizations_url": "https://api.github.com/users/igorline/orgs",
    "repos_url": "https://api.github.com/users/igorline/repos",
    "events_url": "https://api.github.com/users/igorline/events{/privacy}",
    "received_events_url": "https://api.github.com/users/igorline/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2020-10-21T05:11:24Z",
  "updated_at": "2020-11-10T10:19:09Z",
  "closed_at": "2020-11-10T09:42:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "When I try to query block number using `curl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\": \"2.0\", \"method\": \"eth_blockNumber\", \"params\": [], \"id\":1}' localhost:9045` I'm getting \r\n`{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x0\"}`.\r\n\r\nI'm running tg using datadir flag `./build/bin/tg --datadir /turbo/data`, node is synced and processing new blocks and rpcdaemon with different http.port `./build/bin/rpcdaemon --chaindata /turbo/data/tg --http.api=eth,debug,net,web3 --http.port 9045`\r\n\r\nI'm on a master branch commit `716a0f2dbaa5e355c7967b024377922463cdb75f`",
  "closed_by": {
    "login": "igorline",
    "id": 1465430,
    "node_id": "MDQ6VXNlcjE0NjU0MzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1465430?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/igorline",
    "html_url": "https://github.com/igorline",
    "followers_url": "https://api.github.com/users/igorline/followers",
    "following_url": "https://api.github.com/users/igorline/following{/other_user}",
    "gists_url": "https://api.github.com/users/igorline/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/igorline/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/igorline/subscriptions",
    "organizations_url": "https://api.github.com/users/igorline/orgs",
    "repos_url": "https://api.github.com/users/igorline/repos",
    "events_url": "https://api.github.com/users/igorline/events{/privacy}",
    "received_events_url": "https://api.github.com/users/igorline/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/713358744",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-713358744",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 713358744,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzM1ODc0NA==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-21T07:08:17Z",
    "updated_at": "2020-10-21T07:08:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok, currently communication via shared memory might not work for all RPC methods. So, I suggest you try two things:\r\n1) Change `--chaindata /turbo/data/tg` to `--chaindata /turbo/data/tg/chaindata` This might work, but we do not recommend it yet if TG is running on the same database. Currently running rpc daemon with `--chaindata` should be used when TG is now accessing the same database\r\n2) Use `--private.api.addr localhost:9090` for both TG and RPC daemon, and remove `--chaindata` parameter from RPC daemon, they will connect via TPC, this should definitely work",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/713358744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/714463110",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-714463110",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 714463110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDQ2MzExMA==",
    "user": {
      "login": "tjayrush",
      "id": 5417918,
      "node_id": "MDQ6VXNlcjU0MTc5MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5417918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tjayrush",
      "html_url": "https://github.com/tjayrush",
      "followers_url": "https://api.github.com/users/tjayrush/followers",
      "following_url": "https://api.github.com/users/tjayrush/following{/other_user}",
      "gists_url": "https://api.github.com/users/tjayrush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tjayrush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tjayrush/subscriptions",
      "organizations_url": "https://api.github.com/users/tjayrush/orgs",
      "repos_url": "https://api.github.com/users/tjayrush/repos",
      "events_url": "https://api.github.com/users/tjayrush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tjayrush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-22T12:35:29Z",
    "updated_at": "2020-10-22T12:35:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AlexeyAkhunov I think this is what you and I talked about yesterday. I'll try to look into this.\r\n\r\nI started TG with `--datadir=WHATEVER`, and then started the RPC daemon with `--chaindata=WHATEVER/tg/chaindata`. I then wrote a short script that uses `curl` to repeatedly call `eth_blockNumber` (once every second) expecting that the results wouldn't change (I thought that's how it would work).\r\n\r\nI found that the `blockNumber` was updating each time `TG` processed a new block.\r\n\r\n@igorline Am I understanding what you were trying to do?  Does adding `chaindata` to the RPC daemon path fix the issue?\r\n\r\nPerhaps the bug is that the RPC daemon should report if it can't find the database in the provided `--chaindata` path.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/714463110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/714844290",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-714844290",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 714844290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDg0NDI5MA==",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-23T01:05:20Z",
    "updated_at": "2020-10-23T01:05:20Z",
    "author_association": "COLLABORATOR",
    "body": "@tjayrush also there is a problem that `rawdb.ReadBlockByNumber` doesn't return error. \r\nI created issue to start changing it: https://github.com/ledgerwatch/turbo-geth/issues/1261\r\ntake it also if you can plz. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/714844290/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/714846649",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-714846649",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 714846649,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNDg0NjY0OQ==",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-23T01:14:30Z",
    "updated_at": "2020-10-23T01:14:30Z",
    "author_association": "COLLABORATOR",
    "body": "@tjayrush , code which creates non-existing folder in method `kv_lmdb:Open` -> `os.MkdirAll`\r\n\r\ni thinking about next change: \r\n- RPCDaemon to open lmdb in ReadOnly mode. Code is in `cmd/rpcdaemon/cli:OpenDB`\r\n- change `kv_lmdb:Open` method - if db opened in ReadOnly mode it doesn't create folder and if it doesn't exists return error instead.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/714846649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/719917687",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-719917687",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 719917687,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxOTkxNzY4Nw==",
    "user": {
      "login": "igorline",
      "id": 1465430,
      "node_id": "MDQ6VXNlcjE0NjU0MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1465430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igorline",
      "html_url": "https://github.com/igorline",
      "followers_url": "https://api.github.com/users/igorline/followers",
      "following_url": "https://api.github.com/users/igorline/following{/other_user}",
      "gists_url": "https://api.github.com/users/igorline/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igorline/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igorline/subscriptions",
      "organizations_url": "https://api.github.com/users/igorline/orgs",
      "repos_url": "https://api.github.com/users/igorline/repos",
      "events_url": "https://api.github.com/users/igorline/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igorline/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-31T10:56:43Z",
    "updated_at": "2020-10-31T10:56:43Z",
    "author_association": "NONE",
    "body": "Sorry for disappearing :)\r\n\r\n@AlexeyAkhunov, `--private.api.addr localhost:9090` worked as expected\r\n\r\n@tjayrush I was just trying to read data from the node without success following installation instructions in the documentation without success.\r\n\r\nSo using `chaindata` flag is not recommended atm?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/719917687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/720993541",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-720993541",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 720993541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMDk5MzU0MQ==",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-03T09:11:03Z",
    "updated_at": "2020-11-03T09:11:03Z",
    "author_association": "COLLABORATOR",
    "body": "@igorline we fixed `chaindata` flag last week, feel free to try it. Thank. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/720993541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/724587162",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-724587162",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 724587162,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDU4NzE2Mg==",
    "user": {
      "login": "igorline",
      "id": 1465430,
      "node_id": "MDQ6VXNlcjE0NjU0MzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1465430?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/igorline",
      "html_url": "https://github.com/igorline",
      "followers_url": "https://api.github.com/users/igorline/followers",
      "following_url": "https://api.github.com/users/igorline/following{/other_user}",
      "gists_url": "https://api.github.com/users/igorline/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/igorline/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/igorline/subscriptions",
      "organizations_url": "https://api.github.com/users/igorline/orgs",
      "repos_url": "https://api.github.com/users/igorline/repos",
      "events_url": "https://api.github.com/users/igorline/events{/privacy}",
      "received_events_url": "https://api.github.com/users/igorline/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-10T09:42:36Z",
    "updated_at": "2020-11-10T09:42:36Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov it works! Would be great to have default `chaindata` locations specified not only for Mac OS here https://github.com/ledgerwatch/turbo-geth#json-rpc-daemon\r\n\r\nDo you have any public communication channel? I still have some questions but don't know where to ask :)",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/724587162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/724607398",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1273#issuecomment-724607398",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1273",
    "id": 724607398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDYwNzM5OA==",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-10T10:18:13Z",
    "updated_at": "2020-11-10T10:19:09Z",
    "author_association": "COLLABORATOR",
    "body": "@igorline \r\nwe supporting XDG_DATA_HOME ( https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html ) \r\nyep, discord server is here: https://github.com/ledgerwatch/turbo-geth#turbo-geth-discord-server",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/724607398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

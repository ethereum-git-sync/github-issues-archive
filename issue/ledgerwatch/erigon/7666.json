{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7666",
  "id": 1741469116,
  "node_id": "I_kwDOC0FsAM5nzLW8",
  "number": 7666,
  "title": "Polygon MDBX_MAP_FULL: Environment mapsize limit reached",
  "user": {
    "login": "artjoma",
    "id": 15686738,
    "node_id": "MDQ6VXNlcjE1Njg2NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/artjoma",
    "html_url": "https://github.com/artjoma",
    "followers_url": "https://api.github.com/users/artjoma/followers",
    "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
    "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
    "organizations_url": "https://api.github.com/users/artjoma/orgs",
    "repos_url": "https://api.github.com/users/artjoma/repos",
    "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/artjoma/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 11,
  "created_at": "2023-06-05T10:26:07Z",
  "updated_at": "2023-08-16T11:23:58Z",
  "closed_at": "2023-06-08T12:15:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `2.44.1`\r\n\r\nOS & Version: Linux\r\n\r\nErigon Command (with flags/config):\r\n```\r\n/home/blockchain/polygon-mainnet/erigon \\\r\n --chain=bor-mainnet \\\r\n --snapshots=true \\\r\n --datadir=/home/blockchain/polygon-mainnet/chaindata \\\r\n --db.pagesize=16kb \\\r\n --bor.heimdall=http://x.x.x.x:1317 \\\r\n --p2p.protocol=66 \\\r\n --port=30304 \\\r\n --no-downloader \\\r\n --private.api.addr=127.0.0.1:9092 \\\r\n  --bootnodes=\"enode://0cb82b395094ee4a2915e9714894627de9ed8498fb881cec6db7c65e8b9a5bd7f2f25cc84e71e89d0947e51c76e85d0847de848c7782b13c0255247a6758178c@44.232.55.71:30303\",\"enode://88116f4295f5a31538ae409e4d44ad40d22e44ee9342869e7d68bdec55b>\r\n  --torrent.port=42070 \\\r\n --metrics --metrics.port=8695 --metrics.addr=0.0.0.0\r\n```\r\n\r\nChain/Network: Polygon mainnet\r\n\r\n#### Expected behaviour\r\nReplaced Erigon binary from 2.43.0 to 2.44.1 version. If rollback version to 2.43.0 back works fine.\r\n\r\n#### Actual behaviour\r\n``` mdbx_txn_commit_ex: MDBX_MAP_FULL: Environment mapsize limit reached ```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[INFO] [06-05|09:56:57.919] Starting Erigon on Bor Mainnet... \r\n[INFO] [06-05|09:56:57.919] Maximum peer count                       ETH=100 total=100\r\n[INFO] [06-05|09:56:57.919] starting HTTP APIs                       APIs=eth,erigon,engine\r\n[INFO] [06-05|09:56:57.919] torrent verbosity                        level=WRN\r\n[INFO] [06-05|09:57:00.027] Set global gas cap                       cap=50000000\r\n[INFO] [06-05|09:57:00.034] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=16mb upload.rate=4mb\r\n[INFO] [06-05|09:57:00.034] Opening Database                         label=chaindata path=/home/blockchain/polygon-mainnet/chaindata/chaindata\r\npage_alloc_slowpath:10501 unable alloc 4 pages, flags 0x2, errcode -30792\r\n[EROR] [06-05|09:57:00.219] catch panic                              err=\"mdbx_txn_commit_ex: MDBX_MAP_FULL: Environment mapsize limit reached\" stack=\"[main.go:32 panic.go:884 backend.go:294 node.go:107 main.go:66 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:37 proc.go:250 asm_amd64.s:1594]\"\r\n\r\n````\r\n",
  "closed_by": {
    "login": "artjoma",
    "id": 15686738,
    "node_id": "MDQ6VXNlcjE1Njg2NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/artjoma",
    "html_url": "https://github.com/artjoma",
    "followers_url": "https://api.github.com/users/artjoma/followers",
    "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
    "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
    "organizations_url": "https://api.github.com/users/artjoma/orgs",
    "repos_url": "https://api.github.com/users/artjoma/repos",
    "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/artjoma/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1576839381",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1576839381",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1576839381,
    "node_id": "IC_kwDOC0FsAM5d_KjV",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-05T13:46:35Z",
    "updated_at": "2023-06-05T13:46:35Z",
    "author_association": "COLLABORATOR",
    "body": "Increase â€”db.size.limit",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1576839381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1578784700",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1578784700",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1578784700,
    "node_id": "IC_kwDOC0FsAM5eGle8",
    "user": {
      "login": "ishanjain28",
      "id": 7921368,
      "node_id": "MDQ6VXNlcjc5MjEzNjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7921368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ishanjain28",
      "html_url": "https://github.com/ishanjain28",
      "followers_url": "https://api.github.com/users/ishanjain28/followers",
      "following_url": "https://api.github.com/users/ishanjain28/following{/other_user}",
      "gists_url": "https://api.github.com/users/ishanjain28/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ishanjain28/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ishanjain28/subscriptions",
      "organizations_url": "https://api.github.com/users/ishanjain28/orgs",
      "repos_url": "https://api.github.com/users/ishanjain28/repos",
      "events_url": "https://api.github.com/users/ishanjain28/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ishanjain28/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-06T13:35:55Z",
    "updated_at": "2023-06-06T13:35:55Z",
    "author_association": "NONE",
    "body": "Thank you @AskAlexSharov !\r\n\r\nOur mainnet archive node is taking ~4.8T space and I was seeing this error after upgrading. Adjust `--db.size.limit` fixes the problem. (I set it to 6TB). \r\n\r\n```\r\n> debian@archive:~$ du -sh data/erigon-mainnet/*\r\n0\tdata/erigon-mainnet/LOCK\r\n4.8T\tdata/erigon-mainnet/chaindata\r\n4.0K\tdata/erigon-mainnet/jwt.hex\r\n336M\tdata/erigon-mainnet/logs\r\n4.0K\tdata/erigon-mainnet/nodekey\r\n39M\tdata/erigon-mainnet/nodes\r\n361G\tdata/erigon-mainnet/snapshots\r\n116K\tdata/erigon-mainnet/temp\r\n463M\tdata/erigon-mainnet/txpool\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1578784700/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1580164345",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1580164345",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1580164345,
    "node_id": "IC_kwDOC0FsAM5eL2T5",
    "user": {
      "login": "artjoma",
      "id": 15686738,
      "node_id": "MDQ6VXNlcjE1Njg2NzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artjoma",
      "html_url": "https://github.com/artjoma",
      "followers_url": "https://api.github.com/users/artjoma/followers",
      "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
      "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
      "organizations_url": "https://api.github.com/users/artjoma/orgs",
      "repos_url": "https://api.github.com/users/artjoma/repos",
      "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artjoma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-07T08:09:46Z",
    "updated_at": "2023-06-07T08:09:46Z",
    "author_association": "NONE",
    "body": "@AskAlexSharov \r\n```\r\npolygon-mainnet# du -hs chaindata/\r\n6.6T    chaindata/\r\n```\r\nErigon: \r\n```\r\n--db.size.limit=10TB \\\r\n--db.pagesize=16kb \\\r\n```\r\n```\r\n[INFO] [06-07|07:52:10.361] [txpool] stat                            pending=10000 baseFee=1964 queued=30000 alloc=3.5GB sys=9.0GB\r\n[INFO] [06-07|07:53:09.575] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|07:53:10.362] [txpool] stat                            pending=10000 baseFee=1965 queued=30000 alloc=3.8GB sys=9.0GB\r\n[INFO] [06-07|07:54:10.360] [txpool] stat                            pending=10000 baseFee=1966 queued=30000 alloc=3.5GB sys=9.0GB\r\n[INFO] [06-07|07:55:09.575] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|07:55:10.368] [txpool] stat                            pending=10000 baseFee=1966 queued=30000 alloc=3.8GB sys=9.0GB\r\n[EROR] [06-07|07:55:28.690] Staged Sync                              err=\"[5/15 Bodies] WriteRawBodyIfNotExists: WriteRawTransactions: txId=2842924798, baseTxId=2842924710, bucket: BlockTransaction, mdbx_cursor_put: MDBX_MAP_FULL: Environment mapsize limit reached\"\r\n[INFO] [06-07|07:55:30.666] [5/15 Bodies] Processing bodies...       from=43590498 to=43590520\r\n[INFO] [06-07|07:55:31.471] [5/15 Bodies] Processed                  highest=43590520\r\n[INFO] [06-07|07:55:31.471] [6/15 Senders] Started                   from=43590498 to=43590520\r\n[INFO] [06-07|07:55:31.516] [7/15 Execution] Blocks execution        from=43590498 to=43590520\r\n[INFO] [06-07|07:55:37.309] [7/15 Execution] Completed on            block=43590520\r\n[INFO] [06-07|07:55:37.310] [8/15 HashState] Promoting plain state   from=43590498 to=43590520\r\n[INFO] [06-07|07:55:37.310] [8/15 HashState] Incremental promotion   from=43590498 to=43590520 codes=true csbucket=AccountChangeSet\r\n[INFO] [06-07|07:55:37.609] [8/15 HashState] Incremental promotion   from=43590498 to=43590520 codes=false csbucket=AccountChangeSet\r\n[INFO] [06-07|07:55:37.984] [8/15 HashState] Incremental promotion   from=43590498 to=43590520 codes=false csbucket=StorageChangeSet\r\n[INFO] [06-07|07:55:39.598] [9/15 IntermediateHashes] Generating intermediate hashes from=43590498 to=43590520\r\n[INFO] [06-07|07:55:46.337] [10/15 CallTraces] Pruned call trace intermediate table from=43500498 to=43500519\r\n[INFO] [06-07|07:55:56.529] new subscription to newHeaders established \r\n[INFO] [06-07|07:55:56.529] New txs subscriber joined \r\n[INFO] [06-07|07:56:10.360] [txpool] stat                            pending=10000 baseFee=1967 queued=30000 alloc=4.0GB sys=9.0GB\r\n[INFO] [06-07|07:57:09.575] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|07:57:10.359] [txpool] stat                            pending=10000 baseFee=1968 queued=30000 alloc=4.3GB sys=9.0GB\r\n[INFO] [06-07|07:58:10.360] [txpool] stat                            pending=10000 baseFee=1969 queued=30000 alloc=3.5GB sys=9.0GB\r\n[INFO] [06-07|07:59:09.575] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|07:59:10.361] [txpool] stat                            pending=10000 baseFee=1970 queued=30000 alloc=3.7GB sys=9.0GB\r\n[INFO] [06-07|08:00:10.363] [txpool] stat                            pending=10000 baseFee=1975 queued=30000 alloc=3.5GB sys=9.0GB\r\n[INFO] [06-07|08:01:08.220] New txs subscriber joined \r\n[INFO] [06-07|08:01:08.220] new subscription to newHeaders established \r\n[INFO] [06-07|08:01:09.575] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|08:01:10.360] [txpool] stat                            pending=10000 baseFee=1977 queued=30000 alloc=3.8GB sys=9.0GB\r\n[INFO] [06-07|08:02:10.361] [txpool] stat                            pending=10000 baseFee=1979 queued=30000 alloc=3.5GB sys=9.0GB\r\n[INFO] [06-07|08:03:09.575] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|08:03:10.362] [txpool] stat                            pending=10000 baseFee=1979 queued=30000 alloc=3.8GB sys=9.0GB\r\n[INFO] [06-07|08:04:10.362] [txpool] stat                            pending=10000 baseFee=1982 queued=30000 alloc=3.5GB sys=9.0GB\r\n[INFO] [06-07|08:05:09.576] [p2p] GoodPeers                          eth66=100\r\n[INFO] [06-07|08:05:10.364] [txpool] stat                            pending=10000 baseFee=1980 queued=30000 alloc=3.7GB sys=9.0GB\r\n\r\n ```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1580164345/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1635790375",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1635790375",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1635790375,
    "node_id": "IC_kwDOC0FsAM5hgC4n",
    "user": {
      "login": "Jyoti-singh18",
      "id": 56082517,
      "node_id": "MDQ6VXNlcjU2MDgyNTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/56082517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jyoti-singh18",
      "html_url": "https://github.com/Jyoti-singh18",
      "followers_url": "https://api.github.com/users/Jyoti-singh18/followers",
      "following_url": "https://api.github.com/users/Jyoti-singh18/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jyoti-singh18/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jyoti-singh18/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jyoti-singh18/subscriptions",
      "organizations_url": "https://api.github.com/users/Jyoti-singh18/orgs",
      "repos_url": "https://api.github.com/users/Jyoti-singh18/repos",
      "events_url": "https://api.github.com/users/Jyoti-singh18/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jyoti-singh18/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T12:26:03Z",
    "updated_at": "2023-07-14T12:26:03Z",
    "author_association": "NONE",
    "body": "@artjoma \r\n\r\nFound this comment on another issue https://github.com/ledgerwatch/erigon/issues/7829#issuecomment-1624581526\r\n\r\ncan we set the db size limit to anything more than 8 TB?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1635790375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1635869604",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1635869604",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1635869604,
    "node_id": "IC_kwDOC0FsAM5hgWOk",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T13:30:11Z",
    "updated_at": "2023-07-14T13:30:11Z",
    "author_association": "COLLABORATOR",
    "body": "yes, if pagesize > 4kb",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1635869604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1635877990",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1635877990",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1635877990,
    "node_id": "IC_kwDOC0FsAM5hgYRm",
    "user": {
      "login": "Jyoti-singh18",
      "id": 56082517,
      "node_id": "MDQ6VXNlcjU2MDgyNTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/56082517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jyoti-singh18",
      "html_url": "https://github.com/Jyoti-singh18",
      "followers_url": "https://api.github.com/users/Jyoti-singh18/followers",
      "following_url": "https://api.github.com/users/Jyoti-singh18/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jyoti-singh18/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jyoti-singh18/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jyoti-singh18/subscriptions",
      "organizations_url": "https://api.github.com/users/Jyoti-singh18/orgs",
      "repos_url": "https://api.github.com/users/Jyoti-singh18/repos",
      "events_url": "https://api.github.com/users/Jyoti-singh18/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jyoti-singh18/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-14T13:36:46Z",
    "updated_at": "2023-07-14T13:36:46Z",
    "author_association": "NONE",
    "body": "- \"--db.size.limit=10TB\"\r\n- \"--db.pagesize=16kb\"\r\nStill gives the following error:\r\n\r\n[INFO] [07-14|13:35:28.994] Opening Database label=chaindata path=/data/erigon/datadir/chaindata\r\nmdbx_setup_dxb:15897 could not apply preconfigured db-geometry: err -30417\r\n[EROR] [07-14|13:35:28.995] Erigon startup err=\"mdbx_env_open: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM, label: chaindata, trace: [kv_mdbx.go:262 node.go:341 node.go:344 backend.go:208 node.go:109 main.go:70 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:38 proc.go:250 asm_amd64.s:1598]\"\r\nmdbx_env_open: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM, label: chaindata, trace: [kv_mdbx.go:262 node.go:341 node.go:344 backend.go:208 node.go:109 main.go:70 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:38 proc.go:250 asm_amd64.s:1598]",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1635877990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1636682654",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1636682654",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1636682654,
    "node_id": "IC_kwDOC0FsAM5hjcue",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-15T06:23:51Z",
    "updated_at": "2023-07-15T06:23:51Z",
    "author_association": "COLLABORATOR",
    "body": "mdbx_stat -ef datadir/chaindata",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1636682654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1659518694",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1659518694",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1659518694,
    "node_id": "IC_kwDOC0FsAM5i6j7m",
    "user": {
      "login": "trugard",
      "id": 111804804,
      "node_id": "U_kgDOBqoBhA",
      "avatar_url": "https://avatars.githubusercontent.com/u/111804804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/trugard",
      "html_url": "https://github.com/trugard",
      "followers_url": "https://api.github.com/users/trugard/followers",
      "following_url": "https://api.github.com/users/trugard/following{/other_user}",
      "gists_url": "https://api.github.com/users/trugard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/trugard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/trugard/subscriptions",
      "organizations_url": "https://api.github.com/users/trugard/orgs",
      "repos_url": "https://api.github.com/users/trugard/repos",
      "events_url": "https://api.github.com/users/trugard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/trugard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-01T03:44:27Z",
    "updated_at": "2023-08-01T03:44:27Z",
    "author_association": "NONE",
    "body": "We're running an archive node, v0.0.8, hovering at just under 11TB. Although we've updated the db.size.limit to 14TB and the db.pagesize to 16kb, we're still getting strange behavior when starting the node :\r\n\r\n`[INFO] [08-01|02:56:09.387] Opening Database                         label=chaindata path=/opt/erigon/ethereum/chaindata                                               page_alloc_slowpath:10501 unable alloc 3172 pages, flags 0x2, errcode -30792                                                                                           [EROR] [08-01|02:56:53.475] catch panic                              err=\"mdbx_txn_commit_ex: MDBX_MAP_FULL: Environment mapsize limit reached\" stack=\"[main.go:33 pa  ic.go:884 backend.go:289 node.go:109 main.go:70 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:38 proc.go:250 asm_amd64.s:1598[]\"        `                \r\n\r\nI'm sure we're not the first to come across this, as this thread suggests, but we're still diagnosing. Any other suggestions out there?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1659518694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1659522090",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1659522090",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1659522090,
    "node_id": "IC_kwDOC0FsAM5i6kwq",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-01T03:49:47Z",
    "updated_at": "2023-08-01T03:49:47Z",
    "author_association": "COLLABORATOR",
    "body": "Can set pagesize only at db creation. \r\nhttps://github.com/ledgerwatch/erigon/tree/devel/cmd/integration#copy-data-to-another-db",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1659522090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1659528649",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1659528649",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1659528649,
    "node_id": "IC_kwDOC0FsAM5i6mXJ",
    "user": {
      "login": "trugard",
      "id": 111804804,
      "node_id": "U_kgDOBqoBhA",
      "avatar_url": "https://avatars.githubusercontent.com/u/111804804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/trugard",
      "html_url": "https://github.com/trugard",
      "followers_url": "https://api.github.com/users/trugard/followers",
      "following_url": "https://api.github.com/users/trugard/following{/other_user}",
      "gists_url": "https://api.github.com/users/trugard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/trugard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/trugard/subscriptions",
      "organizations_url": "https://api.github.com/users/trugard/orgs",
      "repos_url": "https://api.github.com/users/trugard/repos",
      "events_url": "https://api.github.com/users/trugard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/trugard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-01T04:00:15Z",
    "updated_at": "2023-08-01T04:00:15Z",
    "author_association": "NONE",
    "body": "ugh....ok, I thought we might need to do this....  thanks.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1659528649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1680424422",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1680424422",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1680424422,
    "node_id": "IC_kwDOC0FsAM5kKT3m",
    "user": {
      "login": "crebsy",
      "id": 121096251,
      "node_id": "U_kgDOBzfIOw",
      "avatar_url": "https://avatars.githubusercontent.com/u/121096251?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/crebsy",
      "html_url": "https://github.com/crebsy",
      "followers_url": "https://api.github.com/users/crebsy/followers",
      "following_url": "https://api.github.com/users/crebsy/following{/other_user}",
      "gists_url": "https://api.github.com/users/crebsy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/crebsy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/crebsy/subscriptions",
      "organizations_url": "https://api.github.com/users/crebsy/orgs",
      "repos_url": "https://api.github.com/users/crebsy/repos",
      "events_url": "https://api.github.com/users/crebsy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/crebsy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-16T11:23:57Z",
    "updated_at": "2023-08-16T11:23:57Z",
    "author_association": "NONE",
    "body": "ran into the same issue with `MDBX_MAP_FULL` and increased `db.size.limit` to 12 TB. This worked for a few days until the db got currupted, probably because I didn't increase page size to a higher value :-/\r\n\r\nChecked the db with `mdbx_chk` and it says that the filesizes in the meta-pages are off now:\r\n```\r\n$ ./mdbx_chk -vvv -2 /data/erigon/chaindata/mdbx.dat \r\nmdbx_chk v0.12.0-71-g1cac6536 (2022-07-28T09:57:31+07:00, T-9a6d7e5b917e5fbd14dc51835fa749d092aa1d72)\r\nRunning for /data/erigon/chaindata/mdbx.dat in 'read-only' mode...\r\n ~ meta[1] used-bytes (4561814069248) beyond filesize (4561809612800), skip it\r\n ~ meta[2] used-bytes (4561814069248) beyond filesize (4561809612800), skip it\r\n ~ meta[1] used-bytes (4561814069248) beyond filesize (4561809612800), skip it\r\n ~ meta[2] used-bytes (4561814069248) beyond filesize (4561809612800), skip it\r\n ! no usable meta-pages, database is corrupted\r\n ! mdbx_env_open() failed, error -30796 MDBX_CORRUPTED: Database is corrupted\r\n```\r\n\r\n@AskAlexSharov  is there anything I could do to recalculate the `used-bytes` on the meta-pages, so I could copy the data over to a new db with bigger 16kB page size ? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1680424422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

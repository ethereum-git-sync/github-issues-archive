{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7666",
  "id": 1741469116,
  "node_id": "I_kwDOC0FsAM5nzLW8",
  "number": 7666,
  "title": "Polygon MDBX_MAP_FULL: Environment mapsize limit reached",
  "user": {
    "login": "artjoma",
    "id": 15686738,
    "node_id": "MDQ6VXNlcjE1Njg2NzM4",
    "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/artjoma",
    "html_url": "https://github.com/artjoma",
    "followers_url": "https://api.github.com/users/artjoma/followers",
    "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
    "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
    "organizations_url": "https://api.github.com/users/artjoma/orgs",
    "repos_url": "https://api.github.com/users/artjoma/repos",
    "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/artjoma/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-06-05T10:26:07Z",
  "updated_at": "2023-06-05T13:46:35Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `2.44.1`\r\n\r\nOS & Version: Linux\r\n\r\nErigon Command (with flags/config):\r\n```\r\n/home/blockchain/polygon-mainnet/erigon \\\r\n --chain=bor-mainnet \\\r\n --snapshots=true \\\r\n --datadir=/home/blockchain/polygon-mainnet/chaindata \\\r\n --db.pagesize=16kb \\\r\n --bor.heimdall=http://x.x.x.x:1317 \\\r\n --p2p.protocol=66 \\\r\n --port=30304 \\\r\n --no-downloader \\\r\n --private.api.addr=127.0.0.1:9092 \\\r\n  --bootnodes=\"enode://0cb82b395094ee4a2915e9714894627de9ed8498fb881cec6db7c65e8b9a5bd7f2f25cc84e71e89d0947e51c76e85d0847de848c7782b13c0255247a6758178c@44.232.55.71:30303\",\"enode://88116f4295f5a31538ae409e4d44ad40d22e44ee9342869e7d68bdec55b>\r\n  --torrent.port=42070 \\\r\n --metrics --metrics.port=8695 --metrics.addr=0.0.0.0\r\n```\r\n\r\nChain/Network: Polygon mainnet\r\n\r\n#### Expected behaviour\r\nReplaced Erigon binary from 2.43.0 to 2.44.1 version. If rollback version to 2.43.0 back works fine.\r\n\r\n#### Actual behaviour\r\n``` mdbx_txn_commit_ex: MDBX_MAP_FULL: Environment mapsize limit reached ```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n\r\n#### Backtrace\r\n\r\n````\r\n[INFO] [06-05|09:56:57.919] Starting Erigon on Bor Mainnet... \r\n[INFO] [06-05|09:56:57.919] Maximum peer count                       ETH=100 total=100\r\n[INFO] [06-05|09:56:57.919] starting HTTP APIs                       APIs=eth,erigon,engine\r\n[INFO] [06-05|09:56:57.919] torrent verbosity                        level=WRN\r\n[INFO] [06-05|09:57:00.027] Set global gas cap                       cap=50000000\r\n[INFO] [06-05|09:57:00.034] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=16mb upload.rate=4mb\r\n[INFO] [06-05|09:57:00.034] Opening Database                         label=chaindata path=/home/blockchain/polygon-mainnet/chaindata/chaindata\r\npage_alloc_slowpath:10501 unable alloc 4 pages, flags 0x2, errcode -30792\r\n[EROR] [06-05|09:57:00.219] catch panic                              err=\"mdbx_txn_commit_ex: MDBX_MAP_FULL: Environment mapsize limit reached\" stack=\"[main.go:32 panic.go:884 backend.go:294 node.go:107 main.go:66 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:37 proc.go:250 asm_amd64.s:1594]\"\r\n\r\n````\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1576839381",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7666#issuecomment-1576839381",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7666",
    "id": 1576839381,
    "node_id": "IC_kwDOC0FsAM5d_KjV",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-05T13:46:35Z",
    "updated_at": "2023-06-05T13:46:35Z",
    "author_association": "COLLABORATOR",
    "body": "Increase â€”db.size.limit",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1576839381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

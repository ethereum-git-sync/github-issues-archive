{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8271",
  "id": 1908630369,
  "node_id": "I_kwDOC0FsAM5xw2Nh",
  "number": 8271,
  "title": "Limit torrent outbound traffic",
  "user": {
    "login": "michelescippa",
    "id": 74839770,
    "node_id": "MDQ6VXNlcjc0ODM5Nzcw",
    "avatar_url": "https://avatars.githubusercontent.com/u/74839770?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michelescippa",
    "html_url": "https://github.com/michelescippa",
    "followers_url": "https://api.github.com/users/michelescippa/followers",
    "following_url": "https://api.github.com/users/michelescippa/following{/other_user}",
    "gists_url": "https://api.github.com/users/michelescippa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michelescippa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michelescippa/subscriptions",
    "organizations_url": "https://api.github.com/users/michelescippa/orgs",
    "repos_url": "https://api.github.com/users/michelescippa/repos",
    "events_url": "https://api.github.com/users/michelescippa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michelescippa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-09-22T10:19:54Z",
  "updated_at": "2023-09-22T20:02:05Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "erigon version 2.49.2-stable-a8ae8a03\r\nUbuntu 22.04.3 LTS\r\n\r\nopt/erigon/erigon --datadir=/data/erigon --torrent.download.rate=128mb --torrent.upload.rate=1mb  --prune=hrtc --internalcl --nat=none -http.api=\"eth,admin,debug,net,trace,web3,erigon\" --http.compression --ws --ws.compression\r\n\r\nI'm trying to limit outbound traffic for torrent, but it seems not working. Torrent is causing me upload of 300-400GB/day, making very expensive to run the node on a cloud provider.\r\n\r\nTried to use upload.rate flag, also no-downloader flag, but no one seems to work.\r\n\r\nAny suggestion?\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731200365",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8271#issuecomment-1731200365",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271",
    "id": 1731200365,
    "node_id": "IC_kwDOC0FsAM5nMAVt",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-22T10:40:24Z",
    "updated_at": "2023-09-22T10:40:24Z",
    "author_association": "COLLABORATOR",
    "body": "Show ` [Downloader] Runnning with` log line\r\n\r\n`300-400GB/day` - is it data from torrent port or from overall node?\r\n\r\n(1mb * 60 * 60 * 24) = 100Gb/day. So, it's kind-of matching what you see. If you need reduce rate - just reduce rate: --torren.upload.rate=256kb",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731200365/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731240577",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8271#issuecomment-1731240577",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271",
    "id": 1731240577,
    "node_id": "IC_kwDOC0FsAM5nMKKB",
    "user": {
      "login": "michelescippa",
      "id": 74839770,
      "node_id": "MDQ6VXNlcjc0ODM5Nzcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/74839770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michelescippa",
      "html_url": "https://github.com/michelescippa",
      "followers_url": "https://api.github.com/users/michelescippa/followers",
      "following_url": "https://api.github.com/users/michelescippa/following{/other_user}",
      "gists_url": "https://api.github.com/users/michelescippa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michelescippa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michelescippa/subscriptions",
      "organizations_url": "https://api.github.com/users/michelescippa/orgs",
      "repos_url": "https://api.github.com/users/michelescippa/repos",
      "events_url": "https://api.github.com/users/michelescippa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michelescippa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-22T11:12:09Z",
    "updated_at": "2023-09-22T11:14:05Z",
    "author_association": "NONE",
    "body": "Limiting upload rate seems not working.\r\n\r\nJust rebooted and started with 16kb value.\r\n\r\n`[Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=128mb upload.rate=16kb`\r\n\r\nBut look at nload (just started, but has peaks of 70-80 mbit, and over 50 costantly usually):\r\n\r\n<img width=\"1001\" alt=\"traffic\" src=\"https://github.com/ledgerwatch/erigon/assets/74839770/0768405a-983c-4d34-913e-ce0cdc5003dd\">\r\n\r\n300/400GB is the data of the node, but is still syncing, probably I was also generous.\r\n\r\nAlso setting `--no-downloader` flag seems not working. The downloader starts anyway.\r\n\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731240577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731322415",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8271#issuecomment-1731322415",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271",
    "id": 1731322415,
    "node_id": "IC_kwDOC0FsAM5nMeIv",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-22T12:19:55Z",
    "updated_at": "2023-09-22T12:19:55Z",
    "author_association": "COLLABORATOR",
    "body": "Close port by firewall for now. \r\nwill need investigate. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731322415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731973134",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8271#issuecomment-1731973134",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8271",
    "id": 1731973134,
    "node_id": "IC_kwDOC0FsAM5nO9AO",
    "user": {
      "login": "michelescippa",
      "id": 74839770,
      "node_id": "MDQ6VXNlcjc0ODM5Nzcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/74839770?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michelescippa",
      "html_url": "https://github.com/michelescippa",
      "followers_url": "https://api.github.com/users/michelescippa/followers",
      "following_url": "https://api.github.com/users/michelescippa/following{/other_user}",
      "gists_url": "https://api.github.com/users/michelescippa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michelescippa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michelescippa/subscriptions",
      "organizations_url": "https://api.github.com/users/michelescippa/orgs",
      "repos_url": "https://api.github.com/users/michelescippa/repos",
      "events_url": "https://api.github.com/users/michelescippa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michelescippa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-22T20:02:05Z",
    "updated_at": "2023-09-22T20:02:05Z",
    "author_association": "NONE",
    "body": "The strange thing is that it seems to completely ignore also the `--no-downloader` flag.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1731973134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

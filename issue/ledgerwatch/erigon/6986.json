{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/6986",
  "id": 1603263731,
  "node_id": "I_kwDOC0FsAM5fj9zz",
  "number": 6986,
  "title": "Erigon on Windows always crashes",
  "user": {
    "login": "yerazy",
    "id": 126590871,
    "node_id": "U_kgDOB4uflw",
    "avatar_url": "https://avatars.githubusercontent.com/u/126590871?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yerazy",
    "html_url": "https://github.com/yerazy",
    "followers_url": "https://api.github.com/users/yerazy/followers",
    "following_url": "https://api.github.com/users/yerazy/following{/other_user}",
    "gists_url": "https://api.github.com/users/yerazy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yerazy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yerazy/subscriptions",
    "organizations_url": "https://api.github.com/users/yerazy/orgs",
    "repos_url": "https://api.github.com/users/yerazy/repos",
    "events_url": "https://api.github.com/users/yerazy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yerazy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-02-28T15:13:06Z",
  "updated_at": "2023-03-16T08:29:01Z",
  "closed_at": "2023-03-16T08:29:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: erigon version 2.38.0-dev-ae8657e2 and erigon version 2.38.1-stable-52fd6d60\r\n\r\nOS & Version:  run and compiled on Windows 10 Pro 22H2 (19045.2006), just launched on Windows server 2019 (1809) \r\n\r\nCommit hash: \r\n\r\nErigon Command (with flags/config):\r\nerigon --datadir=\"E:\\erigon-test-windows\" --chain=mainnet --torrent.download.rate=256mb --log.dir.path=\"E:\\erigon-test-windows\" --nat=any --port=30303 --http.port=8545 --authrpc.port=8551 --torrent.port=42069 --private.api.addr=127.0.0.1:9090 --http --ws --http.api=eth,debug,net,trace,web3,erigon\r\n\r\nConcensus Layer: -\r\n\r\nConcensus Layer Command (with flags/config): -\r\n\r\nChain/Network:  mainnet\r\n\r\n#### Expected behaviour\r\n\r\n\r\n#### Actual behaviour\r\nConstant crashes of the program at any time. the main network cannot be launched in any way.\r\nI tried the bsc network, it even starts the download with several attempts, if you ignore the errors and restart each time. \r\n\r\n#### Steps to reproduce the behaviour\r\nFirst I compiled the file on Windows 10 Pro 22H2 (19045.2006). gcc 12.2.0,go1.19.4/1.20.1 for 2.38.0-dev and go1.18.10 for 2.38.1-stable,git 2.39.2.windows.1 (no compilation errors). Launched, errors appear as in the log, nothing works. Further, the erigon executable file was transferred to Windows server 2019 (1809), installed \"go\" in the same way there, and executed \"choco install cmake make mingw\". Everything is exactly the same, the same errors and erigon does not work. On both systems, I tried the same bsc network, but after downloading a couple of hundred GB, it still crashes. The main network of the ether cannot even be launched - it immediately crashes.\r\n\r\nlog\r\n[full log erigon.txt](https://github.com/ledgerwatch/erigon/files/10851714/full.log.erigon.txt)\r\n",
  "closed_by": {
    "login": "yerazy",
    "id": 126590871,
    "node_id": "U_kgDOB4uflw",
    "avatar_url": "https://avatars.githubusercontent.com/u/126590871?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yerazy",
    "html_url": "https://github.com/yerazy",
    "followers_url": "https://api.github.com/users/yerazy/followers",
    "following_url": "https://api.github.com/users/yerazy/following{/other_user}",
    "gists_url": "https://api.github.com/users/yerazy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yerazy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yerazy/subscriptions",
    "organizations_url": "https://api.github.com/users/yerazy/orgs",
    "repos_url": "https://api.github.com/users/yerazy/repos",
    "events_url": "https://api.github.com/users/yerazy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yerazy/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1449706451",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6986#issuecomment-1449706451",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986",
    "id": 1449706451,
    "node_id": "IC_kwDOC0FsAM5WaMPT",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-01T09:39:41Z",
    "updated_at": "2023-03-01T09:39:41Z",
    "author_association": "COLLABORATOR",
    "body": "try https://github.com/ledgerwatch/erigon#windows\r\ni guess guys forgot add     -D __BLST_PORTABLE__ to wmake.ps1\r\n@yerazy  can you try git branch `win_cflags`?\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1449706451/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1450542541",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6986#issuecomment-1450542541",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6986",
    "id": 1450542541,
    "node_id": "IC_kwDOC0FsAM5WdYXN",
    "user": {
      "login": "yerazy",
      "id": 126590871,
      "node_id": "U_kgDOB4uflw",
      "avatar_url": "https://avatars.githubusercontent.com/u/126590871?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yerazy",
      "html_url": "https://github.com/yerazy",
      "followers_url": "https://api.github.com/users/yerazy/followers",
      "following_url": "https://api.github.com/users/yerazy/following{/other_user}",
      "gists_url": "https://api.github.com/users/yerazy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yerazy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yerazy/subscriptions",
      "organizations_url": "https://api.github.com/users/yerazy/orgs",
      "repos_url": "https://api.github.com/users/yerazy/repos",
      "events_url": "https://api.github.com/users/yerazy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yerazy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-01T17:25:23Z",
    "updated_at": "2023-03-01T17:25:23Z",
    "author_association": "NONE",
    "body": "> try https://github.com/ledgerwatch/erigon#windows i guess guys forgot add -D **BLST_PORTABLE** to wmake.ps1 @yerazy can you try git branch `win_cflags`?\r\n\r\nThe `win_cflags` branch works fine, the mainnet download started right away with no errors on both systems. Thank you.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1450542541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

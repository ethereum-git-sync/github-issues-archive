{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8796",
  "id": 2002556085,
  "node_id": "I_kwDOC0FsAM53XJS1",
  "number": 8796,
  "title": "Stuck at block height 17999999",
  "user": {
    "login": "caedmo",
    "id": 96791397,
    "node_id": "U_kgDOBcTrZQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/96791397?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/caedmo",
    "html_url": "https://github.com/caedmo",
    "followers_url": "https://api.github.com/users/caedmo/followers",
    "following_url": "https://api.github.com/users/caedmo/following{/other_user}",
    "gists_url": "https://api.github.com/users/caedmo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/caedmo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/caedmo/subscriptions",
    "organizations_url": "https://api.github.com/users/caedmo/orgs",
    "repos_url": "https://api.github.com/users/caedmo/repos",
    "events_url": "https://api.github.com/users/caedmo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/caedmo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-11-20T16:18:15Z",
  "updated_at": "2023-11-20T16:54:16Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hi all\r\n\r\nI'm wondering if I'm stuck, given a reused Beacon chain (previously running with Geth), against a fresh Erigon full sync?\r\nAppreciate any help/suggestions!\r\n\r\n### Notes\r\n- Stuck at block height 17999999\r\n- Previously using Geth as my Execution Chain, switched to Erigon a few weeks ago\r\n- Beacon chain setup has not changed since switching from Geth. Could this be related, given being stuck at block height 17999999?\r\n- GraphQL endpoint, only services up to block head 17999999\r\n- I have noticed Erigon output, syncing past block 18m - GraphQL never serves beyond this\r\n\r\n### Versions\r\nExecution chain: Erigon 2.53.4-c4843268\r\nBeacon chain: Nimbus v23.10.0-8b07f4\r\nGo: go1.20.10 linux/amd64\r\nOS: Fedora 36, Intel XEON \r\n\r\n### CPU\r\n```\r\n$ lscpu \r\nArchitecture:            x86_64\r\n  CPU op-mode(s):        32-bit, 64-bit\r\n  Address sizes:         46 bits physical, 48 bits virtual\r\n  Byte Order:            Little Endian\r\nCPU(s):                  24\r\n  On-line CPU(s) list:   0-23\r\nVendor ID:               GenuineIntel\r\n  Model name:            Intel(R) Xeon(R) CPU E5-2670 v3 @ 2.30GHz\r\n    CPU family:          6\r\n    Model:               63\r\n    Thread(s) per core:  2\r\n    Core(s) per socket:  12\r\n    Socket(s):           1\r\n    Stepping:            2\r\n    CPU(s) scaling MHz:  40%\r\n    CPU max MHz:         3100.0000\r\n    CPU min MHz:         1200.0000\r\n    BogoMIPS:            4597.36\r\n    Flags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid dca \r\n                         sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm cpuid_fault epb invpcid_single pti intel_ppin ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid ept_ad fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid cqm xsaveopt cqm_llc cqm_occup_llc dtherm ida arat pln pts md_clear flus                         h_l1d\r\nVirtualization features: \r\n  Virtualization:        VT-x\r\n```\r\n\r\n### Erigon configuration\r\n```\r\nerigon \\\r\n        --chain=\"mainnet\" \\\r\n        --datadir=\"/storage/ethereum/erigon/data\" \\\r\n        --snapshots=\"true\" \\\r\n        --authrpc.jwtsecret=\"/var/ethereum/jwtsecret\" \\\r\n        --torrent.download.rate=\"150mb\" --torrent.upload.rate=\"15mb\" \\\r\n        --http=\"true\" --http.api=\"web3,net,eth\" --http.addr=\"192.168.2.3\" --http.vhosts=\"*\" \\\r\n        --ws=\"true\" \\\r\n        --ws.compression=\"false\" \\\r\n#        --ws.api=\"web3,net,eth\" \\\r\n#        --ws.addr=\"192.168.2.3\" \\\r\n        --graphql=\"true\" \\\r\n        --private.api.addr=\"192.168.2.3:9191\" \\\r\n        --authrpc.addr=\"127.0.0.1\" --authrpc.port=\"8551\" --authrpc.vhosts=\"127.0.0.1\"\r\n```\r\n\r\nOutput\r\n```\r\nNov 20 09:50:23 anon-r2 systemd[1]: Started erigon.service - Erigon Client - Mainnet full.\r\nNov 20 09:50:23 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:23.837] logging to file system                   log dir=/storage/ethereum/erigon/data/logs file prefix=erigon log level=info json=false\r\nNov 20 09:50:23 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:23.837] Build info                               git_branch=HEAD git_tag=v2.53.4 git_commit=c4843268b788c0899cdad12d220fea4396afbb56\r\nNov 20 09:50:23 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:23.838] Starting Erigon on Ethereum mainnet...\r\nNov 20 09:50:23 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:23.839] Maximum peer count                       ETH=100 total=100\r\nNov 20 09:50:23 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:23.839] starting HTTP APIs                       APIs=web3,net,eth\r\nNov 20 09:50:23 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:23.840] torrent verbosity                        level=WRN\r\nNov 20 09:50:25 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:25.944] Set global gas cap                       cap=50000000\r\nNov 20 09:50:26 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:26.042] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=150mb upload.rate=15mb\r\nNov 20 09:50:26 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:26.042] Opening Database                         label=chaindata path=/storage/ethereum/erigon/data/chaindata\r\nNov 20 09:50:26 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:26.046] [db] chaindata                           sizeLimit=3TB pageSize=8192\r\nNov 20 09:50:26 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:26.047] Initialised chain configuration          config=\"{ChainID: 1, Homestead: 1150000, DAO: 1920000, Tangerine Whistle: 2463000, Spurious Dragon: 2675000, Byzantium: 4370000, Constantinople: 7280000, Petersburg: 7280000, Istanbul: 9069000, Muir Glacier: 9200000, Berlin: 12244000, London: 12965000, Arrow Glacier: 13773000, Gray Glacier: 15050000, Terminal Total Difficulty: 58750000000000000000000, Merge Netsplit: <nil>, Shanghai: 1681338455, Cancun: <nil>, Prague: <nil>, Engine: ethash}\" genesis=0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\r\nNov 20 09:50:51 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:51.800] Initialising Ethereum protocol           network=1\r\nNov 20 09:50:51 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:51.800] Disk storage enabled for ethash DAGs     dir=/storage/ethereum/erigon/data/ethash-dags count=2\r\nNov 20 09:50:51 anon-r2 erigon[2745314]: 17999999\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.795] Starting private RPC server              on=192.168.2.3:9191\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.795] new subscription to logs established\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.795] rpc filters: subscribing to Erigon events\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.795] New txs subscriber joined\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.796] new subscription to newHeaders established\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.796] HTTP endpoint opened                     url=192.168.2.3:8545 ws=true ws.compression=false grpc=false\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.796] Reading JWT secret                       path=/var/ethereum/jwtsecret\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.798] HTTP endpoint opened for Engine API      url=127.0.0.1:8551 ws=true ws.compression=false\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.809] [1/12 Snapshots] Fetching torrent files metadata\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.813] [txpool] Started\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [WARN] [11-20|09:50:53.814] NAT ExternalIP resolution has failed, try to pass a different --nat option err=\"no UPnP or NAT-PMP router discovered\"\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [WARN] [11-20|09:50:53.816] NAT ExternalIP resolution has failed, try to pass a different --nat option err=\"no UPnP or NAT-PMP router discovered\"\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.818] Started P2P networking                   version=67 self=enode://[REDACTED]@127.0.0.1:30304 name=erigon/v2.53.4-c4843268/linux-amd64/go1.20.10\r\nNov 20 09:50:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:53.820] Started P2P networking                   version=68 self=enode://[REDACTED]@127.0.0.1:30303 name=erigon/v2.53.4-c4843268/linux-amd64/go1.20.10\r\nNov 20 09:50:56 anon-r2 erigon[2745314]: [INFO] [11-20|09:50:56.981] [snapshots] Blocks Stat                  blocks=18000k indices=18000k alloc=3.4GB sys=4.4GB\r\nNov 20 09:53:51 anon-r2 erigon[2745314]: [INFO] [11-20|09:53:51.788] [p2p] GoodPeers\r\nNov 20 09:53:53 anon-r2 erigon[2745314]: [INFO] [11-20|09:53:53.796] [txpool] stat                            pending=0 baseFee=0 queued=0 alloc=2.1GB sys=4.4GB\r\n```\r\n\r\nEventually building over time, to output the same following lines;\r\n```\r\nNov 20 05:47:29 anon-r2 erigon[2375722]: [INFO] [11-20|05:47:29.039] [txpool] stat                            pending=10000 baseFee=0 queued=30000 alloc=2.2GB sys=4.5GB\r\nNov 20 05:50:09 anon-r2 erigon[2375722]: [INFO] [11-20|05:50:09.745] [p2p] GoodPeers\r\nNov 20 05:50:29 anon-r2 erigon[2375722]: [INFO] [11-20|05:50:29.038] [txpool] stat                            pending=10000 baseFee=0 queued=30000 alloc=2.2GB sys=4.5GB\r\nNov 20 05:53:09 anon-r2 erigon[2375722]: [INFO] [11-20|05:53:09.745] [p2p] GoodPeers\r\n```\r\n\r\nThanks for your help!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1819452711",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8796#issuecomment-1819452711",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8796",
    "id": 1819452711,
    "node_id": "IC_kwDOC0FsAM5scqUn",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-20T16:54:16Z",
    "updated_at": "2023-11-20T16:54:16Z",
    "author_association": "COLLABORATOR",
    "body": "—internalcl",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1819452711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/6964",
  "id": 1599995903,
  "node_id": "I_kwDOC0FsAM5fXf__",
  "number": 6964,
  "title": "Stop sync at a specific block",
  "user": {
    "login": "maximebucher",
    "id": 34308944,
    "node_id": "MDQ6VXNlcjM0MzA4OTQ0",
    "avatar_url": "https://avatars.githubusercontent.com/u/34308944?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/maximebucher",
    "html_url": "https://github.com/maximebucher",
    "followers_url": "https://api.github.com/users/maximebucher/followers",
    "following_url": "https://api.github.com/users/maximebucher/following{/other_user}",
    "gists_url": "https://api.github.com/users/maximebucher/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/maximebucher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/maximebucher/subscriptions",
    "organizations_url": "https://api.github.com/users/maximebucher/orgs",
    "repos_url": "https://api.github.com/users/maximebucher/repos",
    "events_url": "https://api.github.com/users/maximebucher/events{/privacy}",
    "received_events_url": "https://api.github.com/users/maximebucher/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-02-26T10:03:14Z",
  "updated_at": "2023-04-26T03:02:41Z",
  "closed_at": "2023-03-02T13:44:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\nHello,\r\n\r\nIs it possible to stop synchronization at a specific block? Keeping the RPC services.\r\n\r\nI use the Erigon node as a database and I'm not interested in new blocks, my hard disk will soon be full.\r\n\r\nThanks!",
  "closed_by": {
    "login": "hexoscott",
    "id": 70711990,
    "node_id": "MDQ6VXNlcjcwNzExOTkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hexoscott",
    "html_url": "https://github.com/hexoscott",
    "followers_url": "https://api.github.com/users/hexoscott/followers",
    "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
    "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
    "organizations_url": "https://api.github.com/users/hexoscott/orgs",
    "repos_url": "https://api.github.com/users/hexoscott/repos",
    "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hexoscott/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1445325126",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6964#issuecomment-1445325126",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964",
    "id": 1445325126,
    "node_id": "IC_kwDOC0FsAM5WJelG",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-26T10:42:53Z",
    "updated_at": "2023-02-26T10:42:53Z",
    "author_association": "COLLABORATOR",
    "body": "try --nodiscover ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1445325126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1445380945",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6964#issuecomment-1445380945",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964",
    "id": 1445380945,
    "node_id": "IC_kwDOC0FsAM5WJsNR",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-26T14:52:17Z",
    "updated_at": "2023-02-26T14:59:16Z",
    "author_association": "NONE",
    "body": "OP @maximebucher : Can't you just run the RPC daemon stand-alone and not run erigon node at all? I think that's how RPC works, you can run it just using the database and no syncing will be performed at all.\r\n\r\nNow to try and answer the title of this issue, stopping sync on a **specific block number**....\r\n\r\ngeth has added this feature recently with a command line option:-\r\n```\r\n--synctarget value            \r\n          File for containing the hex-encoded block-rlp as sync target(dev feature)\r\n```\r\nThis is their rationale: https://github.com/ethereum/go-ethereum/issues/26464 The idea I think is they can sync nodes in stages to share an entire historic history across machines. Why they don't just install erigon on one is lost on me! ðŸ˜„ \r\n\r\nI think it would be useful cause it's always nice to give user such functionality, however would another way in Erigon be using the hash of the block immediately after the block you want to stop on and temporarily invalidate it?\r\n\r\n`--bad.block value                                        Marks block with given hex string as bad and forces initial reorg before normal staged sync `\r\n\r\nHave not tested but I imagine node would sit there panicking? Do you need to start up erigon every time with this value? If you start it without this parameter doe it then continue to sync or do you need to do some cmd line stuff first to remove the block invalidation?\r\n\r\nMaybe another way if the block is after PoS activation would be to proxy the communication between an external CL and Erigon and lie about the current head, and don't send the beacon info for any blocks higher than what you want. Seems bloody complicated though!\r\n\r\nFor sure for someone who knows the code there's a one-line hardcode somewhere which would do it, but I still think it would be nice such an option. e.g. a use-case I can think of is you know you can sync 75% of the node on your SSD and then it gets full. So you could tell erigon to stop at a block near that. You then move your files to your hard disk or whatever and continue syncing. And of course for people who run with pruning and need historic data before it gets pruned away it's useful, which would make the use case same as the geth one above - which they thought must of been useful.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1445380945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1448245132",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6964#issuecomment-1448245132",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964",
    "id": 1448245132,
    "node_id": "IC_kwDOC0FsAM5WUneM",
    "user": {
      "login": "maximebucher",
      "id": 34308944,
      "node_id": "MDQ6VXNlcjM0MzA4OTQ0",
      "avatar_url": "https://avatars.githubusercontent.com/u/34308944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maximebucher",
      "html_url": "https://github.com/maximebucher",
      "followers_url": "https://api.github.com/users/maximebucher/followers",
      "following_url": "https://api.github.com/users/maximebucher/following{/other_user}",
      "gists_url": "https://api.github.com/users/maximebucher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maximebucher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maximebucher/subscriptions",
      "organizations_url": "https://api.github.com/users/maximebucher/orgs",
      "repos_url": "https://api.github.com/users/maximebucher/repos",
      "events_url": "https://api.github.com/users/maximebucher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maximebucher/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-28T14:10:42Z",
    "updated_at": "2023-02-28T14:10:42Z",
    "author_association": "NONE",
    "body": "It works thank you! ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1448245132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1522701938",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6964#issuecomment-1522701938",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6964",
    "id": 1522701938,
    "node_id": "IC_kwDOC0FsAM5awpZy",
    "user": {
      "login": "0xgeert",
      "id": 393259,
      "node_id": "MDQ6VXNlcjM5MzI1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/393259?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xgeert",
      "html_url": "https://github.com/0xgeert",
      "followers_url": "https://api.github.com/users/0xgeert/followers",
      "following_url": "https://api.github.com/users/0xgeert/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xgeert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xgeert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xgeert/subscriptions",
      "organizations_url": "https://api.github.com/users/0xgeert/orgs",
      "repos_url": "https://api.github.com/users/0xgeert/repos",
      "events_url": "https://api.github.com/users/0xgeert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xgeert/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T03:02:40Z",
    "updated_at": "2023-04-26T03:02:40Z",
    "author_association": "NONE",
    "body": "> It works thank you!\r\n\r\nBy restarting with â€”nodiscover? ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1522701938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

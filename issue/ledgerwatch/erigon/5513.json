{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5513",
  "id": 1385204557,
  "node_id": "I_kwDOC0FsAM5SkItN",
  "number": 5513,
  "title": "`integration stage_headers --reset` fails silently",
  "user": {
    "login": "dylancaponi",
    "id": 7399067,
    "node_id": "MDQ6VXNlcjczOTkwNjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7399067?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dylancaponi",
    "html_url": "https://github.com/dylancaponi",
    "followers_url": "https://api.github.com/users/dylancaponi/followers",
    "following_url": "https://api.github.com/users/dylancaponi/following{/other_user}",
    "gists_url": "https://api.github.com/users/dylancaponi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dylancaponi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dylancaponi/subscriptions",
    "organizations_url": "https://api.github.com/users/dylancaponi/orgs",
    "repos_url": "https://api.github.com/users/dylancaponi/repos",
    "events_url": "https://api.github.com/users/dylancaponi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dylancaponi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-09-25T23:42:37Z",
  "updated_at": "2022-10-12T01:14:46Z",
  "closed_at": "2022-10-12T01:14:46Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Running `integration stage_headers --reset` remotely, the process seems to fail silently.\r\n\r\n#### System information\r\n\r\nErigon version: 2022.09.3-dev-b940eae2\r\n\r\nOS & Version: Ubuntu 20.04.4 LTS\r\n\r\n#### Expected behaviour\r\n\r\nIntegration stage_headers --reset completes successfully\r\n\r\n#### Actual behaviour\r\n\r\nProcess fails silently.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nI stop the Erigon process and then have tried:\r\n\r\n- `nohup ./build/bin/integration stage_headers --reset --datadir /var/lib/erigon --chain mainnet &`\r\n- the same thing and then `disown`\r\n- `nohup ./build/bin/integration stage_headers --reset --datadir /var/lib/erigon --chain mainnet > output.log 2>&1 &`\r\n- running `./build/bin/integration stage_headers --reset --datadir /var/lib/erigon --chain mainnet` and then detaching\r\n\r\nAll of these start the process but then it quietly fails. There's no log indicating the process has completed.\r\n\r\n#### Backtrace\r\n\r\nExamples from two different run attempts:\r\n```\r\nnohup: ignoring input\r\n[INFO] [09-25|01:01:59.335] [fillind_db_from_snapshots] Writing total difficulty index block_num=2414775\r\n[INFO] [09-25|01:02:19.335] [fillind_db_from_snapshots] Writing total difficulty index block_num=4186522\r\n[INFO] [09-25|01:02:39.335] [fillind_db_from_snapshots] Writing total difficulty index block_num=7095644\r\n[INFO] [09-25|01:02:59.335] [fillind_db_from_snapshots] Writing total difficulty index block_num=9221328\r\n[INFO] [09-25|01:03:19.335] [fillind_db_from_snapshots] Writing total difficulty index block_num=11334333\r\n[INFO] [09-25|01:03:39.335] [fillind_db_from_snapshots] Writing total difficulty index block_num=14450683\r\n```\r\n\r\n```\r\n[INFO] [09-25|07:45:11.374] [fillind_db_from_snapshots] Writing total difficulty index block_num=2214420\r\n[INFO] [09-25|07:45:31.860] [fillind_db_from_snapshots] Writing total difficulty index block_num=3728270\r\n[INFO] [09-25|07:45:51.374] [fillind_db_from_snapshots] Writing total difficulty index block_num=5689839\r\n[INFO] [09-25|07:46:13.768] [fillind_db_from_snapshots] Writing total difficulty index block_num=7456541\r\n[INFO] [09-25|07:46:31.375] [fillind_db_from_snapshots] Writing total difficulty index block_num=9453009\r\n[INFO] [09-25|07:46:55.375] [fillind_db_from_snapshots] Writing total difficulty index block_num=11184812\r\n[INFO] [09-25|07:47:11.375] [fillind_db_from_snapshots] Writing total difficulty index block_num=13084088\r\n[INFO] [09-25|07:47:33.903] [fillind_db_from_snapshots] Writing total difficulty index block_num=14913083\r\n[INFO] [09-25|07:48:08.771] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=05c3d55e... alloc=3.1GB sys=5.5GB\r\n[INFO] [09-25|07:48:38.757] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=0bb7f577... alloc=3.1GB sys=5.5GB\r\n[INFO] [09-25|07:49:08.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=1246f56f... alloc=3.1GB sys=5.5GB\r\n[INFO] [09-25|07:49:38.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=18b02231... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:50:08.757] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=1e7591c7... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:50:38.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=25250092... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:51:08.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=2bd42af9... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:51:38.757] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=32838711... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:52:08.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=3955f795... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:52:38.758] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=4001dbe5... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:53:08.753] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=46cd3f5d... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:53:38.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=4d65a685... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:54:08.755] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=541698bd... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:54:38.753] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=5aca5d8b... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:55:08.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=61f0b042... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:55:38.895] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=68ab21eb... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|07:56:08.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=6f847b6f... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|07:56:38.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=769e1ccd... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:57:08.925] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=7f9348ab... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|07:57:38.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=87dd53ec... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|07:58:08.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=8fb2c1b6... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:58:38.753] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=974d750a... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|07:59:08.753] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=9ec0d5b4... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|07:59:38.757] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=a669ae6e... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|08:00:08.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=ad22a10d... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|08:00:38.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=b4373e32... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|08:01:08.757] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=bb3daf87... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|08:01:38.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=c24d14da... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|08:02:08.753] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=c9477dfc... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|08:02:38.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=d037571f... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|08:03:08.754] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=d74bdb37... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|08:03:38.756] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=de0c0e25... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|08:04:08.755] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=e4c8e733... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|08:04:38.757] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=eb5b0167... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|08:05:08.760] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=f2340b8d... alloc=2.7GB sys=5.5GB\r\n[INFO] [09-25|08:05:38.759] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=f8d0aa28... alloc=2.8GB sys=5.5GB\r\n[INFO] [09-25|08:06:08.753] [Snapshots] ETL [2/2] Loading            into=HeaderNumber current key=ff8ed06c... alloc=2.6GB sys=5.5GB\r\n[INFO] [09-25|08:07:26.561] [fillind_db_from_snapshots] Writing total difficulty index block_num=2591017\r\n[INFO] [09-25|08:07:46.561] [fillind_db_from_snapshots] Writing total difficulty index block_num=4295527\r\n[INFO] [09-25|08:08:06.561] [fillind_db_from_snapshots] Writing total difficulty index block_num=7321560\r\n[INFO] [09-25|08:08:26.558] [fillind_db_from_snapshots] Writing total difficulty index block_num=9509977\r\n[INFO] [09-25|08:08:46.561] [fillind_db_from_snapshots] Writing total difficulty index block_num=11430707\r\n[INFO] [09-25|08:09:06.558] [fillind_db_from_snapshots] Writing total difficulty index block_num=14700880\r\n```\r\n\r\n\r\n",
  "closed_by": {
    "login": "dylancaponi",
    "id": 7399067,
    "node_id": "MDQ6VXNlcjczOTkwNjc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7399067?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/dylancaponi",
    "html_url": "https://github.com/dylancaponi",
    "followers_url": "https://api.github.com/users/dylancaponi/followers",
    "following_url": "https://api.github.com/users/dylancaponi/following{/other_user}",
    "gists_url": "https://api.github.com/users/dylancaponi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/dylancaponi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/dylancaponi/subscriptions",
    "organizations_url": "https://api.github.com/users/dylancaponi/orgs",
    "repos_url": "https://api.github.com/users/dylancaponi/repos",
    "events_url": "https://api.github.com/users/dylancaponi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/dylancaponi/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1275459163",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5513#issuecomment-1275459163",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5513",
    "id": 1275459163,
    "node_id": "IC_kwDOC0FsAM5MBfZb",
    "user": {
      "login": "dylancaponi",
      "id": 7399067,
      "node_id": "MDQ6VXNlcjczOTkwNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7399067?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dylancaponi",
      "html_url": "https://github.com/dylancaponi",
      "followers_url": "https://api.github.com/users/dylancaponi/followers",
      "following_url": "https://api.github.com/users/dylancaponi/following{/other_user}",
      "gists_url": "https://api.github.com/users/dylancaponi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dylancaponi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dylancaponi/subscriptions",
      "organizations_url": "https://api.github.com/users/dylancaponi/orgs",
      "repos_url": "https://api.github.com/users/dylancaponi/repos",
      "events_url": "https://api.github.com/users/dylancaponi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dylancaponi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-12T01:14:45Z",
    "updated_at": "2022-10-12T01:14:45Z",
    "author_association": "NONE",
    "body": "This command was run in an attempt to fix a node that was not syncing. \r\n\r\nThese steps helped me sync after getting many no body and no header found errors:\r\nhttps://github.com/ledgerwatch/erigon/issues/5639#issuecomment-1272463475",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1275459163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

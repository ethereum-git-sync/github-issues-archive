{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5438",
  "id": 1378962331,
  "node_id": "I_kwDOC0FsAM5SMUub",
  "number": 5438,
  "title": "Invalid block header RLP for gnosis chain",
  "user": {
    "login": "Chomtana",
    "id": 4103490,
    "node_id": "MDQ6VXNlcjQxMDM0OTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4103490?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Chomtana",
    "html_url": "https://github.com/Chomtana",
    "followers_url": "https://api.github.com/users/Chomtana/followers",
    "following_url": "https://api.github.com/users/Chomtana/following{/other_user}",
    "gists_url": "https://api.github.com/users/Chomtana/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Chomtana/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Chomtana/subscriptions",
    "organizations_url": "https://api.github.com/users/Chomtana/orgs",
    "repos_url": "https://api.github.com/users/Chomtana/repos",
    "events_url": "https://api.github.com/users/Chomtana/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Chomtana/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-09-20T07:39:34Z",
  "updated_at": "2022-11-12T03:12:55Z",
  "closed_at": "2022-11-12T03:12:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: 2022.09.2-stable-38b35e09\r\n\r\nOS & Version: Linux Ubuntu 22.04\r\n\r\nCommit hash : 38b35e09\r\n\r\n#### Expected behavior\r\nFor Gnosis chain, after stopping erigon and running erigon again using the existing datadir, it should continue to sync.\r\n\r\nGnosis chain should be able to sync, currently, it won't sync at all costs.\r\n\r\n#### Actual behaviour\r\nFor Gnosis chain, after stopping erigon and running erigon again using the existing datadir, it error with `Invalid block header RLP hash=0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756 err=\"wrong size for MixDigest: 0\"`.\r\n\r\nGnosis chain should be able to sync, currently, it won't sync at all costs.\r\n\r\n#### Steps to reproduce the behavior\r\n1. Run erigon on gnosis chain for the first time using\r\n```\r\nerigon --chain=gnosis --private.api.addr=0.0.0.0:9091\r\n```\r\n2. Press Ctrl-C to stop the erigon\r\n3. Run erigon on gnosis chain again using the first command\r\n```\r\nerigon --chain=gnosis --private.api.addr=0.0.0.0:9091\r\n```\r\n\r\nNote: if you execute eth_blockNumber in the rpc it will always return 0x0 which means the gnosis chain is not syncing at all.\r\n\r\n#### Backtrace\r\n\r\n````\r\nroot@mynode ~/erigon # erigon --chain=gnosis --private.api.addr=0.0.0.0:9091\r\nINFO[09-20|07:37:20.714] Build info                               git_branch=alpha git_tag=v2022.09.02 git_commit=38b35e09fe8e2249f22570f60cf9407b05fc2b49\r\nINFO[09-20|07:37:20.714] Starting Erigon on                       devnet=gnosis\r\nINFO[09-20|07:37:20.715] Maximum peer count                       ETH=100 total=100\r\nINFO[09-20|07:37:20.715] starting HTTP APIs                       APIs=eth,erigon,engine\r\nINFO[09-20|07:37:20.715] torrent verbosity                        level=WRN\r\nINFO[09-20|07:37:22.818] Set global gas cap                       cap=50000000\r\nINFO[09-20|07:37:22.819] Opening Database                         label=chaindata path=/root/.local/share/erigon/gnosis/chaindata\r\nINFO[09-20|07:37:22.827] Re-Opening DB in exclusive mode to apply migrations\r\nINFO[09-20|07:37:22.829] Apply migration                          name=db_schema_version5\r\nINFO[09-20|07:37:22.831] Applied migration                        name=db_schema_version5\r\nINFO[09-20|07:37:22.831] Apply migration                          name=txs_begin_end\r\nINFO[09-20|07:37:22.834] Applied migration                        name=txs_begin_end\r\nINFO[09-20|07:37:22.834] Apply migration                          name=reset_blocks_3\r\nINFO[09-20|07:37:22.835] Applied migration                        name=reset_blocks_3\r\nINFO[09-20|07:37:22.837] Updated DB schema to                     version=6.0.0\r\nINFO[09-20|07:37:22.848] Writing custom genesis block             hash=0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756\r\nINFO[09-20|07:37:22.853] Initialised chain configuration          config=\"{ChainID: 100, Homestead: 0, DAO: <nil>, DAO Support: false, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 1604400, Petersburg: 2508800, Istanbul: 7298030, Muir Glacier: <nil>, Berlin: 16101500, London: 19040000, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: <nil>, Merge Netsplit: <nil>, Shanghai: <nil>, Cancun: <nil>, Engine: aura}\" genesis=0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756\r\nINFO[09-20|07:37:22.853] Effective                                prune_flags= snapshot_flags= history.v2=false\r\nINFO[09-20|07:37:22.855] Initialising Ethereum protocol           network=100\r\nINFO[09-20|07:37:22.870] Starting private RPC server              on=0.0.0.0:9091\r\nINFO[09-20|07:37:22.870] new subscription to logs established\r\nINFO[09-20|07:37:22.870] rpc filters: subscribing to Erigon events\r\nINFO[09-20|07:37:22.870] New txs subscriber joined\r\nINFO[09-20|07:37:22.870] new subscription to newHeaders established\r\nINFO[09-20|07:37:22.870] Reading JWT secret                       path=/root/.local/share/erigon/gnosis/jwt.hex\r\nINFO[09-20|07:37:22.871] Generated JWT secret                     path=/root/.local/share/erigon/gnosis/jwt.hex\r\nINFO[09-20|07:37:22.871] HTTP endpoint opened for Engine API      url=localhost:8551 ws=true ws.compression=true\r\nINFO[09-20|07:37:22.871] HTTP endpoint opened                     url=localhost:8545 ws=false ws.compression=true grpc=false\r\nINFO[09-20|07:37:22.881] [txpool] Started\r\nINFO[09-20|07:37:22.881] [2/16 Headers] Waiting for headers...    from=0\r\nINFO[09-20|07:37:22.882] Started P2P networking                   version=66 self=enode://e381362ba3904bc3e2717aaf42cd1a308881df081fe1a4989518de671a4f3db5227ed6e3320fd50323964bd28ec1210cd5db3a1dad806c24601e9fc1aee106e9@127.0.0.1:30303 name=erigon/v2022.09.2-stable-38b35e09/linux-amd64/go1.19.1\r\n^CINFO[09-20|07:37:26.782] Got interrupt, shutting down...\r\nINFO[09-20|07:37:26.782] Exiting...\r\nINFO[09-20|07:37:26.782] Exiting Engine...\r\nINFO[09-20|07:37:26.782] RPC server shutting down\r\nINFO[09-20|07:37:26.782] RPC server shutting down\r\nWARN[09-20|07:37:26.782] Failed to serve http endpoint            err=\"http: Server closed\"\r\nINFO[09-20|07:37:26.782] RPC server shutting down\r\nINFO[09-20|07:37:26.782] Engine HTTP endpoint close               url=localhost:8551\r\nWARN[09-20|07:37:26.782] Failed to serve http endpoint            err=\"http: Server closed\"\r\nINFO[09-20|07:37:26.782] HTTP endpoint closed                     url=localhost:8545\r\nroot@mynode ~/erigon # erigon --chain=gnosis --private.api.addr=0.0.0.0:9091\r\nINFO[09-20|07:37:29.369] Build info                               git_branch=alpha git_tag=v2022.09.02 git_commit=38b35e09fe8e2249f22570f60cf9407b05fc2b49\r\nINFO[09-20|07:37:29.369] Starting Erigon on                       devnet=gnosis\r\nINFO[09-20|07:37:29.370] Maximum peer count                       ETH=100 total=100\r\nINFO[09-20|07:37:29.370] starting HTTP APIs                       APIs=eth,erigon,engine\r\nINFO[09-20|07:37:29.370] torrent verbosity                        level=WRN\r\nINFO[09-20|07:37:31.473] Set global gas cap                       cap=50000000\r\nINFO[09-20|07:37:31.473] Opening Database                         label=chaindata path=/root/.local/share/erigon/gnosis/chaindata\r\nEROR[09-20|07:37:31.475] Invalid block header RLP                 hash=0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756 err=\"wrong size for MixDigest: 0\"\r\nEROR[09-20|07:37:31.475] Invalid block header RLP                 hash=0x4f1dd23188aab3a76b463e4af801b52b1248ef073c648cbdc4c9333d3da79756 err=\"wrong size for MixDigest: 0\"\r\nEROR[09-20|07:37:31.475] catch panic                              err=\"runtime error: invalid memory address or nil pointer dereference\" stack=\"[main.go:30 panic.go:884 panic.go:260 signal_unix.go:835 block.go:1393 backend.go:195 node.go:115 main.go:59 app.go:526 app.go:286 main.go:35 proc.go:250 asm_amd64.s:1594]\"\r\n````\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1253739868",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5438#issuecomment-1253739868",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438",
    "id": 1253739868,
    "node_id": "IC_kwDOC0FsAM5Kuo1c",
    "user": {
      "login": "enriavil1",
      "id": 19207637,
      "node_id": "MDQ6VXNlcjE5MjA3NjM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19207637?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/enriavil1",
      "html_url": "https://github.com/enriavil1",
      "followers_url": "https://api.github.com/users/enriavil1/followers",
      "following_url": "https://api.github.com/users/enriavil1/following{/other_user}",
      "gists_url": "https://api.github.com/users/enriavil1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/enriavil1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/enriavil1/subscriptions",
      "organizations_url": "https://api.github.com/users/enriavil1/orgs",
      "repos_url": "https://api.github.com/users/enriavil1/repos",
      "events_url": "https://api.github.com/users/enriavil1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/enriavil1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T13:48:47Z",
    "updated_at": "2022-09-21T13:48:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Erigon is not capable of syncing gnosis chain currently I believe.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1253739868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1297990831",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5438#issuecomment-1297990831",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438",
    "id": 1297990831,
    "node_id": "IC_kwDOC0FsAM5NXcSv",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-11-01T03:57:09Z",
    "updated_at": "2022-11-01T03:57:09Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1297990831/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1312338070",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5438#issuecomment-1312338070",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5438",
    "id": 1312338070,
    "node_id": "IC_kwDOC0FsAM5OOLCW",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-11-12T03:12:54Z",
    "updated_at": "2022-11-12T03:12:54Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1312338070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

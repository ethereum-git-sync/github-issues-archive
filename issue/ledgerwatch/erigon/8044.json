{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8044",
  "id": 1858467463,
  "node_id": "I_kwDOC0FsAM5uxfaH",
  "number": 8044,
  "title": "[2/15 Headers] No block headers to write in this log period block number",
  "user": {
    "login": "trugard",
    "id": 111804804,
    "node_id": "U_kgDOBqoBhA",
    "avatar_url": "https://avatars.githubusercontent.com/u/111804804?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/trugard",
    "html_url": "https://github.com/trugard",
    "followers_url": "https://api.github.com/users/trugard/followers",
    "following_url": "https://api.github.com/users/trugard/following{/other_user}",
    "gists_url": "https://api.github.com/users/trugard/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/trugard/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/trugard/subscriptions",
    "organizations_url": "https://api.github.com/users/trugard/orgs",
    "repos_url": "https://api.github.com/users/trugard/repos",
    "events_url": "https://api.github.com/users/trugard/events{/privacy}",
    "received_events_url": "https://api.github.com/users/trugard/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-08-21T02:56:49Z",
  "updated_at": "2023-08-22T04:18:37Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: 2.48.1 \r\n\r\nOS & Version: Linux\r\n\r\nCommit hash: \r\n\r\nErigon Command (with flags/config):\r\n\r\ndocker run -d -v /nodes/pol:/opt/erigon/ethereum -it pol-dev:2.48.1 --chain=bor-mainnet --bor.heimdall=https://heimdall-api.polygon.technology  --http.api=eth,erigon,web3,net,debug,trace,txpool --maxpeers=250  --sentry.drop-useless-peers --datadir=/opt/erigon/ethereum --private.api.addr=localhost:9090 --metrics --metrics.addr=0.0.0.0 --db.size.limit=10TB --db.pagesize=16kb  --torrent.upload.rate=312mb --torrent.download.rate=312mb --clique.datadir=/opt/erigon/ethereum/clique  --port=30303  --metrics.port=6060 --ethash.dagdir=/opt/erigon/ethash/dag  --log.console.verbosity=info\r\n\r\nConcensus Layer:\r\n\r\nConcensus Layer Command (with flags/config):\r\n\r\nChain/Network: bor-mainnet\r\n\r\n#### Expected behaviour\r\nstarts syncing from a good snapshot from June 14\r\n\r\n#### Actual behaviour\r\nAfter letting the client start and waiting a few minutes, I stop the client, and move the mdbx.dat file from my backup folder to the chaindata folder. When I restart the client, it endlessly suggests there are no block headers to write.\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\nstop and restart the docker image repeatedly.\r\n\r\n#### Backtrace\r\n\r\n````\r\n[INFO] [08-21|02:41:43.413] logging to file system                   log dir=/opt/erigon/ethereum/logs file prefix=erigon log level=info json=false\r\n[INFO] [08-21|02:41:43.413] Starting metrics server                  addr=http://0.0.0.0:6060/debug/metrics/prometheus\r\n[INFO] [08-21|02:41:43.413] Build info                               git_branch=HEAD git_tag=v2.48.1-dirty git_commit=674b77f08d71e834c3908d967482b6136c370ebd\r\n[INFO] [08-21|02:41:43.413] Starting Erigon on Bor Mainnet...\r\n[INFO] [08-21|02:41:43.414] Maximum peer count                       ETH=250 total=250\r\n[INFO] [08-21|02:41:43.414] starting HTTP APIs                       APIs=eth,erigon,web3,net,debug,trace,txpool\r\n[INFO] [08-21|02:41:43.414] torrent verbosity                        level=WRN\r\n[INFO] [08-21|02:41:45.519] Set global gas cap                       cap=50000000\r\n[INFO] [08-21|02:41:45.523] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=312mb upload.rate=312mb\r\n[INFO] [08-21|02:41:45.523] Opening Database                         label=chaindata path=/opt/erigon/ethereum/chaindata\r\n[INFO] [08-21|02:41:45.538] Initialised chain configuration          config=\"{ChainID: 137, Homestead: 0, DAO: <nil>, Tangerine Whistle: 0, Spurious Dragon: 0, Byzantium: 0, Constantinople: 0, Petersburg: 0, Istanbul: 3395000, Muir Glacier: 3395000, Berlin: 14750000, London: 23850000, Arrow Glacier: <nil>, Gray Glacier: <nil>, Terminal Total Difficulty: <nil>, Merge Netsplit: <nil>, Shanghai: <nil>, Cancun: <nil>, Prague: <nil>, Engine: bor}\" genesis=0xa9c28ce2141b56c474f1dc504bee9b01eb1bd7d1a507580d5519d4437a97de1b\r\n[INFO] [08-21|02:41:50.352] Initialising Ethereum protocol           network=137\r\n[INFO] [08-21|02:41:52.970] Starting private RPC server              on=localhost:9090\r\n[INFO] [08-21|02:41:52.970] new subscription to logs established\r\n[INFO] [08-21|02:41:52.970] rpc filters: subscribing to Erigon events\r\n[INFO] [08-21|02:41:52.970] new subscription to newHeaders established\r\n[INFO] [08-21|02:41:52.970] New txs subscriber joined\r\n[INFO] [08-21|02:41:52.971] Reading JWT secret                       path=/opt/erigon/ethereum/jwt.hex\r\n[INFO] [08-21|02:41:52.971] HTTP endpoint opened for Engine API      url=127.0.0.1:8551 ws=true ws.compression=true\r\n[INFO] [08-21|02:41:52.972] HTTP endpoint opened                     url=127.0.0.1:8545 ws=false ws.compression=true grpc=false\r\n[INFO] [08-21|02:41:52.979] Started P2P networking                   version=68 self=enode://fadc7015850c5d487aa3911fa241d6f460cc96f518a2b2dc4cc6512ae57b35a9c1520b5a5425b73b42fc6459ac4d4bfb11de80a19801013dea6dc0a7458f116b@127.0.0.1:0 name=erigon/v2.48.1-stable-674b77f0/linux-amd64/go1.20.7\r\n[INFO] [08-21|02:41:52.981] [txpool] Started\r\n[INFO] [08-21|02:41:52.983] [2/15 Headers] Waiting for headers...    from=43901100\r\n[INFO] [08-21|02:41:52.985] Started P2P networking                   version=67 self=enode://fadc7015850c5d487aa3911fa241d6f460cc96f518a2b2dc4cc6512ae57b35a9c1520b5a5425b73b42fc6459ac4d4bfb11de80a19801013dea6dc0a7458f116b@127.0.0.1:0 name=erigon/v2.48.1-stable-674b77f0/linux-amd64/go1.20.7\r\n[INFO] [08-21|02:42:12.983] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n[INFO] [08-21|02:42:32.984] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n[INFO] [08-21|02:42:52.971] [txpool] stat                            pending=0 baseFee=0 queued=0 alloc=512.2MB sys=749.3MB\r\n[INFO] [08-21|02:42:52.984] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n[INFO] [08-21|02:43:12.983] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n[INFO] [08-21|02:43:32.983] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n[INFO] [08-21|02:43:32.983] Req/resp stats                           req=0 reqMin=0 reqMax=0 skel=0 skelMin=0 skelMax=0 resp=0 respMin=0 respMax=0 dups=0\r\n[INFO] [08-21|02:43:50.352] [p2p] GoodPeers\r\n[INFO] [08-21|02:43:52.971] [txpool] stat                            pending=0 baseFee=0 queued=0 alloc=355.9MB sys=749.3MB\r\n[INFO] [08-21|02:43:52.984] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n[INFO] [08-21|02:43:52.984] Req/resp stats                           req=0 reqMin=0 reqMax=0 skel=0 skelMin=0 skelMax=0 resp=0 respMin=0 respMax=0 dups=0\r\n[INFO] [08-21|02:44:12.983] [2/15 Headers] No block headers to write in this log period block number=43901100\r\n\r\n````\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1687392383",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8044#issuecomment-1687392383",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8044",
    "id": 1687392383,
    "node_id": "IC_kwDOC0FsAM5kk5B_",
    "user": {
      "login": "trugard",
      "id": 111804804,
      "node_id": "U_kgDOBqoBhA",
      "avatar_url": "https://avatars.githubusercontent.com/u/111804804?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/trugard",
      "html_url": "https://github.com/trugard",
      "followers_url": "https://api.github.com/users/trugard/followers",
      "following_url": "https://api.github.com/users/trugard/following{/other_user}",
      "gists_url": "https://api.github.com/users/trugard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/trugard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/trugard/subscriptions",
      "organizations_url": "https://api.github.com/users/trugard/orgs",
      "repos_url": "https://api.github.com/users/trugard/repos",
      "events_url": "https://api.github.com/users/trugard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/trugard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-22T04:18:37Z",
    "updated_at": "2023-08-22T04:18:37Z",
    "author_association": "NONE",
    "body": "Just rebuilt our server.... the same error persists.... ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1687392383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/31",
  "id": 452469727,
  "node_id": "MDU6SXNzdWU0NTI0Njk3Mjc=",
  "number": 31,
  "title": "Sporadic failure in TestFakedSyncProgress62",
  "user": {
    "login": "yperbasis",
    "id": 34320705,
    "node_id": "MDQ6VXNlcjM0MzIwNzA1",
    "avatar_url": "https://avatars.githubusercontent.com/u/34320705?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yperbasis",
    "html_url": "https://github.com/yperbasis",
    "followers_url": "https://api.github.com/users/yperbasis/followers",
    "following_url": "https://api.github.com/users/yperbasis/following{/other_user}",
    "gists_url": "https://api.github.com/users/yperbasis/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yperbasis/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yperbasis/subscriptions",
    "organizations_url": "https://api.github.com/users/yperbasis/orgs",
    "repos_url": "https://api.github.com/users/yperbasis/repos",
    "events_url": "https://api.github.com/users/yperbasis/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yperbasis/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "JekaMas",
    "id": 3192700,
    "node_id": "MDQ6VXNlcjMxOTI3MDA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3192700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/JekaMas",
    "html_url": "https://github.com/JekaMas",
    "followers_url": "https://api.github.com/users/JekaMas/followers",
    "following_url": "https://api.github.com/users/JekaMas/following{/other_user}",
    "gists_url": "https://api.github.com/users/JekaMas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/JekaMas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/JekaMas/subscriptions",
    "organizations_url": "https://api.github.com/users/JekaMas/orgs",
    "repos_url": "https://api.github.com/users/JekaMas/repos",
    "events_url": "https://api.github.com/users/JekaMas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/JekaMas/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "JekaMas",
      "id": 3192700,
      "node_id": "MDQ6VXNlcjMxOTI3MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3192700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JekaMas",
      "html_url": "https://github.com/JekaMas",
      "followers_url": "https://api.github.com/users/JekaMas/followers",
      "following_url": "https://api.github.com/users/JekaMas/following{/other_user}",
      "gists_url": "https://api.github.com/users/JekaMas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JekaMas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JekaMas/subscriptions",
      "organizations_url": "https://api.github.com/users/JekaMas/orgs",
      "repos_url": "https://api.github.com/users/JekaMas/repos",
      "events_url": "https://api.github.com/users/JekaMas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JekaMas/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2019-06-05T12:18:40Z",
  "updated_at": "2019-06-10T08:44:39Z",
  "closed_at": "2019-06-10T08:44:39Z",
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "https://circleci.com/gh/ledgerwatch/turbo-geth/17\r\n\r\n--- FAIL: TestFakedSyncProgress62 (1.73s)\r\n    downloader_test.go:1416: final progress mismatch:\r\n        have {StartingBlock:0 CurrentBlock:1004 HighestBlock:1003 PulledStates:0 KnownStates:0}\r\n        want {StartingBlock:0 CurrentBlock:1003 HighestBlock:1003 PulledStates:0 KnownStates:0}",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499066322",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/31#issuecomment-499066322",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31",
    "id": 499066322,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTA2NjMyMg==",
    "user": {
      "login": "b00ris",
      "id": 4943570,
      "node_id": "MDQ6VXNlcjQ5NDM1NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943570?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b00ris",
      "html_url": "https://github.com/b00ris",
      "followers_url": "https://api.github.com/users/b00ris/followers",
      "following_url": "https://api.github.com/users/b00ris/following{/other_user}",
      "gists_url": "https://api.github.com/users/b00ris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b00ris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b00ris/subscriptions",
      "organizations_url": "https://api.github.com/users/b00ris/orgs",
      "repos_url": "https://api.github.com/users/b00ris/repos",
      "events_url": "https://api.github.com/users/b00ris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b00ris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-05T12:41:49Z",
    "updated_at": "2019-06-05T12:51:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "```=== CONT  TestForkedSyncProgress62\r\n==================\r\nWARNING: DATA RACE\r\nRead at 0x00c00f0a1e08 by goroutine 90:\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*node).read()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/node.go:204 +0x26a\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).node()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:834 +0x2de\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Cursor).node()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/cursor.go:556 +0x394\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).Put()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:313 +0x347\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1.1.1.1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:71 +0x8d\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).ForEach()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:527 +0x204\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1.1.1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:70 +0xec\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Tx).ForEach.func1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/tx.go:129 +0xa3\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).ForEach()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:527 +0x204\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Tx).ForEach()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/tx.go:128 +0x78\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1.1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:65 +0x6d\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*DB).View()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/db.go:669 +0xb6\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:64 +0x8a\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*DB).Update()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/db.go:638 +0xb6\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:63 +0x1a5\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*testChain).copy()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/testchain_test.go:105 +0xaa7\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*testChain).shorten()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/testchain_test.go:93 +0x82\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.testForkedSyncProgress()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:1210 +0x1b6\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.TestForkedSyncProgress63Full()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:1196 +0x4a\r\n  testing.tRunner()\r\n      /usr/local/go/src/testing/testing.go:827 +0x162\r\n\r\nPrevious write at 0x00c00f0a1e08 by goroutine 183:\r\n  [failed to restore the stack]\r\n\r\nGoroutine 90 (running) created at:\r\n  testing.(*T).Run()\r\n      /usr/local/go/src/testing/testing.go:878 +0x650\r\n  testing.runTests.func1()\r\n      /usr/local/go/src/testing/testing.go:1119 +0xa8\r\n  testing.tRunner()\r\n      /usr/local/go/src/testing/testing.go:827 +0x162\r\n  testing.runTests()\r\n      /usr/local/go/src/testing/testing.go:1117 +0x4ee\r\n  testing.(*M).Run()\r\n      /usr/local/go/src/testing/testing.go:1034 +0x2ee\r\n  main.main()\r\n      _testmain.go:188 +0x221\r\n\r\nGoroutine 183 (running) created at:\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).spawnSync()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader.go:492 +0xd3\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).syncWithPeer()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader.go:482 +0xab5\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).synchronise()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader.go:406 +0x56e\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*downloadTester).sync()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:98 +0x2cb\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.testBoundedHeavyForkedSync()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:656 +0x168\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.TestBoundedHeavyForkedSync64Light()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:641 +0x4a\r\n  testing.tRunner()\r\n      /usr/local/go/src/testing/testing.go:827 +0x162\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499066322/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499069867",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/31#issuecomment-499069867",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31",
    "id": 499069867,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTA2OTg2Nw==",
    "user": {
      "login": "JekaMas",
      "id": 3192700,
      "node_id": "MDQ6VXNlcjMxOTI3MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3192700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JekaMas",
      "html_url": "https://github.com/JekaMas",
      "followers_url": "https://api.github.com/users/JekaMas/followers",
      "following_url": "https://api.github.com/users/JekaMas/following{/other_user}",
      "gists_url": "https://api.github.com/users/JekaMas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JekaMas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JekaMas/subscriptions",
      "organizations_url": "https://api.github.com/users/JekaMas/orgs",
      "repos_url": "https://api.github.com/users/JekaMas/repos",
      "events_url": "https://api.github.com/users/JekaMas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JekaMas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-05T12:52:32Z",
    "updated_at": "2019-06-05T12:52:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "[test.txt](https://github.com/ledgerwatch/turbo-geth/files/3257253/test.txt)\r\n\r\nThe data race:\r\nRead side:\r\n```\r\nRead at 0x00c00b1f9ad8 by goroutine 91:\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*node).read()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/node.go:204 +0x26a\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).node()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:834 +0x2de\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Cursor).node()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/cursor.go:556 +0x394\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).Put()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:313 +0x347\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1.1.1.1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:71 +0x8d\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).ForEach()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:527 +0x204\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1.1.1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:70 +0xec\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Tx).ForEach.func1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/tx.go:129 +0xa3\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Bucket).ForEach()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/bucket.go:527 +0x204\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*Tx).ForEach()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/tx.go:128 +0x78\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1.1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:65 +0x6d\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*DB).View()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/db.go:669 +0xb6\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy.func1()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:64 +0x8a\r\n  github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt.(*DB).Update()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/vendor/github.com/ledgerwatch/bolt/db.go:638 +0xb6\r\n  github.com/ledgerwatch/turbo-geth/ethdb.(*BoltDatabase).MemCopy()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/ethdb/memory_database.go:63 +0x1a5\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*testChain).copy()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/testchain_test.go:105 +0xaa7\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*testChain).shorten()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/testchain_test.go:93 +0x82\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.testForkedSyncProgress()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:1210 +0x1b6\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.TestForkedSyncProgress64Full()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:1199 +0x4a\r\n```\r\n\r\nWrite side:\r\n```\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).spawnSync()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader.go:492 +0xd3\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).syncWithPeer()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader.go:482 +0xab5\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).synchronise()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader.go:406 +0x56e\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.(*downloadTester).sync()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:98 +0x2cb\r\n  github.com/ledgerwatch/turbo-geth/eth/downloader.testForkedSyncProgress.func2()\r\n      /home/b00ris/go/src/github.com/ledgerwatch/turbo-geth/eth/downloader/downloader_test.go:1228 +0x94\r\n```\r\n\r\nOne of the fetchers functions created in `downloader.go` `syncWithPeer()` method uses `boltdb` to write something.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499069867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499074009",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/31#issuecomment-499074009",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31",
    "id": 499074009,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTA3NDAwOQ==",
    "user": {
      "login": "b00ris",
      "id": 4943570,
      "node_id": "MDQ6VXNlcjQ5NDM1NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943570?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/b00ris",
      "html_url": "https://github.com/b00ris",
      "followers_url": "https://api.github.com/users/b00ris/followers",
      "following_url": "https://api.github.com/users/b00ris/following{/other_user}",
      "gists_url": "https://api.github.com/users/b00ris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/b00ris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/b00ris/subscriptions",
      "organizations_url": "https://api.github.com/users/b00ris/orgs",
      "repos_url": "https://api.github.com/users/b00ris/repos",
      "events_url": "https://api.github.com/users/b00ris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/b00ris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-05T13:04:02Z",
    "updated_at": "2019-06-05T13:04:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "write side:\r\nethdb/memory_database.go:59\r\n```func (db *BoltDatabase) MemCopy() Database {\r\n\tlogger := log.New(\"database\", \"in-memory\")\r\n\r\n\t// Open the db and recover any potential corruptions\r\n\tmem, err := bolt.Open(\"in-memory\", 0600, &bolt.Options{MemOnly: true})\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\t\r\n\tif err := mem.Update(func(memTx *bolt.Tx) error {\r\n\t\treturn db.db.View(func(tx *bolt.Tx) error {\r\n\t\t\treturn tx.ForEach(func(name []byte, b *bolt.Bucket) error {\r\n\t\t\t\tmemB, err := memTx.CreateBucket(name, true)\r\n\t\t\t\tif err != nil {\r\n\t\t\t\t\treturn err\r\n\t\t\t\t}\r\n\t\t\t\treturn b.ForEach(func(k, v []byte) error {\r\n\t\t\t\t\tif err := memB.Put(k, v); err != nil {\r\n\t\t\t\t\t\treturn err\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn nil\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}); err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\treturn &BoltDatabase{\r\n\t\tfn:  \"in-memory\",\r\n\t\tdb:  mem,\r\n\t\tlog: logger,\r\n\t}\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499074009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499074416",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/31#issuecomment-499074416",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/31",
    "id": 499074416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTA3NDQxNg==",
    "user": {
      "login": "JekaMas",
      "id": 3192700,
      "node_id": "MDQ6VXNlcjMxOTI3MDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3192700?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JekaMas",
      "html_url": "https://github.com/JekaMas",
      "followers_url": "https://api.github.com/users/JekaMas/followers",
      "following_url": "https://api.github.com/users/JekaMas/following{/other_user}",
      "gists_url": "https://api.github.com/users/JekaMas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JekaMas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JekaMas/subscriptions",
      "organizations_url": "https://api.github.com/users/JekaMas/orgs",
      "repos_url": "https://api.github.com/users/JekaMas/repos",
      "events_url": "https://api.github.com/users/JekaMas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JekaMas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-05T13:05:11Z",
    "updated_at": "2019-06-05T13:05:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "The Boltdb readme says:\r\n\"Individual transactions and all objects created from them (e.g. buckets, keys) are not thread safe. To work with data in multiple goroutines you must start a transaction for each one or use locking to ensure only one goroutine accesses a transaction at a time. Creating transaction from the DB is thread safe.\"",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/499074416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

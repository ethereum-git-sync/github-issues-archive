{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7303",
  "id": 1665901869,
  "node_id": "I_kwDOC0FsAM5jS6Ut",
  "number": 7303,
  "title": "Failed to build on ARM 64 (make erigon failed)",
  "user": {
    "login": "kashirin-dm",
    "id": 40428935,
    "node_id": "MDQ6VXNlcjQwNDI4OTM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/40428935?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kashirin-dm",
    "html_url": "https://github.com/kashirin-dm",
    "followers_url": "https://api.github.com/users/kashirin-dm/followers",
    "following_url": "https://api.github.com/users/kashirin-dm/following{/other_user}",
    "gists_url": "https://api.github.com/users/kashirin-dm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kashirin-dm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kashirin-dm/subscriptions",
    "organizations_url": "https://api.github.com/users/kashirin-dm/orgs",
    "repos_url": "https://api.github.com/users/kashirin-dm/repos",
    "events_url": "https://api.github.com/users/kashirin-dm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kashirin-dm/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-04-13T07:48:12Z",
  "updated_at": "2023-06-03T02:37:01Z",
  "closed_at": "2023-06-03T02:37:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\nAWS EC2: c7g.8xlarge 32 vCPU, 64 RAM, 2TB (ARM64)\r\nErigon version: `./erigon --version`\r\nv2.42.0\r\n\r\nOS & Version: Windows/Linux/OSX\r\nUbuntu 22\r\n\r\nErigon Command (with flags/config):\r\n`make erigon`\r\n\r\n\r\n#### Expected behaviour\r\nErigon should be builded\r\n\r\n#### Actual behaviour\r\nGetting error:\r\n```\r\nBuilding erigon\r\n# github.com/prysmaticlabs/gohashtree\r\nasm: illegal combination: 23984 (/home/ubuntu/go/pkg/mod/github.com/prysmaticlabs/gohashtree@v0.0.2-alpha/hash_arm64.s:604)     VMOV    $0, V16.S4 ZCON NONE NONE ARNG, 4 7\r\nasm: illegal combination: 23984 (/home/ubuntu/go/pkg/mod/github.com/prysmaticlabs/gohashtree@v0.0.2-alpha/hash_arm64.s:604)     VMOV    $0, V16.S4 ZCON NONE NONE ARNG, 4 7\r\nasm: illegal combination: 23984 (/home/ubuntu/go/pkg/mod/github.com/prysmaticlabs/gohashtree@v0.0.2-alpha/hash_arm64.s:604)     VMOV    $0, V16.S4 ZCON NONE NONE ARNG, 4 7\r\nasm: illegal combination: 23984 (/home/ubuntu/go/pkg/mod/github.com/prysmaticlabs/gohashtree@v0.0.2-alpha/hash_arm64.s:604)     VMOV    $0, V16.S4 ZCON NONE NONE ARNG, 4 7\r\nasm: assembly failed\r\nmake: *** [Makefile:98: erigon.cmd] Error 1\r\n```\r\n----\r\nAfter adding to `go.mod`:\r\n`replace github.com/prysmaticlabs/gohashtree => github.com/ethersphere/gohashtree v0.0.1-0.20211202113417-cbe2c0dfc5ea`\r\n\r\nGetting:\r\n```\r\n../../cl/merkle_tree/list.go:7:2: github.com/ethersphere/gohashtree@v0.0.1-0.20211202113417-cbe2c0dfc5ea: missing go.sum entry; to add it:\r\n        go mod download github.com/ethersphere/gohashtree\r\nmake: *** [Makefile:98: erigon.cmd] Error 1\r\n```\r\n\r\nAlso, I tried without changing `go.mod`, just using `go mod tidy`, then I got this:\r\n```\r\nBuilding erigon\r\n# github.com/ledgerwatch/erigon/turbo/snapshotsync/snapcfg\r\n../../turbo/snapshotsync/snapcfg/util.go:19:39: undefined: snapshothashes.Bsc\r\n../../turbo/snapshotsync/snapcfg/util.go:28:46: undefined: snapshothashes.BscHistory\r\n# github.com/ledgerwatch/erigon/params\r\n../../params/config.go:107:3: unknown field TangerineWhistleHash in struct literal of type chain.Config\r\n../../params/config.go:131:3: unknown field TangerineWhistleHash in struct literal of type chain.Config\r\n../../params/config.go:160:3: unknown field TangerineWhistleHash in struct literal of type chain.Config\r\n../../params/config.go:176:3: unknown field TangerineWhistleHash in struct literal of type chain.Config\r\n# github.com/ledgerwatch/erigon/turbo/debug\r\n../../turbo/debug/flags.go:129:13: undefined: metrics.Enabled\r\n../../turbo/debug/flags.go:134:25: undefined: metrics.Enabled\r\n../../turbo/debug/flags.go:163:13: undefined: metrics.Enabled\r\n../../turbo/debug/flags.go:178:26: undefined: metrics.Enabled\r\n# github.com/ledgerwatch/erigon/p2p\r\n../../p2p/peer.go:338:14: undefined: metrics.Enabled\r\n# github.com/ledgerwatch/erigon/turbo/shards\r\n../../turbo/shards/state_change_accumulator.go:39:33: unknown field StateVersionID in struct literal of type remote.StateChangeBatch\r\n# github.com/ledgerwatch/erigon/core/state/temporal\r\n../../core/state/temporal/kv_temporal.go:80:9: cannot use tx (variable of type *Tx) as kv.TemporalTx value in return statement: *Tx does not implement kv.TemporalTx (wrong type for method DomainGet)\r\n                have DomainGet(kv.Domain, []byte, []byte, uint64) ([]byte, bool, error)\r\n                want DomainGet(kv.Domain, []byte, []byte) ([]byte, bool, error)\r\n../../core/state/temporal/kv_temporal.go:193:37: not enough arguments in call to iter.UnionKV\r\n        have (*iter.TransformDualIter[[]byte, []byte], *iter.FilterDualIter[[]byte, []byte])\r\n        want (iter.KV, iter.KV, int)\r\n../../core/state/temporal/kv_temporal.go:227:29: not enough arguments in call to iter.UnionKV\r\n        have (*iter.TransformDualIter[[]byte, []byte], *iter.TransformDualIter[[]byte, []byte])\r\n        want (iter.KV, iter.KV, int)\r\n../../core/state/temporal/kv_temporal.go:312:28: tx.agg.AccountHistoyIdxIterator undefined (type *state.AggregatorV3Context has no field or method AccountHistoyIdxIterator)\r\n../../core/state/temporal/kv_temporal.go:314:28: tx.agg.StorageHistoyIdxIterator undefined (type *state.AggregatorV3Context has no field or method StorageHistoyIdxIterator)\r\n../../core/state/temporal/kv_temporal.go:316:28: tx.agg.CodeHistoyIdxIterator undefined (type *state.AggregatorV3Context has no field or method CodeHistoyIdxIterator)\r\n../../core/state/temporal/kv_temporal.go:318:28: tx.agg.LogTopicIterator undefined (type *state.AggregatorV3Context has no field or method LogTopicIterator)\r\n../../core/state/temporal/kv_temporal.go:320:28: tx.agg.LogAddrIterator undefined (type *state.AggregatorV3Context has no field or method LogAddrIterator)\r\n../../core/state/temporal/kv_temporal.go:322:28: tx.agg.TraceFromIterator undefined (type *state.AggregatorV3Context has no field or method TraceFromIterator)\r\n../../core/state/temporal/kv_temporal.go:324:28: tx.agg.TraceToIterator undefined (type *state.AggregatorV3Context has no field or method TraceToIterator)\r\n../../core/state/temporal/kv_temporal.go:324:28: too many errors\r\nmake: *** [Makefile:98: erigon.cmd] Error 1\r\n``` \r\n\r\nI tried different options. Somehow I ran into these errors.\r\n\r\nSorry for the quality of the information. I am installing Erigon for the first time and also I am not an expert in Golang.\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n```\r\ngit clone --branch stable --single-branch https://github.com/ledgerwatch/erigon.git\r\ncd erigon\r\nmake erigon\r\n```",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510590192",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7303#issuecomment-1510590192",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303",
    "id": 1510590192,
    "node_id": "IC_kwDOC0FsAM5aCcbw",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-17T02:08:17Z",
    "updated_at": "2023-04-17T02:08:17Z",
    "author_association": "COLLABORATOR",
    "body": "fixed in `devel` branch",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1510590192/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1565164726",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7303#issuecomment-1565164726",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303",
    "id": 1565164726,
    "node_id": "IC_kwDOC0FsAM5dSoS2",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-05-27T02:20:43Z",
    "updated_at": "2023-05-27T02:20:43Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1565164726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1574578611",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7303#issuecomment-1574578611",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7303",
    "id": 1574578611,
    "node_id": "IC_kwDOC0FsAM5d2imz",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-06-03T02:37:00Z",
    "updated_at": "2023-06-03T02:37:00Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1574578611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

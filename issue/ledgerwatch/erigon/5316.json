{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5316",
  "id": 1365741611,
  "node_id": "I_kwDOC0FsAM5RZ5Ar",
  "number": 5316,
  "title": "[GÃ¶erli] Beacon chain stop attestations since hours, Erigon cannot resolve fork",
  "user": {
    "login": "gus4rs",
    "id": 110654587,
    "node_id": "U_kgDOBph0ew",
    "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gus4rs",
    "html_url": "https://github.com/gus4rs",
    "followers_url": "https://api.github.com/users/gus4rs/followers",
    "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
    "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
    "organizations_url": "https://api.github.com/users/gus4rs/orgs",
    "repos_url": "https://api.github.com/users/gus4rs/repos",
    "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gus4rs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-09-08T08:01:32Z",
  "updated_at": "2022-11-19T03:00:28Z",
  "closed_at": "2022-11-19T03:00:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "erigon version: ```2022.09.1-alpha-4067b7c4```\r\n\r\nI am using nimbus + erigon on testnet, at a certain point erigon detects a fork and goes on a never ending period of not being able to resolve it. Meanwhile, the beacon chain is not making progress (money loss if it were on mainnet).\r\n\r\n```\r\nSep 08 07:07:11 erigon[3326]: [INFO] [09-08|07:07:11.387] [1/15 Headers] Fork choice re-org        headerNumber=7551633 forkingPoint=7551632\r\n...\r\nSep 08 07:07:11 erigon[3326]: [INFO] [09-08|07:07:11.540] [1/15 Headers] Unsettled forkchoice after unwind height=7551633 forkchoice=\"&{HeadBlockHash:0x6c96ce03f5a3e890641f16a3b220a0b9af9dd91db273886cf49bab00178955cb SafeBlockHash:0x0f30267199f574019823454484c4dfd299d5cc>\r\n...\r\nSep 08 07:07:13 erigon[3326]: [INFO] [09-08|07:07:13.587] [1/15 Headers] Fork choice re-org        headerNumber=7551630 forkingPoint=7551629\r\nSep 08 07:07:13 erigon[3326]: [WARN] [09-08|07:07:13.587] Skipping payload building because forkchoiceState.headBlockHash is not the head of the canonical chain forkChoice.HeadBlockHash=0xf0e9661355a66ada174e970a1c4c02838a1f5c9c082ff17cc91fcaeffb8863f4 headHeader.Hash=0x>\r\n...\r\nSep 08 07:07:13 erigon[3326]: [INFO] [09-08|07:07:13.877] [1/15 Headers] Unsettled forkchoice after unwind height=7551630 forkchoice=\"&{HeadBlockHash:0xf0e9661355a66ada174e970a1c4c02838a1f5c9c082ff17cc91fcaeffb8863f4 SafeBlockHash:0x0f30267199f574019823454484c4dfd299d5cc>\r\n...\r\nSep 08 07:32:05 erigon[3326]: [INFO] [09-08|07:32:05.499] [1/15 Headers] Unsettled forkchoice after unwind height=7551738 forkchoice=\"&{HeadBlockHash:0x95fa0e731de9fd2e175007176fb1dc806191d56d892f0acfde4c6a4e534392cd SafeBlockHash:0xd1781e0aef7f45a3aa6d29e567d68197faef48>\r\n...\r\nSep 08 07:37:51 erigon[3326]: [WARN] [09-08|07:37:51.599] Skipping payload building because forkchoiceState.headBlockHash is not the head of the canonical chain forkChoice.HeadBlockHash=0x0434de2160b59507692ea7f9f19a10de1e32d48f2b5b762c029f2324b17f4f92 headHeader.Hash=0x>\r\n...\r\nSep 08 07:42:22 erigon[3326]: [INFO] [09-08|07:42:22.147] [1/15 Headers] Fork choice re-org        headerNumber=7551771 forkingPoint=7551769\r\n...\r\nSep 08 07:42:25 erigon[3326]: [INFO] [09-08|07:42:25.649] UnwindTo                                 block=7551771 bad_block_hash=0x0000000000000000000000000000000000000000000000000000000000000000\r\n...\r\nSep 08 07:42:31 erigon[3326]: [INFO] [09-08|07:42:31.533] [1/15 Headers] Fork choice missing header with hash 322fbb34d5117e906c1eb44228bc5df1fd447ed3c511edf0b6b284d916e3a44d\r\n...\r\nSep 08 07:47:38 erigon[3326]: [INFO] [09-08|07:47:38.265] [1/15 Headers] Fork choice re-org        headerNumber=7551808 forkingPoint=7551803\r\n...\r\nSep 08 07:53:43 erigon[3326]: [INFO] [09-08|07:53:43.841] [1/15 Headers] Fork choice missing header with hash 2fbdbf311787a0ce0ba0f2b3b3f957c1ab57cdf4424cd144f74759e5e0d07b3f\r\n...\r\nSep 08 07:59:02 erigon[3326]: [INFO] [09-08|07:59:02.258] [1/15 Headers] Fork choice missing header with hash 6a25372c8f192ff247f83b22a396287383cf1289af671501fb4060c87b8c52d5\r\n...\r\nSep 08 08:03:52 erigon[3326]: [INFO] [09-08|08:03:52.497] [1/15 Headers] Fork choice missing header with hash 9c2a94d66ca070979a656b8a69965bd98709ff4602ec9c0db33259ea9cbc4f80\r\n...\r\nSep 08 08:09:58 erigon[3326]: [INFO] [09-08|08:09:58.115] [1/15 Headers] Fork choice re-org        headerNumber=7551886 forkingPoint=7551885\r\n...\r\nSep 08 08:15:56 erigon[3326]: [INFO] [09-08|08:15:56.130] [6/15 Execution] Unwind Execution        from=7551908 to=7551906\r\n...\r\nSep 08 08:15:57 erigon[3326]: [WARN] [09-08|08:15:57.651] Skipping payload building because forkchoiceState.headBlockHash is not the head of the canonical chain forkChoice.HeadBlockHash=0x8bf68b640f68159ecbb162602d875f1c5f9076fabea21ac3caa82797a6f415e0 headHeader.Hash=0x>\r\n```\r\n\r\nI had to restart both the beacon chain and erigon so that it 'healed'.\r\n",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1240525293",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1240525293",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1240525293,
    "node_id": "IC_kwDOC0FsAM5J8Ont",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-08T10:26:05Z",
    "updated_at": "2022-09-08T10:26:05Z",
    "author_association": "COLLABORATOR",
    "body": "@guzkodes but did it self-heal after restarting nodes?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1240525293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1240603444",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1240603444",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1240603444,
    "node_id": "IC_kwDOC0FsAM5J8hs0",
    "user": {
      "login": "gus4rs",
      "id": 110654587,
      "node_id": "U_kgDOBph0ew",
      "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gus4rs",
      "html_url": "https://github.com/gus4rs",
      "followers_url": "https://api.github.com/users/gus4rs/followers",
      "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
      "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
      "organizations_url": "https://api.github.com/users/gus4rs/orgs",
      "repos_url": "https://api.github.com/users/gus4rs/repos",
      "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gus4rs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-08T11:42:43Z",
    "updated_at": "2022-09-08T11:42:43Z",
    "author_association": "NONE",
    "body": "it started working again, but this is problematic. I'd expect it to resolve forks without intervention, as it stayed for almost 2h doing nothing",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1240603444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1241508489",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1241508489",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1241508489,
    "node_id": "IC_kwDOC0FsAM5J_-qJ",
    "user": {
      "login": "gus4rs",
      "id": 110654587,
      "node_id": "U_kgDOBph0ew",
      "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gus4rs",
      "html_url": "https://github.com/gus4rs",
      "followers_url": "https://api.github.com/users/gus4rs/followers",
      "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
      "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
      "organizations_url": "https://api.github.com/users/gus4rs/orgs",
      "repos_url": "https://api.github.com/users/gus4rs/repos",
      "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gus4rs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T05:16:57Z",
    "updated_at": "2022-09-09T05:16:57Z",
    "author_association": "NONE",
    "body": "Happening again, my beacon is 8h with no attestations and Erigon is struggling in fork resolving ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1241508489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1241521776",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1241521776",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1241521776,
    "node_id": "IC_kwDOC0FsAM5KAB5w",
    "user": {
      "login": "gus4rs",
      "id": 110654587,
      "node_id": "U_kgDOBph0ew",
      "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gus4rs",
      "html_url": "https://github.com/gus4rs",
      "followers_url": "https://api.github.com/users/gus4rs/followers",
      "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
      "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
      "organizations_url": "https://api.github.com/users/gus4rs/orgs",
      "repos_url": "https://api.github.com/users/gus4rs/repos",
      "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gus4rs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-09T05:42:46Z",
    "updated_at": "2022-09-09T05:42:59Z",
    "author_association": "NONE",
    "body": "Manually restarted Erigon and it managed to solve the fork, but it stayed 'down' the whole night trying to resolve forks",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1241521776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1245255762",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1245255762",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1245255762,
    "node_id": "IC_kwDOC0FsAM5KORhS",
    "user": {
      "login": "gus4rs",
      "id": 110654587,
      "node_id": "U_kgDOBph0ew",
      "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gus4rs",
      "html_url": "https://github.com/gus4rs",
      "followers_url": "https://api.github.com/users/gus4rs/followers",
      "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
      "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
      "organizations_url": "https://api.github.com/users/gus4rs/orgs",
      "repos_url": "https://api.github.com/users/gus4rs/repos",
      "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gus4rs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T11:09:09Z",
    "updated_at": "2022-09-13T11:09:09Z",
    "author_association": "NONE",
    "body": "Missed a block on mainnet because of it",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1245255762/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1288394932",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1288394932",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1288394932,
    "node_id": "IC_kwDOC0FsAM5My1i0",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-10-24T04:16:09Z",
    "updated_at": "2022-10-24T04:16:09Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1288394932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1320767415",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5316#issuecomment-1320767415",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5316",
    "id": 1320767415,
    "node_id": "IC_kwDOC0FsAM5OuU-3",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-11-19T03:00:27Z",
    "updated_at": "2022-11-19T03:00:27Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1320767415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

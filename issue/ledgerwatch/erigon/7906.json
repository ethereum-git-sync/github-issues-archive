{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7906",
  "id": 1809763924,
  "node_id": "I_kwDOC0FsAM5r3s5U",
  "number": 7906,
  "title": "Erigon node stopped syncing (Gnosis, Mainnet)",
  "user": {
    "login": "antdanchenko",
    "id": 12611990,
    "node_id": "MDQ6VXNlcjEyNjExOTkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/12611990?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/antdanchenko",
    "html_url": "https://github.com/antdanchenko",
    "followers_url": "https://api.github.com/users/antdanchenko/followers",
    "following_url": "https://api.github.com/users/antdanchenko/following{/other_user}",
    "gists_url": "https://api.github.com/users/antdanchenko/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/antdanchenko/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/antdanchenko/subscriptions",
    "organizations_url": "https://api.github.com/users/antdanchenko/orgs",
    "repos_url": "https://api.github.com/users/antdanchenko/repos",
    "events_url": "https://api.github.com/users/antdanchenko/events{/privacy}",
    "received_events_url": "https://api.github.com/users/antdanchenko/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-07-18T11:46:25Z",
  "updated_at": "2023-07-19T05:41:09Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `v2.48.1`\r\n\r\nOS & Version: Windows/Linux/OSX\r\nLinux\r\n\r\nCommit hash: \r\n4c461ac8f76cf2baaf1ca08c728f0ba448f6c2c6\r\n\r\nErigon Command (with flags/config):\r\n`\"--chain\",\"gnosis\",\r\n\"--datadir\",\"/path/to/datadir\",\r\n\"--private.api.addr\",\"0.0.0.0:9090\",\r\n\"--prune\",\"htcr\",\r\n\"--http.addr\",\"0.0.0.0\",\r\n\"--authrpc.addr\",\"0.0.0.0\",\r\n\"--authrpc.vhosts\",\"*\",\r\n\"--authrpc.jwtsecret\",\"<jwt_token>\",\r\n\"--http.vhosts\",\"*\",\r\n\"--http.corsdomain\",\"*\",\r\n\"--http.api\",\"eth,net,web3,admin,trace,debug\",\r\n\"--pprof\",\"--pprof.addr=0.0.0.0\",\r\n\"--metrics\",\r\n\"--metrics.addr\",\"0.0.0.0\",\r\n\"--metrics.port\",\"<metrics port>\",\r\n\"--ws\",\r\n\"--log.console.verbosity\",4,\r\n\"--staticpeers\",\"enode://...\"`\r\n          \r\nConcensus Layer:\r\nLighthouse v4.2.0\r\n\r\nConcensus Layer Command (with flags/config):\r\n`\"lighthouse\",\"beacon_node\",\r\n\"--datadir\",\"/path/to/datadir\",\r\n\"--network\",\"gnosis\",\r\n\"--port\",\"<port>\",\r\n\"--discovery-port\",\"<port>\",\r\n\"--eth1\",\"--merge\",\r\n\"--disable-enr-auto-update\",\r\n\"--http\",\r\n\"--http-address\",\"0.0.0.0\",\r\n\"--http-port\",\"<port>\",\r\n\"--metrics\",\r\n\"--metrics-address\",\"0.0.0.0\",\r\n\"--metrics-port\",\"<port>\",\r\n\"--metrics-allow-origin\",\"*\",\r\n\"--listen-address\",\"0.0.0.0\",\r\n\"--target-peers\",\"200\",\r\n\"--disable-packet-filter\",\r\n\"--execution-endpoints\",\"http:/erigon_node:port\",\r\n\"--execution-jwt\",\"<jwt_token>\"`\r\n\r\nChain/Network: \r\nGnosis, Mainnet\r\n\r\n#### Expected behaviour\r\nThe node is syncing\r\n\r\n#### Actual behaviour\r\nThe node stopped syncing on block 26499999\r\n\r\n#### Steps to reproduce the behaviour\r\n1. Sync the node from scratch on Gnosis chain (mainnet)\r\n\r\nPlease note, for now we are starting to sync two more nodes from scratch to see if the issue is persistent\r\nMeanwhile we are not going to stop the node that got stuck, feel free to ping me for a debug session if needed\r\n\r\n#### Backtrace\r\n````\r\n[DBUG] [07-18|11:33:31.946] [downloader] posAnchor is nil \r\n[DBUG] [07-18|11:33:36.325] [txpool] Commit                          written_kb=236 in=9.510592ms\r\n[DBUG] [07-18|11:33:52.138] [txpool] Commit                          written_kb=104 in=6.05ms\r\n[DBUG] [07-18|11:34:07.953] [txpool] Commit                          written_kb=104 in=4.837979ms\r\n[INFO] [07-18|11:34:22.420] [p2p] GoodPeers                          eth68=47 eth66=3 eth67=13\r\n[INFO] [07-18|11:34:22.450] [txpool] stat                            pending=530 baseFee=0 queued=14890 alloc=415.9MB sys=711.0MB\r\n[DBUG] [07-18|11:34:23.767] [txpool] Commit                          written_kb=84 in=3.182718ms\r\n[DBUG] [07-18|11:34:39.588] [txpool] Commit                          written_kb=108 in=8.22384ms\r\n[DBUG] [07-18|11:34:46.414] [p2p] Handshake failure                  peer=76f9dd9d3aa9fbdaa7bc err=\"read timeout\"\r\n[DBUG] [07-18|11:34:55.401] [txpool] Commit                          written_kb=180 in=4.596654ms\r\n[DBUG] [07-18|11:35:11.220] [txpool] Commit                          written_kb=128 in=6.773839ms\r\n[INFO] [07-18|11:35:22.441] [txpool] stat                            pending=530 baseFee=0 queued=14942 alloc=349.4MB sys=715.0MB\r\n[DBUG] [07-18|11:35:25.741] [p2p] Handshake failure                  peer=76f9dd9d3aa9fbdaa7bc err=\"read timeout\"\r\n[DBUG] [07-18|11:35:27.034] [txpool] Commit                          written_kb=280 in=4.652786ms\r\n[DBUG] [07-18|11:35:42.853] [txpool] Commit                          written_kb=128 in=7.018385ms\r\n[DBUG] [07-18|11:35:44.768] [downloader] Collecting...               from=29011081 to=29011081 len=1\r\n[DBUG] [07-18|11:35:44.768] [downloader] posAnchor is nil \r\n[DBUG] [07-18|11:35:58.667] [txpool] Commit                          written_kb=200 in=4.372443ms\r\n[DBUG] [07-18|11:36:14.487] [txpool] Commit                          written_kb=208 in=9.10669ms\r\n[INFO] [07-18|11:36:22.420] [p2p] GoodPeers                          eth68=46 eth67=14 eth66=3\r\n[INFO] [07-18|11:36:22.447] [txpool] stat                            pending=530 baseFee=0 queued=14992 alloc=602.3MB sys=715.0MB\r\n[DBUG] [07-18|11:36:30.298] [txpool] Commit                          written_kb=112 in=3.036978ms\r\n[DBUG] [07-18|11:36:32.549] [p2p] Handshake failure                  peer=6d1ddc42211b5ef61aee err=\"read timeout\"\r\n[DBUG] [07-18|11:36:46.117] [txpool] Commit                          written_kb=84 in=6.736657ms\r\n[DBUG] [07-18|11:37:01.930] [txpool] Commit                          written_kb=84 in=3.335477ms\r\n[DBUG] [07-18|11:37:17.752] [txpool] Commit                          written_kb=200 in=8.097316ms\r\n[INFO] [07-18|11:37:22.441] [txpool] stat                            pending=530 baseFee=0 queued=15036 alloc=531.3MB sys=715.0MB\r\n[DBUG] [07-18|11:37:30.109] [downloader] Collecting...               from=28979384 to=28979384 len=1\r\n[DBUG] [07-18|11:37:30.109] [downloader] posAnchor is nil \r\n[DBUG] [07-18|11:37:33.566] [txpool] Commit                          written_kb=136 in=5.845798ms\r\n[DBUG] [07-18|11:37:49.259] [downloader] Collecting...               from=29011106 to=29011106 len=1\r\n[DBUG] [07-18|11:37:49.259] [downloader] posAnchor is nil \r\n[DBUG] [07-18|11:37:49.382] [txpool] Commit                          written_kb=108 in=5.705742ms\r\n[DBUG] [07-18|11:37:50.378] [p2p] Handshake failure                  peer=76f9dd9d3aa9fbdaa7bc err=\"read timeout\"\r\n````\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1641450258",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7906#issuecomment-1641450258",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7906",
    "id": 1641450258,
    "node_id": "IC_kwDOC0FsAM5h1osS",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-19T05:41:09Z",
    "updated_at": "2023-07-19T05:41:09Z",
    "author_association": "COLLABORATOR",
    "body": "Don't see useful info in logs: \r\n`grep -v DBUG | grep -v txpool`",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1641450258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

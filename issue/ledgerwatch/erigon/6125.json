{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/6125",
  "id": 1463431790,
  "node_id": "I_kwDOC0FsAM5XOjJu",
  "number": 6125,
  "title": "trace_block incorrectly marks top-level traces as having an error",
  "user": {
    "login": "henryperson",
    "id": 5409022,
    "node_id": "MDQ6VXNlcjU0MDkwMjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5409022?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/henryperson",
    "html_url": "https://github.com/henryperson",
    "followers_url": "https://api.github.com/users/henryperson/followers",
    "following_url": "https://api.github.com/users/henryperson/following{/other_user}",
    "gists_url": "https://api.github.com/users/henryperson/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/henryperson/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/henryperson/subscriptions",
    "organizations_url": "https://api.github.com/users/henryperson/orgs",
    "repos_url": "https://api.github.com/users/henryperson/repos",
    "events_url": "https://api.github.com/users/henryperson/events{/privacy}",
    "received_events_url": "https://api.github.com/users/henryperson/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2022-11-24T14:28:46Z",
  "updated_at": "2023-05-26T02:22:26Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version\r\nRecently I have been using erigon through a node provider so I'm not actually sure what version they're running. But I have good reason to believe this issue was happening on `v2022.09.01`.\r\n\r\n### Description\r\nSometimes, for a very short period after a block has been seen by a node (haven't timed it, but guessing it's <100ms), `trace_block` will report that certain top-level traces are errored when they are not actually errored. Subtraces of that top-level trace will be missing as a result. That is how I first noticed the issueâ€”I had a script listening for new blocks, and noticed that I was missing traces. I was able to reliably reproduce the issue with a simple script that listens for new blocks, runs `trace_block`, waits 30 seconds, runs `trace_block` again, and then compares the number of results (though I believe a mismatch in the number of results is a symptom of incorrectly tracing the block). The issue happens about 4% of the time, so if you run a script that does this for 15 mins you're >95% to see this issue.\r\n\r\nAs a part of my current project I have been running a script that listens for blocks, runs `trace_block`, and stores the result in a database for months. I did some digging into our data and found that this issue started after Sep 15 of this year. So I believe this was introduced with the merge.\r\n\r\n### Reproducing\r\nBelow is a zip file with a couple files that can help for debugging (can't upload .go and .json files apparently). The first is a simple go script that will reproduce the issue using the method I described above. You can run it with `ETHEREUM_WS_URL=your_erigon_ws go run main.go`. The other two files are from block 16020424 containing every trace result from the initial trace_block (which had an incomplete result) and the later trace_block (which has the correct result). As you can see the top level trace for the first transaction in the block is considered \"Reverted\" by the initial trace_block but later was changed to null. [That transaction](https://etherscan.io/tx/0xd98711dcb42595e12465cd9d696c239a4e32184a77f43c8479e99faf213bf8a1) did not revert.\r\n\r\n[trace_block_materials.zip](https://github.com/ledgerwatch/erigon/files/10085207/trace_block_materials.zip)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1326551625",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1326551625",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1326551625,
    "node_id": "IC_kwDOC0FsAM5PEZJJ",
    "user": {
      "login": "quickchase",
      "id": 87909910,
      "node_id": "MDQ6VXNlcjg3OTA5OTEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/87909910?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quickchase",
      "html_url": "https://github.com/quickchase",
      "followers_url": "https://api.github.com/users/quickchase/followers",
      "following_url": "https://api.github.com/users/quickchase/following{/other_user}",
      "gists_url": "https://api.github.com/users/quickchase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quickchase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quickchase/subscriptions",
      "organizations_url": "https://api.github.com/users/quickchase/orgs",
      "repos_url": "https://api.github.com/users/quickchase/repos",
      "events_url": "https://api.github.com/users/quickchase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quickchase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-24T14:50:57Z",
    "updated_at": "2022-11-24T14:50:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Chase from QuickNode here, this issue happens on recent releases as well. There are multiple customers reporting similar behavior from our nodes. We have reproduced this issue on single instances.\n\nTraces will be wrong one minute, correct the next. It's difficult to reproduce but not impossible. The behavior feels like a race condition or similar is being hit and is not directly isolated to the latest block.\n\nOne customer is tracing `blocknumber - 10` and then re-tracing later and finding different results as well.\n\nThere is definitely a bug somewhere causing incorrect traces to be returned randomly.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1326551625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347669694",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1347669694",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1347669694,
    "node_id": "IC_kwDOC0FsAM5QU86-",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T02:46:24Z",
    "updated_at": "2022-12-13T02:46:24Z",
    "author_association": "NONE",
    "body": "I understand Erigon is a new project and I am impressed with its performance so far. It concerns me the lack of feedback or acceptance of this bug. I'm switching to use Geth for my project and Erigon for just archival data. I wanted to use Erigon to keep up with the chain head but I can't handle a scenario such as this as I need to do realtime transaction tracing, and lack of any action or just a \"has been noted\" concerns me.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347669694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347681989",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1347681989",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1347681989,
    "node_id": "IC_kwDOC0FsAM5QU_7F",
    "user": {
      "login": "cyril-kit",
      "id": 103242507,
      "node_id": "U_kgDOBidbCw",
      "avatar_url": "https://avatars.githubusercontent.com/u/103242507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cyril-kit",
      "html_url": "https://github.com/cyril-kit",
      "followers_url": "https://api.github.com/users/cyril-kit/followers",
      "following_url": "https://api.github.com/users/cyril-kit/following{/other_user}",
      "gists_url": "https://api.github.com/users/cyril-kit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cyril-kit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cyril-kit/subscriptions",
      "organizations_url": "https://api.github.com/users/cyril-kit/orgs",
      "repos_url": "https://api.github.com/users/cyril-kit/repos",
      "events_url": "https://api.github.com/users/cyril-kit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cyril-kit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T03:06:32Z",
    "updated_at": "2022-12-13T03:06:32Z",
    "author_association": "NONE",
    "body": "Agreed with @J-A-M-E-5 statement above. I think this is a serious issue and would like to know if there will be some actions taken there.\r\nAnyway, commenting there to up this issue which can have a critical impact on transactions trace analysis.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347681989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347688302",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1347688302",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1347688302,
    "node_id": "IC_kwDOC0FsAM5QVBdu",
    "user": {
      "login": "quickchase",
      "id": 87909910,
      "node_id": "MDQ6VXNlcjg3OTA5OTEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/87909910?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quickchase",
      "html_url": "https://github.com/quickchase",
      "followers_url": "https://api.github.com/users/quickchase/followers",
      "following_url": "https://api.github.com/users/quickchase/following{/other_user}",
      "gists_url": "https://api.github.com/users/quickchase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quickchase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quickchase/subscriptions",
      "organizations_url": "https://api.github.com/users/quickchase/orgs",
      "repos_url": "https://api.github.com/users/quickchase/repos",
      "events_url": "https://api.github.com/users/quickchase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quickchase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T03:15:13Z",
    "updated_at": "2022-12-13T03:15:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "In defense of the Erigon team:\n\nPart of the problem is that it's incredibly hard to reproduce at will on any given system for any given block. If y'all have scripts that can make it easier to debug please share.\n\nI know there is a go script attached but it took hours to reproduce it once for me, across half a dozen nodes. It seems to happen on some nodes more than others, etc.\n\nI know @AlexeyAkhunov tried to reproduce for a few hours and failed. It's not easy to debug... ðŸ˜”",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347688302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347700943",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1347700943",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1347700943,
    "node_id": "IC_kwDOC0FsAM5QVEjP",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T03:41:21Z",
    "updated_at": "2022-12-13T03:41:21Z",
    "author_association": "NONE",
    "body": "> I know @AlexeyAkhunov tried to reproduce for a few hours and failed. It's not easy to debug... ðŸ˜”\r\n\r\nThat's good to know. Just somebody even informally commenting that earlier would at least let the casual reader know that something is being done, perhaps even encourage more people to get involved in trying to find a repeatable way to reproduce this bug. The hive mind...\r\n\r\nThanks, I will be monitoring progress of this bug and will try and reproduce.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347700943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347719875",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1347719875",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1347719875,
    "node_id": "IC_kwDOC0FsAM5QVJLD",
    "user": {
      "login": "cyril-kit",
      "id": 103242507,
      "node_id": "U_kgDOBidbCw",
      "avatar_url": "https://avatars.githubusercontent.com/u/103242507?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cyril-kit",
      "html_url": "https://github.com/cyril-kit",
      "followers_url": "https://api.github.com/users/cyril-kit/followers",
      "following_url": "https://api.github.com/users/cyril-kit/following{/other_user}",
      "gists_url": "https://api.github.com/users/cyril-kit/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cyril-kit/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cyril-kit/subscriptions",
      "organizations_url": "https://api.github.com/users/cyril-kit/orgs",
      "repos_url": "https://api.github.com/users/cyril-kit/repos",
      "events_url": "https://api.github.com/users/cyril-kit/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cyril-kit/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T04:07:33Z",
    "updated_at": "2022-12-13T04:07:33Z",
    "author_association": "NONE",
    "body": "Thank you for the updates! If I find a way to reproduce too, I will share here.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1347719875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1348427061",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1348427061",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1348427061,
    "node_id": "IC_kwDOC0FsAM5QX101",
    "user": {
      "login": "tjayrush",
      "id": 5417918,
      "node_id": "MDQ6VXNlcjU0MTc5MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5417918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tjayrush",
      "html_url": "https://github.com/tjayrush",
      "followers_url": "https://api.github.com/users/tjayrush/followers",
      "following_url": "https://api.github.com/users/tjayrush/following{/other_user}",
      "gists_url": "https://api.github.com/users/tjayrush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tjayrush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tjayrush/subscriptions",
      "organizations_url": "https://api.github.com/users/tjayrush/orgs",
      "repos_url": "https://api.github.com/users/tjayrush/repos",
      "events_url": "https://api.github.com/users/tjayrush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tjayrush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T12:21:21Z",
    "updated_at": "2022-12-13T12:23:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have no idea if this helps or not, but we've seen similar issues to this for years not only on load-balances access to the nodes through providers such as Infura and QuickNode, but even on our own nodes. The front of the chain is unsettled. What we do is have three levels of \"finality\" to our extracted blocks: \"unripe\", \"staged\", and \"final.\"\r\n\r\nFinal is arbitrarily old but at least a few hours. We never re-visit final blocks.\r\n\r\nStaged is at least 28 blocks old (six minutes) and we revisit them one more time before we make them final.\r\n\r\nUnripe is anything under 28 blocks old and get revisited every 12 seconds until they become 28 blocks old.\r\n\r\nI'm not sure why scripts were working prior to a certain release and stopped after, but I'm not surprised that the head of the chain is unsettled.\r\n\r\nMaybe Erigon changed something that increased the likelyhood of a re-org deeper into the history higher. That wouldn't break consensus, but it would manifest itself in this way if the extraction script was getting too close to the head of the chain.\r\n\r\nAgain, not sure that helps, but for people reading this in the future, it may give some context.\r\n\r\nThe above probably doesn't apply to post-merge blocks, as I think they come to \"final\" much quicker.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1348427061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1348555529",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1348555529",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1348555529,
    "node_id": "IC_kwDOC0FsAM5QYVMJ",
    "user": {
      "login": "quickchase",
      "id": 87909910,
      "node_id": "MDQ6VXNlcjg3OTA5OTEw",
      "avatar_url": "https://avatars.githubusercontent.com/u/87909910?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/quickchase",
      "html_url": "https://github.com/quickchase",
      "followers_url": "https://api.github.com/users/quickchase/followers",
      "following_url": "https://api.github.com/users/quickchase/following{/other_user}",
      "gists_url": "https://api.github.com/users/quickchase/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quickchase/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quickchase/subscriptions",
      "organizations_url": "https://api.github.com/users/quickchase/orgs",
      "repos_url": "https://api.github.com/users/quickchase/repos",
      "events_url": "https://api.github.com/users/quickchase/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quickchase/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T13:31:18Z",
    "updated_at": "2022-12-13T13:31:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "From my perspective I don't think this is related to re-orgs. This can happen on older blocks, I believe it's a concurrency issue or some kind of race condition. You call it one second it's fine, the next it's wrong, the next it's fine.\n\n@AlexeyAkhunov mentioned that maybe it's due to shared memory access but idk. Really need a way to reproduce reliably.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1348555529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1348862058",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1348862058",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1348862058,
    "node_id": "IC_kwDOC0FsAM5QZgBq",
    "user": {
      "login": "J-A-M-E-5",
      "id": 26421539,
      "node_id": "MDQ6VXNlcjI2NDIxNTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/26421539?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/J-A-M-E-5",
      "html_url": "https://github.com/J-A-M-E-5",
      "followers_url": "https://api.github.com/users/J-A-M-E-5/followers",
      "following_url": "https://api.github.com/users/J-A-M-E-5/following{/other_user}",
      "gists_url": "https://api.github.com/users/J-A-M-E-5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/J-A-M-E-5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/J-A-M-E-5/subscriptions",
      "organizations_url": "https://api.github.com/users/J-A-M-E-5/orgs",
      "repos_url": "https://api.github.com/users/J-A-M-E-5/repos",
      "events_url": "https://api.github.com/users/J-A-M-E-5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/J-A-M-E-5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-13T15:49:23Z",
    "updated_at": "2022-12-13T15:49:23Z",
    "author_association": "NONE",
    "body": "> From my perspective I don't think this is related to re-orgs.\r\n\r\nAgree. If it were re-orgs you'd see the re-org in the logs.\r\n\r\n> What we do is have three levels of \"finality\" to our extracted blocks: \"unripe\", \"staged\", and \"final.\"\r\n\r\nFrom a UX point of view informing a user they have received a ERC-20 token twice or in a block that subsequently changes is a bit sucky when dealing with a re-org, but a re-org is something the user understands or can Google. It happens. In a very rare case such as a network attack we might see a freeze or a longer re-org. In any case, it's not my fault if the user or my client asks - it's Vitalik's, it's how blockchains work... deal with it!\r\n\r\nHowever expecting to wait 28 blocks for some sort of finality due to \"we are using Erigon so have to wait 28 blocks\" is something else.  In my case my clients reaction will be \"Why didn't you use geth?\" or \"You told me we could do this all on my 4TB SSD and you told me Erigon was good. I can't afford a 15TB SSD for geth, project cancelled\". It was my fault for choosing Erigon.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1348862058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1355707435",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1355707435",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1355707435,
    "node_id": "IC_kwDOC0FsAM5QznQr",
    "user": {
      "login": "henryperson",
      "id": 5409022,
      "node_id": "MDQ6VXNlcjU0MDkwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5409022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/henryperson",
      "html_url": "https://github.com/henryperson",
      "followers_url": "https://api.github.com/users/henryperson/followers",
      "following_url": "https://api.github.com/users/henryperson/following{/other_user}",
      "gists_url": "https://api.github.com/users/henryperson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/henryperson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/henryperson/subscriptions",
      "organizations_url": "https://api.github.com/users/henryperson/orgs",
      "repos_url": "https://api.github.com/users/henryperson/repos",
      "events_url": "https://api.github.com/users/henryperson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/henryperson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-16T22:00:02Z",
    "updated_at": "2022-12-16T22:00:02Z",
    "author_association": "NONE",
    "body": "For those looking at this for a solutionâ€”I meant to write in my original comment how I had handled this but reading it again I am realizing it's not at all clear.\r\n\r\nSince the issue is with top-level traces being marked as errored, you can compare the `error` field on top-level traces (non-nil transaction hash + empty `traceAddress`) to the `status` field from the receipt for that transaction. If, for any transactions, `receipt.status == 1 && trace.error != nil` or `receipt.status == 0 && trace.error == nil` then you have run into this issue. Throw an error and try fetching the block again.\r\n\r\nOf course I agree that it would be better if this issue were solved. But practically, in the short term, if someone is blocked because of this issue hopefully this helps.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1355707435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1380306371",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1380306371",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1380306371,
    "node_id": "IC_kwDOC0FsAM5SRc3D",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-12T13:01:26Z",
    "updated_at": "2023-01-12T13:01:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "If anyone manages to reproduce it on Eth main net, please post here the query, the incorrect response you got, and IMPORTANTLY, the timestamp of when request/response was made. This may help us reproduce it",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1380306371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1426816681",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1426816681",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1426816681,
    "node_id": "IC_kwDOC0FsAM5VC36p",
    "user": {
      "login": "henryperson",
      "id": 5409022,
      "node_id": "MDQ6VXNlcjU0MDkwMjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5409022?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/henryperson",
      "html_url": "https://github.com/henryperson",
      "followers_url": "https://api.github.com/users/henryperson/followers",
      "following_url": "https://api.github.com/users/henryperson/following{/other_user}",
      "gists_url": "https://api.github.com/users/henryperson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/henryperson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/henryperson/subscriptions",
      "organizations_url": "https://api.github.com/users/henryperson/orgs",
      "repos_url": "https://api.github.com/users/henryperson/repos",
      "events_url": "https://api.github.com/users/henryperson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/henryperson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-02-11T16:34:22Z",
    "updated_at": "2023-02-11T16:36:25Z",
    "author_association": "NONE",
    "body": "I ran into this issue again, but on polygon mainnet andâ€”more interestinglyâ€”the blocks are from over a year ago and I am consistently getting this response.\r\n\r\nIt is happening on the following blocks/transactions. I believe this list is exhaustive:\r\n- [22117271](https://polygonscan.com/block/22117271) due to [this transaction](https://polygonscan.com/tx/0x05cbef5a8980f673b28b12a1eea96d73e13acf0d19c398fcced3c2ebf3ba31fb)\r\n- [22117799](https://polygonscan.com/block/22117799) due to [this transaction](https://polygonscan.com/tx/0x887a01b4f85b4557e0c73a02907b36ae9e187f589853f0825a3dc23348603e62)\r\n- [22117897](https://polygonscan.com/block/22117897) due to [this transaction](https://polygonscan.com/tx/0x3b59371018b75982a9849108d89eb3b513b80a099addc07ab8ea2f6b37826dcf)\r\n- [22118052](https://polygonscan.com/block/22118052) due to [this transaction](https://polygonscan.com/tx/0x169c9547db18171c33e4461722dd09f1b47e28ee00420527d06dd4974a4d9161)\r\n- [22118179](https://polygonscan.com/block/22118179) due to [this transaction](https://polygonscan.com/tx/0x609f5d91c3a8b1271f27e492cabb132a565cbc8219741e5d3099df092429266e)\r\n- [22118482](https://polygonscan.com/block/22118482) due to [this transaction](https://polygonscan.com/tx/0x6298cf24504ba7d6295f04be092e636a541912c0075eb24a1a8c2895516ab0c0)\r\n- [22118680](https://polygonscan.com/block/22118680) due to [this transaction](https://polygonscan.com/tx/0xa6b955dce604e9bb554bd1fb5b0cdc4886b163124af8470de668c44af070599f)\r\n- [22119912](https://polygonscan.com/block/22119912) due to [this transaction](https://polygonscan.com/tx/0xcc8c56431cba2ca7c78015d7f1ae340e56eb27d96ea37d54a63ed5686c2dafe4)\r\n- [22127201](https://polygonscan.com/block/22127201) due to [this transaction](https://polygonscan.com/tx/0x3e8bedbd96bb309dc5a150dc24db21dc96311a06c8ac5b7b34584042ddc6a9a9)\r\n- [22127286](https://polygonscan.com/block/22127286) due to [this transaction](https://polygonscan.com/tx/0xe1e3a93bd909a2298c0609ccbb7760d18cf27096940a58373282893b7fc7b36f)\r\n- [22127584](https://polygonscan.com/block/22127584) due to [this transaction](https://polygonscan.com/tx/0xe955af346ad0e381300173bb293027430053b6dec76d89372e0d3d1ffcba549d)\r\n- [22132260](https://polygonscan.com/block/22132260) due to [this transaction](https://polygonscan.com/tx/0x898b037aadb132ac659490381fcc23543fdc70da1c775d39b8b3c6fb1507a09f)\r\n- [22132594](https://polygonscan.com/block/22132594) due to [this transaction](https://polygonscan.com/tx/0xc6158fa40417824d3fb16da6c602fc494b459188c26911afd61023f4af876283)\r\n\r\nIf this is likely to be a separate issue let me know and I can make a new issue for it\r\n\r\nEdit: in hindsight, this seems quite likely to be a separate issue since all the blocks are from the same 10 hour window. I'll make a separate issue for them",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1426816681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487862278",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1487862278",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1487862278,
    "node_id": "IC_kwDOC0FsAM5YrvoG",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-03-29T02:33:18Z",
    "updated_at": "2023-03-29T02:33:18Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1487862278/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1488235727",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1488235727",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1488235727,
    "node_id": "IC_kwDOC0FsAM5YtKzP",
    "user": {
      "login": "qk-santi",
      "id": 94850169,
      "node_id": "U_kgDOBadMeQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/94850169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qk-santi",
      "html_url": "https://github.com/qk-santi",
      "followers_url": "https://api.github.com/users/qk-santi/followers",
      "following_url": "https://api.github.com/users/qk-santi/following{/other_user}",
      "gists_url": "https://api.github.com/users/qk-santi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qk-santi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qk-santi/subscriptions",
      "organizations_url": "https://api.github.com/users/qk-santi/orgs",
      "repos_url": "https://api.github.com/users/qk-santi/repos",
      "events_url": "https://api.github.com/users/qk-santi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qk-santi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-29T09:18:02Z",
    "updated_at": "2023-03-29T09:18:02Z",
    "author_association": "NONE",
    "body": "Keeping it alive",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1488235727/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1546791272",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1546791272",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1546791272,
    "node_id": "IC_kwDOC0FsAM5cMilo",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2023-05-14T02:24:34Z",
    "updated_at": "2023-05-14T02:24:34Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1546791272/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1549404594",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6125#issuecomment-1549404594",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6125",
    "id": 1549404594,
    "node_id": "IC_kwDOC0FsAM5cWgmy",
    "user": {
      "login": "qk-santi",
      "id": 94850169,
      "node_id": "U_kgDOBadMeQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/94850169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/qk-santi",
      "html_url": "https://github.com/qk-santi",
      "followers_url": "https://api.github.com/users/qk-santi/followers",
      "following_url": "https://api.github.com/users/qk-santi/following{/other_user}",
      "gists_url": "https://api.github.com/users/qk-santi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/qk-santi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/qk-santi/subscriptions",
      "organizations_url": "https://api.github.com/users/qk-santi/orgs",
      "repos_url": "https://api.github.com/users/qk-santi/repos",
      "events_url": "https://api.github.com/users/qk-santi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/qk-santi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-16T10:28:13Z",
    "updated_at": "2023-05-16T10:28:13Z",
    "author_association": "NONE",
    "body": "Keeping this open",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1549404594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

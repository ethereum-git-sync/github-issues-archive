{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/2468",
  "id": 955799620,
  "node_id": "MDU6SXNzdWU5NTU3OTk2MjA=",
  "number": 2468,
  "title": "mdbx_env_open: no such file or directory when trying to run rpcdaemon locally",
  "user": {
    "login": "TimDaub",
    "id": 2758453,
    "node_id": "MDQ6VXNlcjI3NTg0NTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TimDaub",
    "html_url": "https://github.com/TimDaub",
    "followers_url": "https://api.github.com/users/TimDaub/followers",
    "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
    "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
    "organizations_url": "https://api.github.com/users/TimDaub/orgs",
    "repos_url": "https://api.github.com/users/TimDaub/repos",
    "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TimDaub/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2021-07-29T12:37:52Z",
  "updated_at": "2021-08-16T03:03:02Z",
  "closed_at": "2021-07-31T09:45:05Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `./erigon --version`\r\n\r\n```bash\r\n./erigon/build/bin/erigon --version\r\nerigon version 2021.07.5-alpha\r\n```\r\n\r\nHow I run erigon:\r\n\r\n```bash\r\ncat node.sh\r\n#!/bin/bash\r\n\r\nnohup bash -c \"./erigon/build/bin/erigon --private.api.addr=localhost:9080 --metrics --metrics.addr=localhost --metrics.port=6060\" &> node.out &\r\n```\r\n\r\nOS & Version: Windows/Linux/OSX\r\n\r\n```\r\nlsb_release -a\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 20.04.2 LTS\r\nRelease:        20.04\r\nCodename:       focal\r\n```\r\n\r\nCommit hash : 054581f50768d781623a0f51cf1eac8a6f0e04ae\r\n\r\n#### Expected behaviour\r\n\r\nI'm trying to run the `rpcdaemon` **locally** as [outlined in the docs](https://github.com/ledgerwatch/erigon/blob/devel/cmd/rpcdaemon/README.md#running-locally):\r\n\r\n```bash\r\ncat rpc.sh\r\n#!/bin/bash\r\n\r\nnohup ./erigon/build/bin/rpcdaemon \\\r\n        --datadir=/home/root/.local/share/erigon \\\r\n        --private.api.addr=127.0.0.1:9080 \\\r\n        --http.api=eth,erigon,web3,net,debug,trace,txpool,shh &> rpc.out &\r\n```\r\n\r\nand \r\n\r\n```bash\r\nls /home/root/.local/share/erigon\r\nchaindata  erigon\r\n```\r\n\r\n#### Actual behaviour\r\n\r\nHowever, each time I pass the `--datadir` option, I get the following error:\r\n\r\n```\r\ntail -f rpc.out\r\nERROR[07-29|14:32:31.331] Could not connect to DB                  error=\"mdbx_env_open: no such file or directory, label: chaindata, t\r\nrace: [github.com/ledgerwatch/erigon/ethdb/kv.MdbxOpts.Open github.com/ledgerwatch/erigon/cmd/rpcdaemon/cli.RemoteServices main.main.fu\r\nnc1 github.com/spf13/cobra.(*Command).execute github.com/spf13/cobra.(*Command).ExecuteC github.com/spf13/cobra.(*Command).Execute gith\r\nub.com/spf13/cobra.(*Command).ExecuteContext main.main runtime.main runtime.goexit]\"\r\n```\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n- Please let me know any other important information that I should provide.\r\n- My node is up-to-date with ETH mainnet\r\n\r\n",
  "closed_by": {
    "login": "TimDaub",
    "id": 2758453,
    "node_id": "MDQ6VXNlcjI3NTg0NTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TimDaub",
    "html_url": "https://github.com/TimDaub",
    "followers_url": "https://api.github.com/users/TimDaub/followers",
    "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
    "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
    "organizations_url": "https://api.github.com/users/TimDaub/orgs",
    "repos_url": "https://api.github.com/users/TimDaub/repos",
    "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TimDaub/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889285159",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889285159",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889285159,
    "node_id": "IC_kwDOC0FsAM41AWon",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T16:21:00Z",
    "updated_at": "2021-07-29T16:21:00Z",
    "author_association": "COLLABORATOR",
    "body": "Do you run Erigon as root user? \r\ndo you see files in chaindata directory?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889285159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889701867",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889701867",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889701867,
    "node_id": "IC_kwDOC0FsAM41B8Xr",
    "user": {
      "login": "TimDaub",
      "id": 2758453,
      "node_id": "MDQ6VXNlcjI3NTg0NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimDaub",
      "html_url": "https://github.com/TimDaub",
      "followers_url": "https://api.github.com/users/TimDaub/followers",
      "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
      "organizations_url": "https://api.github.com/users/TimDaub/orgs",
      "repos_url": "https://api.github.com/users/TimDaub/repos",
      "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimDaub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T07:49:05Z",
    "updated_at": "2021-07-30T07:51:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Do you run Erigon as root user?\r\n\r\n```bash\r\nps aux | grep erigon\r\nroot      114094  162 88.5 2183133164 116764800 ? Sl  Jul26 8684:26 ./erigon/build/bin/erigon --private.api.addr=localhost:9080 --metrics --metrics.addr=localhost --metrics.port=6060\r\n```\r\n\r\nI guess that means yes. Shouldn't I?\r\n\r\n> do you see files in chaindata directory?\r\n\r\n```bash\r\nls -alh .local/share/erigon/erigon/chaindata/\r\ntotal 1.3T\r\ndrwxr--r-- 2 root root  4.0K Jul 26 16:10 .\r\ndrwxr-xr-x 3 root root  4.0K Jul 30 09:02 ..\r\n-rw-r--r-- 1 root root  1.3T Jul 30 09:51 mdbx.dat\r\n-rw-r--r-- 1 root root 1004K Jul 30 09:51 mdbx.lck\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889701867/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889761328",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889761328",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889761328,
    "node_id": "IC_kwDOC0FsAM41CK4w",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T09:19:58Z",
    "updated_at": "2021-07-30T09:19:58Z",
    "author_association": "COLLABORATOR",
    "body": "`Shouldn't I?` - no real reason, but up to you. \r\n\r\n1. Can you also set --datadir for Erigon?\r\n2. No Docker?\r\n3. XDG_DATA_HOME env variable not set?\r\n4. I created branch rpc_daemon_print_path which must print path which using RPCDaemon, can you try this branch? (branch from v 2021.07.05)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889761328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889908386",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889908386",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889908386,
    "node_id": "IC_kwDOC0FsAM41Cuyi",
    "user": {
      "login": "TimDaub",
      "id": 2758453,
      "node_id": "MDQ6VXNlcjI3NTg0NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimDaub",
      "html_url": "https://github.com/TimDaub",
      "followers_url": "https://api.github.com/users/TimDaub/followers",
      "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
      "organizations_url": "https://api.github.com/users/TimDaub/orgs",
      "repos_url": "https://api.github.com/users/TimDaub/repos",
      "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimDaub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T13:53:33Z",
    "updated_at": "2021-07-30T13:53:33Z",
    "author_association": "CONTRIBUTOR",
    "body": ">     1. Can you also set --datadir for Erigon?\r\n\r\nupdated node.sh:\r\n\r\n```bash\r\ncat node.sh\r\n#!/bin/bash\r\n\r\nnohup bash -c \"./erigon/build/bin/erigon --datadir=/home/root/.local/share/erigon --private.api.addr=localhost:9080 --metrics --metrics.addr=localhost --metrics.port=6060\" &> node.out &\r\n```\r\n\r\nwhen I now run rpc.sh\r\n\r\n```bash\r\n./rpc.sh\r\ntail -f rpc.out\r\nINFO [07-30|15:49:36.412] DB schemas compatible                    reader=3.0.0 database=3.0.0\r\nINFO [07-30|15:49:36.412] rpc filters: subscribing to Erigon events\r\nINFO [07-30|15:49:36.413] HTTP endpoint opened                     url=localhost:8545 ws=false ws.compression=false\r\nINFO [07-30|15:49:36.413] interfaces compatible                    remote_db=127.0.0.1:9080 client=3.0.0 server=3.0.0\r\nINFO [07-30|15:49:36.413] interfaces compatible                    remote_service=eth_backend client=2.1.0 server=2.1.0\r\nINFO [07-30|15:49:36.413] interfaces compatible                    remote_service=mining      client=1.0.0 server=1.0.0\r\nINFO [07-30|15:49:36.414] interfaces compatible                    remote_service=tx_pool     client=1.0.0 server=1.0.0\r\n^C\r\n```\r\n\r\nit seems to resolve the issue.\r\n\r\n>     2\\. No Docker?\r\n\r\nNo, but I actually appreciate the reproducibility of Docker but I can't wrap my head around it all. Do you recommend using it? It's off-topic, but e.g. for running grafana/prometheus, I didn't see any advice/docs of running them outside of docker.\r\n\r\n>     3\\. XDG_DATA_HOME env variable not set?\r\n\r\nWhat is that and should I set it?\r\n\r\n>     4\\. I created branch rpc_daemon_print_path which must print path which using RPCDaemon, can you try this branch? (branch from v 2021.07.05)\r\n\r\nI'm happy to still try this, but since the problem seems to be resolved - do you still want me to do it?\r\n\r\nThank you",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889908386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889913678",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889913678",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889913678,
    "node_id": "IC_kwDOC0FsAM41CwFO",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T14:01:56Z",
    "updated_at": "2021-07-30T14:01:56Z",
    "author_association": "COLLABORATOR",
    "body": "« Docker but I can't wrap my head around it all. Do you recommend using it? » - no, just trying to understand your problem. \r\n\r\n“ problem seems to be resolved - do you still want me to do it?” - for now i don’t understand why it resolved. Probably your Erigon now pointing to another folder. But where it were pointed before? ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889913678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889915769",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889915769",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889915769,
    "node_id": "IC_kwDOC0FsAM41Cwl5",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T14:04:55Z",
    "updated_at": "2021-07-30T14:04:55Z",
    "author_association": "COLLABORATOR",
    "body": "Erigo do support this spec: https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html\r\n\r\nto see env variable can run: \r\necho $XDG_DATA_HOME",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889915769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889916608",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889916608",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889916608,
    "node_id": "IC_kwDOC0FsAM41CwzA",
    "user": {
      "login": "TimDaub",
      "id": 2758453,
      "node_id": "MDQ6VXNlcjI3NTg0NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimDaub",
      "html_url": "https://github.com/TimDaub",
      "followers_url": "https://api.github.com/users/TimDaub/followers",
      "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
      "organizations_url": "https://api.github.com/users/TimDaub/orgs",
      "repos_url": "https://api.github.com/users/TimDaub/repos",
      "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimDaub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T14:06:12Z",
    "updated_at": "2021-07-30T14:13:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "> for now i don’t understand why it resolved. Probably your Erigon now pointing to another folder. But where it were pointed before?\r\n\r\nYou seem to be right. It started synching again from a very old block when I defined `--datadir=/home/root/.local/share/erigon`.\r\nFrom my understanding, when not specifying `--datadir` as an option, it takes `/home/root/.local/share/erigon`, no?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889916608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889920452",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889920452",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889920452,
    "node_id": "IC_kwDOC0FsAM41CxvE",
    "user": {
      "login": "TimDaub",
      "id": 2758453,
      "node_id": "MDQ6VXNlcjI3NTg0NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimDaub",
      "html_url": "https://github.com/TimDaub",
      "followers_url": "https://api.github.com/users/TimDaub/followers",
      "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
      "organizations_url": "https://api.github.com/users/TimDaub/orgs",
      "repos_url": "https://api.github.com/users/TimDaub/repos",
      "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimDaub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T14:11:58Z",
    "updated_at": "2021-07-30T14:15:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "> to see env variable can run:\r\n> echo $XDG_DATA_HOME\r\n\r\nmy system's answer\r\n```bash\r\necho $XDG_DATA_HOME\r\n```\r\n(the variable isn't set)\r\n\r\nis there a difference between `--datadir` and `XDG_DATA_HOME` or should they point to the  same path?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889920452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889953202",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-889953202",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 889953202,
    "node_id": "IC_kwDOC0FsAM41C5uy",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T15:03:22Z",
    "updated_at": "2021-07-30T15:03:22Z",
    "author_association": "COLLABORATOR",
    "body": "no. \r\n--datadir is more important than XDG_DATA_HOME, and XDG_DATA_HOME is more important than default\r\nprobably you used default.\r\nthen I don't understand why you have initial problem.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/889953202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/890315884",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-890315884",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 890315884,
    "node_id": "IC_kwDOC0FsAM41ESRs",
    "user": {
      "login": "TimDaub",
      "id": 2758453,
      "node_id": "MDQ6VXNlcjI3NTg0NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimDaub",
      "html_url": "https://github.com/TimDaub",
      "followers_url": "https://api.github.com/users/TimDaub/followers",
      "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
      "organizations_url": "https://api.github.com/users/TimDaub/orgs",
      "repos_url": "https://api.github.com/users/TimDaub/repos",
      "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimDaub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-31T09:04:00Z",
    "updated_at": "2021-07-31T09:04:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "By the way, it seems that my experimenting has somehow destroyed my sync progress. Here's what I've done:\r\n\r\n1. Initially I launched the node without a `--datadir` option as outlined in the original post\r\n2. Then upon response in this thread, I launched the node once with `--datadir=/home/root/.local/share/erigon` but it seemed it didn't recognize the directory. It started syncing from scratch.\r\n3. Finally, I set it to `--datadir=/home/root/.local/share/erigon/erigon` for trying. I noticed that here too it started syncing from scratch\r\n4. So I removed the `--datadir` option and had it ran for a while now. It started with verifying some call trace data, so I thought that this may just be standard when restarting a node. But now after almost a day late, I think its still in sync mode\r\n\r\n```\r\ncurl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_syncing\",\"params\":[],\"id\":1}' localhost:8545\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":{\"currentBlock\":\"0x0\",\"highestBlock\":\"0x105000\",\"stages\":[{\"stage_name\":\"Headers\",\"block_number\":\"0x105000\"},{\"stage_name\":\"BlockHashes\",\"block_number\":\"0x0\"},{\"stage_name\":\"Bodies\",\"block_number\":\"0x0\"},{\"stage_name\":\"Senders\",\"block_number\":\"0x0\"},{\"stage_name\":\"Execution\",\"block_number\":\"0x0\"},{\"stage_name\":\"Translation\",\"block_number\":\"0x0\"},{\"stage_name\":\"HashState\",\"block_number\":\"0x0\"},{\"stage_name\":\"IntermediateHashes\",\"block_number\":\"0x0\"},{\"stage_name\":\"AccountHistoryIndex\",\"block_number\":\"0x0\"},{\"stage_name\":\"StorageHistoryIndex\",\"block_number\":\"0x0\"},{\"stage_name\":\"LogIndex\",\"block_number\":\"0x0\"},{\"stage_name\":\"CallTraces\",\"block_number\":\"0x0\"},{\"stage_name\":\"TxLookup\",\"block_number\":\"0x0\"},{\"stage_name\":\"TxPool\",\"block_number\":\"0x0\"},{\"stage_name\":\"Finish\",\"block_number\":\"0x0\"}]}}\r\n```\r\n\r\nlogs\r\n```bash\r\ntail -f node.out\r\nINFO [07-31|11:02:55.718] [1/18 Headers] Waiting for headers...    from=12932408\r\nINFO [07-31|11:03:00.936] [1/18 Headers] Processed                 highest inserted=12932409 age=5s\r\nINFO [07-31|11:03:00.939] [4/18 Bodies] Processed                  highest=12932409\r\nINFO [07-31|11:03:00.996] [7/18 Execution] Completed on            block=12932409\r\nINFO [07-31|11:03:01.040] [11/18 IntermediateHashes] Trie root      hash=0x8a64b0cc85292fac23a98cb2e27ac3860f65c5e8f51eb19ec1e3a86ce7d51a24\r\nINFO [07-31|11:03:01.114] [17/18 TxPool] Transaction stats         pending=3928 queued=1030\r\nINFO [07-31|11:03:01.203] Commit cycle                             in=88.648427ms\r\nINFO [07-31|11:03:01.203] Update current block for the RPC API     from=12932409 to=12932409\r\nINFO [07-31|11:03:01.203] [1/18 Headers] Waiting for headers...    from=12932409\r\nINFO [07-31|11:03:03.796] [p2p] GoodPeers                          eth66=21 eth65=31\r\n```\r\n\r\nOr what is going on? The disk seems to be full so I suspect the data to be there\r\n\r\n```bash\r\ndf -h\r\nFilesystem      Size  Used Avail Use% Mounted on\r\nudev             63G     0   63G   0% /dev\r\ntmpfs            13G  1.1M   13G   1% /run\r\n/dev/md2        2.0T  1.4T  539G  72% /\r\ntmpfs            63G     0   63G   0% /dev/shm\r\ntmpfs           5.0M     0  5.0M   0% /run/lock\r\ntmpfs            63G     0   63G   0% /sys/fs/cgroup\r\n/dev/md1        487M   85M  378M  19% /boot\r\n/dev/md3        1.5T  2.5G  1.5T   1% /home\r\ntmpfs            13G     0   13G   0% /run/user/0\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/890315884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/890321213",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-890321213",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 890321213,
    "node_id": "IC_kwDOC0FsAM41ETk9",
    "user": {
      "login": "TimDaub",
      "id": 2758453,
      "node_id": "MDQ6VXNlcjI3NTg0NTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2758453?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TimDaub",
      "html_url": "https://github.com/TimDaub",
      "followers_url": "https://api.github.com/users/TimDaub/followers",
      "following_url": "https://api.github.com/users/TimDaub/following{/other_user}",
      "gists_url": "https://api.github.com/users/TimDaub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TimDaub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TimDaub/subscriptions",
      "organizations_url": "https://api.github.com/users/TimDaub/orgs",
      "repos_url": "https://api.github.com/users/TimDaub/repos",
      "events_url": "https://api.github.com/users/TimDaub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TimDaub/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-31T09:45:05Z",
    "updated_at": "2021-07-31T09:45:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks to a quick session in Discord, @AskAlexSharov found the problem:\r\n\r\nI always had confused `/root/.local/share/erigon` with `/home/root/.local/share/erigon`. This was as I assumed that the root user's directory was also nested in `/home`. For my Ubuntu machine, however, it isn't. The erigon data dir for my case was at `/root/.local/share/erigon`.\r\n\r\nSo here's how we ended up fixing the problem:\r\n\r\n- Continue to run erigon without `--datadir` option such that it defaults the data dir to `/root/.local/share/erigon`\r\n- Adjust `rpc.sh` script with `--datadir=/root/.local/share/erigon` option\r\n\r\n```bash\r\ntail -f rpc.out\r\nINFO [07-31|11:39:10.280] DB schemas compatible                    reader=3.0.0 database=3.0.0\r\nINFO [07-31|11:39:10.280] rpc filters: subscribing to Erigon events\r\nINFO [07-31|11:39:10.281] HTTP endpoint opened                     url=localhost:8545 ws=false ws.compression=false\r\nINFO [07-31|11:39:10.282] interfaces compatible                    remote_db=127.0.0.1:9080 client=3.0.0 server=3.0.0\r\nINFO [07-31|11:39:10.282] interfaces compatible                    remote_service=eth_backend client=2.1.0 server=2.1.0\r\nINFO [07-31|11:39:10.282] interfaces compatible                    remote_service=mining      client=1.0.0 server=1.0.0\r\nINFO [07-31|11:39:10.282] interfaces compatible                    remote_service=tx_pool     client=1.0.0 server=1.0.0\r\n``` \r\n\r\n```bash\r\ncurl -X POST -H \"Content-Type: application/json\" --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_syncing\",\"params\":[],\"id\":1}' localhost:8545\r\n{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":false}\r\n```\r\n\r\nSo now everything is back to normal and it's working. Thanks for your support!",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/890321213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/899179658",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2468#issuecomment-899179658",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2468",
    "id": 899179658,
    "node_id": "IC_kwDOC0FsAM41mGSK",
    "user": {
      "login": "changwilling",
      "id": 19920067,
      "node_id": "MDQ6VXNlcjE5OTIwMDY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19920067?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/changwilling",
      "html_url": "https://github.com/changwilling",
      "followers_url": "https://api.github.com/users/changwilling/followers",
      "following_url": "https://api.github.com/users/changwilling/following{/other_user}",
      "gists_url": "https://api.github.com/users/changwilling/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/changwilling/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/changwilling/subscriptions",
      "organizations_url": "https://api.github.com/users/changwilling/orgs",
      "repos_url": "https://api.github.com/users/changwilling/repos",
      "events_url": "https://api.github.com/users/changwilling/events{/privacy}",
      "received_events_url": "https://api.github.com/users/changwilling/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-16T03:03:02Z",
    "updated_at": "2021-08-16T03:03:02Z",
    "author_association": "NONE",
    "body": "I also make a mistake when i run './build/bin/rpcdaemon --datadir=/data1/erigon' . The '-datadir' should be the same as when you run './build/bin/erigon --datadir=/data1/erigon' .",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/899179658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

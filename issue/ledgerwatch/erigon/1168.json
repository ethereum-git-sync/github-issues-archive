{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/1168",
  "id": 713109034,
  "node_id": "MDU6SXNzdWU3MTMxMDkwMzQ=",
  "number": 1168,
  "title": "Feature request: tg read-only mode",
  "user": {
    "login": "crypt1d",
    "id": 6261038,
    "node_id": "MDQ6VXNlcjYyNjEwMzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6261038?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/crypt1d",
    "html_url": "https://github.com/crypt1d",
    "followers_url": "https://api.github.com/users/crypt1d/followers",
    "following_url": "https://api.github.com/users/crypt1d/following{/other_user}",
    "gists_url": "https://api.github.com/users/crypt1d/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/crypt1d/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/crypt1d/subscriptions",
    "organizations_url": "https://api.github.com/users/crypt1d/orgs",
    "repos_url": "https://api.github.com/users/crypt1d/repos",
    "events_url": "https://api.github.com/users/crypt1d/events{/privacy}",
    "received_events_url": "https://api.github.com/users/crypt1d/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2020-10-01T19:05:08Z",
  "updated_at": "2020-10-21T17:34:53Z",
  "closed_at": "2020-10-21T17:34:53Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "Current implementation of `--chaindata` for the rpcdaemon leaves a lot to be desired, since many RPC call are not available in this mode. This is rather unfortunate because it still requires us to run the main tg daemon and pass requests over the network interface(twice). If we could at least have a tg mode which disables all features but the `private.api`, that would at least make it significantly less resource intensive (I assume).\r\n",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702353301",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-702353301",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 702353301,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjM1MzMwMQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T19:35:07Z",
    "updated_at": "2020-10-01T19:35:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @crypt1d We are not planning to have JSON RPC API exposed on the TG process itself, because we think it does not really belong there. Instead, we do have private api, which is essentially read only access to its database in the live mode. If your application is very demanding to performance and is sensitive to latencies between RPC daemon and TG, then you should be looking into using the private api directly, I think. Unfortunately, for this you will need to know the data model. And though we have started documenting it and make examples, it is far from complete.\r\nPlease refer to the architecture plans for some reasons why RPC daemon is separate: https://github.com/AlexeyAkhunov/papers/blob/master/Turbo-Geth-Silkworm-architecture-plans.pdf",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702353301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702364347",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-702364347",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 702364347,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjM2NDM0Nw==",
    "user": {
      "login": "crypt1d",
      "id": 6261038,
      "node_id": "MDQ6VXNlcjYyNjEwMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6261038?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/crypt1d",
      "html_url": "https://github.com/crypt1d",
      "followers_url": "https://api.github.com/users/crypt1d/followers",
      "following_url": "https://api.github.com/users/crypt1d/following{/other_user}",
      "gists_url": "https://api.github.com/users/crypt1d/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/crypt1d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/crypt1d/subscriptions",
      "organizations_url": "https://api.github.com/users/crypt1d/orgs",
      "repos_url": "https://api.github.com/users/crypt1d/repos",
      "events_url": "https://api.github.com/users/crypt1d/events{/privacy}",
      "received_events_url": "https://api.github.com/users/crypt1d/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T19:57:42Z",
    "updated_at": "2020-10-01T19:57:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you @AlexeyAkhunov . My apologizes, I think I may have poorly expressed myself.\r\n\r\nCurrently if one wants to get the 'full' JSON RPC, one has to run the TG daemon and the RPC daemon AND connect them over the TCP network. The RPC daemon has a `--chaindata` switch which would normally allow it to bypass the connection to the TG daemon and read the data from disk directly, but currently this mode does not support all JSON RPC functions (eg net_version or trace functions).\r\n\r\nThis kinda sucks because with `--chaindata` you can work with disk snapshots and you don't need to run the main TG process, which is pretty CPU intensive because it keeps syncing with the network. If we could find a way to force the TG process to work in a mode which disables all functions (eg peering, syncing, etc) except the private api, that would let us run a very lightweight solution for use cases like reading historical data from the blockchain. The JSON RPC requests would still go through the rpcdaemon. Its just that the TG process would only serve the private API requests and do nothing else.\r\n\r\nI guess in theory I could  achieve the same thing by blocking peering connections via a firewall, and only allow API requests. But I would certainly appreciate a more elegant solution baked into TG itself.\r\n\r\nI hope that makes sense!",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702364347/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702366106",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-702366106",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 702366106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjM2NjEwNg==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T20:01:17Z",
    "updated_at": "2020-10-01T20:01:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "`--chaindata` is designed only for debugging purposes, at least now. We sometimes use to debug, because we know the database won't change while we are testing. There is no plan to try to support all the features, but all the things that only require the database should actually work, including reading historical data. Which specific methods don't work for you that you think they should?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702366106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702374339",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-702374339",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 702374339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjM3NDMzOQ==",
    "user": {
      "login": "tjayrush",
      "id": 5417918,
      "node_id": "MDQ6VXNlcjU0MTc5MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5417918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tjayrush",
      "html_url": "https://github.com/tjayrush",
      "followers_url": "https://api.github.com/users/tjayrush/followers",
      "following_url": "https://api.github.com/users/tjayrush/following{/other_user}",
      "gists_url": "https://api.github.com/users/tjayrush/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tjayrush/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tjayrush/subscriptions",
      "organizations_url": "https://api.github.com/users/tjayrush/orgs",
      "repos_url": "https://api.github.com/users/tjayrush/repos",
      "events_url": "https://api.github.com/users/tjayrush/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tjayrush/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T20:18:32Z",
    "updated_at": "2020-10-01T20:18:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@crypt1d This table https://github.com/ledgerwatch/turbo-geth/tree/master/cmd/rpcdaemon#rpc-implementation-status has three or four items marked 'remote only'. I think these are the only calls (other than those not implemented) that don't work with `--chaindata`. If there are others, let me know, and I will add them.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702374339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702374593",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-702374593",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 702374593,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjM3NDU5Mw==",
    "user": {
      "login": "crypt1d",
      "id": 6261038,
      "node_id": "MDQ6VXNlcjYyNjEwMzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6261038?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/crypt1d",
      "html_url": "https://github.com/crypt1d",
      "followers_url": "https://api.github.com/users/crypt1d/followers",
      "following_url": "https://api.github.com/users/crypt1d/following{/other_user}",
      "gists_url": "https://api.github.com/users/crypt1d/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/crypt1d/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/crypt1d/subscriptions",
      "organizations_url": "https://api.github.com/users/crypt1d/orgs",
      "repos_url": "https://api.github.com/users/crypt1d/repos",
      "events_url": "https://api.github.com/users/crypt1d/events{/privacy}",
      "received_events_url": "https://api.github.com/users/crypt1d/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T20:19:06Z",
    "updated_at": "2020-10-01T20:19:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think my biggest pet peeve is `eth_getLogs`, but I'm not sure if that can work with the database only?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702374593/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702564359",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-702564359",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 702564359,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjU2NDM1OQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-02T07:03:05Z",
    "updated_at": "2020-10-02T07:03:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "`eth_getLogs` should be able to work with the database now, this has changed a few days ago. But I will double-check",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/702564359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/713738441",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/1168#issuecomment-713738441",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1168",
    "id": 713738441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMzczODQ0MQ==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-21T17:34:53Z",
    "updated_at": "2020-10-21T17:34:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "I am going to close this, please open if this is still an issue",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/713738441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5287",
  "id": 1362758501,
  "node_id": "I_kwDOC0FsAM5ROgtl",
  "number": 5287,
  "title": "Erigon mainnet stops sync unless restarted",
  "user": {
    "login": "vishnu-kvnvv",
    "id": 101790191,
    "node_id": "U_kgDOBhEx7w",
    "avatar_url": "https://avatars.githubusercontent.com/u/101790191?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vishnu-kvnvv",
    "html_url": "https://github.com/vishnu-kvnvv",
    "followers_url": "https://api.github.com/users/vishnu-kvnvv/followers",
    "following_url": "https://api.github.com/users/vishnu-kvnvv/following{/other_user}",
    "gists_url": "https://api.github.com/users/vishnu-kvnvv/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vishnu-kvnvv/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vishnu-kvnvv/subscriptions",
    "organizations_url": "https://api.github.com/users/vishnu-kvnvv/orgs",
    "repos_url": "https://api.github.com/users/vishnu-kvnvv/repos",
    "events_url": "https://api.github.com/users/vishnu-kvnvv/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vishnu-kvnvv/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-09-06T06:13:22Z",
  "updated_at": "2022-11-23T02:54:11Z",
  "closed_at": "2022-11-23T02:54:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I have started the sync following the below steps and was able to sync till block number 15431911 after that it's stuck at the same block for the past 2 days, can you help me with this?\r\n```\r\ngit clone --recurse-submodules -j8 https://github.com/ledgerwatch/erigon.git\r\ncd erigon\r\nmake erigon\r\n./build/bin/erigon --datadir=eth_mainnet --chain=mainnet --port=30303 --http.port=8545 --authrpc.port=8551 --torrent.port=42069 --private.api.addr=127.0.0.1:9090 --http --ws --http.api=eth,debug,net,trace,web3,erigon\r\n```",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1237984795",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5287#issuecomment-1237984795",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
    "id": 1237984795,
    "node_id": "IC_kwDOC0FsAM5JyiYb",
    "user": {
      "login": "vishnu-kvnvv",
      "id": 101790191,
      "node_id": "U_kgDOBhEx7w",
      "avatar_url": "https://avatars.githubusercontent.com/u/101790191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vishnu-kvnvv",
      "html_url": "https://github.com/vishnu-kvnvv",
      "followers_url": "https://api.github.com/users/vishnu-kvnvv/followers",
      "following_url": "https://api.github.com/users/vishnu-kvnvv/following{/other_user}",
      "gists_url": "https://api.github.com/users/vishnu-kvnvv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vishnu-kvnvv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vishnu-kvnvv/subscriptions",
      "organizations_url": "https://api.github.com/users/vishnu-kvnvv/orgs",
      "repos_url": "https://api.github.com/users/vishnu-kvnvv/repos",
      "events_url": "https://api.github.com/users/vishnu-kvnvv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vishnu-kvnvv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-06T10:48:03Z",
    "updated_at": "2022-09-06T11:05:05Z",
    "author_association": "NONE",
    "body": "On restart of the sync, it's executing from the previous synced block to the latest block at the time of execution(15482780), once the sync reaches the newest block number it's not syncing the future blocks. Is there any way to sync the blocks in real-time without restarts? ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1237984795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1238933838",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5287#issuecomment-1238933838",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
    "id": 1238933838,
    "node_id": "IC_kwDOC0FsAM5J2KFO",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-07T05:47:18Z",
    "updated_at": "2022-09-07T05:47:18Z",
    "author_association": "COLLABORATOR",
    "body": "show logs",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1238933838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1245101435",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5287#issuecomment-1245101435",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
    "id": 1245101435,
    "node_id": "IC_kwDOC0FsAM5KNr17",
    "user": {
      "login": "Shuixingchen",
      "id": 29504797,
      "node_id": "MDQ6VXNlcjI5NTA0Nzk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/29504797?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Shuixingchen",
      "html_url": "https://github.com/Shuixingchen",
      "followers_url": "https://api.github.com/users/Shuixingchen/followers",
      "following_url": "https://api.github.com/users/Shuixingchen/following{/other_user}",
      "gists_url": "https://api.github.com/users/Shuixingchen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Shuixingchen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Shuixingchen/subscriptions",
      "organizations_url": "https://api.github.com/users/Shuixingchen/orgs",
      "repos_url": "https://api.github.com/users/Shuixingchen/repos",
      "events_url": "https://api.github.com/users/Shuixingchen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Shuixingchen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-13T08:53:08Z",
    "updated_at": "2022-09-13T09:36:16Z",
    "author_association": "NONE",
    "body": "I have same problem\r\nNetwork: ETH mainnet\r\n\r\nIt seems that TxLookup Prune cost 37minute.\r\nErigon Log\r\n```shell\r\n[INFO] [09-13|08:39:53.910] [p2p] GoodPeers                          eth66=76\r\n[INFO] [09-13|08:40:00.109] [txpool] stat                            block=15525868 pending=10000 baseFee=30000 queued=30000 alloc=5.9GB sys=8.3GB\r\n[INFO] [09-13|08:40:16.441] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=0a29a8c0... alloc=3.2GB sys=8.3GB\r\n[INFO] [09-13|08:40:46.441] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=1470eb79... alloc=3.6GB sys=8.3GB\r\n[INFO] [09-13|08:41:00.102] [txpool] stat                            block=15525868 pending=10000 baseFee=30000 queued=30000 alloc=3.7GB sys=8.3GB\r\n[INFO] [09-13|08:41:16.440] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=1ea9ffdb... alloc=3.9GB sys=8.3GB\r\n[INFO] [09-13|08:41:46.440] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=28caa7b0... alloc=4.2GB sys=8.3GB\r\n[INFO] [09-13|08:41:53.910] [p2p] GoodPeers                          eth66=79\r\n[INFO] [09-13|08:42:03.847] [txpool] stat                            block=15525868 pending=10000 baseFee=30000 queued=30000 alloc=4.4GB sys=8.3GB\r\n[INFO] [09-13|08:42:16.442] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=32da8f6b... alloc=3.2GB sys=8.3GB\r\n[INFO] [09-13|08:42:46.441] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=3cdd5325... alloc=3.6GB sys=8.3GB\r\n...\r\n[INFO] [09-13|08:54:16.440] [14/16 TxLookup Prune] ETL [2/2] Loading into=BlockTransactionLookup current key=f8060618... alloc=3.3GB sys=8.3GB\r\n[INFO] [09-13|08:54:41.231] [14/16 TxLookup Prune] etl: temp files removed total size=596.6MB\r\n[INFO] [09-13|08:54:41.234] [14/16 TxLookup] Prune done              in=37m4.388258288s\r\n[INFO] [09-13|08:54:42.188] Timings (slower than 50ms)               Headers=42.133s Senders=61ms Execution=598ms HashState=1.007s IntermediateHashes=1.969s CallTraces=797ms AccountHistoryIndex=671ms StorageHistoryIndex=317ms LogIndex=257ms Prune TxLookup=37m4.388s Prune Senders=948ms\r\n[INFO] [09-13|08:54:42.189] Tables                                   PlainState=73.5GB AccountChangeSet=162.5GB StorageChangeSet=240.3GB BlockTransaction=42.8GB TransactionLog=446.1GB FreeList=24.2MB ReclaimableSpace=24.2GB\r\n[INFO] [09-13|08:54:42.196] [snapshots] Retire Blocks                range=15200k-15300k\r\n[INFO] [09-13|08:55:00.102] [txpool] stat                            block=15525868 pending=10000 baseFee=30000 queued=30000 alloc=4.6GB sys=8.3GB\r\n[INFO] [09-13|08:55:02.200] [snapshots] Dumping headers              block num=15258325 alloc=4.6GB sys=8.3GB\r\n[INFO] [09-13|08:55:22.200] [snapshots] Dumping headers              block num=15286268 alloc=5.3GB sys=8.3GB\r\n[INFO] [09-13|08:55:53.910] [p2p] GoodPeers                          eth66=96\r\n[INFO] [09-13|08:56:00.134] [txpool] stat                            block=15525868 pending=10000 baseFee=30000 queued=30000 alloc=6.0GB sys=8.3GB\r\n[INFO] [09-13|08:56:21.011] [snapshots] Dumping txs                  block num=15200208 alloc=3.5GB sys=8.3GB\r\n[INFO] [09-13|08:56:40.252] Commit cycle                             in=1m58.060753772s\r\n[INFO] [09-13|08:56:40.254] RPC Daemon notified of new headers       from=15525868 to=15525869 header sending=455.97µs log sending=410ns\r\n[INFO] [09-13|08:56:40.261] [1/16 Headers] Waiting for headers...    from=15525869\r\n[INFO] [09-13|08:56:40.721] [snapshots] Dumping txs                  block num=15200743 alloc=4.3GB sys=8.3GB\r\n[INFO] [09-13|08:56:40.814] Estimated to reaching TTD                blocks=11388\r\n[INFO] [09-13|08:56:40.814] [1/16 Headers] Processed                 highest inserted=15526011 age=47s\r\n[INFO] [09-13|08:56:40.836] [4/16 Bodies] Processing bodies...       from=15525869 to=15526011\r\n[INFO] [09-13|08:56:40.949] [4/16 Bodies] Processed                  highest=15526011\r\n[INFO] [09-13|08:56:40.949] [5/16 Senders] Started                   from=15525869 to=15526011\r\n[INFO] [09-13|08:56:41.237] [6/16 Execution] Blocks execution        from=15525869 to=15526011\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1245101435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1246124302",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5287#issuecomment-1246124302",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
    "id": 1246124302,
    "node_id": "IC_kwDOC0FsAM5KRlkO",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-14T01:40:08Z",
    "updated_at": "2022-09-14T01:40:40Z",
    "author_association": "COLLABORATOR",
    "body": "1. Your version\r\n2. Do you see slow txLookup prune on every cycle? \r\n3. What are your prune flags?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1246124302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1288395011",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5287#issuecomment-1288395011",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
    "id": 1288395011,
    "node_id": "IC_kwDOC0FsAM5My1kD",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-10-24T04:16:14Z",
    "updated_at": "2022-10-24T04:16:14Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1288395011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1324482999",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5287#issuecomment-1324482999",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5287",
    "id": 1324482999,
    "node_id": "IC_kwDOC0FsAM5O8gG3",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-11-23T02:54:11Z",
    "updated_at": "2022-11-23T02:54:11Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1324482999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/986",
  "id": 687594975,
  "node_id": "MDU6SXNzdWU2ODc1OTQ5NzU=",
  "number": 986,
  "title": "Please support eth_syncing",
  "user": {
    "login": "MysticRyuujin",
    "id": 8877131,
    "node_id": "MDQ6VXNlcjg4NzcxMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MysticRyuujin",
    "html_url": "https://github.com/MysticRyuujin",
    "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
    "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
    "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
    "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
    "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
    "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-08-27T22:59:34Z",
  "updated_at": "2020-09-01T11:54:05Z",
  "closed_at": "2020-09-01T11:54:05Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "At ArchiveNode.io we use a fault tolerant load balancer called `dshackle` which continually queries our nodes with calls like `eth_getBlockNumber`, `eth_getBlockByNumber`, and `eth_syncing` in order to get the status of each individual node and figure out if any of our nodes are lagging or stuck. It then redirects queries based on the health and status of the node.\r\n\r\nWe'd really like to include Turbo-Geth nodes into ArchiveNode.io at some point, but right now not having `eth_syncing` as an available RPC endpoint is a show stopper for us.\r\n\r\nThanks :pray: ",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682333189",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/986#issuecomment-682333189",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986",
    "id": 682333189,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjMzMzE4OQ==",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T05:28:44Z",
    "updated_at": "2020-08-28T05:28:44Z",
    "author_association": "COLLABORATOR",
    "body": "Here you go: https://github.com/ledgerwatch/turbo-geth/pull/991 ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682333189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682378741",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/986#issuecomment-682378741",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986",
    "id": 682378741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjM3ODc0MQ==",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T07:39:25Z",
    "updated_at": "2020-08-28T07:41:47Z",
    "author_association": "COLLABORATOR",
    "body": "@MysticRyuujin , this method is a bit irrelevant for TG. \r\nCan you give us more details - how you using it? \r\nWhat you wanna see there (in terms of useful info)? \r\nWhat can we do to make it more useful for you? For example return some TG-related info.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682378741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682484896",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/986#issuecomment-682484896",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986",
    "id": 682484896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjQ4NDg5Ng==",
    "user": {
      "login": "MysticRyuujin",
      "id": 8877131,
      "node_id": "MDQ6VXNlcjg4NzcxMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8877131?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MysticRyuujin",
      "html_url": "https://github.com/MysticRyuujin",
      "followers_url": "https://api.github.com/users/MysticRyuujin/followers",
      "following_url": "https://api.github.com/users/MysticRyuujin/following{/other_user}",
      "gists_url": "https://api.github.com/users/MysticRyuujin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MysticRyuujin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MysticRyuujin/subscriptions",
      "organizations_url": "https://api.github.com/users/MysticRyuujin/orgs",
      "repos_url": "https://api.github.com/users/MysticRyuujin/repos",
      "events_url": "https://api.github.com/users/MysticRyuujin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MysticRyuujin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T11:56:21Z",
    "updated_at": "2020-08-28T11:56:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "So that's really hard for me to answer as I don't know all of the inner workings of dshackle...\r\n\r\nWhat I assume is that under normal operating conditions it is basically irrelevant for most nodes...after all, it's `false` the overwhelming majority of the time.\r\n\r\nBut, when a node goes offline for a bit and then comes back online, it hears about the latest blocks from peers and then it reports back \"I'm on block x, highest block I know about is y\"\r\n\r\nI assume dshackle uses this information to determine the lag for that node, and/or knows not to send it requests for \"latest\" block when it's in the middle of syncing.\r\n\r\nBut again, I'm mostly speculating, I know that not having `eth_syncing` results in dshackle marking the node as unavailable right now.\r\n\r\nI can toggle an option in dshackle to disable validation (something designed for Infura) but that would result in all of the health checks being turned off, which would be bad if the node got stuck.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682484896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682648778",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/986#issuecomment-682648778",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986",
    "id": 682648778,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjY0ODc3OA==",
    "user": {
      "login": "splix",
      "id": 48364,
      "node_id": "MDQ6VXNlcjQ4MzY0",
      "avatar_url": "https://avatars.githubusercontent.com/u/48364?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/splix",
      "html_url": "https://github.com/splix",
      "followers_url": "https://api.github.com/users/splix/followers",
      "following_url": "https://api.github.com/users/splix/following{/other_user}",
      "gists_url": "https://api.github.com/users/splix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/splix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/splix/subscriptions",
      "organizations_url": "https://api.github.com/users/splix/orgs",
      "repos_url": "https://api.github.com/users/splix/repos",
      "events_url": "https://api.github.com/users/splix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/splix/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-28T14:47:40Z",
    "updated_at": "2020-08-28T14:47:40Z",
    "author_association": "NONE",
    "body": "Thanks @MysticRyuujin. Let me also add some details. [Dshackle](https://github.com/emeraldpay/dshackle) is a load balancer whose job is to dispatch requests only to fully synchronized nodes. To verify the state of a node, it makes several requests, such as `eth_syncing` and `net_peerCount`. If a node is syncing, or doesn't have enough peers (say less than 3, which probably means that the nodes is too fresh and may not know yet that is needs to start syncing) then it's marked as a _non-OK_ node and requests are not routed to it until it gets fully synced and healthy.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/682648778/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/683251660",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/986#issuecomment-683251660",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/986",
    "id": 683251660,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MzI1MTY2MA==",
    "user": {
      "login": "AlexeyAkhunov",
      "id": 13686139,
      "node_id": "MDQ6VXNlcjEzNjg2MTM5",
      "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AlexeyAkhunov",
      "html_url": "https://github.com/AlexeyAkhunov",
      "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
      "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
      "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
      "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
      "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-29T07:38:02Z",
    "updated_at": "2020-08-29T07:38:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Should be fixed in here: https://github.com/ledgerwatch/turbo-geth/pull/991",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/683251660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

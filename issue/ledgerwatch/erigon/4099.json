{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4099",
  "id": 1228702455,
  "node_id": "I_kwDOC0FsAM5JPIL3",
  "number": 4099,
  "title": "Also stuck at \"Wrote block headers...\"",
  "user": {
    "login": "garyrob",
    "id": 1130621,
    "node_id": "MDQ6VXNlcjExMzA2MjE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1130621?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/garyrob",
    "html_url": "https://github.com/garyrob",
    "followers_url": "https://api.github.com/users/garyrob/followers",
    "following_url": "https://api.github.com/users/garyrob/following{/other_user}",
    "gists_url": "https://api.github.com/users/garyrob/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/garyrob/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/garyrob/subscriptions",
    "organizations_url": "https://api.github.com/users/garyrob/orgs",
    "repos_url": "https://api.github.com/users/garyrob/repos",
    "events_url": "https://api.github.com/users/garyrob/events{/privacy}",
    "received_events_url": "https://api.github.com/users/garyrob/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-05-07T19:15:13Z",
  "updated_at": "2022-05-08T06:00:17Z",
  "closed_at": "2022-05-08T06:00:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: 2022.99.99-dev-54076c9b\r\n\r\nOS & Version:  Ubuntu 22.04 LTS \r\n\r\nCommit hash : devel branch\r\n\r\n#### Expected behaviour\r\nSyncing finished.\r\n\r\n\r\n#### Actual behaviour\r\nStuck at Wrote block headers number=14499999 blk/second=0.000 alloc=6.9Gb sys=20.3Gb\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n~/erigon/build/bin/erigon\r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO[05-07|12:02:41.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=15.0Gb sys=23.3Gb\r\nINFO[05-07|12:03:01.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=9.3Gb sys=23.3Gb\r\nINFO[05-07|12:03:12.688] [p2p] GoodPeers                          eth66=64\r\nINFO[05-07|12:03:21.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=12.2Gb sys=23.3Gb\r\nINFO[05-07|12:03:41.962] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=15.0Gb sys=23.3Gb\r\nINFO[05-07|12:04:01.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=13.2Gb sys=23.3Gb\r\nINFO[05-07|12:04:21.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=11.9Gb sys=23.3Gb\r\nINFO[05-07|12:04:41.962] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=14.7Gb sys=23.3Gb\r\nINFO[05-07|12:05:01.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=17.6Gb sys=23.3Gb\r\nINFO[05-07|12:05:12.689] [p2p] GoodPeers                          eth66=61\r\nINFO[05-07|12:05:21.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=11.9Gb sys=23.3Gb\r\nINFO[05-07|12:05:41.963] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=14.8Gb sys=23.3Gb\r\nINFO[05-07|12:06:01.962] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=17.7Gb sys=23.3Gb\r\nINFO[05-07|12:06:21.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=11.6Gb sys=23.3Gb\r\nINFO[05-07|12:06:41.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=14.5Gb sys=23.3Gb\r\nINFO[05-07|12:07:01.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=17.3Gb sys=23.3Gb\r\nINFO[05-07|12:07:12.688] [p2p] GoodPeers                          eth66=60\r\nINFO[05-07|12:07:21.962] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=11.3Gb sys=23.3Gb\r\nINFO[05-07|12:07:41.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=14.1Gb sys=23.3Gb\r\nINFO[05-07|12:08:01.961] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=17.0Gb sys=23.3Gb\r\n\r\n````\r\n#########################################################\r\n\r\nNote that this appears to be the same issue as 4081 except that a) it's stuck at block 14499999, and b) I am using a version of erigon that I understand should include the fix that supposedly solved 4081. Although, it's suspicious that the error is occuring on 1 block before a very round block height. \r\n\r\nI ran the erigon executable with no argsâ€”I didn't know any reason I shouldn't go with all the defaults.\r\n\r\nI don't know whether this is relevant, but before installing the latest release, I had a rapid infinite loop on a particular block saying something like \"bad execution\". This was while running an untagged devel release from a few days ago. I figured it might get fixed if I just upgrade to the latest devel release. So I did so, and now I'm in the loop described above.\r\n\r\nIf necessary I can delete all my data and re-sync from scratch, but I'd rather not!",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120324965",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4099#issuecomment-1120324965",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
    "id": 1120324965,
    "node_id": "IC_kwDOC0FsAM5Cxs1l",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-08T00:52:05Z",
    "updated_at": "2022-05-08T00:52:05Z",
    "author_association": "COLLABORATOR",
    "body": "show a bit more logs pls, before that repeating lines.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120324965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120325415",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4099#issuecomment-1120325415",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
    "id": 1120325415,
    "node_id": "IC_kwDOC0FsAM5Cxs8n",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-08T00:56:18Z",
    "updated_at": "2022-05-08T00:56:18Z",
    "author_association": "COLLABORATOR",
    "body": "You also can try next fix: https://github.com/ledgerwatch/erigon/issues/4037#issuecomment-1114131161",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120325415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120325977",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4099#issuecomment-1120325977",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
    "id": 1120325977,
    "node_id": "IC_kwDOC0FsAM5CxtFZ",
    "user": {
      "login": "garyrob",
      "id": 1130621,
      "node_id": "MDQ6VXNlcjExMzA2MjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1130621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyrob",
      "html_url": "https://github.com/garyrob",
      "followers_url": "https://api.github.com/users/garyrob/followers",
      "following_url": "https://api.github.com/users/garyrob/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyrob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyrob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyrob/subscriptions",
      "organizations_url": "https://api.github.com/users/garyrob/orgs",
      "repos_url": "https://api.github.com/users/garyrob/repos",
      "events_url": "https://api.github.com/users/garyrob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyrob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-08T00:57:26Z",
    "updated_at": "2022-05-08T00:57:26Z",
    "author_association": "NONE",
    "body": "Restarted it. Here's the log from the new run:\r\n\r\n./erigon/build/bin/erigon\r\nINFO[05-07|17:54:48.329] Build info                               git_branch=devel git_tag=v2022.05.02 git_commit=54076c9bcfb5670e8189e2698c7115b39ae9fd56\r\nINFO[05-07|17:54:48.329] Starting Erigon on Ethereum mainnet...\r\nINFO[05-07|17:54:48.330] Maximum peer count                       ETH=100 total=100\r\nINFO[05-07|17:54:50.433] Set global gas cap                       cap=50000000\r\nINFO[05-07|17:54:50.486] Opening Database                         label=chaindata path=/home/garyrob/.local/share/erigon/chaindata\r\nINFO[05-07|17:54:50.503] Initialised chain configuration          config=\"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, Berlin: 12244000, London: 12965000, Arrow Glacier: 13773000, Terminal Total Difficulty: <nil>, Engine: ethash}\" genesis=0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3\r\nINFO[05-07|17:54:51.115] Disk storage enabled for ethash DAGs     dir=/home/garyrob/.local/share/erigon/ethash-dags count=2\r\nINFO[05-07|17:54:51.115] Initialising Ethereum protocol           network=1\r\nINFO[05-07|17:54:51.115] Effective                                prune_flags=\"--prune=\" snapshot_flags=\"--syncmode=snap\"\r\nINFO[05-07|17:54:51.739] Starting private RPC server              on=127.0.0.1:9090\r\nINFO[05-07|17:54:51.740] new subscription to logs established\r\nINFO[05-07|17:54:51.751] [Snapshots] Fetching torrent files metadata\r\nINFO[05-07|17:54:51.760] Started P2P networking                   version=66 self=enode://3fce5337d345af134b1481c6ede455d90e5702fdb032fe5f96200c822949e6821bbebd26a7497c06d1d3bf6f35bfd10655e3b7d419c9fe6daa4c53c3fcb3b98b@127.0.0.1:30303 name=erigon/v2022.99.99-dev-54076c9b/linux-amd64/go1.18.1\r\nINFO[05-07|17:55:19.732] [1/16 Headers] Waiting for headers...    from=14499999\r\nINFO[05-07|17:55:39.733] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=6.8Gb sys=11.0Gb\r\nINFO[05-07|17:55:59.733] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=6.8Gb sys=11.0Gb\r\nINFO[05-07|17:56:19.733] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=6.8Gb sys=11.0Gb\r\nINFO[05-07|17:56:39.733] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=6.8Gb sys=11.0Gb\r\nINFO[05-07|17:56:50.504] [p2p] GoodPeers                          eth66=2\r\nINFO[05-07|17:56:59.733] [1/16 Headers] Wrote block headers       number=14499999 blk/second=0.000 alloc=6.9Gb sys=11.0Gb\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120325977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120328956",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4099#issuecomment-1120328956",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
    "id": 1120328956,
    "node_id": "IC_kwDOC0FsAM5Cxtz8",
    "user": {
      "login": "garyrob",
      "id": 1130621,
      "node_id": "MDQ6VXNlcjExMzA2MjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1130621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyrob",
      "html_url": "https://github.com/garyrob",
      "followers_url": "https://api.github.com/users/garyrob/followers",
      "following_url": "https://api.github.com/users/garyrob/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyrob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyrob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyrob/subscriptions",
      "organizations_url": "https://api.github.com/users/garyrob/orgs",
      "repos_url": "https://api.github.com/users/garyrob/repos",
      "events_url": "https://api.github.com/users/garyrob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyrob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-08T01:27:30Z",
    "updated_at": "2022-05-08T01:27:30Z",
    "author_association": "NONE",
    "body": "I think the fix at https://github.com/ledgerwatch/erigon/issues/4037#issuecomment-1114131161 may have fixed it. It's doing something different, with a number of rows of inserting headers. I have to go now and won't be able to report further for a while, so I just wanted to give that feedback while I could.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120328956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120329951",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4099#issuecomment-1120329951",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
    "id": 1120329951,
    "node_id": "IC_kwDOC0FsAM5CxuDf",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-08T01:37:23Z",
    "updated_at": "2022-05-08T01:37:23Z",
    "author_association": "COLLABORATOR",
    "body": "good",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120329951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120341448",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4099#issuecomment-1120341448",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4099",
    "id": 1120341448,
    "node_id": "IC_kwDOC0FsAM5Cxw3I",
    "user": {
      "login": "garyrob",
      "id": 1130621,
      "node_id": "MDQ6VXNlcjExMzA2MjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1130621?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/garyrob",
      "html_url": "https://github.com/garyrob",
      "followers_url": "https://api.github.com/users/garyrob/followers",
      "following_url": "https://api.github.com/users/garyrob/following{/other_user}",
      "gists_url": "https://api.github.com/users/garyrob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/garyrob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/garyrob/subscriptions",
      "organizations_url": "https://api.github.com/users/garyrob/orgs",
      "repos_url": "https://api.github.com/users/garyrob/repos",
      "events_url": "https://api.github.com/users/garyrob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/garyrob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-08T03:19:34Z",
    "updated_at": "2022-05-08T03:19:34Z",
    "author_association": "NONE",
    "body": "Yes, it appears to be fixed! Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1120341448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

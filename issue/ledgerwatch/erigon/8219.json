{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8219",
  "id": 1899607497,
  "node_id": "I_kwDOC0FsAM5xObXJ",
  "number": 8219,
  "title": "Access_list Returning wrong values",
  "user": {
    "login": "Arvmor",
    "id": 16479488,
    "node_id": "MDQ6VXNlcjE2NDc5NDg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16479488?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Arvmor",
    "html_url": "https://github.com/Arvmor",
    "followers_url": "https://api.github.com/users/Arvmor/followers",
    "following_url": "https://api.github.com/users/Arvmor/following{/other_user}",
    "gists_url": "https://api.github.com/users/Arvmor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Arvmor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Arvmor/subscriptions",
    "organizations_url": "https://api.github.com/users/Arvmor/orgs",
    "repos_url": "https://api.github.com/users/Arvmor/repos",
    "events_url": "https://api.github.com/users/Arvmor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Arvmor/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-09-17T00:21:30Z",
  "updated_at": "2023-09-18T15:38:25Z",
  "closed_at": "2023-09-18T15:38:25Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: erigon version 2.48.0-stable-084acc1a\r\n\r\nOS & Version: Windows 11\r\n\r\nCommit hash: 084acc1af2e853ee4a57dbdd6920b6a1e58ef85c\r\n\r\nErigon Command (with flags/config): \r\n`./build/bin/erigon --datadir=\"../erigon_datadir\" --authrpc.jwtsecret=\"../jwtsecret\" --http --http.addr=\"127.0.0.1\" --http.port=\"8545\" --http.compression --http.api=\"eth,admin,debug,net,trace,web3,erigon\" --rpc.batch.concurrency=10 --rpc.returndata.limit=10000000000 --rpc.streaming.disable --rpc.batch.limit=500000000 --trace.maxtraces=10000000 --txpool.disable`\r\n\r\nConcensus Layer: Lighthouse\r\n\r\nConcensus Layer Command (with flags/config): \r\n` ./lighthouse.exe beacon_node --datadir=\"../lighthouse_datadir\" --network=\"mainnet\" --execution-jwt=\"../jwtsecret\" --execution-endpoint=\"http://127.0.0.1:8551\" --http --checkpoint-sync-url=\"https://xxx/\" --reconstruct-historic-states --suggested-fee-recipient=\"0xaeeb8456f598F7242Ed32bC9658BA20f6B4557fd\"`\r\n\r\nChain/Network: Mainnet\r\n\r\n#### Expected behaviour\r\nShould be looking like this:\r\n```\r\n[\r\n  {\r\n    \"address\": \"0xa27db5b0c37eb22a38709998ba39139dccae96f0\",\r\n    \"storageKeys\": [\r\n      \"0x2a13c782e08384db055aab671be2259fa74669b8408c8b8d8b6f61879df48aec\",\r\n      \"0x038a6b1d50b565153ecaa3769059d51374c51dd54d3896877953e689bc96a80b\",\r\n      \"0xc8fae0ce9387009bf4af52b51b4dff1e8ab2c515b7f3b22352e771123785281e\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xdff32c65f843188cf64ecbc6f4a13cff12581b9d\",\r\n    \"storageKeys\": [\r\n      \"0x25a3858d412bdbc1a98f1ecb9e808d924f788cb53e5cd92b19df87ecee5acebe\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0x43d7e65b8ff49698d9550a7f315c87e67344fb59\",\r\n    \"storageKeys\": [\r\n      \"0xa73ce99dd8ac76dea6de890fa71300accfde755b97bf1c541aef9615de6bbc24\",\r\n      \"0x9c0d39f1566824edcd5efab41fa357abbfb7529e6a0482f5ce51843ab6a69458\",\r\n      \"0xc2bb861d233e1c95a905a377a41b39fea66a8e7909a8176255695b218b60dd2e\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000005\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000006\",\r\n      \"0x0262d81aa5ac2a95527ba266612b793855c9e53d1e3bfa51f036499843a8995d\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000007\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xbe042e9d09cb588331ff911c2b46fd833a3e5bd6\",\r\n    \"storageKeys\": [\r\n      \"0x82b4b2df7e8ee6841929be48f7ed0d751abcdb6d9df85513e801a1e544b29314\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000009\",\r\n      \"0xf08cc23035222e695827f62008f023fa51c9c3eff4a5789ff8041661ec86fe7f\",\r\n      \"0x507439d85171f4572d1aa6ca11d0ca178e88d133b58af1d404a373b43c55edfe\",\r\n      \"0x575f14b59c712da17c3fb5a14b3e622a83a5b673f84e10ecd672313c1bf4faa6\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000016\",\r\n      \"0x1ddfc2798d991536343294827d6b747803c4acd7433b0c3eb795fbae323b4453\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000011\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000005\",\r\n      \"0xc118cf1cf9028d6842d26a1571b18152f5a9778d7af21888d38525f5e0d6a43e\",\r\n      \"0x71094b791e5b1cb31a4425287225fadf593f5496d812d080ee7348e503a32706\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000023\",\r\n      \"0x1452bec7c5a6b3b18899526ff060d769988f8a08d53556d16d83520944659dd5\",\r\n      \"0x0262d81aa5ac2a95527ba266612b793855c9e53d1e3bfa51f036499843a8995d\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",\r\n    \"storageKeys\": [\r\n      \"0x17b6a0571ae95c2120ea462d94844e735c9b20e091f31600bcf0bf07a21c083c\",\r\n      \"0x69cca0f4d624fd4aace8d6acb115f9667fa5fb9dbc2f95c1ba1dac3dfa772a23\",\r\n      \"0x65b0bef88a69116c485f661cd6d7ec74691ca4c897652f30ac85d057541cc197\",\r\n      \"0x29014e76b0986d11d3cdf684c1f9f21c48ee047d65ac69db0da87068aa883c4f\",\r\n      \"0xedb780494165bcb938da835be6281cb905024dc45baa825ee3420307dc5e0e42\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xf487b3bf06f4696b5d5041b9cf80a938a837eae3\",\r\n    \"storageKeys\": [\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000c\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000008\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000006\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000007\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000009\",\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000a\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0x81a460ea6fd96a73d5672f1f4aa684697d4b44cc\",\r\n    \"storageKeys\": [\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000c\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000008\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000006\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000007\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0x8616b44b734817a2c954016a57cf2c4d72d6f838\",\r\n    \"storageKeys\": [\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000c\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000008\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000006\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000007\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xbe1737dae50f225b9480d68ee8f889e81d364615\",\r\n    \"storageKeys\": [\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000c\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000008\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000006\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000007\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000009\",\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000a\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0x256d1fce1b1221e8398f65f9b36033ce50b2d497\",\r\n    \"storageKeys\": [\r\n      \"0x216b3cd9ff78bbad3622a9e776be2e605fe92a231d87ecb324ab4f36773e4539\",\r\n      \"0x0262d81aa5ac2a95527ba266612b793855c9e53d1e3bfa51f036499843a8995d\"\r\n    ]\r\n  }\r\n]\r\n\r\n```\r\n#### Actual behaviour\r\n```\r\n[\r\n  {\r\n    \"address\": \"0x256d1fce1b1221e8398f65f9b36033ce50b2d497\",\r\n    \"storageKeys\": [\r\n      \"0x0262d81aa5ac2a95527ba266612b793855c9e53d1e3bfa51f036499843a8995d\",\r\n      \"0x216b3cd9ff78bbad3622a9e776be2e605fe92a231d87ecb324ab4f36773e4539\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xbe1737dae50f225b9480d68ee8f889e81d364615\",\r\n    \"storageKeys\": [\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000006\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000007\",\r\n      \"0x000000000000000000000000000000000000000000000000000000000000000c\",\r\n      \"0x0000000000000000000000000000000000000000000000000000000000000008\"\r\n    ]\r\n  },\r\n  {\r\n    \"address\": \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\",\r\n    \"storageKeys\": [\r\n      \"0xedb780494165bcb938da835be6281cb905024dc45baa825ee3420307dc5e0e42\",\r\n      \"0x29014e76b0986d11d3cdf684c1f9f21c48ee047d65ac69db0da87068aa883c4f\"\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\nThe access list is generated on a backrun transaction, so the transaction on itself would revert if it gets simulate alone, \r\nso that's a hint about why this access list is faulty, however there is no other way available to generate access lists as a bundle of transactions, but then why would it return an access list if that's the case?",
  "closed_by": {
    "login": "Arvmor",
    "id": 16479488,
    "node_id": "MDQ6VXNlcjE2NDc5NDg4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16479488?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Arvmor",
    "html_url": "https://github.com/Arvmor",
    "followers_url": "https://api.github.com/users/Arvmor/followers",
    "following_url": "https://api.github.com/users/Arvmor/following{/other_user}",
    "gists_url": "https://api.github.com/users/Arvmor/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Arvmor/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Arvmor/subscriptions",
    "organizations_url": "https://api.github.com/users/Arvmor/orgs",
    "repos_url": "https://api.github.com/users/Arvmor/repos",
    "events_url": "https://api.github.com/users/Arvmor/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Arvmor/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1722351048",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8219#issuecomment-1722351048",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8219",
    "id": 1722351048,
    "node_id": "IC_kwDOC0FsAM5mqP3I",
    "user": {
      "login": "Arvmor",
      "id": 16479488,
      "node_id": "MDQ6VXNlcjE2NDc5NDg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16479488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Arvmor",
      "html_url": "https://github.com/Arvmor",
      "followers_url": "https://api.github.com/users/Arvmor/followers",
      "following_url": "https://api.github.com/users/Arvmor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Arvmor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Arvmor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Arvmor/subscriptions",
      "organizations_url": "https://api.github.com/users/Arvmor/orgs",
      "repos_url": "https://api.github.com/users/Arvmor/repos",
      "events_url": "https://api.github.com/users/Arvmor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Arvmor/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-17T00:23:44Z",
    "updated_at": "2023-09-17T00:24:29Z",
    "author_association": "NONE",
    "body": "Some additional information that might help:\r\n\r\nback-run transaction with the wrong generated access list: \r\nhttps://etherscan.io/tx/0xfb29b47ec66e854918addbe8628370bb911796f95bb8456d5c86953dce799ead\r\n\r\nfront-run transaction with the right access list:\r\nhttps://etherscan.io/tx/0x34787a3c8b837ab2a86a597f6d73fce57394961617592beedc69caea68dbe7c6",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1722351048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

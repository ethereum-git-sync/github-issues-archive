{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4543",
  "id": 1284768506,
  "node_id": "I_kwDOC0FsAM5MlAL6",
  "number": 4543,
  "title": "Deadlock of sync & RPC under load.",
  "user": {
    "login": "wetezos",
    "id": 40154568,
    "node_id": "MDQ6VXNlcjQwMTU0NTY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/wetezos",
    "html_url": "https://github.com/wetezos",
    "followers_url": "https://api.github.com/users/wetezos/followers",
    "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
    "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
    "organizations_url": "https://api.github.com/users/wetezos/orgs",
    "repos_url": "https://api.github.com/users/wetezos/repos",
    "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
    "received_events_url": "https://api.github.com/users/wetezos/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "mandrigin",
    "id": 466427,
    "node_id": "MDQ6VXNlcjQ2NjQyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mandrigin",
    "html_url": "https://github.com/mandrigin",
    "followers_url": "https://api.github.com/users/mandrigin/followers",
    "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
    "organizations_url": "https://api.github.com/users/mandrigin/orgs",
    "repos_url": "https://api.github.com/users/mandrigin/repos",
    "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mandrigin/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 61,
  "created_at": "2022-06-26T01:43:56Z",
  "updated_at": "2022-08-20T16:16:51Z",
  "closed_at": "2022-07-14T10:01:57Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `./erigon --version`\r\nerigon version 2022.06.6-alpha-77240899\r\nOS & Version: Windows/Linux/OSX\r\nLinux version 4.15.0-163-generic (buildd@lcy01-amd64-021) (gcc version 7.5.0 (Ubuntu 7.5.0-3ubuntu1~18.04)) #171-Ubuntu SMP Fri Nov 5 11:55:11 UTC 2021\r\nCommit hash : \r\n(HEAD detached at v2022.06.06)\r\n#### Issue\r\nWhen I upgrade to the latest version, When the number of accesses per second reaches 5, the node does not synchronize the data,and the RPC is not accessible\r\n\r\n#### logs\r\n\r\n`Jun 26 03:11:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:11:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:13:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:13:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:15:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:15:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:17:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:17:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:19:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:19:05.029] [p2p] GoodPeers                          eth66=100\r\nJun 26 03:21:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:21:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:23:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:23:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:25:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:25:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:27:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:27:05.029] [p2p] GoodPeers                          eth66=99\r\nJun 26 03:29:05 Ubuntu-1804-bionic-64-minimal erigon[31704]: [INFO] [06-26|03:29:05.029] [p2p] GoodPeers                          eth66=100`\r\n\r\n",
  "closed_by": {
    "login": "mandrigin",
    "id": 466427,
    "node_id": "MDQ6VXNlcjQ2NjQyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mandrigin",
    "html_url": "https://github.com/mandrigin",
    "followers_url": "https://api.github.com/users/mandrigin/followers",
    "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
    "organizations_url": "https://api.github.com/users/mandrigin/orgs",
    "repos_url": "https://api.github.com/users/mandrigin/repos",
    "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mandrigin/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166402117",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1166402117",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1166402117,
    "node_id": "IC_kwDOC0FsAM5FheJF",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-26T02:31:07Z",
    "updated_at": "2022-06-26T02:31:07Z",
    "author_association": "COLLABORATOR",
    "body": "Not enough logs. \r\nmaybe it does DB migration?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166402117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166481605",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1166481605",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1166481605,
    "node_id": "IC_kwDOC0FsAM5FhxjF",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-26T10:15:54Z",
    "updated_at": "2022-06-26T10:15:54Z",
    "author_association": "NONE",
    "body": "> \r\nThe node has been upgraded for about 3 days. No DB migration logs are seen. The migration should be completed\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166481605/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166504459",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1166504459",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1166504459,
    "node_id": "IC_kwDOC0FsAM5Fh3IL",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-26T11:39:11Z",
    "updated_at": "2022-06-26T11:39:11Z",
    "author_association": "COLLABORATOR",
    "body": "Show more logs",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1166504459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1172863089",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1172863089",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1172863089,
    "node_id": "IC_kwDOC0FsAM5F6Hhx",
    "user": {
      "login": "hritique",
      "id": 47852078,
      "node_id": "MDQ6VXNlcjQ3ODUyMDc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/47852078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hritique",
      "html_url": "https://github.com/hritique",
      "followers_url": "https://api.github.com/users/hritique/followers",
      "following_url": "https://api.github.com/users/hritique/following{/other_user}",
      "gists_url": "https://api.github.com/users/hritique/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hritique/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hritique/subscriptions",
      "organizations_url": "https://api.github.com/users/hritique/orgs",
      "repos_url": "https://api.github.com/users/hritique/repos",
      "events_url": "https://api.github.com/users/hritique/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hritique/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-02T08:47:37Z",
    "updated_at": "2022-07-02T08:48:53Z",
    "author_association": "NONE",
    "body": "We are also facing the same issue. https://github.com/ledgerwatch/erigon/issues/4510\r\nWhen there are clients connecting to the RPC, it stops syncing after a while and the RPC becomes unreachable\r\nAnd the logs(pasted in the issue) keeps repeating forever.\r\n\r\nAfter I removed the services that access the RPC, it has been working without an issue for the past week.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1172863089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174794294",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1174794294",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1174794294,
    "node_id": "IC_kwDOC0FsAM5GBfA2",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T08:50:37Z",
    "updated_at": "2022-07-05T08:50:37Z",
    "author_association": "NONE",
    "body": "> Show more logs\r\n\r\nI had a test today, which reproduced this problem.\r\n<img width=\"1823\" alt=\"image\" src=\"https://user-images.githubusercontent.com/40154568/177289333-bab505be-9cd4-4c43-93aa-3a28cf15bc1c.png\">\r\n\r\n\r\n`Jul 05 10:36:09 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:09.776] Commit cycle                             in=5.361719327s\r\nJul 05 10:36:09 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:09.779] RPC Daemon notified of new headers       from=15081437 to=15081438 header sending=12.143µs log sending=2.141746ms\r\nJul 05 10:36:09 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:09.779] [1/16 Headers] Waiting for headers...    from=15081438\r\nJul 05 10:36:18 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:18.606] [1/16 Headers] Processed                 highest inserted=15081439 age=14s\r\nJul 05 10:36:18 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:18.687] [6/16 Execution] Completed on            block=15081439\r\nJul 05 10:36:18 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:18.822] Timings (slower than 50ms)               Headers=8.827s Execution=66ms IntermediateHashes=66ms\r\nJul 05 10:36:18 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:18.822] Tables                                   PlainState=68.8GB AccountChangeSet=155.2GB StorageChangeSet=226.9GB BlockTransaction=9.0GB TransactionLog=412.6GB FreeList=112.6MB ReclaimableSpace=112.6GB\r\nJul 05 10:36:23 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:23.519] Commit cycle                             in=4.697331827s\r\nJul 05 10:36:23 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:23.521] RPC Daemon notified of new headers       from=15081438 to=15081439 header sending=10.67µs log sending=1.26173ms\r\nJul 05 10:36:23 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:23.521] [1/16 Headers] Waiting for headers...    from=15081439\r\nJul 05 10:36:25 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:25.882] [1/16 Headers] Processed                 highest inserted=15081440 age=7s\r\nJul 05 10:36:25 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:25.927] [6/16 Execution] Completed on            block=15081440\r\nJul 05 10:36:25 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:25.992] Timings (slower than 50ms)               Headers=2.361s\r\nJul 05 10:36:25 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:25.992] Tables                                   PlainState=68.8GB AccountChangeSet=155.2GB StorageChangeSet=226.9GB BlockTransaction=9.0GB TransactionLog=412.6GB FreeList=112.6MB ReclaimableSpace=112.6GB\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.429] Commit cycle                             in=3.436907386s\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.430] RPC Daemon notified of new headers       from=15081439 to=15081440 header sending=10.349µs log sending=729.224µs\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.430] [1/16 Headers] Waiting for headers...    from=15081440\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.434] [1/16 Headers] Processed                 highest inserted=15081441 age=3s\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.441] [6/16 Execution] Completed on            block=15081441\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.461] Commit cycle                             in=7.518964ms\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.461] RPC Daemon notified of new headers       from=15081440 to=15081441 header sending=4.679µs log sending=91.17µs\r\nJul 05 10:36:29 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:29.461] [1/16 Headers] Waiting for headers...    from=15081441\r\nJul 05 10:36:33 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:33.809] [1/16 Headers] Processed                 highest inserted=15081442 age=5s\r\nJul 05 10:36:33 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:33.887] [6/16 Execution] Completed on            block=15081442\r\nJul 05 10:36:34 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:34.026] Timings (slower than 50ms)               Headers=4.348s Execution=58ms IntermediateHashes=67ms\r\nJul 05 10:36:34 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:34.026] Tables                                   PlainState=68.8GB AccountChangeSet=155.2GB StorageChangeSet=226.9GB BlockTransaction=9.0GB TransactionLog=412.6GB FreeList=112.6MB ReclaimableSpace=112.6GB\r\nJul 05 10:36:38 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:38.506] Commit cycle                             in=4.480156732s\r\nJul 05 10:36:38 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:38.508] RPC Daemon notified of new headers       from=15081441 to=15081442 header sending=25.558µs log sending=2.164869ms\r\nJul 05 10:36:38 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:38.508] [1/16 Headers] Waiting for headers...    from=15081442\r\nJul 05 10:36:42 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:42.873] [1/16 Headers] Processed                 highest inserted=15081443 age=9s\r\nJul 05 10:36:42 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:42.920] [6/16 Execution] Completed on            block=15081443\r\nJul 05 10:36:43 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:43.000] Timings (slower than 50ms)               Headers=4.364s\r\nJul 05 10:36:43 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:43.000] Tables                                   PlainState=68.8GB AccountChangeSet=155.2GB StorageChangeSet=226.9GB BlockTransaction=9.0GB TransactionLog=412.6GB FreeList=112.6MB ReclaimableSpace=112.6GB\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.048] Commit cycle                             in=3.047941094s\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.048] RPC Daemon notified of new headers       from=15081442 to=15081443 header sending=7.634µs log sending=825.414µs\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.048] [1/16 Headers] Waiting for headers...    from=15081443\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.053] [1/16 Headers] Processed                 highest inserted=15081444 age=3s\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.053] [6/16 Execution] Completed on            block=15081444\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.054] Commit cycle                             in=354.903µs\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.055] RPC Daemon notified of new headers       from=15081443 to=15081444 header sending=3.316µs log sending=2.184µs\r\nJul 05 10:36:46 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:46.055] [1/16 Headers] Waiting for headers...    from=15081444\r\nJul 05 10:36:58 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:36:58.466] [p2p] GoodPeers                          eth66=43\r\nJul 05 10:37:00 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:37:00.210] [1/16 Headers] Processed                 highest inserted=15081445 age=16s\r\nJul 05 10:37:00 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:37:00.383] [6/16 Execution] Completed on            block=15081445\r\nJul 05 10:37:00 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:37:00.571] Timings (slower than 50ms)               Headers=14.155s Execution=109ms IntermediateHashes=88ms\r\nJul 05 10:37:00 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:37:00.571] Tables                                   PlainState=68.8GB AccountChangeSet=155.2GB StorageChangeSet=226.9GB BlockTransaction=9.0GB TransactionLog=412.6GB FreeList=112.6MB ReclaimableSpace=112.6GB\r\nJul 05 10:37:01 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:37:01.075] Commit cycle                             in=504.002941ms\r\nJul 05 10:37:48 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:37:48.917] RPC Daemon notified of new headers       from=15081444 to=15081445 header sending=8.707µs log sending=2.081634ms\r\nJul 05 10:38:58 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:38:58.466] [p2p] GoodPeers                          eth66=42\r\nJul 05 10:40:58 Ubuntu-1804-bionic-64-minimal erigon[26301]: [INFO] [07-05|10:40:58.466] [p2p] GoodPeers                          eth66=42`",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174794294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174870710",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1174870710",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1174870710,
    "node_id": "IC_kwDOC0FsAM5GBxq2",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T10:01:05Z",
    "updated_at": "2022-07-05T10:01:05Z",
    "author_association": "COLLABORATOR",
    "body": "I will take a look, we suffer from that as well.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174870710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174881640",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1174881640",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1174881640,
    "node_id": "IC_kwDOC0FsAM5GB0Vo",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T10:11:49Z",
    "updated_at": "2022-07-05T10:11:49Z",
    "author_association": "COLLABORATOR",
    "body": "@AskAlexSharov there is definitely a deadlock somewhere in the built-in RPC service. It breaks both Engine API and RPCs. I am debugging.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174881640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174894747",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1174894747",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1174894747,
    "node_id": "IC_kwDOC0FsAM5GB3ib",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T10:25:26Z",
    "updated_at": "2022-07-05T10:25:26Z",
    "author_association": "COLLABORATOR",
    "body": "I can't reproduce. Try `pkill -SIGUSR1 erigon` ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174894747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174969882",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1174969882",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1174969882,
    "node_id": "IC_kwDOC0FsAM5GCJ4a",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T11:51:05Z",
    "updated_at": "2022-07-05T11:51:05Z",
    "author_association": "COLLABORATOR",
    "body": "I can't reproduce that easily, it is pretty random. I think it happened during some hive tests and it definitely did happen on our validator nodes. As soon as I have one stuck, I will let you know.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1174969882/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175078783",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175078783",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175078783,
    "node_id": "IC_kwDOC0FsAM5GCkd_",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T13:44:44Z",
    "updated_at": "2022-07-05T13:44:44Z",
    "author_association": "COLLABORATOR",
    "body": "@hritique @wetezos can you share your RPC load (methods thats are called)? Because it might be something with one of the methods, I didn't manage to pinpoint yet. If you can share which RPCs are being called, it would be much appreciated.\r\n\r\nOr if you are ready to help, I can give you a branch with extra log output, so we can see the last PRC before the deadlock.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175078783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175085368",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175085368",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175085368,
    "node_id": "IC_kwDOC0FsAM5GCmE4",
    "user": {
      "login": "kucharskim",
      "id": 4342029,
      "node_id": "MDQ6VXNlcjQzNDIwMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4342029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kucharskim",
      "html_url": "https://github.com/kucharskim",
      "followers_url": "https://api.github.com/users/kucharskim/followers",
      "following_url": "https://api.github.com/users/kucharskim/following{/other_user}",
      "gists_url": "https://api.github.com/users/kucharskim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kucharskim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kucharskim/subscriptions",
      "organizations_url": "https://api.github.com/users/kucharskim/orgs",
      "repos_url": "https://api.github.com/users/kucharskim/repos",
      "events_url": "https://api.github.com/users/kucharskim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kucharskim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T13:50:48Z",
    "updated_at": "2022-07-05T13:50:48Z",
    "author_association": "NONE",
    "body": "@mandrigin I'm happy to deploy debugging code on our Eirgon instance. I work with @hritique in the same team.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175085368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175089329",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175089329",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175089329,
    "node_id": "IC_kwDOC0FsAM5GCnCx",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T13:54:14Z",
    "updated_at": "2022-07-05T13:54:14Z",
    "author_association": "COLLABORATOR",
    "body": "@kucharskim are you comfortable building from sources or should I pre-build a Docker image for you?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175089329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175136760",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175136760",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175136760,
    "node_id": "IC_kwDOC0FsAM5GCyn4",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-05T14:36:06Z",
    "updated_at": "2022-07-05T14:36:15Z",
    "author_association": "COLLABORATOR",
    "body": "anyway, here is the branch with extra logs: https://github.com/ledgerwatch/erigon/tree/issue4543",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175136760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175670452",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175670452",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175670452,
    "node_id": "IC_kwDOC0FsAM5GE060",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T01:28:50Z",
    "updated_at": "2022-07-06T01:28:50Z",
    "author_association": "NONE",
    "body": "> @hritique @wetezos can you share your RPC load (methods thats are called)? Because it might be something with one of the methods, I didn't manage to pinpoint yet. If you can share which RPCs are being called, it would be much appreciated.\r\n> \r\n> Or if you are ready to help, I can give you a branch with extra log output, so we can see the last PRC before the deadlock.\r\n\r\n\r\n\r\n> anyway, here is the branch with extra logs: https://github.com/ledgerwatch/erigon/tree/issue4543\r\n\r\nGot it , let me have a try.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175670452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175694036",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175694036",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175694036,
    "node_id": "IC_kwDOC0FsAM5GE6rU",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T02:03:41Z",
    "updated_at": "2022-07-06T02:04:10Z",
    "author_association": "NONE",
    "body": ">I have a test just. This is the RPC log file. At present, the node is still running normally\r\n\r\n[test.log](https://github.com/ledgerwatch/erigon/files/9050880/test.log)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175694036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175729536",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175729536",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175729536,
    "node_id": "IC_kwDOC0FsAM5GFDWA",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T03:10:41Z",
    "updated_at": "2022-07-06T03:10:41Z",
    "author_association": "NONE",
    "body": "I reproduced this problem just, this the last logs.\r\n\r\n[test.log](https://github.com/ledgerwatch/erigon/files/9051172/test.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175729536/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175777277",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175777277",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175777277,
    "node_id": "IC_kwDOC0FsAM5GFO_9",
    "user": {
      "login": "kucharskim",
      "id": 4342029,
      "node_id": "MDQ6VXNlcjQzNDIwMjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4342029?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kucharskim",
      "html_url": "https://github.com/kucharskim",
      "followers_url": "https://api.github.com/users/kucharskim/followers",
      "following_url": "https://api.github.com/users/kucharskim/following{/other_user}",
      "gists_url": "https://api.github.com/users/kucharskim/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kucharskim/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kucharskim/subscriptions",
      "organizations_url": "https://api.github.com/users/kucharskim/orgs",
      "repos_url": "https://api.github.com/users/kucharskim/repos",
      "events_url": "https://api.github.com/users/kucharskim/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kucharskim/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T04:48:01Z",
    "updated_at": "2022-07-06T04:48:01Z",
    "author_association": "NONE",
    "body": "Yeah, from source is fine. I just built it, asked @hritique to deploy it and see how it goes.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175777277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175863514",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175863514",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175863514,
    "node_id": "IC_kwDOC0FsAM5GFkDa",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T07:12:24Z",
    "updated_at": "2022-07-06T07:12:24Z",
    "author_association": "COLLABORATOR",
    "body": "okay, at some point it always times out it looks like, every requets takes 50s.\r\n\r\n\r\n@wetezos if you still have the node running, can you do `pkill -SIGUSR1 erigon` and show the output?\r\n\r\nsame to you @kucharskim when you reproduce the bug\r\n\r\n\r\nalso also, please run it with --pprof flag and try to get me the goroutine trace like that\r\n\r\n```\r\ncurl http://127.0.0.1:6060/debug/pprof/goroutines > goroutines.out\r\n```\r\n\r\nafter you reproduce. I have more data to test now, but it will still be useful because you seem to be able to easily reproduce it.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175863514/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175903442",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175903442",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175903442,
    "node_id": "IC_kwDOC0FsAM5GFtzS",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T07:53:43Z",
    "updated_at": "2022-07-06T07:55:35Z",
    "author_association": "NONE",
    "body": "> \r\n **if you still have the node running, can you do pkill -SIGUSR1 erigon and show the output?**\r\n\r\nYes, our node is still running, but it has been restarted.  The following is the log after pkill execution\r\n\r\n\r\n[pkill.log](https://github.com/ledgerwatch/erigon/files/9052793/pkill.log)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175903442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175941971",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175941971",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175941971,
    "node_id": "IC_kwDOC0FsAM5GF3NT",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T08:33:41Z",
    "updated_at": "2022-07-06T08:33:41Z",
    "author_association": "COLLABORATOR",
    "body": "@wetezos ah, but it syncs/works, `pkill` is useful when it stops syncing/responding to RPC, right now it doesn't show anything suspicious.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175941971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175953745",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175953745",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175953745,
    "node_id": "IC_kwDOC0FsAM5GF6FR",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T08:45:33Z",
    "updated_at": "2022-07-06T08:46:34Z",
    "author_association": "NONE",
    "body": "> okay, at some point it always times out it looks like, every requets takes 50s.\r\n> \r\n> @wetezos if you still have the node running, can you do `pkill -SIGUSR1 erigon` and show the output?\r\n> \r\n> same to you @kucharskim when you reproduce the bug\r\n> \r\n> also also, please run it with --pprof flag and try to get me the goroutine trace like that\r\n> \r\n> ```\r\n> curl http://127.0.0.1:6060/debug/pprof/goroutines > goroutines.out\r\n> ```\r\n> \r\n> after you reproduce. I have more data to test now, but it will still be useful because you seem to be able to easily reproduce it.\r\n\r\n\r\n`root@Ubuntu-1804-bionic-64-minimal:~# netstat -lntp | grep 60\r\ntcp        0      0 127.0.0.1:6060          0.0.0.0:*               LISTEN      24391/rpcdaemon     \r\nroot@Ubuntu-1804-bionic-64-minimal:~# curl http://127.0.0.1:6060/debug/pprof/goroutines\r\nUnknown profile`",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175953745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175963150",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175963150",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175963150,
    "node_id": "IC_kwDOC0FsAM5GF8YO",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T08:54:54Z",
    "updated_at": "2022-07-06T08:54:54Z",
    "author_association": "COLLABORATOR",
    "body": "oh, sorry, then `curl http://127.0.0.1:6060/debug/pprof/goroutine` :) typo",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175963150/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175965104",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1175965104",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1175965104,
    "node_id": "IC_kwDOC0FsAM5GF82w",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T08:56:56Z",
    "updated_at": "2022-07-06T08:56:56Z",
    "author_association": "COLLABORATOR",
    "body": "also, this is necessary **only when you reproduce the deadlock/rpc issue**",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1175965104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176100398",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1176100398",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1176100398,
    "node_id": "IC_kwDOC0FsAM5GGd4u",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T11:19:37Z",
    "updated_at": "2022-07-06T11:19:37Z",
    "author_association": "NONE",
    "body": "> also, this is necessary **only when you reproduce the deadlock/rpc issue**\r\n\r\nSure, this the out file.\r\n\r\n[goroutines.out.txt](https://github.com/ledgerwatch/erigon/files/9054263/goroutines.out.txt)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176100398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176261872",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1176261872",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1176261872,
    "node_id": "IC_kwDOC0FsAM5GHFTw",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T14:02:30Z",
    "updated_at": "2022-07-06T14:02:30Z",
    "author_association": "COLLABORATOR",
    "body": "If I see correctly, we seem to be leaking quite a bit of goroutines\r\n\r\n```\r\n-----------+-------------------------------------------------------\r\n      2954   runtime.gopark\r\n             runtime.selectgo\r\n             google.golang.org/grpc.newClientStreamWithParams.func4\r\n-----------+-------------------------------------------------------\r\n      2897   runtime.gopark\r\n             runtime.selectgo\r\n             google.golang.org/grpc/internal/transport.(*Stream).waitOnHeader\r\n             google.golang.org/grpc/internal/transport.(*Stream).RecvCompress (inline)\r\n             google.golang.org/grpc.(*csAttempt).recvMsg\r\n             google.golang.org/grpc.(*clientStream).RecvMsg.func1\r\n             google.golang.org/grpc.(*clientStream).withRetry\r\n             google.golang.org/grpc.(*clientStream).RecvMsg\r\n             github.com/ledgerwatch/erigon-lib/gointerfaces/remote.(*kVTxClient).Recv\r\n             github.com/ledgerwatch/erigon-lib/kv/remotedb.(*RemoteKV).BeginRo\r\n             github.com/ledgerwatch/erigon/cmd/rpcdaemon/commands.(*APIImpl).Call\r\n             reflect.Value.call\r\n             reflect.Value.Call\r\n             github.com/ledgerwatch/erigon/rpc.(*callback).call\r\n             github.com/ledgerwatch/erigon/rpc.(*handler).runMethod\r\n             github.com/ledgerwatch/erigon/rpc.(*handler).handleCall\r\n             github.com/ledgerwatch/erigon/rpc.(*handler).handleCallMsg\r\n             github.com/ledgerwatch/erigon/rpc.(*handler).handleMsg.func1\r\n             github.com/ledgerwatch/erigon/rpc.(*handler).startCallProc.func1\r\n-----------+-------------------------------------------------------\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176261872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176263756",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1176263756",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1176263756,
    "node_id": "IC_kwDOC0FsAM5GHFxM",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T14:04:01Z",
    "updated_at": "2022-07-06T14:04:01Z",
    "author_association": "COLLABORATOR",
    "body": "@wetezos you are running the RPC daemon separately, right? what if you can do the same but with the built-in one?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176263756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176468226",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1176468226",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1176468226,
    "node_id": "IC_kwDOC0FsAM5GH3sC",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-06T17:04:58Z",
    "updated_at": "2022-07-06T17:04:58Z",
    "author_association": "COLLABORATOR",
    "body": "> anyway, here is the branch with extra logs: https://github.com/ledgerwatch/erigon/tree/issue4543\r\n\r\n@wetezos @kucharskim I updated the branch with a possible fix, the commit is [`991451d`](https://github.com/ledgerwatch/erigon/commit/991451d35221a1e9441708cf385613f3e8f8d302)\r\n\r\nTry to upgrade and see if it resolves your issue",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176468226/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176892691",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1176892691",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1176892691,
    "node_id": "IC_kwDOC0FsAM5GJfUT",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-07T00:37:04Z",
    "updated_at": "2022-07-07T00:37:04Z",
    "author_association": "NONE",
    "body": "> @wetezos you are running the RPC daemon separately, right? what if you can do the same but with the built-in one?\r\n\r\nYes, Because of `erigon --http.addr` doesn't work, so we use RPC daemon.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176892691/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176893486",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1176893486",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1176893486,
    "node_id": "IC_kwDOC0FsAM5GJfgu",
    "user": {
      "login": "wetezos",
      "id": 40154568,
      "node_id": "MDQ6VXNlcjQwMTU0NTY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/40154568?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/wetezos",
      "html_url": "https://github.com/wetezos",
      "followers_url": "https://api.github.com/users/wetezos/followers",
      "following_url": "https://api.github.com/users/wetezos/following{/other_user}",
      "gists_url": "https://api.github.com/users/wetezos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/wetezos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/wetezos/subscriptions",
      "organizations_url": "https://api.github.com/users/wetezos/orgs",
      "repos_url": "https://api.github.com/users/wetezos/repos",
      "events_url": "https://api.github.com/users/wetezos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/wetezos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-07T00:38:27Z",
    "updated_at": "2022-07-07T00:38:27Z",
    "author_association": "NONE",
    "body": "> > anyway, here is the branch with extra logs: https://github.com/ledgerwatch/erigon/tree/issue4543\r\n> \r\n> @wetezos @kucharskim I updated the branch with a possible fix, the commit is [`991451d`](https://github.com/ledgerwatch/erigon/commit/991451d35221a1e9441708cf385613f3e8f8d302)\r\n> \r\n> Try to upgrade and see if it resolves your issue\r\n\r\nGreat, let me have a try.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1176893486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1177145303",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4543#issuecomment-1177145303",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4543",
    "id": 1177145303,
    "node_id": "IC_kwDOC0FsAM5GKc_X",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-07T06:27:24Z",
    "updated_at": "2022-07-07T06:27:24Z",
    "author_association": "COLLABORATOR",
    "body": "@wetezos any results so far? :) we are looking at building a new release today, so this one might or might not be included",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1177145303/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

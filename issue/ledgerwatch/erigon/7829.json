{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7829",
  "id": 1782625164,
  "node_id": "I_kwDOC0FsAM5qQLOM",
  "number": 7829,
  "title": "Increase default  --db.size.limit for Polygon to something more then 3TB",
  "user": {
    "login": "zekchan",
    "id": 3997978,
    "node_id": "MDQ6VXNlcjM5OTc5Nzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3997978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zekchan",
    "html_url": "https://github.com/zekchan",
    "followers_url": "https://api.github.com/users/zekchan/followers",
    "following_url": "https://api.github.com/users/zekchan/following{/other_user}",
    "gists_url": "https://api.github.com/users/zekchan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zekchan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zekchan/subscriptions",
    "organizations_url": "https://api.github.com/users/zekchan/orgs",
    "repos_url": "https://api.github.com/users/zekchan/repos",
    "events_url": "https://api.github.com/users/zekchan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zekchan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-06-30T14:25:11Z",
  "updated_at": "2023-07-07T03:02:53Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# Rationale\r\nSize of full synced Polygon full node data folder\r\n```\r\n$ du -sh *\r\n60G\tbor\r\n5.8T\tchaindata\r\n4.0K\tjwt.hex\r\n0\tLOCK\r\n376M\tlogs\r\n4.0K\tnodekey\r\n179M\tnodes\r\n690G\tsnapshots\r\n12K\ttemp\r\n```\r\nWhat are the use-cases?\r\n\r\n# Implementation\r\n\r\nDo you have ideas regarding the implementation of this feature?\r\nAre you willing to implement this feature?",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1615296569",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7829#issuecomment-1615296569",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829",
    "id": 1615296569,
    "node_id": "IC_kwDOC0FsAM5gR3g5",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-01T00:15:31Z",
    "updated_at": "2023-07-01T00:15:31Z",
    "author_association": "COLLABORATOR",
    "body": "I don't really want to make DB flags depend on network name. \r\nbecause it making circular dependency: we storing chainConfig inside DB. it means \"to open db need know chain name, to get chain name need to read chainConfig from db\".",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1615296569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1624324800",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7829#issuecomment-1624324800",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829",
    "id": 1624324800,
    "node_id": "IC_kwDOC0FsAM5g0TrA",
    "user": {
      "login": "skolem-dan",
      "id": 97461873,
      "node_id": "U_kgDOBc8mcQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/97461873?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/skolem-dan",
      "html_url": "https://github.com/skolem-dan",
      "followers_url": "https://api.github.com/users/skolem-dan/followers",
      "following_url": "https://api.github.com/users/skolem-dan/following{/other_user}",
      "gists_url": "https://api.github.com/users/skolem-dan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/skolem-dan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/skolem-dan/subscriptions",
      "organizations_url": "https://api.github.com/users/skolem-dan/orgs",
      "repos_url": "https://api.github.com/users/skolem-dan/repos",
      "events_url": "https://api.github.com/users/skolem-dan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/skolem-dan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-06T21:20:42Z",
    "updated_at": "2023-07-06T21:20:42Z",
    "author_association": "NONE",
    "body": "I'm a little confused why this would require reading from the DB to figure out. Before the DB size limit was slashed, `./erigon --chain=bor-mainnet --bor.heimdall=...` was the minimum set of flags needed to sync a Polygon archive node from scratch. I certainly don't know Erigon's internals very well, but that sure looks to me like the chain name is readily available before opening the DB. The same goes for anyone using `--config` to specify a non-default chain in a file.\r\n\r\nAm I missing something here? I can understand the reluctance to have defaults for opening the database vary depending on what chain is being used, but without doing so, #7478 is a breaking change for some users (even if it does also resolve a different issue for others) and this sounds like the only way to fix that regression.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1624324800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1624581526",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7829#issuecomment-1624581526",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7829",
    "id": 1624581526,
    "node_id": "IC_kwDOC0FsAM5g1SWW",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-07T03:01:30Z",
    "updated_at": "2023-07-07T03:02:53Z",
    "author_association": "COLLABORATOR",
    "body": "@skolem-dan \r\n1. --chain parameter is not required as i remember (we have many binaries: txpool/integration/erigon/rpcdaemon/... all of them must require --chain) \r\n2. it must be prohibited to change this flag after first start - means need store it in db and re-check after db-opening. \r\n3. about https://github.com/ledgerwatch/erigon/pull/7478 : i think it's not proper way to fix some Erigon'ss bug (related to cli flags application) - which was already fixed. But i forgot exactly. I think now - that it was related to some Erigon's bug (not to OS limitations).  Also maybe after https://github.com/ledgerwatch/erigon/pull/7798 we can increase default for all, maybe not. \r\n4. somehow need to handle case: user already has 4kb pagesize db - trying to open db with > 8tb limit will cause error. and maybe other similar cases. \r\n5. need think about `--chain=polygon --prune=hrtc` - maybe don't need any special logic, maybe need. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1624581526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

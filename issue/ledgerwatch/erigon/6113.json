{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/6113",
  "id": 1461556206,
  "node_id": "I_kwDOC0FsAM5XHZPu",
  "number": 6113,
  "title": "Can't build erigon with clang 15.0.1",
  "user": {
    "login": "extSunset",
    "id": 103024509,
    "node_id": "U_kgDOBiQHfQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/extSunset",
    "html_url": "https://github.com/extSunset",
    "followers_url": "https://api.github.com/users/extSunset/followers",
    "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
    "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
    "organizations_url": "https://api.github.com/users/extSunset/orgs",
    "repos_url": "https://api.github.com/users/extSunset/repos",
    "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
    "received_events_url": "https://api.github.com/users/extSunset/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 13,
  "created_at": "2022-11-23T11:15:28Z",
  "updated_at": "2022-12-24T14:41:20Z",
  "closed_at": "2022-12-24T14:41:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nOS & Version: Linux \r\n\r\nCommit hash : almost any\r\n\r\n#### Expected behaviour\r\n\r\nBe able to build\r\n\r\n#### Actual behaviour\r\n\r\nDoesn't build\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nTry to build any commit of erigon with go 1.19.x and LLVM + Clang 15.0.1.\r\n\r\n#### Backtrace\r\n\r\n````\r\n# github.com/torquem-ch/mdbx-go/mdbx                                                                                          \r\nIn file included from _cgo_export.c:4:                                                                                        \r\nIn file included from msgfunc.go:4:                                                                                           \r\n../../../go/pkg/mod/github.com/torquem-ch/mdbx-go@v0.26.2/mdbx/mdbxgo.h:47:47: \r\nerror: a function declaration without a prototype is deprecated in all versions of C [-Werror,-Wstrict-prototypes]                                                           \r\nmake: *** [Makefile:91: erigon.cmd] Error 2\r\n````\r\n",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1325857010",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1325857010",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1325857010,
    "node_id": "IC_kwDOC0FsAM5PBvjy",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-24T02:08:27Z",
    "updated_at": "2022-11-24T02:08:27Z",
    "author_association": "COLLABORATOR",
    "body": "fixing by https://github.com/torquem-ch/mdbx-go/pull/87",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1325857010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1325858479",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1325858479",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1325858479,
    "node_id": "IC_kwDOC0FsAM5PBv6v",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-24T02:10:36Z",
    "updated_at": "2022-11-24T02:10:36Z",
    "author_association": "COLLABORATOR",
    "body": "fixed by https://github.com/ledgerwatch/erigon/pull/6118\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1325858479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1326523874",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1326523874",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1326523874,
    "node_id": "IC_kwDOC0FsAM5PESXi",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-24T14:27:13Z",
    "updated_at": "2022-11-24T14:27:13Z",
    "author_association": "NONE",
    "body": "Similar error appears:\r\n```\r\n# github.com/torquem-ch/mdbx-go/mdbx                                                                                          \r\n_cgo_main.c:2:9: error: a function declaration without a prototype is deprecated in all \r\nversions of C [-Werror,-Wstrict-prototypes]                                                                                                                         \r\nmake: *** [Makefile:93: erigon.cmd] Error 2\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1326523874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1326938074",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1326938074",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1326938074,
    "node_id": "IC_kwDOC0FsAM5PF3fa",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-25T01:39:58Z",
    "updated_at": "2022-11-25T01:39:58Z",
    "author_association": "COLLABORATOR",
    "body": "`go version`, `cc --version`\r\nmy guess, you have old golang version. install >= 1.18",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1326938074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328209122",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328209122",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328209122,
    "node_id": "IC_kwDOC0FsAM5PKtzi",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-27T09:52:57Z",
    "updated_at": "2022-11-27T09:55:35Z",
    "author_association": "NONE",
    "body": "My go version is 1.19.3. `cc` -- is a symlink to gcc compiler, but I've set llvm toolchain via environment variables. \r\n```\r\nexport CC=/usr/bin/clang LD=/usr/bin/ld.lld AR=/usr/bin/llvm-ar NM=/usr/bin/llvm-nm STRIP=/usr/bin/llvm-strip   OBJCOPY=/usr/bin/llvm-objcopy OBJDUMP=/usr/bin/llvm-objdump READELF=/usr/bin/llvm-readelf   HOSTCC=/usr/bin/clang HOSTCXX=/usr/bin/clang++ HOSTAR=/usr/bin/llvm-ar HOSTLD=/usr/bin/ld.lld CXX=/usr/bin/clang++ LLVM=1 LLVM_IAS=1\r\n```\r\n```\r\n$ clang -v\r\nclang version 15.0.1 (b73d2c8c720a8c8e6e73b11be4e27afa6cb75bdf)\r\nTarget: x86_64-pc-linux-gnu\r\nThread model: posix\r\nInstalledDir: /usr/bin\r\nFound candidate GCC installation: /usr/bin/../lib/gcc/x86_64-pc-linux-gnu/12.2.0\r\nFound candidate GCC installation: /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/12.2.0\r\nSelected GCC installation: /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/12.2.0\r\nCandidate multilib: .;@m64\r\nCandidate multilib: 32;@m32\r\nSelected multilib: .;@m64\r\n```\r\n```\r\n$ cc -v\r\nUsing built-in specs.\r\nCOLLECT_GCC=cc\r\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-pc-linux-gnu/12.2.0/lto-wrapper\r\nTarget: x86_64-pc-linux-gnu\r\nConfigured with: /build/gcc/src/gcc/configure --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++,d --enable-bootstrap --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --with-build-config=bootstrap-lto --with-linker-hash-style=gnu --with-system-zlib --enable-__cxa_atexit --enable-cet=auto --enable-checking=release --enable-clocale=gnu --enable-default-pie --enable-default-ssp --enable-gnu-indirect-function --enable-gnu-unique-object --enable-libstdcxx-backtrace --enable-link-serialization=1 --enable-linker-build-id --enable-lto --enable-multilib --enable-plugin --enable-shared --enable-threads=posix --disable-libssp --disable-libstdcxx-pch --disable-werror\r\nThread model: posix\r\nSupported LTO compression algorithms: zlib zstd\r\ngcc version 12.2.0 (GCC)\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328209122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328565125",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328565125",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328565125,
    "node_id": "IC_kwDOC0FsAM5PMEuF",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T05:29:57Z",
    "updated_at": "2022-11-28T05:29:57Z",
    "author_association": "COLLABORATOR",
    "body": "See “go env”",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328565125/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328714871",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328714871",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328714871,
    "node_id": "IC_kwDOC0FsAM5PMpR3",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T08:33:54Z",
    "updated_at": "2022-11-28T08:33:54Z",
    "author_association": "NONE",
    "body": "```\r\n$ go env\r\nGO111MODULE=\"\"\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOCACHE=\"/home/erigon/.cache/go-build\"\r\nGOENV=\"/home/erigon/.config/go/env\"\r\nGOEXE=\"\"\r\nGOEXPERIMENT=\"\"\r\nGOFLAGS=\"\"\r\nGOHOSTARCH=\"amd64\"                                                                                                                  \r\nGOHOSTOS=\"linux\"\r\nGOINSECURE=\"\"\r\nGOMODCACHE=\"/home/erigon/go/pkg/mod\"\r\nGONOPROXY=\"\"\r\nGONOSUMDB=\"\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/home/erigon/go\"\r\nGOPRIVATE=\"\"\r\nGOPROXY=\"https://proxy.golang.org,direct\"\r\nGOROOT=\"/usr/lib/go\"\r\nGOSUMDB=\"sum.golang.org\"\r\nGOTMPDIR=\"\"\r\nGOTOOLDIR=\"/usr/lib/go/pkg/tool/linux_amd64\"\r\nGOVCS=\"\"\r\nGOVERSION=\"go1.19.3\"\r\nGCCGO=\"gccgo\"\r\nGOAMD64=\"v3\"\r\nAR=\"/usr/bin/llvm-ar\"\r\nCC=\"/usr/bin/clang\"\r\nCXX=\"/usr/bin/clang++\"\r\nCGO_ENABLED=\"1\"\r\nGOMOD=\"/dev/null\"\r\nGOWORK=\"\"\r\nCGO_CFLAGS=\"-march=native -mtune=native -O3 -pipe -fno-plt -fexceptions -Wformat -Werror=format-security -fstack-clash-protection -fcf-protection -fPIC -Wp,-D_FORTIFY_SOURCE=2\"\r\nCGO_CPPFLAGS=\"-march=native -mtune=native -O3 -pipe -fno-plt -fexceptions -Wformat -Werror=format-security -fstack-clash-protection -fcf-protection -fPIC -Wp,-D_FORTIFY_SOURCE=2\"\r\nCGO_CXXFLAGS=\"-march=native -mtune=native -O3 -pipe -fno-plt -fexceptions -Wformat -Werror=format-security -fstack-clash-protection -fcf-protection -fPIC -Wp,-D_FORTIFY_SOURCE=2\"\r\nCGO_FFLAGS=\"-g -O2\"\r\nCGO_LDFLAGS=\"-Wl,-O3,--sort-common,--as-needed,-z,relro,-z,now\"\r\nPKG_CONFIG=\"pkg-config\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -Wl,--no-gc-sections -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build2985042505=/tmp/go-build -gno-record-gcc-switches\"\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328714871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328716352",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328716352",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328716352,
    "node_id": "IC_kwDOC0FsAM5PMppA",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T08:35:31Z",
    "updated_at": "2022-11-28T08:35:31Z",
    "author_association": "NONE",
    "body": "Removing my own CGO_{CFLAGS, CXXFLAGS, CPPFLAG, LDFLAGS} didn't change anything.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328716352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328723666",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328723666",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328723666,
    "node_id": "IC_kwDOC0FsAM5PMrbS",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T08:43:06Z",
    "updated_at": "2022-11-28T08:43:06Z",
    "author_association": "COLLABORATOR",
    "body": "try build without makefile: `go build -v ./cmd/erigon`\r\ni don't know, maybe you need search some other Dockerfille about golang+clang\r\n`_cgo_main.c` this file generated by golang, I can't change it. \r\nor some mess with golang/clang installations, or golang's bug, or something else",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328723666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328738923",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328738923",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328738923,
    "node_id": "IC_kwDOC0FsAM5PMvJr",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T08:58:18Z",
    "updated_at": "2022-11-28T08:58:59Z",
    "author_association": "NONE",
    "body": "A similar toolchain worked for me previously with older Erigon versions (v2022.09.03 for example).  I can't tell the version of Go I was using at the time.  Probably 1.19 or 1.19.1.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328738923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328759681",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1328759681",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1328759681,
    "node_id": "IC_kwDOC0FsAM5PM0OB",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T09:13:34Z",
    "updated_at": "2022-11-28T09:15:13Z",
    "author_association": "NONE",
    "body": "The problem turned out to be in LLVM 15.0.1 toolchain.  Go 1.19.3 + LLVM 14.0.6 build Erigon without problems.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1328759681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1329875277",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1329875277",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1329875277,
    "node_id": "IC_kwDOC0FsAM5PRElN",
    "user": {
      "login": "extSunset",
      "id": 103024509,
      "node_id": "U_kgDOBiQHfQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/103024509?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/extSunset",
      "html_url": "https://github.com/extSunset",
      "followers_url": "https://api.github.com/users/extSunset/followers",
      "following_url": "https://api.github.com/users/extSunset/following{/other_user}",
      "gists_url": "https://api.github.com/users/extSunset/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/extSunset/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/extSunset/subscriptions",
      "organizations_url": "https://api.github.com/users/extSunset/orgs",
      "repos_url": "https://api.github.com/users/extSunset/repos",
      "events_url": "https://api.github.com/users/extSunset/events{/privacy}",
      "received_events_url": "https://api.github.com/users/extSunset/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T23:17:29Z",
    "updated_at": "2022-11-28T23:19:15Z",
    "author_association": "NONE",
    "body": "https://reviews.llvm.org/D122895\r\nSo it should be possible to build with `-Wno-error=strict-prototypes` in CGO_{CFLAGS, CXXFLAGS}",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1329875277/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1359526277",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/6113#issuecomment-1359526277",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/6113",
    "id": 1359526277,
    "node_id": "IC_kwDOC0FsAM5RCLmF",
    "user": {
      "login": "cleanunicorn",
      "id": 547012,
      "node_id": "MDQ6VXNlcjU0NzAxMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cleanunicorn",
      "html_url": "https://github.com/cleanunicorn",
      "followers_url": "https://api.github.com/users/cleanunicorn/followers",
      "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
      "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
      "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
      "repos_url": "https://api.github.com/users/cleanunicorn/repos",
      "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-20T15:02:49Z",
    "updated_at": "2022-12-20T15:02:49Z",
    "author_association": "NONE",
    "body": "Not sure if this helps anyone but you can apply this git patch to allow for compilation by ignoring the warning.\r\n\r\n```patch\r\nFrom 6dcffa78c0eb9569bfbf69c7e43b38c42e3c58b4 Mon Sep 17 00:00:00 2001\r\nFrom: Daniel Luca <lucadanielcostin@gmail.com>\r\nDate: Tue, 20 Dec 2022 22:01:05 +0700\r\nSubject: [PATCH] fix: Ignore strict prototypes to allow for compilation\r\n\r\n---\r\n Makefile | 1 +\r\n 1 file changed, 1 insertion(+)\r\n\r\ndiff --git a/Makefile b/Makefile\r\nindex 2b309bc41..5458404a8 100644\r\n--- a/Makefile\r\n+++ b/Makefile\r\n@@ -20,6 +20,7 @@ CGO_CFLAGS := $(shell $(GO) env CGO_CFLAGS 2>/dev/null) # don't lose default\r\n CGO_CFLAGS += -DMDBX_FORCE_ASSERTIONS=0 # Enable MDBX's asserts by default in 'devel' branch and disable in releases\r\n CGO_CFLAGS += -O\r\n CGO_CFLAGS += -D__BLST_PORTABLE__\r\n+CGO_CFLAGS += -Wno-error=strict-prototypes\r\n CGO_CFLAGS := CGO_CFLAGS=\"$(CGO_CFLAGS)\"\r\n DBG_CGO_CFLAGS += -DMDBX_DEBUG=1\r\n \r\n-- \r\n2.38.1\r\n\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1359526277/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/3789",
  "id": 1184622801,
  "node_id": "I_kwDOC0FsAM5Gm-jR",
  "number": 3789,
  "title": "trace_filter API call fails with ReadCanonicalHash error",
  "user": {
    "login": "YordanPavlov",
    "id": 3602846,
    "node_id": "MDQ6VXNlcjM2MDI4NDY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3602846?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/YordanPavlov",
    "html_url": "https://github.com/YordanPavlov",
    "followers_url": "https://api.github.com/users/YordanPavlov/followers",
    "following_url": "https://api.github.com/users/YordanPavlov/following{/other_user}",
    "gists_url": "https://api.github.com/users/YordanPavlov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/YordanPavlov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/YordanPavlov/subscriptions",
    "organizations_url": "https://api.github.com/users/YordanPavlov/orgs",
    "repos_url": "https://api.github.com/users/YordanPavlov/repos",
    "events_url": "https://api.github.com/users/YordanPavlov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/YordanPavlov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-03-29T10:05:29Z",
  "updated_at": "2022-05-27T04:34:27Z",
  "closed_at": "2022-05-27T04:34:27Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version:  2021.12.2-beta\r\nOS & Version: A Docker image: thorax/erigon:v2021.12.02\r\n\r\n#### Expected behaviour\r\nTo return the requested traces or a more explanatory error.\r\n\r\n#### Actual behaviour\r\nReturns the error:\r\n`{\"jsonrpc\":\"2.0\",\"id\":1,\"error\":{\"code\":-32000,\"message\":\"failed ReadCanonicalHash: EOF, number=2283427\"}}`\r\n\r\n\r\n#### Steps to reproduce the behaviour\r\n`curl --data '{\"method\":\"trace_filter\",\"params\":[{\"fromBlock\":\"0x22D789\",\"toBlock\":\"0x22D7A9\"}],\"id\":1,\"jsonrpc\":\"2.0\"}' -H \"Content-Type: application/json\" -X POST http://ERIGON_URL`\r\n\r\n\r\nWhen invoking the above command the above error is received. The query fetches traces for the block interval 2283401 to 2283433. In the error response there is an error for invalid hash for a intermediate block 2283427. If I reduce the block interval in roughly half, let's say 2283420 to block 2283433 I am getting the result as expected. As additional information the above failing query passes using Parity node.\r\n\r\n",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1139267833",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3789#issuecomment-1139267833",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3789",
    "id": 1139267833,
    "node_id": "IC_kwDOC0FsAM5D59j5",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-27T04:34:27Z",
    "updated_at": "2022-05-27T04:34:27Z",
    "author_association": "COLLABORATOR",
    "body": "Hi. I think it's fixed in later erigon versions. Feel free to create new issue if need.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1139267833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

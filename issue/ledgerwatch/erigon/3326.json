{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/3326",
  "id": 1111712040,
  "node_id": "I_kwDOC0FsAM5CQ2Eo",
  "number": 3326,
  "title": "Cannot broadcast new transactions. Error: pool not started yet",
  "user": {
    "login": "darklow",
    "id": 445304,
    "node_id": "MDQ6VXNlcjQ0NTMwNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/darklow",
    "html_url": "https://github.com/darklow",
    "followers_url": "https://api.github.com/users/darklow/followers",
    "following_url": "https://api.github.com/users/darklow/following{/other_user}",
    "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
    "organizations_url": "https://api.github.com/users/darklow/orgs",
    "repos_url": "https://api.github.com/users/darklow/repos",
    "events_url": "https://api.github.com/users/darklow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/darklow/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2022-01-22T23:00:03Z",
  "updated_at": "2022-01-30T00:27:07Z",
  "closed_at": "2022-01-30T00:27:06Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\ngit_branch=stable git_tag=v2022.01.02 git_commit=b4b8df998363298dfc4e36c25da60c5142534594\r\nOS & Version: Alpine Linux / Docker / Based on official example file\r\nNetwork: mainnet\r\n\r\n#### Expected behaviour\r\n\r\nTx is successfully broadcast to network using `eth_sendRawTransaction`.\r\n\r\n#### Actual behaviour\r\n\r\nAfter upgrade to newest version no transactions are being broadcast and I see following error in logs:\r\n\r\n`rpcdaemon  | [WARN] [01-22|18:52:52.921] Served   conn=IP:41546 method=eth_sendRawTransaction reqid=0 t=410.15Âµs err=\"rpc error: code = Unknown desc = pool not started yet\"`\r\n\r\nAlso tried newest dev version, tried downgrading to earlier version as early as it is possible, but same error each time. All was working just fine before update.\r\n\r\nWe did this update on two full nodes and each of them have same bug now.\r\n\r\nPrevious version was 2021.10.2-alpha.",
  "closed_by": {
    "login": "darklow",
    "id": 445304,
    "node_id": "MDQ6VXNlcjQ0NTMwNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/darklow",
    "html_url": "https://github.com/darklow",
    "followers_url": "https://api.github.com/users/darklow/followers",
    "following_url": "https://api.github.com/users/darklow/following{/other_user}",
    "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
    "organizations_url": "https://api.github.com/users/darklow/orgs",
    "repos_url": "https://api.github.com/users/darklow/repos",
    "events_url": "https://api.github.com/users/darklow/events{/privacy}",
    "received_events_url": "https://api.github.com/users/darklow/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1019405524",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3326#issuecomment-1019405524",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326",
    "id": 1019405524,
    "node_id": "IC_kwDOC0FsAM48wuTU",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T03:39:37Z",
    "updated_at": "2022-01-23T03:40:11Z",
    "author_association": "COLLABORATOR",
    "body": "\"yet\" - i suppos your erigon is just not on chain tip yet after downtime\r\n \r\nshow erigon logs\r\ncli flags of erigon and rpcdaemon",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1019405524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1019591844",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3326#issuecomment-1019591844",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326",
    "id": 1019591844,
    "node_id": "IC_kwDOC0FsAM48xbyk",
    "user": {
      "login": "darklow",
      "id": 445304,
      "node_id": "MDQ6VXNlcjQ0NTMwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darklow",
      "html_url": "https://github.com/darklow",
      "followers_url": "https://api.github.com/users/darklow/followers",
      "following_url": "https://api.github.com/users/darklow/following{/other_user}",
      "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
      "organizations_url": "https://api.github.com/users/darklow/orgs",
      "repos_url": "https://api.github.com/users/darklow/repos",
      "events_url": "https://api.github.com/users/darklow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darklow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-23T23:31:32Z",
    "updated_at": "2022-01-23T23:42:17Z",
    "author_association": "NONE",
    "body": "Even after more than 24h both nodes can't broadcast any tx, so it doesn't seem like an issue related to not being yet synced. Also both nodes are well synced up to latest block and all the read RPC endpoints work fine.\r\n\r\nErigon logs show nothing at all in the moment of calling eth_sendRawTransaction. Only log entry is only for `rpcdaemon`, the same as I posted already.\r\n\r\nHere are the cli commands from docker .yml file:\r\n```\r\nerigon:\r\n  command: erigon --private.api.addr=0.0.0.0:9090\r\n\r\nrpcdaemon:\r\n  command: rpcdaemon --private.api.addr=erigon:9090 --http.addr=0.0.0.0 --http.vhosts=* --http.corsdomain=* --http.api=eth,net,web3,debug,txpool,trace --txpool.api.addr=erigon:9090\r\n```\r\n\r\nI just restarted the node again to see initial logs from erigon and rpcdaemon services, in case if it helps:\r\n\r\n```\r\nerigon  | [INFO] [01-23|23:33:25.919] Build info                               git_branch=stable git_tag=v2022.01.02 git_commit=b4b8df998363298dfc4e36c25da60c5142534594\r\nerigon  | [INFO] [01-23|23:33:25.919] Starting Erigon on Ethereum mainnet...\r\nerigon  | [INFO] [01-23|23:33:25.920] Maximum peer count                       ETH=100 total=100\r\nerigon  | [INFO] [01-23|23:33:25.920] Set global gas cap                       cap=50000000\r\nerigon  | [INFO] [01-23|23:33:25.965] Opening Database                         label=chaindata path=/home/erigon/.local/share/erigon/chaindata\r\nerigon  | [INFO] [01-23|23:33:25.969] Initialised chain configuration          config=\"{ChainID: 1 Homestead: 1150000 DAO: 1920000 DAOSupport: true EIP150: 2463000 EIP155: 2675000 EIP158: 2675000 Byzantium: 4370000 Constantinople: 7280000 Petersburg: 7280000 Istanbul: 9069000, Muir Glacier: 9200000, Berlin: 12244000, London: 12965000, Arrow Glacier: 13773000, Engine: ethash}\"\r\nerigon  | [INFO] [01-23|23:33:25.969] Disk storage enabled for ethash DAGs     dir=/home/erigon/.local/share/erigon/ethash-dags count=2\r\nerigon  | [INFO] [01-23|23:33:25.969] Initialising Ethereum protocol           network=1\r\nerigon  | [INFO] [01-23|23:33:25.969] Effective                                prune=\"--prune=\"\r\nerigon  | [INFO] [01-23|23:33:26.879] Starting private RPC server              on=0.0.0.0:9090\r\nerigon  | [INFO] [01-23|23:33:26.880] [1/15 Headers] Waiting for headers...    from=14064885\r\nerigon  | [INFO] [01-23|23:33:26.904] Started P2P networking                   version=66 self=enode://76daf4d0ceaaeff76c9f4eb0b595451e630351be25ff369f16fdba517bf033554fea386aec1a6e5d5bf5ba1703ea6846ceebb7f446dfb0f2c5c54e8f2f867f22@127.0.0.1:30303 name=erigon/v2022.01.2-beta-b4b8df99/linux-amd64/go1.17.6\r\nerigon  | [INFO] [01-23|23:33:27.200] event subscription channel established with the RPC daemon\r\nerigon  | [INFO] [01-23|23:33:27.200] New txs subscriber joined\r\nerigon  | [INFO] [01-23|23:33:56.880] [1/15 Headers] Wrote block headers       number=14064887 blk/second=0.067 alloc=\"226.91 MiB\" sys=\"300.86 MiB\"\r\nerigon  | [INFO] [01-23|23:34:02.672] [1/15 Headers] Processed                 highest inserted=14064889 age=28s\r\nerigon  | [INFO] [01-23|23:34:03.338] [5/15 Execution] Completed on            block=14064889\r\nerigon  | [INFO] [01-23|23:34:04.490] RPC Daemon notified of new headers       from=14064885 to=14064889\r\nerigon  | [INFO] [01-23|23:34:04.490] [1/15 Headers] Waiting for headers...    from=14064889\r\n```\r\n\r\nrpcdaemon:\r\n```\r\nrpcdaemon  | [INFO] [01-23|23:33:26.694] if you run RPCDaemon on same machine with Erigon add --datadir option\r\nrpcdaemon  | [INFO] [01-23|23:33:26.695] rpc filters: subscribing to Erigon events\r\nrpcdaemon  | [INFO] [01-23|23:33:26.695] HTTP endpoint opened                     url=0.0.0.0:8545 ws=false ws.compression=false grpc=false\r\nrpcdaemon  | [INFO] [01-23|23:33:27.201] interfaces compatible                    remote_db= client=4.0.0 server=4.0.0\r\nrpcdaemon  | [INFO] [01-23|23:33:27.202] interfaces compatible                    remote_service=eth_backend client=2.2.0 server=2.2.0\r\nrpcdaemon  | [INFO] [01-23|23:33:27.203] interfaces compatible                    remote_service=mining client=1.0.0 server=1.0.0\r\nrpcdaemon  | [INFO] [01-23|23:33:27.203] interfaces compatible                    remote_service=tx_pool client=1.0.0 server=1.0.0\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1019591844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1020193189",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3326#issuecomment-1020193189",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326",
    "id": 1020193189,
    "node_id": "IC_kwDOC0FsAM48zuml",
    "user": {
      "login": "darklow",
      "id": 445304,
      "node_id": "MDQ6VXNlcjQ0NTMwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darklow",
      "html_url": "https://github.com/darklow",
      "followers_url": "https://api.github.com/users/darklow/followers",
      "following_url": "https://api.github.com/users/darklow/following{/other_user}",
      "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
      "organizations_url": "https://api.github.com/users/darklow/orgs",
      "repos_url": "https://api.github.com/users/darklow/repos",
      "events_url": "https://api.github.com/users/darklow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darklow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-24T15:03:03Z",
    "updated_at": "2022-01-24T15:03:03Z",
    "author_association": "NONE",
    "body": "As suggested in #3341 deleting `txpool` directory and resetarting node helped to solve issue when pool wasn't starting. @kolyasapphire thanks for workaround fix.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1020193189/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1023149218",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3326#issuecomment-1023149218",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326",
    "id": 1023149218,
    "node_id": "IC_kwDOC0FsAM48_ASi",
    "user": {
      "login": "kolyasapphire",
      "id": 4752441,
      "node_id": "MDQ6VXNlcjQ3NTI0NDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4752441?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kolyasapphire",
      "html_url": "https://github.com/kolyasapphire",
      "followers_url": "https://api.github.com/users/kolyasapphire/followers",
      "following_url": "https://api.github.com/users/kolyasapphire/following{/other_user}",
      "gists_url": "https://api.github.com/users/kolyasapphire/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kolyasapphire/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kolyasapphire/subscriptions",
      "organizations_url": "https://api.github.com/users/kolyasapphire/orgs",
      "repos_url": "https://api.github.com/users/kolyasapphire/repos",
      "events_url": "https://api.github.com/users/kolyasapphire/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kolyasapphire/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-27T12:19:33Z",
    "updated_at": "2022-01-27T12:19:33Z",
    "author_association": "NONE",
    "body": "#3350 probably fixed the issue. Please try updating to the latest version.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1023149218/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1025014908",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3326#issuecomment-1025014908",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3326",
    "id": 1025014908,
    "node_id": "IC_kwDOC0FsAM49GHx8",
    "user": {
      "login": "darklow",
      "id": 445304,
      "node_id": "MDQ6VXNlcjQ0NTMwNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/445304?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darklow",
      "html_url": "https://github.com/darklow",
      "followers_url": "https://api.github.com/users/darklow/followers",
      "following_url": "https://api.github.com/users/darklow/following{/other_user}",
      "gists_url": "https://api.github.com/users/darklow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darklow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darklow/subscriptions",
      "organizations_url": "https://api.github.com/users/darklow/orgs",
      "repos_url": "https://api.github.com/users/darklow/repos",
      "events_url": "https://api.github.com/users/darklow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darklow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-30T00:27:06Z",
    "updated_at": "2022-01-30T00:27:06Z",
    "author_association": "NONE",
    "body": "I tested and confirm this is no more an issue in v2022.01.03\r\n@kolyasapphire Thank you. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1025014908/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

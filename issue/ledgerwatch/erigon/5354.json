{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5354",
  "id": 1371270300,
  "node_id": "I_kwDOC0FsAM5Ru-yc",
  "number": 5354,
  "title": "Missed block proposal because Erigon refused to build the payload",
  "user": {
    "login": "gus4rs",
    "id": 110654587,
    "node_id": "U_kgDOBph0ew",
    "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gus4rs",
    "html_url": "https://github.com/gus4rs",
    "followers_url": "https://api.github.com/users/gus4rs/followers",
    "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
    "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
    "organizations_url": "https://api.github.com/users/gus4rs/orgs",
    "repos_url": "https://api.github.com/users/gus4rs/repos",
    "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gus4rs/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4566396003,
      "node_id": "LA_kwDOC0FsAM8AAAABEC2sYw",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/Stale",
      "name": "Stale",
      "color": "ededed",
      "default": false,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-09-13T11:07:48Z",
  "updated_at": "2022-11-17T03:03:01Z",
  "closed_at": "2022-11-17T03:03:01Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "```erigon version 2022.09.1-alpha-4067b7c4```\r\n\r\nErigon was resolving forks (it does that a lot) and printed\r\n\r\n```\r\n[WARN] Skipping payload building because forkchoiceState.headBlockHash is not the head of the canonical chain forkChoice.HeadBlockHash=0x0000000000000000000000000000000000000000000000000000000000000000 headHeader.Hash=0x2b4c48870abd6e7dde805bf4b5703cd506b7687057fc987eb4eaccc31e402ee4\r\n```\r\n\r\nThe validator, Nimbus, could not build the block:\r\n\r\n```\r\ngetExecutionPayload: newExecutionPayload invalid topics=\"beacval\" executionPayloadStatus=ok(INVALID_BLOCK_HASH)\r\nUnable to get execution payload. Skipping block proposal topics=\"beacval\"\r\n```\r\n\r\nAnd I lost the block proposal \r\n\r\n\r\nWhen looking at my Erigon logs, I see multiple chunks a day of \r\n```\r\nun ch acc: ba8c2aa61704cc14db988970b227af9a4e9ee5fa, 0, 03020322080be110d2a6eef6f1\r\nun ch acc: bcc84003d99562052570a594927e76e1e568466f, 0, 020729011b1c8ec400\r\nun ch acc: bcd92c3778b456da29ba29db156c4223dfd2dde1, 0, 0302020107826ab3311bbf66\r\nun ch acc: bd2819709cc834d5a1496642b2905bbd24db392f, 0, 0301990801ad2500fb3fb9a3\r\nun ch acc: bd31ea8212119f94a611fa969881cba3ea06fa3d, 1, 0d0101010120857e34d35e463e37286\r\n```\r\n\r\nApparently this makes Erigon unavailable for the beacon chain since it is resolving forks and not read to answers requests, and the reason the damage is not bigger is because the beacon chain doesn't use it much now, but after the Merge it will be a disaster.\r\n\r\nSee other related issues https://github.com/ledgerwatch/erigon/issues/5316 and https://github.com/ledgerwatch/erigon/issues/5280\r\n\r\nWhat is the reason for this? Network/bandwidth speed is definitely not an issue",
  "closed_by": {
    "login": "github-actions[bot]",
    "id": 41898282,
    "node_id": "MDM6Qm90NDE4OTgyODI=",
    "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/github-actions%5Bbot%5D",
    "html_url": "https://github.com/apps/github-actions",
    "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354/timeline",
  "performed_via_github_app": null,
  "state_reason": "not_planned"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1250063016",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5354#issuecomment-1250063016",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354",
    "id": 1250063016,
    "node_id": "IC_kwDOC0FsAM5KgnKo",
    "user": {
      "login": "littleskunk",
      "id": 6333390,
      "node_id": "MDQ6VXNlcjYzMzMzOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6333390?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/littleskunk",
      "html_url": "https://github.com/littleskunk",
      "followers_url": "https://api.github.com/users/littleskunk/followers",
      "following_url": "https://api.github.com/users/littleskunk/following{/other_user}",
      "gists_url": "https://api.github.com/users/littleskunk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/littleskunk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/littleskunk/subscriptions",
      "organizations_url": "https://api.github.com/users/littleskunk/orgs",
      "repos_url": "https://api.github.com/users/littleskunk/repos",
      "events_url": "https://api.github.com/users/littleskunk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/littleskunk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-17T12:30:43Z",
    "updated_at": "2022-09-17T12:30:43Z",
    "author_association": "NONE",
    "body": "Same problem here in combination with lighthouse. Any chance this is getting fixed any time soon? Or should we better migrate over to besu?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1250063016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1251013325",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5354#issuecomment-1251013325",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354",
    "id": 1251013325,
    "node_id": "IC_kwDOC0FsAM5KkPLN",
    "user": {
      "login": "gus4rs",
      "id": 110654587,
      "node_id": "U_kgDOBph0ew",
      "avatar_url": "https://avatars.githubusercontent.com/u/110654587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gus4rs",
      "html_url": "https://github.com/gus4rs",
      "followers_url": "https://api.github.com/users/gus4rs/followers",
      "following_url": "https://api.github.com/users/gus4rs/following{/other_user}",
      "gists_url": "https://api.github.com/users/gus4rs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gus4rs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gus4rs/subscriptions",
      "organizations_url": "https://api.github.com/users/gus4rs/orgs",
      "repos_url": "https://api.github.com/users/gus4rs/repos",
      "events_url": "https://api.github.com/users/gus4rs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gus4rs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-19T13:21:26Z",
    "updated_at": "2022-09-19T13:21:26Z",
    "author_association": "NONE",
    "body": "I think Erigon is a reasonable block attestation tool, but if you are not using archive, better to stick to geth: it uses less disk and memory and actually produces blocks more reliably  ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1251013325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1296088982",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5354#issuecomment-1296088982",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354",
    "id": 1296088982,
    "node_id": "IC_kwDOC0FsAM5NQL-W",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-10-30T03:36:09Z",
    "updated_at": "2022-10-30T03:36:09Z",
    "author_association": "NONE",
    "body": "This issue is stale because it has been open for 40 days with no activity. Remove stale label or comment, or this will be closed in 7 days.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1296088982/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1317994301",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5354#issuecomment-1317994301",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5354",
    "id": 1317994301,
    "node_id": "IC_kwDOC0FsAM5Ojv89",
    "user": {
      "login": "github-actions[bot]",
      "id": 41898282,
      "node_id": "MDM6Qm90NDE4OTgyODI=",
      "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/github-actions%5Bbot%5D",
      "html_url": "https://github.com/apps/github-actions",
      "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
      "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
      "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
      "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
      "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
      "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
      "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
      "type": "Bot",
      "site_admin": false
    },
    "created_at": "2022-11-17T03:03:01Z",
    "updated_at": "2022-11-17T03:03:01Z",
    "author_association": "NONE",
    "body": "This issue was closed because it has been stalled for 7 days with no activity.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1317994301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4692",
  "id": 1300593890,
  "node_id": "I_kwDOC0FsAM5NhXzi",
  "number": 4692,
  "title": "Enormous memory usage on Chapel",
  "user": {
    "login": "GBBx",
    "id": 76771769,
    "node_id": "MDQ6VXNlcjc2NzcxNzY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/76771769?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GBBx",
    "html_url": "https://github.com/GBBx",
    "followers_url": "https://api.github.com/users/GBBx/followers",
    "following_url": "https://api.github.com/users/GBBx/following{/other_user}",
    "gists_url": "https://api.github.com/users/GBBx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GBBx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GBBx/subscriptions",
    "organizations_url": "https://api.github.com/users/GBBx/orgs",
    "repos_url": "https://api.github.com/users/GBBx/repos",
    "events_url": "https://api.github.com/users/GBBx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GBBx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4406003490,
      "node_id": "LA_kwDOC0FsAM8AAAABBp5HIg",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/gateway",
      "name": "gateway",
      "color": "62DB33",
      "default": false,
      "description": "Issue assigned to gateway team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "revitteth",
    "id": 693995,
    "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/revitteth",
    "html_url": "https://github.com/revitteth",
    "followers_url": "https://api.github.com/users/revitteth/followers",
    "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
    "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
    "organizations_url": "https://api.github.com/users/revitteth/orgs",
    "repos_url": "https://api.github.com/users/revitteth/repos",
    "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/revitteth/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "revitteth",
      "id": 693995,
      "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/revitteth",
      "html_url": "https://github.com/revitteth",
      "followers_url": "https://api.github.com/users/revitteth/followers",
      "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
      "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
      "organizations_url": "https://api.github.com/users/revitteth/orgs",
      "repos_url": "https://api.github.com/users/revitteth/repos",
      "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/revitteth/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2022-07-11T11:45:23Z",
  "updated_at": "2022-10-17T11:21:55Z",
  "closed_at": "2022-10-17T11:21:55Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `erigon version 2022.07.2-alpha-c7a94eee`\r\n\r\nOS & Version: Linux\r\n\r\nCommit hash : \r\n\r\n#### Expected behaviour\r\nErigon gets OOM killed although the machine has 100 GB memory.\r\nErigon should run and synchronise.\r\n\r\n#### Actual behaviour\r\nErigon is stuck on block 19203507. It seems to be doing some synchronization tasks but sooner or later it uses all the available memory and gets killed.\r\n\r\n#### Steps to reproduce the behaviour\r\nBuild and run erigon on chapel chain:\r\n```\r\nerigon --datadir /data/erigon --chain chapel --private.api.addr=localhost:9090 \\\r\n    --staticpeers=enode://69a90b35164ef862185d9f4d2c5eff79b92acd1360574c0edf36044055dc766d87285a820233ae5700e11c9ba06ce1cf23c1c68a4556121109776ce2a3990bba@52.199.214.252:30311,enode://330d768f6de90e7825f0ea6fe59611ce9d50712e73547306846a9304663f9912bf1611037f7f90f21606242ded7fb476c7285cb7cd792836b8c0c5ef0365855c@18.181.52.189:30311,enode://df1e8eb59e42cad3c4551b2a53e31a7e55a2fdde1287babd1e94b0836550b489ba16c40932e4dacb16cba346bd442c432265a299c4aca63ee7bb0f832b9f45eb@52.51.80.128:30311,enode://0bd566a7fd136ecd19414a601bfdc530d5de161e3014033951dd603e72b1a8959eb5b70b06c87a5a75cbf45e4055c387d2a842bd6b1bd8b5041b3a61bab615cf@34.242.33.165:30311,enode://604ed87d813c2b884ff1dc3095afeab18331f3cc361e8fb604159e844905dfa6e4c627306231d48f46a2edceffcd069264a89d99cdbf861a04e8d3d8d7282e8a@3.209.122.123:30311,enode://4d358eca87c44230a49ceaca123c89c7e77232aeae745c3a4917e607b909c4a14034b3a742960a378c3f250e0e67391276e80c7beee7770071e13f33a5b0606a@52.72.123.113:30311 \\\r\n    --trustedpeers=enode://69a90b35164ef862185d9f4d2c5eff79b92acd1360574c0edf36044055dc766d87285a820233ae5700e11c9ba06ce1cf23c1c68a4556121109776ce2a3990bba@52.199.214.252:30311,enode://330d768f6de90e7825f0ea6fe59611ce9d50712e73547306846a9304663f9912bf1611037f7f90f21606242ded7fb476c7285cb7cd792836b8c0c5ef0365855c@18.181.52.189:30311,enode://df1e8eb59e42cad3c4551b2a53e31a7e55a2fdde1287babd1e94b0836550b489ba16c40932e4dacb16cba346bd442c432265a299c4aca63ee7bb0f832b9f45eb@52.51.80.128:30311,enode://0bd566a7fd136ecd19414a601bfdc530d5de161e3014033951dd603e72b1a8959eb5b70b06c87a5a75cbf45e4055c387d2a842bd6b1bd8b5041b3a61bab615cf@34.242.33.165:30311,enode://604ed87d813c2b884ff1dc3095afeab18331f3cc361e8fb604159e844905dfa6e4c627306231d48f46a2edceffcd069264a89d99cdbf861a04e8d3d8d7282e8a@3.209.122.123:30311,enode://4d358eca87c44230a49ceaca123c89c7e77232aeae745c3a4917e607b909c4a14034b3a742960a378c3f250e0e67391276e80c7beee7770071e13f33a5b0606a@52.72.123.113:30311 \\\r\n    else exec /usr/local/bin/erigon --datadir /data/erigon --chain ${ERIGON_CHAIN} --private.api.addr=localhost:9090 ; fi\r\n```\r\n\r\n#### Backtrace\r\n\r\n````\r\n[INFO] [07-11|11:41:57.720] Build info                               git_branch=HEAD git_tag=v2022.07.02 git_commit=c7a94eeea05d7c0d569c811399642a7d108d8c82\r\n[INFO] [07-11|11:41:57.720] Starting Erigon on Chapel testnet...\r\n[INFO] [07-11|11:41:57.721] Maximum peer count                       ETH=100 total=100\r\n[INFO] [07-11|11:41:57.721] torrent verbosity                        level=2\r\n[INFO] [07-11|11:41:58.722] Set global gas cap                       cap=50000000\r\n[INFO] [07-11|11:41:58.729] Opening Database                         label=chaindata path=/data/erigon/chaindata\r\n[INFO] [07-11|11:41:58.855] Re-Opening DB in exclusive mode to apply migrations\r\n[INFO] [07-11|11:41:58.857] Apply migration                          name=reset_blocks_3\r\n[INFO] [07-11|11:41:58.857] Applied migration                        name=reset_blocks_3\r\n[INFO] [07-11|11:41:58.857] Updated DB schema to                     version=6.0.0\r\n[INFO] [07-11|11:41:58.859] Initialised chain configuration          config=\"{ChainID: 97 Ramanujan: 1010000, Niels: 1014369, MirrorSync: 5582500, Bruno: 13837000, Euler: 19203503, Engine: parlia}\" genesis=0x6d3c66c5357ec91d5c43af47e234a939b22557cbb552dc45bebbceeed90fbe34\r\n[INFO] [07-11|11:41:58.860] Initialising Ethereum protocol           network=97\r\n[INFO] [07-11|11:41:58.860] Using snapshots                          on=false\r\n[INFO] [07-11|11:41:58.860] Effective                                prune_flags= snapshot_flags=\r\n[INFO] [07-11|11:42:03.975] Starting private RPC server              on=localhost:9090\r\n[INFO] [07-11|11:42:03.975] new subscription to logs established\r\n[INFO] [07-11|11:42:03.976] rpc filters: subscribing to Erigon events\r\n[INFO] [07-11|11:42:03.976] new subscription to newHeaders established\r\nTraceRequests = false\r\n[INFO] [07-11|11:42:03.976] New txs subscriber joined\r\n[EROR] [07-11|11:42:03.977] could not start RPC api: listen tcp 127.0.0.1:8545: bind: address already in use\r\n[INFO] [07-11|11:42:03.982] Started P2P networking                   version=66 self=enode://*****@127.0.0.1:30303 name=erigon/v2022.07.2-alpha-c7a94eee/linux-amd64/go1.18.3\r\n[INFO] [07-11|11:42:03.986] [1/16 Headers] Waiting for headers...    from=19203507\r\n[INFO] [07-11|11:42:04.362] [txpool] Started\r\n[INFO] [07-11|11:42:07.898] new subscription to newHeaders established\r\n[INFO] [07-11|11:42:07.898] New txs subscriber joined\r\n[INFO] [07-11|11:42:23.987] [1/16 Headers] Inserting headers         progress=19218923 queue=1\r\n[INFO] [07-11|11:42:43.992] [1/16 Headers] Inserting headers         progress=19364777 queue=1\r\n[INFO] [07-11|11:43:03.976] [txpool] stat                            block=19203507 pending=3056 baseFee=0 queued=25057 alloc=590.0MB sys=1.1GB\r\n[INFO] [07-11|11:43:03.988] [1/16 Headers] Wrote block headers       number=19550643 blk/second=17356.800 alloc=591.6MB sys=1.1GB\r\n[INFO] [07-11|11:43:23.987] [1/16 Headers] Inserting headers         progress=19673747 queue=1\r\n[INFO] [07-11|11:43:43.987] [1/16 Headers] Inserting headers         progress=19860621 queue=1\r\n[INFO] [07-11|11:43:58.860] [p2p] GoodPeers                          eth66=8\r\n[INFO] [07-11|11:44:03.982] [txpool] stat                            block=19203507 pending=3058 baseFee=0 queued=25092 alloc=924.1MB sys=1.4GB\r\n[INFO] [07-11|11:44:03.993] [1/16 Headers] Inserting headers         progress=19992519 queue=1\r\n[INFO] [07-11|11:44:23.987] [1/16 Headers] Inserting headers         progress=20195797 queue=1\r\n\r\n````\r\n",
  "closed_by": {
    "login": "revitteth",
    "id": 693995,
    "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/revitteth",
    "html_url": "https://github.com/revitteth",
    "followers_url": "https://api.github.com/users/revitteth/followers",
    "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
    "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
    "organizations_url": "https://api.github.com/users/revitteth/orgs",
    "repos_url": "https://api.github.com/users/revitteth/repos",
    "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/revitteth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1180313301",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1180313301",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1180313301,
    "node_id": "IC_kwDOC0FsAM5GWibV",
    "user": {
      "login": "AndreaLanfranchi",
      "id": 15280851,
      "node_id": "MDQ6VXNlcjE1MjgwODUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15280851?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndreaLanfranchi",
      "html_url": "https://github.com/AndreaLanfranchi",
      "followers_url": "https://api.github.com/users/AndreaLanfranchi/followers",
      "following_url": "https://api.github.com/users/AndreaLanfranchi/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndreaLanfranchi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndreaLanfranchi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndreaLanfranchi/subscriptions",
      "organizations_url": "https://api.github.com/users/AndreaLanfranchi/orgs",
      "repos_url": "https://api.github.com/users/AndreaLanfranchi/repos",
      "events_url": "https://api.github.com/users/AndreaLanfranchi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndreaLanfranchi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T11:50:01Z",
    "updated_at": "2022-07-11T11:50:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is by design. Due to MDBX memory mapping OS cache will use as much memory as it's available to keep hot data available without frequent IO.  This does not imply RAM is unusable ... as soon as other processes will require memory the OS will release the mapping cache.\r\nSimply disable OOM killer.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1180313301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1180580233",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1180580233",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1180580233,
    "node_id": "IC_kwDOC0FsAM5GXjmJ",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-11T15:51:15Z",
    "updated_at": "2022-07-11T15:51:15Z",
    "author_association": "COLLABORATOR",
    "body": "@AndreaLanfranchi I am not 100 sure about that. We synced a lot of Erigon nodes and only latest released cause OOMs at least for us, so I assume there is some leak somewhere.\r\n\r\n@GBBx can you run it with the pprof flag enabled and get me a heap trace when then node is at about 70 or 80GB? You can check the pprof port in the readme, I am replying from a phone, so canâ€™t give you the full instruction. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1180580233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1181463337",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1181463337",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1181463337,
    "node_id": "IC_kwDOC0FsAM5Ga7Mp",
    "user": {
      "login": "eino-makitalo",
      "id": 1835186,
      "node_id": "MDQ6VXNlcjE4MzUxODY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1835186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eino-makitalo",
      "html_url": "https://github.com/eino-makitalo",
      "followers_url": "https://api.github.com/users/eino-makitalo/followers",
      "following_url": "https://api.github.com/users/eino-makitalo/following{/other_user}",
      "gists_url": "https://api.github.com/users/eino-makitalo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eino-makitalo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eino-makitalo/subscriptions",
      "organizations_url": "https://api.github.com/users/eino-makitalo/orgs",
      "repos_url": "https://api.github.com/users/eino-makitalo/repos",
      "events_url": "https://api.github.com/users/eino-makitalo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eino-makitalo/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T08:17:34Z",
    "updated_at": "2022-07-12T08:18:36Z",
    "author_association": "NONE",
    "body": "Quite many newest tags are \"leaking\" memory. Now testing  v2022.07.02 and it started with 20 % of 32 GB machine.  Now in 10 minutes it's 31.1 %.    It runs about one day and then OOM Killed.\r\nlast version died by OOM:   erigon/2022.07.2/linux-amd64/go1.18.1",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1181463337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1181497838",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1181497838",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1181497838,
    "node_id": "IC_kwDOC0FsAM5GbDnu",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T08:51:34Z",
    "updated_at": "2022-07-12T08:51:34Z",
    "author_association": "COLLABORATOR",
    "body": "@eino-makitalo, can you send the heap pprof?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1181497838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1181546155",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1181546155",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1181546155,
    "node_id": "IC_kwDOC0FsAM5GbPar",
    "user": {
      "login": "AndreaLanfranchi",
      "id": 15280851,
      "node_id": "MDQ6VXNlcjE1MjgwODUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/15280851?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AndreaLanfranchi",
      "html_url": "https://github.com/AndreaLanfranchi",
      "followers_url": "https://api.github.com/users/AndreaLanfranchi/followers",
      "following_url": "https://api.github.com/users/AndreaLanfranchi/following{/other_user}",
      "gists_url": "https://api.github.com/users/AndreaLanfranchi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AndreaLanfranchi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AndreaLanfranchi/subscriptions",
      "organizations_url": "https://api.github.com/users/AndreaLanfranchi/orgs",
      "repos_url": "https://api.github.com/users/AndreaLanfranchi/repos",
      "events_url": "https://api.github.com/users/AndreaLanfranchi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AndreaLanfranchi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-12T09:39:38Z",
    "updated_at": "2022-07-12T09:39:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mandrigin though i cannot exclude leaks the way mdbx works is exactly that. I have used a 132 GB machine for testing and during initial sync has eaten 99.9 RAM. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1181546155/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1185349514",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1185349514",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1185349514,
    "node_id": "IC_kwDOC0FsAM5Gpv-K",
    "user": {
      "login": "jeremie-H",
      "id": 11060749,
      "node_id": "MDQ6VXNlcjExMDYwNzQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/11060749?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jeremie-H",
      "html_url": "https://github.com/jeremie-H",
      "followers_url": "https://api.github.com/users/jeremie-H/followers",
      "following_url": "https://api.github.com/users/jeremie-H/following{/other_user}",
      "gists_url": "https://api.github.com/users/jeremie-H/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jeremie-H/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jeremie-H/subscriptions",
      "organizations_url": "https://api.github.com/users/jeremie-H/orgs",
      "repos_url": "https://api.github.com/users/jeremie-H/repos",
      "events_url": "https://api.github.com/users/jeremie-H/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jeremie-H/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-15T09:17:15Z",
    "updated_at": "2022-07-15T09:33:39Z",
    "author_association": "NONE",
    "body": "Hello, i'm just new to erigon, and want to sync on mainnet, but i get the OOM killer for the second time (first time with 16GB RAM, so I increase the memory up to 24GB).\r\n\r\n[debug_erigon.zip](https://github.com/ledgerwatch/erigon/files/9119527/debug_erigon.zip)\r\n\r\nIn addition, i've got node-exporter & grafana, it seems that memory grow up quickly (2 times on this screencapture)\r\n![image](https://user-images.githubusercontent.com/11060749/179193314-372df064-5eb6-4bf3-8056-8668265f896d.png)\r\n\r\n`~23:30` :one: first crash happen  with 16GB\r\n`~02:00` :radio_button: stop & restart VM with 25GB\r\n`~04:45` :two: second crash with ~25GB total RAM\r\n\r\nerigon version : **2022.99.99-dev-07e00b87**\r\ngo version : **go version go1.18.4 linux/amd64**\r\n\r\nrpcdaemon cmd line : \r\n```\r\n/home/erigon/erigon/build/bin/rpcdaemon --private.api.addr=localhost:9089 --datadir /var/lib/erigon --http.api=eth,erigon,web3,net,debug,trace,txpool,shh --txpool.api.addr=localhost:9089\r\n```\r\n\r\nerigon cmd line : \r\n```\r\n/home/erigon/erigon/build/bin/erigon --datadir /var/lib/erigon --chain mainnet --private.api.addr=localhost:9089 --metrics --metrics.addr=192.168.0.1 --http.addr=192.168.0.1 --pprof --prune htc --prune.r.before=11184524\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1185349514/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1186151011",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1186151011",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1186151011,
    "node_id": "IC_kwDOC0FsAM5Gszpj",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-16T10:51:36Z",
    "updated_at": "2022-07-16T11:18:39Z",
    "author_association": "COLLABORATOR",
    "body": "here is mem-leak from BSC:\r\n![mem](https://user-images.githubusercontent.com/46885206/179351586-39f78136-43a5-4f50-ac46-28b396435ea1.png)\r\n\r\n[erigon-public-mainnet-nd-813-647-969.log](https://github.com/ledgerwatch/erigon/files/9125635/erigon-public-mainnet-nd-813-647-969.log)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1186151011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1280704146",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4692#issuecomment-1280704146",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4692",
    "id": 1280704146,
    "node_id": "IC_kwDOC0FsAM5MVf6S",
    "user": {
      "login": "revitteth",
      "id": 693995,
      "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/revitteth",
      "html_url": "https://github.com/revitteth",
      "followers_url": "https://api.github.com/users/revitteth/followers",
      "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
      "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
      "organizations_url": "https://api.github.com/users/revitteth/orgs",
      "repos_url": "https://api.github.com/users/revitteth/repos",
      "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/revitteth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T11:21:55Z",
    "updated_at": "2022-10-17T11:21:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Now released, so will close.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1280704146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

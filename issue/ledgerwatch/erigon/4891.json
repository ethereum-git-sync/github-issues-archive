{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4891",
  "id": 1324751783,
  "node_id": "I_kwDOC0FsAM5O9hun",
  "number": 4891,
  "title": "nodeDB.QuerySeeds failed err=\"mdbx_txn_begin: MDBX_PANIC during initial sync",
  "user": {
    "login": "aftermathdigital",
    "id": 84855515,
    "node_id": "MDQ6VXNlcjg0ODU1NTE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/84855515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aftermathdigital",
    "html_url": "https://github.com/aftermathdigital",
    "followers_url": "https://api.github.com/users/aftermathdigital/followers",
    "following_url": "https://api.github.com/users/aftermathdigital/following{/other_user}",
    "gists_url": "https://api.github.com/users/aftermathdigital/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aftermathdigital/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aftermathdigital/subscriptions",
    "organizations_url": "https://api.github.com/users/aftermathdigital/orgs",
    "repos_url": "https://api.github.com/users/aftermathdigital/repos",
    "events_url": "https://api.github.com/users/aftermathdigital/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aftermathdigital/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-08-01T17:36:18Z",
  "updated_at": "2022-08-02T16:57:27Z",
  "closed_at": "2022-08-02T16:57:26Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: erigon version 2022.99.99-dev-d866b119\r\n\r\nOS & Version: Ubuntu server 22.04\r\n\r\nCommit hash : d866b119236c9b93ca071abc0e45526cf82b58d7\r\n\r\n32gb ram, ryzen 5600g\r\n\r\n#### Expected behaviour\r\n\r\nDuring initial sync, the node should synchronize without indicating hardware failure in the logs\r\n\r\n#### Actual behaviour\r\n\r\nThe console is littered with intermittent \r\n\r\n```\r\nWARN[08-01|17:10:17.667] nodeDB.QuerySeeds failed\r\nerr=\"mdbx_txn_begin: MDBX_PANIC: Likely because hardware failure\r\n```\r\n\r\nUnder the guidance of the error message, I've run some memory stress tests which haven't returned any failures, though I was unable to run the smartmontools to check the disk. The disk is a new 4tb nvme ssd.\r\n\r\nOne thing I had noticed early on in the sync was that, for some reason, ubuntu server's installation had only used 100gb of my 4tb drive. At this point, the disk was not full, I don't remember its exact utilization. I've since grown the drive to 4tb, as can be seen:\r\n\r\n```\r\n/dev/mapper/ubuntu--vg-ubuntu--lv  3.6T  880G  2.6T  26% /\r\n```\r\n\r\nI'm not sure why this would cause this error to be thrown, and I don't want to re-start my sync if I can avoid it, but I'm happy to do so if you think it will help.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nFollowed the readme 'getting started' section to begin an initial node sync.\r\n\r\n#### Backtrace\r\n\r\n````\r\nlabel: sentry, trace: [kv_mdbx.go:442 kv_mdbx.go:670 nodedb.go:414 nodedb.go:399 asm_amd64.s:1571]\r\n````\r\n\r\nIt's certainly possible I've messed up, but the discord appears to be invite only, so I thought this would be the best place to post.",
  "closed_by": {
    "login": "aftermathdigital",
    "id": 84855515,
    "node_id": "MDQ6VXNlcjg0ODU1NTE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/84855515?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aftermathdigital",
    "html_url": "https://github.com/aftermathdigital",
    "followers_url": "https://api.github.com/users/aftermathdigital/followers",
    "following_url": "https://api.github.com/users/aftermathdigital/following{/other_user}",
    "gists_url": "https://api.github.com/users/aftermathdigital/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aftermathdigital/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aftermathdigital/subscriptions",
    "organizations_url": "https://api.github.com/users/aftermathdigital/orgs",
    "repos_url": "https://api.github.com/users/aftermathdigital/repos",
    "events_url": "https://api.github.com/users/aftermathdigital/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aftermathdigital/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1201899073",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4891#issuecomment-1201899073",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891",
    "id": 1201899073,
    "node_id": "IC_kwDOC0FsAM5Ho4ZB",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T01:02:37Z",
    "updated_at": "2022-08-02T01:02:37Z",
    "author_association": "COLLABORATOR",
    "body": "1. Check if no space left on disk\r\n2. If you have no problem with space on disk and still see error - follow recommendations in error message",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1201899073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1202988034",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4891#issuecomment-1202988034",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4891",
    "id": 1202988034,
    "node_id": "IC_kwDOC0FsAM5HtCQC",
    "user": {
      "login": "aftermathdigital",
      "id": 84855515,
      "node_id": "MDQ6VXNlcjg0ODU1NTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/84855515?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aftermathdigital",
      "html_url": "https://github.com/aftermathdigital",
      "followers_url": "https://api.github.com/users/aftermathdigital/followers",
      "following_url": "https://api.github.com/users/aftermathdigital/following{/other_user}",
      "gists_url": "https://api.github.com/users/aftermathdigital/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aftermathdigital/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aftermathdigital/subscriptions",
      "organizations_url": "https://api.github.com/users/aftermathdigital/orgs",
      "repos_url": "https://api.github.com/users/aftermathdigital/repos",
      "events_url": "https://api.github.com/users/aftermathdigital/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aftermathdigital/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-02T16:57:26Z",
    "updated_at": "2022-08-02T16:57:26Z",
    "author_association": "NONE",
    "body": "Having re-started the sync it now appears to be working, I'm not sure what the issue was, I think I must have underestimated whether or not erigon had already failed to write to a full-disk before growing the volume.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1202988034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

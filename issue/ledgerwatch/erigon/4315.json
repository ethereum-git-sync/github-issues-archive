{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4315",
  "id": 1253681747,
  "node_id": "I_kwDOC0FsAM5KuapT",
  "number": 4315,
  "title": "bsc snapshot BuildIndices stage error",
  "user": {
    "login": "alexlee85",
    "id": 1570162,
    "node_id": "MDQ6VXNlcjE1NzAxNjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1570162?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexlee85",
    "html_url": "https://github.com/alexlee85",
    "followers_url": "https://api.github.com/users/alexlee85/followers",
    "following_url": "https://api.github.com/users/alexlee85/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexlee85/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexlee85/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexlee85/subscriptions",
    "organizations_url": "https://api.github.com/users/alexlee85/orgs",
    "repos_url": "https://api.github.com/users/alexlee85/repos",
    "events_url": "https://api.github.com/users/alexlee85/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexlee85/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-05-31T10:45:46Z",
  "updated_at": "2022-06-01T08:00:59Z",
  "closed_at": "2022-06-01T08:00:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `v2022.05.9-alpha`\r\n\r\nOS & Version: \r\n```\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 20.04.4 LTS\r\nRelease:        20.04\r\nCodename:       focal\r\n```\r\n\r\nCommit hash :  `97e8c42d5a271ca5c40af9bbd863af54a08fedce`\r\n\r\n#### Expected behaviour\r\ncan BuildIndices\r\n\r\n#### Actual behaviour\r\nBuildIndices error\r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO[05-31|10:28:36.640] [Snapshots] Fetching torrent files metadata\r\nINFO[05-31|10:28:40.487] [Snapshots] Stat                         blocks=16999999 alloc=2.1Gb sys=3.7Gb\r\nINFO[05-31|10:28:40.487] [snapshots] Build indices                from=16999999\r\nINFO[05-31|10:30:22.607] [p2p] GoodPeers                          eth66=18\r\nINFO[05-31|10:32:22.608] [p2p] GoodPeers                          eth66=24\r\nINFO[05-31|10:34:22.608] [p2p] GoodPeers                          eth66=23\r\nINFO[05-31|10:36:22.608] [p2p] GoodPeers                          eth66=22\r\nINFO[05-31|10:38:22.608] [p2p] GoodPeers                          eth66=24\r\nINFO[05-31|10:38:56.261] [Snapshots Indexing] TransactionsIdx     blockNum=17500000 alloc=2.8Gb sys=5.0Gb\r\nEROR[05-31|10:38:56.261] Staged Sync                              err=\"[1/16 Headers] BuildIndices: TransactionsIdx: at=17000000-17500000, runtime error: slice bounds out of range [18:7], [block_snapshots.go:1297 panic.go:844 panic.go:117 decompress.go:411 block_snapshots.go:1400 block_snapshots.go:1383 decompress.go:287 block_snapshots.go:1382 decompress.go:287 block_snapshots.go:1381 block_snapshots.go:1389 block_snapshots.go:715 asm_amd64.s:1571]\"\r\nINFO[05-31|10:38:57.327] [Snapshots] Fetching torrent files metadata\r\nINFO[05-31|10:39:00.870] [Snapshots] Stat                         blocks=16999999 alloc=2.2Gb sys=5.0Gb\r\nINFO[05-31|10:39:00.870] [snapshots] Build indices                from=16999999\r\nINFO[05-31|10:40:22.608] [p2p] GoodPeers                          eth66=24\r\n\r\n````\r\n",
  "closed_by": {
    "login": "alexlee85",
    "id": 1570162,
    "node_id": "MDQ6VXNlcjE1NzAxNjI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1570162?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alexlee85",
    "html_url": "https://github.com/alexlee85",
    "followers_url": "https://api.github.com/users/alexlee85/followers",
    "following_url": "https://api.github.com/users/alexlee85/following{/other_user}",
    "gists_url": "https://api.github.com/users/alexlee85/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alexlee85/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alexlee85/subscriptions",
    "organizations_url": "https://api.github.com/users/alexlee85/orgs",
    "repos_url": "https://api.github.com/users/alexlee85/repos",
    "events_url": "https://api.github.com/users/alexlee85/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alexlee85/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1143130423",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4315#issuecomment-1143130423",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315",
    "id": 1143130423,
    "node_id": "IC_kwDOC0FsAM5EIsk3",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-01T05:23:47Z",
    "updated_at": "2022-06-01T05:23:47Z",
    "author_association": "COLLABORATOR",
    "body": "```\r\n./build/bin/downloader torrent_hashes --verify --datadir=<your_datadir>\r\n```\r\nif this command show you some bad file (for example: `v1-016500-017000-transactions.seg`), please delete all files of given block range (for example: `rm <your_datadir>/snapsohts/v1-016500-017000*`).\r\nthen start erigon as usually",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1143130423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1143182503",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4315#issuecomment-1143182503",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315",
    "id": 1143182503,
    "node_id": "IC_kwDOC0FsAM5EI5Sn",
    "user": {
      "login": "alexlee85",
      "id": 1570162,
      "node_id": "MDQ6VXNlcjE1NzAxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1570162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexlee85",
      "html_url": "https://github.com/alexlee85",
      "followers_url": "https://api.github.com/users/alexlee85/followers",
      "following_url": "https://api.github.com/users/alexlee85/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexlee85/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexlee85/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexlee85/subscriptions",
      "organizations_url": "https://api.github.com/users/alexlee85/orgs",
      "repos_url": "https://api.github.com/users/alexlee85/repos",
      "events_url": "https://api.github.com/users/alexlee85/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexlee85/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-01T06:48:06Z",
    "updated_at": "2022-06-01T06:48:06Z",
    "author_association": "NONE",
    "body": "tks, @AskAlexSharov , I'll try",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1143182503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1143249923",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4315#issuecomment-1143249923",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4315",
    "id": 1143249923,
    "node_id": "IC_kwDOC0FsAM5EJJwD",
    "user": {
      "login": "alexlee85",
      "id": 1570162,
      "node_id": "MDQ6VXNlcjE1NzAxNjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1570162?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alexlee85",
      "html_url": "https://github.com/alexlee85",
      "followers_url": "https://api.github.com/users/alexlee85/followers",
      "following_url": "https://api.github.com/users/alexlee85/following{/other_user}",
      "gists_url": "https://api.github.com/users/alexlee85/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alexlee85/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alexlee85/subscriptions",
      "organizations_url": "https://api.github.com/users/alexlee85/orgs",
      "repos_url": "https://api.github.com/users/alexlee85/repos",
      "events_url": "https://api.github.com/users/alexlee85/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alexlee85/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-01T08:00:58Z",
    "updated_at": "2022-06-01T08:00:58Z",
    "author_association": "NONE",
    "body": "it works now, tks again",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1143249923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

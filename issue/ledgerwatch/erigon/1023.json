{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1023",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1023/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1023/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1023/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/1023",
  "id": 689453880,
  "node_id": "MDU6SXNzdWU2ODk0NTM4ODA=",
  "number": 1023,
  "title": "Crash in the TxPool stage",
  "user": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-08-31T19:36:52Z",
  "updated_at": "2020-09-01T11:50:37Z",
  "closed_at": "2020-09-01T11:50:37Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "````\r\nINFO [08-31|14:21:34.043] Memory                                   alloc=345.50MiB sys=544.14MiB\r\nINFO [08-31|14:21:34.043] Commit blocks \r\nINFO [08-31|14:21:35.667] Staged sync finished \r\nINFO [08-31|14:21:35.668] Sync stage 1/12. Download headers... \r\nINFO [08-31|14:21:35.864] Imported new block headers               count=1  elapsed=6.755ms     number=10769176 hash=\"a4f662…b4fe1b\"\r\nWARN [08-31|14:21:35.952] Rewinding blockchain                     target=10767127\r\nWARN [08-31|14:21:35.953] Rewinding blockchain                     target=10767127\r\nINFO [08-31|14:21:43.279] Most recent local header                 number=10767127 hash=\"4b46d3…25a553\" td=17123029369162101838518 age=7h37m31s\r\nINFO [08-31|14:21:43.279] Most recent local block                  number=10767127 hash=\"4b46d3…25a553\" td=17123029369162101838518 age=7h37m31s\r\nWARN [08-31|14:21:43.279] Rolled back chain segment                header=10768357->10767127 fast=0->0 block=0->0     reason=nil\r\nWARN [08-31|14:21:43.279] Synchronisation failed, dropping peer    peer=6240805470d0061e err=\"retrieved hash chain is invalid: unknown parent\"\r\nINFO [08-31|14:21:43.294] Staged sync finished \r\nINFO [08-31|14:21:43.295] Sync stage 1/12. Download headers... \r\nINFO [08-31|14:21:43.332] Imported new block headers               count=2  elapsed=8.087ms     number=10769177 hash=\"e105af…d0a39f\"\r\nINFO [08-31|14:21:43.337] Sync stage 2/12. Write block hashes... \r\nINFO [08-31|14:21:43.340] Sync stage 3/12. Download block bodies... \r\nERROR[08-31|14:21:43.340] chain segment could not be inserted, missing parent hash=\"a91f36…93d738\"\r\nWARN [08-31|14:21:43.341] Synchronisation failed, dropping peer    peer=7ba9f55f605281f6 err=\"retrieved hash chain is invalid: chain segment could not be inserted,\r\n missing parent a91f363eed7551389a24e2ea35e3f99b65d85c1c0fac261b132340e38493d738\"\r\nINFO [08-31|14:22:13.107] Staged sync finished \r\nINFO [08-31|14:22:13.107] Sync stage 1/12. Download headers... \r\nINFO [08-31|14:22:13.152] Imported new block headers               count=1  elapsed=13.202ms    number=10769178 hash=\"675ada…71e403\"\r\nINFO [08-31|14:22:13.156] Sync stage 2/12. Write block hashes... \r\nINFO [08-31|14:22:13.162] Sync stage 3/12. Download block bodies... \r\nERROR[08-31|14:22:13.163] chain segment could not be inserted, missing parent hash=\"a91f36…93d738\"\r\nWARN [08-31|14:22:13.164] Synchronisation failed, dropping peer    peer=c50a1fbe78338813 err=\"retrieved hash chain is invalid: chain segment could not be inserted,\r\n missing parent a91f363eed7551389a24e2ea35e3f99b65d85c1c0fac261b132340e38493d738\"\r\n\r\n\r\nINFO [08-31|14:37:31.809] Downloading block bodies                 count=85\r\nINFO [08-31|14:37:58.504] Downloader queue stats                   receiptTasks=0 blockTasks=15 itemSize=42.71KiB throttle=1535\r\nERROR[08-31|14:37:58.505] chain segment could not be inserted, missing parent hash=\"a91f36…93d738\"\r\nWARN [08-31|14:37:58.505] Synchronisation failed, dropping peer    peer=8b657bf6b52dffb7 err=\"retrieved hash chain is invalid: chain segment could not be inserted,\r\n missing parent a91f363eed7551389a24e2ea35e3f99b65d85c1c0fac261b132340e38493d738\"\r\nINFO [08-31|14:37:58.663] Staged sync finished \r\nINFO [08-31|14:37:58.663] Sync stage 1/12. Download headers... \r\nINFO [08-31|14:37:58.925] Imported new block headers               count=4  elapsed=13.903ms    number=10769265 hash=\"3d107c…8f3568\"\r\nINFO [08-31|14:37:58.965] Sync stage 2/12. Write block hashes... \r\nINFO [08-31|14:37:58.971] Sync stage 3/12. Download block bodies... \r\nINFO [08-31|14:37:58.971] Downloading block bodies                 count=89\r\nINFO [08-31|15:18:41.541] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [08-31|16:18:41.543] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [08-31|17:18:41.543] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [08-31|18:18:41.542] Regenerated local transaction journal    transactions=0 accounts=0\r\nINFO [08-31|19:07:53.475] Downloader queue stats                   receiptTasks=0 blockTasks=88 itemSize=42.71KiB throttle=1535\r\nWARN [08-31|19:07:53.475] Synchronisation failed, dropping peer    peer=909d6e9bc398e41d err=\"no peers available or all tried for download\"\r\nINFO [08-31|19:08:11.347] Staged sync finished \r\nINFO [08-31|19:08:11.348] Sync stage 1/12. Download headers... \r\nINFO [08-31|19:08:12.374] Imported new block headers               count=192 elapsed=445.574ms   number=10767319 hash=\"17b7a3…c8f7d2\" age=11h35m53s\r\nINFO [08-31|19:08:13.227] Imported new block headers               count=384 elapsed=726.115ms   number=10767703 hash=\"b1fd40…e661f3\" age=10h14m56s\r\nINFO [08-31|19:08:18.460] Imported new block headers               count=192 elapsed=306.215ms   number=10767895 hash=\"075a3d…355502\" age=9h33m16s\r\nINFO [08-31|19:08:21.734] Imported new block headers               count=2496 elapsed=3.270s      number=10770391 hash=\"3fd6b5…acfa21\" age=28m23s    reorg=true for\r\nkBlockNumber=10767127\r\nINFO [08-31|19:08:21.734] UnwindTo                                 block=10767127\r\nINFO [08-31|19:08:22.300] Imported new block headers               count=128  elapsed=318.666ms   number=10770519 hash=\"5b74e2…ad9282\"\r\nINFO [08-31|19:08:22.361] Imported new block headers               count=2    elapsed=10.624ms    number=10770521 hash=\"2359c7…8ce586\"\r\nINFO [08-31|19:08:22.553] Unwinding...                             stage=TxLookup\r\nINFO [08-31|19:08:24.205] Generating ethash verification cache     epoch=360 percentage=72 elapsed=3.012s\r\nINFO [08-31|19:08:25.399] Generated ethash verification cache      epoch=360 elapsed=4.206s\r\nINFO [08-31|19:08:52.616] Unwinding... DONE! \r\nINFO [08-31|19:08:52.616] Unwinding...                             stage=StorageHistoryIndex\r\nINFO [08-31|19:10:11.093] Unwinding... DONE! \r\nINFO [08-31|19:10:11.093] Unwinding...                             stage=AccountHistoryIndex\r\nINFO [08-31|19:11:15.838] Unwinding... DONE! \r\nINFO [08-31|19:11:15.838] Unwinding...                             stage=HashState\r\n\r\n\r\nERROR[08-31|19:19:37.665] Demoting invalidated transaction         hash=\"f9d9a3…8b2ba7\"\r\nERROR[08-31|19:19:37.665] Demoting invalidated transaction         hash=\"1b8b28…72682b\"\r\nINFO [08-31|19:19:37.673] unwind TxPoolUpdate: Reading canonical hashes complete hashes=2049\r\npanic: runtime error: index out of range [221] with length 221\r\ngoroutine 4909305 [running]:\r\ngithub.com/ledgerwatch/turbo-geth/core/types.(*Body).SendersToTxs(0xc012f875f0, 0xc01e1b7300, 0xdd, 0xdd)\r\n        github.com/ledgerwatch/turbo-geth@/core/types/block.go:224 +0xf7\r\ngithub.com/ledgerwatch/turbo-geth/eth/stagedsync.unwindTxPoolUpdate.func3(0x7e8c15149f98, 0x28, 0x28, 0x7e8c067e3010, 0xaae0, 0xaae0, 0xaae0, 0x0, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/eth/stagedsync/stage_txpool.go:207 +0x3cc\r\ngithub.com/ledgerwatch/turbo-geth/ethdb.Walk(0x1784d80, 0xc01447c1e0, 0xc03464ca30, 0x8, 0x8, 0x0, 0xc00d8a3f80, 0xc012f2f4c0, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/ethdb/tx_db.go:224 +0x1ba\r\ngithub.com/ledgerwatch/turbo-geth/ethdb.(*ObjectDatabase).Walk.func1(0x177b3e0, 0xc012f2f500, 0xc0000c0018, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/ethdb/object_db.go:203 +0xaa\r\ngithub.com/ledgerwatch/turbo-geth/ethdb.(*LmdbKV).View(0xc0001c97c0, 0x1770ea0, 0xc0000c0018, 0xc012f2f480, 0x0, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/ethdb/kv_lmdb.go:339 +0x16c\r\ngithub.com/ledgerwatch/turbo-geth/ethdb.(*ObjectDatabase).Walk(0xc0003ad7a0, 0x14c2d6a, 0x1, 0xc03464ca30, 0x8, 0x8, 0x0, 0xc00d8a3f80, 0x0, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/ethdb/object_db.go:202 +0xe2\r\ngithub.com/ledgerwatch/turbo-geth/eth/stagedsync.unwindTxPoolUpdate(0xa44b17, 0xa45318, 0xc000580240, 0x1774d60, 0xc0003ad7a0, 0xc000322a80, 0xc017b22028, 0x4298b5\r\n)\r\n        github.com/ledgerwatch/turbo-geth@/eth/stagedsync/stage_txpool.go:182 +0x758\r\ngithub.com/ledgerwatch/turbo-geth/eth/stagedsync.unwindTxPool(0xc03d4a38c0, 0xc03d4a3920, 0x177b320, 0xc0003ad7a0, 0xc000580240, 0xc000322a80, 0x0, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/eth/stagedsync/stage_txpool.go:115 +0x1bb\r\ngithub.com/ledgerwatch/turbo-geth/eth/stagedsync.(*StagedSync).Prepare.func22(0xc03d4a38c0, 0xc03d4a3920, 0x1774d60, 0xc0003ad7a0)\r\n        github.com/ledgerwatch/turbo-geth@/eth/stagedsync/stagedsync.go:173 +0x95\r\ngithub.com/ledgerwatch/turbo-geth/eth/stagedsync.(*State).UnwindStage(0xc013d18540, 0xc03d4a38c0, 0x177b320, 0xc0003ad7a0, 0x177b320, 0xc0003ad7a0, 0x0, 0x0)\r\n        github.com/ledgerwatch/turbo-geth@/eth/stagedsync/state.go:215 +0x355\r\ngithub.com/ledgerwatch/turbo-geth/eth/stagedsync.(*State).Run(0xc013d18540, 0x177b320, 0xc0003ad7a0, 0x177b320, 0xc0003ad7a0, 0xc00031b680, 0xc00031ba28)\r\n        github.com/ledgerwatch/turbo-geth@/eth/stagedsync/state.go:122 +0x50e\r\ngithub.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).syncWithPeer(0xc00000c1e0, 0xc00e3c0870, 0x486c4fa0333d516a, 0x81843e83cfb79f50, 0x3392936cecb5d5c, \r\n0x5e08e737745cfcda, 0xa45858, 0xc000580240, 0xc00bfe1c50, 0x0, ...)\r\n        github.com/ledgerwatch/turbo-geth@/eth/downloader/downloader.go:650 +0xbbc\r\ngithub.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).synchronise(0xc00000c1e0, 0xc00c7da3d0, 0x10, 0x486c4fa0333d516a, 0x81843e83cfb79f50, 0x3392936cecb5\r\nd5c, 0x5e08e737745cfcda, 0xa45858, 0x1, 0xc000580240, ...)\r\n        github.com/ledgerwatch/turbo-geth@/eth/downloader/downloader.go:453 +0x3d4\r\ngithub.com/ledgerwatch/turbo-geth/eth/downloader.(*Downloader).Synchronise(0xc00000c1e0, 0xc00c7da3d0, 0x10, 0x486c4fa0333d516a, 0x81843e83cfb79f50, 0x3392936cecb5\r\nd5c, 0x5e08e737745cfcda, 0xa45858, 0x7fe700000001, 0xc000580240, ...)\r\n        github.com/ledgerwatch/turbo-geth@/eth/downloader/downloader.go:363 +0xa6\r\ngithub.com/ledgerwatch/turbo-geth/eth.(*ProtocolManager).doSync(0xc00030a360, 0xc00b0da500, 0x1747d60, 0xc011eb6720)\r\n        github.com/ledgerwatch/turbo-geth@/eth/sync.go:317 +0x10c\r\ngithub.com/ledgerwatch/turbo-geth/eth.(*chainSyncer).startSync.func1(0xc0001b4c60, 0xc00b0da500)\r\n        github.com/ledgerwatch/turbo-geth@/eth/sync.go:288 +0x38\r\ncreated by github.com/ledgerwatch/turbo-geth/eth.(*chainSyncer).startSync\r\n        github.com/ledgerwatch/turbo-geth@/eth/sync.go:288 +0x7a\r\n````\r\n",
  "closed_by": {
    "login": "AlexeyAkhunov",
    "id": 13686139,
    "node_id": "MDQ6VXNlcjEzNjg2MTM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/13686139?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AlexeyAkhunov",
    "html_url": "https://github.com/AlexeyAkhunov",
    "followers_url": "https://api.github.com/users/AlexeyAkhunov/followers",
    "following_url": "https://api.github.com/users/AlexeyAkhunov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AlexeyAkhunov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AlexeyAkhunov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AlexeyAkhunov/subscriptions",
    "organizations_url": "https://api.github.com/users/AlexeyAkhunov/orgs",
    "repos_url": "https://api.github.com/users/AlexeyAkhunov/repos",
    "events_url": "https://api.github.com/users/AlexeyAkhunov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AlexeyAkhunov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1023/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/1023/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

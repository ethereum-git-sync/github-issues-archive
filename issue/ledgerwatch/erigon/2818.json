{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/2818",
  "id": 1023619567,
  "node_id": "I_kwDOC0FsAM49AzHv",
  "number": 2818,
  "title": "I need state `state` object inside connsensus",
  "user": {
    "login": "0xKrishna",
    "id": 20155977,
    "node_id": "MDQ6VXNlcjIwMTU1OTc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xKrishna",
    "html_url": "https://github.com/0xKrishna",
    "followers_url": "https://api.github.com/users/0xKrishna/followers",
    "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
    "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
    "repos_url": "https://api.github.com/users/0xKrishna/repos",
    "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 18,
  "created_at": "2021-10-12T10:05:14Z",
  "updated_at": "2021-10-28T14:36:09Z",
  "closed_at": "2021-10-18T02:17:39Z",
  "author_association": "COLLABORATOR",
  "active_lock_reason": null,
  "body": "I am implementing a consensus mechanism that is similar to `clique` but has some differences.\r\nNow the problem I am facing here is that I am trying to do some internal contract calls from consensus code itself, To do that I am using thing code\r\n```\r\nfunc (c *MyConsensus) fetchMessage(msg callmsg, header *types.Header, state *state.IntraBlockState, chain chainContext) ([]byte, error) {\r\n\tblockContext := core.NewEVMBlockContext(header, nil, c, &header.Coinbase, nil)\r\n\tvmenv := vm.NewEVM(blockContext, vm.TxContext{}, state, c.chainConfig, vm.Config{})\r\n\tres, _, err := vmenv.StaticCall(\r\n\t\tvm.AccountRef(msg.From()),\r\n\t\t*msg.To(),\r\n\t\tmsg.Data(),\r\n\t\tmsg.Gas(),\r\n\t)\r\n\r\n\treturn res, err\r\n}\r\n```\r\nThe problem is that I am not able to get the state inside my consensus code.\r\nIn GETH there was `core.Blockchain` object which I passed and used inside my consensus to get state using `StateAt`\r\nBut here I am not able to find anything related to that and no method to get state using hash/number.\r\n\r\nGeneral idea is to be able to call contract methods from consensus, Let me know if there is any better flow/idea, Thanks",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/940862320",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-940862320",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 940862320,
    "node_id": "IC_kwDOC0FsAM44FGtw",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T10:06:10Z",
    "updated_at": "2021-10-12T10:06:10Z",
    "author_association": "COLLABORATOR",
    "body": "@AskAlexSharov Please help.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/940862320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/940903574",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-940903574",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 940903574,
    "node_id": "IC_kwDOC0FsAM44FQyW",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T11:04:26Z",
    "updated_at": "2021-10-12T11:04:26Z",
    "author_association": "COLLABORATOR",
    "body": "There is SysCall parameter: https://github.com/ledgerwatch/erigon/blob/04f8ecb0ae338354d689e71fe2a3936dbadb4017/consensus/aura/aura.go#L836",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/940903574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941400889",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-941400889",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 941400889,
    "node_id": "IC_kwDOC0FsAM44HKM5",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-12T19:54:21Z",
    "updated_at": "2021-10-12T19:54:21Z",
    "author_association": "COLLABORATOR",
    "body": "Thanks, This will help in `Finalize` but I also want to make contract call in \r\nhttps://github.com/ledgerwatch/erigon/blob/devel/consensus/aura/aura.go#L730\r\n```\r\nfunc (c *AuRa) Prepare(chain consensus.ChainHeaderReader, header *types.Header) error {\r\n```\r\nPrepare method of my consensus, Any idea for that ?\r\n\r\nReally appreciate the help with the `Finalize` method.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941400889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941896834",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-941896834",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 941896834,
    "node_id": "IC_kwDOC0FsAM44JDSC",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-13T04:02:46Z",
    "updated_at": "2021-10-13T04:02:46Z",
    "author_association": "COLLABORATOR",
    "body": "@0xKrishna , you can go same way as Finalize. Pass SysCall as a parameter to Prepare method. \r\n\r\nAbout ibs:  can create it in StageMiningCreateBlockCfg (before engine.Prepare call), add it to MiningExecCfg.miningState.IntraBlockState, then use in SpawnMiningExecStage.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941896834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941953557",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-941953557",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 941953557,
    "node_id": "IC_kwDOC0FsAM44JRIV",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-13T06:08:42Z",
    "updated_at": "2021-10-13T06:09:12Z",
    "author_association": "COLLABORATOR",
    "body": "Okay, If I have understood correctly, You mean I should create ibs in `StageMiningCreateBlockCfg` and then use that in `SpawnMiningCreateBlockStage`\r\n\r\nI am assuming that `SpawnMiningExecStage` which you mentioned above was a typo, Because `Prepare` call is inside `SpawnMiningCreateBlockStage`.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941953557/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941955220",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-941955220",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 941955220,
    "node_id": "IC_kwDOC0FsAM44JRiU",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-13T06:11:33Z",
    "updated_at": "2021-10-13T06:11:33Z",
    "author_association": "COLLABORATOR",
    "body": "I don't see support for this `MiningExecCfg.miningState.IntraBlockState`\r\nI mean `miningState` doesn't have support to hold an ibs object, Maybe I should add an ibs object in `MiningCreateBlockCfg` directly ? Suggestions pleae.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941955220/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941957205",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-941957205",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 941957205,
    "node_id": "IC_kwDOC0FsAM44JSBV",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-13T06:15:09Z",
    "updated_at": "2021-10-13T06:15:17Z",
    "author_association": "COLLABORATOR",
    "body": "Does this looks fine, Is this the correct way to create ibs there\r\n```\r\n\treturn MiningCreateBlockCfg{\r\n\t\tibs:         state.New(state.NewPlainStateReader(olddb.NewObjectDatabase(db))),\r\n\t\tdb:          db,\r\n\t\tminer:       miner,\r\n\t\tchainConfig: chainConfig,\r\n\t\tengine:      engine,\r\n\t\ttxPool:      txPool,\r\n\t\ttxPool2:     txPool2,\r\n\t\ttxPool2DB:   txPool2DB,\r\n\t\ttmpdir:      tmpdir,\r\n\t}\r\n\t",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/941957205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/942039658",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-942039658",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 942039658,
    "node_id": "IC_kwDOC0FsAM44JmJq",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-13T08:07:03Z",
    "updated_at": "2021-10-13T08:07:03Z",
    "author_association": "COLLABORATOR",
    "body": "ObjectDatabase is deprecated. Use Tx.\r\n\r\nCreate ibs before Prepare call, pass it to next stages by adding to MiningExecCfg.miningState.\r\n\r\nIntraBlockState - living only during 1 block execution.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/942039658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943193930",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-943193930",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 943193930,
    "node_id": "IC_kwDOC0FsAM44N_9K",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-14T09:46:05Z",
    "updated_at": "2021-10-14T09:46:05Z",
    "author_association": "COLLABORATOR",
    "body": "I tried to understand what you said in the above comment but not able to find the same in the code.\r\nJust before the Prepare call I am not able to find the proper way to create ibs using Tx.\r\nAlso I didn't found `MiningExecCfg.miningState` inside `SpawnMiningCreateBlockStage` so that I can pass it to next stages by adding to that. Please help.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943193930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943194887",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-943194887",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 943194887,
    "node_id": "IC_kwDOC0FsAM44OAMH",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-14T09:47:18Z",
    "updated_at": "2021-10-14T09:47:18Z",
    "author_association": "COLLABORATOR",
    "body": "Please comment on this\r\nhttps://github.com/ledgerwatch/erigon/issues/2818#issuecomment-941953557",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943194887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943214705",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-943214705",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 943214705,
    "node_id": "IC_kwDOC0FsAM44OFBx",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-14T10:12:42Z",
    "updated_at": "2021-10-14T10:12:42Z",
    "author_association": "COLLABORATOR",
    "body": "Got it, Created ibs like this\r\n```\r\n\tstateReader := state.NewPlainStateReader(tx)\r\n\tibs := state.New(stateReader)",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943214705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943255806",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-943255806",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 943255806,
    "node_id": "IC_kwDOC0FsAM44OPD-",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-14T11:11:17Z",
    "updated_at": "2021-10-14T11:11:17Z",
    "author_association": "COLLABORATOR",
    "body": "Yep. All good?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/943255806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953680663",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-953680663",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 953680663,
    "node_id": "IC_kwDOC0FsAM442AMX",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T09:38:09Z",
    "updated_at": "2021-10-28T09:38:17Z",
    "author_association": "COLLABORATOR",
    "body": "Hi @AskAlexSharov , Thanks for the help, Looks like it worked in the above places.\r\nI need similar help here as well\r\nhttps://github.com/ledgerwatch/erigon/blob/devel/turbo/stages/headerdownload/header_algos.go#L614\r\nIn the `VerifyHeader` method, I want to pass a method using which I can do contract all from consensus.\r\nJust like how we did above in `Prepare`. Thanks",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953680663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953791255",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-953791255",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 953791255,
    "node_id": "IC_kwDOC0FsAM442bMX",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T12:20:00Z",
    "updated_at": "2021-10-28T12:20:00Z",
    "author_association": "COLLABORATOR",
    "body": "@0xKrishna what is problem? Just change consensus interface and add same SysCall parameter to verify header method.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953791255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953817385",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-953817385",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 953817385,
    "node_id": "IC_kwDOC0FsAM442hkp",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T12:56:43Z",
    "updated_at": "2021-10-28T12:56:43Z",
    "author_association": "COLLABORATOR",
    "body": "I don't have required data like `ibs` and `chainConfig` there.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953817385/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953860386",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-953860386",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 953860386,
    "node_id": "IC_kwDOC0FsAM442sEi",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T13:45:29Z",
    "updated_at": "2021-10-28T13:46:15Z",
    "author_association": "COLLABORATOR",
    "body": "Go to discord. \r\nVerifyHeader can’t modify “ibs”, right? Read-only? If yes - then just create ibs object anywhere you need it (in place where you create SysCall func). \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953860386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953867426",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-953867426",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 953867426,
    "node_id": "IC_kwDOC0FsAM442tyi",
    "user": {
      "login": "0xKrishna",
      "id": 20155977,
      "node_id": "MDQ6VXNlcjIwMTU1OTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/20155977?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKrishna",
      "html_url": "https://github.com/0xKrishna",
      "followers_url": "https://api.github.com/users/0xKrishna/followers",
      "following_url": "https://api.github.com/users/0xKrishna/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKrishna/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKrishna/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKrishna/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKrishna/orgs",
      "repos_url": "https://api.github.com/users/0xKrishna/repos",
      "events_url": "https://api.github.com/users/0xKrishna/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKrishna/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T13:53:21Z",
    "updated_at": "2021-10-28T13:53:21Z",
    "author_association": "COLLABORATOR",
    "body": "Okay, I will see what I can do, Thanks, Really appreciate the help.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953867426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953909724",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2818#issuecomment-953909724",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2818",
    "id": 953909724,
    "node_id": "IC_kwDOC0FsAM4424Hc",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-28T14:36:09Z",
    "updated_at": "2021-10-28T14:36:09Z",
    "author_association": "COLLABORATOR",
    "body": "Do you call it from stage_headers?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/953909724/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

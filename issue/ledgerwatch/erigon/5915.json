{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5915",
  "id": 1429569098,
  "node_id": "I_kwDOC0FsAM5VNX5K",
  "number": 5915,
  "title": "Erigon couldn't catch up with latest block every a few hours",
  "user": {
    "login": "shijie0",
    "id": 93897879,
    "node_id": "U_kgDOBZjElw",
    "avatar_url": "https://avatars.githubusercontent.com/u/93897879?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/shijie0",
    "html_url": "https://github.com/shijie0",
    "followers_url": "https://api.github.com/users/shijie0/followers",
    "following_url": "https://api.github.com/users/shijie0/following{/other_user}",
    "gists_url": "https://api.github.com/users/shijie0/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/shijie0/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/shijie0/subscriptions",
    "organizations_url": "https://api.github.com/users/shijie0/orgs",
    "repos_url": "https://api.github.com/users/shijie0/repos",
    "events_url": "https://api.github.com/users/shijie0/events{/privacy}",
    "received_events_url": "https://api.github.com/users/shijie0/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-10-31T09:55:56Z",
  "updated_at": "2022-12-24T14:42:13Z",
  "closed_at": "2022-12-24T14:42:12Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: erigon version 2.28.1-stable\r\n\r\nOS & Version: Linux,  Ubuntu 20.04.5 LTS\r\n\r\nConsensus client: lighthouse v3.1.2-01e84b7\r\n\r\nStart command: \r\n```bash\r\n/usr/local/bin/erigon --chain=mainnet --port=30303 --http.addr=0.0.0.0 --http.port=8545 --torrent.port=42069 --http --ws --http.api=eth,debug,net,trace,web3,erigon,engine --authrpc.addr=0.0.0.0 --authrpc.jwtsecret=/opt/jwtsecret\r\n\r\n/usr/bin/lighthouse --network mainnet beacon_node --http --execution-endpoint=http://10.13.14.124:8551 --execution-jwt=/opt/jwtsecret --datadir /home/ec2-user/lighthouse\r\n```\r\n#### Actual behaviour\r\nEvery about 2 hours, erigon will stop syncing and start download Pos headers, then followed by writing block bodies, then followed by \"TxLookup pruning, empty block body\" this process result in the node far behind sync and causing lighthouse node showing the following errors:\r\n```\r\nOct 31 09:35:29 ip-10-13-14-55.us-west-2.compute.internal lighthouse[29748]: Oct 31 09:35:29.001 WARN Head is optimistic                      execution_block_hash: 0xe2ad672b78b6af6280964408e9c0e3976947bdfa0670e4e1f28015d1f28c3558, info: chain not fully verified, block and attestation production disabled until execution engine syncs, service: slot_notifier\r\nOct 31 09:35:29 ip-10-13-14-55.us-west-2.compute.internal lighthouse[29748]: Oct 31 09:35:29.001 INFO Synced                                  slot: 5032075, block: 0x263b…ae86, epoch: 157252, finalized_epoch: 157250, finalized_root: 0x4c11…5d0c, exec_hash: 0xe2ad…3558 (unverified), peers: 21, service: slot_notifier\r\nOct 31 09:35:36 ip-10-13-14-55.us-west-2.compute.internal lighthouse[29748]: Oct 31 09:35:36.184 INFO New block received                      root: 0xaac3a679e24fa6013d6a8ba1c30553d62df78378c8db539083ac6240cc92d468, slot: 5032076\r\n```\r\n\r\nAttached is erigon log when it is not catching up.\r\n[erigon.log](https://github.com/ledgerwatch/erigon/files/9899997/erigon.log)\r\n",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1301566061",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5915#issuecomment-1301566061",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915",
    "id": 1301566061,
    "node_id": "IC_kwDOC0FsAM5NlFJt",
    "user": {
      "login": "sjlee1125",
      "id": 47561537,
      "node_id": "MDQ6VXNlcjQ3NTYxNTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/47561537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sjlee1125",
      "html_url": "https://github.com/sjlee1125",
      "followers_url": "https://api.github.com/users/sjlee1125/followers",
      "following_url": "https://api.github.com/users/sjlee1125/following{/other_user}",
      "gists_url": "https://api.github.com/users/sjlee1125/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sjlee1125/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sjlee1125/subscriptions",
      "organizations_url": "https://api.github.com/users/sjlee1125/orgs",
      "repos_url": "https://api.github.com/users/sjlee1125/repos",
      "events_url": "https://api.github.com/users/sjlee1125/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sjlee1125/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-03T02:09:42Z",
    "updated_at": "2022-11-03T02:09:42Z",
    "author_association": "NONE",
    "body": "same issue..\r\nIn my case Consensus client: prysm 3.1.2",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1301566061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1319983826",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5915#issuecomment-1319983826",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915",
    "id": 1319983826,
    "node_id": "IC_kwDOC0FsAM5OrVrS",
    "user": {
      "login": "PolarSyncZ",
      "id": 112412239,
      "node_id": "U_kgDOBrNGTw",
      "avatar_url": "https://avatars.githubusercontent.com/u/112412239?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/PolarSyncZ",
      "html_url": "https://github.com/PolarSyncZ",
      "followers_url": "https://api.github.com/users/PolarSyncZ/followers",
      "following_url": "https://api.github.com/users/PolarSyncZ/following{/other_user}",
      "gists_url": "https://api.github.com/users/PolarSyncZ/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/PolarSyncZ/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/PolarSyncZ/subscriptions",
      "organizations_url": "https://api.github.com/users/PolarSyncZ/orgs",
      "repos_url": "https://api.github.com/users/PolarSyncZ/repos",
      "events_url": "https://api.github.com/users/PolarSyncZ/events{/privacy}",
      "received_events_url": "https://api.github.com/users/PolarSyncZ/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-18T13:17:44Z",
    "updated_at": "2022-11-18T13:50:15Z",
    "author_association": "NONE",
    "body": "Any update on this issue? I have the same problem on 2.29 version using nimbus for CL...it did not happen on previous versions. Once an hour the node slows down when processing snapshots and pruning, then displays the TxLookup pruning, empty block body error. It seems to be slowing down the node significantly and not allowing me to stay synced to the head of the chain on BSC mainnet. Please advise. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1319983826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1321025268",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5915#issuecomment-1321025268",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5915",
    "id": 1321025268,
    "node_id": "IC_kwDOC0FsAM5OvT70",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-20T03:36:59Z",
    "updated_at": "2022-11-20T03:36:59Z",
    "author_association": "COLLABORATOR",
    "body": "@PolarSyncZ \r\n\"TxLookup pruning\" on tip of chain: adding pruning limit in this case by https://github.com/ledgerwatch/erigon/pull/6086",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1321025268/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7367",
  "id": 1679806929,
  "node_id": "I_kwDOC0FsAM5kH9HR",
  "number": 7367,
  "title": "[BUG] Erigon startup EROR: mdbx_env_open: MDBX_TOO_LARGE",
  "user": {
    "login": "cppfuns",
    "id": 7980920,
    "node_id": "MDQ6VXNlcjc5ODA5MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7980920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cppfuns",
    "html_url": "https://github.com/cppfuns",
    "followers_url": "https://api.github.com/users/cppfuns/followers",
    "following_url": "https://api.github.com/users/cppfuns/following{/other_user}",
    "gists_url": "https://api.github.com/users/cppfuns/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cppfuns/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cppfuns/subscriptions",
    "organizations_url": "https://api.github.com/users/cppfuns/orgs",
    "repos_url": "https://api.github.com/users/cppfuns/repos",
    "events_url": "https://api.github.com/users/cppfuns/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cppfuns/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2023-04-23T01:17:20Z",
  "updated_at": "2024-01-02T13:32:55Z",
  "closed_at": "2023-05-23T06:20:13Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\n#### Erigon version: `./erigon --version`\r\nerigon version 2.43.0-dev-ef71909c\r\n\r\n#### OS & Version: Windows/Linux/OSX\r\nubuntu:20.04\r\n\r\n#### Commit hash: \r\nef71909c34ad7d9ff8841c7fcd121f09165bd985\r\n\r\n#### Erigon Command (with flags/config):\r\n`./erigon --datadir=./data --private.api.addr=0.0.0.0:9090 --http.addr=0.0.0.0 --http.vhosts=* --http.corsdomain=* --http.api=eth,erigon,web3,net,debug,trace,txpool --ws --log.dir.path=./logs/`\r\n\r\n#### Specific implementation steps\r\n```\r\n ./erigon init --datadir ./data ./config/genesis.json\r\n./erigon --datadir=./data --private.api.addr=0.0.0.0:9090 --http.addr=0.0.0.0 --http.vhosts=* --http.corsdomain=* --http.api=eth,erigon,web3,net,debug,trace,txpool --ws --log.dir.path=./logs/\r\n```\r\n\r\n#### Problem Description\r\nIn the test, the current dev branch 2.43.0-dev-ef71909c, after initializing with genesis.json, an error is reported at startup\r\n`./erigon --datadir=./data --private.api.addr=0.0.0.0:9090 --http.addr=0.0.0.0 --http.vhosts=* --http.corsdomain=* --http.api=eth,erigon,web3,net,debug,trace,txpool --ws --log.dir.path=./logs/`\r\n\r\n```\r\nINFO[04-23|08:59:32.892] logging to file system                   log dir=./logs/ file prefix=erigon log level=info json=false\r\nINFO[04-23|08:59:32.907] Build info                               git_branch=devel git_tag=v2.31.0-rc.4-919-gef71909c3 git_commit=ef71909c34ad7d9ff8841c7fcd121f09165bd985\r\nINFO[04-23|08:59:32.907] Starting Erigon on Ethereum mainnet...\r\nINFO[04-23|08:59:32.913] Maximum peer count                       ETH=100 total=100\r\nINFO[04-23|08:59:32.913] starting HTTP APIs                       APIs=eth,erigon,web3,net,debug,trace,txpool\r\nINFO[04-23|08:59:32.913] torrent verbosity                        level=WRN\r\nINFO[04-23|08:59:35.030] Set global gas cap                       cap=50000000\r\nINFO[04-23|08:59:35.120] [Downloader] Runnning with               ipv6-enabled=true ipv4-enabled=true download.rate=16mb\r\n upload.rate=4mb\r\nINFO[04-23|08:59:35.122] Opening Database                         label=chaindata path=/mnt/d/github/Opside/other/test-genesis/data/chaindata\r\nmdbx_setup_dxb:15897 could not apply preconfigured db-geometry: err -30417\r\nEROR[04-23|08:59:35.247] Erigon startup                           err=\"mdbx_env_open: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM, label: chaindata, trace: [kv_mdbx.go:262 node.go:323 node.go:326 backend.go:203 node.go:106 main.go:59 command.go:274 app.go:332 app.go:309 main.go:36 proc.go:250 asm_amd64.s:1594]\"\r\nmdbx_env_open: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM, label: chaindata, trace: [kv_mdbx.go:262 node.go:323 node.go:326 backend.go:203 node.go:106 main.go:59 command.go:274 app.go:332 app.go:309 main.go:36 proc.go:250 asm_amd64.s:1594]\r\n```\r\n\r\n#### Probability of recurrence\r\n100%\r\n\r\n#### Version comparison test\r\nIn version: 2.42.0-stable, this problem does not occur\r\n\r\n#### Why the test for this question\r\nWe are the technical team from [opside.network](https://opside.network/) (A Decentralized ZK-RaaS Network.), we are exploring related technologies\r\n",
  "closed_by": {
    "login": "AskAlexSharov",
    "id": 46885206,
    "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
    "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AskAlexSharov",
    "html_url": "https://github.com/AskAlexSharov",
    "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
    "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
    "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
    "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
    "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
    "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1518939932",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1518939932",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1518939932,
    "node_id": "IC_kwDOC0FsAM5aiS8c",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-23T04:25:00Z",
    "updated_at": "2023-04-23T04:39:15Z",
    "author_association": "COLLABORATOR",
    "body": "hi. \r\n1. try latest `devel` branch\r\n2. if 1. will not help, share machine spec plz: os/fs/ram/etc..\r\n3. temporary workaround: set explicit --db.size.limit",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1518939932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1523066077",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1523066077",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1523066077,
    "node_id": "IC_kwDOC0FsAM5ayCTd",
    "user": {
      "login": "paul-serdiuk",
      "id": 85490231,
      "node_id": "MDQ6VXNlcjg1NDkwMjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/85490231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-serdiuk",
      "html_url": "https://github.com/paul-serdiuk",
      "followers_url": "https://api.github.com/users/paul-serdiuk/followers",
      "following_url": "https://api.github.com/users/paul-serdiuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-serdiuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-serdiuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-serdiuk/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-serdiuk/orgs",
      "repos_url": "https://api.github.com/users/paul-serdiuk/repos",
      "events_url": "https://api.github.com/users/paul-serdiuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-serdiuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-26T09:13:15Z",
    "updated_at": "2023-04-26T09:20:51Z",
    "author_association": "NONE",
    "body": "Can confirm that I encountered the same problem on 2.43 even after setting db.size.limit, the machine has 32 cores and 128 GB of RAM, I'm running Erigon in a Docker container. \r\n\r\nedit: the ulimit inside the docker container is as follows:\r\n\r\n```\r\n/ $ ulimit -a\r\ncore file size (blocks)         (-c) unlimited\r\ndata seg size (kb)              (-d) unlimited\r\nscheduling priority             (-e) 0\r\nfile size (blocks)              (-f) unlimited\r\npending signals                 (-i) 514281\r\nmax locked memory (kb)          (-l) 64\r\nmax memory size (kb)            (-m) unlimited\r\nopen files                      (-n) 1048576\r\nPOSIX message queues (bytes)    (-q) 819200\r\nreal-time priority              (-r) 0\r\nstack size (kb)                 (-s) 8192\r\ncpu time (seconds)              (-t) unlimited\r\nmax user processes              (-u) unlimited\r\nvirtual memory (kb)             (-v) unlimited\r\nfile locks                      (-x) unlimited\r\n```\r\n\r\nCould one of these values be the problem?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1523066077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1524620077",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1524620077",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1524620077,
    "node_id": "IC_kwDOC0FsAM5a39st",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-04-27T03:40:18Z",
    "updated_at": "2023-04-27T03:40:56Z",
    "author_association": "COLLABORATOR",
    "body": "what is --db.pagesize ? \r\nwhat is size of db now? \r\nit's not about \"ram\", it's about \"virtual memory\" ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1524620077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1533886201",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1533886201",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1533886201,
    "node_id": "IC_kwDOC0FsAM5bbT75",
    "user": {
      "login": "paul-serdiuk",
      "id": 85490231,
      "node_id": "MDQ6VXNlcjg1NDkwMjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/85490231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-serdiuk",
      "html_url": "https://github.com/paul-serdiuk",
      "followers_url": "https://api.github.com/users/paul-serdiuk/followers",
      "following_url": "https://api.github.com/users/paul-serdiuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-serdiuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-serdiuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-serdiuk/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-serdiuk/orgs",
      "repos_url": "https://api.github.com/users/paul-serdiuk/repos",
      "events_url": "https://api.github.com/users/paul-serdiuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-serdiuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-03T23:42:42Z",
    "updated_at": "2023-05-03T23:42:42Z",
    "author_association": "NONE",
    "body": "--db.pagesize=16k\r\nDB size is 7.6T",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1533886201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1534011351",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1534011351",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1534011351,
    "node_id": "IC_kwDOC0FsAM5bbyfX",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-04T02:52:34Z",
    "updated_at": "2023-05-04T02:52:34Z",
    "author_association": "COLLABORATOR",
    "body": "make db-tools\r\n./build/bin/mdbx_stat -ef <datadir>/chaindata",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1534011351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1541361836",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1541361836",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1541361836,
    "node_id": "IC_kwDOC0FsAM5b31Cs",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-10T05:10:42Z",
    "updated_at": "2023-05-10T05:10:42Z",
    "author_association": "COLLABORATOR",
    "body": "seems i fixed it by https://github.com/ledgerwatch/erigon/pull/7482",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1541361836/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550762301",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1550762301",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1550762301,
    "node_id": "IC_kwDOC0FsAM5cbsE9",
    "user": {
      "login": "paul-serdiuk",
      "id": 85490231,
      "node_id": "MDQ6VXNlcjg1NDkwMjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/85490231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-serdiuk",
      "html_url": "https://github.com/paul-serdiuk",
      "followers_url": "https://api.github.com/users/paul-serdiuk/followers",
      "following_url": "https://api.github.com/users/paul-serdiuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-serdiuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-serdiuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-serdiuk/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-serdiuk/orgs",
      "repos_url": "https://api.github.com/users/paul-serdiuk/repos",
      "events_url": "https://api.github.com/users/paul-serdiuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-serdiuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T05:28:46Z",
    "updated_at": "2023-05-17T05:28:46Z",
    "author_association": "NONE",
    "body": "Still getting this on devel:\r\n```\r\n[EROR] [05-17|08:27:47.480] Erigon startup                           err=\"mdbx_env_open: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM, label: chaindata, trace: [kv_mdbx.go:262 node.go:325 node.go:328 backend.go:207 node.go:107 main.go:66 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:37 proc.go:250 asm_amd64.s:1598]\"\r\nmdbx_env_open: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM, label: chaindata, trace: [kv_mdbx.go:262 node.go:325 node.go:328 backend.go:207 node.go:107 main.go:66 make_app.go:42 command.go:274 app.go:332 app.go:309 main.go:37 proc.go:250 asm_amd64.s:1598]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550762301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550764359",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1550764359",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1550764359,
    "node_id": "IC_kwDOC0FsAM5cbslH",
    "user": {
      "login": "paul-serdiuk",
      "id": 85490231,
      "node_id": "MDQ6VXNlcjg1NDkwMjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/85490231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-serdiuk",
      "html_url": "https://github.com/paul-serdiuk",
      "followers_url": "https://api.github.com/users/paul-serdiuk/followers",
      "following_url": "https://api.github.com/users/paul-serdiuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-serdiuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-serdiuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-serdiuk/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-serdiuk/orgs",
      "repos_url": "https://api.github.com/users/paul-serdiuk/repos",
      "events_url": "https://api.github.com/users/paul-serdiuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-serdiuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T05:31:52Z",
    "updated_at": "2023-05-17T05:45:58Z",
    "author_association": "NONE",
    "body": "Output of stat\r\n```\r\nmdbx_stat v0.12.0-71-g1cac6536 (2022-07-28T09:57:31+07:00, T-9a6d7e5b917e5fbd14dc51835fa749d092aa1d72)\r\nRunning for ../../data/erigon-data/chaindata/...\r\nEnvironment Info\r\n  Pagesize: 4096\r\n  Dynamic datafile: 49152..8796093022208 bytes (+2147483648/-4294967296), 12..2147483648 pages (+524288/-1048576)\r\n  Current mapsize: 8796093022208 bytes, 2147483648 pages\r\n  Current datafile: 8441758220288 bytes, 2060976128 pages\r\n  Last transaction ID: 22591502\r\n  Latter reader transaction ID: 22591502 (0)\r\n  Max readers: 116\r\n  Number of reader slots uses: 1\r\nGarbage Collection\r\n  Pagesize: 4096\r\n  Tree depth: 2\r\n  Branch pages: 1\r\n  Leaf pages: 70\r\n  Overflow pages: 12494\r\n  Entries: 12501\r\nPage Usage\r\n  Total: 2147483648 100%\r\n  Backed: 2060976128 96.0%\r\n  Allocated: 2060859216 96.0%\r\n  Remained: 86624432 4.0%\r\n  Used: 2048139679 95.4%\r\n  GC: 12719537 0.6%\r\n  Retained: 7 0.0%\r\n  Reclaimable: 12719530 0.6%\r\n  Available: 99343962 4.6%\r\nStatus of Main DB\r\n  Pagesize: 4096\r\n  Tree depth: 2\r\n  Branch pages: 1\r\n  Leaf pages: 3\r\n  Overflow pages: 0\r\n  Entries: 107\r\n  ```\r\n\r\nI'm not sure why it shows a pagesize of 4096 considering I am running Erigon v2.42.0 fine with --db.pagesize=16k with no errors.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550764359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550885065",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1550885065",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1550885065,
    "node_id": "IC_kwDOC0FsAM5ccKDJ",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T07:23:21Z",
    "updated_at": "2023-05-17T07:23:21Z",
    "author_association": "COLLABORATOR",
    "body": "@paul-serdiuk \r\n8Tb is max what you can get on 4Kb pageSize. \r\n\r\n`--db.pagesize=16k` can set this flag only at startup\r\n\r\nTo change db pagesize:\r\nyou will need manually create new db - by starting erigon with new flags in new data dir. \r\nthen move all data to new db, by \"integration mdbx_to_mdbx\"\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550885065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550963659",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1550963659",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1550963659,
    "node_id": "IC_kwDOC0FsAM5ccdPL",
    "user": {
      "login": "paul-serdiuk",
      "id": 85490231,
      "node_id": "MDQ6VXNlcjg1NDkwMjMx",
      "avatar_url": "https://avatars.githubusercontent.com/u/85490231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paul-serdiuk",
      "html_url": "https://github.com/paul-serdiuk",
      "followers_url": "https://api.github.com/users/paul-serdiuk/followers",
      "following_url": "https://api.github.com/users/paul-serdiuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/paul-serdiuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paul-serdiuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paul-serdiuk/subscriptions",
      "organizations_url": "https://api.github.com/users/paul-serdiuk/orgs",
      "repos_url": "https://api.github.com/users/paul-serdiuk/repos",
      "events_url": "https://api.github.com/users/paul-serdiuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paul-serdiuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-17T08:21:10Z",
    "updated_at": "2023-05-17T08:32:11Z",
    "author_association": "NONE",
    "body": "Doesn't --db.pagesize show an error when trying to open a database that was created with a different pagesize?\r\n\r\nAlso, will Erigon show an error if the limit is reached? I hope the current DB is not borked by that.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1550963659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1557125069",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1557125069",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1557125069,
    "node_id": "IC_kwDOC0FsAM5cz9fN",
    "user": {
      "login": "artjoma",
      "id": 15686738,
      "node_id": "MDQ6VXNlcjE1Njg2NzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/15686738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/artjoma",
      "html_url": "https://github.com/artjoma",
      "followers_url": "https://api.github.com/users/artjoma/followers",
      "following_url": "https://api.github.com/users/artjoma/following{/other_user}",
      "gists_url": "https://api.github.com/users/artjoma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/artjoma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/artjoma/subscriptions",
      "organizations_url": "https://api.github.com/users/artjoma/orgs",
      "repos_url": "https://api.github.com/users/artjoma/repos",
      "events_url": "https://api.github.com/users/artjoma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/artjoma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-22T12:21:11Z",
    "updated_at": "2023-05-22T12:21:11Z",
    "author_association": "NONE",
    "body": "> seems i fixed it by #7482\r\n\r\nThis fix works fine! Tested on BSC Chapel.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1557125069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1873874810",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1873874810",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1873874810,
    "node_id": "IC_kwDOC0FsAM5vsQ96",
    "user": {
      "login": "WhymustIhaveaname",
      "id": 38423345,
      "node_id": "MDQ6VXNlcjM4NDIzMzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/38423345?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WhymustIhaveaname",
      "html_url": "https://github.com/WhymustIhaveaname",
      "followers_url": "https://api.github.com/users/WhymustIhaveaname/followers",
      "following_url": "https://api.github.com/users/WhymustIhaveaname/following{/other_user}",
      "gists_url": "https://api.github.com/users/WhymustIhaveaname/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WhymustIhaveaname/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WhymustIhaveaname/subscriptions",
      "organizations_url": "https://api.github.com/users/WhymustIhaveaname/orgs",
      "repos_url": "https://api.github.com/users/WhymustIhaveaname/repos",
      "events_url": "https://api.github.com/users/WhymustIhaveaname/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WhymustIhaveaname/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-02T10:53:24Z",
    "updated_at": "2024-01-02T10:53:24Z",
    "author_association": "NONE",
    "body": "I still met this issue in version `2.56.0`. My system info is as follows\r\n```\r\n$ ./erigon --version\r\nerigon version 2.56.0-dev-415b17ca\r\n$ ulimit -a\r\ncore file size          (blocks, -c) 0\r\ndata seg size           (kbytes, -d) unlimited\r\nscheduling priority             (-e) 0\r\nfile size               (blocks, -f) unlimited\r\npending signals                 (-i) 320986\r\nmax locked memory       (kbytes, -l) 65536\r\nmax memory size         (kbytes, -m) unlimited\r\nopen files                      (-n) 1024\r\npipe size            (512 bytes, -p) 8\r\nPOSIX message queues     (bytes, -q) 819200\r\nreal-time priority              (-r) 0\r\nstack size              (kbytes, -s) 8192\r\ncpu time               (seconds, -t) unlimited\r\nmax user processes              (-u) 320986\r\nvirtual memory          (kbytes, -v) unlimited\r\nfile locks                      (-x) unlimited\r\n$ ./mdbx_stat -ef /Data8T/ethmainnet/chaindata/\r\nmdbx_stat v0.12.0-71-g1cac6536 (2022-07-28T09:57:31+07:00, T-9a6d7e5b917e5fbd14dc51835fa749d092aa1d72)\r\nRunning for /Data8T/ethmainnet/chaindata/...\r\nEnvironment Info\r\n  Pagesize: 4096\r\n  Dynamic datafile: 24576..3298534883328 bytes (+2147483648/-4294967296), 6..805306368 pages (+524288/-1048576)\r\n  Current mapsize: 3298534883328 bytes, 805306368 pages \r\n  Current datafile: 2087354105856 bytes, 509607936 pages\r\n  Last transaction ID: 8379750\r\n  Latter reader transaction ID: 8379750 (0)\r\n  Max readers: 116\r\n  Number of reader slots uses: 1\r\nGarbage Collection\r\n  Pagesize: 4096\r\n  Tree depth: 2\r\n  Branch pages: 1\r\n  Leaf pages: 54\r\n  Overflow pages: 9754\r\n  Entries: 9755\r\nPage Usage\r\n  Total: 805306368 100%\r\n  Backed: 509607936 63.3%\r\n  Allocated: 509397685 63.3%\r\n  Remained: 295908683 36.7%\r\n  Used: 499469399 62.0%\r\n  GC: 9928286 1.2%\r\n  Retained: 956 0.0%\r\n  Reclaimable: 9927330 1.2%\r\n  Available: 305836013 38.0%\r\nStatus of Main DB\r\n  Pagesize: 4096\r\n  Tree depth: 2\r\n  Branch pages: 1\r\n  Leaf pages: 3\r\n  Overflow pages: 0\r\n  Entries: 106\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1873874810/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1873993961",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1873993961",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1873993961,
    "node_id": "IC_kwDOC0FsAM5vsuDp",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-02T12:56:29Z",
    "updated_at": "2024-01-02T12:56:29Z",
    "author_association": "COLLABORATOR",
    "body": "Your db is “ Pagesize: 4096”",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1873993961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1874026814",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7367#issuecomment-1874026814",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7367",
    "id": 1874026814,
    "node_id": "IC_kwDOC0FsAM5vs2E-",
    "user": {
      "login": "WhymustIhaveaname",
      "id": 38423345,
      "node_id": "MDQ6VXNlcjM4NDIzMzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/38423345?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/WhymustIhaveaname",
      "html_url": "https://github.com/WhymustIhaveaname",
      "followers_url": "https://api.github.com/users/WhymustIhaveaname/followers",
      "following_url": "https://api.github.com/users/WhymustIhaveaname/following{/other_user}",
      "gists_url": "https://api.github.com/users/WhymustIhaveaname/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/WhymustIhaveaname/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/WhymustIhaveaname/subscriptions",
      "organizations_url": "https://api.github.com/users/WhymustIhaveaname/orgs",
      "repos_url": "https://api.github.com/users/WhymustIhaveaname/repos",
      "events_url": "https://api.github.com/users/WhymustIhaveaname/events{/privacy}",
      "received_events_url": "https://api.github.com/users/WhymustIhaveaname/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2024-01-02T13:28:42Z",
    "updated_at": "2024-01-02T13:32:55Z",
    "author_association": "NONE",
    "body": "> Your db is “ Pagesize: 4096”\r\n\r\nI know how large my Pagesize is. I was always using the default setting until I upgraded to the latest version. I also tried set `db.pagesize : '4096'` or `db.pagesize : '4KB'`. Both do not help. Exactly the same error as cppfuns happened on version 2.56.0.\r\n```\r\nErigon startup err=\"mdbx_env_set_geometry: MDBX_TOO_LARGE: Database is too large for current system, e.g. could NOT be mapped into RAM\"\r\n```\r\n\r\nMy server has 80GB of RAM and 4x2T RAID SSD.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1874026814/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/3702",
  "id": 1169665200,
  "node_id": "I_kwDOC0FsAM5Ft6yw",
  "number": 3702,
  "title": "Panic on Ethereum Mainnet",
  "user": {
    "login": "Brando753",
    "id": 2963981,
    "node_id": "MDQ6VXNlcjI5NjM5ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2963981?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Brando753",
    "html_url": "https://github.com/Brando753",
    "followers_url": "https://api.github.com/users/Brando753/followers",
    "following_url": "https://api.github.com/users/Brando753/following{/other_user}",
    "gists_url": "https://api.github.com/users/Brando753/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Brando753/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Brando753/subscriptions",
    "organizations_url": "https://api.github.com/users/Brando753/orgs",
    "repos_url": "https://api.github.com/users/Brando753/repos",
    "events_url": "https://api.github.com/users/Brando753/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Brando753/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2022-03-15T13:19:18Z",
  "updated_at": "2022-03-18T06:35:54Z",
  "closed_at": "2022-03-17T11:32:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\n12th Gen I7 CPU\r\n64 GB DDR4 Ram\r\n16 TB NVMe SSD on ZFS RaidZ1 pool with LZ4 compression\r\n\r\nErigon version: `./erigon --version`: erigon version 2022.99.99-dev\r\n\r\nOS & Version:  Debian 11.2 x86-64\r\n\r\nCommit hash : identified on 47df98a4992690ca5e9af874f14e3f7088551a91 upgraded to b6f707d8119667f13a069082b432c800def6da3f and after database migration the issue resumed.\r\n\r\n#### Expected behaviour\r\n\r\nEthereum mainnet to sync and then stay synced\r\n\r\n#### Actual behaviour\r\n\r\nEthereum mainnet syncs, then after a few days starts to panic everytime Erigon runs\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\nStarting on the hash identified perform a full sync and let the node run for days uninterrupted, CLI to start the sync is:\r\n```\r\nerigon --datadir /zfs_pool/ethereum --private.api.addr=localhost:9091 -port 30303 --chain mainnet --watch-the-burn\r\n```\r\n\r\n#### Backtrace\r\n\r\nAttached as file, too large to post in body of bug report.\r\n[Erigon-Ethereum-Backtrace.txt](https://github.com/ledgerwatch/erigon/files/8253600/Erigon-Ethereum-Backtrace.txt)\r\n\r\n\r\nI can make available the datadir of this node to any developers on the Erigon team, reach out to me on Discord and I will provide you a download link (be aware compressed it will still be 500~800 GB).",
  "closed_by": {
    "login": "Brando753",
    "id": 2963981,
    "node_id": "MDQ6VXNlcjI5NjM5ODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2963981?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Brando753",
    "html_url": "https://github.com/Brando753",
    "followers_url": "https://api.github.com/users/Brando753/followers",
    "following_url": "https://api.github.com/users/Brando753/following{/other_user}",
    "gists_url": "https://api.github.com/users/Brando753/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Brando753/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Brando753/subscriptions",
    "organizations_url": "https://api.github.com/users/Brando753/orgs",
    "repos_url": "https://api.github.com/users/Brando753/repos",
    "events_url": "https://api.github.com/users/Brando753/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Brando753/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1068676552",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1068676552",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1068676552,
    "node_id": "IC_kwDOC0FsAM4_srXI",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-16T02:50:20Z",
    "updated_at": "2022-03-16T02:50:20Z",
    "author_association": "COLLABORATOR",
    "body": "1. To exclude hardware problem: use tools like https://www.memtest86.com to test RAM and tools like https://www.smartmontools.org to test Disk\r\n2. If you can - please create coredump by setting GOTRACEBACK=crash (see also https://stackoverflow.com/questions/44430117/go-gotraceback-crash-with-no-core-file ) - and share coredump to us somehow. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1068676552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1070805083",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1070805083",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1070805083,
    "node_id": "IC_kwDOC0FsAM4_0zBb",
    "user": {
      "login": "Brando753",
      "id": 2963981,
      "node_id": "MDQ6VXNlcjI5NjM5ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2963981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Brando753",
      "html_url": "https://github.com/Brando753",
      "followers_url": "https://api.github.com/users/Brando753/followers",
      "following_url": "https://api.github.com/users/Brando753/following{/other_user}",
      "gists_url": "https://api.github.com/users/Brando753/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Brando753/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Brando753/subscriptions",
      "organizations_url": "https://api.github.com/users/Brando753/orgs",
      "repos_url": "https://api.github.com/users/Brando753/repos",
      "events_url": "https://api.github.com/users/Brando753/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Brando753/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-17T11:16:33Z",
    "updated_at": "2022-03-17T11:16:33Z",
    "author_association": "NONE",
    "body": "Hey Alex, I ran memtest86 about three or four times when I built the computer, it was custom built just for being a blockchain archive node, but I can run it through one more cycle to verify ram issues have not developed. I would be amazed if the issue were with the SSDs since ZFS has been configured in RAIDz1, which has data redundancy; if any drive were failing, it would still be able to fetch the correct data, and it even verifies data after writing. That being said, I will check the state of the drives and report back. Once I finish the me mtest, I will have it run with the core-dump setting.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1070805083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1070817701",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1070817701",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1070817701,
    "node_id": "IC_kwDOC0FsAM4_02Gl",
    "user": {
      "login": "Brando753",
      "id": 2963981,
      "node_id": "MDQ6VXNlcjI5NjM5ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2963981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Brando753",
      "html_url": "https://github.com/Brando753",
      "followers_url": "https://api.github.com/users/Brando753/followers",
      "following_url": "https://api.github.com/users/Brando753/following{/other_user}",
      "gists_url": "https://api.github.com/users/Brando753/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Brando753/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Brando753/subscriptions",
      "organizations_url": "https://api.github.com/users/Brando753/orgs",
      "repos_url": "https://api.github.com/users/Brando753/repos",
      "events_url": "https://api.github.com/users/Brando753/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Brando753/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-17T11:32:18Z",
    "updated_at": "2022-03-17T11:32:18Z",
    "author_association": "NONE",
    "body": "So much for that, something very well may be wrong with the drives, looks like after running a ZFS scrub some checksums could not be recovered so there is data corruption. Will investigate whats going on if it was bad RAM or bad drives.\r\n\r\n```\r\n➜  ~ sudo zpool status -v\r\n  pool: zfs_pool\r\n state: ONLINE\r\nstatus: One or more devices has experienced an error resulting in data\r\n\tcorruption.  Applications may be affected.\r\naction: Restore the file in question if possible.  Otherwise restore the\r\n\tentire pool from backup.\r\n   see: https://openzfs.github.io/openzfs-docs/msg/ZFS-8000-8A\r\n  scan: scrub repaired 0B in 00:20:04 with 1 errors on Sun Mar 13 00:44:05 2022\r\nconfig:\r\n\r\n\tNAME            STATE     READ WRITE CKSUM\r\n\tzfs_pool        ONLINE       0     0     0\r\n\t  raidz1-0      ONLINE       0     0     0\r\n\t    zfs_pool_1  ONLINE       0     0 16.8K\r\n\t    zfs_pool_2  ONLINE       0     0 16.8K\r\n\t    zfs_pool_3  ONLINE       0     0 16.8K\r\n\t    zfs_pool_4  ONLINE       0     0 16.8K\r\n\t    zfs_pool_5  ONLINE       0     0 16.8K\r\n\t    zfs_pool_6  ONLINE       0     0 16.8K\r\n\t    zfs_pool_7  ONLINE       0     0 16.8K\r\n\t    zfs_pool_8  ONLINE       0     0 16.8K\r\n\r\nerrors: Permanent errors have been detected in the following files:\r\n\r\n        /zfs_pool/ethereum/chaindata/mdbx.dat\r\n```\r\nFor now I am going to close this bug as its clear the cause may be hardware related. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1070817701/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1070821242",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1070821242",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1070821242,
    "node_id": "IC_kwDOC0FsAM4_0296",
    "user": {
      "login": "erthink",
      "id": 6241554,
      "node_id": "MDQ6VXNlcjYyNDE1NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6241554?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erthink",
      "html_url": "https://github.com/erthink",
      "followers_url": "https://api.github.com/users/erthink/followers",
      "following_url": "https://api.github.com/users/erthink/following{/other_user}",
      "gists_url": "https://api.github.com/users/erthink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erthink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erthink/subscriptions",
      "organizations_url": "https://api.github.com/users/erthink/orgs",
      "repos_url": "https://api.github.com/users/erthink/repos",
      "events_url": "https://api.github.com/users/erthink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erthink/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-17T11:37:01Z",
    "updated_at": "2022-03-17T11:37:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "@AskAlexSharov, is this the fourth (or the fifth?) production case of a database damage due to hardware problems?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1070821242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1071992908",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1071992908",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1071992908,
    "node_id": "IC_kwDOC0FsAM4_5VBM",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T03:28:24Z",
    "updated_at": "2022-03-18T03:28:24Z",
    "author_association": "COLLABORATOR",
    "body": "@erthink do you mean over all time? or over last week/month?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1071992908/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1072062759",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1072062759",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1072062759,
    "node_id": "IC_kwDOC0FsAM4_5mEn",
    "user": {
      "login": "erthink",
      "id": 6241554,
      "node_id": "MDQ6VXNlcjYyNDE1NTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6241554?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erthink",
      "html_url": "https://github.com/erthink",
      "followers_url": "https://api.github.com/users/erthink/followers",
      "following_url": "https://api.github.com/users/erthink/following{/other_user}",
      "gists_url": "https://api.github.com/users/erthink/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erthink/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erthink/subscriptions",
      "organizations_url": "https://api.github.com/users/erthink/orgs",
      "repos_url": "https://api.github.com/users/erthink/repos",
      "events_url": "https://api.github.com/users/erthink/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erthink/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T06:09:40Z",
    "updated_at": "2022-03-18T06:09:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @erthink do you mean over all time? or over last week/month?\r\n\r\nOverall.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1072062759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1072074245",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/3702#issuecomment-1072074245",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/3702",
    "id": 1072074245,
    "node_id": "IC_kwDOC0FsAM4_5o4F",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-18T06:35:54Z",
    "updated_at": "2022-03-18T06:35:54Z",
    "author_association": "COLLABORATOR",
    "body": "@erthink \r\nOverall: 6-7. Couple was in Discord, not on github.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1072074245/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  }
]

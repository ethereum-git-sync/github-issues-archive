{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5547",
  "id": 1387621794,
  "node_id": "I_kwDOC0FsAM5StW2i",
  "number": 5547,
  "title": "eth_getLogs filters other than fromBlock/toBlock are not working at all",
  "user": {
    "login": "rcastellaj",
    "id": 110826146,
    "node_id": "U_kgDOBpsSog",
    "avatar_url": "https://avatars.githubusercontent.com/u/110826146?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rcastellaj",
    "html_url": "https://github.com/rcastellaj",
    "followers_url": "https://api.github.com/users/rcastellaj/followers",
    "following_url": "https://api.github.com/users/rcastellaj/following{/other_user}",
    "gists_url": "https://api.github.com/users/rcastellaj/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rcastellaj/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rcastellaj/subscriptions",
    "organizations_url": "https://api.github.com/users/rcastellaj/orgs",
    "repos_url": "https://api.github.com/users/rcastellaj/repos",
    "events_url": "https://api.github.com/users/rcastellaj/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rcastellaj/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4406003490,
      "node_id": "LA_kwDOC0FsAM8AAAABBp5HIg",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/gateway",
      "name": "gateway",
      "color": "62DB33",
      "default": false,
      "description": "Issue assigned to gateway team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "hexoscott",
    "id": 70711990,
    "node_id": "MDQ6VXNlcjcwNzExOTkw",
    "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hexoscott",
    "html_url": "https://github.com/hexoscott",
    "followers_url": "https://api.github.com/users/hexoscott/followers",
    "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
    "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
    "organizations_url": "https://api.github.com/users/hexoscott/orgs",
    "repos_url": "https://api.github.com/users/hexoscott/repos",
    "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hexoscott/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-09-27T11:47:34Z",
  "updated_at": "2022-10-17T11:25:36Z",
  "closed_at": "2022-10-17T11:25:36Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: erigon version 2022.09.03\r\n\r\nOS & Version: Linux Alpine 3.15.6\r\n\r\nCommit hash : \r\n\r\nv2022.09.03 tag\r\n\r\n#### Expected behaviour\r\n\r\nRunning eth_getLogs with a topic and/or address filter effectively returns log entries that match the said filter. The range of blocks has events that match the filter criteria, and actually return correctly on a geth node.\r\n\r\n#### Actual behaviour\r\n\r\nRunning eth_getLogs over curl with either the use of 'topics' or 'address' for filtering results in an empty array result. Any combination of address or topics is resulting in an empty array, single topic or multi topic filtering the same.\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n```\r\ncurl --location --request POST --header 'Content-Type: application/json' --data-raw '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getLogs\",\"params\":[{\"fromBlock\":\"0x4C4B40\",\"toBlock\":\"0x4C4B41\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\"]}],\"id\":0}' bsc-node-erigon:8545\r\n```\r\n\r\nThe same above query works with Geth. Any combination of topics as [\"hash\"] or [][\"hash\"], or even the use of \"just the address filter\" fail completely.\r\n",
  "closed_by": {
    "login": "revitteth",
    "id": 693995,
    "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/revitteth",
    "html_url": "https://github.com/revitteth",
    "followers_url": "https://api.github.com/users/revitteth/followers",
    "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
    "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
    "organizations_url": "https://api.github.com/users/revitteth/orgs",
    "repos_url": "https://api.github.com/users/revitteth/repos",
    "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/revitteth/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1266657061",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5547#issuecomment-1266657061",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547",
    "id": 1266657061,
    "node_id": "IC_kwDOC0FsAM5Lf6cl",
    "user": {
      "login": "hexoscott",
      "id": 70711990,
      "node_id": "MDQ6VXNlcjcwNzExOTkw",
      "avatar_url": "https://avatars.githubusercontent.com/u/70711990?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hexoscott",
      "html_url": "https://github.com/hexoscott",
      "followers_url": "https://api.github.com/users/hexoscott/followers",
      "following_url": "https://api.github.com/users/hexoscott/following{/other_user}",
      "gists_url": "https://api.github.com/users/hexoscott/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hexoscott/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hexoscott/subscriptions",
      "organizations_url": "https://api.github.com/users/hexoscott/orgs",
      "repos_url": "https://api.github.com/users/hexoscott/repos",
      "events_url": "https://api.github.com/users/hexoscott/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hexoscott/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-04T09:24:23Z",
    "updated_at": "2022-10-04T09:24:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @rcastellaj, I recently put a PR up to help with an issue where multiple subscriptions that contained any address/topic combo would effectively stop sending anything at all to either subscription.  I'm not sure timing wise if this made it into devel/alpha before you reported the issue.  If possible could you try your subscriptions on a build from Devel or alpha v2022.09.02 (or greater) and let me know if this is still an issue?  Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1266657061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1280708377",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5547#issuecomment-1280708377",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5547",
    "id": 1280708377,
    "node_id": "IC_kwDOC0FsAM5MVg8Z",
    "user": {
      "login": "revitteth",
      "id": 693995,
      "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/revitteth",
      "html_url": "https://github.com/revitteth",
      "followers_url": "https://api.github.com/users/revitteth/followers",
      "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
      "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
      "organizations_url": "https://api.github.com/users/revitteth/orgs",
      "repos_url": "https://api.github.com/users/revitteth/repos",
      "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/revitteth/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-10-17T11:25:36Z",
    "updated_at": "2022-10-17T11:25:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "This issue was fixed in v2022.09.02+, will close and can be reopened if we're still seeing the problem.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1280708377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/5214",
  "id": 1354112852,
  "node_id": "I_kwDOC0FsAM5Qth9U",
  "number": 5214,
  "title": "Can't replace transaction",
  "user": {
    "login": "anastasiyaig",
    "id": 82375995,
    "node_id": "MDQ6VXNlcjgyMzc1OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anastasiyaig",
    "html_url": "https://github.com/anastasiyaig",
    "followers_url": "https://api.github.com/users/anastasiyaig/followers",
    "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
    "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
    "repos_url": "https://api.github.com/users/anastasiyaig/repos",
    "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4406003490,
      "node_id": "LA_kwDOC0FsAM8AAAABBp5HIg",
      "url": "https://api.github.com/repos/ledgerwatch/erigon/labels/gateway",
      "name": "gateway",
      "color": "62DB33",
      "default": false,
      "description": "Issue assigned to gateway team"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "revitteth",
    "id": 693995,
    "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/revitteth",
    "html_url": "https://github.com/revitteth",
    "followers_url": "https://api.github.com/users/revitteth/followers",
    "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
    "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
    "organizations_url": "https://api.github.com/users/revitteth/orgs",
    "repos_url": "https://api.github.com/users/revitteth/repos",
    "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/revitteth/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "revitteth",
      "id": 693995,
      "node_id": "MDQ6VXNlcjY5Mzk5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/693995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/revitteth",
      "html_url": "https://github.com/revitteth",
      "followers_url": "https://api.github.com/users/revitteth/followers",
      "following_url": "https://api.github.com/users/revitteth/following{/other_user}",
      "gists_url": "https://api.github.com/users/revitteth/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/revitteth/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/revitteth/subscriptions",
      "organizations_url": "https://api.github.com/users/revitteth/orgs",
      "repos_url": "https://api.github.com/users/revitteth/repos",
      "events_url": "https://api.github.com/users/revitteth/events{/privacy}",
      "received_events_url": "https://api.github.com/users/revitteth/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-08-29T11:10:45Z",
  "updated_at": "2022-09-08T08:00:28Z",
  "closed_at": "2022-09-08T08:00:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `erigon version 2022.08.3-alpha-defbddf8`\r\n\r\nOS & Version: `MacOS Monterey 12.5`\r\n\r\nCommit hash: defbddf8d64718c71ec24c408f31c7f28ecf3e9e \r\n\r\n#### Expected behaviour\r\n\r\nTransaction can be replaced when sending the same transaction with higher gas price\r\n\r\n#### Actual behaviour\r\n\r\n```\r\nresponse = {'error': {'code': -32000, 'message': 'INTERNAL_ERROR: could not replace existing tx'}, 'id': 7, 'jsonrpc': '2.0'}\r\n```\r\n\r\n#### Steps to reproduce the behaviour\r\n\r\n1. send a transaction and get it nonce\r\n2. send the same transaction with the same nonce and with higher `gasPrice`\r\n\r\n#### Backtrace\r\n\r\n````\r\nINFO[08-29|14:06:52.326] DB schemas compatible                    reader=6.0.0 database=6.0.0\r\nINFO[08-29|14:06:52.521] [Snapshots] Stat                         blocks=0k indices=0k alloc=17.1MB sys=31.8MB\r\nINFO[08-29|14:06:52.522] rpc filters: subscribing to Erigon events \r\nINFO[08-29|14:06:52.542] HTTP endpoint opened                     url=localhost:8545 ws=false ws.compression=false grpc=false\r\nINFO[08-29|14:06:52.552] [Snapshots] Stat                         blocks=0k indices=0k alloc=17.7MB sys=32.3MB\r\nINFO[08-29|14:06:52.552] [Snapshots] Stat                         blocks=0k indices=0k alloc=17.7MB sys=32.3MB\r\nINFO[08-29|14:06:52.552] interfaces compatible                    remote_db= client=6.0.0 server=6.0.0\r\nINFO[08-29|14:06:52.552] interfaces compatible                    remote_service=eth_backend client=3.1.0 server=3.1.0\r\nINFO[08-29|14:06:52.552] interfaces compatible                    remote_service=mining client=1.0.0 server=1.0.0\r\nINFO[08-29|14:06:52.553] interfaces compatible                    remote_service=tx_pool client=1.0.0 server=1.0.0\r\nINFO[08-29|14:07:40.588] Submitted transaction                    hash=0x4f177a48592448f307ed4c74a8aa9cda1aef476500f05122ebe38c81a0bd9ef7 from=0x67b1d87101671b127f5f8714789C7192f7ad340e nonce=0 recipient=0xa94f5374Fce5edBC8E2a8697C15331677e6EbF0B value=0x470de4df820000\r\nWARN[08-29|14:07:40.633] Served                                   conn=127.0.0.1:49643 method=eth_sendRawTransaction reqid=7 t=2.936208ms err=\"INTERNAL_ERROR: could not replace existing tx\"\r\n\r\n````\r\n",
  "closed_by": {
    "login": "anastasiyaig",
    "id": 82375995,
    "node_id": "MDQ6VXNlcjgyMzc1OTk1",
    "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anastasiyaig",
    "html_url": "https://github.com/anastasiyaig",
    "followers_url": "https://api.github.com/users/anastasiyaig/followers",
    "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
    "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
    "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
    "repos_url": "https://api.github.com/users/anastasiyaig/repos",
    "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1230139310",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5214#issuecomment-1230139310",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214",
    "id": 1230139310,
    "node_id": "IC_kwDOC0FsAM5JUm-u",
    "user": {
      "login": "anastasiyaig",
      "id": 82375995,
      "node_id": "MDQ6VXNlcjgyMzc1OTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anastasiyaig",
      "html_url": "https://github.com/anastasiyaig",
      "followers_url": "https://api.github.com/users/anastasiyaig/followers",
      "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
      "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
      "repos_url": "https://api.github.com/users/anastasiyaig/repos",
      "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-29T11:11:42Z",
    "updated_at": "2022-08-29T11:11:42Z",
    "author_association": "NONE",
    "body": "@revitteth can u please assign it to someone? ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1230139310/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1240365630",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/5214#issuecomment-1240365630",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/5214",
    "id": 1240365630,
    "node_id": "IC_kwDOC0FsAM5J7no-",
    "user": {
      "login": "anastasiyaig",
      "id": 82375995,
      "node_id": "MDQ6VXNlcjgyMzc1OTk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/82375995?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/anastasiyaig",
      "html_url": "https://github.com/anastasiyaig",
      "followers_url": "https://api.github.com/users/anastasiyaig/followers",
      "following_url": "https://api.github.com/users/anastasiyaig/following{/other_user}",
      "gists_url": "https://api.github.com/users/anastasiyaig/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/anastasiyaig/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/anastasiyaig/subscriptions",
      "organizations_url": "https://api.github.com/users/anastasiyaig/orgs",
      "repos_url": "https://api.github.com/users/anastasiyaig/repos",
      "events_url": "https://api.github.com/users/anastasiyaig/events{/privacy}",
      "received_events_url": "https://api.github.com/users/anastasiyaig/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-08T08:00:27Z",
    "updated_at": "2022-09-08T08:00:27Z",
    "author_association": "NONE",
    "body": "closing this one as `can't reproduce`",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1240365630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/8438",
  "id": 1937536860,
  "node_id": "I_kwDOC0FsAM5zfHdc",
  "number": 8438,
  "title": "Holesky and Sepolia Network prometheus metrics bodies stage not updating",
  "user": {
    "login": "Johnaverse",
    "id": 110527930,
    "node_id": "U_kgDOBpaFug",
    "avatar_url": "https://avatars.githubusercontent.com/u/110527930?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Johnaverse",
    "html_url": "https://github.com/Johnaverse",
    "followers_url": "https://api.github.com/users/Johnaverse/followers",
    "following_url": "https://api.github.com/users/Johnaverse/following{/other_user}",
    "gists_url": "https://api.github.com/users/Johnaverse/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Johnaverse/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Johnaverse/subscriptions",
    "organizations_url": "https://api.github.com/users/Johnaverse/orgs",
    "repos_url": "https://api.github.com/users/Johnaverse/repos",
    "events_url": "https://api.github.com/users/Johnaverse/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Johnaverse/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2023-10-11T11:23:44Z",
  "updated_at": "2023-11-08T02:15:45Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: v2.52.0\r\n\r\nOS & Version: Linux\r\n\r\nConcensus Layer: lighthouse\r\n\r\nConcensus Layer Command (with flags/config):\r\n\r\nChain/Network: Holesky and Sepolia (Also tested polygon and mumbai, no this issue)\r\n\r\n#### Expected behaviour\r\nBodies stage metrics value assumed to keep increasing when bodies downloaded from peers.\r\n\r\n#### Actual behaviour\r\nBodies stage metrics value remaining unchanged after start. This value will update once after restart.\r\n\r\n\r\n![image](https://github.com/ledgerwatch/erigon/assets/110527930/5a331b54-f9ee-47ef-9f26-abef771494ea)\r\n\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1757959346",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8438#issuecomment-1757959346",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438",
    "id": 1757959346,
    "node_id": "IC_kwDOC0FsAM5oyFSy",
    "user": {
      "login": "Johnaverse",
      "id": 110527930,
      "node_id": "U_kgDOBpaFug",
      "avatar_url": "https://avatars.githubusercontent.com/u/110527930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Johnaverse",
      "html_url": "https://github.com/Johnaverse",
      "followers_url": "https://api.github.com/users/Johnaverse/followers",
      "following_url": "https://api.github.com/users/Johnaverse/following{/other_user}",
      "gists_url": "https://api.github.com/users/Johnaverse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Johnaverse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Johnaverse/subscriptions",
      "organizations_url": "https://api.github.com/users/Johnaverse/orgs",
      "repos_url": "https://api.github.com/users/Johnaverse/repos",
      "events_url": "https://api.github.com/users/Johnaverse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Johnaverse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-11T15:28:24Z",
    "updated_at": "2023-10-11T15:28:24Z",
    "author_association": "NONE",
    "body": "Here is integration check. Bodies is normal.\r\n```\r\nINFO[10-11|13:22:08.244] logging to file system                   log dir=/var/lib/erigon/logs file prefix=integration log level=info json=false\r\nNote: prune_at doesn't mean 'all data before were deleted' - it just mean stage.Prune function were run to this block. Because 1 stage may prune multiple data types to different prune distance.\r\n\r\n                  stage_at      prune_at\r\nSnapshots              84916          0\r\nHeaders              84917          0\r\nBorHeimdall              0          0\r\nBlockHashes              84917          0\r\nBodies                  84917          0\r\nSenders              84917          0\r\nExecution              84917          84917\r\nTranslation              0          0\r\nHashState              84917          0\r\nIntermediateHashes          84917          84917\r\nAccountHistoryIndex          84917          0\r\nStorageHistoryIndex          84917          0\r\nLogIndex              84917          0\r\nCallTraces              84917          84917\r\nTxLookup              84917          0\r\nFinish                  84917          0\r\n--\r\nprune distance: \r\n\r\nblocks.v2: blocks=0, segments=0, indices=0\r\n\r\nhistory.v3: false,  idx steps: 0.00, lastMaxTxNum=0->1, lastBlockInSnap=0\r\n\r\nsequence: EthTx=233160, NonCanonicalTx=0\r\n\r\nin db: first header 1, last header 84917, first body 1, last body 84917\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1757959346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1777303924",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8438#issuecomment-1777303924",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438",
    "id": 1777303924,
    "node_id": "IC_kwDOC0FsAM5p74F0",
    "user": {
      "login": "Johnaverse",
      "id": 110527930,
      "node_id": "U_kgDOBpaFug",
      "avatar_url": "https://avatars.githubusercontent.com/u/110527930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Johnaverse",
      "html_url": "https://github.com/Johnaverse",
      "followers_url": "https://api.github.com/users/Johnaverse/followers",
      "following_url": "https://api.github.com/users/Johnaverse/following{/other_user}",
      "gists_url": "https://api.github.com/users/Johnaverse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Johnaverse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Johnaverse/subscriptions",
      "organizations_url": "https://api.github.com/users/Johnaverse/orgs",
      "repos_url": "https://api.github.com/users/Johnaverse/repos",
      "events_url": "https://api.github.com/users/Johnaverse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Johnaverse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-24T14:12:33Z",
    "updated_at": "2023-10-24T14:12:33Z",
    "author_association": "NONE",
    "body": "Still facing the same issue with v2.52.0",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1777303924/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1778538780",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8438#issuecomment-1778538780",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438",
    "id": 1778538780,
    "node_id": "IC_kwDOC0FsAM5qAlkc",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-25T05:26:56Z",
    "updated_at": "2023-10-25T05:26:56Z",
    "author_association": "COLLABORATOR",
    "body": "what is in erigon logs? ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1778538780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1779256866",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8438#issuecomment-1779256866",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438",
    "id": 1779256866,
    "node_id": "IC_kwDOC0FsAM5qDU4i",
    "user": {
      "login": "Johnaverse",
      "id": 110527930,
      "node_id": "U_kgDOBpaFug",
      "avatar_url": "https://avatars.githubusercontent.com/u/110527930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Johnaverse",
      "html_url": "https://github.com/Johnaverse",
      "followers_url": "https://api.github.com/users/Johnaverse/followers",
      "following_url": "https://api.github.com/users/Johnaverse/following{/other_user}",
      "gists_url": "https://api.github.com/users/Johnaverse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Johnaverse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Johnaverse/subscriptions",
      "organizations_url": "https://api.github.com/users/Johnaverse/orgs",
      "repos_url": "https://api.github.com/users/Johnaverse/repos",
      "events_url": "https://api.github.com/users/Johnaverse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Johnaverse/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-25T13:17:34Z",
    "updated_at": "2023-10-25T13:17:34Z",
    "author_association": "NONE",
    "body": "Just some normal logs\r\n```\r\nOct 25 13:15:00 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:00.195] Started P2P networking                   version=68 self=enode://c04cc340360129f218c919a17b6302ed5a3a6023bf3c6bd0e12618dc9a59e923c79ac77561a873e39eacc6dc2040b9301707654a034b6f4e6aa945a64741bb3e@127.0.0.1:0 name=erigon/v2.52.5-7c5e4e77/linux-amd64/go1.20.10\r\nOct 25 13:15:00 holesky-arch46 erigon[1148610]: [WARN] [10-25|13:15:00.196] NAT ExternalIP resolution has failed, try to pass a different --nat option err=\"no UPnP or NAT-PMP router discovered\"\r\nOct 25 13:15:00 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:00.199] Started P2P networking                   version=67 self=enode://c04cc340360129f218c919a17b6302ed5a3a6023bf3c6bd0e12618dc9a59e923c79ac77561a873e39eacc6dc2040b9301707654a034b6f4e6aa945a64741bb3e@127.0.0.1:0 name=erigon/v2.52.5-7c5e4e77/linux-amd64/go1.20.10\r\nOct 25 13:15:00 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:00.838] [NewPayload] Handling new payload        height=181902 hash=0x1ce50f32b0d95de9c10f0e157ec5f4069fed9647ab482981ff0febed5d043e9d\r\nOct 25 13:15:01 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:01.137] [updateForkchoice] Fork choice update: flushing in-memory state (built by previous newPayload)\r\nOct 25 13:15:01 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:01.162] RPC Daemon notified of new headers       from=181901 to=181902 hash=0x1ce50f32b0d95de9c10f0e157ec5f4069fed9647ab482981ff0febed5d043e9d header sending=10.734µs log sending=216ns\r\nOct 25 13:15:01 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:01.162] head updated                             hash=0x1ce50f32b0d95de9c10f0e157ec5f4069fed9647ab482981ff0febed5d043e9d number=181902\r\nOct 25 13:15:13 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:13.592] [NewPayload] Handling new payload        height=181903 hash=0xe9734171fd6cb22d0f2445cbd0c432a088c0c066697fb13d03ee09a6ff6788ff\r\nOct 25 13:15:13 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:13.872] [updateForkchoice] Fork choice update: flushing in-memory state (built by previous newPayload)\r\nOct 25 13:15:13 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:13.887] RPC Daemon notified of new headers       from=181902 to=181903 hash=0xe9734171fd6cb22d0f2445cbd0c432a088c0c066697fb13d03ee09a6ff6788ff header sending=20.933µs log sending=282ns\r\nOct 25 13:15:13 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:13.887] head updated                             hash=0xe9734171fd6cb22d0f2445cbd0c432a088c0c066697fb13d03ee09a6ff6788ff number=181903\r\nOct 25 13:15:27 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:27.802] [NewPayload] Handling new payload        height=181904 hash=0x0f42cefb59740b6f8e9d896157423348f797bc479bce5e74d96806dc3346af89\r\nOct 25 13:15:28 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:28.148] [updateForkchoice] Fork choice update: flushing in-memory state (built by previous newPayload)\r\nOct 25 13:15:28 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:28.192] RPC Daemon notified of new headers       from=181903 to=181904 hash=0x0f42cefb59740b6f8e9d896157423348f797bc479bce5e74d96806dc3346af89 header sending=18.726µs log sending=203ns\r\nOct 25 13:15:28 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:28.193] head updated                             hash=0x0f42cefb59740b6f8e9d896157423348f797bc479bce5e74d96806dc3346af89 number=181904\r\nOct 25 13:15:44 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:44.524] [NewPayload] Handling new payload        height=181905 hash=0x15707dc2d851db01dd14d86407dd6c99c61afdb07a2e3fc425b576ebab1ab97e\r\nOct 25 13:15:44 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:44.769] [updateForkchoice] Fork choice update: flushing in-memory state (built by previous newPayload)\r\nOct 25 13:15:44 holesky-arch46 erigon[1148610]: [INFO] [10-25|13:15:44.822] RPC Daemon notified of new headers       from=181904 to=181905 hash=0x15707dc2d851db01dd14d86407dd6c99c61afdb07a2e3fc425b576ebab1ab97e header sending=11.782µs log sending=350ns\r\n\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1779256866/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1800897272",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/8438#issuecomment-1800897272",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/8438",
    "id": 1800897272,
    "node_id": "IC_kwDOC0FsAM5rV4L4",
    "user": {
      "login": "zekchan",
      "id": 3997978,
      "node_id": "MDQ6VXNlcjM5OTc5Nzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3997978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zekchan",
      "html_url": "https://github.com/zekchan",
      "followers_url": "https://api.github.com/users/zekchan/followers",
      "following_url": "https://api.github.com/users/zekchan/following{/other_user}",
      "gists_url": "https://api.github.com/users/zekchan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zekchan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zekchan/subscriptions",
      "organizations_url": "https://api.github.com/users/zekchan/orgs",
      "repos_url": "https://api.github.com/users/zekchan/repos",
      "events_url": "https://api.github.com/users/zekchan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zekchan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-11-08T02:15:27Z",
    "updated_at": "2023-11-08T02:15:45Z",
    "author_association": "NONE",
    "body": "Same issue, Goerli, Holesky, Mainnet `thorax/erigon:v2.53.1`.\r\nNo bodies updates in logs and metrics",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1800897272/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/7744",
  "id": 1759926062,
  "node_id": "I_kwDOC0FsAM5o5lcu",
  "number": 7744,
  "title": "Pruning Call Trace Table?",
  "user": {
    "login": "0xSheller",
    "id": 93097065,
    "node_id": "U_kgDOBYyMaQ",
    "avatar_url": "https://avatars.githubusercontent.com/u/93097065?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xSheller",
    "html_url": "https://github.com/0xSheller",
    "followers_url": "https://api.github.com/users/0xSheller/followers",
    "following_url": "https://api.github.com/users/0xSheller/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xSheller/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xSheller/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xSheller/subscriptions",
    "organizations_url": "https://api.github.com/users/0xSheller/orgs",
    "repos_url": "https://api.github.com/users/0xSheller/repos",
    "events_url": "https://api.github.com/users/0xSheller/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xSheller/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-06-16T05:03:44Z",
  "updated_at": "2023-06-19T10:19:11Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Can't seem to find this in the documentation. \r\n\r\nErigon is currently on [10/15 CallTraces] Pruning call trace table. \r\n\r\nDid not specify pruning when launching erigon. Is this normal behavior?\r\n\r\nThis stage is extremely slow, slower than Execution stage. Been on this stage for an entire week now. Using an AWS io3 disk with really high throughput/iops.\r\n\r\nIf i exit the sync at this stage to restart the server for whatever reason, will it restart from stage 1/15? The server was accidentally restarted during execution stage near the very end and it had to restart from block 0 so not sure if this behavior applies per stage or the entire process.",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1594275163",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7744#issuecomment-1594275163",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
    "id": 1594275163,
    "node_id": "IC_kwDOC0FsAM5fBrVb",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T07:59:28Z",
    "updated_at": "2023-06-16T07:59:28Z",
    "author_association": "COLLABORATOR",
    "body": "make integration \r\n./build/bin/integration print_stages",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1594275163/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1595194985",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7744#issuecomment-1595194985",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
    "id": 1595194985,
    "node_id": "IC_kwDOC0FsAM5fFL5p",
    "user": {
      "login": "0xSheller",
      "id": 93097065,
      "node_id": "U_kgDOBYyMaQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/93097065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xSheller",
      "html_url": "https://github.com/0xSheller",
      "followers_url": "https://api.github.com/users/0xSheller/followers",
      "following_url": "https://api.github.com/users/0xSheller/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xSheller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xSheller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xSheller/subscriptions",
      "organizations_url": "https://api.github.com/users/0xSheller/orgs",
      "repos_url": "https://api.github.com/users/0xSheller/repos",
      "events_url": "https://api.github.com/users/0xSheller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xSheller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-16T19:35:05Z",
    "updated_at": "2023-06-16T19:35:05Z",
    "author_association": "NONE",
    "body": "> make integration ./build/bin/integration print_stages\r\n\r\n\r\n```\r\nINFO[06-16|19:32:28.691] logging to file system                   log dir=mainnet/logs file prefix=integration log level=info json=false\r\nINFO[06-16|19:32:59.221] [snapshots] Blocks Stat                  blocks=16500k indices=16500k alloc=2.3GB sys=2.4GB\r\nNote: prune_at doesn't mean 'all data before were deleted' - it just mean stage.Prune function were run to this block. Because 1 stage may prune multiple data types to different prune distance.\r\n\r\n                                 stage_at        prune_at\r\nSnapshots                        0               0\r\nHeaders                          0               0\r\nBlockHashes                      0               0\r\nBodies                           0               0\r\nSenders                          0               0\r\nExecution                        0               0\r\nTranslation                      0               0\r\nHashState                        0               0\r\nIntermediateHashes               0               0\r\nAccountHistoryIndex              0               0\r\nStorageHistoryIndex              0               0\r\nLogIndex                         0               0\r\nCallTraces                       0               0\r\nTxLookup                         0               0\r\nFinish                           0               0\r\n--\r\nprune distance:\r\n\r\nblocks.v2: blocks=16499999, segments=16499999, indices=16499999\r\n\r\nhistory.v3: false, txs.v3: false, idx steps: 0.00, lastMaxTxNum=0->1, lastBlockInSnap=0\r\n\r\nsequence: EthTx=2, NonCanonicalTx=0\r\n\r\nin db: first header 0, last header 0, first body 0, last body 0\r\n```\r\n![image](https://github.com/ledgerwatch/erigon/assets/93097065/d112b845-ca76-443f-bc6c-9cfb5afe9645)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1595194985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1595515936",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7744#issuecomment-1595515936",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
    "id": 1595515936,
    "node_id": "IC_kwDOC0FsAM5fGaQg",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-17T00:34:26Z",
    "updated_at": "2023-06-17T00:34:26Z",
    "author_association": "COLLABORATOR",
    "body": "Yes, no prune flag. But i understand the reason now: erigon does move old blocks from db to snapshot files. It also moves txlookup index there. And then prune blocks and index. On recent release (or maybe not released yet) - we reduced amount of such pruning per cycle - to make it fast. Here: https://github.com/ledgerwatch/erigon/pull/7643/files#diff-ab9a3faf1e1180eb3a5fc3d320722c5ec450a65971062fbcfb8fe9754f4f583cL239",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1595515936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1595665953",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7744#issuecomment-1595665953",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
    "id": 1595665953,
    "node_id": "IC_kwDOC0FsAM5fG-4h",
    "user": {
      "login": "0xSheller",
      "id": 93097065,
      "node_id": "U_kgDOBYyMaQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/93097065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xSheller",
      "html_url": "https://github.com/0xSheller",
      "followers_url": "https://api.github.com/users/0xSheller/followers",
      "following_url": "https://api.github.com/users/0xSheller/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xSheller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xSheller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xSheller/subscriptions",
      "organizations_url": "https://api.github.com/users/0xSheller/orgs",
      "repos_url": "https://api.github.com/users/0xSheller/repos",
      "events_url": "https://api.github.com/users/0xSheller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xSheller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-17T08:14:24Z",
    "updated_at": "2023-06-17T08:14:24Z",
    "author_association": "NONE",
    "body": "> \r\n\r\nIs it safe to stop, update, and resume? or will i lose progress of entire sync?",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1595665953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1596652525",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7744#issuecomment-1596652525",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
    "id": 1596652525,
    "node_id": "IC_kwDOC0FsAM5fKvvt",
    "user": {
      "login": "0xSheller",
      "id": 93097065,
      "node_id": "U_kgDOBYyMaQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/93097065?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xSheller",
      "html_url": "https://github.com/0xSheller",
      "followers_url": "https://api.github.com/users/0xSheller/followers",
      "following_url": "https://api.github.com/users/0xSheller/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xSheller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xSheller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xSheller/subscriptions",
      "organizations_url": "https://api.github.com/users/0xSheller/orgs",
      "repos_url": "https://api.github.com/users/0xSheller/repos",
      "events_url": "https://api.github.com/users/0xSheller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xSheller/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-19T07:25:46Z",
    "updated_at": "2023-06-19T07:25:52Z",
    "author_association": "NONE",
    "body": "> Yes, no prune flag. But i understand the reason now: erigon does move old blocks from db to snapshot files. It also moves txlookup index there. And then prune blocks and index. On recent release (or maybe not released yet) - we reduced amount of such pruning per cycle - to make it fast. Here: https://github.com/ledgerwatch/erigon/pull/7643/files#diff-ab9a3faf1e1180eb3a5fc3d320722c5ec450a65971062fbcfb8fe9754f4f583cL239\r\n\r\n\r\n\r\n> > \r\n> \r\n> Is it safe to stop, update, and resume? or will i lose progress of entire sync?\r\n\r\nbumping this again @AskAlexSharov  ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1596652525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1596918722",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/7744#issuecomment-1596918722",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/7744",
    "id": 1596918722,
    "node_id": "IC_kwDOC0FsAM5fLwvC",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-06-19T10:19:11Z",
    "updated_at": "2023-06-19T10:19:11Z",
    "author_association": "COLLABORATOR",
    "body": "\"Is it safe to stop\" - in-general: yes. but `v2.44.0 - v2.45.1` releases had bug - which will loose all the progress. ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1596918722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

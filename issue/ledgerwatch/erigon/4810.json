{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/4810",
  "id": 1315867514,
  "node_id": "I_kwDOC0FsAM5Obot6",
  "number": 4810,
  "title": "mdbx_env_open: MDBX_VERSION_MISMATCH",
  "user": {
    "login": "geomad",
    "id": 7707517,
    "node_id": "MDQ6VXNlcjc3MDc1MTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7707517?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/geomad",
    "html_url": "https://github.com/geomad",
    "followers_url": "https://api.github.com/users/geomad/followers",
    "following_url": "https://api.github.com/users/geomad/following{/other_user}",
    "gists_url": "https://api.github.com/users/geomad/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/geomad/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/geomad/subscriptions",
    "organizations_url": "https://api.github.com/users/geomad/orgs",
    "repos_url": "https://api.github.com/users/geomad/repos",
    "events_url": "https://api.github.com/users/geomad/events{/privacy}",
    "received_events_url": "https://api.github.com/users/geomad/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-07-24T10:24:20Z",
  "updated_at": "2022-07-26T11:00:18Z",
  "closed_at": "2022-07-26T11:00:18Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nErigon version: `git_branch=devel git_tag=v2021.10.03-1522-g6f53d1ef4-dirty`\r\nOS & Version: Linux\r\nCommit hash : 6f53d1ef4d71d467c9bc641ff5bf5c2228154bf2\r\nNetwork: mainnet\r\n\r\nWhen updating from b6440eea1e2d5c8eb36ab176e275e0b0c12cb99d to latest devel the following error occurs:\r\n\r\n````\r\n[INFO] Build info                               git_branch=devel git_tag=v2021.10.03-1522-g6f53d1ef4-dirty git_commit=6f53d1ef4d71d467c9bc641ff5bf5c2228154bf2\r\n[INFO] Starting Erigon on Ethereum mainnet...\r\n[INFO] Maximum peer count                       ETH=15 total=15\r\n[INFO] torrent verbosity                        level=2\r\n[INFO] Set global gas cap                       cap=50000000\r\n[INFO] Opening Database                         label=chaindata path=/erigon/chaindata\r\nmdbx_setup_lck:16495 lock region has os/format signature 0x3634d65f, expected 0x3634fb9f\r\n[EROR] Erigon startup                           err=\"mdbx_env_open: MDBX_VERSION_MISMATCH: DB version mismatch libmdbx, label: chaindata, trace: [kv_mdbx.go:214 node.go:323 node.go:326 backend.go:157 node.go:121 node.go:112 main.go:41 app.go:526 app.go:286 main.go:28 proc.go:250 asm_amd64.s:1571]\"\r\nerigon.service: Deactivated successfully.\r\n````\r\n\r\nI didn't read in the release notes that a resync is required, so I am assuming it is a bug.\r\n",
  "closed_by": {
    "login": "mandrigin",
    "id": 466427,
    "node_id": "MDQ6VXNlcjQ2NjQyNw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mandrigin",
    "html_url": "https://github.com/mandrigin",
    "followers_url": "https://api.github.com/users/mandrigin/followers",
    "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
    "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
    "organizations_url": "https://api.github.com/users/mandrigin/orgs",
    "repos_url": "https://api.github.com/users/mandrigin/repos",
    "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mandrigin/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193439530",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4810#issuecomment-1193439530",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
    "id": 1193439530,
    "node_id": "IC_kwDOC0FsAM5HInEq",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T00:53:27Z",
    "updated_at": "2022-07-25T00:53:27Z",
    "author_association": "COLLABORATOR",
    "body": "1. Maybe you didnâ€™t update rpcdaemon \r\n2. Maybe one more erigon working in background\r\n3. Otherwise remove mdx.lck file",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193439530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193612892",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4810#issuecomment-1193612892",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
    "id": 1193612892,
    "node_id": "IC_kwDOC0FsAM5HJRZc",
    "user": {
      "login": "flywukong",
      "id": 19421226,
      "node_id": "MDQ6VXNlcjE5NDIxMjI2",
      "avatar_url": "https://avatars.githubusercontent.com/u/19421226?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/flywukong",
      "html_url": "https://github.com/flywukong",
      "followers_url": "https://api.github.com/users/flywukong/followers",
      "following_url": "https://api.github.com/users/flywukong/following{/other_user}",
      "gists_url": "https://api.github.com/users/flywukong/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/flywukong/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/flywukong/subscriptions",
      "organizations_url": "https://api.github.com/users/flywukong/orgs",
      "repos_url": "https://api.github.com/users/flywukong/repos",
      "events_url": "https://api.github.com/users/flywukong/events{/privacy}",
      "received_events_url": "https://api.github.com/users/flywukong/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T05:56:00Z",
    "updated_at": "2022-07-25T05:56:00Z",
    "author_association": "NONE",
    "body": "I have a nearly same error when starting rpcdaemon ,  using devel branch , only one erigon process on node\r\n \r\n[EROR] [07-25|04:21:40.372] Could not connect to DB                  err=\"mdbx_env_open: MDBX_VERSION_MISMATCH: DB version mismatch libmdbx, label: chaindata, trace: [kv_mdbx.go:214 config.go:260 main.go:19 command.go:872 command.go:990 command.go:918 command.go:911 main.go:38 proc.go:250 asm_arm64.s:1263]\"\r\n~                         ",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193612892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193652754",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4810#issuecomment-1193652754",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
    "id": 1193652754,
    "node_id": "IC_kwDOC0FsAM5HJbIS",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T06:53:10Z",
    "updated_at": "2022-07-25T06:53:10Z",
    "author_association": "COLLABORATOR",
    "body": "can't reproduce. can switch forward and backward between this 2 commits - on linux and mac.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193652754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193653022",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4810#issuecomment-1193653022",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
    "id": 1193653022,
    "node_id": "IC_kwDOC0FsAM5HJbMe",
    "user": {
      "login": "AskAlexSharov",
      "id": 46885206,
      "node_id": "MDQ6VXNlcjQ2ODg1MjA2",
      "avatar_url": "https://avatars.githubusercontent.com/u/46885206?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AskAlexSharov",
      "html_url": "https://github.com/AskAlexSharov",
      "followers_url": "https://api.github.com/users/AskAlexSharov/followers",
      "following_url": "https://api.github.com/users/AskAlexSharov/following{/other_user}",
      "gists_url": "https://api.github.com/users/AskAlexSharov/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AskAlexSharov/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AskAlexSharov/subscriptions",
      "organizations_url": "https://api.github.com/users/AskAlexSharov/orgs",
      "repos_url": "https://api.github.com/users/AskAlexSharov/repos",
      "events_url": "https://api.github.com/users/AskAlexSharov/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AskAlexSharov/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T06:53:32Z",
    "updated_at": "2022-07-25T06:53:32Z",
    "author_association": "COLLABORATOR",
    "body": "maybe show more logs\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193653022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193855965",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4810#issuecomment-1193855965",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
    "id": 1193855965,
    "node_id": "IC_kwDOC0FsAM5HKMvd",
    "user": {
      "login": "geomad",
      "id": 7707517,
      "node_id": "MDQ6VXNlcjc3MDc1MTc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7707517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geomad",
      "html_url": "https://github.com/geomad",
      "followers_url": "https://api.github.com/users/geomad/followers",
      "following_url": "https://api.github.com/users/geomad/following{/other_user}",
      "gists_url": "https://api.github.com/users/geomad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geomad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geomad/subscriptions",
      "organizations_url": "https://api.github.com/users/geomad/orgs",
      "repos_url": "https://api.github.com/users/geomad/repos",
      "events_url": "https://api.github.com/users/geomad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geomad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-25T10:18:04Z",
    "updated_at": "2022-07-25T10:18:54Z",
    "author_association": "NONE",
    "body": "**SOLVED:**\r\nTurns out the error was occurring when after updating I was trying to restart erigon, while the old version of rpcdaemon was still running.\r\nShutting down both erigon and rpcdaemon, updating and then starting them solved the issue.\r\n\r\nAfter starting up erigon I was having another issue:\r\n`[EROR] Erigon startup                           err=\"clean tmp dir: /erigon/etl-temp, open /erigon/etl-temp: no such file or directory\"`\r\nWhich was fixed by manually creating the folder in question.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1193855965/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1195333845",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/4810#issuecomment-1195333845",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/4810",
    "id": 1195333845,
    "node_id": "IC_kwDOC0FsAM5HP1jV",
    "user": {
      "login": "mandrigin",
      "id": 466427,
      "node_id": "MDQ6VXNlcjQ2NjQyNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/466427?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mandrigin",
      "html_url": "https://github.com/mandrigin",
      "followers_url": "https://api.github.com/users/mandrigin/followers",
      "following_url": "https://api.github.com/users/mandrigin/following{/other_user}",
      "gists_url": "https://api.github.com/users/mandrigin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mandrigin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mandrigin/subscriptions",
      "organizations_url": "https://api.github.com/users/mandrigin/orgs",
      "repos_url": "https://api.github.com/users/mandrigin/repos",
      "events_url": "https://api.github.com/users/mandrigin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mandrigin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-26T11:00:18Z",
    "updated_at": "2022-07-26T11:00:18Z",
    "author_association": "COLLABORATOR",
    "body": "@geomad thanks! I am closing this issue. The one with the tmp dir is also solved on the very latest devel.",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/1195333845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

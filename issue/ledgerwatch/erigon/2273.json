{
  "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273",
  "repository_url": "https://api.github.com/repos/ledgerwatch/erigon",
  "labels_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273/labels{/name}",
  "comments_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273/comments",
  "events_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273/events",
  "html_url": "https://github.com/ledgerwatch/erigon/issues/2273",
  "id": 935826168,
  "node_id": "MDU6SXNzdWU5MzU4MjYxNjg=",
  "number": 2273,
  "title": "trace_replayTransaction different results between Erigon and OE",
  "user": {
    "login": "ArtemKo7v",
    "id": 2138231,
    "node_id": "MDQ6VXNlcjIxMzgyMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2138231?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ArtemKo7v",
    "html_url": "https://github.com/ArtemKo7v",
    "followers_url": "https://api.github.com/users/ArtemKo7v/followers",
    "following_url": "https://api.github.com/users/ArtemKo7v/following{/other_user}",
    "gists_url": "https://api.github.com/users/ArtemKo7v/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ArtemKo7v/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ArtemKo7v/subscriptions",
    "organizations_url": "https://api.github.com/users/ArtemKo7v/orgs",
    "repos_url": "https://api.github.com/users/ArtemKo7v/repos",
    "events_url": "https://api.github.com/users/ArtemKo7v/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ArtemKo7v/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2021-07-02T14:33:08Z",
  "updated_at": "2021-08-10T14:25:45Z",
  "closed_at": "2021-08-10T14:25:45Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "#### System information\r\n\r\nerigon version 2021.07.2-alpha\r\nUbuntu 20.04.2 LTS\r\n\r\n#### OE\r\n\r\nTransaction hash 0xbeb6093b5f0ea3ec834391afc7c6c0d7ad367b3f82388b8f00258016bd29223b\r\n\r\nOpenEthereum stateDiff returns only one storage value changed for the contract 0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\r\n\r\n````\r\ncurl -s http://127.0.0.1:8555 -X POST -H \"Content-Type: application/json\" -d '{\"method\":\"trace_replayTransaction\",\"params\":[\"0xbeb6093b5f0ea3ec834391afc7c6c0d7ad367b3f82388b8f00258016bd29223b\", [\"stateDiff\"]],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"result\": {\r\n    \"output\": \"0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000013d33d592ba2000000000000000000000000000000000000000000000000000ab380511f353b31\",\r\n    \"stateDiff\": {\r\n\r\n      . . .\r\n\r\n      \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\": {\r\n        \"balance\": {\r\n          \"*\": {\r\n            \"from\": \"0x54309d3a2d1805bb50f29\",\r\n            \"to\": \"0x54309d3b6a4bdb4e0b129\"\r\n          }\r\n        },\r\n        \"code\": \"=\",\r\n        \"nonce\": \"=\",\r\n        \"storage\": {\r\n          \"0x311b40ea1479c5ed4ba2a28e17c1d901c8142bdd60d41942bdab99d5fa818aae\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000000279158dbc5d8a780d\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000002792960f9b6b61a0d\"\r\n            }\r\n          }\r\n        }\r\n      },\r\n     . . .\r\n````\r\n\r\n\r\n#### Erigon\r\n\r\nErigon stateDiff of the same transaction returns many changed values for the contract 0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\r\n\r\n(pretty much looks like a block's stateDiff for me...)\r\n\r\n````\r\ncurl -s http://127.0.0.1:8555 -X POST -H \"Content-Type: application/json\" -d '{\"method\":\"trace_replayTransaction\",\"params\":[\"0xbeb6093b5f0ea3ec834391afc7c6c0d7ad367b3f82388b8f00258016bd29223b\", [\"stateDiff\"]],\"id\":1,\"jsonrpc\":\"2.0\"}'\r\n\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"id\": 1,\r\n  \"result\": {\r\n    \"output\": \"0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000013d33d592ba2000000000000000000000000000000000000000000000000000ab380511f353b31\",\r\n    \"stateDiff\": {\r\n\r\n     . . .\r\n\r\n      \"0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2\": {\r\n        \"balance\": {\r\n          \"*\": {\r\n            \"from\": \"0x54309d3a2d1805bb50f29\",\r\n            \"to\": \"0x54309d3b6a4bdb4e0b129\"\r\n          }\r\n        },\r\n        \"code\": \"=\",\r\n        \"nonce\": \"=\",\r\n        \"storage\": {\r\n          \"0x0cb865ff1951c90111975d77bc75fa8312f25b08bb19b908f6b9c43691ac0caf\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000cba77beb4838615811\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000cb70cf4d79b7ea951f\"\r\n            }\r\n          },\r\n          \"0x128ecf09914d00a386001e55b09ece96a39bbe5a4d21f26b7a1419493948e3a5\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000000000000000000000a\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000000058d15e17628000a\"\r\n            }\r\n          },\r\n          \"0x12f86772b466213d7afad1e6300ab11a8b0c6f587980b891bcbe9a2873e42819\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000037660403cbd55e99be\",\r\n              \"to\": \"0x00000000000000000000000000000000000000000000003766162ba1e9cc25be\"\r\n            }\r\n          },\r\n          \"0x1b306eb5d152e9b596976dd72b7c61bb7ecd58f45711ab09f130cdd6b8892575\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000017e05b52fd0106d3b7\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000017dcfac573deef73b7\"\r\n            }\r\n          },\r\n          \"0x28841f612cf1bed4591bc678927a3ad6bd836b1a5c10bff6247dfda4e22acecc\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000056751695ff210531d8\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000056938bd9330736ffa6\"\r\n            }\r\n          },\r\n          \"0x30bd84b96629f958113934633d3bd1b64c3d259a85c57ceac65da8c5ec9bf3a7\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000001fb5f607ec3c9e3a5a8\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000001fb40eb3b8fe3b1d7da\"\r\n            }\r\n          },\r\n          \"0x311b40ea1479c5ed4ba2a28e17c1d901c8142bdd60d41942bdab99d5fa818aae\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000000279158dbc5d8a780d\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000002792960f9b6b61a0d\"\r\n            }\r\n          },\r\n          \"0x3a0f132b80eb284c2ac247698d2ec7dce851ca420b700161ad6082d0e9762150\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000001831067a15b39db32da4\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000001831175f288d3342ada4\"\r\n            }\r\n          },\r\n          \"0x3c5de1a47c31d149ef1968b3a406fd41aa12ca2b7dae3ef47b4b209b9c8d4771\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000028c456f5bca36c0857\",\r\n              \"to\": \"0x00000000000000000000000000000000000000000000002896d2f7fe917cc5df\"\r\n            }\r\n          },\r\n          \"0x3c679e5fc421e825187f885e3dcd7f4493f886ceeb4930450588e35818a32b9c\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000000254098158cf21aa80\",\r\n              \"to\": \"0x00000000000000000000000000000000000000000000000254bd861128bb61f2\"\r\n            }\r\n          },\r\n          \"0x41602aff1b0f2f84d19c35ec410d5a17dc2c972e6b070601b2fbcd4f8a595837\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000000562af2061f0c635e8\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000005720cf1bb69c95fbd\"\r\n            }\r\n          },\r\n          \"0x46d5152b77e564c464f6f1fde062cb3efd1b48fc60efcad82253a60d36628e01\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000009889db68d935969ca\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000009636f098dd259603e\"\r\n            }\r\n          },\r\n          \"0x5459e3adf6f288d395b3e7c781da6855d7adc4fc837cbff59dbe55b108cec920\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000000a053d47f0662c12\",\r\n              \"to\": \"0x00000000000000000000000000000000000000000000000000b30f54b96f6329\"\r\n            }\r\n          },\r\n          \"0x559594533655e42ff6eee3298e5ea9bf6687105b738d878bddf7b40cbfb573ff\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000000004da34d28db72000\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000000000000000000000\"\r\n            }\r\n          },\r\n          \"0x7577b03fa82db843e92dd1ad1af1efc54345de8dc2d2d01e9c69950a93059e8a\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000007e37db7e487fe95b\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000007e93e0b97fe476ec\"\r\n            }\r\n          },\r\n          \"0x7982be15606135b65b2ceaa068e81fa1e9e0e27932f7fb10e1f76db959499a11\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000005210c807d7b8b038\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000005cfa4a49e4e13e3a\"\r\n            }\r\n          },\r\n          \"0x874624688b4336ea8710ebc130995544557688061fdb6d7ddb710f0a9b9fa4de\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000012afa598468ce33e61\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000012dc4d7bd3ae87f48c\"\r\n            }\r\n          },\r\n          \"0x9cf2ae40707ed24a5a59d6a08b659b2d783f4acb72ca3c63daa67da97f772f98\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000162f42da994a324e22\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000162d77925798d03507\"\r\n            }\r\n          },\r\n          \"0xa3897ba8eafb64dffa877fe0432906b4899026d9c51dc3a7d5f1bc8473e16ecd\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000002a9393674dcecb754\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000002c67f37d7d203a754\"\r\n            }\r\n          },\r\n          \"0xb0d7db1f7738d4fb2197075e73e5d660c66835026697a6082c673aaf0e5c2112\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000002909cad0c22d1201cb\",\r\n              \"to\": \"0x00000000000000000000000000000000000000000000002909137a25d282ee42\"\r\n            }\r\n          },\r\n          \"0xb374801ace2c02f5db0425ab5920a2b7ed1d5a00abbcd395fda7530ba1d666c0\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000001024e10afb17c78565e5\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000010250f2fd0cf8817aac9\"\r\n            }\r\n          },\r\n          \"0xde3396827fa575355c40f2591e90c244df1fd101730e44da9e54c1d040587739\": {\r\n            \"*\": {\r\n              \"from\": \"0x00000000000000000000000000000000000000000000000213f84d3a28c0710d\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000020ef6d7636c3ddcae\"\r\n            }\r\n          },\r\n          \"0xec54f6f317d22d3ca625286705096c283a0789c369269c0118af570fcb3322ff\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000e1dce9cb87661155bf\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000e1cc04b8add081d5bf\"\r\n            }\r\n          },\r\n          \"0xed0a89456ac80760631bdc705fecdfcdd7dbd4d980216a88f6fbb1c35c44a007\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000019574829f1334671e\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000019d16754a76717a6d\"\r\n            }\r\n          },\r\n          \"0xf09bb3b6203870feddc09cdb9885421219994ab89b79627172fd9c9d81267594\": {\r\n            \"*\": {\r\n              \"from\": \"0x0000000000000000000000000000000000000000000000097fde49dd7e145d0f\",\r\n              \"to\": \"0x0000000000000000000000000000000000000000000000098356778a67ed5d0f\"\r\n            }\r\n          },\r\n          \"0xf5023afa9554377e9cca0b65662e658b0afa9617d61eb384db6af32305036b2c\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000032aa09fe7b3ae3d9ad\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000032baebdec93c2719ad\"\r\n            }\r\n          },\r\n          \"0xfdfd2b4994a8b89346c40b1ca5ed1f955a9f2c39244e4c2e7dcf794d38747104\": {\r\n            \"*\": {\r\n              \"from\": \"0x000000000000000000000000000000000000000000000001543c47cf5defe240\",\r\n              \"to\": \"0x000000000000000000000000000000000000000000000001551c72d101c50ae3\"\r\n            }\r\n          }\r\n        }\r\n      },\r\n      . . .\r\n````\r\n\r\n",
  "closed_by": {
    "login": "ArtemKo7v",
    "id": 2138231,
    "node_id": "MDQ6VXNlcjIxMzgyMzE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2138231?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ArtemKo7v",
    "html_url": "https://github.com/ArtemKo7v",
    "followers_url": "https://api.github.com/users/ArtemKo7v/followers",
    "following_url": "https://api.github.com/users/ArtemKo7v/following{/other_user}",
    "gists_url": "https://api.github.com/users/ArtemKo7v/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ArtemKo7v/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ArtemKo7v/subscriptions",
    "organizations_url": "https://api.github.com/users/ArtemKo7v/orgs",
    "repos_url": "https://api.github.com/users/ArtemKo7v/repos",
    "events_url": "https://api.github.com/users/ArtemKo7v/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ArtemKo7v/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/896075863",
    "html_url": "https://github.com/ledgerwatch/erigon/issues/2273#issuecomment-896075863",
    "issue_url": "https://api.github.com/repos/ledgerwatch/erigon/issues/2273",
    "id": 896075863,
    "node_id": "IC_kwDOC0FsAM41aQhX",
    "user": {
      "login": "ArtemKo7v",
      "id": 2138231,
      "node_id": "MDQ6VXNlcjIxMzgyMzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2138231?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArtemKo7v",
      "html_url": "https://github.com/ArtemKo7v",
      "followers_url": "https://api.github.com/users/ArtemKo7v/followers",
      "following_url": "https://api.github.com/users/ArtemKo7v/following{/other_user}",
      "gists_url": "https://api.github.com/users/ArtemKo7v/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ArtemKo7v/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ArtemKo7v/subscriptions",
      "organizations_url": "https://api.github.com/users/ArtemKo7v/orgs",
      "repos_url": "https://api.github.com/users/ArtemKo7v/repos",
      "events_url": "https://api.github.com/users/ArtemKo7v/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ArtemKo7v/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-10T14:25:45Z",
    "updated_at": "2021-08-10T14:25:45Z",
    "author_association": "NONE",
    "body": "Looks like it has already been fixed.\r\nI can not reproduce the bug in Erigon v. 2021.08.1-alpha",
    "reactions": {
      "url": "https://api.github.com/repos/ledgerwatch/erigon/issues/comments/896075863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

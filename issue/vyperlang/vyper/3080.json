{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/3080",
  "id": 1357589803,
  "node_id": "I_kwDOBGDvrM5Q6y0r",
  "number": 3080,
  "title": "VIP: add `enumerate` & `zip`",
  "user": {
    "login": "pcaversaccio",
    "id": 25297591,
    "node_id": "MDQ6VXNlcjI1Mjk3NTkx",
    "avatar_url": "https://avatars.githubusercontent.com/u/25297591?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/pcaversaccio",
    "html_url": "https://github.com/pcaversaccio",
    "followers_url": "https://api.github.com/users/pcaversaccio/followers",
    "following_url": "https://api.github.com/users/pcaversaccio/following{/other_user}",
    "gists_url": "https://api.github.com/users/pcaversaccio/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/pcaversaccio/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/pcaversaccio/subscriptions",
    "organizations_url": "https://api.github.com/users/pcaversaccio/orgs",
    "repos_url": "https://api.github.com/users/pcaversaccio/repos",
    "events_url": "https://api.github.com/users/pcaversaccio/events{/privacy}",
    "received_events_url": "https://api.github.com/users/pcaversaccio/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 751622094,
      "node_id": "MDU6TGFiZWw3NTE2MjIwOTQ=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/VIP:%20Discussion",
      "name": "VIP: Discussion",
      "color": "000000",
      "default": false,
      "description": "Used to denote VIPs and more complex issues that are waiting discussion in a meeting"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2022-08-31T16:35:24Z",
  "updated_at": "2022-09-01T18:45:57Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "~Add Python function `enumerate` to Vyper.~\r\n\r\n[EDIT]\r\n\r\n## Simple Summary\r\n\r\nAllow usage of the Python functions `enumerate` and `zip` in Vyper.\r\n\r\n## Motivation\r\n\r\n- `enumerate`: When dealing with iterators, we also get need to keep a count of iterations. \r\n- `zip`: For certain use cases we need to map the similar index of multiple containers so that they can be used just using a single entity. \r\n\r\n## Specification\r\n\r\n### `enumerate`\r\n\r\n**Syntax**\r\n```python\r\nenumerate(iterable, start=0)\r\n```\r\n\r\n**Parameters**\r\n- **iterable**: any object that supports iteration.\r\n- **start**: the index value from which the counter is to be started, by default it is 0.\r\n\r\n**Return Value**\r\n- Returns an enumerate object.\r\n\r\n**Example**\r\n\r\n```python\r\nfoo: uint128[3] = [4, 23, 42]\r\nfor idx, i in enumerate(foo):\r\n    ...\r\n```\r\n\r\nA real-world use-case, where `enumerate` would help a lot is my (WIP) implementation of [`multicall`](https://github.com/pcaversaccio/snekmate/blob/main/src/utils/Multicall.vy#L35).\r\n\r\n### `zip`\r\n\r\n**Syntax**\r\n```python\r\nzip(*iterators) \r\n```\r\n\r\n**Parameters**\r\n- **iterators**: Can be built-in iterables or user-defined iterables.\r\n\r\n**Return Value**\r\n- Returns a zip object that works as an iterator.\r\n\r\n**Example**\r\n\r\n```python\r\nstruct MyStruct:\r\n    value1: uint128[3]\r\n    value2: uint128[3]\r\n\r\nfoo: uint128[3] = [4, 23, 42]\r\nbar: uint128[3] = [5, 8, 69]\r\n\r\nfor idx, i in enumerate(foo):\r\n    MyStruct.value1[idx], MyStruct.value2[idx] = zip(i, bar[idx])\r\n    ...\r\n```\r\n\r\n## Backwards Compatibility\r\n\r\nNo issues known.\r\n\r\n## Dependencies\r\n\r\nNo known dependencies.\r\n\r\n## References\r\n\r\n- https://github.com/vyperlang/vyper/issues/2527\r\n- https://github.com/vyperlang/vyper/issues/1047\r\n\r\n## Copyright\r\n\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/)",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/3080/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1233250241",
    "html_url": "https://github.com/vyperlang/vyper/issues/3080#issuecomment-1233250241",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
    "id": 1233250241,
    "node_id": "IC_kwDOBGDvrM5JgefB",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T18:02:03Z",
    "updated_at": "2022-08-31T18:02:03Z",
    "author_association": "COLLABORATOR",
    "body": "also `zip`",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1233250241/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1233251202",
    "html_url": "https://github.com/vyperlang/vyper/issues/3080#issuecomment-1233251202",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
    "id": 1233251202,
    "node_id": "IC_kwDOBGDvrM5JgeuC",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-31T18:03:08Z",
    "updated_at": "2022-08-31T18:03:08Z",
    "author_association": "MEMBER",
    "body": "We've talked about this one before and it's a good idea, however it would be helpful to use the full VIP template and walk through what the expectations are around it's use (perhaps showing what it might look like if implemented)\r\n\r\nIn my mind, the concept of Iterators is needed, along with `zip` (as @charles-cooper mentioned). It would probably work best all written together. Could maybe include list comprehensions too.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1233251202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234042232",
    "html_url": "https://github.com/vyperlang/vyper/issues/3080#issuecomment-1234042232",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
    "id": 1234042232,
    "node_id": "IC_kwDOBGDvrM5Jjf14",
    "user": {
      "login": "pcaversaccio",
      "id": 25297591,
      "node_id": "MDQ6VXNlcjI1Mjk3NTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25297591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcaversaccio",
      "html_url": "https://github.com/pcaversaccio",
      "followers_url": "https://api.github.com/users/pcaversaccio/followers",
      "following_url": "https://api.github.com/users/pcaversaccio/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcaversaccio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcaversaccio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcaversaccio/subscriptions",
      "organizations_url": "https://api.github.com/users/pcaversaccio/orgs",
      "repos_url": "https://api.github.com/users/pcaversaccio/repos",
      "events_url": "https://api.github.com/users/pcaversaccio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcaversaccio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T09:54:38Z",
    "updated_at": "2022-09-01T09:54:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fubuloubu thanks for the feedback - I used the VIP template and tried to elaborate the details. However, am not sure about the `zip` example (maybe @charles-cooper you can give a better one) since we cannot directly declare tuple types.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234042232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234541937",
    "html_url": "https://github.com/vyperlang/vyper/issues/3080#issuecomment-1234541937",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
    "id": 1234541937,
    "node_id": "IC_kwDOBGDvrM5JlZ1x",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T16:56:10Z",
    "updated_at": "2022-09-01T16:56:10Z",
    "author_association": "MEMBER",
    "body": "> @fubuloubu thanks for the feedback - I used the VIP template and tried to elaborate the details. However, am not sure about the `zip` example (maybe @charles-cooper you can give a better one) since we cannot directly declare tuple types.\r\n\r\nYeah, I would think it'd look something more like this:\r\n\r\n```vyper\r\ndef foo(msgs: DynArray[Message, N], sigs: DynArray[Bytes[65], N]):\r\n    for msg, sig in zip(msgs, sigs):  # Validates that `len(msgs) == len(sigs)` prior to iteration\r\n        ...\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234541937/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234545100",
    "html_url": "https://github.com/vyperlang/vyper/issues/3080#issuecomment-1234545100",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
    "id": 1234545100,
    "node_id": "IC_kwDOBGDvrM5JlanM",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T16:59:36Z",
    "updated_at": "2022-09-01T16:59:36Z",
    "author_association": "MEMBER",
    "body": "and should be able to mix and match like this:\r\n\r\n```vyper\r\ndef bar(msgs: DynArray[Message, N], sigs: DynArray[Bytes[65], N]):\r\n    for idx, (msg, sig) in enumerate(zip(msg, sigs)):\r\n        ...\r\n```\r\n\r\nDefinitely seems like more work would be needed to allow the tuple de-structuring to work",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234545100/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234546047",
    "html_url": "https://github.com/vyperlang/vyper/issues/3080#issuecomment-1234546047",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3080",
    "id": 1234546047,
    "node_id": "IC_kwDOBGDvrM5Jla1_",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-01T17:00:39Z",
    "updated_at": "2022-09-01T17:00:39Z",
    "author_association": "COLLABORATOR",
    "body": "I think even if it's the implementation needs to be tweaked, what is in the VIP writeup is generally a good starting point for discussion (and guiding the eventual implementation)",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1234546047/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

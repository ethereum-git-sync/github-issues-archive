{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/1517",
  "id": 465352415,
  "node_id": "MDU6SXNzdWU0NjUzNTI0MTU=",
  "number": 1517,
  "title": "VIP: Try Catch exception handling for External Calls",
  "user": {
    "login": "haydenadams",
    "id": 9343483,
    "node_id": "MDQ6VXNlcjkzNDM0ODM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haydenadams",
    "html_url": "https://github.com/haydenadams",
    "followers_url": "https://api.github.com/users/haydenadams/followers",
    "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
    "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
    "organizations_url": "https://api.github.com/users/haydenadams/orgs",
    "repos_url": "https://api.github.com/users/haydenadams/repos",
    "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haydenadams/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 757250644,
      "node_id": "MDU6TGFiZWw3NTcyNTA2NDQ=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/VIP:%20Approved",
      "name": "VIP: Approved",
      "color": "98f765",
      "default": false,
      "description": "VIP Approved"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 16,
  "created_at": "2019-07-08T16:27:57Z",
  "updated_at": "2019-09-24T10:19:42Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Summary\r\nExternal calls initiated from smart contracts should be allowed to fail without reverting the entire transaction. \r\n\r\n## Motivation\r\nCatching reversions will increase the flexibility of Vyper and allow experimenting with new smart contract patterns. This is potentially a requirement for Uniswap V2.\r\n\r\nThe main draw here is you can have a non-upgradable contract that makes external calls to an upgradable contract without the ability for the upgradeable contract to break the non-upgradable contract. This uses a combination of max_gas, mutex, and catching reverts.\r\n\r\n## Specification\r\nCredit to @jacqueswww for helping out here. It could look something like:\r\n\r\n```python\r\ntry:\r\n     this.someToken.transfer(a, b, allow_fail=True)\r\nexcept TransactionFailed:\r\n      <block of code>\r\n```\r\n\r\nPotentially it could handle multiple calls, not sure:\r\n```python\r\ntry:\r\n     this.someToken.transfer(a, b, allow_fail=True)\r\n     this.call2()\r\n     this.call3(allow_fail=True)\r\nexcept TransactionFailed:\r\n      <block of code>\r\n```\r\n\r\n## Backwards Compatibility\r\nShould be fine?\r\n\r\n## Dependencies\r\nNone\r\n\r\n## Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/1517/reactions",
    "total_count": 4,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 3,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509297056",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509297056",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509297056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTI5NzA1Ng==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T16:28:47Z",
    "updated_at": "2019-07-08T16:32:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "I approve this message. I will add this to our next meeting for discussion as well.\r\nI much prefer just going with the try catch approach (with forced try catch if allow_fail=True) is set, over making a second version of `raw_call` and loosing the clarity of emitting failure on call, and enforcing a clear Call / Transaction failed.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509297056/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509303083",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509303083",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509303083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTMwMzA4Mw==",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T16:46:17Z",
    "updated_at": "2019-07-08T16:46:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "@haydenadams @jacqueswww is `TransactionFailed` the only type of exception that would be supported with this feature? \r\n\r\nGenerally, I think it would be good for the purposes of Vyper that only explicit exceptions be \"catchable\", disallowing something like, with any uncaught exception resulting in a reversion:\r\n\r\n```python\r\ntry:\r\n     this.someToken.transfer(a, b, allow_fail=True)\r\n     this.call2()\r\n     this.call3(allow_fail=True)\r\nexcept AnyError:\r\n      <block of code>\r\n```\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509303083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509308229",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509308229",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509308229,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTMwODIyOQ==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T17:00:13Z",
    "updated_at": "2019-07-08T17:00:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jakerockland yes I fully agree, this would be a single built-in Exception for `CALL`  exceptions. I am not in favour of having a generic / large groups of exceptions.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509308229/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509316283",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509316283",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509316283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTMxNjI4Mw==",
    "user": {
      "login": "haydenadams",
      "id": 9343483,
      "node_id": "MDQ6VXNlcjkzNDM0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haydenadams",
      "html_url": "https://github.com/haydenadams",
      "followers_url": "https://api.github.com/users/haydenadams/followers",
      "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
      "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
      "organizations_url": "https://api.github.com/users/haydenadams/orgs",
      "repos_url": "https://api.github.com/users/haydenadams/repos",
      "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haydenadams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T17:21:31Z",
    "updated_at": "2019-07-08T17:21:31Z",
    "author_association": "NONE",
    "body": "Hmm good question. What are some other Vyper exceptions that might be worth catching? ",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509316283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509324368",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509324368",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509324368,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTMyNDM2OA==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T17:44:47Z",
    "updated_at": "2019-07-08T17:44:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "We don't have other runtime exceptions, except reverting.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509324368/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509398971",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509398971",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509398971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTM5ODk3MQ==",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T21:28:13Z",
    "updated_at": "2019-07-08T21:28:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, I don't see a problem with the only _current_ catchable exception to being `TransactionFailed`, I just wanted to point out that I don't think we want to open the gateway for generic error catching.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509398971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509399317",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509399317",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509399317,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTM5OTMxNw==",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-08T21:29:27Z",
    "updated_at": "2019-07-08T21:29:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Though perhaps we do want to allow custom (programmer defined) error types down the road...?, which would make my point more relevant/less abstract ðŸ˜… ",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509399317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509848461",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509848461",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509848461,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTg0ODQ2MQ==",
    "user": {
      "login": "brockelmore",
      "id": 31553173,
      "node_id": "MDQ6VXNlcjMxNTUzMTcz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31553173?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brockelmore",
      "html_url": "https://github.com/brockelmore",
      "followers_url": "https://api.github.com/users/brockelmore/followers",
      "following_url": "https://api.github.com/users/brockelmore/following{/other_user}",
      "gists_url": "https://api.github.com/users/brockelmore/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brockelmore/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brockelmore/subscriptions",
      "organizations_url": "https://api.github.com/users/brockelmore/orgs",
      "repos_url": "https://api.github.com/users/brockelmore/repos",
      "events_url": "https://api.github.com/users/brockelmore/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brockelmore/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-09T23:34:17Z",
    "updated_at": "2019-07-09T23:34:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "My two cents on the matter: if someone is interacting with my contract, it may be nice to be able to pass the error up to the dev utilizing my sc. Chained errors may become more important as protocols start compounding on each other and enable better UX.\r\n\r\nAgree that could just be a potential down-the-road thing",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509848461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509853235",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-509853235",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 509853235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwOTg1MzIzNQ==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-09T23:58:28Z",
    "updated_at": "2019-07-09T23:58:28Z",
    "author_association": "MEMBER",
    "body": "I mean personally, I would discourage using this type of behavior over read-only function APIs in my contracts, but I can see utility for this in order to make decisions when executing trades",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/509853235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513571883",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-513571883",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 513571883,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzU3MTg4Mw==",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-21T17:18:05Z",
    "updated_at": "2019-07-21T17:21:10Z",
    "author_association": "COLLABORATOR",
    "body": "This is neat, we should also make the revert reason accessible to the programmer. For clarity, there could be a single exception class named `TransactionReverted` and the reason accessible as `e.reason`, e.g.\r\n\r\n```python\r\ntry:\r\n  external_contract.foo()\r\nexcept TransactionReverted as e:\r\n  return e.reason\r\n```\r\n\r\n(A single exception class is used because there is no way (to my knowledge) to differentiate between a message call failing due to REVERT and failing due to an exceptional halting condition.)\r\n\r\nPersonally I find `finally` clauses to be hard to reason about, but we should consider them because they could be useful in certain cases.\r\n\r\nAs an alternative to exception-handling style, we could use error code style, so if `allow_fail` is set, the external call returns a tuple as in Go, `(retval, err)`. The reason string could be accessed via a global variable `ERR_REASON` if `err` is not nil (opposite the EVM semantics where CALL returns 0 on failure). Although both ways are obviously equal in expressive power, the exception handling style is more pythonic; but I personally prefer the error code style because there is no messing with control flow.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513571883/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513572373",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-513572373",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 513572373,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzU3MjM3Mw==",
    "user": {
      "login": "haydenadams",
      "id": 9343483,
      "node_id": "MDQ6VXNlcjkzNDM0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haydenadams",
      "html_url": "https://github.com/haydenadams",
      "followers_url": "https://api.github.com/users/haydenadams/followers",
      "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
      "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
      "organizations_url": "https://api.github.com/users/haydenadams/orgs",
      "repos_url": "https://api.github.com/users/haydenadams/repos",
      "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haydenadams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-21T17:24:40Z",
    "updated_at": "2019-07-21T17:24:40Z",
    "author_association": "NONE",
    "body": "@fubuloubu the most important usage here is external calls to upgradable addresses such that the upgradable contract can never halt the calling contract through reversion, provided there is a max gas limit on the call. You can't replicate this will read-only.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513572373/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513583110",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-513583110",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 513583110,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzU4MzExMA==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-21T19:59:43Z",
    "updated_at": "2019-07-21T19:59:43Z",
    "author_association": "MEMBER",
    "body": "Upgradeable contract gotchas strikes again!",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513583110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513640022",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-513640022",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 513640022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzY0MDAyMg==",
    "user": {
      "login": "haydenadams",
      "id": 9343483,
      "node_id": "MDQ6VXNlcjkzNDM0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haydenadams",
      "html_url": "https://github.com/haydenadams",
      "followers_url": "https://api.github.com/users/haydenadams/followers",
      "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
      "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
      "organizations_url": "https://api.github.com/users/haydenadams/orgs",
      "repos_url": "https://api.github.com/users/haydenadams/repos",
      "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haydenadams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-22T04:55:47Z",
    "updated_at": "2019-07-22T04:55:47Z",
    "author_association": "NONE",
    "body": "The external call could also be to a non-upgradable contract that has some chance of reverting. \r\n\r\nIn general I think catching errors is super useful considering the async / delayed nature of Ethereum transactions.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/513640022/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/515101381",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-515101381",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 515101381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTEwMTM4MQ==",
    "user": {
      "login": "haydenadams",
      "id": 9343483,
      "node_id": "MDQ6VXNlcjkzNDM0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haydenadams",
      "html_url": "https://github.com/haydenadams",
      "followers_url": "https://api.github.com/users/haydenadams/followers",
      "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
      "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
      "organizations_url": "https://api.github.com/users/haydenadams/orgs",
      "repos_url": "https://api.github.com/users/haydenadams/repos",
      "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haydenadams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-25T15:55:45Z",
    "updated_at": "2019-07-25T15:55:45Z",
    "author_association": "NONE",
    "body": "btw would it be possible to catch reversion for an internal call?",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/515101381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/515102862",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-515102862",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 515102862,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTEwMjg2Mg==",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-25T15:59:35Z",
    "updated_at": "2019-07-25T15:59:35Z",
    "author_association": "COLLABORATOR",
    "body": "Not really as revert halts the current message call",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/515102862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/534493758",
    "html_url": "https://github.com/vyperlang/vyper/issues/1517#issuecomment-534493758",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1517",
    "id": 534493758,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDQ5Mzc1OA==",
    "user": {
      "login": "iamdefinitelyahuman",
      "id": 35276322,
      "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamdefinitelyahuman",
      "html_url": "https://github.com/iamdefinitelyahuman",
      "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
      "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
      "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
      "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
      "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-24T10:19:41Z",
    "updated_at": "2019-09-24T10:19:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like solidity plans to implement this for 0.6 - https://github.com/ethereum/solidity/blob/develop_060/docs/control-structures.rst#trycatch",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/534493758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

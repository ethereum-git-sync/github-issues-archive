{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/3509",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/3509",
  "id": 1808214421,
  "node_id": "I_kwDOBGDvrM5rxymV",
  "number": 3509,
  "title": "`tests` module is importable outside of Vyper package",
  "user": {
    "login": "antazoey",
    "id": 19540978,
    "node_id": "MDQ6VXNlcjE5NTQwOTc4",
    "avatar_url": "https://avatars.githubusercontent.com/u/19540978?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/antazoey",
    "html_url": "https://github.com/antazoey",
    "followers_url": "https://api.github.com/users/antazoey/followers",
    "following_url": "https://api.github.com/users/antazoey/following{/other_user}",
    "gists_url": "https://api.github.com/users/antazoey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/antazoey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/antazoey/subscriptions",
    "organizations_url": "https://api.github.com/users/antazoey/orgs",
    "repos_url": "https://api.github.com/users/antazoey/repos",
    "events_url": "https://api.github.com/users/antazoey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/antazoey/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2023-07-17T17:13:23Z",
  "updated_at": "2023-07-17T18:55:09Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version (output of `vyper --version`): 0.3.9\r\n* OS: macos\r\n* Python Version (output of `python --version`): 3.10.11\r\n\r\n### What's your issue about?\r\n\r\nPlease include information like:\r\n\r\n* Install Vyper\r\n* Go outside of vyper folder (make sure can't do any local importing)\r\n* Run `python -c \"import tests; print(tests.__path__)\"`\r\n* Notice it prints the path to Vyper's tests for some reason\r\n\r\nI actually had this issue with some of our repos, but once I fixed those I noticed it was still happening with Vyper.\r\n\r\n### How can it be fixed?\r\n\r\nI tried so many things; the only way I have gotten it to work is by putting the source files in `src` first so like `src/vyper` and then changing the packages key in pyproject.toml to:\r\n\r\n```toml\r\npackages = [\r\n    { include = \"vyper\", from = \"src\" }\r\n]\r\n\r\n```",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/3509/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1638673130",
    "html_url": "https://github.com/vyperlang/vyper/issues/3509#issuecomment-1638673130",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509",
    "id": 1638673130,
    "node_id": "IC_kwDOBGDvrM5hrCrq",
    "user": {
      "login": "antazoey",
      "id": 19540978,
      "node_id": "MDQ6VXNlcjE5NTQwOTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/19540978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antazoey",
      "html_url": "https://github.com/antazoey",
      "followers_url": "https://api.github.com/users/antazoey/followers",
      "following_url": "https://api.github.com/users/antazoey/following{/other_user}",
      "gists_url": "https://api.github.com/users/antazoey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antazoey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antazoey/subscriptions",
      "organizations_url": "https://api.github.com/users/antazoey/orgs",
      "repos_url": "https://api.github.com/users/antazoey/repos",
      "events_url": "https://api.github.com/users/antazoey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antazoey/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-17T18:38:56Z",
    "updated_at": "2023-07-17T18:38:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "realizing this only happened when having vyper installed in editable mode.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1638673130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1638687907",
    "html_url": "https://github.com/vyperlang/vyper/issues/3509#issuecomment-1638687907",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509",
    "id": 1638687907,
    "node_id": "IC_kwDOBGDvrM5hrGSj",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-17T18:48:22Z",
    "updated_at": "2023-07-17T18:48:22Z",
    "author_association": "COLLABORATOR",
    "body": "yea i was going to say that's kind of odd, this line in setup.py should prevent `tests` from being exported: https://github.com/vyperlang/vyper/blob/9e3b9a2b8ae55aa83b5450080f750be15f819de7/setup.py#L91",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1638687907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1638696585",
    "html_url": "https://github.com/vyperlang/vyper/issues/3509#issuecomment-1638696585",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/3509",
    "id": 1638696585,
    "node_id": "IC_kwDOBGDvrM5hrIaJ",
    "user": {
      "login": "antazoey",
      "id": 19540978,
      "node_id": "MDQ6VXNlcjE5NTQwOTc4",
      "avatar_url": "https://avatars.githubusercontent.com/u/19540978?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/antazoey",
      "html_url": "https://github.com/antazoey",
      "followers_url": "https://api.github.com/users/antazoey/followers",
      "following_url": "https://api.github.com/users/antazoey/following{/other_user}",
      "gists_url": "https://api.github.com/users/antazoey/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/antazoey/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/antazoey/subscriptions",
      "organizations_url": "https://api.github.com/users/antazoey/orgs",
      "repos_url": "https://api.github.com/users/antazoey/repos",
      "events_url": "https://api.github.com/users/antazoey/events{/privacy}",
      "received_events_url": "https://api.github.com/users/antazoey/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-17T18:55:09Z",
    "updated_at": "2023-07-17T18:55:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "> yea i was going to say that's kind of odd, this line in setup.py should prevent `tests` from being exported:\r\n> \r\n> https://github.com/vyperlang/vyper/blob/9e3b9a2b8ae55aa83b5450080f750be15f819de7/setup.py#L91\r\n\r\nYes I saw that but have had issues with setting.\r\nIt's doc is a little confusing too:\r\n\r\n```\r\n    'exclude' is a sequence of names to exclude; '*' can be used\r\n        as a wildcard in the names.\r\n        When finding packages, 'foo.*' will exclude all subpackages of 'foo'\r\n        (but not 'foo' itself).\r\n```\r\n\r\nit sounds like you can use to exclude file patterns that within your package folder, like if you were putting tests in there or something. However, it is not clear to me that you can exclude whole directories this way, from reading the doc, maybe I am just being dumb tho.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1638696585/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

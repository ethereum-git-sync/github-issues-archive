{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/2429",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/2429",
  "id": 976105432,
  "node_id": "MDU6SXNzdWU5NzYxMDU0MzI=",
  "number": 2429,
  "title": "VIP: Allow computation of `a · b % 2^256`",
  "user": {
    "login": "reednaaxeelaa",
    "id": 58189177,
    "node_id": "MDQ6VXNlcjU4MTg5MTc3",
    "avatar_url": "https://avatars.githubusercontent.com/u/58189177?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/reednaaxeelaa",
    "html_url": "https://github.com/reednaaxeelaa",
    "followers_url": "https://api.github.com/users/reednaaxeelaa/followers",
    "following_url": "https://api.github.com/users/reednaaxeelaa/following{/other_user}",
    "gists_url": "https://api.github.com/users/reednaaxeelaa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/reednaaxeelaa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/reednaaxeelaa/subscriptions",
    "organizations_url": "https://api.github.com/users/reednaaxeelaa/orgs",
    "repos_url": "https://api.github.com/users/reednaaxeelaa/repos",
    "events_url": "https://api.github.com/users/reednaaxeelaa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/reednaaxeelaa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-08-21T10:31:12Z",
  "updated_at": "2022-03-22T17:38:26Z",
  "closed_at": "2022-03-22T17:38:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Simple Summary\r\n`pow_mod256` currently exist for computing `a ** b % (2 ** 256)` but the equivalent function for computing `a · b % (2 ** 256)` does not exist as `uint256_mulmod` does not allow `c` as `(2 ** 256)`.\r\n\r\n## Motivation\r\n I want to calculate the product of 2 numbers where overflow is almost guaranteed. The easiest/cheapest algorithm is the one described in https://github.com/vyperlang/vyper/issues/1086 which _could_ be implemented in Vyper as:\r\n```python\r\ndef _bigmul(a : uint256, b : uint256) -> uint256[2]:\r\n    r0: uint256 = uint256_mulmod(a, b, 2**256)\r\n    r1: uint256 = uint256_mulmod(a, b, MAX_UINT256)\r\n    r1 = (r1-r0) - convert(r1 < r0, uint256)\r\n\r\n    return [r0, r1]\r\n```\r\nHowever `uint256_mulmod(a, b, 2**256)` is not supported.\r\n\r\nSince `uint256_mulmod(a, b, 2**256)` would be `a · b` without overflow protection, it can used as an explicit way to disable overflow protection potentially fulfilling the needs of https://github.com/vyperlang/vyper/issues/2335.\r\n\r\nIf this is a desired feature, `uint256_addmod(a,b, 2**256)` could be added as a way to disable overflow protection on addition.\r\n\r\n## Specification\r\nUpgrade `uint256_mulmod` and  `uint256_addmod` allowing `c = 2**256` as a special cases without overflow protection.\r\n\r\nAlternatively, maintain the naming scheme of `pow_mod256` for the edge case:\r\n- `mul_mod256(a: uint256, b: uint256) → uint256`\r\n- `add_mod256(a: uint256, b: uint256) → uint256` \r\n\r\nBoth of the function can be implemented directly via the MUL and ADD opcodes since these naturally overflow like modules `2^256` for uint256.\r\n\r\n## Backwards Compatibility\r\nI do not believe this introduces any breaking changes.\r\n\r\n## References\r\nhttps://github.com/vyperlang/vyper/issues/2335\r\nhttps://github.com/vyperlang/vyper/issues/1086\r\nhttps://medium.com/wicketh/mathemagic-full-multiply-27650fec525d\r\n\r\n## Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/)\r\n",
  "closed_by": {
    "login": "charles-cooper",
    "id": 3867501,
    "node_id": "MDQ6VXNlcjM4Njc1MDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/charles-cooper",
    "html_url": "https://github.com/charles-cooper",
    "followers_url": "https://api.github.com/users/charles-cooper/followers",
    "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
    "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
    "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
    "repos_url": "https://api.github.com/users/charles-cooper/repos",
    "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
    "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/2429/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/905627608",
    "html_url": "https://github.com/vyperlang/vyper/issues/2429#issuecomment-905627608",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429",
    "id": 905627608,
    "node_id": "IC_kwDOBGDvrM41-sfY",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-25T15:42:03Z",
    "updated_at": "2021-08-25T15:42:03Z",
    "author_association": "COLLABORATOR",
    "body": "We may just want to introduce `unsafe_` versions of all math ops",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/905627608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/905634580",
    "html_url": "https://github.com/vyperlang/vyper/issues/2429#issuecomment-905634580",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429",
    "id": 905634580,
    "node_id": "IC_kwDOBGDvrM41-uMU",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-25T15:46:49Z",
    "updated_at": "2021-08-25T15:46:49Z",
    "author_association": "COLLABORATOR",
    "body": "Another idea is to introduce a sentinel value which *means* 2**256. Either `mulmod(x, 0)` (YP defines this to be 0 anyway which is pretty useless) or a keyword like `mulmod(x, MAX_UINT256_PLUS_ONE)` (:upside_down_face: ) which can only be used here and just means to use `mod` instead of `mulmod`.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/905634580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/912972165",
    "html_url": "https://github.com/vyperlang/vyper/issues/2429#issuecomment-912972165",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429",
    "id": 912972165,
    "node_id": "IC_kwDOBGDvrM42atmF",
    "user": {
      "login": "reednaaxeelaa",
      "id": 58189177,
      "node_id": "MDQ6VXNlcjU4MTg5MTc3",
      "avatar_url": "https://avatars.githubusercontent.com/u/58189177?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/reednaaxeelaa",
      "html_url": "https://github.com/reednaaxeelaa",
      "followers_url": "https://api.github.com/users/reednaaxeelaa/followers",
      "following_url": "https://api.github.com/users/reednaaxeelaa/following{/other_user}",
      "gists_url": "https://api.github.com/users/reednaaxeelaa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/reednaaxeelaa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/reednaaxeelaa/subscriptions",
      "organizations_url": "https://api.github.com/users/reednaaxeelaa/orgs",
      "repos_url": "https://api.github.com/users/reednaaxeelaa/repos",
      "events_url": "https://api.github.com/users/reednaaxeelaa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/reednaaxeelaa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-04T13:11:04Z",
    "updated_at": "2021-09-04T13:11:45Z",
    "author_association": "NONE",
    "body": "Personally, I prefer syntax that wraps overflows into an explicit behaviour like `mulmod` over `unsafe_` operators. I believe this resonates better with [the Zen of Python](https://www.python.org/dev/peps/pep-0020/): _Explicit is better than implicit_, and the **Auditability** goal of Vyper.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/912972165/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/923231589",
    "html_url": "https://github.com/vyperlang/vyper/issues/2429#issuecomment-923231589",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429",
    "id": 923231589,
    "node_id": "IC_kwDOBGDvrM43B2Vl",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-20T19:34:41Z",
    "updated_at": "2021-09-20T19:35:06Z",
    "author_association": "MEMBER",
    "body": "> We may just want to introduce `unsafe_` versions of all math ops\r\n\r\nMeeting notes: implement `unsafe_*` functions, or implement bigmul",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/923231589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1075431545",
    "html_url": "https://github.com/vyperlang/vyper/issues/2429#issuecomment-1075431545",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2429",
    "id": 1075431545,
    "node_id": "IC_kwDOBGDvrM5AGch5",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-03-22T17:38:14Z",
    "updated_at": "2022-03-22T17:38:26Z",
    "author_association": "COLLABORATOR",
    "body": "should be resolved as of https://github.com/vyperlang/vyper/pull/2629. we decided to go with `unsafe_*` builtins because the intent is clear, and because the analogy carries over to `div` and `sub` (for which there are no matching \"`div_mod`\" and `sub_mod` ops).",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1075431545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

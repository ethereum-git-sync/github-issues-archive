{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/960",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/960/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/960/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/960/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/960",
  "id": 343367710,
  "node_id": "MDU6SXNzdWUzNDMzNjc3MTA=",
  "number": 960,
  "title": "DELEGATECALL vs CALL vs CALLCODE for second layer solutions",
  "user": {
    "login": "tpmccallum",
    "id": 9831342,
    "node_id": "MDQ6VXNlcjk4MzEzNDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9831342?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tpmccallum",
    "html_url": "https://github.com/tpmccallum",
    "followers_url": "https://api.github.com/users/tpmccallum/followers",
    "following_url": "https://api.github.com/users/tpmccallum/following{/other_user}",
    "gists_url": "https://api.github.com/users/tpmccallum/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tpmccallum/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tpmccallum/subscriptions",
    "organizations_url": "https://api.github.com/users/tpmccallum/orgs",
    "repos_url": "https://api.github.com/users/tpmccallum/repos",
    "events_url": "https://api.github.com/users/tpmccallum/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tpmccallum/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 479554967,
      "node_id": "MDU6TGFiZWw0Nzk1NTQ5Njc=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/question",
      "name": "question",
      "color": "cc317c",
      "default": true,
      "description": null
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2018-07-22T01:14:39Z",
  "updated_at": "2022-04-13T15:35:18Z",
  "closed_at": "2022-04-13T15:35:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### What's your issue about?\r\n\r\n#### This is a question\r\n\r\nCould someone please let me know if Vyper will allow the use of DELEGATECALL OPCODE in its smart contracts? \r\nI see that the DELEGATECALL OPCODE is in the opcode file [1]\r\n\r\n#### Here is some context\r\n\r\nAs I understand it, Vyper uses the CALL OPCODE for safety/security reasons. This makes sense. However, there is currently an immense amount of designing and coding of second layer solutions (side chains etc.). \r\n\r\nThese designs and implementations require interactive games (whereby participants on the side chain can provide proofs and so forth). \r\n\r\nThese interactive games require smart contracts to perform DELEGATECALLs as apposed to just CALLs.\r\n\r\n\r\n#### How can it be fixed?\r\n\r\nThere is no fix required, it just is what it is.\r\n\r\n#### Desired outcome\r\nI would like to include this information in the Vyper chapter [2] of Mastering Ethereum. \r\n\r\nI will be happy to just report the definitive answer.  I think it would be really useful for developers to understand this important difference between Vyper and say Solidity in the event that they are designing and building second layer solutions.\r\n\r\n#### Cute animal picture :)\r\n![image](https://user-images.githubusercontent.com/9831342/43041326-5889425a-8da0-11e8-9a2c-f4752a07bc31.png)\r\n\r\nMany thanks\r\nTim\r\n\r\n[1] https://github.com/ethereum/vyper/blob/master/vyper/opcodes.py\r\n[2] https://github.com/ethereumbook/ethereumbook/blob/tech-review2/vyper.asciidoc\r\n",
  "closed_by": {
    "login": "charles-cooper",
    "id": 3867501,
    "node_id": "MDQ6VXNlcjM4Njc1MDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/charles-cooper",
    "html_url": "https://github.com/charles-cooper",
    "followers_url": "https://api.github.com/users/charles-cooper/followers",
    "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
    "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
    "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
    "repos_url": "https://api.github.com/users/charles-cooper/repos",
    "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
    "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/960/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/960/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/406979860",
    "html_url": "https://github.com/vyperlang/vyper/issues/960#issuecomment-406979860",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/960",
    "id": 406979860,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNjk3OTg2MA==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T08:26:23Z",
    "updated_at": "2018-07-23T08:27:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi Tim!\r\n\r\nAt this stage we don't allow direct use of the delegate call (we have identified one place where we will want to use it - #901) - interestingly enough no one has brought up the need for it yet either, and would be interesting to see how we approach it to maximise the secure use cases for it.\r\n\r\nI think the main use case for it in a vyper sense will be when we implement the concept of libraries.\r\n\r\nSyntax wise we would probably go with something like\r\n```\r\ncontract Foo():\r\n    def dosomething(amount: int128): delegate\r\n```\r\nAnd additionally constraint the usage to not allow storage changes after the call.\r\n@fubuloubu thoughts?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/406979860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/407170462",
    "html_url": "https://github.com/vyperlang/vyper/issues/960#issuecomment-407170462",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/960",
    "id": 407170462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwNzE3MDQ2Mg==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-23T19:17:36Z",
    "updated_at": "2018-07-23T19:17:36Z",
    "author_association": "MEMBER",
    "body": "I agree on the library insofar that it would be the first use case in Vyper that would directly require it (internal calls can use it as an optimization strategy, but I think that's out of scope for this discussion).\r\n\r\nSupporting on-chain libraries would be a major feature to add to Vyper. It is not currently supported. We would have to discuss a mechanism for making sure security is respected when adding such a feature, and I have a feeling this is a longer term discussion involving ethPM integration and some checks of proper-initialization of the library. Uninitialized or improperly utilized libraries are a major source of security issues for the \"not well versed\" in EVM fundamentals, so a properly implemented feature with the Vyper Goal of making it maximally difficult to write insecure code would probably look much different than the equivalent Solidity.\r\n\r\n---\r\n\r\nSyntax-wise @jacqueswww I think that might work, but as I note above a LOT more considerations will be need to taken in account for how this feature looks in practice. I would say it's out of scope for Vyper's first release.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/407170462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1098199244",
    "html_url": "https://github.com/vyperlang/vyper/issues/960#issuecomment-1098199244",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/960",
    "id": 1098199244,
    "node_id": "IC_kwDOBGDvrM5BdTDM",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-13T15:35:17Z",
    "updated_at": "2022-04-13T15:35:17Z",
    "author_association": "COLLABORATOR",
    "body": "this is a dup of https://github.com/vyperlang/vyper/issues/1015 - delegatecall can now be accessed with `raw_call`",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1098199244/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

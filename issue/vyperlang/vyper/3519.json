{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/3519",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/3519/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/3519/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/3519/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/3519",
  "id": 1811598683,
  "node_id": "I_kwDOBGDvrM5r-s1b",
  "number": 3519,
  "title": "bug: semantic analysis of imported contract is done with current contract's namespace",
  "user": {
    "login": "tserg",
    "id": 8017125,
    "node_id": "MDQ6VXNlcjgwMTcxMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8017125?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tserg",
    "html_url": "https://github.com/tserg",
    "followers_url": "https://api.github.com/users/tserg/followers",
    "following_url": "https://api.github.com/users/tserg/following{/other_user}",
    "gists_url": "https://api.github.com/users/tserg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tserg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tserg/subscriptions",
    "organizations_url": "https://api.github.com/users/tserg/orgs",
    "repos_url": "https://api.github.com/users/tserg/repos",
    "events_url": "https://api.github.com/users/tserg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tserg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-07-19T09:55:10Z",
  "updated_at": "2023-07-19T09:55:10Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version (output of `vyper --version`): https://github.com/vyperlang/vyper/commit/9e3b9a2b8ae55aa83b5450080f750be15f819de7\r\n* OS: linux\r\n* Python Version (output of `python --version`): 3.10.4\r\n\r\n### What's your issue about?\r\n\r\nWhen an imported interface is typed, the namespace of the current contract is used to generate the interface type from the AST of the imported contract. This means that the imported contract's function definitions may use the types and constants defined in the current contract. For example `a.vy` would compile successfully although `b.vy`, which is imported by `a.vy` makes use of `S` and `a`, both defined in `a.vy`.\r\n\r\n```\r\n# a.vy\r\n\r\nimport b as B\r\n\r\nstruct S:\r\n    x: uint256\r\n\r\na: constant(uint256) = 12\r\n\r\n@external\r\ndef bar(addr: address):\r\n    x: B = B(addr)\r\n    y: S = x.foo()\r\n```\r\n```\r\n# b.vy\r\n\r\n@external\r\ndef foo(a: uint256 = a) -> S:\r\n    return S({x: 12})\r\n```\r\n\r\nh/t @trocher \r\n\r\n### How can it be fixed?\r\n\r\nFill this in if you know how to fix it.\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/3519/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/3519/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[

]

{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/1551",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/1551/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/1551/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/1551/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/1551",
  "id": 472548616,
  "node_id": "MDU6SXNzdWU0NzI1NDg2MTY=",
  "number": 1551,
  "title": "Nonsense struct output with inline returns",
  "user": {
    "login": "NoahZinsmeister",
    "id": 3760414,
    "node_id": "MDQ6VXNlcjM3NjA0MTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3760414?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/NoahZinsmeister",
    "html_url": "https://github.com/NoahZinsmeister",
    "followers_url": "https://api.github.com/users/NoahZinsmeister/followers",
    "following_url": "https://api.github.com/users/NoahZinsmeister/following{/other_user}",
    "gists_url": "https://api.github.com/users/NoahZinsmeister/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/NoahZinsmeister/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/NoahZinsmeister/subscriptions",
    "organizations_url": "https://api.github.com/users/NoahZinsmeister/orgs",
    "repos_url": "https://api.github.com/users/NoahZinsmeister/repos",
    "events_url": "https://api.github.com/users/NoahZinsmeister/events{/privacy}",
    "received_events_url": "https://api.github.com/users/NoahZinsmeister/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 479554962,
      "node_id": "MDU6TGFiZWw0Nzk1NTQ5NjI=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/bug",
      "name": "bug",
      "color": "ee0701",
      "default": true,
      "description": "Bug that shouldn't change language semantics when fixed."
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2019-07-24T21:40:02Z",
  "updated_at": "2019-07-29T21:06:37Z",
  "closed_at": "2019-07-29T21:06:37Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version (output of `vyper --version`): 0.1.0b10\r\n* OS: osx\r\n* Python Version (output of `python --version`): Python 3.7.2\r\n* Environment (output of `pip freeze`): \r\n```\r\neth-tester==0.1.0b39\r\npy-evm==0.2.0a42\r\npytest==5.0.1\r\nvyper==0.1.0b10\r\nweb3==5.0.0b2\r\n```\r\n\r\n### What's your issue about?\r\n\r\nWhen `@public` functions which return structs are returned inline from other `@public` functions, the output is nonsense values.\r\n\r\nIn the following code, `wrap_get_my_struct_WORKING` returns the correct data, whereas `wrap_get_my_struct_BROKEN` returns nonsense.\r\n\r\n```python\r\nstruct MyStruct:\r\n    e1: decimal\r\n    e2: timestamp\r\n\r\n\r\n# @dev Construct a MyStruct.\r\n@public\r\n@constant\r\ndef get_my_struct(_e1: decimal, _e2: timestamp) -> MyStruct:\r\n    return MyStruct({e1: _e1, e2: _e2})\r\n \r\n\r\n# @dev Wrap self.get_my_struct.\r\n@public\r\n@constant\r\ndef wrap_get_my_struct_WORKING(_e1: decimal) -> MyStruct:\r\n    testing: MyStruct = self.get_my_struct(_e1, block.timestamp)\r\n    return testing\r\n\r\n# @dev Wrap self.get_my_struct.\r\n@public\r\n@constant\r\ndef wrap_get_my_struct_BROKEN(_e1: decimal) -> MyStruct:\r\n    return self.get_my_struct(_e1, block.timestamp)\r\n```\r\n",
  "closed_by": {
    "login": "jacqueswww",
    "id": 6917456,
    "node_id": "MDQ6VXNlcjY5MTc0NTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacqueswww",
    "html_url": "https://github.com/jacqueswww",
    "followers_url": "https://api.github.com/users/jacqueswww/followers",
    "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
    "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
    "repos_url": "https://api.github.com/users/jacqueswww/repos",
    "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/1551/reactions",
    "total_count": 2,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 2
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/1551/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

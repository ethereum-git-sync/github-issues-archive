{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/3297",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/3297/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/3297/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/3297/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/3297",
  "id": 1593613154,
  "node_id": "I_kwDOBGDvrM5e_Jti",
  "number": 3297,
  "title": "Unclear error message when annotating `implements` with something else than a `Name`",
  "user": {
    "login": "trocher",
    "id": 43437004,
    "node_id": "MDQ6VXNlcjQzNDM3MDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/43437004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/trocher",
    "html_url": "https://github.com/trocher",
    "followers_url": "https://api.github.com/users/trocher/followers",
    "following_url": "https://api.github.com/users/trocher/following{/other_user}",
    "gists_url": "https://api.github.com/users/trocher/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/trocher/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/trocher/subscriptions",
    "organizations_url": "https://api.github.com/users/trocher/orgs",
    "repos_url": "https://api.github.com/users/trocher/repos",
    "events_url": "https://api.github.com/users/trocher/events{/privacy}",
    "received_events_url": "https://api.github.com/users/trocher/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 4038639649,
      "node_id": "LA_kwDOBGDvrM7wuMAh",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/bug%20-%20typechecker",
      "name": "bug - typechecker",
      "color": "51B431",
      "default": false,
      "description": "issue with typechecker"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-02-21T14:48:35Z",
  "updated_at": "2023-02-28T03:17:01Z",
  "closed_at": "2023-02-28T03:17:01Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version (output of `vyper --version`): 0.3.8+commit.7ff8f307\r\n* OS: OSX\r\n* Python Version (output of `python --version`): 3.8.0\r\n\r\n### What's your issue about?\r\n\r\nWhen improperly using `implements` and passing it something else than a `Name` as an annotation, the compiler outputs an unclear error as the `UnexpectedNodeType` it tries to raise is constructed with 2 arguments instead of 1.\r\nhttps://github.com/vyperlang/vyper/blob/0a64906a02018aa3e967c311d9dd89eba273bb11/vyper/ast/nodes.py#L1404-L1405\r\n\r\nAdditionally, `UnexpectedNodeType` is an exception used to notify the user that what happened is an unhandled internal compiler error while it does not seem to be the case here.\r\n\r\nThe following code outputs the given error:\r\n\r\n```Vyper\r\nimplements: self.x\r\n```\r\n\r\n```Bash\r\nTraceback (most recent call last):\r\n  File \"/Users/trocher/Documents/thesis/vyper/venv/bin/vyper\", line 11, in <module>\r\n    load_entry_point('vyper==0.3.8', 'console_scripts', 'vyper')()\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/cli/vyper_compile.py\", line 57, in _parse_cli_args\r\n    return _parse_args(sys.argv[1:])\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/cli/vyper_compile.py\", line 154, in _parse_args\r\n    compiled = compile_files(\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/cli/vyper_compile.py\", line 298, in compile_files\r\n    interface_codes=get_interface_codes(root_path, contract_sources),\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/cli/vyper_compile.py\", line 200, in get_interface_codes\r\n    interface_codes = extract_file_interface_imports(code)\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/cli/utils.py\", line 30, in extract_file_interface_imports\r\n    ast_tree = vy_ast.parse_to_ast(code)\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/utils.py\", line 54, in parse_to_ast\r\n    return vy_ast.get_node(py_ast)  # type: ignore\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/nodes.py\", line 92, in get_node\r\n    return vy_class(parent=parent, **ast_struct)\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/nodes.py\", line 274, in __init__\r\n    value = [_to_node(i, self) for i in value]\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/nodes.py\", line 274, in <listcomp>\r\n    value = [_to_node(i, self) for i in value]\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/nodes.py\", line 141, in _to_node\r\n    return get_node(obj, parent)\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/nodes.py\", line 92, in get_node\r\n    return vy_class(parent=parent, **ast_struct)\r\n  File \"/Users/trocher/Documents/thesis/vyper/vyper/ast/nodes.py\", line 1404, in __init__\r\n    raise UnexpectedNodeType(\"not an identifier\", self.annotation)\r\nTypeError: __init__() takes from 1 to 2 positional arguments but 3 were given\r\n```",
  "closed_by": {
    "login": "fubuloubu",
    "id": 3859395,
    "node_id": "MDQ6VXNlcjM4NTkzOTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fubuloubu",
    "html_url": "https://github.com/fubuloubu",
    "followers_url": "https://api.github.com/users/fubuloubu/followers",
    "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
    "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
    "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
    "repos_url": "https://api.github.com/users/fubuloubu/repos",
    "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/3297/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/3297/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/1651",
  "id": 512008898,
  "node_id": "MDU6SXNzdWU1MTIwMDg4OTg=",
  "number": 1651,
  "title": "VIP: Add support for Blake2 precompile",
  "user": {
    "login": "fubuloubu",
    "id": 3859395,
    "node_id": "MDQ6VXNlcjM4NTkzOTU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fubuloubu",
    "html_url": "https://github.com/fubuloubu",
    "followers_url": "https://api.github.com/users/fubuloubu/followers",
    "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
    "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
    "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
    "repos_url": "https://api.github.com/users/fubuloubu/repos",
    "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 479554964,
      "node_id": "MDU6TGFiZWw0Nzk1NTQ5NjQ=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 479554965,
      "node_id": "MDU6TGFiZWw0Nzk1NTQ5NjU=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/help%20wanted",
      "name": "help wanted",
      "color": "128A0C",
      "default": true,
      "description": null
    },
    {
      "id": 757250644,
      "node_id": "MDU6TGFiZWw3NTcyNTA2NDQ=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/VIP:%20Approved",
      "name": "VIP: Approved",
      "color": "98f765",
      "default": false,
      "description": "VIP Approved"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2019-10-24T15:09:40Z",
  "updated_at": "2022-08-05T14:39:50Z",
  "closed_at": null,
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Simple Summary\r\nAdd support for `blake2` cryptographic hash function\r\n\r\n## Motivation\r\nBlake2 is a newer but popular hash function that is being used in a variety of circumstances including ZKP due to it's efficiency under pairing operations. Support in Vyper would make it easier to develop applications that use it.\r\n\r\n## Specification\r\nSupport for Blake2 is being added in the upcoming Istanbul hardfork. The specification is in [EIP-152](https://eips.ethereum.org/EIPS/eip-152), and a reference implementation in a client is here: https://github.com/ethereum/py-evm/blob/master/eth/precompiles/blake2.py\r\n\r\nFunction signature:\r\n```\r\nblake2b_f() -> bytes32[2]\r\n```\r\n## Backwards Compatibility\r\nNo backwards incompatibilities\r\n\r\n## Dependencies\r\nNo dependencies\r\n\r\n## Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/1651/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/545973323",
    "html_url": "https://github.com/vyperlang/vyper/issues/1651#issuecomment-545973323",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
    "id": 545973323,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTk3MzMyMw==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-24T15:30:49Z",
    "updated_at": "2019-10-24T15:30:49Z",
    "author_association": "MEMBER",
    "body": "Note: might be best to add this feature via #1230 ruleset switch so there it fails to compile under pre-Istanbul rules",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/545973323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/596836674",
    "html_url": "https://github.com/vyperlang/vyper/issues/1651#issuecomment-596836674",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
    "id": 596836674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5NjgzNjY3NA==",
    "user": {
      "login": "SRCoughlin",
      "id": 12475280,
      "node_id": "MDQ6VXNlcjEyNDc1Mjgw",
      "avatar_url": "https://avatars.githubusercontent.com/u/12475280?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SRCoughlin",
      "html_url": "https://github.com/SRCoughlin",
      "followers_url": "https://api.github.com/users/SRCoughlin/followers",
      "following_url": "https://api.github.com/users/SRCoughlin/following{/other_user}",
      "gists_url": "https://api.github.com/users/SRCoughlin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SRCoughlin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SRCoughlin/subscriptions",
      "organizations_url": "https://api.github.com/users/SRCoughlin/orgs",
      "repos_url": "https://api.github.com/users/SRCoughlin/repos",
      "events_url": "https://api.github.com/users/SRCoughlin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SRCoughlin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-10T00:06:09Z",
    "updated_at": "2020-03-10T00:06:09Z",
    "author_association": "NONE",
    "body": "Please also include the `blake2s` hashing function.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/596836674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/653495250",
    "html_url": "https://github.com/vyperlang/vyper/issues/1651#issuecomment-653495250",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
    "id": 653495250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzQ5NTI1MA==",
    "user": {
      "login": "iamdefinitelyahuman",
      "id": 35276322,
      "node_id": "MDQ6VXNlcjM1Mjc2MzIy",
      "avatar_url": "https://avatars.githubusercontent.com/u/35276322?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iamdefinitelyahuman",
      "html_url": "https://github.com/iamdefinitelyahuman",
      "followers_url": "https://api.github.com/users/iamdefinitelyahuman/followers",
      "following_url": "https://api.github.com/users/iamdefinitelyahuman/following{/other_user}",
      "gists_url": "https://api.github.com/users/iamdefinitelyahuman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/iamdefinitelyahuman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/iamdefinitelyahuman/subscriptions",
      "organizations_url": "https://api.github.com/users/iamdefinitelyahuman/orgs",
      "repos_url": "https://api.github.com/users/iamdefinitelyahuman/repos",
      "events_url": "https://api.github.com/users/iamdefinitelyahuman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/iamdefinitelyahuman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-03T11:13:54Z",
    "updated_at": "2020-07-03T11:13:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "```python\r\nblake2b_f(\r\n    rounds: uint256,\r\n    h: bytes32[2],\r\n    m: bytes32[4],\r\n    t0: Bytes[8],\r\n    t1: Bytes[8],\r\n    f: bool\r\n) -> bytes32[2]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/653495250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/653542757",
    "html_url": "https://github.com/vyperlang/vyper/issues/1651#issuecomment-653542757",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
    "id": 653542757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MzU0Mjc1Nw==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-03T13:13:25Z",
    "updated_at": "2020-07-03T13:13:53Z",
    "author_association": "MEMBER",
    "body": "We shouldn't have to make it so configurable. It should look more like:\r\n```\r\nblake2b(msg: Bytes) -> bytes32[2]\r\nblake2s(msg: Bytes) -> bytes32\r\n```\r\nI think it's 9 rounds for `blake2b` and 7 rounds for `blake2s`. Then the message should be recursively hashed 4 32-byte chunks at a time until it's done. Not sure what `h` and `t0`/`t1` are, probably KDF features (make them empty)",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/653542757/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1205783759",
    "html_url": "https://github.com/vyperlang/vyper/issues/1651#issuecomment-1205783759",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
    "id": 1205783759,
    "node_id": "IC_kwDOBGDvrM5H3szP",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-04T21:24:00Z",
    "updated_at": "2022-08-04T21:24:00Z",
    "author_association": "COLLABORATOR",
    "body": "> Please also include the `blake2s` hashing function.\r\n\r\ncoming up to speed on this -- how to calculate `blake2s`? is it somehow derivable from `blake2b_f` (which, just to make sure we're on the same page, can be calculated by calling the precompile at `0x09`)?",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1205783759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1206531398",
    "html_url": "https://github.com/vyperlang/vyper/issues/1651#issuecomment-1206531398",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1651",
    "id": 1206531398,
    "node_id": "IC_kwDOBGDvrM5H6jVG",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-08-05T14:38:56Z",
    "updated_at": "2022-08-05T14:39:50Z",
    "author_association": "MEMBER",
    "body": "> > Please also include the `blake2s` hashing function.\n> \n> coming up to speed on this -- how to calculate `blake2s`? is it somehow derivable from `blake2b_f` (which, just to make sure we're on the same page, can be calculated by calling the precompile at `0x09`)?\n\nThe precompile at 0x09 is a large portion of what the blake2 series of hash functions use internally to compute hashes. There are several hash functions in this class, most notably `blake2b` and `blake2s`, which require a small amount of preprocessing and assume a few parameters for the call into 0x09.\n\nOnce that call is completed, the resulting hash would either be 256 bits (`blake2b`) or 512 bits (`blake2s`) to be returned from the function\n\nMost of the time people would want to use just `blake2b`, but `blake2s` is also useful. Being able to call the internal function directly through the precompile is a rarer use case. \n\nAs a historical note, the precompile at 0x09 works with an internal method of the blake2 series of hash functions because that's what Zcash's PoW algorithm uses, and when it was created people wanted to bridge to Zcash more cheaply",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1206531398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/671",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/671/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/671/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/671/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/671",
  "id": 296339618,
  "node_id": "MDU6SXNzdWUyOTYzMzk2MTg=",
  "number": 671,
  "title": "Only allow one function call in assignment expressions",
  "user": {
    "login": "jacqueswww",
    "id": 6917456,
    "node_id": "MDQ6VXNlcjY5MTc0NTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacqueswww",
    "html_url": "https://github.com/jacqueswww",
    "followers_url": "https://api.github.com/users/jacqueswww/followers",
    "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
    "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
    "repos_url": "https://api.github.com/users/jacqueswww/repos",
    "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-02-12T11:17:24Z",
  "updated_at": "2018-02-27T02:35:17Z",
  "closed_at": "2018-02-27T02:35:17Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### What's your issue about?\r\n\r\nAn expression should only allow constant expression to be used.\r\n\r\n```python\r\nx: decimal\r\n\r\n@constant\r\n@private\r\ndef a () -> num:\r\n    return 1\r\n\r\n@private\r\ndef b () -> num:\r\n    self.x = 333.33\r\n    return 2\r\n\r\n@public\r\ndef test():\r\n    a: num = 3 * self.a()  # allowed\r\n    b: num = self.a() or 4 * self.b()  # not allowed \r\n```\r\n\r\n### How can it be fixed?\r\n\r\nLet's discuss any downsides, and then implement it.\r\n\r\n\r\n#### Cute Animal Picture\r\n\r\n![](http://www.dogster.com/wp-content/uploads/2017/03/shutterstock_puppy_paws_thumb.jpeg)",
  "closed_by": {
    "login": "DavidKnott",
    "id": 17552858,
    "node_id": "MDQ6VXNlcjE3NTUyODU4",
    "avatar_url": "https://avatars.githubusercontent.com/u/17552858?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DavidKnott",
    "html_url": "https://github.com/DavidKnott",
    "followers_url": "https://api.github.com/users/DavidKnott/followers",
    "following_url": "https://api.github.com/users/DavidKnott/following{/other_user}",
    "gists_url": "https://api.github.com/users/DavidKnott/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DavidKnott/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DavidKnott/subscriptions",
    "organizations_url": "https://api.github.com/users/DavidKnott/orgs",
    "repos_url": "https://api.github.com/users/DavidKnott/repos",
    "events_url": "https://api.github.com/users/DavidKnott/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DavidKnott/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/671/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/671/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/364930666",
    "html_url": "https://github.com/vyperlang/vyper/issues/671#issuecomment-364930666",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/671",
    "id": 364930666,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NDkzMDY2Ng==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-12T14:01:26Z",
    "updated_at": "2018-02-12T14:01:26Z",
    "author_association": "MEMBER",
    "body": "I don't think there's necessarily a problem having one state changing function call another, so I choose to interpret this as one state changing function calling another that returns stuff.\r\n\r\nI think in general, we should move to discouraging returns from state changing functions in order to stop design patterns from developing around this poor practice (in my opinion). This looks like a great corner case for that paradigm, so I agree with this issue given that context.\r\n\r\nI sort of picture \"returns\" for a state changing function (from a usage perspective) being receipts, which match the asynchronous nature of transactions in Ethereum.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/364930666/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/367653801",
    "html_url": "https://github.com/vyperlang/vyper/issues/671#issuecomment-367653801",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/671",
    "id": 367653801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM2NzY1MzgwMQ==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-02-22T11:34:33Z",
    "updated_at": "2018-02-22T11:34:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "As discussed on the PR. Makes sense to only address `a = self.a() or self.b()` scenarios I have updated the issue accordingly.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/367653801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

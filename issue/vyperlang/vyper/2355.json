{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/2355",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/2355/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/2355/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/2355/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/2355",
  "id": 862019642,
  "node_id": "MDU6SXNzdWU4NjIwMTk2NDI=",
  "number": 2355,
  "title": "VIP: Decimal type precision increase",
  "user": {
    "login": "branmcf",
    "id": 8098163,
    "node_id": "MDQ6VXNlcjgwOTgxNjM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8098163?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/branmcf",
    "html_url": "https://github.com/branmcf",
    "followers_url": "https://api.github.com/users/branmcf/followers",
    "following_url": "https://api.github.com/users/branmcf/following{/other_user}",
    "gists_url": "https://api.github.com/users/branmcf/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/branmcf/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/branmcf/subscriptions",
    "organizations_url": "https://api.github.com/users/branmcf/orgs",
    "repos_url": "https://api.github.com/users/branmcf/repos",
    "events_url": "https://api.github.com/users/branmcf/events{/privacy}",
    "received_events_url": "https://api.github.com/users/branmcf/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 751622094,
      "node_id": "MDU6TGFiZWw3NTE2MjIwOTQ=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/VIP:%20Discussion",
      "name": "VIP: Discussion",
      "color": "000000",
      "default": false,
      "description": "Used to denote VIPs and more complex issues that are waiting discussion in a meeting"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-04-19T22:23:54Z",
  "updated_at": "2021-06-09T15:27:45Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "## Simple Summary\r\nIncrease the precision of the `decimal` type to at least 18 decimal places.\r\n\r\n## Motivation\r\nThe ability to do fixed-point math out of the box is an attractive feature of the Vyper language. However, because most ERC20s have 18 decimals of precision, operation on \"scaled-down\" uint256 values leads to precision loss.\r\n\r\nFor example:\r\n```python\r\n# lossyDecimal is 1.0000000000 instead of 1.000000000000000001\r\nlossyDecimal: decimal = convert(1000000000000000001, decimal) / 1000000000000000000.0\r\n```\r\nIncreasing the precision of the `decimal` type to at least 18 decimal places would fix this precision loss when working with most ERC20s (and DeFi protocols). This change is in alignment with the stated principle of Language Simplicity because it will allow developers to do fixed-point math for ERC20s/DeFi that \"just works\".\r\n\r\n## Specification\r\n```python\r\n# A token balance with 18 decimals of precision represented as a uint256\r\ntokenBalance: uint256 = 1000000000000000001\r\n\r\n# Scale down the token balance and store it as a decimal\r\ntokenBalanceScaledDown: decimal = convert(tokenBalance, decimal) / 1000000000000000000.0\r\n\r\n# Do something with scaled down tokenBalance\r\n...\r\n\r\n# Scale the tokenBalance back up\r\ntokenBalanceScaledUp: uint256 = convert(tokenBalanceScaledDown * 1000000000000000000.0, uint256)\r\n\r\n# require that no precision was lost when scaling `tokenBalance`\r\nassert tokenBalance == tokenBalanceScaledUp\r\n```\r\n## Backwards Compatibility\r\nThis VIP introduces a backward incompatibility because it would change the native decimals amount. This is a breaking change.\r\n\r\n## Dependencies\r\nNo dependencies\r\n\r\n## References\r\nNo references\r\n\r\n## Copyright\r\nCopyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/)\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/2355/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/2355/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/857768102",
    "html_url": "https://github.com/vyperlang/vyper/issues/2355#issuecomment-857768102",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2355",
    "id": 857768102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1Nzc2ODEwMg==",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-09T14:56:32Z",
    "updated_at": "2021-06-09T14:56:32Z",
    "author_association": "COLLABORATOR",
    "body": "Possible duplicate of https://github.com/vyperlang/vyper/issues/1807",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/857768102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/857802033",
    "html_url": "https://github.com/vyperlang/vyper/issues/2355#issuecomment-857802033",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2355",
    "id": 857802033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzgwMjAzMw==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-09T15:27:45Z",
    "updated_at": "2021-06-09T15:27:45Z",
    "author_association": "MEMBER",
    "body": "#1807 would be the longer term fix, but short term here the idea was that most people prefer 18 digit decimals vs. 10",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/857802033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

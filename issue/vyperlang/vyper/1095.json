{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/1095",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/1095",
  "id": 383810399,
  "node_id": "MDU6SXNzdWUzODM4MTAzOTk=",
  "number": 1095,
  "title": "Tests of ERC20 Solidity compatible doesn't work",
  "user": {
    "login": "nrryuya",
    "id": 22876645,
    "node_id": "MDQ6VXNlcjIyODc2NjQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/22876645?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nrryuya",
    "html_url": "https://github.com/nrryuya",
    "followers_url": "https://api.github.com/users/nrryuya/followers",
    "following_url": "https://api.github.com/users/nrryuya/following{/other_user}",
    "gists_url": "https://api.github.com/users/nrryuya/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nrryuya/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nrryuya/subscriptions",
    "organizations_url": "https://api.github.com/users/nrryuya/orgs",
    "repos_url": "https://api.github.com/users/nrryuya/repos",
    "events_url": "https://api.github.com/users/nrryuya/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nrryuya/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2018-11-23T12:38:43Z",
  "updated_at": "2018-12-13T00:16:45Z",
  "closed_at": "2018-12-13T00:16:45Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version: 0.1.0b4\r\n* OS: osx\r\n* Python Version: 3.6.3\r\n\r\n### What's your issue about?\r\n\r\nI'm going to update ERC20 in `example` repository to the latest Vyper version (`0.1.0b4`) and working on the test of this. I tried the current tests in [tests/examples/tokens/ERC20_solidity_compatible](https://github.com/ethereum/vyper/tree/master/tests/examples/tokens/ERC20_solidity_compatible) with `python run_tests.py ` command but it causes this error.\r\n\r\n```\r\n(vyper) nrryuya:ERC20_solidity_compatible nrryuya1$ python run_tests.py \r\n\r\nFailed to import bitcoin. This is not a fatal error but does\r\nmean that you will not be able to determine the address from\r\nyour wallet file.\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \r\nRunning Solidity-compatible ERC20 tests, Suite 1 \r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nInitializing chain from provided state\r\nInitializing chain from provided state\r\nERROR\r\nInitializing chain from provided state\r\nInitializing chain from provided state\r\ntest_deposit_and_withdraw (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_failed_send_in_withdraw (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_initial_state (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_maxInts (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_payability (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_raw_logs (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_totalSupply (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_transfer (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\ntest_transferFromAndAllowance (test.erc20_tests_1.TestSolidity1ERC20) ... ERROR\r\nInitializing chain from provided state\r\nInitializing chain from provided state\r\ntest_deposit_and_withdraw (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_failed_send_in_withdraw (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_initial_state (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_maxInts (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_payability (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_raw_logs (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_totalSupply (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_transfer (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\ntest_transferFromAndAllowance (test.erc20_tests_1.TestSolidity2ERC20) ... ERROR\r\n\r\n======================================================================\r\nERROR: setUpClass (test.erc20_tests_1.TestVyperERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 343, in setUpClass\r\n    cls.t.languages['vyper'] = compiler.Compiler()\r\nAttributeError: module 'vyper.compiler' has no attribute 'Compiler'\r\n\r\n======================================================================\r\nERROR: test_deposit_and_withdraw (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_failed_send_in_withdraw (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_initial_state (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_maxInts (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_payability (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_raw_logs (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_totalSupply (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_transfer (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_transferFromAndAllowance (test.erc20_tests_1.TestSolidity1ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 406, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_deposit_and_withdraw (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_failed_send_in_withdraw (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_initial_state (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_maxInts (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_payability (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_raw_logs (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_totalSupply (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_transfer (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_transferFromAndAllowance (test.erc20_tests_1.TestSolidity2ERC20)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 422, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py\", line 52, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n----------------------------------------------------------------------\r\nRan 18 tests in 0.415s\r\n\r\nFAILED (errors=19)\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \r\nFinished Solidity-compatible ERC20 tests, Suite 1 \r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \r\nRunning Solidity-compatible ERC20 tests, Suite 2 \r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nInitializing chain from provided state\r\nTesting nonvyper/ERC20_solidity_2.sol\r\nDeploying contract at 09f24956cac320a987934f5da542b19a4e1ff04e used 371261 gas\r\ntest_all (test.erc20_tests_2.ERC20_solidity_2_sol) ... ERROR\r\nInitializing chain from provided state\r\nTesting nonvyper/ERC20_solidity_1.sol\r\nDeploying contract at 09f24956cac320a987934f5da542b19a4e1ff04e used 378559 gas\r\ntest_all (test.erc20_tests_2.ERC20_solidity_1_sol) ... ERROR\r\n\r\n======================================================================\r\nERROR: test_all (test.erc20_tests_2.ERC20_solidity_2_sol)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_2.py\", line 144, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/utils/pyethereum_test_utils.py\", line 54, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n======================================================================\r\nERROR: test_all (test.erc20_tests_2.ERC20_solidity_1_sol)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_2.py\", line 144, in setUp\r\n    super().setUp()\r\n  File \"/Users/nrryuya1/work/blockchain/nrryuya/vyper/tests/examples/tokens/ERC20_solidity_compatible/utils/pyethereum_test_utils.py\", line 54, in setUp\r\n    self.s.revert(self.initial_state)\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/ethereum/tools/tester.py\", line 297, in revert\r\n    self.block.transactions = self.block.transactions[:txcount]\r\n  File \"/Users/nrryuya1/.pyenv/versions/vyper/lib/python3.6/site-packages/rlp/sedes/serializable.py\", line 334, in field_fn_setter\r\n    raise AttributeError(\"can't set attribute\")\r\nAttributeError: can't set attribute\r\n\r\n----------------------------------------------------------------------\r\nRan 2 tests in 0.287s\r\n\r\nFAILED (errors=2)\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \r\nFinished Solidity-compatible ERC20 tests, Suite 2 \r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nFAILED : Test failures encounting, exiting with error.\r\n```\r\n\r\n### How can it be fixed?\r\nAs the first `AttributeError: module 'vyper.compiler' has no attribute 'Compiler'` shows, `Compiler` object is removed from `vyper/compiler.py` in [this commit](https://github.com/ethereum/vyper/commit/077c72a6e14e8386bffc92229cc37da7afaf1f98). We need to fix this somehow?\r\n\r\nEDIT: I added the `Compiler` class in `compiler.py` and `AttributeError: module 'vyper.compiler' has no attribute 'Compiler'` disappeared. However, `AttributeError: can't set attribute` still remains.\r\n\r\n#### Cute Animal Picture\r\n\r\n![image](https://user-images.githubusercontent.com/22876645/48943908-143d5080-ef68-11e8-83b4-dd389fe6c3c4.png)\r\n\r\n",
  "closed_by": {
    "login": "jacqueswww",
    "id": 6917456,
    "node_id": "MDQ6VXNlcjY5MTc0NTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jacqueswww",
    "html_url": "https://github.com/jacqueswww",
    "followers_url": "https://api.github.com/users/jacqueswww/followers",
    "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
    "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
    "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
    "repos_url": "https://api.github.com/users/jacqueswww/repos",
    "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/1095/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441257957",
    "html_url": "https://github.com/vyperlang/vyper/issues/1095#issuecomment-441257957",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095",
    "id": 441257957,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTI1Nzk1Nw==",
    "user": {
      "login": "nrryuya",
      "id": 22876645,
      "node_id": "MDQ6VXNlcjIyODc2NjQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/22876645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrryuya",
      "html_url": "https://github.com/nrryuya",
      "followers_url": "https://api.github.com/users/nrryuya/followers",
      "following_url": "https://api.github.com/users/nrryuya/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrryuya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrryuya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrryuya/subscriptions",
      "organizations_url": "https://api.github.com/users/nrryuya/orgs",
      "repos_url": "https://api.github.com/users/nrryuya/repos",
      "events_url": "https://api.github.com/users/nrryuya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrryuya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-23T14:42:32Z",
    "updated_at": "2018-11-23T14:42:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is also documented [here](https://raw.githubusercontent.com/ethereum/vyper/master/docs/testing-deploying-contracts.rst) (but it's not rendered correctly at [docs](https://vyper.readthedocs.io/en/latest/testing-deploying-contracts.html) ?)",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441257957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441318779",
    "html_url": "https://github.com/vyperlang/vyper/issues/1095#issuecomment-441318779",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095",
    "id": 441318779,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMxODc3OQ==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-23T21:16:33Z",
    "updated_at": "2018-11-23T21:16:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Before starting with this PR, just wait for #1089 to be merged. As it #1089 changes the compiler interface slightly.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441318779/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441337925",
    "html_url": "https://github.com/vyperlang/vyper/issues/1095#issuecomment-441337925",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095",
    "id": 441337925,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzNzkyNQ==",
    "user": {
      "login": "nrryuya",
      "id": 22876645,
      "node_id": "MDQ6VXNlcjIyODc2NjQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/22876645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrryuya",
      "html_url": "https://github.com/nrryuya",
      "followers_url": "https://api.github.com/users/nrryuya/followers",
      "following_url": "https://api.github.com/users/nrryuya/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrryuya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrryuya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrryuya/subscriptions",
      "organizations_url": "https://api.github.com/users/nrryuya/orgs",
      "repos_url": "https://api.github.com/users/nrryuya/repos",
      "events_url": "https://api.github.com/users/nrryuya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrryuya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T02:20:20Z",
    "updated_at": "2018-11-24T02:20:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "I'm not sure but these tests for `bad_code` is not necessary anymore?\r\nhttps://github.com/ethereum/vyper/blob/master/tests/examples/tokens/ERC20_solidity_compatible/test/erc20_tests_1.py#L346",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441337925/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441357434",
    "html_url": "https://github.com/vyperlang/vyper/issues/1095#issuecomment-441357434",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095",
    "id": 441357434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTM1NzQzNA==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-24T10:19:15Z",
    "updated_at": "2018-11-24T10:19:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think it actually is required, the reason is that one needs bad contract to access the specific branch.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441357434/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441882212",
    "html_url": "https://github.com/vyperlang/vyper/issues/1095#issuecomment-441882212",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1095",
    "id": 441882212,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTg4MjIxMg==",
    "user": {
      "login": "nrryuya",
      "id": 22876645,
      "node_id": "MDQ6VXNlcjIyODc2NjQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/22876645?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nrryuya",
      "html_url": "https://github.com/nrryuya",
      "followers_url": "https://api.github.com/users/nrryuya/followers",
      "following_url": "https://api.github.com/users/nrryuya/following{/other_user}",
      "gists_url": "https://api.github.com/users/nrryuya/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nrryuya/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nrryuya/subscriptions",
      "organizations_url": "https://api.github.com/users/nrryuya/orgs",
      "repos_url": "https://api.github.com/users/nrryuya/repos",
      "events_url": "https://api.github.com/users/nrryuya/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nrryuya/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-11-27T03:07:06Z",
    "updated_at": "2018-11-27T03:07:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks. The code `self.num_issued = uint256_add` which is replaced to generate the `bad_code` doesn't exists so we need to modify that.\r\n\r\nAlso, AFAIK `deposit` & `withdraw` which allow users to exchange token at the ratio 1 wei = 1 token anytime is not a standard implementation. To implement `mint` and `burn` instead will make it more generally reusable while it's still enable the \"bad code tests\".\r\n\r\nI want to refactor ERC20 example as follows.\r\n- Unify three types of ERC20 into one which has `mint` & `burn`, also name, symbol and decimal like vypercoin.vy \r\n- Reuse `ERC20_solidity_compatible` tests  (because they are good one which tests for full branch/decision, statement coverage) with some modification\r\n- Add the tests to CI\r\n\r\nI wonder rewriting `ERC20_solidity_compatible` tests with pytest, which makes it simple to add to CI and remove the dependency on pyethereum. ",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/441882212/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/2903",
  "id": 1266443137,
  "node_id": "I_kwDOBGDvrM5LfGOB",
  "number": 2903,
  "title": "Variables cannot be declared both `immutable` and `public`",
  "user": {
    "login": "jakerockland",
    "id": 8602661,
    "node_id": "MDQ6VXNlcjg2MDI2NjE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jakerockland",
    "html_url": "https://github.com/jakerockland",
    "followers_url": "https://api.github.com/users/jakerockland/followers",
    "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
    "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
    "organizations_url": "https://api.github.com/users/jakerockland/orgs",
    "repos_url": "https://api.github.com/users/jakerockland/repos",
    "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jakerockland/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 8,
  "created_at": "2022-06-09T17:25:22Z",
  "updated_at": "2023-01-03T22:06:33Z",
  "closed_at": "2023-01-03T21:58:48Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version (output of `vyper --version`): 0.3.3.\r\n* OS: osx\r\n* Python Version (output of `python --version`): Python 3.8.2\r\n\r\n### What's your issue about?\r\n\r\nI'm not sure if this is WAI or something that is a bug, but when trying to do something like `genArt721CoreAddress public(immutable(address))`, I am hitting a comilation error:\r\n\r\n```\r\nUnknownType: No builtin or user-defined type named 'immutable'. \r\n  contract \"contracts/minter-suite/minter_set_price_v1.vy\", line 31:29 \r\n       30 # Core contract address this minter interacts with\r\n  ---> 31 genArt721CoreAddress: public(immutable(address))\r\n  -------------------------------------^\r\n       32\r\n```\r\n\r\nIs it possible to declare a variable that is both `immutable` and `public`?\r\n",
  "closed_by": {
    "login": "charles-cooper",
    "id": 3867501,
    "node_id": "MDQ6VXNlcjM4Njc1MDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/charles-cooper",
    "html_url": "https://github.com/charles-cooper",
    "followers_url": "https://api.github.com/users/charles-cooper/followers",
    "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
    "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
    "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
    "repos_url": "https://api.github.com/users/charles-cooper/repos",
    "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
    "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/2903/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151686621",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1151686621",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1151686621,
    "node_id": "IC_kwDOBGDvrM5EpVfd",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-09T22:40:08Z",
    "updated_at": "2022-06-09T22:40:08Z",
    "author_association": "COLLABORATOR",
    "body": "not at this time, you have to write the getter manually.\r\n\r\nleaving this open since it seems like something one would generally want to have. the only issue is that, with the function call syntax for these modifiers, we would not only need to be able to parse `public(immutable(foo))` but also `immutable(public(foo))` (and also decide if the latter is legal - my gut says we should not allow it actually).",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151686621/reactions",
      "total_count": 3,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151713228",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1151713228",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1151713228,
    "node_id": "IC_kwDOBGDvrM5Epb_M",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-09T23:36:16Z",
    "updated_at": "2022-06-09T23:36:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "> not at this time, you have to write the getter manually.\r\n> \r\n> leaving this open since it seems like something one would generally want to have. the only issue is that, with the function call syntax for these modifiers, we would not only need to be able to parse `public(immutable(foo))` but also `immutable(public(foo))` (and also decide if the latter is legal - my gut says we should not allow it actually).\r\n\r\nRoger that :) SGTM. Will take that approach for now of manual getter; though definitely agree that this feature would be nice to have in the future (would also similarly love to be able to do something like `minterType: public(constant(String[48])) = \"MinterSetPriceV1\"` in the future, though currently working around with this approach which is _fine_ just less idiomatic/readable:\r\n\r\n```\r\nMINTER_TYPE: constant(String[48]) = \"MinterSetPriceV1\"\r\nminterType: public(String[48])\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151713228/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151713504",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1151713504",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1151713504,
    "node_id": "IC_kwDOBGDvrM5EpcDg",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-09T23:36:51Z",
    "updated_at": "2022-06-09T23:36:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Also, unrelated, long-time-no-chat @charles-cooper ðŸ‘‹ ðŸ˜„ ðŸ™ ",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151713504/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151723076",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1151723076",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1151723076,
    "node_id": "IC_kwDOBGDvrM5EpeZE",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-09T23:52:30Z",
    "updated_at": "2022-06-09T23:52:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think we may actually take this approach for now for the `public` + `constant` use-case:\r\n\r\n```\r\n_minterType: constant(String[48]) = \"MinterSetPriceV1\"\r\n@external\r\n@view\r\ndef minterType() -> address:\r\n    \"\"\"\r\n    @notice a separate explicit getter declaration is currently needed per https://github.com/vyperlang/vyper/issues/2903\r\n    \"\"\"\r\n    return _minterType\r\n```\r\n\r\nAs I find this slightly more readable personally stylistically. \r\n\r\nAny reason that is immediately evident from your perspective @charles-cooper that there would be a strong reason to use the above instead though (copied here again for readability in comparing) other than for purely stylistic reasons?\r\n\r\n```\r\nMINTER_TYPE: constant(String[48]) = \"MinterSetPriceV1\"\r\nminterType: public(String[48])\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151723076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151728071",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1151728071",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1151728071,
    "node_id": "IC_kwDOBGDvrM5EpfnH",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-10T00:00:01Z",
    "updated_at": "2022-06-10T00:00:01Z",
    "author_association": "COLLABORATOR",
    "body": "stylistically i would have all constants be all caps -- `MINTER_TYPE: constant(String[48]) = \"MinterSetPriceV1\"`\r\n\r\ni think auto-generated getters are generally A Good Thing, since they remove another avenue for the programmer shooting themselves in the foot. we just haven't implemented them for constants and immutables. but it's stylistic, getters are also relatively easy to implement manually so i don't see an issue with doing that.\r\n\r\n(btw - there is a codegen optimization which gets triggered when the length of a string is <= 32, so if it's allowed you may want to declare MINTER_TYPE as having type `String[32]`).",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151728071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151737945",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1151737945",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1151737945,
    "node_id": "IC_kwDOBGDvrM5EpiBZ",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-06-10T00:15:00Z",
    "updated_at": "2022-06-10T00:15:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "> stylistically i would have all constants be all caps -- `MINTER_TYPE: constant(String[48]) = \"MinterSetPriceV1\"`\r\n> \r\n> i think auto-generated getters are generally A Good Thing, since they remove another avenue for the programmer shooting themselves in the foot. we just haven't implemented them for constants and immutables. but it's stylistic, getters are also relatively easy to implement manually so i don't see an issue with doing that.\r\n\r\nYeah this rationale all makes sense, we'll go with the later of the two options then instead then for now :)\r\n\r\n> (btw - there is a codegen optimization which gets triggered when the length of a string is <= 32, so if it's allowed you may want to declare MINTER_TYPE as having type `String[32]`).\r\n\r\nHuzzah!! Thank you very much for calling that outâ€“we can work within 32, so will adjust accordingly.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1151737945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1370266709",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1370266709",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1370266709,
    "node_id": "IC_kwDOBGDvrM5RrJxV",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T21:58:48Z",
    "updated_at": "2023-01-03T21:58:48Z",
    "author_association": "COLLABORATOR",
    "body": "I believe this was fixed in #3024 ",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1370266709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1370273109",
    "html_url": "https://github.com/vyperlang/vyper/issues/2903#issuecomment-1370273109",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2903",
    "id": 1370273109,
    "node_id": "IC_kwDOBGDvrM5RrLVV",
    "user": {
      "login": "jakerockland",
      "id": 8602661,
      "node_id": "MDQ6VXNlcjg2MDI2NjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8602661?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jakerockland",
      "html_url": "https://github.com/jakerockland",
      "followers_url": "https://api.github.com/users/jakerockland/followers",
      "following_url": "https://api.github.com/users/jakerockland/following{/other_user}",
      "gists_url": "https://api.github.com/users/jakerockland/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jakerockland/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jakerockland/subscriptions",
      "organizations_url": "https://api.github.com/users/jakerockland/orgs",
      "repos_url": "https://api.github.com/users/jakerockland/repos",
      "events_url": "https://api.github.com/users/jakerockland/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jakerockland/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-01-03T22:06:33Z",
    "updated_at": "2023-01-03T22:06:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I believe this was fixed in #3024\r\n\r\nAh nice!! Good to know â€“Â thanks @charles-cooper ðŸ˜„ ðŸ’œ \r\n\r\ncc @ryley-o",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1370273109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/2318",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/2318/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/2318/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/2318/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/2318",
  "id": 812675517,
  "node_id": "MDU6SXNzdWU4MTI2NzU1MTc=",
  "number": 2318,
  "title": "Functions should be able to call functions later than themselves",
  "user": {
    "login": "arjunaskykok",
    "id": 32124593,
    "node_id": "MDQ6VXNlcjMyMTI0NTkz",
    "avatar_url": "https://avatars.githubusercontent.com/u/32124593?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/arjunaskykok",
    "html_url": "https://github.com/arjunaskykok",
    "followers_url": "https://api.github.com/users/arjunaskykok/followers",
    "following_url": "https://api.github.com/users/arjunaskykok/following{/other_user}",
    "gists_url": "https://api.github.com/users/arjunaskykok/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/arjunaskykok/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/arjunaskykok/subscriptions",
    "organizations_url": "https://api.github.com/users/arjunaskykok/orgs",
    "repos_url": "https://api.github.com/users/arjunaskykok/repos",
    "events_url": "https://api.github.com/users/arjunaskykok/events{/privacy}",
    "received_events_url": "https://api.github.com/users/arjunaskykok/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-02-20T18:10:01Z",
  "updated_at": "2022-05-10T06:56:50Z",
  "closed_at": "2022-05-10T06:56:50Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Version Information\r\n\r\n* vyper Version (output of `vyper --version`): 0.2.10+commit.418c85b\r\n* OS: linux\r\n* Python Version (output of `python --version`): 3.8.5\r\n\r\n\r\n### What's your issue about?\r\n\r\nThis is Python code:\r\n\r\n```python\r\ndef haha():\r\n    hihi()\r\n\r\ndef hihi():\r\n    print(\"hihi\")\r\n```\r\n\r\nIt works fine. ```hihi``` function is declared later.\r\n\r\nThis is Vyper code:\r\n\r\n```python\r\n@external\r\ndef __init__():\r\n    pass\r\n\r\n@external\r\ndef haha():\r\n    self.hihi()\r\n\r\n@internal\r\ndef hihi():\r\n    pass\r\n```\r\n\r\nCompiling it would give this error:\r\n```bash\r\nError compiling: /tmp/a.vy\r\nvyper.exceptions.FunctionDeclarationException: Function not declared yet (reminder: functions cannot call functions later in code than themselves): hihi\r\n```\r\n\r\nThe related code is in vyper/signatures/function_signature.py. Is there any reason that functions cannot call functions later in code than themselves in Vyper? I usually put internal functions on the bottom of the file for aesthetic purpose.",
  "closed_by": {
    "login": "charles-cooper",
    "id": 3867501,
    "node_id": "MDQ6VXNlcjM4Njc1MDE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/charles-cooper",
    "html_url": "https://github.com/charles-cooper",
    "followers_url": "https://api.github.com/users/charles-cooper/followers",
    "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
    "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
    "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
    "repos_url": "https://api.github.com/users/charles-cooper/repos",
    "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
    "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/2318/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/2318/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/782727051",
    "html_url": "https://github.com/vyperlang/vyper/issues/2318#issuecomment-782727051",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2318",
    "id": 782727051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MjcyNzA1MQ==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-20T18:18:41Z",
    "updated_at": "2021-02-20T18:18:41Z",
    "author_association": "MEMBER",
    "body": "Originally, this was done as an easy way to prevent mutual internal recursion in Vyper contract files, which is an easy way to allow yourself to be exploited. Now we have the `@internal` and `@external` functions, where only the path `external -> internal -> ... -> internal` is allowed (along with several other restrictions on environment variables such as `msg.sender`, etc.)\r\n\r\nWe could revisit the original assumption in v0.3.x given the restrictions on `@external` functions being unable to call each other, which prevents a mutual recursion problem outright. It can be sort of annoying to have to reorder functions.\r\n\r\nI was also thinking of removing the need for `@internal` entirely, signaling to the user that Vyper has more control over how it lays out bytecode internally (e.g. no expressed `inline` vs. `internal` like in Solidity)",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/782727051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1122001329",
    "html_url": "https://github.com/vyperlang/vyper/issues/2318#issuecomment-1122001329",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/2318",
    "id": 1122001329,
    "node_id": "IC_kwDOBGDvrM5C4GGx",
    "user": {
      "login": "charles-cooper",
      "id": 3867501,
      "node_id": "MDQ6VXNlcjM4Njc1MDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3867501?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/charles-cooper",
      "html_url": "https://github.com/charles-cooper",
      "followers_url": "https://api.github.com/users/charles-cooper/followers",
      "following_url": "https://api.github.com/users/charles-cooper/following{/other_user}",
      "gists_url": "https://api.github.com/users/charles-cooper/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/charles-cooper/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/charles-cooper/subscriptions",
      "organizations_url": "https://api.github.com/users/charles-cooper/orgs",
      "repos_url": "https://api.github.com/users/charles-cooper/repos",
      "events_url": "https://api.github.com/users/charles-cooper/events{/privacy}",
      "received_events_url": "https://api.github.com/users/charles-cooper/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-10T06:56:50Z",
    "updated_at": "2022-05-10T06:56:50Z",
    "author_association": "COLLABORATOR",
    "body": "fixed in https://github.com/vyperlang/vyper/pull/2496",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1122001329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

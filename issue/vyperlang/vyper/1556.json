{
  "url": "https://api.github.com/repos/vyperlang/vyper/issues/1556",
  "repository_url": "https://api.github.com/repos/vyperlang/vyper",
  "labels_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556/labels{/name}",
  "comments_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556/comments",
  "events_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556/events",
  "html_url": "https://github.com/vyperlang/vyper/issues/1556",
  "id": 474803207,
  "node_id": "MDU6SXNzdWU0NzQ4MDMyMDc=",
  "number": 1556,
  "title": "VIP: Tightly packed structs/arrays and smaller unsigned integers",
  "user": {
    "login": "haydenadams",
    "id": 9343483,
    "node_id": "MDQ6VXNlcjkzNDM0ODM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/haydenadams",
    "html_url": "https://github.com/haydenadams",
    "followers_url": "https://api.github.com/users/haydenadams/followers",
    "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
    "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
    "organizations_url": "https://api.github.com/users/haydenadams/orgs",
    "repos_url": "https://api.github.com/users/haydenadams/repos",
    "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
    "received_events_url": "https://api.github.com/users/haydenadams/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 479554964,
      "node_id": "MDU6TGFiZWw0Nzk1NTQ5NjQ=",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/enhancement",
      "name": "enhancement",
      "color": "84b6eb",
      "default": true,
      "description": null
    },
    {
      "id": 1723982050,
      "node_id": "MDU6TGFiZWwxNzIzOTgyMDUw",
      "url": "https://api.github.com/repos/vyperlang/vyper/labels/VIP:%20Deferred",
      "name": "VIP: Deferred",
      "color": "c5def5",
      "default": false,
      "description": "VIP is not scheduled to move forward at this time"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-07-30T20:23:40Z",
  "updated_at": "2022-09-04T15:31:40Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Smart contract efficiency is one of the most important methods of scaling. There is no good reason:\r\n\r\n```python\r\nstruct Gucci:\r\n   yolo: bool\r\n   swag: bool\r\n``` \r\nneeds two separate 32 bytes storage slots. Currently, the only good way to store multiple values in a single storage slot is something like this:\r\n\r\n```python\r\ndoubleStorage: public(bytes32)\r\n\r\n@public\r\ndef doubleStore(amount1: uint256, amount2: uint256):\r\n    amount1_bytes32: bytes32 = convert(amount1, bytes32)\r\n    amount2_bytes32: bytes32 = convert(amount2, bytes32)\r\n    amount1_bytes: bytes[16] = slice(amount1_bytes32, start=16, len=16)\r\n    amount2_bytes: bytes[16] = slice(amount2_bytes32, start=16, len=16)\r\n    self.doubleStorage = convert(concat(amount1_bytes, amount2_bytes), bytes32)\r\n    \r\n    \r\n@public\r\n@constant\r\ndef getAmounts() -> (uint256, uint256):\r\n    firstAmount: bytes[16] = slice(self.doubleStorage, start=0, len=16)\r\n    secondAmount: bytes[16] = slice(self.doubleStorage, start=16, len=16)\r\n    return convert(firstAmount, uint256), convert(secondAmount, uint256)\r\n```\r\n\r\nWith the addition of new uint sizes and tightly packed structs, this could become:\r\n\r\n```python\r\nstruct tightlyPacked:\r\n   amount1: uint128\r\n   amount2: uint128\r\n``` \r\n\r\nLower values would support tighter packing, with the following would taking only one storage slot:\r\n```python\r\nstruct evenTighter:\r\n   amount1: uint64\r\n   amount2: uint64\r\n   amount3: uint64\r\n   amount4: uint64\r\n\r\ntruuuu: bool[256]\r\n``` \r\n\r\nAs per a convo with @jacqueswww this probably only makes sense for structs (and possibly arrays). This should take two storage slots:\r\n```python\r\nyolo: public(uint64)\r\nswag: public(uint64)\r\n```\r\n\r\n Thanks @jacqueswww for helping me think through some of this!",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/1556/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/516582252",
    "html_url": "https://github.com/vyperlang/vyper/issues/1556#issuecomment-516582252",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556",
    "id": 516582252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNjU4MjI1Mg==",
    "user": {
      "login": "haydenadams",
      "id": 9343483,
      "node_id": "MDQ6VXNlcjkzNDM0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haydenadams",
      "html_url": "https://github.com/haydenadams",
      "followers_url": "https://api.github.com/users/haydenadams/followers",
      "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
      "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
      "organizations_url": "https://api.github.com/users/haydenadams/orgs",
      "repos_url": "https://api.github.com/users/haydenadams/repos",
      "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haydenadams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-30T20:26:47Z",
    "updated_at": "2019-07-30T20:26:47Z",
    "author_association": "NONE",
    "body": "Similar closed issue\r\nhttps://github.com/ethereum/vyper/issues/599",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/516582252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/518724099",
    "html_url": "https://github.com/vyperlang/vyper/issues/1556#issuecomment-518724099",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556",
    "id": 518724099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODcyNDA5OQ==",
    "user": {
      "login": "jacqueswww",
      "id": 6917456,
      "node_id": "MDQ6VXNlcjY5MTc0NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6917456?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jacqueswww",
      "html_url": "https://github.com/jacqueswww",
      "followers_url": "https://api.github.com/users/jacqueswww/followers",
      "following_url": "https://api.github.com/users/jacqueswww/following{/other_user}",
      "gists_url": "https://api.github.com/users/jacqueswww/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jacqueswww/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jacqueswww/subscriptions",
      "organizations_url": "https://api.github.com/users/jacqueswww/orgs",
      "repos_url": "https://api.github.com/users/jacqueswww/repos",
      "events_url": "https://api.github.com/users/jacqueswww/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jacqueswww/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T15:37:10Z",
    "updated_at": "2019-08-06T15:37:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Notes from meeting: although the gas savings would be really large, added complexity with this that would be introduced is also quite high:\r\n- Shift in & Shift out of storage\r\n- Have read(sload) before doing sstore of a single value\r\n- Coalesce/Batch both Read & Write steps\r\n- Adding of new types\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/518724099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/519691263",
    "html_url": "https://github.com/vyperlang/vyper/issues/1556#issuecomment-519691263",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556",
    "id": 519691263,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTY5MTI2Mw==",
    "user": {
      "login": "haydenadams",
      "id": 9343483,
      "node_id": "MDQ6VXNlcjkzNDM0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9343483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/haydenadams",
      "html_url": "https://github.com/haydenadams",
      "followers_url": "https://api.github.com/users/haydenadams/followers",
      "following_url": "https://api.github.com/users/haydenadams/following{/other_user}",
      "gists_url": "https://api.github.com/users/haydenadams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/haydenadams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/haydenadams/subscriptions",
      "organizations_url": "https://api.github.com/users/haydenadams/orgs",
      "repos_url": "https://api.github.com/users/haydenadams/repos",
      "events_url": "https://api.github.com/users/haydenadams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/haydenadams/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T21:18:34Z",
    "updated_at": "2019-08-08T21:18:34Z",
    "author_association": "NONE",
    "body": "@jacqueswww where does that leave this proposal? \"Still possible but requires lots of work and not a priority\" or \"unlikely\"?",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/519691263/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/519696551",
    "html_url": "https://github.com/vyperlang/vyper/issues/1556#issuecomment-519696551",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556",
    "id": 519696551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTY5NjU1MQ==",
    "user": {
      "login": "fubuloubu",
      "id": 3859395,
      "node_id": "MDQ6VXNlcjM4NTkzOTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3859395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fubuloubu",
      "html_url": "https://github.com/fubuloubu",
      "followers_url": "https://api.github.com/users/fubuloubu/followers",
      "following_url": "https://api.github.com/users/fubuloubu/following{/other_user}",
      "gists_url": "https://api.github.com/users/fubuloubu/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fubuloubu/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fubuloubu/subscriptions",
      "organizations_url": "https://api.github.com/users/fubuloubu/orgs",
      "repos_url": "https://api.github.com/users/fubuloubu/repos",
      "events_url": "https://api.github.com/users/fubuloubu/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fubuloubu/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T21:36:01Z",
    "updated_at": "2019-08-08T21:36:01Z",
    "author_association": "MEMBER",
    "body": "Unlikely to come sooner than later. We'd accept some contributions to work on this as an experimental feature, but it's too much of a rabbit hole to go after now.",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/519696551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1236365281",
    "html_url": "https://github.com/vyperlang/vyper/issues/1556#issuecomment-1236365281",
    "issue_url": "https://api.github.com/repos/vyperlang/vyper/issues/1556",
    "id": 1236365281,
    "node_id": "IC_kwDOBGDvrM5JsW_h",
    "user": {
      "login": "pcaversaccio",
      "id": 25297591,
      "node_id": "MDQ6VXNlcjI1Mjk3NTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25297591?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pcaversaccio",
      "html_url": "https://github.com/pcaversaccio",
      "followers_url": "https://api.github.com/users/pcaversaccio/followers",
      "following_url": "https://api.github.com/users/pcaversaccio/following{/other_user}",
      "gists_url": "https://api.github.com/users/pcaversaccio/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pcaversaccio/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pcaversaccio/subscriptions",
      "organizations_url": "https://api.github.com/users/pcaversaccio/orgs",
      "repos_url": "https://api.github.com/users/pcaversaccio/repos",
      "events_url": "https://api.github.com/users/pcaversaccio/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pcaversaccio/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-04T15:31:40Z",
    "updated_at": "2022-09-04T15:31:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "An interesting approach using bit fields to pack 256 `bool` variables into one word (32 bytes): https://mudit.blog/solidity-tips-and-tricks-to-save-gas-and-reduce-bytecode-size/#2a76",
    "reactions": {
      "url": "https://api.github.com/repos/vyperlang/vyper/issues/comments/1236365281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6336",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6336/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6336/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6336/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6336",
  "id": 642742926,
  "node_id": "MDU6SXNzdWU2NDI3NDI5MjY=",
  "number": 6336,
  "title": "Audit documentation feedbacks",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1241586918,
      "node_id": "MDU6TGFiZWwxMjQxNTg2OTE4",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Tracking",
      "name": "Tracking",
      "color": "d0ff7f",
      "default": false,
      "description": "Gotta Catch 'Em All"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2020-06-22T04:32:15Z",
  "updated_at": "2020-06-23T21:11:21Z",
  "closed_at": "2020-06-23T21:11:21Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Opening this issue to track documentations feedbacks from the Quantstamp audit\r\n\r\n- [x] 0.Code is lacking inline developer documentation. For instance, beacon-chain/p2p/subnets.go, beacon-chain/p2p/utils.go do not contain any documentation, while for other files (such as, beacon-chain/p2p/service.go) contain comments, however, do not describe the individual parameters and return values\r\n- [x] 1. In validator/node/node.go, on L276 and L282, the error message \"Could not create DB in dir %s\" should say \"clear\" instead of \"create\".\r\n- [x] 2. In validator/flags/interop.go, the description for InteropNumValidators appears to incorrectly reference itself: \"The number of\r\n- [x] validators to deterministically generate when used in combination with --interop-num-validators.\". Likely a copy and paste error between L11 and 17.\r\n- [x] 3. In beacon-chain/state/stateutil/state_root.go#196, copy and paste error -- \"could not compute previous epoch attestations merkleization\" should be \"... current epoch ...\".\r\n- [x] 4. In beacon-chain/state/types.go#112, the comment in MinusRef() should say \"underflow\", not \"overflow\".\r\n- [x] 5. In beacon-chain/state/state_trie.go, in the function merkleize(), it is claimed that it pads the leaves to a power-of-two length. It does\r\n- [x] this only up to the length of 32. We recommend adjusting the comment.\r\n- [x] 6. In beacon-chain/state/setters.go, the comment This PR updates the randao mixes is used in many places, but is likely only relevant to\r\n- [x] UpdateRandaoMixesAtIndex().\r\n- [x] 7. In beacon-chain/state/setters.go, unclear why \"This PR...\" is referenced in many of the comments.\r\n- [x] 8. In beacon-chain/state/setters.go, L135-136 - one or more words are missing in the comments.\r\n- [x] 9. In beacon-chain/core/epoch/precompute/justification_finalization.go, the specification pseudocode from\r\n- [x] process_justification_and_finalization could be included for ProcessJustificationAndFinalizationPreCompute().\r\n- [x] 10. In beacon-chain/core/block_operations.go, the comment on L587-588 This function returns a list of pending attestations which can then be appended to the BeaconState's latest attestations. is not accurate. The attestations are appended to the BeaconState's list internal to the function, and the BeaconState itself is returned.\r\n- [x] 11. Cache in beacon-chain/cache/hot_state_cache.go is the only cache that doesn't use a mutex. We recommend documenting this design rationale.\r\n- [x] 12. Typos in beacon-chain/p2p/service.go, L383-384, “id’s” -> “ids”\r\n- [x] 13. Typo in beacon-chain/blockchain/process_attestation.go#125, \"state to to validate\".\r\n- [x] 14. Typo in beacon-chain/blockchain/receive_block.go#63, \"preformed\" -> \"performed\".\r\n- [x] 15. Typo in beacon-chain/core/helpers/slot_epoch.go#57, \"form\" should be \"from\".\r\n- [x] 16. In beacon-chain/blockchain/metrics.go, should the Help strings on L80 and L84 be reversed?\r\n- [x] 11. InProcessDeposits() do not match the specification.\r\n- [x]  17. In beacon-chain/blockchain/chain_info.go#146, \"head state\" should be \"head block\".\r\n- [x] 18. In beacon-chain/blockchain/head.go#30, not a correct English sentence.\r\n- [x] 19. In beacon-chain/blockchain/head.go#115, typo \"inital-sync-cache-state\" should be \"initial-sync-cache-state\".\r\n- [x] 20. Typo in beacon-chain/core/state/transition.go#244: \"skip skips\" -> \"skip slots\".\r\n- [x] 21. In shared/bytesutil/bytes.go, L24-43, the functions implement little-endian format but specifications mention big.\r\n- [x] 22. In shared/sliceutil/slice.go, the function NotUint64(), returns elements of b which are not in a, not the other way around.\r\n- [x] 23. In shared/sliceutil/slice.go, the function UnionByteSlices(), doesn't return common elements, but all of them.\r\n- [x] 24. In beacon-chain/core/epoch/epoch_processing.go, in the spec pseudocode for process_final_updates, after L208 the pseudocode for the if-block is missing: validator.effective_balance = min(balance - balance % EFFECTIVE_BALANCE_INCREMENT, MAX_EFFECTIVE_BALANCE).\r\n- [x] 25. In beacon-chain/p2p/encoder/ssz.go, in function DecodeWithMaxLength(), msgLen stands for the remaining bytes in r, but this is NOT the decoded message. Thus the check on L163 and the comment on L164 do not match. The decoded message seems to be on L167 numOfBytes, err := r.Read(b).\r\n- [x] 26. Typo in beacon-chain/core/helpers/slot_epoch.go, “alswo” -> “also”.\r\n- [x] 27. Typo in beacon-chain/core/helpers/slot_epoch.go, “compute_start_slot_of_epoch” -> “compute_start_slot_at_epoch”.\r\n- [x] 28. There are issues in end-user documentation:\r\n- [x] 1. All 3 links are broken in step 1 on this page https://docs.prylabs.network/docs/install/lin/activating-a-validator/\r\n- [x] 2. The link indicated in the following screenshots are broken on this page https://docs.prylabs.network/docs/install/lin/bazel/\r\n- [x] 30. In beacon-chain/db/iface/interface.go, URLs mentioned in file are broken.\r\n- [x] 31. In beacon-chain/db/kv/blocks.go, L585-587, comment is misleading, as no list is being returned. Rather, the return will be a map with a single key-value pair: \"block-parent-root-indices” -> parentRoot (array of bytes). Change the comment accordingly.\r\n- [x] 32. In beacon-chain/db/kv/blocks.go, in function fetchBlockRootsBySlotRange() header comment says it performs a binary search. However, if step is one, the implemented logic won’t skip half of the slots in the range. Fix the comment accordingly.\r\n- [x] 33. Typo in beacon-chain/syncservice.go, “Intialize” -> “Initialize”.",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6336/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6336/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

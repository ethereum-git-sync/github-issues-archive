{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/11579",
  "id": 1424322568,
  "node_id": "I_kwDOBvuov85U5XAI",
  "number": 11579,
  "title": "[Tracking] - EIP-4844",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1241586918,
      "node_id": "MDU6TGFiZWwxMjQxNTg2OTE4",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Tracking",
      "name": "Tracking",
      "color": "d0ff7f",
      "default": false,
      "description": "Gotta Catch 'Em All"
    },
    {
      "id": 4726481257,
      "node_id": "LA_kwDOBvuov88AAAABGbhhaQ",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Blobspace",
      "name": "Blobspace",
      "color": "99BEF5",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-10-26T16:16:00Z",
  "updated_at": "2022-12-24T05:34:55Z",
  "closed_at": "2022-12-24T03:20:14Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Background\r\n\r\nWith many eyes on EIP4844 lately, we need a canonical tracking issue to start capturing tasks needed in Prysm to support EIP4844. There have been many ongoing parallel efforts on implementing 4844 for prysm and those branches are scattered over the places. We should consolidate them in one place. This Issue will capture the detailed todos and push EIP4844 forward with Prysm\r\n\r\n### New container\r\n- [x] Add new sidecar containers\r\n- [x] Modify beacon block containers\r\n- [x] Modify execution payload containers\r\n\r\n### KZG library\r\n- [x] Pick a KZG library to use\r\n- [x] Pick a backup KZG library to use\r\n- [x] Do we need to write any wrappers on top of the KZG libraries?\r\n\r\n### Consensus layer changes\r\n- [x] Add `process_blob_kzg_commitments` and `verify_kzg_commitments_against_transactions` to validate commitments across payload raw transactions\r\n- [x] Add `validate_blobs_sidecar` which uses `evaluate_polynomial_in_evaluation_form` and `verify_kzg_proof`\r\n- [x] State transition should be aware of beacon objects under Capella/EIP4844 version\r\n- [x] State transition should upgrade to Capella/EIP4844 version\r\n\r\n### Networking changes\r\n- [x] New gossip handler for `beacon_block_and_blob_sidecar`\r\n- [x] New req/res handler to request and respond `blob_sidecar` by ranges\r\n- [x] Update the same req/res handler for Capella/EIP4844 `beacon_block` \r\n- [x] New Capella/EIP4844 fork digest and fork watcher\r\n\r\n### Validator changes\r\n- [x] Use new engine API to retrieve payload and sidecar in one go\r\n- [x] Add KZG proof construction for block proposal\r\n- [x] Validator can sign new beacon block\r\n- [x] Validator can sign sidecar\r\n\r\n### RPC changes\r\n- [x] Various RPC methods have to support Capella/EIP4844 block request/respond\r\n- [x] Support retrieving sidecar by block root or block slot\r\n- [x] Support retrieving individual blob by blob hash or commitment\r\n\r\n### Database changes\r\n- [x] Can save sidecar\r\n- [x] Can prune sidecar after `N` epochs (rolling window style). Optional: `N` can be a parameter\r\n- [x] We might need some lookups such as `beacon_block_root` -> `execution_block_hash` or vice versa\r\n\r\n### Testing\r\n- [x] Can sync devnet with the new branch",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579/reactions",
    "total_count": 1,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 1,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1364450305",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11579#issuecomment-1364450305",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11579",
    "id": 1364450305,
    "node_id": "IC_kwDOBvuov85RU9wB",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-24T03:20:14Z",
    "updated_at": "2022-12-24T03:20:14Z",
    "author_association": "MEMBER",
    "body": "Marking this as completed with devnet3 running. We'll open another issue to track the follow-ups\r\n\r\nhttps://hackmd.io/q1SLCaubTIWw_1zsEjW_Vg?view",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1364450305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6491",
  "id": 650950692,
  "node_id": "MDU6SXNzdWU2NTA5NTA2OTI=",
  "number": 6491,
  "title": "Running validator client in HA",
  "user": {
    "login": "ayushpateria",
    "id": 19612756,
    "node_id": "MDQ6VXNlcjE5NjEyNzU2",
    "avatar_url": "https://avatars.githubusercontent.com/u/19612756?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ayushpateria",
    "html_url": "https://github.com/ayushpateria",
    "followers_url": "https://api.github.com/users/ayushpateria/followers",
    "following_url": "https://api.github.com/users/ayushpateria/following{/other_user}",
    "gists_url": "https://api.github.com/users/ayushpateria/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ayushpateria/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ayushpateria/subscriptions",
    "organizations_url": "https://api.github.com/users/ayushpateria/orgs",
    "repos_url": "https://api.github.com/users/ayushpateria/repos",
    "events_url": "https://api.github.com/users/ayushpateria/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ayushpateria/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 934596141,
      "node_id": "MDU6TGFiZWw5MzQ1OTYxNDE=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Discussion",
      "name": "Discussion",
      "color": "f9d0c4",
      "default": false,
      "description": "Simply a thread for talking about stuff"
    },
    {
      "id": 1966354762,
      "node_id": "MDU6TGFiZWwxOTY2MzU0NzYy",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Need-Info",
      "name": "Need-Info",
      "color": "fbca04",
      "default": false,
      "description": "Need more information from author"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-07-04T20:22:54Z",
  "updated_at": "2020-07-15T14:53:00Z",
  "closed_at": "2020-07-15T14:53:00Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž\r\n\r\nHellooo! ðŸ˜„ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž-->\r\n\r\nHi, is it possible to run the validator client in a highly available setup probably using Kubernetes? With the current implementation in boltDb is there any way around it?\r\n\r\nAlso, is it possible to run multiple validator clients connected to the same boltDb instance? I think it's important for multiple clients to have the same instance for slashing protection to work correctly.",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/657933879",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6491#issuecomment-657933879",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491",
    "id": 657933879,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NzkzMzg3OQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-14T02:46:13Z",
    "updated_at": "2020-07-14T02:46:13Z",
    "author_association": "MEMBER",
    "body": "Hey @ayushpateria, great question! \r\n\r\nThis is a tricky problem to solve. With high availablity, you want things like automated failover and data replication. \r\nHowever, this type of setup could easily lead to a slashable condition if not configured correctly. \r\n\r\nThe validator client will secure a lock around a boltDB storage file, so only one process can use it at a time.\r\nIn kubernetes, you could consider a statefulset or a deployment with a persistent volume claim. At least here if your validator process gets evicted then you can have it rescheduled safely, assuming the persistent volume can only be mounted to one pod at a time. \r\n\r\nThe validator client is rather lightweight and not very prone to crashes or restarts. The bulk of the hard work is done in the beacon chain node. You can run multiple beacon chain nodes in your k8s cluster and connect the validator to a service that load balances requests. It is recommended that your load balancer uses a \"sticky\" balancing scheme as a beacon node will need to subscribe to a certain p2p subnet in order to effectively propagate your attestations. A round robin style load balancer could see delays in attestation inclusion since the beacon node may be unaware of the incoming request. \r\n\r\nI hope that helps answer your question. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/657933879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658816499",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6491#issuecomment-658816499",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6491",
    "id": 658816499,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODgxNjQ5OQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-15T14:53:00Z",
    "updated_at": "2020-07-15T14:53:00Z",
    "author_association": "MEMBER",
    "body": "Closing this as there's no more follow up",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658816499/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

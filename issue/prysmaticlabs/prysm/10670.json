{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/10670",
  "id": 1230945200,
  "node_id": "I_kwDOBvuov85JXruw",
  "number": 10670,
  "title": "ERROR in beaconchain process leading to ~12min downtime for validator",
  "user": {
    "login": "mondsen",
    "id": 53463563,
    "node_id": "MDQ6VXNlcjUzNDYzNTYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/53463563?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mondsen",
    "html_url": "https://github.com/mondsen",
    "followers_url": "https://api.github.com/users/mondsen/followers",
    "following_url": "https://api.github.com/users/mondsen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mondsen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mondsen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mondsen/subscriptions",
    "organizations_url": "https://api.github.com/users/mondsen/orgs",
    "repos_url": "https://api.github.com/users/mondsen/repos",
    "events_url": "https://api.github.com/users/mondsen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mondsen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1085358164,
      "node_id": "MDU6TGFiZWwxMDg1MzU4MTY0",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Priority:%20Critical",
      "name": "Priority: Critical",
      "color": "f7262f",
      "default": false,
      "description": "Highest, immediate priority item"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-05-10T10:27:23Z",
  "updated_at": "2022-05-17T07:10:15Z",
  "closed_at": "2022-05-17T07:10:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n### Description\r\n\r\nToday I missed some attestations because of an ERROR in the beaconchain process. For roughly 12 min my node was not in sync and therefore my validator missed attestations. See below for logfile.\r\n\r\n### Has this worked before in a previous version?\r\nThis has not happend in v2.06\r\n\r\n## üî¨ Minimal Reproduction\r\nNo idea how to reproduce\r\n\r\n## üî• Error\r\nTimezone is UTC+2\r\nYou can see here it took from 7:44 till 7:56 (12min) until my beaconchain was in sync again.\r\n\r\n<pre><code>\r\n[2022-05-10 07:43:48]  INFO blockchain: Finished applying state transition attestations=128 slot=3778117 syncBitsCount=492\r\n[2022-05-10 07:44:04]  INFO p2p: Peer summary activePeers=53 inbound=47 outbound=5\r\n[2022-05-10 07:44:12] ERROR sync: Could not handle p2p pubsub error=end block roots don't match\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).LoadBlocks\r\n        beacon-chain/state/stategen/replay.go:115\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).loadStateByRoot\r\n        beacon-chain/state/stategen/getter.go:201\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).StateByRoot\r\n        beacon-chain/state/stategen/getter.go:60\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).onBlock\r\n        beacon-chain/blockchain/process_block.go:218\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveBlock\r\n        beacon-chain/blockchain/receive_block.go:39\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).beaconBlockSubscriber\r\n        beacon-chain/sync/subscriber_beacon_blocks.go:34\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).subscribeWithBase.func1\r\n        beacon-chain/sync/subscriber.go:190\r\nruntime.goexit\r\n        GOROOT/src/runtime/asm_amd64.s:1581\r\ncould not load blocks for hot state using root\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).loadStateByRoot\r\n        beacon-chain/state/stategen/getter.go:203\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).StateByRoot\r\n        beacon-chain/state/stategen/getter.go:60\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).onBlock\r\n        beacon-chain/blockchain/process_block.go:218\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveBlock\r\n        beacon-chain/blockchain/receive_block.go:39\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).beaconBlockSubscriber\r\n        beacon-chain/sync/subscriber_beacon_blocks.go:34\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).subscribeWithBase.func1\r\n        beacon-chain/sync/subscriber.go:190\r\nruntime.goexit\r\n        GOROOT/src/runtime/asm_amd64.s:1581\r\ncould not process block\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveBlock\r\n        beacon-chain/blockchain/receive_block.go:40\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).beaconBlockSubscriber\r\n        beacon-chain/sync/subscriber_beacon_blocks.go:34\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).subscribeWithBase.func1\r\n        beacon-chain/sync/subscriber.go:190\r\nruntime.goexit\r\n        GOROOT/src/runtime/asm_amd64.s:1581 topic=/eth2/afcaaba0/beacon_block/ssz_snappy\r\n[2022-05-10 07:44:12]  INFO blockchain: Synced new block block=0x262abd41... epoch=118066 finalizedEpoch=118064 finalizedRoot=0x21efb6f8... parentRoot=0xc376d4d6... slot=3778119 slotInEpoch=7 version=altair\r\n[2022-05-10 07:44:12]  INFO blockchain: Finished applying state transition attestations=128 slot=3778119 syncBitsCount=488\r\n[2022-05-10 07:45:04]  INFO p2p: Peer summary activePeers=55 inbound=49 outbound=5\r\n[2022-05-10 07:46:04]  INFO p2p: Peer summary activePeers=55 inbound=49 outbound=5\r\n[2022-05-10 07:47:04]  INFO p2p: Peer summary activePeers=55 inbound=49 outbound=5\r\n[2022-05-10 07:48:04]  INFO p2p: Peer summary activePeers=51 inbound=45 outbound=5\r\n[2022-05-10 07:49:04]  INFO p2p: Peer summary activePeers=55 inbound=49 outbound=5\r\n[2022-05-10 07:49:11]  INFO sync: Subscribed to topic topic=/eth2/afcaaba0/beacon_attestation_15/ssz_snappy\r\n[2022-05-10 07:50:04]  INFO p2p: Peer summary activePeers=55 inbound=49 outbound=5\r\n[2022-05-10 07:51:04]  INFO p2p: Peer summary activePeers=49 inbound=43 outbound=5\r\n[2022-05-10 07:52:04]  INFO p2p: Peer summary activePeers=51 inbound=47 outbound=3\r\n[2022-05-10 07:53:04]  INFO p2p: Peer summary activePeers=51 inbound=47 outbound=3\r\n[2022-05-10 07:54:04]  INFO p2p: Peer summary activePeers=46 inbound=37 outbound=8\r\n[2022-05-10 07:55:04]  INFO p2p: Peer summary activePeers=55 inbound=47 outbound=7\r\n[2022-05-10 07:56:04]  INFO p2p: Peer summary activePeers=55 inbound=47 outbound=7\r\n[2022-05-10 07:56:16]  INFO sync: Fallen behind peers; reverting to initial sync to catch up currentEpoch=118068 peersEpoch=118068 syncedEpoch=118066\r\n[2022-05-10 07:56:17]  INFO initial-sync: Processing block batch of size 30 starting from  0x7af2898d... 3778120/3778179 - estimated time remaining 39s blocksPerSecond=1.5 peers=55\r\n[2022-05-10 07:56:21]  INFO initial-sync: Synced to finalized epoch - now syncing blocks up to current head currentSlot=3778179 syncedSlot=3778150\r\n[2022-05-10 07:56:22]  INFO blockchain: Synced new block block=0x2da6dcfe... epoch=118067 finalizedEpoch=118065 finalizedRoot=0xfb73a710... parentRoot=0x22bd4fff... slot=3778151 slotInEpoch=7 version=altair\r\n</code></pre>\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nUbuntu 20.04.4 LTS x64\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\n2.11\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\n",
  "closed_by": {
    "login": "potuz",
    "id": 16044918,
    "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/potuz",
    "html_url": "https://github.com/potuz",
    "followers_url": "https://api.github.com/users/potuz/followers",
    "following_url": "https://api.github.com/users/potuz/following{/other_user}",
    "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
    "organizations_url": "https://api.github.com/users/potuz/orgs",
    "repos_url": "https://api.github.com/users/potuz/repos",
    "events_url": "https://api.github.com/users/potuz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/potuz/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1128496998",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10670#issuecomment-1128496998",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10670",
    "id": 1128496998,
    "node_id": "IC_kwDOBvuov85DQ39m",
    "user": {
      "login": "potuz",
      "id": 16044918,
      "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/potuz",
      "html_url": "https://github.com/potuz",
      "followers_url": "https://api.github.com/users/potuz/followers",
      "following_url": "https://api.github.com/users/potuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
      "organizations_url": "https://api.github.com/users/potuz/orgs",
      "repos_url": "https://api.github.com/users/potuz/repos",
      "events_url": "https://api.github.com/users/potuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/potuz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-17T07:10:15Z",
    "updated_at": "2022-05-17T07:10:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fixed in v2.1.2",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1128496998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105",
  "id": 1616453795,
  "node_id": "I_kwDOBvuov85gWSCj",
  "number": 12105,
  "title": "[docs?] Prysm stops with invalid argument when using datadir",
  "user": {
    "login": "jgresham",
    "id": 3721291,
    "node_id": "MDQ6VXNlcjM3MjEyOTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3721291?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jgresham",
    "html_url": "https://github.com/jgresham",
    "followers_url": "https://api.github.com/users/jgresham/followers",
    "following_url": "https://api.github.com/users/jgresham/following{/other_user}",
    "gists_url": "https://api.github.com/users/jgresham/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jgresham/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jgresham/subscriptions",
    "organizations_url": "https://api.github.com/users/jgresham/orgs",
    "repos_url": "https://api.github.com/users/jgresham/repos",
    "events_url": "https://api.github.com/users/jgresham/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jgresham/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2023-03-09T05:28:37Z",
  "updated_at": "2023-03-23T19:15:44Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\n<!-- ‚úçÔ∏è--> A clear and concise description of the problem...\r\n\r\n### Has this worked before in a previous version?\r\n\r\n<!-- Did this behavior use to work in the previous version? -->\r\n<!-- ‚úçÔ∏è--> Yes, the previous version in which this bug was not present was: ....\r\n[docs?] Prysm stops with invalid argument when using datadir\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n<!--\r\nPlease let us know how we can reproduce this issue. Include the exact method you used to run Prysm along with any flags used in your beacon chain and/or validator. Make sure you don't upload any confidential files or private keys.\r\n-->\r\nRun the docker command in the docs at https://docs.prylabs.network/docs/install/install-with-docker#appendix-a-manage-prysm-with-docker\r\n```\r\ndocker run -it -v $HOME/.eth2:/data -p 4000:4000 -p 13000:13000 -p 12000:12000/udp --name beacon-node \\\r\n  gcr.io/prysmaticlabs/prysm/beacon-chain:latest \\\r\n  --datadir=/data \\\r\n  --clear-db \\\r\n  --rpc-host=0.0.0.0 \\\r\n  --monitoring-host=0.0.0.0 \\\r\n  --execution-endpoint=<YOUR_ETH_EXECUTION_NODE_ENDPOINT> \r\n```\r\nRemove datadir arugment and it works\r\n## üî• Error\r\n\r\n<pre><code>[2023-03-09 01:40:00]  WARN flags: Running on Ethereum Mainnet\r\n[2023-03-09 01:40:00]  WARN node: In order to receive transaction fees from proposing blocks, you must provide flag --suggested-fee-recipient with a valid ethereum address when starting your beacon node. Please see our documentation for more information on this requirement (https://docs.prylabs.network/docs/execution-node/fee-recipient).\r\n[2023-03-09 01:40:00]  INFO node: Checking DB database-path=/data/beaconchaindata\r\n[2023-03-09 01:40:00]  INFO db: Opening Bolt DB at /data/beaconchaindata/beaconchain.db\r\ninvalid argument</code></pre>\r\n\r\nOnly the log \"invalid argument\" without specifying if datadir is incorrect\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nMac Ventura/Docker\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\ngcr.io/prysmaticlabs/prysm/beacon-chain:stable\r\n    or\r\ngcr.io/prysmaticlabs/prysm/beacon-chain@sha256:7c80d751daca74a9c50ec2e4524ca95b093563700a050e6863096efd263adae1\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1461537429",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1461537429",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1461537429,
    "node_id": "IC_kwDOBvuov85XHUqV",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-09T08:17:24Z",
    "updated_at": "2023-03-09T08:17:24Z",
    "author_association": "MEMBER",
    "body": "This is an odd error, this is a standard command that many users to run prysm and it hasn't changed in a while. If you replace `$HOME` with the path to your actual home directory, does it work ?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1461537429/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1462922587",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1462922587",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1462922587,
    "node_id": "IC_kwDOBvuov85XMm1b",
    "user": {
      "login": "jgresham",
      "id": 3721291,
      "node_id": "MDQ6VXNlcjM3MjEyOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3721291?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgresham",
      "html_url": "https://github.com/jgresham",
      "followers_url": "https://api.github.com/users/jgresham/followers",
      "following_url": "https://api.github.com/users/jgresham/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgresham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgresham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgresham/subscriptions",
      "organizations_url": "https://api.github.com/users/jgresham/orgs",
      "repos_url": "https://api.github.com/users/jgresham/repos",
      "events_url": "https://api.github.com/users/jgresham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgresham/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-09T22:36:19Z",
    "updated_at": "2023-03-09T22:37:37Z",
    "author_association": "NONE",
    "body": "I can see that `beaconchaindata` & `beaconchaindata/beaconchain.db` get created at `$HOME/.eth2`. Also prysm runs when changing the value passed to `--datadir` to something other than `/data` (but the data won't persist between runs). First log shows that prysm reads `jwtsecret` under `/data` too.  hmm",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1462922587/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1479869808",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1479869808",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1479869808,
    "node_id": "IC_kwDOBvuov85YNQVw",
    "user": {
      "login": "james-prysm",
      "id": 90280386,
      "node_id": "MDQ6VXNlcjkwMjgwMzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-prysm",
      "html_url": "https://github.com/james-prysm",
      "followers_url": "https://api.github.com/users/james-prysm/followers",
      "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
      "organizations_url": "https://api.github.com/users/james-prysm/orgs",
      "repos_url": "https://api.github.com/users/james-prysm/repos",
      "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-prysm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T16:16:15Z",
    "updated_at": "2023-03-22T16:16:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "wanted to check in on the status of this. are you still having issues? @jgresham ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1479869808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1480359861",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1480359861",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1480359861,
    "node_id": "IC_kwDOBvuov85YPH-1",
    "user": {
      "login": "jgresham",
      "id": 3721291,
      "node_id": "MDQ6VXNlcjM3MjEyOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3721291?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgresham",
      "html_url": "https://github.com/jgresham",
      "followers_url": "https://api.github.com/users/jgresham/followers",
      "following_url": "https://api.github.com/users/jgresham/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgresham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgresham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgresham/subscriptions",
      "organizations_url": "https://api.github.com/users/jgresham/orgs",
      "repos_url": "https://api.github.com/users/jgresham/repos",
      "events_url": "https://api.github.com/users/jgresham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgresham/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T22:56:33Z",
    "updated_at": "2023-03-22T22:56:33Z",
    "author_association": "NONE",
    "body": "yes, I am, however, I was had an alias setup for docker, so I was actually using `podman` (docker alternative). I don't have this issue on Windows. I'm also using an M1, apple chip mac.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1480359861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1480360448",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1480360448",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1480360448,
    "node_id": "IC_kwDOBvuov85YPIIA",
    "user": {
      "login": "jgresham",
      "id": 3721291,
      "node_id": "MDQ6VXNlcjM3MjEyOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3721291?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgresham",
      "html_url": "https://github.com/jgresham",
      "followers_url": "https://api.github.com/users/jgresham/followers",
      "following_url": "https://api.github.com/users/jgresham/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgresham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgresham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgresham/subscriptions",
      "organizations_url": "https://api.github.com/users/jgresham/orgs",
      "repos_url": "https://api.github.com/users/jgresham/repos",
      "events_url": "https://api.github.com/users/jgresham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgresham/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-22T22:57:29Z",
    "updated_at": "2023-03-22T22:57:29Z",
    "author_association": "NONE",
    "body": "I'll try to test with Docker on my mac tonight or tomorrow. Would still be nice to have a more description error log than \"invalid argument\" from the container if possible ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1480360448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1481731305",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1481731305",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1481731305,
    "node_id": "IC_kwDOBvuov85YUWzp",
    "user": {
      "login": "james-prysm",
      "id": 90280386,
      "node_id": "MDQ6VXNlcjkwMjgwMzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-prysm",
      "html_url": "https://github.com/james-prysm",
      "followers_url": "https://api.github.com/users/james-prysm/followers",
      "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
      "organizations_url": "https://api.github.com/users/james-prysm/orgs",
      "repos_url": "https://api.github.com/users/james-prysm/repos",
      "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-prysm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T18:53:50Z",
    "updated_at": "2023-03-23T18:53:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "the invalid argument refers to the message above, opening at /data/beaconchaindata/beaconchain.db seems to fail perhaps it can't find the path from your current setup.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1481731305/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1481759358",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12105#issuecomment-1481759358",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12105",
    "id": 1481759358,
    "node_id": "IC_kwDOBvuov85YUdp-",
    "user": {
      "login": "jgresham",
      "id": 3721291,
      "node_id": "MDQ6VXNlcjM3MjEyOTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3721291?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgresham",
      "html_url": "https://github.com/jgresham",
      "followers_url": "https://api.github.com/users/jgresham/followers",
      "following_url": "https://api.github.com/users/jgresham/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgresham/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgresham/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgresham/subscriptions",
      "organizations_url": "https://api.github.com/users/jgresham/orgs",
      "repos_url": "https://api.github.com/users/jgresham/repos",
      "events_url": "https://api.github.com/users/jgresham/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgresham/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-23T19:15:44Z",
    "updated_at": "2023-03-23T19:15:44Z",
    "author_association": "NONE",
    "body": "<img width=\"719\" alt=\"Captura de pantalla 2023-03-23 a la(s) 12 12 02 p m\" src=\"https://user-images.githubusercontent.com/3721291/227323614-0f519ea1-23b7-4c96-8bea-15ce51865874.png\">\r\n \r\nI see that prysm creates the file. I've tried deleting it and re-starting prysm. I also ran `chmod 777 ` on it to make sure it wasn't a permissions issue. Additionally, it seems that prysm reads the jwtsecret fine.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1481759358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459",
  "id": 809581332,
  "node_id": "MDU6SXNzdWU4MDk1ODEzMzI=",
  "number": 8459,
  "title": "Network activity towards RFC1918 (private network ranges)",
  "user": {
    "login": "RSMCx1",
    "id": 79161711,
    "node_id": "MDQ6VXNlcjc5MTYxNzEx",
    "avatar_url": "https://avatars.githubusercontent.com/u/79161711?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/RSMCx1",
    "html_url": "https://github.com/RSMCx1",
    "followers_url": "https://api.github.com/users/RSMCx1/followers",
    "following_url": "https://api.github.com/users/RSMCx1/following{/other_user}",
    "gists_url": "https://api.github.com/users/RSMCx1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/RSMCx1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/RSMCx1/subscriptions",
    "organizations_url": "https://api.github.com/users/RSMCx1/orgs",
    "repos_url": "https://api.github.com/users/RSMCx1/repos",
    "events_url": "https://api.github.com/users/RSMCx1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/RSMCx1/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-02-16T19:20:08Z",
  "updated_at": "2022-11-05T06:50:56Z",
  "closed_at": "2021-09-06T10:18:52Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello,\r\n\r\nI've recently reviewed the firewall log of my Ethereum node, and I see allot of (blocked) outgoing traffic to private network ranges (RFC 1918) not belonging to my internal network.\r\n\r\nTo name a few examples:\r\n172.17.0.1:9000 TCP\r\n172.31.16.80:9000 TCP\r\n172.17.0.1:9000 TCP\r\n192.168.1.222:13000 TCP\r\n10.36.8.30:5000 TCP\r\n10.36.7.5:5000 TCP\r\n\r\nI've found an issue in the past that addresses the observed behavior: https://github.com/prysmaticlabs/prysm/issues/5663\r\n\r\nIt was mentioned the issue would most likely be resolved with the discovery 5 protocol, i'm uncertain what discovery version is currently being used. What I do know is that my node is currently running Prysm v1.2.1.\r\n\r\nI don't think it can do a lot of harm, but it is certainly not something that should be allowed to happen. I'm also concerned about the possible implications of, for instance, nodes advertising the same private IP as another one.\r\n\r\nIs this being addressed or is there a way to ignore nodes that broadcast private IP addresses?\r\n\r\nAdditionally, can anybody that broadcasts a private IP be considered malicious? Or is a configuration mistake the result of the behavior that is being witnessed? \r\n\r\nThanks!\r\n\r\n",
  "closed_by": {
    "login": "nisdas",
    "id": 33201827,
    "node_id": "MDQ6VXNlcjMzMjAxODI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nisdas",
    "html_url": "https://github.com/nisdas",
    "followers_url": "https://api.github.com/users/nisdas/followers",
    "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
    "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
    "organizations_url": "https://api.github.com/users/nisdas/orgs",
    "repos_url": "https://api.github.com/users/nisdas/repos",
    "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nisdas/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459/reactions",
    "total_count": 2,
    "+1": 2,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/780586505",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459#issuecomment-780586505",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
    "id": 780586505,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDU4NjUwNQ==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-17T14:18:06Z",
    "updated_at": "2021-02-17T14:21:23Z",
    "author_association": "MEMBER",
    "body": "@RSMCx1 can you run the node with this flag ?\r\n\r\n```\r\n--p2p-blacklist 10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,100.64.0.0/10,169.254.0.0/16\r\n```\r\nThis should ban all private IPs, so in that case you will not dial them. \r\n\r\nOn the main reason for this, it is a bit tricky. Not all nodes are able to determine their public IP at startup, especially if they have a dynamic IP or run behind a VPN.  So by default the IP address stored in their ENR is the private IP address their process is binded to. Eventually a node should be able to update its ENR with its public IP. However, this requires a while for it to determine from the source IP of inbound packets.\r\n\r\nWhat I assume you guys are seeing are ENRs of nodes who haven't determined their public ip. So this leads to the beacon node dialing private addresses instead. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/780586505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/780592919",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459#issuecomment-780592919",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
    "id": 780592919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MDU5MjkxOQ==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-17T14:28:02Z",
    "updated_at": "2021-02-17T14:28:02Z",
    "author_association": "MEMBER",
    "body": "Also related #8466 ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/780592919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/781574738",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459#issuecomment-781574738",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
    "id": 781574738,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MTU3NDczOA==",
    "user": {
      "login": "RSMCx1",
      "id": 79161711,
      "node_id": "MDQ6VXNlcjc5MTYxNzEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/79161711?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/RSMCx1",
      "html_url": "https://github.com/RSMCx1",
      "followers_url": "https://api.github.com/users/RSMCx1/followers",
      "following_url": "https://api.github.com/users/RSMCx1/following{/other_user}",
      "gists_url": "https://api.github.com/users/RSMCx1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/RSMCx1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/RSMCx1/subscriptions",
      "organizations_url": "https://api.github.com/users/RSMCx1/orgs",
      "repos_url": "https://api.github.com/users/RSMCx1/repos",
      "events_url": "https://api.github.com/users/RSMCx1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/RSMCx1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-18T19:15:31Z",
    "updated_at": "2021-02-18T19:15:31Z",
    "author_association": "NONE",
    "body": "@nisdas I agree it's a tricky issue. Top of mind I cannot think of a very easy solution, at some point it should be addressed however. This behavior should not exist on a public network, a node is no use anyways if the other nodes do not know how to connect to it.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/781574738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/913531300",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459#issuecomment-913531300",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
    "id": 913531300,
    "node_id": "IC_kwDOBvuov842c2Gk",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-06T10:18:52Z",
    "updated_at": "2021-09-06T10:18:52Z",
    "author_association": "MEMBER",
    "body": "@RSMCx1 If you do run into this again, you can use this flag\r\n```\r\n--p2p-denylist=private\r\n```\r\nThis was added in #8648 . On disabling private dials, that is tricky as it will prevent us from launching small scale local testnets and also peering with any local nodes that we do have. Peers can occasionally be misconfigured or simply provide us with bogus enrs. We have very little control over this, which is why I will be closing this issue unless you feel that it should still stay open. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/913531300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1253241945",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459#issuecomment-1253241945",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
    "id": 1253241945,
    "node_id": "IC_kwDOBvuov85KsvRZ",
    "user": {
      "login": "dtto",
      "id": 6629106,
      "node_id": "MDQ6VXNlcjY2MjkxMDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6629106?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dtto",
      "html_url": "https://github.com/dtto",
      "followers_url": "https://api.github.com/users/dtto/followers",
      "following_url": "https://api.github.com/users/dtto/following{/other_user}",
      "gists_url": "https://api.github.com/users/dtto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dtto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dtto/subscriptions",
      "organizations_url": "https://api.github.com/users/dtto/orgs",
      "repos_url": "https://api.github.com/users/dtto/repos",
      "events_url": "https://api.github.com/users/dtto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dtto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-21T05:59:30Z",
    "updated_at": "2022-09-21T05:59:53Z",
    "author_association": "NONE",
    "body": "I stumbled upon this issue when trying to figure out why prysm was sending traffic to RFC1918 addresses. FWIW, I am not sure why this is the default behavior. For use cases where traffic needs to be sent to RFC1918 it could be enabled.\r\n\r\nAlso, for anyone else who wants to disable it and uses a yaml config file, it may be done using:\r\n\r\n`p2p-denylist: [\"10.0.0.0/8\",\"172.16.0.0/12\",\"192.168.0.0/16\",\"100.64.0.0/10\",\"169.254.0.0/16\"]`\r\n\r\nWhen I tried simply adding `p2p-denylist: private` to the yaml config, the client threw `level=error msg=\"Mismatched type for flag 'p2p-denylist'. Expected '[]interface{}' but actual is 'string'\"`.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1253241945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1304424622",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8459#issuecomment-1304424622",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8459",
    "id": 1304424622,
    "node_id": "IC_kwDOBvuov85Nv_Cu",
    "user": {
      "login": "taggart",
      "id": 476401,
      "node_id": "MDQ6VXNlcjQ3NjQwMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/476401?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/taggart",
      "html_url": "https://github.com/taggart",
      "followers_url": "https://api.github.com/users/taggart/followers",
      "following_url": "https://api.github.com/users/taggart/following{/other_user}",
      "gists_url": "https://api.github.com/users/taggart/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/taggart/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/taggart/subscriptions",
      "organizations_url": "https://api.github.com/users/taggart/orgs",
      "repos_url": "https://api.github.com/users/taggart/repos",
      "events_url": "https://api.github.com/users/taggart/events{/privacy}",
      "received_events_url": "https://api.github.com/users/taggart/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-05T06:50:56Z",
    "updated_at": "2022-11-05T06:50:56Z",
    "author_association": "NONE",
    "body": "Yes, it would be better if this was the default and you had to explicitly turn on this behavior if you wanted it. Probably all (or 99.99%) users would benefit from this being turned off.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1304424622/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/10342",
  "id": 1165783098,
  "node_id": "I_kwDOBvuov85FfHA6",
  "number": 10342,
  "title": "Issue adding multiple beacons as rpc-providers in .yaml config",
  "user": {
    "login": "curveballdaniel",
    "id": 7424275,
    "node_id": "MDQ6VXNlcjc0MjQyNzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7424275?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/curveballdaniel",
    "html_url": "https://github.com/curveballdaniel",
    "followers_url": "https://api.github.com/users/curveballdaniel/followers",
    "following_url": "https://api.github.com/users/curveballdaniel/following{/other_user}",
    "gists_url": "https://api.github.com/users/curveballdaniel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/curveballdaniel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/curveballdaniel/subscriptions",
    "organizations_url": "https://api.github.com/users/curveballdaniel/orgs",
    "repos_url": "https://api.github.com/users/curveballdaniel/repos",
    "events_url": "https://api.github.com/users/curveballdaniel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/curveballdaniel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-03-10T22:19:39Z",
  "updated_at": "2022-07-27T20:06:11Z",
  "closed_at": "2022-07-27T20:06:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nI've been testing a setup (`IP:port,IP2:port2`) and my validator seems to get stuck here:\r\n```\r\ntime=\"2022-03-10 20:20:12\" level=info msg=\"Waiting for beacon node to sync to latest chain head\" prefix=validator\r\n```\r\nIndividually (without a comma separation), it works with both of the beacons. v2.0.6 for both beacon + validator\r\n\r\nBoth beacons are fully synced, and swapping to either them after a restart of the validator with different flags (a single beacon) automatically starts validating/attesting with no problems.\r\n\r\n### Has this worked before in a previous version?\r\n\r\nHaven't tested.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nI'm running this from a docker-compose, pulling from a config file:\r\n\r\nImage: `gcr.io/prysmaticlabs/prysm/validator:v2.0.6`, command: `--config-file=/config/validator.yaml` (assorted other stuff, such as ports and the lot all as should be)\r\n\r\nThe config file:\r\n```\r\n---\r\naccept-terms-of-use: yes\r\n\r\n##############\r\n# Connectivity\r\nbeacon-rpc-provider: XYZ:4000,XYZA:4000\r\nmonitoring-host: 0.0.0.0\r\n\r\ngrpc-gateway-host: 0.0.0.0\r\n\r\nprater: yes\r\n```\r\n\r\nAfter discussion in the discord that:\r\n\r\n\"\r\nWith yaml files it's slightly different format this should work\r\n```\r\nbeacon-rpc-provider:\r\n- XYZ:4000\r\n- XYZA:4000\r\n```\r\n\"\r\n\r\nI then received this error back from the validator, which dies immediately:\r\n\r\n```\r\ntime=\"2022-03-10T22:06:47Z\" level=error msg=\"Mismatched type for flag 'beacon-rpc-provider'. Expected 'string' but actual is ''\" prefix=main\r\n```\r\n\r\n## üî• Error\r\n\r\nError when using expected `.yaml` format:\r\n\r\n```\r\ntime=\"2022-03-10T22:06:47Z\" level=error msg=\"Mismatched type for flag 'beacon-rpc-provider'. Expected 'string' but actual is ''\" prefix=main\r\n```\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\nUbuntu 20.04\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\nv2.0.6\r\nValidator: `gcr.io/prysmaticlabs/prysm/validator:v2.0.6`\r\nBeacon: `gcr.io/prysmaticlabs/prysm/beacon-chain:v2.0.6`\r\n\r\n**Anything else relevant (validator index / public key)?**\r\nN/A\r\n",
  "closed_by": {
    "login": "curveballdaniel",
    "id": 7424275,
    "node_id": "MDQ6VXNlcjc0MjQyNzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7424275?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/curveballdaniel",
    "html_url": "https://github.com/curveballdaniel",
    "followers_url": "https://api.github.com/users/curveballdaniel/followers",
    "following_url": "https://api.github.com/users/curveballdaniel/following{/other_user}",
    "gists_url": "https://api.github.com/users/curveballdaniel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/curveballdaniel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/curveballdaniel/subscriptions",
    "organizations_url": "https://api.github.com/users/curveballdaniel/orgs",
    "repos_url": "https://api.github.com/users/curveballdaniel/repos",
    "events_url": "https://api.github.com/users/curveballdaniel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/curveballdaniel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1196662276",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10342#issuecomment-1196662276",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342",
    "id": 1196662276,
    "node_id": "IC_kwDOBvuov85HU54E",
    "user": {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T12:26:20Z",
    "updated_at": "2022-07-27T12:26:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @curveballdaniel. The syntax\r\n```\r\nbeacon-rpc-provider:\r\n- XYZ:4000\r\n- XYZA:4000\r\n```\r\nwill not be supported because it requires changes that would interfere with a lot of stakers' setups. However, the syntax `beacon-rpc-provider: XYZ:4000,XYZA:4000` should work correctly. Can you please verify that this problem persists in a newer version of Prysm?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1196662276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1197310660",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10342#issuecomment-1197310660",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10342",
    "id": 1197310660,
    "node_id": "IC_kwDOBvuov85HXYLE",
    "user": {
      "login": "curveballdaniel",
      "id": 7424275,
      "node_id": "MDQ6VXNlcjc0MjQyNzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7424275?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/curveballdaniel",
      "html_url": "https://github.com/curveballdaniel",
      "followers_url": "https://api.github.com/users/curveballdaniel/followers",
      "following_url": "https://api.github.com/users/curveballdaniel/following{/other_user}",
      "gists_url": "https://api.github.com/users/curveballdaniel/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/curveballdaniel/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/curveballdaniel/subscriptions",
      "organizations_url": "https://api.github.com/users/curveballdaniel/orgs",
      "repos_url": "https://api.github.com/users/curveballdaniel/repos",
      "events_url": "https://api.github.com/users/curveballdaniel/events{/privacy}",
      "received_events_url": "https://api.github.com/users/curveballdaniel/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-07-27T20:06:11Z",
    "updated_at": "2022-07-27T20:06:11Z",
    "author_association": "NONE",
    "body": "Understood. I have just tested the `beacon-rpc-provider: XYZ:4000,XYZA:4000` input on v2.1.3 and it works! I can live with this solution üôÇ. Thank you!",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1197310660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

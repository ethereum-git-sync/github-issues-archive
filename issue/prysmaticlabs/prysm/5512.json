{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512",
  "id": 602760430,
  "node_id": "MDU6SXNzdWU2MDI3NjA0MzA=",
  "number": 5512,
  "title": "Steadily climbing memory usages",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129907,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDc=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Help%20Wanted",
      "name": "Help Wanted",
      "color": "33aa3f",
      "default": false,
      "description": "Extra attention is needed"
    },
    {
      "id": 1085358164,
      "node_id": "MDU6TGFiZWwxMDg1MzU4MTY0",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Priority:%20Critical",
      "name": "Priority: Critical",
      "color": "f7262f",
      "default": false,
      "description": "Highest, immediate priority item"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2020-04-19T16:31:35Z",
  "updated_at": "2020-04-30T23:55:08Z",
  "closed_at": "2020-04-30T23:55:08Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "It has been reported that user node's RAM usage steadily climbs. Opening this issue to track whether there's something hang onto references or unbound caches. The memory usage over time doesn't look right\r\n\r\nhttps://eth2stats.io/topaz-testnet.  <- Some are over 3GB",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616568548",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-616568548",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 616568548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjU2ODU0OA==",
    "user": {
      "login": "pintail-xyz",
      "id": 192824,
      "node_id": "MDQ6VXNlcjE5MjgyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/192824?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pintail-xyz",
      "html_url": "https://github.com/pintail-xyz",
      "followers_url": "https://api.github.com/users/pintail-xyz/followers",
      "following_url": "https://api.github.com/users/pintail-xyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pintail-xyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pintail-xyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pintail-xyz/subscriptions",
      "organizations_url": "https://api.github.com/users/pintail-xyz/orgs",
      "repos_url": "https://api.github.com/users/pintail-xyz/repos",
      "events_url": "https://api.github.com/users/pintail-xyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pintail-xyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-20T13:52:48Z",
    "updated_at": "2020-04-20T13:54:24Z",
    "author_association": "NONE",
    "body": "I’ve had this problem too. However my memory usage was much higher than was displayed for my node on https://eth2stats.io/topaz-testnet - it showed me at 1.25GB even though I’d almost run out of memory on a machine with 8GB.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616568548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616770102",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-616770102",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 616770102,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjc3MDEwMg==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-20T19:45:49Z",
    "updated_at": "2020-04-20T19:45:49Z",
    "author_association": "MEMBER",
    "body": "Heap profile serving 1000 validators:\r\n\r\n<img width=\"2254\" alt=\"Screen Shot 2020-04-20 at 7 24 36 AM\" src=\"https://user-images.githubusercontent.com/21316537/79793057-d54e2e80-8304-11ea-8722-0fb75e017d7f.png\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616770102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616790045",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-616790045",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 616790045,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjc5MDA0NQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-20T20:27:49Z",
    "updated_at": "2020-04-20T20:27:49Z",
    "author_association": "MEMBER",
    "body": "An approach to mitigate it is to not use `state` to verify incoming unaggregated attestation via sync. Use cached `committee` and `pubkeys`. It requires a bit of refactoring and I dont think this is pressing. Not that many nodes will be servicing 1000 validators anyway",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616790045/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616884191",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-616884191",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 616884191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjg4NDE5MQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-21T00:47:19Z",
    "updated_at": "2020-04-21T00:47:19Z",
    "author_association": "MEMBER",
    "body": "I have experienced the same problem without serving validators. The heap stays a nearly consistent size while resident memory usage increases over time. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616884191/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616886328",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-616886328",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 616886328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNjg4NjMyOA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-21T00:55:55Z",
    "updated_at": "2020-04-21T00:55:55Z",
    "author_association": "MEMBER",
    "body": "Bumping up priority since this affects non-serving validator beacon node",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/616886328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/617394795",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-617394795",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 617394795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNzM5NDc5NQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-21T20:23:45Z",
    "updated_at": "2020-04-21T20:23:45Z",
    "author_association": "MEMBER",
    "body": "![Screenshot 2020-04-21 at 10 30 21 - Edited](https://user-images.githubusercontent.com/7246818/79910258-3e03dc80-83d3-11ea-9cc5-410dc42c8c61.png)\r\n\r\nLooks like new state managementt might be an issue. #5567 will flip the flag's default value to be opt-in instead of opt-out. We'll create a new release after #5567 merges",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/617394795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/617860534",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-617860534",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 617860534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxNzg2MDUzNA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-22T15:45:39Z",
    "updated_at": "2020-04-22T15:45:39Z",
    "author_association": "MEMBER",
    "body": "Update. I have a solution for this. Going be thoroughly testing this today",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/617860534/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/620038926",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-620038926",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 620038926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDAzODkyNg==",
    "user": {
      "login": "Magicking",
      "id": 284088,
      "node_id": "MDQ6VXNlcjI4NDA4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/284088?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Magicking",
      "html_url": "https://github.com/Magicking",
      "followers_url": "https://api.github.com/users/Magicking/followers",
      "following_url": "https://api.github.com/users/Magicking/following{/other_user}",
      "gists_url": "https://api.github.com/users/Magicking/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Magicking/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Magicking/subscriptions",
      "organizations_url": "https://api.github.com/users/Magicking/orgs",
      "repos_url": "https://api.github.com/users/Magicking/repos",
      "events_url": "https://api.github.com/users/Magicking/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Magicking/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-27T14:55:51Z",
    "updated_at": "2020-04-27T14:55:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "I started a beacon-chain with an empty state this morning and the resident memory usage went very high, I'm currently sitting at 6.5G with an observed peak at 6.8G, it stopped raising after it went fully synchronized.\r\n```\r\nPID USER     %MEM   DRS   RSS COMMAND\r\n30422 magicki+ 86.7 10249360 6823008 /app/beacon-chain/image.binary --datadir=/data --log-file=/data/beacon-1.log\r\n```\r\n\r\nAfter a restart with a beacon-chain fully synced, I was only at 1.5g.\r\n\r\n```\r\nPID USER     %MEM   DRS   RSS COMMAND\r\n  315 magicki+ 19.7 3822636 1555964 /app/beacon-chain/image.binary --datadir=/data --log-file=/data/beacon-1.log\r\n```\r\n\r\nVersion: Prysm/Git commit: eb5513f8c209c6f1254f9cc311202f59c3570d3e. Built at: 2020-04-27 07:06:03+00:00",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/620038926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/620040172",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-620040172",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 620040172,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMDA0MDE3Mg==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-27T14:58:06Z",
    "updated_at": "2020-04-27T14:58:06Z",
    "author_association": "MEMBER",
    "body": "@Magicking that looks like standard flags, i wonder if initial syncing brought memory up to 6.5G\r\n\r\ncc @farazdagi ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/620040172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/621232650",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-621232650",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 621232650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMTIzMjY1MA==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-29T14:05:21Z",
    "updated_at": "2020-04-29T14:05:21Z",
    "author_association": "MEMBER",
    "body": "hey @Magicking can you try \r\n```\r\n--enable-state-ref-copy\r\n```\r\nthis should reduce your memory usage by quite a bit",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/621232650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/622166122",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-622166122",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 622166122,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMjE2NjEyMg==",
    "user": {
      "login": "Magicking",
      "id": 284088,
      "node_id": "MDQ6VXNlcjI4NDA4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/284088?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Magicking",
      "html_url": "https://github.com/Magicking",
      "followers_url": "https://api.github.com/users/Magicking/followers",
      "following_url": "https://api.github.com/users/Magicking/following{/other_user}",
      "gists_url": "https://api.github.com/users/Magicking/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Magicking/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Magicking/subscriptions",
      "organizations_url": "https://api.github.com/users/Magicking/orgs",
      "repos_url": "https://api.github.com/users/Magicking/repos",
      "events_url": "https://api.github.com/users/Magicking/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Magicking/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-30T23:08:42Z",
    "updated_at": "2020-04-30T23:10:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Version \"Prysm/Git commit: cc07494e67d2cfa1c60dd1c5aa24febceb6e6719. Built at: 2020-04-30 15:36:01+00:00\" going from a fresh sync it capped again at 6.6G of resident memory.\r\n```\r\n[magicking@broken:~/prysm]$ ps -o pid,user,%mem,drs,rss,command ax | sort -b -k3 -r | head -n 2\r\n  PID USER     %MEM   DRS   RSS COMMAND\r\n10929 magicki+ 86.1 9592988 6771464 /app/beacon-chain/image.binary --datadir=/data --log-file=/data/beacon-2.log --enable-state-ref-copy\r\n```\r\nAfter a restart with a fully synced beacon chain it capped at 1.1G and approximately 2 hours later it went up to 1.5G.\r\n```\r\n[magicking@broken:~/prysm]$ ps -o pid,user,%mem,drs,rss,command ax | sort -b -k3 -r | grep \"PID\\|beacon\"\r\n  PID USER     %MEM   DRS   RSS COMMAND\r\n11504 magicki+ 15.1 3412664 1193936 /app/beacon-chain/image.binary --datadir=/data --log-file=/data/beacon-2.log --enable-state-ref-copy\r\n# ~2 hours later\r\n[magicking@broken:~/prysm]$ ps -o pid,user,%mem,drs,rss,command ax | sort -b -k3 -r | grep \"PID\\|beacon\"\r\n  PID USER     %MEM   DRS   RSS COMMAND\r\n11504 magicki+ 20.3 4223788 1598120 /app/beacon-chain/image.binary --datadir=/data --log-file=/data/beacon-2.log --enable-state-ref-copy\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/622166122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/622180284",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5512#issuecomment-622180284",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5512",
    "id": 622180284,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMjE4MDI4NA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-30T23:55:08Z",
    "updated_at": "2020-04-30T23:55:08Z",
    "author_association": "MEMBER",
    "body": "Yeah. Fresh sync has its own memory problem. This issue is more about memory problem post initial syncing. Please refer to https://github.com/prysmaticlabs/prysm/issues/5390",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/622180284/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

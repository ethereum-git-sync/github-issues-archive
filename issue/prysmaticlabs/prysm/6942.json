{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942",
  "id": 675677698,
  "node_id": "MDU6SXNzdWU2NzU2Nzc2OTg=",
  "number": 6942,
  "title": "Out of memory on beaconchain process",
  "user": {
    "login": "SickLead",
    "id": 43250635,
    "node_id": "MDQ6VXNlcjQzMjUwNjM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/43250635?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SickLead",
    "html_url": "https://github.com/SickLead",
    "followers_url": "https://api.github.com/users/SickLead/followers",
    "following_url": "https://api.github.com/users/SickLead/following{/other_user}",
    "gists_url": "https://api.github.com/users/SickLead/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SickLead/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SickLead/subscriptions",
    "organizations_url": "https://api.github.com/users/SickLead/orgs",
    "repos_url": "https://api.github.com/users/SickLead/repos",
    "events_url": "https://api.github.com/users/SickLead/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SickLead/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-08-09T10:45:53Z",
  "updated_at": "2021-06-18T14:37:37Z",
  "closed_at": "2020-08-20T20:03:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nMaybe this is already reported, but I would like to share a problem of the beacon node ‚Äì 2 core/4gb ram/80 gb SSD. I am waiting for validation of my validator and when I start the beaconnode, sometimes I run out of memory on my droplet and I need to restart the beacon node manually.\r\n\r\nI don‚Äôt really know if it has anything to do with the fact that the validator is still not validated on the network, however I have another validator running (and validated) with the same configuration setup and I don‚Äôt encounter this problem.\r\n\r\nThe beacon node stopped working an the linux kernel killed the process due to a too high memory usage.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nRun command for a not yet validated validator:\r\n\r\n**Geth**\r\ngeth --goerli --datadir=\"$HOME/Goerli\" --rpc\r\n\r\n**beaconchain**\r\n~/prysm/prysm.sh beacon-chain --p2p-host-ip=$(curl -s v4.ident.me) --http-web3provider=$HOME/Goerli/geth.ipc --log-file $HOME/beaconChain.log\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\nAug  8 05:26:59 Medalla2 kernel: [123442.812675] Out of memory: Kill process 9016 (beacon-chain-v1) score 595 or sacrifice child\r\nAug  8 05:26:59 Medalla2 kernel: [123442.815059] Killed process 9016 (beacon-chain-v1) total-vm:5108624kB, anon-rss:2472716kB, file-rss:0kB, shmem-rss:0kB\r\nAug  8 05:26:59 Medalla2 kernel: [123442.980812] oom_reaper: reaped process 9016 (beacon-chain-v1), now anon-rss:0kB, file-rss:0kB, shmem-rss:0kB\r\n</code></pre>\r\n\r\n(->see logs at the end)\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\ndigitalocean droplet 2 core/4 GB Memory / 80 GB Disk / FRA1 - Ubuntu 18.04.3 (LTS) x64\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nPrysm version is v1.0.0-alpha.19.\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\nhttps://beaconcha.in/validator/25817\r\n\r\n[beaconChain.log](https://github.com/prysmaticlabs/prysm/files/5047257/beaconChain.log)\r\n[kern.log](https://github.com/prysmaticlabs/prysm/files/5047258/kern.log)",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/674080121",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942#issuecomment-674080121",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
    "id": 674080121,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NDA4MDEyMQ==",
    "user": {
      "login": "Chriton",
      "id": 12685981,
      "node_id": "MDQ6VXNlcjEyNjg1OTgx",
      "avatar_url": "https://avatars.githubusercontent.com/u/12685981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Chriton",
      "html_url": "https://github.com/Chriton",
      "followers_url": "https://api.github.com/users/Chriton/followers",
      "following_url": "https://api.github.com/users/Chriton/following{/other_user}",
      "gists_url": "https://api.github.com/users/Chriton/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Chriton/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Chriton/subscriptions",
      "organizations_url": "https://api.github.com/users/Chriton/orgs",
      "repos_url": "https://api.github.com/users/Chriton/repos",
      "events_url": "https://api.github.com/users/Chriton/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Chriton/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-14T13:40:12Z",
    "updated_at": "2020-08-14T13:40:12Z",
    "author_association": "NONE",
    "body": "The \"Out of memory\" memory happened to me also but I was running on a Raspberry Pi 3 model B v1.2 with 1gb ram on Ubuntu 64bit. Now I am running the beacon chain and validator on a raspberry pi4 with 8gb ram and works fine.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/674080121/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/677875156",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942#issuecomment-677875156",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
    "id": 677875156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Nzg3NTE1Ng==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-20T20:03:14Z",
    "updated_at": "2020-08-20T20:03:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @Chriton 4Gb was not enough during the incident the testnet suffered this past weekend. We have some big improvements in the pipeline and usage should be a lot lower now. You should be ok at the moment with 4Gb.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/677875156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/862412462",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942#issuecomment-862412462",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
    "id": 862412462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQxMjQ2Mg==",
    "user": {
      "login": "Kyrrui",
      "id": 8539426,
      "node_id": "MDQ6VXNlcjg1Mzk0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8539426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kyrrui",
      "html_url": "https://github.com/Kyrrui",
      "followers_url": "https://api.github.com/users/Kyrrui/followers",
      "following_url": "https://api.github.com/users/Kyrrui/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kyrrui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kyrrui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kyrrui/subscriptions",
      "organizations_url": "https://api.github.com/users/Kyrrui/orgs",
      "repos_url": "https://api.github.com/users/Kyrrui/repos",
      "events_url": "https://api.github.com/users/Kyrrui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kyrrui/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-16T14:08:15Z",
    "updated_at": "2021-06-16T14:08:15Z",
    "author_association": "NONE",
    "body": "I would like to re-open this issue. I'm running on the same size droplet and ever since the most recent version of the beacon chain release (v1.3.10) I have been having OOM issues before my beacon chain can completely sync. My validator has been down for the past 4 days for this, and I'm seriously having to consider using a different client or upgrading to the next memory level in digital ocean, which is twice the cost of the current on ($20 vs $40 per month)",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/862412462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/862417659",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942#issuecomment-862417659",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
    "id": 862417659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQxNzY1OQ==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-16T14:14:32Z",
    "updated_at": "2021-06-16T14:14:32Z",
    "author_association": "MEMBER",
    "body": "@Kyrrui Could you provide more details here ? \r\nEx: \r\n- What are the specs on your droplet\r\n- The flags you are running the node with\r\n- Any other processes that are running alongside the beacon node.\r\n- Logs before your node has an OOM\r\n\r\nAs far as we are aware, there have been no reports on excessive memory consumption with v1.3.10 so any information will be helpful.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/862417659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/862426252",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942#issuecomment-862426252",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
    "id": 862426252,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2MjQyNjI1Mg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-16T14:25:13Z",
    "updated_at": "2021-06-16T14:25:13Z",
    "author_association": "MEMBER",
    "body": "![Screenshot from 2021-06-16 09-24-20](https://user-images.githubusercontent.com/7246818/122237129-b1449980-ce84-11eb-942b-bc0010a86727.png)\r\n\r\n@nisdas here's a data point on digital ocean. It sounds like they are using 4GB ram droplet. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/862426252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/864085884",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6942#issuecomment-864085884",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6942",
    "id": 864085884,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDA4NTg4NA==",
    "user": {
      "login": "Kyrrui",
      "id": 8539426,
      "node_id": "MDQ6VXNlcjg1Mzk0MjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8539426?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Kyrrui",
      "html_url": "https://github.com/Kyrrui",
      "followers_url": "https://api.github.com/users/Kyrrui/followers",
      "following_url": "https://api.github.com/users/Kyrrui/following{/other_user}",
      "gists_url": "https://api.github.com/users/Kyrrui/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Kyrrui/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Kyrrui/subscriptions",
      "organizations_url": "https://api.github.com/users/Kyrrui/orgs",
      "repos_url": "https://api.github.com/users/Kyrrui/repos",
      "events_url": "https://api.github.com/users/Kyrrui/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Kyrrui/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-18T14:37:37Z",
    "updated_at": "2021-06-18T14:37:37Z",
    "author_association": "NONE",
    "body": "@nisdas Hello! So I upgraded my node to the $40 a month version temporarily so I don't have anything saved but can describe the setup I had and the behavior.\r\nThe node is running a validator client with a graffiti tag, the ETH2 beacon chain was running with just the '--http-web3provider' flag connected to an infura endpoint.\r\nThe log was just normal output then 'killed'. I looked into the system logs and found that the system ran out of memory. To be safe I shut down the validator and started up the beacon chain alone, but it still ran out of memory. @prestonvanloon is correct on the droplet I am running. I do want to say this has been a continuous issue, but only happened every couple of weeks before hand, since the latest release, the beacon chain hasn't been able to sync without running into the OOM issue. For reference here is my validator https://beaconcha.in/validator/9946982d09a2f6106251e12a5c2009b478cdb1c19201e16df7976a5ff578c68e7fc80a2d610201b8281e5e84ee4e087b",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/864085884/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

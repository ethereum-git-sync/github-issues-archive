{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/13049",
  "id": 1942816422,
  "node_id": "I_kwDOBvuov85zzQam",
  "number": 13049,
  "title": "beacon API blob_sidecar SSE payload is incorrect",
  "user": {
    "login": "Savid",
    "id": 1709934,
    "node_id": "MDQ6VXNlcjE3MDk5MzQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1709934?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Savid",
    "html_url": "https://github.com/Savid",
    "followers_url": "https://api.github.com/users/Savid/followers",
    "following_url": "https://api.github.com/users/Savid/following{/other_user}",
    "gists_url": "https://api.github.com/users/Savid/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Savid/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Savid/subscriptions",
    "organizations_url": "https://api.github.com/users/Savid/orgs",
    "repos_url": "https://api.github.com/users/Savid/repos",
    "events_url": "https://api.github.com/users/Savid/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Savid/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-10-14T00:32:17Z",
  "updated_at": "2023-10-17T11:07:05Z",
  "closed_at": "2023-10-17T11:07:05Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nTesting dencun devnet 9 with the new [`blob_sidecar`](https://ethereum.github.io/beacon-APIs/?urls.primaryName=dev#/Events/eventstream) sse topic. It has incorrect payload published;\r\n\r\n## Expected\r\n```json\r\n{\r\n    \"block_root\": \"0x0380d3f9c060fb1a4a9041bb6dcfa454118617888bf2ec9d6f131af184ae67d6\",\r\n    \"index\": \"0\",\r\n    \"slot\": \"105097\",\r\n    \"kzg_commitment\": \"0x82ba153e3b40a339339717b0e0f8ec795219442652f4cff4f05418debc6a77613498b7aec27c9bf45f4558194e5c4eb1\",\r\n    \"versioned_hash\": \"0x011ad296b2fb8fa2596a0289e62a0558de9612bc8adbf4bc2b68d85a442e6b0f\"\r\n}\r\n```\r\n\r\n## Actual\r\n```json\r\n{\r\n    \"block_root\": \"0x0380d3f9c060fb1a4a9041bb6dcfa454118617888bf2ec9d6f131af184ae67d6\",\r\n    \"index\": \"0\",\r\n    \"slot\": \"105097\",\r\n    \"block_parent_root\": \"0x\",\r\n    \"proposer_index\": \"\",\r\n    \"blob\": \"0x\",\r\n    \"kzg_commitment\": \"0x82ba153e3b40a339339717b0e0f8ec795219442652f4cff4f05418debc6a77613498b7aec27c9bf45f4558194e5c4eb1\",\r\n    \"kzg_proof\": \"0x\"\r\n}\r\n```\r\n\r\n- `versioned_hash` missing\r\n- `block_parent_root` should be omitted\r\n- `proposer_index` should be omitted\r\n- `blob` should be omitted\r\n- `kzg_proof` should be omitted\r\n\n\n### Has this worked before in a previous version?\n\n```text\nDon't think so, this is a new functionality for devnets.\n```\n\n\n### ðŸ”¬ Minimal Reproduction\n\n1. dencun devnet 9 prysm beacon node\r\n2. run `curl \"http://127.0.0.1:5052/eth/v1/events?topics=blob_sidecar\" -H \"accept: text/event-stream\"`\r\n3. view topic payload\n\n### Error\n\n_No response_\n\n### Platform(s)\n\n_No response_\n\n### What version of Prysm are you running? (Which release)\n\ndevelop - be9b6ea837d9a88fe28d5c2b0b65fb4bded777bb\n\n### Anything else relevant (validator index / public key)?\n\n_No response_",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1762427549",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/13049#issuecomment-1762427549",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/13049",
    "id": 1762427549,
    "node_id": "IC_kwDOBvuov85pDIKd",
    "user": {
      "login": "Savid",
      "id": 1709934,
      "node_id": "MDQ6VXNlcjE3MDk5MzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1709934?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Savid",
      "html_url": "https://github.com/Savid",
      "followers_url": "https://api.github.com/users/Savid/followers",
      "following_url": "https://api.github.com/users/Savid/following{/other_user}",
      "gists_url": "https://api.github.com/users/Savid/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Savid/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Savid/subscriptions",
      "organizations_url": "https://api.github.com/users/Savid/orgs",
      "repos_url": "https://api.github.com/users/Savid/repos",
      "events_url": "https://api.github.com/users/Savid/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Savid/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-10-14T00:36:45Z",
    "updated_at": "2023-10-14T00:37:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like i used the wrong struct in this PR https://github.com/prysmaticlabs/prysm/pull/12999 and should have created a new struct eg.\r\n\r\n```\r\ntype EventBlobSidecarJson struct {\r\n\tBlockRoot       string `json:\"block_root\" hex:\"true\"`\r\n\tIndex           string `json:\"index\"`\r\n\tSlot            string `json:\"slot\"`\r\n\tKzgCommitment   string `json:\"kzg_commitment\" hex:\"true\"`\r\n\tVersionedHash   string `json:\"versioned_hash\" hex:\"true\"`\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1762427549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

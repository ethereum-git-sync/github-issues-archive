{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/7750",
  "id": 738756761,
  "node_id": "MDU6SXNzdWU3Mzg3NTY3NjE=",
  "number": 7750,
  "title": "Docker image build v1 glibc error",
  "user": {
    "login": "protolambda",
    "id": 19571989,
    "node_id": "MDQ6VXNlcjE5NTcxOTg5",
    "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/protolambda",
    "html_url": "https://github.com/protolambda",
    "followers_url": "https://api.github.com/users/protolambda/followers",
    "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
    "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
    "organizations_url": "https://api.github.com/users/protolambda/orgs",
    "repos_url": "https://api.github.com/users/protolambda/repos",
    "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
    "received_events_url": "https://api.github.com/users/protolambda/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-11-09T07:10:32Z",
  "updated_at": "2020-11-22T18:04:14Z",
  "closed_at": "2020-11-22T18:04:14Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nGLIBC version problem in docker. Is docker not supposed to help avoid such situations where the host has a different glibc version?\r\n\r\n### Has this worked before in a previous version?\r\n\r\nNot building prysm docker images with bazel often, not sure.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nHad some versioning problem with bazel (installed 3.2 from source, but bad version string), running `/usr/bin/bazel-real` as work-around.\r\n\r\n```\r\n/usr/bin/bazel-real build //beacon-chain\r\nDOCKER_TAG=toledo /usr/bin/bazel-real run //beacon-chain:image_bundle\r\ndocker run --rm gcr.io/prysmaticlabs/prysm/beacon-chain:toledo --help\r\n```\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\n/app/beacon-chain/image.binary: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.32' not found (required by /app/beacon-chain/image.binary)\r\n</code></pre>\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\nOn the host:\r\n<pre>\r\n  <code>\r\ngcc --version\r\ngcc (GCC) 10.2.0\r\n\r\n ldd --version\r\nldd (GNU libc) 2.32\r\n\r\nOs: x86_64 Linux 5.8.10-arch1-1\r\n  </code>\r\n</pre>\r\n\r\nThe binary version of prysm works in the host.\r\n\r\nBut host shouldn't matter. Docker images should be self-contained.\r\nNo clue what glibc version runs in the docker, maybe change it in bazel somewhere?\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nv1.0.0-rc.0\r\n  </code>\r\n</pre>\r\ncommit: d954e8ffcafc310ef1894755f974f9df8122b741\r\n\r\nWhy does Prysm even require glibc, did something change in the dependencies? I made a PR to herumi long ago to avoid glibc/musl etc. needs, so it runs on Alpine.\r\n\r\nAlso, confirm that the docker alpine image also doesn't work. Can't find a file or something during docker run. But I see that alpine not working is a known issue :(\r\n\r\n\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/723812481",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7750#issuecomment-723812481",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750",
    "id": 723812481,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzgxMjQ4MQ==",
    "user": {
      "login": "protolambda",
      "id": 19571989,
      "node_id": "MDQ6VXNlcjE5NTcxOTg5",
      "avatar_url": "https://avatars.githubusercontent.com/u/19571989?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/protolambda",
      "html_url": "https://github.com/protolambda",
      "followers_url": "https://api.github.com/users/protolambda/followers",
      "following_url": "https://api.github.com/users/protolambda/following{/other_user}",
      "gists_url": "https://api.github.com/users/protolambda/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/protolambda/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/protolambda/subscriptions",
      "organizations_url": "https://api.github.com/users/protolambda/orgs",
      "repos_url": "https://api.github.com/users/protolambda/repos",
      "events_url": "https://api.github.com/users/protolambda/events{/privacy}",
      "received_events_url": "https://api.github.com/users/protolambda/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-09T07:15:09Z",
    "updated_at": "2020-11-09T07:15:09Z",
    "author_association": "NONE",
    "body": "Can't seem to build the master branch either. Still want to run Prysm v1 branch for Toledo. Can anyone help prepare a docker image?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/723812481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/723860005",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7750#issuecomment-723860005",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750",
    "id": 723860005,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzg2MDAwNQ==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-09T08:41:38Z",
    "updated_at": "2020-11-09T08:41:38Z",
    "author_association": "MEMBER",
    "body": "Not too sure why you have that failure, would have to dig into it. However I managed to build toledo and push it up for both the beacon node and validator. If you need the slasher too, I can build for that and push it up too.  \r\nhttps://console.cloud.google.com/gcr/images/prysmaticlabs/GLOBAL/prysm/beacon-chain?gcrImageListsize=30\r\nhttps://console.cloud.google.com/gcr/images/prysmaticlabs/GLOBAL/prysm/validator?gcrImageListsize=30\r\n\r\nYou can fetch it using the `toledo` tag, let me know if it works for you. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/723860005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/725605991",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7750#issuecomment-725605991",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750",
    "id": 725605991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTYwNTk5MQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-11T19:07:59Z",
    "updated_at": "2020-11-11T19:07:59Z",
    "author_association": "MEMBER",
    "body": "Please use `--config=release` to build docker images. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/725605991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/725607060",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7750#issuecomment-725607060",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7750",
    "id": 725607060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNTYwNzA2MA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-11T19:10:14Z",
    "updated_at": "2020-11-11T19:10:14Z",
    "author_association": "MEMBER",
    "body": "Alpine still broken, no one is looking into it right now as far as i know :( #5768 ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/725607060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

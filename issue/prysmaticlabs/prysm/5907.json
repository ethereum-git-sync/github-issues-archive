{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/5907",
  "id": 621072267,
  "node_id": "MDU6SXNzdWU2MjEwNzIyNjc=",
  "number": 5907,
  "title": "Validator metric validator_balance shuffles pubKey balances",
  "user": {
    "login": "LarsHolte",
    "id": 10893517,
    "node_id": "MDQ6VXNlcjEwODkzNTE3",
    "avatar_url": "https://avatars.githubusercontent.com/u/10893517?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/LarsHolte",
    "html_url": "https://github.com/LarsHolte",
    "followers_url": "https://api.github.com/users/LarsHolte/followers",
    "following_url": "https://api.github.com/users/LarsHolte/following{/other_user}",
    "gists_url": "https://api.github.com/users/LarsHolte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/LarsHolte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/LarsHolte/subscriptions",
    "organizations_url": "https://api.github.com/users/LarsHolte/orgs",
    "repos_url": "https://api.github.com/users/LarsHolte/repos",
    "events_url": "https://api.github.com/users/LarsHolte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/LarsHolte/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1085357407,
      "node_id": "MDU6TGFiZWwxMDg1MzU3NDA3",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Priority:%20Medium",
      "name": "Priority: Medium",
      "color": "bbf726",
      "default": false,
      "description": "Medium priority item"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-05-19T15:26:03Z",
  "updated_at": "2020-06-06T03:12:17Z",
  "closed_at": "2020-06-06T03:12:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\nMetric validator_balance has correct balance but wrong pubKey, and pubKey is shuffled when metrics update.\r\n\r\n### Has this worked before in a previous version?\r\n\r\nYes, was ok in alpha.7\r\nProblem started when updating to alpha.8 Git commit: 52c302307a677eb908459dd712ebe34102dd2a25. Built at: 2020-05-14 22:14:44+00:00\r\nProblem persists using docker :latest Git commit: 62b617fa9a640f45f33e629f58333302ad25d7be. Built at: 2020-05-19 05:16:53+00:00\r\n\r\n## üî• Error\r\nGrafana:\r\n![balance-shuffle](https://user-images.githubusercontent.com/10893517/82323229-09863f00-99d8-11ea-8cf1-16a9789dd37a.png)\r\n\r\n## üåç  Your Environment\r\nWindows 10 Insider with WSL2 (Ubuntu 18.04) with Docker Edge experimental 2.3.0.1\r\n\r\n**Anything else relevant (validator index / public key)?**\r\nValidator has [50 keys](https://beaconcha.in/dashboard?validators=17134,18453,18454,18455,18456,18457,18458,18459,18497,18501,18502,18503,18504,18505,18506,18507,18508,18509,18510,18511,19716,19717,19718,19719,19720,19721,19722,19723,19724,19725,19726,19727,19728,19729,19730,19731,19732,19733,19734,19735,19736,19737,19738,19739,19740,19741,19742,19743,19744,19745).\r\nFlags used (from PowerShell):\r\ndocker run -d --name Validator -v c:\\DockerData\\Prysm:/data -v \"$($env:APPDATA)\\ethereum2\\wallets:/wallets\" -p 8083:8083 gcr.io/prysmaticlabs/prysm/validator:latest --beacon-rpc-provider=192.168.0.100:4000 --keymanager=wallet --keymanageropts=/data/keymanager.json --datadir=/data --monitoring-port 8083 --enable-account-metrics --log-file=/data/log/validator.log\r\n\r\n",
  "closed_by": {
    "login": "0xKiwi",
    "id": 6251510,
    "node_id": "MDQ6VXNlcjYyNTE1MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6251510?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xKiwi",
    "html_url": "https://github.com/0xKiwi",
    "followers_url": "https://api.github.com/users/0xKiwi/followers",
    "following_url": "https://api.github.com/users/0xKiwi/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xKiwi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xKiwi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xKiwi/subscriptions",
    "organizations_url": "https://api.github.com/users/0xKiwi/orgs",
    "repos_url": "https://api.github.com/users/0xKiwi/repos",
    "events_url": "https://api.github.com/users/0xKiwi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xKiwi/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/632743517",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5907#issuecomment-632743517",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907",
    "id": 632743517,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMjc0MzUxNw==",
    "user": {
      "login": "GuillaumeMiralles",
      "id": 23481418,
      "node_id": "MDQ6VXNlcjIzNDgxNDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/23481418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GuillaumeMiralles",
      "html_url": "https://github.com/GuillaumeMiralles",
      "followers_url": "https://api.github.com/users/GuillaumeMiralles/followers",
      "following_url": "https://api.github.com/users/GuillaumeMiralles/following{/other_user}",
      "gists_url": "https://api.github.com/users/GuillaumeMiralles/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GuillaumeMiralles/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GuillaumeMiralles/subscriptions",
      "organizations_url": "https://api.github.com/users/GuillaumeMiralles/orgs",
      "repos_url": "https://api.github.com/users/GuillaumeMiralles/repos",
      "events_url": "https://api.github.com/users/GuillaumeMiralles/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GuillaumeMiralles/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-22T15:09:16Z",
    "updated_at": "2020-05-22T15:20:03Z",
    "author_association": "NONE",
    "body": "I have seen another user having the exact same issue on discord\r\nThis 2 screenshots show the balance swaping with each other in the validator log\r\n![image](https://user-images.githubusercontent.com/23481418/82681961-caadee80-9c4e-11ea-84af-8a9939e6ae31.png)\r\n![image](https://user-images.githubusercontent.com/23481418/82682049-ed400780-9c4e-11ea-815c-37315cd331a7.png)\r\n\r\n\r\nHere is the result in grafana\r\n\r\n![image](https://user-images.githubusercontent.com/23481418/82682061-f0d38e80-9c4e-11ea-97e5-967ae450d7f0.png)\r\n\r\n\r\nEDIT:\r\nI think this issue is link with #5933\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/632743517/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/633062413",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5907#issuecomment-633062413",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907",
    "id": 633062413,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzA2MjQxMw==",
    "user": {
      "login": "LarsHolte",
      "id": 10893517,
      "node_id": "MDQ6VXNlcjEwODkzNTE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10893517?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/LarsHolte",
      "html_url": "https://github.com/LarsHolte",
      "followers_url": "https://api.github.com/users/LarsHolte/followers",
      "following_url": "https://api.github.com/users/LarsHolte/following{/other_user}",
      "gists_url": "https://api.github.com/users/LarsHolte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/LarsHolte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/LarsHolte/subscriptions",
      "organizations_url": "https://api.github.com/users/LarsHolte/orgs",
      "repos_url": "https://api.github.com/users/LarsHolte/repos",
      "events_url": "https://api.github.com/users/LarsHolte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/LarsHolte/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-23T14:17:03Z",
    "updated_at": "2020-05-23T14:17:03Z",
    "author_association": "NONE",
    "body": "Installed a new beacon node on Ubuntu 20.04 and started it with the prysm.sh script running alpha.8 git commit: f831a799c5a9133c8e3bdc396996ca98b6324b6e. Built at: 2020-05-14 01:18:22+00:00\r\n\r\nAfter pointing the existing validator still running as a docker on WSL2 with the git commit 62b617fa9a640f45f33e629f58333302ad25d7be. Built at: 2020-05-19 05:16:53+00:00 to the new beacon node, the validator_balance is now back to normal.\r\n\r\nSeems something on newer beacon nodes shuffles pubKeys messing up the validator metrics.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/633062413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/637444740",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5907#issuecomment-637444740",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907",
    "id": 637444740,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzQ0NDc0MA==",
    "user": {
      "login": "GuillaumeMiralles",
      "id": 23481418,
      "node_id": "MDQ6VXNlcjIzNDgxNDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/23481418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GuillaumeMiralles",
      "html_url": "https://github.com/GuillaumeMiralles",
      "followers_url": "https://api.github.com/users/GuillaumeMiralles/followers",
      "following_url": "https://api.github.com/users/GuillaumeMiralles/following{/other_user}",
      "gists_url": "https://api.github.com/users/GuillaumeMiralles/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GuillaumeMiralles/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GuillaumeMiralles/subscriptions",
      "organizations_url": "https://api.github.com/users/GuillaumeMiralles/orgs",
      "repos_url": "https://api.github.com/users/GuillaumeMiralles/repos",
      "events_url": "https://api.github.com/users/GuillaumeMiralles/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GuillaumeMiralles/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-02T10:24:23Z",
    "updated_at": "2020-06-02T10:24:23Z",
    "author_association": "NONE",
    "body": "This is happening to myself too now. Until the new release alpha 9 everything was fine, but when I updated my binaries with alpha 9 it started to shuffle my validator balances too.\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/23481418/83509563-ee352c80-a4cb-11ea-9be8-d12fa9379a80.png)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/637444740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/637463297",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5907#issuecomment-637463297",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907",
    "id": 637463297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNzQ2MzI5Nw==",
    "user": {
      "login": "Tachyonica",
      "id": 45542100,
      "node_id": "MDQ6VXNlcjQ1NTQyMTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/45542100?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Tachyonica",
      "html_url": "https://github.com/Tachyonica",
      "followers_url": "https://api.github.com/users/Tachyonica/followers",
      "following_url": "https://api.github.com/users/Tachyonica/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tachyonica/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Tachyonica/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tachyonica/subscriptions",
      "organizations_url": "https://api.github.com/users/Tachyonica/orgs",
      "repos_url": "https://api.github.com/users/Tachyonica/repos",
      "events_url": "https://api.github.com/users/Tachyonica/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Tachyonica/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-02T11:04:29Z",
    "updated_at": "2020-06-02T11:08:25Z",
    "author_association": "NONE",
    "body": "I think I have the same issue.  Ubuntu 20, 4 keys plus 30 pending.\r\n\r\n\r\n<img width=\"960\" alt=\"Screenshot 2020-06-02 13 01 22\" src=\"https://user-images.githubusercontent.com/45542100/83512959-491d5280-a4d1-11ea-8efd-d334fe3ea19f.png\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/637463297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/638164480",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5907#issuecomment-638164480",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5907",
    "id": 638164480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzODE2NDQ4MA==",
    "user": {
      "login": "slowbart",
      "id": 64903918,
      "node_id": "MDQ6VXNlcjY0OTAzOTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/64903918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/slowbart",
      "html_url": "https://github.com/slowbart",
      "followers_url": "https://api.github.com/users/slowbart/followers",
      "following_url": "https://api.github.com/users/slowbart/following{/other_user}",
      "gists_url": "https://api.github.com/users/slowbart/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/slowbart/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/slowbart/subscriptions",
      "organizations_url": "https://api.github.com/users/slowbart/orgs",
      "repos_url": "https://api.github.com/users/slowbart/repos",
      "events_url": "https://api.github.com/users/slowbart/events{/privacy}",
      "received_events_url": "https://api.github.com/users/slowbart/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-03T12:27:47Z",
    "updated_at": "2020-06-03T12:27:47Z",
    "author_association": "NONE",
    "body": "I am still seeing this issue with alpha.9 docker images.\r\n\r\n<img width=\"1199\" alt=\"Untitled\" src=\"https://user-images.githubusercontent.com/64903918/83636345-2ed69800-a5e9-11ea-8cde-82d724285bf9.png\">\r\n<img width=\"461\" alt=\"image\" src=\"https://user-images.githubusercontent.com/64903918/83636464-5fb6cd00-a5e9-11ea-8492-5192db27c668.png\">\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/638164480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12401",
  "id": 1708817974,
  "node_id": "I_kwDOBvuov85l2n42",
  "number": 12401,
  "title": "Missed block proposal due to 502 error posting to SignedBlindedBeaconBlockCapella",
  "user": {
    "login": "gorillamania",
    "id": 142708,
    "node_id": "MDQ6VXNlcjE0MjcwOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gorillamania",
    "html_url": "https://github.com/gorillamania",
    "followers_url": "https://api.github.com/users/gorillamania/followers",
    "following_url": "https://api.github.com/users/gorillamania/following{/other_user}",
    "gists_url": "https://api.github.com/users/gorillamania/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gorillamania/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gorillamania/subscriptions",
    "organizations_url": "https://api.github.com/users/gorillamania/orgs",
    "repos_url": "https://api.github.com/users/gorillamania/repos",
    "events_url": "https://api.github.com/users/gorillamania/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gorillamania/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2023-05-14T04:59:42Z",
  "updated_at": "2023-05-23T08:37:58Z",
  "closed_at": "2023-05-14T19:13:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nI got a notification that a validator missed a block proposal. Found the relevant line in the validator log:\r\n\r\n>time=\"2023-05-14 02:12:29\" level=error msg=\"Failed to propose block\" blockSlot=6433860 error=\"rpc error: code = Unknown desc = could not submit blinded block: error posting the SignedBlindedBeaconBlockCapella to the builder api: unsupported error code: 502: did not receive 200 response from API\" prefix=validator pubKey=0xad70a1c1cbe9\r\n\r\n\r\n### Has this worked before in a previous version?\r\n\r\n<!-- Did this behavior use to work in the previous version? -->\r\n<!-- ‚úçÔ∏è--> Yes, the previous version in which this bug was not present was: ....\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nI run prysm 4.0.3 via eth-docker\r\n\r\n```validator --datadir /var/lib/prysm --wallet-dir /var/lib/prysm/ --beacon-rpc-provider consensus:4000 --verbosity info --mainnet --accept-terms-of-use --monitoring-host 0.0.0.0 --monitoring-port 8009 --web --grpc-gateway-host 0.0.0.0 --grpc-gateway-port 7500 --grpc-gateway-corsdomain=* --beacon-rpc-gateway-provider consensus:5052 --suggested-fee-recipient XXXXX --wallet-password-file /var/lib/prysm/password.txt --graffiti XXXXX --enable-builder\r\n```\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nUbuntu 20.04\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n4.0.3\r\n<pre>\r\n  <code>\r\n\r\n  </code>\r\n</pre>\r\n\r\nValidator 582329\r\nBlock 582329\r\n\r\n",
  "closed_by": {
    "login": "gorillamania",
    "id": 142708,
    "node_id": "MDQ6VXNlcjE0MjcwOA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/142708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gorillamania",
    "html_url": "https://github.com/gorillamania",
    "followers_url": "https://api.github.com/users/gorillamania/followers",
    "following_url": "https://api.github.com/users/gorillamania/following{/other_user}",
    "gists_url": "https://api.github.com/users/gorillamania/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/gorillamania/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/gorillamania/subscriptions",
    "organizations_url": "https://api.github.com/users/gorillamania/orgs",
    "repos_url": "https://api.github.com/users/gorillamania/repos",
    "events_url": "https://api.github.com/users/gorillamania/events{/privacy}",
    "received_events_url": "https://api.github.com/users/gorillamania/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546809843",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12401#issuecomment-1546809843",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401",
    "id": 1546809843,
    "node_id": "IC_kwDOBvuov85cMnHz",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-14T05:14:41Z",
    "updated_at": "2023-05-14T05:14:41Z",
    "author_association": "MEMBER",
    "body": "@gorillamania Do you have mev-boost logs at this time ? From what it appears, your relay did not broadcast this block ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546809843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546819034",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12401#issuecomment-1546819034",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401",
    "id": 1546819034,
    "node_id": "IC_kwDOBvuov85cMpXa",
    "user": {
      "login": "gorillamania",
      "id": 142708,
      "node_id": "MDQ6VXNlcjE0MjcwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142708?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gorillamania",
      "html_url": "https://github.com/gorillamania",
      "followers_url": "https://api.github.com/users/gorillamania/followers",
      "following_url": "https://api.github.com/users/gorillamania/following{/other_user}",
      "gists_url": "https://api.github.com/users/gorillamania/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gorillamania/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gorillamania/subscriptions",
      "organizations_url": "https://api.github.com/users/gorillamania/orgs",
      "repos_url": "https://api.github.com/users/gorillamania/repos",
      "events_url": "https://api.github.com/users/gorillamania/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gorillamania/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-14T06:22:52Z",
    "updated_at": "2023-05-14T06:23:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "It just happened again :( \r\n\r\n```\r\ntime=\"2023-05-14 05:53:39\" level=error msg=\"Failed to propose block\" blockSlot=6434966 error=\"rpc error: code = Unknown desc = could not submit blinded block: error posting the SignedBlindedBeaconBlockCapella to the builder api: unsupported error code: 502: did not receive 200 response from API\" prefix=validator pubKey=0x809d0a6cfa5b\r\n```\r\n\r\nOk, I think you are on to something with the MEV boost. See relevant logs below. \r\n\r\nWould upgrading tot he hot-fix release fix this?\r\n\r\n```time=\"2023-05-14T05:53:25Z\" level=info msg=\"http: GET /eth/v1/builder/status 200\" duration=0.100090 method=GET path=/eth/v1/builder/status status=200 version=v1.5.0 | ¬†\r\n-- | --\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay\" error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"sent too late - 3992 ms into slot\\\"}\\n\" method=getHeader parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b pubkey=0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21 slot=6434966 url=\"https://relay.edennetwork.io/eth/v1/builder/header/6434966/0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b/0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay\" error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"sent too late - 4020 ms into slot\\\"}\\n\" method=getHeader parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b pubkey=0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21 slot=6434966 url=\"https://relay.ultrasound.money/eth/v1/builder/header/6434966/0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b/0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay\" error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"sent too late - 4030 ms into slot\\\"}\\n\" method=getHeader parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b pubkey=0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21 slot=6434966 url=\"https://agnostic-relay.net/eth/v1/builder/header/6434966/0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b/0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=info msg=\"best bid\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 blockNumber=17256175 method=getHeader parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b pubkey=0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21 relays=\"https://0x9000009807ed12c1f08bf4e81c6da3ba8e3fc3d953898ce0102433094e5f22f21102ec057841fcb81978ed1ea0fa8246@builder-relay-mainnet.blocknative.com\" slot=6434966 txRoot=0x43e78a5a6647e39b812a02ca4dfa5a6b5591c0cf125d51999bd19668de01e294 value=0.048168699576364254 version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=info msg=\"http: GET /eth/v1/builder/header/6434966/0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b/0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21 200\" duration=0.107482 method=GET path=/eth/v1/builder/header/6434966/0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b/0x809d0a6cfa5b61d3d5b7528aa988f0a4c82d827e4bf657d332eda13ea731c4ff85155eaeff45ec469e12d1f3c2d40e21 status=200 version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay, retrying\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"request too late\\\"}\\n\" method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b slot=6434966 url=\"https://builder-relay-mainnet.blocknative.com/eth/v1/builder/blinded_blocks\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay, retrying\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"request too late\\\"}\\n\" method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b slot=6434966 url=\"https://builder-relay-mainnet.blocknative.com/eth/v1/builder/blinded_blocks\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay, retrying\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"request too late\\\"}\\n\" method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b slot=6434966 url=\"https://builder-relay-mainnet.blocknative.com/eth/v1/builder/blinded_blocks\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay, retrying\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"request too late\\\"}\\n\" method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b slot=6434966 url=\"https://builder-relay-mainnet.blocknative.com/eth/v1/builder/blinded_blocks\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=warning msg=\"error making request to relay, retrying\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 error=\"HTTP error response: 400 / {\\\"code\\\":400,\\\"message\\\":\\\"request too late\\\"}\\n\" method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b slot=6434966 url=\"https://builder-relay-mainnet.blocknative.com/eth/v1/builder/blinded_blocks\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=error msg=\"error making request to relay\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 error=\"max retries exceeded\" method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b slot=6434966 url=\"https://builder-relay-mainnet.blocknative.com/eth/v1/builder/blinded_blocks\" version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=error msg=\"no payload received from relay!\" blockHash=0x032fd5c6142cc57ff7e1ddfd91a5b13944c9f350e68f4158f29967c82a60ba31 method=getPayload parentHash=0x7a2488a0583f8bfe38957c8bb82f87c7a158bf79164e10af4f1605103b63ab6b relays=\"https://0x9000009807ed12c1f08bf4e81c6da3ba8e3fc3d953898ce0102433094e5f22f21102ec057841fcb81978ed1ea0fa8246@builder-relay-mainnet.blocknative.com\" slot=6434966 version=v1.5.0 | ¬†\r\n¬† | ¬† | time=\"2023-05-14T05:53:39Z\" level=info msg=\"http: POST /eth/v1/builder/blinded_blocks 502\" duration=0.599051 method=POST path=/eth/v1/builder/blinded_blocks status=502 version=v1.5.0 | ¬†\r\n¬† ```\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546819034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546819452",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12401#issuecomment-1546819452",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401",
    "id": 1546819452,
    "node_id": "IC_kwDOBvuov85cMpd8",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-14T06:25:35Z",
    "updated_at": "2023-05-14T06:25:35Z",
    "author_association": "MEMBER",
    "body": "This seems like an issue with blocknative @gorillamania , it might be best to just remove them for now from your list of relays. You can contact them to find out why its failing on their end. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546819452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546819862",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12401#issuecomment-1546819862",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12401",
    "id": 1546819862,
    "node_id": "IC_kwDOBvuov85cMpkW",
    "user": {
      "login": "gorillamania",
      "id": 142708,
      "node_id": "MDQ6VXNlcjE0MjcwOA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142708?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gorillamania",
      "html_url": "https://github.com/gorillamania",
      "followers_url": "https://api.github.com/users/gorillamania/followers",
      "following_url": "https://api.github.com/users/gorillamania/following{/other_user}",
      "gists_url": "https://api.github.com/users/gorillamania/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gorillamania/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gorillamania/subscriptions",
      "organizations_url": "https://api.github.com/users/gorillamania/orgs",
      "repos_url": "https://api.github.com/users/gorillamania/repos",
      "events_url": "https://api.github.com/users/gorillamania/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gorillamania/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-05-14T06:28:52Z",
    "updated_at": "2023-05-14T06:28:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thank you for your help\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1546819862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

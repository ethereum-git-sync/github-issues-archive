{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6459",
  "id": 648339549,
  "node_id": "MDU6SXNzdWU2NDgzMzk1NDk=",
  "number": 6459,
  "title": "Beacon-chain not able to resume syncing after network connection was down",
  "user": {
    "login": "raphpa",
    "id": 18283997,
    "node_id": "MDQ6VXNlcjE4MjgzOTk3",
    "avatar_url": "https://avatars.githubusercontent.com/u/18283997?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/raphpa",
    "html_url": "https://github.com/raphpa",
    "followers_url": "https://api.github.com/users/raphpa/followers",
    "following_url": "https://api.github.com/users/raphpa/following{/other_user}",
    "gists_url": "https://api.github.com/users/raphpa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/raphpa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/raphpa/subscriptions",
    "organizations_url": "https://api.github.com/users/raphpa/orgs",
    "repos_url": "https://api.github.com/users/raphpa/repos",
    "events_url": "https://api.github.com/users/raphpa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/raphpa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 2061040048,
      "node_id": "MDU6TGFiZWwyMDYxMDQwMDQ4",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Sync",
      "name": "Sync",
      "color": "5967ba",
      "default": false,
      "description": "Sync (regular, initial, checkpoint) related issues"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "farazdagi",
    "id": 188194,
    "node_id": "MDQ6VXNlcjE4ODE5NA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/188194?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/farazdagi",
    "html_url": "https://github.com/farazdagi",
    "followers_url": "https://api.github.com/users/farazdagi/followers",
    "following_url": "https://api.github.com/users/farazdagi/following{/other_user}",
    "gists_url": "https://api.github.com/users/farazdagi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/farazdagi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/farazdagi/subscriptions",
    "organizations_url": "https://api.github.com/users/farazdagi/orgs",
    "repos_url": "https://api.github.com/users/farazdagi/repos",
    "events_url": "https://api.github.com/users/farazdagi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/farazdagi/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "farazdagi",
      "id": 188194,
      "node_id": "MDQ6VXNlcjE4ODE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/188194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/farazdagi",
      "html_url": "https://github.com/farazdagi",
      "followers_url": "https://api.github.com/users/farazdagi/followers",
      "following_url": "https://api.github.com/users/farazdagi/following{/other_user}",
      "gists_url": "https://api.github.com/users/farazdagi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/farazdagi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/farazdagi/subscriptions",
      "organizations_url": "https://api.github.com/users/farazdagi/orgs",
      "repos_url": "https://api.github.com/users/farazdagi/repos",
      "events_url": "https://api.github.com/users/farazdagi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/farazdagi/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-06-30T16:58:38Z",
  "updated_at": "2020-08-13T17:33:58Z",
  "closed_at": "2020-08-13T17:33:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nAfter an outage of the internet connection for a couple of hours beacon-chain is not able to sync up with the chain again. Initial-sync always starts at block 117537, syncs up to block 117983 and starts over at 117537 again.\r\n\r\nThe log does not reach back far enough to the point the internet connection was available again. There was no new docker container started, so the process has not crashed in between.\r\n\r\nA restart fixed this issue and beacon-chain was able to sync up to the chain head.\r\n\r\n### Has this worked before in a previous version?\r\n\r\nNot tried\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nNot tried to reproduce\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\ntime=\"2020-06-30 16:45:43\" level=info msg=\"Processing block 0x6954467b... 117981/118641 - estimated time remaining 1m29s\" blocksPerSecond=7.3 peers=29 prefix=initial-sync\r\ntime=\"2020-06-30 16:45:43\" level=info msg=\"Block is not processed\" error=\"could not process block: could not save finalized checkpoint: missing block in database: block root=0xce5a746a5a4d4b7401a2a49b3737b5cf5f7fd11a144b1e8a877d1cae9a453c18\" prefix=initial-sync\r\ntime=\"2020-06-30 16:45:43\" level=info msg=\"Processing block 0x61347955... 117983/118641 - estimated time remaining 1m28s\" blocksPerSecond=7.4 peers=29 prefix=initial-sync\r\ntime=\"2020-06-30 16:45:43\" level=info msg=\"Block is not processed\" error=\"could not process block: could not save finalized checkpoint: missing block in database: block root=0xce5a746a5a4d4b7401a2a49b3737b5cf5f7fd11a144b1e8a877d1cae9a453c18\" prefix=initial-sync\r\ntime=\"2020-06-30 16:45:43\" level=info msg=\"Processing block 0x98b2b875... 117537/118641 - estimated time remaining 2m28s\" blocksPerSecond=7.5 peers=29 prefix=initial-sync\r\ntime=\"2020-06-30 16:45:46\" level=info msg=\"Block is not processed\" error=\"could not process block: could not save finalized checkpoint: missing block in database: block root=0xce5a746a5a4d4b7401a2a49b3737b5cf5f7fd11a144b1e8a877d1cae9a453c18\" prefix=initial-sync\r\ntime=\"2020-06-30 16:45:46\" level=info msg=\"Processing block 0x8f7a09b5... 117538/118641 - estimated time remaining 2m55s\" blocksPerSecond=6.3 peers=29 prefix=initial-sync\r\n</code></pre>\r\n\r\nStarting at block 117537 over and over again.\r\n\r\nFor all the available log see:\r\n[onyx.log](https://github.com/prysmaticlabs/prysm/files/4853379/onyx.log)\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\nUbuntu 20.04 on arm64\r\nDocker\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\nCommit 2bce9c8 compiled on arm64\r\nRunning in Docker",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/655724283",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6459#issuecomment-655724283",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459",
    "id": 655724283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTcyNDI4Mw==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-08T19:56:50Z",
    "updated_at": "2020-07-08T19:56:50Z",
    "author_association": "MEMBER",
    "body": "I've seen this as well when a peer would not give the requested set of blocks. A potential resolution here is to improve our peer scoring in initial sync. \r\n\r\n@farazdagi can you help?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/655724283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/655726777",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6459#issuecomment-655726777",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459",
    "id": 655726777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTcyNjc3Nw==",
    "user": {
      "login": "farazdagi",
      "id": 188194,
      "node_id": "MDQ6VXNlcjE4ODE5NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/188194?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/farazdagi",
      "html_url": "https://github.com/farazdagi",
      "followers_url": "https://api.github.com/users/farazdagi/followers",
      "following_url": "https://api.github.com/users/farazdagi/following{/other_user}",
      "gists_url": "https://api.github.com/users/farazdagi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/farazdagi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/farazdagi/subscriptions",
      "organizations_url": "https://api.github.com/users/farazdagi/orgs",
      "repos_url": "https://api.github.com/users/farazdagi/repos",
      "events_url": "https://api.github.com/users/farazdagi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/farazdagi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-08T20:02:07Z",
    "updated_at": "2020-07-08T20:02:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yep, working on it (we had a discussion on this with Nishant today, I will provide both simple heuristics based on peer's performance and look into full-fledged peer scoring as well).",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/655726777/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/655794353",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6459#issuecomment-655794353",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6459",
    "id": 655794353,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1NTc5NDM1Mw==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-08T22:40:27Z",
    "updated_at": "2020-07-08T22:40:27Z",
    "author_association": "MEMBER",
    "body": "ok great thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/655794353/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

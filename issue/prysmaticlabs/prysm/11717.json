{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/11717",
  "id": 1472865019,
  "node_id": "I_kwDOBvuov85XyiL7",
  "number": 11717,
  "title": "Please mark the next release as \"required for validators\", otherwise it may risk users missing slots when using mev-boost",
  "user": {
    "login": "metachris",
    "id": 116939,
    "node_id": "MDQ6VXNlcjExNjkzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/metachris",
    "html_url": "https://github.com/metachris",
    "followers_url": "https://api.github.com/users/metachris/followers",
    "following_url": "https://api.github.com/users/metachris/following{/other_user}",
    "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
    "organizations_url": "https://api.github.com/users/metachris/orgs",
    "repos_url": "https://api.github.com/users/metachris/repos",
    "events_url": "https://api.github.com/users/metachris/events{/privacy}",
    "received_events_url": "https://api.github.com/users/metachris/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 3418865775,
      "node_id": "LA_kwDOBvuov87Lx8Bv",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Release%20Issue",
      "name": "Release Issue",
      "color": "B60205",
      "default": false,
      "description": "Issue that may or may not be a bug but found during release period"
    },
    {
      "id": 3991853008,
      "node_id": "LA_kwDOBvuov87t7tfQ",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Builder",
      "name": "Builder",
      "color": "59D5BA",
      "default": false,
      "description": "PR or issue that supports builder related work"
    },
    {
      "id": 4408542660,
      "node_id": "LA_kwDOBvuov88AAAABBsUFxA",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Validator%20Client",
      "name": "Validator Client",
      "color": "f9d0c4",
      "default": false,
      "description": ""
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2022-12-02T13:24:14Z",
  "updated_at": "2022-12-16T16:30:04Z",
  "closed_at": "2022-12-16T16:30:04Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "The next Prysm release contains important changes, including a fix for incorrect builder API types encoding:\r\n\r\n* https://github.com/prysmaticlabs/prysm/pull/11673\r\n\r\nUntil the next release, the way Prysm encodes the builder types is not conforming to the standard, and results in errors when decoding with types that enforce correctness.\r\n\r\nIn preparation for Capella and EIP4844 upgrades, mev-boost and the mev-boost-relay is being upgraded to use the [Attestant types](https://github.com/attestantio/go-eth2-client/tree/master/spec), which enforce a standard-compliant encoding:\r\n\r\n* https://github.com/flashbots/mev-boost/pull/411\r\n\r\nIf these updates were to be rolled out to mev-boost and the relays, non-conforming payloads fail the decoding step and lead to users missing slots when using the builder API.\r\n\r\nWe propose that Prysm marks the next release as \"required for validators\". Doing so would allow us to toll out the changes to mev-boost and the relays after a reasonable wait period without putting Prysm users at risk of missing slots.",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1338061732",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11717#issuecomment-1338061732",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717",
    "id": 1338061732,
    "node_id": "IC_kwDOBvuov85PwTOk",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-05T19:44:09Z",
    "updated_at": "2022-12-05T19:45:56Z",
    "author_association": "MEMBER",
    "body": "Hi @metachris, thanks for filing this issue. We discussed this a bit in discord and I wanted to summarize the conversation here for record. \r\n\r\nWe are hesitant to mark the next release as urgent, critical, or anything other than a normal release for prysm users as an elevated release labeling must be used sparingly. However, we will make a call-out in the release notes and issue the next release as a minor release (v3.2.0) rather than a patch release to indicate that there is some change in the API payloads for the builder API requests from prysm. \r\n\r\nWe ask that your team delays your changes in https://github.com/flashbots/mev-boost/pull/411 until the next hardfork as this be the best approach to releasing breaking changes without deprecating the current API.  If that is not possible, then we ask that your team indicates that a Prysm upgrade is a hard requirement for users to use your software since it contains changes that break existing behavior and overly communicate that to your users. \r\n\r\nTo add some additional context for readers:\r\n- Prior to https://github.com/prysmaticlabs/prysm/pull/11673, Prysm would omit JSON fields that were empty. \r\n- [Attestant data types](https://github.com/attestantio/go-eth2-client) have more strict validation that will reject certain Prysm payloads with missing fields. \r\n- If the builder API rejects these payloads, the user will either miss a block proposal entirely or failover to local block production with an unnecessary delay.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1338061732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1339454546",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11717#issuecomment-1339454546",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717",
    "id": 1339454546,
    "node_id": "IC_kwDOBvuov85P1nRS",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-06T14:16:04Z",
    "updated_at": "2022-12-06T14:16:04Z",
    "author_association": "NONE",
    "body": "I think it make sense for mev-boost to wait with changes to the types for a while. \r\n\r\nWe do need to make a new mev-boost release sometime well before the hardfork date to give users a chance to upgrade. This version will need to try to decode the payloads into the Capella/4844 types, and fall back to the Bellatrix types if that fails.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1339454546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1344016181",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11717#issuecomment-1344016181",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717",
    "id": 1344016181,
    "node_id": "IC_kwDOBvuov85QHA81",
    "user": {
      "login": "metachris",
      "id": 116939,
      "node_id": "MDQ6VXNlcjExNjkzOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/116939?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/metachris",
      "html_url": "https://github.com/metachris",
      "followers_url": "https://api.github.com/users/metachris/followers",
      "following_url": "https://api.github.com/users/metachris/following{/other_user}",
      "gists_url": "https://api.github.com/users/metachris/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/metachris/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/metachris/subscriptions",
      "organizations_url": "https://api.github.com/users/metachris/orgs",
      "repos_url": "https://api.github.com/users/metachris/repos",
      "events_url": "https://api.github.com/users/metachris/events{/privacy}",
      "received_events_url": "https://api.github.com/users/metachris/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-09T08:45:16Z",
    "updated_at": "2022-12-09T08:45:16Z",
    "author_association": "NONE",
    "body": "We are currently exploring a third way - to use the Attestant Capella types, with a fallback to the current Bellatrix(go-boost-utils) types (instead of Bellatrix(Attestant)). This should make the changes backwards-compatible with current and previous Prysm-versions.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1344016181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1344641830",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11717#issuecomment-1344641830",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11717",
    "id": 1344641830,
    "node_id": "IC_kwDOBvuov85QJZsm",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-09T18:42:14Z",
    "updated_at": "2022-12-09T18:42:14Z",
    "author_association": "MEMBER",
    "body": "> We are currently exploring a third way - to use the Attestant Capella types, with a fallback to the current Bellatrix(go-boost-utils) types (instead of Bellatrix(Attestant)). This should make the changes backwards-compatible with current and previous Prysm-versions.\r\n\r\nThat's great to hear. Thanks @metachris !",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1344641830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

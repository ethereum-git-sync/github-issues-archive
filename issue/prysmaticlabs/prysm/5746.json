{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746",
  "id": 612449348,
  "node_id": "MDU6SXNzdWU2MTI0NDkzNDg=",
  "number": 5746,
  "title": "Metrics: validator balance returned as 0 on activated validator when node restart ",
  "user": {
    "login": "GuillaumeMiralles",
    "id": 23481418,
    "node_id": "MDQ6VXNlcjIzNDgxNDE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/23481418?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/GuillaumeMiralles",
    "html_url": "https://github.com/GuillaumeMiralles",
    "followers_url": "https://api.github.com/users/GuillaumeMiralles/followers",
    "following_url": "https://api.github.com/users/GuillaumeMiralles/following{/other_user}",
    "gists_url": "https://api.github.com/users/GuillaumeMiralles/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/GuillaumeMiralles/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/GuillaumeMiralles/subscriptions",
    "organizations_url": "https://api.github.com/users/GuillaumeMiralles/orgs",
    "repos_url": "https://api.github.com/users/GuillaumeMiralles/repos",
    "events_url": "https://api.github.com/users/GuillaumeMiralles/events{/privacy}",
    "received_events_url": "https://api.github.com/users/GuillaumeMiralles/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 802129907,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDc=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Help%20Wanted",
      "name": "Help Wanted",
      "color": "33aa3f",
      "default": false,
      "description": "Extra attention is needed"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 9,
  "created_at": "2020-05-05T09:01:22Z",
  "updated_at": "2020-05-12T23:05:17Z",
  "closed_at": "2020-05-12T23:05:17Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n\r\n<!--ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž\r\n\r\nHellooo! ðŸ˜„ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž-->\r\n\r\n# ðŸ’Ž Issue\r\n\r\n### Background\r\n\r\nI am trying to create a grafana dashboard that everybody could use. There is only one thing that bothers me actually in the metrics returned to Prometheus, is that when the node restart while the validator client is still running, all the validators have their balance set to 0\r\n\r\n### Description\r\nRun the node, run the validator client. Then after a while restart the node. Check the validator client metrics (http://localhost:8081/metrics) and see it being set to 0. I would expect to receive the last known validator balance, or just no data, but not a false returned validator balance instead\r\n\r\nThis create unwanted behavior on my dashboard and I haven't find a way to workaround it for the earning panels in a time frame on this dashboard: \r\nhttps://gist.github.com/GuillaumeMiralles/ef8617bd8cb245f25a1e384613ec1303\r\n\r\nValidator client metrics before to restart the node: \r\n![metrics before restart](https://user-images.githubusercontent.com/23481418/81050355-21ca6a00-8ec0-11ea-90fa-c82e2544e9b0.png)\r\n\r\nValidator client log when restarting the node: \r\n![log on restarting node](https://user-images.githubusercontent.com/23481418/81050407-34dd3a00-8ec0-11ea-8e27-40e4503c55c9.png)\r\n\r\nValidator client metrics after to restart the node: \r\n![metrics after restart](https://user-images.githubusercontent.com/23481418/81050401-33ac0d00-8ec0-11ea-9a05-c4da8e90bf64.png)\r\n\r\n\r\n",
  "closed_by": {
    "login": "0xKiwi",
    "id": 6251510,
    "node_id": "MDQ6VXNlcjYyNTE1MTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6251510?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/0xKiwi",
    "html_url": "https://github.com/0xKiwi",
    "followers_url": "https://api.github.com/users/0xKiwi/followers",
    "following_url": "https://api.github.com/users/0xKiwi/following{/other_user}",
    "gists_url": "https://api.github.com/users/0xKiwi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/0xKiwi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/0xKiwi/subscriptions",
    "organizations_url": "https://api.github.com/users/0xKiwi/orgs",
    "repos_url": "https://api.github.com/users/0xKiwi/repos",
    "events_url": "https://api.github.com/users/0xKiwi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/0xKiwi/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626226881",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626226881",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626226881,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIyNjg4MQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T19:49:35Z",
    "updated_at": "2020-05-09T19:49:35Z",
    "author_association": "MEMBER",
    "body": "I don't think this is an API issue, but a metrics reporting issue in the validator client. If the validator balance is unknown, it should not be updated as zero. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626226881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626230505",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626230505",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626230505,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIzMDUwNQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T20:21:47Z",
    "updated_at": "2020-05-09T20:21:47Z",
    "author_association": "MEMBER",
    "body": "The core problem here is why the validator client is requesting beacon node for blocks and attestations when it knows the beacon node is not yet at head. See you have errors:\r\n```\r\nSyncing to latest head, not yet ready to respond...\r\n```\r\n\r\n\r\nValidator should be blocking like this:\r\n```\r\n[2020-05-09 13:19:30]  INFO validator: Beacon chain started genesisTime=2020-04-17 17:00:00 -0700 PDT\r\n[2020-05-09 13:19:36]  INFO validator: Waiting for beacon node to sync to latest chain head\r\n[2020-05-09 13:19:42]  INFO validator: Waiting for beacon node to sync to latest chain head\r\n[2020-05-09 13:19:48]  INFO validator: Waiting for beacon node to sync to latest chain head\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626230505/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626231802",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626231802",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626231802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIzMTgwMg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T20:33:29Z",
    "updated_at": "2020-05-09T20:36:33Z",
    "author_association": "MEMBER",
    "body": "I disagree. Look at this bit of code\r\nhttps://github.com/prysmaticlabs/prysm/blob/cf98de86f43d4a82b31ba3e3b5ba605f61a6d613/validator/client/validator_metrics.go#L69-L75\r\n\r\nThis should be using DeleteLabelValues(fmtKey) instead of setting it to 0.\r\n\r\nEdit: Or it shouldn't be set at all. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626231802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626232917",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626232917",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626232917,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIzMjkxNw==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T20:43:58Z",
    "updated_at": "2020-05-09T20:44:19Z",
    "author_association": "MEMBER",
    "body": "No. These are not missing validators. They are active validators. \r\n\r\nOk I found a way to reproduce this. @GuillaumeMiralles didn't post the instructions but i found a way to reproduce it.\r\n\r\nTypically:\r\n1.) Node starts\r\n2.) Validator starts\r\n3.) Validator blocks until node syncs to head. In this case validators balances will just be unknown\r\n\r\nIn @GuillaumeMiralles case:\r\n1.) Node and validator are in sync to begin with\r\n2.) Node restarts and validator loses connect\r\n3.) After validator reconnects to the node, validator should run `WaitForSynced` before requesting for blocks and attestations\r\n\r\nIt is an edge case we should consider. Validator balances will show up as unknown instead of 0",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626232917/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626234845",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626234845",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626234845,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIzNDg0NQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T21:01:31Z",
    "updated_at": "2020-05-09T21:01:31Z",
    "author_association": "MEMBER",
    "body": "So the API is reporting 0? What does the response look like? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626234845/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626235987",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626235987",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626235987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIzNTk4Nw==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T21:12:18Z",
    "updated_at": "2020-05-09T21:12:18Z",
    "author_association": "MEMBER",
    "body": "When I try to access a validator by index that doesn't exist yet because my node hasn't synced fully, this is what I get\r\n```\r\n{\r\n  \"error\": \"11 OUT_OF_RANGE: Validator index 25000 does not exist in historical balances\"\r\n}\r\n```\r\n\r\nInterestingly, when I try to request by public keys when the node is still syncing, I get a default response of the first 250 validators which would trigger that \"missing validator\" code path. \r\n\r\nI don't think the root of the problem here is necessarily the API. While we should reject API response while syncing for validator balances, it is inappropriate to say \"a validator's balance is 0 in the state\" simply when they are missing from the response. Their balance isn't 0, it is nothing, they don't exist. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626235987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626237647",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-626237647",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 626237647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjIzNzY0Nw==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T21:28:05Z",
    "updated_at": "2020-05-09T21:28:05Z",
    "author_association": "MEMBER",
    "body": "> When I try to access a validator by index that doesn't exist yet because my node hasn't synced fully, this is what I get\r\n> \r\n> ```\r\n> {\r\n>   \"error\": \"11 OUT_OF_RANGE: Validator index 25000 does not exist in historical balances\"\r\n> }\r\n> ```\r\n> \r\n> Interestingly, when I try to request by public keys when the node is still syncing, I get a default response of the first 250 validators which would trigger that \"missing validator\" code path.\r\n> \r\n> I don't think the root of the problem here is necessarily the API. While we should reject API response while syncing for validator balances, it is inappropriate to say \"a validator's balance is 0 in the state\" simply when they are missing from the response. Their balance isn't 0, it is nothing, they don't exist.\r\n\r\nYeah. I think theres two issues here.\r\n1.) Validator local metrics need better interpretation on what `0` means\r\n2.) Beacon node needs to return `Unavailable` for performance request when it's syncing.\r\nSee https://github.com/prysmaticlabs/prysm/pull/5795",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626237647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/627528864",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-627528864",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 627528864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzUyODg2NA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-12T18:55:02Z",
    "updated_at": "2020-05-12T18:55:02Z",
    "author_association": "MEMBER",
    "body": "Given the merge of #5795 I think we can close this given we've done all we can to fix it from prysm side. Anything else to add? @GuillaumeMiralles ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/627528864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/627584106",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5746#issuecomment-627584106",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5746",
    "id": 627584106,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzU4NDEwNg==",
    "user": {
      "login": "GuillaumeMiralles",
      "id": 23481418,
      "node_id": "MDQ6VXNlcjIzNDgxNDE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/23481418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GuillaumeMiralles",
      "html_url": "https://github.com/GuillaumeMiralles",
      "followers_url": "https://api.github.com/users/GuillaumeMiralles/followers",
      "following_url": "https://api.github.com/users/GuillaumeMiralles/following{/other_user}",
      "gists_url": "https://api.github.com/users/GuillaumeMiralles/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GuillaumeMiralles/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GuillaumeMiralles/subscriptions",
      "organizations_url": "https://api.github.com/users/GuillaumeMiralles/orgs",
      "repos_url": "https://api.github.com/users/GuillaumeMiralles/repos",
      "events_url": "https://api.github.com/users/GuillaumeMiralles/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GuillaumeMiralles/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-12T20:45:27Z",
    "updated_at": "2020-05-12T20:46:10Z",
    "author_association": "NONE",
    "body": "From what I understand on #5795 it seems that 0 will not be returned anymore, but instead we have no data, which is totally fine for me. \r\nIf what I described is correct, then yes we can close this issue.\r\n\r\nThanks for your work! :)",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/627584106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

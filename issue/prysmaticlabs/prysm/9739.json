{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/9739",
  "id": 1016555961,
  "node_id": "I_kwDOBvuov848l2m5",
  "number": 9739,
  "title": "Validator data dir is set in a frustrating way",
  "user": {
    "login": "jimpo",
    "id": 881253,
    "node_id": "MDQ6VXNlcjg4MTI1Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jimpo",
    "html_url": "https://github.com/jimpo",
    "followers_url": "https://api.github.com/users/jimpo/followers",
    "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
    "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
    "organizations_url": "https://api.github.com/users/jimpo/orgs",
    "repos_url": "https://api.github.com/users/jimpo/repos",
    "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jimpo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129906,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDY=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Enhancement",
      "name": "Enhancement",
      "color": "84b6eb",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 802129907,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDc=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Help%20Wanted",
      "name": "Help Wanted",
      "color": "33aa3f",
      "default": false,
      "description": "Extra attention is needed"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rkapka",
    "id": 28876818,
    "node_id": "MDQ6VXNlcjI4ODc2ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkapka",
    "html_url": "https://github.com/rkapka",
    "followers_url": "https://api.github.com/users/rkapka/followers",
    "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
    "organizations_url": "https://api.github.com/users/rkapka/orgs",
    "repos_url": "https://api.github.com/users/rkapka/repos",
    "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkapka/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-10-05T16:56:15Z",
  "updated_at": "2021-11-12T10:10:15Z",
  "closed_at": "2021-11-12T10:10:15Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž\r\n\r\nHellooo! ðŸ˜„ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž-->\r\n\r\n# ðŸ’Ž Issue\r\n\r\nData dir is inconsistent between commands. Some CLI commands don't allow it as an argument and use the default (eg. `validator wallet create`) when checking TOS. Therefore I'm forced to use the default datadir location. Then when you run the validator, it changes the data dir to somewhere inside the wallet dir, even when passed the --datadir arg! (See https://github.com/prysmaticlabs/prysm/blob/develop/validator/node/node.go#L202)\r\n\r\n### Background\r\n\r\nI just want to run the sequence of CLI commands:\r\n\r\n```bash\r\nvalidator wallet create ...\r\nvalidator slashing-protection import ...\r\nvalidator ...\r\nvalidator slashing-protection export ...\r\n ```\r\n\r\nand due to the inconsistencies in data dir CLI management resulting from [this logic](https://github.com/prysmaticlabs/prysm/blob/develop/validator/node/node.go#L202), I can't do that without renaming my data dir between commands or symlinking or some other trickery.",
  "closed_by": {
    "login": "rkapka",
    "id": 28876818,
    "node_id": "MDQ6VXNlcjI4ODc2ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkapka",
    "html_url": "https://github.com/rkapka",
    "followers_url": "https://api.github.com/users/rkapka/followers",
    "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
    "organizations_url": "https://api.github.com/users/rkapka/orgs",
    "repos_url": "https://api.github.com/users/rkapka/repos",
    "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkapka/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/935272867",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9739#issuecomment-935272867",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739",
    "id": 935272867,
    "node_id": "IC_kwDOBvuov843vyGj",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-06T02:18:31Z",
    "updated_at": "2021-10-06T02:18:31Z",
    "author_association": "MEMBER",
    "body": "@jimpo, this seems like an oversight in some of the validator commands. We should fix this soon to improve the user experience of validator wallet and db management. Thanks for filing. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/935272867/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/949515254",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9739#issuecomment-949515254",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9739",
    "id": 949515254,
    "node_id": "IC_kwDOBvuov844mHP2",
    "user": {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-22T10:54:30Z",
    "updated_at": "2021-10-22T10:54:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @jimpo\r\n\r\nI am not convinced there is anything wrong with our flags at the moment, other then the description of `datadir`. It says\r\n\r\n> Data directory for the databases and keystore (default: \"/home/radek/.eth2\")\r\n\r\nbut it is not the directory where keystores are held. This is specified by `wallet-dir`.\r\n\r\nWe have two directories:\r\n1) Wallet where keystores live (`wallet-dir`)\r\n2) Data where the validator DB and slashing protection live (`data-dir`)\r\n\r\nYou can change the initial value of `data-dir` when you run your validator client. It does not make sense to have it as a flag in `wallet create` because the wallet is not in charge of the validator DB nor slashing protection.\r\n\r\nSo to summarize, you should have two environment variables: `datadir` and `walletdir`. You use `datadir` during validator client startup and when importing/exporting slashing protection. You use `walletdir` when creating a wallet and managing accounts e.g. `accounts list`.\r\n\r\nI hope this helps. Let me know if you have any further questions.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/949515254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

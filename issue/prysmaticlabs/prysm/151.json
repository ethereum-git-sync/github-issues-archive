{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/151",
  "id": 329297558,
  "node_id": "MDU6SXNzdWUzMjkyOTc1NTg=",
  "number": 151,
  "title": "Exploring SMC With New Registration and Dynamic Shard Count Properties",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129908,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDg=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Good%20First%20Issue",
      "name": "Good First Issue",
      "color": "7057ff",
      "default": false,
      "description": "Good for newcomers"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/milestones/3",
    "html_url": "https://github.com/prysmaticlabs/prysm/milestone/3",
    "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/milestones/3/labels",
    "id": 3141844,
    "node_id": "MDk6TWlsZXN0b25lMzE0MTg0NA==",
    "number": 3,
    "title": "Diamond",
    "description": "The Diamond Release: Ethereum Mainnet",
    "creator": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 113,
    "state": "closed",
    "created_at": "2018-02-25T21:24:26Z",
    "updated_at": "2020-11-25T18:06:34Z",
    "due_on": "2020-11-20T08:00:00Z",
    "closed_at": "2020-11-25T18:06:34Z"
  },
  "comments": 4,
  "created_at": "2018-06-05T04:24:53Z",
  "updated_at": "2018-06-17T22:35:26Z",
  "closed_at": "2018-06-17T22:35:26Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "## Background\r\n\r\nThis issue was created with inspirations from research threads: [Registrations, shard count and shuffling](https://ethresear.ch/t/registrations-shard-count-and-shuffling/2129/7) and [A proposal for structuring committees, cross-links](https://ethresear.ch/t/a-proposal-for-structuring-committees-cross-links-etc/2118).\r\n\r\nCurrent SMC implementation was designed with minimal functionality to get us through [Ruby](https://ethresear.ch/t/minimal-sharding-protocol-extension/1823) release. It doesn't have support for RANDAO, cross links, dynamic shard count, proposer deposit, better shuffling mechanisms, the new elements mentioned in the latest research. Since those are all the critical components to make Sharding to work, it's important for us to iterate quick and keep our implementations up to date so we can provide our valuable inputs to the research threads.\r\n\r\n## Ideas\r\n\r\nI propose we get a head start on SMC 2.0. Keep in mind we'll still be using current SMC 1.0 for Ruby release. SMC2.0 is isolated from Ruby release, it will be prototyped and tested, but doesn't affect current Ruby release schedule. This makes a good `new-comer` and `bounty` issue\r\n\r\n**Current SMC1.0 has the following features:**\r\n- notary can register with a deposit, deregister with lock up period, and get deposit back when lock up ends\r\n- anyone can add a header with shard ID, period and chunk root to the SMC\r\n- notary gets shuffled per period and shard\r\n- elected notary can submit its vote to the SMC\r\n\r\n**We should add the following features to SMC 2.0:**\r\n- notary and proposer are the same entity (i.e. same participant, same address)\r\n- there are 3 states for register/deregister: `pendingRegister`, `registered`, `pendingDeregistered`\r\n- `pendingRegister` and `pendingDeregister` are both fifo queues \r\n- smc tracks the current shard count\r\n- if `pendingRegister` count reaches threshold (i.e. enough participant registered), smc increases `shardCount`\r\n- if `pendingRegister` == `registered`, smc increases `shardCount`\r\n- proposers and notaries are shuffled across shards. Proposers assigned to shards 2^19 periods. Notary 2^7 periods. Oldest proposer is shuffled 2^19-10 period. Oldest notary is shuffled 2^10-7 period\r\n- active registered validator can deregister and count down begins. If `pendingRegister` > 0 and countDown period ends. The validator is immediately deregistered and replace by the top pendingRegister waiting in the queue",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/394868129",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/151#issuecomment-394868129",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151",
    "id": 394868129,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDg2ODEyOQ==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T21:35:07Z",
    "updated_at": "2018-06-05T21:35:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Very neat @terenc3t ! Agree with getting a head start. I actually would recommend attaching a bounty to this issue, as this is something best suited for outside contributors that want to learn more about sharding and contribute something immensely helpful.\r\n\r\nThoughts @prestonvanloon @nisdas ?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/394868129/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/394871139",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/151#issuecomment-394871139",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151",
    "id": 394871139,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDg3MTEzOQ==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T21:46:21Z",
    "updated_at": "2018-06-05T21:46:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tagging this as an intermediate issue.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/394871139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/394885209",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/151#issuecomment-394885209",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151",
    "id": 394885209,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NDg4NTIwOQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-05T22:50:33Z",
    "updated_at": "2018-06-05T22:50:33Z",
    "author_association": "MEMBER",
    "body": "I will write about this in our next development post on Medium. Hopefully someone will pick it up shortly after : ) ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/394885209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/397911158",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/151#issuecomment-397911158",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/151",
    "id": 397911158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NzkxMTE1OA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-17T22:35:26Z",
    "updated_at": "2018-06-17T22:35:26Z",
    "author_association": "MEMBER",
    "body": "Going to close this for now. Latest research has indicated we'll be moving away from SMC to beacon chain. This won't be relevant after Ruby release.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/397911158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/5771",
  "id": 613710640,
  "node_id": "MDU6SXNzdWU2MTM3MTA2NDA=",
  "number": 5771,
  "title": "beacon-chain memory leak alpha-6",
  "user": {
    "login": "mshean",
    "id": 4968888,
    "node_id": "MDQ6VXNlcjQ5Njg4ODg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4968888?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mshean",
    "html_url": "https://github.com/mshean",
    "followers_url": "https://api.github.com/users/mshean/followers",
    "following_url": "https://api.github.com/users/mshean/following{/other_user}",
    "gists_url": "https://api.github.com/users/mshean/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mshean/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mshean/subscriptions",
    "organizations_url": "https://api.github.com/users/mshean/orgs",
    "repos_url": "https://api.github.com/users/mshean/repos",
    "events_url": "https://api.github.com/users/mshean/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mshean/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 802129907,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDc=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Help%20Wanted",
      "name": "Help Wanted",
      "color": "33aa3f",
      "default": false,
      "description": "Extra attention is needed"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-05-07T01:27:30Z",
  "updated_at": "2020-05-11T19:53:34Z",
  "closed_at": "2020-05-11T19:53:33Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\n<!-- ‚úçÔ∏è--> alpha-6 beacon-chain contains a memory leak\r\n\r\n### Has this worked before in a previous version?\r\n\r\n<!-- Did this behavior use to work in the previous version? -->\r\n<!-- ‚úçÔ∏è--> alpha-5 memory leak was not nearly as bad, it would usually take a few days to reach 75% memory usage (on 4GB Raspberry Pi)\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n<!--\r\nPlease let us know how we can reproduce this issue. Include the exact method you used to run Prysm along with any flags used in your beacon chain and/or validator. Make sure you don't upload any confidential files or private keys.\r\n-->\r\n\r\nRun alpha-6 arm64 beacon-chain and observe memory usage over time.\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\n<!-- If the issue is accompanied by an error, please share the error logs with us below. If you have a lot of logs, place make a paste bin with your logs and share the link with us here: -->\r\n<!-- ‚úçÔ∏è-->\r\n\r\n</code></pre>\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nRaspberry Pi 4 with Ubuntu 20.04 LTS\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nalpha-6\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\nMonit logs which show the process reaches 75% memory usage about every 3 hours, then monit restarts the process\r\n<pre>\r\n<code>\r\n[UTC May  6 02:22:12] info     : 'ubuntu' Monit 5.26.0 started\r\n[UTC May  6 07:38:16] warning  : 'prysm.sh' mem usage of 75.0% matches resource limit [mem usage > 75.0%]\r\n[UTC May  6 07:40:16] error    : 'prysm.sh' mem usage of 75.0% matches resource limit [mem usage > 75.0%]\r\n[UTC May  6 07:40:16] info     : 'prysm.sh' trying to restart\r\n[UTC May  6 07:40:16] info     : 'prysm.sh' stop: '/usr/sbin/service beacon-chain stop'\r\n[UTC May  6 07:40:23] info     : 'prysm.sh' start: '/usr/sbin/service beacon-chain start'\r\n[UTC May  6 07:42:33] info     : 'prysm.sh' mem usage check succeeded [current mem usage = 19.5%]\r\n[UTC May  6 14:46:38] error    : 'prysm.sh' mem usage of 75.0% matches resource limit [mem usage > 75.0%]\r\n[UTC May  6 14:46:38] info     : 'prysm.sh' trying to restart\r\n[UTC May  6 14:46:38] info     : 'prysm.sh' stop: '/usr/sbin/service beacon-chain stop'\r\n[UTC May  6 14:46:46] info     : 'prysm.sh' start: '/usr/sbin/service beacon-chain start'\r\n[UTC May  6 14:49:01] info     : 'prysm.sh' mem usage check succeeded [current mem usage = 17.9%]\r\n[UTC May  6 17:09:02] error    : 'prysm.sh' mem usage of 75.1% matches resource limit [mem usage > 75.0%]\r\n[UTC May  6 17:09:02] info     : 'prysm.sh' trying to restart\r\n[UTC May  6 17:09:02] info     : 'prysm.sh' stop: '/usr/sbin/service beacon-chain stop'\r\n[UTC May  6 17:09:10] info     : 'prysm.sh' start: '/usr/sbin/service beacon-chain start'\r\n[UTC May  6 17:11:26] info     : 'prysm.sh' mem usage check succeeded [current mem usage = 18.2%]\r\n[UTC May  6 20:33:28] error    : 'prysm.sh' mem usage of 75.8% matches resource limit [mem usage > 75.0%]\r\n[UTC May  6 20:33:28] info     : 'prysm.sh' trying to restart\r\n[UTC May  6 20:33:28] info     : 'prysm.sh' stop: '/usr/sbin/service beacon-chain stop'\r\n[UTC May  6 20:33:36] info     : 'prysm.sh' start: '/usr/sbin/service beacon-chain start'\r\n[UTC May  6 20:35:46] info     : 'prysm.sh' mem usage check succeeded [current mem usage = 18.4%]\r\n[UTC May  6 23:11:48] error    : 'prysm.sh' mem usage of 76.7% matches resource limit [mem usage > 75.0%]\r\n[UTC May  6 23:11:48] info     : 'prysm.sh' trying to restart\r\n[UTC May  6 23:11:48] info     : 'prysm.sh' stop: '/usr/sbin/service beacon-chain stop'\r\n[UTC May  6 23:11:55] info     : 'prysm.sh' start: '/usr/sbin/service beacon-chain start'\r\n[UTC May  6 23:14:06] info     : 'prysm.sh' mem usage check succeeded [current mem usage = 19.3%]\r\n</code>\r\n</pre>\r\n\r\nFor reference, here are the service configs I created to automatically monitor and restart: https://github.com/prysmaticlabs/prysm/compare/master...mshean:systemd\r\n\r\nThese warnings occurred when the 75% threshold was passed around 23:11:\r\n<pre>\r\n<code>\r\nMay 06 23:08:12 ubuntu bash[49643]: time=\"2020-05-06 23:08:12\" level=warning msg=\"Subscription next failed\" error=\"subscription cancelled by calling sub.Cancel()\" prefix=sync topic=\"/eth2/f071c66c/committee_index5_beacon_attestation/ssz_snappy\"\r\nMay 06 23:08:29 ubuntu bash[49643]: time=\"2020-05-06 23:08:29\" level=error msg=\"Failed to write to stream\" error=\"session shutdown\" handler=status prefix=sync\r\nMay 06 23:08:29 ubuntu bash[49643]: time=\"2020-05-06 23:08:29\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAm31kWC17rDHetTv8muX6swwcxktaTqcJsdZBWG1EnMbG5 prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 23:09:11 ubuntu bash[49643]: time=\"2020-05-06 23:09:11\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83357 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83366 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83366 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83376 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83382 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83395 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83395 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83395 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83395 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83395 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83402 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83411 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83411 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83415 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:09:12 ubuntu bash[49643]: time=\"2020-05-06 23:09:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 136512 with weight 83415 is not eligible, finalizedEpoch 4264 != 4264, justifiedEpoch 4265 != 4266\" prefix=blockchain\r\nMay 06 23:11:15 ubuntu bash[49643]: time=\"2020-05-06 23:11:15\" level=warning msg=\"Subscription to new head notifier failed\" error=\"websocket: close 1006 (abnormal closure): unexpected EOF\" prefix=powchain\r\n</code>\r\n</pre>\r\n\r\nAnd these warnings showed up near the 20:33 restart:\r\n<pre>\r\n<code>\r\nMay 06 20:29:12 ubuntu bash[49054]: time=\"2020-05-06 20:29:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 135712 with weight 80461 is not eligible, finalizedEpoch 4239 != 4239, justifiedEpoch 4240 != 4241\" prefix=blockchain\r\nMay 06 20:29:12 ubuntu bash[49054]: time=\"2020-05-06 20:29:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 135712 with weight 80461 is not eligible, finalizedEpoch 4239 != 4239, justifiedEpoch 4240 != 4241\" prefix=blockchain\r\nMay 06 20:29:12 ubuntu bash[49054]: time=\"2020-05-06 20:29:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 135712 with weight 80461 is not eligible, finalizedEpoch 4239 != 4239, justifiedEpoch 4240 != 4241\" prefix=blockchain\r\nMay 06 20:29:12 ubuntu bash[49054]: time=\"2020-05-06 20:29:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 135712 with weight 80461 is not eligible, finalizedEpoch 4239 != 4239, justifiedEpoch 4240 != 4241\" prefix=blockchain\r\nMay 06 20:29:12 ubuntu bash[49054]: time=\"2020-05-06 20:29:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 135712 with weight 80461 is not eligible, finalizedEpoch 4239 != 4239, justifiedEpoch 4240 != 4241\" prefix=blockchain\r\nMay 06 20:29:12 ubuntu bash[49054]: time=\"2020-05-06 20:29:12\" level=warning msg=\"Resolving fork due to new attestation: head at slot 135712 with weight 80461 is not eligible, finalizedEpoch 4239 != 4239, justifiedEpoch 4240 != 4241\" prefix=blockchain\r\nMay 06 20:30:05 ubuntu bash[49054]: time=\"2020-05-06 20:30:05\" level=error msg=\"Failed to close stream\" error=\"session shutdown\" prefix=sync\r\nMay 06 20:30:05 ubuntu bash[49054]: time=\"2020-05-06 20:30:05\" level=warning msg=\"Failed to handle p2p RPC\" error=\"session shutdown\" peer=16Uiu2HAkwFbFYvHe7VHcpemg4pwB2XyP1kCMkR53XfB2HTeeNgdS prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 20:30:06 ubuntu bash[49054]: time=\"2020-05-06 20:30:06\" level=error msg=\"Failed to write to stream\" error=\"stream reset\" handler=status prefix=sync\r\nMay 06 20:30:06 ubuntu bash[49054]: time=\"2020-05-06 20:30:06\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAkwFbFYvHe7VHcpemg4pwB2XyP1kCMkR53XfB2HTeeNgdS prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 20:30:17 ubuntu bash[49054]: time=\"2020-05-06 20:30:17\" level=error msg=\"Failed to write to stream\" error=\"session shutdown\" handler=status prefix=sync\r\nMay 06 20:30:17 ubuntu bash[49054]: time=\"2020-05-06 20:30:17\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAmFgW6wCSvYS5eYYEbejCaojk5DW2WU7H4pYP45TwG1g6y prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\n</code>\r\n</pre>\r\n\r\nThe 17:09 restart didn't have anything too alarming:\r\n<pre>\r\n<code>\r\nMay 06 17:08:03 ubuntu bash[48599]: time=\"2020-05-06 17:08:03\" level=info msg=\"Synced new block\" block=0xa1fe9e62... epoch=4210 finalizedEpoch=4208 finalizedRoot=0xb11a1859... prefix=blockchain slot=134740\r\nMay 06 17:08:03 ubuntu bash[48599]: time=\"2020-05-06 17:08:03\" level=info msg=\"Finished applying state transition\" attestations=32 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 17:08:16 ubuntu bash[48599]: time=\"2020-05-06 17:08:16\" level=info msg=\"Synced new block\" block=0x0533a1ad... epoch=4210 finalizedEpoch=4208 finalizedRoot=0xb11a1859... prefix=blockchain slot=134741\r\nMay 06 17:08:16 ubuntu bash[48599]: time=\"2020-05-06 17:08:16\" level=info msg=\"Finished applying state transition\" attestations=31 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 17:08:26 ubuntu bash[48599]: time=\"2020-05-06 17:08:26\" level=info msg=\"Synced new block\" block=0xbc62cbb5... epoch=4210 finalizedEpoch=4208 finalizedRoot=0xb11a1859... prefix=blockchain slot=134742\r\nMay 06 17:08:26 ubuntu bash[48599]: time=\"2020-05-06 17:08:26\" level=info msg=\"Finished applying state transition\" attestations=20 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 17:08:38 ubuntu bash[48599]: time=\"2020-05-06 17:08:38\" level=info msg=\"Synced new block\" block=0xd0cc4447... epoch=4210 finalizedEpoch=4208 finalizedRoot=0xb11a1859... prefix=blockchain slot=134743\r\nMay 06 17:08:38 ubuntu bash[48599]: time=\"2020-05-06 17:08:38\" level=info msg=\"Finished applying state transition\" attestations=12 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 17:08:41 ubuntu bash[48599]: time=\"2020-05-06 17:08:41\" level=warning msg=\"Failed to decode stream message\" error=\"stream reset\" peer=16Uiu2HAm3tcqJpyXCyHQv6diAwWYPvZuPXY1sWmiTcH19P3EWRMv prefix=sync topic=\"/eth2/beacon_chain/req/ping/1/ssz_snappy\"\r\nMay 06 17:08:50 ubuntu bash[48599]: time=\"2020-05-06 17:08:50\" level=info msg=\"Synced new block\" block=0x6f48ee21... epoch=4210 finalizedEpoch=4208 finalizedRoot=0xb11a1859... prefix=blockchain slot=134744\r\nMay 06 17:08:50 ubuntu bash[48599]: time=\"2020-05-06 17:08:50\" level=info msg=\"Finished applying state transition\" attestations=21 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 17:09:02 ubuntu bash[48599]: time=\"2020-05-06 17:09:02\" level=info msg=\"Synced new block\" block=0xf76c461f... epoch=4210 finalizedEpoch=4208 finalizedRoot=0xb11a1859... prefix=blockchain slot=134745\r\nMay 06 17:09:02 ubuntu bash[48599]: time=\"2020-05-06 17:09:02\" level=info msg=\"Finished applying state transition\" attestations=23 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\n</code>\r\n</pre>\r\n\r\n14:46 restart\r\n<pre>\r\n<code>\r\nMay 06 14:43:24 ubuntu bash[47262]: time=\"2020-05-06 14:43:24\" level=warning msg=\"Resolving fork due to new attestation: head at slot 133983 with weight 84297 is not eligible, finalizedEpoch 4184 != 4185, justifiedEpoch 4185 != 4187\" prefix=blockchain\r\nMay 06 14:43:24 ubuntu bash[47262]: time=\"2020-05-06 14:43:24\" level=warning msg=\"Resolving fork due to new attestation: head at slot 133983 with weight 84297 is not eligible, finalizedEpoch 4184 != 4185, justifiedEpoch 4185 != 4187\" prefix=blockchain\r\nMay 06 14:43:24 ubuntu bash[47262]: time=\"2020-05-06 14:43:24\" level=warning msg=\"Resolving fork due to new attestation: head at slot 133983 with weight 84297 is not eligible, finalizedEpoch 4184 != 4185, justifiedEpoch 4185 != 4187\" prefix=blockchain\r\nMay 06 14:43:25 ubuntu bash[47262]: time=\"2020-05-06 14:43:25\" level=info msg=\"Starting next epoch\" epoch=4188 finalizedEpoch=4186 justifiedEpoch=4187 prefix=blockchain previousJustifiedEpoch=4186\r\nMay 06 14:43:25 ubuntu bash[47262]: time=\"2020-05-06 14:43:25\" level=info msg=\"Validator registry information\" activeValidators=28369 averageBalance=\"32.26754 ETH\" prefix=blockchain totalValidators=28392\r\nMay 06 14:43:26 ubuntu bash[47262]: time=\"2020-05-06 14:43:26\" level=info msg=\"Synced new block\" block=0xfb483ec6... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134016\r\nMay 06 14:43:26 ubuntu bash[47262]: time=\"2020-05-06 14:43:26\" level=info msg=\"Finished applying state transition\" attestations=22 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:43:31 ubuntu bash[47262]: time=\"2020-05-06 14:43:31\" level=info msg=\"Synced new block\" block=0xeeaf3d8b... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134017\r\nMay 06 14:43:31 ubuntu bash[47262]: time=\"2020-05-06 14:43:31\" level=info msg=\"Finished applying state transition\" attestations=83 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:43:35 ubuntu bash[47262]: time=\"2020-05-06 14:43:35\" level=info msg=\"Synced new block\" block=0xeeaf3d8b... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134017\r\nMay 06 14:43:35 ubuntu bash[47262]: time=\"2020-05-06 14:43:35\" level=info msg=\"Finished applying state transition\" attestations=83 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:43:35 ubuntu bash[47262]: time=\"2020-05-06 14:43:35\" level=info msg=\"Verified and saved pending attestations to pool\" blockRoot=eeaf3d8be929 pendingAttsCount=117 prefix=sync\r\nMay 06 14:43:38 ubuntu bash[47262]: time=\"2020-05-06 14:43:38\" level=info msg=\"Synced new block\" block=0x3752d9d2... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134018\r\nMay 06 14:43:38 ubuntu bash[47262]: time=\"2020-05-06 14:43:38\" level=info msg=\"Finished applying state transition\" attestations=31 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:43:41 ubuntu bash[47262]: time=\"2020-05-06 14:43:41\" level=error msg=\"Failed to write to stream\" error=\"session shutdown\" handler=status prefix=sync\r\nMay 06 14:43:41 ubuntu bash[47262]: time=\"2020-05-06 14:43:41\" level=error msg=\"Failed to close stream\" error=\"session shutdown\" prefix=sync\r\nMay 06 14:43:41 ubuntu bash[47262]: time=\"2020-05-06 14:43:41\" level=warning msg=\"Failed to handle p2p RPC\" error=\"session shutdown\" peer=16Uiu2HAm2y5ZwvHrMaXQajtMCC4NtEahubutoFWJq9UVcfznkrEN prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:43:49 ubuntu bash[47262]: time=\"2020-05-06 14:43:49\" level=info msg=\"Synced new block\" block=0x69d499bc... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134019\r\nMay 06 14:43:49 ubuntu bash[47262]: time=\"2020-05-06 14:43:49\" level=info msg=\"Finished applying state transition\" attestations=16 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:44:02 ubuntu bash[47262]: time=\"2020-05-06 14:44:02\" level=info msg=\"Synced new block\" block=0x4d391bae... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134020\r\nMay 06 14:44:02 ubuntu bash[47262]: time=\"2020-05-06 14:44:02\" level=info msg=\"Finished applying state transition\" attestations=36 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:44:14 ubuntu bash[47262]: time=\"2020-05-06 14:44:14\" level=info msg=\"Synced new block\" block=0xc98feb12... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134021\r\nMay 06 14:44:14 ubuntu bash[47262]: time=\"2020-05-06 14:44:14\" level=info msg=\"Finished applying state transition\" attestations=14 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:44:26 ubuntu bash[47262]: time=\"2020-05-06 14:44:26\" level=info msg=\"Synced new block\" block=0x5e7fae36... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134022\r\nMay 06 14:44:26 ubuntu bash[47262]: time=\"2020-05-06 14:44:26\" level=info msg=\"Finished applying state transition\" attestations=36 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:44:30 ubuntu bash[47262]: time=\"2020-05-06 14:44:30\" level=error msg=\"Failed to write to stream\" error=\"session shutdown\" handler=status prefix=sync\r\nMay 06 14:44:30 ubuntu bash[47262]: time=\"2020-05-06 14:44:30\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAm2y5ZwvHrMaXQajtMCC4NtEahubutoFWJq9UVcfznkrEN prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:44:30 ubuntu bash[47262]: time=\"2020-05-06 14:44:30\" level=error msg=\"Failed to write to stream\" error=\"session shutdown\" handler=status prefix=sync\r\nMay 06 14:44:30 ubuntu bash[47262]: time=\"2020-05-06 14:44:30\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAmEXZLXQscbwXQf4WNkccgdsBMkf6hd8Yx9xVgkWnMm5qR prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:44:30 ubuntu bash[47262]: time=\"2020-05-06 14:44:30\" level=error msg=\"Failed to close stream\" error=\"session shutdown\" prefix=sync\r\nMay 06 14:44:30 ubuntu bash[47262]: time=\"2020-05-06 14:44:30\" level=warning msg=\"Failed to handle p2p RPC\" error=\"session shutdown\" peer=16Uiu2HAmEXZLXQscbwXQf4WNkccgdsBMkf6hd8Yx9xVgkWnMm5qR prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:44:50 ubuntu bash[47262]: time=\"2020-05-06 14:44:50\" level=info msg=\"Synced new block\" block=0x04848b4a... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134024\r\nMay 06 14:44:50 ubuntu bash[47262]: time=\"2020-05-06 14:44:50\" level=info msg=\"Finished applying state transition\" attestations=41 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:45:06 ubuntu bash[47262]: time=\"2020-05-06 14:45:06\" level=info msg=\"Synced new block\" block=0xb13fb5ad... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134025\r\nMay 06 14:45:06 ubuntu bash[47262]: time=\"2020-05-06 14:45:06\" level=info msg=\"Finished applying state transition\" attestations=54 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:45:13 ubuntu bash[47262]: time=\"2020-05-06 14:45:13\" level=info msg=\"Synced new block\" block=0x22e8742e... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134026\r\nMay 06 14:45:13 ubuntu bash[47262]: time=\"2020-05-06 14:45:13\" level=info msg=\"Finished applying state transition\" attestations=20 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:45:15 ubuntu bash[47262]: time=\"2020-05-06 14:45:15\" level=error msg=\"Failed to write to stream\" error=\"session shutdown\" handler=status prefix=sync\r\nMay 06 14:45:15 ubuntu bash[47262]: time=\"2020-05-06 14:45:15\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAm2y5ZwvHrMaXQajtMCC4NtEahubutoFWJq9UVcfznkrEN prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:45:38 ubuntu bash[47262]: time=\"2020-05-06 14:45:38\" level=info msg=\"Synced new block\" block=0xdf6e4c81... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134028\r\nMay 06 14:45:38 ubuntu bash[47262]: time=\"2020-05-06 14:45:38\" level=info msg=\"Finished applying state transition\" attestations=22 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:45:54 ubuntu bash[47262]: time=\"2020-05-06 14:45:54\" level=info msg=\"Synced new block\" block=0xf6059355... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134029\r\nMay 06 14:45:54 ubuntu bash[47262]: time=\"2020-05-06 14:45:54\" level=info msg=\"Finished applying state transition\" attestations=26 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:46:02 ubuntu bash[47262]: time=\"2020-05-06 14:46:02\" level=info msg=\"Synced new block\" block=0x4b2ba7eb... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134030\r\nMay 06 14:46:02 ubuntu bash[47262]: time=\"2020-05-06 14:46:02\" level=info msg=\"Finished applying state transition\" attestations=14 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:46:10 ubuntu bash[47262]: time=\"2020-05-06 14:46:10\" level=warning msg=\"Failed to handle p2p RPC\" error=\"stream reset\" peer=16Uiu2HAmEXZLXQscbwXQf4WNkccgdsBMkf6hd8Yx9xVgkWnMm5qR prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:46:11 ubuntu bash[47262]: time=\"2020-05-06 14:46:11\" level=error msg=\"Failed to close stream\" error=\"session shutdown\" prefix=sync\r\nMay 06 14:46:11 ubuntu bash[47262]: time=\"2020-05-06 14:46:11\" level=warning msg=\"Failed to handle p2p RPC\" error=\"session shutdown\" peer=16Uiu2HAm2y5ZwvHrMaXQajtMCC4NtEahubutoFWJq9UVcfznkrEN prefix=sync topic=\"/eth2/beacon_chain/req/status/1/ssz_snappy\"\r\nMay 06 14:46:14 ubuntu bash[47262]: time=\"2020-05-06 14:46:14\" level=info msg=\"Synced new block\" block=0xc4fe44ee... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134031\r\nMay 06 14:46:14 ubuntu bash[47262]: time=\"2020-05-06 14:46:14\" level=info msg=\"Finished applying state transition\" attestations=15 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\nMay 06 14:46:38 ubuntu bash[47262]: time=\"2020-05-06 14:46:38\" level=info msg=\"Synced new block\" block=0xf769b9fc... epoch=4188 finalizedEpoch=4186 finalizedRoot=0x0cdd0b57... prefix=blockchain slot=134033\r\nMay 06 14:46:38 ubuntu bash[47262]: time=\"2020-05-06 14:46:38\" level=info msg=\"Finished applying state transition\" attestations=16 attesterSlashings=0 deposits=0 prefix=blockchain proposerSlashings=0 voluntaryExits=0\r\n</code>\r\n</pre>",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/625311664",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5771#issuecomment-625311664",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771",
    "id": 625311664,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTMxMTY2NA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T15:05:22Z",
    "updated_at": "2020-05-07T15:05:22Z",
    "author_association": "MEMBER",
    "body": "@mshean to confirm this is not during initial syncing right?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/625311664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/625426409",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5771#issuecomment-625426409",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771",
    "id": 625426409,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTQyNjQwOQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T18:35:24Z",
    "updated_at": "2020-05-07T18:35:24Z",
    "author_association": "MEMBER",
    "body": "@terencechain From user reports in the discord, this is after initial sync. Usually in the time range of 12 to 24 hours before it reaches a critical threshold. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/625426409/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/625463060",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5771#issuecomment-625463060",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771",
    "id": 625463060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTQ2MzA2MA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T19:52:56Z",
    "updated_at": "2020-05-07T19:52:56Z",
    "author_association": "MEMBER",
    "body": "@prestonvanloon Got it. One thing I thought of, alpha.6 does not have the following fix:\r\nhttps://github.com/prysmaticlabs/prysm/pull/5737\r\n\r\nThis was the main memory problem for me post initial sync, it reduces one state copy for every incoming `beacon_aggregated_and_proof` object\r\n\r\nLet's release alpha.7 soon",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/625463060/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626922671",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5771#issuecomment-626922671",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5771",
    "id": 626922671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjkyMjY3MQ==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-11T19:53:33Z",
    "updated_at": "2020-05-11T19:53:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Resolved by #5737 unless it pops up again",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/626922671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/8874",
  "id": 880830203,
  "node_id": "MDU6SXNzdWU4ODA4MzAyMDM=",
  "number": 8874,
  "title": "Multiple Beacon endpoints for validator nodes",
  "user": {
    "login": "barnabasbusa",
    "id": 21987084,
    "node_id": "MDQ6VXNlcjIxOTg3MDg0",
    "avatar_url": "https://avatars.githubusercontent.com/u/21987084?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barnabasbusa",
    "html_url": "https://github.com/barnabasbusa",
    "followers_url": "https://api.github.com/users/barnabasbusa/followers",
    "following_url": "https://api.github.com/users/barnabasbusa/following{/other_user}",
    "gists_url": "https://api.github.com/users/barnabasbusa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barnabasbusa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barnabasbusa/subscriptions",
    "organizations_url": "https://api.github.com/users/barnabasbusa/orgs",
    "repos_url": "https://api.github.com/users/barnabasbusa/repos",
    "events_url": "https://api.github.com/users/barnabasbusa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barnabasbusa/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129906,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDY=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Enhancement",
      "name": "Enhancement",
      "color": "84b6eb",
      "default": false,
      "description": "New feature or request"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2021-05-08T13:33:40Z",
  "updated_at": "2022-05-27T23:50:58Z",
  "closed_at": "2022-05-27T23:50:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# ðŸš€ Feature Request\r\n\r\n### Description\r\n\r\nThe validator currently only accepts a single URL for ETH2 (beacon) endpoint. In order to be able to provide an even lighter setup for validator operators and to enable further redundancy of the network multiple endpoint support for beacon nodes should be implemented. Similarly to how the ETH1 fallback works, a beacon fallback could be implemented. \r\n\r\n### Describe the solution you'd like\r\n\r\nModify the validator code to accept multiple endpoints, and if the first URL fails, fallback to the second one. Maintain a polling call to all endpoints for health checks. If they are healthy then recover to the first URL.\r\n\r\n### Describe alternatives you've considered\r\nThere are no existing alternatives that I have considered so far. ",
  "closed_by": {
    "login": "rkapka",
    "id": 28876818,
    "node_id": "MDQ6VXNlcjI4ODc2ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkapka",
    "html_url": "https://github.com/rkapka",
    "followers_url": "https://api.github.com/users/rkapka/followers",
    "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
    "organizations_url": "https://api.github.com/users/rkapka/orgs",
    "repos_url": "https://api.github.com/users/rkapka/repos",
    "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkapka/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/835374128",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8874#issuecomment-835374128",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874",
    "id": 835374128,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNTM3NDEyOA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-08T13:56:50Z",
    "updated_at": "2021-05-08T13:56:50Z",
    "author_association": "MEMBER",
    "body": "Currently, Prysm does support multiple beacon node backends natively with gRPC load balancing. Add 2 or more beacon node connection strings to the `beacon-rpc-provider` flag with a comma separating. Example: `--beacon-rpc-provider=127.0.0.1:4000,123.45.67.89:4000`. This is \"client side load balancing\" as described [here](https://grpc.io/blog/grpc-load-balancing/).\r\n\r\nWould that satisfy your feature request? \r\n\r\nThis functionality is not well documented within Prysm. If you find that answer acceptable, we can resolve this feature request with the proper documentation. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/835374128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/835375878",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8874#issuecomment-835375878",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874",
    "id": 835375878,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNTM3NTg3OA==",
    "user": {
      "login": "barnabasbusa",
      "id": 21987084,
      "node_id": "MDQ6VXNlcjIxOTg3MDg0",
      "avatar_url": "https://avatars.githubusercontent.com/u/21987084?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/barnabasbusa",
      "html_url": "https://github.com/barnabasbusa",
      "followers_url": "https://api.github.com/users/barnabasbusa/followers",
      "following_url": "https://api.github.com/users/barnabasbusa/following{/other_user}",
      "gists_url": "https://api.github.com/users/barnabasbusa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/barnabasbusa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/barnabasbusa/subscriptions",
      "organizations_url": "https://api.github.com/users/barnabasbusa/orgs",
      "repos_url": "https://api.github.com/users/barnabasbusa/repos",
      "events_url": "https://api.github.com/users/barnabasbusa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/barnabasbusa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-08T14:02:00Z",
    "updated_at": "2021-05-08T14:09:53Z",
    "author_association": "NONE",
    "body": "Infura now supports eth2 endpoints too. Would it work with their https/wss endpoints too? I was not aware that this is natively supported. Indeed the lack of documentation might be the cause of it. \r\nLooking at the logs when I try to connect to my infura endpoint on prater it just keeps refusing the connection. Unsure if its a Prysm or an infura implementation issue. \r\n`May 08 16:04:16 test-validator prysm.sh[5042]: time=\"2021-05-08 16:04:16\" level=warning msg=\"Could not determine if beacon chain started: could not setup beacon chain ChainStart streaming client: rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing dial tcp: address https://ProjectID:ProjectSecret@eth2-beacon-prater.infura.io: too many colons in address\": could not connect\" prefix=validator`\r\n\r\nAlso the logs show the endpoint exposed of secrets. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/835375878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/849901218",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8874#issuecomment-849901218",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874",
    "id": 849901218,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0OTkwMTIxOA==",
    "user": {
      "login": "0xKiwi",
      "id": 6251510,
      "node_id": "MDQ6VXNlcjYyNTE1MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6251510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKiwi",
      "html_url": "https://github.com/0xKiwi",
      "followers_url": "https://api.github.com/users/0xKiwi/followers",
      "following_url": "https://api.github.com/users/0xKiwi/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKiwi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKiwi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKiwi/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKiwi/orgs",
      "repos_url": "https://api.github.com/users/0xKiwi/repos",
      "events_url": "https://api.github.com/users/0xKiwi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKiwi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-27T19:57:07Z",
    "updated_at": "2021-05-27T19:57:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Bumping for @prestonvanloon to notice the reported error. Is this something to fix on our end?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/849901218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/858796594",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8874#issuecomment-858796594",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874",
    "id": 858796594,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1ODc5NjU5NA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-10T17:06:53Z",
    "updated_at": "2021-06-10T17:06:53Z",
    "author_association": "MEMBER",
    "body": "We don't support the standard eth2 API so you can't use infura as a grpc beacon node address at this time. \r\nFollow #7510 for progress on standard eth2 APIs support.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/858796594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1128518888",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8874#issuecomment-1128518888",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8874",
    "id": 1128518888,
    "node_id": "IC_kwDOBvuov85DQ9To",
    "user": {
      "login": "potuz",
      "id": 16044918,
      "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/potuz",
      "html_url": "https://github.com/potuz",
      "followers_url": "https://api.github.com/users/potuz/followers",
      "following_url": "https://api.github.com/users/potuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
      "organizations_url": "https://api.github.com/users/potuz/orgs",
      "repos_url": "https://api.github.com/users/potuz/repos",
      "events_url": "https://api.github.com/users/potuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/potuz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-05-17T07:33:48Z",
    "updated_at": "2022-05-17T07:33:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Can we close this issue as the requested feature is already implemented? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1128518888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6544",
  "id": 654886101,
  "node_id": "MDU6SXNzdWU2NTQ4ODYxMDE=",
  "number": 6544,
  "title": "Validator client may have wrong genesis time or bad roughtime offset",
  "user": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2020-07-10T16:10:36Z",
  "updated_at": "2020-07-13T23:52:58Z",
  "closed_at": "2020-07-13T23:52:58Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "# üêû Bug Report \r\n\r\n### Description\r\n\r\nIn the Onyx testnet, we occasionally see objects produced from \"the future\" indicating that the client may have the wrong genesis time. There are some scenarios where only the validator has the incorrect genesis time and their beacon node starts rejecting all of their requests. \r\n\r\n### Has this worked before in a previous version?\r\n\r\nNot sure when this issue started.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nNot sure about reproduction steps.\r\n\r\n## üî• Error\r\n\r\n```\r\n[2020-07-10 14:54:15] ERROR validator: Could not request attestation to sign at slot error=rpc error: code = InvalidArgument desc = invalid request: attestation slot 191284 not within attestation propagation range of 190052 to 190084 (current slot) pubKey=0xb4a6f246e7a2 slot=191284\r\n```\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\nN/A seems to affect all.\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\nAlpha.14\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\n",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656758979",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6544#issuecomment-656758979",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544",
    "id": 656758979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njc1ODk3OQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-10T16:13:58Z",
    "updated_at": "2020-07-10T16:14:17Z",
    "author_association": "MEMBER",
    "body": "User reported this happening in commit 8da02467024b89b5e86026027281d9dc51ebc0f9. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656758979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656761522",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6544#issuecomment-656761522",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544",
    "id": 656761522,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njc2MTUyMg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-10T16:19:06Z",
    "updated_at": "2020-07-10T16:19:06Z",
    "author_association": "MEMBER",
    "body": "Note: this could/should be resolved with hard coded genesis times. Filed #6545 for that feature request.\r\nThat would be recommended for mainnet release.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656761522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656947621",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6544#issuecomment-656947621",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544",
    "id": 656947621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njk0NzYyMQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-11T00:19:58Z",
    "updated_at": "2020-07-11T00:19:58Z",
    "author_association": "MEMBER",
    "body": "A user reported this issue, but that the issue resolved itself after 1 hour. \r\n1 hour is the roughtime update interval. \r\n\r\nhttps://discordapp.com/channels/476244492043812875/476588476393848832/731303268134813716",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656947621/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656956574",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6544#issuecomment-656956574",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544",
    "id": 656956574,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Njk1NjU3NA==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-11T01:11:08Z",
    "updated_at": "2020-07-11T01:11:08Z",
    "author_association": "MEMBER",
    "body": "Just to give more clarity on this users have reported seeing this error in the beacon node `WARN powchain: eth1 client is not syncing`  at the same time as their validator has difficulties creating attestations. \r\n\r\nhttps://github.com/prysmaticlabs/prysm/blob/master/beacon-chain/powchain/service.go#L574\r\n```go\r\n    // use a 5 minutes timeout for block time, because the max mining time is 278 sec (block 7208027)\r\n    // (analyzed the time of the block from 2018-09-01 to 2019-02-13)\r\n    fiveMinutesTimeout := roughtime.Now().Add(-5 * time.Minute)\r\n    // check that web3 client is syncing\r\n    if time.Unix(int64(s.latestEth1Data.BlockTime), 0).Before(fiveMinutesTimeout) {\r\n        log.Warn(\"eth1 client is not syncing\")\r\n    }\r\n```\r\n\r\nThis would point there being an issue with roughtime, also roughtime recalibration happens every hour, there is the chance that we did receive an incorrect offset at that recalibration and it messed up our beacon node's clock. At which point attestations start failing due to the incorrect offset.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/656956574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/657887232",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6544#issuecomment-657887232",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6544",
    "id": 657887232,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1Nzg4NzIzMg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-13T23:52:58Z",
    "updated_at": "2020-07-13T23:52:58Z",
    "author_association": "MEMBER",
    "body": "I think we have mitigated this issue and the relevant PRs have been released in alpha.15. \r\n\r\nClosing this until we see evidence of this issue again.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/657887232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/11405",
  "id": 1362264001,
  "node_id": "I_kwDOBvuov85RMn_B",
  "number": 11405,
  "title": "ERROR main: could not process block: could not process block header: parent root  does not match the latest block header signing root in state",
  "user": {
    "login": "miguelmota",
    "id": 168240,
    "node_id": "MDQ6VXNlcjE2ODI0MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/168240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/miguelmota",
    "html_url": "https://github.com/miguelmota",
    "followers_url": "https://api.github.com/users/miguelmota/followers",
    "following_url": "https://api.github.com/users/miguelmota/following{/other_user}",
    "gists_url": "https://api.github.com/users/miguelmota/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/miguelmota/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/miguelmota/subscriptions",
    "organizations_url": "https://api.github.com/users/miguelmota/orgs",
    "repos_url": "https://api.github.com/users/miguelmota/repos",
    "events_url": "https://api.github.com/users/miguelmota/events{/privacy}",
    "received_events_url": "https://api.github.com/users/miguelmota/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-09-05T16:30:41Z",
  "updated_at": "2022-09-07T01:04:11Z",
  "closed_at": "2022-09-07T01:04:11Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nCan't finish syncing because of error `ERROR main: could not process block: could not process block header: parent root 0x7e535f17c96b293b70cf215adaa950dc5dfae51a10480186b2c2e52648386ddf does not match the latest block header signing root in state 0x8f531f5266ce77444d6c9af9eb9ae65740527b8408df1c6b90f823f5522559f9`\r\n\r\n### Has this worked before in a previous version?\r\n\r\nYes version from a few months ago\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n```sh\r\ndocker run \\\r\n\t--name beacon \\\r\n\t-it \\\r\n\t-d \\\r\n\t--restart=unless-stopped \\\r\n\t--network=\"host\" \\\r\n\t--log-driver local \\\r\n\t--log-opt max-size=2gb \\\r\n\t-p 4000:4000 \\\r\n\t-p 13000:13000 \\\r\n\t-p 12000:12000/udp \\\r\n\t-p 3500:3500 \\\r\n\t-v $HOME/.eth2_beacon_chain_data:/data \\\r\n\tgcr.io/prysmaticlabs/prysm/beacon-chain:stable \\\r\n\t--datadir=/data \\\r\n\t--rpc-host=0.0.0.0 \\\r\n\t--grpc-gateway-host=0.0.0.0 \\\r\n\t--monitoring-host=0.0.0.0 \\\r\n\t--enable-debug-rpc-endpoints \\\r\n\t--grpc-max-msg-size=65568081 \\\r\n\t--accept-terms-of-use \\\r\n\t--http-web3provider=\"$ETH1_PROVIDER\"\r\n```\r\n\r\n## üî• Error\r\n\r\n```sh\r\n[2022-09-05 16:27:42]  WARN flags: Running on Ethereum Mainnet\r\n[2022-09-05 16:27:42]  INFO node: Checking DB database-path=/data/beaconchaindata\r\n[2022-09-05 16:27:42]  INFO db: Opening Bolt DB at /data/beaconchaindata/beaconchain.db\r\n[2022-09-05 16:27:42]  INFO node: Deposit contract: 0x00000000219ab540356cbb839cbe05303d7705fa\r\n[2022-09-05 16:27:42] ERROR main: could not process block: could not process block header: parent root 0x7e535f17c96b293b70cf215adaa950dc5dfae51a10480186b2c2e52648386ddf does not match the latest block header signing root in state 0x8f531f5266ce77444d6c9af9eb9ae65740527b8408df1c6b90f823f5522559f9\r\n```\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n```sh\r\nLinux intelnuc 5.19.6-arch1-1 #1 SMP PREEMPT_DYNAMIC Wed, 31 Aug 2022 22:09:40 +0000 x86_64 GNU/Linux\r\n```\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n```sh\r\nREPOSITORY                                TAG        IMAGE ID       CREATED        SIZE\r\ngcr.io/prysmaticlabs/prysm/beacon-chain   stable     6ea5cb3b5d8a   13 days ago    125MB\r\n```\r\n",
  "closed_by": {
    "login": "miguelmota",
    "id": 168240,
    "node_id": "MDQ6VXNlcjE2ODI0MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/168240?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/miguelmota",
    "html_url": "https://github.com/miguelmota",
    "followers_url": "https://api.github.com/users/miguelmota/followers",
    "following_url": "https://api.github.com/users/miguelmota/following{/other_user}",
    "gists_url": "https://api.github.com/users/miguelmota/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/miguelmota/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/miguelmota/subscriptions",
    "organizations_url": "https://api.github.com/users/miguelmota/orgs",
    "repos_url": "https://api.github.com/users/miguelmota/repos",
    "events_url": "https://api.github.com/users/miguelmota/events{/privacy}",
    "received_events_url": "https://api.github.com/users/miguelmota/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1237354339",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11405#issuecomment-1237354339",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405",
    "id": 1237354339,
    "node_id": "IC_kwDOBvuov85JwIdj",
    "user": {
      "login": "potuz",
      "id": 16044918,
      "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/potuz",
      "html_url": "https://github.com/potuz",
      "followers_url": "https://api.github.com/users/potuz/followers",
      "following_url": "https://api.github.com/users/potuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
      "organizations_url": "https://api.github.com/users/potuz/orgs",
      "repos_url": "https://api.github.com/users/potuz/repos",
      "events_url": "https://api.github.com/users/potuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/potuz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-05T17:59:08Z",
    "updated_at": "2022-09-05T17:59:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "At this stage @miguelmota it is starting to look like you have some hardware problems, most likely memory. Specially given #11400, could we ask you to upload your database giving rise to any of these issues (if you can reproduce them consistently) so that we try them locally? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1237354339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1237378471",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11405#issuecomment-1237378471",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405",
    "id": 1237378471,
    "node_id": "IC_kwDOBvuov85JwOWn",
    "user": {
      "login": "potuz",
      "id": 16044918,
      "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/potuz",
      "html_url": "https://github.com/potuz",
      "followers_url": "https://api.github.com/users/potuz/followers",
      "following_url": "https://api.github.com/users/potuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
      "organizations_url": "https://api.github.com/users/potuz/orgs",
      "repos_url": "https://api.github.com/users/potuz/repos",
      "events_url": "https://api.github.com/users/potuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/potuz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-05T18:31:03Z",
    "updated_at": "2022-09-05T18:31:03Z",
    "author_association": "CONTRIBUTOR",
    "body": " I believe this is a corrupt memory\r\n ```[2022-09-05 16:27:42] ERROR main: could not process block: could not process block header: parent root 0x7e535f17c96b293b70cf215adaa950dc5dfae51a10480186b2c2e52648386ddf does not match the latest block header signing root in state 0x8f531f5266ce77444d6c9af9eb9ae65740527b8408df1c6b90f823f5522559f9\r\n```\r\nThe beacon block with that parent root is [this one](https://beaconcha.in/block/0x7e535f17c96b293b70cf215adaa950dc5dfae51a10480186b2c2e52648386ddf). The state root for the child block is `0x9f58880714984090e81ecb5e9f44dd875b585d800e4544b3226fb811d2d71817` instead of the reported one, so either we are processing a wrong block (the next missed/orphaned block is two epochs afterwards), or we are computing the wrong state root, or there's some memory corruption here. We could test this by getting a copy of the database and processing manually the state transition. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1237378471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1238794811",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11405#issuecomment-1238794811",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11405",
    "id": 1238794811,
    "node_id": "IC_kwDOBvuov85J1oI7",
    "user": {
      "login": "miguelmota",
      "id": 168240,
      "node_id": "MDQ6VXNlcjE2ODI0MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/168240?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/miguelmota",
      "html_url": "https://github.com/miguelmota",
      "followers_url": "https://api.github.com/users/miguelmota/followers",
      "following_url": "https://api.github.com/users/miguelmota/following{/other_user}",
      "gists_url": "https://api.github.com/users/miguelmota/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/miguelmota/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/miguelmota/subscriptions",
      "organizations_url": "https://api.github.com/users/miguelmota/orgs",
      "repos_url": "https://api.github.com/users/miguelmota/repos",
      "events_url": "https://api.github.com/users/miguelmota/events{/privacy}",
      "received_events_url": "https://api.github.com/users/miguelmota/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-07T01:04:11Z",
    "updated_at": "2022-09-07T01:04:11Z",
    "author_association": "NONE",
    "body": "@potuz thanks for the response and suggestions. I replaced the memory modules and initiated a resync. I'll report back if there's any corrupt data errors but the bad memory seems like the root cause.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1238794811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

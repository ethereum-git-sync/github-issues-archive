{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156",
  "id": 1119015652,
  "node_id": "I_kwDOBvuov85CstLk",
  "number": 10156,
  "title": "Beacon node throws \"could not find block in DB\" error almost every epoch.",
  "user": {
    "login": "e6a6",
    "id": 67164915,
    "node_id": "MDQ6VXNlcjY3MTY0OTE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/e6a6",
    "html_url": "https://github.com/e6a6",
    "followers_url": "https://api.github.com/users/e6a6/followers",
    "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
    "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
    "organizations_url": "https://api.github.com/users/e6a6/orgs",
    "repos_url": "https://api.github.com/users/e6a6/repos",
    "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
    "received_events_url": "https://api.github.com/users/e6a6/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 14,
  "created_at": "2022-01-31T06:09:28Z",
  "updated_at": "2022-04-12T11:50:29Z",
  "closed_at": "2022-04-12T11:50:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\nI recently missed a block proposal 4 times in a row. Avg. Effectiveness is close to 100%, and attestation has no problems. Only the block proposal was missed. There were no issues until Nov 2021. However, from Dec 2021, only block proposals started to be missed.\r\n\r\nAt first I thought I was simply out of luck or just had temporary network issue. Because I haven't changed any settings from the beginning of 2021 until now, except for updates of geth and prysm. However, when Jan 2022, another block proposal was missed. At this point, I decided that something was wrong. I checked the log to determine the cause. And, I saw that a huge amount of the same error in the beacon node. The same error is repeated 10 or more times simultaneously per epoch, and this error occurs almost every epoch.\r\n\r\n<pre><code>\r\nlevel=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch xxxxx: could not get state summary: could not find block in DB\" prefix=sync\r\n<i>(where xxxxx is the latest epoch number.)</i>\r\n</code></pre>\r\n\r\nI think that this error was the root cause of the block proposal miss, and I tried the following to solve this error.\r\n\r\n - Restart the virtual machine\r\n - Restart the host machine\r\n - Remove prysm DB, and sync again from scratch\r\n - Use infura instead of local geth for ETH 1 chain connection\r\n - Test RAM errors with MemTest86\r\n - SSD S.M.A.R.T. Information check\r\n - Using an old version prysm (v2.0.4, v2.0.3)\r\n\r\nBut I kept getting the same error, and I guessed it was an unknown hardware problem. So I bought new hardware and set up again the node from scratch. It used more powerful hardware than before. CPU is Intel i7-1165G7, RAM is 64GB, SSD is NVMe 4TB. For personal reasons, I virtualized Ubuntu 20.04 using Windows 10 Pro and Hyper-V. \r\n\r\nI waited for the chain to completely sync by running only the beacon node. I checked the logs for several hours after the sync was complete. The \"Could not retrieve pre state\" error no longer occurred. However, not long after running the validator I met the same error again in the beacon.\r\n\r\n<pre><code>\r\nJan 31 00:31:38 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:31:38\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95658: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:31:38 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:31:38\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95658: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:31:38 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:31:38\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95658: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:38:03 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:38:03\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95659: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:38:03 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:38:03\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95659: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:38:03 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:38:03\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95659: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:38:03 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:38:03\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95659: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 00:50:48 ETH-Virtual-Machine prysm.sh[15984]: time=\"2022-01-31 00:50:48\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95661: could not get state summary: could not find block in DB\" prefix=sync\r\n</pre></code>\r\n\r\nI am still getting the same error. Attestation is fine, but expect to miss out on block proposals again someday. Can you tell me how to solve this error?\r\n\r\n### Has this worked before in a previous version?\r\n\r\n<!-- Did this behavior use to work in the previous version? -->\r\nI tested by downgrading to v2.0.4 and v2.0.3 but got the same error. Prior to November 2021, there were no issues with any version. \r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nI used systemd service to execute prysm (beacon, validator). An error occurs when the beacon is synced and the validator starts running. The following is the content of the systemd service file I used.\r\n\r\n<pre><code>\r\n[Unit]\r\nDescription=Beacon\r\nAfter=geth.target\r\n\r\n[Service]\r\nType=simple\r\nUser=beacon\r\nExecStart=/home/eth2/beacon/bin/prysm.sh beacon-chain \\\r\n     --datadir=/home/eth2/beacon \\\r\n     --http-web3provider=http://10.8.0.2:8545 \\\r\n     --fallback-web3provider=https://mainnet.infura.io/v3/xxxxxxxxxxxxxxxxxx \\\r\n     --p2p-max-peers=70 \\\r\n     --slasher \\\r\n     --accept-terms-of-use\r\n\r\nKillMode=process\r\nKillSignal=SIGINT\r\nTimeoutStopSec=90\r\n\r\nRestart=always\r\nRestartSec=5\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n</pre></code>\r\n\r\n<pre><code>\r\n[Unit]\r\nDescription=Validator\r\nAfter=beacon.target\r\n\r\n[Service]\r\nType=simple\r\nUser=validator\r\nExecStart=/home/eth2/validator/bin/prysm.sh validator \\\r\n  --datadir=/home/eth2/validator  \\\r\n  --wallet-dir=/home/eth2/validator/wallet/prysm-wallet \\\r\n  --wallet-password-file=/home/eth2/validator/wallet/password \\\r\n  --accept-terms-of-use\r\n\r\nRestart=always\r\nRestartSec=5\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n</pre></code>\r\n\r\n\r\n## üî• Error\r\nbeacon node\r\n<pre><code>\r\nJan 23 15:34:00 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:34:00\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 93999: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 23 15:34:00 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:34:00\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 93999: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 23 15:46:01 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:46:01\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 287822 but received 287592\" prefix=\"rpc/validator\"\r\nJan 23 15:53:14 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:53:14\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 94002: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 23 15:53:14 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:53:14\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 94002: could not get state summary: could not find block in DB\" prefix=sync\r\n</code></pre>\r\n\r\nvalidator (the moment missed the block proposal)\r\n<pre><code>\r\nJan 23 15:46:11 ETH-Virtual-Machine prysm.sh[5822]: time=\"2022-01-23 15:46:11\" level=error msg=\"Failed to request block from beacon node\" blockSlot=3008028 error=\"rpc error: code = DeadlineExceeded desc = context deadline exceeded\" prefix=validator pubKey=0xa05197a22ffb\r\n</code></pre>\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nUbuntu 20.04 with Hyper-V virtualization on Windows 10 Pro.\r\nAnd, running geth and prysm (beacon, validator) in the same Ubuntu VM.\r\n(Host machine CPU: Intel i5-10210U, RAM 64GB (allocated 40GB to VM), SSD: 4TB (allocated all to VM))\r\n\r\nA few days ago I replaced the hardware.\r\n\r\nUbuntu 20.04 with Hyper-V virtualization on Windows 10 Pro.\r\nI separated the VMs for geth and prysm.\r\n(Host machine CPU: Intel i7-1165G7, RAM 64GB (allocated 20GB to geth, 16GB to prysm), SSD: NVMe 4TB (allocated 1.5TB to prysm))\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nv2.0.5\r\nI tried to change to version 2.0.4 and 2.0.3, but the same error occurred. \r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\n",
  "closed_by": {
    "login": "nisdas",
    "id": 33201827,
    "node_id": "MDQ6VXNlcjMzMjAxODI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nisdas",
    "html_url": "https://github.com/nisdas",
    "followers_url": "https://api.github.com/users/nisdas/followers",
    "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
    "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
    "organizations_url": "https://api.github.com/users/nisdas/orgs",
    "repos_url": "https://api.github.com/users/nisdas/repos",
    "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nisdas/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1025550523",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1025550523",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1025550523,
    "node_id": "IC_kwDOBvuov849IKi7",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-31T09:46:16Z",
    "updated_at": "2022-01-31T09:46:16Z",
    "author_association": "MEMBER",
    "body": "Hey @e6a6 , \r\n\r\nThank you for the report. This is an interesting error as you still get the same error despite a resync. \r\nThis log maybe interesting to us and related to #10120 :\r\n```\r\nJan 23 15:46:01 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:46:01\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 287822 but received 287592\" prefix=\"rpc/validator\"\r\n```\r\ncc @rkapka \r\n\r\nHowever, the other errors you have are pretty unusual and the consistency of them might indicate some sort of hardware issue. You mentioned you got new hardware to what you had earlier, which parts of your machine did you exactly change and which other parts have you kept the same ?\r\n\r\nFor now, you can restart your node and it should fix the `Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 287822 but received 287592` . Let us know if you still have any missed proposals after that. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1025550523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1025969267",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1025969267",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1025969267,
    "node_id": "IC_kwDOBvuov849Jwxz",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-01-31T16:31:10Z",
    "updated_at": "2022-01-31T17:33:56Z",
    "author_association": "NONE",
    "body": "Thanks for the response. First post was not clear, so I describe my hardware and the flow along the time series in more detail.\r\n\r\n<pre><code>\r\n<b>[Machine A]</b>\r\n16 Jan 2021 ~ 31 Jan 2022\r\nModel: Intel NUC10i5FNH (CPU: i5-10210U, RAM: 64GB, SSD: Samsung 860 EVO 4TB)\r\nUbuntu 20.04 with Hyper-V virtualization on Windows 10 Pro.\r\nAnd, running geth and prysm (beacon, validator) in the same Ubuntu VM.\r\n</pre></code>\r\n\r\nI started staking in January 2021 using Machine A, and did not experience any issues through November. (include Nov) However, from December 2021, only block proposals started to be missed. There were no changes to the hardware and surroundings. Software changes were only updates of geth and prysm.\r\n\r\nFrom Dec 22, 2021 to Jan 23, 2022, there were a total of 4 block proposals and all were missed. The following is the error message of validator and beacon when block proposal is missed 4 times. The \"could not find block in DB\" error occurred almost every epoch regardless of the block proposal. Because only logs have been preserved since Dec 16 2021, it is not known exactly when \"could not find block in DB\" error first occurred. There are too many identical \"could not find block in DB\" errors in beacon, I've only imported some.\r\n\r\n<pre><code>\r\n<b>[Validator]</b>\r\n(2021) Dec 22 07:11:11 ETH-Virtual-Machine prysm.sh[15852]: time=\"2021-12-22 07:11:11\" level=error msg=\"Failed to request block from beacon node\" blockSlot=2775053 error=\"rpc error: code = DeadlineExceeded desc = context deadline exceeded\" prefix=validator pubKey=0xb729e6a3fdaf\r\n\r\n<b>[Beacon]</b>\r\nDec 22 07:08:25 ETH-Virtual-Machine prysm.sh[15817]: time=\"2021-12-22 07:08:25\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 86720: could not get state summary: could not find block in DB\" prefix=sync\r\nDec 22 07:11:02 ETH-Virtual-Machine prysm.sh[15817]: time=\"2021-12-22 07:11:02\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 275318 but received 275089\" prefix=\"rpc/validator\"\r\nDec 22 07:21:14 ETH-Virtual-Machine prysm.sh[15817]: time=\"2021-12-22 07:21:14\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 86722: could not get state summary: could not find block in DB\" prefix=sync\r\n</pre></code>\r\n\r\n<pre><code>\r\n<b>[Validator]</b>\r\n(2021) Dec 27 20:56:35 ETH-Virtual-Machine prysm.sh[1045]: time=\"2021-12-27 20:56:35\" level=error msg=\"Failed to request block from beacon node\" blockSlot=2815180 error=\"rpc error: code = DeadlineExceeded desc = context deadline exceeded\" prefix=validator pubKey=0x85bf10fde124\r\n\r\n<b>[Beacon]</b>\r\nDec 27 20:54:01 ETH-Virtual-Machine prysm.sh[1044]: time=\"2021-12-27 20:54:01\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 87974: could not get state summary: could not find block in DB\" prefix=sync\r\nDec 27 20:56:27 ETH-Virtual-Machine prysm.sh[1044]: time=\"2021-12-27 20:56:27\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 276988 but received 276951\" prefix=\"rpc/validator\"\r\nDec 27 21:06:49 ETH-Virtual-Machine prysm.sh[1044]: time=\"2021-12-27 21:06:49\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 87976: could not get state summary: could not find block in DB\" prefix=sync\r\n</pre></code>\r\n\r\n<pre><code>\r\n<b>[Validator]</b>\r\n(2022) Jan 12 14:25:35 ETH-Virtual-Machine prysm.sh[1052]: time=\"2022-01-12 14:25:35\" level=error msg=\"Failed to request block from beacon node\" blockSlot=2928425 error=\"rpc error: code = DeadlineExceeded desc = context deadline exceeded\" prefix=validator pubKey=0x85bf10fde124\r\n\r\n<b>[Beacon]</b>\r\nJan 12 14:23:36 ETH-Virtual-Machine prysm.sh[1051]: time=\"2022-01-12 14:23:36\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 91513: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 12 14:25:26 ETH-Virtual-Machine prysm.sh[1051]: time=\"2022-01-12 14:25:26\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 283691 but received 283392\" prefix=\"rpc/validator\"\r\nJan 12 14:30:01 ETH-Virtual-Machine prysm.sh[1051]: time=\"2022-01-12 14:30:01\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 91514: could not get state summary: could not find block in DB\" prefix=sync\r\n</pre></code>\r\n\r\nAt this time (about 17~21 Jan), I figured something was wrong and took action (mentioned in the first post) including resynchronizing the beacons of Machine A. But the problem is not solved and after a few days I missed block proposal and the same error occured again.\r\n\r\n<pre><code>\r\n<b>[Validator]</b>\r\n(2022) Jan 23 15:46:11 ETH-Virtual-Machine prysm.sh[5822]: time=\"2022-01-23 15:46:11\" level=error msg=\"Failed to request block from beacon node\" blockSlot=3008028 error=\"rpc error: code = DeadlineExceeded desc = context deadline exceeded\" prefix=validator pubKey=0xa05197a22ffb\r\n\r\n<b>[Beacon]</b>\r\nJan 23 15:34:00 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:34:00\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 93999: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 23 15:46:01 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:46:01\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 287822 but received 287592\" prefix=\"rpc/validator\"\r\nJan 23 15:53:14 ETH-Virtual-Machine prysm.sh[5791]: time=\"2022-01-23 15:53:14\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 94002: could not get state summary: could not find block in DB\" prefix=sync\r\n</pre></code>\r\n\r\nI decided that there must be an unknown hardware problem as well as software because I got the same error consistently. I built a whole new machine B to remove this uncertainty. I bought a separate NUC and also bought new parts. None of them were recycled from the old Machine A. The software was also newly downloaded and installed from the official website.\r\n\r\n<pre><code>\r\n<b>[Machine B]</b>\r\n31 Jan 2022 ~\r\nModel: Intel NUC11PAHi7 (CPU: i7-1165G7, RAM: 64GB, SSD: Seagate FireCuda 530 4TB)\r\nUbuntu 20.04 with Hyper-V virtualization on Windows 10 Pro.\r\nI separated the VMs for geth and prysm.\r\n</pre></code>\r\n\r\nOn January 31st, Machine B was all set up, including syncing the beacons. I took the old Machine A completely offline and removed it from power. Then, after connecting Machine B and importing the key, the validator was operated. However, the same error occurred again.\r\n\r\n<pre><code>\r\nJan 31 16:12:26 ETH2-VM prysm.sh[5697]: time=\"2022-01-31 16:12:26\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95805: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 16:12:26 ETH2-VM prysm.sh[5697]: time=\"2022-01-31 16:12:26\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95805: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 16:12:26 ETH2-VM prysm.sh[5697]: time=\"2022-01-31 16:12:26\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95805: could not get state summary: could not find block in DB\" prefix=sync\r\nJan 31 16:12:26 ETH2-VM prysm.sh[5697]: time=\"2022-01-31 16:12:26\" level=error msg=\"Could not retrieve pre state\" error=\"could not get pre state for epoch 95805: could not get state summary: could not find block in DB\" prefix=sync\r\n</pre></code>\r\n\r\nAs mentioned earlier, **this error occurs almost every epoch**. Of course, it still happens. Huge amounts of the same errors are piling up in the log every day.  Normally, no other error occurs other than this. However, looking at past cases, the warning \"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count\" seems to occur only when a block proposal is ahead. Are there actions non-experts can take to resolve the error? Or maybe there is a compatibility issue between Hyper-V and prysm?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1025969267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1026937204",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1026937204",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1026937204,
    "node_id": "IC_kwDOBvuov849NdF0",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T15:02:14Z",
    "updated_at": "2022-02-01T15:02:39Z",
    "author_association": "MEMBER",
    "body": "Thanks for the detailed information on this. Given that this is showing up on 2 different sets of hardware builds it is unlikely hardware is the issue. I am not aware of any incompatibility with Hyper-V and prysm but cannot rule that out at this stage. Given that you are running windows 10, do you know if your node runs without issues on windows ? You can try copying over the db to your windows partition(although a manual copy requires the node to be stopped) Also are you aware of any big changes to windows in november/december ? Or any related update in that time period. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1026937204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027227252",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027227252",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027227252,
    "node_id": "IC_kwDOBvuov849Oj50",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T19:52:57Z",
    "updated_at": "2022-02-01T19:52:57Z",
    "author_association": "MEMBER",
    "body": "Any chance you could upload the beaconchain.db? We could inspect to see if there is some corrupt data there.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027227252/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027252826",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027252826",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027252826,
    "node_id": "IC_kwDOBvuov849OqJa",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T20:22:58Z",
    "updated_at": "2022-02-01T20:22:58Z",
    "author_association": "NONE",
    "body": "I use StopUpdates10 to completely block automatic updates of Windows 10. I do updates by manually disabling StopUpdates10 aperiodically. My memory isn't clear, but I didn't do any windows updates in Nov~Dec 2021, and even now (Machine A). However, because Machine B was built at the end of January 2022, the latest windows updates are applied.\r\n\r\nJust tested with windows-amd64 binary of prysm 2.0.6 in native windows 10 environment as per your advice. In Machine A, the windows environment of that time was still preserved. So, I decided that it was suitable for testing. Of course the Hyper-V VM was already deleted a few days ago in the machine A. (to prevent slashing) \r\n\r\nI copied the entire beacon datadir from Machine B's virtual machine to Machine A's windows 10. And, created a batch file as follows and excute the beacon. It synced with no problems. After turn off Machine B, I imported the wallet to Machine A and excute the validator.\r\n\r\n<pre><code>\r\nbeacon206 --datadir=d:\\beacon --http-web3provider=https://mainnet.infura.io/v3/xxxxxxxxxxx --slasher --p2p-max-peers=70 --log-file d:\\beacon.log --accept-terms-of-use\r\n\r\nvalidator206 --datadir=d:\\validator --wallet-dir=d:\\validator\\wallet\\prysm-wallet --log-file d:\\validator.log --accept-terms-of-use\r\n</pre></code>\r\n\r\nAttestations were fine, but after a while I get the same \"could not find block in DB\" error. Here is the beacon's error log. The detailed message is different from Ubuntu, but it looks like the same error. Likewise, this error occurs almost every epoch, and I only brought one because the same error occurs too many times.\r\n\r\n<pre><code>\r\n[2022-02-02 04:02:49] ERROR sync: Could not retrieve pre state error=could not find block in DB\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).RecoverStateSummary\r\n\tbeacon-chain/state/stategen/getter.go:152\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).stateSummary\r\n\tbeacon-chain/state/stategen/getter.go:134\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).loadStateByRoot\r\n\tbeacon-chain/state/stategen/getter.go:180\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).StateByRoot\r\n\tbeacon-chain/state/stategen/getter.go:58\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).getAttPreState\r\n\tbeacon-chain/blockchain/process_attestation_helpers.go:36\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).AttestationTargetState\r\n\tbeacon-chain/blockchain/receive_attestation.go:61\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).validateCommitteeIndexBeaconAttestation.func1\r\n\tbeacon-chain/sync/validate_beacon_attestation.go:95\r\nruntime.goexit\r\n\tsrc/runtime/asm_amd64.s:1371\r\ncould not get state summary\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).loadStateByRoot\r\n\tbeacon-chain/state/stategen/getter.go:182\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/state/stategen.(*State).StateByRoot\r\n\tbeacon-chain/state/stategen/getter.go:58\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).getAttPreState\r\n\tbeacon-chain/blockchain/process_attestation_helpers.go:36\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).AttestationTargetState\r\n\tbeacon-chain/blockchain/receive_attestation.go:61\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).validateCommitteeIndexBeaconAttestation.func1\r\n\tbeacon-chain/sync/validate_beacon_attestation.go:95\r\nruntime.goexit\r\n\tsrc/runtime/asm_amd64.s:1371\r\ncould not get pre state for epoch 96141\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).getAttPreState\r\n\tbeacon-chain/blockchain/process_attestation_helpers.go:38\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).AttestationTargetState\r\n\tbeacon-chain/blockchain/receive_attestation.go:61\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).validateCommitteeIndexBeaconAttestation.func1\r\n\tbeacon-chain/sync/validate_beacon_attestation.go:95\r\nruntime.goexit\r\n\tsrc/runtime/asm_amd64.s:1371\r\n</pre></code>\r\n\r\nBased on these tests, it doesn't seem to be a compatibility issue between Hyper-V and prysm. This error seems to mean that the previous block information cannot be read from the DB. However, if I request the previous block or a block in the past through the API, I can see the value in the browser without any problem. (e.g. http://127.0.0.1:3500/eth/v2/beacon/blocks/3058411)\r\n\r\nIs there any way I can check if the DB is really corrupted? I've conducted resync 2 times during Jan 2022. (Sync was performed on different machines, respectively.) It doesn't make sense to me that the DB continues to be corrupted though.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027252826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027254985",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027254985",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027254985,
    "node_id": "IC_kwDOBvuov849OqrJ",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T20:25:17Z",
    "updated_at": "2022-02-01T20:25:17Z",
    "author_association": "MEMBER",
    "body": "> Is there any way I can check if the DB is really corrupted?\r\n\r\nNot really. We would likely write some kind of one-off tool to query the database to check whether or not the block actually exists in the database. If it does exist, we can use that database to try to step through the requests to find out why you are receiving the error message about pre-state. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027254985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027260105",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027260105",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027260105,
    "node_id": "IC_kwDOBvuov849Or7J",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T20:31:23Z",
    "updated_at": "2022-02-01T20:32:14Z",
    "author_association": "NONE",
    "body": "> Any chance you could upload the beaconchain.db? We could inspect to see if there is some corrupt data there.\r\n\r\nBecause the size of beaconchain.db is too big (56 GB), it takes time to prepare for upload after compression. Please allow some time. I will post the link after uploading it to my NAS. (maybe 10~12 hours later??)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027260105/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027375161",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027375161",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027375161,
    "node_id": "IC_kwDOBvuov849PIA5",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-01T23:06:50Z",
    "updated_at": "2022-02-01T23:06:50Z",
    "author_association": "MEMBER",
    "body": "Ok i just saw from the flags you used that you were running with the slasher. That seems like it would potentially cause issues, please remove the slasher flag and run your node again. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027375161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027636828",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027636828",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027636828,
    "node_id": "IC_kwDOBvuov849QH5c",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T06:49:10Z",
    "updated_at": "2022-02-02T06:49:10Z",
    "author_association": "NONE",
    "body": "I shut down the beacon and validator running on machine A (native widnows 10). And I ran prysm on Ubuntu VM (Hyper-V) on Machine B again. This time I removed the slasher flag. No more errors while running node for 2 hours. Removing the slasher flag seems to solve the problem. However, it is a temporary expedient and not a fundamental solution. The causal relationship between slasher and \"could not find block in DB\" error is still unclear.\r\n\r\nHere is the link to the beaconchain.db file I uploaded to my NAS. It's around 33 GB, and 56 GB when uncompressed.\r\nhttp://gofile.me/3MwWE/qu0kSICFh\r\n\r\nslasher.db is also thought to be helpful in identifying the cause. My slasher.db file is also ready to upload, may I post a download link here? If I publish slasher.db here could it be a threat to my security (wallet, personal information, etc...)?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027636828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027639183",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027639183",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027639183,
    "node_id": "IC_kwDOBvuov849QIeP",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T06:55:06Z",
    "updated_at": "2022-02-02T06:55:06Z",
    "author_association": "MEMBER",
    "body": "I dont think there is anything personally identifiable in the slasher db, but I will let @rauljordan answer that. \r\n\r\n> Removing the slasher flag seems to solve the problem. However, it is a temporary expedient and not a fundamental solution. \r\n\r\nSo I think the error that you have seen is from the slasher, in this case the correlation is quite strong. There have been earlier reports also of that particular error log being triggered by the slasher. Without the slasher flag, I don't expect that you will see that error anymore. The other issue with the `cached trie being invalid` seems to be related to #10120, all in all I dont think there is anything wrong with your hardware (A or B) . Let us know if you continue facing any other issues for your node in block proposals. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027639183/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027649144",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027649144",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027649144,
    "node_id": "IC_kwDOBvuov849QK54",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T07:15:18Z",
    "updated_at": "2022-02-02T07:15:18Z",
    "author_association": "NONE",
    "body": "Okay. When the block is proposed, i will add comment. According to my node's past experience, the next block proposal is likely to occur within a month. And, I don't know why slasher is giving me this error only for me. Others seem to have no problem using the slasher. Is there anything I can do to help in figuring out the slasher error?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027649144/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027649591",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1027649591",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1027649591,
    "node_id": "IC_kwDOBvuov849QLA3",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-02T07:16:11Z",
    "updated_at": "2022-02-02T07:16:11Z",
    "author_association": "MEMBER",
    "body": "I am unsure on the reason why the slasher gives you the error, @rauljordan any ideas why ? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1027649591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1029794888",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1029794888",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1029794888,
    "node_id": "IC_kwDOBvuov849YWxI",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-04T09:23:33Z",
    "updated_at": "2022-02-04T09:25:07Z",
    "author_association": "NONE",
    "body": "After removing the slasher flag, the node works without any errors for several days. However, it is not clear why a DB error occurs when the slasher is enabled.\r\n\r\nIn the meantime I did another test. I wanted to check if the use of a virtual machine (Hyper-V) really caused problems with slasher and the DB. So I ran prysm 2.0.6 on native windows 10 pro, not a virtual machine. All existing DBs were deleted and sync was performed from the beginning in the native windows environment.\r\n\r\nSync was completed in about two days, and I started the validator with slasher flag enabled. But after a while I met \"could not find block in DB\" error again.\r\n\r\nSo, this error is not caused by the virtual machine. Because it is the same symptom in the native environment. I removed the slasher flag and started the validator again. No error occurs. Same as for Ubuntu VM. It is presumed that an unknown bug is inherent in the slasher.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1029794888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1035862065",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10156#issuecomment-1035862065",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10156",
    "id": 1035862065,
    "node_id": "IC_kwDOBvuov849vgAx",
    "user": {
      "login": "e6a6",
      "id": 67164915,
      "node_id": "MDQ6VXNlcjY3MTY0OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/67164915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/e6a6",
      "html_url": "https://github.com/e6a6",
      "followers_url": "https://api.github.com/users/e6a6/followers",
      "following_url": "https://api.github.com/users/e6a6/following{/other_user}",
      "gists_url": "https://api.github.com/users/e6a6/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/e6a6/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/e6a6/subscriptions",
      "organizations_url": "https://api.github.com/users/e6a6/orgs",
      "repos_url": "https://api.github.com/users/e6a6/repos",
      "events_url": "https://api.github.com/users/e6a6/events{/privacy}",
      "received_events_url": "https://api.github.com/users/e6a6/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-02-11T03:56:12Z",
    "updated_at": "2022-02-11T03:56:12Z",
    "author_association": "NONE",
    "body": "A few hours ago, my node successfully proposed a block. Removing the slasher flag from the beacon helped fix the problem. Just before the block proposal, there was no error in the validator, but the following warning in the beacon.\r\n\r\n<pre><code>\r\nFeb 10 23:28:59 ETH2-VM prysm.sh[904]: time=\"2022-02-10 23:28:59\" level=warning msg=\"Cached deposit trie is invalid, rebuilding it now: wanted the canonical count of 295450 but received 295081\" prefix=\"rpc/validator\"\r\n</pre></code>\r\n\r\nThis warning was the same occurred before the block proposal, even before removing the slasher flag. The solution of this warning is unknown, but I think there is no major problem, probably. However, It is still a big problem that slashers must be disabled to resolve error(could not find block in DB). I tested the lighthouse v2.1.2, another client that supports slasher, to see if this error is client dependent. I used the same hardware, Machine A, to finish syncing and run the validator. In lighthouse, enabling the slasher didn't give me a similar error every epoch.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1035862065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

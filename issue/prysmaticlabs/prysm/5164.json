{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/5164",
  "id": 585686993,
  "node_id": "MDU6SXNzdWU1ODU2ODY5OTM=",
  "number": 5164,
  "title": "Could not receive attestation in chain service ",
  "user": {
    "login": "cleanunicorn",
    "id": 547012,
    "node_id": "MDQ6VXNlcjU0NzAxMg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/547012?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cleanunicorn",
    "html_url": "https://github.com/cleanunicorn",
    "followers_url": "https://api.github.com/users/cleanunicorn/followers",
    "following_url": "https://api.github.com/users/cleanunicorn/following{/other_user}",
    "gists_url": "https://api.github.com/users/cleanunicorn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cleanunicorn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cleanunicorn/subscriptions",
    "organizations_url": "https://api.github.com/users/cleanunicorn/orgs",
    "repos_url": "https://api.github.com/users/cleanunicorn/repos",
    "events_url": "https://api.github.com/users/cleanunicorn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cleanunicorn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1085357069,
      "node_id": "MDU6TGFiZWwxMDg1MzU3MDY5",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Priority:%20High",
      "name": "Priority: High",
      "color": "f7ea26",
      "default": false,
      "description": "High priority item"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-03-22T10:26:52Z",
  "updated_at": "2020-03-24T04:30:29Z",
  "closed_at": "2020-03-24T04:30:29Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Operating system: Arch\r\n```console\r\n$ lsb_release -a\r\nLSB Version:\t1.4\r\nDistributor ID:\tArch\r\nDescription:\tArch Linux\r\nRelease:\trolling\r\nCodename:\tn/a\r\n```\r\n\r\nRunning `beacon-chain` image in docker, latest image.\r\n```console\r\n$ docker image\r\ngcr.io/prysmaticlabs/prysm/beacon-chain   latest              94bac9528587        50 years ago        60.1MB\r\n```\r\n\r\nError message.\r\n\r\n```\r\n[2020-03-22 10:23:00]  WARN blockchain: Could not receive attestation in chain service aggregationCount=1 beaconBlockRoot=0xdaf35eb52bbb committeeIndex=4 error=could not process attestation for future block, 521509 > 521508\r\ncould not verify attestation beacon block\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).onAttestation\r\n\tbeacon-chain/blockchain/process_attestation.go:107\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveAttestationNoPubsub\r\n\tbeacon-chain/blockchain/receive_attestation.go:36\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).processAttestation\r\n\tbeacon-chain/blockchain/receive_attestation.go:113\r\nruntime.goexit\r\n\tGOROOT/src/runtime/asm_amd64.s:1373\r\ncould not process attestation\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveAttestationNoPubsub\r\n\tbeacon-chain/blockchain/receive_attestation.go:38\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).processAttestation\r\n\tbeacon-chain/blockchain/receive_attestation.go:113\r\nruntime.goexit\r\n\tGOROOT/src/runtime/asm_amd64.s:1373 slot=521508 targetRoot=0x6e69e84e7997\r\n[2020-03-22 10:23:00]  INFO blockchain: Finished applying state transition attestations=128 attesterSlashings=0 deposits=0 slot=521514\r\n```\r\n\r\nIt recovered automatically, it kept going after outputting the error.",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/602871860",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5164#issuecomment-602871860",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164",
    "id": 602871860,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjg3MTg2MA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-23T21:41:49Z",
    "updated_at": "2020-03-23T21:41:49Z",
    "author_association": "MEMBER",
    "body": "Looks like you received an attestation 1 second early.\r\n\r\nThere are two possible causes:\r\n1. Your clock is wrong\r\n1. Someone else's clock is wrong.\r\n\r\nThinking about this error and the concern that it brings to the user, maybe we can suppress this warning and simply delay processing for 1 second. We already have a minor tolerance enabled for time based assertions and this might be a rounding error. Looking into this now...",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/602871860/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/602872936",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5164#issuecomment-602872936",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164",
    "id": 602872936,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjg3MjkzNg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-23T21:44:35Z",
    "updated_at": "2020-03-23T21:44:35Z",
    "author_association": "MEMBER",
    "body": "Another quick note, this attestation would _not_ have been re-processed in current master. \r\nThe attestation you saw was dropped from your pool on failure.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/602872936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/602907137",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/5164#issuecomment-602907137",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/5164",
    "id": 602907137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMjkwNzEzNw==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-23T23:12:07Z",
    "updated_at": "2020-03-23T23:12:29Z",
    "author_association": "MEMBER",
    "body": "After some more investigation. This issue is not a clock based problem. \r\nThe error message is printing slots, not time.\r\n\r\nI have a fix in progress that includes\r\n- Improving the error message\r\n- Preventing this issue by selecting the correct prior state for attestation data\r\n\r\nThanks for bringing this issue up, it's actually a bit of a big deal in some cases!",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/602907137/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

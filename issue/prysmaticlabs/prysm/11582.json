{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/11582",
  "id": 1424698127,
  "node_id": "I_kwDOBvuov85U6ysP",
  "number": 11582,
  "title": "Add capability to narrow down to which signature fails ",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129906,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDY=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Enhancement",
      "name": "Enhancement",
      "color": "84b6eb",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 802129907,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDc=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Help%20Wanted",
      "name": "Help Wanted",
      "color": "33aa3f",
      "default": false,
      "description": "Extra attention is needed"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-10-26T21:10:02Z",
  "updated_at": "2022-12-20T10:41:49Z",
  "closed_at": "2022-12-20T10:41:49Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "For performance reasons, we batch-verify all the signatures in the block. The downside of this is if any of the signatures are invalid, the process block will fail and there's no way to which signature was invalid on what object. It may be nice to provide an option to Prysm state transition cmd to identify precisely which signature is invalid. This could also be part of prysmctl util\r\n",
  "closed_by": {
    "login": "nisdas",
    "id": 33201827,
    "node_id": "MDQ6VXNlcjMzMjAxODI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nisdas",
    "html_url": "https://github.com/nisdas",
    "followers_url": "https://api.github.com/users/nisdas/followers",
    "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
    "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
    "organizations_url": "https://api.github.com/users/nisdas/orgs",
    "repos_url": "https://api.github.com/users/nisdas/repos",
    "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nisdas/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1340316756",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11582#issuecomment-1340316756",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11582",
    "id": 1340316756,
    "node_id": "IC_kwDOBvuov85P45xU",
    "user": {
      "login": "dyng",
      "id": 1492050,
      "node_id": "MDQ6VXNlcjE0OTIwNTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1492050?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dyng",
      "html_url": "https://github.com/dyng",
      "followers_url": "https://api.github.com/users/dyng/followers",
      "following_url": "https://api.github.com/users/dyng/following{/other_user}",
      "gists_url": "https://api.github.com/users/dyng/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dyng/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dyng/subscriptions",
      "organizations_url": "https://api.github.com/users/dyng/orgs",
      "repos_url": "https://api.github.com/users/dyng/repos",
      "events_url": "https://api.github.com/users/dyng/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dyng/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-12-07T03:14:51Z",
    "updated_at": "2022-12-07T03:14:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi, I'm willing to fix this issue, please assign it to me.\r\n\r\nAfter exploring the code, I found all signatures are rolled up in `ProcessBlockNoVerifyAnySig` then verified as a batch in `ExecuteStateTransition` and `onBlockBatch`, if the verification fails, error `signature in block failed to verify` is returned.\r\n\r\nI have an idea to approach the problem is that **verify each signature one by one if batch verification failed, and returns an error when anyone is invalid**. But the error message is vague because there is no description attached with the signature. How about we add a new field in `SignatureBatch` to hold a description about signature?\r\n\r\n```go\r\ntype SignatureBatch struct {\r\n\tSignatures [][]byte\r\n\tPublicKeys []PublicKey\r\n\tMessages   [][32]byte\r\n\tDescriptions []string\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1340316756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

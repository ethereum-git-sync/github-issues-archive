{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732",
  "id": 736501606,
  "node_id": "MDU6SXNzdWU3MzY1MDE2MDY=",
  "number": 7732,
  "title": "Fails to load dynamically validator key when using symbolic link",
  "user": {
    "login": "tsudmi",
    "id": 6001614,
    "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tsudmi",
    "html_url": "https://github.com/tsudmi",
    "followers_url": "https://api.github.com/users/tsudmi/followers",
    "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
    "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
    "organizations_url": "https://api.github.com/users/tsudmi/orgs",
    "repos_url": "https://api.github.com/users/tsudmi/repos",
    "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tsudmi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 802129907,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDc=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Help%20Wanted",
      "name": "Help Wanted",
      "color": "33aa3f",
      "default": false,
      "description": "Extra attention is needed"
    },
    {
      "id": 802129908,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDg=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Good%20First%20Issue",
      "name": "Good First Issue",
      "color": "7057ff",
      "default": false,
      "description": "Good for newcomers"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/milestones/3",
    "html_url": "https://github.com/prysmaticlabs/prysm/milestone/3",
    "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/milestones/3/labels",
    "id": 3141844,
    "node_id": "MDk6TWlsZXN0b25lMzE0MTg0NA==",
    "number": 3,
    "title": "Diamond",
    "description": "The Diamond Release: Ethereum Mainnet",
    "creator": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "open_issues": 0,
    "closed_issues": 113,
    "state": "closed",
    "created_at": "2018-02-25T21:24:26Z",
    "updated_at": "2020-11-25T18:06:34Z",
    "due_on": "2020-11-20T08:00:00Z",
    "closed_at": "2020-11-25T18:06:34Z"
  },
  "comments": 9,
  "created_at": "2020-11-04T23:57:22Z",
  "updated_at": "2020-11-21T19:45:52Z",
  "closed_at": "2020-11-20T22:05:00Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nHi,\r\n\r\nWhen `all-accounts-keystore.json` is created as a Kubernetes secret, the validator client fails to read dynamically updated keys from it and it must be restarted to re-sync newly added keys.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n1. Create a Kubernetes secret with `all-accounts-keystore.json`\r\n2. Create a validator pod with secret mounted as a volume to `/home/.eth2validators/prysm-wallet-v2/direct/accounts`\r\n3. Start a validator Pod and wait until it syncs the keys.\r\n4. Update `all-accounts-keystore.json` and its secret with a new validator key.\r\n5. Check the logs of the validator Pod and you will not see any record about a new key.\r\n\r\nI've checked in a different Pod that the volume is actually updated when the secret value updates. Also, that is stated in Kubernetes documentation: https://kubernetes.io/docs/concepts/configuration/secret/#mounted-secrets-are-updated-automatically\r\n\r\n<!--\r\nPlease let us know how we can reproduce this issue. Include the exact method you used to run Prysm along with any flags used in your beacon chain and/or validator. Make sure you don't upload any confidential files or private keys.\r\n-->\r\n\r\n## üåç  Your Environment\r\n\r\n- Kubernetes version: `1.17.12`\r\n- Validator image: `gcr.io/prysmaticlabs/prysm/validator:HEAD-cd00b6`\r\n\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722046167",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-722046167",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 722046167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjA0NjE2Nw==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T00:21:14Z",
    "updated_at": "2020-11-05T00:21:47Z",
    "author_association": "MEMBER",
    "body": "Can you paste any part of your manifest? If not, can you confirm you are not using the subPath volume mount?\r\n> Note: A container using a Secret as a subPath volume mount will not receive Secret updates.\r\n\r\nWhat validator flags are you using? \r\n\r\nI think that secrets are mounted via symbolic link and we are only monitoring write events, which would not apply to a symbolic link. \r\nhttps://github.com/prysmaticlabs/prysm/blob/7e44d1eec73a5a89bce095d4ce01dadc3cf2efe7/validator/keymanager/imported/refresh.go#L84-L86\r\nWe may need to monitor for \"remove\" and/or \"create\" events if the file is a symbolic link.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722046167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722048195",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-722048195",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 722048195,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjA0ODE5NQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T00:26:13Z",
    "updated_at": "2020-11-05T00:26:13Z",
    "author_association": "MEMBER",
    "body": "Istio seems to have solved this problem at some point (and then later removed that functionality as they didn't need it). https://github.com/istio/istio/pull/9370\r\n\r\nAlso related https://github.com/fsnotify/fsnotify/issues/199",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722048195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722056452",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-722056452",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 722056452,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjA1NjQ1Mg==",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T00:52:17Z",
    "updated_at": "2020-11-05T00:52:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @prestonvanloon , \r\n\r\nHere is a part of manifest that could be relevant:\r\n\r\n```yaml\r\napiVersion: apps/v1\r\n  kind: StatefulSet\r\n  metadata:\r\n    name: validator1\r\n    labels:\r\n      validator: validator1\r\n  spec:\r\n    replicas: 1\r\n    selector:\r\n      matchLabels:\r\n        validator: validator1\r\n    template:\r\n      metadata:\r\n        labels:\r\n          validator: validator1\r\n      spec:\r\n        securityContext:\r\n          fsGroup: 1001\r\n          runAsUser: 1001\r\n        serviceAccountName: prysm-validators-validator\r\n        containers:\r\n          - name: validators\r\n            image: \"gcr.io/prysmaticlabs/prysm/validator:HEAD-cd00b6\"\r\n            imagePullPolicy: IfNotPresent\r\n            args:\r\n              - \"--wallet-dir=/home/.eth2validators/prysm-wallet-v2\"\r\n            volumeMounts:\r\n              - name: keystore\r\n                mountPath: \"/home/.eth2validators/prysm-wallet-v2/direct/accounts\"\r\n                readOnly: true\r\n        volumes:\r\n          - name: keystore\r\n            secret:\r\n              secretName: validator1-keystore\r\n```\r\n\r\nCould it be due to the volume mounted as `readOnly`?\r\n\r\nLooks like the secrets are mounted as a `tmpfs` volume as per docs: https://kubernetes.io/docs/concepts/storage/volumes/#secret",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722056452/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722059482",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-722059482",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 722059482,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjA1OTQ4Mg==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T01:02:32Z",
    "updated_at": "2020-11-05T01:02:32Z",
    "author_association": "MEMBER",
    "body": "It could be due to readOnly, although I suspect that is not the case. \r\n\r\nHere's another example of fswatcher in k8s: https://github.com/jimmidyson/configmap-reload/blob/306e52eb38809d3b3bf7b7fbc0fd76514f2dac63/configmap-reload.go#L99\r\n\r\nThat example monitors *any* event and triggers prometheus to reload the configuration.\r\nI'm thinking that we should also monitor any event and load any new keys into memory.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722059482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722680951",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-722680951",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 722680951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMjY4MDk1MQ==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-05T22:24:37Z",
    "updated_at": "2020-11-05T22:24:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another issue:\r\n```\r\n Once the keys are updated (there is a message like time=\"2020-11-05 21:44:58\" level=info msg=\"Reloaded validator keys into keymanager\"), the newly added key is not monitored.\r\nI expect to see something like time=\"2020-11-05 21:44:49\" level=info msg=\"Waiting for deposit to be observed by beacon node\" prefix=validator pubKey=0x8ce44f6b70c0 status=\"UNKNOWN_STATUS\". \r\n```\r\nfrom @tsudmi ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/722680951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/724190795",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-724190795",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 724190795,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNDE5MDc5NQ==",
    "user": {
      "login": "egoni",
      "id": 62012412,
      "node_id": "MDQ6VXNlcjYyMDEyNDEy",
      "avatar_url": "https://avatars.githubusercontent.com/u/62012412?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/egoni",
      "html_url": "https://github.com/egoni",
      "followers_url": "https://api.github.com/users/egoni/followers",
      "following_url": "https://api.github.com/users/egoni/following{/other_user}",
      "gists_url": "https://api.github.com/users/egoni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/egoni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/egoni/subscriptions",
      "organizations_url": "https://api.github.com/users/egoni/orgs",
      "repos_url": "https://api.github.com/users/egoni/repos",
      "events_url": "https://api.github.com/users/egoni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/egoni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-09T18:25:01Z",
    "updated_at": "2020-11-09T18:29:50Z",
    "author_association": "NONE",
    "body": "After updating the wallet with a new validator key by issuing command like this:\r\n`prysm.sh validator accounts import --keys-dir=validator_keys`\r\nthe validator doesn't use the new added validator key, this is the log output:\r\n```time=\"2020-11-09 17:51:24\" level=info msg=\"Deposit processed, entering activation queue after finalization\" index=104375 positionInActivationQueue=18009 prefix=validator pubKey=0x81a4cc6465f2 status=DEPOSITED\r\ntime=\"2020-11-09 17:51:36\" level=info msg=\"Deposit processed, entering activation queue after finalization\" index=104375 positionInActivationQueue=18009 prefix=validator pubKey=0x81a4cc6465f2 status=DEPOSITED\r\ntime=\"2020-11-09 17:51:46\" level=info msg=\"Reloaded validator keys into keymanager\" prefix=imported-keymanager\r\ntime=\"2020-11-09 17:51:48\" level=info msg=\"Deposit processed, entering activation queue after finalization\" index=104375 positionInActivationQueue=18009 prefix=validator pubKey=0x81a4cc6465f2 status=DEPOSITED\r\ntime=\"2020-11-09 17:52:00\" level=info msg=\"Deposit processed, entering activation queue after finalization\" index=104375 positionInActivationQueue=18009 prefix=validator pubKey=0x81a4cc6465f2 status=DEPOSITED\r\n```\r\nYou see only one validator key, after restarting the validator the added key is correctly used:\r\n```\r\ntime=\"2020-11-09 17:53:49\" level=info msg=\"Deposit processed, entering activation queue after finalization\" index=104375 positionInActivationQueue=18009 prefix=validator pubKey=0x81a4cc6465f2 status=DEPOSITED\r\ntime=\"2020-11-09 17:53:49\" level=info msg=\"Deposit for validator received but not processed into the beacon state\" eth1DepositBlockNumber=3722997 expectedInclusionSlot=699822 prefix=validator pubKey=0x95053aac51bf status=DEPOSITED\r\n```\r\nUsing: Latest Prysm version is v1.0.0-beta.1 on ubuntu, I am not using any kind of symbolic links, wallet is stored on a regular directory",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/724190795/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/726400415",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-726400415",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 726400415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyNjQwMDQxNQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-12T23:18:18Z",
    "updated_at": "2020-11-12T23:18:18Z",
    "author_association": "MEMBER",
    "body": "@rauljordan do you think you could take a look at this? I'm wondering if we are not monitoring enough events. Perhaps we can reload the validator keys on _any_ event, not just fsnotify.Write. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/726400415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731517074",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-731517074",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 731517074,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTUxNzA3NA==",
    "user": {
      "login": "tsudmi",
      "id": 6001614,
      "node_id": "MDQ6VXNlcjYwMDE2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6001614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tsudmi",
      "html_url": "https://github.com/tsudmi",
      "followers_url": "https://api.github.com/users/tsudmi/followers",
      "following_url": "https://api.github.com/users/tsudmi/following{/other_user}",
      "gists_url": "https://api.github.com/users/tsudmi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tsudmi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tsudmi/subscriptions",
      "organizations_url": "https://api.github.com/users/tsudmi/orgs",
      "repos_url": "https://api.github.com/users/tsudmi/repos",
      "events_url": "https://api.github.com/users/tsudmi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tsudmi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-21T06:28:11Z",
    "updated_at": "2020-11-21T06:28:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rauljordan there is also a second point for that issue that we've identified before:\r\nThe updates stream is not reset for the dynamically added keys.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731517074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731627426",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-731627426",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7732",
    "id": 731627426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTYyNzQyNg==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-21T19:45:51Z",
    "updated_at": "2020-11-21T19:45:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks Dmitri, we'll open a separate issue for that\n\nOn Sat, Nov 21, 2020 at 12:28 AM Dmitri Tsumak <notifications@github.com>\nwrote:\n\n> @rauljordan <https://github.com/rauljordan> there is also a second point\n> for that issue that we've identified before:\n> The updates stream is not reset for the dynamically added keys.\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/prysmaticlabs/prysm/issues/7732#issuecomment-731517074>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABKQQPOSX6GSTF5SWXQNMYDSQ5MYRANCNFSM4TKVQ2DQ>\n> .\n>\n\n\n-- \n*Raul E. Jordan | Co-Founder, Prysmatic Labs*\nprysmaticlabs.com\nrauljordan.com\nTwitter: @raulitojordan <https://twitter.com/raulitojordan>\n\ngpg --receive-keys 95452A701810FEDB\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731627426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

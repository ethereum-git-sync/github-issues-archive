{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/7502",
  "id": 719313746,
  "node_id": "MDU6SXNzdWU3MTkzMTM3NDY=",
  "number": 7502,
  "title": "Could not use validator client with web UI on alpha-29",
  "user": {
    "login": "calamenium",
    "id": 72741724,
    "node_id": "MDQ6VXNlcjcyNzQxNzI0",
    "avatar_url": "https://avatars.githubusercontent.com/u/72741724?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/calamenium",
    "html_url": "https://github.com/calamenium",
    "followers_url": "https://api.github.com/users/calamenium/followers",
    "following_url": "https://api.github.com/users/calamenium/following{/other_user}",
    "gists_url": "https://api.github.com/users/calamenium/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/calamenium/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/calamenium/subscriptions",
    "organizations_url": "https://api.github.com/users/calamenium/orgs",
    "repos_url": "https://api.github.com/users/calamenium/repos",
    "events_url": "https://api.github.com/users/calamenium/events{/privacy}",
    "received_events_url": "https://api.github.com/users/calamenium/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2020-10-12T11:45:09Z",
  "updated_at": "2020-10-14T14:05:08Z",
  "closed_at": "2020-10-14T14:05:08Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nUpon upgrading to alpha-29 the validator process will not start and produces an error due to being unable to open browser via  xdg-open.\r\n\r\n### Has this worked before in a previous version?\r\n\r\nFirst release with --web\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nHas been reproduced by myself and a few others noted in discord. May be related to xdg-utils not operating properly within a systemd process. (I followed SomerEsats guide).\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\nOn reinstall with the --web command in the systemd startup for the validator I get the following error: \"Oct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: /usr/bin/xdg-open: 869: www-browser: not found\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: /usr/bin/xdg-open: 869: links2: not found\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: /usr/bin/xdg-open: 869: elinks: not found\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: /usr/bin/xdg-open: 869: links: not found\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: /usr/bin/xdg-open: 869: lynx: not found\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: /usr/bin/xdg-open: 869: w3m: not found\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3163]: xdg-open: no method available for opening 'http://127.0.0.1:4242/'\r\nOct 12 12:34:38 parti6le-NUC8i5BEH prysm.sh[3116]: time=\"2020-10-12 12:34:38\" level=error msg=\"Could not open Prysm web UI in browser\" error=\"exit status\r\n</code></pre>\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System: Ubuntu 20.04.1**\r\n\r\n**What version of Prysm are you running? alpha-29**\r\n\r\n**Anything else relevant (validator index / public key)? Everything works if --web removed.**\r\n\r\n@nisdas Recommended posting this issue via discord.\r\n\r\n",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/708403090",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7502#issuecomment-708403090",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502",
    "id": 708403090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODQwMzA5MA==",
    "user": {
      "login": "OisinKyne",
      "id": 4981644,
      "node_id": "MDQ6VXNlcjQ5ODE2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4981644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/OisinKyne",
      "html_url": "https://github.com/OisinKyne",
      "followers_url": "https://api.github.com/users/OisinKyne/followers",
      "following_url": "https://api.github.com/users/OisinKyne/following{/other_user}",
      "gists_url": "https://api.github.com/users/OisinKyne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/OisinKyne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/OisinKyne/subscriptions",
      "organizations_url": "https://api.github.com/users/OisinKyne/orgs",
      "repos_url": "https://api.github.com/users/OisinKyne/repos",
      "events_url": "https://api.github.com/users/OisinKyne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/OisinKyne/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-14T13:30:29Z",
    "updated_at": "2020-10-14T13:30:29Z",
    "author_association": "NONE",
    "body": "@terencechain \r\nI want to highlight that this issue seems to be more serious than just not being able to use the UI!! I had a similar error and it looks like it made my validator hang entirely due to `xdg-open` failing. Will detail here but let me know if you want me to reopen this as a fresh issue. \r\n\r\n### What am I running\r\n\r\nPrysm Alpha.29 with docker and yaml config on GCE\r\n\r\n### What happened?\r\n- I was validating on Zinken, and decided to restart my validator with the `web: true` yaml config to check the UI out. \r\n\r\n- The shutdown and restart docker logs looked like this:\r\n<pre><code>\r\ntime=\"2020-10-13 13:49:01\" level=info msg=\"Attestation schedule\" attesters=1 prefix=validator pubKeys=[0xa8e4fce403c1] slot=7774\r\ntime=\"2020-10-13 13:49:29\" level=info msg=\"Submitted new attestations\" AggregatorIndices=[] AttesterIndices=[2381] BeaconBlockRoot=0x1fc80b69a76d CommitteeIndex=0 Slot=7746 SourceEpoch=241 SourceRoot=0x0e32ef3ba23c TargetEpoch=242 TargetRoot=0x3598fceb13d7 prefix=validator\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Got interrupt, shutting down...\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Stopping service\" prefix=validator\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Stopping Prysm validator\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=warning msg=\"--<testnet> flag is not specified (default: Medalla), this will become required from next release! \" prefix=flags\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Enabling web portal to manage the validator client\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Checking DB\" databasePath=\"/data\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Starting validator node\" prefix=node version=\"Prysm/v1.0.0-alpha.28/551b03d6e6506b64ac8957510c9c250197236206. Built at: 2020-10-10 02:12:50+00:00\"\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Starting Prysm web UI\" address=\"127.0.0.1:4242\" prefix=prysm-web\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Starting gRPC gateway\" address=\"127.0.0.1:7500\" prefix=gateway\r\ntime=\"2020-10-13 13:49:45\" level=warning msg=\"You are using an insecure gRPC connection. If you are running your beacon node and validator on the same machines, you can ignore this message. If you want to know how to enable secure connections, see: https://docs.prylabs.network/docs/prysm-usage/secure-grpc\" prefix=validator\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"gRPC server listening on address\" address=\"127.0.0.1:7000\" prefix=rpc\r\ntime=\"2020-10-13 13:49:46\" level=error msg=\"Could not open Prysm web UI in browser\" error=\"exec: \"xdg-open\": executable file not found in $PATH\" prefix=prysm-web\r\n</code></pre>\r\n\r\n- I was able to access the web UI so I thought everything was working normally\r\n\r\n- My validator immediately started missing attestations https://zinken.beaconcha.in/block/7715 (validator 2383 https://zinken.beaconcha.in/validator/0xa4a5bea067ee96970249c0d4be448fc9f5d44ddbf7ba5c895b10919e2da492f0c6b0b1fc8bc3f6a7c9dc4e46e50f766f#attestations)\r\n\r\n- Today I noticed my validator was offline, and the timeline exactly matched when I restarted it with the web flag\r\n\r\n- I restarted the validator with `web: false`\r\n\r\n- I got the rest of the logs when the shutdown signal was received by the docker container (Notice almost 24 hours between this log: `time=\"2020-10-13 13:49:46\" level=error msg=\"Could not open Prysm web UI in browser\" error=\"exec: \"xdg-open\": executable file not found in $PATH\" prefix=prysm-web` and the shutdown log.)\r\n\r\n<pre><code>\r\ntime=\"2020-10-13 13:49:01\" level=info msg=\"Attestation schedule\" attesters=1 prefix=validator pubKeys=[0xa8e4fce403c1] slot=7774\r\ntime=\"2020-10-13 13:49:29\" level=info msg=\"Submitted new attestations\" AggregatorIndices=[] AttesterIndices=[2381] BeaconBlockRoot=0x1fc80b69a76d CommitteeIndex=0 Slot=7746 SourceEpoch=241 SourceRoot=0x0e32ef3ba23c TargetEpoch=242 TargetRoot=0x3598fceb13d7 prefix=validator\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Got interrupt, shutting down...\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Stopping service\" prefix=validator\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Stopping Prysm validator\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=warning msg=\"--<testnet> flag is not specified (default: Medalla), this will become required from next release! \" prefix=flags\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Enabling web portal to manage the validator client\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Checking DB\" databasePath=\"/data\" prefix=node\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Starting validator node\" prefix=node version=\"Prysm/v1.0.0-alpha.28/551b03d6e6506b64ac8957510c9c250197236206. Built at: 2020-10-10 02:12:50+00:00\"\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Starting Prysm web UI\" address=\"127.0.0.1:4242\" prefix=prysm-web\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"Starting gRPC gateway\" address=\"127.0.0.1:7500\" prefix=gateway\r\ntime=\"2020-10-13 13:49:45\" level=warning msg=\"You are using an insecure gRPC connection. If you are running your beacon node and validator on the same machines, you can ignore this message. If you want to know how to enable secure connections, see: https://docs.prylabs.network/docs/prysm-usage/secure-grpc\" prefix=validator\r\ntime=\"2020-10-13 13:49:45\" level=info msg=\"gRPC server listening on address\" address=\"127.0.0.1:7000\" prefix=rpc\r\ntime=\"2020-10-13 13:49:46\" level=error msg=\"Could not open Prysm web UI in browser\" error=\"exec: \"xdg-open\": executable file not found in $PATH\" prefix=prysm-web\r\ntime=\"2020-10-14 13:13:03\" level=info msg=\"Got interrupt, shutting down...\" prefix=node\r\ntime=\"2020-10-14 13:13:03\" level=error msg=\"Failed to start validator web server\" error=\"http: Server closed\" prefix=prysm-web\r\ntime=\"2020-10-14 13:13:03\" level=info msg=\"Stopping service\" prefix=validator\r\ntime=\"2020-10-14 13:13:03\" level=info msg=\"Stopping Prysm validator\" prefix=node\r\ntime=\"2020-10-14 13:13:03\" level=fatal msg=\"Wallet is not ready: context canceled\" prefix=validator\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x20114e2]\r\n\r\ngoroutine 158 [running]:\r\ngithub.com/prysmaticlabs/prysm/shared/slotutil.(*SlotTicker).Done.func1(0x0)\r\n\tshared/slotutil/slotticker.go:37 +0x22\r\ncreated by github.com/prysmaticlabs/prysm/shared/slotutil.(*SlotTicker).Done\r\n\tshared/slotutil/slotticker.go:36 +0x3f\r\ntime=\"2020-10-14 13:13:04\" level=warning msg=\"Running on Zinken Testnet\" prefix=flags\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Opened validator wallet\" keymanager-kind=direct prefix=node wallet=\"/config/direct\"\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Checking DB\" databasePath=\"/config/direct\" prefix=node\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Starting validator node\" prefix=node version=\"Prysm/v1.0.0-alpha.28/551b03d6e6506b64ac8957510c9c250197236206. Built at: 2020-10-10 02:12:50+00:00\"\r\ntime=\"2020-10-14 13:13:04\" level=warning msg=\"You are using an insecure gRPC connection. If you are running your beacon node and validator on the same machines, you can ignore this message. If you want to know how to enable secure connections, see: https://docs.prylabs.network/docs/prysm-usage/secure-grpc\" prefix=validator\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Waiting for beacon chain start log from the ETH 1.0 deposit contract\" prefix=validator\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Validating for public key\" prefix=validator publicKey=0x98350cc6d98b\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Validating for public key\" prefix=validator publicKey=0xa8e4fce403c1\r\ntime=\"2020-10-14 13:13:04\" level=info msg=\"Validating for public key\" prefix=validator publicKey=0xb6c9c1b00f35\r\n</code></pre>\r\n\r\n- After restart without web the validator went back to attesting as expected. https://zinken.beaconcha.in/block/14784\r\n\r\nCC @prestonvanloon ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/708403090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/708425979",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7502#issuecomment-708425979",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7502",
    "id": 708425979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODQyNTk3OQ==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-14T14:05:08Z",
    "updated_at": "2020-10-14T14:05:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @calamenium, thanks for bringing this up. This one is a duplicate of https://github.com/prysmaticlabs/prysm-web-ui/issues/72, please subscribe to that issue to be notified when a fix is available. We will resolve this by next release",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/708425979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

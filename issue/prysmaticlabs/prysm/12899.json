{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12899",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12899/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12899/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12899/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12899",
  "id": 1895525517,
  "node_id": "I_kwDOBvuov85w-2yN",
  "number": 12899,
  "title": "Blocks Stuck at DA Check Loop Leading to Excessive Reprocessing",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 5462402659,
      "node_id": "LA_kwDOBvuov88AAAABRZWmYw",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Deneb",
      "name": "Deneb",
      "color": "040874",
      "default": false,
      "description": "PRs or issues for the Deneb upgrade"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-09-14T02:07:05Z",
  "updated_at": "2023-09-15T17:13:14Z",
  "closed_at": "2023-09-15T17:13:14Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "**Description**:\r\nWhen a block finds itself stuck at the DA (Data Availability) check loop, every 4 seconds, a node will manually re-request and re-process the same block. Consequently, all the blobs are re-requested and re-processed for that block, and this action triggers another DA check loop. This seems inefficient and could potentially lead to a resource drain.\r\n\r\nThe current `Sync` package merely verifies if a block exists in the database. However, it doesn't seem to cater to the scenario where a block has successfully passed through the consensus and execution validators but is caught waiting at the DA check loop.\r\n\r\nThe problem is exacerbated when there's a linked list of blocks in the pending queue.\r\n\r\n**Further Details**:\r\n- It's been observed that a node might not process a block if its parent block is still waiting for DA validation.\r\n  \r\n- Similarly, a node might refrain from processing an attestation if the block linked to that attestation is waiting for DA.\r\n\r\nWhile these two scenarios seem reasonable to ensure data integrity and proper sequencing, there's an inefficiency when the node re-requests the block by root again, even when not required. ",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12899/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12899/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/10443",
  "id": 1183573866,
  "node_id": "I_kwDOBvuov85Gi-dq",
  "number": 10443,
  "title": "Better separation of concerns",
  "user": {
    "login": "potuz",
    "id": 16044918,
    "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/potuz",
    "html_url": "https://github.com/potuz",
    "followers_url": "https://api.github.com/users/potuz/followers",
    "following_url": "https://api.github.com/users/potuz/following{/other_user}",
    "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
    "organizations_url": "https://api.github.com/users/potuz/orgs",
    "repos_url": "https://api.github.com/users/potuz/repos",
    "events_url": "https://api.github.com/users/potuz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/potuz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 934596141,
      "node_id": "MDU6TGFiZWw5MzQ1OTYxNDE=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Discussion",
      "name": "Discussion",
      "color": "f9d0c4",
      "default": false,
      "description": "Simply a thread for talking about stuff"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2022-03-28T15:01:38Z",
  "updated_at": "2022-04-21T15:33:10Z",
  "closed_at": null,
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "This is a general issue,  but it is being raised now because of the number of helpers that take the form \r\n\r\n`func Check(state BeaconState, block BeaconBlock) error `\r\n\r\nOr similar, where the two arguments are supposed to be consistent, for example by requiring that `block` is the block that will be applied to `state` (a prestate situation) or that it was the block that was applied to a state to obtain `state` (a post-state situation). There are several examples like this, like `IsMergeTransitionBlockUsingPayloadHeader` that takes an Execution header and a block, and it's assumed that the block is to be applied to the state containing the header as it's Last execution header. \r\n\r\nThis situation exposes us to subtle bugs that are hard to diagnose since the caller is responsible to check the compatibility of the arguments being sent. I think we should either check the compatibility on the function, or just not use them and add this logic in-site at the callsite (these are small helpers typically) or figure out some other way of tracking the validity of these arguments. Opening this issue for discussions. ",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1105387266",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/10443#issuecomment-1105387266",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/10443",
    "id": 1105387266,
    "node_id": "IC_kwDOBvuov85B4t8C",
    "user": {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-04-21T15:33:10Z",
    "updated_at": "2022-04-21T15:33:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think the function should check its invariants. However I don't think it's possible to do this in `IsMergeTransitionBlockUsingPayloadHeader`.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1105387266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

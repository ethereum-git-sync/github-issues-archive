{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/9665",
  "id": 1005941228,
  "node_id": "I_kwDOBvuov8479XHs",
  "number": 9665,
  "title": "Slashing protection import fails silently if `validator.db` is not found",
  "user": {
    "login": "michaelsproul",
    "id": 4452260,
    "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/michaelsproul",
    "html_url": "https://github.com/michaelsproul",
    "followers_url": "https://api.github.com/users/michaelsproul/followers",
    "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
    "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
    "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
    "repos_url": "https://api.github.com/users/michaelsproul/repos",
    "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2021-09-23T23:43:07Z",
  "updated_at": "2021-09-30T17:14:06Z",
  "closed_at": "2021-09-30T17:14:05Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nThe slashing protection import CLI fails silently if the validator database directory exists but doesn't contain a validator database.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nImport a slashing protection file into an empty directory (`/path/to/empty-directory`):\r\n\r\n```bash\r\n$ ./validator-v1.4.4-linux-amd64 slashing-protection import --pyrmont --slashing-protection-json-file slashing-protection.json\r\n[2021-09-24 09:33:14]  WARN flags: Running on Pyrmont Testnet\r\nEnter the directory of the validator database you would like to use (default: /home/michael/.eth2):\r\n/path/to/empty-directory\r\n$ echo $status\r\n0\r\n```\r\n\r\nI think in this case the CLI should print an error, as it does in the case where the directory doesn't exist at all:\r\n\r\n```\r\n$ ./validator-v1.4.4-linux-amd64 slashing-protection import --pyrmont --slashing-protection-json-file jankus.json\r\n[2021-09-24 09:39:22]  WARN flags: Running on Pyrmont Testnet\r\nEnter the directory of the validator database you would like to use (default: /home/michael/.eth2):\r\n/tmp/notreal\r\n[2021-09-24 09:39:27] ERROR main: err finding validator database at path /tmp/notreal: lstat /tmp/notreal: no such file or directory\r\n$ echo $status\r\n0\r\n```\r\n\r\n(the exit code should probably be non-zero, but that's a separate issue)\r\n\r\n## üåç  Your Environment\r\n\r\n- Ubuntu 21.04\r\n- Prysm v1.4.4: `validator version Prysm/v1.4.4/29d48dfe7eb38959752048aec700f31c3abf7484. Built at: 2021-09-01 16:20:28+00:00`\r\n\r\n",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/926316078",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9665#issuecomment-926316078",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665",
    "id": 926316078,
    "node_id": "IC_kwDOBvuov843NnYu",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-24T03:31:48Z",
    "updated_at": "2021-09-24T03:31:48Z",
    "author_association": "MEMBER",
    "body": "Hey @michaelsproul , \r\n\r\nThanks for the report, this should be fixed by #9355, @rauljordan can confirm. Unfortunately that did not make it into v1.4.4, so any user facing this would have to wait for our v2 release. If they really do want to export it, they can run our v2 release candidates which has the fix in them. I will leave this open till will have our official v2 release. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/926316078/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/926321670",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9665#issuecomment-926321670",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665",
    "id": 926321670,
    "node_id": "IC_kwDOBvuov843NowG",
    "user": {
      "login": "michaelsproul",
      "id": 4452260,
      "node_id": "MDQ6VXNlcjQ0NTIyNjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4452260?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelsproul",
      "html_url": "https://github.com/michaelsproul",
      "followers_url": "https://api.github.com/users/michaelsproul/followers",
      "following_url": "https://api.github.com/users/michaelsproul/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelsproul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelsproul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelsproul/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelsproul/orgs",
      "repos_url": "https://api.github.com/users/michaelsproul/repos",
      "events_url": "https://api.github.com/users/michaelsproul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelsproul/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-24T03:52:35Z",
    "updated_at": "2021-09-24T03:52:35Z",
    "author_association": "NONE",
    "body": "Awesome, thanks @nisdas! I was wondering if it would turn out to be something like that, thanks for the prompt reply üòä",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/926321670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/931511225",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9665#issuecomment-931511225",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9665",
    "id": 931511225,
    "node_id": "IC_kwDOBvuov843hbu5",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-30T17:14:05Z",
    "updated_at": "2021-09-30T17:14:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "Confirmed this one is indeed resolved. If issue still surfaces for any reason after v2 release of Prysm (next Monday), we'll definitely reopen! Thanks @michaelsproul ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/931511225/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/11551",
  "id": 1403567269,
  "node_id": "I_kwDOBvuov85TqLyl",
  "number": 11551,
  "title": "Validator and `--graffiti-file` producing empty graffiti blocks",
  "user": {
    "login": "benv666",
    "id": 165034,
    "node_id": "MDQ6VXNlcjE2NTAzNA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/165034?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/benv666",
    "html_url": "https://github.com/benv666",
    "followers_url": "https://api.github.com/users/benv666/followers",
    "following_url": "https://api.github.com/users/benv666/following{/other_user}",
    "gists_url": "https://api.github.com/users/benv666/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/benv666/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/benv666/subscriptions",
    "organizations_url": "https://api.github.com/users/benv666/orgs",
    "repos_url": "https://api.github.com/users/benv666/repos",
    "events_url": "https://api.github.com/users/benv666/events{/privacy}",
    "received_events_url": "https://api.github.com/users/benv666/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 1966354762,
      "node_id": "MDU6TGFiZWwxOTY2MzU0NzYy",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Need-Info",
      "name": "Need-Info",
      "color": "fbca04",
      "default": false,
      "description": "Need more information from author"
    },
    {
      "id": 4016460320,
      "node_id": "LA_kwDOBvuov87vZlIg",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/UX",
      "name": "UX",
      "color": "43B8B9",
      "default": false,
      "description": "cosmetic / user experience related"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "james-prysm",
    "id": 90280386,
    "node_id": "MDQ6VXNlcjkwMjgwMzg2",
    "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/james-prysm",
    "html_url": "https://github.com/james-prysm",
    "followers_url": "https://api.github.com/users/james-prysm/followers",
    "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
    "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
    "organizations_url": "https://api.github.com/users/james-prysm/orgs",
    "repos_url": "https://api.github.com/users/james-prysm/repos",
    "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/james-prysm/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "james-prysm",
      "id": 90280386,
      "node_id": "MDQ6VXNlcjkwMjgwMzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-prysm",
      "html_url": "https://github.com/james-prysm",
      "followers_url": "https://api.github.com/users/james-prysm/followers",
      "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
      "organizations_url": "https://api.github.com/users/james-prysm/orgs",
      "repos_url": "https://api.github.com/users/james-prysm/repos",
      "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-prysm/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2022-10-10T18:35:12Z",
  "updated_at": "2023-12-07T21:38:21Z",
  "closed_at": "2023-12-07T21:38:20Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nWhen running the Prysm Validator client with the `--graffiti-file` option there are [several ways](https://docs.prylabs.network/docs/prysm-usage/graffiti-file) of specifying what graffiti to pick for what validator and in what order.\r\n\r\nFor [our group graffiti drawing](https://github.com/stake-house/DecentralizedGraffitiDrawing) effort our code had always used the `ordered` style with a single pixel as the content of the entire file.\r\nHowever, while trying to develop a Dappnode package to support our graffiti drawer we found the graffiti fields for proposed blocks to be empty.\r\nToday we also got a bug report from one of our users on mainnet that the graffiti was empty for a proposed block.\r\n\r\nQuestions here:\r\n1. What is the expected behaviour when supplying both the `--graffiti=\"X\"` flags AND `--graffiti-file`? Could not find any documentation on this, but Prysm starts without warnings.\r\n2. Why is the graffiti from the ordered list not being used?\r\n\r\nThis seems to be something in the `ordered` list handling specifically - after switching to the `default: \"XXX\"` graffiti-file format my same setup managed to produce a proper block with the expected graffiti.\r\nSpeculation: perhaps related to having multiple validators and only one ordered pixel to choose from?\r\n\r\n### Has this worked before in a previous version?\r\n\r\nWe believe it once worked way before the merge, but at least against the fork that Dappnode on Gnosis runs it's already broken (which states v2.1.2 upstream).\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nCreate a graffiti-file with these contents:\r\n```\r\nordered:\r\n  - \"DappNode gw:57550063bf67\"\r\n```\r\n\r\nRun validator with `--graffiti-file` pointing to this file.\r\n\r\n## üî• Error\r\n\r\nNo errors.\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\ndappnode\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\n2.1.2-gbc on the dappnode and v3.1.1 on mainnet\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\nDappnode uses websigner, but the mainnet node does not.",
  "closed_by": {
    "login": "james-prysm",
    "id": 90280386,
    "node_id": "MDQ6VXNlcjkwMjgwMzg2",
    "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/james-prysm",
    "html_url": "https://github.com/james-prysm",
    "followers_url": "https://api.github.com/users/james-prysm/followers",
    "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
    "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
    "organizations_url": "https://api.github.com/users/james-prysm/orgs",
    "repos_url": "https://api.github.com/users/james-prysm/repos",
    "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/james-prysm/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1329598648",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11551#issuecomment-1329598648",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551",
    "id": 1329598648,
    "node_id": "IC_kwDOBvuov85PQBC4",
    "user": {
      "login": "james-prysm",
      "id": 90280386,
      "node_id": "MDQ6VXNlcjkwMjgwMzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-prysm",
      "html_url": "https://github.com/james-prysm",
      "followers_url": "https://api.github.com/users/james-prysm/followers",
      "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
      "organizations_url": "https://api.github.com/users/james-prysm/orgs",
      "repos_url": "https://api.github.com/users/james-prysm/repos",
      "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-prysm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-11-28T19:02:23Z",
    "updated_at": "2022-11-28T19:02:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "sorry for getting back to you so late on this, recently started pruning through older issues. the --graffiti flag will override the --graffiti-file flag. \r\nperhaps this clears things up a bit\r\n- // When specified, default graffiti from the command line takes the first priority.\r\n- // When specified, individual validator specified graffiti takes the second priority.\r\n- // When specified, a graffiti from the ordered list in the file take third priority.\r\n- // When specified, a graffiti from the random list in the file take fourth priority.\r\n- // Finally, default graffiti if specified in the file will be used.\r\n\r\nif you see this response please le me know if further action is needed to resolve your issue or we can close it.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1329598648/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1846150568",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11551#issuecomment-1846150568",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11551",
    "id": 1846150568,
    "node_id": "IC_kwDOBvuov85uCgWo",
    "user": {
      "login": "james-prysm",
      "id": 90280386,
      "node_id": "MDQ6VXNlcjkwMjgwMzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/90280386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/james-prysm",
      "html_url": "https://github.com/james-prysm",
      "followers_url": "https://api.github.com/users/james-prysm/followers",
      "following_url": "https://api.github.com/users/james-prysm/following{/other_user}",
      "gists_url": "https://api.github.com/users/james-prysm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/james-prysm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/james-prysm/subscriptions",
      "organizations_url": "https://api.github.com/users/james-prysm/orgs",
      "repos_url": "https://api.github.com/users/james-prysm/repos",
      "events_url": "https://api.github.com/users/james-prysm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/james-prysm/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-12-07T21:38:20Z",
    "updated_at": "2023-12-07T21:38:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Outdated issue",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1846150568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

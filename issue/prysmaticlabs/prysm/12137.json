{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137",
  "id": 1626664296,
  "node_id": "I_kwDOBvuov85g9O1o",
  "number": 12137,
  "title": "After  Shapella fork, my goerli node no longer imported new block",
  "user": {
    "login": "SimonSMH1015",
    "id": 39431803,
    "node_id": "MDQ6VXNlcjM5NDMxODAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/39431803?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SimonSMH1015",
    "html_url": "https://github.com/SimonSMH1015",
    "followers_url": "https://api.github.com/users/SimonSMH1015/followers",
    "following_url": "https://api.github.com/users/SimonSMH1015/following{/other_user}",
    "gists_url": "https://api.github.com/users/SimonSMH1015/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SimonSMH1015/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SimonSMH1015/subscriptions",
    "organizations_url": "https://api.github.com/users/SimonSMH1015/orgs",
    "repos_url": "https://api.github.com/users/SimonSMH1015/repos",
    "events_url": "https://api.github.com/users/SimonSMH1015/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SimonSMH1015/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 7,
  "created_at": "2023-03-16T03:56:15Z",
  "updated_at": "2023-07-25T09:12:38Z",
  "closed_at": "2023-07-25T09:12:37Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nAfter the Shapella fork, my node dose not import chain segment correctly.  Below is my geth log.\r\n![image](https://user-images.githubusercontent.com/39431803/225508658-c4299902-2b29-491b-ba84-c824e97bd9f3.png)\r\nI opened the  trace log and noticed that this is because I received blocks that I did not had their parent in my geth. I am confused if this is because beacon chain kept gave my node uncle blocks.\r\n\r\nMy beacon logs is below\r\n![image](https://user-images.githubusercontent.com/39431803/225510229-aa750d46-ca49-4f1c-a382-3b8610cd73bd.png)\r\nThis looks fine for me.\r\nI am really want to know why this things happened\r\n\r\n### Has this worked before in a previous version?\r\n\r\nDid not met before\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n<!--\r\nPlease let us know how we can reproduce this issue. Include the exact method you used to run Prysm along with any flags used in your beacon chain and/or validator. Make sure you don't upload any confidential files or private keys.\r\n-->\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\n<!-- If the issue is accompanied by an error, please share the error logs with us below. If you have a lot of logs, place make a paste bin with your logs and share the link with us here: -->\r\n<!-- ‚úçÔ∏è-->\r\n\r\n</code></pre>\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\ncentos 8\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nv3.2.2-rc.3\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\n",
  "closed_by": {
    "login": "nisdas",
    "id": 33201827,
    "node_id": "MDQ6VXNlcjMzMjAxODI3",
    "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nisdas",
    "html_url": "https://github.com/nisdas",
    "followers_url": "https://api.github.com/users/nisdas/followers",
    "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
    "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
    "organizations_url": "https://api.github.com/users/nisdas/orgs",
    "repos_url": "https://api.github.com/users/nisdas/repos",
    "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nisdas/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1472193335",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1472193335",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1472193335,
    "node_id": "IC_kwDOBvuov85Xv-M3",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-16T15:24:53Z",
    "updated_at": "2023-03-16T15:24:53Z",
    "author_association": "MEMBER",
    "body": "Hello! Which version of geth are you using? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1472193335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1472964595",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1472964595",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1472964595,
    "node_id": "IC_kwDOBvuov85Xy6fz",
    "user": {
      "login": "SimonSMH1015",
      "id": 39431803,
      "node_id": "MDQ6VXNlcjM5NDMxODAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39431803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSMH1015",
      "html_url": "https://github.com/SimonSMH1015",
      "followers_url": "https://api.github.com/users/SimonSMH1015/followers",
      "following_url": "https://api.github.com/users/SimonSMH1015/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSMH1015/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSMH1015/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSMH1015/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSMH1015/orgs",
      "repos_url": "https://api.github.com/users/SimonSMH1015/repos",
      "events_url": "https://api.github.com/users/SimonSMH1015/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSMH1015/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T01:10:56Z",
    "updated_at": "2023-03-17T01:13:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> \r\n\r\nhello, im using v1.11.3 geth",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1472964595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473089518",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1473089518",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1473089518,
    "node_id": "IC_kwDOBvuov85XzY_u",
    "user": {
      "login": "SimonSMH1015",
      "id": 39431803,
      "node_id": "MDQ6VXNlcjM5NDMxODAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39431803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSMH1015",
      "html_url": "https://github.com/SimonSMH1015",
      "followers_url": "https://api.github.com/users/SimonSMH1015/followers",
      "following_url": "https://api.github.com/users/SimonSMH1015/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSMH1015/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSMH1015/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSMH1015/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSMH1015/orgs",
      "repos_url": "https://api.github.com/users/SimonSMH1015/repos",
      "events_url": "https://api.github.com/users/SimonSMH1015/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSMH1015/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T03:57:56Z",
    "updated_at": "2023-03-17T03:57:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "I tried to reproduce the problem several times and found something. Every time the problem occurred, geth was just synchronized to the latest block, and after that block  sent by prysm was no longer inserted into the chain. Hope this information would help. \r\nTo  reproduce the problem, I stopped the bacon for a while and then started again. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473089518/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473110473",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1473110473",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1473110473,
    "node_id": "IC_kwDOBvuov85XzeHJ",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T04:25:26Z",
    "updated_at": "2023-03-17T04:25:26Z",
    "author_association": "MEMBER",
    "body": "@JAVAN000B It looks like geth is syncing which is why you get that particular message",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473110473/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473448594",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1473448594",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1473448594,
    "node_id": "IC_kwDOBvuov85X0wqS",
    "user": {
      "login": "SimonSMH1015",
      "id": 39431803,
      "node_id": "MDQ6VXNlcjM5NDMxODAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39431803?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SimonSMH1015",
      "html_url": "https://github.com/SimonSMH1015",
      "followers_url": "https://api.github.com/users/SimonSMH1015/followers",
      "following_url": "https://api.github.com/users/SimonSMH1015/following{/other_user}",
      "gists_url": "https://api.github.com/users/SimonSMH1015/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SimonSMH1015/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SimonSMH1015/subscriptions",
      "organizations_url": "https://api.github.com/users/SimonSMH1015/orgs",
      "repos_url": "https://api.github.com/users/SimonSMH1015/repos",
      "events_url": "https://api.github.com/users/SimonSMH1015/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SimonSMH1015/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T09:00:51Z",
    "updated_at": "2023-03-17T09:02:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think I did not clarifeid the  problem clearly.  The situaction is my node had run an old version of prysm.So, this node fall behind the latest blocks after Shapella fork.  And I used a new one(v3.2.2-rc.3) now, after successfully catching up with the latest block, this happened. My prysm is still syncing the latest blocks, but the geth is not inserted them into the chain when received.\r\nI am so confused why this things happend, and in old version of prym it never happend before. \r\n\r\nBelow I provide some trace logs when reproducing the problem\r\nThis is the last time my node imported  chain segment\r\n![last receive](https://user-images.githubusercontent.com/39431803/225856856-befe1f08-c320-4844-bab3-ac4efc88e7f0.PNG)\r\nAnd after about 2 hour, my node finally inserted the next one \r\n![first receive](https://user-images.githubusercontent.com/39431803/225857340-352d9f73-fa06-41dd-a502-1e5db7a6ae81.PNG)\r\nHowever, my geth has already received this block from beacon at 11:44:37.384\r\n![receive request](https://user-images.githubusercontent.com/39431803/225857953-0690809d-da12-4cfe-8e50-e298da4ae751.PNG)\r\nThe trace logs of beacon at this time is full of \r\n`Deposit registered from deposit contract` \r\nas I just lauch a new prysm.\r\n\r\nI think this is because the prysm send this block but lost some information.  \r\n@nisdas If you need more information, you can ask me.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473448594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473490968",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1473490968",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1473490968,
    "node_id": "IC_kwDOBvuov85X07AY",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-17T09:19:50Z",
    "updated_at": "2023-03-17T09:19:50Z",
    "author_association": "MEMBER",
    "body": "@JAVAN000B The logs pasted look like geth is still syncing for some reason. I do not know why, but prysm can't do anything until geth finishes its snap sync. So you might just have to wait",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1473490968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1649437074",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12137#issuecomment-1649437074",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12137",
    "id": 1649437074,
    "node_id": "IC_kwDOBvuov85iUGmS",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-07-25T09:12:37Z",
    "updated_at": "2023-07-25T09:12:37Z",
    "author_association": "MEMBER",
    "body": "@SimonSMH1015 I am assuming this isnt an issue anymore :) , closing the issue now. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1649437074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12850",
  "id": 1881487782,
  "node_id": "I_kwDOBvuov85wJTmm",
  "number": 12850,
  "title": "`eth_call` is sent to Nethermind with field not included in API specification.",
  "user": {
    "login": "kamilchodola",
    "id": 43241881,
    "node_id": "MDQ6VXNlcjQzMjQxODgx",
    "avatar_url": "https://avatars.githubusercontent.com/u/43241881?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kamilchodola",
    "html_url": "https://github.com/kamilchodola",
    "followers_url": "https://api.github.com/users/kamilchodola/followers",
    "following_url": "https://api.github.com/users/kamilchodola/following{/other_user}",
    "gists_url": "https://api.github.com/users/kamilchodola/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kamilchodola/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kamilchodola/subscriptions",
    "organizations_url": "https://api.github.com/users/kamilchodola/orgs",
    "repos_url": "https://api.github.com/users/kamilchodola/repos",
    "events_url": "https://api.github.com/users/kamilchodola/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kamilchodola/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-09-05T08:36:25Z",
  "updated_at": "2023-10-08T13:33:22Z",
  "closed_at": "2023-10-08T13:33:22Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nIn Nethermind we reverted one of the changes and ensured that our eth_call is according to the spec:\r\nhttps://[ethereum.github.io/execution-apis/api-documentation/](https://ethereum.github.io/execution-apis/api-documentation/)\r\nOne of important things is to have \"input\" field on transaction details.\r\n\r\nWhen this adjustment was made, noticed that on any node with Prysm (sepolia/mainnet/goerli) we started getting errors:\r\n```\r\nError when handling ID 3, eth_call({\r\n  \"data\": \"0x621fd130\",\r\n  \"from\": \"0x0000000000000000000000000000000000000000\",\r\n  \"to\": \"0x7f02c3e3c98b133055b8b348b2ac625669ed295d\"\r\n},latest) | {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32015,\"message\":\"VM execution error.\",\"data\":\"revert\"},\"id\":3}\r\n```\r\nAfter some investigation we noticed, that instead of receiving \"input\" from prysm we got \"data\". When we reverted that change everything is fine for now, but the usage of eth_call in that scenario is not matching the API specifications mentioned above.\r\n\r\n### Has this worked before in a previous version?\r\n\r\nYes, until we adjusted according to spec.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n<!--\r\nPlease let us know how we can reproduce this issue. Include the exact method you used to run Prysm along with any flags used in your beacon chain and/or validator. Make sure you don't upload any confidential files or private keys.\r\n-->\r\nI guess it is quite self explanatory from Description - as for now Nethermind handles both fields but we would like to support only one as described in spec.\r\n\r\n## üî• Error\r\n<pre><code>\r\nError when handling ID 3, eth_call({\r\n  \"data\": \"0x621fd130\",\r\n  \"from\": \"0x0000000000000000000000000000000000000000\",\r\n  \"to\": \"0x7f02c3e3c98b133055b8b348b2ac625669ed295d\"\r\n},latest) | {\"jsonrpc\":\"2.0\",\"error\":{\"code\":-32015,\"message\":\"VM execution error.\",\"data\":\"revert\"},\"id\":3}\r\n</code></pre>\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nUbuntu 22.04, Docker installation of Prysm and nethermind\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\n4.0.8\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n-\r\n",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1711061459",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12850#issuecomment-1711061459",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850",
    "id": 1711061459,
    "node_id": "IC_kwDOBvuov85l_LnT",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-08T04:35:41Z",
    "updated_at": "2023-09-08T04:35:41Z",
    "author_association": "MEMBER",
    "body": "Hey @kamilchodola , \r\n\r\nThanks for opening the issue, we do not currently directly implement the handlers for execution APIs, instead we use geth's bindings here. It appears to be the reason why have the `data` field instead of the `input` field. \r\nhttps://github.com/ethereum/go-ethereum/blob/master/ethclient/ethclient.go#L622\r\n\r\nWe can try and get this resolved upstream and then have the changes reflected in prysm.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1711061459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1711079027",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12850#issuecomment-1711079027",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12850",
    "id": 1711079027,
    "node_id": "IC_kwDOBvuov85l_P5z",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-08T05:03:33Z",
    "updated_at": "2023-09-08T05:03:33Z",
    "author_association": "MEMBER",
    "body": "A corresponding issue has been opened here:\r\nhttps://github.com/ethereum/go-ethereum/issues/28077\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1711079027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

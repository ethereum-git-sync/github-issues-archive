{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/9180",
  "id": 942856999,
  "node_id": "MDU6SXNzdWU5NDI4NTY5OTk=",
  "number": 9180,
  "title": "[Testing Pre-release Tracking] Altair manual testing of RPC end points",
  "user": {
    "login": "ahadda5",
    "id": 21275079,
    "node_id": "MDQ6VXNlcjIxMjc1MDc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ahadda5",
    "html_url": "https://github.com/ahadda5",
    "followers_url": "https://api.github.com/users/ahadda5/followers",
    "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
    "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
    "organizations_url": "https://api.github.com/users/ahadda5/orgs",
    "repos_url": "https://api.github.com/users/ahadda5/repos",
    "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ahadda5/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-07-13T06:51:59Z",
  "updated_at": "2021-08-02T11:06:52Z",
  "closed_at": "2021-08-02T11:06:52Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": " ðŸ’Ž Issue\r\n\r\n### Background\r\nAltair hard fork is coming up.  The aim is to log manual testing done. \r\n\r\n### Description\r\nThis issue was created to document the manual testing done \r\n\r\n1) Run local testnet where node has progressed past Altair fork epoch. Ensure you are on the hf1 branch, and set the mainnetAltairForkEpoch  to a past epoch\r\n2) Call v1alpha1 rpc end points and verify none breaks\r\n\r\n### Test cases\r\n\r\n- Run a beacon-chain using interop\r\n```\r\nrm -rf /tmp/genesis.szz\r\nbazel run //tools/genesis-state-gen -- --num-validators=4000 --output-ssz=/tmp/genesis.ssz --mainnet-config\r\nbazel run //beacon-chain -- --datadir /tmp/chaindata --force-clear-db --interop-genesis-state /tmp/genesis.ssz --interop-eth1data-votes --min-sync-peers=0 --http-web3provider=https://eth-goerli.alchemyapi.io/v2/XXX --deposit-contract 0x8A04d14125D0FDCDc742F4A05C051De07232EDa4 --pyrmont --bootstrap-node=\r\n\r\nbazel run //validator -- --beacon-rpc-provider localhost:4000 --interop-num-validators=4000 --interop-start-index=0 --force-clear-db  --enable-doppelganger\r\n\r\n```\r\nRPC server runs locally on 127.0.0.1:3500\r\n\r\n**Validator Get endpoints**\r\n\r\n```\r\n> curl -X GET \"http://localhost:3500/eth/v1alpha1/validator/attestation\" -H \"accept:application/json\"\r\n{\"slot\":\"0\", \"committeeIndex\":\"0\", \"beaconBlockRoot\":\"bjp4JpE+ZllhOrGbUbluuBafpsLt2v9V+R0AF8PMIKA=\", \"source\":{\"epoch\":\"0\", \"root\":\"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=\"}, \"target\":{\"epoch\":\"0\", \"root\":\"bjp4JpE+ZllhOrGbUbluuBafpsLt2v9V+R0AF8PMIKA=\"}}\r\n```\r\n\r\n```\r\n curl -X GET \"http://localhost:3500/eth/v1alpha1/validator/doppelganger\" -H \"accept:application/json\"\r\n{\"responses\":[]}\r\n```\r\n\r\n```\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validator/duties\" -H \"accept:application/json\"\r\n{\"duties\":[], \"currentEpochDuties\":[], \"nextEpochDuties\":[]}\r\n```\r\n\r\n```\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validator/domain\" -H \"accept:application/json\"\r\n{\"signatureDomain\":\"AAAAAF7RLYC3foiTjHLUPXkeTEDrLvr5eROisFCZe+c=\"}\r\n```\r\n```\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validator/chainstart/stream\" -H \"accept:application/json\"\r\n{\"started\":true, \"genesisTime\":\"1626712221\", \"genesisValidatorsRoot\":\"dgproeTAPl98qvl3MBelW8xWRT59pN1XbDawiU/VhpA=\"}\r\n```\r\n\r\n```\r\n curl -X GET \"http://localhost:3500/eth/v1alpha1/validator/activation/stream\" -H \"accept:application/json\"\r\n{\"statuses\":[]}\r\n{\"statuses\":[]}\r\n```\r\nFair , as no newly activated Validators were added. \r\n\r\n\r\n```\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validator/index\" -H \"accept:application/json\"\r\n{\"code\":13, \"message\":\"Could not find validator index for public key  not found\", \"details\":[]}a\r\n```\r\n\r\n```\r\n curl -X GET \"http://localhost:3500/eth/v1alpha1/validator/status\" -H \"accept:application/json\"\r\n{\"status\":\"UNKNOWN_STATUS\", \"eth1DepositBlockNumber\":\"0\", \"depositInclusionSlot\":\"0\", \"activationEpoch\":\"18446744073709551615\", \"positionInActivationQueue\":\"0\"}\r\n```\r\n\r\n```\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validator/statuses\" -H \"accept:application/json\"\r\n{\"publicKeys\":[], \"statuses\":[], \"indices\":[]}\r\n```\r\n\r\n```\r\n curl -X GET \"http://localhost:3500/eth/v1alpha1/validator/block\" -H \"accept:application/json\"\r\n{\"code\":13, \"message\":\"Could not advance slot to calculate proposer index: expected state.slot 236 < slot 0\", \"details\":[]}\r\n```\r\n",
  "closed_by": {
    "login": "ahadda5",
    "id": 21275079,
    "node_id": "MDQ6VXNlcjIxMjc1MDc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ahadda5",
    "html_url": "https://github.com/ahadda5",
    "followers_url": "https://api.github.com/users/ahadda5/followers",
    "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
    "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
    "organizations_url": "https://api.github.com/users/ahadda5/orgs",
    "repos_url": "https://api.github.com/users/ahadda5/repos",
    "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ahadda5/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/883317424",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9180#issuecomment-883317424",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180",
    "id": 883317424,
    "node_id": "IC_kwDOBvuov840plqw",
    "user": {
      "login": "ahadda5",
      "id": 21275079,
      "node_id": "MDQ6VXNlcjIxMjc1MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahadda5",
      "html_url": "https://github.com/ahadda5",
      "followers_url": "https://api.github.com/users/ahadda5/followers",
      "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
      "organizations_url": "https://api.github.com/users/ahadda5/orgs",
      "repos_url": "https://api.github.com/users/ahadda5/repos",
      "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahadda5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-20T11:27:59Z",
    "updated_at": "2021-07-20T11:27:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "**Beacon Get endpoints**\r\n\r\nNo errors were observed. \r\n```\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/attestations\"  -H \"application/json\"\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/attestations/indexed\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/attestations/stream\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/attestations/indexed/stream\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/attestations/pool\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/blocks\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/blocks/stream\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/chainhead/stream\"  -H \"application/json\"\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/chainhead\"  -H \"application/json\"\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/weak_subjectivity_checkpoint\"  -H \"application/json\"\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/committees\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators/balances\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validator?public_key=ksI31/tJG89wqk5Q5xswW89xv1pDiw4I8D/E901cPJuMgjBJ4xTRX4JmF5sakIQd\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators/activesetchanges\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators/queue\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators/performance\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators/assignments\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/validators/participation\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/config\"  -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/validators/info/stream\" -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/slashings/attester/submit\" -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/slashings/proposer/submit\" -H \"application/json\"^C\r\ncurl -X GET \"http://localhost:3500/eth/v1alpha1/beacon/individual_votes\" -H \"application/json\"^C\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/883317424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/883320959",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9180#issuecomment-883320959",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9180",
    "id": 883320959,
    "node_id": "IC_kwDOBvuov840pmh_",
    "user": {
      "login": "ahadda5",
      "id": 21275079,
      "node_id": "MDQ6VXNlcjIxMjc1MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahadda5",
      "html_url": "https://github.com/ahadda5",
      "followers_url": "https://api.github.com/users/ahadda5/followers",
      "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
      "organizations_url": "https://api.github.com/users/ahadda5/orgs",
      "repos_url": "https://api.github.com/users/ahadda5/repos",
      "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahadda5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-20T11:34:26Z",
    "updated_at": "2021-07-20T11:36:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Past Altair fork \r\n`[2021-07-20 15:35:01]  INFO validator: Submitted new block blockRoot=0x04903d6f810b fork=altair graffiti= numAttestations=1 numDeposits=0 pubKey=0x8fa0a67622f5 slot=638\r\n`\r\n\r\n@terencechain i did the above test cases. No errors were observed. \r\nDo you have specific (e2e, full-process etc) tests in mind, ones which could be executed through rpc calls? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/883320959/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

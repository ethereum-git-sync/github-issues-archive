{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/3970",
  "id": 521116805,
  "node_id": "MDU6SXNzdWU1MjExMTY4MDU=",
  "number": 3970,
  "title": "Identify Duplicated Logic in Prysm and Introduce Better Abstractions",
  "user": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 934596141,
      "node_id": "MDU6TGFiZWw5MzQ1OTYxNDE=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Discussion",
      "name": "Discussion",
      "color": "f9d0c4",
      "default": false,
      "description": "Simply a thread for talking about stuff"
    },
    {
      "id": 1085357407,
      "node_id": "MDU6TGFiZWwxMDg1MzU3NDA3",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Priority:%20Medium",
      "name": "Priority: Medium",
      "color": "bbf726",
      "default": false,
      "description": "Medium priority item"
    },
    {
      "id": 1241586918,
      "node_id": "MDU6TGFiZWwxMjQxNTg2OTE4",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Tracking",
      "name": "Tracking",
      "color": "d0ff7f",
      "default": false,
      "description": "Gotta Catch 'Em All"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2019-11-11T18:27:18Z",
  "updated_at": "2020-01-08T02:32:53Z",
  "closed_at": "2020-01-08T02:32:52Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "A major source of bugs in our repo is due to having multiple implementations of the same functions, with very few differences between each other such as the function's input arguments.\r\n\r\nThis is hard to notice because theres a strict spec version of a function that's in the `core/` . package, and at the same time, we find use cases for such function in other parts of our runtime but don't want to use the same input arguments as the original. A prime example is when verifying the integrity of a deposit event received from the eth1 chain RPC, we _want_ to use the same inner logic as `core.VerifyDeposit(block, deposit)`, but don't want to use the same input arguments (i.e., when verifying a lone deposit we don't want to have to create a block for that one purpose). So instead, we create our own, new `VerifyDeposit(deposit)` function that has the same inner logic but different input arguments. This leads to code that is hard to maintain and breaks without us often knowing, leading to unforeseen bugs at runtime.\r\n\r\nThis problem could be fixed if we used stronger abstractions in `core/` or other parts of Prysm from the start, so our code won't exactly read like the spec, but it will be more reusable and reduce bugs that can cripple our network.\r\n\r\nAdditionally, #3962 had a bunch of problems due to duplicated function logic from `core/` and `rpc/beacon_chain_server.go`.\r\n\r\nThis issue can be resolved after we go through our repo and identify potential duplicated logic which we can abstract into a more common, shared function as much as we can.",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970/reactions",
    "total_count": 1,
    "+1": 1,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/571864443",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/3970#issuecomment-571864443",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3970",
    "id": 571864443,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTg2NDQ0Mw==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-08T02:32:52Z",
    "updated_at": "2020-01-08T02:32:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this as there is no clear resolution to the problem and the RPC / core functions have since been improved/revamped in v0.9.3. We should aim to only keep issues around that have a clear resolution via a PR.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/571864443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

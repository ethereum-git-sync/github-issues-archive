{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838",
  "id": 744582244,
  "node_id": "MDU6SXNzdWU3NDQ1ODIyNDQ=",
  "number": 7838,
  "title": "RPC ListValidatorBalances index out range error",
  "user": {
    "login": "imnisen",
    "id": 12237169,
    "node_id": "MDQ6VXNlcjEyMjM3MTY5",
    "avatar_url": "https://avatars.githubusercontent.com/u/12237169?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/imnisen",
    "html_url": "https://github.com/imnisen",
    "followers_url": "https://api.github.com/users/imnisen/followers",
    "following_url": "https://api.github.com/users/imnisen/following{/other_user}",
    "gists_url": "https://api.github.com/users/imnisen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/imnisen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/imnisen/subscriptions",
    "organizations_url": "https://api.github.com/users/imnisen/orgs",
    "repos_url": "https://api.github.com/users/imnisen/repos",
    "events_url": "https://api.github.com/users/imnisen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/imnisen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1085357407,
      "node_id": "MDU6TGFiZWwxMDg1MzU3NDA3",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Priority:%20Medium",
      "name": "Priority: Medium",
      "color": "bbf726",
      "default": false,
      "description": "Medium priority item"
    },
    {
      "id": 1701740543,
      "node_id": "MDU6TGFiZWwxNzAxNzQwNTQz",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/API",
      "name": "API",
      "color": "30ef13",
      "default": false,
      "description": "Api related tasks"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "fabdarice",
    "id": 2358008,
    "node_id": "MDQ6VXNlcjIzNTgwMDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fabdarice",
    "html_url": "https://github.com/fabdarice",
    "followers_url": "https://api.github.com/users/fabdarice/followers",
    "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
    "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
    "organizations_url": "https://api.github.com/users/fabdarice/orgs",
    "repos_url": "https://api.github.com/users/fabdarice/repos",
    "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fabdarice/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fabdarice",
      "id": 2358008,
      "node_id": "MDQ6VXNlcjIzNTgwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fabdarice",
      "html_url": "https://github.com/fabdarice",
      "followers_url": "https://api.github.com/users/fabdarice/followers",
      "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
      "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
      "organizations_url": "https://api.github.com/users/fabdarice/orgs",
      "repos_url": "https://api.github.com/users/fabdarice/repos",
      "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fabdarice/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 12,
  "created_at": "2020-11-17T09:52:58Z",
  "updated_at": "2021-01-05T00:08:18Z",
  "closed_at": "2021-01-05T00:08:18Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "https://github.com/prysmaticlabs/prysm/blob/ad5151f25d0aa46e1357eb56dc5079d7d32a725a/beacon-chain/rpc/beacon/validators.go#L30\r\n\r\nHi, when requesting `ListValidatorBalances` api with a page_size and a non-existed pubkey (such as eth/v1alpha1/validators/balances?epoch=1346&pageSize=100&publicKeys=xxxx) , this handler would crash due to index out of range error. Which occured in my beacon node.\r\n\r\nAfter reading the code, I find that if pass the non-existed pubkey, `res` would contain one item while `balancesCount` is the length total validators, then `end` is also the total length, then `res[start:end]` would cause out of range index error.\r\n\r\nhttps://github.com/prysmaticlabs/prysm/blob/ad5151f25d0aa46e1357eb56dc5079d7d32a725a/beacon-chain/rpc/beacon/validators.go#L75\r\nIt seems not nessary to set `balancesCount` to total length first: `balancesCount := len(balances)`. As it is only needed in `if len(req.Indices) == 0 && len(req.PublicKeys) == 0 `situation , which could caculated alone.\r\n\r\n\r\nPart of the error logs:\r\n\r\n```\r\n[[90m[2020-11-17 16:52:52]^[[0m ^[[31mERROR^[[0m gRPC panicked! ^[[31merror^[[0m=runtime error: slice bounds out of range [:100] with capacity 1 ^[[31mstack^[[0m=goroutine 2707009 [running]:^M\r\nruntime/debug.Stack(0xc0000ec000, 0x19b8cb9, 0x5)^M\r\n        GOROOT/src/runtime/debug/stack.go:24 +0x9d^M\r\ngithub.com/prysmaticlabs/prysm/shared/traceutil.RecoveryHandlerFunc(0x1dc1420, 0xc019088450, 0x18aca20, 0xc009f41ac0, 0xc005dfb1c0, 0x43cc1c)^M\r\n        shared/traceutil/recovery_interceptor_option.go:29 +0x155^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware/recovery.recoverFrom(0x1dc1420, 0xc019088450, 0x18aca20, 0xc009f41ac0, 0x1b8ebb8, 0x5f8a00000000, 0x8)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/recovery/interceptors.go:53 +0x5a^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware/recovery.UnaryServerInterceptor.func1.1(0x1dc1420, 0xc019088450, 0xc000010138, 0xc005dfbab0)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/recovery/interceptors.go:27 +0x77^M\r\npanic(0x18aca20, 0xc009f41ac0)^M\r\n        GOROOT/src/runtime/panic.go:969 +0x166^M\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/rpc/beacon.(*Server).ListValidatorBalances(0xc000030ea0, 0x1dc1420, 0xc0190884e0, 0xc014877780, 0xc000030ea0, 0xc00026c4d0, 0x1b90390)^M\r\n        beacon-chain/rpc/beacon/validators.go:167 +0x1755^M\r\ngithub.com/prysmaticlabs/ethereumapis/eth/v1alpha1._BeaconChain_ListValidatorBalances_Handler.func1(0x1dc1420, 0xc0190884e0, 0x194d160, 0xc014877780, 0x17746a0, 0x2c0ddd8, 0x1900b80, 0x2c0d880)^M\r\n        bazel-out/k8-fastbuild/bin/external/com_github_prysmaticlabs_ethereumapis/eth/v1alpha1/linux_amd64_stripped/go_proto%/github.com/prysmaticlabs/ethereumapis/eth/v1alpha1/beacon_chain.pb.go:4088 +0x89^M\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/rpc.(*Service).validatorUnaryConnectionInterceptor(0xc00026c280, 0x1dc1420, 0xc0190884e0, 0x194d160, 0xc014877780, 0xc01e114860, 0xc01e114880, 0xc0190884e0, 0x1ddb880, 0x2c0d880, ...)^M\r\n        beacon-chain/rpc/service.go:422 +0x77^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x1dc1420, 0xc0190884e0, 0x194d160, 0xc014877780, 0x1a157d7, 0x38, 0x1dc1420, 0xc0190884e0)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/chain.go:25 +0x63^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware/tracing/opentracing.UnaryServerInterceptor.func1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0xc01e114860, 0xc01e1148a0, 0x3, 0x3, 0x1dcdc60, 0xc0170f3bc0)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/tracing/opentracing/server_interceptors.go:31 +0x165^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0x38, 0xc001f721e0, 0xc0101c2b30, 0x7f36af9ab701)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/chain.go:25 +0x63^M\r\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0xc01e114860, 0xc01e1148c0, 0xc019088390, 0xc0081d6a68, 0x431246, 0xc01e114900)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_prometheus/server_metrics.go:107 +0xad^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0x20, 0xc01e114900, 0x203007, 0x203007)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/chain.go:25 +0x63^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware/recovery.UnaryServerInterceptor.func1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0xc01e114860, 0xc01e1148e0, 0x0, 0x0, 0x0, 0x0)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/recovery/interceptors.go:31 +0xbc^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0xc00edcd200, 0xc01e114800, 0xc0081d6b30, 0x431ab8)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/chain.go:25 +0x63^M\r\ngithub.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1(0x1dc1420, 0xc019088450, 0x194d160, 0xc014877780, 0xc01e114860, 0xc01e114880, 0xc0081d6ba0, 0x552c18, 0x1895020, 0xc019088450)^M\r\n        external/com_github_grpc_ecosystem_go_grpc_middleware/chain.go:34 +0xd5^M\r\n```\r\n\r\n",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/728910963",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-728910963",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 728910963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODkxMDk2Mw==",
    "user": {
      "login": "fabdarice",
      "id": 2358008,
      "node_id": "MDQ6VXNlcjIzNTgwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fabdarice",
      "html_url": "https://github.com/fabdarice",
      "followers_url": "https://api.github.com/users/fabdarice/followers",
      "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
      "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
      "organizations_url": "https://api.github.com/users/fabdarice/orgs",
      "repos_url": "https://api.github.com/users/fabdarice/repos",
      "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fabdarice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T12:59:27Z",
    "updated_at": "2020-11-17T12:59:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "I can help w/ @nisdas if you wanna assign this one to me.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/728910963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/728911828",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-728911828",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 728911828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyODkxMTgyOA==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-17T13:01:06Z",
    "updated_at": "2020-11-17T13:01:06Z",
    "author_association": "MEMBER",
    "body": "Great, thanks ! Assigned to you",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/728911828/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731447320",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-731447320",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 731447320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTQ0NzMyMA==",
    "user": {
      "login": "fabdarice",
      "id": 2358008,
      "node_id": "MDQ6VXNlcjIzNTgwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fabdarice",
      "html_url": "https://github.com/fabdarice",
      "followers_url": "https://api.github.com/users/fabdarice/followers",
      "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
      "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
      "organizations_url": "https://api.github.com/users/fabdarice/orgs",
      "repos_url": "https://api.github.com/users/fabdarice/repos",
      "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fabdarice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-20T22:52:21Z",
    "updated_at": "2020-11-20T22:52:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "hey, @imnisen I am not able to reproduce what you seem to be experiencing.\r\nI've tried with current `master` your exact HTTP request and the curl is returning 100 balances correctly, even when passing incorrect/unknown public keys (which is also weird, but a different topic).\r\n\r\nTrying here also yields the same result: https://api.prylabs.network/#/BeaconChain/ListValidatorBalances\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731447320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731447665",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-731447665",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 731447665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMTQ0NzY2NQ==",
    "user": {
      "login": "fabdarice",
      "id": 2358008,
      "node_id": "MDQ6VXNlcjIzNTgwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fabdarice",
      "html_url": "https://github.com/fabdarice",
      "followers_url": "https://api.github.com/users/fabdarice/followers",
      "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
      "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
      "organizations_url": "https://api.github.com/users/fabdarice/orgs",
      "repos_url": "https://api.github.com/users/fabdarice/repos",
      "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fabdarice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-20T22:53:25Z",
    "updated_at": "2020-11-20T22:56:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "curl -X GET \"https://api.prylabs.net/eth/v1alpha1/validators/balances?epoch=32&publicKeys=xxxxx&pageSize=100\" -H \"accept: application/json\"\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/731447665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732012154",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-732012154",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 732012154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjAxMjE1NA==",
    "user": {
      "login": "imnisen",
      "id": 12237169,
      "node_id": "MDQ6VXNlcjEyMjM3MTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12237169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imnisen",
      "html_url": "https://github.com/imnisen",
      "followers_url": "https://api.github.com/users/imnisen/followers",
      "following_url": "https://api.github.com/users/imnisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/imnisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imnisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imnisen/subscriptions",
      "organizations_url": "https://api.github.com/users/imnisen/orgs",
      "repos_url": "https://api.github.com/users/imnisen/repos",
      "events_url": "https://api.github.com/users/imnisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imnisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T08:37:22Z",
    "updated_at": "2020-11-23T08:37:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fabdarice Sorry to reply late. What's the result of trying with incorrect/unknown public keys?  What crashes my node is a request with unknown pubkeys and page_size as parameters.\r\n\r\nWhen I request with a wrong pubkey:\r\n\r\n```\r\ncurl -X GET \"https://api.prylabs.net/eth/v1alpha1/validators/balances?epoch=32&publicKeys=kjvkS7cV367BceMmxX+EtBYnalDca6GUwOsLZ4Ayj6HV3mZDaFrwbMoMYHaRz/No&pageSize=100\" -H \"accept: application/json\"\r\n```\r\n\r\nI don't get any responses. Since I couldn't see the beacon chain node logs of the remote node behind `api.prylabs.net`, I couldn't tell if it crashed.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732012154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732020016",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-732020016",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 732020016,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjAyMDAxNg==",
    "user": {
      "login": "imnisen",
      "id": 12237169,
      "node_id": "MDQ6VXNlcjEyMjM3MTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12237169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imnisen",
      "html_url": "https://github.com/imnisen",
      "followers_url": "https://api.github.com/users/imnisen/followers",
      "following_url": "https://api.github.com/users/imnisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/imnisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imnisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imnisen/subscriptions",
      "organizations_url": "https://api.github.com/users/imnisen/orgs",
      "repos_url": "https://api.github.com/users/imnisen/repos",
      "events_url": "https://api.github.com/users/imnisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imnisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T08:53:55Z",
    "updated_at": "2020-11-23T08:53:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fabdarice  I could help fix this if you need.  However, what stops me before is to check other RPCs of the same logic.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732020016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732022474",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-732022474",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 732022474,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjAyMjQ3NA==",
    "user": {
      "login": "fab-spring",
      "id": 49083056,
      "node_id": "MDQ6VXNlcjQ5MDgzMDU2",
      "avatar_url": "https://avatars.githubusercontent.com/u/49083056?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fab-spring",
      "html_url": "https://github.com/fab-spring",
      "followers_url": "https://api.github.com/users/fab-spring/followers",
      "following_url": "https://api.github.com/users/fab-spring/following{/other_user}",
      "gists_url": "https://api.github.com/users/fab-spring/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fab-spring/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fab-spring/subscriptions",
      "organizations_url": "https://api.github.com/users/fab-spring/orgs",
      "repos_url": "https://api.github.com/users/fab-spring/repos",
      "events_url": "https://api.github.com/users/fab-spring/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fab-spring/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T08:58:58Z",
    "updated_at": "2020-11-23T08:58:58Z",
    "author_association": "NONE",
    "body": "@imnisen feel free! I cannot reproduce it.\nI've tried with invalid and incorrect keys.\nEven tried on the public prylabs api and local node.\nBoth would return a page of 100 validators (although weird behavior, should return an error)",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732022474/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732060799",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-732060799",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 732060799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczMjA2MDc5OQ==",
    "user": {
      "login": "imnisen",
      "id": 12237169,
      "node_id": "MDQ6VXNlcjEyMjM3MTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12237169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imnisen",
      "html_url": "https://github.com/imnisen",
      "followers_url": "https://api.github.com/users/imnisen/followers",
      "following_url": "https://api.github.com/users/imnisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/imnisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imnisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imnisen/subscriptions",
      "organizations_url": "https://api.github.com/users/imnisen/orgs",
      "repos_url": "https://api.github.com/users/imnisen/repos",
      "events_url": "https://api.github.com/users/imnisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imnisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-23T10:11:01Z",
    "updated_at": "2020-11-23T10:12:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fabdarice Could you describe the \"weird behavior\", I wonder what's this.\r\nAlso, what're the 100 validators if you request with an incorrect key?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/732060799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/734972951",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-734972951",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 734972951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNDk3Mjk1MQ==",
    "user": {
      "login": "0xKiwi",
      "id": 6251510,
      "node_id": "MDQ6VXNlcjYyNTE1MTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6251510?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xKiwi",
      "html_url": "https://github.com/0xKiwi",
      "followers_url": "https://api.github.com/users/0xKiwi/followers",
      "following_url": "https://api.github.com/users/0xKiwi/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xKiwi/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xKiwi/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xKiwi/subscriptions",
      "organizations_url": "https://api.github.com/users/0xKiwi/orgs",
      "repos_url": "https://api.github.com/users/0xKiwi/repos",
      "events_url": "https://api.github.com/users/0xKiwi/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xKiwi/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-27T20:14:33Z",
    "updated_at": "2020-11-27T20:14:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @fabdarice are you still taking care of this issue? Or is it not reproducible?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/734972951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/735144591",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-735144591",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 735144591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTE0NDU5MQ==",
    "user": {
      "login": "imnisen",
      "id": 12237169,
      "node_id": "MDQ6VXNlcjEyMjM3MTY5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12237169?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/imnisen",
      "html_url": "https://github.com/imnisen",
      "followers_url": "https://api.github.com/users/imnisen/followers",
      "following_url": "https://api.github.com/users/imnisen/following{/other_user}",
      "gists_url": "https://api.github.com/users/imnisen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/imnisen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/imnisen/subscriptions",
      "organizations_url": "https://api.github.com/users/imnisen/orgs",
      "repos_url": "https://api.github.com/users/imnisen/repos",
      "events_url": "https://api.github.com/users/imnisen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/imnisen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-28T08:55:04Z",
    "updated_at": "2020-11-28T08:59:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "I have tried with `api.prylabs.net`\r\n```\r\ncurl -i -X GET \"https://api.prylabs.net/eth/v1alpha1/validators/balances?epoch=0&pageSize=100&publicKeys=tTq3HTMwewaWqSBotzA85ExuEaFK08dA1eYJHnirROqEB4fhpAjFCgh8mFwBo6Vz\" -H \"accept: application/json\"\r\nHTTP/2 503\r\ncontent-type: application/grpc\r\ngrpc-status: 14\r\ngrpc-message: upstream connect error or disconnect/reset before headers. reset reason: connection termination\r\nx-backend: beacon-chain-prod-1\r\nx-source: istio-ingressgateway\r\ncontent-length: 0\r\ndate: Sat, 28 Nov 2020 08:53:58 GMT\r\nserver: istio-envoy\r\nx-envoy-upstream-service-time: 278\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/735144591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/735299702",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-735299702",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 735299702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDczNTI5OTcwMg==",
    "user": {
      "login": "fabdarice",
      "id": 2358008,
      "node_id": "MDQ6VXNlcjIzNTgwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fabdarice",
      "html_url": "https://github.com/fabdarice",
      "followers_url": "https://api.github.com/users/fabdarice/followers",
      "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
      "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
      "organizations_url": "https://api.github.com/users/fabdarice/orgs",
      "repos_url": "https://api.github.com/users/fabdarice/repos",
      "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fabdarice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-28T22:38:32Z",
    "updated_at": "2020-11-28T22:38:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hey @0xKiwi ,\r\n\r\nI am unable to reproduce what @imnisen is seeing.\r\n\r\nSee below on my end with passing an invalid `xxxxxx` publicKeys argument\r\n```\r\ncurl -i -X GET \"https://api.prylabs.net/eth/v1alpha1/validators/balances?epoch=32&publicKeys=\r\nxxxxx&pageSize=100\" -H \"accept: application/json\"\r\nHTTP/2 200\r\ncontent-type: application/json\r\nx-envoy-upstream-service-time: 5701\r\nx-backend: beacon-chain-prod-2\r\nx-source: unknown\r\ndate: Sat, 28 Nov 2020 22:37:41 GMT\r\nserver: istio-envoy\r\nx-backend: beacon-chain-prod-2\r\nx-source: istio-ingressgateway\r\n\r\n{\r\n \"epoch\": \"32\",\r\n \"balances\": [\r\n  {\r\n   \"publicKey\": \"j88oiWqF5edu6eUIQ44j5yU9oaI6ZQHjp9VhglINvPTNtErzJnMYGI8fQWg0IUba\",\r\n   \"index\": \"0\",\r\n   \"balance\": \"32001143871\"\r\n  },\r\n  {\r\n   \"publicKey\": \"hz5z7os+T88dL7DxA2uplqyZELWzSPZDi1+O9QhX1NqQddAhip0bmanq4jWjlwPh\",\r\n   \"index\": \"1\",\r\n   \"balance\": \"63997944254\"\r\n  },\r\n  {\r\n   \"publicKey\": \"jC9TXTvsZflctLpFVWbk7D3o2lwTpoFpng+A15Qtb9y87xjIzxj52hSqN5vdbSnF\",\r\n   \"index\": \"2\",\r\n   \"balance\": \"31997944254\"\r\n  },\r\n  {\r\n   \"publicKey\": \"qNm1tizDEUmtWKKBoik80/TcoRhVyYmD52/7YEedjpjlWS5UFfBACooj792EKzYF\",\r\n   \"index\": \"3\",\r\n   \"balance\": \"32000843212\"\r\n  },\r\n  {\r\n   \"publicKey\": \"rflDJ5Q18cGUrdHN/pnj/eUoTQRRpjgisD7DAbscq0OZ0Bb4EkYfC3GoIGuWyjN4\",\r\n   \"index\": \"4\",\r\n   \"balance\": \"32000932750\"\r\n\r\n[.....]\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/735299702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/754300923",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/7838#issuecomment-754300923",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/7838",
    "id": 754300923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDMwMDkyMw==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-05T00:08:11Z",
    "updated_at": "2021-01-05T00:08:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is now resolved with #8162 ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/754300923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

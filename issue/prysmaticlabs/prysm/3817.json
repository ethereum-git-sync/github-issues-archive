{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/3817",
  "id": 510354791,
  "node_id": "MDU6SXNzdWU1MTAzNTQ3OTE=",
  "number": 3817,
  "title": "rpc not working as expected on beacon node",
  "user": {
    "login": "mkinney",
    "id": 2219838,
    "node_id": "MDQ6VXNlcjIyMTk4Mzg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2219838?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mkinney",
    "html_url": "https://github.com/mkinney",
    "followers_url": "https://api.github.com/users/mkinney/followers",
    "following_url": "https://api.github.com/users/mkinney/following{/other_user}",
    "gists_url": "https://api.github.com/users/mkinney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mkinney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mkinney/subscriptions",
    "organizations_url": "https://api.github.com/users/mkinney/orgs",
    "repos_url": "https://api.github.com/users/mkinney/repos",
    "events_url": "https://api.github.com/users/mkinney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mkinney/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 5,
  "created_at": "2019-10-21T23:41:26Z",
  "updated_at": "2019-11-06T19:01:09Z",
  "closed_at": "2019-11-06T19:01:08Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "I was experimenting with https://prylabs.net/participate and was able to get it working without any issues. Good job!\r\n\r\nI wanted to see if the rpc was working. (just experimenting)\r\n\r\nI added ' -p 7000:7000' and '--grpc-gateway-port=7000' to the beacon-chain:latest docker command.\r\n\r\nI see the port 7000 is open but I'm getting:\r\n\r\n`curl: (56) Recv failure: Connection reset by peer`\r\n\r\nwhen I try:\r\n\r\n`curl -vvv http://localhost:7000/eth/v1alpha1/node/version`\r\n\r\nNote: I do see:\r\n`INFO gateway: Starting gRPC gateway. address=127.0.0.1:7000`\r\n\r\nI may have the endpoint address incorrectly. It may be nice to show the full URI or something.",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/544773608",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/3817#issuecomment-544773608",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817",
    "id": 544773608,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NDc3MzYwOA==",
    "user": {
      "login": "mkinney",
      "id": 2219838,
      "node_id": "MDQ6VXNlcjIyMTk4Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2219838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkinney",
      "html_url": "https://github.com/mkinney",
      "followers_url": "https://api.github.com/users/mkinney/followers",
      "following_url": "https://api.github.com/users/mkinney/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkinney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkinney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkinney/subscriptions",
      "organizations_url": "https://api.github.com/users/mkinney/orgs",
      "repos_url": "https://api.github.com/users/mkinney/repos",
      "events_url": "https://api.github.com/users/mkinney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkinney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-22T01:32:58Z",
    "updated_at": "2019-10-22T01:32:58Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for making the code changes/PR but I still think there is an issue.\r\n\r\nI see the docker images changed.\r\n\r\nI removed my docker images and re-pulled the latest.\r\n\r\nI started it like this:\r\n\r\n```\r\ndocker run -it -v /tmp/prysm-data:/data -p 4000:4000 -p 7000:7000 \\\r\n>   gcr.io/prysmaticlabs/prysm/beacon-chain:latest \\\r\n>   --datadir=/data \\\r\n>   --no-genesis-delay \\\r\n> --init-sync-no-verify --grpc-gateway-port=7000\r\n```\r\n\r\nHere's the top of the log (showing the commit version):\r\n\r\n```\r\n[2019-10-22 01:19:09]  INFO node: Starting beacon node version=Git commit: a440c32155c8491cb976498f009af4d1b892ac05. Built at: 2019-10-22 00:46:04+00:00\r\n[2019-10-22 01:19:09]  INFO registry: Starting 9 services: [*p2p.Service *powchain.Service *operations.Service *blockchain.Service *initialsync.InitialSync *sync.RegularSync *rpc.Service *gateway.Gateway *prometheus.Service]\r\n[2019-10-22 01:19:09]  INFO powchain: Connected to eth1 proof-of-work chain endpoint=wss://goerli.prylabs.net/websocket\r\n[2019-10-22 01:19:09]  INFO rpc: RPC-API listening on port port=:4000\r\n[2019-10-22 01:19:09]  WARN rpc: You are using an insecure gRPC connection! Provide a certificate and key to connect securely\r\n[2019-10-22 01:19:09]  INFO gateway: Starting gRPC gateway. address=127.0.0.1:7000\r\n```\r\n\r\nPort is open:\r\n\r\n```# netstat -antd | grep 7000\r\ntcp6       0      0 :::7000                 :::*                    LISTEN\r\n```\r\n\r\nStill get same error:\r\n\r\n```\r\n# curl -X GET \"http://localhost:7000/eth/v1alpha1/node/version\" -H \"accept: application/json\"\r\ncurl: (56) Recv failure: Connection reset by peer\r\n```\r\n\r\nAny ideas?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/544773608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/544781617",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/3817#issuecomment-544781617",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817",
    "id": 544781617,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NDc4MTYxNw==",
    "user": {
      "login": "mkinney",
      "id": 2219838,
      "node_id": "MDQ6VXNlcjIyMTk4Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2219838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkinney",
      "html_url": "https://github.com/mkinney",
      "followers_url": "https://api.github.com/users/mkinney/followers",
      "following_url": "https://api.github.com/users/mkinney/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkinney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkinney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkinney/subscriptions",
      "organizations_url": "https://api.github.com/users/mkinney/orgs",
      "repos_url": "https://api.github.com/users/mkinney/repos",
      "events_url": "https://api.github.com/users/mkinney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkinney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-22T02:23:38Z",
    "updated_at": "2019-10-22T02:23:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "I uninstalled docker.io and installed docker-ce by using https://docs.docker.com/install/linux/docker-ce/ubuntu/\r\n\r\nSame results.\r\n\r\nTrying from docker on mac as well. I get a slightly different error:\r\n\r\n```\r\n$ curl \"http://127.0.0.1:7000/eth/v1alpha1/node/version\"\r\ncurl: (52) Empty reply from server\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/544781617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/544788276",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/3817#issuecomment-544788276",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817",
    "id": 544788276,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0NDc4ODI3Ng==",
    "user": {
      "login": "mkinney",
      "id": 2219838,
      "node_id": "MDQ6VXNlcjIyMTk4Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2219838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkinney",
      "html_url": "https://github.com/mkinney",
      "followers_url": "https://api.github.com/users/mkinney/followers",
      "following_url": "https://api.github.com/users/mkinney/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkinney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkinney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkinney/subscriptions",
      "organizations_url": "https://api.github.com/users/mkinney/orgs",
      "repos_url": "https://api.github.com/users/mkinney/repos",
      "events_url": "https://api.github.com/users/mkinney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkinney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-22T03:06:15Z",
    "updated_at": "2019-10-22T03:06:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "I built locally on mac using bazel:\r\n\r\n```\r\n$ curl http://localhost:7000/eth/v1alpha1/node/version\r\n{\"version\":\"Git commit: {STABLE_GIT_COMMIT}. Built at: {DATE}\"}\r\n```\r\n\r\nSo, I don't think it's a code issue at this point.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/544788276/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/550370304",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/3817#issuecomment-550370304",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817",
    "id": 550370304,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDM3MDMwNA==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T15:47:31Z",
    "updated_at": "2019-11-06T15:47:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mkinney is this resolved by #3868?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/550370304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/550450417",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/3817#issuecomment-550450417",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/3817",
    "id": 550450417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ1MDQxNw==",
    "user": {
      "login": "mkinney",
      "id": 2219838,
      "node_id": "MDQ6VXNlcjIyMTk4Mzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2219838?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mkinney",
      "html_url": "https://github.com/mkinney",
      "followers_url": "https://api.github.com/users/mkinney/followers",
      "following_url": "https://api.github.com/users/mkinney/following{/other_user}",
      "gists_url": "https://api.github.com/users/mkinney/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mkinney/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mkinney/subscriptions",
      "organizations_url": "https://api.github.com/users/mkinney/orgs",
      "repos_url": "https://api.github.com/users/mkinney/repos",
      "events_url": "https://api.github.com/users/mkinney/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mkinney/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T18:54:25Z",
    "updated_at": "2019-11-06T18:54:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "With help from @prestonvanloon I was able to fix/test the issue.\r\n\r\nDid need to change the localhost to `0.0.0.0`.\r\n\r\nFor posterity, here is how I was able to test it. (from mac)\r\n\r\n`DOCKER_TAG=latest bazel run //beacon-chain:image_bundle --platforms=@io_bazel_rules_go//go/toolchain:linux_amd64_cgo`\r\n\r\n`docker run -v $HOME/prysm-data:/data -p 4000:4000 -p 7000:7000   --name beacon-node   gcr.io/prysmaticlabs/prysm/beacon-chain:latest   --datadir=/data   --no-genesis-delay   --grpc-gateway-port=7000`\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/550450417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

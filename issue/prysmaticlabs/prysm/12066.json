{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12066",
  "id": 1604625003,
  "node_id": "I_kwDOBvuov85fpKJr",
  "number": 12066,
  "title": "Chapella Devnet: failed to unmarshal state, detected fork=phase0: invalid ssz encoding",
  "user": {
    "login": "mohoff",
    "id": 6060612,
    "node_id": "MDQ6VXNlcjYwNjA2MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6060612?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mohoff",
    "html_url": "https://github.com/mohoff",
    "followers_url": "https://api.github.com/users/mohoff/followers",
    "following_url": "https://api.github.com/users/mohoff/following{/other_user}",
    "gists_url": "https://api.github.com/users/mohoff/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mohoff/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mohoff/subscriptions",
    "organizations_url": "https://api.github.com/users/mohoff/orgs",
    "repos_url": "https://api.github.com/users/mohoff/repos",
    "events_url": "https://api.github.com/users/mohoff/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mohoff/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2023-03-01T09:48:28Z",
  "updated_at": "2023-03-20T10:41:39Z",
  "closed_at": "2023-03-20T10:41:38Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nI'm following the guide in https://docs.prylabs.network/docs/advanced/proof-of-stake-devnet to start a devnet using Prysm v3.2.1. I generated the `genesis.ssz` using the prebuilt `prysmctl` (tried versions 3.1.0 and 3.2.1). I'm using the exact `prysmctl` command and `config.yml` as in the guide. Passed the genesis file path into `--interop-genesis-state` but also tried `--genesis-state` as it was recommended on Discord.\r\n\r\nWhen starting Prysm beacon node this error shows:\r\n\r\n```\r\ntime=\"2023-03-01 09:34:41\" level=debug msg=\"Starting DB\" prefix=node\r\ntime=\"2023-03-01 09:34:41\" level=info msg=\"Checking DB\" database-path=\"/home/prysm/.eth2/beaconchaindata\" prefix=node\r\ntime=\"2023-03-01 09:34:41\" level=info msg=\"Opening Bolt DB at /home/prysm/.eth2/beaconchaindata/beaconchain.db\" prefix=db\r\ncould not load genesis from file: failed to unmarshal state, detected fork=phase0: invalid ssz encoding. first variable element offset indexes into fixed value data\r\n```\r\n\r\n### Has this worked before in a previous version?\r\n\r\nWe had a local devnet running using Prysm v3.1.0. However, that version did not require generating a `genesis.ssz` (which seems a hard req under v3.2.1 as some logs showed) so setup was different.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nFollow the guide in https://docs.prylabs.network/docs/advanced/proof-of-stake-devnet and add Capella fields:\r\n\r\n```\r\nCAPELLA_FORK_EPOCH: 5\r\nCAPELLA_FORK_VERSION: 0x20000092\r\n```\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\ntime=\"2023-03-01 09:34:40\" level=info msg=\"Logs will be made persistent\" logFileName=\"/home/prysm/log\"\r\ntime=\"2023-03-01 09:34:40\" level=info msg=\"File logging initialized\"\r\ntime=\"2023-03-01 09:34:40\" level=info msg=\"Finished reading JWT secret from /home/prysm/.jwtsecret\"\r\ntime=\"2023-03-01 09:34:40\" level=warning msg=\"Enabling development mode flags\" prefix=flags\r\ntime=\"2023-03-01 09:34:40\" level=warning msg=\"Running on custom Ethereum network specified in a chain configuration yaml file\" prefix=flags\r\ntime=\"2023-03-01 09:34:41\" level=debug msg=\"Config file values: &{GenesisSlot:0 GenesisEpoch:0 FarFutureEpoch:18446744073709551615 FarFutureSlot:18446744073709551615 BaseRewardsPerEpoch:4 DepositContractTreeDepth:32 JustificationBitsLength:0 PresetBase:interop ConfigName:interop TargetCommitteeSize:128 MaxValidatorsPerCommittee:2048 MaxCommitteesPerSlot:64 MinPerEpochChurnLimit:4 ChurnLimitQuotient:65536 ShuffleRoundCount:90 MinGenesisActiveValidatorCount:16384 MinGenesisTime:1606824000 TargetAggregatorsPerCommittee:16 HysteresisQuotient:4 HysteresisDownwardMultiplier:1 HysteresisUpwardMultiplier:5 MinDepositAmount:1000000000 MaxEffectiveBalance:32000000000 EjectionBalance:16000000000 EffectiveBalanceIncrement:1000000000 BLSWithdrawalPrefixByte:0 ETH1AddressWithdrawalPrefixByte:1 ZeroHash:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] GenesisDelay:604800 MinAttestationInclusionDelay:1 SecondsPerSlot:12 SlotsPerEpoch:6 SqrRootSlotsPerEpoch:2 MinSeedLookahead:1 MaxSeedLookahead:4 EpochsPerEth1VotingPeriod:64 SlotsPerHistoricalRoot:8192 MinValidatorWithdrawabilityDelay:256 ShardCommitteePeriod:256 MinEpochsToInactivityPenalty:4 Eth1FollowDistance:2048 SafeSlotsToUpdateJustified:8 DeprecatedSafeSlotsToImportOptimistically:0 SecondsPerETH1Block:14 ProposerScoreBoost:40 IntervalsPerSlot:3 DepositChainID:1 DepositNetworkID:1 DepositContractAddress:0xab98823DD9f56dFB9f1459072631bDB1FF2Eb0Ea RandomSubnetsPerValidator:1 EpochsPerRandomSubnetSubscription:256 EpochsPerHistoricalVector:65536 EpochsPerSlashingsVector:8192 HistoricalRootsLimit:16777216 ValidatorRegistryLimit:1099511627776 BaseRewardFactor:64 WhistleBlowerRewardQuotient:512 ProposerRewardQuotient:8 InactivityPenaltyQuotient:67108864 MinSlashingPenaltyQuotient:128 ProportionalSlashingMultiplier:1 MaxProposerSlashings:16 MaxAttesterSlashings:2 MaxAttestations:128 MaxDeposits:16 MaxVoluntaryExits:16 MaxWithdrawalsPerPayload:16 MaxBlsToExecutionChanges:16 MaxValidatorsPerWithdrawalsSweep:16384 DomainBeaconProposer:[0 0 0 0] DomainRandao:[2 0 0 0] DomainBeaconAttester:[1 0 0 0] DomainDeposit:[3 0 0 0] DomainVoluntaryExit:[4 0 0 0] DomainSelectionProof:[5 0 0 0] DomainAggregateAndProof:[6 0 0 0] DomainSyncCommittee:[7 0 0 0] DomainSyncCommitteeSelectionProof:[8 0 0 0] DomainContributionAndProof:[9 0 0 0] DomainApplicationMask:[0 0 0 1] DomainApplicationBuilder:[0 0 0 1] DomainBLSToExecutionChange:[10 0 0 0] GweiPerEth:1000000000 BLSSecretKeyLength:32 BLSPubkeyLength:48 DefaultBufferSize:10000 ValidatorPrivkeyFileName:/validatorprivatekey WithdrawalPrivkeyFileName:/shardwithdrawalkey RPCSyncCheck:1ns EmptySignature:[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] DefaultPageSize:250 MaxPeersToSync:15 SlotsPerArchivedPoint:2048 GenesisCountdownInterval:1m0s BeaconStateFieldCount:21 BeaconStateAltairFieldCount:24 BeaconStateBellatrixFieldCount:25 BeaconStateCapellaFieldCount:28 WeakSubjectivityPeriod:54000 PruneSlasherStoragePeriod:10 SlashingProtectionPruningEpochs:512 GenesisForkVersion:[32 0 0 137] AltairForkVersion:[32 0 0 144] AltairForkEpoch:2 BellatrixForkVersion:[32 0 0 145] BellatrixForkEpoch:4 CapellaForkVersion:[32 0 0 146] CapellaForkEpoch:5 ForkVersionSchedule:map[[0 0 0 0]:0 [1 0 0 0]:74240 [2 0 0 0]:144896 [3 0 0 0]:18446744073709551615] ForkVersionNames:map[[0 0 0 0]:phase0 [1 0 0 0]:altair [2 0 0 0]:bellatrix [3 0 0 0]:capella] SafetyDecay:10 TimelySourceFlagIndex:0 TimelyTargetFlagIndex:1 TimelyHeadFlagIndex:2 TimelySourceWeight:14 TimelyTargetWeight:26 TimelyHeadWeight:14 SyncRewardWeight:2 WeightDenominator:64 ProposerWeight:8 TargetAggregatorsPerSyncSubcommittee:16 SyncCommitteeSubnetCount:4 SyncCommitteeSize:512 InactivityScoreBias:4 InactivityScoreRecoveryRate:16 EpochsPerSyncCommitteePeriod:256 InactivityPenaltyQuotientAltair:50331648 MinSlashingPenaltyQuotientAltair:64 ProportionalSlashingMultiplierAltair:2 MinSlashingPenaltyQuotientBellatrix:32 ProportionalSlashingMultiplierBellatrix:3 InactivityPenaltyQuotientBellatrix:16777216 MinSyncCommitteeParticipants:1 TerminalBlockHash:0x0000000000000000000000000000000000000000000000000000000000000000 TerminalBlockHashActivationEpoch:18446744073709551615 TerminalTotalDifficulty:50 DefaultFeeRecipient:0x0000000000000000000000000000000000000000 EthBurnAddressHex:0x0000000000000000000000000000000000000000 DefaultBuilderGasLimit:30000000 MaxBuilderConsecutiveMissedSlots:3 MaxBuilderEpochMissedSlots:8 ExecutionEngineTimeoutValue:8}\"\r\ntime=\"2023-03-01 09:34:41\" level=warning msg=\"In order to receive transaction fees from proposing blocks, you must provide flag --suggested-fee-recipient with a valid ethereum address when starting your beacon node. Please see our documentation for more information on this requirement (https://docs.prylabs.network/docs/execution-node/fee-recipient).\" prefix=node\r\ntime=\"2023-03-01 09:34:41\" level=debug msg=\"Starting DB\" prefix=node\r\ntime=\"2023-03-01 09:34:41\" level=info msg=\"Checking DB\" database-path=\"/home/prysm/.eth2/beaconchaindata\" prefix=node\r\ntime=\"2023-03-01 09:34:41\" level=info msg=\"Opening Bolt DB at /home/prysm/.eth2/beaconchaindata/beaconchain.db\" prefix=db\r\ncould not load genesis from file: failed to unmarshal state, detected fork=phase0: invalid ssz encoding. first variable element offset indexes into fixed value data\r\n</code></pre>\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nMacOs. Prysm + Geth run in a docker compose setup\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nv3.2.1\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\n\r\n",
  "closed_by": {
    "login": "mohoff",
    "id": 6060612,
    "node_id": "MDQ6VXNlcjYwNjA2MTI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6060612?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mohoff",
    "html_url": "https://github.com/mohoff",
    "followers_url": "https://api.github.com/users/mohoff/followers",
    "following_url": "https://api.github.com/users/mohoff/following{/other_user}",
    "gists_url": "https://api.github.com/users/mohoff/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mohoff/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mohoff/subscriptions",
    "organizations_url": "https://api.github.com/users/mohoff/orgs",
    "repos_url": "https://api.github.com/users/mohoff/repos",
    "events_url": "https://api.github.com/users/mohoff/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mohoff/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1453459470",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12066#issuecomment-1453459470",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066",
    "id": 1453459470,
    "node_id": "IC_kwDOBvuov85WoggO",
    "user": {
      "login": "mohoff",
      "id": 6060612,
      "node_id": "MDQ6VXNlcjYwNjA2MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6060612?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mohoff",
      "html_url": "https://github.com/mohoff",
      "followers_url": "https://api.github.com/users/mohoff/followers",
      "following_url": "https://api.github.com/users/mohoff/following{/other_user}",
      "gists_url": "https://api.github.com/users/mohoff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mohoff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mohoff/subscriptions",
      "organizations_url": "https://api.github.com/users/mohoff/orgs",
      "repos_url": "https://api.github.com/users/mohoff/repos",
      "events_url": "https://api.github.com/users/mohoff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mohoff/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-03T12:26:48Z",
    "updated_at": "2023-03-03T12:26:48Z",
    "author_association": "NONE",
    "body": "Talked on Discord with @saolyn @nisdas about this. Any update? Thank you",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1453459470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1475993375",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12066#issuecomment-1475993375",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12066",
    "id": 1475993375,
    "node_id": "IC_kwDOBvuov85X-d8f",
    "user": {
      "login": "mohoff",
      "id": 6060612,
      "node_id": "MDQ6VXNlcjYwNjA2MTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6060612?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mohoff",
      "html_url": "https://github.com/mohoff",
      "followers_url": "https://api.github.com/users/mohoff/followers",
      "following_url": "https://api.github.com/users/mohoff/following{/other_user}",
      "gists_url": "https://api.github.com/users/mohoff/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mohoff/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mohoff/subscriptions",
      "organizations_url": "https://api.github.com/users/mohoff/orgs",
      "repos_url": "https://api.github.com/users/mohoff/repos",
      "events_url": "https://api.github.com/users/mohoff/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mohoff/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-03-20T10:41:38Z",
    "updated_at": "2023-03-20T10:41:38Z",
    "author_association": "NONE",
    "body": "This specific issue was due to conflicting fork versions in the config.yml. When extending from preset `mainnet`, all fork versions have to be overwritten so there's no collision with mainnet versions. Closing this",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1475993375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

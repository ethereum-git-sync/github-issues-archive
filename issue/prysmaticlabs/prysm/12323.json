{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12323",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12323/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12323/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12323/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12323",
  "id": 1681211181,
  "node_id": "I_kwDOBvuov85kNT8t",
  "number": 12323,
  "title": "Enabling historical state representation via config file makes node crash on startup.",
  "user": {
    "login": "fkbenjamin",
    "id": 7634997,
    "node_id": "MDQ6VXNlcjc2MzQ5OTc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7634997?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fkbenjamin",
    "html_url": "https://github.com/fkbenjamin",
    "followers_url": "https://api.github.com/users/fkbenjamin/followers",
    "following_url": "https://api.github.com/users/fkbenjamin/following{/other_user}",
    "gists_url": "https://api.github.com/users/fkbenjamin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fkbenjamin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fkbenjamin/subscriptions",
    "organizations_url": "https://api.github.com/users/fkbenjamin/orgs",
    "repos_url": "https://api.github.com/users/fkbenjamin/repos",
    "events_url": "https://api.github.com/users/fkbenjamin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fkbenjamin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-04-24T12:52:33Z",
  "updated_at": "2023-05-18T13:18:58Z",
  "closed_at": "2023-05-18T13:18:58Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--üíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé\r\n\r\nHellooo! üòÑ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíéüíé-->\r\n\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nSetting  `enable-historical-state-representation: true` on a running Prysm node using (v4.0.3) results in the error mentioned below and the node crashing on startup. After removing the parameter and restarting the node, it works again and is able to start.\r\n\r\nI verified this on two separate Prysm nodes. One was connected to a Geth-Archival node, the other to a Geth-Fullnode.\r\n\r\nHere is an excerpt of my config.yaml:\r\n\r\n````\r\ndatadir: \"/home/<user>/prysm\"\r\ngrpc-max-msg-size: 104857600\r\nsubscribe-all-subnets: true\r\nenable-historical-state-representation: true\r\nslots-per-archive-point: 1024\r\n````\r\n### Has this worked before in a previous version?\r\n\r\n<!-- Did this behavior use to work in the previous version? -->\r\nThe last time I tried this on testnet, it worked.\r\n\r\n## üî¨ Minimal Reproduction\r\n\r\n<!--\r\nPlease let us know how we can reproduce this issue. Include the exact method you used to run Prysm along with any flags used in your beacon chain and/or validator. Make sure you don't upload any confidential files or private keys.\r\n-->\r\n\r\n## üî• Error\r\n\r\n<pre><code>\r\nApr 24 14:16:34 eth-geth-pry-a02 prysm.sh[4168000]: time=\"2023-04-24 14:16:34\" level=info msg=\"Performing a one-time migration to a more efficient database schema for state. It will take few minutes\" prefix=db\r\nApr 24 14:16:34 eth-geth-pry-a02 prysm.sh[4168000]: time=\"2023-04-24 14:16:34\" level=info msg=\"total keys = 787\" prefix=db\r\nApr 24 14:16:34 eth-geth-pry-a02 prysm.sh[4168000]: version=0x00010000 not found in any known fork choice schedule: unable to find requested BeaconChainConfig\r\nApr 24 14:16:34 eth-geth-pry-a02 systemd[1]: prysm.service: Main process exited, code=exited, status=1/FAILURE\r\nApr 24 14:16:34 eth-geth-pry-a02 systemd[1]: prysm.service: Failed with result 'exit-code'.\r\n</code></pre>\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\n<pre>\r\n  <code>\r\nUbuntu 20.04.6 LTS\r\n  </code>\r\n</pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n<pre>\r\n  <code>\r\nv4.0.3\r\n  </code>\r\n</pre>\r\n\r\n**Anything else relevant (validator index / public key)?**\r\nNot a node connected to any validators.\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12323/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12323/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/4829",
  "id": 563051826,
  "node_id": "MDU6SXNzdWU1NjMwNTE4MjY=",
  "number": 4829,
  "title": "beacon-chain fatal error: concurrent map iteration and map write",
  "user": {
    "login": "mondsen",
    "id": 53463563,
    "node_id": "MDQ6VXNlcjUzNDYzNTYz",
    "avatar_url": "https://avatars.githubusercontent.com/u/53463563?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/mondsen",
    "html_url": "https://github.com/mondsen",
    "followers_url": "https://api.github.com/users/mondsen/followers",
    "following_url": "https://api.github.com/users/mondsen/following{/other_user}",
    "gists_url": "https://api.github.com/users/mondsen/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/mondsen/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/mondsen/subscriptions",
    "organizations_url": "https://api.github.com/users/mondsen/orgs",
    "repos_url": "https://api.github.com/users/mondsen/repos",
    "events_url": "https://api.github.com/users/mondsen/events{/privacy}",
    "received_events_url": "https://api.github.com/users/mondsen/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-02-11T08:45:14Z",
  "updated_at": "2020-02-15T18:02:08Z",
  "closed_at": "2020-02-15T18:02:08Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "I am running on a 2x vCPU (VPS) with 4 GB RAM in Docker. My node crashed after roughly 17h with the fatal error: concurrent map iteration and map write. \r\n\r\nFull log for my node (see line 252409)\r\n[log.zip](https://github.com/prysmaticlabs/prysm/files/4184722/log.zip)\r\n\r\n",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/584773250",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/4829#issuecomment-584773250",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829",
    "id": 584773250,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDc3MzI1MA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T18:08:29Z",
    "updated_at": "2020-02-11T18:08:29Z",
    "author_association": "MEMBER",
    "body": "Relevant logs:\r\n```\r\nfatal error: concurrent map iteration and map write\r\n\r\ngoroutine 212 [running]:\r\nruntime.throw(0x1836c14, 0x26)\r\n        GOROOT/src/runtime/panic.go:774 +0x72 fp=0xc011fc96e0 sp=0xc011fc96b0 pc=0x461f62\r\nruntime.mapiternext(0xc011fc9a08)\r\n        GOROOT/src/runtime/map.go:858 +0x579 fp=0xc011fc9768 sp=0xc011fc96e0 pc=0x441bb9\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).processPendingAtts(0xc0000d7100, 0x1baef00, 0xc02fb591d0, 0x0, 0x0)\r\n        beacon-chain/sync/pending_attestations_queue.go:46 +0xa38 fp=0xc011fc9eb8 sp=0xc011fc9768 pc=0x11f8d08\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).processPendingAttsQueue.func1()\r\n        beacon-chain/sync/pending_attestations_queue.go:27 +0x3c fp=0xc011fc9ef0 sp=0xc011fc9eb8 pc=0x120883c\r\ngithub.com/prysmaticlabs/prysm/shared/runutil.RunEvery.func1(0xc00cd7a370, 0x25d5a88, 0x59, 0xc003f361c0, 0x1baee40, 0xc00cd52c80)\r\n        shared/runutil/every.go:22 +0xec fp=0xc011fc9fb0 sp=0xc011fc9ef0 pc=0xfff69c\r\nruntime.goexit()\r\n        GOROOT/src/runtime/asm_amd64.s:1357 +0x1 fp=0xc011fc9fb8 sp=0xc011fc9fb0 pc=0x492561\r\ncreated by github.com/prysmaticlabs/prysm/shared/runutil.RunEvery\r\n        shared/runutil/every.go:17 +0x136\r\n```\r\n\r\nThis will be fixed in #4833 ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/584773250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/585029659",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/4829#issuecomment-585029659",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829",
    "id": 585029659,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NTAyOTY1OQ==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-12T04:58:18Z",
    "updated_at": "2020-02-12T04:58:18Z",
    "author_association": "MEMBER",
    "body": "This is still happening in commit 0882908d2c9587d6a88a9d3cd45b7f0448b8329a.\r\n\r\n```\r\ngoroutine 117869 [running]:\r\nruntime.throw(0x1830f7f, 0x21)\r\n        GOROOT/src/runtime/panic.go:774 +0x72 fp=0xc013d757a8 sp=0xc013d75778 pc=0x461f62\r\nruntime.mapaccess1(0x15b3f20, 0xc000653c20, 0xc013d758f0, 0xc00000ca68)\r\n        GOROOT/src/runtime/map.go:411 +0x269 fp=0xc013d757f0 sp=0xc013d757a8 pc=0x440489\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).savePendingAtt(...)\r\n        beacon-chain/sync/pending_attestations_queue.go:137\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).validateAggregatedAtt(0xc000460c00, 0x1bb3500, 0xc01ae3ef00, 0xc01abd5680, 0x0)\r\n        beacon-chain/sync/validate_aggregate_proof.go:85 +0x2ed fp=0xc013d759f8 sp=0xc013d757f0 pc=0x12077dd\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).validateAggregateAndProof(0xc000460c00, 0x1bb3500, 0xc01ae3edb0, 0xc00ca5f140, 0x27, 0xc01f00fe60, 0x0)\r\n        beacon-chain/sync/validate_aggregate_proof.go:63 +0x3e6 fp=0xc013d75c50 sp=0xc013d759f8 pc=0x12072a6\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.(*Service).validateAggregateAndProof-fm(0x1bb34c0, 0xc01b2aad20, 0xc00ca5f140, 0x27, 0xc01f00fe60, 0xc00c2e2040)\r\n        beacon-chain/sync/validate_aggregate_proof.go:28 +0x5c fp=0xc013d75c98 sp=0xc013d75c50 pc=0x12101dc\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync.wrapAndReportValidation.func1(0x1bb34c0, 0xc01b2aad20, 0xc00ca5f140, 0x27, 0xc01f00fe60, 0xc013be6a00)\r\n        beacon-chain/sync/subscriber.go:184 +0x1c0 fp=0xc013d75d48 sp=0xc013d75c98 pc=0x120ed80\r\ngithub.com/libp2p/go-libp2p-pubsub.(*topicVal).validateMsg(0xc000653fb0, 0x1bb3440, 0xc00004afc0, 0xc00ca5f140, 0x27, 0xc01f00fe60, 0xc01ae34600)\r\n        external/com_github_libp2p_go_libp2p_pubsub/validation.go:335 +0x8a fp=0xc013d75dd0 sp=0xc013d75d48 pc=0xfc2e4a\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/585029659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/586597732",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/4829#issuecomment-586597732",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829",
    "id": 586597732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NjU5NzczMg==",
    "user": {
      "login": "DigiDr",
      "id": 2739450,
      "node_id": "MDQ6VXNlcjI3Mzk0NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2739450?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DigiDr",
      "html_url": "https://github.com/DigiDr",
      "followers_url": "https://api.github.com/users/DigiDr/followers",
      "following_url": "https://api.github.com/users/DigiDr/following{/other_user}",
      "gists_url": "https://api.github.com/users/DigiDr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DigiDr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DigiDr/subscriptions",
      "organizations_url": "https://api.github.com/users/DigiDr/orgs",
      "repos_url": "https://api.github.com/users/DigiDr/repos",
      "events_url": "https://api.github.com/users/DigiDr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DigiDr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-15T14:53:32Z",
    "updated_at": "2020-02-15T14:53:32Z",
    "author_association": "NONE",
    "body": "[PrsymaticFanboyDebugLog.txt](https://github.com/prysmaticlabs/prysm/files/4208602/PrsymaticFanboyDebugLog.txt)\r\n\r\n\r\nImage | gcr.io/prysmaticlabs/prysm/beacon-chain:latest@sha256:20046246d79d74bcb07db54390a3feb477d2a365472797831d6857322f8f52ba\r\n-- | --\r\nCMD | --datadir=/data  --p2p-host-ip=5.42.129.6 --web3provider=ws://goerli-node:9546/  --http-web3provider=http://goerli-node:9545/ --p2p-max-peers 120  --deposit-contract=0x4689a3C63CE249355C8a573B5974db21D2d1b8Ef\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/586597732/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/586625838",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/4829#issuecomment-586625838",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4829",
    "id": 586625838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NjYyNTgzOA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-15T18:02:08Z",
    "updated_at": "2020-02-15T18:02:08Z",
    "author_association": "MEMBER",
    "body": "I think that is an old image @KuDeTa. Can you update to a more recent image? I believe this has been resolved.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/586625838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8346",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8346/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8346/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8346/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/8346",
  "id": 795188195,
  "node_id": "MDU6SXNzdWU3OTUxODgxOTU=",
  "number": 8346,
  "title": "validator client proposes late when attesting on the same slot",
  "user": {
    "login": "potuz",
    "id": 16044918,
    "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/potuz",
    "html_url": "https://github.com/potuz",
    "followers_url": "https://api.github.com/users/potuz/followers",
    "following_url": "https://api.github.com/users/potuz/following{/other_user}",
    "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
    "organizations_url": "https://api.github.com/users/potuz/orgs",
    "repos_url": "https://api.github.com/users/potuz/repos",
    "events_url": "https://api.github.com/users/potuz/events{/privacy}",
    "received_events_url": "https://api.github.com/users/potuz/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2021-01-27T15:13:59Z",
  "updated_at": "2021-01-27T18:06:19Z",
  "closed_at": "2021-01-27T18:06:19Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\nValidator 62818 proposed at slot 407355 and attested in the same slot\r\n\r\n- The attestation was for the parent block 407344 (wrong head)\r\n- The block and the attestation left the beacon node 4 seconds into the slot. \r\n\r\nThe first can be confirmed on-chain. The second can be confirmed from the timestamps of the event log as well as on my own node I can check that the block 407355 arrived 4 seconds late. \r\n\r\nThere are anecdotal reports of the same happening since v1.1.0. The user reporting this has other similar events. Including when the late attestation is missed and even when the two indices (proposing and attesting) on the same slot are different. \r\n\r\n### What should be the correct behavior?\r\n\r\nThe block should leave immediately at the beginning of slot. The attestation should leave right at that time if attesting with `--attest-timely` or at 4 seconds if attesting without it. In both cases the attestation should be for the proposed block root instead of it's parent.  \r\n\r\n### Has this worked before in a previous version?\r\n\r\nIt was not reported before\r\n\r\n### Additional information:\r\n\r\nThis report is on Windows 10, running 50 validators and with `--attest-timely`. The user claims that no such event happens without this flag, but I question this, I believe (and @terencechain as well) that this flag should not be relevant. \r\n\r\n#### Private discussion:\r\n\r\nThere are two possible scenarios to blame, either the beacon-node is late in proposing the block or the validator client is late in proposing the block. Since this happened after v1.1.0 upgrade, it looks like some form of a problematic lock in the validator-client. ",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8346/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8346/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/8064",
  "id": 758600899,
  "node_id": "MDU6SXNzdWU3NTg2MDA4OTk=",
  "number": 8064,
  "title": "API returns block data for orphaned slots in finalized epochs",
  "user": {
    "login": "peterbitfly",
    "id": 1674920,
    "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/peterbitfly",
    "html_url": "https://github.com/peterbitfly",
    "followers_url": "https://api.github.com/users/peterbitfly/followers",
    "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
    "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
    "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
    "repos_url": "https://api.github.com/users/peterbitfly/repos",
    "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
    "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129906,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDY=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Enhancement",
      "name": "Enhancement",
      "color": "84b6eb",
      "default": false,
      "description": "New feature or request"
    },
    {
      "id": 1701740543,
      "node_id": "MDU6TGFiZWwxNzAxNzQwNTQz",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/API",
      "name": "API",
      "color": "30ef13",
      "default": false,
      "description": "Api related tasks"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2020-12-07T15:16:43Z",
  "updated_at": "2021-02-01T04:33:18Z",
  "closed_at": "2021-02-01T04:33:18Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nIt would be good if it is possible to disable returning orphaned blocks via the prysm API. Currently for example the following request on mainnet will return a block that has been orphaned:\r\n\r\n<pre><code>\r\ncurl localhost:3500/eth/v1alpha1/beacon/blocks?slot=43331\r\n</code></pre>\r\n\r\nAn API consumer gets no indication that the block is not canonical and will need to traverse the blockchain by parent root hashes in order to identify that block as an orphan. A good solution would be to include a `canonical` flag alongside the block data. \r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n<pre><code>Ubuntu </code></pre>\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n<pre><code>v1.0.3</code></pre>\r\n\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/745895436",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8064#issuecomment-745895436",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064",
    "id": 745895436,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NTg5NTQzNg==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T08:19:35Z",
    "updated_at": "2020-12-16T08:19:35Z",
    "author_association": "MEMBER",
    "body": "@terencechain , is it desirable to return non canonical blocks here, or should we be more strict on the kind of blocks returned by the endpoint ?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/745895436/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/756326314",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8064#issuecomment-756326314",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064",
    "id": 756326314,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjMyNjMxNA==",
    "user": {
      "login": "pinglamb",
      "id": 287503,
      "node_id": "MDQ6VXNlcjI4NzUwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinglamb",
      "html_url": "https://github.com/pinglamb",
      "followers_url": "https://api.github.com/users/pinglamb/followers",
      "following_url": "https://api.github.com/users/pinglamb/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinglamb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinglamb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinglamb/subscriptions",
      "organizations_url": "https://api.github.com/users/pinglamb/orgs",
      "repos_url": "https://api.github.com/users/pinglamb/repos",
      "events_url": "https://api.github.com/users/pinglamb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinglamb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-07T19:22:41Z",
    "updated_at": "2021-01-07T19:22:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@nisdas I checked the https://github.com/ethereum/eth2.0-APIs and it doesn't mention orphaned blocks should be excluded. \r\n\r\nAlthough `block` response itself doesn't have the `canonical` flag, the `block header` response has. So instead of traversing the blockchain by parent root, another call to fetch the `block header` is enough to check if the block is `canonical`.\r\n\r\nhttps://github.com/ethereum/eth2.0-APIs/blob/master/apis/beacon/blocks/block.yaml#L21\r\nhttps://github.com/ethereum/eth2.0-APIs/blob/master/apis/beacon/blocks/header.yaml#L25\r\n\r\nIs it okay for `prysm` to not follow the spec and respond extra data? like having `canonical` flag in `block` response as well.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/756326314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/756737272",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8064#issuecomment-756737272",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8064",
    "id": 756737272,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NjczNzI3Mg==",
    "user": {
      "login": "peterbitfly",
      "id": 1674920,
      "node_id": "MDQ6VXNlcjE2NzQ5MjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1674920?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterbitfly",
      "html_url": "https://github.com/peterbitfly",
      "followers_url": "https://api.github.com/users/peterbitfly/followers",
      "following_url": "https://api.github.com/users/peterbitfly/following{/other_user}",
      "gists_url": "https://api.github.com/users/peterbitfly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peterbitfly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peterbitfly/subscriptions",
      "organizations_url": "https://api.github.com/users/peterbitfly/orgs",
      "repos_url": "https://api.github.com/users/peterbitfly/repos",
      "events_url": "https://api.github.com/users/peterbitfly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peterbitfly/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-08T12:44:47Z",
    "updated_at": "2021-01-08T12:44:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@pinglamb this issue refers to the current Prysm API and not to the harmonized eth2.0 API.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/756737272/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302",
  "id": 955582150,
  "node_id": "MDU6SXNzdWU5NTU1ODIxNTA=",
  "number": 9302,
  "title": "Issues with posting data to the Ethereum API",
  "user": {
    "login": "rkapka",
    "id": 28876818,
    "node_id": "MDQ6VXNlcjI4ODc2ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkapka",
    "html_url": "https://github.com/rkapka",
    "followers_url": "https://api.github.com/users/rkapka/followers",
    "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
    "organizations_url": "https://api.github.com/users/rkapka/orgs",
    "repos_url": "https://api.github.com/users/rkapka/repos",
    "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkapka/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1701740543,
      "node_id": "MDU6TGFiZWwxNzAxNzQwNTQz",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/API",
      "name": "API",
      "color": "30ef13",
      "default": false,
      "description": "Api related tasks"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rkapka",
    "id": 28876818,
    "node_id": "MDQ6VXNlcjI4ODc2ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkapka",
    "html_url": "https://github.com/rkapka",
    "followers_url": "https://api.github.com/users/rkapka/followers",
    "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
    "organizations_url": "https://api.github.com/users/rkapka/orgs",
    "repos_url": "https://api.github.com/users/rkapka/repos",
    "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkapka/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2021-07-29T08:14:38Z",
  "updated_at": "2021-08-05T08:01:20Z",
  "closed_at": "2021-08-05T08:01:20Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎\r\n\r\nHellooo! 😄 \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\n💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎💎-->\r\n\r\n# 🐞 Bug Report\r\n\r\n### Description\r\n\r\nSome problem with posting data to the API have been reported by our users.\r\n\r\n**Attestations**\r\n> Trying to send in attestations with the HTTP API and receiving errors of the form `{\"index\":0,\"message\":\"attestation slot 1813226 + inclusion delay 1 \\u003e state slot 1813226\"}` I'm pretty sure this attestation should be accepted, and the message isn't clear as to why it's being rejected (at the time of the rejection state slot is indeed 1813226)\r\n\r\n**Blocks**\r\n> problem to produce block `{\"code\":13,\"message\":\"Could not advance slot to calculate proposer index: expected state.slot 2111 < slot 2111\",\"details\":[]}` (on grpc-gateway)  on local testnet, and strange is that test found that block\r\n\r\n\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/888910889",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302#issuecomment-888910889",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
    "id": 888910889,
    "node_id": "IC_kwDOBvuov840-7Qp",
    "user": {
      "login": "ahadda5",
      "id": 21275079,
      "node_id": "MDQ6VXNlcjIxMjc1MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahadda5",
      "html_url": "https://github.com/ahadda5",
      "followers_url": "https://api.github.com/users/ahadda5/followers",
      "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
      "organizations_url": "https://api.github.com/users/ahadda5/orgs",
      "repos_url": "https://api.github.com/users/ahadda5/repos",
      "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahadda5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T08:24:26Z",
    "updated_at": "2021-07-29T08:24:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "what was the POST/GET data? ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/888910889/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/888914608",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302#issuecomment-888914608",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
    "id": 888914608,
    "node_id": "IC_kwDOBvuov840-8Kw",
    "user": {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T08:29:13Z",
    "updated_at": "2021-07-29T08:29:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ahadda5 I think this might be a version of the *off-by-one* error. We are probably checking something using `<`/`>` when it should be `<=`/`>=`",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/888914608/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889216714",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302#issuecomment-889216714",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
    "id": 889216714,
    "node_id": "IC_kwDOBvuov841AF7K",
    "user": {
      "login": "ahadda5",
      "id": 21275079,
      "node_id": "MDQ6VXNlcjIxMjc1MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahadda5",
      "html_url": "https://github.com/ahadda5",
      "followers_url": "https://api.github.com/users/ahadda5/followers",
      "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
      "organizations_url": "https://api.github.com/users/ahadda5/orgs",
      "repos_url": "https://api.github.com/users/ahadda5/repos",
      "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahadda5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T14:56:35Z",
    "updated_at": "2021-07-29T14:57:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rkapka  one thing to note, based on running @BeroBurny test case for the 500 error: \r\n\r\nis that running /eth/v1/events?topics=attestation (or block) on port 5051( ethApiPort)  causes the error, \"_unexpected end of JSON input\"_ , however running the same on port 5050 (grpc server ) it is fine! \r\nSo its ethApiPort vs grpcGatewayPort implementation at least for this \"unexpected JSON error\". \r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889216714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889250127",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302#issuecomment-889250127",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
    "id": 889250127,
    "node_id": "IC_kwDOBvuov841AOFP",
    "user": {
      "login": "ahadda5",
      "id": 21275079,
      "node_id": "MDQ6VXNlcjIxMjc1MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahadda5",
      "html_url": "https://github.com/ahadda5",
      "followers_url": "https://api.github.com/users/ahadda5/followers",
      "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
      "organizations_url": "https://api.github.com/users/ahadda5/orgs",
      "repos_url": "https://api.github.com/users/ahadda5/repos",
      "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahadda5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T15:37:36Z",
    "updated_at": "2021-07-29T15:37:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "also, since this error was observed through SSE, could it be that this line requires   (see [this](https://stackoverflow.com/questions/27994327/golang-json-unmarshal-unexpected-end-of-json-input)\r\n`json.NewDecoder(msg.Data.Body).Decode(eventData)` instead of  `json.Unmarshal(msg.Data, eventData);`",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889250127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889293325",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302#issuecomment-889293325",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
    "id": 889293325,
    "node_id": "IC_kwDOBvuov841AYoN",
    "user": {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T16:33:00Z",
    "updated_at": "2021-07-29T16:33:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @rkapka one thing to note, based on running @BeroBurny test case for the 500 error:\r\n> \r\n> is that running /eth/v1/events?topics=attestation (or block) on port 5051( ethApiPort) causes the error, \"_unexpected end of JSON input\"_ , however running the same on port 5050 (grpc server ) it is fine!\r\n> So its ethApiPort vs grpcGatewayPort implementation at least for this \"unexpected JSON error\".\r\n\r\nI already looked at the events issue and the problem there is less obvious. It would be great if you could concentrate on the 2 quotes bugs.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889293325/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889691468",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9302#issuecomment-889691468",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9302",
    "id": 889691468,
    "node_id": "IC_kwDOBvuov841B51M",
    "user": {
      "login": "mcdee",
      "id": 511384,
      "node_id": "MDQ6VXNlcjUxMTM4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/511384?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcdee",
      "html_url": "https://github.com/mcdee",
      "followers_url": "https://api.github.com/users/mcdee/followers",
      "following_url": "https://api.github.com/users/mcdee/following{/other_user}",
      "gists_url": "https://api.github.com/users/mcdee/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mcdee/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mcdee/subscriptions",
      "organizations_url": "https://api.github.com/users/mcdee/orgs",
      "repos_url": "https://api.github.com/users/mcdee/repos",
      "events_url": "https://api.github.com/users/mcdee/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mcdee/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T07:28:37Z",
    "updated_at": "2021-07-30T07:28:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Here is some recent information.  The following was sent to `/eth/v1/beacon/pool/attestations`:\r\n\r\n```\r\n[\r\n  {\r\n    \"aggregation_bits\": \"0x0000000000008000000000000000000002\",\r\n    \"data\": {\r\n      \"slot\": \"1827397\",\r\n      \"index\": \"17\",\r\n      \"beacon_block_root\": \"0x27fc584f7b69f8a010bce415c66644ce93bc35f92b27703fabad81ce0f4c5f04\",\r\n      \"source\": {\r\n        \"epoch\": \"57105\",\r\n        \"root\": \"0x68d2ca9a58312e26ff5a59a78202bafeb8688a64cb67fc81a4839152e04c1929\"\r\n      },\r\n      \"target\": {\r\n        \"epoch\": \"57106\",\r\n        \"root\": \"0x1bba17596b00db33b3c8910fb2572a4e857efc786c6f479a506938ba2328cd51\"\r\n      }\r\n    },\r\n    \"signature\": \"0x90f58fed9a43a5a29f85409e72ee71f0295b6135e750821693633df2d64cadc95615ce33ab256a241b54571eb9f9cd5c031f1fb8a7dda95df65710c9de63b12fb926dcf5f68da4371b0c6a98b572fa65c5aba68dc783f812f3bdbfcc5d622d33\"\r\n  }\r\n]\r\n```\r\n\r\nThis was sent to a pyrmont node at 2021-07-30T08:19:35+01:00, which is four seconds in to the beginning of slot 1,827,397:\r\n\r\n```\r\n$ ethdo chain time --timestamp='2021-07-30T08:19:35+0100'\r\nEpoch 57106\r\n  Epoch start 2021-07-30 08:18:31\r\n  Epoch end 2021-07-30 08:24:55\r\nSlot 1827397\r\n  Slot start 2021-07-30 08:19:31\r\n  Slot end 2021-07-30 08:19:43\r\n```\r\n\r\nThe response received was:\r\n\r\n```\r\n[\r\n  {\r\n    \"index\": 0,\r\n    \"message\": \"attestation slot 1827397 + inclusion delay 1 \\u003e state slot 1827397\"\r\n  }\r\n]\r\n```\r\n\r\nThe last log entries in prysm are:\r\n\r\n```\r\n[2021-07-30 08:19:31]  INFO blockchain: Synced new block block=0x27fc584f... epoch=57106 finalizedEpoch=57104 finalizedRoot=0xb3094cb7... slot=1827397 slotInEpoch=5\r\n[2021-07-30 08:19:31]  INFO blockchain: Finished applying state transition attestations=107\r\n```\r\n\r\nThis is running against the current head of the develop branch \r\n\r\n```\r\n$ rev-parse HEAD\r\n560fe694259d3a223496f5f2feb5f20aa9c295e7\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/889691468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

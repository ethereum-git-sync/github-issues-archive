{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12208",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12208/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12208/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12208/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12208",
  "id": 1646491863,
  "node_id": "I_kwDOBvuov85iI3jX",
  "number": 12208,
  "title": "Beacon api get header error: nil summary returned from the DB",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 0,
  "created_at": "2023-03-29T20:36:18Z",
  "updated_at": "2023-03-30T14:09:38Z",
  "closed_at": "2023-03-30T14:09:38Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Reported from a user and this was working in `3.2.2`\r\n```\r\ncurl --silent localhost:3500/eth/v1/beacon/headers/6100326 | jq .\r\n{\r\n  \"message\": \"Could not check if block is optimistic: nil summary returned from the DB\",\r\n  \"code\": 500\r\n}\r\n```\r\n\r\nThe state summary from DB will return nil if the state summary does not exist in the DB. Looking at the State Summary DB implementation, it will try the cache before it tries the DB. The state summary is saved next to the state and the block during regular sync and saved every block during the initial sync. The main question is how did end up in a condition where the block exists in the DB but the state summary does not exist in the DB\r\n",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12208/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12208/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[

]

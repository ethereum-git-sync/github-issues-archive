{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/9940",
  "id": 1062848358,
  "node_id": "I_kwDOBvuov84_Wcdm",
  "number": 9940,
  "title": "future sync committee membership API returns invalid state id error",
  "user": {
    "login": "kevinwucodes",
    "id": 1930629,
    "node_id": "MDQ6VXNlcjE5MzA2Mjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1930629?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/kevinwucodes",
    "html_url": "https://github.com/kevinwucodes",
    "followers_url": "https://api.github.com/users/kevinwucodes/followers",
    "following_url": "https://api.github.com/users/kevinwucodes/following{/other_user}",
    "gists_url": "https://api.github.com/users/kevinwucodes/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/kevinwucodes/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/kevinwucodes/subscriptions",
    "organizations_url": "https://api.github.com/users/kevinwucodes/orgs",
    "repos_url": "https://api.github.com/users/kevinwucodes/repos",
    "events_url": "https://api.github.com/users/kevinwucodes/events{/privacy}",
    "received_events_url": "https://api.github.com/users/kevinwucodes/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    },
    {
      "id": 1701740543,
      "node_id": "MDU6TGFiZWwxNzAxNzQwNTQz",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/API",
      "name": "API",
      "color": "30ef13",
      "default": false,
      "description": "Api related tasks"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "rkapka",
    "id": 28876818,
    "node_id": "MDQ6VXNlcjI4ODc2ODE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rkapka",
    "html_url": "https://github.com/rkapka",
    "followers_url": "https://api.github.com/users/rkapka/followers",
    "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
    "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
    "organizations_url": "https://api.github.com/users/rkapka/orgs",
    "repos_url": "https://api.github.com/users/rkapka/repos",
    "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rkapka/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "rkapka",
      "id": 28876818,
      "node_id": "MDQ6VXNlcjI4ODc2ODE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/28876818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkapka",
      "html_url": "https://github.com/rkapka",
      "followers_url": "https://api.github.com/users/rkapka/followers",
      "following_url": "https://api.github.com/users/rkapka/following{/other_user}",
      "gists_url": "https://api.github.com/users/rkapka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rkapka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rkapka/subscriptions",
      "organizations_url": "https://api.github.com/users/rkapka/orgs",
      "repos_url": "https://api.github.com/users/rkapka/repos",
      "events_url": "https://api.github.com/users/rkapka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rkapka/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-11-24T20:02:34Z",
  "updated_at": "2021-11-28T17:34:24Z",
  "closed_at": "2021-11-28T17:34:24Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž\r\n\r\nHellooo! ðŸ˜„ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž-->\r\n\r\n# ðŸž Bug Report\r\n\r\n### Description\r\n\r\nWhen trying to obtain the next membership set of sync committees, Prysm is unable to provide that membership.  Teku, however, is able to provide the next sync committee membership.  I'm not sure if Prysm or Teku is out of spec.\r\n\r\n### Has this worked before in a previous version?\r\n\r\nNo, obtaining future sync committee membership does not seem to have ever worked in Prysm.\r\n\r\n## ðŸ”¬ Minimal Reproduction\r\n\r\nLet's suppose the current epoch is 80621.  The next sync committee epoch would be 80621 + 256 = 80877.\r\n\r\n```\r\ncurl 'http://192.168.0.1:3500/eth/v1/beacon/states/finalized/sync_committees?epoch=80877'\r\n```\r\n\r\nWhen calling this, I get the Prysm error below:\r\n\r\n## ðŸ”¥ Error\r\n\r\n```\r\n{\"message\":\"Could not fetch beacon state using request: rpc error: code = Internal desc = Invalid state ID: slot cannot be in the future\",\"code\":500}\r\n```\r\n\r\n**This error does not occur when using Teku.  Teku returns the next sync committees membership.**\r\n\r\n\r\n## ðŸŒ  Your Environment\r\n\r\n**Operating System:**\r\n\r\n- Ubuntu Server 20.04.3 LTS (Focal Fossa)\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n- v2.0.3\r\n  \r\n**Anything else relevant (validator index / public key)?**\r\n\r\n- None.\r\n\r\n\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/979011733",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9940#issuecomment-979011733",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940",
    "id": 979011733,
    "node_id": "IC_kwDOBvuov846WoiV",
    "user": {
      "login": "mrabino1",
      "id": 4902221,
      "node_id": "MDQ6VXNlcjQ5MDIyMjE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4902221?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mrabino1",
      "html_url": "https://github.com/mrabino1",
      "followers_url": "https://api.github.com/users/mrabino1/followers",
      "following_url": "https://api.github.com/users/mrabino1/following{/other_user}",
      "gists_url": "https://api.github.com/users/mrabino1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mrabino1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mrabino1/subscriptions",
      "organizations_url": "https://api.github.com/users/mrabino1/orgs",
      "repos_url": "https://api.github.com/users/mrabino1/repos",
      "events_url": "https://api.github.com/users/mrabino1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mrabino1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-25T09:24:37Z",
    "updated_at": "2021-11-25T09:24:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "related .. \r\n\r\n021-11-24 18:28:40,840 Incremented Retry for (url='/eth/v1/beacon/states/2458798/validator_balances'): Retry(total=4, connect=None, read=None, redirect=None, status=None)\r\n2021-11-24 18:28:40,841 Retry: /eth/v1/beacon/states/2458798/validator_balances\r\n\r\nException: Error while fetching data from beacon node: {\"message\":\"could not proxy request: Get \"http://127.0.0.1:3500/internal/eth/v1/beacon/states/MjQwODM5OA==/validator_balances/\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\",\"code\":500}\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/979011733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/979018246",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9940#issuecomment-979018246",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9940",
    "id": 979018246,
    "node_id": "IC_kwDOBvuov846WqIG",
    "user": {
      "login": "potuz",
      "id": 16044918,
      "node_id": "MDQ6VXNlcjE2MDQ0OTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16044918?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/potuz",
      "html_url": "https://github.com/potuz",
      "followers_url": "https://api.github.com/users/potuz/followers",
      "following_url": "https://api.github.com/users/potuz/following{/other_user}",
      "gists_url": "https://api.github.com/users/potuz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/potuz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/potuz/subscriptions",
      "organizations_url": "https://api.github.com/users/potuz/orgs",
      "repos_url": "https://api.github.com/users/potuz/repos",
      "events_url": "https://api.github.com/users/potuz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/potuz/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-25T09:29:44Z",
    "updated_at": "2021-11-26T19:04:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "> related ..\r\n> \r\n> 021-11-24 18:28:40,840 Incremented Retry for (url='/eth/v1/beacon/states/2458798/validator_balances'): Retry(total=4, connect=None, read=None, redirect=None, status=None) 2021-11-24 18:28:40,841 Retry: /eth/v1/beacon/states/2458798/validator_balances\r\n> \r\n> Exception: Error while fetching data from ...\r\n\r\nThis is not related to the issue. If it's happening consistently perhaps you should open a different one\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/979018246/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

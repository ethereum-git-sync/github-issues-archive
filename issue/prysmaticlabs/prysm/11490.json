{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/11490",
  "id": 1383169557,
  "node_id": "I_kwDOBvuov85ScX4V",
  "number": 11490,
  "title": "mev-boost context deadline exceeded",
  "user": {
    "login": "Chaz27",
    "id": 3690369,
    "node_id": "MDQ6VXNlcjM2OTAzNjk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3690369?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Chaz27",
    "html_url": "https://github.com/Chaz27",
    "followers_url": "https://api.github.com/users/Chaz27/followers",
    "following_url": "https://api.github.com/users/Chaz27/following{/other_user}",
    "gists_url": "https://api.github.com/users/Chaz27/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Chaz27/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Chaz27/subscriptions",
    "organizations_url": "https://api.github.com/users/Chaz27/orgs",
    "repos_url": "https://api.github.com/users/Chaz27/repos",
    "events_url": "https://api.github.com/users/Chaz27/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Chaz27/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 3,
  "created_at": "2022-09-23T01:03:56Z",
  "updated_at": "2022-10-19T14:18:40Z",
  "closed_at": "2022-10-19T14:18:40Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "<!--ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž\r\n\r\nHellooo! ðŸ˜„ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž-->\r\n\r\n# ðŸ’Ž Issue\r\n\r\nI've setup mev-boost locally and connected to the endpoint via the beacon node config --http-mev-relay=\"http://localhost:18550\".\r\nHowever both times trying to retrieve a block I've received the error message \"context deadline exceeded\". I'm guessing this is a timeout error?\r\n\r\n> ERROR rpc/validator: Failed to build a block from external builder, falling back to local execution client error=could not get payload header: Get \"http://localhost:18550/eth/v1/builder/header/xxxxxxx/xxxxxxx/xxxxxxx\": context deadline exceeded\r\n\r\nIn the mev-boost logs, there are no errors, all requests have success 200. However what I did notice is the last request took 0.941017 seconds to process. I'm guessing there is some lag time between my server (not US based) and wherever the relays are.\r\n\r\nWhat timeout limit does prysm run for these relay requests? Are there any options to increase this and if so, do you then run the risk of being late on a block proposal? Or perhaps is there a way to request the block slightly earlier to account for the delay?\r\n",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1256313572",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11490#issuecomment-1256313572",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490",
    "id": 1256313572,
    "node_id": "IC_kwDOBvuov85K4dLk",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-23T14:49:23Z",
    "updated_at": "2022-09-23T14:49:23Z",
    "author_association": "MEMBER",
    "body": "The builder API specification says honest proposers must abort the SignedBuilderBid request after 1s. \r\n\r\nhttps://github.com/ethereum/builder-specs/blob/main/specs/validator.md#relation-to-local-block-building\r\n\r\nThis timeout is not configurable in Prysm. Consider using a different relay or local block production only. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1256313572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1258749081",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11490#issuecomment-1258749081",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490",
    "id": 1258749081,
    "node_id": "IC_kwDOBvuov85LBvyZ",
    "user": {
      "login": "Chaz27",
      "id": 3690369,
      "node_id": "MDQ6VXNlcjM2OTAzNjk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3690369?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Chaz27",
      "html_url": "https://github.com/Chaz27",
      "followers_url": "https://api.github.com/users/Chaz27/followers",
      "following_url": "https://api.github.com/users/Chaz27/following{/other_user}",
      "gists_url": "https://api.github.com/users/Chaz27/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Chaz27/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Chaz27/subscriptions",
      "organizations_url": "https://api.github.com/users/Chaz27/orgs",
      "repos_url": "https://api.github.com/users/Chaz27/repos",
      "events_url": "https://api.github.com/users/Chaz27/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Chaz27/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-26T23:08:58Z",
    "updated_at": "2022-09-26T23:08:58Z",
    "author_association": "NONE",
    "body": "So mev-boost has a default setting of 950ms timeout while asking for getHeader. The reason the logs showed 0.94xxxx is that several relays were timing out, so it was waiting until 950ms before returning the best bid. Perhaps the 50ms was not enough for prysm to validate the response.\r\n\r\nI then was able to adjust the getHeader timeout via a flag in mev-boost. I set it to 700ms. The response returned within 700ms in the mev-boost logs. However prysm still failed to process the block with a context deadline exceeded error. Note that mev-boost and prysm are running on the same machine, so there is no lag in the connection.\r\n\r\nIs there anything else I can troubleshoot here? I feel like prysm is giving up too early, but I don't fully understand the timing of everything. My understanding is that the 1 second wait time is for the header only, not the whole block. Because once it signs the mev-boost block, it won't sign a duplicate locally produced block.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1258749081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1258784561",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/11490#issuecomment-1258784561",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/11490",
    "id": 1258784561,
    "node_id": "IC_kwDOBvuov85LB4cx",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2022-09-26T23:52:17Z",
    "updated_at": "2022-09-26T23:52:17Z",
    "author_association": "MEMBER",
    "body": "I believe this is related and somewhat addressed by: https://github.com/prysmaticlabs/prysm/pull/11413",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1258784561/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/9127",
  "id": 933790951,
  "node_id": "MDU6SXNzdWU5MzM3OTA5NTE=",
  "number": 9127,
  "title": "Validator client can start with invalid parameters",
  "user": {
    "login": "yorickdowne",
    "id": 71337066,
    "node_id": "MDQ6VXNlcjcxMzM3MDY2",
    "avatar_url": "https://avatars.githubusercontent.com/u/71337066?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/yorickdowne",
    "html_url": "https://github.com/yorickdowne",
    "followers_url": "https://api.github.com/users/yorickdowne/followers",
    "following_url": "https://api.github.com/users/yorickdowne/following{/other_user}",
    "gists_url": "https://api.github.com/users/yorickdowne/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/yorickdowne/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/yorickdowne/subscriptions",
    "organizations_url": "https://api.github.com/users/yorickdowne/orgs",
    "repos_url": "https://api.github.com/users/yorickdowne/repos",
    "events_url": "https://api.github.com/users/yorickdowne/events{/privacy}",
    "received_events_url": "https://api.github.com/users/yorickdowne/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2021-06-30T14:48:14Z",
  "updated_at": "2021-06-30T16:24:04Z",
  "closed_at": "2021-06-30T16:24:04Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "# üêû Bug Report\r\n\r\n### Description\r\n\r\nThe validator client will start when given invalid parameters. Example, note the `platypus`:\r\n\r\n```\r\nyorick@ethlinux:~/prysm$ ./prysm.sh validator --wallet-dir=/var/lib/prysm/validator --wallet-password-file=/var/lib/prysm/validator/password.txt --accept-terms-of-use platypus\r\nLatest Prysm version is v1.3.11.\r\nValidator is up to date.\r\nVerifying binary integrity.\r\nvalidator-v1.3.11-linux-amd64: OK\r\ngpg: Signature made Wed 16 Jun 2021 12:30:45 PM EDT\r\ngpg:                using RSA key 0AE0051D647BA3C1A917AF4072E33E4DF1A5036E\r\ngpg: Good signature from \"Preston Van Loon <preston@prysmaticlabs.com>\" [unknown]\r\ngpg: WARNING: This key is not certified with a trusted signature!\r\ngpg:          There is no indication that the signature belongs to the owner.\r\nPrimary key fingerprint: 0AE0 051D 647B A3C1 A917  AF40 72E3 3E4D F1A5 036E\r\nVerified /home/yorick/prysm/dist/validator-v1.3.11-linux-amd64 has been signed by Prysmatic Labs.\r\nStarting Prysm validator --wallet-dir=/var/lib/prysm/validator --wallet-password-file=/var/lib/prysm/validator/password.txt --accept-terms-of-use platypus\r\n[2021-06-30 10:01:30]  WARN flags: Running on ETH2 Mainnet\r\n[2021-06-30 10:01:30]  INFO node: Opened validator wallet keymanager-kind=direct wallet=/var/lib/prysm/validator/direct\r\n[2021-06-30 10:01:30]  WARN node: Slashing protection file /var/lib/prysm/validator/direct/validator.db is missing.\r\nIf you changed your --wallet-dir or --datadir, please copy your previous \"validator.db\" file into your current --datadir.\r\nDisregard this warning if this is the first time you are running this set of keys.\r\n[2021-06-30 10:01:30]  INFO node: Checking DB databasePath=/var/lib/prysm/validator/direct\r\nAdding optimizations for validator slashing protection 100% [=========]  [0s:0s]\r\n[2021-06-30 10:01:30]  INFO node: Starting validator node version=Prysm/v1.3.11/9fd5575f65ae6f238462ead00ce4f0b16cd0370c. Built at: 2021-06-16 16:21:05+00:00\r\n[2021-06-30 10:01:30]  WARN validator: You are using an insecure gRPC connection. If you are running your beacon node and validator on the same machines, you can ignore this message. If you want to know how to enable secure connections, see: https://docs.prylabs.network/docs/prysm-usage/secure-grpc\r\n```\r\n\r\nIn practice, a user ran `sudo -u prysmvalidator /opt/prysm/validator/prysm.sh validator --wallet-dir=/var/lib/prysm/validator --wallet-password-file=/var/lib/prysm/validator/password.txt --accept-terms-of-use    validator client-stats --beacon-node-metrics-url=http://localhost:8080/metrics --validator-metrics-url=http://localhost:8081/metrics --clientstats-api-url=https://beaconcha.in/api/v1/stats/APIKEY/server`, which started a second validator process and contributed to them getting slashed.\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\nUbuntu 20.04\r\n\r\n**What version of Prysm are you running? (Which release)**\r\n\r\n1.3.11\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/871509717",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9127#issuecomment-871509717",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127",
    "id": 871509717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTUwOTcxNw==",
    "user": {
      "login": "ahadda5",
      "id": 21275079,
      "node_id": "MDQ6VXNlcjIxMjc1MDc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/21275079?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahadda5",
      "html_url": "https://github.com/ahadda5",
      "followers_url": "https://api.github.com/users/ahadda5/followers",
      "following_url": "https://api.github.com/users/ahadda5/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahadda5/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahadda5/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahadda5/subscriptions",
      "organizations_url": "https://api.github.com/users/ahadda5/orgs",
      "repos_url": "https://api.github.com/users/ahadda5/repos",
      "events_url": "https://api.github.com/users/ahadda5/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahadda5/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-30T15:36:34Z",
    "updated_at": "2021-06-30T15:36:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "In terms of running a second validator process, there is this [PR](https://github.com/prysmaticlabs/prysm/pull/9120) coming soon. And is designed to help users not get slashed if they start a second validator (same wallet/keys) without being aware of a running duplicate. \r\nAs for the extra parameters/flag ; you are correct neither the .sh script nor the base code checks for extra params.  However It is harmless though since it will not be used.   Lets see what the _core-team_ says.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/871509717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/871512909",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/9127#issuecomment-871512909",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/9127",
    "id": 871512909,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTUxMjkwOQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-30T15:40:42Z",
    "updated_at": "2021-06-30T15:40:42Z",
    "author_association": "MEMBER",
    "body": "addressed in #9129",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/871512909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

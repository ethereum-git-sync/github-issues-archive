{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12925",
  "id": 1902957394,
  "node_id": "I_kwDOBvuov85xbNNS",
  "number": 12925,
  "title": "Web3Signer http request wrapper is not showing error",
  "user": {
    "login": "rrazvan1",
    "id": 36448915,
    "node_id": "MDQ6VXNlcjM2NDQ4OTE1",
    "avatar_url": "https://avatars.githubusercontent.com/u/36448915?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rrazvan1",
    "html_url": "https://github.com/rrazvan1",
    "followers_url": "https://api.github.com/users/rrazvan1/followers",
    "following_url": "https://api.github.com/users/rrazvan1/following{/other_user}",
    "gists_url": "https://api.github.com/users/rrazvan1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rrazvan1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rrazvan1/subscriptions",
    "organizations_url": "https://api.github.com/users/rrazvan1/orgs",
    "repos_url": "https://api.github.com/users/rrazvan1/repos",
    "events_url": "https://api.github.com/users/rrazvan1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rrazvan1/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2023-09-19T13:15:09Z",
  "updated_at": "2023-09-19T13:17:37Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "### Describe the bug\n\nRemote web3Signer keymanager is sending requests, but if the status code is different than 200, it uses httputil lib to dump the request, but since the request has already consumed the body, it returns an inconvenient error: \r\n```http: ContentLength=X with Body length 0```\r\n\r\nThe solution, is to dump the request before actually sending it.\n\n### Has this worked before in a previous version?\n\n_No response_\n\n### üî¨ Minimal Reproduction\n\nSteps to reproduce:\r\n\r\n1. Start prysm validator using web3signer api\r\n2. Mock the API to return a http status code different than 200\r\n3. Check prysm logs.\n\n### üî• Error\n\n_No response_\n\n### üåç Platform(s)\n\n_No response_\n\n### What version of Prysm are you running? (Which release)\n\nv4.0.8\n\n### Anything else relevant (validator index / public key)?\n\n_No response_",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1725490503",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12925#issuecomment-1725490503",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12925",
    "id": 1725490503,
    "node_id": "IC_kwDOBvuov85m2OVH",
    "user": {
      "login": "rrazvan1",
      "id": 36448915,
      "node_id": "MDQ6VXNlcjM2NDQ4OTE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/36448915?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rrazvan1",
      "html_url": "https://github.com/rrazvan1",
      "followers_url": "https://api.github.com/users/rrazvan1/followers",
      "following_url": "https://api.github.com/users/rrazvan1/following{/other_user}",
      "gists_url": "https://api.github.com/users/rrazvan1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rrazvan1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rrazvan1/subscriptions",
      "organizations_url": "https://api.github.com/users/rrazvan1/orgs",
      "repos_url": "https://api.github.com/users/rrazvan1/repos",
      "events_url": "https://api.github.com/users/rrazvan1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rrazvan1/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-09-19T13:17:37Z",
    "updated_at": "2023-09-19T13:17:37Z",
    "author_association": "NONE",
    "body": "Waiting for PR merge: #12926 ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1725490503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

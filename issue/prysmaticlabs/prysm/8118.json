{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/8118",
  "id": 767724516,
  "node_id": "MDU6SXNzdWU3Njc3MjQ1MTY=",
  "number": 8118,
  "title": "Show the \"number of pubkeys attesting\" in the \"Next duty\" log output",
  "user": {
    "login": "chrishobcroft",
    "id": 2212651,
    "node_id": "MDQ6VXNlcjIyMTI2NTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2212651?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/chrishobcroft",
    "html_url": "https://github.com/chrishobcroft",
    "followers_url": "https://api.github.com/users/chrishobcroft/followers",
    "following_url": "https://api.github.com/users/chrishobcroft/following{/other_user}",
    "gists_url": "https://api.github.com/users/chrishobcroft/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/chrishobcroft/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/chrishobcroft/subscriptions",
    "organizations_url": "https://api.github.com/users/chrishobcroft/orgs",
    "repos_url": "https://api.github.com/users/chrishobcroft/repos",
    "events_url": "https://api.github.com/users/chrishobcroft/events{/privacy}",
    "received_events_url": "https://api.github.com/users/chrishobcroft/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129908,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDg=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Good%20First%20Issue",
      "name": "Good First Issue",
      "color": "7057ff",
      "default": false,
      "description": "Good for newcomers"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 4,
  "created_at": "2020-12-15T15:40:57Z",
  "updated_at": "2021-01-07T10:22:39Z",
  "closed_at": "2021-01-07T10:22:39Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "<!--ðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž\r\n\r\nHellooo! ðŸ˜„ \r\n\r\nTo help us tend to your issue faster, please search our currently open issues before submitting a new one.\r\nExisting issues often contain information about workarounds, resolution, or progress updates.\r\n\r\nðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’ŽðŸ’Ž-->\r\n\r\n# ðŸš€ Feature Request\r\n\r\n### Description\r\n\r\n<!-- âœï¸--> A clear and concise description of the problem or missing capability...\r\n\r\nThe new feature in the logging output for the `validator` is very nice - it shows a user how long until the any of the Validators will have a duty to perform.\r\n```\r\nprysm.sh[5372]: time=\"2020-12-15 15:29:43\" level=info msg=\"Next duty\" currentSlot=101846 dutySlot=101850 prefix=validator role=attester secondsLeft=40 slotInEpoch=22\r\n```\r\n\r\nThis is very useful when restarting a process (e.g. to update to a new version of prysm) or to restart the OS (e.g. to update the OS), and to attempt to minimise the number of duties that are not fulfilled (better for the network, avoids Validators missing income etc.)\r\n\r\nI propose to add 1 additional field to this, to show **the number of pubkeys that will be required to attest** when the next duty is due to be fulfilled - this way, I can minimise the number of times I restart and potentially miss a double (or even triple) attestation.\r\n\r\n### Describe the solution you'd like\r\n\r\n<!-- âœï¸--> If you have a solution in mind, please describe it.\r\nAdd an additional field showing the number of `pubkeys` which will be attesting in that slot:\r\n\r\n```\r\nprysm.sh[5372]: time=\"2020-12-15 15:29:43\" level=info msg=\"Next duty\" currentSlot=101846 dutySlot=101850 prefix=validator role=attester pubkeys=2 secondsLeft=40 slotInEpoch=22\r\n```\r\n\r\n### Describe alternatives you've considered\r\n\r\nOh yes, I can imagine creating far more sophisticated tools to assist Validator node operators to minimise negative impact of routine maintenance and upgrades, with visualisations showing e.g. the when Validators will be required to perform duties in the next 20 slots, and how many validators will be performing duties, something like this:\r\n\r\n![image](https://user-images.githubusercontent.com/2212651/102236827-fad61b00-3f19-11eb-8dc1-53ca5c295df7.png)\r\n\r\n<!-- âœï¸--> Have you considered any alternative solutions or workarounds?\r\n",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/752501903",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8118#issuecomment-752501903",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118",
    "id": 752501903,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjUwMTkwMw==",
    "user": {
      "login": "pinglamb",
      "id": 287503,
      "node_id": "MDQ6VXNlcjI4NzUwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinglamb",
      "html_url": "https://github.com/pinglamb",
      "followers_url": "https://api.github.com/users/pinglamb/followers",
      "following_url": "https://api.github.com/users/pinglamb/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinglamb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinglamb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinglamb/subscriptions",
      "organizations_url": "https://api.github.com/users/pinglamb/orgs",
      "repos_url": "https://api.github.com/users/pinglamb/repos",
      "events_url": "https://api.github.com/users/pinglamb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinglamb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-30T12:15:42Z",
    "updated_at": "2020-12-30T16:23:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "For each slot, it is possible that the `validator` needs to do multiple `attesting` (for different `pubkeys`) and at most one `proposing`. In case of both `attesting` and `proposing` in same slot, the current `Next duty` log will favour whichever appears first in the `duties` array.\r\n\r\nSo to cater all the cases, should the log be:\r\n\r\n```\r\n# 2 attesting + 1 proposing (proposing should be 0/1)\r\nmsg=\"Next duties\" currentSlot=101 dutySlot=105 prefix=validator attesting=2 proposing=1 secondsLeft=40 slotInEpoch=22\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/752501903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/752662051",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8118#issuecomment-752662051",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118",
    "id": 752662051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MjY2MjA1MQ==",
    "user": {
      "login": "chrishobcroft",
      "id": 2212651,
      "node_id": "MDQ6VXNlcjIyMTI2NTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2212651?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chrishobcroft",
      "html_url": "https://github.com/chrishobcroft",
      "followers_url": "https://api.github.com/users/chrishobcroft/followers",
      "following_url": "https://api.github.com/users/chrishobcroft/following{/other_user}",
      "gists_url": "https://api.github.com/users/chrishobcroft/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chrishobcroft/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chrishobcroft/subscriptions",
      "organizations_url": "https://api.github.com/users/chrishobcroft/orgs",
      "repos_url": "https://api.github.com/users/chrishobcroft/repos",
      "events_url": "https://api.github.com/users/chrishobcroft/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chrishobcroft/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-30T15:29:04Z",
    "updated_at": "2020-12-30T15:29:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks good to me.\r\n\r\nPerhaps change the order, so that the countdown timer is at the end of the line, to make it super-easy to read off?\r\n\r\nLike this:\r\n```\r\nmsg=\"Next duties\" currentSlot=101 dutySlot=105 prefix=validator attesting=2 proposing=1 slotInEpoch=22 secondsLeft=40\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/752662051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/753305504",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8118#issuecomment-753305504",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118",
    "id": 753305504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzMwNTUwNA==",
    "user": {
      "login": "pinglamb",
      "id": 287503,
      "node_id": "MDQ6VXNlcjI4NzUwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinglamb",
      "html_url": "https://github.com/pinglamb",
      "followers_url": "https://api.github.com/users/pinglamb/followers",
      "following_url": "https://api.github.com/users/pinglamb/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinglamb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinglamb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinglamb/subscriptions",
      "organizations_url": "https://api.github.com/users/pinglamb/orgs",
      "repos_url": "https://api.github.com/users/pinglamb/repos",
      "events_url": "https://api.github.com/users/pinglamb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinglamb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-01T11:33:59Z",
    "updated_at": "2021-01-01T11:33:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems the tags order is managed by `logrus`, currently it is sorted alphabetically, so it will be like:\r\n\r\n```\r\nmsg=\"Next duties\" attesting=2 currentSlot=101 dutySlot=105 prefix=validator proposing=1 secondsLeft=40 slotInEpoch=22\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/753305504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/753307268",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/8118#issuecomment-753307268",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/8118",
    "id": 753307268,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MzMwNzI2OA==",
    "user": {
      "login": "pinglamb",
      "id": 287503,
      "node_id": "MDQ6VXNlcjI4NzUwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/287503?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinglamb",
      "html_url": "https://github.com/pinglamb",
      "followers_url": "https://api.github.com/users/pinglamb/followers",
      "following_url": "https://api.github.com/users/pinglamb/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinglamb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinglamb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinglamb/subscriptions",
      "organizations_url": "https://api.github.com/users/pinglamb/orgs",
      "repos_url": "https://api.github.com/users/pinglamb/repos",
      "events_url": "https://api.github.com/users/pinglamb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinglamb/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-01T11:51:50Z",
    "updated_at": "2021-01-01T11:51:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "@rauljordan @farazdagi I have created an PR for this, feel free to share what you guys think about the log format.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/753307268/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

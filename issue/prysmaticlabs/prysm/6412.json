{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6412",
  "id": 646157727,
  "node_id": "MDU6SXNzdWU2NDYxNTc3Mjc=",
  "number": 6412,
  "title": "[Docker] Validator client gets stuck waiting for beacon node during automatic updates.",
  "user": {
    "login": "DigiDr",
    "id": 2739450,
    "node_id": "MDQ6VXNlcjI3Mzk0NTA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2739450?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/DigiDr",
    "html_url": "https://github.com/DigiDr",
    "followers_url": "https://api.github.com/users/DigiDr/followers",
    "following_url": "https://api.github.com/users/DigiDr/following{/other_user}",
    "gists_url": "https://api.github.com/users/DigiDr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/DigiDr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/DigiDr/subscriptions",
    "organizations_url": "https://api.github.com/users/DigiDr/orgs",
    "repos_url": "https://api.github.com/users/DigiDr/repos",
    "events_url": "https://api.github.com/users/DigiDr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/DigiDr/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-06-26T10:10:40Z",
  "updated_at": "2020-06-26T22:25:29Z",
  "closed_at": "2020-06-26T22:25:28Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "\r\n# üêû Bug Report\r\n\r\n### Description\r\n\r\nValidator client occasionally gets stuck during automatic updates with docker + watchtower. \r\n\r\n### Has this worked before in a previous version?\r\n\r\nHaven't experienced this before. \r\n\r\n## üî¨ Minimal Reproduction\r\n\r\nUncertain. \r\n\r\n## üî• Error\r\n\r\nRecently, automatic updates with watchtower often result in the new validator process getting stuck at:\r\n\r\n[2020-06-25 22:11:22]  INFO validator: Waiting for beacon chain start log from the ETH 1.0 deposit contract.\r\n\r\nIt works again fine if the process is restarted, but can result in loss of earnings. \r\n\r\nRoot cause may well be due to both beacon and validator being updated at the same time i.e if the beacon node is down/not responding just at moment the validator client is updated. Can behaviour around this be made more robust? \r\n\r\nwatchtower logs:\r\n\r\ntime=\"2020-06-25T22:11:01Z\" level=info msg=\"Found new gcr.io/prysmaticlabs/prysm/slasher:latest image (sha256:228c3230f8af61b28dfe277b16197bf40e74a018ac74055c2df074fec9354a20)\"\r\ntime=\"2020-06-25T22:11:03Z\" level=info msg=\"Found new gcr.io/prysmaticlabs/prysm/beacon-chain:latest image (sha256:12a41eadc2f97826018edf7c3e6cd87ff054c484076fbcec9bf291746a5f83f2)\"\r\ntime=\"2020-06-25T22:11:05Z\" level=info msg=\"Found new gcr.io/prysmaticlabs/prysm/validator:latest image (sha256:a39ba765b0463cfd49c3aea82fbda282d22f22a3fac807ead5765bf5cfc97055)\"\r\ntime=\"2020-06-25T22:11:14Z\" level=info msg=\"Stopping /eth2-prysm-valid (fccb676fdecdd6e1b703a8f23ee06768dee8800bdba9a7050443bfbd59852920) with SIGTERM\"\r\ntime=\"2020-06-25T22:11:16Z\" level=info msg=\"Stopping /eth2-prysm-beacon (6ce3b4c9b813ca03be8f91c4658a63eb69eb7bbc23cc7c3f423b7d7b0723724c) with SIGTERM\"\r\ntime=\"2020-06-25T22:11:17Z\" level=info msg=\"Stopping /eth2-prysm-slasher (148db936ff554f97c981bf6f0b883927078c1d32cf7d21c19fcaf794fce9b5b6) with SIGTERM\"\r\ntime=\"2020-06-25T22:11:18Z\" level=info msg=\"Creating /eth2-prysm-slasher\"\r\ntime=\"2020-06-25T22:11:19Z\" level=info msg=\"Creating /eth2-prysm-beacon\"\r\ntime=\"2020-06-25T22:11:20Z\" level=info msg=\"Creating /eth2-prysm-valid\"\r\n\r\n\r\n## üåç  Your Environment\r\n\r\n**Operating System:**\r\n\r\nSetup: \r\nUbuntu LTS\r\nDocker\r\nWatchtower (for automatic updates)\r\nValidator/Slasher/Beacon node all running on local box\r\n",
  "closed_by": {
    "login": "prestonvanloon",
    "id": 7246818,
    "node_id": "MDQ6VXNlcjcyNDY4MTg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prestonvanloon",
    "html_url": "https://github.com/prestonvanloon",
    "followers_url": "https://api.github.com/users/prestonvanloon/followers",
    "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
    "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
    "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
    "repos_url": "https://api.github.com/users/prestonvanloon/repos",
    "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/650430624",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6412#issuecomment-650430624",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6412",
    "id": 650430624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDQzMDYyNA==",
    "user": {
      "login": "prestonvanloon",
      "id": 7246818,
      "node_id": "MDQ6VXNlcjcyNDY4MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7246818?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prestonvanloon",
      "html_url": "https://github.com/prestonvanloon",
      "followers_url": "https://api.github.com/users/prestonvanloon/followers",
      "following_url": "https://api.github.com/users/prestonvanloon/following{/other_user}",
      "gists_url": "https://api.github.com/users/prestonvanloon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prestonvanloon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prestonvanloon/subscriptions",
      "organizations_url": "https://api.github.com/users/prestonvanloon/orgs",
      "repos_url": "https://api.github.com/users/prestonvanloon/repos",
      "events_url": "https://api.github.com/users/prestonvanloon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prestonvanloon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-26T22:25:28Z",
    "updated_at": "2020-06-26T22:25:28Z",
    "author_association": "MEMBER",
    "body": "Closing as a duplicate of #6325. Please subscribe to #6325 for updates. Thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/650430624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/352",
  "id": 345773302,
  "node_id": "MDU6SXNzdWUzNDU3NzMzMDI=",
  "number": 352,
  "title": "Split BeaconChain.persist Into Active/Crystallized State",
  "user": {
    "login": "rawfalafel",
    "id": 202157,
    "node_id": "MDQ6VXNlcjIwMjE1Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/202157?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rawfalafel",
    "html_url": "https://github.com/rawfalafel",
    "followers_url": "https://api.github.com/users/rawfalafel/followers",
    "following_url": "https://api.github.com/users/rawfalafel/following{/other_user}",
    "gists_url": "https://api.github.com/users/rawfalafel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rawfalafel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rawfalafel/subscriptions",
    "organizations_url": "https://api.github.com/users/rawfalafel/orgs",
    "repos_url": "https://api.github.com/users/rawfalafel/repos",
    "events_url": "https://api.github.com/users/rawfalafel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rawfalafel/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 2,
  "created_at": "2018-07-30T14:06:44Z",
  "updated_at": "2018-08-03T01:28:49Z",
  "closed_at": "2018-08-03T01:28:49Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "`persist` should be split into two functions to allow one to be udpated without the other. This will become  necessary when the size of the crystallized state increases with the validator set.\r\n\r\nIn addition, this issue should refactor the existing code to batch writes to disk, particularly when updating the crystallized state. Currently in `computeValidatorRewardsAndPenalties`, the entire crystallized state is being written to disk for every single validator. Instead the entire function should perform a single write to disk.",
  "closed_by": {
    "login": "rawfalafel",
    "id": 202157,
    "node_id": "MDQ6VXNlcjIwMjE1Nw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/202157?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rawfalafel",
    "html_url": "https://github.com/rawfalafel",
    "followers_url": "https://api.github.com/users/rawfalafel/followers",
    "following_url": "https://api.github.com/users/rawfalafel/following{/other_user}",
    "gists_url": "https://api.github.com/users/rawfalafel/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rawfalafel/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rawfalafel/subscriptions",
    "organizations_url": "https://api.github.com/users/rawfalafel/orgs",
    "repos_url": "https://api.github.com/users/rawfalafel/repos",
    "events_url": "https://api.github.com/users/rawfalafel/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rawfalafel/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/408883260",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/352#issuecomment-408883260",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352",
    "id": 408883260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwODg4MzI2MA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-07-30T14:28:55Z",
    "updated_at": "2018-07-30T14:28:55Z",
    "author_association": "MEMBER",
    "body": "To add more context to this, active state happens every slot, crystallized state happens every epoch. If active state and crystallized state happens during the same slot, then active state transition will be postponed to the next slot. (i.e. active and crystallized transitions should never happen in the same slot)\r\n\r\n+1 on the batch writes",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/408883260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/409970372",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/352#issuecomment-409970372",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/352",
    "id": 409970372,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTk3MDM3Mg==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-02T15:37:13Z",
    "updated_at": "2018-08-02T15:37:13Z",
    "author_association": "MEMBER",
    "body": "Addressed this in #367",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/409970372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

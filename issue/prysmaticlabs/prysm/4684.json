{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/4684",
  "id": 556726395,
  "node_id": "MDU6SXNzdWU1NTY3MjYzOTU=",
  "number": 4684,
  "title": "Synchronizing 130k blocks takes more than 24 hours.",
  "user": {
    "login": "q9f",
    "id": 58883403,
    "node_id": "MDQ6VXNlcjU4ODgzNDAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/58883403?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/q9f",
    "html_url": "https://github.com/q9f",
    "followers_url": "https://api.github.com/users/q9f/followers",
    "following_url": "https://api.github.com/users/q9f/following{/other_user}",
    "gists_url": "https://api.github.com/users/q9f/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/q9f/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/q9f/subscriptions",
    "organizations_url": "https://api.github.com/users/q9f/orgs",
    "repos_url": "https://api.github.com/users/q9f/repos",
    "events_url": "https://api.github.com/users/q9f/events{/privacy}",
    "received_events_url": "https://api.github.com/users/q9f/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-01-29T09:05:19Z",
  "updated_at": "2020-01-31T06:04:22Z",
  "closed_at": "2020-01-31T06:04:21Z",
  "author_association": "CONTRIBUTOR",
  "active_lock_reason": null,
  "body": "note the time stamps:\r\n\r\n```\r\n~/.opt/prysm master*\r\n❯ bazel-bin/beacon-chain/linux_amd64_stripped/beacon-chain --datadir=$HOME/.prysm --initial-sync-cache-state --enable-upnp --clear-db\r\n2020/01/28 08:04:32 maxprocs: Leaving GOMAXPROCS=4: CPU quota undefined\r\n[2020-01-28 08:04:32]  WARN flags: Enabled initial sync cache state mode.\r\n[2020-01-28 08:04:32]  INFO node: Using custom chain parameters config=demo\r\n[2020-01-28 08:04:32]  WARN node: This will delete your beacon chain data base stored in your data directory. Your database backups will not be removed - do you want to proceed? (Y/N)\r\n>> Y\r\n[2020-01-28 08:04:34]  WARN node: Removing database\r\n\r\n[...]\r\n\r\n[2020-01-28 08:07:26]  INFO initial-sync: Starting initial chain sync...\r\n[2020-01-28 08:07:26]  INFO initial-sync: Waiting for enough suitable peers before syncing required=3 suitable=1\r\n[2020-01-28 08:07:32]  INFO initial-sync: Processing block 217/131737 - estimated time remaining 730h40m0s blocksPerSecond=0.1 peers=2/3\r\n[2020-01-28 08:09:07]  INFO initial-sync: Processing block 219/131745 - estimated time remaining 365h21m0s blocksPerSecond=0.1 peers=2/3\r\n[2020-01-28 08:09:08]  INFO initial-sync: Processing block 221/131745 - estimated time remaining 182h40m20s blocksPerSecond=0.2 peers=2/3\r\n[2020-01-28 08:09:09]  INFO initial-sync: Processing block 223/131745 - estimated time remaining 121h46m46s blocksPerSecond=0.3 peers=2/3\r\n[2020-01-28 08:09:10]  INFO initial-sync: Processing block 225/131745 - estimated time remaining 91h20m0s blocksPerSecond=0.4 peers=2/3\r\n[2020-01-28 08:09:11]  INFO initial-sync: Processing block 227/131745 - estimated time remaining 73h3m56s blocksPerSecond=0.5 peers=2/3\r\n[2020-01-28 08:09:11]  INFO initial-sync: Processing block 229/131745 - estimated time remaining 60h53m13s blocksPerSecond=0.6 peers=2/3\r\n[2020-01-28 08:09:12]  INFO initial-sync: Processing block 231/131746 - estimated time remaining 52h11m18s blocksPerSecond=0.7 peers=2/3\r\n[2020-01-28 08:09:13]  INFO initial-sync: Processing block 233/131746 - estimated time remaining 45h39m51s blocksPerSecond=0.8 peers=2/3\r\n[2020-01-28 08:09:14]  INFO initial-sync: Processing block 235/131746 - estimated time remaining 40h35m23s blocksPerSecond=0.9 peers=2/3\r\n[2020-01-28 08:09:15]  INFO initial-sync: Processing block 237/131746 - estimated time remaining 36h31m49s blocksPerSecond=1.0 peers=2/3\r\n[2020-01-28 08:09:16]  INFO initial-sync: Processing block 239/131746 - estimated time remaining 33h12m31s blocksPerSecond=1.1 peers=2/3\r\n[2020-01-28 08:09:17]  INFO initial-sync: Processing block 241/131746 - estimated time remaining 30h26m27s blocksPerSecond=1.2 peers=2/3\r\n[2020-01-28 08:09:18]  INFO initial-sync: Processing block 243/131746 - estimated time remaining 28h5m56s blocksPerSecond=1.3 peers=2/3\r\n[2020-01-28 08:09:18]  INFO initial-sync: Processing block 245/131746 - estimated time remaining 26h5m29s blocksPerSecond=1.4 peers=2/3\r\n[2020-01-28 08:09:19]  INFO initial-sync: Processing block 247/131746 - estimated time remaining 24h21m6s blocksPerSecond=1.5 peers=2/3\r\n[2020-01-28 08:09:20]  INFO initial-sync: Processing block 249/131746 - estimated time remaining 22h49m45s blocksPerSecond=1.6 peers=2/3\r\n[2020-01-28 08:09:21]  INFO initial-sync: Processing block 251/131746 - estimated time remaining 21h29m10s blocksPerSecond=1.7 peers=2/3\r\n[2020-01-28 08:09:22]  INFO initial-sync: Processing block 253/131746 - estimated time remaining 20h17m31s blocksPerSecond=1.8 peers=2/3\r\n[2020-01-28 08:09:23]  INFO initial-sync: Processing block 255/131746 - estimated time remaining 19h13m25s blocksPerSecond=1.9 peers=2/3\r\n[2020-01-28 08:09:29]  INFO initial-sync: Processing block 257/131747 - estimated time remaining 20h52m17s blocksPerSecond=1.8 peers=2/3\r\n\r\n[...]\r\n\r\n[2020-01-29 09:50:09]  INFO initial-sync: Processing block 121892/139450 - estimated time remaining 2h42m34s blocksPerSecond=1.8 peers=7/15\r\n[2020-01-29 09:50:09]  INFO initial-sync: Processing block 121893/139450 - estimated time remaining 2h38m10s blocksPerSecond=1.9 peers=7/15\r\n[2020-01-29 09:50:10]  INFO initial-sync: Processing block 121894/139450 - estimated time remaining 2h34m0s blocksPerSecond=1.9 peers=7/15\r\n```\r\n100800 seconds / 139450 blocks ~ 0.723 seconds per block. syncing a mainnet with 10 million blocks would take roughly 3 months.\r\n\r\nfor comparison: a legacy geth node syncronizes a testnet (rinkeby) with 2048 blocks per 0.600 seconds (syncmode full). \r\n\r\n```\r\nINFO [01-29|10:01:03.764] Imported new chain segment               blocks=2048 txs=0 mgas=0.000 elapsed=602.887ms mgasps=0.000 number=10304 hash=4d9dca…708919 age=2y9mo4w   dirty=6.98KiB\r\nINFO [01-29|10:01:04.425] Imported new chain segment               blocks=2048 txs=10 mgas=0.210 elapsed=638.153ms mgasps=0.329 number=12352 hash=455b79…d1649f age=2y9mo4w   dirty=12.69KiB\r\nINFO [01-29|10:01:05.078] Imported new chain segment               blocks=2048 txs=18 mgas=3.203 elapsed=629.188ms mgasps=5.090 number=14400 hash=ffd06c…a83096 age=2y9mo4w   dirty=37.67KiB\r\nINFO [01-29|10:01:05.773] Imported new chain segment               blocks=2048 txs=12 mgas=0.245 elapsed=651.868ms mgasps=0.375 number=16448 hash=6d6c89…88f98f age=2y9mo4w   dirty=20.55KiB\r\nINFO [01-29|10:01:06.432] Imported new chain segment               blocks=2048 txs=8  mgas=0.168 elapsed=635.748ms mgasps=0.264 number=18496 hash=738189…a60a32 age=2y9mo4w   dirty=24.01KiB\r\nINFO [01-29|10:01:07.121] Imported new chain segment               blocks=2048 txs=6  mgas=0.126 elapsed=642.016ms mgasps=0.196 number=20544 hash=9a47a8…874178 age=2y9mo4w   dirty=21.49KiB\r\nINFO [01-29|10:01:07.754] Imported new chain segment               blocks=2048 txs=9  mgas=0.189 elapsed=609.871ms mgasps=0.310 number=22592 hash=13894a…71324e age=2y9mo3w   dirty=27.78KiB\r\n```\r\n\r\nthat is 0.000293 seconds per block, or ~ 2500 times faster than the beacon chain. I'm not trying to compare apples and oranges here, but for a mainnet release, we would have to aim for performance improvements by three orders of magnitude.\r\n\r\nrunning prysm latest master @ 3e9bf58d81a986881de9d2d0fcbe565b3fe83ef2\r\n\r\non arch-linux 5.4.13-arch1-1 x86_64 gnu/linux, go version go1.13.6 linux/amd64, bazel version 2.0.0- (@non-git)",
  "closed_by": {
    "login": "rauljordan",
    "id": 5572669,
    "node_id": "MDQ6VXNlcjU1NzI2Njk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rauljordan",
    "html_url": "https://github.com/rauljordan",
    "followers_url": "https://api.github.com/users/rauljordan/followers",
    "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
    "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
    "organizations_url": "https://api.github.com/users/rauljordan/orgs",
    "repos_url": "https://api.github.com/users/rauljordan/repos",
    "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rauljordan/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/580595791",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/4684#issuecomment-580595791",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4684",
    "id": 580595791,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MDU5NTc5MQ==",
    "user": {
      "login": "rauljordan",
      "id": 5572669,
      "node_id": "MDQ6VXNlcjU1NzI2Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5572669?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rauljordan",
      "html_url": "https://github.com/rauljordan",
      "followers_url": "https://api.github.com/users/rauljordan/followers",
      "following_url": "https://api.github.com/users/rauljordan/following{/other_user}",
      "gists_url": "https://api.github.com/users/rauljordan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rauljordan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rauljordan/subscriptions",
      "organizations_url": "https://api.github.com/users/rauljordan/orgs",
      "repos_url": "https://api.github.com/users/rauljordan/repos",
      "events_url": "https://api.github.com/users/rauljordan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rauljordan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-01-31T06:04:21Z",
    "updated_at": "2020-01-31T06:04:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hi @q9f thanks for pointing this out. We are 100% aware of the differences between this and eth1 sync, and in particular, we can already sync from genesis to the head of the beacon chain in approximately 2 hours. We believe we can radically increase the blocks per second to above 30 or even 40 soon with some changes we have in the works. If you are more curious about this or wish to learn more about these changes, it's best to chat with the team over discord. Closing this issue as it does not have any actionable items for us at the moment. We will be releasing our radical sync improvements to master and production very soon.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/580595791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

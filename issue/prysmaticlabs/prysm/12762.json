{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762",
  "id": 1858729029,
  "node_id": "I_kwDOBvuov85uyfRF",
  "number": 12762,
  "title": "Stuck syncing",
  "user": {
    "login": "Ololosha100501",
    "id": 36081665,
    "node_id": "MDQ6VXNlcjM2MDgxNjY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/36081665?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Ololosha100501",
    "html_url": "https://github.com/Ololosha100501",
    "followers_url": "https://api.github.com/users/Ololosha100501/followers",
    "following_url": "https://api.github.com/users/Ololosha100501/following{/other_user}",
    "gists_url": "https://api.github.com/users/Ololosha100501/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Ololosha100501/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Ololosha100501/subscriptions",
    "organizations_url": "https://api.github.com/users/Ololosha100501/orgs",
    "repos_url": "https://api.github.com/users/Ololosha100501/repos",
    "events_url": "https://api.github.com/users/Ololosha100501/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Ololosha100501/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2023-08-21T06:57:39Z",
  "updated_at": "2023-08-27T15:14:22Z",
  "closed_at": null,
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Hello guys. I'm not sure if this problem in prysm or with geth, hope you will say. \r\nSo. Running Geth 1.12.0 and Prysm 4.0.7\r\nAnd this bundle worked perfect before the last week. Tonight was the third time it stucked. \r\n\r\nLogs are in attachments. \r\n[geth log.txt](https://github.com/prysmaticlabs/prysm/files/12393118/geth.log.txt)\r\n[prysm log.txt](https://github.com/prysmaticlabs/prysm/files/12393119/prysm.log.txt)\r\n\r\nAll started in prysm at 03:52:36 - **WARN p2p: Attestation is too old to broadcast, discarding it. Current Slot: 7145661 , Attestation Slot: 7145628**\r\n\r\nBut node still worked. Worked for almost an hour, though there was a lot of old attestation warnings. \r\n\r\nThen at 04:45:52 geth started to say **Ignoring already known beacon payload    number=17,959,321 hash=a1fae9..88f259 age=17s**\r\nAnd this is all it sayed for next 3.5 hours. \r\n\r\nAt this time prysm sayed either **WARN initial-sync: Block is not processed error=could not notify the engine of the new payload: timeout from http.Client: received an undefined execution engine error** or **WARN initial-sync: Range is not processed error=Range had no valid blocks to process**\r\n\r\nWithin this time there was a lot of peers connected. \r\n\r\nMy setup: \r\nAMD Ryzen 5 5600G\r\n32 GB RAM\r\nWindows 10 x64\r\n",
  "closed_by": null,
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762/timeline",
  "performed_via_github_app": null,
  "state_reason": null
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1685798770",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762#issuecomment-1685798770",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
    "id": 1685798770,
    "node_id": "IC_kwDOBvuov85kez9y",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-21T07:30:11Z",
    "updated_at": "2023-08-21T07:30:11Z",
    "author_association": "MEMBER",
    "body": "It looks like an issue with geth:\r\n```\r\n[2023-08-21 04:45:43] ERROR sync: Could not handle p2p pubsub error=could not notify the engine of the new payload: timeout from http.Client: received an undefined execution engine error topic=/eth2/bba4da96/beacon_block/ssz_snappy\r\n```\r\nPrysm can't do anything because geth keeps on timing out",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1685798770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1689416910",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762#issuecomment-1689416910",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
    "id": 1689416910,
    "node_id": "IC_kwDOBvuov85ksnTO",
    "user": {
      "login": "MariusVanDerWijden",
      "id": 16664698,
      "node_id": "MDQ6VXNlcjE2NjY0Njk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/16664698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MariusVanDerWijden",
      "html_url": "https://github.com/MariusVanDerWijden",
      "followers_url": "https://api.github.com/users/MariusVanDerWijden/followers",
      "following_url": "https://api.github.com/users/MariusVanDerWijden/following{/other_user}",
      "gists_url": "https://api.github.com/users/MariusVanDerWijden/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MariusVanDerWijden/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MariusVanDerWijden/subscriptions",
      "organizations_url": "https://api.github.com/users/MariusVanDerWijden/orgs",
      "repos_url": "https://api.github.com/users/MariusVanDerWijden/repos",
      "events_url": "https://api.github.com/users/MariusVanDerWijden/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MariusVanDerWijden/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-23T07:16:57Z",
    "updated_at": "2023-08-23T07:16:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Theres nothing in our logs indicating that geth is timing out, our logs only shows prysm calling `newPayload` with the same block over and over again.\r\n```\r\nWARN [08-21|07:58:15.517] Ignoring already known beacon payload    number=17,959,321 hash=a1fae9..88f259 age=3h12m40s\r\nWARN [08-21|07:58:28.320] Ignoring already known beacon payload    number=17,959,321 hash=a1fae9..88f259 age=3h12m53s\r\nWARN [08-21|07:58:43.721] Ignoring already known beacon payload    number=17,959,321 hash=a1fae9..88f259 age=3h13m8s\r\nWARN [08-21|07:58:59.137] Ignoring already known beacon payload    number=17,959,321 hash=a1fae9..88f259 age=3h13m24s\r\n```\r\n\r\nThe logs indicate that the node is kinda slow though, its executing ~10-30 MGas/s, usually nodes execute ~100MGas/s. CPU and RAM look okay, so it might be a disk issue",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1689416910/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1689486874",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762#issuecomment-1689486874",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
    "id": 1689486874,
    "node_id": "IC_kwDOBvuov85ks4Ya",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-23T08:08:19Z",
    "updated_at": "2023-08-23T08:08:19Z",
    "author_association": "NONE",
    "body": "> received an undefined execution engine error \r\n\r\nThat does sound like we are returning an error which prysm doesn't recognize, and it labels it \"timeout\" for some reason. ",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1689486874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1689501928",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762#issuecomment-1689501928",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
    "id": 1689501928,
    "node_id": "IC_kwDOBvuov85ks8Do",
    "user": {
      "login": "holiman",
      "id": 142290,
      "node_id": "MDQ6VXNlcjE0MjI5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/142290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/holiman",
      "html_url": "https://github.com/holiman",
      "followers_url": "https://api.github.com/users/holiman/followers",
      "following_url": "https://api.github.com/users/holiman/following{/other_user}",
      "gists_url": "https://api.github.com/users/holiman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/holiman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/holiman/subscriptions",
      "organizations_url": "https://api.github.com/users/holiman/orgs",
      "repos_url": "https://api.github.com/users/holiman/repos",
      "events_url": "https://api.github.com/users/holiman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/holiman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-23T08:18:27Z",
    "updated_at": "2023-08-23T08:18:40Z",
    "author_association": "NONE",
    "body": "`WARN p2p: Attestation is too old to broadcast, discarding it. Current Slot: 7145925 , Attestation Slot: 7145892` -- could it be some form of dos? It goes on for quite a while, and at `04:45`, it becomes bad enough that geth no longer obtains proper updates, so geth starts complaining \r\n```\r\nWARN [08-21|04:45:52.140] Ignoring already known beacon payload    number=17,959,321 hash=a1fae9..88f259 age=17s\r\n```\r\n\r\nWhen we do print that message, this is the return-value we send the CL\r\n```golang\r\n\t\tlog.Warn(\"Ignoring already known beacon payload\", \"number\", params.Number, \"hash\", params.BlockHash, \"age\", common.PrettyAge(time.Unix(int64(block.Time()), 0)))\r\n\t\thash := block.Hash()\r\n\t\treturn engine.PayloadStatusV1{Status: engine.VALID, LatestValidHash: &hash}, nil\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1689501928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1694636523",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762#issuecomment-1694636523",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
    "id": 1694636523,
    "node_id": "IC_kwDOBvuov85lAhnr",
    "user": {
      "login": "Ololosha100501",
      "id": 36081665,
      "node_id": "MDQ6VXNlcjM2MDgxNjY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/36081665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ololosha100501",
      "html_url": "https://github.com/Ololosha100501",
      "followers_url": "https://api.github.com/users/Ololosha100501/followers",
      "following_url": "https://api.github.com/users/Ololosha100501/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ololosha100501/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ololosha100501/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ololosha100501/subscriptions",
      "organizations_url": "https://api.github.com/users/Ololosha100501/orgs",
      "repos_url": "https://api.github.com/users/Ololosha100501/repos",
      "events_url": "https://api.github.com/users/Ololosha100501/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ololosha100501/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-27T11:01:03Z",
    "updated_at": "2023-08-27T11:01:03Z",
    "author_association": "NONE",
    "body": "And again\r\n\r\n[Geth logs.txt](https://github.com/prysmaticlabs/prysm/files/12447806/Geth.logs.txt)\r\n[Prysm logs.txt](https://github.com/prysmaticlabs/prysm/files/12447807/Prysm.logs.txt)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1694636523/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1694693139",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/12762#issuecomment-1694693139",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/12762",
    "id": 1694693139,
    "node_id": "IC_kwDOBvuov85lAvcT",
    "user": {
      "login": "Ololosha100501",
      "id": 36081665,
      "node_id": "MDQ6VXNlcjM2MDgxNjY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/36081665?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Ololosha100501",
      "html_url": "https://github.com/Ololosha100501",
      "followers_url": "https://api.github.com/users/Ololosha100501/followers",
      "following_url": "https://api.github.com/users/Ololosha100501/following{/other_user}",
      "gists_url": "https://api.github.com/users/Ololosha100501/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Ololosha100501/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Ololosha100501/subscriptions",
      "organizations_url": "https://api.github.com/users/Ololosha100501/orgs",
      "repos_url": "https://api.github.com/users/Ololosha100501/repos",
      "events_url": "https://api.github.com/users/Ololosha100501/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Ololosha100501/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2023-08-27T15:14:22Z",
    "updated_at": "2023-08-27T15:14:22Z",
    "author_association": "NONE",
    "body": "> The logs indicate that the node is kinda slow though, its executing ~10-30 MGas/s, usually nodes execute ~100MGas/s. CPU and RAM look okay, so it might be a disk issue\r\n\r\nUsing Kingston SKC2500M82000G, it seems fast enough for everything",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/1694693139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

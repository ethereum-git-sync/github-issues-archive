{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/4927",
  "id": 569397312,
  "node_id": "MDU6SXNzdWU1NjkzOTczMTI=",
  "number": 4927,
  "title": "Aggregated voting summary includes validators that haven't been activated yet",
  "user": {
    "login": "zediir",
    "id": 418053,
    "node_id": "MDQ6VXNlcjQxODA1Mw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/418053?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zediir",
    "html_url": "https://github.com/zediir",
    "followers_url": "https://api.github.com/users/zediir/followers",
    "following_url": "https://api.github.com/users/zediir/following{/other_user}",
    "gists_url": "https://api.github.com/users/zediir/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zediir/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zediir/subscriptions",
    "organizations_url": "https://api.github.com/users/zediir/orgs",
    "repos_url": "https://api.github.com/users/zediir/repos",
    "events_url": "https://api.github.com/users/zediir/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zediir/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [

  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 1,
  "created_at": "2020-02-22T21:41:37Z",
  "updated_at": "2020-02-24T16:28:23Z",
  "closed_at": "2020-02-24T16:28:23Z",
  "author_association": "NONE",
  "active_lock_reason": null,
  "body": "Aggregated voting summary should probably not include validators that could not have made attestations during the epoch. Or it's missing some active ones. The following summary should have 10 active and 10 waiting to be activated (some having deposit included, some waiting for deposit inclusion). So if it was the active 10 the percentages should be multiples of 0.10.\r\n\r\n```\r\n[2020-02-22 22:33:12]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[28764] BeaconBlockRoot=0x9b5a9d406188 CommitteeIndex=4 Slot=316065 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x9b5a9d406188\r\n[2020-02-22 22:33:48]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32217] BeaconBlockRoot=0xd6ca319abb44 CommitteeIndex=6 Slot=316068 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:34:00]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32220] BeaconBlockRoot=0x83349fa6e9b8 CommitteeIndex=8 Slot=316069 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:34:12]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32223] BeaconBlockRoot=0x83349fa6e9b8 CommitteeIndex=6 Slot=316070 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:35:12]  INFO validator: Submitted new attestations AggregatorIndices=[32216] AttesterIndices=[32216] BeaconBlockRoot=0xe7dce38a199d CommitteeIndex=9 Slot=316075 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:35:24]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32222] BeaconBlockRoot=0x06f1b66185f9 CommitteeIndex=5 Slot=316076 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:35:36]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32221] BeaconBlockRoot=0xabe7faaee4fc CommitteeIndex=2 Slot=316077 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:36:36]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32219] BeaconBlockRoot=0xa398ef28a245 CommitteeIndex=8 Slot=316082 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:37:36]  INFO validator: Submitted new attestations AggregatorIndices=[] AttesterIndices=[32215] BeaconBlockRoot=0x3ba37bd82eec CommitteeIndex=4 Slot=316087 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:38:00]  INFO validator: Submitted new attestations AggregatorIndices=[32218] AttesterIndices=[32218] BeaconBlockRoot=0x65b3d98164fe CommitteeIndex=7 Slot=316089 SourceEpoch=9876 SourceRoot=0x6d3bc4f1177f TargetEpoch=9877 TargetRoot=0x4aed17f413e9\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=true correctlyVotedTarget=false epoch=9877 inclusionDistance=1 inclusionSlot=316002 newBalance=3.107376261 oldBalance=3.107377616 percentChange=-0.00004% pubKey=0x8189e4962cbc82fc\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=true correctlyVotedTarget=true epoch=9877 inclusionDistance=1 inclusionSlot=316021 newBalance=3.095676024 oldBalance=3.095669866 percentChange=0.00020% pubKey=0x9495b5725cd7bc37\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=false correctlyVotedTarget=false epoch=9877 inclusionDistance=18446744073709551615 inclusionSlot=18446744073709551615 newBalance=3.10849089 oldBalance=3.108503904 percentChange=-0.00042% pubKey=0xae5cce5a318fff05\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=true correctlyVotedTarget=true epoch=9877 inclusionDistance=2 inclusionSlot=316017 newBalance=3.105910469 oldBalance=3.105906005 percentChange=0.00014% pubKey=0x885982b3db105c62\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0xa06d83d0a62bce72\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=true correctlyVotedTarget=true epoch=9877 inclusionDistance=2 inclusionSlot=316030 newBalance=3.106854516 oldBalance=3.106850052 percentChange=0.00014% pubKey=0xb007dd53f8079256\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=true correctlyVotedSource=true correctlyVotedTarget=true epoch=9877 inclusionDistance=2 inclusionSlot=316027 newBalance=3.105946682 oldBalance=3.105937391 percentChange=0.00030% pubKey=0xa662fc6715f44c12\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=false correctlyVotedTarget=false epoch=9877 inclusionDistance=18446744073709551615 inclusionSlot=18446744073709551615 newBalance=3.2 oldBalance=3.2 percentChange=0.00000% pubKey=0x8c8b7961a450eddf\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch voting summary correctlyVotedHead=false correctlyVotedSource=true correctlyVotedTarget=true epoch=9877 inclusionDistance=1 inclusionSlot=316009 newBalance=3.106893991 oldBalance=3.106887629 percentChange=0.00020% pubKey=0xa075b8a35501e3f8\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0x97e6317650a1896c\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0x84c6507fd1fa61cd\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0xaa5722114cecbcca\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0x84fb94fa1cea68b2\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0x94eec02896f6d75f\r\n[2020-02-22 22:39:12]  INFO validator: Validator not in beacon chain pubKey=0xa4d8f8a8048450b4\r\n[2020-02-22 22:39:12]  INFO validator: Previous epoch aggregated voting summary attestationInclusionPercentage=0.46 correctlyVotedHeadPercentage=0.08 correctlyVotedSourcePercentage=0.46 correctlyVotedTargetPercentage=0.38 epoch=9877\r\n```",
  "closed_by": {
    "login": "prylabs-bulldozer[bot]",
    "id": 58059840,
    "node_id": "MDM6Qm90NTgwNTk4NDA=",
    "avatar_url": "https://avatars.githubusercontent.com/in/47372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D",
    "html_url": "https://github.com/apps/prylabs-bulldozer",
    "followers_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/followers",
    "following_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/following{/other_user}",
    "gists_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/subscriptions",
    "organizations_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/orgs",
    "repos_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/repos",
    "events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/events{/privacy}",
    "received_events_url": "https://api.github.com/users/prylabs-bulldozer%5Bbot%5D/received_events",
    "type": "Bot",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/590008681",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/4927#issuecomment-590008681",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/4927",
    "id": 590008681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5MDAwODY4MQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-22T23:30:29Z",
    "updated_at": "2020-02-22T23:30:29Z",
    "author_association": "MEMBER",
    "body": "Thanks for reporting this. If you dont mind, can you give #4928 a try?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/590008681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]

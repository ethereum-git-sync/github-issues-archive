{
  "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
  "repository_url": "https://api.github.com/repos/prysmaticlabs/prysm",
  "labels_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593/labels{/name}",
  "comments_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593/comments",
  "events_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593/events",
  "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593",
  "id": 656264233,
  "node_id": "MDU6SXNzdWU2NTYyNjQyMzM=",
  "number": 6593,
  "title": "Batch blocks sync leads to tons of atts invalid sigs error",
  "user": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 802129904,
      "node_id": "MDU6TGFiZWw4MDIxMjk5MDQ=",
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/labels/Bug",
      "name": "Bug",
      "color": "ee0701",
      "default": false,
      "description": "Something isn't working"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [

  ],
  "milestone": null,
  "comments": 6,
  "created_at": "2020-07-14T01:54:32Z",
  "updated_at": "2020-08-15T23:03:53Z",
  "closed_at": "2020-07-17T17:04:19Z",
  "author_association": "MEMBER",
  "active_lock_reason": null,
  "body": "Latest commit: `52e9155df33e180717192cdd8c7b59d173dd4024`\r\n\r\nWhen using initial sync batch verify feature, a common theme i realized (8 out of 10 times) is the initial sync would always exit early due to the following error:\r\n```\r\n[2020-07-13 18:34:38] ERROR initial-sync: Failed to process block, exiting init sync error=head at slot 214816 with weight 17765 is not eligible, FinalizedEpoch 6711 != 6712, JustifiedEpoch 6712 != 6713\r\ncould not update head\r\n```\r\n\r\nWhich eventually leads to a lot of sigs did not verify errors:\r\n```\r\nWARN blockchain: Could not receive attestation in chain service aggregationCount=8 beaconBlockRoot=0xd36efe9d934d committeeIndex=0 error=signature did not verify\r\n```\r\n\r\nThe sigs did not verify errors happen on almost all the attestations every slot after initial syncing. This lasts around 10 minutes\r\n",
  "closed_by": {
    "login": "terencechain",
    "id": 21316537,
    "node_id": "MDQ6VXNlcjIxMzE2NTM3",
    "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/terencechain",
    "html_url": "https://github.com/terencechain",
    "followers_url": "https://api.github.com/users/terencechain/followers",
    "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
    "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
    "organizations_url": "https://api.github.com/users/terencechain/orgs",
    "repos_url": "https://api.github.com/users/terencechain/repos",
    "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
    "received_events_url": "https://api.github.com/users/terencechain/received_events",
    "type": "User",
    "site_admin": false
  },
  "reactions": {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593/reactions",
    "total_count": 0,
    "+1": 0,
    "-1": 0,
    "laugh": 0,
    "hooray": 0,
    "confused": 0,
    "heart": 0,
    "rocket": 0,
    "eyes": 0
  },
  "timeline_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593/timeline",
  "performed_via_github_app": null,
  "state_reason": "completed"
}
[
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658467496",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593#issuecomment-658467496",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
    "id": 658467496,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODQ2NzQ5Ng==",
    "user": {
      "login": "fabdarice",
      "id": 2358008,
      "node_id": "MDQ6VXNlcjIzNTgwMDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2358008?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fabdarice",
      "html_url": "https://github.com/fabdarice",
      "followers_url": "https://api.github.com/users/fabdarice/followers",
      "following_url": "https://api.github.com/users/fabdarice/following{/other_user}",
      "gists_url": "https://api.github.com/users/fabdarice/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fabdarice/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fabdarice/subscriptions",
      "organizations_url": "https://api.github.com/users/fabdarice/orgs",
      "repos_url": "https://api.github.com/users/fabdarice/repos",
      "events_url": "https://api.github.com/users/fabdarice/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fabdarice/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-14T23:49:43Z",
    "updated_at": "2020-07-14T23:49:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Are you working on this @terencechain ? I saw a draft PR from you. \r\nIf not, willing to tackle this issue.",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658467496/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658470674",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593#issuecomment-658470674",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
    "id": 658470674,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODQ3MDY3NA==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-15T00:01:43Z",
    "updated_at": "2020-07-15T00:01:43Z",
    "author_association": "MEMBER",
    "body": "> Are you working on this @terencechain ? I saw a draft PR from you.\r\n> If not, willing to tackle this issue.\r\n\r\nI think we still need more investigating and testing to conclude whether this is a bug and where the bug is.  I mainly opened this issue track to the investigation process. Feel free to help us test this issue to see if it's reproducible on your end. In term of code fixes, it's still too early to tell what that looks like",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658470674/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658484830",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593#issuecomment-658484830",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
    "id": 658484830,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODQ4NDgzMA==",
    "user": {
      "login": "nisdas",
      "id": 33201827,
      "node_id": "MDQ6VXNlcjMzMjAxODI3",
      "avatar_url": "https://avatars.githubusercontent.com/u/33201827?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/nisdas",
      "html_url": "https://github.com/nisdas",
      "followers_url": "https://api.github.com/users/nisdas/followers",
      "following_url": "https://api.github.com/users/nisdas/following{/other_user}",
      "gists_url": "https://api.github.com/users/nisdas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/nisdas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/nisdas/subscriptions",
      "organizations_url": "https://api.github.com/users/nisdas/orgs",
      "repos_url": "https://api.github.com/users/nisdas/repos",
      "events_url": "https://api.github.com/users/nisdas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/nisdas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-15T00:56:27Z",
    "updated_at": "2020-07-15T00:56:54Z",
    "author_association": "MEMBER",
    "body": "@terencechain I have tried, but I cant reproduce it. Can you outline how you run it and with what flags ?",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658484830/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658815296",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593#issuecomment-658815296",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
    "id": 658815296,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY1ODgxNTI5Ng==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-15T14:51:04Z",
    "updated_at": "2020-07-15T14:51:04Z",
    "author_association": "MEMBER",
    "body": "> @terencechain I have tried, but I cant reproduce it. Can you outline how you run it and with what flags ?\r\n\r\nIt just was `--dev` and syncing from genesis to head in altona. I haven't tried on the latest commit. Maybe it's fixed",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/658815296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/660227585",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593#issuecomment-660227585",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
    "id": 660227585,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MDIyNzU4NQ==",
    "user": {
      "login": "terencechain",
      "id": 21316537,
      "node_id": "MDQ6VXNlcjIxMzE2NTM3",
      "avatar_url": "https://avatars.githubusercontent.com/u/21316537?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/terencechain",
      "html_url": "https://github.com/terencechain",
      "followers_url": "https://api.github.com/users/terencechain/followers",
      "following_url": "https://api.github.com/users/terencechain/following{/other_user}",
      "gists_url": "https://api.github.com/users/terencechain/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/terencechain/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/terencechain/subscriptions",
      "organizations_url": "https://api.github.com/users/terencechain/orgs",
      "repos_url": "https://api.github.com/users/terencechain/repos",
      "events_url": "https://api.github.com/users/terencechain/events{/privacy}",
      "received_events_url": "https://api.github.com/users/terencechain/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-17T17:04:19Z",
    "updated_at": "2020-07-17T17:04:19Z",
    "author_association": "MEMBER",
    "body": "No longer reproducible. The last few batch block improvements PR must have fixed this",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/660227585/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/674455826",
    "html_url": "https://github.com/prysmaticlabs/prysm/issues/6593#issuecomment-674455826",
    "issue_url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/6593",
    "id": 674455826,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3NDQ1NTgyNg==",
    "user": {
      "login": "sieg-i",
      "id": 12938502,
      "node_id": "MDQ6VXNlcjEyOTM4NTAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/12938502?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sieg-i",
      "html_url": "https://github.com/sieg-i",
      "followers_url": "https://api.github.com/users/sieg-i/followers",
      "following_url": "https://api.github.com/users/sieg-i/following{/other_user}",
      "gists_url": "https://api.github.com/users/sieg-i/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sieg-i/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sieg-i/subscriptions",
      "organizations_url": "https://api.github.com/users/sieg-i/orgs",
      "repos_url": "https://api.github.com/users/sieg-i/repos",
      "events_url": "https://api.github.com/users/sieg-i/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sieg-i/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-15T23:03:53Z",
    "updated_at": "2020-08-15T23:03:53Z",
    "author_association": "NONE",
    "body": "I have the same error for two days now with the batch sync, my beacon chain is not catching up anymore due to this issue. \r\n\r\nPrysm/v1.0.0-alpha.20/cbc27e0f2e2259504a77e14727b7465d5a7f7341.\r\n\r\nWhen checking the logs when it started I saw some messages like \"Roughtime reports your clock is off by more than 2 seconds\", don't know if it's related or not, in any case I enforced NTP sync afterwards.\r\n\r\nThe grafana graph is also very strange from the moment when the issue started happening, there was something going wild on with the process it seems...restarted the process several time since then, but never could catch up...\r\n\r\n[2020-08-16 00:04:31] INFO initial-sync: Processing block 0x26b8252b... 73312/81921 - estimated time remaining 1h35m39s blocksPerSecond=1.5 peers=19\r\n[2020-08-16 00:04:32] ERROR initial-sync: Failed to process block, exiting init sync error=head at slot 73279 with weight 62003 is not eligible, finalizedEpoch 2287 != 2289, justifiedEpoch 2288 != 2290\r\ncould not update head\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/blockchain.(*Service).ReceiveBlock\r\n        beacon-chain/blockchain/receive_block.go:43\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync/initial-sync.(*Service).processBlock\r\n        beacon-chain/sync/initial-sync/round_robin.go:215\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync/initial-sync.(*Service).roundRobinSync\r\n        beacon-chain/sync/initial-sync/round_robin.go:129\r\ngithub.com/prysmaticlabs/prysm/beacon-chain/sync/initial-sync.(*Service).Start\r\n        beacon-chain/sync/initial-sync/service.go:157\r\nruntime.goexit\r\n        src/runtime/asm_arm64.s:1148\r\n[2020-08-16 00:04:32]  INFO initial-sync: Synced up to slot 73311\r\n\r\n![image](https://user-images.githubusercontent.com/12938502/90322854-b6ca0e00-df59-11ea-9ca5-55a6c5c6c408.png)",
    "reactions": {
      "url": "https://api.github.com/repos/prysmaticlabs/prysm/issues/comments/674455826/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]
